import{_ as De}from"./preload-helper-388ac9d5.js";var yy=(e=>(e.BLOB="blob",e.DATE="date",e.DOUBLE="double",e.GEOMETRY="geometry",e.GLOBAL_ID="global-id",e.GUID="guid",e.INTEGER="integer",e.LONG="long",e.OID="oid",e.RASTER="raster",e.SINGLE="single",e.SMALL_INTEGER="small-integer",e.STRING="string",e.XML="xml",e))(yy||{}),rd=(e=>(e.CIRCLE="circle",e.CROSS="cross",e.DIAMOND="diamond",e.ICON="icon",e.PATH="path",e.SQUARE="square",e.TRIANGLE="triangle",e.X="x",e))(rd||{}),aa=(e=>(e.DASH="dash",e.DASHDOT="dash-dot",e.DASHDOTDOT="short-dash-dot-dot",e.DOT="dot",e.LONGDASH="long-dash",e.LONGDASHDOT="long-dash-dot",e.LONGDASHDOTDOT="long-dash-dot-dot",e.NONE="none",e.NULL="none",e.SHORTDASH="short-dash",e.SHORTDASHDOT="short-dash-dot",e.SHORTDASHDOTDOT="short-dash-dot-dot",e.SHORTDOT="short-dot",e.SOLID="solid",e))(aa||{}),zZ=(e=>(e.BEVEL="bevel",e.MITER="miter",e.ROUND="round",e))(zZ||{}),GZ=(e=>(e.ROUND="round",e.BUTT="butt",e.SQUARE="square",e))(GZ||{}),qZ=(e=>(e.BDIAG="backward-diagonal",e.CROSS="cross",e.DIAG_CROSS="diagonal-cross",e.FDIAG="forward-diagonal",e.HORIZONTAL="horizontal",e.NONE="none",e.NULL="none",e.SOLID="solid",e.VERTICAL="vertical",e))(qZ||{}),Ti=(e=>(e.POINT="Point",e.MULTIPOINT="MultiPoint",e.LINESTRING="LineString",e.MULTILINESTRING="MultiLineString",e.POLYGON="Polygon",e.MULTIPOLYGON="MultiPolygon",e.LINEARRING="LinearRing",e.EXTENT="Extent",e.NONE="None",e.UNKNOWN="Unknown",e))(Ti||{}),N5=(e=>(e.Simple="simple",e.Unique="uniqueValue",e.ClassBreaks="classBreaks",e.Unknown="unknown",e))(N5||{}),Ai=(e=>(e.FEATURE="esri-feature",e.MAPIMAGE="esri-map-image",e.TILE="esri-tile",e.IMAGERY="esri-imagery",e.GRAPHIC="esri-graphic",e.WMS="ogc-wms",e.WFS="ogc-wfs",e.GEOJSON="file-geojson",e.CSV="file-csv",e.SHAPEFILE="file-shape",e.OSM="osm-tile",e.UNKNOWN="unknown",e.SUBLAYER="sublayer",e))(Ai||{}),vc=(e=>(e.FEATURE="feature",e.GRAPHIC="graphic",e.IMAGERY="imagery",e.MAPIMAGE="map-image",e.OSM="osm-tile",e.TILE="tile",e.UNKNOWN="unknown",e.WMS="wms",e))(vc||{}),fl=(e=>(e.ESRI_FEATURE="esriFeature",e.ESRI_RASTER="esriRaster",e.ESRI_TILE="esriTile",e.OSM_TILE="osmTile",e.OGC_RASTER="ogcRaster",e.UNKNOWN="unknown",e))(fl||{}),fn=(e=>(e.POINT="Point",e.MULTIPOINT="MultiPoint",e.LINESTRING="LineString",e.MULTILINESTRING="MultiLineString",e.POLYGON="Polygon",e.MULTIPOLYGON="MultiPolygon",e))(fn||{}),as=(e=>(e.GEOMETRIC="geometric",e.SYMBOLIC="symbolic",e.HYBRID="hybrid",e.NONE="none",e))(as||{}),nl=(e=>(e.NEW="new",e.INITIATING="initiating",e.INITIATED="initiated",e.TERMINATING="terminating",e.TERMINATED="terminated",e))(nl||{}),co=(e=>(e.NEW="new",e.LOADING="loading",e.LOADED="loaded",e.ERROR="error",e))(co||{}),sl=(e=>(e.NOT_LOADED="not-loaded",e.REFRESH="refresh",e.UP_TO_DATE="up-to-date",e))(sl||{}),qg=(e=>(e.ESRI="esri",e.TEXT="text",e.IMAGE="image",e.HTML="html",e.XML="xml",e.JSON="json",e.UNKNOWN="unknown",e))(qg||{}),Ju=(e=>(e.SYMBOL="symbol",e.GRID="grid",e.EXTENT="extent",e.INITIAL="initial",e.API="api",e.PERMANENT="permanent",e))(Ju||{}),ss=(e=>(e.BoundaryZoom="boundaryZoom",e.Datatable="datatable",e.Identify="identify",e.Metadata="metadata",e.Opacity="opacity",e.Refresh="refresh",e.Reload="reload",e.Remove="remove",e.Settings="settings",e.Symbology="symbology",e.Visibility="visibility",e))(ss||{});class Zd{attributes;geometry;style;id;constructor(t,i,r){this.geometry=t,i?this.id=i:this.id=vb.sharedUtils.generateUUID(),r?this.attributes=r:this.attributes={}}_hover;get hover(){return this._hover}set hover(t){t&&this._hover&&this._hover.id!==t.id&&this.removeHover(),this._hover=t}removeHover(){this._hover&&(this._hover=void 0)}}function h(e,t,i,r){var n,s=arguments.length,o=s<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o}function Lpe(e){return e&&e.release&&typeof e.release=="function"}function Ppe(e){return e&&e.acquire&&typeof e.acquire=="function"}let Am=class CR{constructor(t,i,r,n=1,s=0){if(this._ctor=t,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=n,this._pool=new Array(s),this._initialSize=s,this._ctor)for(let o=0;o<s;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...t){let i;if(CR.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let n=0;n<r;n++)this._pool[n]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...t):Ppe(i)&&i.acquire(...t),i}release(t){t&&!CR.test.disabled&&(this._releaseFunction?this._releaseFunction(t):Lpe(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let i=t;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}};Am.test={disabled:!1};function Npe(e){e.length=0}let Bo=class{constructor(t=50,i=50){this._pool=new Am(Array,void 0,Npe,i,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return XC.acquire()}static release(t){return XC.release(t)}static prune(){XC.prune()}};const XC=new Bo(100);function Grt(e){const t=[];return function*(){yield*t;for(const i of e)t.push(i),yield i}}function Fpe(e,t){for(const i of e)if(i!=null&&t(i))return i}function DT(e){return e!=null&&typeof e[Symbol.iterator]=="function"}const Dpe=null;function ee(e){return e!=null}function Re(e){return e==null}function Ff(e,t){return ee(e)?t(e):Dpe}function qrt(e){return e}function Uo(e,t){return Wf(e,t),e}function Wf(e,t){if(Re(e))throw new Error(t??"value is None")}function LN(e,t){return ee(e)?e:typeof t=="function"?t():t}function Jj(e,t){return ee(e)?e:t}function qr(e){return ee(e)&&e.destroy(),null}function Hrt(e){return ee(e)&&e.dispose(),null}function yn(e){return ee(e)&&e.remove(),null}function Vx(e){return ee(e)&&e.abort(),null}function Wrt(e){return ee(e)&&e.release(),null}function jpe(e,t,i){return ee(e)&&ee(t)?ee(i)?i(e,t):e.equals(t):e===t}function Upe(e){return null}function Jrt(e,t){const i=new Array;for(const r of e)i.push(j_(r,null,t));return i}function Zrt(e,t){for(const i of e)Ff(i,t)}function j_(e,t,i){return ee(e)?i(e):t}function Yrt(e){return e.filter(t=>ee(t))}function HZ(e,...t){let i=e;for(let r=0;r<t.length&&i;++r)i=i[t[r]];return i}function Krt(e){return e}let So=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(i=>{t+=i.length}),t}add(t,i){if(DT(t)){const r=this._getOrCreateGroup(i);for(const n of t)this._isHandle(n)&&r.push(n)}else this._isHandle(t)&&this._getOrCreateGroup(i).push(t);return this}forEach(t,i){if(typeof t=="function")this._groups.forEach(r=>r.forEach(t));else{const r=this._getGroup(t);r&&i&&r.forEach(i)}}has(t){return this._groups.has(this._ensureGroupKey(t))}remove(t){if(typeof t!="string"&&DT(t)){for(const i of t)this.remove(i);return this}return this.has(t)?(this._removeAllFromGroup(this._getGroup(t)),this._groups.delete(this._ensureGroupKey(t)),this):this}removeAll(){return this._groups.forEach(t=>this._removeAllFromGroup(t)),this._groups.clear(),this}_isHandle(t){return t&&!!t.remove}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const i=[];return this._groups.set(this._ensureGroupKey(t),i),i}_getGroup(t){return this._groups.get(this._ensureGroupKey(t))}_ensureGroupKey(t){return t||"_default_"}_removeAllFromGroup(t){t.forEach(i=>i.remove())}};const WZ=Symbol("Accessor-beforeDestroy");function F5(e){return cw(()=>e.forEach(t=>ee(t)&&t.remove()))}function cw(e){return{remove:()=>{e&&(e(),e=void 0)}}}let Z2=class gy{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*gy._m}getInt(){return this._seed=(gy._a*this._seed+gy._c)%gy._m,this._seed}getFloat(){return this.getInt()/(gy._m-1)}getIntRange(t,i){return Math.round(this.getFloatRange(t,i))}getFloatRange(t,i){const r=i-t;return t+this.getInt()/gy._m*r}};Z2._m=2147483647,Z2._a=48271,Z2._c=0;function Vpe(e,t){return t?e.filter((i,r,n)=>n.findIndex(t.bind(null,i))===r):e.filter((i,r,n)=>n.indexOf(i)===r)}function D5(e,t,i){if(Re(e)&&Re(t))return!0;if(Re(e)||Re(t)||e.length!==t.length)return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Xrt(e,t){let i=e.length!==t.length;i&&(e.length=t.length);for(let r=0;r<t.length;++r)e[r]!==t[r]&&(e[r]=t[r],i=!0);return i}function ent(e,t,i){let r,n;return i?(r=t.filter(s=>!e.some(o=>i(o,s))),n=e.filter(s=>!t.some(o=>i(o,s)))):(r=t.filter(s=>!e.includes(s)),n=e.filter(s=>!t.includes(s))),{added:r,removed:n}}function tnt(e){return e&&typeof e.length=="number"}const Bpe=!!Array.prototype.fill;function zpe(e,t){if(Bpe)return new Array(e).fill(t);const i=new Array(e);for(let r=0;r<e;r++)i[r]=t;return i}function int(e,t){t===void 0&&(t=e,e=0);const i=new Array(t-e);for(let r=e;r<t;r++)i[r-e]=r;return i}let JZ=class{constructor(){this.last=0}};const ZZ=new JZ;function $R(e,t,i,r){r=r||ZZ;const n=Math.max(0,r.last-10);for(let o=n;o<i;++o)if(e[o]===t)return r.last=o,o;const s=Math.min(n,i);for(let o=0;o<s;++o)if(e[o]===t)return r.last=o,o;return-1}function YZ(e,t,i,r){const n=i??e.length,s=$R(e,t,n,r);if(s!==-1)return e[s]=e[n-1],i==null&&e.pop(),t}const Su=new Set;function Gpe(e,t,i=e.length,r=t.length,n,s){if(r===0||i===0)return i;Su.clear();for(let a=0;a<r;++a)Su.add(t[a]);n=n||ZZ;const o=Math.max(0,n.last-10);for(let a=o;a<i;++a)if(Su.has(e[a])&&(s&&s.push(e[a]),Su.delete(e[a]),e[a]=e[i-1],--i,--a,Su.size===0||i===0))return Su.clear(),i;for(let a=0;a<o;++a)if(Su.has(e[a])&&(s&&s.push(e[a]),Su.delete(e[a]),e[a]=e[i-1],--i,--a,Su.size===0||i===0))return Su.clear(),i;return Su.clear(),i}function qpe(e,t){const i=e.indexOf(t);return i!==-1?(e.splice(i,1),t):null}function nnt(e){return e instanceof ArrayBuffer}function Hpe(e){return e&&e.constructor&&e.constructor.name==="Int8Array"}function Wpe(e){return e&&e.constructor&&e.constructor.name==="Uint8Array"}function Jpe(e){return e&&e.constructor&&e.constructor.name==="Uint8ClampedArray"}function Zpe(e){return e&&e.constructor&&e.constructor.name==="Int16Array"}function Ype(e){return e&&e.constructor&&e.constructor.name==="Uint16Array"}function Kpe(e){return e&&e.constructor&&e.constructor.name==="Int32Array"}function Qpe(e){return e&&e.constructor&&e.constructor.name==="Uint32Array"}function Xpe(e){return e&&e.constructor&&e.constructor.name==="Float32Array"}function efe(e){return e&&e.constructor&&e.constructor.name==="Float64Array"}const snt=1024;function KZ(e,t){let i;if(t)for(i in e)e.hasOwnProperty(i)&&(e[i]===void 0?delete e[i]:e[i]instanceof Object&&KZ(e[i],!0));else for(i in e)e.hasOwnProperty(i)&&e[i]===void 0&&delete e[i];return e}function Le(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=tY(e);if(ee(t))return t;if(QZ(e))return e.clone();if(XZ(e))return e.map(Le);if(eY(e))return e.clone();const i={};for(const r of Object.getOwnPropertyNames(e))i[r]=Le(e[r]);return i}function OR(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=tY(e);if(ee(t))return t;if(XZ(e)){let i=!0;const r=e.map(n=>{const s=OR(n);return n!=null&&s==null&&(i=!1),s});return i?r:null}if(QZ(e))return e.clone();if(!eY(e)){const i=new(Object.getPrototypeOf(e)).constructor;for(const r of Object.getOwnPropertyNames(e)){const n=e[r],s=OR(n);if(n!=null&&s==null)return null;i[r]=s}return i}return null}function QZ(e){return typeof e.clone=="function"}function XZ(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function eY(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function Zj(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function tY(e){if(Hpe(e)||Wpe(e)||Jpe(e)||Zpe(e)||Ype(e)||Kpe(e)||Qpe(e)||Xpe(e)||efe(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[i,r]of e)t.set(i,Le(r));return t}if(e instanceof Set){const t=new Set;for(const i of e)t.add(Le(i));return t}return null}function PN(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e||{}).getTime=="function"&&typeof(t||{}).getTime=="function"&&e.getTime()===t.getTime()||!1}function tfe(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&D5(e,t):e instanceof Set?t instanceof Set&&rfe(e,t):e instanceof Map?t instanceof Map&&nfe(e,t):!!Zj(e)&&Zj(t)&&ife(e,t))}function ife(e,t){if(e===null||t===null)return!1;const i=Object.keys(e);if(t===null||Object.keys(t).length!==i.length)return!1;for(const r of i)if(e[r]!==t[r]||!Object.prototype.hasOwnProperty.call(t,r))return!1;return!0}function rfe(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function nfe(e,t){if(e.size!==t.size)return!1;for(const[i,r]of e){const n=t.get(i);if(n!==r||n===void 0&&!t.has(i))return!1}return!0}function zn(e){return e?e.__accessor__?e.__accessor__:e.propertyInvalidated?e:null:null}function sfe(e,t){return e!=null&&e.metadatas&&e.metadatas[t]!=null}function QM(e,t,i){return i?jT(e,t,{policy:i,path:""}):jT(e,t,null)}function jT(e,t,i){return t?Object.keys(t).reduce((r,n)=>{let s=null,o="merge";if(i&&(s=i.path?`${i.path}.${n}`:n,o=i.policy(s)),o==="replace"||o==="replace-arrays"&&Array.isArray(r[n]))return r[n]=t[n],r;if(r[n]===void 0)return r[n]=Le(t[n]),r;let a=r[n],l=t[n];if(a===l)return r;if(Array.isArray(l)||Array.isArray(r))a=a?Array.isArray(a)?r[n]=a.concat():r[n]=[a]:r[n]=[],l&&(Array.isArray(l)||(l=[l]),l.forEach(u=>{a.includes(u)||a.push(u)}));else if(l&&typeof l=="object")if(i){const u=i.path;i.path=s,r[n]=jT(a,l,i),i.path=u}else r[n]=jT(a,l,null);else r.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(r[n]=l);return r},e||{}):e}function iY(e){return Array.isArray(e)?e:e.split(".")}function Yj(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function ofe(e){if(Array.isArray(e)){const t=[];for(const i of e)t.push(...Yj(i));return t}return Yj(e)}function rY(e,t,i,r){const n=ofe(t);if(n.length!==1){const s=n.map(o=>r(e,o,i));return F5(s)}return r(e,n[0],i)}function nY(e){let t=!1;return()=>{t||(t=!0,e())}}function sY(e,t){const i=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const n=parseInt(i,10);if(!isNaN(n))return Array.isArray(t)?t[n]:t.getItemAt(n)}const r=zn(t);return sfe(r,i)?r.get(i):t[i]}function oY(e,t,i){if(e==null)return e;const r=sY(t[i],e);return!r&&i<t.length-1?void 0:i===t.length-1?r:oY(r,t,i+1)}function WS(e,t,i=0){return typeof t!="string"||t.includes(".")?oY(e,iY(t),i):sY(t,e)}function UT(e,t){return WS(e,t)}function Kj(e,t){return WS(t,e)!==void 0}function JS(e){let t=e.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!i){t=Object.create(t);for(const r in t)t[r]=Le(t[r]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function j5(e,t){const i=JS(e);let r=i[t];return r||(r=i[t]={}),r}function afe(e,t){return QM(e,t,ufe)}const lfe=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function ufe(e){return lfe.test(e)?"replace":"merge"}let Df;function Ze(e){return typeof Df[e]=="function"?Df[e]=Df[e](globalThis):Df[e]}Df=globalThis.dojoConfig?.has||globalThis.esriConfig?.has?{...globalThis.dojoConfig?.has,...globalThis.esriConfig?.has}:{},Ze.add=(e,t,i,r)=>((r||Df[e]===void 0)&&(Df[e]=t),i&&Ze(e)),Ze.cache=Df,Ze.add("esri-deprecation-warnings",!0),(()=>{Ze.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(Ze.add("host-browser",e),Ze.add("host-node",typeof globalThis.process=="object"&&globalThis.process.versions?.node&&globalThis.process.versions.v8),Ze.add("dom",e),Ze("host-browser")){const t=navigator,i=t.userAgent,r=t.appVersion,n=parseFloat(r);if(Ze.add("wp",parseFloat(i.split("Windows Phone")[1])||void 0),Ze.add("msapp",parseFloat(i.split("MSAppHost/")[1])||void 0),Ze.add("khtml",r.includes("Konqueror")?n:void 0),Ze.add("edge",parseFloat(i.split("Edge/")[1])||void 0),Ze.add("opr",parseFloat(i.split("OPR/")[1])||void 0),Ze.add("webkit",!Ze("wp")&&!Ze("edge")&&parseFloat(i.split("WebKit/")[1])||void 0),Ze.add("chrome",!Ze("edge")&&!Ze("opr")&&parseFloat(i.split("Chrome/")[1])||void 0),Ze.add("android",!Ze("wp")&&parseFloat(i.split("Android ")[1])||void 0),Ze.add("safari",!r.includes("Safari")||Ze("wp")||Ze("chrome")||Ze("android")||Ze("edge")||Ze("opr")?void 0:parseFloat(r.split("Version/")[1])),Ze.add("mac",r.includes("Macintosh")),!Ze("wp")&&i.match(/(iPhone|iPod|iPad)/)){const s=RegExp.$1.replace(/P/,"p"),o=i.match(/OS ([\d_]+)/)?RegExp.$1:"1",a=parseFloat(o.replace(/_/,".").replace(/_/g,""));Ze.add(s,a),Ze.add("ios",a)}Ze("webkit")||(!i.includes("Gecko")||Ze("wp")||Ze("khtml")||Ze("edge")||Ze.add("mozilla",n),Ze("mozilla")&&Ze.add("ff",parseFloat(i.split("Firefox/")[1]||i.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),i=/iPhone/i.test(e);t&&Ze.add("esri-mobile",t),i&&Ze.add("esri-iPhone",i),Ze.add("esri-geolocation",!!navigator.geolocation)}Ze.add("esri-wasm","WebAssembly"in globalThis),Ze.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),Ze.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),Ze.add("esri-atomics","Atomics"in globalThis),Ze.add("esri-workers","Worker"in globalThis),Ze.add("web-feat:cache","caches"in globalThis),Ze.add("esri-workers-arraybuffer-transfer",!Ze("safari")||Number(Ze("safari"))>=12),Ze.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),Ze.add("featurelayer-simplify-payload-size-factors",[1,1,4]),Ze.add("featurelayer-snapshot-enabled",!0),Ze.add("featurelayer-snapshot-point-min-threshold",8e4),Ze.add("featurelayer-snapshot-point-max-threshold",4e5),Ze.add("featurelayer-snapshot-point-coverage",.1),Ze.add("featurelayer-advanced-symbols",!1),Ze.add("featurelayer-pbf",!0),Ze.add("featurelayer-pbf-statistics",!1),Ze.add("feature-layers-workers",!0),Ze.add("feature-polyline-generalization-factor",1),Ze.add("mapview-transitions-duration",200),Ze.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),Ze.add("mapserver-pbf-version-support",10.81),Ze.add("mapservice-popup-identify-max-tolerance",20),Ze.add("heatmap-allow-raster-fallback",!0),Ze.add("heatmap-force-raster",!1),Ze("host-webworker")||Ze("host-browser")&&(Ze.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),Ze.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{Ze.add("esri-image-decode",!0,!0,!0)}).catch(()=>{Ze.add("esri-image-decode",!1,!0,!0)})}return!1}),Ze.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();function aY(e,t,i=!1){return uY(e,t,i)}function ZS(e,t){if(t!=null)return t[e]||lY(e.split("."),!1,t)}function _o(e,t,i){const r=e.split("."),n=r.pop(),s=lY(r,!0,i);s&&n&&(s[n]=t)}function lY(e,t,i){let r=i;for(const n of e){if(r==null)return;if(!(n in r)){if(!t)return;r[n]={}}r=r[n]}return r}function uY(e,t,i){return t?Object.keys(t).reduce((r,n)=>{let s=r[n],o=t[n];return s===o?r:s===void 0?(r[n]=Le(o),r):(Array.isArray(o)||Array.isArray(r)?(s=s?Array.isArray(s)?r[n]=s.concat():r[n]=[s]:r[n]=[],o&&(Array.isArray(o)||(o=[o]),i?o.forEach(a=>{s.includes(a)||s.push(a)}):r[n]=o.concat())):o&&typeof o=="object"?r[n]=uY(s,o,i):r.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(r[n]=o),r)},e||{}):e}const Ri={analysisTheme:{accentColor:[255,128,0],textColor:"white"},apiKey:void 0,applicationUrl:globalThis.location?.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!1,portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(aY(Ri,globalThis.esriConfig,!0),delete Ri.has),!Ri.assetsPath){{const e="4.26.5";Ri.assetsPath=`https://js.arcgis.com/${e.slice(0,-2)}/@arcgis/core/assets`}Ri.defaultAssetsPath=Ri.assetsPath}const cfe=/\{([^\}]+)\}/g;function Qj(e){return e??""}function dc(e,t){return e.replace(cfe,typeof t=="object"?(i,r)=>Qj(ZS(r,t)):(i,r)=>Qj(t(r)))}function ont(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,i=>t&&t.includes(i)?i:`\\${i}`)}function NN(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}function ant(e){return new DOMParser().parseFromString(e||"","text/html").body.innerText||""}const Xj={info:0,warn:1,error:2,none:3};let et=class eo{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,eo._loggers[this.module]=this;const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=eo.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){const t=this;return{loggedMessages:t._loggedMessages,clearLoggedWarnings:()=>t._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(t={}){const i=eo._loggers;return eo._loggers=t,i},set throttlingDisabled(t){eo._throttlingDisabled=t}}}static getLogger(t){let i=eo._loggers[t];return i||(i=new eo({module:t})),i}_log(t,i,...r){if(this._matchLevel(t)){if(i!=="always"&&!eo._throttlingDisabled){const n=this._argsToKey(r),s=this._loggedMessages[t].get(n);if(i==="once"&&s!=null||i==="oncePerTick"&&s&&s>=eo._tickCounter)return;this._loggedMessages[t].set(n,eo._tickCounter),eo._scheduleTickCounterIncrement()}for(const n of Ri.log.interceptors)if(n(t,this.module,...r))return;this._inheritedWriter()(t,this.module,...r)}}_parentWithMember(t,i){let r=this;for(;ee(r);){const n=r[t];if(ee(n))return n;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(t,i,...r){console[t](`[${i}]`,...r)}_matchLevel(t){const i=Ri.log.level?Ri.log.level:"warn";return Xj[this._parentWithMember("level",i)]<=Xj[t]}_argsToKey(...t){return NN(JSON.stringify(t,(r,n)=>typeof n!="object"||Array.isArray(n)?n:"[Object]"))}static _scheduleTickCounterIncrement(){eo._tickCounterScheduled||(eo._tickCounterScheduled=!0,Promise.resolve().then(()=>{eo._tickCounter++,eo._tickCounterScheduled=!1}))}};et._loggers={},et._tickCounter=0,et._tickCounterScheduled=!1,et._throttlingDisabled=!1;var Fd;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED"})(Fd||(Fd={}));let hfe=class{constructor(t,i){this._observers=t,this._observer=i}remove(){qpe(this._observers,this._observer)}},cY=class{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return dfe;this._observers==null&&(this._observers=[]);const i=this._observers;let r=!1,n=!1;const s=i.length;for(let o=0;o<s;++o){const a=i[o];if(a.destroyed)n=!0;else if(a===t){r=!0;break}}return r||(i.push(t),n&&this._removeDestroyedObservers()),new hfe(i,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const i=t.length;let r=0;for(let n=0;n<i;++n){for(;n+r<i&&t[n+r].destroyed;)++r;if(r>0){if(!(n+r<i))break;t[n]=t[n+r]}}t.length=i-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const i of t)i.onCommitted();this._observers=null}}};const dfe={remove:()=>{}};var xt;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.USER=6]="USER"})(xt||(xt={}));const RR=xt.USER+1;function pa(e){switch(e){case"defaults":return xt.DEFAULTS;case"service":return xt.SERVICE;case"portal-item":return xt.PORTAL_ITEM;case"web-scene":return xt.WEB_SCENE;case"web-map":return xt.WEB_MAP;case"user":return xt.USER;default:return null}}function Bx(e){switch(e){case xt.DEFAULTS:return"defaults";case xt.SERVICE:return"service";case xt.PORTAL_ITEM:return"portal-item";case xt.WEB_SCENE:return"web-scene";case xt.WEB_MAP:return"web-map";case xt.USER:return"user"}return void 0}function pfe(e){return Bx(e)}var Xi;(function(e){e[e.Dirty=1]="Dirty",e[e.Overriden=2]="Overriden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(Xi||(Xi={}));const VT={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},U_=[];let Y2=VT;function ci(e){Y2.onObservableAccessed(e)}let XM=!1,eI=!1;function Yd(e,t,i){if(XM)return FN(e,t,i);hY(e);const r=t.call(i);return dY(),r}function ffe(e,t){return Yd(VT,e,t)}function FN(e,t,i){const r=XM;XM=!0,hY(e);let n=null;try{n=t.call(i)}catch(s){eI&&et.getLogger("esri.core.accessorSupport.tracking").error(s)}return dY(),XM=r,n}function hY(e){Y2=e,U_.push(e)}function dY(){const e=U_.length;if(e>1){const t=U_.pop();Y2=U_[e-2],t.onTrackingEnd()}else if(e===1){const t=U_.pop();Y2=VT,t.onTrackingEnd()}else Y2=VT}function pY(e,t){const i=t.observerObject;if(i.flags&Xi.DepTrackingInitialized)return;const r=eI;eI=!1,i.flags&Xi.AutoTracked?FN(t,t.metadata.get,e):fY(e,t),eI=r}const mfe=[];function fY(e,t){const i=t.observerObject;i.flags&Xi.ExplicitlyTracking||(i.flags|=Xi.ExplicitlyTracking,FN(t,()=>{const r=t.metadata.dependsOn||mfe;for(const n of r)if(typeof n!="string"||n.includes(".")){const s=iY(n);for(let o=0,a=e;o<s.length&&a!=null&&typeof a=="object";++o)a=eU(a,s[o],o!==s.length-1)}else eU(e,n,!1)}),i.flags&=~Xi.ExplicitlyTracking)}function eU(e,t,i){const r=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(e)?e[s]:e.getItemAt(s)}const n=zn(e)?.properties.get(r);return n&&(ci(n.observerObject),pY(e,n)),i?e[r]:void 0}let tU=class{constructor(t,i,r){this.properties=t,this.propertyName=i,this.metadata=r,this.observerObject=new yfe,this._accessed=null,this._handles=null,this.observerObject.flags=Xi.Dirty|(r.nonNullable?Xi.NonNullable:0)|(r.hasOwnProperty("value")?Xi.HasDefaultValue:0)|(r.get===void 0?Xi.DepTrackingInitialized:0)|(r.dependsOn===void 0?Xi.AutoTracked:0),iU.register(this,this.observerObject)}destroy(){this.observerObject.destroy(),this._accessed=null,this._clearObservationHandles(),iU.unregister(this)}getComputed(){const t=this.observerObject;ci(t);const i=this.properties.store,r=this.propertyName,n=t.flags,s=i.get(r);if(n&Xi.Computing||~n&Xi.Dirty&&i.has(r))return s;t.flags|=Xi.Computing;const o=this.properties.host;let a;n&Xi.AutoTracked?a=Yd(this,this.metadata.get,o):(fY(o,this),a=this.metadata.get.call(o)),i.set(r,a,xt.COMPUTED);const l=i.get(r);return l===s?t.flags&=~Xi.Dirty:ffe(this.commit,this),t.flags&=~Xi.Computing,l}onObservableAccessed(t){t!==this.observerObject&&(this._accessed===null&&(this._accessed=[]),this._accessed.includes(t)||this._accessed.push(t))}onTrackingEnd(){this._clearObservationHandles();const t=this.observerObject;t.flags|=Xi.DepTrackingInitialized;const i=this._accessed;if(i===null)return;let r=this._handles;r===null&&(r=this._handles=[]);for(let n=0;n<i.length;++n)r.push(i[n].observe(t));i.length=0}notifyChange(){const t=this.observerObject;t.onInvalidated(),t.onCommitted()}invalidate(){this.observerObject.onInvalidated()}commit(){const t=this.observerObject;t.flags&=~Xi.Dirty,t.onCommitted()}_clearObservationHandles(){const t=this._handles;if(t!==null){for(let i=0;i<t.length;++i)t[i].remove();t.length=0}}},yfe=class extends cY{constructor(){super(...arguments),this.flags=0}onInvalidated(){~this.flags&Xi.Overriden&&(this.flags|=Xi.Dirty);const t=this._observers;if(t&&t.length>0)for(const i of t)i.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const i=t.slice();for(const r of i)r.onCommitted()}}destroy(){this.flags&Xi.Dirty&&this.onCommitted(),super.destroy()}};const iU=new FinalizationRegistry(e=>{e.destroy()});let gfe=class mY{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new mY;return this._values.forEach((r,n)=>{t&&t.has(n)||i.set(n,Le(r))}),i}get(t){return this._values.get(t)}originOf(){return xt.USER}keys(){return[...this._values.keys()]}set(t,i){this._values.set(t,i)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}};function fE(e,t,i){return e!==void 0}function rU(e,t,i,r){return e!==void 0&&(!(i==null&&e.observerObject.flags&Xi.NonNullable)||(r.lifecycle,Fd.INITIALIZING,!1))}function vfe(e){return e&&typeof e.destroy=="function"}et.getLogger("esri.core.accessorSupport.Properties");let bfe=class{constructor(t){this.host=t,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=Fd.INITIALIZING,this.store=new gfe,this._origin=xt.USER;const i=this.host.constructor.__accessorMetadata__;for(const r in i){const n=new tU(this,r,i[r]);this.properties.set(r,n)}this.metadatas=i}initialize(){this.lifecycle=Fd.CONSTRUCTING}constructed(){this.lifecycle=Fd.CONSTRUCTED}destroy(){this.destroyed=!0;for(const[t,i]of this.properties){if(i.metadata.autoDestroy){const r=this.internalGet(t);r&&vfe(r)&&(r.destroy(),~i.observerObject.flags&Xi.NonNullable&&this._internalSet(i,null))}i.destroy()}}get initialized(){return this.lifecycle!==Fd.INITIALIZING}get(t){const i=this.properties.get(t);if(i.metadata.get)return i.getComputed();ci(i.observerObject);const r=this.store;return r.has(t)?r.get(t):i.metadata.value}originOf(t){const i=this.store.originOf(t);if(i===void 0){const r=this.properties.get(t);if(r!==void 0&&r.observerObject.flags&Xi.HasDefaultValue)return"defaults"}return Bx(i)}has(t){return!!this.properties.has(t)&&this.store.has(t)}keys(){return[...this.properties.keys()]}internalGet(t){const i=this.properties.get(t);if(fE(i))return this.store.has(t)?this.store.get(t):i.metadata.value}internalSet(t,i){const r=this.properties.get(t);fE(r)&&this._internalSet(r,i)}getDependsInfo(t,i,r){const n=this.properties.get(i);if(!fE(n))return"";const s=new Set,o=Yd({onObservableAccessed:l=>s.add(l),onTrackingEnd:()=>{}},()=>n.metadata.get?.call(t));let a=`${r}${t.declaredClass.split(".").pop()}.${i}: ${o}
`;if(s.size===0)return a;r+="  ";for(const l of s){if(!(l instanceof tU))continue;const u=l.properties.host,c=l.propertyName,d=zn(u);a+=d?d.getDependsInfo(u,c,r):`${r}${c}: undefined
`}return a}setAtOrigin(t,i,r){const n=this.properties.get(t);if(fE(n))return this._setAtOrigin(n,i,r)}isOverridden(t){const i=this.properties.get(t);return i!==void 0&&!!(i.observerObject.flags&Xi.Overriden)}clearOverride(t){const i=this.properties.get(t),r=i?.observerObject;r&&r.flags&Xi.Overriden&&(r.flags&=~Xi.Overriden,i.notifyChange())}override(t,i){const r=this.properties.get(t);if(!rU(r,t,i,this))return;const n=r.metadata.cast;if(n){const s=this._cast(n,i),{valid:o,value:a}=s;if(e$.release(s),!o)return;i=a}r.observerObject.flags|=Xi.Overriden,this._internalSet(r,i)}set(t,i){const r=this.properties.get(t);if(!rU(r,t,i,this))return;const n=r.metadata.cast;if(n){const o=this._cast(n,i),{valid:a,value:l}=o;if(e$.release(o),!a)return;i=l}const s=r.metadata.set;s?s.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(t){this._origin=pa(t)}getDefaultOrigin(){return Bx(this._origin)}notifyChange(t){const i=this.properties.get(t);i!==void 0&&i.notifyChange()}invalidate(t){const i=this.properties.get(t);i!==void 0&&i.invalidate()}commit(t){const i=this.properties.get(t);i!==void 0&&i.commit()}_internalSet(t,i){const r=this.lifecycle!==Fd.INITIALIZING?this._origin:xt.DEFAULTS;this._setAtOrigin(t,i,r)}_setAtOrigin(t,i,r){const n=this.store,s=t.propertyName;n.has(s,r)&&PN(i,n.get(s))&&~t.observerObject.flags&Xi.Overriden&&r===n.originOf(s)||(t.invalidate(),n.set(s,i,r),t.commit(),pY(this.host,t))}_cast(t,i){const r=e$.acquire();return r.valid=!0,r.value=i,t&&(r.value=t.call(this.host,i,r)),r}},wfe=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const e$=new Am(wfe);function _fe(e,t){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(i,r)=>{if(r==="")return"$";const n=ZS(r,t),s=n??"";if(s===void 0)throw new Error(`could not find key "${r}" in template`);return s.toString()})}let yY=class gY{constructor(t,i,r){this.name=t,this.details=r,this instanceof gY&&(this.message=(i&&_fe(i,r))??"")}toString(){return"["+this.name+"]: "+this.message}},Ce=class tI extends yY{constructor(t,i,r){if(super(t,i,r),!(this instanceof tI))return new tI(t,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return Le(i)}catch{return"[object]"}}))}}catch(t){throw et.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new tI(t.name,t.message,t.details)}};Ce.prototype.type="error";function BT(e,t,i){if(e&&t)if(typeof t=="object")for(const r of Object.getOwnPropertyNames(t))BT(e,r,t[r]);else{if(t.includes(".")){const n=t.split("."),s=n.splice(n.length-1,1)[0];return void BT(UT(e,n),s,i)}const r=e.__accessor__;r!=null&&xfe(t,r),e[t]=i}}function xfe(e,t){if(Ze("esri-unknown-property-errors")&&!Sfe(e,t))throw new Ce("set:unknown-property",Efe(e,t))}function Sfe(e,t){return t.metadatas[e]!=null}function Efe(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}let vY=class extends Am{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=Upe(this._set)}acquire(...t){const i=super.acquire(...t);return this._set.delete(i),i}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}};const mE=[];function zT(e){mE.push(e),mE.length===1&&queueMicrotask(()=>{const t=mE.slice();mE.length=0;for(const i of t)i()})}let K2=class{constructor(t,i=30){this.name=t,this._counter=0,this._samples=new Array(i)}record(t){ee(t)&&(this._samples[++this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort((t,i)=>t-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((t,i)=>t+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var kR;(function(e){const t=(s,o,a,l)=>{let u=o,c=o;const d=a>>>1,f=s[u-1];for(;c<=d;){c=u<<1,c<a&&l(s[c-1],s[c])<0&&++c;const m=s[c-1];if(l(m,f)<=0)break;s[u-1]=m,u=c}s[u-1]=f},i=(s,o)=>s<o?-1:s>o?1:0;function r(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=i);for(let c=a>>>1;c>o;c--)t(s,c,a,l);const u=o+1;for(let c=a-1;c>o;c--){const d=s[o];s[o]=s[c],s[c]=d,t(s,u,c,l)}}function*n(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=i);for(let c=a>>>1;c>o;c--)t(s,c,a,l),yield;const u=o+1;for(let c=a-1;c>o;c--){const d=s[o];s[o]=s[c],s[c]=d,t(s,u,c,l),yield}}e.sort=r,e.iterableSort=n})(kR||(kR={}));const nU=kR,Mfe=1.5,Ife=1.1;let Jf=class{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new JZ,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>sU(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const i=new Array;for(let r=0;r<this._length;r++){const n=this.data[r];t(n)&&i.push(n)}return i}getItemAt(t){if(!(t<0||t>=this._length))return this.data[t]}includes(t,i){const r=this.data.indexOf(t,i);return r!==-1&&r<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let i=t;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,i=t.length){for(let r=0;r<i;r++)this.data[this._length++]=t[r]}fill(t,i){for(let r=0;r<i;r++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,sU(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const i=$R(this.data,t,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex($R(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,i=t.length,r){this.length=Gpe(this.data,t,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,i){if(t>=this.length||i>=this.length||t===i)return;const r=this.data[t];this.data[t]=this.data[i],this.data[i]=r}sort(t){nU.sort(this.data,0,this.length,t)}iterableSort(t){return nU.iterableSort(this.data,0,this.length,t)}some(t,i){for(let r=0;r<this.length;++r)if(t.call(i,this.data[r],r,this.data))return!0;return!1}find(t,i){for(let r=0;r<this.length;++r){const n=this.data[r];if(t.call(i,n,r))return n}}filterInPlace(t,i){let r=0;for(let n=0;n<this._length;++n){const s=this.data[n];t.call(i,s,n,this.data)&&(this.data[n]=this.data[r],this.data[r]=s,r++)}if(this._deallocator)for(let n=r;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=r,this._shrink(),this}forAll(t,i){const r=this.length,n=this.data;for(let s=0;s<r;++s)t.call(i,n[s],s,n)}forEach(t,i){for(let r=0;r<this.length;++r)t.call(i,this.data[r],r,this.data)}map(t,i){const r=new Array(this.length);for(let n=0;n<this.length;++n)r[n]=t.call(i,this.data[n],n,this.data);return r}reduce(t,i){let r=i;for(let n=0;n<this.length;++n)r=t(r,this.data[n],n,this.data);return r}has(t){const i=this.length,r=this.data;for(let n=0;n<i;++n)if(r[n]===t)return!0;return!1}};function sU(e){e.data.length>Mfe*e.length&&(e.data.length=Math.floor(e.length*Ife))}function Tfe(e){return{setTimeout:(t,i)=>{const r=e.setTimeout(t,i);return{remove:()=>e.clearTimeout(r)}}}}const YS=Tfe(globalThis),oU=new Set;function Afe(e,t,i=!1){i&&oU.has(t)||(i&&oU.add(t),e.warn(`🛑 DEPRECATED - ${t}`))}function LR(e,t,i={}){if(Ze("esri-deprecation-warnings")){const{moduleName:r}=i;bY(e,`Property: ${(r?r+"::":"")+t}`,i)}}function bY(e,t,i={}){if(Ze("esri-deprecation-warnings")){const{replacement:r,version:n,see:s,warnOnce:o}=i;let a=t;r&&(a+=`
	🛠️ Replacement: ${r}`),n&&(a+=`
	⚙️ Version: ${n}`),s&&(a+=`
	🔗 See ${s} for more details.`),Afe(e,a,o)}}function U5(e){return e&&(typeof e.on=="function"||typeof e.addEventListener=="function")}function V5(e,t,i){if(!U5(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,i);if(Array.isArray(t)){const r=t.slice();for(const n of r)e.addEventListener(n,i);return{remove(){for(const n of r)e.removeEventListener(n,i)}}}return e.addEventListener(t,i),{remove(){e.removeEventListener(t,i)}}}function wY(e,t,i){if(!U5(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,i);const r=V5(e,t,n=>{r.remove(),i.call(e,n)});return{remove(){r.remove()}}}const Cfe={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function hg({key:e}){return Cfe[e]||e}function fr(e="Aborted"){return new Ce("AbortError",e)}function hr(e,t="Aborted"){if(Sl(e))throw fr(t)}function B5(e){return ee(e)?"aborted"in e?e:e.signal:e}function Sl(e){const t=B5(e);return ee(t)&&t.aborted}function da(e){if(fs(e))throw e}function PR(e){if(!fs(e))throw e}function ba(e,t){const i=B5(e);if(!Re(i)){if(!i.aborted)return wY(i,"abort",()=>t());t()}}function DN(e,t){const i=B5(e);if(!Re(i))return hr(i),wY(i,"abort",()=>t(fr()))}function ih(e,t){const i=B5(t);return Re(i)?e:new Promise((r,n)=>{let s=ba(t,()=>n(fr()));const o=()=>s=yn(s);e.then(o,o),e.then(r,n)})}function fs(e){return e?.name==="AbortError"}async function qv(e){try{return await e}catch(t){if(!fs(t))throw t;return}}function Kd(){let e=null;const t=new Promise((i,r)=>{e={promise:void 0,resolve:i,reject:r}});return e.promise=t,e}async function Ia(e){if(!e)return;if(typeof e.forEach!="function"){const i=Object.keys(e),r=i.map(o=>e[o]),n=await Ia(r),s={};return i.map((o,a)=>s[o]=n[a]),s}const t=e;return new Promise(i=>{const r=[];let n=t.length;n===0&&i(r),t.forEach(s=>{const o={promise:s||Promise.resolve(s)};r.push(o),o.promise.then(a=>{o.value=a}).catch(a=>{o.error=a}).then(()=>{--n,n===0&&i(r)})})})}async function $fe(e){return(await Ia(e)).filter(t=>!!t.value).map(t=>t.value)}function z5(e,t,i){const r=new AbortController;return ba(i,()=>r.abort()),new Promise((n,s)=>{let o=setTimeout(()=>{o=0,n(t)},e);ba(r,()=>{o&&(clearTimeout(o),s(fr()))})})}function cp(e){return e&&typeof e.then=="function"}function NR(e){return cp(e)?e:Promise.resolve(e)}function _Y(e,t=-1){let i,r,n,s,o=null;const a=(...l)=>{if(i){r=l,s&&s.reject(fr()),s=Kd();const f=s.promise;if(o){const m=o;o=null,m.abort()}return f}if(n=s||Kd(),s=null,t>0){const f=new AbortController;i=NR(e(...l,f.signal));const m=i;z5(t).then(()=>{i===m&&(s?f.abort():o=f)})}else i=1,i=NR(e(...l));const u=()=>{const f=r;r=n=i=o=null,f!=null&&a(...f)},c=i,d=n;return c.then(u,u),c.then(d.resolve,d.reject),d.promise};return a}function xY(){let e,t;const i=new Promise((n,s)=>{e=n,t=s}),r=n=>{e(n)};return r.resolve=n=>e(n),r.reject=n=>t(n),r.timeout=(n,s)=>YS.setTimeout(()=>r.reject(s),n),r.promise=i,r}async function aU(e){await Promise.resolve(),hr(e)}function gnt(e){return e}let Ofe=class{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}},Rfe=class{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}},FR=0;const Xw={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},DR=["prepare","preRender","render","postRender","update","finish"],jR=[],h0=new Jf;let kfe=class{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};const GT={frameTasks:h0,willDispatch:!1,clearFrameTasks:Lfe,dispatch:MY,executeFrameTasks:Pfe};function hw(e){const t=new Rfe(e);return jR.push(t),GT.willDispatch||(GT.willDispatch=!0,zT(MY)),t}function bb(e){const t=new Ofe(e);return h0.push(t),qT==null&&(FR=performance.now(),qT=requestAnimationFrame(SY)),new kfe(t)}let qT=null;function Lfe(e=!1){h0.forAll(t=>{t.removed=!0}),e&&EY()}function SY(){const e=performance.now();qT=null,qT=h0.length>0?requestAnimationFrame(SY):null,GT.executeFrameTasks(e)}function Pfe(e){const t=e-FR;FR=e;const i=1e3/60,r=Math.max(0,t-i);Xw.time=e,Xw.frameDuration=i-r;for(let n=0;n<DR.length;n++){const s=performance.now(),o=DR[n];h0.forAll(a=>{a.paused||a.removed||(n===0&&a.ticks++,a.phases[o]&&(Xw.elapsedFrameTime=performance.now()-e,Xw.deltaTime=a.ticks===0?0:t,a.phases[o]?.call(a,Xw)))}),Ffe[n].record(performance.now()-s)}EY(),Dfe.record(performance.now()-e)}const yE=new Jf;function EY(){h0.forAll(e=>{e.removed&&yE.push(e)}),h0.removeUnorderedMany(yE.data,yE.length),yE.clear()}function MY(){for(;jR.length;){const e=jR.shift();e.isActive&&e.callback()}GT.willDispatch=!1}function Nfe(e=1,t){const i=xY(),r=()=>{Sl(t)?i.reject(fr()):e===0?i():(--e,zT(()=>r()))};return r(),i.promise}const Ffe=DR.map(e=>new K2(e)),Dfe=new K2("total");function jfe(e,t){for(const i of e.entries())if(t(i[0]))return!0;return!1}let Ufe=0;function Q2(){return++Ufe}let G5=class{constructor(t){this._notify=t,this._accessed=[],this._handles=[],this._observerObject=new Vfe(this._notify),lU.register(this,this._observerObject)}destroy(){this._accessed.length=0,this._observerObject?.destroy(),this.clear(),lU.unregister(this)}onObservableAccessed(t){const i=this._accessed;i.includes(t)||i.push(t)}onTrackingEnd(){const t=this._handles,i=this._accessed,r=this._observerObject;for(let n=0;n<i.length;++n)t.push(i[n].observe(r));i.length=0}clear(){const t=this._handles;for(let i=0;i<t.length;++i)t[i].remove();t.length=0}},Vfe=class{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=Bfe}};const lU=new FinalizationRegistry(e=>{e.destroy()});function Bfe(){}let Hv=!1;const HT=[];function IY(e,t){let i=new G5(s),r=null,n=!1;function s(){if(!i||n)return;if(Hv)return void CY(s);const a=r;i.clear(),Hv=!0,n=!0,r=Yd(i,e),n=!1,Hv=!1,t(r,a),$Y()}function o(){i&&(i.destroy(),i=null,r=null)}return n=!0,r=Yd(i,e),n=!1,{remove:o}}function TY(e,t){let i=new G5(n),r=null;function n(){t(r,o)}function s(){i&&(i.destroy(),i=null),r=null}function o(){return i?(i.clear(),r=Yd(i,e),r):null}return o(),{remove:s}}function AY(e){let t=new G5(r),i=!1;function r(){t&&!i&&(Hv?CY(r):(t.clear(),Hv=!0,i=!0,Yd(t,e),i=!1,Hv=!1,$Y()))}function n(){t&&(t.destroy(),t=null)}return i=!0,Yd(t,e),i=!1,{remove:n}}function CY(e){HT.includes(e)||HT.unshift(e)}function $Y(){for(;HT.length;)HT.pop()()}var X2;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(X2||(X2={}));let zx=class{constructor(){this.uid=Q2(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,i,r,n,s){return this.pool.acquire(X2.Untracked,t,i,r,n,s,PN)}static acquireTracked(t,i,r,n){return this.pool.acquire(X2.Tracked,t,i,r,null,null,n)}notify(t,i){this.type===X2.Untracked?this.callback.call(this.target,t,i,this.path,this.target):this.callback.call(null,t,i)}acquire(t,i,r,n,s,o,a){this.uid=Q2(),this.removed=!1,this.type=t,this.oldValue=i,this.callback=r,this.getValue=n,this.target=s,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=Q2(),this.removed=!0}};zx.pool=new vY(zx);const iI=new Bo,zd=new Set;let WT;function JT(e){zd.delete(e),zd.add(e),WT||(WT=hw(qfe))}function zfe(e){if(e.removed)return;const t=e.oldValue,i=e.getValue();e.equals(t,i)||(e.oldValue=i,e.notify(i,t))}function Gfe(e){for(const t of zd.values())t.target===e&&(t.removed=!0)}function qfe(){let e=10;for(;WT&&e--;){WT=null;const t=Hfe(),i=iI.acquire();for(const r of t){const n=r.uid;zfe(r),n===r.uid&&r.removed&&i.push(r)}for(const r of zd)r.removed&&(i.push(r),zd.delete(r));for(const r of i)zx.pool.release(r);iI.release(i),iI.release(t),UR.forEach(r=>r())}}function Hfe(){const e=iI.acquire();e.length=zd.size;let t=0;for(const i of zd)e[t]=i,++t;return zd.clear(),e}const UR=new Set;function Wfe(e){return UR.add(e),{remove(){UR.delete(e)}}}function Jfe(e,t,i){let r=rY(e,t,i,(n,s,o)=>{let a,l,u=TY(()=>WS(n,s),(c,d)=>{n.__accessor__.destroyed||a&&a.uid!==l?r.remove():(a||(a=zx.acquireUntracked(c,o,d,n,s),l=a.uid),JT(a))});return{remove:nY(()=>{u.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,JT(a)),a=null),r=u=null})}});return r}function Zfe(e,t,i){const r=rY(e,t,i,(n,s,o)=>{let a=!1;return IY(()=>WS(n,s),(l,u)=>{n.__accessor__.destroyed?r.remove():a||(a=!0,PN(u,l)||o.call(n,l,u,s,n),a=!1)})});return r}function Yfe(e,t,i,r=!1){return!e.__accessor__||e.__accessor__.destroyed?{remove(){}}:r?Zfe(e,t,i):Jfe(e,t,i)}function Kfe(e,t,i){let r,n,s=TY(e,(o,a)=>{r&&r.uid!==n?s.remove():(r||(r=zx.acquireTracked(o,t,a,i),n=r.uid),JT(r))});return{remove:nY(()=>{s.remove(),r&&(r.uid!==n||r.removed||(r.removed=!0,JT(r)),r=null),s=null})}}function Qfe(e,t,i){let r=!1;return IY(e,(n,s)=>{r||(r=!0,i(s,n)||t(n,s),r=!1)})}function Xfe(e,t,i=!1,r=tfe){return i?Qfe(e,t,r):Kfe(e,t,r)}function uU(e){return jfe(zd,t=>t.oldValue===e)}function q5(e,t){for(const[i,r]of e)if(t(r,i))return!0;return!1}function OY(e,t,i){const r=e.get(t);if(r!==void 0)return r;const n=i();return e.set(t,n),n}const Wv=et.getLogger("esri.core.accessorSupport.ensureTypes");function eme(e){return e==null?e:new Date(e)}function tme(e){return e==null?e:!!e}function KS(e){return e==null?e:e.toString()}function ul(e){return e==null?e:(e=parseFloat(e),isNaN(e)?0:e)}function H5(e){return e==null?e:Math.round(parseFloat(e))}function RY(e){return e&&e.constructor&&e.constructor.__accessorMetadata__!==void 0}function ZT(e,t){return t!=null&&e&&!(t instanceof e)}function kY(e){return e&&"isCollection"in e}function cU(e){return e&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function ime(e,t){if(!t||!t.constructor||!kY(t.constructor))return VR(e,t)?t:new e(t);const i=cU(e.prototype.itemType),r=cU(t.constructor.prototype.itemType);return i?r?i===r?t:i.prototype.isPrototypeOf(r.prototype)?new e(t):(VR(e,t),t):new e(t):t}function VR(e,t){return!!RY(t)&&(Wv.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+W5(e)+"'"),!0)}function Fs(e,t){return t==null?t:kY(e)?ime(e,t):ZT(e,t)?VR(e,t)?t:new e(t):t}function W5(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}const rme=new WeakMap;function nme(e){switch(e){case Number:return ul;case wi:return H5;case Boolean:return tme;case String:return KS;case Date:return eme;default:return OY(rme,e,()=>Fs.bind(null,e))}}function nn(e,t){const i=nme(e);return arguments.length===1?i:i(t)}function Gx(e,t,i){return arguments.length===1?Gx.bind(null,e):t&&(Array.isArray(t)?t.map(r=>e(r,i)):[e(t,i)])}function sme(e,t){return arguments.length===1?Gx(nn.bind(null,e)):Gx(nn.bind(null,e),t)}function LY(e,t,i){return t!==0&&Array.isArray(i)?i.map(r=>LY(e,t-1,r)):e(i)}function YT(e,t,i){if(arguments.length===2)return YT.bind(null,e,t);if(!i)return i;let r=t,n=i=LY(e,t,i);for(;r>0&&Array.isArray(n);)r--,n=n[0];if(n!==void 0)for(let s=0;s<r;s++)i=[i];return i}function ome(e,t,i){return arguments.length===2?YT(nn.bind(null,e),t):YT(nn.bind(null,e),t,i)}function PY(e){return!!Array.isArray(e)&&!e.some(t=>{const i=typeof t;return!(i==="string"||i==="number"||i==="function"&&e.length>1)})}function BR(e,t){if(arguments.length===2)return BR(e).call(null,t);const i=new Set,r=e.filter(a=>typeof a!="function"),n=e.filter(a=>typeof a=="function");for(const a of e)typeof a!="string"&&typeof a!="number"||i.add(a);let s=null,o=null;return(a,l)=>{if(a==null)return a;const u=typeof a,c=u==="string"||u==="number";return c&&(i.has(a)||n.some(d=>u==="string"&&d===String||u==="number"&&d===Number))||u==="object"&&n.some(d=>!ZT(a,d))?a:(c&&r.length?(s||(s=r.map(d=>typeof d=="string"?`'${d}'`:`${d}`).join(", ")),Wv.error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof a=="object"&&n.length?(o||(o=n.map(d=>W5(d)).join(", ")),Wv.error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):Wv.error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function $h(e,t){if(arguments.length===2)return $h(e).call(null,t);const i={},r=[],n=[];for(const l in e.typeMap){const u=e.typeMap[l];i[l]=nn(u),r.push(W5(u)),n.push(l)}const s=()=>`'${r.join("', '")}'`,o=()=>`'${n.join("', '")}'`,a=typeof e.key=="string"?l=>l[e.key]:e.key;return l=>{if(e.base&&!ZT(e.base,l)||l==null)return l;const u=a(l)||e.defaultKeyValue,c=i[u];if(!c)return Wv.error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!ZT(e.typeMap[u],l))return l;if(typeof e.key=="string"&&!RY(l)){const d={};for(const f in l)f!==e.key&&(d[f]=l[f]);return c(d)}return c(l)}}let wi=class{};const e_={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function ame(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function NY(e){switch(e.type){case"native":return nn(e.value);case"array":return Gx(NY(e.value));case"one-of":return lme(e);default:return null}}function lme(e){let t=null;return(i,r)=>GR(i,e)?i:(t==null&&(t=zR(e)),Wv.error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),r&&(r.valid=!1),null)}function zR(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case wi:return"integer";case Date:return"date";default:return W5(e.value)}case"array":return`array of ${zR(e.value)}`;case"one-of":{const t=e.values.map(i=>zR(i));return`one of ${t.slice(0,t.length-1)} or ${t[t.length-1]}`}}return"unknown"}function GR(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case wi:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string"}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(i=>!GR(i,t.value));case"one-of":return t.values.some(i=>GR(e,i))}}function p(e={}){return(t,i)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(t,i),n=j5(t,i);r&&(r.get||r.set?(n.get=r.get||n.get,n.set=r.set||n.set):"value"in r&&("value"in e&&et.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${t.constructor.name}" already defined in the metadata`,e),n.value=e.value=r.value)),e.readOnly!=null&&(n.readOnly=e.readOnly);const s=e.aliasOf;if(s){const l=typeof s=="string"?s:s.source,u=typeof s=="string"?null:s.overridable===!0;let c;n.dependsOn=[l],n.get=function(){let d=UT(this,l);if(typeof d=="function"){c||(c=l.split(".").slice(0,-1).join("."));const f=UT(this,c);f&&(d=d.bind(f))}return d},n.readOnly||(n.set=u?function(d){this._override(i,d)}:function(d){BT(this,l,d)})}const o=e.type,a=e.types;n.cast||(o?n.cast=ume(o):a&&(Array.isArray(a)?n.cast=Gx($h(a[0])):n.cast=$h(a))),afe(n,e),e.range&&(n.cast=DY(n.cast,e.range))}}function FY(e,t,i){const r=j5(e,i);r.json||(r.json={});let n=r.json;return t!==void 0&&(n.origins||(n.origins={}),n.origins[t]||(n.origins[t]={}),n=n.origins[t]),n}function ume(e){let t=0,i=e;if(ame(e))return NY(e);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],t++;const r=i;if(PY(r))return t===0?BR(r):YT(BR(r),t);if(t===1)return sme(r);if(t>1)return ome(r,t);const n=e;return n.from?n.from:nn(n)}function DY(e,t){return i=>{let r=+e(i);return t.step!=null&&(r=Math.round(r/t.step)*t.step),t.min!=null&&(r=Math.max(t.min,r)),t.max!=null&&(r=Math.min(t.max,r)),r}}function cme(e){if(e.json&&e.json.origins){const t=e.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(t[r]){const n=t[r];i[r].forEach(s=>{t[s]=n}),delete t[r]}}}let El=class qR extends yY{constructor(t,i,r){if(super(t,i,r),!(this instanceof qR))return new qR(t,i,r)}};El.prototype.type="warning";function jY(e){return!!e&&e.prototype&&e.prototype.declaredClass&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const HR=et.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function hU(e,t,i){e&&(!i&&!t.read||t.read?.reader||t.read?.enabled===!1||pme(e)&&_o("read.reader",Cm(e),t))}function Cm(e){const t=e.ndimArray??0;if(t>1)return dme(e);if(t===1)return dU(e);if("type"in e&&VY(e.type)){const i=e.type.prototype?.itemType?.Type,r=dU(typeof i=="function"?{type:i}:{types:i});return(n,s,o)=>{const a=r(n,s,o);return a&&new e.type(a)}}return jN(e)}function jN(e){return"type"in e?hme(e.type):fme(e.types)}function hme(e){return e.prototype.read?(t,i,r)=>{if(t==null)return t;const n=typeof t;if(n!=="object")return void HR.error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${n}'`);const s=new e;return s.read(t,r),s}:e.fromJSON}function UY(e,t,i,r){return r!==0&&Array.isArray(t)?t.map(n=>UY(e,n,i,r-1)):e(t,void 0,i)}function dme(e){const t=jN(e),i=UY.bind(null,t),r=e.ndimArray??0;return(n,s,o)=>{if(n==null)return n;n=i(n,o,r);let a=r,l=n;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let u=0;u<a;u++)n=[n];return n}}function dU(e){const t=jN(e);return(i,r,n)=>{if(i==null)return i;if(Array.isArray(i)){const o=[];for(const a of i){const l=t(a,void 0,n);l!==void 0&&o.push(l)}return o}const s=t(i,void 0,n);return s!==void 0?[s]:void 0}}function VY(e){if(!jY(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?UN(t.Type):BY(t.Type))}function pme(e){return"types"in e?BY(e.types):UN(e.type)}function UN(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||VY(e))}function BY(e){for(const t in e.typeMap)if(!UN(e.typeMap[t]))return!1;return!0}function fme(e){let t=null;const i=e.errorContext??"type";return(r,n,s)=>{if(r==null)return r;const o=typeof r;if(o!=="object")return void HR.error(`Expected JSON value of type 'object' to deserialize, but got '${o}'`);t||(t=mme(e));const a=e.key;if(typeof a!="string")return;const l=r[a],u=l?t[l]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!u){const d=`Type '${l||"unknown"}' is not supported`;return s&&s.messages&&r&&s.messages.push(new El(`${i}:unsupported`,d,{definition:r,context:s})),void HR.error(d)}const c=new u;return c.read(r,s),c}}function mme(e){const t={};for(const i in e.typeMap){const r=e.typeMap[i],n=JS(r.prototype);if(typeof e.key=="function")continue;const s=n[e.key];if(!s)continue;s.json?.type&&Array.isArray(s.json.type)&&s.json.type.length===1&&typeof s.json.type[0]=="string"&&(t[s.json.type[0]]=r);const o=s.json?.write;if(!o||!o.writer){t[i]=r;continue}const a=o.target,l=typeof a=="string"?a:e.key,u={};o.writer(i,u,l),u[l]&&(t[u[l]]=r)}return t}function yme(e){if(e.json||(e.json={}),fU(e.json),mU(e.json),pU(e.json),e.json.origins)for(const t in e.json.origins)fU(e.json.origins[t]),mU(e.json.origins[t]),pU(e.json.origins[t]);return!0}function pU(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function fU(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function mU(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function yU(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const i=e?.ndimArray??0;e&&(i===1||"type"in e&&jY(e.type))?t.write.writer=bme:i>1?t.write.writer=wme(i):t.types?Array.isArray(t.types)?t.write.writer=vme(t.types[0]):t.write.writer=gme(t.types):t.write.writer=qx}function gme(e){return(t,i,r,n)=>t?zY(t,e,n)?qx(t,i,r,n):void 0:qx(t,i,r,n)}function zY(e,t,i){for(const r in t.typeMap)if(e instanceof t.typeMap[r])return!0;if(i?.messages){const r=t.errorContext??"type",n=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&e&&i.messages.push(new Ce(`${r}:unsupported`,n,{definition:e,context:i})),et.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(n)}return!1}function vme(e){return(t,i,r,n)=>!t||!Array.isArray(t)?qx(t,i,r,n):qx(t.filter(s=>zY(s,e,n)),i,r,n)}function qx(e,t,i,r){_o(i,KT(e,r),t)}function KT(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?QT(e):e}function QT(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function bme(e,t,i,r){let n;e===null?n=null:e&&typeof e.map=="function"?(n=e.map(s=>KT(s,r)),typeof n.toArray=="function"&&(n=n.toArray())):n=[KT(e,r)],_o(i,n,t)}function GY(e,t,i){return i!==0&&Array.isArray(e)?e.map(r=>GY(r,t,i-1)):KT(e,t)}function wme(e){return(t,i,r,n)=>{let s;if(t===null)s=null;else{s=GY(t,n,e);let o=e,a=s;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)s=[s]}_o(r,s,i)}}function WR(e,t){return VN(e,"read",t)}function qY(e,t){return VN(e,"write",t)}function VN(e,t,i){let r=e&&e.json;if(e&&e.json&&e.json.origins&&i){const n=i.origin&&e.json.origins[i.origin];n&&(t==="any"||t in n)&&(r=n)}return r}function _me(e){const t=xme(e);if(e.json.origins)for(const i in e.json.origins){const r=e.json.origins[i],n=r.types?Sme(r):t;hU(n,r,!1),r.types&&!r.write&&e.json.write&&e.json.write.enabled&&(r.write={...e.json.write}),yU(n,r)}hU(t,e.json,!0),yU(t,e.json)}function xme(e){return e.json.types?JR(e.json):e.type?HY(e):JR(e)}function Sme(e){return e.type?HY(e):JR(e)}function HY(e){if(!e.type)return;let t=0,i=e.type;for(;Array.isArray(i)&&!PY(i);)i=i[0],t++;return{type:i,ndimArray:t}}function JR(e){if(!e.types)return;let t=0,i=e.types;for(;Array.isArray(i);)i=i[0],t++;return{types:i,ndimArray:t}}function Eme(e){yme(e)&&(cme(e),_me(e))}const t$=new Set,i$=new Set;function ce(e){return t=>{t.prototype.declaredClass=e,Ime(t);const i=[],r=[];let n=t.prototype;for(;n;)n.hasOwnProperty("initialize")&&!t$.has(n.initialize)&&(t$.add(n.initialize),i.push(n.initialize)),n.hasOwnProperty("destroy")&&!i$.has(n.destroy)&&(i$.add(n.destroy),r.push(n.destroy)),n=Object.getPrototypeOf(n);t$.clear(),i$.clear();class s extends t{constructor(...a){if(super(...a),this.constructor===s&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=i.length-1;l>=0;l--)i[l].call(this)}}),r.length){let l=!1;const u=this[WZ];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){l=!0,u.call(this);for(let c=0;c<r.length;c++)r[c].call(this)}}})}this.postscript(...a)}}}return s.__accessorMetadata__=JS(t.prototype),s.prototype.declaredClass=e,s}}function Mme(e,t){return t.get==null?function(){const i=this.__accessor__.properties.get(e);if(i===void 0)return;ci(i.observerObject);const r=this.__accessor__.store;return r.has(e)?r.get(e):i.metadata.value}:function(){const i=this.__accessor__.properties.get(e);if(i!==void 0)return i.getComputed()}}function Ime(e){const t=e.prototype,i=JS(t),r={};for(const n of Object.getOwnPropertyNames(i)){const s=i[n];Eme(s),r[n]={enumerable:!0,configurable:!0,get:Mme(n,s),set(o){const a=this.__accessor__;if(a!==void 0){if(!Object.isFrozen(this)){if(a.initialized&&s.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${n}' of ${this.declaredClass}`);if(a.lifecycle===Fd.CONSTRUCTED&&s.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${n}' of ${this.declaredClass}`);a.set(n,o)}}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(e.prototype,r)}var WY,JY;function Tme(e){if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return e.constructor?.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const vy=Symbol("Accessor-Handles"),ZR=Symbol("Accessor-Initialized");let Lt=class ZY{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:n}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const s=this;class o extends s{constructor(...l){super(...l),this.inherited=null,n&&n.apply(this,l)}}JS(o.prototype);for(const a in t){const l=t[a];o.prototype[a]=typeof l=="function"?function(...u){const c=this.inherited;let d;this.inherited=function(...f){if(s.prototype[a])return s.prototype[a].apply(this,f)};try{d=l.apply(this,u)}catch(f){throw this.inherited=c,f}return this.inherited=c,d}:t[a]}for(const a in i){const l=Tme(i[a]);p(l)(o.prototype,a)}return ce(r)(o)}constructor(...t){if(this[WY]=null,this[JY]=!1,this.constructor===ZY)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new bfe(this)}),t.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,t))}postscript(t){const i=this.__accessor__,r=i.ctorArgs||t;i.initialize(),r&&(this.set(r),i.ctorArgs=null),i.constructed(),this.initialize(),this[ZR]=!0}initialize(){}[WZ](){this[vy]=qr(this[vy])}destroy(){this.destroyed||(Gfe(this),this.__accessor__.destroy())}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[ZR]}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(t){this.get(t)}get(t){return UT(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,i){return BT(this,t,i),this}watch(t,i,r){return Yfe(this,t,i,r)}own(t){this.addHandles(t)}addHandles(t,i){let r=this[vy];Re(r)&&(r=this[vy]=new So),r.add(t,i)}removeHandles(t){const i=this[vy];Re(i)||i.remove(t)}hasHandles(t){const i=this[vy];return!!ee(i)&&i.has(t)}_override(t,i){i===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,i)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,i){i==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,i)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,i){return this.__accessor__.internalSet(t,i),this}};WY=vy,JY=ZR;let rI=class YY{constructor(){this._emitter=new YY.EventEmitter(this)}emit(t,i){return this._emitter.emit(t,i)}on(t,i){return this._emitter.on(t,i)}once(t,i){return this._emitter.once(t,i)}hasEventListener(t){return this._emitter.hasEventListener(t)}};(function(e){class t{constructor(n=null){this._target=n,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null}emit(n,s){const o=this._listenersMap&&this._listenersMap.get(n);if(!o)return!1;const a=this._target||this;return[...o].forEach(l=>{l.call(a,s)}),o.length>0}on(n,s){if(Array.isArray(n)){const a=n.map(l=>this.on(l,s));return F5(a)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const o=this._listenersMap.get(n)||[];return o.push(s),this._listenersMap.set(n,o),{remove:()=>{const a=this._listenersMap&&this._listenersMap.get(n)||[],l=a.indexOf(s);l>=0&&a.splice(l,1)}}}once(n,s){const o=this.on(n,a=>{o.remove(),s.call(null,a)});return o}hasEventListener(n){const s=this._listenersMap&&this._listenersMap.get(n);return s!=null&&s.length>0}}e.EventEmitter=t,e.EventedMixin=r=>{let n=class extends r{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(s,o){return this._emitter.emit(s,o)}on(s,o){return this._emitter.on(s,o)}once(s,o){return this._emitter.once(s,o)}hasEventListener(s){return this._emitter.hasEventListener(s)}};return n=h([ce("esri.core.Evented")],n),n};let i=class extends Lt{constructor(){super(...arguments),this._emitter=new rI.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,n){return this._emitter.emit(r,n)}on(r,n){return this._emitter.on(r,n)}once(r,n){return this._emitter.once(r,n)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=h([ce("esri.core.Evented")],i),e.EventedAccessor=i})(rI||(rI={}));const hp=rI;var Zi;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(Zi||(Zi={}));function BN(e){return(t,i)=>{t[i]=e}}let zN=class extends cY{notify(){const t=this._observers;if(t&&t.length>0){const i=t.slice();for(const r of i)r.onInvalidated(),r.onCommitted()}}};var Rd;let Ame=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}};const Ol=new Am(Ame,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1}),Cme=()=>{};function r$(e){return e?e instanceof dg?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function n$(e){if(e&&e.length)return e[0]}function $me(e,t,i,r){const n=Math.min(e.length-i,t.length-r);let s=0;for(;s<n&&e[i+s]===t[r+s];)s++;return s}function KY(e,t,i,r){t&&t.forEach((n,s,o)=>{e.push(n),KY(e,i.call(r,n,s,o),i,r)})}const Ip=new Set,Tp=new Set,Ap=new Set,s$=new Map;let Ome=0,dg=Rd=class extends hp.EventedAccessor{static isCollection(e){return e!=null&&e instanceof Rd}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new zN,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:Ome++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof Rd?{items:e}:e:{}}destroy(){this.removeAll()}*[Symbol.iterator](){yield*this.items}get items(){return ci(this._observable),this._items}set items(e){this._emitBeforeChanges(Zi.ADD)||(this._splice(0,this.length,r$(e)),this._emitAfterChanges(Zi.ADD))}hasEventListener(e){return e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if(e==="change"){const i=this._chgListeners,r={removed:!1,callback:t};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=Cme,r.removed=!0,i.splice(i.indexOf(r),1)}}}return this._emitter.on(e,t)}once(e,t){const i=this.on(e,t);return{remove(){i.remove()}}}add(e,t){if(ci(this._observable),this._emitBeforeChanges(Zi.ADD))return this;const i=this.getNextIndex(t??null);return this._splice(i,0,[e]),this._emitAfterChanges(Zi.ADD),this}addMany(e,t=this._items.length){if(ci(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(Zi.ADD))return this;const i=this.getNextIndex(t);return this._splice(i,0,r$(e)),this._emitAfterChanges(Zi.ADD),this}at(e){if(ci(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(ci(this._observable),!this.length||this._emitBeforeChanges(Zi.REMOVE))return[];const e=this._splice(0,this.length)||[];return this._emitAfterChanges(Zi.REMOVE),e}clone(){return ci(this._observable),this._createNewInstance({items:this._items.map(Le)})}concat(...e){ci(this._observable);const t=e.map(r$);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(ci(this._observable),!this.length||this._emitBeforeChanges(Zi.REMOVE))return;const i=this._splice(0,this.length),r=i.length;for(let n=0;n<r;n++)e.call(t,i[n],n,i);this._emitAfterChanges(Zi.REMOVE)}every(e,t){return ci(this._observable),this._items.every(e,t)}filter(e,t){let i;return ci(this._observable),i=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:i})}find(e,t){return ci(this._observable),this._items.find(e,t)}findIndex(e,t){return ci(this._observable),this._items.findIndex(e,t)}flatten(e,t){ci(this._observable);const i=[];return KY(i,this,e,t),new Rd(i)}forEach(e,t){return ci(this._observable),this._items.forEach(e,t)}getItemAt(e){return ci(this._observable),this._items[e]}getNextIndex(e){ci(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return ci(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return ci(this._observable),this._items.indexOf(e,t)}join(e=","){return ci(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return ci(this._observable),this._items.lastIndexOf(e,t)}map(e,t){ci(this._observable);const i=this._items.map(e,t);return new Rd({items:i})}reorder(e,t=this.length-1){ci(this._observable);const i=this.indexOf(e);if(i!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),i!==t){if(this._emitBeforeChanges(Zi.MOVE))return e;this._splice(i,1),this._splice(t,0,[e]),this._emitAfterChanges(Zi.MOVE)}return e}}pop(){if(ci(this._observable),!this.length||this._emitBeforeChanges(Zi.REMOVE))return;const e=n$(this._splice(this.length-1,1));return this._emitAfterChanges(Zi.REMOVE),e}push(...e){return ci(this._observable),this._emitBeforeChanges(Zi.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(Zi.ADD)),this.length}reduce(e,t){ci(this._observable);const i=this._items;return arguments.length===2?i.reduce(e,t):i.reduce(e)}reduceRight(e,t){ci(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(e,t):i.reduceRight(e)}remove(e){return ci(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(ci(this._observable),e<0||e>=this.length||this._emitBeforeChanges(Zi.REMOVE))return;const t=n$(this._splice(e,1));return this._emitAfterChanges(Zi.REMOVE),t}removeMany(e){if(ci(this._observable),!e||!e.length||this._emitBeforeChanges(Zi.REMOVE))return[];const t=e instanceof Rd?e.toArray():e,i=this._items,r=[],n=t.length;for(let s=0;s<n;s++){const o=t[s],a=i.indexOf(o);if(a>-1){const l=1+$me(t,i,s+1,a+1),u=this._splice(a,l);u&&u.length>0&&r.push.apply(r,u),s+=l-1}}return this._emitAfterChanges(Zi.REMOVE),r}reverse(){if(ci(this._observable),this._emitBeforeChanges(Zi.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(Zi.MOVE),this}shift(){if(ci(this._observable),!this.length||this._emitBeforeChanges(Zi.REMOVE))return;const e=n$(this._splice(0,1));return this._emitAfterChanges(Zi.REMOVE),e}slice(e=0,t=this.length){return ci(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return ci(this._observable),this._items.some(e,t)}sort(e){if(ci(this._observable),!this.length||this._emitBeforeChanges(Zi.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(Zi.MOVE),this}splice(e,t,...i){ci(this._observable);const r=(t?Zi.REMOVE:0)|(i.length?Zi.ADD:0);if(this._emitBeforeChanges(r))return[];const n=this._splice(e,t,i)||[];return this._emitAfterChanges(r),n}toArray(){return ci(this._observable),this._items.slice()}toJSON(){return ci(this._observable),this.toArray()}toLocaleString(){return ci(this._observable),this._items.toLocaleString()}toString(){return ci(this._observable),this._items.toString()}unshift(...e){return ci(this._observable),!e.length||this._emitBeforeChanges(Zi.ADD)||(this._splice(0,0,e),this._emitAfterChanges(Zi.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,i){const r=this._items,n=this.itemType;let s,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=hw(()=>this._dispatchChange())),t){if(o=r.splice(e,t),this.hasEventListener("before-remove")){const a=Ol.acquire();a.target=this,a.cancellable=!0;for(let l=0,u=o.length;l<u;l++)s=o[l],a.reset(s),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(l,1),r.splice(e,0,s),e+=1,l-=1,u-=1);Ol.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=Ol.acquire();a.target=this,a.cancellable=!1;const l=o.length;for(let u=0;u<l;u++)a.reset(o[u]),this.emit("after-remove",a);Ol.release(a)}}if(i&&i.length){if(n){const c=[];for(const d of i){const f=n.ensureType(d);f==null&&d!=null||c.push(f)}i=c}const a=this.hasEventListener("before-add"),l=this.hasEventListener("after-add"),u=e===this.length;if(a||l){const c=Ol.acquire();c.target=this,c.cancellable=!0;const d=Ol.acquire();d.target=this,d.cancellable=!1;for(const f of i)a?(c.reset(f),this.emit("before-add",c),c.defaultPrevented||(u?r.push(f):r.splice(e++,0,f),this._set("length",r.length),l&&(d.reset(f),this.emit("after-add",d)))):(u?r.push(f):r.splice(e++,0,f),this._set("length",r.length),d.reset(f),this.emit("after-add",d));Ol.release(d),Ol.release(c)}else{if(u)for(const c of i)r.push(c);else r.splice(e,0,...i);this._set("length",r.length)}}return(i&&i.length||o&&o.length)&&this._notifyChangeEvent(i,o),o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const i=Ol.acquire();i.target=this,i.cancellable=!0,i.type=e,this.emit("before-changes",i),t=i.defaultPrevented,Ol.release(i)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=Ol.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),Ol.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const i=t.changes;Ip.clear(),Tp.clear(),Ap.clear();for(const{added:l,removed:u}of i){if(l)if(Ap.size===0&&Tp.size===0)for(const c of l)Ip.add(c);else for(const c of l)Tp.has(c)?(Ap.add(c),Tp.delete(c)):Ap.has(c)||Ip.add(c);if(u)if(Ap.size===0&&Ip.size===0)for(const c of u)Tp.add(c);else for(const c of u)Ip.has(c)?Ip.delete(c):(Ap.delete(c),Tp.add(c))}const r=Bo.acquire();Ip.forEach(l=>{r.push(l)});const n=Bo.acquire();Tp.forEach(l=>{n.push(l)});const s=this._items,o=t.items,a=Bo.acquire();if(Ap.forEach(l=>{o.indexOf(l)!==s.indexOf(l)&&a.push(l)}),t.listeners&&(r.length||n.length||a.length)){const l={target:this,added:r,removed:n,moved:a},u=t.listeners.length;for(let c=0;c<u;c++){const d=t.listeners[c];d.removed||d.callback.call(this,l)}}Bo.release(r),Bo.release(n),Bo.release(a)}Ip.clear(),Tp.clear(),Ap.clear()}};dg.ofType=e=>{if(!e)return Rd;if(s$.has(e))return s$.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const r in e.typeMap){const n=e.typeMap[r].prototype.declaredClass;t?t+=` | ${n}`:t=n}let i=class extends Rd{};return h([BN({Type:e,ensureType:typeof e=="function"?nn(e):$h(e)})],i.prototype,"itemType",void 0),i=h([ce(`esri.core.Collection<${t}>`)],i),s$.set(e,i),i},h([p()],dg.prototype,"length",void 0),h([p()],dg.prototype,"items",null),dg=Rd=h([ce("esri.core.Collection")],dg);const Pt=dg;function d0(e,t,i=Pt){return t||(t=new i),t===e||(t.removeAll(),Rme(e)?t.addMany(e):e&&t.add(e)),t}function QY(e){return e}function Rme(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}let kme=class XY{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new XY;return this._values.forEach((r,n)=>{t&&t.has(n)||i.set(n,Le(r.value),r.origin)}),i}get(t,i){i=this._normalizeOrigin(i);const r=this._values.get(t);return i==null||r?.origin===i?r?.value:void 0}originOf(t){return this._values.get(t)?.origin??xt.USER}keys(t){t=this._normalizeOrigin(t);const i=[...this._values.keys()];return t==null?i:i.filter(r=>this._values.get(r)?.origin===t)}set(t,i,r){if((r=this._normalizeOrigin(r))===xt.DEFAULTS){const n=this._values.get(t);if(n&&n.origin!=null&&n.origin>r)return}this._values.set(t,new Lme(i,r))}delete(t,i){(i=this._normalizeOrigin(i))!=null&&this._values.get(t)?.origin!==i||this._values.delete(t)}has(t,i){return(i=this._normalizeOrigin(i))!=null?this._values.get(t)?.origin===i:this._values.has(t)}forEach(t){this._values.forEach(({value:i},r)=>t(i,r))}_normalizeOrigin(t){if(t!=null)return t===xt.DEFAULTS?t:xt.USER}},Lme=class{constructor(t,i){this.value=t,this.origin=i}};function eK(e,t,i){t.keys().forEach(n=>{i.set(n,t.get(n),xt.DEFAULTS)});const r=e.metadatas;Object.keys(r).forEach(n=>{e.internalGet(n)&&i.set(n,e.internalGet(n),xt.DEFAULTS)})}function Pme(e,t,i){if(!e||!e.read||e.read.enabled===!1||!e.read.source)return!1;const r=e.read.source;if(typeof r=="string"){if(r===t||r.includes(".")&&r.indexOf(t)===0&&Kj(r,i))return!0}else for(const n of r)if(n===t||n.includes(".")&&n.indexOf(t)===0&&Kj(n,i))return!0;return!1}function Nme(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function Fme(e,t,i,r,n){let s=WR(t[i],n);Nme(s)&&(e[i]=!0);for(const o of Object.getOwnPropertyNames(t))s=WR(t[o],n),Pme(s,i,r)&&(e[o]=!0)}function Dme(e,t,i,r){const n=i.metadatas,s=VN(n[t],"any",r),o=s&&s.default;if(o===void 0)return;const a=typeof o=="function"?o.call(e,t,r):o;a!==void 0&&i.set(t,a)}const tK={origin:"service"};function iK(e,t,i=tK){if(!t||typeof t!="object")return;const r=zn(e),n=r.metadatas,s={};for(const o of Object.getOwnPropertyNames(t))Fme(s,n,o,t,i);r.setDefaultOrigin(i.origin);for(const o of Object.getOwnPropertyNames(s)){const a=WR(n[o],i).read,l=a&&a.source;let u;u=l&&typeof l=="string"?WS(t,l):t[o],a&&a.reader&&(u=a.reader.call(e,u,t,i)),u!==void 0&&r.set(o,u)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(n))s[o]||Dme(e,o,r,i)}r.setDefaultOrigin("user")}function jme(e,t,i,r=tK){const n={...r,messages:[]};i(n),n.messages?.forEach(s=>{s.type!=="warning"||e.loaded?r&&r.messages&&r.messages.push(s):e.loadWarnings.push(s)})}function Ume(e,t,i,r,n){const s={};return t.write?.writer?.call(e,r,s,i,n),s}function rK(e,t,i,r,n,s){if(!r||!r.write)return!1;const o=e.get(i);if(!n&&r.write.overridePolicy){const a=r.write.overridePolicy.call(e,o,i,s);a!==void 0&&(n=a)}if(n||(n=r.write),!n||n.enabled===!1)return!1;if((o===null&&!n.allowNull&&!n.writerEnsuresNonNull||o===void 0)&&n.isRequired){const a=new Ce("web-document-write:property-required",`Missing value for required property '${i}' on '${e.declaredClass}'`,{propertyName:i,target:e});return a&&s&&s.messages?s.messages.push(a):a&&!s&&et.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!n.allowNull&&!n.writerEnsuresNonNull||(!t.store.multipleOriginsSupported||t.store.originOf(i)===xt.DEFAULTS)&&Vme(e,i,s,r,o)||!n.ignoreOrigin&&s&&s.origin&&t.store.multipleOriginsSupported&&t.store.originOf(i)<pa(s.origin))}function Vme(e,t,i,r,n){const s=r.default;if(s===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(n);if(typeof s=="function"){if(Array.isArray(n)){const o=s.call(e,t,i);return D5(o,n)}return!1}return s===n}function nK(e,t,i,r){const n=zn(e),s=n.metadatas,o=qY(s[t],r);return!!o&&rK(e,n,t,o,i,r)}function sK(e,t,i){if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return QM(t,e.toJSON(i));const r=zn(e),n=r.metadatas;for(const s in n){const o=qY(n[s],i);if(!rK(e,r,s,o,void 0,i))continue;const a=e.get(s),l=Ume(e,o,o.write&&typeof o.write.target=="string"?o.write.target:s,a,i);Object.keys(l).length>0&&(t=QM(t,l),i?.resources?.pendingOperations?.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>QM(t,l,()=>"replace-arrays"))),i&&i.writtenProperties&&i.writtenProperties.push({target:e,propName:s,oldOrigin:pfe(r.store.originOf(s)),newOrigin:i.origin}))}return t}const QS=e=>{let t=class extends e{constructor(...i){super(...i);const r=zn(this),n=r.store,s=new kme;r.store=s,eK(r,n,s)}read(i,r){iK(this,i,r)}write(i={},r){return sK(this,i,r)}toJSON(i){return this.write({},i)}static fromJSON(i,r){return Bme.call(this,i,r)}};return t=h([ce("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function Bme(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(e,t),i}let Je=class extends QS(Lt){};Je=h([ce("esri.core.JSONSupport")],Je);var Ef;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(Ef||(Ef={}));let zme=class{constructor(t){this.instance=t,this._resolver=Kd(),this._status=Ef.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=Ef.RESOLVED,this._cleanUp()},()=>{this._status=Ef.REJECTED,this._cleanUp()})}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===Ef.RESOLVED}isRejected(){return this._status===Ef.REJECTED}isFulfilled(){return this._status!==Ef.PENDING}abort(){this._resolver.reject(fr())}when(t,i){return this._resolver.promise.then(t,i)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;const t=Kd(),i=[...this._resolvingPromises,t.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve(this.instance)},n=>{this.isFulfilled()||this._allPromise!==r||fs(n)||this._resolver.reject(n)}),t.resolve()}};const XS=e=>{let t=class extends e{constructor(...i){super(...i),this._promiseProps=new zme(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,r){return new Promise((n,s)=>{this._promiseProps.when(n,s)}).then(i,r)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return t=h([ce("esri.core.Promise")],t),t};let XT=class extends XS(Lt){};XT=h([ce("esri.core.Promise")],XT);const Gme="not-loaded",qme="loading",Hme="failed",gU="loaded",oK=e=>{let t=class extends e{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(r=>{const n=this.load.bind(this);this.load=s=>{const o=new Promise((a,l)=>{const u=DN(s,l);this.destroyed&&l(new Ce("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(a,l).finally(()=>{u&&u.remove()})});if(this.loadStatus===Gme){this._set("loadStatus",qme);const a=this._loadController=new AbortController;n({signal:a.signal}),ba(a.signal,()=>{this._promiseProps.abort()})}return r(),o}})),this.when(()=>{this._set("loadStatus",gU),this._loadController=null},r=>{this._set("loadStatus",Hme),this._set("loadError",r),this._loadController=null})}get loaded(){return this.loadStatus===gU}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){return this.isFulfilled()||(this._set("loadError",new Ce("load:cancelled","Cancelled")),this._loadController?.abort()),this}};return h([p({readOnly:!0})],t.prototype,"loaded",null),h([p({readOnly:!0})],t.prototype,"loadError",void 0),h([p({clonable:!1})],t.prototype,"loadStatus",void 0),h([p({type:[El],readOnly:!0})],t.prototype,"loadWarnings",null),t=h([ce("esri.core.Loadable")],t),t};let V_=class extends oK(XT){};V_=h([ce("esri.core.Loadable")],V_),function(e){function t(i){return!(!i||!i.load)}e.LoadableMixin=oK,e.isLoadable=t}(V_||(V_={}));const Ml=V_;function Wme(e,t,i){return Ia(e.map((r,n)=>t.apply(i,[r,n])))}async function Jme(e,t,i){return(await Ia(e.map((r,n)=>t.apply(i,[r,n])))).map(r=>r.value)}function GN(e){return{ok:!0,value:e}}function qN(e){return{ok:!1,error:e}}function Zme(e){return ee(e)&&e.ok===!0?e.value:null}function Yme(e){return ee(e)&&e.ok===!1?e.error:null}async function J5(e){if(Re(e))return{ok:!1,error:new Error("no promise provided")};try{return GN(await e)}catch(t){return qN(t)}}async function Rnt(e){try{return GN(await e)}catch(t){return da(t),qN(t)}}function aK(e,t){return new Jp(e,t)}let Jp=class extends Lt{get value(){return Zme(this._result)}get error(){return Yme(this._result)}get finished(){return ee(this._result)}constructor(t,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=Vx(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=t(r),this.promise.then(n=>{this._result=GN(n),this._cleanup()},n=>{this._result=qN(n),this._cleanup()}),this._abortHandle=ba(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=yn(this._abortHandle),this._abortController=null}};h([p()],Jp.prototype,"value",null),h([p()],Jp.prototype,"error",null),h([p()],Jp.prototype,"finished",null),h([p()],Jp.prototype,"promise",void 0),h([p()],Jp.prototype,"_result",void 0),Jp=h([ce("esri.core.asyncUtils.ReactiveTask")],Jp);async function Z5(e,t){return await e.load(),Kme(e,t)}async function Kme(e,t){const i=[],r=(...s)=>{for(const o of s)Re(o)||(Array.isArray(o)?r(...o):Pt.isCollection(o)?o.forEach(a=>r(a)):Ml.isLoadable(o)&&i.push(o))};t(r);let n=null;if(await Jme(i,async s=>{const o=await J5(Qme(s)?s.loadAll():s.load());o.ok!==!1||n||(n=o)}),n)throw n.error;return e}function Qme(e){return"loadAll"in e&&typeof e.loadAll=="function"}const Xme=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,eye={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function vU(e){const t=e?.match(Xme);if(!t)return null;const[,i,r,n]=t;if(!i)return null;let s=null,o=null,a=null;const{devext:l,qaext:u,www:c}=eye;if(r)if(s=i,n)switch(n.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qa":({customBaseUrl:o,portalHostname:a}=u);break;default:return null}else({customBaseUrl:o,portalHostname:a}=c);else switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qaext":({customBaseUrl:o,portalHostname:a}=u);break;case"www":({customBaseUrl:o,portalHostname:a}=c);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:s}}function tye(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}const iye=et.getLogger("esri.core.urlUtils"),dw=Ri.request,bU="esri/config: esriConfig.request.proxyUrl is not set.",lK=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,uK=/^\s*http:/i,rye=/^\s*https:/i,nye=/^\s*file:/i,sye=/:\d+$/,oye=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,aye=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),lye=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");let wh=class{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(aye);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(lye),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const gE={},uye=new wh(Ri.applicationUrl);let fo=uye;const cye=hye();let HN=cye;const WN=()=>fo,Pnt=()=>HN;function hye(){const e=fo.path,t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${`${fo.scheme}://${fo.host}${fo.port!=null?`:${fo.port}`:""}`}${t}`}function Ln(e){if(!e)return null;const t={path:null,query:null},i=new wh(e),r=e.indexOf("?");return i.query===null?t.path=e:(t.path=e.substring(0,r),t.query=cK(i.query)),i.fragment&&(t.hash=i.fragment,i.query===null&&(t.path=t.path.substring(0,t.path.length-(i.fragment.length+1)))),t}function cK(e){const t=e.split("&"),i={};for(const r of t){if(!r)continue;const n=r.indexOf("=");let s,o;n<0?(s=decodeURIComponent(r),o=""):(s=decodeURIComponent(r.slice(0,n)),o=decodeURIComponent(r.slice(n+1)));let a=i[s];typeof a=="string"&&(a=i[s]=[a]),Array.isArray(a)?a.push(o):i[s]=o}return i}function wU(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}function lm(e,t){return e?t&&typeof t=="function"?Object.keys(e).map(i=>encodeURIComponent(i)+"="+encodeURIComponent(t(i,e[i]))).join("&"):Object.keys(e).map(i=>{const r=e[i];if(r==null)return"";const n=encodeURIComponent(i)+"=",s=t&&t[i];return s?n+encodeURIComponent(s(r)):Array.isArray(r)?r.map(o=>wU(o)?n+encodeURIComponent(JSON.stringify(o)):n+encodeURIComponent(o)).join("&"):wU(r)?n+encodeURIComponent(JSON.stringify(r)):n+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function dye(e=!1){let t,i=dw.proxyUrl;if(typeof e=="string"){t=_ye(e);const r=Y5(e);r&&(i=r.proxyUrl)}else t=!!e;if(!i)throw iye.warn(bU),new Ce("urlutils:proxy-not-set",bU);return t&&YR()&&(i=XN(i)),Ln(i)}function pye(e){const t=Y5(e);let i,r;if(t){const n=JN(t.proxyUrl);i=n.path,r=n.query?cK(n.query):null}if(i){const n=Ln(e);e=i+"?"+n.path;const s=lm({...r,...n.query});s&&(e=`${e}?${s}`)}return e}const t_={path:"",query:""};function JN(e){const t=e.indexOf("?");return t!==-1?(t_.path=e.slice(0,t),t_.query=e.slice(t+1)):(t_.path=e,t_.query=null),t_}function hK(e){return e=(e=tA(e=Tye(e=JN(e).path),!0)).toLowerCase()}function fye(e){const t={proxyUrl:e.proxyUrl,urlPrefix:hK(e.urlPrefix)},i=dw.proxyRules,r=t.urlPrefix;let n=i.length;for(let s=0;s<i.length;s++){const o=i[s].urlPrefix;if(r.indexOf(o)===0){if(r.length===o.length)return-1;n=s;break}o.indexOf(r)===0&&(n=s+1)}return i.splice(n,0,t),n}function Y5(e){const t=dw.proxyRules,i=hK(e);for(let r=0;r<t.length;r++)if(i.indexOf(t[r].urlPrefix)===0)return t[r]}function mye(e,t){if(!e||!t)return!1;e=eA(e),t=eA(t);const i=vU(e),r=vU(t);return ee(i)&&ee(r)?i.portalHostname===r.portalHostname:!ee(i)&&!ee(r)&&wb(e,t,!0)}function dK(e,t){return e=eA(e),t=eA(t),tA(e)===tA(t)}function eA(e){const t=(e=ml(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function pK(e){const t=r=>r==null||r instanceof RegExp&&r.test(e)||typeof r=="string"&&e.startsWith(r),i=dw.interceptors;if(i){for(const r of i)if(Array.isArray(r.urls)){if(r.urls.some(t))return r}else if(t(r.urls))return r}return null}function wb(e,t,i=!1){if(!e||!t)return!1;const r=QR(e),n=QR(t);return!(!i&&r.scheme!==n.scheme)&&r.host!=null&&n.host!=null&&r.host.toLowerCase()===n.host.toLowerCase()&&r.port===n.port}function ZN(e){if(typeof e=="string"){if(!yl(e))return!0;e=QR(e)}if(wb(e,fo))return!0;const t=dw.trustedServers||[];for(let i=0;i<t.length;i++){const r=yye(t[i]);for(let n=0;n<r.length;n++)if(wb(e,r[n]))return!0}return!1}function yye(e){return gE[e]||(QN(e)||pc(e)?gE[e]=[new wh(hl(e))]:gE[e]=[new wh(`http://${e}`),new wh(`https://${e}`)]),gE[e]}function hl(e,t=HN,i){return pc(e)?i&&i.preserveProtocolRelative?e:fo.scheme==="http"&&fo.authority===uc(e).slice(2)?`http:${e}`:`https:${e}`:QN(e)?e:p0(e[0]==="/"?Mye(t):t,e)}function YN(e,t=HN,i){if(e==null||!yl(e))return e;const r=ml(e),n=r.toLowerCase(),s=ml(t).toLowerCase().replace(/\/+$/,""),o=i?ml(i).toLowerCase().replace(/\/+$/,""):null;if(o&&s.indexOf(o)!==0)return e;const a=(d,f,m)=>(m=d.indexOf(f,m))===-1?d.length:m;let l=a(n,"/",n.indexOf("//")+2),u=-1;for(;n.slice(0,l+1)===s.slice(0,l)+"/"&&(u=l+1,l!==n.length);)l=a(n,"/",l+1);if(u===-1||o&&u<o.length)return e;e=r.slice(u);const c=s.slice(u-1).replace(/[^/]+/g,"").length;if(c>0)for(let d=0;d<c;d++)e=`../${e}`;else e=`./${e}`;return e}function ml(e){return e=$ye(e=Cye(e=Aye(e=hl(e=e.trim()))))}function p0(...e){const t=e.filter(ee);if(!t||!t.length)return;const i=[];if(yl(t[0])){const n=t[0],s=n.indexOf("//");s!==-1&&(i.push(n.slice(0,s+1)),Sye(t[0])&&(i[0]+="/"),t[0]=n.slice(s+2))}else t[0][0]==="/"&&i.push("");const r=t.reduce((n,s)=>s?n.concat(s.split("/")):n,[]);for(let n=0;n<r.length;n++){const s=r[n];s===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!s&&n===r.length-1||s&&(s!=="."||i.length===0))&&i.push(s)}return i.join("/")}function uc(e,t=!1){if(e==null||K5(e)||U0(e))return null;let i=e.indexOf("://");if(i===-1&&pc(e))i=2;else{if(i===-1)return null;i+=3}const r=e.indexOf("/",i);return r!==-1&&(e=e.slice(0,r)),t&&(e=tA(e,!0)),e}function yl(e){return pc(e)||QN(e)}function K5(e){return e!=null&&e.slice(0,5)==="blob:"}function U0(e){return e!=null&&e.slice(0,5)==="data:"}function gye(e){const t=KN(e);if(!t||!t.isBase64)return null;const i=atob(t.data),r=new Uint8Array(i.length);for(let n=0;n<i.length;n++)r[n]=i.charCodeAt(n);return r.buffer}function Nnt(e){return btoa(String.fromCharCode.apply(null,e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const vye=/^data:(.*?)(;base64)?,(.*)$/;function KN(e){const t=e.match(vye);if(!t)return null;const[,i,r,n]=t;return{mediaType:i,isBase64:!!r,data:n}}function fK(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}function Fnt(e){const t=gye(e);if(!t)return null;const i=KN(e);return new Blob([t],{type:i.mediaType})}function Dnt(e,t){bye(e,t)||wye(e,t)}function bye(e,t){if(!e)return!1;const i=document.createElement("a");if(!("download"in i))return!1;const r=URL.createObjectURL(e);return i.download=t,i.href=r,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),!0}function wye(e,t){return!!window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(e,t)}function pc(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function QN(e){return e!=null&&lK.test(e)}function _ye(e){return e!=null&&rye.test(e)||fo.scheme==="https"&&pc(e)}function xye(e){return e!=null&&uK.test(e)||fo.scheme==="http"&&pc(e)}function Sye(e){return e!=null&&nye.test(e)}function XN(e){return pc(e)?`https:${e}`:e.replace(uK,"https:")}function Eye(){return fo.scheme==="http"}function YR(){return fo.scheme==="https"}function tA(e,t=!1){return pc(e)?e.slice(2):(e=e.replace(lK,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function Mye(e){const t=e.indexOf("//"),i=e.indexOf("/",t+2);return i===-1?e:e.slice(0,i)}function Iye(e){let t=0;if(yl(e)){const r=e.indexOf("//");r!==-1&&(t=r+2)}const i=e.lastIndexOf("/");return i<t?e:e.slice(0,i+1)}function jnt(e,t){if(!e)return"";const i=Ln(e).path.replace(/\/+$/,""),r=i.substring(i.lastIndexOf("/")+1);if(!t?.length)return r;const n=new RegExp(`.(${t.join("|")})$`,"ig");return r.replace(n,"")}function Tye(e){return e&&e[e.length-1]==="/"?e:`${e}/`}function mK(e){return e.replace(/\/+$/,"")}function Aye(e){if(/^https?:\/\//i.test(e)){const t=JN(e);e=(e=t.path.replace(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function Cye(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function $ye(e){const t=dw.httpsDomains;if(!xye(e))return e;const i=e.indexOf("/",7);let r;if(r=i===-1?e:e.slice(0,i),r=r.toLowerCase().slice(7),sye.test(r)){if(!r.endsWith(":80"))return e;r=r.slice(0,-3),e=e.replace(":80","")}return Eye()&&r===fo.authority&&!oye.test(e)||(YR()&&r===fo.authority||t&&t.some(n=>r===n||r.endsWith(`.${n}`))||YR()&&!Y5(e))&&(e=XN(e)),e}function KR(e,t,i){if(!(t&&i&&e&&yl(e)))return e;const r=e.indexOf("//"),n=e.indexOf("/",r+2),s=e.indexOf(":",r+2),o=Math.min(n<0?e.length:n,s<0?e.length:s);return e.slice(r+2,o).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,r+2)}${i}${e.slice(o)}`}function QR(e){return typeof e=="string"?new wh(hl(e)):(e.scheme||(e.scheme=fo.scheme),e)}function Unt(e){return Oye.test(e)}function yK(e,t){const i=Ln(e),r=Object.keys(i.query||{});return r.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function gK(e,t,i){const r=Ln(e),n=r.query||{};return n[t]=String(i),`${r.path}?${lm(n)}`}function nI(e,t){const i=Ln(e),r=i.query||{};for(const s in t)r[s]=t[s];const n=lm(r);return n?`${i.path}?${n}`:i.path}function Vnt(e){if(Re(e))return null;const t=e.match(vK);return t?t[2]:null}function _U(e){if(Re(e))return null;const t=e.match(vK);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}const vK=/([^.]*)\.([^\/]*)$/,Oye=/(^data:image\/svg|\.svg$)/i;function it(e,t,i){let r,n;return t===void 0?(n=e,r=[void 0]):typeof t!="string"?(n=e,r=[void 0],i=t):(n=t,r=Array.isArray(e)?e:[e]),(s,o)=>{const a=s.constructor.prototype;for(const l of r){const u=FY(s,l,n);u.write&&typeof u.write=="object"||(u.write={}),i&&(u.write.target=i),u.write.writer=a[o]}}}let ti=class{constructor(t,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=this._invertMap(t),this.apiValues=this._getKeysSorted(this._apiToJSON),this.jsonValues=this._getKeysSorted(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,n,s)=>{const o=this.toJSON(r);o!==void 0&&_o(s,o,n)},this.write.isJSONMapWriter=!0}toJSON(t){if(t==null)return null;if(this._apiToJSON.hasOwnProperty(t)){const i=this._apiToJSON[t];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?void 0:t}fromJSON(t){return t!=null&&this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}_invertMap(t){const i={};for(const r in t)i[t[r]]=r;return i}_getKeysSorted(t){const i=[];for(const r in t)i.push(r);return i.sort(),i}};function _n(){return function(e,t){return new ti(e,{ignoreUnknown:!0,...t})}}let eF=class{constructor(t,i,r,n){this.semiMajorAxis=t,this.flattening=i,this.outerAtmosphereRimWidth=r;const s=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*s,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=n||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const _r=new eF(6378137,1/298.257223563,3e5,.006694379990137799),Gd=new eF(3396190,1/169.8944472236118,23e4),um=new eF(1737400,0,0);var tu;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(tu||(tu={}));let w;const ue={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(w=2e3;w<=2045;w++)ue[w]=0;for(w=2056;w<=2065;w++)ue[w]=0;for(w=2067;w<=2135;w++)ue[w]=0;for(w=2137;w<=2154;w++)ue[w]=0;for(w=2161;w<=2170;w++)ue[w]=0;for(w=2172;w<=2193;w++)ue[w]=0;for(w=2195;w<=2198;w++)ue[w]=0;for(w=2200;w<=2203;w++)ue[w]=0;for(w=2205;w<=2217;w++)ue[w]=0;for(w=2222;w<=2224;w++)ue[w]=1;for(w=2225;w<=2250;w++)ue[w]=2;for(w=2251;w<=2253;w++)ue[w]=1;for(w=2257;w<=2264;w++)ue[w]=2;for(w=2274;w<=2279;w++)ue[w]=2;for(w=2280;w<=2282;w++)ue[w]=1;for(w=2283;w<=2289;w++)ue[w]=2;for(w=2290;w<=2292;w++)ue[w]=0;for(w=2308;w<=2313;w++)ue[w]=0;for(w=2315;w<=2491;w++)ue[w]=0;for(w=2494;w<=2866;w++)ue[w]=0;for(w=2867;w<=2869;w++)ue[w]=1;for(w=2870;w<=2888;w++)ue[w]=2;for(w=2891;w<=2895;w++)ue[w]=2;for(w=2896;w<=2898;w++)ue[w]=1;for(w=2902;w<=2908;w++)ue[w]=2;for(w=2915;w<=2920;w++)ue[w]=2;for(w=2921;w<=2923;w++)ue[w]=1;for(w=2924;w<=2930;w++)ue[w]=2;for(w=2931;w<=2962;w++)ue[w]=0;for(w=2964;w<=2968;w++)ue[w]=2;for(w=2969;w<=2973;w++)ue[w]=0;for(w=2975;w<=2991;w++)ue[w]=0;for(w=2995;w<=3051;w++)ue[w]=0;for(w=3054;w<=3079;w++)ue[w]=0;for(w=3081;w<=3088;w++)ue[w]=0;for(w=3092;w<=3101;w++)ue[w]=0;for(w=3106;w<=3138;w++)ue[w]=0;for(w=3146;w<=3151;w++)ue[w]=0;for(w=3153;w<=3166;w++)ue[w]=0;for(w=3168;w<=3172;w++)ue[w]=0;for(w=3174;w<=3203;w++)ue[w]=0;for(w=3294;w<=3358;w++)ue[w]=0;for(w=3367;w<=3403;w++)ue[w]=0;for(w=3408;w<=3416;w++)ue[w]=0;for(w=3417;w<=3438;w++)ue[w]=2;for(w=3441;w<=3446;w++)ue[w]=2;for(w=3447;w<=3450;w++)ue[w]=0;for(w=3451;w<=3459;w++)ue[w]=2;for(w=3460;w<=3478;w++)ue[w]=0;for(w=3554;w<=3559;w++)ue[w]=0;for(w=3560;w<=3570;w++)ue[w]=2;for(w=3571;w<=3581;w++)ue[w]=0;for(w=3594;w<=3597;w++)ue[w]=0;for(w=3601;w<=3604;w++)ue[w]=0;for(w=3637;w<=3639;w++)ue[w]=0;for(w=3665;w<=3667;w++)ue[w]=0;for(w=3693;w<=3695;w++)ue[w]=0;for(w=3701;w<=3727;w++)ue[w]=0;for(w=3728;w<=3739;w++)ue[w]=2;for(w=3740;w<=3751;w++)ue[w]=0;for(w=3753;w<=3760;w++)ue[w]=2;for(w=3761;w<=3773;w++)ue[w]=0;for(w=3775;w<=3777;w++)ue[w]=0;for(w=3779;w<=3781;w++)ue[w]=0;for(w=3783;w<=3785;w++)ue[w]=0;for(w=3788;w<=3791;w++)ue[w]=0;for(w=3797;w<=3802;w++)ue[w]=0;for(w=3814;w<=3816;w++)ue[w]=0;for(w=3825;w<=3829;w++)ue[w]=0;for(w=3832;w<=3841;w++)ue[w]=0;for(w=3844;w<=3852;w++)ue[w]=0;for(w=3873;w<=3885;w++)ue[w]=0;for(w=3890;w<=3893;w++)ue[w]=0;for(w=3907;w<=3912;w++)ue[w]=0;for(w=3942;w<=3950;w++)ue[w]=0;for(w=3968;w<=3970;w++)ue[w]=0;for(w=3973;w<=3976;w++)ue[w]=0;for(w=3986;w<=3989;w++)ue[w]=0;for(w=3994;w<=3997;w++)ue[w]=0;for(w=4048;w<=4051;w++)ue[w]=0;for(w=4056;w<=4063;w++)ue[w]=0;for(w=4093;w<=4096;w++)ue[w]=0;for(w=4390;w<=4398;w++)ue[w]=0;for(w=4399;w<=4413;w++)ue[w]=2;for(w=4418;w<=4433;w++)ue[w]=2;for(w=4455;w<=4457;w++)ue[w]=2;for(w=4484;w<=4489;w++)ue[w]=0;for(w=4491;w<=4554;w++)ue[w]=0;for(w=4568;w<=4589;w++)ue[w]=0;for(w=4652;w<=4656;w++)ue[w]=0;for(w=4766;w<=4800;w++)ue[w]=0;for(w=5014;w<=5016;w++)ue[w]=0;for(w=5069;w<=5072;w++)ue[w]=0;for(w=5105;w<=5130;w++)ue[w]=0;for(w=5173;w<=5188;w++)ue[w]=0;for(w=5253;w<=5259;w++)ue[w]=0;for(w=5269;w<=5275;w++)ue[w]=0;for(w=5292;w<=5311;w++)ue[w]=0;for(w=5329;w<=5331;w++)ue[w]=0;for(w=5343;w<=5349;w++)ue[w]=0;for(w=5355;w<=5357;w++)ue[w]=0;for(w=5387;w<=5389;w++)ue[w]=0;for(w=5459;w<=5463;w++)ue[w]=0;for(w=5479;w<=5482;w++)ue[w]=0;for(w=5518;w<=5520;w++)ue[w]=0;for(w=5530;w<=5539;w++)ue[w]=0;for(w=5550;w<=5552;w++)ue[w]=0;for(w=5562;w<=5583;w++)ue[w]=0;for(w=5623;w<=5625;w++)ue[w]=2;for(w=5631;w<=5639;w++)ue[w]=0;for(w=5649;w<=5653;w++)ue[w]=0;for(w=5663;w<=5680;w++)ue[w]=0;for(w=5682;w<=5685;w++)ue[w]=0;for(w=5875;w<=5877;w++)ue[w]=0;for(w=5896;w<=5899;w++)ue[w]=0;for(w=5921;w<=5940;w++)ue[w]=0;for(w=6050;w<=6125;w++)ue[w]=0;for(w=6244;w<=6275;w++)ue[w]=0;for(w=6328;w<=6348;w++)ue[w]=0;for(w=6350;w<=6356;w++)ue[w]=0;for(w=6366;w<=6372;w++)ue[w]=0;for(w=6381;w<=6387;w++)ue[w]=0;for(w=6393;w<=6404;w++)ue[w]=0;for(w=6480;w<=6483;w++)ue[w]=0;for(w=6511;w<=6514;w++)ue[w]=0;for(w=6579;w<=6581;w++)ue[w]=0;for(w=6619;w<=6624;w++)ue[w]=0;for(w=6625;w<=6627;w++)ue[w]=2;for(w=6628;w<=6632;w++)ue[w]=0;for(w=6634;w<=6637;w++)ue[w]=0;for(w=6669;w<=6692;w++)ue[w]=0;for(w=6707;w<=6709;w++)ue[w]=0;for(w=6720;w<=6723;w++)ue[w]=0;for(w=6732;w<=6738;w++)ue[w]=0;for(w=6931;w<=6933;w++)ue[w]=0;for(w=6956;w<=6959;w++)ue[w]=0;for(w=7005;w<=7007;w++)ue[w]=0;for(w=7057;w<=7070;w++)ue[w]=2;for(w=7074;w<=7082;w++)ue[w]=0;for(w=7109;w<=7118;w++)ue[w]=0;for(w=7119;w<=7127;w++)ue[w]=1;for(w=7374;w<=7376;w++)ue[w]=0;for(w=7528;w<=7586;w++)ue[w]=0;for(w=7587;w<=7645;w++)ue[w]=2;for(w=7692;w<=7696;w++)ue[w]=0;for(w=7755;w<=7787;w++)ue[w]=0;for(w=7791;w<=7795;w++)ue[w]=0;for(w=7799;w<=7801;w++)ue[w]=0;for(w=7803;w<=7805;w++)ue[w]=0;for(w=7825;w<=7831;w++)ue[w]=0;for(w=7845;w<=7859;w++)ue[w]=0;for(w=8013;w<=8032;w++)ue[w]=0;for(w=8065;w<=8068;w++)ue[w]=1;for(w=8518;w<=8529;w++)ue[w]=2;for(w=8533;w<=8536;w++)ue[w]=2;for(w=8538;w<=8540;w++)ue[w]=2;for(w=8677;w<=8679;w++)ue[w]=0;for(w=8836;w<=8840;w++)ue[w]=0;for(w=8857;w<=8859;w++)ue[w]=0;for(w=8908;w<=8910;w++)ue[w]=0;for(w=9154;w<=9159;w++)ue[w]=0;for(w=9205;w<=9218;w++)ue[w]=0;for(w=9271;w<=9273;w++)ue[w]=0;for(w=9295;w<=9297;w++)ue[w]=0;for(w=9356;w<=9360;w++)ue[w]=0;for(w=9404;w<=9407;w++)ue[w]=0;for(w=9476;w<=9482;w++)ue[w]=0;for(w=9487;w<=9494;w++)ue[w]=0;for(w=9697;w<=9699;w++)ue[w]=0;for(w=9821;w<=9865;w++)ue[w]=0;for(w=20002;w<=20032;w++)ue[w]=0;for(w=20047;w<=20049;w++)ue[w]=0;for(w=20062;w<=20092;w++)ue[w]=0;for(w=20135;w<=20138;w++)ue[w]=0;for(w=20248;w<=20258;w++)ue[w]=0;for(w=20348;w<=20358;w++)ue[w]=0;for(w=20436;w<=20440;w++)ue[w]=0;for(w=20822;w<=20824;w++)ue[w]=0;for(w=20904;w<=20932;w++)ue[w]=0;for(w=20934;w<=20936;w++)ue[w]=0;for(w=21004;w<=21032;w++)ue[w]=0;for(w=21035;w<=21037;w++)ue[w]=0;for(w=21095;w<=21097;w++)ue[w]=0;for(w=21148;w<=21150;w++)ue[w]=0;for(w=21207;w<=21264;w++)ue[w]=0;for(w=21307;w<=21364;w++)ue[w]=0;for(w=21413;w<=21423;w++)ue[w]=0;for(w=21453;w<=21463;w++)ue[w]=0;for(w=21473;w<=21483;w++)ue[w]=0;for(w=21780;w<=21782;w++)ue[w]=0;for(w=21891;w<=21894;w++)ue[w]=0;for(w=21896;w<=21899;w++)ue[w]=0;for(w=22171;w<=22177;w++)ue[w]=0;for(w=22181;w<=22187;w++)ue[w]=0;for(w=22191;w<=22197;w++)ue[w]=0;for(w=22207;w<=22222;w++)ue[w]=0;for(w=22234;w<=22236;w++)ue[w]=0;for(w=22243;w<=22250;w++)ue[w]=0;for(w=22262;w<=22265;w++)ue[w]=0;for(w=22307;w<=22322;w++)ue[w]=0;for(w=22348;w<=22357;w++)ue[w]=0;for(w=22407;w<=22422;w++)ue[w]=0;for(w=22462;w<=22465;w++)ue[w]=0;for(w=22521;w<=22525;w++)ue[w]=0;for(w=22607;w<=22622;w++)ue[w]=0;for(w=22641;w<=22646;w++)ue[w]=0;for(w=22648;w<=22657;w++)ue[w]=0;for(w=22707;w<=22722;w++)ue[w]=0;for(w=22762;w<=22765;w++)ue[w]=0;for(w=22991;w<=22994;w++)ue[w]=0;for(w=23028;w<=23038;w++)ue[w]=0;for(w=23830;w<=23853;w++)ue[w]=0;for(w=23866;w<=23872;w++)ue[w]=0;for(w=23877;w<=23884;w++)ue[w]=0;for(w=23886;w<=23894;w++)ue[w]=0;for(w=23946;w<=23948;w++)ue[w]=0;for(w=24311;w<=24313;w++)ue[w]=0;for(w=24342;w<=24347;w++)ue[w]=0;for(w=24370;w<=24374;w++)ue[w]=10;for(w=24375;w<=24381;w++)ue[w]=0;for(w=24718;w<=24721;w++)ue[w]=0;for(w=24817;w<=24821;w++)ue[w]=0;for(w=24877;w<=24882;w++)ue[w]=0;for(w=24891;w<=24893;w++)ue[w]=0;for(w=25391;w<=25395;w++)ue[w]=0;for(w=25828;w<=25838;w++)ue[w]=0;for(w=26191;w<=26195;w++)ue[w]=0;for(w=26391;w<=26393;w++)ue[w]=0;for(w=26701;w<=26722;w++)ue[w]=0;for(w=26729;w<=26799;w++)ue[w]=2;for(w=26801;w<=26803;w++)ue[w]=2;for(w=26811;w<=26813;w++)ue[w]=2;for(w=26847;w<=26870;w++)ue[w]=2;for(w=26891;w<=26899;w++)ue[w]=0;for(w=26901;w<=26923;w++)ue[w]=0;for(w=26929;w<=26946;w++)ue[w]=0;for(w=26948;w<=26998;w++)ue[w]=0;for(w=27037;w<=27040;w++)ue[w]=0;for(w=27205;w<=27232;w++)ue[w]=0;for(w=27258;w<=27260;w++)ue[w]=0;for(w=27391;w<=27398;w++)ue[w]=0;for(w=27561;w<=27564;w++)ue[w]=0;for(w=27571;w<=27574;w++)ue[w]=0;for(w=27581;w<=27584;w++)ue[w]=0;for(w=27591;w<=27594;w++)ue[w]=0;for(w=28191;w<=28193;w++)ue[w]=0;for(w=28348;w<=28358;w++)ue[w]=0;for(w=28402;w<=28432;w++)ue[w]=0;for(w=28462;w<=28492;w++)ue[w]=0;for(w=29118;w<=29122;w++)ue[w]=0;for(w=29168;w<=29172;w++)ue[w]=0;for(w=29177;w<=29185;w++)ue[w]=0;for(w=29187;w<=29195;w++)ue[w]=0;for(w=29900;w<=29903;w++)ue[w]=0;for(w=30161;w<=30179;w++)ue[w]=0;for(w=30491;w<=30494;w++)ue[w]=0;for(w=30729;w<=30732;w++)ue[w]=0;for(w=31251;w<=31259;w++)ue[w]=0;for(w=31265;w<=31268;w++)ue[w]=0;for(w=31275;w<=31279;w++)ue[w]=0;for(w=31281;w<=31297;w++)ue[w]=0;for(w=31461;w<=31469;w++)ue[w]=0;for(w=31491;w<=31495;w++)ue[w]=0;for(w=31917;w<=31922;w++)ue[w]=0;for(w=31965;w<=32e3;w++)ue[w]=0;for(w=32001;w<=32003;w++)ue[w]=2;for(w=32005;w<=32031;w++)ue[w]=2;for(w=32033;w<=32060;w++)ue[w]=2;for(w=32064;w<=32067;w++)ue[w]=2;for(w=32074;w<=32077;w++)ue[w]=2;for(w=32081;w<=32086;w++)ue[w]=0;for(w=32107;w<=32130;w++)ue[w]=0;for(w=32133;w<=32159;w++)ue[w]=0;for(w=32164;w<=32167;w++)ue[w]=2;for(w=32180;w<=32199;w++)ue[w]=0;for(w=32201;w<=32260;w++)ue[w]=0;for(w=32301;w<=32360;w++)ue[w]=0;for(w=32601;w<=32662;w++)ue[w]=0;for(w=32664;w<=32667;w++)ue[w]=2;for(w=32701;w<=32761;w++)ue[w]=0;for(w=53001;w<=53004;w++)ue[w]=0;for(w=53008;w<=53019;w++)ue[w]=0;for(w=53021;w<=53032;w++)ue[w]=0;for(w=53034;w<=53037;w++)ue[w]=0;for(w=53042;w<=53046;w++)ue[w]=0;for(w=53074;w<=53080;w++)ue[w]=0;for(w=54001;w<=54004;w++)ue[w]=0;for(w=54008;w<=54019;w++)ue[w]=0;for(w=54021;w<=54032;w++)ue[w]=0;for(w=54034;w<=54037;w++)ue[w]=0;for(w=54042;w<=54046;w++)ue[w]=0;for(w=54048;w<=54053;w++)ue[w]=0;for(w=54074;w<=54080;w++)ue[w]=0;for(w=54098;w<=54101;w++)ue[w]=0;for(w=102001;w<=102040;w++)ue[w]=0;for(w=102042;w<=102063;w++)ue[w]=0;for(w=102065;w<=102067;w++)ue[w]=0;for(w=102070;w<=102117;w++)ue[w]=0;for(w=102122;w<=102216;w++)ue[w]=0;for(w=102221;w<=102377;w++)ue[w]=0;for(w=102382;w<=102388;w++)ue[w]=0;for(w=102389;w<=102398;w++)ue[w]=2;for(w=102399;w<=102444;w++)ue[w]=0;for(w=102445;w<=102447;w++)ue[w]=2;for(w=102448;w<=102458;w++)ue[w]=0;for(w=102459;w<=102468;w++)ue[w]=2;for(w=102469;w<=102499;w++)ue[w]=0;for(w=102500;w<=102519;w++)ue[w]=1;for(w=102520;w<=102524;w++)ue[w]=0;for(w=102525;w<=102529;w++)ue[w]=2;for(w=102530;w<=102588;w++)ue[w]=0;for(w=102590;w<=102598;w++)ue[w]=0;for(w=102601;w<=102603;w++)ue[w]=0;for(w=102605;w<=102628;w++)ue[w]=0;for(w=102629;w<=102646;w++)ue[w]=2;for(w=102648;w<=102700;w++)ue[w]=2;for(w=102701;w<=102703;w++)ue[w]=0;for(w=102707;w<=102730;w++)ue[w]=2;for(w=102733;w<=102758;w++)ue[w]=2;for(w=102767;w<=102900;w++)ue[w]=0;for(w=102901;w<=102933;w++)ue[w]=2;for(w=102934;w<=102950;w++)ue[w]=13;for(w=102951;w<=102955;w++)ue[w]=0;for(w=102961;w<=102963;w++)ue[w]=0;for(w=102965;w<=102969;w++)ue[w]=0;for(w=102971;w<=102973;w++)ue[w]=0;for(w=102975;w<=102989;w++)ue[w]=0;for(w=102990;w<=102992;w++)ue[w]=1;for(w=102997;w<=103002;w++)ue[w]=0;for(w=103003;w<=103008;w++)ue[w]=2;for(w=103009;w<=103011;w++)ue[w]=0;for(w=103012;w<=103014;w++)ue[w]=2;for(w=103019;w<=103021;w++)ue[w]=0;for(w=103022;w<=103024;w++)ue[w]=2;for(w=103029;w<=103031;w++)ue[w]=0;for(w=103032;w<=103034;w++)ue[w]=2;for(w=103065;w<=103068;w++)ue[w]=0;for(w=103074;w<=103076;w++)ue[w]=0;for(w=103077;w<=103079;w++)ue[w]=1;for(w=103080;w<=103082;w++)ue[w]=0;for(w=103083;w<=103085;w++)ue[w]=2;for(w=103090;w<=103093;w++)ue[w]=0;for(w=103097;w<=103099;w++)ue[w]=0;for(w=103100;w<=103102;w++)ue[w]=2;for(w=103107;w<=103109;w++)ue[w]=0;for(w=103110;w<=103112;w++)ue[w]=2;for(w=103113;w<=103116;w++)ue[w]=0;for(w=103117;w<=103120;w++)ue[w]=2;for(w=103153;w<=103157;w++)ue[w]=0;for(w=103158;w<=103162;w++)ue[w]=2;for(w=103163;w<=103165;w++)ue[w]=0;for(w=103166;w<=103168;w++)ue[w]=1;for(w=103169;w<=103171;w++)ue[w]=2;for(w=103186;w<=103188;w++)ue[w]=0;for(w=103189;w<=103191;w++)ue[w]=2;for(w=103192;w<=103195;w++)ue[w]=0;for(w=103196;w<=103199;w++)ue[w]=2;for(w=103200;w<=103224;w++)ue[w]=0;for(w=103225;w<=103227;w++)ue[w]=1;for(w=103232;w<=103237;w++)ue[w]=0;for(w=103238;w<=103243;w++)ue[w]=2;for(w=103244;w<=103246;w++)ue[w]=0;for(w=103247;w<=103249;w++)ue[w]=2;for(w=103254;w<=103256;w++)ue[w]=0;for(w=103257;w<=103259;w++)ue[w]=2;for(w=103264;w<=103266;w++)ue[w]=0;for(w=103267;w<=103269;w++)ue[w]=2;for(w=103300;w<=103375;w++)ue[w]=0;for(w=103381;w<=103383;w++)ue[w]=0;for(w=103384;w<=103386;w++)ue[w]=1;for(w=103387;w<=103389;w++)ue[w]=0;for(w=103390;w<=103392;w++)ue[w]=2;for(w=103397;w<=103399;w++)ue[w]=0;for(w=103400;w<=103471;w++)ue[w]=2;for(w=103476;w<=103478;w++)ue[w]=0;for(w=103479;w<=103481;w++)ue[w]=2;for(w=103486;w<=103488;w++)ue[w]=0;for(w=103489;w<=103491;w++)ue[w]=2;for(w=103492;w<=103495;w++)ue[w]=0;for(w=103496;w<=103499;w++)ue[w]=2;for(w=103528;w<=103543;w++)ue[w]=0;for(w=103544;w<=103548;w++)ue[w]=2;for(w=103549;w<=103551;w++)ue[w]=0;for(w=103552;w<=103554;w++)ue[w]=1;for(w=103555;w<=103557;w++)ue[w]=2;for(w=103558;w<=103560;w++)ue[w]=0;for(w=103571;w<=103573;w++)ue[w]=0;for(w=103574;w<=103576;w++)ue[w]=2;for(w=103577;w<=103580;w++)ue[w]=0;for(w=103581;w<=103583;w++)ue[w]=2;for(w=103595;w<=103694;w++)ue[w]=0;for(w=103696;w<=103699;w++)ue[w]=0;for(w=103700;w<=103793;w++)ue[w]=2;for(w=103794;w<=103890;w++)ue[w]=0;for(w=103891;w<=103896;w++)ue[w]=2;for(w=103900;w<=103971;w++)ue[w]=2;for(w=103972;w<=103977;w++)ue[w]=0;for(w=112e3;w<=112101;w++)ue[w]=0;const Rye={102113:!0,102100:!0,3857:!0,3785:!0},kye={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},xU='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',vE=[-20037508342788905e-9,20037508342788905e-9],bE=[-20037508342787e-6,20037508342787e-6],bK={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:vE,origin:bE,dx:1e-5},102100:{wkTemplate:xU,valid:vE,origin:bE,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:vE,origin:bE,dx:1e-5},3857:{wkTemplate:xU,valid:vE,origin:bE,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function vn(e,t){return e===t||!Re(e)&&!Re(t)&&(e.wkid!=null||t.wkid!=null?e.wkid===t.wkid||f0(e)&&f0(t)||t.latestWkid!=null&&e.wkid===t.latestWkid||e.latestWkid!=null&&t.wkid===e.latestWkid:!(!e.wkt||!t.wkt)&&e.wkt.toUpperCase()===t.wkt.toUpperCase())}function gl(e){return Es(e)&&e.wkid&&bK[e.wkid]||null}function tF(e){return!!Es(e)&&(e.wkid?ue[e.wkid]==null:!!e.wkt&&!!/^\s*GEOGCS/i.test(e.wkt))}function Lye(e){return!(e3(e)||t3(e))}function Hx(e){return Es(e)&&e.wkid===4326}function Gnt(e){return Es(e)&&e.wkid===tu.CGCS2000}function f0(e){return Es(e)&&e.wkid!=null&&Rye[e.wkid]===!0}function Pye(e){return Es(e)&&e.wkid===32662}function iF(e){return e===tu.GCSMARS2000||e===tu.GCSMARS2000_SPHERE}function e3(e){return Es(e)&&e.wkid!=null&&iF(e.wkid)}function rF(e){return e===tu.GCSMOON2000}function t3(e){return Es(e)&&e.wkid!=null&&rF(e.wkid)}function Nye(e){return Es(e)&&e.wkid!=null&&kye[e.wkid]===!0}function Es(e){return ee(e)&&(e.wkid!=null&&e.wkid>=2e3||e.wkt!=null)}const Fye={wkid:4326,wkt:dc(bK[4326].wkTemplate,{Central_Meridian:"0.0"})},Dye={wkid:102100,latestWkid:3857},jye={wkid:32662};function nF(e){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const Uye=nF(_r),wK=nF(Gd),_K=nF(um),Vye={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${_r.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`};function Bye(e){return ee(e)&&(e3(e)||vn(e,wK))?Gd:ee(e)&&(t3(e)||vn(e,_K))?um:_r}function qnt(e){return iF(e)?Gd:rF(e)?um:_r}const xK=39.37,zye=_r.radius*Math.PI/200,SK=/UNIT\[([^\]]+)\]\]$/i,Hg=ue,EK=/UNIT\[([^\]]+)\]/i,Gye=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),qye=_n()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),Ac=e=>e*e,Cp=e=>e*e*e,Wx={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Ac(.001)},"square-centimeters":{inBaseUnits:Ac(.01)},"square-decimeters":{inBaseUnits:Ac(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Ac(1e3)},"square-inches":{inBaseUnits:Ac(.0254)},"square-feet":{inBaseUnits:Ac(.3048)},"square-yards":{inBaseUnits:Ac(.9144)},"square-miles":{inBaseUnits:Ac(1609.344)},"square-us-feet":{inBaseUnits:Ac(1200/3937)},acres:{inBaseUnits:.0015625*Ac(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Cp(.001)},"cubic-centimeters":{inBaseUnits:1e3*Cp(.01)},"cubic-decimeters":{inBaseUnits:1e3*Cp(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Cp(1e3)},"cubic-inches":{inBaseUnits:1e3*Cp(.0254)},"cubic-feet":{inBaseUnits:1e3*Cp(.3048)},"cubic-yards":{inBaseUnits:1e3*Cp(.9144)},"cubic-miles":{inBaseUnits:1e3*Cp(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},Hye=(()=>{const e={};for(const t in Wx)for(const i in Wx[t].units)e[i]=t;return e})();function Wye(e,t,i){return e*Wx[i].units[t].inBaseUnits}function Jye(e,t,i){return e/Wx[i].units[t].inBaseUnits}function XR(e){const t=Hye[e];if(!t)throw new Error("unknown type");return t}function SU(e,t=null){return t=t||XR(e),Wx[t].baseUnit===e}function Qa(e,t,i){if(t===i)return e;const r=XR(t);if(r!==XR(i))throw new Error("incompatible units");const n=SU(t,r)?e:Wye(e,t,r);return SU(i,r)?n:Jye(n,i,r)}function Zye(e,t,i){return Qa(e,t,"meters")/(i*Math.PI/180)}function MK(e){return qye.fromJSON(e.toLowerCase())||null}function _b(e){if(ee(e)&&!Lye(e))return 1;const t=dp(e);return t>1e5?1:t}function Yye(e){return dp(e)>=Bye(e).metersPerDegree?"meters":TK(e)}function dp(e,t=_r.metersPerDegree){return LN(Kye(e,!0),t)}function Kye(e,t=!1){const i=ee(e)?e.wkid:null,r=ee(e)?e.wkt:null;let n=null;if(i){if(iF(i))return Gd.metersPerDegree;if(rF(i))return um.metersPerDegree;n=Hg.values[Hg[i]],!n&&t&&Gye.has(i)&&(n=zye)}else r&&(CK(r)?n=EU(SK.exec(r),n):AK(r)&&(n=EU(EK.exec(r),n)));return n}function EU(e,t){return e&&e[1]?IK(e[1]):t}function IK(e){return parseFloat(e.split(",")[1])}function TK(e){const t=ee(e)?e.wkid:null,i=ee(e)?e.wkt:null;let r=null;if(t)r=Hg.units[Hg[t]];else if(i){const n=CK(i)?SK:AK(i)?EK:null;if(n){const s=n.exec(i);s&&s[1]&&(r=Xye(s[1]))}}return ee(r)?MK(r):null}function AK(e){return/^GEOCCS/i.test(e)}function CK(e){return/^PROJCS/i.test(e)}const Qye=1e-7;function Xye(e){const t=/[\\"\\']{1}([^\\"\\']+)/.exec(e);let i=t&&t[1];if(!i||!Hg.units.includes(i)){const r=IK(e);i=null;const n=Hg.values;for(let s=0;s<n.length;++s)if(Math.abs(r-n[s])<Qye){i=Hg.units[s];break}}return i}const ege={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},tge={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},ige={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},Jx=_n()(ege),Qd=_n()(tge),iA=_n()(ige);var Lc;let Ji=Lc=class extends Je{static fromJSON(e){if(!e)return null;if(e.wkid){if(e.wkid===102100)return Lc.WebMercator;if(e.wkid===4326)return Lc.WGS84}const t=new Lc;return t.read(e),t}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return Hx(this)}get isWebMercator(){return f0(this)}get isGeographic(){return tF(this)}get isWrappable(){return Nye(this)}get metersPerUnit(){return dp(this)}get unit(){return TK(this)||(this.isGeographic?"degrees":null)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===Lc.WGS84)return Lc.WGS84;if(this===Lc.WebMercator)return Lc.WebMercator;const e=new Lc;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=Le(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:i}=e.imageCoordinateSystem,{geodataXform:r}=e.imageCoordinateSystem,n=this.imageCoordinateSystem;return t==null||r?JSON.stringify(n)===JSON.stringify(e.imageCoordinateSystem):i?n.id===t&&n.referenceServiceName===i:n.id===t}return vn(this,e)}toJSON(e){return this.write(void 0,e)}};Ji.GCS_NAD_1927=null,Ji.WGS84=null,Ji.WebMercator=null,Ji.PlateCarree=null,h([p({readOnly:!0})],Ji.prototype,"isWGS84",null),h([p({readOnly:!0})],Ji.prototype,"isWebMercator",null),h([p({readOnly:!0})],Ji.prototype,"isGeographic",null),h([p({readOnly:!0})],Ji.prototype,"isWrappable",null),h([p({type:wi,json:{write:!0}})],Ji.prototype,"latestWkid",void 0),h([p({readOnly:!0})],Ji.prototype,"metersPerUnit",null),h([p({readOnly:!0})],Ji.prototype,"unit",null),h([p({type:wi,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt===null}}}}}}})],Ji.prototype,"wkid",void 0),h([p({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid===null}}}}}}})],Ji.prototype,"wkt",void 0),h([it("wkt"),it("web-scene","wkt")],Ji.prototype,"writeWkt",null),h([p({type:wi,json:{write:!0}})],Ji.prototype,"vcsWkid",void 0),h([p({type:wi,json:{write:!0}})],Ji.prototype,"latestVcsWkid",void 0),h([p()],Ji.prototype,"imageCoordinateSystem",void 0),Ji=Lc=h([ce("esri.geometry.SpatialReference")],Ji),Ji.prototype.toJSON.isDefaultToJSON=!0,Ji.GCS_NAD_1927=new Ji({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),Ji.WGS84=new Ji(Fye),Ji.WebMercator=new Ji(Dye),Ji.PlateCarree=new Ji(jye),Object.freeze&&(Object.freeze(Ji.GCS_NAD_1927),Object.freeze(Ji.WGS84),Object.freeze(Ji.WebMercator));const Et=Ji,$K="20230301",OK="2657e728c1857e6d94c324181c0788310bb0958a",RK="4.26",rge={async request(e,t){const{default:i}=await De(()=>Promise.resolve().then(()=>wge),void 0,import.meta.url),r=e.options,n=r.responseType;r.signal=t?.signal,r.responseType=n==="native"||n==="native-request-init"?"native-request-init":n&&["blob","json","text"].includes(n)&&pK(e.url)?.after?n:"array-buffer";const s=await i(e.url,r),o={data:s.data,httpStatus:s.httpStatus,ssl:s.ssl};switch(s.requestOptions?.responseType){case"native-request-init":return delete o.data.signal,o;case"blob":o.data=await o.data.arrayBuffer();break;case"json":o.data=new TextEncoder().encode(JSON.stringify(o.data)).buffer;break;case"text":o.data=new TextEncoder().encode(o.data).buffer}return{result:o,transferList:[o.data]}}};let wr;function Hnt(e){wr=e}function Wnt(e){const t=wr&&wr.findCredential(e);return t&&t.token?gK(e,"token",t.token):e}Ze("host-webworker");const nge=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function kK(e){const t=uc(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!nge.includes(t)&&!e.endsWith("/sharing/rest/generateToken")}function sge(e,t,i=!1,r){return new Promise((n,s)=>{if(Sl(r))return void s(MU());let o=()=>{u(),s(new Error(`Unable to load ${t}`))},a=()=>{const c=e;u(),n(c)},l=()=>{if(!e)return;const c=e;u(),c.src="",s(MU())};const u=()=>{Ze("esri-image-decode")||(e.removeEventListener("error",o),e.removeEventListener("load",a)),o=null,a=null,e=null,ee(r)&&r.removeEventListener("abort",l),l=null,i&&URL.revokeObjectURL(t)};ee(r)&&r.addEventListener("abort",l),Ze("esri-image-decode")?e.decode().then(a,o):(e.addEventListener("error",o),e.addEventListener("load",a))})}function MU(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}function oge(e){Ri.request.crossOriginNoCorsDomains||(Ri.request.crossOriginNoCorsDomains={});const t=Ri.request.crossOriginNoCorsDomains;for(let i of e)i=i.toLowerCase(),/^https?:\/\//.test(i)?t[uc(i)??""]=0:(t[uc("http://"+i)??""]=0,t[uc("https://"+i)??""]=0)}function age(e){const t=Ri.request.crossOriginNoCorsDomains;if(t){let i=uc(e);if(i)return i=i.toLowerCase(),!wb(i,WN())&&t[i]<Date.now()-36e5}return!1}async function lge(e){const t=Ri.request.crossOriginNoCorsDomains,i=uc(e);t&&i&&(t[i.toLowerCase()]=Date.now());const r=Ln(e);e=r.path,r.query?.f==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}}async function St(e,t){const i=U0(e),r=K5(e);r||i||(e=ml(e));const n={url:e,requestOptions:{...t}};let s=pK(e);if(s){const u=await yge(s,n);if(u!=null)return{data:u,getHeader:sF,httpStatus:200,requestOptions:n.requestOptions,url:n.url};s.after||s.error||(s=null)}if(e=n.url,(t=n.requestOptions).responseType==="image"){if(Ze("host-webworker")||Ze("host-node"))throw sc("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n)}else if(i)throw sc("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+t.responseType),n);if(t.method==="head"){if(t.body)throw sc("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(i||r)throw sc("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await pge(),rA)return rA.execute(e,t);const o=new AbortController;ba(t,()=>o.abort());const a={controller:o,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:s,params:n,redoRequest:!1,useIdentity:Yu.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},l=await vge(a);return s?.after?.(l),l}let rA;const Yu=Ri.request,LK="FormData"in globalThis,uge=[499,498,403,401],cge=["COM_0056","COM_0057","SB_0008"],hge=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],sF=()=>null,nA=Symbol();function dge(e){const t=uc(e);t&&!St._corsServers.includes(t)&&St._corsServers.push(t)}function IU(e){const t=uc(e);return!t||t.endsWith(".arcgis.com")||St._corsServers.includes(t)||ZN(t)}function sc(e,t,i,r){let n="Error";const s={url:i.url,requestOptions:i.requestOptions,getHeader:sF,ssl:!1};if(t instanceof Ce)return t.details?(t.details=Le(t.details),t.details.url=i.url,t.details.requestOptions=i.requestOptions):t.details=s,t;if(t){const o=r&&(u=>r.headers.get(u)),a=r&&r.status,l=t.message;l&&(n=l),o&&(s.getHeader=o),s.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||a||0,s.subCode=t.subcode,s.messageCode=t.messageCode,typeof t.details=="string"?s.messages=[t.details]:s.messages=t.details,s.raw=nA in t?t[nA]:t}return fs(t)?fr():new Ce(e,n,s)}async function pge(){Ze("host-webworker")?rA||(rA=await De(()=>import("./request-54693315.js"),["./request-54693315.js","./preload-helper-388ac9d5.js"],import.meta.url)):St._abortableFetch||(St._abortableFetch=globalThis.fetch.bind(globalThis))}async function ek(){wr||await De(()=>import("./IdentityManager-98e9785c.js"),["./IdentityManager-98e9785c.js","./preload-helper-388ac9d5.js"],import.meta.url)}async function fge(e){const t=e.params.url,i=e.params.requestOptions,r=e.controller.signal,n=i.body;let s=null,o=null;if(LK&&"HTMLFormElement"in globalThis&&(n instanceof FormData?s=n:n instanceof HTMLFormElement&&(s=new FormData(n))),typeof n=="string"&&(o=n),e.fetchOptions={cache:i.cacheBust&&!St._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:Yu.priority,redirect:"follow",signal:r},(s||o)&&(e.fetchOptions.body=s||o),i.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||i.query?.token||s?.get("token")),!e.hasToken&&Ri.apiKey&&kK(t)&&(i.query||(i.query={}),i.query.token=Ri.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!PK(t)&&!Sl(r)){let a;i.authMode==="immediate"?(await ek(),a=await wr.getCredential(t,{signal:r}),e.credential=a):i.authMode==="no-prompt"?(await ek(),a=await wr.getCredential(t,{prompt:!1,signal:r}).catch(()=>{}),e.credential=a):wr&&(a=wr.findCredential(t)),a&&(e.credentialToken=a.token,e.useSSL=!!a.ssl)}}function PK(e){return hge.some(t=>t.test(e))}async function mge(e){let t=e.params.url;const i=e.params.requestOptions,r=e.fetchOptions??{},n=K5(t)||U0(t),s=i.responseType||"json",o=n?0:i.timeout!=null?i.timeout:Yu.timeout;let a=!1;if(!n){e.useSSL&&(t=XN(t)),i.cacheBust&&r.cache==="default"&&(t=gK(t,"request.preventCache",Date.now()));let f={...i.query};e.credentialToken&&(f.token=e.credentialToken);let m=lm(f);Ze("esri-url-encodes-apostrophe")&&(m=m.replace(/'/g,"%27"));const g=t.length+1+m.length;let v;a=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||g>Yu.maxUrlLength;const b=i.useProxy||!!Y5(t);if(b){const x=dye(t);v=x.path,!a&&v.length+1+g>Yu.maxUrlLength&&(a=!0),x.query&&(f={...x.query,...f})}if(r.method==="HEAD"&&(a||b)){if(a)throw g>Yu.maxUrlLength?sc("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):sc("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(b)throw sc("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(a?(r.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?t=nI(t,f):(r.body=lm(f),r.headers||(r.headers={}),r.headers["Content-Type"]="application/x-www-form-urlencoded")):t=nI(t,f),b&&(e.useProxy=!0,t=`${v}?${t}`),f.token&&LK&&r.body instanceof FormData&&!tye(t)&&r.body.set("token",f.token),i.hasOwnProperty("withCredentials"))e.withCredentials=i.withCredentials;else if(!wb(t,WN())){if(ZN(t))e.withCredentials=!0;else if(wr){const x=wr.findServerInfo(t);x&&x.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(r.credentials="include",age(t)&&await lge(a?nI(t,f):t))}let l,u,c=0,d=!1;o>0&&(c=setTimeout(()=>{d=!0,e.controller.abort()},o));try{if(i.responseType==="native-request-init")u=r,u.url=t;else if(i.responseType!=="image"||r.cache!=="default"||r.method!=="GET"||a||gge(i.headers)||!n&&!e.useProxy&&Yu.proxyUrl&&!IU(t)){if(l=await St._abortableFetch(t,r),e.useProxy||dge(t),i.responseType==="native")u=l;else if(r.method!=="HEAD")if(l.ok){switch(s){case"array-buffer":u=await l.arrayBuffer();break;case"blob":case"image":u=await l.blob();break;default:u=await l.text()}if(c&&(clearTimeout(c),c=0),s==="json"||s==="xml"||s==="document")if(u)switch(s){case"json":u=JSON.parse(u);break;case"xml":u=TU(u,"application/xml");break;case"document":u=TU(u,"text/html")}else u=null;if(u){if(s==="array-buffer"||s==="blob"){const f=l.headers.get("Content-Type");if(f&&/application\/json|text\/plain/i.test(f)&&u[s==="blob"?"size":"byteLength"]<=750)try{const m=await new Response(u).json();m.error&&(u=m)}catch{}}s==="image"&&u instanceof Blob&&(u=await AU(URL.createObjectURL(u),e,!0))}}else u=await l.text()}else u=await AU(t,e)}catch(f){if(f.name==="AbortError")throw d?new Error("Timeout exceeded"):fr("Request canceled");if(!(!l&&f instanceof TypeError&&Yu.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||e.useProxy||IU(t))throw f;e.redoRequest=!0,fye({proxyUrl:Yu.proxyUrl,urlPrefix:uc(t)??""})}finally{c&&clearTimeout(c)}return[l,u]}async function yge(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let i,r;try{r=await e.before(t)}catch(n){i=sc("request:interceptor",n,t)}if((r instanceof Error||r instanceof Ce)&&(i=sc("request:interceptor",r,t)),i)throw e.error&&e.error(i),i;return r}}function gge(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function TU(e,t){let i;try{i=new DOMParser().parseFromString(e,t)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function vge(e){let t,i;await fge(e);try{do[t,i]=await mge(e);while(!await bge(e,t,i))}catch(s){const o=sc("request:server",s,e.params,t);throw o.details.ssl=e.useSSL,e.interceptor&&e.interceptor.error&&e.interceptor.error(o),o}const r=e.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!e.hasToken&&!e.credentialToken&&i.user?.username&&!ZN(r)){const s=uc(r,!0);s&&Yu.trustedServers.push(s)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&oge(i.authorizedCrossOriginNoCorsDomains)}const n=e.credential;if(n&&wr){const s=wr.findServerInfo(n.server);let o=s&&s.owningSystemUrl;if(o){o=o.replace(/\/?$/,"/sharing");const a=wr.findCredential(o,n.userId);a&&wr._getIdenticalSvcIdx(o,a)===-1&&a.resources.unshift(o)}}return{data:i,getHeader:t?s=>t?.headers.get(s):sF,httpStatus:t?.status??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function bge(e,t,i){if(e.redoRequest)return e.redoRequest=!1,!1;const r=e.params.requestOptions;if(!t||r.responseType==="native"||r.responseType==="native-request-init")return!0;let n,s;if(!t.ok)throw n=new Error(`Unable to load ${t.url} status: ${t.status}`),n[nA]=i,n;i&&(i.error?n=i.error:i.status==="error"&&Array.isArray(i.messages)&&(n={...i},n[nA]=i,n.details=i.messages));let o,a=null;n&&(s=Number(n.code),a=n.hasOwnProperty("subcode")?Number(n.subcode):null,o=n.messageCode,o=o&&o.toUpperCase());const l=r.authMode;if(s===403&&(a===4||n.message&&n.message.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(l!=="no-prompt"||s===498)&&s!==void 0&&uge.includes(s)&&!PK(e.params.url)&&(s!==403||o&&!cge.includes(o)&&(a==null||a===2&&e.credentialToken))){await ek();try{const u=await wr.getCredential(e.params.url,{error:sc("request:server",n,e.params),prompt:l!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=u,e.credentialToken=u.token,e.useSSL=e.useSSL||u.ssl,!1}catch(u){if(l==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;n=u}}if(n)throw n;return!0}function AU(e,t,i=!1){const r=t.controller.signal,n=new Image;return t.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=Yu.priority,n.src=e,sge(n,e,i,r)}St._abortableFetch=null,St._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];const wge=Object.freeze(Object.defineProperty({__proto__:null,default:St},Symbol.toStringTag,{value:"Module"}));function Ye(e,t,i){let r,n;return t===void 0||Array.isArray(t)?(n=e,i=t,r=[void 0]):(n=t,r=Array.isArray(e)?e:[e]),(s,o)=>{const a=s.constructor.prototype;r.forEach(l=>{const u=FY(s,l,n);u.read&&typeof u.read=="object"||(u.read={}),u.read.reader=a[o],i&&(u.read.source=(u.read.source||[]).concat(i))})}}let Pc=class extends Je{constructor(...t){super(...t),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Et.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(t,i){if(t instanceof Et)return t;if(t!=null){const r=new Et;return r.read(t,i),r}return t}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(t){return this.cache[t]}setCacheValue(t,i){this.cache[t]=i}};h([p()],Pc.prototype,"type",void 0),h([p({readOnly:!0})],Pc.prototype,"cache",null),h([p({readOnly:!0})],Pc.prototype,"extent",null),h([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Pc.prototype,"hasM",void 0),h([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Pc.prototype,"hasZ",void 0),h([p({type:Et,json:{write:!0},value:Et.WGS84})],Pc.prototype,"spatialReference",void 0),h([Ye("spatialReference")],Pc.prototype,"readSpatialReference",null),Pc=h([ce("esri.geometry.Geometry")],Pc);const pp=Pc,_ge=Object.prototype.toString;function xge(e){const t="__accessorMetadata__"in e?nn(e):e;return function(...i){if(i.push(t),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return Sge.apply(this,i)}}function Sge(e,t,i,r){j5(e,t).cast=r}function Ege(e){return(t,i)=>{j5(t,e).cast=t[i]}}function di(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&_ge.call(e[0])==="[object Function]"?xge(e[0]):e.length===1&&typeof e[0]=="string"?Ege(e[0]):void 0}function Mge(e,t){const i=e.x-t.x,r=e.y-t.y,n=e.hasZ&&t.hasZ?e.z-t.z:0;return Math.sqrt(i*i+r*r+n*n)}const Ige=57.29577951308232,Tge=.017453292519943;function CU(e){return e*Ige}function $U(e){return e*Tge}function OU(e){return e/_r.radius}function RU(e){return Math.PI/2-2*Math.atan(Math.exp(-e/_r.radius))}function tk(e){return e.wkid!=null||e.wkt!=null}const o$=[0,0];function sA(e,t,i,r,n){const s=e,o=n;if(o.spatialReference=i,"x"in s&&"x"in o)[o.x,o.y]=t(s.x,s.y,o$,r);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=t(s.xmin,s.ymin,o$,r),[o.xmax,o.ymax]=t(s.xmax,s.ymax,o$,r);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const a="paths"in s?s.paths:s.rings,l=[];let u;for(let c=0;c<a.length;c++){const d=a[c];u=[],l.push(u);for(let f=0;f<d.length;f++)u.push(t(d[f][0],d[f][1],[0,0],r)),d[f].length>2&&u[f].push(d[f][2]),d[f].length>3&&u[f].push(d[f][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in s&&"points"in o){const a=s.points,l=[];for(let u=0;u<a.length;u++)l[u]=t(a[u][0],a[u][1],[0,0],r),a[u].length>2&&l[u].push(a[u][2]),a[u].length>3&&l[u].push(a[u][3]);o.points=l}return n}function sI(e,t){const i=e&&(tk(e)?e:e.spatialReference),r=t&&(tk(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!i||!r)&&(!!vn(r,i)||f0(r)&&Hx(i)||f0(i)&&Hx(r))}function Q5(e,t){if(Re(e))return null;const i=e.spatialReference,r=t&&(tk(t)?t:t.spatialReference);return sI(i,r)?vn(i,r)?Le(e):f0(r)?sA(e,Iv,Et.WebMercator,!1,Le(e)):Hx(r)?sA(e,ex,Et.WGS84,!1,Le(e)):null:null}function Iv(e,t,i=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const r=$U(t);return i[0]=$U(e)*_r.radius,i[1]=_r.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function ex(e,t,i=[0,0],r=!1){const n=CU(e/_r.radius);return i[0]=r?n:n-360*Math.floor((n+180)/360),i[1]=CU(Math.PI/2-2*Math.atan(Math.exp(-t/_r.radius))),i}function Zf(e,t=!1,i=Le(e)){return sA(e,Iv,Et.WebMercator,t,i)}function Ig(e,t=!1,i=Le(e)){return sA(e,ex,Et.WGS84,t,i)}var oI;const i_=[0,0];function kU(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let $o=oI=class extends pp{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const i=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(i)?i:i.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,i,r,n){let s;if(Array.isArray(e))s=e,n=t,e=s[0],t=s[1],i=s[2],r=s[3];else if(e&&typeof e=="object"){if(s=e,e=s.x!=null?s.x:s.longitude,t=s.y!=null?s.y:s.latitude,i=s.z,r=s.m,(n=s.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new Et(n)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)et.getLogger(this.declaredClass).warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)et.getLogger(this.declaredClass).warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&n&&n.isWebMercator){const a=Iv(s.longitude,s.latitude,i_);e=a[0],t=a[1]}}}else kU(i)?(n=i,i=null):kU(r)&&(n=r,r=null);const o={x:e,y:t};return o.x==null&&o.y!=null?et.getLogger(this.declaredClass).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&et.getLogger(this.declaredClass).warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(o.spatialReference=n),i!=null&&(o.z=i),r!=null&&(o.m=r),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){const{spatialReference:e,x:t,y:i}=this;if(e){if(e.isWebMercator)return ex(t,i,i_)[1];if(e.isGeographic)return i}return null}set latitude(e){const{spatialReference:t,x:i}=this;e!=null&&t&&(t.isWebMercator?this._set("y",Iv(i,e,i_)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){const{x:e,y:t,spatialReference:i}=this;if(i){if(i.isWebMercator)return ex(e,t,i_)[0];if(i.isGeographic)return e}return null}set longitude(e){const{y:t,spatialReference:i}=this;e!=null&&i&&(i.isWebMercator?this._set("x",Iv(e,t,i_)[0]):i.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,i){t[i]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new oI;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return oI.copy(e,this),this}equals(e){if(Re(e))return!1;const{x:t,y:i,z:r,m:n,spatialReference:s}=this,{z:o,m:a}=e;let{x:l,y:u,spatialReference:c}=e;if(!s.equals(c))if(s.isWebMercator&&c.isWGS84)[l,u]=Iv(l,u),c=s;else{if(!s.isWGS84||!c.isWebMercator)return!1;[l,u]=ex(l,u),c=s}return t===l&&i===u&&r===o&&n===a&&s.wkid===c.wkid}offset(e,t,i){return this.x+=e,this.y+=t,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const e=gl(this.spatialReference);if(!e)return this;let t=this.x;const[i,r]=e.valid,n=2*r;let s;return t>r?(s=Math.ceil(Math.abs(t-r)/n),t-=s*n):t<i&&(s=Math.ceil(Math.abs(t-i)/n),t+=s*n),this._set("x",t),this}distance(e){return Mge(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};h([p({readOnly:!0})],$o.prototype,"cache",null),h([p({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],$o.prototype,"hasM",null),h([p({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],$o.prototype,"hasZ",null),h([p({type:Number})],$o.prototype,"latitude",null),h([p({type:Number})],$o.prototype,"longitude",null),h([p({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),di(e=>isNaN(e)?e:ul(e))],$o.prototype,"x",void 0),h([it("x")],$o.prototype,"writeX",null),h([Ye("x")],$o.prototype,"readX",null),h([p({type:Number,json:{write:!0}})],$o.prototype,"y",void 0),h([p({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],$o.prototype,"z",void 0),h([p({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],$o.prototype,"m",void 0),$o=oI=h([ce("esri.geometry.Point")],$o),$o.prototype.toJSON.isDefaultToJSON=!0;const At=$o,a$=[0,0];function X5(e,t){return!!ee(t)&&Fo(e,t.x,t.y,t.z)}function Znt(e,t){if(!t.points||t.points.length)return!1;for(const i of t.points)if(!xb(e,i))return!1;return!0}function Age(e,t){const{xmin:i,ymin:r,zmin:n,xmax:s,ymax:o,zmax:a}=t;return e.hasZ&&t.hasZ?Fo(e,i,r,n)&&Fo(e,i,o,n)&&Fo(e,s,o,n)&&Fo(e,s,r,n)&&Fo(e,i,r,a)&&Fo(e,i,o,a)&&Fo(e,s,o,a)&&Fo(e,s,r,a):Fo(e,i,r)&&Fo(e,i,o)&&Fo(e,s,o)&&Fo(e,s,r)}function xb(e,t){return Fo(e,t[0],t[1])}function Cge(e,t){return Fo(e,t[0],t[1],t[2])}function Fo(e,t,i,r){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax&&(r==null||!e.hasZ||r>=e.zmin&&r<=e.zmax)}function NK(e,t){return a$[1]=t.y,a$[0]=t.x,$ge(e,a$)}function $ge(e,t){return FK(e.rings,t)}function FK(e,t){if(!e)return!1;if(Oge(e))return LU(!1,e,t);let i=!1;for(let r=0,n=e.length;r<n;r++)i=LU(i,e[r],t);return i}function Oge(e){return!Array.isArray(e[0][0])}function LU(e,t,i){const[r,n]=i;let s=e,o=0;for(let a=0,l=t.length;a<l;a++){o++,o===l&&(o=0);const[u,c]=t[a],[d,f]=t[o];(c<n&&f>=n||f<n&&c>=n)&&u+(n-c)/(f-c)*(d-u)<r&&(s=!s)}return s}function Rge(e,t){return X5(e,t)}function kge(e,t){const i=e.hasZ&&t.hasZ;let r,n,s;if(e.xmin<=t.xmin){if(r=t.xmin,e.xmax<r)return!1}else if(r=e.xmin,t.xmax<r)return!1;if(e.ymin<=t.ymin){if(n=t.ymin,e.ymax<n)return!1}else if(n=e.ymin,t.ymax<n)return!1;if(i&&t.hasZ){if(e.zmin<=t.zmin){if(s=t.zmin,e.zmax<s)return!1}else if(s=e.zmin,t.zmax<s)return!1}return!0}function Lge(e,t){const{points:i,hasZ:r}=t,n=r?Cge:xb;for(const s of i)if(n(e,s))return!0;return!1}const m0=[0,0],y0=[0,0],g0=[0,0],v0=[0,0],Pge=[m0,y0,g0,v0],DK=[[g0,m0],[m0,y0],[y0,v0],[v0,g0]];function Nge(e,t){return Fge(e,t.rings)}function Fge(e,t){m0[0]=e.xmin,m0[1]=e.ymax,y0[0]=e.xmax,y0[1]=e.ymax,g0[0]=e.xmin,g0[1]=e.ymin,v0[0]=e.xmax,v0[1]=e.ymin;for(const i of Pge)if(FK(t,i))return!0;for(const i of t){if(!i.length)continue;let r=i[0];if(xb(e,r))return!0;for(let n=1;n<i.length;n++){const s=i[n];if(xb(e,s)||jK(r,s,DK))return!0;r=s}}return!1}function Dge(e,t){m0[0]=e.xmin,m0[1]=e.ymax,y0[0]=e.xmax,y0[1]=e.ymax,g0[0]=e.xmin,g0[1]=e.ymin,v0[0]=e.xmax,v0[1]=e.ymin;const i=t.paths;for(const r of i){if(!i.length)continue;let n=r[0];if(xb(e,n))return!0;for(let s=1;s<r.length;s++){const o=r[s];if(xb(e,o)||jK(n,o,DK))return!0;n=o}}return!1}const bs=[0,0];function jge(e){for(let t=0;t<e.length;t++){const i=e[t];for(let n=0;n<i.length-1;n++){const s=i[n],o=i[n+1];for(let a=t+1;a<e.length;a++)for(let l=0;l<e[a].length-1;l++){const u=e[a][l],c=e[a][l+1];if(ik(s,o,u,c,bs)&&!(bs[0]===s[0]&&bs[1]===s[1]||bs[0]===u[0]&&bs[1]===u[1]||bs[0]===o[0]&&bs[1]===o[1]||bs[0]===c[0]&&bs[1]===c[1]))return!0}}const r=i.length;if(!(r<=4))for(let n=0;n<r-3;n++){let s=r-1;n===0&&(s=r-2);const o=i[n],a=i[n+1];for(let l=n+2;l<s;l++){const u=i[l],c=i[l+1];if(ik(o,a,u,c,bs)&&!(bs[0]===o[0]&&bs[1]===o[1]||bs[0]===u[0]&&bs[1]===u[1]||bs[0]===a[0]&&bs[1]===a[1]||bs[0]===c[0]&&bs[1]===c[1]))return!0}}}return!1}function jK(e,t,i){for(let r=0;r<i.length;r++)if(ik(e,t,i[r][0],i[r][1]))return!0;return!1}function ik(e,t,i,r,n){const[s,o]=e,[a,l]=t,[u,c]=i,[d,f]=r,m=d-u,g=s-u,v=a-s,b=f-c,x=o-c,S=l-o,T=b*v-m*S;if(T===0)return!1;const _=(m*x-b*g)/T,M=(v*x-S*g)/T;return _>=0&&_<=1&&M>=0&&M<=1&&(n&&(n[0]=s+_*(a-s),n[1]=o+_*(l-o)),!0)}function Uge(e){switch(e){case"esriGeometryEnvelope":case"extent":return kge;case"esriGeometryMultipoint":case"multipoint":return Lge;case"esriGeometryPoint":case"point":return Rge;case"esriGeometryPolygon":case"polygon":return Nge;case"esriGeometryPolyline":case"polyline":return Dge}}var Dl;function Vge(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function $p(e,t,i){return t==null?i:i==null?t:e(t,i)}let Yn=Dl=class extends pp{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,i,r,n){return Vge(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?Et.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:i,ymax:r,spatialReference:n??Et.WGS84}}static fromBounds(e,t){return new Dl({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new Dl({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new At({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new Dl;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&sI(t,i)&&(e=t.isWebMercator?Zf(e):Ig(e,!0)),e.type==="point"?X5(this,e):e.type==="extent"&&Age(this,e)}equals(e){if(this===e)return!0;if(Re(e))return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&sI(t,i)&&(e=t.isWebMercator?Zf(e):Ig(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),i=this.width*t,r=this.height*t;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const n=(this.zmax-this.zmin)*t;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*t;this.mmin+=n,this.mmax-=n}return this}intersects(e){if(Re(e))return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,i=e.spatialReference;return t&&i&&!vn(t,i)&&sI(t,i)&&(e=t.isWebMercator?Zf(e):Ig(e,!0)),Uge(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,i){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=$p(Math.min,this.zmin,e.zmin),this.zmax=$p(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=$p(Math.min,this.mmin,e.mmin),this.mmax=$p(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:Re(e)||!this.intersects(e)?null:(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=$p(Math.max,this.zmin,e.zmin),this.zmax=$p(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=$p(Math.max,this.mmin,e.mmin),this.mmax=$p(Math.min,this.mmax,e.mmax)),this)}toJSON(e){return this.write({},e)}_shiftCM(e=gl(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,i=this._getCM(e);if(i){const r=t.isWebMercator?Ig(i):i;this.xmin-=i.x,this.xmax-=i.x,t.isWebMercator||(r.x=this._normalizeX(r.x,e).x),this.spatialReference=new Et(dc((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(e){let t=null;const[i,r]=e.valid,n=this.xmin,s=this.xmax;return n>=i&&n<=r&&s>=i&&s<=r||(t=this.center),t}_normalize(e,t,i){const r=this.spatialReference;if(!r)return this;const n=i??gl(r);if(n==null)return this;const s=this._getParts(n).map(l=>l.extent);if(s.length<2)return s[0]||this;if(s.length>2)return e?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(e)return this._shiftCM(n);if(t)return s;let o=!0,a=!0;return s.forEach(l=>{l.hasZ||(o=!1),l.hasM||(a=!1)}),{rings:s.map(l=>{const u=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(o){const c=(l.zmax-l.zmin)/2;for(let d=0;d<u.length;d++)u[d].push(c)}if(a){const c=(l.mmax-l.mmin)/2;for(let d=0;d<u.length;d++)u[d].push(c)}return u}),hasZ:o,hasM:a,spatialReference:r}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:n,ymax:s,spatialReference:o}=this,a=this.width,l=this.xmin,u=this.xmax;let c;e=e||gl(o);const[d,f]=e.valid;c=this._normalizeX(this.xmin,e);const m=c.x,g=c.frameId;c=this._normalizeX(this.xmax,e);const v=c.x,b=c.frameId,x=m===v&&a>0;if(a>2*f){const S=new Dl(l<u?m:v,n,f,s,o),T=new Dl(d,n,l<u?v:m,s,o),_=new Dl(0,n,f,s,o),M=new Dl(d,n,0,s,o),I=[],$=[];S.contains(_)&&I.push(g),S.contains(M)&&$.push(g),T.contains(_)&&I.push(b),T.contains(M)&&$.push(b);for(let L=g+1;L<b;L++)I.push(L),$.push(L);t.push({extent:S,frameIds:[g]},{extent:T,frameIds:[b]},{extent:_,frameIds:I},{extent:M,frameIds:$})}else m>v||x?t.push({extent:new Dl(m,n,f,s,o),frameIds:[g]},{extent:new Dl(d,n,v,s,o),frameIds:[b]}):t.push({extent:new Dl(m,n,v,s,o),frameIds:[g]});this.cache._parts=t}const i=this.hasZ,r=this.hasM;if(i||r){const n={};i&&(n.zmin=this.zmin,n.zmax=this.zmax),r&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let s=0;s<t.length;s++)t[s].extent.set(n)}return t}_normalizeX(e,t){const[i,r]=t.valid,n=2*r;let s,o=0;return e>r?(s=Math.ceil(Math.abs(e-r)/n),e-=s*n,o=s):e<i&&(s=Math.ceil(Math.abs(e-i)/n),e+=s*n,o=-s),{x:e,frameId:o}}};h([p({readOnly:!0})],Yn.prototype,"cache",null),h([p({readOnly:!0})],Yn.prototype,"center",null),h([p({readOnly:!0})],Yn.prototype,"extent",null),h([p({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Yn.prototype,"hasM",null),h([p({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Yn.prototype,"hasZ",null),h([p({readOnly:!0})],Yn.prototype,"height",null),h([p({readOnly:!0})],Yn.prototype,"width",null),h([p({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Yn.prototype,"xmin",void 0),h([p({type:Number,json:{write:!0}})],Yn.prototype,"ymin",void 0),h([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Yn.prototype,"mmin",void 0),h([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Yn.prototype,"zmin",void 0),h([p({type:Number,json:{write:!0}})],Yn.prototype,"xmax",void 0),h([p({type:Number,json:{write:!0}})],Yn.prototype,"ymax",void 0),h([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Yn.prototype,"mmax",void 0),h([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Yn.prototype,"zmax",void 0),Yn=Dl=h([ce("esri.geometry.Extent")],Yn),Yn.prototype.toJSON.isDefaultToJSON=!0;const Kt=Yn;let tx;const Bge=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale;function UK(){return Bge??globalThis.navigator?.language??"en"}function au(){return tx===void 0&&(tx=UK()),tx}const ix=[];function VK(e){return ix.push(e),{remove(){ix.splice(ix.indexOf(e),1)}}}const rk=[];function oF(e){return rk.push(e),{remove(){ix.splice(rk.indexOf(e),1)}}}function zge(){const e=UK();tx!==e&&(tx=e,[...rk].forEach(t=>{t.call(null,e)}),[...ix].forEach(t=>{t.call(null,e)}))}globalThis.addEventListener?.("languagechange",zge);var nk;const Gge=new ti({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let jl=nk=class extends Lt{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new nk({categories:this.categories?Le(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let i=[];this.categories&&(i=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let r="";if(this.extent){const o=Q5(this.extent,Et.WGS84);ee(o)&&(r=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let n=this.query;!this.disableExtraQuery&&e.extraQuery&&(n="("+n+")"+e.extraQuery);const s={categories:i,bbox:r,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map(o=>Gge.toJSON(o.trim())).join(","),s.sortOrder=this.sortOrder),{query:{...t,...s}}}};h([p()],jl.prototype,"categories",void 0),h([p()],jl.prototype,"disableExtraQuery",void 0),h([p({type:Kt})],jl.prototype,"extent",void 0),h([p()],jl.prototype,"filter",void 0),h([p()],jl.prototype,"num",void 0),h([p()],jl.prototype,"query",void 0),h([p()],jl.prototype,"sortField",void 0),h([p()],jl.prototype,"sortOrder",null),h([p()],jl.prototype,"start",void 0),jl=nk=h([ce("esri.portal.PortalQueryParams")],jl);const Dd=jl;let by=class extends Lt{constructor(t){super(t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};h([p()],by.prototype,"nextQueryParams",void 0),h([p()],by.prototype,"queryParams",void 0),h([p()],by.prototype,"results",void 0),h([p()],by.prototype,"total",void 0),by=h([ce("esri.portal.PortalQueryResult")],by);const qge=by;let nd=class extends Je{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const t=this.get("portal.restUrl");return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new Ce("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};h([p({type:Date})],nd.prototype,"created",void 0),h([p()],nd.prototype,"id",void 0),h([p()],nd.prototype,"portal",void 0),h([p()],nd.prototype,"title",void 0),h([p({readOnly:!0})],nd.prototype,"url",null),h([p()],nd.prototype,"username",void 0),nd=h([ce("esri.portal.PortalFolder")],nd);const Hge=nd;let Kn=class extends Je{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){const t=this.url,i=this.thumbnail;return t&&i&&this.portal?this.portal?.normalizeUrl(`${t}/info/${i}?f=json`):null}get url(){const t=this.get("portal.restUrl");return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return Uo(this.portal).request(this.url+"/categorySchema",t).then(i=>{const r=i.categorySchema||[];return r.some(n=>n.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",t):r})}fetchMembers(t){return Uo(this.portal).request(this.url+"/users",t)}getThumbnailUrl(t){let i=this.thumbnailUrl;return i&&t&&(i+=`&w=${t}`),i}toJSON(){throw new Ce("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(t,i){let r=nn(Dd,t);const n=Uo(this.portal);return parseFloat(n.currentVersion)>5?(r=r||new Dd,n.queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",i)):(r=r?r.clone():new Dd,r.query="group:"+this.id+(r.query?" "+r.query:""),n.queryItems(r,i))}_fetchCategorySchemaSet(t,i){const r=Uo(this.portal);return r.fetchSelf(r.authMode,!0,i).then(n=>{const s=n.contentCategorySetsGroupQuery;if(s){const o=new Dd;return o.disableExtraQuery=!0,o.num=1,o.query=s,r.queryGroups(o,i)}throw new Ce("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(n=>{if(n.total){const s=n.results[0],o=new Dd;return o.num=1,o.query=`typekeywords:"${t}"`,s.queryItems(o,i)}throw new Ce("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(n=>n.total?n.results[0].fetchData("json",i).then(s=>{const o=s&&s.categorySchema;return o&&o.length?o:[]}):[])}};h([p()],Kn.prototype,"access",void 0),h([p({type:Date})],Kn.prototype,"created",void 0),h([p()],Kn.prototype,"description",void 0),h([p()],Kn.prototype,"id",void 0),h([p()],Kn.prototype,"isInvitationOnly",void 0),h([p({type:Date})],Kn.prototype,"modified",void 0),h([p()],Kn.prototype,"owner",void 0),h([p()],Kn.prototype,"portal",void 0),h([p()],Kn.prototype,"snippet",void 0),h([p()],Kn.prototype,"sortField",void 0),h([p()],Kn.prototype,"sortOrder",void 0),h([p()],Kn.prototype,"tags",void 0),h([p()],Kn.prototype,"thumbnail",void 0),h([p({readOnly:!0})],Kn.prototype,"thumbnailUrl",null),h([p()],Kn.prototype,"title",void 0),h([p({readOnly:!0})],Kn.prototype,"url",null),Kn=h([ce("esri.portal.PortalGroup")],Kn);const sk=Kn,Wge=Object.freeze(Object.defineProperty({__proto__:null,default:sk},Symbol.toStringTag,{value:"Module"}));var ok;let Sr=ok=class extends Je{constructor(...e){super(...e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}`:null}get url(){const e=this.get("portal.restUrl");return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,i=e&&e.data,r=e&&e.folder,n={method:"post"};t&&(n.query=t.createPostQuery(),i!=null&&(typeof i=="string"?n.query.text=i:typeof i=="object"&&(n.query.text=JSON.stringify(i))));let s=this.userContentUrl;return r&&(s+="/"+(typeof r=="string"?r:r.id)),this.portal.request(s+"/addItem",n).then(o=>(t.id=o.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}deleteItem(e){let t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal.request(t+`/items/${e.id}/delete`,{method:"post"}).then(()=>{e.id=null,e.portal=null})}deleteItems(e){const t=this.userContentUrl+"/deleteItems",i=e.map(r=>r.id);if(i.length){const r={method:"post",query:{items:i.join(",")}};return this.portal.request(t,r).then(()=>{e.forEach(n=>{n.id=null,n.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const e={query:{num:1}};return this.portal.request(this.userContentUrl??"",e).then(t=>{let i;return i=t&&t.folders?t.folders.map(r=>{const n=Hge.fromJSON(r);return n.portal=this.portal,n}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(e=>{let t;return t=e&&e.groups?e.groups.map(i=>{const r=sk.fromJSON(i);return r.portal=this.portal,r}):[],t})}fetchItems(e){const t=e??{};let i,r=this.userContentUrl??"";return t.folder&&(r+="/"+t.folder.id),De(()=>Promise.resolve().then(()=>BK),void 0,import.meta.url).then(({default:n})=>{i=n;const s={folders:!1,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"};return this.portal.request(r,{query:s})}).then(n=>{let s;return n&&n.items?(s=n.items.map(o=>{const a=i.fromJSON(o);return a.portal=this.portal,a}),Promise.all(s.map(o=>o.load())).catch(o=>o).then(()=>({items:s,nextStart:n.nextStart,total:n.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal.request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new sk({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new Ce("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new Ce("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new ok;return t.sourceJSON=e,t.read(e),t}};h([p()],Sr.prototype,"access",void 0),h([p({type:Date})],Sr.prototype,"created",void 0),h([p()],Sr.prototype,"culture",void 0),h([p()],Sr.prototype,"description",void 0),h([p()],Sr.prototype,"email",void 0),h([p()],Sr.prototype,"favGroupId",void 0),h([p()],Sr.prototype,"fullName",void 0),h([p({type:Date})],Sr.prototype,"modified",void 0),h([p()],Sr.prototype,"orgId",void 0),h([p()],Sr.prototype,"portal",void 0),h([p()],Sr.prototype,"preferredView",void 0),h([p()],Sr.prototype,"privileges",void 0),h([p()],Sr.prototype,"region",void 0),h([p()],Sr.prototype,"role",void 0),h([p()],Sr.prototype,"roleId",void 0),h([p()],Sr.prototype,"sourceJSON",void 0),h([p()],Sr.prototype,"thumbnail",void 0),h([p({readOnly:!0})],Sr.prototype,"thumbnailUrl",null),h([p()],Sr.prototype,"units",void 0),h([p({readOnly:!0})],Sr.prototype,"userContentUrl",null),h([p({readOnly:!0})],Sr.prototype,"url",null),h([p()],Sr.prototype,"username",void 0),h([p()],Sr.prototype,"userType",void 0),Sr=ok=h([ce("esri.portal.PortalUser")],Sr);const aF=Sr,Jge=Object.freeze(Object.defineProperty({__proto__:null,default:aF},Symbol.toStringTag,{value:"Module"}));var qa;let l$;const PU={PortalGroup:()=>De(()=>Promise.resolve().then(()=>Wge),void 0,import.meta.url),PortalItem:()=>De(()=>Promise.resolve().then(()=>BK),void 0,import.meta.url),PortalUser:()=>De(()=>Promise.resolve().then(()=>Jge),void 0,import.meta.url)};let vt=qa=class extends QS(Ml){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Ri.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){this._esriIdCredentialCreateHandle=yn(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)Ri.request.trustedServers.includes(t)||Ri.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=aF.fromJSON(e),t.portal=this),t}load(e){const t=De(()=>Promise.resolve().then(()=>g0e),void 0,import.meta.url).then(({default:i})=>{hr(e),l$=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(i=>{if(wr){const r=wr;this.credential=r.findCredential(this.restUrl),this.credential||this.authMode!==qa.AUTH_MODE_AUTO||(this._esriIdCredentialCreateHandle=r.on("credential-create",()=>{r.findCredential(this.restUrl)&&this.signIn().catch(()=>{})}))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await De(()=>import("./ElevationLayer-05a09fed.js"),["./ElevationLayer-05a09fed.js","./preload-helper-388ac9d5.js"],import.meta.url)).default;return e?e.map(i=>new t({id:i.id,url:i.url})):[]}fetchBasemaps(e,t){const i=new Dd;return i.query=e||(Ri.apiKey&&kK(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0,this.queryGroups(i,t).then(r=>{if(i.num=100,i.query='type:"Web Map" -type:"Web Application"',r.total){const n=r.results[0];return i.sortField=n.sortField||"name",i.sortOrder=n.sortOrder||"desc",n.queryItems(i,t)}return null}).then(r=>{let n;return n=r&&r.total?r.results.filter(s=>s.type==="Web Map").map(s=>new l$({portalItem:s})):[],n})}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):Sl(e)?Promise.reject(fr()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,i=new Dd;if(i.num=100,i.sortField="title",t&&t.length){const r=[];for(const n of t)r.push(`(title:"${n.title}" AND owner:${n.owner})`);return i.query=r.join(" OR "),this.queryGroups(i,e).then(n=>n.results)}return Sl(e)?Promise.reject(fr()):Promise.resolve([])}fetchRegions(e){const t=this.user?.culture||this.culture||au();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){const t=this.user?.culture||this.culture||au();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return qa._default&&!qa._default.destroyed||(qa._default=new qa),qa._default}queryGroups(e,t){return this.queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this.queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",t)}fetchSelf(e=this.authMode,t=!1,i){const r=this.restUrl+"/portals/self",n={authMode:e,query:{culture:au().toLowerCase()},...i};return n.authMode==="auto"&&(n.authMode="no-prompt"),t&&(n.query.default=!0),this.request(r,n)}queryPortal(e,t,i,r){const n=nn(Dd,t),s=o=>this.request(this.restUrl+e,{...n.toRequestOptions(this),...r}).then(a=>{const l=n.clone();return l.start=a.nextStart,new qge({nextQueryParams:l,queryParams:n,total:a.total,results:qa._resultsToTypedArray(o,{portal:this},a,r)})}).then(a=>Promise.all(a.results.map(l=>typeof l.when=="function"?l.when():a)).then(()=>a,l=>(da(l),a)));return i&&PU[i]?PU[i]().then(({default:o})=>(hr(r),s(o))):s()}signIn(){if(this.authMode===qa.AUTH_MODE_ANONYMOUS)return Promise.reject(new Ce("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this.fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return wr?wr.getCredential(this.restUrl).then(t=>e(t)):e(this.credential)}normalizeUrl(e){const t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}requestToTypedArray(e,t,i){return this.request(e,t).then(r=>{const n=qa._resultsToTypedArray(i,{portal:this},r);return Promise.all(n.map(s=>typeof s.when=="function"?s.when():r)).then(()=>n,()=>n)})}request(e,t={}){const i={f:"json",...t.query},{authMode:r=this.authMode===qa.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:n=null,cacheBust:s=!1,method:o="auto",responseType:a="json",signal:l}=t,u={authMode:r,body:n,cacheBust:s,method:o,query:i,responseType:a,timeout:0,signal:l};return St(this._normalizeSSL(e),u).then(c=>c.data)}toJSON(){throw new Ce("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new qa({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new Ce("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const t=l$.fromJSON(e);return t.portalItem={portal:this},t}return null}static _resultsToTypedArray(e,t,i,r){let n=[];if(i){const s=ee(r)?r.signal:null;n=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(e||t)&&(n=n.map(o=>{const a=Object.assign(e?e.fromJSON(o):o,t);return typeof a.load=="function"&&a.load(s),a}))}else n=[];return n}};vt.AUTH_MODE_ANONYMOUS="anonymous",vt.AUTH_MODE_AUTO="auto",vt.AUTH_MODE_IMMEDIATE="immediate",h([p()],vt.prototype,"access",void 0),h([p()],vt.prototype,"allSSL",void 0),h([p()],vt.prototype,"authMode",void 0),h([p()],vt.prototype,"authorizedCrossOriginDomains",void 0),h([Ye("authorizedCrossOriginDomains")],vt.prototype,"readAuthorizedCrossOriginDomains",null),h([p()],vt.prototype,"basemapGalleryGroupQuery",void 0),h([p()],vt.prototype,"bingKey",void 0),h([p()],vt.prototype,"canListApps",void 0),h([p()],vt.prototype,"canListData",void 0),h([p()],vt.prototype,"canListPreProvisionedItems",void 0),h([p()],vt.prototype,"canProvisionDirectPurchase",void 0),h([p()],vt.prototype,"canSearchPublic",void 0),h([p()],vt.prototype,"canShareBingPublic",void 0),h([p()],vt.prototype,"canSharePublic",void 0),h([p()],vt.prototype,"canSignInArcGIS",void 0),h([p()],vt.prototype,"canSignInIDP",void 0),h([p()],vt.prototype,"colorSetsGroupQuery",void 0),h([p()],vt.prototype,"commentsEnabled",void 0),h([p({type:Date})],vt.prototype,"created",void 0),h([p()],vt.prototype,"credential",void 0),h([p()],vt.prototype,"culture",void 0),h([p()],vt.prototype,"currentVersion",void 0),h([p()],vt.prototype,"customBaseUrl",void 0),h([p()],vt.prototype,"defaultBasemap",void 0),h([Ye("defaultBasemap")],vt.prototype,"readDefaultBasemap",null),h([p()],vt.prototype,"defaultDevBasemap",void 0),h([Ye("defaultDevBasemap")],vt.prototype,"readDefaultDevBasemap",null),h([p({type:Kt})],vt.prototype,"defaultExtent",void 0),h([p()],vt.prototype,"defaultVectorBasemap",void 0),h([Ye("defaultVectorBasemap")],vt.prototype,"readDefaultVectorBasemap",null),h([p()],vt.prototype,"description",void 0),h([p()],vt.prototype,"devBasemapGalleryGroupQuery",void 0),h([p()],vt.prototype,"eueiEnabled",void 0),h([p({readOnly:!0})],vt.prototype,"extraQuery",null),h([p()],vt.prototype,"featuredGroups",void 0),h([p()],vt.prototype,"featuredItemsGroupQuery",void 0),h([p()],vt.prototype,"galleryTemplatesGroupQuery",void 0),h([p()],vt.prototype,"livingAtlasGroupQuery",void 0),h([p()],vt.prototype,"hasCategorySchema",void 0),h([p()],vt.prototype,"helpBase",void 0),h([p()],vt.prototype,"helperServices",void 0),h([p()],vt.prototype,"helpMap",void 0),h([p()],vt.prototype,"homePageFeaturedContent",void 0),h([p()],vt.prototype,"homePageFeaturedContentCount",void 0),h([p()],vt.prototype,"httpPort",void 0),h([p()],vt.prototype,"httpsPort",void 0),h([p()],vt.prototype,"id",void 0),h([p()],vt.prototype,"ipCntryCode",void 0),h([p({readOnly:!0})],vt.prototype,"isOrganization",null),h([p()],vt.prototype,"isPortal",void 0),h([p()],vt.prototype,"isReadOnly",void 0),h([p({readOnly:!0})],vt.prototype,"itemPageUrl",null),h([p()],vt.prototype,"layerTemplatesGroupQuery",void 0),h([p()],vt.prototype,"maxTokenExpirationMinutes",void 0),h([p({type:Date})],vt.prototype,"modified",void 0),h([p()],vt.prototype,"name",void 0),h([p()],vt.prototype,"portalHostname",void 0),h([p()],vt.prototype,"portalMode",void 0),h([p()],vt.prototype,"portalProperties",void 0),h([p()],vt.prototype,"region",void 0),h([p({readOnly:!0})],vt.prototype,"restUrl",null),h([p()],vt.prototype,"rotatorPanels",void 0),h([p()],vt.prototype,"showHomePageDescription",void 0),h([p()],vt.prototype,"sourceJSON",void 0),h([p()],vt.prototype,"staticImagesUrl",void 0),h([p({json:{name:"2DStylesGroupQuery"}})],vt.prototype,"stylesGroupQuery2d",void 0),h([p({json:{name:"stylesGroupQuery"}})],vt.prototype,"stylesGroupQuery3d",void 0),h([p()],vt.prototype,"supportsHostedServices",void 0),h([p()],vt.prototype,"symbolSetsGroupQuery",void 0),h([p()],vt.prototype,"templatesGroupQuery",void 0),h([p()],vt.prototype,"thumbnail",void 0),h([p({readOnly:!0})],vt.prototype,"thumbnailUrl",null),h([p()],vt.prototype,"units",void 0),h([p()],vt.prototype,"url",void 0),h([p()],vt.prototype,"urlKey",void 0),h([Ye("urlKey")],vt.prototype,"readUrlKey",null),h([p()],vt.prototype,"user",void 0),h([Ye("user")],vt.prototype,"readUser",null),h([p()],vt.prototype,"useStandardizedQuery",void 0),h([p()],vt.prototype,"useVectorBasemaps",void 0),h([p()],vt.prototype,"vectorBasemapGalleryGroupQuery",void 0),vt=qa=h([ce("esri.portal.Portal")],vt);const xo=vt,Zge=et.getLogger("esri.assets");function Di(e){if(!Ri.assetsPath)throw Zge.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new Ce("assets:path-not-set","config.assetsPath is not set");return p0(Ri.assetsPath,e)}let Zp=class extends Lt{constructor(t){super(t),this.portalItem=null}normalizeCtorArgs(t){return t&&t.portalItem&&t.path?{...t,path:this._normalizePath(t.path,t.portalItem)}:t}set path(t){ee(t)&&yl(t)?et.getLogger(this.declaredClass).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t)}_castPath(t){return this._normalizePath(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(t="json",i){const r=this.url;if(Re(r))throw new Ce("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:t,query:{token:this.portalItem.apiKey},signal:HZ(i,"signal")})}async update(t,i){return(await De(()=>import("./resourceUtils-60369a84.js"),["./resourceUtils-60369a84.js","./preload-helper-388ac9d5.js"],import.meta.url)).addOrUpdateResource(this,"update",t,i)}hasPath(){return ee(this.path)}_normalizePath(t,i){return Re(t)?t:(t=t.replace(/^\/+/,""),ee(i)&&yl(t)&&(t=YN(t,i.itemUrl)),t?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};h([p()],Zp.prototype,"portalItem",void 0),h([p({type:String,value:null})],Zp.prototype,"path",null),h([di("path")],Zp.prototype,"_castPath",null),h([p({type:String,readOnly:!0})],Zp.prototype,"url",null),h([p({type:String,readOnly:!0})],Zp.prototype,"itemRelativeUrl",null),Zp=h([ce("esri.portal.PortalItemResource")],Zp);const Yge=Zp;let B_=class extends Lt{constructor(t){super(t),this.created=null,this.rating=null}};h([p()],B_.prototype,"created",void 0),h([p()],B_.prototype,"rating",void 0),B_=h([ce("esri.portal.PortalRating")],B_);const u$=B_;var wy;const Kge=new Set(["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","GeoJson","CSV","KML","WFS","WMTS","WMS","Feed"]),Qge=new Set(["KML","GeoJson","CSV"]);let ui=wy=class extends QS(Ml){static from(e){return Fs(wy,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let i=e;return e==="Feature Service"||e==="Feature Collection"?i=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?i=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?i="Scene Layer":e==="Video Service"?i="Video Layer":e==="Scene Package"?i="Scene Layer Package":e==="Stream Service"?i="Feature Layer":e==="Geoprocessing Service"&&this.portal&&this.portal.isPortal?i=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geocoding Service"?i="Locator":e==="Geoenrichment Service"?i="GeoEnrichment Service":e==="Microsoft Powerpoint"?i="Microsoft PowerPoint":e==="GeoJson"?i="GeoJSON":e==="Globe Service"?i="Globe Layer":e==="Vector Tile Service"?i="Tile Layer":e==="netCDF"?i="NetCDF":e==="Map Service"?i=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e&&e.toLowerCase().includes("add in")?i=e.replace(/(add in)/gi,"Add-In"):e==="datastore catalog service"?i="Big Data File Share":e==="Compact Tile Package"?i="Tile Package (tpkx)":e==="OGCFeatureServer"?i="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")?i="Instant App":e==="Insights Page"&&(i="Insights Report"),i}readExtent(e){return e&&e.length?new Kt(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[],i="esri/images/portal/",r="16";let n,s=!1,o=!1,a=!1,l=!1,u=!1,c=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(s=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(o=t.includes("Table"),a=t.includes("Route Layer"),l=t.includes("Markup"),u=t.includes("Spatiotemporal"),c=t.includes("UtilityNetwork"),n=u&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":u?"spatiotemporal":s?"featureshosted":c?"utilitynetwork":"features"):n=e==="map service"||e==="wms"||e==="wmts"?s||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages":e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="video service"?"mediaservice":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="geoprocessing service"?t.includes("Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":e==="geodata service"?"geodataservice":"layers"):n=e==="web map"||e==="cityengine web scene"?"maps":e==="web scene"?t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?"instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?"apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?"mapsgray":e==="service definition"||e==="csv"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="360 vr experience"||e==="netcdf"||e==="administrative report"?"datafiles":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?"appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?"addindesktop":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="form"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="image"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?"datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?"toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?"layersgray":e==="scene package"?"scenepackage":e==="mobile scene package"?"mobilescenepackage":e==="tile package"||e==="compact tile package"?"tilepackage":e==="task file"?"taskfile":e==="report template"?"report-template":e==="statistical data collection"?"statisticaldatacollection":e==="insights workbook"?"workbook":e==="insights model"?"insightsmodel":e==="insights page"?"insightspage":e==="insights theme"?"insightstheme":e==="hub initiative"?"hubinitiative":e==="hubpage"?"hubpage":e==="hub event"?"hubevent":e==="hub site application"?"hubsite":e==="hub project"?"hubproject":e==="relational database connection"?"relationaldatabaseconnection":e==="big data file share"?"datastorecollection":e==="image collection"?"imagecollection":e==="style"?"style":e==="desktop style"?"desktopstyle":e==="dashboard"?"dashboard":e==="raster function template"?"rasterprocessingtemplate":e==="vector tile package"?"vectortilepackage":e==="ortho mapping project"?"orthomappingproject":e==="ortho mapping template"?"orthomappingtemplate":e==="solution"?"solutions":e==="geopackage"?"geopackage":e==="deep learning package"?"deeplearningpackage":e==="real time analytic"?"realtimeanalytics":e==="big data analytic"?"bigdataanalytics":e==="feed"?"feed":e==="excalibur imagery project"?"excaliburimageryproject":e==="notebook"?"notebook":e==="storymap"?"storymap":e==="survey123 add in"?"survey123addin":e==="mission"?"mission":e==="mission report"?"missionreport":e==="quickcapture project"?"quickcaptureproject":e==="pro report"?"proreport":e==="pro report template"?"proreporttemplate":e==="urban model"?"urbanmodel":e==="web experience"?"experiencebuilder":e==="web experience template"?"webexperiencetemplate":e==="experience builder widget"?"experiencebuilderwidget":e==="experience builder widget package"?"experiencebuilderwidgetpackage":e==="workflow"?"workflow":e==="insights script"?"insightsscript":e==="kernel gateway connection"?"kernelgatewayconnection":e==="hub initiative template"?"hubinitiativetemplate":e==="storymap theme"?"storymaptheme":e==="knowledge graph"?"knowledgegraph":e==="native application"?"nativeapp":e==="native application installer"?"nativeappinstaller":e==="link chart"?"linkchart":e==="investigation"?"investigation":e==="ogcfeatureserver"?"features":e==="pro project"?"proproject":e==="insights workbook package"?"insightsworkbookpackage":e==="apache parquet"?"apacheparquet":e==="notebook code snippets"||e==="notebook code snippet library"?"notebookcodesnippets":e==="suitability model"?"suitabilitymodel":e==="esri classifier definition"?"classifierdefinition":e==="esri classification schema"?"classificationschema":e==="insights data engineering workbook"?"dataengineeringworkbook":e==="insights data engineering model"?"dataengineeringmodel":e==="deep learning studio project"?"deeplearningproject":e==="discussion"?"discussion":e==="allsource project"?"allsourceproject":e==="api key"?"apikey":"maps",n?Di(i+n+r+".png"):null}get isLayer(){return this.type!=null&&Kge.has(this.type)}get itemPageUrl(){const e=this.portal?.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){const e=this.portal?.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal?.normalizeUrl(`${e}/info/${t}?f=json`)??null:null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=xo.getDefault()),i=t.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:ee(e)?e.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}};return e instanceof u$&&(e=e.rating),e==null||isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new u$({rating:e,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:Le(this.applicationProxies),avgRating:this.avgRating,categories:Le(this.categories),created:Le(this.created),culture:this.culture,description:this.description,extent:Le(this.extent),groupCategories:Le(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:Le(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:Le(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:Le(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Le(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new wy({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){const e=this.toJSON();for(const i of["tags","typeKeywords","categories"])e[i]&&(e[i]=e[i].join(", "));const{extent:t}=e;return t&&(e.extent=JSON.stringify(t)),e}async deleteRating(){await Uo(this.portal).request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return Uo(this.portal).request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await Uo(this.portal).request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return t.rating!=null?(t.created=new Date(t.created),new u$(t)):null}fetchRelatedItems(e,t){return Uo(this.portal).requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},wy)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return Uo(this.portal).request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>Uo(this.portal).signIn()).then(()=>{const t=e&&e.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?i.query.text=t:typeof t=="object"&&(i.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new Ce("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new Ce("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:i}=this;await Uo(t).signIn();const{copyResources:r,folder:n,tags:s,title:o}=e||{},a={method:"post",query:{copyPrivateResources:r==="all",folder:typeof n=="string"?n:n?.id,includeResources:!!r,tags:s?.join(","),title:o}},{itemId:l}=await t.request(`${i}/copy`,a);return new wy({id:l,portal:t})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e.thumbnail,i=e.filename,r={method:"post"};if(typeof t=="string")U0(t)?r.query={data:t}:r.query={url:hl(t)},ee(i)&&(r.query.filename=i);else{const n=new FormData;ee(i)?n.append("file",t,i):n.append("file",t),r.body=n}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new Ce("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return(await De(()=>import("./resourceUtils-60369a84.js"),["./resourceUtils-60369a84.js","./preload-helper-388ac9d5.js"],import.meta.url)).fetchResources(this,e,t)}async addResource(e,t,i){const r=await De(()=>import("./resourceUtils-60369a84.js"),["./resourceUtils-60369a84.js","./preload-helper-388ac9d5.js"],import.meta.url);return e.portalItem=this,r.addOrUpdateResource(e,"add",t,i)}async removeResource(e,t){const i=await De(()=>import("./resourceUtils-60369a84.js"),["./resourceUtils-60369a84.js","./preload-helper-388ac9d5.js"],import.meta.url);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new Ce("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i.removeResource(this,e,t)}async removeAllResources(e){return(await De(()=>import("./resourceUtils-60369a84.js"),["./resourceUtils-60369a84.js","./preload-helper-388ac9d5.js"],import.meta.url)).removeAllResources(this,e)}resourceFromPath(e){return new Yge({portalItem:this,path:e})}toJSON(){const e=this.extent,t={accessInformation:this.accessInformation,categories:Le(this.categories),created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:Le(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Le(this.typeKeywords),url:this.url};return KZ(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new wy({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};h([p({type:["private","shared","org","public"]})],ui.prototype,"access",void 0),h([p()],ui.prototype,"accessInformation",void 0),h([p({type:String})],ui.prototype,"apiKey",void 0),h([p({json:{read:{source:"appProxies"}}})],ui.prototype,"applicationProxies",void 0),h([p()],ui.prototype,"avgRating",void 0),h([p()],ui.prototype,"categories",void 0),h([p({type:Date})],ui.prototype,"created",void 0),h([p()],ui.prototype,"culture",void 0),h([p()],ui.prototype,"description",void 0),h([p({readOnly:!0})],ui.prototype,"displayName",null),h([p({type:Kt})],ui.prototype,"extent",void 0),h([Ye("extent")],ui.prototype,"readExtent",null),h([p()],ui.prototype,"groupCategories",void 0),h([p({readOnly:!0})],ui.prototype,"iconUrl",null),h([p()],ui.prototype,"id",void 0),h([p({readOnly:!0})],ui.prototype,"isLayer",null),h([p({type:Boolean,readOnly:!0})],ui.prototype,"isOrgItem",void 0),h([p()],ui.prototype,"itemControl",void 0),h([p({readOnly:!0})],ui.prototype,"itemPageUrl",null),h([p({readOnly:!0})],ui.prototype,"itemUrl",null),h([p()],ui.prototype,"licenseInfo",void 0),h([p({type:Date})],ui.prototype,"modified",void 0),h([p()],ui.prototype,"name",void 0),h([p()],ui.prototype,"numComments",void 0),h([p()],ui.prototype,"numRatings",void 0),h([p()],ui.prototype,"numViews",void 0),h([p()],ui.prototype,"owner",void 0),h([p()],ui.prototype,"ownerFolder",void 0),h([p({type:xo})],ui.prototype,"portal",void 0),h([p()],ui.prototype,"screenshots",void 0),h([p()],ui.prototype,"size",void 0),h([p()],ui.prototype,"snippet",void 0),h([p()],ui.prototype,"sourceJSON",void 0),h([p({type:String})],ui.prototype,"sourceUrl",void 0),h([p({type:String})],ui.prototype,"spatialReference",void 0),h([p()],ui.prototype,"tags",void 0),h([p()],ui.prototype,"thumbnail",void 0),h([p({readOnly:!0})],ui.prototype,"thumbnailUrl",null),h([p()],ui.prototype,"title",void 0),h([p()],ui.prototype,"type",void 0),h([p()],ui.prototype,"typeKeywords",void 0),h([p({type:String,json:{read(e,t){if(Qge.has(t.type)){const i=this.portal?.restUrl;e||(e=i&&this.id?`${i}/content/items/${this.id}/data`:null)}return e}}})],ui.prototype,"url",void 0),h([p({readOnly:!0})],ui.prototype,"userItemUrl",null),ui=wy=h([ce("esri.portal.PortalItem")],ui);const Jv=ui,BK=Object.freeze(Object.defineProperty({__proto__:null,default:Jv},Symbol.toStringTag,{value:"Module"})),NU=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,Xge={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function FU(e){return Xge[e]??!1}const z_=[],Zv=new Map;function DU(e){for(const t of Zv.keys())GK(e.pattern,t)&&Zv.delete(t)}function e0e(e){return z_.includes(e)||(DU(e),z_.unshift(e)),{remove(){const t=z_.indexOf(e);t>-1&&(z_.splice(t,1),DU(e))}}}async function zK(e){const t=au();Zv.has(e)||Zv.set(e,i0e(e,t));const i=Zv.get(e);return i&&await r0e.add(i),i}function t0e(e){if(!NU.test(e))return null;const t=NU.exec(e);if(t===null)return null;const[,i,r]=t,n=i+(r?"-"+r.toUpperCase():"");return FU(n)?n:FU(i)?i:null}async function i0e(e,t){const i=[];for(const r of z_)if(GK(r.pattern,e))try{return await r.fetchMessageBundle(e,t)}catch(n){i.push(n)}throw i.length?new Ce("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:i}):new Ce("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function GK(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}oF(()=>{Zv.clear()});const r0e=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Kd())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function n0e(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e,i=await zK("esri/t9n/basemaps");return i[e]||i[t]}const ak={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return Di("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Di("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Di("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Di("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return Di("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return Di("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return Di("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Di("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return Di("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Di("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Di("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Di("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Di("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Di("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Di("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Di("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Di("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return Di("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return Di("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return Di("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return Di("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return Di("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return Di("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return Di("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return Di("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return Di("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return Di("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}};function jU(e){const t=e?.type;return t==="imagery-tile"||t==="tile"||t==="open-street-map"||t==="vector-tile"||t==="web-tile"||t==="wmts"}function s0e(e){const t=e?.type;return t==="base-tile"||t==="tile"||t==="elevation"||t==="imagery-tile"||t==="base-elevation"||t==="open-street-map"||t==="wcs"||t==="web-tile"||t==="wmts"||t==="vector-tile"}const tst={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function qK(e){const t=e?.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function lF(e){return e?.type==="feature"&&!e.url&&e.source?.type==="memory"}function ist(e){return e?.type==="feature"&&e.source?.type==="feature-layer"}function o0e(e){if(e.activeLayer){const t=e.activeLayer.tileMatrixSet;if(t)return t;const i=e.activeLayer.tileMatrixSets;if(i)return i}return null}async function HK(e,t){const i=wr?.findServerInfo(e);if(i?.currentVersion!=null)return i.owningSystemUrl||null;const r=e.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const n=`${e.substring(0,r)}/rest/info`,s=ee(t)?t.signal:null,{data:o}=await St(n,{query:{f:"json"},responseType:"json",signal:s});return o?.owningSystemUrl||null}function a0e(e){if(!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function WK(e){return a0e(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function l0e(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function u0e(e){return!!l0e(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}const c0e=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),h0e=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","media","ogc-feature","route","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function d0e(e){return e.layerContainerType==="basemap"?c0e:e.layerContainerType==="operational-layers"?h0e:null}function p0e(e,t){if(t.restrictedWebMapWriting){const i=d0e(t);return!ee(i)||i.has(e.type)&&!lF(e)}return!0}function f0e(e,t){if(t)if(lF(e)){const i=ZS("featureCollection.layers",t),r=i&&i[0]&&i[0].layerDefinition;r&&c$(e,r)}else e.type==="stream"?c$(e,t.layerDefinition=t.layerDefinition||{}):e.type!=="group"&&c$(e,t)}function c$(e,t){"maxScale"in e&&(t.maxScale=QT(e.maxScale)??void 0),"minScale"in e&&(t.minScale=QT(e.minScale)??void 0)}function m0e(e,t){if(f0e(e,t),t&&("blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=QT(e.opacity)??void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts"))if(lF(e)){const i=t.featureCollection;i&&(i.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function UU(e,t,i){if(!("write"in e)||!e.write)return i&&i.messages&&i.messages.push(new Ce("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(p0e(e,i)){const r={};return e.write(r,i)?r:null}return ee(t)&&m0e(e,t=Le(t)),t}var aI;let y0e=0;const JK="esri.Basemap";let Ul=aI=class extends QS(Ml){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+y0e++,this.baseLayers=new Pt,this.referenceLayers=new Pt;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&et.getLogger(this.declaredClass).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.baseLayers.on("after-add",r=>t(r.item)),this.referenceLayers.on("after-add",r=>t(r.item)),this.baseLayers.on("after-remove",r=>i(r.item)),this.referenceLayers.on("after-remove",r=>i(r.item))}initialize(){this.when().catch(e=>{et.getLogger(this.declaredClass).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.removeAll();for(const i of e)i.destroy();const t=this.referenceLayers.removeAll();for(const i of t)i.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem?.destroy(),this.portalItem=null}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",d0(e,this._get("baseLayers")))}_writeBaseLayers(e,t,i){const r=[];e&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(n=>{const s=UU(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);ee(s)&&r.push(s)}),this.referenceLayers.forEach(n=>{const s=UU(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);ee(s)&&(n.type!=="scene"&&(s.isReference=!0),r.push(s))})),t.baseMapLayers=r}set referenceLayers(e){this._set("referenceLayers",d0(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return Z5(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(e.loadStatus="loaded"),new aI({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const r=Le(i);return r.url&&pc(r.url)&&(r.url=`https:${r.url}`),r.templateUrl&&pc(r.templateUrl)&&(r.templateUrl=`https:${r.templateUrl}`),r})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:i}=this;hr(e);const r=[];if(t){const n=t.context?t.context.url:null;if(r.push(this._loadLayersFromJSON(t.data,n,e)),t.data.id&&!t.data.title){const s=t.data.id;r.push(n0e(s).then(o=>{o&&this.read({title:o},t.context)}))}}else i&&r.push(this._loadFromItem(i,e));await Promise.all(r)}async _loadLayersFromJSON(e,t,i){const r=this.resourceInfo&&this.resourceInfo.context,n=this.portalItem&&this.portalItem.portal||r&&r.portal||null,s=r&&r.origin==="web-scene"?"web-scene":"web-map",{populateOperationalLayers:o}=await De(()=>import("./layersCreator-ccad3ac8.js"),["./layersCreator-ccad3ac8.js","./lazyLayerLoader-66f8ee92.js","./preload-helper-388ac9d5.js","./portalLayers-ed46f9f9.js","./layersLoader-b0ea3324.js","./fetchService-7aa3a0fc.js","./jsonContext-26af1f96.js"],import.meta.url),a=[];if(hr(i),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const l={context:{origin:s,url:t,portal:n,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},u=f=>s==="web-scene"&&f.layerType==="ArcGISSceneServiceLayer"||f.isReference,c=o(this.baseLayers,e.baseMapLayers.filter(f=>!u(f)),l);a.push(c);const d=o(this.referenceLayers,e.baseMapLayers.filter(u),l);a.push(d)}await Ia(a)}async _loadFromItem(e,t){const i=await e.load(t),r=await i.fetchData("json",t),n=Ln(e.itemUrl??"");return this._set("resourceInfo",{data:r.baseMap??{},context:{origin:e.type==="Web Scene"?"web-scene":"web-map",portal:e.portal||xo.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||xo.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,t)}static fromId(e){const t=ak[e];if(t){if(t.deprecated){let i=null;e==="dark-gray"?i="dark-gray-vector":e==="gray"?i="gray-vector":e==="streets"?i="streets-vector":e==="topo"&&(i="topo-vector"),bY(et.getLogger(JK),`The ${e} basemap has entered mature support and is no longer being updated.`,{replacement:i,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return aI.fromJSON(t)}return null}};h([p({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,i,r){this._writeBaseLayers(e,t,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Pt}},writer(e,t,i,r){this._writeBaseLayers(e,t,r)}}}}}})],Ul.prototype,"baseLayers",null),h([p({type:String,json:{origins:{"web-scene":{write:!0}}}})],Ul.prototype,"id",void 0),h([p({type:Jv})],Ul.prototype,"portalItem",void 0),h([p()],Ul.prototype,"referenceLayers",null),h([p({readOnly:!0})],Ul.prototype,"resourceInfo",void 0),h([p({type:Et})],Ul.prototype,"spatialReference",void 0),h([p()],Ul.prototype,"thumbnailUrl",void 0),h([p({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Ul.prototype,"title",void 0),h([it("title")],Ul.prototype,"writeTitle",null),Ul=aI=h([ce(JK)],Ul);const cm=Ul,g0e=Object.freeze(Object.defineProperty({__proto__:null,default:cm},Symbol.toStringTag,{value:"Module"})),oA={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function ZK(e){return oA[e]||oA[e.toLowerCase()]}function uF(e){return oA[e]??oA[e.toLowerCase()]}function v0e(e){return[...uF(e)]}function h$(e,t,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?e+(t-e)*r:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}function YK(e,t,i,r=1){const n=(e%360+360)%360/360,s=i<=.5?i*(t+1):i+t-i*t,o=2*i-s;return[Math.round(255*h$(o,s,n+1/3)),Math.round(255*h$(o,s,n)),Math.round(255*h$(o,s,n-1/3)),r]}function b0e(e){const t=e.length>5,i=t?8:4,r=(1<<i)-1,n=t?1:17,s=t?e.length===9:e.length===5;let o=+("0x"+e.substr(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return s&&(l=o&r,o>>=i,a[3]=n*l/255),l=o&r,o>>=i,a[2]=n*l,l=o&r,o>>=i,a[1]=n*l,l=o&r,o>>=i,a[0]=n*l,a}function $a(){return[0,0,0]}function w0e(e){return[e[0],e[1],e[2]]}function pw(e,t,i){return[e,t,i]}function _0e(e){const t=$a(),i=Math.min(3,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function x0e(e,t){return new Float64Array(e,t,3)}function KK(){return $a()}function QK(){return pw(1,1,1)}function XK(){return pw(1,0,0)}function eQ(){return pw(0,1,0)}function tQ(){return pw(0,0,1)}const S0e=KK(),iQ=QK(),E0e=XK(),M0e=eQ(),I0e=tQ();Object.freeze(Object.defineProperty({__proto__:null,ONES:iQ,UNIT_X:E0e,UNIT_Y:M0e,UNIT_Z:I0e,ZEROS:S0e,clone:w0e,create:$a,createView:x0e,fromArray:_0e,fromValues:pw,ones:QK,unitX:XK,unitY:eQ,unitZ:tQ,zeros:KK},Symbol.toStringTag,{value:"Module"}));let cF=1e-6;function bu(){return cF}function T0e(e){cF=e}const e4=Math.random,A0e=Math.PI/180,C0e=180/Math.PI;function hF(e){return e*A0e}function $0e(e){return e*C0e}function O0e(e,t){return Math.abs(e-t)<=cF*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:e4,equals:O0e,getEpsilon:bu,setEpsilon:T0e,toDegree:$0e,toRadian:hF},Symbol.toStringTag,{value:"Module"}));function dF(e){const t=e[0],i=e[1],r=e[2];return Math.sqrt(t*t+i*i+r*r)}function aA(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function rQ(e,t,i,r){return e[0]=t,e[1]=i,e[2]=r,e}function nQ(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function rx(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function sQ(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function oQ(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e}function R0e(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function k0e(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function L0e(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function P0e(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function N0e(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function F0e(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function D0e(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function pF(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function j0e(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e}function aQ(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2];return Math.sqrt(i*i+r*r+n*n)}function lQ(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2];return i*i+r*r+n*n}function uQ(e){const t=e[0],i=e[1],r=e[2];return t*t+i*i+r*r}function U0e(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function V0e(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function lk(e,t){const i=t[0],r=t[1],n=t[2];let s=i*i+r*r+n*n;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e}function lA(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function B0e(e,t,i){const r=t[0],n=t[1],s=t[2],o=i[0],a=i[1],l=i[2];return e[0]=n*l-s*a,e[1]=s*o-r*l,e[2]=r*a-n*o,e}function z0e(e,t,i,r){const n=t[0],s=t[1],o=t[2];return e[0]=n+r*(i[0]-n),e[1]=s+r*(i[1]-s),e[2]=o+r*(i[2]-o),e}function G0e(e,t,i,r,n,s){const o=s*s,a=o*(2*s-3)+1,l=o*(s-2)+s,u=o*(s-1),c=o*(3-2*s);return e[0]=t[0]*a+i[0]*l+r[0]*u+n[0]*c,e[1]=t[1]*a+i[1]*l+r[1]*u+n[1]*c,e[2]=t[2]*a+i[2]*l+r[2]*u+n[2]*c,e}function q0e(e,t,i,r,n,s){const o=1-s,a=o*o,l=s*s,u=a*o,c=3*s*a,d=3*l*o,f=l*s;return e[0]=t[0]*u+i[0]*c+r[0]*d+n[0]*f,e[1]=t[1]*u+i[1]*c+r[1]*d+n[1]*f,e[2]=t[2]*u+i[2]*c+r[2]*d+n[2]*f,e}function H0e(e,t){t=t||1;const i=e4,r=2*i()*Math.PI,n=2*i()-1,s=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(r)*s,e[1]=Math.sin(r)*s,e[2]=n*t,e}function W0e(e,t,i){const r=t[0],n=t[1],s=t[2];return e[0]=i[0]*r+i[4]*n+i[8]*s+i[12],e[1]=i[1]*r+i[5]*n+i[9]*s+i[13],e[2]=i[2]*r+i[6]*n+i[10]*s+i[14],e}function J0e(e,t,i){const r=t[0],n=t[1],s=t[2];return e[0]=r*i[0]+n*i[3]+s*i[6],e[1]=r*i[1]+n*i[4]+s*i[7],e[2]=r*i[2]+n*i[5]+s*i[8],e}function Z0e(e,t,i){const r=i[0],n=i[1],s=i[2],o=i[3],a=t[0],l=t[1],u=t[2];let c=n*u-s*l,d=s*a-r*u,f=r*l-n*a,m=n*f-s*d,g=s*c-r*f,v=r*d-n*c;const b=2*o;return c*=b,d*=b,f*=b,m*=2,g*=2,v*=2,e[0]=a+c+m,e[1]=l+d+g,e[2]=u+f+v,e}function Y0e(e,t,i,r){const n=[],s=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],s[0]=n[0],s[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),s[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),e[0]=s[0]+i[0],e[1]=s[1]+i[1],e[2]=s[2]+i[2],e}function K0e(e,t,i,r){const n=[],s=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],s[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),s[1]=n[1],s[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),e[0]=s[0]+i[0],e[1]=s[1]+i[1],e[2]=s[2]+i[2],e}function Q0e(e,t,i,r){const n=[],s=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],s[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),s[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),s[2]=n[2],e[0]=s[0]+i[0],e[1]=s[1]+i[1],e[2]=s[2]+i[2],e}function X0e(e,t){aA(wE,e),aA(_E,t),lk(wE,wE),lk(_E,_E);const i=lA(wE,_E);return i>1?0:i<-1?Math.PI:Math.acos(i)}const wE=$a(),_E=$a();function e1e(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function t1e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function i1e(e,t){if(e===t)return!0;const i=e[0],r=e[1],n=e[2],s=t[0],o=t[1],a=t[2],l=bu();return Math.abs(i-s)<=l*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-o)<=l*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-a)<=l*Math.max(1,Math.abs(n),Math.abs(a))}function r1e(e,t,i){const r=i[0]-t[0],n=i[1]-t[1],s=i[2]-t[2];let o=r*r+n*n+s*s;return o>0?(o=1/Math.sqrt(o),e[0]=r*o,e[1]=n*o,e[2]=s*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}const n1e=rx,s1e=sQ,o1e=oQ,a1e=aQ,l1e=lQ,u1e=dF,c1e=uQ;Object.freeze(Object.defineProperty({__proto__:null,abs:L0e,add:nQ,angle:X0e,bezier:q0e,ceil:R0e,copy:aA,cross:B0e,direction:r1e,dist:a1e,distance:aQ,div:o1e,divide:oQ,dot:lA,equals:i1e,exactEquals:t1e,floor:k0e,hermite:G0e,inverse:V0e,len:u1e,length:dF,lerp:z0e,max:F0e,min:N0e,mul:s1e,multiply:sQ,negate:U0e,normalize:lk,random:H0e,rotateX:Y0e,rotateY:K0e,rotateZ:Q0e,round:D0e,scale:pF,scaleAndAdd:j0e,set:rQ,sign:P0e,sqrDist:l1e,sqrLen:c1e,squaredDistance:lQ,squaredLength:uQ,str:e1e,sub:n1e,subtract:rx,transformMat3:J0e,transformMat4:W0e,transformQuat:Z0e},Symbol.toStringTag,{value:"Module"}));function h1e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function d1e(e,t,i,r,n){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e}function p1e(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function cQ(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function hQ(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}function dQ(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e[3]=t[3]/i[3],e}function f1e(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function m1e(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function y1e(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e[3]=Math.min(t[3],i[3]),e}function g1e(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e[3]=Math.max(t[3],i[3]),e}function v1e(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function b1e(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function w1e(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e}function pQ(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2],s=t[3]-e[3];return Math.sqrt(i*i+r*r+n*n+s*s)}function fQ(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2],s=t[3]-e[3];return i*i+r*r+n*n+s*s}function mQ(e){const t=e[0],i=e[1],r=e[2],n=e[3];return Math.sqrt(t*t+i*i+r*r+n*n)}function yQ(e){const t=e[0],i=e[1],r=e[2],n=e[3];return t*t+i*i+r*r+n*n}function _1e(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function x1e(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function S1e(e,t){const i=t[0],r=t[1],n=t[2],s=t[3];let o=i*i+r*r+n*n+s*s;return o>0&&(o=1/Math.sqrt(o),e[0]=i*o,e[1]=r*o,e[2]=n*o,e[3]=s*o),e}function E1e(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function gQ(e,t,i,r){const n=t[0],s=t[1],o=t[2],a=t[3];return e[0]=n+r*(i[0]-n),e[1]=s+r*(i[1]-s),e[2]=o+r*(i[2]-o),e[3]=a+r*(i[3]-a),e}function M1e(e,t){const i=e4;let r,n,s,o,a,l;t=t||1;do r=2*i()-1,n=2*i()-1,a=r*r+n*n;while(a>=1);do s=2*i()-1,o=2*i()-1,l=s*s+o*o;while(l>=1);const u=Math.sqrt((1-a)/l);return e[0]=t*r,e[1]=t*n,e[2]=t*s*u,e[3]=t*o*u,e}function I1e(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3];return e[0]=i[0]*r+i[4]*n+i[8]*s+i[12]*o,e[1]=i[1]*r+i[5]*n+i[9]*s+i[13]*o,e[2]=i[2]*r+i[6]*n+i[10]*s+i[14]*o,e[3]=i[3]*r+i[7]*n+i[11]*s+i[15]*o,e}function T1e(e,t,i){const r=t[0],n=t[1],s=t[2],o=i[0],a=i[1],l=i[2],u=i[3],c=u*r+a*s-l*n,d=u*n+l*r-o*s,f=u*s+o*n-a*r,m=-o*r-a*n-l*s;return e[0]=c*u+m*-o+d*-l-f*-a,e[1]=d*u+m*-a+f*-o-c*-l,e[2]=f*u+m*-l+c*-a-d*-o,e[3]=t[3],e}function A1e(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function C1e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function $1e(e,t){const i=e[0],r=e[1],n=e[2],s=e[3],o=t[0],a=t[1],l=t[2],u=t[3],c=bu();return Math.abs(i-o)<=c*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=c*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-l)<=c*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(s-u)<=c*Math.max(1,Math.abs(s),Math.abs(u))}const O1e=cQ,R1e=hQ,k1e=dQ,L1e=pQ,P1e=fQ,N1e=mQ,F1e=yQ;Object.freeze(Object.defineProperty({__proto__:null,add:p1e,ceil:f1e,copy:h1e,dist:L1e,distance:pQ,div:k1e,divide:dQ,dot:E1e,equals:$1e,exactEquals:C1e,floor:m1e,inverse:x1e,len:N1e,length:mQ,lerp:gQ,max:g1e,min:y1e,mul:R1e,multiply:hQ,negate:_1e,normalize:S1e,random:M1e,round:v1e,scale:b1e,scaleAndAdd:w1e,set:d1e,sqrDist:P1e,sqrLen:F1e,squaredDistance:fQ,squaredLength:yQ,str:A1e,sub:O1e,subtract:cQ,transformMat4:I1e,transformQuat:T1e},Symbol.toStringTag,{value:"Module"}));const VU=new Float32Array(1);function rst(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function Ta(e,t,i){return Math.min(Math.max(e,t),i)}function nst(e){return(e&e-1)==0}function sst(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function ost(e,t,i){return e+(t-e)*i}function Tv(e){return e*Math.PI/180}function vQ(e){return 180*e/Math.PI}function ast(e){return Math.acos(Ta(e,-1,1))}function bQ(e){return Math.asin(Ta(e,-1,1))}function Yv(e,t,i=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=i}const uA=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function D1e(e){return uA.setFloat64(0,e),uA.getBigInt64(0)}function j1e(e){return uA.setBigInt64(0,e),uA.getFloat64(0)}const d$=BigInt("1000000");U1e(1);function U1e(e){const t=D1e(e=Math.abs(e)),i=j1e(t<=d$?d$:t-d$);return Math.abs(e-i)}function V1e(e,t,i=1e-6){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;const r=Math.abs(e-t),n=Math.abs(e),s=Math.abs(t);if(e===0||t===0||n<1e-12&&s<1e-12){if(r>.01*i)return!1}else if(r/(n+s)>i)return!1;return!0}function B1e(e){return wQ(Math.max(-uk,Math.min(e,uk)))}function wQ(e){return VU[0]=e,VU[0]}function lst(e,t){const i=dF(e),r=bQ(e[2]/i),n=Math.atan2(e[1]/i,e[0]/i);return rQ(t,i,r,n),t}function ust(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],r=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(Yv(t,1)&&Yv(i,1)&&Yv(r,1))}const uk=wQ(34028234663852886e22);function xE(e){return Ta(H5(e),0,255)}function SE(e,t,i){return e=Number(e),isNaN(e)?i:e<t?t:e>i?i:e}let lI=class Ps{static blendColors(t,i,r,n=new Ps){return n.r=Math.round(t.r+(i.r-t.r)*r),n.g=Math.round(t.g+(i.g-t.g)*r),n.b=Math.round(t.b+(i.b-t.b)*r),n.a=t.a+(i.a-t.a)*r,n._sanitize()}static fromRgb(t,i){const r=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(r){const n=r[2].split(/\s*,\s*/),s=r[1];if(s==="rgb"&&n.length===3||s==="rgba"&&n.length===4){const o=n[0];if(o.charAt(o.length-1)==="%"){const a=n.map(l=>2.56*parseFloat(l));return n.length===4&&(a[3]=parseFloat(n[3])),Ps.fromArray(a,i)}return Ps.fromArray(n.map(a=>parseFloat(a)),i)}if(s==="hsl"&&n.length===3||s==="hsla"&&n.length===4)return Ps.fromArray(YK(parseFloat(n[0]),parseFloat(n[1])/100,parseFloat(n[2])/100,parseFloat(n[3])),i)}return null}static fromHex(t,i=new Ps){if(t.length!==4&&t.length!==7||t[0]!=="#")return null;const r=t.length===4?4:8,n=(1<<r)-1;let s=+("0x"+t.substr(1));return isNaN(s)?null:(["b","g","r"].forEach(o=>{const a=s&n;s>>=r,i[o]=r===4?17*a:a}),i.a=1,i)}static fromArray(t,i=new Ps){return i._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(t,i){const r=ZK(t)?uF(t):null;return r&&Ps.fromArray(r,i)||Ps.fromRgb(t,i)||Ps.fromHex(t,i)}static fromJSON(t){return t&&new Ps([t[0],t[1],t[2],t[3]/255])}static toUnitRGB(t){return ee(t)?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return ee(t)?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return typeof t=="string"?Ps.fromString(t,this):Array.isArray(t)?Ps.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof Ps||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const t=this.r.toString(16),i=this.g.toString(16),r=this.b.toString(16);return`#${t.length<2?"0"+t:t}${i.length<2?"0"+i:i}${r.length<2?"0"+r:r}`}toCss(t=!1){const i=this.r+", "+this.g+", "+this.b;return t?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=Ps.AlphaMode.ALWAYS){const i=xE(this.r),r=xE(this.g),n=xE(this.b);return t===Ps.AlphaMode.ALWAYS||this.a!==1?[i,r,n,xE(255*this.a)]:[i,r,n]}clone(){return new Ps(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return ee(t)&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(SE(this.r,0,255)),this.g=Math.round(SE(this.g,0,255)),this.b=Math.round(SE(this.b,0,255)),this.a=SE(this.a,0,1),this}_set(t,i,r,n){this.r=t,this.g=i,this.b=r,this.a=n}};lI.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(lI||(lI={}));const Mt=lI;function Sb(e,t,i=!1){let{hasM:r,hasZ:n}=e;Array.isArray(t)?t.length!==4||r||n?t.length===3&&i&&!r?(n=!0,r=!1):t.length===3&&r&&n&&(r=!1,n=!1):(r=!0,n=!0):(n=!n&&t.hasZ&&(!r||t.hasM),r=!r&&t.hasM&&(!n||t.hasZ)),e.hasZ=n,e.hasM=r}var ck;function BU(e){return(t,i)=>t==null?i:i==null?t:e(t,i)}function z1e(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Yp=ck=class extends pp{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){if(!e&&!t)return{};const i={};Array.isArray(e)?(i.points=e,i.spatialReference=t):z1e(e)?i.spatialReference=e:(e.points&&(i.points=e.points),e.spatialReference&&(i.spatialReference=e.spatialReference),e.hasZ&&(i.hasZ=e.hasZ),e.hasM&&(i.hasM=e.hasM));const r=i.points&&i.points[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new Kt,i=this.hasZ,r=this.hasM,n=i?3:2,s=e[0],o=BU(Math.min),a=BU(Math.max);let l,u,c,d,[f,m]=s,[g,v]=s;for(let b=0,x=e.length;b<x;b++){const S=e[b],[T,_]=S;if(f=o(f,T),m=o(m,_),g=a(g,T),v=a(v,_),i&&S.length>2){const M=S[2];l=o(l,M),c=a(c,M)}if(r&&S.length>n){const M=S[n];u=o(u,M),d=a(d,M)}}return t.xmin=f,t.ymin=m,t.xmax=g,t.ymax=v,t.spatialReference=this.spatialReference,i?(t.zmin=l,t.zmax=c):(t.zmin=void 0,t.zmax=void 0),r?(t.mmin=u,t.mmax=d):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=Le(this.points)}addPoint(e){return Sb(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:Le(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new ck(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],i={x:t[0],y:t[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=t[2],r=3),this.hasM&&(i.m=t[r]),new At(i)}removePoint(e){if(!this._validateInputs(e))return null;const t=new At(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(Sb(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};h([p({readOnly:!0})],Yp.prototype,"cache",null),h([p()],Yp.prototype,"extent",null),h([p({type:[[Number]],json:{write:{isRequired:!0}}})],Yp.prototype,"points",void 0),h([it("points")],Yp.prototype,"writePoints",null),Yp=ck=h([ce("esri.geometry.Multipoint")],Yp),Yp.prototype.toJSON.isDefaultToJSON=!0;const fw=Yp;function G1e(e,t){const i=t[0]-e[0],r=t[1]-e[1];if(e.length>2&&t.length>2){const n=e[2]-t[2];return Math.sqrt(i*i+r*r+n*n)}return Math.sqrt(i*i+r*r)}function q1e(e,t,i){const r=e[0]+i*(t[0]-e[0]),n=e[1]+i*(t[1]-e[1]);return e.length>2&&t.length>2?[r,n,e[2]+i*(t[2]-e[2])]:[r,n]}function H1e(e,t,i,r){const[n,s]=t,[o,a]=i[r],[l,u]=i[r+1],c=l-o,d=u-a,f=c*c+d*d,m=(n-o)*c+(s-a)*d,g=Math.min(1,Math.max(0,m/f));return e[0]=o+c*g,e[1]=a+d*g,e}function cst(e,t,i){const r=i.rings;let n,s,o=!1,a=1/0;for(let l=0;l<r.length;l++){const u=r[l];for(let c=0,d=u.length-1;c<u.length;d=c++)n=u[c],s=u[d],n[1]>t!=s[1]>t&&e<(s[0]-n[0])*(t-n[1])/(s[1]-n[1])+n[0]&&(o=!o),a=Math.min(a,W1e(e,t,n,s))}return a===0?0:(o?1:-1)*Math.sqrt(a)}function W1e(e,t,i,r){let n=i[0],s=i[1],o=r[0]-n,a=r[1]-s;if(o!==0||a!==0){const l=((e-n)*o+(t-s)*a)/(o*o+a*a);l>1?(n=r[0],s=r[1]):l>0&&(n+=o*l,s+=a*l)}return o=e-n,a=t-s,o*o+a*a}function J1e(e,t){return q1e(e,t,.5)}function _Q(e,t,i){const r=e.length;let n=0,s=0,o=0;for(let a=0;a<r;a++){const l=e[a],u=e[(a+1)%r];let c=2;n+=l[0]*u[1]-u[0]*l[1],l.length>2&&u.length>2&&i&&(s+=l[0]*u[2]-u[0]*l[2],c=3),l.length>c&&u.length>c&&t&&(o+=l[0]*u[c]-u[0]*l[c])}return n<=0&&s<=0&&o<=0}function Z1e(e){const t=e.length;return t>2&&D5(e[0],e[t-1])}function hst(e){if("rings"in e&&(Y1e(e),e.rings.length>0&&!_Q(e.rings[0],e.hasM??!1,e.hasZ??!1)))for(const t of e.rings)t.reverse()}function Y1e(e){if("rings"in e)for(const t of e.rings)Z1e(t)||t.push(t[0].slice())}function xQ(e){if(!e||e.length<3)return 0;let t=0;const i=e.length-1;for(let r=0;r<i;r++)t+=(e[r][0]-e[r+1][0])*(e[r][1]+e[r+1][1]);return t+=(e[i][0]-e[0][0])*(e[i][1]+e[0][1]),-.5*t}function dst(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function K1e(e){return e?SQ(e.rings,e.hasZ??!1):null}function SQ(e,t){if(!e||!e.length)return null;const i=[],r=[],n=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,o=e.length;s<o;s++){const a=Q1e(e[s],t,n);a&&r.push(a)}if(r.sort((s,o)=>{let a=s[2]-o[2];return a===0&&t&&(a=s[4]-o[4]),a}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],t&&(i[2]=r[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||t&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){const s=e[0]&&e[0].length?X1e(e[0],t):null;if(!s)return null;i[0]=s[0],i[1]=s[1],t&&s.length>2&&(i[2]=s[2])}return i}function Q1e(e,t,i){let r=0,n=0,s=0,o=0,a=0;const l=e.length?e[0][0]:0,u=e.length?e[0][1]:0,c=e.length&&t?e[0][2]:0;for(let f=0;f<e.length;f++){const m=e[f],g=e[(f+1)%e.length],[v,b,x]=m,S=v-l,T=b-u,[_,M,I]=g,$=_-l,L=M-u,B=S*L-$*T;if(o+=B,r+=(S+$)*B,n+=(T+L)*B,t&&m.length>2&&g.length>2){const z=x-c,W=I-c,J=S*W-$*z;s+=(z+W)*J,a+=J}v<i[0]&&(i[0]=v),v>i[1]&&(i[1]=v),b<i[2]&&(i[2]=b),b>i[3]&&(i[3]=b),t&&(x<i[4]&&(i[4]=x),x>i[5]&&(i[5]=x))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const d=[r/(6*o)+l,n/(6*o)+u,o];return t&&(i[4]===i[5]||a===0?(d[3]=(i[4]+i[5])/2,d[4]=0):(d[3]=s/(6*a)+c,d[4]=a)),d}function X1e(e,t){const i=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let n=0,s=0,o=0,a=0;for(let l=0,u=e.length;l<u-1;l++){const c=e[l],d=e[l+1];if(c&&d){i[0]=c[0],i[1]=c[1],r[0]=d[0],r[1]=d[1],t&&c.length>2&&d.length>2&&(i[2]=c[2],r[2]=d[2]);const f=G1e(i,r);if(f){n+=f;const m=J1e(c,d);s+=f*m[0],o+=f*m[1],t&&m.length>2&&(a+=f*m[2])}}}return n>0?t?[s/n,o/n,a/n]:[s/n,o/n]:e.length?e[0]:null}const eve=1e-6;function pst(e){if(!e||!e.rings)return null;const{rings:t}=e;let i=0;for(let s=0;s<t.length;s++)i+=xQ(t[s]);if(i<eve)return SQ(t,!1);const r=[0,0],n=t[0][0];for(let s=0;s<t.length;s++)ive(r,n,t[s]);return r[0]*=1/i,r[1]*=1/i,r[0]+=n[0],r[1]+=n[1],r}const tve=1/3;function ive(e,t,i){if(!e||!i||i.length<3)return null;const r=i[0],n=[0,0],s=[i[1][0]-r[0],i[1][1]-r[1]];let o;for(let u=2;u<i.length;u++)n[0]=i[u][0]-r[0],n[1]=i[u][1]-r[1],o=.5*tve*(n[0]*s[1]-n[1]*s[0]),e[0]+=o*(s[0]+n[0]),e[1]+=o*(s[1]+n[1]),s[0]=n[0],s[1]=n[1];const a=xQ(i),l=[r[0],r[1]];return l[0]-=t[0],l[1]-=t[1],l[0]*=a,l[1]*=a,e[0]+=l[0],e[1]+=l[1],e}function EQ(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function MQ(e){return e.points!==void 0}function IQ(e){return e.x!==void 0&&e.y!==void 0}function TQ(e){return e.paths!==void 0}function AQ(e){return e.rings!==void 0}function CQ(e){function t(i,r){return i==null?r:r==null?i:e(i,r)}return t}const jf=CQ(Math.min),Uf=CQ(Math.max);function fst(e,t){return TQ(t)?Eb(e,t.paths,!1,!1):AQ(t)?Eb(e,t.rings,!1,!1):MQ(t)?fF(e,t.points,!1,!1,!1,!1):EQ(t)?$Q(e,t):(IQ(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function mst(e,t){return TQ(t)?Eb(e,t.paths,!0,!1):AQ(t)?Eb(e,t.rings,!0,!1):MQ(t)?fF(e,t.points,!0,!1,!0,!1):EQ(t)?$Q(e,t,!0,!1,!0,!1):(IQ(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function Eb(e,t,i,r){const n=i?3:2;if(!t.length||!t[0].length)return null;let s,o,a,l,[u,c]=t[0][0],[d,f]=t[0][0];for(let m=0;m<t.length;m++){const g=t[m];for(let v=0;v<g.length;v++){const b=g[v],[x,S]=b;if(u=jf(u,x),c=jf(c,S),d=Uf(d,x),f=Uf(f,S),i&&b.length>2){const T=b[2];s=jf(s,T),o=Uf(o,T)}if(r&&b.length>n){const T=b[n];a=jf(s,T),l=Uf(o,T)}}}return i?r?(e[0]=u,e[1]=c,e[2]=s,e[3]=a,e[4]=d,e[5]=f,e[6]=o,e[7]=l,e.length=8,e):(e[0]=u,e[1]=c,e[2]=s,e[3]=d,e[4]=f,e[5]=o,e.length=6,e):r?(e[0]=u,e[1]=c,e[2]=a,e[3]=d,e[4]=f,e[5]=l,e.length=6,e):(e[0]=u,e[1]=c,e[2]=d,e[3]=f,e.length=4,e)}function $Q(e,t,i,r,n,s){const o=t.xmin,a=t.xmax,l=t.ymin,u=t.ymax;let c=t.zmin,d=t.zmax,f=t.mmin,m=t.mmax;return n?(c=c||0,d=d||0,s?(f=f||0,m=m||0,e[0]=o,e[1]=l,e[2]=c,e[3]=f,e[4]=a,e[5]=u,e[6]=d,e[7]=m,e):(e[0]=o,e[1]=l,e[2]=c,e[3]=a,e[4]=u,e[5]=d,e)):s?(f=f||0,m=m||0,e[0]=o,e[1]=l,e[2]=f,e[3]=a,e[4]=u,e[5]=m,e):(e[0]=o,e[1]=l,e[2]=a,e[3]=u,e)}function fF(e,t,i,r,n,s){const o=i?3:2,a=r&&s,l=i&&n;if(!t.length||!t[0].length)return null;let u,c,d,f,[m,g]=t[0],[v,b]=t[0];for(let x=0;x<t.length;x++){const S=t[x],[T,_]=S;if(m=jf(m,T),g=jf(g,_),v=Uf(v,T),b=Uf(b,_),l&&S.length>2){const M=S[2];u=jf(u,M),c=Uf(c,M)}if(a&&S.length>o){const M=S[o];d=jf(u,M),f=Uf(c,M)}}return n?(u=u||0,c=c||0,s?(d=d||0,f=f||0,e[0]=m,e[1]=g,e[2]=u,e[3]=d,e[4]=v,e[5]=b,e[6]=c,e[7]=f,e):(e[0]=m,e[1]=g,e[2]=u,e[3]=v,e[4]=b,e[5]=c,e)):s?(d=d||0,f=f||0,e[0]=m,e[1]=g,e[2]=d,e[3]=v,e[4]=b,e[5]=f,e):(e[0]=m,e[1]=g,e[2]=v,e[3]=b,e)}function rve(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function nve(e){return e.points!==void 0}function sve(e){return e.x!==void 0&&e.y!==void 0}function ove(e){return e.paths!==void 0}function ave(e){return e.rings!==void 0}const mF=[];function OQ(e,t,i,r){return{xmin:e,ymin:t,xmax:i,ymax:r}}function RQ(e,t,i,r,n,s){return{xmin:e,ymin:t,zmin:i,xmax:r,ymax:n,zmax:s}}function kQ(e,t,i,r,n,s){return{xmin:e,ymin:t,mmin:i,xmax:r,ymax:n,mmax:s}}function LQ(e,t,i,r,n,s,o,a){return{xmin:e,ymin:t,zmin:i,mmin:r,xmax:n,ymax:s,zmax:o,mmax:a}}function yF(e,t=!1,i=!1){return t?i?LQ(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):RQ(e[0],e[1],e[2],e[3],e[4],e[5]):i?kQ(e[0],e[1],e[2],e[3],e[4],e[5]):OQ(e[0],e[1],e[2],e[3])}function yst(e){return e?rve(e)?e:sve(e)?uve(e):ave(e)?PQ(e):ove(e)?NQ(e):nve(e)?lve(e):null:null}function lve(e){const{hasZ:t,hasM:i,points:r}=e;return yF(fF(mF,r,t??!1,i??!1),t,i)}function uve(e){const{x:t,y:i,z:r,m:n}=e,s=n!=null;return r!=null?s?LQ(t,i,r,n,t,i,r,n):RQ(t,i,r,t,i,r):s?kQ(t,i,n,t,i,n):OQ(t,i,t,i)}function PQ(e){const{hasZ:t,hasM:i,rings:r}=e,n=Eb(mF,r,t??!1,i??!1);return n?yF(n,t,i):null}function NQ(e){const{hasZ:t,hasM:i,paths:r}=e,n=Eb(mF,r,t??!1,i??!1);return n?yF(n,t,i):null}var uI;function zU(e){return!Array.isArray(e[0])}let Nc=uI=class extends pp{static fromExtent(e){const t=e.clone().normalize(),i=e.spatialReference;let r=!1,n=!1;for(const o of t)o.hasZ&&(r=!0),o.hasM&&(n=!0);const s={rings:t.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(r&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let u=0;u<a.length;u++)a[u].push(l)}if(n&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let u=0;u<a.length;u++)a[u].push(l)}return a}),spatialReference:i};return r&&(s.hasZ=!0),n&&(s.hasM=!0),new uI(s)}constructor(...e){super(...e),this.rings=[],this.type="polygon"}normalizeCtorArgs(e,t){let i,r,n=null,s=null;return e&&!Array.isArray(e)?(n=e.rings?e.rings:null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),i=e.hasZ,r=e.hasM):n=e,n=n||[],t=t||Et.WGS84,n.length&&n[0]&&n[0][0]!=null&&typeof n[0][0]=="number"&&(n=[n]),s=n[0]&&n[0][0],s&&(i===void 0&&r===void 0?(i=s.length>2,r=s.length>3):i===void 0?i=r?s.length>3:s.length>2:r===void 0&&(r=i?s.length>3:s.length>2)),{rings:n,spatialReference:t,hasZ:i,hasM:r}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=K1e(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new At;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=PQ(this);if(!t)return null;const i=new Kt(t);return i.spatialReference=e,i}get isSelfIntersecting(){return jge(this.rings)}writeRings(e,t){t.rings=Le(this.rings)}addRing(e){if(!e)return;const t=this.rings,i=t.length;if(zU(e)){const r=[];for(let n=0,s=e.length;n<s;n++)r[n]=e[n].toArray();t[i]=r}else t[i]=e.concat();return this.notifyChange("rings"),this}clone(){const e=new uI;return e.spatialReference=this.spatialReference,e.rings=Le(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(Re(e))return!1;const t=this.spatialReference,i=e.spatialReference;if(ee(t)!==ee(i)||ee(t)&&ee(i)&&!t.equals(i)||this.rings.length!==e.rings.length)return!1;const r=([n,s,o,a],[l,u,c,d])=>n===l&&s===u&&(o==null&&c==null||o===c)&&(a==null&&d==null||a===d);for(let n=0;n<this.rings.length;n++){const s=this.rings[n],o=e.rings[n];if(!D5(s,o,r))return!1}return!0}contains(e){if(!e)return!1;const t=Q5(e,this.spatialReference);return NK(this,ee(t)?t:e)}isClockwise(e){let t;return t=zU(e)?e.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):e,_Q(t,this.hasM,this.hasZ)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.rings[e][t],r=this.hasZ,n=this.hasM;return r&&!n?new At(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new At(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new At(i[0],i[1],i[2],i[3],this.spatialReference):new At(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(Sb(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e].splice(t,0,i),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new At(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],i=this.spatialReference,r=t.map(n=>new At(n,i));return this.notifyChange("rings"),r}setPoint(e,t,i){return this._validateInputs(e,t)?(Sb(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e][t]=i,this.notifyChange("rings"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const r=this.rings[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};h([p({readOnly:!0})],Nc.prototype,"cache",null),h([p({readOnly:!0})],Nc.prototype,"centroid",null),h([p({readOnly:!0})],Nc.prototype,"extent",null),h([p({readOnly:!0})],Nc.prototype,"isSelfIntersecting",null),h([p({type:[[[Number]]],json:{write:{isRequired:!0}}})],Nc.prototype,"rings",void 0),h([it("rings")],Nc.prototype,"writeRings",null),Nc=uI=h([ce("esri.geometry.Polygon")],Nc),Nc.prototype.toJSON.isDefaultToJSON=!0;const Aa=Nc;var hk;function cve(e){return!Array.isArray(e[0])}let Kp=hk=class extends pp{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,t){let i,r,n=null,s=null;return e&&!Array.isArray(e)?(n=e.paths?e.paths:null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),i=e.hasZ,r=e.hasM):n=e,n=n||[],t=t||Et.WGS84,n.length&&n[0]&&n[0][0]!=null&&typeof n[0][0]=="number"&&(n=[n]),s=n[0]&&n[0][0],s&&(i===void 0&&r===void 0?(i=s.length>2,r=!1):i===void 0?i=!r&&s.length>3:r===void 0&&(r=!i&&s.length>3)),{paths:n,spatialReference:t,hasZ:i,hasM:r}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=NQ(this);if(!t)return null;const i=new Kt(t);return i.spatialReference=e,i}writePaths(e,t){t.paths=Le(this.paths)}addPath(e){if(!e)return;const t=this.paths,i=t.length;if(cve(e)){const r=[];for(let n=0,s=e.length;n<s;n++)r[n]=e[n].toArray();t[i]=r}else t[i]=e.concat();return this.notifyChange("paths"),this}clone(){const e=new hk;return e.spatialReference=this.spatialReference,e.paths=Le(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.paths[e][t],r=this.hasZ,n=this.hasM;return r&&!n?new At(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new At(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new At(i[0],i[1],i[2],i[3],this.spatialReference):new At(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(Sb(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e].splice(t,0,i),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],i=this.spatialReference,r=t.map(n=>new At(n,i));return this.notifyChange("paths"),r}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new At(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(e,t,i){return this._validateInputs(e,t)?(Sb(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e][t]=i,this.notifyChange("paths"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const r=this.paths[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};h([p({readOnly:!0})],Kp.prototype,"cache",null),h([p({readOnly:!0})],Kp.prototype,"extent",null),h([p({type:[[[Number]]],json:{write:{isRequired:!0}}})],Kp.prototype,"paths",void 0),h([it("paths")],Kp.prototype,"writePaths",null),Kp=hk=h([ce("esri.geometry.Polyline")],Kp),Kp.prototype.toJSON.isDefaultToJSON=!0;const fa=Kp;function FQ(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function gF(e){return e.points!==void 0}function vF(e){return e.x!==void 0&&e.y!==void 0}function bF(e){return e.paths!==void 0}function Wg(e){return e.rings!==void 0}function Il(e){return Re(e)?null:e instanceof pp?e:vF(e)?At.fromJSON(e):bF(e)?fa.fromJSON(e):Wg(e)?Aa.fromJSON(e):gF(e)?fw.fromJSON(e):FQ(e)?Kt.fromJSON(e):null}function bc(e){return e?vF(e)?"esriGeometryPoint":bF(e)?"esriGeometryPolyline":Wg(e)?"esriGeometryPolygon":FQ(e)?"esriGeometryEnvelope":gF(e)?"esriGeometryMultipoint":null:null}const hve={esriGeometryPoint:At,esriGeometryPolyline:fa,esriGeometryPolygon:Aa,esriGeometryEnvelope:Kt,esriGeometryMultipoint:fw};function dve(e){return e&&hve[e]||null}const cA=_n()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),GU=_n()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),wc={base:pp,key:"type",typeMap:{extent:Kt,multipoint:fw,point:At,polyline:fa,polygon:Aa}};$h(wc);const xr=e=>{let t=class extends e{clone(){const i=Uo(zn(this),"unable to clone instance of non-accessor class"),r=i.metadatas,n=i.store,s={},o=new Map;for(const l in r){const u=r[l],c=n?.originOf(l),d=u.clonable;if(u.readOnly||d===!1||c!==xt.USER&&c!==xt.DEFAULTS&&c!==xt.WEB_MAP&&c!==xt.WEB_SCENE)continue;const f=this[l];let m=null;m=typeof d=="function"?d(f):d==="reference"?f:OR(f),f!=null&&m==null||(c===xt.DEFAULTS?o.set(l,m):s[l]=m)}const a=new(Object.getPrototypeOf(this)).constructor(s);if(o.size){const l=zn(a)?.store;if(l)for(const[u,c]of o)l.set(u,c,xt.DEFAULTS)}return a}};return t=h([ce("esri.core.Clonable")],t),t};let qU=class extends xr(Lt){};qU=h([ce("esri.core.Clonable")],qU);var Mb;function pve(e,t){switch(e.type){case"range":{const i="range"in e?e.range[0]:e.minValue,r="range"in e?e.range[1]:e.maxValue;if(i!=null&&+t<i||r!=null&&+t>r)return Mb.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(e.codedValues==null||e.codedValues.every(i=>i==null||i.code!==t))return Mb.INVALID_CODED_VALUE}return null}(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(Mb||(Mb={}));const fve=et.getLogger("esri.support.arcadeOnDemand");let p$;function Xd(){return p$||(p$=(async()=>{const e=await De(()=>import("./arcadeUtils-c52e7f72.js").then(t=>t.ax),["./arcadeUtils-c52e7f72.js","./preload-helper-388ac9d5.js","./arcadeTimeUtils-b303a482.js","./executionError-c1d13a98.js","./number-1809ae92.js"],import.meta.url);return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),p$}const vst=(e,t,i)=>wF.create(e,t,i,null,["$feature"]),bst=(e,t,i)=>wF.create(e,t,i,null,["$feature","$view"]),mve=(e,t,i,r)=>wF.create(e,t,i,r,["$feature","$view"]);let wF=class DQ{constructor(t,i,r,n,s,o,a){this.script=t,this.evaluate=n;const l=Array.isArray(o)?o:o.fields;this.fields=l,this._syntaxTree=r,this._arcade=i,this._arcadeFeature=s,this._spatialReference=a,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,i,r,n,s,o){const{arcade:a,Feature:l,Dictionary:u}=await Xd(),c=Et.fromJSON(i);let d;try{d=a.parseScript(t,o)}catch(L){return fve.error(new Ce("arcade-bad-expression","Failed to parse arcade script",{script:t,error:L})),null}const f=s.reduce((L,B)=>({...L,[B]:null}),{});let m=null;ee(n)&&(m=new u(n),m.immutable=!0,f.$config=null);const g=a.scriptUsesGeometryEngine(d),v=g&&a.enableGeometrySupport(),b=a.scriptUsesFeatureSet(d)&&a.enableFeatureSetSupport(),x=a.scriptIsAsync(d),S=x&&a.enableAsyncSupport(),T={vars:f,spatialReference:c,useAsync:!!S};await Promise.all([v,b,S]);const _=new Set;await a.loadDependentModules(_,d,null,x,g);const M=new u;M.immutable=!1,M.setField("scale",0);const I=a.compileScript(d,T),$=L=>("$view"in L&&L.$view&&(M.setField("scale",typeof L.$view=="object"?L.$view.scale:void 0),L.$view=M),m&&(L.$config=m),I({vars:L,spatialReference:c}));return new DQ(t,a,d,$,new l,r,c)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const yve=/^([0-9])/,gve=/[^a-z0-9_\u0080-\uffff]/gi,vve=/_{2,}/g,bve=/^_/,wve=/_$/;function _ve(e){return e==null?null:e.trim().replace(gve,"_").replace(vve,"_").replace(bve,"").replace(wve,"").replace(yve,"F$1")||null}const xve=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],Sve=["field","normalizationField"];function HU(e,t){if(e!=null&&t!=null){for(const i of Array.isArray(e)?e:[e])if(WU(xve,i,t),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)WU(Sve,r,t)}}function WU(e,t,i){if(e)for(const r of e){const n=ZS(r,t),s=n&&typeof n!="function"&&i.get(n);s&&_o(r,s.name,t)}}function jQ(e,t){if(e!=null&&t?.fields?.length)if("startField"in e){const i=t.get(e.startField),r=t.get(e.endField);e.startField=i?.name??null,e.endField=r?.name??null}else{const i=t.get(e.startTimeField),r=t.get(e.endTimeField);e.startTimeField=i?.name??null,e.endTimeField=r?.name??null}}const f$=new Set;function UQ(e,t){return e&&t?(f$.clear(),Zx(f$,e,t),Array.from(f$).sort()):[]}function Zx(e,t,i){if(i)if(t?.fields?.length)if(i.includes("*"))for(const{name:r}of t.fields)e.add(r);else for(const r of i)vl(e,t,r);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const r of i)r!=null&&e.add(r)}}function vl(e,t,i){if(typeof i=="string")if(t){const r=t.get(i);r&&e.add(r.name)}else e.add(i)}function wst(e,t){return Re(t)||Re(e)?[]:t.includes("*")?(e.fields??[]).map(i=>i.name):t}async function Ho(e,t,i){if(!i)return;const{arcadeUtils:r}=await Xd(),n=r.extractFieldNames(i,t?.fields?.map(s=>s.name));for(const s of n)vl(e,t,s)}async function VQ(e,t,i){if(i&&i!=="1=1"){const r=(await De(()=>import("./WhereClause-bc6a26d1.js").then(n=>n.W),["./WhereClause-bc6a26d1.js","./executionError-c1d13a98.js"],import.meta.url)).WhereClause.create(i,t);if(!r.isStandardized)throw new Ce("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});Zx(e,t,r.fieldNames)}}function Eve({displayField:e,fields:t}){return e||(t&&t.length?m$(t,"name-or-title")||m$(t,"unique-identifier")||m$(t,"type-or-category")||Mve(t):null)}function Mve(e){for(const t of e){if(!t||!t.name)continue;const i=t.name.toLowerCase();if(i.includes("name")||i.includes("title"))return t.name}return null}function m$(e,t){for(const i of e)if(i&&i.valueType&&i.valueType===t)return i.name;return null}async function _st(e,t){if(!t)return;const i=t.elevationInfo?.featureExpressionInfo;return i?i.collectRequiredFields(e,t.fieldsIndex):void 0}function Ive(e,t,i){i.onStatisticExpression?Ho(e,t,i.onStatisticExpression.expression):e.add(i.onStatisticField)}async function xst(e,t,i){if(!t||!i||!("fields"in i))return;const r=[],n=i.popupTemplate;r.push(Tve(e,t,n)),i.fields&&r.push(...i.fields.map(async s=>Ive(e,t.fieldsIndex,s))),await Promise.all(r)}async function Tve(e,t,i){const r=[];i?.expressionInfos&&r.push(...i.expressionInfos.map(s=>Ho(e,t.fieldsIndex,s.expression)));const n=i?.content;if(Array.isArray(n))for(const s of n)s.type==="expression"&&s.expressionInfo&&r.push(Ho(e,t.fieldsIndex,s.expressionInfo.expression));await Promise.all(r)}async function Sst(e,t,i){t&&(t.timeInfo&&ee(i)&&i.timeExtent&&Zx(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&Zx(e,t.fieldsIndex,[t.floorInfo.floorField]),ee(i)&&ee(i.where)&&await VQ(e,t.fieldsIndex,i.where))}async function Est(e,t,i){t&&i&&await Promise.all(i.map(r=>Ave(e,t,r)))}async function Ave(e,t,i){t&&i&&(i.valueExpression?await Ho(e,t.fieldsIndex,i.valueExpression):i.field&&vl(e,t.fieldsIndex,i.field))}function Mst(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?UQ(e.fieldsIndex,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}async function Ist(e,t){const{labelingInfo:i,fieldsIndex:r}=t;i&&i.length&&await Promise.all(i.map(n=>Cve(e,r,n)))}async function Cve(e,t,i){if(!i)return;const r=i.getLabelExpression(),n=i.where;if(r.type==="arcade")await Ho(e,t,r.expression);else{const s=r.expression.match(/{[^}]*}/g);s&&s.forEach(o=>{vl(e,t,o.slice(1,-1))})}await VQ(e,t,n)}function $ve(e){const t=e.defaultValue;return t!==void 0&&GQ(e,t)?t:e.nullable?null:void 0}function BQ(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function Ove(e){return e===null||BQ(e)}const _F="isInteger"in Number?Number.isInteger:e=>typeof e=="number"&&isFinite(e)&&Math.floor(e)===e;function Rve(e){return e===null||_F(e)}function zQ(e){return e!=null&&typeof e=="string"}function kve(e){return e===null||zQ(e)}function Lve(){return!0}function GQ(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=e.nullable?Rve:_F;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?Ove:BQ;break;case"string":case"esriFieldTypeString":i=e.nullable?kve:zQ;break;default:i=Lve}return arguments.length===1?i:i(t)}const Pve=["integer","small-integer","single","double"],Nve=new Set([...Pve,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function xF(e){return e!=null&&Nve.has(e.type)}function Tst(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}var hA,dA;function Ast(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function Cst(e,t){return e==null||e.nullable&&t===null?null:xF(e)&&!Fve(e.type,Number(t))?hA.OUT_OF_RANGE:GQ(e,t)?e.domain?pve(e.domain,t):null:dA.INVALID_TYPE}function Fve(e,t){const i=typeof e=="string"?qQ(e):e;if(!i)return!1;const r=i.min,n=i.max;return i.isInteger?_F(t)&&t>=r&&t<=n:t>=r&&t<=n}function qQ(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return Dve;case"esriFieldTypeInteger":case"integer":return jve;case"esriFieldTypeSingle":case"single":return Uve;case"esriFieldTypeDouble":case"double":return Vve}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(hA||(hA={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(dA||(dA={}));const Dve={min:-32768,max:32767,isInteger:!0},jve={min:-2147483648,max:2147483647,isInteger:!0},Uve={min:-34e37,max:12e37,isInteger:!1},Vve={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function $st(e,t,i){switch(e){case Mb.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Mb.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case dA.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case hA.OUT_OF_RANGE:{const{min:r,max:n}=qQ(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${r} to ${n}`}}}function Bve(e,t){return!zve(e,t,null)}function zve(e,t,i){if(!t||!t.attributes||!e){if(ee(i))for(const s of e??[])i.add(s);return!0}const r=t.attributes;let n=!1;for(const s of e)if(!(s in r)){if(n=!0,!ee(i))break;i.add(s)}return n}function HQ(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}let cI=class extends Je{constructor(t){super(t),this.type=null}};h([p({type:["attachments","custom","fields","media","text","expression","relationship"],readOnly:!0,json:{read:!1,write:!0}})],cI.prototype,"type",void 0),cI=h([ce("esri.popup.content.Content")],cI);const $m=cI;var dk;let _y=dk=class extends $m{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new dk({description:this.description,displayType:this.displayType,title:this.title})}};h([p({type:String,json:{write:!0}})],_y.prototype,"description",void 0),h([p({type:["auto","preview","list"],json:{write:!0}})],_y.prototype,"displayType",void 0),h([p({type:String,json:{write:!0}})],_y.prototype,"title",void 0),h([p({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],_y.prototype,"type",void 0),_y=dk=h([ce("esri.popup.content.AttachmentsContent")],_y);const Yx=_y;var pk;let xy=pk=class extends $m{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new pk({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?Le(this.outFields):null})}};h([p()],xy.prototype,"creator",void 0),h([p()],xy.prototype,"destroyer",void 0),h([p()],xy.prototype,"outFields",void 0),h([p({type:["custom"],readOnly:!0})],xy.prototype,"type",void 0),xy=pk=h([ce("esri.popup.content.CustomContent")],xy);const Gve=xy;var fk;let N1=fk=class extends Je{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new fk({title:this.title,expression:this.expression})}};h([p({type:String,json:{write:!0}})],N1.prototype,"title",void 0),h([p({type:String,json:{write:!0}})],N1.prototype,"expression",void 0),h([p({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],N1.prototype,"returnType",void 0),N1=fk=h([ce("esri.popup.ElementExpressionInfo")],N1);const WQ=N1;var mk;let G_=mk=class extends $m{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){return new mk({expressionInfo:this.expressionInfo?.clone()})}};h([p({type:WQ,json:{write:!0}})],G_.prototype,"expressionInfo",void 0),h([p({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],G_.prototype,"type",void 0),G_=mk=h([ce("esri.popup.content.ExpressionContent")],G_);const SF=G_;function Ft(e,t={}){const i=e instanceof ti?e:new ti(e,t),r={type:t?.ignoreUnknown??1?i.apiValues:String,json:{type:i.jsonValues,read:!t?.readOnly&&{reader:i.read},write:{writer:i.write}}};return t?.readOnly!==void 0&&(r.readOnly=!!t.readOnly),t?.default!==void 0&&(r.json.default=t.default),t?.name!==void 0&&(r.json.name=t.name),t?.nonNullable!==void 0&&(r.nonNullable=t.nonNullable),p(r)}const Kx=_n()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});Kx.toJSON.bind(Kx);Kx.fromJSON.bind(Kx);const Cc={year:"numeric",month:"numeric",day:"numeric"},r_={year:"numeric",month:"long",day:"numeric"},n_={year:"numeric",month:"short",day:"numeric"},s_={year:"numeric",month:"long",weekday:"long",day:"numeric"},Vl={hour:"numeric",minute:"numeric"},Eu={...Vl,second:"numeric"},EF={"short-date":Cc,"short-date-short-time":{...Cc,...Vl},"short-date-short-time-24":{...Cc,...Vl,hour12:!1},"short-date-long-time":{...Cc,...Eu},"short-date-long-time-24":{...Cc,...Eu,hour12:!1},"short-date-le":Cc,"short-date-le-short-time":{...Cc,...Vl},"short-date-le-short-time-24":{...Cc,...Vl,hour12:!1},"short-date-le-long-time":{...Cc,...Eu},"short-date-le-long-time-24":{...Cc,...Eu,hour12:!1},"long-month-day-year":r_,"long-month-day-year-short-time":{...r_,...Vl},"long-month-day-year-short-time-24":{...r_,...Vl,hour12:!1},"long-month-day-year-long-time":{...r_,...Eu},"long-month-day-year-long-time-24":{...r_,...Eu,hour12:!1},"day-short-month-year":n_,"day-short-month-year-short-time":{...n_,...Vl},"day-short-month-year-short-time-24":{...n_,...Vl,hour12:!1},"day-short-month-year-long-time":{...n_,...Eu},"day-short-month-year-long-time-24":{...n_,...Eu,hour12:!1},"long-date":s_,"long-date-short-time":{...s_,...Vl},"long-date-short-time-24":{...s_,...Vl,hour12:!1},"long-date-long-time":{...s_,...Eu},"long-date-long-time-24":{...s_,...Eu,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Vl,"long-time":Eu},Qx=_n()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});Qx.apiValues;Qx.toJSON.bind(Qx);Qx.fromJSON.bind(Qx);const qve={ar:"ar-u-nu-latn-ca-gregory"};let yk=new WeakMap,JQ=EF["short-date-short-time"];function Hve(e){const t=e||JQ;let i=yk.get(t);if(!i){const r=au(),n=qve[au()]||r;i=new Intl.DateTimeFormat(n,t),yk.set(t,i)}return i}function MF(e){return e?EF[e]:null}function ep(e,t){return Hve(t).format(e)}oF(()=>{yk=new WeakMap,JQ=EF["short-date-short-time"]});const Wve={ar:"ar-u-nu-latn"};let hI=new WeakMap,ZQ={};function Jve(e){const t=e||ZQ;if(!hI.has(t)){const i=au(),r=Wve[au()]||i;hI.set(t,new Intl.NumberFormat(r,e))}return hI.get(t)}function YQ(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function hm(e,t){return e===-0&&(e=0),Jve(t).format(e)}oF(()=>{hI=new WeakMap,ZQ={}});var gk;let Sy=gk=class extends Je{constructor(e){super(e),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null}clone(){return new gk({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(e){return this.dateFormat?ep(e,{...MF(this.dateFormat),...this.dateTimeFormatOptions}):hm(e,YQ(this))}formatRasterPixelValue(e){if(e.includes("-"))return e;let t,i;return e.trim().includes(",")?(t=",",i=t+" ",this._formatDelimitedString(e,t,i,this)):e.trim().includes(";")?(t=";",i=t+" ",this._formatDelimitedString(e,t,i,this)):e.trim().includes(" ")?(t=i=" ",this._formatDelimitedString(e,t,i,this)):this.format(Number(e))}_formatDelimitedString(e,t,i,r){return e&&t&&i&&r?e.trim().split(t).map(n=>this.format(Number(n))).join(i):e}};h([Ft(Kx)],Sy.prototype,"dateFormat",void 0),h([p({type:Object,json:{read:!1}})],Sy.prototype,"dateTimeFormatOptions",void 0),h([p({type:Boolean,json:{write:!0}})],Sy.prototype,"digitSeparator",void 0),h([p({type:wi,json:{write:!0}})],Sy.prototype,"places",void 0),Sy=gk=h([ce("esri.popup.support.FieldInfoFormat")],Sy);const Av=Sy;var vk;let $u=vk=class extends Je{constructor(e){super(e),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new vk({fieldName:this.fieldName,format:this.format?Le(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};h([p({type:String,json:{write:!0}})],$u.prototype,"fieldName",void 0),h([p({type:Av,json:{write:!0}})],$u.prototype,"format",void 0),h([p({type:Boolean,json:{write:!0,default:!1}})],$u.prototype,"isEditable",void 0),h([p({type:String,json:{write:!0}})],$u.prototype,"label",void 0),h([Ft(new ti({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],$u.prototype,"stringFieldOption",void 0),h([p({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],$u.prototype,"statisticType",void 0),h([p({type:String,json:{write:!0}})],$u.prototype,"tooltip",void 0),h([p({type:Boolean,json:{write:!0}})],$u.prototype,"visible",void 0),$u=vk=h([ce("esri.popup.FieldInfo")],$u);const i3=$u;var bk;let sd=bk=class extends $m{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(i=>i.toJSON())}clone(){return new bk(Le({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};h([p({type:Object,json:{write:!0}})],sd.prototype,"attributes",void 0),h([p({type:String,json:{write:!0}})],sd.prototype,"description",void 0),h([p({type:[i3]})],sd.prototype,"fieldInfos",void 0),h([it("fieldInfos")],sd.prototype,"writeFieldInfos",null),h([p({type:String,json:{write:!0}})],sd.prototype,"title",void 0),h([p({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],sd.prototype,"type",void 0),sd=bk=h([ce("esri.popup.content.FieldsContent")],sd);const Ib=sd;let Ey=class extends Je{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};h([p({type:String,json:{write:!0}})],Ey.prototype,"altText",void 0),h([p({type:String,json:{write:!0}})],Ey.prototype,"caption",void 0),h([p({type:String,json:{write:!0}})],Ey.prototype,"title",void 0),h([p({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Ey.prototype,"type",void 0),Ey=h([ce("esri.popup.content.mixins.MediaInfo")],Ey);const IF=Ey;var wk;let F1=wk=class extends Lt{constructor(e){super(e),this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new wk({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};h([p()],F1.prototype,"fieldName",void 0),h([p()],F1.prototype,"tooltip",void 0),h([p()],F1.prototype,"value",void 0),F1=wk=h([ce("esri.popup.content.support.ChartMediaInfoValueSeries")],F1);const KQ=F1;var _k;let My=_k=class extends Je{constructor(e){super(e),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new _k({fields:Le(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};h([p({type:[String],json:{write:!0}})],My.prototype,"fields",void 0),h([p({type:String,json:{write:!0}})],My.prototype,"normalizeField",void 0),h([p({type:[KQ],json:{read:!1}})],My.prototype,"series",void 0),h([p({type:String,json:{write:!0}})],My.prototype,"tooltipField",void 0),My=_k=h([ce("esri.popup.content.support.ChartMediaInfoValue")],My);const Zve=My;let q_=class extends IF{constructor(t){super(t),this.type=null,this.value=null}};h([p({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],q_.prototype,"type",void 0),h([p({type:Zve,json:{write:!0}})],q_.prototype,"value",void 0),q_=h([ce("esri.popup.content.mixins.ChartMediaInfo")],q_);const t4=q_,i4=_n()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var xk;let dI=xk=class extends t4{constructor(e){super(e),this.type="bar-chart"}clone(){return new xk({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};h([p({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:i4.write}})],dI.prototype,"type",void 0),dI=xk=h([ce("esri.popup.content.BarChartMediaInfo")],dI);const QQ=dI;var Sk;let pI=Sk=class extends t4{constructor(e){super(e),this.type="column-chart"}clone(){return new Sk({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};h([p({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:i4.write}})],pI.prototype,"type",void 0),pI=Sk=h([ce("esri.popup.content.ColumnChartMediaInfo")],pI);const XQ=pI;var Ek;let H_=Ek=class extends Je{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new Ek({linkURL:this.linkURL,sourceURL:this.sourceURL})}};h([p({type:String,json:{write:!0}})],H_.prototype,"linkURL",void 0),h([p({type:String,json:{write:!0}})],H_.prototype,"sourceURL",void 0),H_=Ek=h([ce("esri.popup.content.support.ImageMediaInfoValue")],H_);const Yve=H_;var Mk;let D1=Mk=class extends IF{constructor(e){super(e),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new Mk({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};h([p({type:Number,json:{write:!0}})],D1.prototype,"refreshInterval",void 0),h([p({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],D1.prototype,"type",void 0),h([p({type:Yve,json:{write:!0}})],D1.prototype,"value",void 0),D1=Mk=h([ce("esri.popup.content.ImageMediaInfo")],D1);const eX=D1;var Ik;let fI=Ik=class extends t4{constructor(e){super(e),this.type="line-chart"}clone(){return new Ik({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};h([p({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:i4.write}})],fI.prototype,"type",void 0),fI=Ik=h([ce("esri.popup.content.LineChartMediaInfo")],fI);const tX=fI;var Tk;let mI=Tk=class extends t4{constructor(e){super(e),this.type="pie-chart"}clone(){return new Tk({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};h([p({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:i4.write}})],mI.prototype,"type",void 0),mI=Tk=h([ce("esri.popup.content.PieChartMediaInfo")],mI);const iX=mI,rX={base:IF,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":QQ,"column-chart":XQ,"line-chart":tX,"pie-chart":iX,image:eX}};var Ak;let Ou=Ak=class extends $m{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?eX.fromJSON(t):t.type==="barchart"?QQ.fromJSON(t):t.type==="columnchart"?XQ.fromJSON(t):t.type==="linechart"?tX.fromJSON(t):t.type==="piechart"?iX.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(i=>i.toJSON())}clone(){return new Ak(Le({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};h([p()],Ou.prototype,"activeMediaInfoIndex",void 0),h([p({type:Object,json:{write:!0}})],Ou.prototype,"attributes",void 0),h([p({type:String,json:{write:!0}})],Ou.prototype,"description",void 0),h([p({types:[rX]})],Ou.prototype,"mediaInfos",void 0),h([Ye("mediaInfos")],Ou.prototype,"readMediaInfos",null),h([it("mediaInfos")],Ou.prototype,"writeMediaInfos",null),h([p({type:String,json:{write:!0}})],Ou.prototype,"title",void 0),h([p({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],Ou.prototype,"type",void 0),Ou=Ak=h([ce("esri.popup.content.MediaContent")],Ou);const Xx=Ou;var Ck;let W_=Ck=class extends Je{constructor(e){super(e),this.field=null,this.order=null}clone(){return new Ck({field:this.field,order:this.order})}};h([p({type:String,json:{write:!0}})],W_.prototype,"field",void 0),h([p({type:["asc","desc"],json:{write:!0}})],W_.prototype,"order",void 0),W_=Ck=h([ce("esri.popup.support.RelatedRecordsInfoFieldOrder")],W_);const TF=W_;let Fc=class extends xr($m){constructor(t){super(t),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};h([p({type:String,json:{write:!0}})],Fc.prototype,"description",void 0),h([p({type:Number,json:{type:wi,write:!0}})],Fc.prototype,"displayCount",void 0),h([p({type:["list"],json:{write:!0}})],Fc.prototype,"displayType",void 0),h([p({type:[TF],json:{write:!0}})],Fc.prototype,"orderByFields",void 0),h([p({type:Number,json:{type:wi,write:!0}})],Fc.prototype,"relationshipId",void 0),h([p({type:String,json:{write:!0}})],Fc.prototype,"title",void 0),h([p({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],Fc.prototype,"type",void 0),Fc=h([ce("esri.popup.content.RelationshipContent")],Fc);const pA=Fc;var $k;let J_=$k=class extends $m{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new $k({text:this.text})}};h([p({type:String,json:{write:!0}})],J_.prototype,"text",void 0),h([p({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],J_.prototype,"type",void 0),J_=$k=h([ce("esri.popup.content.TextContent")],J_);const Tb=J_,Kve={base:null,key:"type",typeMap:{attachment:Yx,media:Xx,text:Tb,expression:SF,field:Ib,relationship:pA}};var Ok;let Iy=Ok=class extends Je{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new Ok({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};h([p({type:String,json:{write:!0}})],Iy.prototype,"name",void 0),h([p({type:String,json:{write:!0}})],Iy.prototype,"title",void 0),h([p({type:String,json:{write:!0}})],Iy.prototype,"expression",void 0),h([p({type:["string","number"],json:{write:!0}})],Iy.prototype,"returnType",void 0),Iy=Ok=h([ce("esri.popup.ExpressionInfo")],Iy);const nX=Iy;var Rk;let Z_=Rk=class extends Je{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new Rk({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};h([p({type:Boolean,json:{write:!0}})],Z_.prototype,"returnTopmostRaster",void 0),h([p({type:Boolean,json:{write:!0}})],Z_.prototype,"showNoDataRecords",void 0),Z_=Rk=h([ce("esri.popup.LayerOptions")],Z_);const Qve=Z_;var kk;let Y_=kk=class extends Je{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new kk({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?Le(this.orderByFields):null})}};h([p({type:Boolean,json:{write:!0}})],Y_.prototype,"showRelatedRecords",void 0),h([p({type:[TF],json:{write:!0}})],Y_.prototype,"orderByFields",void 0),Y_=kk=h([ce("esri.popup.RelatedRecordsInfo")],Y_);const Xve=Y_;let sX=0;const Om=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+sX++})}};return t=h([ce("esri.core.Identifiable")],t),t},AF=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:sX++})}};return t=h([ce("esri.core.NumericIdentifiable")],t),t};let JU=class extends Om(class{}){};JU=h([ce("esri.core.Identifiable")],JU);var Lk;let Ru=Lk=class extends Om(Lt){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new Lk({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};h([p()],Ru.prototype,"active",void 0),h([p()],Ru.prototype,"className",void 0),h([p()],Ru.prototype,"disabled",void 0),h([p()],Ru.prototype,"id",void 0),h([p()],Ru.prototype,"indicator",void 0),h([p()],Ru.prototype,"title",void 0),h([p()],Ru.prototype,"type",void 0),h([p()],Ru.prototype,"visible",void 0),Ru=Lk=h([ce("esri.support.actions.ActionBase")],Ru);const r4=Ru;var Pk;let yI=Pk=class extends r4{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new Pk({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};h([p()],yI.prototype,"image",void 0),yI=Pk=h([ce("esri.support.Action.ActionButton")],yI);const mw=yI;var Nk;let K_=Nk=class extends r4{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new Nk({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};h([p()],K_.prototype,"image",void 0),h([p()],K_.prototype,"value",void 0),K_=Nk=h([ce("esri.support.Action.ActionToggle")],K_);const oX=K_,ebe="esri.PopupTemplate",tbe=et.getLogger(ebe),o_="relationships/",ZU="expression/",ibe=Pt.ofType({key:"type",defaultKeyValue:"button",base:r4,typeMap:{button:mw,toggle:oX}}),rbe={base:$m,key:"type",typeMap:{media:Xx,custom:Gve,text:Tb,attachments:Yx,fields:Ib,expression:SF,relationship:pA}},nbe=["attachments","fields","media","text","expression","relationship"];let Qn=class extends xr(Je){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(t){return Array.isArray(t)?t.map(i=>$h(rbe,i)):typeof t=="string"||typeof t=="function"||t instanceof HTMLElement||cp(t)?t:(tbe.error("content error","unsupported content value",{value:t}),null)}readContent(t,i){const{popupElements:r}=i;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,r):this._readPopupInfo(i)}writeContent(t,i,r,n){typeof t!="string"?Array.isArray(t)&&(i.popupElements=t.filter(s=>nbe.includes(s.type)).map(s=>s&&s.toJSON(n)),i.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(i):s.type==="media"?this._writeMediaContent(s,i):s.type==="text"?this._writeTextContent(s,i):s.type==="relationship"&&this._writeRelationshipContent(s,i)})):i.description=t}writeFieldInfos(t,i,r,n){const{content:s}=this,o=Array.isArray(s)?s:null;if(t){const a=o?o.filter(u=>u.type==="fields"):[],l=a.length&&a.every(u=>u.fieldInfos?.length);i.fieldInfos=t.filter(Boolean).map(u=>{const c=u.toJSON(n);return l&&(c.visible=!1),c})}if(o)for(const a of o)a.type==="fields"&&this._writeFieldsContent(a,i)}writeLayerOptions(t,i,r,n){i[r]=!t||t.showNoDataRecords===null&&t.returnTopmostRaster===null?null:t.toJSON(n)}writeTitle(t,i){i.title=t||""}async collectRequiredFields(t,i){const r=this.expressionInfos||[];await this._collectExpressionInfoFields(t,i,[...r,...this._getContentExpressionInfos(this.content,r)]),Zx(t,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(t){const i=new Set;return await this.collectRequiredFields(i,t),[...i].sort()}_writeFieldsContent(t,i){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const r=Le(t.fieldInfos);Array.isArray(i.fieldInfos)?r.forEach(n=>{const s=i.fieldInfos.find(o=>o.fieldName.toLowerCase()===n.fieldName.toLowerCase());s?s.visible=!0:i.fieldInfos.push(n)}):i.fieldInfos=r}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0)}_writeRelationshipContent(t,i){const r=t.orderByFields?.map(s=>this._toFieldOrderJSON(s,t.relationshipId))||[],n=[...i.relatedRecordsInfo?.orderByFields||[],...r];i.relatedRecordsInfo={showRelatedRecords:!0,...n?.length&&{orderByFields:n}}}_writeTextContent(t,i){!i.description&&t.text&&(i.description=t.text)}_writeMediaContent(t,i){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const r=Le(t.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...r]:i.mediaInfos=r}_readPopupInfoElements(t,i,r){const n={description:!1,mediaInfos:!1};return r.map(s=>s.type==="media"?(s.mediaInfos||!i||n.mediaInfos||(s.mediaInfos=i,n.mediaInfos=!0),Xx.fromJSON(s)):s.type==="text"?(s.text||!t||n.description||(s.text=t,n.description=!0),Tb.fromJSON(s)):s.type==="attachments"?Yx.fromJSON(s):s.type==="fields"?Ib.fromJSON(s):s.type==="expression"?SF.fromJSON(s):s.type==="relationship"?pA.fromJSON(s):void 0).filter(Boolean)}_toRelationshipContent(t){const{field:i,order:r}=t;if(!i?.startsWith(o_))return null;const n=i.replace(o_,"").split("/");if(n.length!==2)return null;const s=parseInt(n[0],10),o=n[1];return typeof s=="number"&&o?pA.fromJSON({relationshipId:s,orderByFields:[{field:o,order:r}]}):null}_toFieldOrderJSON(t,i){const{order:r,field:n}=t;return{field:`${o_}${i}/${n}`,order:r}}_readPopupInfo({description:t,mediaInfos:i,showAttachments:r,relatedRecordsInfo:n={showRelatedRecords:!1}}){const s=[];t?s.push(new Tb({text:t})):s.push(new Ib),Array.isArray(i)&&i.length&&s.push(Xx.fromJSON({mediaInfos:i})),r&&s.push(Yx.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=n;return o&&a?.length&&a.forEach(l=>{const u=this._toRelationshipContent(l);u&&s.push(u)}),s.length?s:t}_getContentElementFields(t){const i=t?.type;if(i==="attachments")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)];if(i==="custom")return t.outFields||[];if(i==="fields")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...this._getFieldInfoFields(t.fieldInfos??this.fieldInfos)];if(i==="media"){const r=t.mediaInfos||[];return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...r.reduce((n,s)=>[...n,...this._getMediaInfoFields(s)],[])]}return i==="text"?this._extractFieldNames(t.text):[]}_getMediaInfoFields(t){const{caption:i,title:r,value:n}=t,s=n||{},{fields:o,normalizeField:a,tooltipField:l,sourceURL:u,linkURL:c}=s,d=[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(u),...this._extractFieldNames(c),...o??[]];return a&&d.push(a),l&&d.push(l),d}_getContentExpressionInfos(t,i){return Array.isArray(t)?t.reduce((r,n)=>[...r,...n.type==="expression"&&n.expressionInfo?[n.expressionInfo]:[]],i):[]}_getContentFields(t){return typeof t=="string"?this._extractFieldNames(t):Array.isArray(t)?t.reduce((i,r)=>[...i,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(t,i,r){r&&await Promise.all(r.map(n=>Ho(t,i,n.expression)))}_getFieldInfoFields(t){return t?t.filter(i=>i.visible===void 0||!!i.visible).map(i=>i.fieldName).filter(i=>!i.startsWith(o_)&&!i.startsWith(ZU)):[]}_getActionsFields(t){return t?t.toArray().reduce((i,r)=>[...i,...this._getActionFields(r)],[]):[]}_getActionFields(t){const{className:i,title:r,type:n}=t,s=n==="button"||n==="toggle"?t.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(s)]}_getTitleFields(t){return typeof t=="string"?this._extractFieldNames(t):[]}_extractFieldNames(t){if(!t||typeof t!="string")return[];const i=/{[^}]*}/g,r=t.match(i);if(!r)return[];const n=/\{(\w+):.+\}/,s=r.filter(o=>!(o.indexOf(`{${o_}`)===0||o.indexOf(`{${ZU}`)===0)).map(o=>o.replace(n,"{$1}"));return s?s.map(o=>o.slice(1,-1)):[]}};h([p({type:ibe})],Qn.prototype,"actions",void 0),h([p()],Qn.prototype,"content",void 0),h([di("content")],Qn.prototype,"castContent",null),h([Ye("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Qn.prototype,"readContent",null),h([it("content",{popupElements:{type:Pt.ofType(Kve)},showAttachments:{type:Boolean},mediaInfos:{type:Pt.ofType(rX)},description:{type:String},relatedRecordsInfo:{type:Xve}})],Qn.prototype,"writeContent",null),h([p({type:[nX],json:{write:!0}})],Qn.prototype,"expressionInfos",void 0),h([p({type:[i3]})],Qn.prototype,"fieldInfos",void 0),h([it("fieldInfos")],Qn.prototype,"writeFieldInfos",null),h([p({type:Qve})],Qn.prototype,"layerOptions",void 0),h([it("layerOptions")],Qn.prototype,"writeLayerOptions",null),h([p({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Qn.prototype,"lastEditInfoEnabled",void 0),h([p()],Qn.prototype,"outFields",void 0),h([p()],Qn.prototype,"overwriteActions",void 0),h([p()],Qn.prototype,"returnGeometry",void 0),h([p({json:{type:String}})],Qn.prototype,"title",void 0),h([it("title")],Qn.prototype,"writeTitle",null),Qn=h([ce("esri.PopupTemplate")],Qn);const Rm=Qn,YU=new ti({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let sbe=0,j1=class extends Je{constructor(t){super(t),this.id="sym"+sbe++,this.type=null,this.color=new Mt([0,0,0,1])}readColor(t){return t&&t[0]!=null?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};h([p({type:YU.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:YU.write}}})],j1.prototype,"type",void 0),h([p({type:Mt,json:{write:{allowNull:!0}}})],j1.prototype,"color",void 0),h([Ye("color")],j1.prototype,"readColor",null),j1=h([ce("esri.symbols.Symbol")],j1);const Oa=j1;var Fk;let Qp=Fk=class extends Oa{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){if(e)for(const i in e)t[i]=e[i]}async collectRequiredFields(e,t){if(this.data?.type==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const r=i.map(n=>{const s=n.valueExpressionInfo;return Ho(e,t,s.expression)});await Promise.all(r)}}}clone(){return new Fk({data:Le(this.data)})}hash(){return NN(JSON.stringify(this.data)).toString()}};h([p({json:{write:!1}})],Qp.prototype,"color",void 0),h([p({json:{write:!0}})],Qp.prototype,"data",void 0),h([Ye("data",["symbol"])],Qp.prototype,"readData",null),h([it("data",{})],Qp.prototype,"writeData",null),h([Ft({CIMSymbolReference:"cim"},{readOnly:!0})],Qp.prototype,"type",void 0),Qp=Fk=h([ce("esri.symbols.CIMSymbol")],Qp);const r3=Qp;let U1=class extends Je{constructor(t){super(t),this.enabled=!0,this.type=null}writeEnabled(t,i,r){t||(i[r]=t)}};h([p({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],U1.prototype,"enabled",void 0),h([it("enabled")],U1.prototype,"writeEnabled",null),h([p({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],U1.prototype,"type",void 0),U1=h([ce("esri.symbols.Symbol3DLayer")],U1);const Vh=U1,obe=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,abe="screenUtils.toPt: input not recognized!",aX=96;function lX(e){return e?e/72*aX:0}function tp(e){return e?72*e/aX:0}function Oi(e){if(typeof e=="string"){const t=e.match(obe);if(t){const i=Number(t[1]),r=t[3]&&t[3].toLowerCase(),n=e.charAt(0)==="-",s=r==="px"?tp(i):i;return n?-s:s}return console.warn(abe),null}return e}function cs(e=0,t=0){return{x:e,y:t}}function jst(e=0,t=0){return[e,t]}function n4(e){const t=H5(100*(1-e));return Math.max(0,Math.min(t,100))}function eS(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}function lbe(e,t){const i=t.transparency!=null?eS(t.transparency):1,r=t.color;return r&&Array.isArray(r)?new Mt([r[0]||0,r[1]||0,r[2]||0,i]):null}function ube(e,t){t.color=e.toJSON().slice(0,3);const i=n4(e.a);i!==0&&(t.transparency=i)}const km={type:Mt,json:{type:[wi],default:null,read:{source:["color","transparency"],reader:lbe},write:{target:{color:{type:[wi]},transparency:{type:wi}},writer:ube}}},Oh={type:Number,cast:Oi,json:{write:!0}};let Ty=class extends Je{constructor(t){super(t),this.color=new Mt([0,0,0,1]),this.extensionLength=0,this.size=tp(1)}clone(){}cloneProperties(){return{color:Le(this.color),size:this.size,extensionLength:this.extensionLength}}};h([p({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Ty.prototype,"type",void 0),h([p(km)],Ty.prototype,"color",void 0),h([p({...Oh,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],Ty.prototype,"extensionLength",void 0),h([p(Oh)],Ty.prototype,"size",void 0),Ty=h([ce("esri.symbols.edges.Edges3D")],Ty);const CF=Ty;var Dk;let gI=Dk=class extends CF{constructor(e){super(e),this.type="sketch"}clone(){return new Dk(this.cloneProperties())}};h([Ft({sketch:"sketch"},{readOnly:!0})],gI.prototype,"type",void 0),gI=Dk=h([ce("esri.symbols.edges.SketchEdges3D")],gI);const cbe=gI;var jk;let vI=jk=class extends CF{constructor(e){super(e),this.type="solid"}clone(){return new jk(this.cloneProperties())}};h([Ft({solid:"solid"},{readOnly:!0})],vI.prototype,"type",void 0),vI=jk=h([ce("esri.symbols.support.SolidEdges3D")],vI);const hbe=vI,uX={types:{key:"type",base:CF,typeMap:{solid:hbe,sketch:cbe}},json:{write:!0}};var Uk;let bl=Uk=class extends Je{constructor(e){super(e),this.color=null}clone(){const e={color:ee(this.color)?this.color.clone():null};return new Uk(e)}};h([p(km)],bl.prototype,"color",void 0),bl=Uk=h([ce("esri.symbols.support.Symbol3DMaterial")],bl);var Vk;let Xp=Vk=class extends Vh{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new Vk({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:ee(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};h([Ft({Extrude:"extrude"},{readOnly:!0})],Xp.prototype,"type",void 0),h([p({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Xp.prototype,"size",void 0),h([p({type:bl,json:{write:!0}})],Xp.prototype,"material",void 0),h([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Xp.prototype,"castShadows",void 0),h([p(uX)],Xp.prototype,"edges",void 0),Xp=Vk=h([ce("esri.symbols.ExtrudeSymbol3DLayer")],Xp);const cX=Xp;let Q_=class extends Oa{constructor(t){super(t),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};h([Ft({esriSLS:"simple-line"},{readOnly:!0})],Q_.prototype,"type",void 0),h([p({type:Number,cast:Oi,json:{write:!0}})],Q_.prototype,"width",void 0),Q_=h([ce("esri.symbols.LineSymbol")],Q_);const dbe=Q_,pbe=["begin","end","begin-end"],hX=["arrow","circle","square","diamond","cross","x"];var Bk;let Dc=Bk=class extends Je{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,i,r){t[i]=r?.origin==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,i,r){r?.origin==="web-map"||(t[i]=e)}clone(){return new Bk({color:Le(this.color),placement:this.placement,style:this.style})}hash(){return`${this.placement}.${this.color?.hash()}.${this.style}`}};h([p({type:["begin","end","begin-end"],json:{write:!0}})],Dc.prototype,"placement",void 0),h([Ft({"line-marker":"line-marker"},{readOnly:!0}),p({json:{origins:{"web-map":{write:!1}}}})],Dc.prototype,"type",void 0),h([p({type:hX})],Dc.prototype,"style",void 0),h([it("style")],Dc.prototype,"writeStyle",null),h([p({type:Mt,value:null,json:{write:{allowNull:!0}}})],Dc.prototype,"color",null),h([Ye("color")],Dc.prototype,"readColor",null),h([it("color")],Dc.prototype,"writeColor",null),Dc=Bk=h([ce("esri.symbols.LineSymbolMarker")],Dc);const fbe=Dc;var zk;const y$=new ti({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let od=zk=class extends dbe{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,i,r,n,s){if(e&&typeof e!="string")return e;const o={};return e!=null&&(o.style=e),t!=null&&(o.color=t),i!=null&&(o.width=Oi(i)),r!=null&&(o.cap=r),n!=null&&(o.join=n),s!=null&&(o.miterLimit=Oi(s)),o}clone(){return new zk({color:Le(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:this.marker?.clone()})}hash(){return`${super.hash()}.${this.color?.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${this.marker?.hash()}`}};h([Ft({esriSLS:"simple-line"},{readOnly:!0})],od.prototype,"type",void 0),h([p({type:y$.apiValues,json:{read:y$.read,write:y$.write}})],od.prototype,"style",void 0),h([p({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null||i.origin==null)})}}})],od.prototype,"cap",void 0),h([p({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null||i.origin==null)})}}})],od.prototype,"join",void 0),h([p({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":fbe}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],od.prototype,"marker",void 0),h([p({type:Number,json:{read:!1,write:!1}})],od.prototype,"miterLimit",void 0),od=zk=h([ce("esri.symbols.SimpleLineSymbol")],od);const Ra=od;let X_=class extends Oa{constructor(t){super(t),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};h([p({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Ra}},json:{default:null,write:!0}})],X_.prototype,"outline",void 0),h([p({type:["simple-fill","picture-fill"],readOnly:!0})],X_.prototype,"type",void 0),X_=h([ce("esri.symbols.FillSymbol")],X_);const dX=X_;let bI=class extends Je{constructor(t){super(t)}clone(){}};h([p({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],bI.prototype,"type",void 0),bI=h([ce("esri.symbols.patterns.LinePattern3D")],bI);const pX=bI,mbe=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var Gk;const ybe=_n()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let e2=Gk=class extends pX{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new Gk(e)}};h([p({type:["style"]})],e2.prototype,"type",void 0),h([Ft(ybe),p({type:mbe})],e2.prototype,"style",void 0),e2=Gk=h([ce("esri.symbols.patterns.LineStylePattern3D")],e2);const $F=e2;let wI=class extends Je{constructor(t){super(t)}clone(){}};h([p({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],wI.prototype,"type",void 0),wI=h([ce("esri.symbols.patterns.Pattern3D")],wI);const fX=wI,gbe=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var qk;let t2=qk=class extends fX{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new qk(e)}};h([p({type:["style"]})],t2.prototype,"type",void 0),h([p({type:gbe,json:{read:!0,write:!0}})],t2.prototype,"style",void 0),t2=qk=h([ce("esri.symbols.patterns.StylePattern3D")],t2);const mX=t2,vbe={types:{key:"type",base:fX,typeMap:{style:mX}},json:{write:!0}},yX={types:{key:"type",base:pX,typeMap:{style:$F}},json:{write:!0}},nx=new Mt("white");new Mt("black");const bbe=new Mt([255,255,255,0]);function wbe(e){return e.r===0&&e.g===0&&e.b===0}var Hk;let sx=Hk=class extends bl{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:ee(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode};return new Hk(e)}};h([Ft({multiply:"multiply",replace:"replace",tint:"tint"})],sx.prototype,"colorMixMode",void 0),sx=Hk=h([ce("esri.symbols.support.Symbol3DFillMaterial")],sx);function du(e=Cbe){return[e[0],e[1],e[2],e[3]]}function qst(e){return[e[0],e[1],e[2],e[3]]}function gX(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function _be(e,t,i,r,n=du()){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n}function xbe(e,t=du()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function Hst(e,t){return new Kt({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function Wst(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function Jst(e,t,i){if(Re(t))gX(i,e);else if("length"in t)Wk(t)?(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[2]),i[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[0]),i[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":i[0]=Math.min(e[0],t.xmin),i[1]=Math.min(e[1],t.ymin),i[2]=Math.max(e[2],t.xmax),i[3]=Math.max(e[3],t.ymax);break;case"point":i[0]=Math.min(e[0],t.x),i[1]=Math.min(e[1],t.y),i[2]=Math.max(e[2],t.x),i[3]=Math.max(e[3],t.y)}}function Sbe(e){return Re(e)||e[0]>=e[2]?0:e[2]-e[0]}function Ebe(e){return e[1]>=e[3]?0:e[3]-e[1]}function Zst(e){return Sbe(e)*Ebe(e)}function Mbe(e,t){return Ibe(e,t[0],t[1])}function Ibe(e,t,i){return t>=e[0]&&i>=e[1]&&t<=e[2]&&i<=e[3]}function Tbe(e,t,i){return t[0]>=e[0]-i&&t[1]>=e[1]-i&&t[0]<=e[2]+i&&t[1]<=e[3]+i}function Yst(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function Abe(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function Kst(e){return e?gX(e,KU):du(KU)}function Wk(e){return e!=null&&e.length===4}function Qst(e,t){return Wk(e)&&Wk(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const KU=[1/0,1/0,-1/0,-1/0],Cbe=[0,0,0,0];function OF(e=Pbe){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function RF(e,t,i,r,n,s,o=OF()){return o[0]=e,o[1]=t,o[2]=i,o[3]=r,o[4]=n,o[5]=s,o}function Xst(e,t){const i=isFinite(e[2])||isFinite(e[5]);return new Kt(i?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function eot(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function tot(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function $be(e){return e[0]>=e[3]?0:e[3]-e[0]}function Obe(e){return e[1]>=e[4]?0:e[4]-e[1]}function Rbe(e){return e[2]>=e[5]?0:e[5]-e[2]}function iot(e,t=[0,0,0]){return t[0]=$be(e),t[1]=Obe(e),t[2]=Rbe(e),t}function rot(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i}function not(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e}function kbe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function sot(e){return e?kbe(e,QU):OF(QU)}function oot(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function Lbe(e,t,i,r,n){return e[0]=t,e[1]=i,e[2]=Number.NEGATIVE_INFINITY,e[3]=r,e[4]=n,e[5]=Number.POSITIVE_INFINITY,e}function Jk(e){return e.length===6}function aot(e,t,i){if(Re(e)||Re(t))return e===t;if(!Jk(e)||!Jk(t))return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}const QU=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Pbe=[0,0,0,0,0,0];OF();function lot(e,{isPrimitive:t,width:i,depth:r,height:n}){const s=t?10:1;if(i==null&&n==null&&r==null)return[s*e[0],s*e[1],s*e[2]];const o=pw(i,r,n);let a;for(let l=0;l<3;l++){const u=o[l];if(u!=null){a=u/e[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=e[l]*a);return o}const Nbe=RF(-.5,-.5,-.5,.5,.5,.5),Fbe=RF(-.5,-.5,0,.5,.5,1),Dbe=RF(-.5,-.5,0,.5,.5,.5);function uot(e){switch(e){case"sphere":case"cube":case"diamond":return Nbe;case"cylinder":case"cone":case"inverted-cone":return Fbe;case"tetrahedron":return Dbe;default:return}}const kF=["butt","square","round"],jbe=[...kF,"none"],vX=["miter","bevel","round"];var Zk;let Ay=Zk=class extends Je{constructor(e){super(e),this.color=new Mt([0,0,0,1]),this.size=tp(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:ee(this.color)?this.color.clone():null,size:this.size,pattern:ee(this.pattern)?this.pattern.clone():null,patternCap:this.patternCap};return new Zk(e)}};h([p(km)],Ay.prototype,"color",void 0),h([p(Oh)],Ay.prototype,"size",void 0),h([p(yX)],Ay.prototype,"pattern",void 0),h([p({type:kF,json:{default:"butt",write:{overridePolicy(){return{enabled:ee(this.pattern)}}}}})],Ay.prototype,"patternCap",void 0),Ay=Zk=h([ce("esri.symbols.support.Symbol3DOutline")],Ay);var _I;let ad=_I=class extends Vh{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:ee(this.edges)?this.edges.clone():null,enabled:this.enabled,material:ee(this.material)?this.material.clone():null,pattern:ee(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:ee(this.outline)?this.outline.clone():null};return new _I(e)}static fromSimpleFillSymbol(e){const t=e.outline&&e.outline.style&&e.outline.style!=="inside-frame"&&e.outline.style!=="solid"?new $F({style:e.outline.style}):null,i={size:e.outline?.width??0,color:(e.outline?.color??nx).clone(),pattern:t};return t&&e.outline?.cap&&(i.patternCap=e.outline.cap),new _I({material:new sx({color:(e.color??bbe).clone()}),pattern:e.style&&e.style!=="solid"?new mX({style:e.style}):null,outline:i})}};h([Ft({Fill:"fill"},{readOnly:!0})],ad.prototype,"type",void 0),h([p({type:sx,json:{write:!0}})],ad.prototype,"material",void 0),h([p(vbe)],ad.prototype,"pattern",void 0),h([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ad.prototype,"castShadows",void 0),h([p({type:Ay,json:{write:!0}})],ad.prototype,"outline",void 0),h([p(uX)],ad.prototype,"edges",void 0),ad=_I=h([ce("esri.symbols.FillSymbol3DLayer")],ad);const n3=ad,Ube=["none","underline","line-through"],Vbe=["normal","italic","oblique"],Bbe=["normal","lighter","bold","bolder"],bX={type:Number,cast:e=>{const t=ul(e);return t===0?1:Ta(t,.1,4)},nonNullable:!0},zbe=["left","right","center"],Gbe=["baseline","top","middle","bottom"],wX={type:zbe,nonNullable:!0},_X={type:Gbe,nonNullable:!0};var Yk;let ld=Yk=class extends Je{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return Oi(e)}clone(){return new Yk({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};h([p({type:Ube,json:{default:"none",write:!0}})],ld.prototype,"decoration",void 0),h([p({type:String,json:{write:!0}})],ld.prototype,"family",void 0),h([p({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:!i||!i.textSymbol3D})}}})],ld.prototype,"size",void 0),h([di("size")],ld.prototype,"castSize",null),h([p({type:Vbe,json:{default:"normal",write:!0}})],ld.prototype,"style",void 0),h([p({type:Bbe,json:{default:"normal",write:!0}})],ld.prototype,"weight",void 0),ld=Yk=h([ce("esri.symbols.Font")],ld);const s4=ld;function yw(e,t){const i=t&&t.url&&t.url.path;if(e&&i&&(e=hl(e,i,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const r=YN(e,t.portalItem.itemUrl);r!=null&&qbe.test(r)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(r).path)}return Kk(e,t&&t.portal)}function s3(e,t,i=tS.YES){if(e==null)return e;!yl(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let r=hl(e);if(t){const n=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(n){const s=Kk(n,t.portal),o=Kk(r,t.portal);r=YN(o,s,s),r!=null&&r!==o&&r!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=SX(r,t?.portal),yl(r)&&(r=ml(r)),t?.resources&&t?.portalItem&&!yl(r)&&!U0(r)&&i===tS.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r),compress:!1}),r}function LF(e,t,i){return yw(e,i)}function b0(e,t,i,r){const n=s3(e,r);n!==void 0&&(t[i]=n)}const xX=/\/items\/([^\/]+)\/resources\/(.*)/,qbe=/^\.\/resources\//;function Hbe(e){return(e?.match(xX)??null)?.[1]??null}function Wbe(e){const t=e?.match(xX)??null;if(t==null)return null;const i=t[2],r=i.lastIndexOf("/");if(r===-1){const{path:o,extension:a}=_U(i);return{prefix:null,filename:o,extension:a}}const{path:n,extension:s}=_U(i.slice(r+1));return{prefix:i.slice(0,r),filename:n,extension:s}}function SX(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?KR(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function Kk(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const i=`${t.urlKey}.${t.customBaseUrl}`,r=WN();return wb(r,`${r.scheme}://${i}`)?KR(e,t.portalHostname,i):KR(e,i,t.portalHostname)}var tS;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(tS||(tS={}));const cot=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return tS},ensureMainOnlineDomain:SX,fromJSON:yw,itemIdFromResourceUrl:Hbe,prefixAndFilenameFromResourceUrl:Wbe,read:LF,toJSON:s3,write:b0},Symbol.toStringTag,{value:"Module"}));var Qk;const Jbe=_n()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Cy=Qk=class extends Je{constructor(e){super(e)}readHref(e,t,i){return e?yw(e,i):t.dataURI}writeHref(e,t,i,r){e&&(U0(e)?t.dataURI=e:(t.href=s3(e,r),yl(t.href)&&(t.href=ml(t.href))))}clone(){return new Qk({href:this.href,primitive:this.primitive})}};h([p({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Cy.prototype,"href",void 0),h([Ye("href")],Cy.prototype,"readHref",null),h([it("href",{href:{type:String},dataURI:{type:String}})],Cy.prototype,"writeHref",null),h([Ft(Jbe)],Cy.prototype,"primitive",void 0),Cy=Qk=h([ce("esri.symbols.support.IconSymbol3DLayerResource")],Cy);var Xk;let Cv=Xk=class extends Lt{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new Xk({x:this.x,y:this.y})}};h([p({type:Number})],Cv.prototype,"x",void 0),h([p({type:Number})],Cv.prototype,"y",void 0),Cv=Xk=h([ce("esri.symbols.support.Symbol3DAnchorPosition2D")],Cv);var eL;let i2=eL=class extends Je{constructor(e){super(e),this.color=new Mt([0,0,0,1]),this.size=tp(1)}clone(){const e={color:ee(this.color)?this.color.clone():null,size:this.size};return new eL(e)}};h([p(km)],i2.prototype,"color",void 0),h([p(Oh)],i2.prototype,"size",void 0),i2=eL=h([ce("esri.symbols.support.Symbol3DIconOutline")],i2);var V1;const EX="esri.symbols.IconSymbol3DLayer";let jc=V1=class extends Vh{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null}clone(){return new V1({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:ee(this.material)?this.material.clone():null,outline:ee(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||nx,i=XU(e),r=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||nx).clone()}:null;return new V1({size:e.size,resource:{primitive:Ybe(e.style)},material:{color:t},outline:r,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(e){const t=!e.color||wbe(e.color)?nx:e.color,i=XU(e);return new V1({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(e){return new V1({resource:{href:fK({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};function XU(e){const t="width"in e?e.width:e.size,i="height"in e?e.height:e.size,r=eV(e.xoffset),n=eV(e.yoffset);return(r||n)&&t&&i?{x:-r/t,y:n/i}:null}function eV(e){return isFinite(e)?e:0}h([p({type:bl,json:{write:!0}})],jc.prototype,"material",void 0),h([p({type:Cy,json:{write:!0}})],jc.prototype,"resource",void 0),h([Ft({Icon:"icon"},{readOnly:!0})],jc.prototype,"type",void 0),h([p(Oh)],jc.prototype,"size",void 0),h([Ft({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),p({json:{default:"center"}})],jc.prototype,"anchor",void 0),h([p({type:Cv,json:{type:[Number],read:{reader:e=>new Cv({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],jc.prototype,"anchorPosition",void 0),h([p({type:i2,json:{write:!0}})],jc.prototype,"outline",void 0),jc=V1=h([ce(EX)],jc);const Zbe={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function Ybe(e){return Zbe[e]||(et.getLogger(EX).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const Tg=jc;let $y=class extends xr(Je){constructor(t){super(t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(t){return ee(t)&&t.placement===this.placement&&t.style===this.style&&(Re(this.color)&&Re(t.color)||ee(this.color)&&ee(t.color)&&this.color.toJSON()===t.color.toJSON())}};h([p({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],$y.prototype,"type",void 0),h([p({type:pbe,json:{default:"begin-end",write:!0}})],$y.prototype,"placement",void 0),h([p({type:hX,json:{default:"arrow",write:!0}})],$y.prototype,"style",void 0),h([p({type:Mt,json:{type:[wi],default:null,write:!0}})],$y.prototype,"color",void 0),$y=h([ce("esri.symbols.LineStyleMarker3D")],$y);const tL=$y;var xI;let Uc=xI=class extends Vh{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=tp(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:ee(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:ee(this.pattern)?this.pattern.clone():null,marker:ee(this.marker)?this.marker.clone():null};return new xI(e)}static fromSimpleLineSymbol(e){const t={enabled:!0,size:e.width??tp(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style&&e.style!=="inside-frame"?new $F({style:e.style}):null,material:new bl({color:(e.color||nx).clone()}),marker:e.marker?new tL({placement:e.marker.placement,style:e.marker.style,color:e.marker.color?.clone()??null}):null};return new xI(t)}};h([p({type:bl,json:{write:!0}})],Uc.prototype,"material",void 0),h([Ft({Line:"line"},{readOnly:!0})],Uc.prototype,"type",void 0),h([p({type:vX,json:{write:!0,default:"miter"}})],Uc.prototype,"join",void 0),h([p({type:kF,json:{write:!0,default:"butt"}})],Uc.prototype,"cap",void 0),h([p(Oh)],Uc.prototype,"size",void 0),h([p(yX)],Uc.prototype,"pattern",void 0),h([p({types:{key:"type",base:tL,typeMap:{style:tL}},json:{write:!0}})],Uc.prototype,"marker",void 0),Uc=xI=h([ce("esri.symbols.LineSymbol3DLayer")],Uc);const o3=Uc;var iL;const Kbe=_n()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let r2=iL=class extends Je{clone(){return new iL({href:this.href,primitive:this.primitive})}};h([p({type:String,json:{read:LF,write:b0}})],r2.prototype,"href",void 0),h([Ft(Kbe)],r2.prototype,"primitive",void 0),r2=iL=h([ce("esri.symbols.support.ObjectSymbol3DLayerResource")],r2);var rL;let pg=rL=class extends Lt{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new rL({x:this.x,y:this.y,z:this.z})}};h([p({type:Number})],pg.prototype,"x",void 0),h([p({type:Number})],pg.prototype,"y",void 0),h([p({type:Number})],pg.prototype,"z",void 0),pg=rL=h([ce("esri.symbols.support.Symbol3DAnchorPosition3D")],pg);var nL;let to=nL=class extends Vh{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new nL({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:ee(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};h([p({type:bl,json:{write:!0}})],to.prototype,"material",void 0),h([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],to.prototype,"castShadows",void 0),h([p({type:r2,json:{write:!0}})],to.prototype,"resource",void 0),h([Ft({Object:"object"},{readOnly:!0})],to.prototype,"type",void 0),h([p({type:Number,json:{write:!0}})],to.prototype,"width",void 0),h([p({type:Number,json:{write:!0}})],to.prototype,"height",void 0),h([p({type:Number,json:{write:!0}})],to.prototype,"depth",void 0),h([Ft({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),p({json:{default:"origin"}})],to.prototype,"anchor",void 0),h([p({type:pg,json:{type:[Number],read:{reader:e=>new pg({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],to.prototype,"anchorPosition",void 0),h([p({type:Number,json:{write:!0}})],to.prototype,"heading",void 0),h([p({type:Number,json:{write:!0}})],to.prototype,"tilt",void 0),h([p({type:Number,json:{write:!0}})],to.prototype,"roll",void 0),h([p({readOnly:!0})],to.prototype,"isPrimitive",null),to=nL=h([ce("esri.symbols.ObjectSymbol3DLayer")],to);const PF=to;var sL;let Oo=sL=class extends Vh{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e??(t.height==null&&t.size!=null?t.size:void 0)}readHeight(e,t){return e??(t.width==null&&t.size!=null?t.size:void 0)}clone(){return new sL({enabled:this.enabled,material:ee(this.material)?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};h([p({type:bl,json:{write:!0}})],Oo.prototype,"material",void 0),h([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Oo.prototype,"castShadows",void 0),h([Ft({Path:"path"},{readOnly:!0})],Oo.prototype,"type",void 0),h([p({type:["circle","quad"],json:{write:!0,default:"circle"}})],Oo.prototype,"profile",void 0),h([p({type:vX,json:{write:!0,default:"miter"}})],Oo.prototype,"join",void 0),h([p({type:jbe,json:{write:!0,default:"butt"}})],Oo.prototype,"cap",void 0),h([p({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Oo.prototype,"width",void 0),h([Ye("width",["width","size","height"])],Oo.prototype,"readWidth",null),h([p({type:Number,json:{write:!0}})],Oo.prototype,"height",void 0),h([Ye("height",["height","size","width"])],Oo.prototype,"readHeight",null),h([p({type:["center","bottom","top"],json:{write:!0,default:"center"}})],Oo.prototype,"anchor",void 0),h([p({type:["heading","all"],json:{write:!0,default:"all"}})],Oo.prototype,"profileRotation",void 0),Oo=sL=h([ce("esri.symbols.PathSymbol3DLayer")],Oo);const NF=Oo;var oL;let $v=oL=class extends Je{constructor(){super(...arguments),this.color=new Mt([0,0,0,1]),this.size=0}clone(){const e={color:Le(this.color),size:this.size};return new oL(e)}};h([p(km)],$v.prototype,"color",void 0),h([p(Oh)],$v.prototype,"size",void 0),$v=oL=h([ce("esri.symbols.support.Symbol3DHalo")],$v);let ox=class extends xr(Je){constructor(t){super(t),this.color=null}};h([p(km)],ox.prototype,"color",void 0),ox=h([ce("esri.symbols.support.Symbol3DTextBackground")],ox);var SI;let Xo=SI=class extends Vh{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){ee(e)&&ee(this._userSize)&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,i,r){const n={...r,textSymbol3D:!0};t.font=e.write({},n),delete t.font.size}get size(){return ee(this._userSize)?this._userSize:ee(this.font)&&this.font.size!=null?this.font.size:9}set size(e){this._userSize=e,ee(this.font)&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new SI({enabled:this.enabled,font:this.font&&Le(this.font),halo:this.halo&&Le(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:ee(this.material)?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:Le(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new SI({font:ee(e.font)?e.font.clone():new s4,halo:Qbe(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new bl({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new ox({color:e.backgroundColor.clone()}):null})}};function Qbe(e,t){return e&&t!=null&&t>0?new $v({color:Le(e),size:t}):null}h([p({type:s4,json:{write:!0}})],Xo.prototype,"font",null),h([it("font")],Xo.prototype,"writeFont",null),h([p({type:$v,json:{write:!0}})],Xo.prototype,"halo",void 0),h([p({...wX,json:{default:"center",write:!0}})],Xo.prototype,"horizontalAlignment",void 0),h([p({...bX,json:{default:1,write:!0}})],Xo.prototype,"lineHeight",void 0),h([p({type:bl,json:{write:!0}})],Xo.prototype,"material",void 0),h([p({type:ox,json:{write:!0}})],Xo.prototype,"background",void 0),h([p(Oh)],Xo.prototype,"size",null),h([p({type:String,json:{write:!0}})],Xo.prototype,"text",void 0),h([Ft({Text:"text"},{readOnly:!0})],Xo.prototype,"type",void 0),h([p({..._X,json:{default:"baseline",write:!0}})],Xo.prototype,"verticalAlignment",void 0),Xo=SI=h([ce("esri.symbols.TextSymbol3DLayer")],Xo);const gw=Xo;var aL;let ef=aL=class extends Vh{constructor(e){super(e),this.color=lL.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new aL({color:Le(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};h([p({type:Mt,nonNullable:!0,json:{type:[wi],write:(e,t,i)=>t[i]=e.toArray(Mt.AlphaMode.UNLESS_OPAQUE),default:()=>lL.clone(),defaultEquals:e=>e.toCss(!0)===lL.toCss(!0)}})],ef.prototype,"color",void 0),h([Ft({Water:"water"},{readOnly:!0})],ef.prototype,"type",void 0),h([p({type:["small","medium","large"],json:{write:!0,default:"medium"}})],ef.prototype,"waterbodySize",void 0),h([p({type:Number,json:{write:!0,default:null}})],ef.prototype,"waveDirection",void 0),h([p({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],ef.prototype,"waveStrength",void 0),ef=aL=h([ce("esri.symbols.WaterSymbol3DLayer")],ef);const lL=new Mt([0,119,190]),MX=ef;var uL;let Oy=uL=class extends Lt{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new uL({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};h([p({type:String})],Oy.prototype,"name",void 0),h([p({type:String})],Oy.prototype,"styleUrl",void 0),h([p({type:String})],Oy.prototype,"styleName",void 0),h([p({type:xo})],Oy.prototype,"portal",void 0),Oy=uL=h([ce("esri.symbols.support.StyleOrigin")],Oy);const cL=Oy;var hL;let ax=hL=class extends Lt{constructor(){super(...arguments),this.url=""}clone(){return new hL({url:this.url})}};h([p({type:String})],ax.prototype,"url",void 0),ax=hL=h([ce("esri.symbols.support.Thumbnail")],ax);const IX={icon:Tg,object:PF,line:o3,path:NF,fill:n3,extrude:cX,text:gw,water:MX},Xbe=Pt.ofType({base:Vh,key:"type",typeMap:IX,errorContext:"symbol-layer"});let Vc=class extends Oa{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,r=i&&i.type||Pt;this._set("symbolLayers",new r)}get color(){return null}set color(t){this.constructed&&et.getLogger(this.declaredClass).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){d0(t,this._get("symbolLayers"))}readStyleOrigin(t,i,r){if(t.styleUrl&&t.name){const n=yw(t.styleUrl,r);return new cL({styleUrl:n,name:t.name})}if(t.styleName&&t.name)return new cL({portal:r&&r.portal||xo.getDefault(),styleName:t.styleName,name:t.name});r&&r.messages&&r.messages.push(new El("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:t}))}writeStyleOrigin(t,i,r,n){if(t.styleUrl&&t.name){let s=s3(t.styleUrl,n);yl(s)&&(s=ml(s)),i.styleOrigin={styleUrl:s,name:t.name}}else t.styleName&&t.name&&(t.portal&&n&&n.portal&&!dK(t.portal.restUrl,n.portal.restUrl)?n&&n.messages&&n.messages.push(new El("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof Vh||t&&IX[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};h([p({json:{read:!1,write:!1}})],Vc.prototype,"color",null),h([p({type:Xbe,nonNullable:!0,json:{write:!0}}),di(QY)],Vc.prototype,"symbolLayers",null),h([p({type:cL})],Vc.prototype,"styleOrigin",void 0),h([Ye("styleOrigin")],Vc.prototype,"readStyleOrigin",null),h([it("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Vc.prototype,"writeStyleOrigin",null),h([p({type:ax,json:{read:!1}})],Vc.prototype,"thumbnail",void 0),h([p({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Vc.prototype,"type",void 0),Vc=h([ce("esri.symbols.Symbol3D")],Vc);const vw=Vc;let n2=class extends Je{constructor(t){super(t),this.visible=!0}clone(){}};h([p({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],n2.prototype,"type",void 0),h([p({readOnly:!0})],n2.prototype,"visible",void 0),n2=h([ce("esri.symbols.callouts.Callout3D")],n2);const TX=n2;var dL;let EI=dL=class extends Je{constructor(){super(...arguments),this.color=new Mt("white")}clone(){return new dL({color:Le(this.color)})}};h([p(km)],EI.prototype,"color",void 0),EI=dL=h([ce("esri.symbols.callouts.LineCallout3DBorder")],EI);const AX=EI;Object.freeze(Object.defineProperty({__proto__:null,default:AX},Symbol.toStringTag,{value:"Module"}));var pL;let tf=pL=class extends TX{constructor(e){super(e),this.type="line",this.color=new Mt([0,0,0,1]),this.size=tp(1),this.border=null}get visible(){return this.size>0&&ee(this.color)&&this.color.a>0}clone(){return new pL({color:Le(this.color),size:this.size,border:Le(this.border)})}};h([Ft({line:"line"},{readOnly:!0})],tf.prototype,"type",void 0),h([p(km)],tf.prototype,"color",void 0),h([p(Oh)],tf.prototype,"size",void 0),h([p({type:AX,json:{write:!0}})],tf.prototype,"border",void 0),h([p({readOnly:!0})],tf.prototype,"visible",null),tf=pL=h([ce("esri.symbols.callouts.LineCallout3D")],tf);const ewe=tf;function FF(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||ee(t.maxWorldLength)&&t.maxWorldLength<=0)}function CX(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!FF(e)}const $X={types:{key:"type",base:TX,typeMap:{line:ewe}},json:{write:!0}};var fL;let B1=fL=class extends Je{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new fL({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};h([p(Oh)],B1.prototype,"screenLength",void 0),h([p({type:Number,nonNullable:!0,json:{write:!0,default:0}})],B1.prototype,"minWorldLength",void 0),h([p({type:Number,json:{write:!0}})],B1.prototype,"maxWorldLength",void 0),B1=fL=h([ce("esri.symbols.support.Symbol3DVerticalOffset")],B1);const OX=B1;var MI;const RX=Pt.ofType({base:null,key:"type",typeMap:{text:gw}});let rf=MI=class extends vw{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new RX,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return CX(this)}hasVisibleVerticalOffset(){return FF(this)}clone(){return new MI({styleOrigin:Le(this.styleOrigin),symbolLayers:Le(this.symbolLayers),thumbnail:Le(this.thumbnail),callout:Le(this.callout),verticalOffset:Le(this.verticalOffset)})}static fromTextSymbol(e){return new MI({symbolLayers:[gw.fromTextSymbol(e)]})}};h([p({type:OX,json:{write:!0}})],rf.prototype,"verticalOffset",void 0),h([p($X)],rf.prototype,"callout",void 0),h([p({json:{read:!1,write:!1}})],rf.prototype,"styleOrigin",void 0),h([p({type:RX})],rf.prototype,"symbolLayers",void 0),h([Ft({LabelSymbol3D:"label-3d"},{readOnly:!0})],rf.prototype,"type",void 0),rf=MI=h([ce("esri.symbols.LabelSymbol3D")],rf);const o4=rf;var II;const kX=Pt.ofType({base:null,key:"type",typeMap:{line:o3,path:NF}}),twe=Pt.ofType({base:null,key:"type",typeMap:{line:o3,path:NF}});let s2=II=class extends vw{constructor(e){super(e),this.symbolLayers=new kX,this.type="line-3d"}clone(){return new II({styleOrigin:Le(this.styleOrigin),symbolLayers:Le(this.symbolLayers),thumbnail:Le(this.thumbnail)})}static fromSimpleLineSymbol(e){return new II({symbolLayers:[o3.fromSimpleLineSymbol(e)]})}};h([p({type:kX,json:{type:twe}})],s2.prototype,"symbolLayers",void 0),h([Ft({LineSymbol3D:"line-3d"},{readOnly:!0})],s2.prototype,"type",void 0),s2=II=h([ce("esri.symbols.LineSymbol3D")],s2);const a4=s2;let nf=class extends Oa{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};h([p({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],nf.prototype,"angle",void 0),h([p({type:["simple-marker","picture-marker"],readOnly:!0})],nf.prototype,"type",void 0),h([p({type:Number,cast:Oi,json:{write:!0}})],nf.prototype,"xoffset",void 0),h([p({type:Number,cast:Oi,json:{write:!0}})],nf.prototype,"yoffset",void 0),h([p({type:Number,cast:e=>e==="auto"?e:Oi(e),json:{write:!0}})],nf.prototype,"size",void 0),nf=h([ce("esri.symbols.MarkerSymbol")],nf);const LX=nf;var TI;const PX=Pt.ofType({base:null,key:"type",typeMap:{fill:n3}});let o2=TI=class extends vw{constructor(e){super(e),this.symbolLayers=new PX,this.type="mesh-3d"}clone(){return new TI({styleOrigin:Le(this.styleOrigin),symbolLayers:Le(this.symbolLayers),thumbnail:Le(this.thumbnail)})}static fromSimpleFillSymbol(e){return new TI({symbolLayers:[n3.fromSimpleFillSymbol(e)]})}};h([p({type:PX})],o2.prototype,"symbolLayers",void 0),h([Ft({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],o2.prototype,"type",void 0),o2=TI=h([ce("esri.symbols.MeshSymbol3D")],o2);const l4=o2;function iwe(e,t,i){return t.imageData?fK({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):NX(t.url,i)}function NX(e,t){return nwe(t)&&!yl(e)&&t?.layer?.parsedUrl?p0(t.layer.parsedUrl.path,"images",e):yw(e,t)}function rwe(e,t,i,r){if(U0(e)){const n=KN(e);if(!n)return;t.contentType=n.mediaType,t.imageData=n.data,i&&i.imageData===t.imageData&&i.url&&b0(i.url,t,"url",r)}else b0(e,t,"url",r)}const FX={json:{read:{source:["imageData","url"],reader:iwe},write:{writer(e,t,i,r){rwe(e,t,this.source,r)}}}},DX={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,i){const r={};return t.imageData&&(r.imageData=t.imageData),t.contentType&&(r.contentType=t.contentType),t.url&&(r.url=NX(t.url,i)),r}}}};function nwe(e){return!(e==null||e.origin!=="service"&&e.origin!=="portal-item"||e.layer?.type!=="feature"&&e.layer?.type!=="stream")}var mL;let Bl=mL=class extends dX{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const n={};return e&&(n.url=e),t&&(n.outline=t),i!=null&&(n.width=Oi(i)),r!=null&&(n.height=Oi(r)),n}clone(){const e=new mL({color:Le(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",Le(this.source)),e}hash(){return`${super.hash()}.${this.color?.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};h([Ft({esriPFS:"picture-fill"},{readOnly:!0})],Bl.prototype,"type",void 0),h([p(FX)],Bl.prototype,"url",void 0),h([p({type:Number,json:{write:!0}})],Bl.prototype,"xscale",void 0),h([p({type:Number,json:{write:!0}})],Bl.prototype,"yscale",void 0),h([p({type:Number,cast:Oi,json:{write:!0}})],Bl.prototype,"width",void 0),h([p({type:Number,cast:Oi,json:{write:!0}})],Bl.prototype,"height",void 0),h([p({type:Number,cast:Oi,json:{write:!0}})],Bl.prototype,"xoffset",void 0),h([p({type:Number,cast:Oi,json:{write:!0}})],Bl.prototype,"yoffset",void 0),h([p(DX)],Bl.prototype,"source",void 0),Bl=mL=h([ce("esri.symbols.PictureFillSymbol")],Bl);const jX=Bl;var yL;let ku=yL=class extends LX{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const r={};return e&&(r.url=e),t!=null&&(r.width=Oi(t)),i!=null&&(r.height=Oi(i)),r}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new yL({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",Le(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};h([p({json:{write:!1}})],ku.prototype,"color",void 0),h([Ft({esriPMS:"picture-marker"},{readOnly:!0})],ku.prototype,"type",void 0),h([p(FX)],ku.prototype,"url",void 0),h([p(DX)],ku.prototype,"source",void 0),h([p({type:Number,cast:Oi,json:{write:!0}})],ku.prototype,"height",void 0),h([Ye("height",["height","size"])],ku.prototype,"readHeight",null),h([p({type:Number,cast:Oi,json:{write:!0}})],ku.prototype,"width",void 0),h([p({json:{write:!1}})],ku.prototype,"size",void 0),ku=yL=h([ce("esri.symbols.PictureMarkerSymbol")],ku);const Yf=ku;var Ry;const UX=Pt.ofType({base:null,key:"type",typeMap:{icon:Tg,object:PF,text:gw}});let ky=Ry=class extends vw{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new UX,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return CX(this)}hasVisibleVerticalOffset(){return FF(this)}clone(){return new Ry({verticalOffset:Le(this.verticalOffset),callout:Le(this.callout),styleOrigin:Le(this.styleOrigin),symbolLayers:Le(this.symbolLayers),thumbnail:Le(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new Ry({symbolLayers:[Tg.fromSimpleMarkerSymbol(e)]})}static fromPictureMarkerSymbol(e){return new Ry({symbolLayers:[Tg.fromPictureMarkerSymbol(e)]})}static fromCIMSymbol(e){if(e.data?.symbol?.type!=="CIMPointSymbol")return null;const i=e.data.symbol;return new Ry(i?.callout?{symbolLayers:[Tg.fromCIMSymbol(e)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}:{symbolLayers:[Tg.fromCIMSymbol(e)]})}static fromTextSymbol(e){return new Ry({symbolLayers:[gw.fromTextSymbol(e)]})}};h([p({type:OX,json:{write:!0}})],ky.prototype,"verticalOffset",void 0),h([p($X)],ky.prototype,"callout",void 0),h([p({type:UX,json:{origins:{"web-scene":{write:!0}}}})],ky.prototype,"symbolLayers",void 0),h([Ft({PointSymbol3D:"point-3d"},{readOnly:!0})],ky.prototype,"type",void 0),ky=Ry=h([ce("esri.symbols.PointSymbol3D")],ky);const Ag=ky;var a2;const VX=Pt.ofType({base:null,key:"type",typeMap:{extrude:cX,fill:n3,icon:Tg,line:o3,object:PF,text:gw,water:MX}});let l2=a2=class extends vw{constructor(e){super(e),this.symbolLayers=new VX,this.type="polygon-3d"}clone(){return new a2({styleOrigin:Le(this.styleOrigin),symbolLayers:Le(this.symbolLayers),thumbnail:Le(this.thumbnail)})}static fromJSON(e){const t=new a2;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.getItemAt(0).type==="fill"&&t.symbolLayers.getItemAt(1).type==="line"){const i=t.symbolLayers.getItemAt(0),r=t.symbolLayers.getItemAt(1);!r.enabled||e.symbolLayers&&e.symbolLayers[1]&&e.symbolLayers[1].enable===!1||(i.outline={size:r.size,color:ee(r.material)?r.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new a2({symbolLayers:[n3.fromSimpleFillSymbol(e)]})}};h([p({type:VX,json:{write:!0}})],l2.prototype,"symbolLayers",void 0),h([Ft({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],l2.prototype,"type",void 0),l2=a2=h([ce("esri.symbols.PolygonSymbol3D")],l2);const a3=l2;var gL;const g$=new ti({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Ly=gL=class extends dX{constructor(...e){super(...e),this.color=new Mt([0,0,0,.25]),this.outline=new Ra,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.style=e),t&&(r.outline=t),i&&(r.color=i),r}clone(){return new gL({color:Le(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};h([p()],Ly.prototype,"color",void 0),h([p()],Ly.prototype,"outline",void 0),h([Ft({esriSFS:"simple-fill"},{readOnly:!0})],Ly.prototype,"type",void 0),h([p({type:g$.apiValues,json:{read:g$.read,write:g$.write}})],Ly.prototype,"style",void 0),Ly=gL=h([ce("esri.symbols.SimpleFillSymbol")],Ly);const fp=Ly;var vL;const v$=new ti({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Bc=vL=class extends LX{constructor(...e){super(...e),this.color=new Mt([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Ra}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string")return e;const n={};return e&&(n.style=e),t!=null&&(n.size=Oi(t)),i&&(n.outline=i),r&&(n.color=r),n}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new vL({angle:this.angle,color:Le(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`}};h([p()],Bc.prototype,"color",void 0),h([it("color")],Bc.prototype,"writeColor",null),h([Ft({esriSMS:"simple-marker"},{readOnly:!0})],Bc.prototype,"type",void 0),h([p()],Bc.prototype,"size",void 0),h([p({type:v$.apiValues,json:{read:v$.read,write:v$.write}})],Bc.prototype,"style",void 0),h([p({type:String,json:{write:!0}})],Bc.prototype,"path",null),h([p({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Ra}},json:{default:null,write:!0}})],Bc.prototype,"outline",void 0),Bc=vL=h([ce("esri.symbols.SimpleMarkerSymbol")],Bc);const pu=Bc;var bL;let Lr=bL=class extends Oa{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new s4,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.text=e),t&&(r.font=t),i&&(r.color=i),r}writeLineWidth(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}castLineWidth(e){return Oi(e)}writeLineHeight(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}clone(){return new bL({angle:this.angle,backgroundColor:Le(this.backgroundColor),borderLineColor:Le(this.borderLineColor),borderLineSize:this.borderLineSize,color:Le(this.color),font:this.font&&this.font.clone(),haloColor:Le(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color?.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};h([p({type:Mt,json:{write:!0}})],Lr.prototype,"backgroundColor",void 0),h([p({type:Mt,json:{write:!0}})],Lr.prototype,"borderLineColor",void 0),h([p({type:Number,json:{write:!0},cast:Oi})],Lr.prototype,"borderLineSize",void 0),h([p({type:s4,json:{write:!0}})],Lr.prototype,"font",void 0),h([p({...wX,json:{write:!0}})],Lr.prototype,"horizontalAlignment",void 0),h([p({type:Boolean,json:{write:!0}})],Lr.prototype,"kerning",void 0),h([p({type:Mt,json:{write:!0}})],Lr.prototype,"haloColor",void 0),h([p({type:Number,cast:Oi,json:{write:!0}})],Lr.prototype,"haloSize",void 0),h([p({type:Boolean,json:{write:!0}})],Lr.prototype,"rightToLeft",void 0),h([p({type:Boolean,json:{write:!0}})],Lr.prototype,"rotated",void 0),h([p({type:String,json:{write:!0}})],Lr.prototype,"text",void 0),h([Ft({esriTS:"text"},{readOnly:!0})],Lr.prototype,"type",void 0),h([p({..._X,json:{write:!0}})],Lr.prototype,"verticalAlignment",void 0),h([p({type:Number,cast:Oi,json:{write:!0}})],Lr.prototype,"xoffset",void 0),h([p({type:Number,cast:Oi,json:{write:!0}})],Lr.prototype,"yoffset",void 0),h([p({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Lr.prototype,"angle",void 0),h([p({type:Number,json:{write:!0}})],Lr.prototype,"width",void 0),h([p({type:Number})],Lr.prototype,"lineWidth",void 0),h([it("lineWidth")],Lr.prototype,"writeLineWidth",null),h([di("lineWidth")],Lr.prototype,"castLineWidth",null),h([p(bX)],Lr.prototype,"lineHeight",void 0),h([it("lineHeight")],Lr.prototype,"writeLineHeight",null),Lr=bL=h([ce("esri.symbols.TextSymbol")],Lr);const bw=Lr;var wL;let Lu=wL=class extends Oa{constructor(e){super(e),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=ee(this.portal)?this.portal:xo.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t?.portal,super.read(e,t)}clone(){return new wL({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const i=ee(t)?t.cache:null,r=i?this._fetchCacheKey:null;if(ee(i)){const a=r&&i.get(r);if(a)return a.clone()}const n=await swe();hr(t);const s=n.resolveWebStyleSymbol(this,{portal:this.portal},e,t);s.catch(a=>{et.getLogger(this.declaredClass).error("#fetchSymbol()","Failed to create symbol from style",a)});const o=await s;return e==="webRef"&&o.type==="point-3d"||e==="cimRef"&&o.type==="cim"?(ee(i)&&i.set(r,o.clone()),o):null}};function swe(){return De(()=>import("./webStyleSymbolUtils-f85d70e6.js"),["./webStyleSymbolUtils-f85d70e6.js","./devEnvironmentUtils-f2a1f21e.js","./preload-helper-388ac9d5.js"],import.meta.url)}h([p({json:{write:!1}})],Lu.prototype,"color",void 0),h([p({type:String,json:{write:!0}})],Lu.prototype,"styleName",void 0),h([p({type:xo,json:{write:!1}})],Lu.prototype,"portal",void 0),h([p({type:String,json:{read:LF,write:b0}})],Lu.prototype,"styleUrl",void 0),h([p({type:ax,json:{read:!1}})],Lu.prototype,"thumbnail",void 0),h([p({type:String,json:{write:!0}})],Lu.prototype,"name",void 0),h([Ft({styleSymbolReference:"web-style"},{readOnly:!0})],Lu.prototype,"type",void 0),h([p()],Lu.prototype,"_fetchCacheKey",null),Lu=wL=h([ce("esri.symbols.WebStyleSymbol")],Lu);const V0=Lu;function u4(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function w0(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Jg={base:Oa,key:"type",typeMap:{"simple-fill":fp,"picture-fill":jX,"picture-marker":Yf,"simple-line":Ra,"simple-marker":pu,text:bw,"label-3d":o4,"line-3d":a4,"mesh-3d":l4,"point-3d":Ag,"polygon-3d":a3,"web-style":V0,cim:r3},errorContext:"symbol"},owe={base:Oa,key:"type",typeMap:{"picture-marker":Yf,"simple-marker":pu,text:bw,"web-style":V0,cim:r3},errorContext:"symbol"},awe=Cm({types:Jg}),c4={base:Oa,key:"type",typeMap:{"simple-fill":fp,"picture-fill":jX,"picture-marker":Yf,"simple-line":Ra,"simple-marker":pu,text:bw,"line-3d":a4,"mesh-3d":l4,"point-3d":Ag,"polygon-3d":a3,"web-style":V0,cim:r3},errorContext:"symbol"},lwe={base:Oa,key:"type",typeMap:{text:bw,"label-3d":o4},errorContext:"symbol"},tV={base:Oa,key:"type",typeMap:{"line-3d":a4,"mesh-3d":l4,"point-3d":Ag,"polygon-3d":a3,"web-style":V0,cim:r3},errorContext:"symbol"},uwe={base:Oa,key:"type",typeMap:{"label-3d":o4},errorContext:"symbol"},BX=$h(Jg);function cwe(e){if(!e)return null;const t={};for(const i in e){const r=Il(e[i]);r&&(t[i]=r)}return Object.keys(t).length!==0?t:null}function hwe(e){if(!ee(e))return null;const t={};for(const i in e){const r=e[i];r&&(t[i]=r.toJSON())}return Object.keys(t).length!==0?t:null}let ea=class extends xr(Je){constructor(...t){super(...t),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:Q2(),configurable:!0})}normalizeCtorArgs(t,i,r,n){return t&&!t.declaredClass?t:{geometry:t,symbol:i,attributes:r,popupTemplate:n}}set aggregateGeometries(t){const i=this._get("aggregateGeometries");JSON.stringify(i)!==JSON.stringify(t)&&this._set("aggregateGeometries",t)}set attributes(t){const i=this._get("attributes");i!==t&&(this._set("attributes",t),this._notifyLayer("attributes",i,t))}set geometry(t){const i=this._get("geometry");i!==t&&(this._set("geometry",t),this._notifyLayer("geometry",i,t))}set symbol(t){const i=this._get("symbol");i!==t&&(this._set("symbol",t),this._notifyLayer("symbol",i,t))}set visible(t){const i=this._get("visible");i!==t&&(this._set("visible",t),this._notifyLayer("visible",i,t))}getEffectivePopupTemplate(t=!1){if(this.popupTemplate)return this.popupTemplate;for(const i of[this.sourceLayer,this.layer])if(i){if("popupTemplate"in i&&i.popupTemplate)return i.popupTemplate;if(t&&"defaultPopupTemplate"in i&&ee(i.defaultPopupTemplate))return i.defaultPopupTemplate}return null}getAttribute(t){return this.attributes?.[t]}setAttribute(t,i){if(this.attributes){const r=this.getAttribute(t);this.attributes[t]=i,this._notifyLayer("attributes",r,i,t)}else this.attributes={[t]:i},this._notifyLayer("attributes",void 0,i,t)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:hwe(this.aggregateGeometries),geometry:ee(this.geometry)?this.geometry.toJSON():null,symbol:ee(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(){ee(this.geometry)&&this.geometry.type==="mesh"&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}_notifyLayer(t,i,r,n){if(!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:t,oldValue:i,newValue:r};t==="attributes"&&(s.attributeName=n),this.layer.graphicChanged(s)}};h([p({value:null,json:{read:cwe}})],ea.prototype,"aggregateGeometries",null),h([p({value:null})],ea.prototype,"attributes",null),h([p({value:null,types:wc,json:{read:Il}})],ea.prototype,"geometry",null),h([p({type:Boolean})],ea.prototype,"isAggregate",void 0),h([p({clonable:"reference"})],ea.prototype,"layer",void 0),h([p({type:Rm})],ea.prototype,"popupTemplate",void 0),h([p({clonable:"reference"})],ea.prototype,"sourceLayer",void 0),h([p({value:null,types:Jg})],ea.prototype,"symbol",null),h([p({type:Boolean,value:!0})],ea.prototype,"visible",null),ea=h([ce("esri.Graphic")],ea),function(e){e.generateUID=Q2}(ea||(ea={}));const As=ea;var _L;let u2=_L=class extends Je{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new _L({minValue:this.minValue,maxValue:this.maxValue})}};h([p({type:Number,json:{write:!0}})],u2.prototype,"minValue",void 0),h([p({type:Number,json:{write:!0}})],u2.prototype,"maxValue",void 0),u2=_L=h([ce("esri.renderer.support.AuthoringInfoClassBreakInfo")],u2);var xL;let Mf=xL=class extends Je{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new xL({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:Le(this.classBreakInfos)})}};h([p({type:String,json:{write:!0}})],Mf.prototype,"field",void 0),h([p({type:String,json:{write:!0}})],Mf.prototype,"normalizationField",void 0),h([p({type:String,json:{write:!0}})],Mf.prototype,"label",void 0),h([p({type:[u2],json:{write:!0}})],Mf.prototype,"classBreakInfos",void 0),Mf=xL=h([ce("esri.renderers.support.AuthoringInfoFieldInfo")],Mf);var SL;const EE=new ti({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),ME=new ti({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),iV={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},rV=["high-to-low","above-and-below","centered-on","extremes"],nV=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],sV=["seconds","minutes","hours","days","months","years"];let ta=SL=class extends Je{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new SL({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};h([p({types:iV,json:{write:!0}})],ta.prototype,"endTime",void 0),h([di("endTime")],ta.prototype,"castEndTime",null),h([p({type:String,json:{write:!0}})],ta.prototype,"field",void 0),h([p({type:Number,json:{write:!0}})],ta.prototype,"maxSliderValue",void 0),h([p({type:Number,json:{write:!0}})],ta.prototype,"minSliderValue",void 0),h([p({types:iV,json:{write:!0}})],ta.prototype,"startTime",void 0),h([di("startTime")],ta.prototype,"castStartTime",null),h([p({type:EE.apiValues,value:null,json:{type:EE.jsonValues,read:EE.read,write:EE.write}})],ta.prototype,"style",null),h([p({type:nV,value:null,json:{type:nV,origins:{"web-scene":{type:rV,write:{writer:(e,t)=>{rV.includes(e)&&(t.theme=e)}}}},write:!0}})],ta.prototype,"theme",null),h([p({type:ME.apiValues,json:{type:ME.jsonValues,read:ME.read,write:ME.write}})],ta.prototype,"type",void 0),h([p({type:sV,json:{type:sV,write:!0}})],ta.prototype,"units",void 0),ta=SL=h([ce("esri.renderers.support.AuthoringInfoVisualVariable")],ta);const dwe=ta;let AI=class extends Je{constructor(t){super(t),this.type=null}};h([p({readOnly:!0,json:{read:!1,write:!0}})],AI.prototype,"type",void 0),AI=h([ce("esri.rest.support.ColorRamp")],AI);const DF=AI;var EL;let Py=EL=class extends DF{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new EL({fromColor:Le(this.fromColor),toColor:Le(this.toColor),algorithm:this.algorithm})}};h([Ft({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],Py.prototype,"algorithm",void 0),h([p({type:Mt,json:{type:[wi],write:!0}})],Py.prototype,"fromColor",void 0),h([p({type:Mt,json:{type:[wi],write:!0}})],Py.prototype,"toColor",void 0),h([p({type:["algorithmic"]})],Py.prototype,"type",void 0),Py=EL=h([ce("esri.rest.support.AlgorithmicColorRamp")],Py);const jF=Py;var ML;let c2=ML=class extends DF{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new ML({colorRamps:Le(this.colorRamps)})}};h([p({type:[jF],json:{write:!0}})],c2.prototype,"colorRamps",void 0),h([p({type:["multipart"]})],c2.prototype,"type",void 0),c2=ML=h([ce("esri.rest.support.MultipartColorRamp")],c2);const h4=c2,UF={key:"type",base:DF,typeMap:{algorithmic:jF,multipart:h4}};function VF(e){return e&&e.type?e.type==="algorithmic"?jF.fromJSON(e):e.type==="multipart"?h4.fromJSON(e):null:null}var IL;const ty=new ti({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),IE=new ti({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),oV=new ti({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),aV=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],pwe=["high-to-low","above-and-below","above","below","90-10"],fwe=["flow-line","wave-front"],mwe=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let Qr=IL=class extends Je{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?VF(e):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new IL({classificationMethod:this.classificationMethod,colorRamp:Le(this.colorRamp),fadeRatio:Le(this.fadeRatio),fields:this.fields&&this.fields.slice(0),field1:Le(this.field1),field2:Le(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};h([p({type:ty.apiValues,value:null,json:{type:ty.jsonValues,read:ty.read,write:ty.write,origins:{"web-document":{default:"manual",type:ty.jsonValues,read:ty.read,write:ty.write}}}})],Qr.prototype,"classificationMethod",null),h([p({types:UF,json:{write:!0}})],Qr.prototype,"colorRamp",void 0),h([Ye("colorRamp")],Qr.prototype,"readColorRamp",null),h([p({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Qr.prototype,"fadeRatio",void 0),h([p({type:[String],value:null,json:{write:!0}})],Qr.prototype,"fields",null),h([p({type:Mf,value:null,json:{write:!0}})],Qr.prototype,"field1",null),h([p({type:Mf,value:null,json:{write:!0}})],Qr.prototype,"field2",null),h([p({type:fwe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Qr.prototype,"flowTheme",null),h([p({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],Qr.prototype,"focus",null),h([p({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],Qr.prototype,"isAutoGenerated",void 0),h([p({type:Number,value:null,json:{type:wi,write:!0}})],Qr.prototype,"numClasses",null),h([p({type:aV,json:{type:aV,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Qr.prototype,"lengthUnit",void 0),h([p({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Qr.prototype,"maxSliderValue",void 0),h([p({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Qr.prototype,"minSliderValue",void 0),h([p({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Qr.prototype,"statistics",null),h([p({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],Qr.prototype,"standardDeviationInterval",null),h([p({type:IE.apiValues,value:null,json:{type:IE.jsonValues,read:IE.read,write:IE.write,origins:{"web-scene":{type:oV.jsonValues,write:{writer:oV.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],Qr.prototype,"type",null),h([p({type:[dwe],json:{write:!0}})],Qr.prototype,"visualVariables",void 0),h([p({type:mwe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Qr.prototype,"univariateSymbolStyle",null),h([p({type:pwe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Qr.prototype,"univariateTheme",null),Qr=IL=h([ce("esri.renderers.support.AuthoringInfo")],Qr);const l3=Qr,b$=new ti({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let h2=class extends Je{constructor(t){super(t),this.authoringInfo=null,this.type=null}async getRequiredFields(t){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,t),Array.from(i).sort()}getSymbol(t,i){}async getSymbolAsync(t,i){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};h([p({type:l3,json:{write:!0}})],h2.prototype,"authoringInfo",void 0),h([p({type:b$.apiValues,readOnly:!0,json:{type:b$.jsonValues,read:!1,write:{writer:b$.write,ignoreOrigin:!0}}})],h2.prototype,"type",void 0),h2=h([ce("esri.renderers.Renderer")],h2);const mp=h2;function ywe(e){return e.match(gwe)?.[1]?.replace(/\\'/g,"'")??null}const gwe=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;var TL;let Zg=TL=class extends Je{constructor(){super(...arguments),this.title=null}clone(){return new TL({title:this.title})}};h([p({type:String,json:{write:!0}})],Zg.prototype,"title",void 0),Zg=TL=h([ce("esri.renderers.support.LegendOptions")],Zg);var AL;let CI=AL=class extends Zg{constructor(){super(...arguments),this.showLegend=null}clone(){return new AL({title:this.title,showLegend:this.showLegend})}};h([p({type:Boolean,json:{write:!0}})],CI.prototype,"showLegend",void 0),CI=AL=h([ce("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],CI);const zX=CI,w$=new ti({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Pu=class extends Je{constructor(t){super(t),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(t){return t==null?t:typeof t=="function"?(et.getLogger(this.declaredClass).error(".field: field must be a string value"),null):KS(t)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};h([p()],Pu.prototype,"index",void 0),h([p({type:w$.apiValues,readOnly:!0,json:{read:w$.read,write:w$.write}})],Pu.prototype,"type",void 0),h([p({type:String,json:{write:!0}})],Pu.prototype,"field",void 0),h([di("field")],Pu.prototype,"castField",null),h([p({type:String,json:{write:!0}})],Pu.prototype,"valueExpression",void 0),h([p({type:String,json:{write:!0}})],Pu.prototype,"valueExpressionTitle",void 0),h([p({readOnly:!0})],Pu.prototype,"arcadeRequired",null),h([p({type:zX,json:{write:!0}})],Pu.prototype,"legendOptions",void 0),Pu=h([ce("esri.renderers.visualVariables.VisualVariable")],Pu);const u3=Pu;var CL;let Ny=CL=class extends Je{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,i){t[i]=e??0}clone(){return new CL({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};h([p({type:Mt,json:{type:[wi],write:!0}})],Ny.prototype,"color",void 0),h([p({type:String,json:{write:!0}})],Ny.prototype,"label",void 0),h([p({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Ny.prototype,"value",void 0),h([it("value")],Ny.prototype,"writeValue",null),Ny=CL=h([ce("esri.renderers.visualVariables.support.ColorStop")],Ny);const vwe=Ny;var $L;let Fy=$L=class extends u3{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){return new $L({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};h([p({readOnly:!0})],Fy.prototype,"cache",null),h([p({type:["color"],json:{type:["colorInfo"]}})],Fy.prototype,"type",void 0),h([p({type:String,json:{write:!0}})],Fy.prototype,"normalizationField",void 0),h([p({type:[vwe],json:{write:!0}})],Fy.prototype,"stops",null),Fy=$L=h([ce("esri.renderers.visualVariables.ColorVariable")],Fy);const GX=Fy;var OL;let sf=OL=class extends Je{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return eS(t.transparency)}writeOpacity(e,t,i){t[i]=n4(e)}clone(){return new OL({label:this.label,opacity:this.opacity,value:this.value})}};h([p({type:String,json:{write:!0}})],sf.prototype,"label",void 0),h([p({type:Number,json:{type:wi,write:{target:"transparency"}}})],sf.prototype,"opacity",void 0),h([Ye("opacity",["transparency"])],sf.prototype,"readOpacity",null),h([it("opacity")],sf.prototype,"writeOpacity",null),h([p({type:Number,json:{write:!0}})],sf.prototype,"value",void 0),sf=OL=h([ce("esri.renderers.visualVariables.support.OpacityStop")],sf);const bwe=sf;var RL;let Dy=RL=class extends u3{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){return new RL({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};h([p({readOnly:!0})],Dy.prototype,"cache",null),h([p({type:["opacity"],json:{type:["transparencyInfo"]}})],Dy.prototype,"type",void 0),h([p({type:String,json:{write:!0}})],Dy.prototype,"normalizationField",void 0),h([p({type:[bwe],json:{write:!0}})],Dy.prototype,"stops",null),Dy=RL=h([ce("esri.renderers.visualVariables.OpacityVariable")],Dy);const qX=Dy;var kL;let ud=kL=class extends u3{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,t,i,r){if(r&&r.messages){const n=`visualVariables[${this.index}]`;r.messages.push(new Ce("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:n+".valueExpressionTitle",context:r}))}}clone(){return new kL({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};h([p({readOnly:!0})],ud.prototype,"cache",null),h([p({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],ud.prototype,"axis",void 0),h([p({type:["rotation"],json:{type:["rotationInfo"]}})],ud.prototype,"type",void 0),h([p({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],ud.prototype,"rotationType",void 0),h([p({type:String,json:{write:!0}})],ud.prototype,"valueExpressionTitle",void 0),h([it("web-scene","valueExpressionTitle")],ud.prototype,"writeValueExpressionTitleWebScene",null),ud=kL=h([ce("esri.renderers.visualVariables.RotationVariable")],ud);const d4=ud;var LL;let z1=LL=class extends Je{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new LL({label:this.label,size:this.size,value:this.value})}};h([p({type:String,json:{write:!0}})],z1.prototype,"label",void 0),h([p({type:Number,cast:Oi,json:{write:!0}})],z1.prototype,"size",void 0),h([p({type:Number,json:{write:!0}})],z1.prototype,"value",void 0),z1=LL=h([ce("esri.renderers.visualVariables.support.SizeStop")],z1);const G1=z1;var PL;let $I=PL=class extends zX{constructor(){super(...arguments),this.customValues=null}clone(){return new PL({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};h([p({type:[Number],json:{write:!0}})],$I.prototype,"customValues",void 0),$I=PL=h([ce("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],$I);const wwe=$I;var qd,os;function Vf(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function iS(e){return e!=null&&!isNaN(e)&&isFinite(e)}function HX(e){return e.valueExpression?qd.Expression:e.field&&typeof e.field=="string"?qd.Field:qd.Unknown}function _we(e,t){const i=t||HX(e),r=e.valueUnit||"unknown";return i===qd.Unknown?os.Constant:e.stops?os.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?os.ClampedLinear:r==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?os.Proportional:os.Additive:os.Identity:os.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(qd||(qd={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(os||(os={}));function wot(e){}function xwe(e){return()=>e}const BF={inches:Qa(1,"meters","inches"),feet:Qa(1,"meters","feet"),"us-feet":Qa(1,"meters","us-feet"),yards:Qa(1,"meters","yards"),miles:Qa(1,"meters","miles"),"nautical-miles":Qa(1,"meters","nautical-miles"),millimeters:Qa(1,"meters","millimeters"),centimeters:Qa(1,"meters","centimeters"),decimeters:Qa(1,"meters","decimeters"),meters:Qa(1,"meters","meters"),kilometers:Qa(1,"meters","kilometers"),"decimal-degrees":1/Zye(1,"meters",_r.radius)},dm=et.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),lV=new As,OI=Math.PI,WX=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function JX(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="color"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void dm.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const n=typeof t=="number",s=n?null:t,o=s&&s.attributes;let a=n?t:null;const l=r.field,{ipData:u,hasExpression:c}=r.cache;let d=r.cache.compiledFunc;if(!l&&!c){const g=r.stops;return g&&g[0]&&g[0].color}if(typeof a!="number")if(c){if(Re(i)||Re(i.arcade))return void dm.error("Use of arcade expressions requires an arcade context");const g={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},v=i.arcade.arcadeUtils,b=v.getViewInfo(g),x=v.createExecContext(s,b);if(!d){const S=v.createSyntaxTree(r.valueExpression);d=v.createFunction(S),r.cache.compiledFunc=d}a=v.executeFunction(d,x)}else o&&(a=o[l]);const f=r.normalizationField,m=o!=null&&f!=null?parseFloat(o[f]):void 0;if(a!=null&&(!f||n||!isNaN(m)&&m!==0)){isNaN(m)||n||(a/=m);const g=GF(a,u);if(g){const v=g[0],b=g[1],x=v===b?r.stops[v].color:Mt.blendColors(r.stops[v].color,r.stops[b].color,g[2],ee(i)?i.color:void 0);return new Mt(x)}}}function ZX(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="opacity"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void dm.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const n=typeof t=="number",s=n?null:t,o=s&&s.attributes;let a=n?t:null;const l=r.field,{ipData:u,hasExpression:c}=r.cache;let d=r.cache.compiledFunc;if(!l&&!c){const g=r.stops;return g&&g[0]&&g[0].opacity}if(typeof a!="number")if(c){if(Re(i)||Re(i.arcade))return void dm.error("Use of arcade expressions requires an arcade context");const g={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},v=i.arcade.arcadeUtils,b=v.getViewInfo(g),x=v.createExecContext(s,b);if(!d){const S=v.createSyntaxTree(r.valueExpression);d=v.createFunction(S),r.cache.compiledFunc=d}a=v.executeFunction(d,x)}else o&&(a=o[l]);const f=r.normalizationField,m=o!=null&&f!=null?parseFloat(o[f]):void 0;if(a!=null&&(!f||n||!isNaN(m)&&m!==0)){isNaN(m)||n||(a/=m);const g=GF(a,u);if(g){const v=g[0],b=g[1];if(v===b)return r.stops[v].opacity;{const x=r.stops[v].opacity;return x+(r.stops[b].opacity-x)*g[2]}}}}function zF(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(m=>m.type==="rotation"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void dm.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const n=r.axis||"heading",s=n==="heading"&&r.rotationType==="arithmetic"?90:0,o=n==="heading"&&r.rotationType==="arithmetic"?-1:1,a=typeof t=="number"?null:t,l=a&&a.attributes,u=r.field,{hasExpression:c}=r.cache;let d=r.cache.compiledFunc,f=0;if(!u&&!c)return f;if(c){if(Re(i)||Re(i.arcade))return void dm.error("Use of arcade expressions requires an arcade context");const m={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},g=i.arcade.arcadeUtils,v=g.getViewInfo(m),b=g.createExecContext(a,v);if(!d){const x=g.createSyntaxTree(r.valueExpression);d=g.createFunction(x),r.cache.compiledFunc=d}f=g.executeFunction(d,b)}else l&&(f=l[u]||0);return f=typeof f!="number"||isNaN(f)?null:s+o*f,f}function Swe(e,t,i){const r=typeof t=="number",n=r?null:t,s=n&&n.attributes;let o=r?t:null;const{isScaleDriven:a}=e.cache;let l=e.cache.compiledFunc;if(a){const c=ee(i)?i.scale:void 0,d=ee(i)?i.view:void 0;o=c==null||d==="3d"?Ewe(e):c}else if(!r)switch(e.inputValueType){case qd.Expression:{if(Re(i)||Re(i.arcade))return void dm.error("Use of arcade expressions requires an arcade context");const c={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},d=i.arcade.arcadeUtils,f=d.getViewInfo(c),m=d.createExecContext(n,f);if(!l){const g=d.createSyntaxTree(e.valueExpression);l=d.createFunction(g),e.cache.compiledFunc=l}o=d.executeFunction(l,m);break}case qd.Field:s&&(o=s[e.field]);break;case qd.Unknown:o=null}if(!iS(o))return null;if(r||!e.normalizationField)return o;const u=s?parseFloat(s[e.normalizationField]):null;return iS(u)&&u!==0?o/u:null}function Ewe(e){let t=null,i=null;const r=e.stops;return r?(t=r[0].value,i=r[r.length-1].value):(t=e.minDataValue||0,i=e.maxDataValue||0),(t+i)/2}function p4(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(s=>s.type==="size"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void dm.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const n=KX(Swe(r,t,i),r,t,i,r.cache.ipData);return n==null||isNaN(n)?0:n}function wa(e,t,i){return e==null?null:Vf(e)?p4(e,t,i):iS(e)?e:null}function YX(e,t,i){return iS(i)&&e>i?i:iS(t)&&e<t?t:e}function Mwe(e,t,i,r){return e+((wa(t.minSize,i,r)||t.minDataValue)??0)}function Iwe(e,t,i){const r=e.stops;let n=r&&r.length&&r[0].size;return n==null&&(n=e.minSize),wa(n,t,i)}function Twe(e,t,i,r){const n=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),s=wa(t.minSize,i,r),o=wa(t.maxSize,i,r),a=ee(r)?r.shape:void 0;if(e<=t.minDataValue)return s;if(e>=t.maxDataValue)return o;if(s==null||o==null)return null;if(t.scaleBy==="area"&&a){const l=a==="circle",u=l?OI*(s/2)**2:s*s,c=u+n*((l?OI*(o/2)**2:o*o)-u);return l?2*Math.sqrt(c/OI):Math.sqrt(c)}return s+n*(o-s)}function Awe(e,t,i,r){const n=ee(r)?r.shape:void 0,s=e/t.minDataValue,o=wa(t.minSize,i,r),a=wa(t.maxSize,i,r);let l=null;return l=n==="circle"?2*Math.sqrt(s*(o/2)**2):n==="square"||n==="diamond"||n==="image"?Math.sqrt(s*o**2):s*o,YX(l,o,a)}function Cwe(e,t,i,r,n){const[s,o,a]=GF(e,n);if(s===o)return wa(t.stops?.[s].size,i,r);{const l=wa(t.stops?.[s].size,i,r);return l+(wa(t.stops?.[o].size,i,r)-l)*a}}function $we(e,t,i,r){const n=(ee(r)&&r.resolution?r.resolution:1)*BF[t.valueUnit],s=wa(t.minSize,i,r),o=wa(t.maxSize,i,r),{valueRepresentation:a}=t;let l=null;return l=a==="area"?2*Math.sqrt(e/OI)/n:a==="radius"||a==="distance"?2*e/n:e/n,YX(l,s,o)}function KX(e,t,i,r,n){switch(t.transformationType){case os.Additive:return Mwe(e,t,i,r);case os.Constant:return Iwe(t,i,r);case os.ClampedLinear:return Twe(e,t,i,r);case os.Proportional:return Awe(e,t,i,r);case os.Stops:return Cwe(e,t,i,r,n);case os.RealWorldSize:return $we(e,t,i,r);case os.Identity:return e;case os.Unknown:return null}}function Owe(e,t,i){const{isScaleDriven:r}=e.cache;if(!(r&&i==="3d"||t))return null;const n={scale:t,view:i};let s=wa(e.minSize,lV,n),o=wa(e.maxSize,lV,n);if(s!=null||o!=null){if(s>o){const a=o;o=s,s=a}return{minSize:s,maxSize:o}}}function Rwe(e,t,i){if(!e.visualVariables)return;const r=[],n=[],s=[],o=[],a=[];for(const l of e.visualVariables)switch(l.type){case"color":n.push(l);break;case"opacity":s.push(l);break;case"rotation":a.push(l);break;case"size":o.push(l)}return n.forEach(l=>{const u=JX(l,t,i);r.push({variable:l,value:u})}),s.forEach(l=>{const u=ZX(l,t,i);r.push({variable:l,value:u})}),a.forEach(l=>{const u=zF(l,t,i);r.push({variable:l,value:u})}),o.forEach(l=>{const u=p4(l,t,i);r.push({variable:l,value:u})}),r.filter(l=>l.value!=null)}function GF(e,t){if(!t)return;let i=0,r=t.length-1;return t.some((n,s)=>e<n?(r=s,!0):(i=s,!1)),[i,r,(e-t[i])/(t[r]-t[i])]}function QX(e,t,i){const r=["proportional","proportional","proportional"];for(const n of e){const s=n.useSymbolValue?"symbol-value":p4(n,t,i);switch(n.axis){case"width":r[0]=s;break;case"depth":r[1]=s;break;case"height":r[2]=s;break;case"width-and-depth":r[0]=s,r[1]=s;break;case"all":case void 0:case null:r[0]=s,r[1]=s,r[2]=s;break;default:n.axis}}return r}const qF=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:QX,getColor:JX,getOpacity:ZX,getRotationAngle:zF,getSize:p4,getSizeForValue:KX,getSizeFromNumberOrVariable:wa,getSizeRangeAtScale:Owe,getVisualVariableValues:Rwe,viewScaleRE:WX},Symbol.toStringTag,{value:"Module"}));var NL;const TE=new ti({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),FL=new ti({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function uV(e){if(e!=null)return typeof e=="string"||typeof e=="number"?Oi(e):e.type==="size"?Vf(e)?e:(delete(e={...e}).type,new qi(e)):void 0}function cV(e,t,i){if(typeof e!="object")return e;const r=new qi;return r.read(e,i),r}let qi=NL=class extends u3{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&WX.test(this.valueExpression)}}set expression(e){et.getLogger(this.declaredClass).warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),e==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}set index(e){Vf(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),Vf(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return HX(this)}set maxDataValue(e){e&&this.stops&&(et.getLogger(this.declaredClass).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(et.getLogger(this.declaredClass).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return uV(e)}readMaxSize(e,t,i){return cV(e,t,i)}set minDataValue(e){e&&this.stops&&(et.getLogger(this.declaredClass).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(et.getLogger(this.declaredClass).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return uV(e)}readMinSize(e,t,i){return cV(e,t,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value):e&&(et.getLogger(this.declaredClass).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return _we(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,i,r){if(e==="$view.scale"){if(r&&r.messages){const n=this.index,s=typeof n=="string"?n:`visualVariables[${n}]`;r.messages.push(new Ce("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpression",context:r}))}}else t[i]=e}readValueUnit(e){return e?FL.read(e):null}clone(){return new NL({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:Vf(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:Vf(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===os.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===os.Stops){const e=this.stops;if(!e)return this;const t=e.map(r=>r.size).reverse(),i=e.length;for(let r=0;r<i;r++)e[r].size=t[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};h([p({readOnly:!0})],qi.prototype,"cache",null),h([p({type:TE.apiValues,json:{type:TE.jsonValues,origins:{"web-map":{read:!1}},read:TE.read,write:TE.write}})],qi.prototype,"axis",void 0),h([p({type:String,value:null,json:{read:!1}})],qi.prototype,"expression",null),h([p()],qi.prototype,"index",null),h([p({type:String,readOnly:!0})],qi.prototype,"inputValueType",null),h([p({type:wwe,json:{write:!0}})],qi.prototype,"legendOptions",void 0),h([p({type:Number,value:null,json:{write:!0}})],qi.prototype,"maxDataValue",null),h([p({type:Number,value:null,json:{write:!0}})],qi.prototype,"maxSize",null),h([di("maxSize")],qi.prototype,"castMaxSize",null),h([Ye("maxSize")],qi.prototype,"readMaxSize",null),h([p({type:Number,value:null,json:{write:!0}})],qi.prototype,"minDataValue",null),h([p({type:Number,value:null,json:{write:!0}})],qi.prototype,"minSize",null),h([di("minSize")],qi.prototype,"castMinSize",null),h([Ye("minSize")],qi.prototype,"readMinSize",null),h([p({type:String,json:{write:!0}})],qi.prototype,"normalizationField",void 0),h([p({readOnly:!0})],qi.prototype,"arcadeRequired",null),h([p({type:String})],qi.prototype,"scaleBy",void 0),h([p({type:[G1],value:null,json:{write:!0}})],qi.prototype,"stops",null),h([p({type:["outline"],json:{write:!0}})],qi.prototype,"target",void 0),h([p({type:String,readOnly:!0})],qi.prototype,"transformationType",null),h([p({type:["size"],json:{type:["sizeInfo"]}})],qi.prototype,"type",void 0),h([p({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],qi.prototype,"useSymbolValue",void 0),h([p({type:String,json:{write:!0}})],qi.prototype,"valueExpression",void 0),h([Ye("valueExpression",["valueExpression","expression"])],qi.prototype,"readValueExpression",null),h([it("web-scene","valueExpression")],qi.prototype,"writeValueExpressionWebScene",null),h([p({type:["radius","diameter","area","width","distance"],json:{write:!0}})],qi.prototype,"valueRepresentation",void 0),h([p({type:FL.apiValues,json:{write:FL.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],qi.prototype,"valueUnit",void 0),h([Ye("valueUnit")],qi.prototype,"readValueUnit",null),qi=NL=h([ce("esri.renderers.visualVariables.SizeVariable")],qi);const B0=qi,kwe={color:GX,size:B0,opacity:qX,rotation:d4},Lwe=new ti({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),Pwe=/^\[([^\]]+)\]$/i;let RI=class extends Lt{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(t){if(this._resetVariables(),(t=t&&t.filter(i=>!!i))&&t.length){for(const i of t)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&t.sort((i,r)=>{let n=null;return n=i.target===r.target?0:i.target?1:-1,n});for(let i=0;i<t.length;i++)t[i].index=i;this._set("visualVariables",t)}else this._set("visualVariables",t)}readVariables(t,i,r){const{rotationExpression:n,rotationType:s}=i,o=n&&n.match(Pwe),a=o&&o[1];if(a&&(t||(t=[]),t.push({type:"rotationInfo",rotationType:s,field:a})),t)return t.map(l=>{const u=Lwe.read(l.type),c=kwe[u];c||(et.getLogger(this.declaredClass).warn(`Unknown variable type: ${u}`),r&&r.messages&&r.messages.push(new El("visual-variable:unsupported",`visualVariable of type '${u}' is not supported`,{definition:l,context:r})));const d=new c;return d.read(l,r),d})}writeVariables(t,i){const r=[];for(const n of t){const s=n.toJSON(i);s&&r.push(s)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};h([p()],RI.prototype,"visualVariables",null),RI=h([ce("esri.renderers.visualVariables.VisualVariableFactory")],RI);const Nwe=RI,Fwe={base:u3,key:"type",typeMap:{opacity:qX,color:GX,rotation:d4,size:B0}},Lm=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new Nwe}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,r,n){return this._vvFactory.readVariables(i,r,n)}writeVisualVariables(i,r,n,s){r[n]=this._vvFactory.writeVariables(i,s)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,r){return i?this.getVisualVariablesForType(i,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(i,r){const n=this.visualVariables;return n?n.filter(s=>s.type===i&&(typeof r=="string"?s.target===r:r!==!1||!s.target)):[]}async collectVVRequiredFields(i,r){let n=[];this.visualVariables&&(n=n.concat(this.visualVariables));for(const s of n)s&&(s.field&&vl(i,r,s.field),s.normalizationField&&vl(i,r,s.normalizationField),s.valueExpression&&(Dwe(s.valueExpression,i,r)||await Ho(i,r,s.valueExpression)))}};return h([p({types:[Fwe],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),h([Ye("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),h([it("visualVariables")],t.prototype,"writeVisualVariables",null),t=h([ce("esri.renderers.mixins.VisualVariablesMixin")],t),t};function Dwe(e,t,i){const r=ywe(e);return!!ee(r)&&(vl(t,i,r),!0)}const a_={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function jwe(e,t=a_){if(!e)return{symbol:null};const{retainId:i=a_.retainId,ignoreDrivers:r=a_.ignoreDrivers,hasLabelingContext:n=a_.hasLabelingContext,retainCIM:s=a_.retainCIM}=t;let o=null;if(w0(e)||e instanceof V0)o=e.clone();else if(e.type==="cim"){const a=e.data?.symbol?.type;if(a!=="CIMPointSymbol")return{error:new Ce("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${a||"unknown"}' is unsupported in 3D`,{symbol:e})};o=s?e.clone():Ag.fromCIMSymbol(e)}else if(e instanceof Ra)o=a4.fromSimpleLineSymbol(e);else if(e instanceof pu)o=Ag.fromSimpleMarkerSymbol(e);else if(e instanceof Yf)o=Ag.fromPictureMarkerSymbol(e);else if(e instanceof fp)o=t.geometryType&&t.geometryType==="mesh"?l4.fromSimpleFillSymbol(e):a3.fromSimpleFillSymbol(e);else{if(!(e instanceof bw))return{error:new Ce("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};o=n?o4.fromTextSymbol(e):Ag.fromTextSymbol(e)}if(i&&o&&o.type!=="cim"&&(o.id=e.id),r&&w0(o))for(let a=0;a<o.symbolLayers.length;++a)o.symbolLayers.getItemAt(a)._ignoreDrivers=!0;return{symbol:o}}function fA(e,t,i,r){const n=XX(e,{},{context:r,isLabelSymbol:!1});ee(n)&&(t[i]=n)}function hV(e,t,i,r){const n=XX(e,{},{context:r,isLabelSymbol:!0});ee(n)&&(t[i]=n)}function dV(e){return e instanceof vw||e instanceof V0}function XX(e,t,i){if(Re(e))return null;const{context:r,isLabelSymbol:n}=i,s=r?.origin,o=r?.messages;if(s==="web-scene"&&!dV(e)){const a=jwe(e,{retainCIM:!0,hasLabelingContext:n});return ee(a.symbol)?a.symbol.write(t,r):(o?.push(new Ce("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:a.error})),null)}return(s==="web-map"||s==="portal-item"&&!qK(r?.layer))&&dV(e)?(o?.push(new Ce("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:r})),null):e.write(t,r)}function HF(e,t){return awe(e,null,t)}const ww={types:c4,json:{write:{writer:fA},origins:{"web-scene":{types:tV,write:{writer:fA},read:{reader:Cm({types:tV})}}}}},eee={types:{base:Oa,key:"type",typeMap:{"simple-fill":Jg.typeMap["simple-fill"],"picture-fill":Jg.typeMap["picture-fill"],"polygon-3d":Jg.typeMap["polygon-3d"]}},json:{write:{writer:fA},origins:{"web-scene":{type:a3,write:{writer:fA}}}}},kI={cast:e=>e==null||typeof e=="string"||typeof e=="number"?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e?.toString()}}}};var DL;let of=DL=class extends Je{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new DL({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};h([p({type:String,json:{write:!0}})],of.prototype,"description",void 0),h([p({type:String,json:{write:!0}})],of.prototype,"label",void 0),h([p({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],of.prototype,"minValue",void 0),h([p({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],of.prototype,"maxValue",void 0),h([p(ww)],of.prototype,"symbol",void 0),of=DL=h([ce("esri.renderers.support.ClassBreakInfo")],of);const Ab=of;var jL;const tee="log",LI="percent-of-total",PI="field",AE=new ti({esriNormalizeByLog:tee,esriNormalizeByPercentOfTotal:LI,esriNormalizeByField:PI}),Uwe=nn(Ab);let Pn=jL=class extends Lm(mp){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,i){if(!Array.isArray(e))return;let r=t.minValue;return e.map(n=>{const s=new Ab;return s.read(n,i),s.minValue==null&&(s.minValue=r),s.maxValue==null&&(s.maxValue=s.minValue),r=s.maxValue,s})}writeClassBreakInfos(e,t,i,r){const n=e.map(s=>s.write({},r));this._areClassBreaksConsecutive()&&n.forEach(s=>delete s.classMinValue),t[i]=n}castField(e){return e==null?e:typeof e=="function"?(et.getLogger(this.declaredClass).error(".field: field must be a string value"),null):KS(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,i=this.normalizationTotal!=null;return t||i?(e=t&&PI||i&&LI||null,t&&i&&et.getLogger(this.declaredClass).warn("warning: both normalizationField and normalizationTotal are set!")):e!==PI&&e!==LI||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,i){let r=null;r=typeof e=="number"?new Ab({minValue:e,maxValue:t,symbol:BX(i)}):Uwe(Le(e)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const n=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(n[0]===e&&n[1]===t){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(Re(t)||Re(t.arcade))&&et.getLogger(this.declaredClass).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let i=t;this.valueExpression&&(Re(t)||Re(t.arcade))&&(i={...i,arcade:await Xd()});const r=this.getBreakIndex(e,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(e,t){if(this.valueExpression&&(Re(t)||Re(t.arcade)))return void et.getLogger(this.declaredClass).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(e,t);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(Re(t)||Re(t.arcade))){const n=await Xd(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),i={...i,arcade:n}}const r=this.getBreakIndex(e,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((r,n)=>r+n.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new jL({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:Le(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:Le(this.visualVariables),legendOptions:Le(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),Ho(e,t,this.valueExpression)];vl(e,t,this.field),vl(e,t,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:n,arcade:s}=LN(t,{}),{valueExpression:o}=this;let a=this._compiledValueExpression.valueExpression===o?this._compiledValueExpression.compiledFunction:null;const l=s.arcadeUtils;if(!a){const c=l.createSyntaxTree(o);a=l.createFunction(c),this._compiledValueExpression.compiledFunction=a}this._compiledValueExpression.valueExpression=o;const u=l.executeFunction(a,l.createExecContext(e,l.getViewInfo({viewingMode:i,scale:r,spatialReference:n})));return this._getBreakIndexfromInfos(u)}_getBreakIndexForField(e){const t=this.field,i=e.attributes,r=this.normalizationType;let n=parseFloat(i[t]);if(r){const s=this.normalizationTotal,o=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===tee)n=Math.log(n)*Math.LOG10E;else if(r!==LI||s==null||isNaN(s)){if(r===PI&&!isNaN(o)){if(isNaN(n)||isNaN(o))return-1;n/=o}}else n=n/s*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=e&&(t?e<=r[1]:e<r[1]))return i}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let i=1;i<t;i++)if(e[i-1].maxValue!==e[i].minValue)return!1;return!0}};h([p(eee)],Pn.prototype,"backgroundFillSymbol",void 0),h([p({type:[Ab]})],Pn.prototype,"classBreakInfos",void 0),h([Ye("classBreakInfos")],Pn.prototype,"readClassBreakInfos",null),h([it("classBreakInfos")],Pn.prototype,"writeClassBreakInfos",null),h([p({type:String,json:{write:!0}})],Pn.prototype,"defaultLabel",void 0),h([p(ww)],Pn.prototype,"defaultSymbol",void 0),h([p({type:String,json:{write:!0}})],Pn.prototype,"field",void 0),h([di("field")],Pn.prototype,"castField",null),h([p({type:Boolean})],Pn.prototype,"isMaxInclusive",void 0),h([p({type:Zg,json:{write:!0}})],Pn.prototype,"legendOptions",void 0),h([p({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Pn.prototype,"minValue",null),h([p({type:String,json:{write:!0}})],Pn.prototype,"normalizationField",void 0),h([p({type:Number,cast:e=>ul(e),json:{write:!0}})],Pn.prototype,"normalizationTotal",void 0),h([p({type:AE.apiValues,value:null,json:{type:AE.jsonValues,read:AE.read,write:AE.write}})],Pn.prototype,"normalizationType",null),h([Ft({classBreaks:"class-breaks"})],Pn.prototype,"type",void 0),h([p({type:String,json:{write:!0}})],Pn.prototype,"valueExpression",void 0),h([p({type:String,json:{write:!0}})],Pn.prototype,"valueExpressionTitle",void 0),Pn=jL=h([ce("esri.renderers.ClassBreaksRenderer")],Pn);const _w=Pn,_$=-3;var If;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(If||(If={}));let xot=class{constructor(t,i,r){this._namespace=t,this._storage=i,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(t,i,r,n=0){this._storage.put(this._namespace+t,i,r,n)}get(t){const i=this._storage.get(this._namespace+t);return i===void 0?++this._miss:++this._hit,i}pop(t){const i=this._storage.pop(this._namespace+t);return i===void 0?++this._miss:++this._hit,i}updateSize(t,i,r){this._storage.updateSize(this._namespace+t,i,r)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}},iee=class{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new Jf,this._users=new Jf}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,i){this._removeFuncs.push([t,i])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(i=>i[0]!==t)}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,i,r,n){const s=this._db.get(t);if(s&&(this._size-=s.size,this._db.delete(t),s.entry!==i&&this._notifyRemove(t,s.entry,If.ALL)),r>this._maxSize)return void this._notifyRemove(t,i,If.ALL);if(i===void 0)return void console.warn("Refusing to cache undefined entry ");if(!r||r<0)return void console.warn("Refusing to cache entry with invalid size "+r);const o=1+Math.max(n,_$)-_$;this._db.set(t,{entry:i,size:r,lifetime:o,lives:o}),this._size+=r,this._checkSizeLimit()}updateSize(t,i,r){const n=this._db.get(t);if(n&&n.entry===i){for(this._size-=n.size;r>this._maxSize;){const s=this._notifyRemove(t,i,If.SOME);if(!(ee(s)&&s>0))return void this._db.delete(t);r=s}n.size=r,this._size+=r,this._checkSizeLimit()}}pop(t){const i=this._db.get(t);if(i)return this._size-=i.size,this._db.delete(t),++this._hit,i.entry;++this._miss}get(t){const i=this._db.get(t);if(i!==void 0)return this._db.delete(t),i.lives=i.lifetime,this._db.set(t,i),++this._hit,i.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((o,a)=>{const l=o.lifetime;r[l]=(r[l]||0)+o.size,this._users.forAll(u=>{const c=u.namespace;if(a.startsWith(c)){const d=i[c]||0;i[c]=d+o.size}})});const n={};this._users.forAll(o=>{const a=o.namespace;if(!isNaN(o.hitRate)&&o.hitRate>0){const l=i[a]||0;i[a]=l,n[a]=Math.round(100*o.hitRate)+"%"}else n[a]="0%"});const s=Object.keys(i);s.sort((o,a)=>i[a]-i[o]),s.forEach(o=>t[o]=Math.round(i[o]/2**20)+"MB / "+n[o]);for(let o=r.length-1;o>=0;--o){const a=r[o];a&&(t["Priority "+(o+_$-1)]=Math.round(a/this.size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){this._db.forEach((i,r)=>{r.startsWith(t)&&(this._size-=i.size,this._db.delete(r),this._notifyRemove(r,i.entry,If.ALL))})}clearAll(){this._db.forEach((t,i)=>this._notifyRemove(i,t.entry,If.ALL)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,i,r){let n;return this._removeFuncs.some(s=>{if(t.startsWith(s[0])){const o=s[1](i,r);return typeof o=="number"&&(n=o),!0}return!1}),n}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,i]of this._db){if(this._db.delete(t),i.lives<=1){this._size-=i.size;const r=this._notifyRemove(t,i.entry,If.SOME);ee(r)&&r>0&&(this._size+=r,i.lives=i.lifetime,i.size=r,this._db.set(t,i))}else--i.lives,this._db.set(t,i);if(this._size<=.9*this.maxSize)return}}},ree=class{constructor(t,i){this._storage=new iee,this._storage.maxSize=t,i&&this._storage.registerRemoveFunc("",i)}put(t,i,r){this._storage.put(t,i,r,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}};const pV="esri.renderers.support.DictionaryLoader",Vwe={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let WF=class{constructor(t,i,r){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new ree(100),this._dictionaryPromise=null,this.url=t,this.config=i,this.fieldMap=r}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,i){let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{r=await this._dictionaryPromise}catch(m){if(fs(m))return this._dictionaryPromise=null,null}const n={};if(this.fieldMap)for(const m of this._symbolFields){const g=this.fieldMap[m];if(g&&t.attributes[g]!=null){const v=""+t.attributes[g];n[m]=v}else n[m]=""}const s=r?.(n,i);if(!s||typeof s!="string")return null;const o=NN(s).toString(),a=this._symbolCache.get(o);if(a)return a.catch(()=>{this._symbolCache.pop(o)}),a;const l=s.split(";"),u=[],c=[];for(const m of l)if(m)if(m.includes("po:")){const g=m.substr(3).split("|");if(g.length===3){const v=g[0],b=g[1];let x=g[2];if(b==="DashTemplate")x=x.split(" ").map(S=>Number(S));else if(b==="Color"){const S=new Mt(x).toRgba();x=[S[0],S[1],S[2],255*S[3]]}else x=Number(x);c.push({primitiveName:v,propertyName:b,value:x})}}else if(m.includes("|")){for(const g of m.split("|"))if(this._itemNames.has(g)){u.push(g);break}}else this._itemNames.has(m)&&u.push(m);const d=!ee(t.geometry)||!t.geometry.hasZ&&t.geometry.type==="point",f=this._cimPartsToCIMSymbol(u,c,d,i);return this._symbolCache.put(o,f,1),f}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void et.getLogger(pV).error("no valid URL!");const i=St(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:ee(t)?t.signal:null}),[{data:r}]=await Promise.all([i,Xd()]);if(!r)throw this._dictionaryPromise=null,new Ce("esri.renderers.DictionaryRenderer","Bad dictionary data!");const n=r.expression,s=r.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+r.cimRefTemplateUrl,this._itemNames=new Set(r.itemsNames),this._symbolFields=s.symbol;const o={};if(this.config){const u=this.config;for(const c in u)o[c]=u[c]}if(s.configuration)for(const u of s.configuration)o.hasOwnProperty(u.name)||(o[u.name]=u.value);const a=[];if(ee(t)&&t.fields&&this.fieldMap)for(const u of this._symbolFields){const c=this.fieldMap[u],d=t.fields.filter(f=>f.name===c);d.length>0&&a.push({...d[0],name:u})}const l=mve(n,ee(t)?t.spatialReference:null,a,o).then(u=>{const c={scale:0};return(d,f)=>{if(Re(u))return null;const m=u.repurposeFeature({geometry:null,attributes:d});return c.scale=ee(f)?f.scale??void 0:void 0,u.evaluate({$feature:m,$view:c})}}).catch(u=>(et.getLogger(pV).error("Creating dictinoary expression failed:",u),null));return this._dictionaryPromise=l,l}async _cimPartsToCIMSymbol(t,i,r,n){const s=new Array(t.length);for(let l=0;l<t.length;l++)s[l]=this._getSymbolPart(t[l],n);const o=await Promise.all(s),a=this.fieldMap;if(a)for(const l of o)nee(l,a);return new r3({data:this._combineSymbolParts(o,i,r)})}async _getSymbolPart(t,i){if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(s=>s.data);const r=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,t),n=St(r,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(t,n);try{return(await n).data}catch(s){throw this._ongoingRequests.delete(t),s}}_combineSymbolParts(t,i,r){if(!t||t.length===0)return null;const n={...t[0]};if(t.length>1){n.symbolLayers=[];for(const s of t){const o=s;n.symbolLayers.unshift(...o.symbolLayers)}}return r&&(n.callout=Vwe),{type:"CIMSymbolReference",symbol:n,primitiveOverrides:i}}};function nee(e,t){if(!e)return;const i=e.symbolLayers;if(!i)return;let r=i.length;for(;r--;){const n=i[r];n&&n.enable!==!1&&n.type==="CIMVectorMarker"&&Bwe(n,t)}}function Bwe(e,t){const i=e.markerGraphics;if(i)for(const r of i){if(!r)continue;const n=r.symbol;if(n)switch(n.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":nee(n,t);break;case"CIMTextSymbol":n.fieldMap=t}}}const Tot=Object.freeze(Object.defineProperty({__proto__:null,DictionaryLoader:WF},Symbol.toStringTag,{value:"Module"}));var UL;let Nu=UL=class extends Lm(mp){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new WF(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,i,r){r?.origin||super.writeVisualVariables(e,t,i,r)}clone(){return new UL({config:Le(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:Le(this.fieldMap),url:Le(this.url),visualVariables:Le(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await Ho(e,t,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];t.has(r)&&e.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};h([p({type:WF})],Nu.prototype,"_loader",null),h([p({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Nu.prototype,"config",void 0),h([p({type:Object,json:{write:!0}})],Nu.prototype,"fieldMap",void 0),h([p({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Nu.prototype,"scaleExpression",void 0),h([it("scaleExpression")],Nu.prototype,"writeData",null),h([p({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],Nu.prototype,"scaleExpressionTitle",void 0),h([p({type:String,json:{write:!0}})],Nu.prototype,"url",void 0),h([it("visualVariables")],Nu.prototype,"writeVisualVariables",null),Nu=UL=h([ce("esri.renderers.DictionaryRenderer")],Nu);const zwe=Nu;var VL;let cd=VL=class extends Je{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(et.getLogger(this.declaredClass).error(".field: field must be a string value"),null):KS(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new VL({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};h([p({type:Mt,json:{type:[Number],write:!0}})],cd.prototype,"color",void 0),h([p({type:String,json:{write:!0}})],cd.prototype,"field",void 0),h([di("field")],cd.prototype,"castField",null),h([p({type:String,json:{write:!0}})],cd.prototype,"label",void 0),h([p({type:String,json:{write:!0}})],cd.prototype,"valueExpression",void 0),h([p({type:String,json:{write:!0}})],cd.prototype,"valueExpressionTitle",void 0),cd=VL=h([ce("esri.renderers.support.AttributeColorInfo")],cd);const see=cd;var BL;let NI=BL=class extends Je{constructor(){super(...arguments),this.unit=null}clone(){return new BL({unit:this.unit})}};h([p({type:String,json:{write:!0}})],NI.prototype,"unit",void 0),NI=BL=h([ce("esri.renderers.support.DotDensityLegendOptions")],NI);const Gwe=NI;var zL;let ia=zL=class extends Lm(mp){constructor(e){super(e),this.attributes=null,this.backgroundColor=new Mt([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new Ra,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new fp({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes?.reduce((e,t)=>e+t.getAttributeHash(),"")??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new zL({attributes:Le(this.attributes),backgroundColor:Le(this.backgroundColor),dotBlendingEnabled:Le(this.dotBlendingEnabled),dotShape:Le(this.dotShape),dotSize:Le(this.dotSize),dotValue:Le(this.dotValue),legendOptions:Le(this.legendOptions),outline:Le(this.outline),referenceScale:Le(this.referenceScale),visualVariables:Le(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){return`${this.attributes?.map(t=>t.field||t.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes??[])i.valueExpression&&await Ho(e,t,i.valueExpression),i.field&&e.add(i.field)}};h([p({type:[see],json:{write:!0}})],ia.prototype,"attributes",void 0),h([p({type:Mt,json:{write:!0}})],ia.prototype,"backgroundColor",void 0),h([p({type:Boolean,json:{write:!0}})],ia.prototype,"dotBlendingEnabled",void 0),h([p({type:String,json:{write:!1}})],ia.prototype,"dotShape",void 0),h([p({type:Number,json:{write:!0}})],ia.prototype,"dotSize",void 0),h([p({type:Gwe,json:{write:!0}})],ia.prototype,"legendOptions",void 0),h([p({type:Ra,json:{default:null,write:!0}})],ia.prototype,"outline",void 0),h([p({type:Number,json:{write:!0}})],ia.prototype,"dotValue",void 0),h([p({type:Number,json:{write:!0}})],ia.prototype,"referenceScale",void 0),h([p({type:Number,json:{write:!0}})],ia.prototype,"seed",void 0),h([Ft({dotDensity:"dot-density"})],ia.prototype,"type",void 0),ia=zL=h([ce("esri.renderers.DotDensityRenderer")],ia);const qwe=ia;var GL;let d2=GL=class extends Je{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new GL({color:this.color,ratio:this.ratio})}};h([p({type:Mt,json:{type:[wi],default:null,write:!0}})],d2.prototype,"color",void 0),h([p({type:Number,json:{write:!0}})],d2.prototype,"ratio",void 0),d2=GL=h([ce("esri.renderers.support.HeatmapColorStop")],d2);const lx=d2;let q1=class extends xr(Je){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};h([p({type:String,json:{write:!0}})],q1.prototype,"minLabel",void 0),h([p({type:String,json:{write:!0}})],q1.prototype,"maxLabel",void 0),h([p({type:String,json:{write:!0}})],q1.prototype,"title",void 0),q1=h([ce("esri.renderers.support.HeatmapLegendOptions")],q1);function f4(){return[0,0,0,0]}function Hwe(e){return[e[0],e[1],e[2],e[3]]}function xw(e,t,i,r){return[e,t,i,r]}function Wwe(e){const t=f4(),i=Math.min(4,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function Jwe(e,t){return new Float64Array(e,t,4)}function oee(){return f4()}function aee(){return xw(1,1,1,1)}function lee(){return xw(1,0,0,0)}function uee(){return xw(0,1,0,0)}function cee(){return xw(0,0,1,0)}function hee(){return xw(0,0,0,1)}const Zwe=oee(),Ywe=aee(),Kwe=lee(),Qwe=uee(),Xwe=cee(),e_e=hee();Object.freeze(Object.defineProperty({__proto__:null,ONES:Ywe,UNIT_W:e_e,UNIT_X:Kwe,UNIT_Y:Qwe,UNIT_Z:Xwe,ZEROS:Zwe,clone:Hwe,create:f4,createView:Jwe,fromArray:Wwe,fromValues:xw,ones:aee,unitW:hee,unitX:lee,unitY:uee,unitZ:cee,zeros:oee},Symbol.toStringTag,{value:"Module"}));const JF=2.4;function t_e(e){return tp(e*JF)}function i_e(e){return lX(e)/JF}function r_e(e,t,i,r){let{color:n,ratio:s}=t,{color:o,ratio:a}=i;a===s&&(a===1?s-=1e-6:a+=1e-6);const l=Ta((r-s)/(a-s),0,1);gQ(e,n.toArray(),o.toArray(),l)}function Cot(e){const i=new Uint8ClampedArray(2048);if(e=e.filter(({ratio:a})=>a>=0&&a<=1).sort((a,l)=>a.ratio-l.ratio).map(({color:a,ratio:l})=>({color:a,ratio:Math.max(l,.001)})),e.length<1)return i;let r=e[0],n=e[0],s=1;const o=f4();for(let a=0;a<512;a++){const l=(a+.5)/512;for(;l>n.ratio&&s<e.length;)r=n,n=e[s++];r_e(o,r,n,l),i.set(o,4*a)}return i}function $ot(e,t,i,r){const{radius:n,fieldOffset:s,field:o}=t,a=Math.round(lX(n)),l=new Float64Array(i*r);let u,c=Number.NEGATIVE_INFINITY;const d=o_e(o,s),f=new Set;for(const m of e){const g=m.getCursor();for(;g.next();){const v=g.getObjectId();if(f.has(v))continue;f.add(v);const b=g.readLegacyPointGeometry(),x=128;if(b.x<-x||b.x>=i+x||b.y<-x||b.y>r+x)continue;const S=+d(g),T=Math.max(0,Math.round(b.x)-a),_=Math.max(0,Math.round(b.y)-a),M=Math.min(r,Math.round(b.y)+a),I=Math.min(i,Math.round(b.x)+a);for(let $=_;$<M;$++)for(let L=T;L<I;L++){const B=$*i+L,z=s_e(b.x-L,b.y-$,a);u=l[B]+=z*S,u>c&&(c=u)}}}return{matrix:l.buffer,max:c}}function Oot(e,t,i,r,n,s){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);const o=e.getImageData(0,0,t,t);i&&r&&o.data.set(new Uint8ClampedArray(n_e(t,i,r,n,s))),e.putImageData(o,0,0)}function n_e(e,t,i,r,n){const s=new Uint32Array(e*e),o="buffer"in t?t:new Float64Array(t),a="buffer"in i?new Uint32Array(i.buffer):new Uint32Array(new Uint8Array(i).buffer),l=a.length/(n-r);for(let u=0;u<o.length;u++){const c=o[u],d=Math.floor((c-r)*l);s[u]=a[Ta(d,0,a.length-1)]}return s.buffer}function s_e(e,t,i){const r=Math.sqrt(e**2+t**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function Rot(e,t){return typeof e=="function"?e:e?typeof t=="string"?i=>-1*+i[e]:i=>+i[e]+t:()=>1}function o_e(e,t){return e!=null?typeof t=="string"?i=>-1*+i.readAttribute(e):i=>+i.readAttribute(e)+t:i=>1}var qL;const dee="esri.renderers.HeatmapRenderer",a_e=et.getLogger(dee);function fV(e){if(e!=null){const{maxDensity:t,minDensity:i,radius:r}=e;if(t!=null||i!=null||r!=null){const{blurRadius:n,maxPixelIntensity:s,minPixelIntensity:o,...a}=e;return a}}return e}let Xn=qL=class extends mp{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new lx({ratio:0,color:new Mt("rgba(255, 140, 0, 0)")}),new lx({ratio:.75,color:new Mt("rgba(255, 140, 0, 1)")}),new lx({ratio:.9,color:new Mt("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(e){return fV(e)}get blurRadius(){return i_e(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",t_e(e)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(JF**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(e,t){this._warnedProps[e]||zn(this).getDefaultOrigin()==="user"&&(this._warnedProps[e]=!0,hw(()=>{LR(a_e,e,{replacement:`${String(t)} (suggested value: ${this._get(t)})`,version:"4.24"})}))}read(e,t){e=fV(e),super.read(e,t)}getSymbol(){return new pu}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&await vl(e,t,i),r&&typeof r=="string"&&await Ho(e,t,r)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new qL({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:Le(this.colorStops),field:this.field,legendOptions:Le(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};h([p({type:l3,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Xn.prototype,"authoringInfo",void 0),h([p({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Xn.prototype,"blurRadius",null),h([p({type:[lx],json:{write:!0}})],Xn.prototype,"colorStops",void 0),h([p({type:String,json:{write:!0}})],Xn.prototype,"field",void 0),h([p({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:i==null})},origins:{"web-scene":{write:!1}}}})],Xn.prototype,"fieldOffset",void 0),h([p({type:q1,json:{write:!0}})],Xn.prototype,"legendOptions",void 0),h([p({type:Number,json:{write:!0}})],Xn.prototype,"maxDensity",void 0),h([p({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Xn.prototype,"maxPixelIntensity",null),h([p({type:Number,json:{write:!0}})],Xn.prototype,"minDensity",void 0),h([p({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Xn.prototype,"minPixelIntensity",null),h([p({type:Number,cast:Oi,json:{write:!0}})],Xn.prototype,"radius",void 0),h([p({type:Number,range:{min:0},json:{default:0,write:!0}})],Xn.prototype,"referenceScale",void 0),h([Ft({heatmap:"heatmap"})],Xn.prototype,"type",void 0),h([p({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],Xn.prototype,"valueExpression",void 0),h([p({type:String})],Xn.prototype,"valueExpressionTitle",void 0),h([p({readOnly:!0})],Xn.prototype,"_pixelIntensityToDensity",null),Xn=qL=h([ce(dee)],Xn);const pee=Xn;let fg=class extends xr(Je){constructor(){super(...arguments),this.color=new Mt([0,0,0,0]),this.label=null,this.threshold=0}};h([p({type:Mt,json:{write:!0}})],fg.prototype,"color",void 0),h([p({type:String,json:{write:!0}})],fg.prototype,"label",void 0),h([p({type:Number,range:{min:0,max:1},json:{write:!0}})],fg.prototype,"threshold",void 0),fg=h([ce("esri.renderers.support.OthersCategory")],fg);let FI=class extends xr(Je){constructor(){super(...arguments),this.title=null}};h([p({type:String,json:{write:!0}})],FI.prototype,"title",void 0),FI=h([ce("esri.renderers.support.PieChartLegendOptions")],FI);let Ha=class extends Lm(xr(mp)){constructor(t){super(t),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new Mt([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new fg,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){return new pu({size:this.size?this.size/2+(this.outline?.width||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(ee)}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,i)=>t+i.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((t,i)=>t+JSON.stringify(i),"")}async collectRequiredFields(t,i){await this.collectVVRequiredFields(t,i);for(const r of this.attributes)r.valueExpression&&await Ho(t,i,r.valueExpression),r.field&&t.add(r.field)}};h([p({type:[see],json:{write:!0}})],Ha.prototype,"attributes",void 0),h([p({type:fp,json:{default:null,write:!0}})],Ha.prototype,"backgroundFillSymbol",void 0),h([p({type:Mt,json:{write:!0}})],Ha.prototype,"defaultColor",void 0),h([p({type:String,json:{write:!0}})],Ha.prototype,"defaultLabel",void 0),h([p({type:Number,range:{min:0,max:1},json:{write:!0}})],Ha.prototype,"holePercentage",void 0),h([p({type:fg,json:{write:!0}})],Ha.prototype,"othersCategory",void 0),h([p({type:FI,json:{write:!0}})],Ha.prototype,"legendOptions",void 0),h([p({type:Ra,json:{default:null,write:!0}})],Ha.prototype,"outline",void 0),h([p({type:Number,cast:Oi,json:{write:!0}})],Ha.prototype,"size",void 0),h([Ft({pieChart:"pie-chart"})],Ha.prototype,"type",void 0),Ha=h([ce("esri.renderers.PieChartRenderer")],Ha);const l_e=Ha;var HL;let jy=HL=class extends Lm(mp){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new HL({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:Le(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};h([p({type:String,json:{write:!0}})],jy.prototype,"description",void 0),h([p({type:String,json:{write:!0}})],jy.prototype,"label",void 0),h([p(ww)],jy.prototype,"symbol",void 0),h([Ft({simple:"simple"})],jy.prototype,"type",void 0),jy=HL=h([ce("esri.renderers.SimpleRenderer")],jy);const _0=jy;function nt(e,t,i={}){return ZF(e,t,i,fee)}function Tl(e,t,i={}){return ZF(e,t,i,mee)}function ZF(e,t,i={},r){let n=null;const s=i.once?(o,a)=>{r(o)&&(yn(n),t(o,a))}:(o,a)=>{r(o)&&t(o,a)};if(n=Xfe(e,s,i.sync,i.equals),i.initial){const o=e();s(o,o)}return n}function ms(e,t,i,r={}){let n=null,s=null,o=null;function a(){n&&s&&(s.remove(),r.onListenerRemove?.(n),n=null,s=null)}function l(c){r.once&&r.once&&yn(o),i(c)}const u=nt(e,(c,d)=>{a(),U5(c)&&(n=c,s=V5(c,t,l),r.onListenerAdd?.(c))},{sync:r.sync,initial:!0});return o=cw(()=>{u.remove(),a()}),o}function m4(e,t){return u_e(e,mee,t)}function u_e(e,t,i){if(Sl(i))return Promise.reject(fr());const r=e();if(t?.(r))return Promise.resolve(r);let n=null;function s(){n=yn(n)}return new Promise((o,a)=>{n=F5([ba(i,()=>{s(),a(fr())}),ZF(e,l=>{s(),o(l)},{sync:!1,once:!0},t??fee)])})}function fee(e){return!0}function mee(e){return!!e}const wl={sync:!0},Pi={initial:!0},Tf={sync:!0,initial:!0},c_e=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function WL(e){return e instanceof Lt}function mV(e){return e instanceof Pt?Object.keys(e.items):WL(e)?zn(e).keys():e?Object.keys(e):[]}function CE(e,t){return e instanceof Pt?e.items[t]:e[t]}function h_e(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function ux(e){return e?e.declaredClass:null}function yee(e,t){const i=e.diff;if(i&&typeof i=="function")return i(e,t);const r=mV(e),n=mV(t);if(r.length===0&&n.length===0)return;if(!r.length||!n.length||h_e(e,t))return{type:"complete",oldValue:e,newValue:t};const s=n.filter(d=>!r.includes(d)),o=r.filter(d=>!n.includes(d)),a=r.filter(d=>n.includes(d)&&CE(e,d)!==CE(t,d)).concat(s,o).sort(),l=ux(e);if(l&&c_e.includes(l)&&a.length)return{type:"complete",oldValue:e,newValue:t};let u;const c=WL(e)&&WL(t);for(const d of a){const f=CE(e,d),m=CE(t,d);let g;if((c||typeof f!="function"&&typeof m!="function")&&f!==m&&(f!=null||m!=null)){if(i&&i[d]&&typeof i[d]=="function")g=i[d](f,m);else if(f instanceof Date&&m instanceof Date){if(f.getTime()===m.getTime())continue;g={type:"complete",oldValue:f,newValue:m}}else g=typeof f=="object"&&typeof m=="object"&&ux(f)===ux(m)?yee(f,m):{type:"complete",oldValue:f,newValue:m};ee(g)&&(ee(u)?u.diff[d]=g:u={type:"partial",diff:{[d]:g}})}}return u}function d_e(e,t){if(Re(e))return!1;const i=t.split(".");let r=e;for(const n of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const s=r.diff[n];if(!s)return!1;r=s}}return!0}function Not(e,t){for(const i of t)if(d_e(e,i))return!0;return!1}function p_e(e,t){if(!(typeof e=="function"||typeof t=="function"||Re(e)&&Re(t)))return Re(e)||Re(t)||typeof e=="object"&&typeof t=="object"&&ux(e)!==ux(t)?{type:"complete",oldValue:e,newValue:t}:yee(e,t)}let H1=class extends xr(Je){constructor(t){super(t),this.value=null,this.value2=null,this.value3=null}};h([p(kI)],H1.prototype,"value",void 0),h([p(kI)],H1.prototype,"value2",void 0),h([p(kI)],H1.prototype,"value3",void 0),H1=h([ce("esri.renderers.support.UniqueValue")],H1);const Kv=H1;let af=class extends xr(Je){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(t){if(t==null)return null;const i=typeof(t=Array.isArray(t)?t:[t])[0];return i==="string"||i==="number"?t.map(r=>new Kv({value:r})):i==="object"?t[0]instanceof Kv?t:t.map(r=>new Kv(r)):null}};h([p({type:String,json:{write:!0}})],af.prototype,"description",void 0),h([p({type:String,json:{write:!0}})],af.prototype,"label",void 0),h([p(ww)],af.prototype,"symbol",void 0),h([p({type:[Kv],json:{type:[[String]],read:{reader:e=>e?e.map(t=>new Kv({value:t[0],value2:t[1],value3:t[2]})):null},write:{writer:(e,t)=>{const i=[];for(const r of e){const n=[r.value,r.value2,r.value3].filter(ee).map(s=>s.toString());i.push(n)}t.values=i}}}})],af.prototype,"values",void 0),h([di("values")],af.prototype,"castValues",null),af=h([ce("esri.renderers.support.UniqueValueClass")],af);const gee=af;let p2=class extends xr(Je){constructor(t){super(t),this.heading=null,this.classes=null}};h([p({type:String,json:{write:!0}})],p2.prototype,"heading",void 0),h([p({type:[gee],json:{write:!0}})],p2.prototype,"classes",void 0),p2=h([ce("esri.renderers.support.UniqueValueGroup")],p2);const JL=p2;var ZL;let Uy=ZL=class extends Je{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new ZL({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${e}`}};h([p({type:String,json:{write:!0}})],Uy.prototype,"description",void 0),h([p({type:String,json:{write:!0}})],Uy.prototype,"label",void 0),h([p(ww)],Uy.prototype,"symbol",void 0),h([p(kI)],Uy.prototype,"value",void 0),Uy=ZL=h([ce("esri.renderers.support.UniqueValueInfo")],Uy);const Yg=Uy,f_e=()=>!!Ze("enable-feature:force-wosr"),Uot=()=>!!Ze("enable-feature:SceneLayer-editing");let x$={};async function m_e(e,t){try{return{data:(await b_e(e,t)).data,baseUrl:Iye(e),styleUrl:e}}catch(i){return da(i),null}}function y_e(e,t,i){const r=ee(t.portal)?t.portal:xo.getDefault();let n;const s=`${r.url} - ${r.user&&r.user.username} - ${e}`;return x$[s]||(x$[s]=g_e(e,r,i).then(o=>(n=o,o.fetchData())).then(o=>({data:o,baseUrl:n.itemUrl??"",styleName:e}))),x$[s]}function g_e(e,t,i){return t.load(i).then(()=>{const r=new Dd({disableExtraQuery:!0,query:`owner:${yV} AND type:${gV} AND typekeywords:"${e}"`});return t.queryItems(r,i)}).then(({results:r})=>{let n=null;const s=e.toLowerCase();if(r&&Array.isArray(r)){for(const o of r)if(o.typeKeywords?.some(l=>l.toLowerCase()===s)&&o.type===gV&&o.owner===yV){n=o;break}}if(!n)throw new Ce("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return n.load(i)})}function v_e(e,t,i){return e&&ee(e.styleUrl)?m_e(e.styleUrl,i):e&&ee(e.styleName)?y_e(e.styleName,t,i):Promise.reject(new Ce("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function Vot(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function Bot(e,t){if(t==="cimRef")return e.cimRef;if(e.formatInfos&&!f_e()){for(const i of e.formatInfos)if(i.type==="gltf")return i.href}return e.webRef}function b_e(e,t){const i={responseType:"json",query:{f:"json"},...t};return St(ml(e),i)}const yV="esri_en",gV="Style",zot="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var f2;const vee="esri.renderers.UniqueValueRenderer",Op=et.getLogger(vee),vV="uvInfos-watcher",bV="uvGroups-watcher",w_e=",",__e=nn(Yg);function x_e(e){const{field1:t,field2:i,field3:r,fieldDelimiter:n,uniqueValueInfos:s,valueExpression:o}=e,a=!(!t||!i);return[{classes:(s??[]).map(l=>{const{symbol:u,label:c,value:d,description:f}=l,[m,g,v]=a?d?.toString()?.split(n||"")||[]:[d],b=[];return(t||o)&&b.push(m),i&&b.push(g),r&&b.push(v),{symbol:u,label:c,values:[b],description:f}})}]}let Pr=f2=class extends Lm(mp){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,i){if(!t&&!i)return;if(!t||!i)return{type:"complete",oldValue:t,newValue:i};let r=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<i.length;s++){const o=t.find(a=>a.value===i[s].value);o?p_e(o,i[s])?(n.changed.push({type:"complete",oldValue:o,newValue:i[s]}),r=!0):n.unchanged.push({oldValue:o,newValue:i[s]}):(n.added.push(i[s]),r=!0)}for(let s=0;s<t.length;s++)i.find(o=>o.value===t[s].value)||(n.removed.push(t[s]),r=!0);return r?n:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return e==null||typeof e=="function"?e:KS(e)}writeField(e,t,i,r){typeof e=="string"?t[i]=e:r&&r.messages?r.messages.push(new Ce("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Op.error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,i){return i.portal||xo.getDefault()}readStyleOrigin(e,t,i){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const r=yw(t.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(e,t,i,r){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=s3(e.styleUrl,r))}set uniqueValueGroups(e){this.styleOrigin?Op.error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?Op.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){if(this.styleOrigin)return void Op.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof e=="object"?__e(e):new Yg({value:e,symbol:BX(t)}),this.uniqueValueInfos?.push(i),this._valueInfoMap[i.value]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void Op.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t){for(let i=0;i<t.length;i++)if(t[i].value===e+""){delete this._valueInfoMap[e],t.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let i=t;return this.valueExpression&&(Re(t)||Re(t.arcade))&&(i={...i,arcade:await Xd()}),this._getUniqueValueInfo(e,i)}getSymbol(e,t){if(this.valueExpression&&(Re(t)||Re(t.arcade)))return void Op.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(e,t);return i&&i.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(Re(i)||Re(i.arcade))){const n=await Xd(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),i={...i,arcade:n}}const r=this._getUniqueValueInfo(e,i);return r&&r.symbol||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos??[])t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=this.uniqueValueInfos?.reduce((r,n)=>r+n.getMeshHash(),"");return`${e}.${t}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new f2({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:Le(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:Le(this.visualVariables),legendOptions:Le(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:Le(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=Le(this.uniqueValueInfos),i=Le(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(Le(this.styleOrigin))),Object.freeze(t),Object.freeze(i)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",i),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),Ho(e,t,this.valueExpression)];vl(e,t,this.field),vl(e,t,this.field2),vl(e,t,this.field3),await Promise.all(i)}populateFromStyle(){return v_e(this.styleOrigin,{portal:this.portal}).then(e=>{const t=[];return this._valueInfoMap={},e&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(i=>{const r=new V0({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:i.name});this.defaultSymbol||i.name!==e.data.defaultItem||(this.defaultSymbol=r,this._isDefaultSymbolDerived=!0);const n=new Yg({value:i.name,symbol:r});t.push(n),this._valueInfoMap[i.name]=n}),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&this.uniqueValueInfos?.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",w_e)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[t.value+""]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(vV);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const i of e)t.push(nt(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(r,n)=>{r!==n&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(t,vV)}}_watchUniqueValueGroups(){this.removeHandles(bV);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const i of e){t.push(nt(()=>({classes:i.classes}),(r,n)=>{r!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const r of i.classes??[])t.push(nt(()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description}),(n,s)=>{n!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(t,bV)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:i,field3:r,fieldDelimiter:n,uniqueValueGroups:s,valueExpression:o}=this;if(!t&&!o)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const a=!(!t||!i);for(const l of s)for(const u of l.classes??[]){const{symbol:c,label:d,values:f,description:m}=u;for(const g of f??[]){const{value:v,value2:b,value3:x}=g,S=[v];i&&S.push(b),r&&S.push(x);const T=a?S.join(n||""):S[0];e.push(new Yg({symbol:c,label:d,value:T,description:m}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:i,valueExpression:r,fieldDelimiter:n,uniqueValueInfos:s}=this;if(!t&&!r||!s.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!t||!i),a=s.map(u=>{const{symbol:c,label:d,value:f,description:m}=u,[g,v,b]=o?f?.toString()?.split(n||"")||[]:[f];return new gee({symbol:c,label:d,description:m,values:[new Kv({value:g,value2:v,value3:b})]})}),l=[new JL({classes:a})];e&&Object.freeze(l),this._set("uniqueValueGroups",l),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:n,arcade:s}=LN(t,{});let o=this._cache.compiledFunc;const a=s.arcadeUtils;if(!o){const u=a.createSyntaxTree(this.valueExpression);o=a.createFunction(u),this._cache.compiledFunc=o}const l=a.executeFunction(o,a.createExecContext(e,a.getViewInfo({viewingMode:i,scale:r,spatialReference:n})));return this._valueInfoMap[l+""]}_getUnqiueValueInfoForFields(e){const t=this.field,i=e.attributes;let r;if(typeof t!="function"&&this.field2){const n=this.field2,s=this.field3,o=[];t&&o.push(i[t]),n&&o.push(i[n]),s&&o.push(i[s]),r=o.join(this.fieldDelimiter||"")}else typeof t=="function"?r=t(e):t&&(r=i[t]);return this._valueInfoMap[r+""]}static fromPortalStyle(e,t){const i=new f2(t&&t.properties);i._set("styleOrigin",Object.freeze({styleName:e})),i._set("portal",t&&t.portal||xo.getDefault());const r=i.populateFromStyle();return r.catch(n=>{Op.error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",n)}),r}static fromStyleUrl(e,t){const i=new f2(t&&t.properties);i._set("styleOrigin",Object.freeze({styleUrl:e}));const r=i.populateFromStyle();return r.catch(n=>{Op.error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",n)}),r}};h([p({readOnly:!0})],Pr.prototype,"_cache",null),h([Ft({uniqueValue:"unique-value"})],Pr.prototype,"type",void 0),h([p(eee)],Pr.prototype,"backgroundFillSymbol",void 0),h([p({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Pr.prototype,"field",null),h([di("field")],Pr.prototype,"castField",null),h([it("field")],Pr.prototype,"writeField",null),h([p({type:String,value:null,json:{write:!0}})],Pr.prototype,"field2",null),h([p({type:String,value:null,json:{write:!0}})],Pr.prototype,"field3",null),h([p({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],Pr.prototype,"orderByClassesEnabled",void 0),h([p({type:String,value:null,json:{write:!0}})],Pr.prototype,"valueExpression",null),h([p({type:String,json:{write:!0}})],Pr.prototype,"valueExpressionTitle",void 0),h([p({type:Zg,json:{write:!0}})],Pr.prototype,"legendOptions",void 0),h([p({type:String,json:{write:!0}})],Pr.prototype,"defaultLabel",void 0),h([p(aY({...ww},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Pr.prototype,"defaultSymbol",null),h([p({type:String,value:null,json:{write:!0}})],Pr.prototype,"fieldDelimiter",null),h([p({type:xo,readOnly:!0})],Pr.prototype,"portal",void 0),h([Ye("portal",["styleName"])],Pr.prototype,"readPortal",null),h([p({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Pr.prototype,"styleOrigin",void 0),h([Ye("styleOrigin",["styleName","styleUrl"])],Pr.prototype,"readStyleOrigin",null),h([it("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Pr.prototype,"writeStyleOrigin",null),h([p({type:[JL],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,i)=>(t.uniqueValueGroups||x_e(t)).map(r=>JL.fromJSON(r,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Pr.prototype,"uniqueValueGroups",null),h([p({type:[Yg],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Pr.prototype,"uniqueValueInfos",null),Pr=f2=h([ce(vee)],Pr);const Pm=Pr,c3={key:"type",base:mp,typeMap:{heatmap:pee,simple:_0,"unique-value":Pm,"class-breaks":_w,"dot-density":qwe,dictionary:zwe,"pie-chart":l_e},errorContext:"renderer"},bee={key:"type",base:mp,typeMap:{simple:_0,"unique-value":Pm,"class-breaks":_w,heatmap:pee},errorContext:"renderer"};function Cb(e,t){return rS(e,null,t)}const S_e=Cm({types:c3});function rS(e,t,i){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(i&&i.messages&&i.messages.push(new El("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:i})),null):S_e(e,t,i):null}let E_e=class wee{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(RR),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const i=new wee,r=this._originStores[xt.DEFAULTS];r&&r.forEach((n,s)=>{i.set(s,Le(n),xt.DEFAULTS)});for(let n=xt.SERVICE;n<RR;n++){const s=this._originStores[n];s&&s.forEach((o,a)=>{t&&t.has(a)||i.set(a,Le(o),n)})}return i}get(t,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(t):void 0}keys(t){const i=t==null?this._values:this._originStores[t];return i?[...i.keys()]:[]}set(t,i,r=xt.USER){let n=this._originStores[r];if(n||(n=new Map,this._originStores[r]=n),n.set(t,i),!this._values.has(t)||this._propertyOriginMap.get(t)<=r){const s=this._values.get(t);return this._values.set(t,i),this._propertyOriginMap.set(t,r),s!==i}return!1}delete(t,i=xt.USER){const r=this._originStores[i];if(!r)return;const n=r.get(t);if(r.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===i){this._values.delete(t);for(let s=i-1;s>=0;s--){const o=this._originStores[s];if(o&&o.has(t)){this._values.set(t,o.get(t)),this._propertyOriginMap.set(t,s);break}}}return n}has(t,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(t)}revert(t,i){for(;i>0&&!this.has(t,i);)--i;const r=this._originStores[i],n=r&&r.get(t),s=this._values.get(t);return this._values.set(t,n),this._propertyOriginMap.set(t,i),s!==n}originOf(t){return this._propertyOriginMap.get(t)||xt.DEFAULTS}forEach(t){this._values.forEach(t)}};const _ee=e=>{let t=class extends e{constructor(...i){super(...i);const r=zn(this),n=r.store,s=new E_e;r.store=s,eK(r,n,s)}read(i,r){iK(this,i,r)}getAtOrigin(i,r){const n=S$(this),s=pa(r);if(typeof i=="string")return n.get(i,s);const o={};return i.forEach(a=>{o[a]=n.get(a,s)}),o}originOf(i){return Bx(this.originIdOf(i))}originIdOf(i){return S$(this).originOf(i)}revert(i,r){const n=S$(this),s=pa(r),o=zn(this);let a;a=typeof i=="string"?i==="*"?n.keys(s):[i]:i,a.forEach(l=>{o.invalidate(l),n.revert(l,s),o.commit(l)})}};return t=h([ce("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function S$(e){return zn(e).store}let wV=class extends _ee(Lt){};wV=h([ce("esri.core.ReadOnlyMultiOriginJSONSupport")],wV);const M_e=e=>{let t=class extends e{constructor(...i){super(...i)}clear(i,r="user"){return E$(this).delete(i,pa(r))}write(i={},r){return sK(this,i=i||{},r),i}setAtOrigin(i,r,n){zn(this).setAtOrigin(i,r,pa(n))}removeOrigin(i){const r=E$(this),n=pa(i),s=r.keys(n);for(const o of s)r.originOf(o)===n&&r.set(o,r.get(o,n),xt.USER)}updateOrigin(i,r){const n=E$(this),s=pa(r),o=this.get(i);for(let a=s+1;a<RR;++a)n.delete(i,a);n.set(i,o,s)}toJSON(i){return this.write({},i)}};return t=h([ce("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function E$(e){return zn(e).store}const Nm=e=>{let t=class extends M_e(_ee(e)){constructor(...i){super(...i)}};return t=h([ce("esri.core.MultiOriginJSONSupport")],t),t};let YL=class extends Nm(Lt){};YL=h([ce("esri.core.MultiOriginJSONSupport")],YL);async function I_e(e,t){const{WhereClause:i}=await De(()=>import("./WhereClause-bc6a26d1.js").then(r=>r.W),["./WhereClause-bc6a26d1.js","./executionError-c1d13a98.js"],import.meta.url);return i.create(e,t)}function YF(e,t){return ee(e)?ee(t)?`(${e}) AND (${t})`:e:t}var KL;let Vy=KL=class extends Je{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new KL({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};h([p({type:String,json:{write:!0}})],Vy.prototype,"expression",void 0),h([p({type:String,json:{write:!0}})],Vy.prototype,"name",void 0),h([p({type:["boolean","date","number","string"],json:{write:!0}})],Vy.prototype,"returnType",void 0),h([p({type:String,json:{write:!0}})],Vy.prototype,"title",void 0),Vy=KL=h([ce("esri.form.ExpressionInfo")],Vy);const T_e=Vy;let By=class extends Je{constructor(t){super(t),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};h([p({type:String,json:{write:!0}})],By.prototype,"description",void 0),h([p({type:String,json:{write:!0}})],By.prototype,"label",void 0),h([p()],By.prototype,"type",void 0),h([p({type:String,json:{write:!0}})],By.prototype,"visibilityExpression",void 0),By=h([ce("esri.form.elements.Element")],By);const $b=By;var QL;let DI=QL=class extends Je{constructor(e){super(e),this.type=null}clone(){return new QL({type:this.type})}};h([p({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],DI.prototype,"type",void 0),DI=QL=h([ce("esri.form.elements.inputs.AttachmentInput")],DI);const A_e=DI;var XL;let zy=XL=class extends $b{constructor(e){super(e),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new XL({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};h([p({type:String,json:{write:!0}})],zy.prototype,"attachmentKeyword",void 0),h([p({type:Boolean,json:{write:!0}})],zy.prototype,"editable",void 0),h([p({type:A_e,json:{read:{source:"inputType"},write:{target:"inputType"}}})],zy.prototype,"input",void 0),h([p({type:["attachment"],json:{read:!1,write:!0}})],zy.prototype,"type",void 0),zy=XL=h([ce("esri.form.elements.AttachmentElement")],zy);const _V=zy;let jI=class extends Je{constructor(t){super(t),this.type=null}};h([p()],jI.prototype,"type",void 0),jI=h([ce("esri.form.elements.inputs.Input")],jI);const Sw=jI;let m2=class extends Sw{constructor(t){super(t),this.maxLength=null,this.minLength=0}};h([p({type:Number,json:{write:!0}})],m2.prototype,"maxLength",void 0),h([p({type:Number,json:{write:!0}})],m2.prototype,"minLength",void 0),m2=h([ce("esri.form.elements.inputs.TextInput")],m2);const KF=m2;var eP;let UI=eP=class extends KF{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new eP({maxLength:this.maxLength,minLength:this.minLength})}};h([p({type:["barcode-scanner"],json:{read:!1,write:!0}})],UI.prototype,"type",void 0),UI=eP=h([ce("esri.form.elements.inputs.BarcodeScannerInput")],UI);const C_e=UI;var tP;let W1=tP=class extends Sw{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new tP({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};h([p({type:String,json:{write:!0}})],W1.prototype,"noValueOptionLabel",void 0),h([p({type:Boolean,json:{write:!0}})],W1.prototype,"showNoValueOption",void 0),h([p({type:["combo-box"],json:{read:!1,write:!0}})],W1.prototype,"type",void 0),W1=tP=h([ce("esri.form.elements.inputs.ComboBoxInput")],W1);const $_e=W1;var iP;function xV(e){return e!=null?new Date(e):null}function SV(e){return e?e.getTime():null}let Fu=iP=class extends Sw{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return xV(t.max)}writeMax(e,t){t.max=SV(e)}readMin(e,t){return xV(t.min)}writeMin(e,t){t.min=SV(e)}clone(){return new iP({includeTime:this.includeTime,max:this.max,min:this.min})}};h([p({type:Boolean,json:{write:!0}})],Fu.prototype,"includeTime",void 0),h([p({type:Date,json:{type:Number,write:!0}})],Fu.prototype,"max",void 0),h([Ye("max")],Fu.prototype,"readMax",null),h([it("max")],Fu.prototype,"writeMax",null),h([p({type:Date,json:{type:Number,write:!0}})],Fu.prototype,"min",void 0),h([Ye("min")],Fu.prototype,"readMin",null),h([it("min")],Fu.prototype,"writeMin",null),h([p({type:["datetime-picker"],json:{read:!1,write:!0}})],Fu.prototype,"type",void 0),Fu=iP=h([ce("esri.form.elements.inputs.DateTimePickerInput")],Fu);const O_e=Fu;var rP;let J1=rP=class extends Sw{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new rP({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};h([p({type:String,json:{write:!0}})],J1.prototype,"noValueOptionLabel",void 0),h([p({type:Boolean,json:{write:!0}})],J1.prototype,"showNoValueOption",void 0),h([p({type:["radio-buttons"],json:{read:!1,write:!0}})],J1.prototype,"type",void 0),J1=rP=h([ce("esri.form.elements.inputs.RadioButtonsInput")],J1);const R_e=J1;var nP;let Z1=nP=class extends Sw{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new nP({offValue:this.offValue,onValue:this.onValue})}};h([p({type:[String,Number],json:{write:!0}})],Z1.prototype,"offValue",void 0),h([p({type:[String,Number],json:{write:!0}})],Z1.prototype,"onValue",void 0),h([p({type:["switch"],json:{read:!1,write:!0}})],Z1.prototype,"type",void 0),Z1=nP=h([ce("esri.form.elements.inputs.SwitchInput")],Z1);const k_e=Z1;var sP;let VI=sP=class extends KF{constructor(e){super(e),this.type="text-area"}clone(){return new sP({maxLength:this.maxLength,minLength:this.minLength})}};h([p({type:["text-area"],json:{read:!1,write:!0}})],VI.prototype,"type",void 0),VI=sP=h([ce("esri.form.elements.inputs.TextAreaInput")],VI);const L_e=VI;var oP;let BI=oP=class extends KF{constructor(e){super(e),this.type="text-box"}clone(){return new oP({maxLength:this.maxLength,minLength:this.minLength})}};h([p({type:["text-box"],json:{read:!1,write:!0}})],BI.prototype,"type",void 0),BI=oP=h([ce("esri.form.elements.inputs.TextBoxInput")],BI);const P_e=BI,N_e={base:Sw,key:"type",typeMap:{"barcode-scanner":C_e,"combo-box":$_e,"datetime-picker":O_e,"radio-buttons":R_e,switch:k_e,"text-area":L_e,"text-box":P_e}};var aP;let y2=aP=class extends Je{constructor(e){super(e),this.name=null,this.code=null}clone(){return new aP({name:this.name,code:this.code})}};h([p({type:String,json:{write:!0}})],y2.prototype,"name",void 0),h([p({type:[String,Number],json:{write:!0}})],y2.prototype,"code",void 0),y2=aP=h([ce("esri.layers.support.CodedValue")],y2);const F_e=new ti({inherited:"inherited",codedValue:"coded-value",range:"range"});let g2=class extends Je{constructor(t){super(t),this.name=null,this.type=null}};h([p({type:String,json:{write:!0}})],g2.prototype,"name",void 0),h([Ft(F_e)],g2.prototype,"type",void 0),g2=h([ce("esri.layers.support.Domain")],g2);const y4=g2;var lP;let v2=lP=class extends y4{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const i=String(e);this.codedValues.some(r=>(String(r.code)===i&&(t=r.name),!!t))}return t}clone(){return new lP({codedValues:Le(this.codedValues),name:this.name})}};h([p({type:[y2],json:{write:!0}})],v2.prototype,"codedValues",void 0),h([Ft({codedValue:"coded-value"})],v2.prototype,"type",void 0),v2=lP=h([ce("esri.layers.support.CodedValueDomain")],v2);const xee=v2;var uP;let zI=uP=class extends y4{constructor(e){super(e),this.type="inherited"}clone(){return new uP}};h([Ft({inherited:"inherited"})],zI.prototype,"type",void 0),zI=uP=h([ce("esri.layers.support.InheritedDomain")],zI);const See=zI;var cP;let Y1=cP=class extends y4{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new cP({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};h([p({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,i){t[i]=[this.minValue||0,e]}}}})],Y1.prototype,"maxValue",void 0),h([p({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,i){t[i]=[e,this.maxValue||0]}}}})],Y1.prototype,"minValue",void 0),h([Ft({range:"range"})],Y1.prototype,"type",void 0),Y1=cP=h([ce("esri.layers.support.RangeDomain")],Y1);const Eee=Y1,Mee={key:"type",base:y4,typeMap:{range:Eee,"coded-value":xee,inherited:See}};function QF(e){if(!e||!e.type)return null;switch(e.type){case"range":return Eee.fromJSON(e);case"codedValue":return xee.fromJSON(e);case"inherited":return See.fromJSON(e)}return null}var hP;const Iee="esri.form.elements.FieldElement",EV=et.getLogger(Iee);let zl=hP=class extends $b{constructor(e){super(e),this.domain=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}get editable(){return LR(EV,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),this._get("editable")??!0}set editable(e){LR(EV,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),this._set("editable",e)}clone(){return new hP({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};h([p({types:Mee,json:{read:{reader:QF},write:!0}})],zl.prototype,"domain",void 0),h([p({type:Boolean,json:{write:!0}})],zl.prototype,"editable",null),h([p({type:String,json:{write:!0}})],zl.prototype,"editableExpression",void 0),h([p({type:String,json:{write:!0}})],zl.prototype,"fieldName",void 0),h([p({type:String,json:{write:!0}})],zl.prototype,"hint",void 0),h([p({types:N_e,json:{read:{source:"inputType"},write:{target:"inputType"}}})],zl.prototype,"input",void 0),h([p({type:String,json:{write:!0}})],zl.prototype,"requiredExpression",void 0),h([p({type:String,json:{read:!1,write:!0}})],zl.prototype,"type",void 0),h([p({type:String,json:{write:!0}})],zl.prototype,"valueExpression",void 0),zl=hP=h([ce(Iee)],zl);const MV=zl;var dP;let hd=dP=class extends $b{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new dP({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:Le(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};h([p({type:Number,json:{write:!0}})],hd.prototype,"displayCount",void 0),h([p({type:["list"],json:{write:!0}})],hd.prototype,"displayType",void 0),h([p({type:Boolean,json:{write:!0}})],hd.prototype,"editable",void 0),h([p({type:[TF],json:{write:!0}})],hd.prototype,"orderByFields",void 0),h([p({type:Number,json:{write:!0}})],hd.prototype,"relationshipId",void 0),h([p({type:["relationship"],json:{read:!1,write:!0}})],hd.prototype,"type",void 0),hd=dP=h([ce("esri.form.elements.RelationshipElement")],hd);const IV=hd;function Tee(e){return{typesWithGroup:{base:$b,key:"type",typeMap:{attachment:_V,field:MV,group:e,relationship:IV}},typesWithoutGroup:{base:$b,key:"type",typeMap:{attachment:_V,field:MV,relationship:IV}}}}function Aee(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>r[n.type]).map(n=>r[n.type].fromJSON(n))}function Cee(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>r[n.type]).map(n=>n.toJSON())}function $ee(e,t,i=!0){return e?e.map(r=>$h(i?t.typesWithGroup:t.typesWithoutGroup,r)):null}var pP;let rh=pP=class extends $b{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return $ee(e,M$,!1)}readElements(e,t){return Aee(t.formElements,M$,!1)}writeElements(e,t){t.formElements=Cee(e,M$,!1)}clone(){return new pP({description:this.description,elements:Le(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};h([p({json:{write:!0}})],rh.prototype,"elements",void 0),h([di("elements")],rh.prototype,"castElements",null),h([Ye("elements",["formElements"])],rh.prototype,"readElements",null),h([it("elements")],rh.prototype,"writeElements",null),h([p({type:["collapsed","expanded"],json:{write:!0}})],rh.prototype,"initialState",void 0),h([p({type:String,json:{read:!1,write:!0}})],rh.prototype,"type",void 0),rh=pP=h([ce("esri.form.elements.GroupElement")],rh);const M$=Tee(rh),D_e=rh;var fP;const I$=Tee(D_e);let Du=fP=class extends Je{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return $ee(e,I$)}readElements(e,t){return Aee(t.formElements,I$)}writeElements(e,t){t.formElements=Cee(e,I$)}clone(){return new fP({description:this.description,expressionInfos:Le(this.expressionInfos),elements:Le(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}};h([p({type:String,json:{write:!0}})],Du.prototype,"description",void 0),h([p({json:{write:!0}})],Du.prototype,"elements",void 0),h([di("elements")],Du.prototype,"castElements",null),h([Ye("elements",["formElements"])],Du.prototype,"readElements",null),h([it("elements")],Du.prototype,"writeElements",null),h([p({type:[T_e],json:{write:!0}})],Du.prototype,"expressionInfos",void 0),h([p({type:Boolean,json:{default:!1,write:!0}})],Du.prototype,"preserveFieldValuesWhenHidden",void 0),h([p({type:String,json:{write:!0}})],Du.prototype,"title",void 0),Du=fP=h([ce("esri.form.FormTemplate")],Du);const j_e=Du;async function U_e(e){const t="portalItem"in e?e:{portalItem:e},i=await De(()=>import("./portalLayers-ed46f9f9.js"),["./portalLayers-ed46f9f9.js","./lazyLayerLoader-66f8ee92.js","./preload-helper-388ac9d5.js","./layersLoader-b0ea3324.js","./fetchService-7aa3a0fc.js","./jsonContext-26af1f96.js"],import.meta.url);try{return await i.fromItem(t)}catch(r){const n=t&&t.portalItem,s=n&&n.id||"unset",o=n&&n.portal&&n.portal.url||Ri.portalUrl;throw et.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+s+"')",r),r}}let V_e=0,es=class extends hp.EventedMixin(Om(Ml)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Kt(-180,-90,180,90,Et.WGS84),this.id=Date.now().toString(16)+"-layer-"+V_e++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Et.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(t){const i=typeof t=="string"?{url:t}:t;return(await De(()=>import("./arcgisLayers-33a52b8c.js"),["./arcgisLayers-33a52b8c.js","./preload-helper-388ac9d5.js","./fetchService-7aa3a0fc.js","./lazyLayerLoader-66f8ee92.js"],import.meta.url)).fromUrl(i)}static fromPortalItem(t){return U_e(t)}initialize(){this.when().catch(t=>{fs(t)||et.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}destroy(){if(this.parent){const t=this,i=this.parent;"layers"in i&&i.layers.includes(t)?i.layers.remove(t):"tables"in i&&i.tables.includes(t)?i.tables.remove(t):"baseLayers"in i&&i.baseLayers.includes(t)?i.baseLayers.remove(t):"baseLayers"in i&&i.referenceLayers.includes(t)&&i.referenceLayers.remove(t)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return Ln(this.url)}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t)return(await St(t,{query:{f:"json"},responseType:"json"})).data;throw new Ce("layer:no-attribution-data","Layer does not have attribution data")}};h([p({type:String})],es.prototype,"attributionDataUrl",void 0),h([p({type:Kt})],es.prototype,"fullExtent",void 0),h([p({readOnly:!0})],es.prototype,"hasAttributionData",null),h([p({type:String,clonable:!1})],es.prototype,"id",void 0),h([p({type:Boolean,nonNullable:!0})],es.prototype,"legendEnabled",void 0),h([p({type:["show","hide","hide-children"]})],es.prototype,"listMode",void 0),h([p({type:Number,range:{min:0,max:1},nonNullable:!0})],es.prototype,"opacity",void 0),h([p({clonable:!1})],es.prototype,"parent",void 0),h([p({readOnly:!0})],es.prototype,"parsedUrl",null),h([p({type:Boolean})],es.prototype,"popupEnabled",void 0),h([p({type:Boolean})],es.prototype,"attributionVisible",void 0),h([p({type:Et})],es.prototype,"spatialReference",void 0),h([p({type:String})],es.prototype,"title",void 0),h([p({readOnly:!0,json:{read:!1}})],es.prototype,"type",void 0),h([p()],es.prototype,"url",void 0),h([p({type:Boolean,nonNullable:!0})],es.prototype,"visible",void 0),es=h([ce("esri.layers.Layer")],es);const Rh=es;let Qv=class extends Lt{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._handles=new So,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll(),this._handles.destroy()}add(t,i,r={}){return this._installWatch(t,i,r,nt)}addWhen(t,i,r={}){return this._installWatch(t,i,r,Tl)}addOnCollectionChange(t,i,{initial:r=!1,final:n=!1}={}){const s=++this._handleId;return this._handles.add([ms(t,"after-changes",this._createSyncUpdatingCallback(),wl),ms(t,"change",i,{onListenerAdd:r?o=>i({added:o.toArray(),removed:[]}):void 0,onListenerRemove:n?o=>i({added:[],removed:o.toArray()}):void 0})],s),{remove:()=>this._handles.remove(s)}}addPromise(t){if(Re(t))return t;const i=++this._handleId;this._handles.add({remove:()=>{this._pendingPromises.delete(t)&&(this._pendingPromises.size!==0||this._handles.has($E)||this._set("updating",!1))}},i),this._pendingPromises.add(t),this._set("updating",!0);const r=()=>this._handles.remove(i);return t.then(r,r),t}removeAll(){this._pendingPromises.clear(),this._handles.removeAll(),this._set("updating",!1)}_installWatch(t,i,r={},n){const s=++this._handleId;r.sync||this._installSyncUpdatingWatch(t,s);const o=n(t,i,r);return this._handles.add(o,s),{remove:()=>this._handles.remove(s)}}_installSyncUpdatingWatch(t,i){const r=this._createSyncUpdatingCallback(),n=nt(t,r,{sync:!0,equals:()=>!1});return this._handles.add(n,i),n}_createSyncUpdatingCallback(){return()=>{this._handles.remove($E),++this._scheduleHandleId;const t=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this._handles.add(hw(()=>{t===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this._handles.remove($E))}),$E)}}};h([p({readOnly:!0})],Qv.prototype,"updating",void 0),Qv=h([ce("esri.core.support.WatchUpdatingTracking")],Qv);const $E=-42,Wo=e=>{let t=class extends e{destroy(){this.destroyed||(this._get("handles")?.destroy(),this._get("updatingHandles")?.destroy())}get handles(){return this._get("handles")||new So}get updatingHandles(){return this._get("updatingHandles")||new Qv}};return h([p({readOnly:!0})],t.prototype,"handles",null),h([p({readOnly:!0})],t.prototype,"updatingHandles",null),t=h([ce("esri.core.HandleOwner")],t),t};let mA=class extends Wo(Lt){};mA=h([ce("esri.core.HandleOwner")],mA);let yA=class{constructor(t=i=>i.values().next().value){this._peeker=t,this._items=new Set}get length(){return this._items.size}clear(){this._items.clear()}last(){if(this._items.size===0)return;let t;for(t of this._items);return t}peek(){if(this._items.size!==0)return this._peeker(this._items)}push(t){this.contains(t)||this._items.add(t)}contains(t){return this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),t}remove(t){this._items.delete(t)}filter(t){return this._items.forEach(i=>{t(i)||this._items.delete(i)}),this}};var Ss;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(Ss||(Ss={}));let B_e=0;function Oee(){return B_e++}function z_e(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function nS(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function XF(e,t,i,r){if(t.type===Ss.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==Ss.INVOKE&&t.type!==Ss.RESPONSE)return void e.postMessage(t);let n;if(z_e(i)?(n=TV(i.transferList),t.data=i.result):(n=TV(r),t.data=i),n){if(Ze("ff")){for(const s of n)if("byteLength"in s&&s.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case Ss.INVOKE:throw o;case Ss.RESPONSE:return void XF(e,{type:Ss.RESPONSE,jobId:t.jobId,error:nS(o)})}}}e.postMessage(t,n)}else e.postMessage(t)}function sS(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function TV(e){if(!e||!e.length)return null;if(Ze("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(i=>!G_e(i));return t.length?t:null}function G_e(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}const q_e={statsWorker:()=>De(()=>import("./statsWorker-6898bd59.js"),["./statsWorker-6898bd59.js","./quantizationUtils-3cda2a0c.js","./utils-32825606.js","./preload-helper-388ac9d5.js"],import.meta.url),geometryEngineWorker:()=>De(()=>import("./geometryEngineWorker-85fedce7.js"),["./geometryEngineWorker-85fedce7.js","./geometryEngineJSON-e42ff21a.js","./geometryEngineBase-807394fe.js","./json-48e3ea08.js"],import.meta.url),CSVSourceWorker:()=>De(()=>import("./CSVSourceWorker-689b2ad9.js"),["./CSVSourceWorker-689b2ad9.js","./json-48e3ea08.js","./FeatureStore-ffa50650.js","./BoundsStore-dc2a4722.js","./PooledRBush-33381c52.js","./centroid-ad024a23.js","./utils-a3495a63.js","./preload-helper-388ac9d5.js","./projectionSupport-3f6ca955.js","./QueryEngine-e25c2dca.js","./QueryEngineResult-3a15d39d.js","./quantizationUtils-3cda2a0c.js","./WhereClause-bc6a26d1.js","./executionError-c1d13a98.js","./utils-32825606.js","./QueryEngineCapabilities-42e44ded.js","./timeSupport-152494f0.js","./number-1809ae92.js","./clientSideDefaults-2f6721a1.js"],import.meta.url),EdgeProcessingWorker:()=>De(()=>import("./EdgeProcessingWorker-a5c9f166.js"),["./EdgeProcessingWorker-a5c9f166.js","./BufferView-7889b416.js","./edgeProcessing-67c0f59d.js","./deduplicate-0ee60c69.js","./Indices-aedba8a7.js","./InterleavedLayout-9470af7f.js","./types-e1c0a5bf.js","./VertexAttribute-15d1866a.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./preload-helper-388ac9d5.js"],import.meta.url),ElevationSamplerWorker:()=>De(()=>import("./ElevationSamplerWorker-247f7aaa.js"),["./ElevationSamplerWorker-247f7aaa.js","./PooledRBush-33381c52.js","./georeference-9ba4da4f.js","./mat3f64-221ce671.js","./mat4f64-1413b4a7.js","./spatialReferenceEllipsoidUtils-16f7c4fd.js","./quat-55be1b4e.js","./quatf64-3363c48e.js","./BufferView-7889b416.js","./vec33-cdbb49d4.js","./preload-helper-388ac9d5.js"],import.meta.url),FeatureServiceSnappingSourceWorker:()=>De(()=>import("./FeatureServiceSnappingSourceWorker-6592ddd4.js"),["./FeatureServiceSnappingSourceWorker-6592ddd4.js","./FeatureStore-ffa50650.js","./BoundsStore-dc2a4722.js","./PooledRBush-33381c52.js","./centroid-ad024a23.js","./utils-a3495a63.js","./preload-helper-388ac9d5.js","./projectionSupport-3f6ca955.js","./json-48e3ea08.js","./QueryEngine-e25c2dca.js","./QueryEngineResult-3a15d39d.js","./quantizationUtils-3cda2a0c.js","./WhereClause-bc6a26d1.js","./executionError-c1d13a98.js","./utils-32825606.js","./QueryEngineCapabilities-42e44ded.js","./timeSupport-152494f0.js"],import.meta.url),GeoJSONSourceWorker:()=>De(()=>import("./GeoJSONSourceWorker-0ee88689.js"),["./GeoJSONSourceWorker-0ee88689.js","./FeatureStore-ffa50650.js","./BoundsStore-dc2a4722.js","./PooledRBush-33381c52.js","./centroid-ad024a23.js","./utils-a3495a63.js","./preload-helper-388ac9d5.js","./projectionSupport-3f6ca955.js","./json-48e3ea08.js","./QueryEngine-e25c2dca.js","./QueryEngineResult-3a15d39d.js","./quantizationUtils-3cda2a0c.js","./WhereClause-bc6a26d1.js","./executionError-c1d13a98.js","./utils-32825606.js","./QueryEngineCapabilities-42e44ded.js","./timeSupport-152494f0.js","./geojson-7ecdc710.js","./clientSideDefaults-2f6721a1.js","./sourceUtils-fdadcb28.js"],import.meta.url),LercWorker:()=>De(()=>import("./LercWorker-4ffda940.js"),["./LercWorker-4ffda940.js","./preload-helper-388ac9d5.js"],import.meta.url),MemorySourceWorker:()=>De(()=>import("./MemorySourceWorker-f54b4a12.js"),["./MemorySourceWorker-f54b4a12.js","./objectIdUtils-967fafff.js","./FeatureStore-ffa50650.js","./BoundsStore-dc2a4722.js","./PooledRBush-33381c52.js","./centroid-ad024a23.js","./utils-a3495a63.js","./preload-helper-388ac9d5.js","./projectionSupport-3f6ca955.js","./json-48e3ea08.js","./QueryEngine-e25c2dca.js","./QueryEngineResult-3a15d39d.js","./quantizationUtils-3cda2a0c.js","./WhereClause-bc6a26d1.js","./executionError-c1d13a98.js","./utils-32825606.js","./QueryEngineCapabilities-42e44ded.js","./timeSupport-152494f0.js","./clientSideDefaults-2f6721a1.js","./sourceUtils-fdadcb28.js"],import.meta.url),PBFDecoderWorker:()=>De(()=>import("./PBFDecoderWorker-867f0a54.js"),["./PBFDecoderWorker-867f0a54.js","./preload-helper-388ac9d5.js"],import.meta.url),Pipeline:()=>De(()=>import("./Pipeline-a448c9ae.js"),["./Pipeline-a448c9ae.js","./preload-helper-388ac9d5.js","./QueryEngine-e25c2dca.js","./QueryEngineResult-3a15d39d.js","./quantizationUtils-3cda2a0c.js","./WhereClause-bc6a26d1.js","./executionError-c1d13a98.js","./utils-32825606.js","./projectionSupport-3f6ca955.js","./json-48e3ea08.js","./utils-a3495a63.js","./QueryEngineCapabilities-42e44ded.js","./timeSupport-152494f0.js","./FeatureStore2D-bd0ba1cb.js","./CircularArray-faaa0557.js","./ComputedAttributeStorage-119e2cd6.js","./arcadeTimeUtils-b303a482.js","./centroid-ad024a23.js","./definitions-cc1dbf1d.js","./visualVariablesUtils-19bb0f88.js","./color-db1e2af1.js","./enums-f1a6a48a.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./visualVariablesUtils-0c1b8204.js","./ogcFeatureUtils-9d8e044c.js","./geojson-7ecdc710.js","./clientSideDefaults-2f6721a1.js","./createConnection-18fd09a8.js"],import.meta.url),PointCloudWorker:()=>De(()=>import("./PointCloudWorker-04752c79.js"),["./PointCloudWorker-04752c79.js","./quat-55be1b4e.js","./mat3f64-221ce671.js","./quatf64-3363c48e.js","./I3SBinaryReader-7b25d355.js","./VertexAttribute-15d1866a.js","./vec3f32-ad1dc57f.js","./PointCloudUniqueValueRenderer-9bf3d7e4.js","./preload-helper-388ac9d5.js"],import.meta.url),RasterWorker:()=>De(()=>import("./RasterWorker-0bf6c6cc.js"),["./RasterWorker-0bf6c6cc.js","./utils-64a01d4e.js","./rasterProjectionHelper-a318d515.js","./preload-helper-388ac9d5.js"],import.meta.url),SceneLayerSnappingSourceWorker:()=>De(()=>import("./SceneLayerSnappingSourceWorker-e8169efd.js"),["./SceneLayerSnappingSourceWorker-e8169efd.js","./lineSegment-b156ea0e.js","./sphere-c42c33e0.js","./mat3f64-221ce671.js","./mat4f64-1413b4a7.js","./quatf64-3363c48e.js","./QueryEngineResult-3a15d39d.js","./preload-helper-388ac9d5.js","./quantizationUtils-3cda2a0c.js","./WhereClause-bc6a26d1.js","./executionError-c1d13a98.js","./utils-32825606.js","./projectionSupport-3f6ca955.js","./json-48e3ea08.js","./utils-a3495a63.js","./plane-6e574258.js","./edgeProcessing-67c0f59d.js","./deduplicate-0ee60c69.js","./Indices-aedba8a7.js","./InterleavedLayout-9470af7f.js","./BufferView-7889b416.js","./types-e1c0a5bf.js","./VertexAttribute-15d1866a.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js"],import.meta.url),SceneLayerWorker:()=>De(()=>import("./SceneLayerWorker-cb02899c.js"),["./SceneLayerWorker-cb02899c.js","./preload-helper-388ac9d5.js","./sphere-c42c33e0.js","./mat3f64-221ce671.js","./mat4f64-1413b4a7.js","./quatf64-3363c48e.js"],import.meta.url),WFSSourceWorker:()=>De(()=>import("./WFSSourceWorker-fc1f714e.js"),["./WFSSourceWorker-fc1f714e.js","./FeatureStore-ffa50650.js","./BoundsStore-dc2a4722.js","./PooledRBush-33381c52.js","./centroid-ad024a23.js","./utils-a3495a63.js","./preload-helper-388ac9d5.js","./projectionSupport-3f6ca955.js","./json-48e3ea08.js","./QueryEngine-e25c2dca.js","./QueryEngineResult-3a15d39d.js","./quantizationUtils-3cda2a0c.js","./WhereClause-bc6a26d1.js","./executionError-c1d13a98.js","./utils-32825606.js","./QueryEngineCapabilities-42e44ded.js","./timeSupport-152494f0.js","./geojson-7ecdc710.js","./sourceUtils-fdadcb28.js","./wfsUtils-9baa4213.js","./xmlUtils-444cb4c0.js"],import.meta.url),WorkerTileHandler:()=>De(()=>import("./WorkerTileHandler-dd4dfde5.js"),["./WorkerTileHandler-dd4dfde5.js","./enums-fb086c25.js","./GeometryUtils-984e8446.js","./Rect-ea14f53a.js","./config-1337d16e.js","./StyleDefinition-29c49b98.js","./enums-f1a6a48a.js","./TurboLine-3fb14243.js","./preload-helper-388ac9d5.js","./definitions-cc1dbf1d.js","./StyleRepository-29d7c693.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./earcut-61f7b102.js","./BidiEngine-836b7ef6.js"],import.meta.url)},{CLOSE:AV,ABORT:CV,INVOKE:$V,RESPONSE:l_,OPEN_PORT:OV,ON:H_e}=Ss,W_e=2;let J_e=class{constructor(t){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=t,this._timer=null,this._process=this._process.bind(this)}push(t){t.type===Ss.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},pm=class K1{static connect(t){const i=new MessageChannel;let r;r=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const n=new K1(i.port1,{channel:i,client:r},()=>null);return typeof r=="object"&&"remoteClient"in r&&(r.remoteClient=n),K1.clients.set(n,r),i.port2}static loadWorker(t){const i=q_e[t];return i?i():Promise.resolve(null)}constructor(t,i,r){this._port=t,this._getNextJob=r,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new J_e(n=>this._onInvokeMessage(n)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:AV}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,i,r){const n=r&&r.signal,s=r&&r.transferList;if(!this._port)return Promise.reject(new Ce("worker:port-closed",`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:i}));const o=Oee();return new Promise((a,l)=>{if(Sl(n))return this._processWork(),void l(fr());const u=ba(n,()=>{const d=this._outJobs.get(o);d&&(this._outJobs.delete(o),this._processWork(),yn(d.abortHandle),this._post({type:CV,jobId:o}),l(fr()))}),c={resolve:a,reject:l,abortHandle:u,debugInfo:t};this._outJobs.set(o,c),this._post({type:$V,jobId:o,methodName:t,abortable:n!=null},i,s)})}on(t,i){const r=new MessageChannel;function n(s){i(s.data)}return this._port.postMessage({type:Ss.ON,eventType:t,port:r.port2},[r.port2]),r.port1.addEventListener("message",n),r.port1.start(),{remove(){r.port1.postMessage({type:Ss.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",n)}}}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:OV,port:t.port2}),t.port1}_processWork(){if(this._outJobs.size>=W_e)return;const t=this._getNextJob();if(!t)return;const{methodName:i,data:r,invokeOptions:n,deferred:s}=t;this.invoke(i,r,n).then(o=>s.resolve(o)).catch(o=>s.reject(o))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{yn(t.abortHandle),t.reject(fr(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(t){ee(this._schedule)?this._schedule(()=>this._processMessage(t)):this._processMessage(t)}_processMessage(t){const i=sS(t);if(i)switch(i.type){case l_:this._onResponseMessage(i);break;case $V:this._invokeQueue.push(i);break;case CV:this._onAbortMessage(i);break;case AV:this._onCloseMessage();break;case OV:this._onOpenPortMessage(i);break;case H_e:this._onOnMessage(i)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,n=i.get(r);this._invokeQueue.push(t),n&&(n.controller&&n.controller.abort(),i.delete(r))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&K1.clients.get(this)===t&&t.destroy(),K1.clients.delete(this),t&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:i,jobId:r,data:n,abortable:s}=t,o=s?new AbortController:null,a=this._inJobs;let l,u=this._client,c=u[i];try{if(!c&&i&&i.includes(".")){const d=i.split(".");for(let f=0;f<d.length-1;f++)u=u[d[f]],c=u[d[f+1]]}if(typeof c!="function")throw new TypeError(`${i} is not a function`);l=c.call(u,n,{client:this,signal:o?o.signal:null})}catch(d){return void this._post({type:l_,jobId:r,error:nS(d)})}cp(l)?(a.set(r,{controller:o,promise:l}),l.then(d=>{a.has(r)&&(a.delete(r),this._post({type:l_,jobId:r},d))},d=>{a.has(r)&&(a.delete(r),fs(d)||this._post({type:l_,jobId:r,error:nS(d||{message:`Error encountered at method ${i}`})}))})):this._post({type:l_,jobId:r},l)}_onOpenPortMessage(t){new K1(t.port,{client:this._client},()=>null)}_onOnMessage(t){const{port:i}=t,r=this._client.on(t.eventType,s=>{i.postMessage(s)}),n=V5(t.port,"message",s=>{sS(s)?.type===Ss.CLOSE&&(n.remove(),r.remove(),i.close())})}_onResponseMessage(t){const{jobId:i,error:r,data:n}=t,s=this._outJobs;if(!s.has(i))return;const o=s.get(i);s.delete(i),this._processWork(),yn(o.abortHandle),r?o.reject(Ce.fromJSON(JSON.parse(r))):o.resolve(n)}_post(t,i,r){return XF(this._port,t,i,r)}};pm.kernelInfo={revision:OK,version:RK,buildDate:$K},pm.clients=new Map;let Z_e=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new yA}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(t,i){return new Promise((r,n)=>{let s=!0;const o=a=>{hr(i.signal),s&&(s=!1,a())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let a=0;a<t.length;++a){const l=t[a];cp(l)?this._clientPromises[a]=l.then(u=>(this._clients[a]=new pm(u,i,()=>this._ongoingJobsQueue.pop()??null),o(r),this._clients[a]),()=>(o(n),null)):(this._clients[a]=new pm(l,i,()=>this._ongoingJobsQueue.pop()??null),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(r))}})}broadcast(t,i,r){const n=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const o=this._clientPromises[s];n[s]=o.then(a=>a?.invoke(t,i,r))}return n}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.deferred.reject(fr(`Worker closing, aborting job calling '${t.methodName}'`));for(const i of this._clientPromises)i.then(r=>r?.close());this._clients.length=0,this._clientPromises.length=0}invoke(t,i,r){let n;Array.isArray(r)?(et.getLogger("esri.core.workers.Connection").warn("invoke()","The transferList parameter is deprecated, use the options object instead"),n={transferList:r}):n=r;const s=Kd();this._ongoingJobsQueue.push({methodName:t,data:i,invokeOptions:n,deferred:s});for(let o=0;o<this._clientPromises.length;o++){const a=this._clients[o];a?a.jobAdded():this._clientPromises[o].then(l=>l?.jobAdded())}return s.promise}on(t,i){return Promise.all(this._clientPromises).then(()=>F5(this._clients.map(r=>r.on(t,i))))}openPorts(){return new Promise(t=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(s=>{s&&(i[n]=s.openPort()),--r==0&&t(i)})})}get test(){return{numClients:this._clients.length}}};const Ree=et.getLogger("esri.intl.substitute");function nh(e,t,i={}){const{format:r={}}=i;return dc(e,n=>Y_e(n,t,r))}function Y_e(e,t,i){let r,n;const s=e.indexOf(":");if(s===-1?r=e.trim():(r=e.slice(0,s).trim(),n=e.slice(s+1).trim()),!r)return"";const o=ZS(r,t);if(o==null)return"";const a=(n?i?.[n]:null)??i?.[r];return a?K_e(o,a):n?Q_e(o,n):eD(o)}function K_e(e,t){switch(t.type){case"date":return ep(e,t.intlOptions);case"number":return hm(e,t.intlOptions);default:return Ree.warn("missing format descriptor for key {key}"),eD(e)}}function Q_e(e,t){switch(t.toLowerCase()){case"dateformat":return ep(e);case"numberformat":return hm(e);default:return Ree.warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?ep(e):/^numberformat/i.test(t)?hm(e):eD(e)}}function eD(e){switch(typeof e){case"string":return e;case"number":return hm(e);case"boolean":return""+e;default:return e instanceof Date?ep(e):""}}async function X_e(e,t,i,r){const n=t.exec(i);if(!n)throw new Ce("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${t}"`);const s=n[1]?`${n[1]}/`:"",o=n[2],a=t0e(r),l=`${s}${o}.json`,u=a?`${s}${o}_${a}.json`:l;let c;try{c=await RV(e(u))}catch(d){if(u===l)throw new Ce("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:d});try{c=await RV(e(l))}catch(f){throw new Ce("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:f})}}return c}async function RV(e){if(ee(kV.fetchBundleAsset))return kV.fetchBundleAsset(e);const t=await St(e,{responseType:"text"});return JSON.parse(t.data)}let e2e=class{constructor({base:t="",pattern:i,location:r=new URL(window.location.href)}){let n;n=typeof r=="string"?s=>new URL(s,new URL(r,window.location.href)).href:r instanceof URL?s=>new URL(s,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=n,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)/)?(.*)$`)}fetchMessageBundle(t,i){return X_e(this.getAssetUrl,this.matcher,t,i)}};function t2e(e){return new e2e(e)}const kV={};e0e(t2e({pattern:"esri/",location:Di}));const i2e={};function r2e(e){const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:e.packages&&e.packages.concat()||[],paths:{...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=i2e.baseUrl),t}let n2e=class{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>t[i](...r)})}},GI=class{constructor(){this._dispatcher=new n2e,this._workerPostMessage({type:Ss.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){zT(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,i,r){this._dispatcher.addEventListener(t,i,r)}removeEventListener(t,i,r){this._dispatcher.removeEventListener(t,i,r)}_workerPostMessage(t){zT(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const i=sS(t);if(i&&i.type===Ss.OPEN){const{modulePath:r,jobId:n}=i;let s=await pm.loadWorker(r);s||(s=await De(()=>import(r),[],import.meta.url));const o=pm.connect(s);this._workerPostMessage({type:Ss.OPENED,jobId:n,data:o})}}};const mP=et.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:s2e}=Ss,o2e='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,version:r}=configuration.kernelInfo,{revision:t,version:n}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS API for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\\nModules version: ${r}\\nAssets version: ${n}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const i=outgoing.get(r);outgoing.delete(r),o.error?i.reject(JSON.parse(o.error)):i.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let OE,RE;const LV="Failed to create Worker. Fallback to execute module in main thread";async function a2e(){if(!Ze("esri-workers")||(Ze("mozilla"),0))return PV(new GI);if(!OE&&!RE)try{const t=o2e.split('"{CONFIGURATION}"').join(`'${l2e()}'`);OE=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){RE=t||{}}let e;if(OE)try{e=new Worker(OE,{name:"esri-worker-"+u2e++})}catch{mP.warn(LV,RE),e=new GI}else mP.warn(LV,RE),e=new GI;return PV(e)}async function PV(e){return new Promise(t=>{function i(n){const s=sS(n);s&&s.type===s2e&&(e.removeEventListener("message",i),e.removeEventListener("error",r),t(e))}function r(n){n.preventDefault(),e.removeEventListener("message",i),e.removeEventListener("error",r),mP.warn("Failed to create Worker. Fallback to execute module in main thread",n),(e=new GI).addEventListener("message",i),e.addEventListener("error",r)}e.addEventListener("message",i),e.addEventListener("error",r)})}function l2e(){let e;if(Ri.default!=null){const n={...Ri};delete n.default,e=JSON.parse(JSON.stringify(n))}else e=JSON.parse(JSON.stringify(Ri));e.assetsPath=hl(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?hl(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=au(),e.has={"esri-csp-restrictions":Ze("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":Ze("esri-2d-update-debug"),"featurelayer-pbf":Ze("featurelayer-pbf"),"featurelayer-simplify-thresholds":Ze("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":Ze("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":Ze("featurelayer-simplify-mobile-factor"),"esri-atomics":Ze("esri-atomics"),"esri-shared-array-buffer":Ze("esri-shared-array-buffer"),"esri-tiles-debug":Ze("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":Ze("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":Ze("feature-polyline-generalization-factor"),"host-webworker":1,"polylabel-placement-enabled":Ze("polylabel-placement-enabled")},e.workers.loaderUrl&&(e.workers.loaderUrl=hl(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=hl(e.workers.workerPath):e.workers.workerPath=hl(Di("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=Ri.workers.loaderConfig,i=r2e({baseUrl:t?.baseUrl,locale:au(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t?.has},map:{...t?.map},paths:{...t?.paths},packages:t?.packages||[]});return JSON.stringify({esriConfig:e,loaderConfig:i,kernelInfo:{version:RK,buildDate:$K,revision:OK}})}let u2e=0;const{ABORT:NV,INVOKE:c2e,OPEN:h2e,OPENED:d2e,RESPONSE:u_}=Ss;let p2e=class kee{static async create(t){const i=await a2e();return new kee(i,t)}constructor(t,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=i,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",r=>{r.preventDefault(),et.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(t,i={}){const{signal:r}=i,n=Oee();return new Promise((s,o)=>{const a={resolve:s,reject:o,abortHandle:DN(r,()=>{this._outJobs.delete(n),this._post({type:NV,jobId:n})})};this._outJobs.set(n,a),this._post({type:h2e,jobId:n,modulePath:t})})}_onMessage(t){const i=sS(t);if(i)switch(i.type){case d2e:this._onOpenedMessage(i);break;case u_:this._onResponseMessage(i);break;case NV:this._onAbortMessage(i);break;case c2e:this._onInvokeMessage(i)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,n=i.get(r);n&&(n.controller&&n.controller.abort(),i.delete(r))}_onInvokeMessage(t){const{methodName:i,jobId:r,data:n,abortable:s}=t,o=s?new AbortController:null,a=this._inJobs,l=rge[i];let u;try{if(typeof l!="function")throw new TypeError(`${i} is not a function`);u=l.call(null,n,{signal:o?o.signal:null})}catch(c){return void this._post({type:u_,jobId:r,error:nS(c)})}cp(u)?(a.set(r,{controller:o,promise:u}),u.then(c=>{a.has(r)&&(a.delete(r),this._post({type:u_,jobId:r},c))},c=>{a.has(r)&&(a.delete(r),c||(c={message:"Error encountered at method"+i}),fs(c)||this._post({type:u_,jobId:r,error:nS(c||{message:`Error encountered at method ${i}`})}))})):this._post({type:u_,jobId:r},u)}_onOpenedMessage(t){const{jobId:i,data:r}=t,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),yn(n.abortHandle),n.resolve(r))}_onResponseMessage(t){const{jobId:i,error:r,data:n}=t,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),yn(s.abortHandle),r?s.reject(Ce.fromJSON(JSON.parse(r))):s.resolve(n))}_post(t,i,r){return XF(this.worker,t,i,r)}},Cg=Ze("esri-workers-debug")?1:Ze("esri-mobile")?Math.min(navigator.hardwareConcurrency-1,3):Ze("host-browser")?navigator.hardwareConcurrency-1:0;Cg||(Cg=Ze("safari")&&Ze("mac")?7:2);let FV=0;const qI=[];function f2e(){Pee()}async function kE(e,t){const i=new Z_e;return await i.open(e,t),i}async function Lee(e,t={}){if(typeof e!="string")throw new Ce("workers:undefined-module","modulePath is missing");let i=t.strategy||"distributed";if(Ze("host-webworker")&&!Ze("esri-workers")&&(i="local"),i==="local"){let r=await pm.loadWorker(e);r||(r=await De(()=>import(e),[],import.meta.url)),hr(t.signal);const n=t.client||r;return kE([pm.connect(r)],{...t,client:n})}if(await Pee(),hr(t.signal),i==="dedicated"){const r=FV++%Cg;return kE([await qI[r].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const r=Math.min(t.maxNumWorkers,Cg);if(r<Cg){const n=new Array(r);for(let s=0;s<r;++s){const o=FV++%Cg;n[s]=qI[o].open(e,t)}return kE(n,t)}}return kE(qI.map(r=>r.open(e,t)),t)}let LE=null;async function Pee(){if(LE)return LE;new AbortController;const e=[];for(let t=0;t<Cg;t++){const i=p2e.create(t).then(r=>(qI[t]=r,r));e.push(i)}return LE=Promise.all(e),LE}function DV(e,t,i){if(e.hasM==null||e.hasZ)for(const r of t)for(const n of r)n.length>2&&(n[2]*=i)}function m2e(e,t,i){if(!e&&!t||!i)return;const r=_b(i);jV(e,i,r),jV(t,i,r)}function jV(e,t,i){if(e)for(const r of e)y2e(r.geometry,t,i)}function y2e(e,t,i){if(Re(e)||!e.spatialReference||vn(e.spatialReference,t))return;const r=_b(e.spatialReference)/i;if(r!==1){if("x"in e)e.z!=null&&(e.z*=r);else if("rings"in e)DV(e,e.rings,r);else if("paths"in e)DV(e,e.paths,r);else if("points"in e&&(e.hasM==null||e.hasZ))for(const n of e.points)n.length>2&&(n[2]*=r)}}function tD(e,t,i){if(Re(t)||Re(i)||i.vcsWkid||vn(t,i))return null;const r=_b(t)/_b(i);if(r===1)return null;switch(e){case"point":case"esriGeometryPoint":return n=>g2e(n,r);case"polyline":case"esriGeometryPolyline":return n=>b2e(n,r);case"polygon":case"esriGeometryPolygon":return n=>v2e(n,r);case"multipoint":case"esriGeometryMultipoint":return n=>w2e(n,r);case"extent":case"esriGeometryExtent":return n=>_2e(n,r);default:return null}}function g2e(e,t){e&&e.z!=null&&(e.z*=t)}function v2e(e,t){if(e)for(const i of e.rings)for(const r of i)r.length>2&&(r[2]*=t)}function b2e(e,t){if(e)for(const i of e.paths)for(const r of i)r.length>2&&(r[2]*=t)}function w2e(e,t){if(e)for(const i of e.points)i.length>2&&(i[2]*=t)}function _2e(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}function yP(e,t,i){if(!i||!i.features||!i.hasZ)return;const r=tD(i.geometryType,t,e.outSpatialReference);if(!Re(r))for(const n of i.features)r(n.geometry)}const x2e=new ti({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});var gP;const S2e=new ti({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let io=gP=class extends Je{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let i=null;try{i=t?JSON.parse(t):null}catch{}return i?.value??null}readValueType(e,{description:t}){let i=null;try{i=t?JSON.parse(t):null}catch{}return i?S2e.fromJSON(i.fieldValueType):null}clone(){return new gP({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};h([p({type:String,json:{write:!0}})],io.prototype,"alias",void 0),h([p({type:[String,Number],json:{write:{allowNull:!0}}})],io.prototype,"defaultValue",void 0),h([p()],io.prototype,"description",void 0),h([Ye("description")],io.prototype,"readDescription",null),h([p({types:Mee,json:{read:{reader:QF},write:!0}})],io.prototype,"domain",void 0),h([p({type:Boolean,json:{write:!0}})],io.prototype,"editable",void 0),h([p({type:wi,json:{write:!0}})],io.prototype,"length",void 0),h([p({type:String,json:{write:!0}})],io.prototype,"name",void 0),h([p({type:Boolean,json:{write:!0}})],io.prototype,"nullable",void 0),h([Ft(x2e)],io.prototype,"type",void 0),h([p()],io.prototype,"valueType",void 0),h([Ye("valueType",["description"])],io.prototype,"readValueType",null),h([p({type:Boolean,json:{read:!1}})],io.prototype,"visible",void 0),io=gP=h([ce("esri.layers.support.Field")],io);const ol=io;var vP;const bP=new ti({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let ws=vP=class extends Je{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const i=Et.fromJSON(t.spatialReference),r=[];for(let n=0;n<e.length;n++){const s=e[n],o=As.fromJSON(s),a=s.geometry&&s.geometry.spatialReference;ee(o.geometry)&&!a&&(o.geometry.spatialReference=i);const l=s.aggregateGeometries,u=o.aggregateGeometries;if(l&&ee(u))for(const c in u){const d=u[c],f=l[c]?.spatialReference;ee(d)&&!f&&(d.spatialReference=i)}r.push(o)}return r}writeGeometryType(e,t,i,r){if(e)return void bP.write(e,t,i,r);const{features:n}=this;if(n){for(const s of n)if(s&&ee(s.geometry))return void bP.write(s.geometry.type,t,i,r)}}readQueryGeometry(e,t){if(!e)return null;const i=!!e.spatialReference,r=Il(e);return r&&!i&&t.spatialReference&&(r.spatialReference=Et.fromJSON(t.spatialReference)),r}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&ee(r.geometry)&&r.geometry.spatialReference)return void(t.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new vP(this.cloneProperties())}cloneProperties(){return Le({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let i=0;i<t.features.length;i++){const r=t.features[i];if(r.geometry){const n=e&&e[i];r.geometry=n&&n.toJSON()||r.geometry}}return t}quantize(e){const{scale:[t,i],translate:[r,n]}=e,s=u=>Math.round((u-r)/t),o=u=>Math.round((n-u)/i),a=this.features,l=this._getQuantizationFunction(this.geometryType,s,o);for(let u=0,c=a.length;u<c;u++)l?.(a[u].geometry)||(a.splice(u,1),u--,c--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:i}=this;if(!i)return this;const{translate:[r,n],scale:[s,o]}=i,a=c=>c*s+r,l=c=>n-c*o,u=this._getHydrationFunction(e,a,l);for(const{geometry:c}of t)ee(c)&&u&&u(c);return this.transform=null,this}_quantizePoints(e,t,i){let r,n;const s=[];for(let o=0,a=e.length;o<a;o++){const l=e[o];if(o>0){const u=t(l[0]),c=i(l[1]);u===r&&c===n||(s.push([u-r,c-n]),r=u,n=c)}else r=t(l[0]),n=i(l[1]),s.push([r,n])}return s.length>0?s:null}_getQuantizationFunction(e,t,i){return e==="point"?r=>(r.x=t(r.x),r.y=i(r.y),r):e==="polyline"||e==="polygon"?r=>{const n=Wg(r)?r.rings:r.paths,s=[];for(let o=0,a=n.length;o<a;o++){const l=n[o],u=this._quantizePoints(l,t,i);u&&s.push(u)}return s.length>0?(Wg(r)?r.rings=s:r.paths=s,r):null}:e==="multipoint"?r=>{const n=this._quantizePoints(r.points,t,i);return n&&n.length>0?(r.points=n,r):null}:e==="extent"?r=>r:null}_getHydrationFunction(e,t,i){return e==="point"?r=>{r.x=t(r.x),r.y=i(r.y)}:e==="polyline"||e==="polygon"?r=>{const n=Wg(r)?r.rings:r.paths;let s,o;for(let a=0,l=n.length;a<l;a++){const u=n[a];for(let c=0,d=u.length;c<d;c++){const f=u[c];c>0?(s+=f[0],o+=f[1]):(s=f[0],o=f[1]),f[0]=t(s),f[1]=i(o)}}}:e==="extent"?r=>{r.xmin=t(r.xmin),r.ymin=i(r.ymin),r.xmax=t(r.xmax),r.ymax=i(r.ymax)}:e==="multipoint"?r=>{const n=r.points;let s,o;for(let a=0,l=n.length;a<l;a++){const u=n[a];a>0?(s+=u[0],o+=u[1]):(s=u[0],o=u[1]),u[0]=t(s),u[1]=i(o)}}:null}};h([p({type:String,json:{write:!0}})],ws.prototype,"displayFieldName",void 0),h([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ws.prototype,"exceededTransferLimit",void 0),h([p({type:[As],json:{write:!0}})],ws.prototype,"features",void 0),h([Ye("features")],ws.prototype,"readFeatures",null),h([p({type:[ol],json:{write:!0}})],ws.prototype,"fields",void 0),h([p({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:bP.read}}})],ws.prototype,"geometryType",void 0),h([it("geometryType")],ws.prototype,"writeGeometryType",null),h([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ws.prototype,"hasM",void 0),h([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ws.prototype,"hasZ",void 0),h([p({types:wc,json:{write:!0}})],ws.prototype,"queryGeometry",void 0),h([Ye("queryGeometry")],ws.prototype,"readQueryGeometry",null),h([p({type:Et,json:{write:!0}})],ws.prototype,"spatialReference",void 0),h([it("spatialReference")],ws.prototype,"writeSpatialReference",null),h([p({json:{write:!0}})],ws.prototype,"transform",void 0),ws=vP=h([ce("esri.rest.support.FeatureSet")],ws),ws.prototype.toJSON.isDefaultToJSON=!0;const z0=ws;let E2e=0;const Nee="esri.layers.graphics.sources.MemorySource",T$=et.getLogger(Nee);let Cd=class extends Ml.LoadableMixin(XS(Wo(Pt))){constructor(t){super(t),this._idToClientGraphic=null,this.type="memory"}load(t){const i=ee(t)?t.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}get _workerGeometryType(){const t=this.layer?.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(t){return this.load().then(()=>this._applyEdits(t))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(t,i={}){await this.load(i);const r=await this._connection.invoke("queryFeatures",t?t.toJSON():null,i);yP(t,this.layer.spatialReference,r);const n=z0.fromJSON(r);if(!this._requiresClientGraphicMapping())return n;const s=this.layer.objectIdField;for(const o of n.features){const a=o.attributes[s],l=this._idToClientGraphic.get(a);l&&(o.geometry=l.geometry)}return n.geometryType=this.layer.geometryType,n}async queryFeaturesJSON(t,i={}){if(this._requiresClientGraphicMapping())throw new Ce("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const r=await this._connection.invoke("queryFeatures",t?t.toJSON():null,i);return yP(t,this.layer.spatialReference,r),r}queryFeatureCount(t,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatureCount",t?t.toJSON():null,i))}queryObjectIds(t,i={}){return this.load(i).then(()=>this._connection.invoke("queryObjectIds",t?t.toJSON():null,i))}queryExtent(t,i={}){return this.load(i).then(()=>this._connection.invoke("queryExtent",t?t.toJSON():null,i)).then(r=>({count:r.count,extent:Kt.fromJSON(r.extent)}))}querySnapping(t,i={}){return this.load(i).then(()=>this._connection.invoke("querySnapping",t,i))}async _applyEdits(t){if(!this._connection)throw new Ce("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let r=null;const n=[],s=[];await Promise.all([this._prepareClientMapping(t.addFeatures,null),this._prepareClientMapping(t.updateFeatures,null)]);const o=c=>"objectId"in c&&c.objectId!=null?c.objectId:"attributes"in c&&c.attributes[i]!=null?c.attributes[i]:null;if(t.addFeatures&&(r=this._prepareAddFeatures(t.addFeatures)),t.deleteFeatures)for(const c of t.deleteFeatures){const d=o(c);d!=null&&n.push(d)}const a=t.updateFeatures&&this._idToClientGraphic?new Map:null;if(t.updateFeatures){for(const c of t.updateFeatures)if(s.push(this._serializeFeature(c)),a){const d=o(c);d!=null&&a.set(d,c)}}m2e(r?r.features:null,s,this.layer.spatialReference);const{fullExtent:l,featureEditResults:u}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:s,deletes:n});return this.fullExtent=l,r&&r.finish(u.uidToObjectId),this._updateClientGraphicIds(a,u),this._createEditsResult(u)}async _prepareClientMapping(t,i){if(this._layerOrSourceGeometryType!=="mesh"||Re(t))return;const r=[];for(const{geometry:n}of t)!ee(n)||n.type!=="mesh"||n.hasExtent||n.loaded||r.push(n.load({signal:i}));r.length&&await Promise.all(r)}_updateClientGraphicIds(t,i){if(this._idToClientGraphic){if(t)for(const r of i.updateResults){if(!r.success)continue;const n=t.get(r.objectId);n!=null&&this._addIdToClientGraphic(n)}for(const r of i.deleteResults)r.success&&this._idToClientGraphic.delete(r.objectId)}}_createEditsResult(t){return{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(t){const i=t.success===!0?null:t.error||{code:void 0,description:void 0};return{objectId:t.objectId,globalId:t.globalId,error:i?new Ce("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(t){const i=new Map,r=new Array(t.length);let n=null;for(let o=0;o<t.length;o++){const a=t[o],l=this._serializeFeature(a);!n&&ee(a.geometry)&&(n=a.geometry.type),r[o]=l,i.set(`${l.uid}`,a)}const s=this;return{features:r,inferredGeometryType:n,finish(o){const a=s.sourceJSON.objectIdField;for(const l in o){const u=o[l],c=i.get(l);c&&(c.attributes||(c.attributes={}),u===-1?delete c.attributes[a]:c.attributes[a]=u,s._addIdToClientGraphic(c))}}}}_addIdToClientGraphic(t){if(!this._idToClientGraphic)return;const i=this.sourceJSON.objectIdField,r=t.attributes&&t.attributes[i];r!=null&&this._idToClientGraphic.set(r,t)}get _layerOrSourceGeometryType(){return this.layer?.geometryType??this.sourceJSON?.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(t){return this._geometryTypeRequiresClientGraphicMapping(t.type)}_geometryTypeRequiresClientGraphicMapping(t){return t==="mesh"||t==="multipatch"||t==="extent"}_serializeFeature(t){const{attributes:i}=t,r=this._geometryForSerialization(t),n=(E2e++).toString();return r?{uid:n,geometry:r.toJSON(),attributes:i}:{uid:n,attributes:i}}_geometryForSerialization(t){const{geometry:i}=t;return Re(i)?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?Aa.fromExtent(i.extent):null:i}async _startWorker(t){this._connection=await Lee("MemorySourceWorker",{strategy:Ze("feature-layers-workers")?"dedicated":"local",signal:t});const{fields:i,spatialReference:r,objectIdField:n,hasM:s,hasZ:o,timeInfo:a}=this.layer,l=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,t);const u=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",m=>{T$.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),m.preventDefault()}));const c={features:u.features,fields:i&&i.map(m=>m.toJSON()),geometryType:GU.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&s,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:n,spatialReference:l?null:r&&r.toJSON(),timeInfo:a?a.toJSON():null},d=await this._connection.invoke("load",c,{signal:t});for(const m of d.warnings)T$.warn(m.message,{layer:this.layer,warning:m});d.featureErrors.length&&T$.warn(`Encountered ${d.featureErrors.length} validation errors while loading features`,d.featureErrors);const f=d.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(u.inferredGeometryType)&&(f.geometryType=GU.toJSON(u.inferredGeometryType)),this.sourceJSON=f,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),u.finish(d.assignedObjectIds)}};h([BN({Type:As,ensureType:nn(As)})],Cd.prototype,"itemType",void 0),h([p()],Cd.prototype,"type",void 0),h([p({constructOnly:!0})],Cd.prototype,"layer",void 0),h([p({readOnly:!0})],Cd.prototype,"_workerGeometryType",null),h([p()],Cd.prototype,"sourceJSON",void 0),Cd=h([ce(Nee)],Cd);function M2e(e){return"portalItem"in e}const iD=e=>{let t=class extends e{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):M2e(this)?this.portalItem?.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return h([p({type:String})],t.prototype,"apiKey",null),t=h([ce("esri.layers.mixins.APIKeyMixin")],t),t},Fee={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},Dee=Object.values(Fee),jee=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${Dee.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),I2e=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${Dee.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),T2e=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function A2e(e){return!!jee.test(e)}function G0(e){if(Re(e))return null;const t=Ln(e),i=t.path.match(jee)||t.path.match(I2e);if(!i)return null;const[,r,n,s,o]=i,a=n.indexOf("/");return{title:rD(a!==-1?n.slice(a+1):n),serverType:Fee[s.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:r}}}function C2e(e){const t=Ln(e).path.match(T2e);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function rD(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function $2e(e,t){const i=[];if(e){const r=G0(e);ee(r)&&r.title&&i.push(r.title)}if(t){const r=rD(t);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function nD(e){if(!e)return!1;const t=".arcgis.com/",i="//services",r="//tiles",n="//features",s=(e=e.toLowerCase()).includes(t),o=e.includes(i)||e.includes(r)||e.includes(n);return s&&o}function O2e(e,t){return e&&mK(yK(e,t))}function R2e(e){let{url:t}=e;if(!t)return{url:t};t=yK(t,e.logger);const i=Ln(t),r=G0(i.path);let n;if(ee(r))r.sublayer!=null&&e.layer.layerId==null&&(n=r.sublayer),t=r.url.path;else if(e.nonStandardUrlAllowed){const s=C2e(i.path);ee(s)&&(t=s.serviceUrl,n=s.sublayerId)}return{url:mK(t),layerId:n}}function k2e(e,t,i,r,n){b0(t,r,"url",n),r.url&&e.layerId!=null&&(r.url=p0(r.url,i,e.layerId.toString()))}function L2e(e){if(!e)return!1;const t=e.toLowerCase(),i=t.includes("/services/"),r=t.includes("/mapserver/wmsserver"),n=t.includes("/imageserver/wmsserver"),s=t.includes("/wmsserver");return i&&(r||n||s)}const g4=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=G0(this.url);if(ee(i)&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",O2e(i,et.getLogger(this.declaredClass)))}};return h([p()],t.prototype,"title",null),h([p({type:String})],t.prototype,"url",null),t=h([ce("esri.layers.mixins.ArcGISService")],t),t};function v4(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function P2e(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function N2e(e,t,i,r,n,s,o,a,l,u,c,d,f,m,g,v){const b=new Float32Array(16);return b[0]=e,b[1]=t,b[2]=i,b[3]=r,b[4]=n,b[5]=s,b[6]=o,b[7]=a,b[8]=l,b[9]=u,b[10]=c,b[11]=d,b[12]=f,b[13]=m,b[14]=g,b[15]=v,b}function F2e(e,t){return new Float32Array(e,t,16)}const D2e=v4();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:D2e,clone:P2e,create:v4,createView:F2e,fromValues:N2e},Symbol.toStringTag,{value:"Module"}));function j2e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Fm(e,t,i,r,n,s,o,a,l,u,c,d,f,m,g,v,b){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e[8]=u,e[9]=c,e[10]=d,e[11]=f,e[12]=m,e[13]=g,e[14]=v,e[15]=b,e}function h3(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function yp(e,t){if(e===t){const i=t[1],r=t[2],n=t[3],s=t[6],o=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=s,e[11]=t[14],e[12]=n,e[13]=o,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function U2e(e,t){return Uee(e,t)||h3(e),e}function Uee(e,t){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],d=t[9],f=t[10],m=t[11],g=t[12],v=t[13],b=t[14],x=t[15],S=i*a-r*o,T=i*l-n*o,_=i*u-s*o,M=r*l-n*a,I=r*u-s*a,$=n*u-s*l,L=c*v-d*g,B=c*b-f*g,z=c*x-m*g,W=d*b-f*v,J=d*x-m*v,K=f*x-m*b;let Q=S*K-T*J+_*W+M*z-I*B+$*L;return Q?(Q=1/Q,e[0]=(a*K-l*J+u*W)*Q,e[1]=(n*J-r*K-s*W)*Q,e[2]=(v*$-b*I+x*M)*Q,e[3]=(f*I-d*$-m*M)*Q,e[4]=(l*z-o*K-u*B)*Q,e[5]=(i*K-n*z+s*B)*Q,e[6]=(b*_-g*$-x*T)*Q,e[7]=(c*$-f*_+m*T)*Q,e[8]=(o*J-a*z+u*L)*Q,e[9]=(r*z-i*J-s*L)*Q,e[10]=(g*I-v*_+x*S)*Q,e[11]=(d*_-c*I-m*S)*Q,e[12]=(a*B-o*W-l*L)*Q,e[13]=(i*W-r*B+n*L)*Q,e[14]=(v*T-g*M-b*S)*Q,e[15]=(c*M-d*T+f*S)*Q,e):null}function V2e(e,t){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],d=t[9],f=t[10],m=t[11],g=t[12],v=t[13],b=t[14],x=t[15];return e[0]=a*(f*x-m*b)-d*(l*x-u*b)+v*(l*m-u*f),e[1]=-(r*(f*x-m*b)-d*(n*x-s*b)+v*(n*m-s*f)),e[2]=r*(l*x-u*b)-a*(n*x-s*b)+v*(n*u-s*l),e[3]=-(r*(l*m-u*f)-a*(n*m-s*f)+d*(n*u-s*l)),e[4]=-(o*(f*x-m*b)-c*(l*x-u*b)+g*(l*m-u*f)),e[5]=i*(f*x-m*b)-c*(n*x-s*b)+g*(n*m-s*f),e[6]=-(i*(l*x-u*b)-o*(n*x-s*b)+g*(n*u-s*l)),e[7]=i*(l*m-u*f)-o*(n*m-s*f)+c*(n*u-s*l),e[8]=o*(d*x-m*v)-c*(a*x-u*v)+g*(a*m-u*d),e[9]=-(i*(d*x-m*v)-c*(r*x-s*v)+g*(r*m-s*d)),e[10]=i*(a*x-u*v)-o*(r*x-s*v)+g*(r*u-s*a),e[11]=-(i*(a*m-u*d)-o*(r*m-s*d)+c*(r*u-s*a)),e[12]=-(o*(d*b-f*v)-c*(a*b-l*v)+g*(a*f-l*d)),e[13]=i*(d*b-f*v)-c*(r*b-n*v)+g*(r*f-n*d),e[14]=-(i*(a*b-l*v)-o*(r*b-n*v)+g*(r*l-n*a)),e[15]=i*(a*f-l*d)-o*(r*f-n*d)+c*(r*l-n*a),e}function B2e(e){const t=e[0],i=e[1],r=e[2],n=e[3],s=e[4],o=e[5],a=e[6],l=e[7],u=e[8],c=e[9],d=e[10],f=e[11],m=e[12],g=e[13],v=e[14],b=e[15];return(t*o-i*s)*(d*b-f*v)-(t*a-r*s)*(c*b-f*g)+(t*l-n*s)*(c*v-d*g)+(i*a-r*o)*(u*b-f*m)-(i*l-n*o)*(u*v-d*m)+(r*l-n*a)*(u*g-c*m)}function Vee(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],d=t[8],f=t[9],m=t[10],g=t[11],v=t[12],b=t[13],x=t[14],S=t[15];let T=i[0],_=i[1],M=i[2],I=i[3];return e[0]=T*r+_*a+M*d+I*v,e[1]=T*n+_*l+M*f+I*b,e[2]=T*s+_*u+M*m+I*x,e[3]=T*o+_*c+M*g+I*S,T=i[4],_=i[5],M=i[6],I=i[7],e[4]=T*r+_*a+M*d+I*v,e[5]=T*n+_*l+M*f+I*b,e[6]=T*s+_*u+M*m+I*x,e[7]=T*o+_*c+M*g+I*S,T=i[8],_=i[9],M=i[10],I=i[11],e[8]=T*r+_*a+M*d+I*v,e[9]=T*n+_*l+M*f+I*b,e[10]=T*s+_*u+M*m+I*x,e[11]=T*o+_*c+M*g+I*S,T=i[12],_=i[13],M=i[14],I=i[15],e[12]=T*r+_*a+M*d+I*v,e[13]=T*n+_*l+M*f+I*b,e[14]=T*s+_*u+M*m+I*x,e[15]=T*o+_*c+M*g+I*S,e}function z2e(e,t,i){const r=i[0],n=i[1],s=i[2];if(t===e)e[12]=t[0]*r+t[4]*n+t[8]*s+t[12],e[13]=t[1]*r+t[5]*n+t[9]*s+t[13],e[14]=t[2]*r+t[6]*n+t[10]*s+t[14],e[15]=t[3]*r+t[7]*n+t[11]*s+t[15];else{const o=t[0],a=t[1],l=t[2],u=t[3],c=t[4],d=t[5],f=t[6],m=t[7],g=t[8],v=t[9],b=t[10],x=t[11];e[0]=o,e[1]=a,e[2]=l,e[3]=u,e[4]=c,e[5]=d,e[6]=f,e[7]=m,e[8]=g,e[9]=v,e[10]=b,e[11]=x,e[12]=o*r+c*n+g*s+t[12],e[13]=a*r+d*n+v*s+t[13],e[14]=l*r+f*n+b*s+t[14],e[15]=u*r+m*n+x*s+t[15]}return e}function G2e(e,t,i){const r=i[0],n=i[1],s=i[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function q2e(e,t,i,r){let n,s,o,a,l,u,c,d,f,m,g,v,b,x,S,T,_,M,I,$,L,B,z,W,J=r[0],K=r[1],Q=r[2],y=Math.sqrt(J*J+K*K+Q*Q);return y<bu()?null:(y=1/y,J*=y,K*=y,Q*=y,n=Math.sin(i),s=Math.cos(i),o=1-s,a=t[0],l=t[1],u=t[2],c=t[3],d=t[4],f=t[5],m=t[6],g=t[7],v=t[8],b=t[9],x=t[10],S=t[11],T=J*J*o+s,_=K*J*o+Q*n,M=Q*J*o-K*n,I=J*K*o-Q*n,$=K*K*o+s,L=Q*K*o+J*n,B=J*Q*o+K*n,z=K*Q*o-J*n,W=Q*Q*o+s,e[0]=a*T+d*_+v*M,e[1]=l*T+f*_+b*M,e[2]=u*T+m*_+x*M,e[3]=c*T+g*_+S*M,e[4]=a*I+d*$+v*L,e[5]=l*I+f*$+b*L,e[6]=u*I+m*$+x*L,e[7]=c*I+g*$+S*L,e[8]=a*B+d*z+v*W,e[9]=l*B+f*z+b*W,e[10]=u*B+m*z+x*W,e[11]=c*B+g*z+S*W,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function H2e(e,t,i){const r=Math.sin(i),n=Math.cos(i),s=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],d=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*n+u*r,e[5]=o*n+c*r,e[6]=a*n+d*r,e[7]=l*n+f*r,e[8]=u*n-s*r,e[9]=c*n-o*r,e[10]=d*n-a*r,e[11]=f*n-l*r,e}function W2e(e,t,i){const r=Math.sin(i),n=Math.cos(i),s=t[0],o=t[1],a=t[2],l=t[3],u=t[8],c=t[9],d=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*n-u*r,e[1]=o*n-c*r,e[2]=a*n-d*r,e[3]=l*n-f*r,e[8]=s*r+u*n,e[9]=o*r+c*n,e[10]=a*r+d*n,e[11]=l*r+f*n,e}function J2e(e,t,i){const r=Math.sin(i),n=Math.cos(i),s=t[0],o=t[1],a=t[2],l=t[3],u=t[4],c=t[5],d=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*n+u*r,e[1]=o*n+c*r,e[2]=a*n+d*r,e[3]=l*n+f*r,e[4]=u*n-s*r,e[5]=c*n-o*r,e[6]=d*n-a*r,e[7]=f*n-l*r,e}function Bee(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function Z2e(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Y2e(e,t,i){if(t===0)return h3(e);let r,n,s,o=i[0],a=i[1],l=i[2],u=Math.sqrt(o*o+a*a+l*l);return u<bu()?null:(u=1/u,o*=u,a*=u,l*=u,r=Math.sin(t),n=Math.cos(t),s=1-n,e[0]=o*o*s+n,e[1]=a*o*s+l*r,e[2]=l*o*s-a*r,e[3]=0,e[4]=o*a*s-l*r,e[5]=a*a*s+n,e[6]=l*a*s+o*r,e[7]=0,e[8]=o*l*s+a*r,e[9]=a*l*s-o*r,e[10]=l*l*s+n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function K2e(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Q2e(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function X2e(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function zee(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=r+r,l=n+n,u=s+s,c=r*a,d=r*l,f=r*u,m=n*l,g=n*u,v=s*u,b=o*a,x=o*l,S=o*u;return e[0]=1-(m+v),e[1]=d+S,e[2]=f-x,e[3]=0,e[4]=d-S,e[5]=1-(c+v),e[6]=g+b,e[7]=0,e[8]=f+x,e[9]=g-b,e[10]=1-(c+m),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function exe(e,t){const i=txe,r=-t[0],n=-t[1],s=-t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],d=r*r+n*n+s*s+o*o;return d>0?(i[0]=2*(a*o+c*r+l*s-u*n)/d,i[1]=2*(l*o+c*n+u*r-a*s)/d,i[2]=2*(u*o+c*s+a*n-l*r)/d):(i[0]=2*(a*o+c*r+l*s-u*n),i[1]=2*(l*o+c*n+u*r-a*s),i[2]=2*(u*o+c*s+a*n-l*r)),zee(e,t,i),e}const txe=$a();function ixe(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function rxe(e,t){const i=t[0],r=t[1],n=t[2],s=t[4],o=t[5],a=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.sqrt(i*i+r*r+n*n),e[1]=Math.sqrt(s*s+o*o+a*a),e[2]=Math.sqrt(l*l+u*u+c*c),e}function nxe(e,t){const i=t[0]+t[5]+t[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function sxe(e,t,i,r){const n=t[0],s=t[1],o=t[2],a=t[3],l=n+n,u=s+s,c=o+o,d=n*l,f=n*u,m=n*c,g=s*u,v=s*c,b=o*c,x=a*l,S=a*u,T=a*c,_=r[0],M=r[1],I=r[2];return e[0]=(1-(g+b))*_,e[1]=(f+T)*_,e[2]=(m-S)*_,e[3]=0,e[4]=(f-T)*M,e[5]=(1-(d+b))*M,e[6]=(v+x)*M,e[7]=0,e[8]=(m+S)*I,e[9]=(v-x)*I,e[10]=(1-(d+g))*I,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function oxe(e,t,i,r,n){const s=t[0],o=t[1],a=t[2],l=t[3],u=s+s,c=o+o,d=a+a,f=s*u,m=s*c,g=s*d,v=o*c,b=o*d,x=a*d,S=l*u,T=l*c,_=l*d,M=r[0],I=r[1],$=r[2],L=n[0],B=n[1],z=n[2],W=(1-(v+x))*M,J=(m+_)*M,K=(g-T)*M,Q=(m-_)*I,y=(1-(f+x))*I,A=(b+S)*I,N=(g+T)*$,j=(b-S)*$,oe=(1-(f+v))*$;return e[0]=W,e[1]=J,e[2]=K,e[3]=0,e[4]=Q,e[5]=y,e[6]=A,e[7]=0,e[8]=N,e[9]=j,e[10]=oe,e[11]=0,e[12]=i[0]+L-(W*L+Q*B+N*z),e[13]=i[1]+B-(J*L+y*B+j*z),e[14]=i[2]+z-(K*L+A*B+oe*z),e[15]=1,e}function axe(e,t){const i=t[0],r=t[1],n=t[2],s=t[3],o=i+i,a=r+r,l=n+n,u=i*o,c=r*o,d=r*a,f=n*o,m=n*a,g=n*l,v=s*o,b=s*a,x=s*l;return e[0]=1-d-g,e[1]=c+x,e[2]=f-b,e[3]=0,e[4]=c-x,e[5]=1-u-g,e[6]=m+v,e[7]=0,e[8]=f+b,e[9]=m-v,e[10]=1-u-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function lxe(e,t,i,r,n,s,o){const a=1/(i-t),l=1/(n-r),u=1/(s-o);return e[0]=2*s*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*s*l,e[6]=0,e[7]=0,e[8]=(i+t)*a,e[9]=(n+r)*l,e[10]=(o+s)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*s*2*u,e[15]=0,e}function uxe(e,t,i,r,n){const s=1/Math.tan(t/2);let o;return e[0]=s/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n!=null&&n!==1/0?(o=1/(r-n),e[10]=(n+r)*o,e[14]=2*n*r*o):(e[10]=-1,e[14]=-2*r),e}function cxe(e,t,i,r){const n=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+a),u=2/(n+s);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-(o-a)*l*.5,e[9]=(n-s)*u*.5,e[10]=r/(i-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*i/(i-r),e[15]=0,e}function hxe(e,t,i,r,n,s,o){const a=1/(t-i),l=1/(r-n),u=1/(s-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+i)*a,e[13]=(n+r)*l,e[14]=(o+s)*u,e[15]=1,e}function dxe(e,t,i,r){let n,s,o,a,l,u,c,d,f,m;const g=t[0],v=t[1],b=t[2],x=r[0],S=r[1],T=r[2],_=i[0],M=i[1],I=i[2],$=bu();return Math.abs(g-_)<$&&Math.abs(v-M)<$&&Math.abs(b-I)<$?h3(e):(c=g-_,d=v-M,f=b-I,m=1/Math.sqrt(c*c+d*d+f*f),c*=m,d*=m,f*=m,n=S*f-T*d,s=T*c-x*f,o=x*d-S*c,m=Math.sqrt(n*n+s*s+o*o),m?(m=1/m,n*=m,s*=m,o*=m):(n=0,s=0,o=0),a=d*o-f*s,l=f*n-c*o,u=c*s-d*n,m=Math.sqrt(a*a+l*l+u*u),m?(m=1/m,a*=m,l*=m,u*=m):(a=0,l=0,u=0),e[0]=n,e[1]=a,e[2]=c,e[3]=0,e[4]=s,e[5]=l,e[6]=d,e[7]=0,e[8]=o,e[9]=u,e[10]=f,e[11]=0,e[12]=-(n*g+s*v+o*b),e[13]=-(a*g+l*v+u*b),e[14]=-(c*g+d*v+f*b),e[15]=1,e)}function pxe(e,t,i,r){const n=t[0],s=t[1],o=t[2],a=r[0],l=r[1],u=r[2];let c=n-i[0],d=s-i[1],f=o-i[2],m=c*c+d*d+f*f;m>0&&(m=1/Math.sqrt(m),c*=m,d*=m,f*=m);let g=l*f-u*d,v=u*c-a*f,b=a*d-l*c;return m=g*g+v*v+b*b,m>0&&(m=1/Math.sqrt(m),g*=m,v*=m,b*=m),e[0]=g,e[1]=v,e[2]=b,e[3]=0,e[4]=d*b-f*v,e[5]=f*g-c*b,e[6]=c*v-d*g,e[7]=0,e[8]=c,e[9]=d,e[10]=f,e[11]=0,e[12]=n,e[13]=s,e[14]=o,e[15]=1,e}function fxe(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function mxe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function yxe(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e}function Gee(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}function gxe(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e}function vxe(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e[9]=t[9]+i[9]*r,e[10]=t[10]+i[10]*r,e[11]=t[11]+i[11]*r,e[12]=t[12]+i[12]*r,e[13]=t[13]+i[13]*r,e[14]=t[14]+i[14]*r,e[15]=t[15]+i[15]*r,e}function bxe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function wxe(e,t){if(e===t)return!0;const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],d=e[9],f=e[10],m=e[11],g=e[12],v=e[13],b=e[14],x=e[15],S=t[0],T=t[1],_=t[2],M=t[3],I=t[4],$=t[5],L=t[6],B=t[7],z=t[8],W=t[9],J=t[10],K=t[11],Q=t[12],y=t[13],A=t[14],N=t[15],j=bu();return Math.abs(i-S)<=j*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(r-T)<=j*Math.max(1,Math.abs(r),Math.abs(T))&&Math.abs(n-_)<=j*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(s-M)<=j*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(o-I)<=j*Math.max(1,Math.abs(o),Math.abs(I))&&Math.abs(a-$)<=j*Math.max(1,Math.abs(a),Math.abs($))&&Math.abs(l-L)<=j*Math.max(1,Math.abs(l),Math.abs(L))&&Math.abs(u-B)<=j*Math.max(1,Math.abs(u),Math.abs(B))&&Math.abs(c-z)<=j*Math.max(1,Math.abs(c),Math.abs(z))&&Math.abs(d-W)<=j*Math.max(1,Math.abs(d),Math.abs(W))&&Math.abs(f-J)<=j*Math.max(1,Math.abs(f),Math.abs(J))&&Math.abs(m-K)<=j*Math.max(1,Math.abs(m),Math.abs(K))&&Math.abs(g-Q)<=j*Math.max(1,Math.abs(g),Math.abs(Q))&&Math.abs(v-y)<=j*Math.max(1,Math.abs(v),Math.abs(y))&&Math.abs(b-A)<=j*Math.max(1,Math.abs(b),Math.abs(A))&&Math.abs(x-N)<=j*Math.max(1,Math.abs(x),Math.abs(N))}function _xe(e){const t=bu(),i=e[0],r=e[1],n=e[2],s=e[4],o=e[5],a=e[6],l=e[8],u=e[9],c=e[10];return Math.abs(1-(i*i+s*s+l*l))<=t&&Math.abs(1-(r*r+o*o+u*u))<=t&&Math.abs(1-(n*n+a*a+c*c))<=t}function xxe(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[8]===0&&e[9]===0&&e[10]===1}const Sxe=Vee,Exe=Gee;Object.freeze(Object.defineProperty({__proto__:null,add:yxe,adjoint:V2e,copy:j2e,determinant:B2e,equals:wxe,exactEquals:bxe,frob:mxe,fromQuat:axe,fromQuat2:exe,fromRotation:Y2e,fromRotationTranslation:zee,fromRotationTranslationScale:sxe,fromRotationTranslationScaleOrigin:oxe,fromScaling:Z2e,fromTranslation:Bee,fromXRotation:K2e,fromYRotation:Q2e,fromZRotation:X2e,frustum:lxe,getRotation:nxe,getScaling:rxe,getTranslation:ixe,hasIdentityRotation:xxe,identity:h3,invert:Uee,invertOrIdentity:U2e,isOrthoNormal:_xe,lookAt:dxe,mul:Sxe,multiply:Vee,multiplyScalar:gxe,multiplyScalarAndAdd:vxe,ortho:hxe,perspective:uxe,perspectiveFromFieldOfView:cxe,rotate:q2e,rotateX:H2e,rotateY:W2e,rotateZ:J2e,scale:G2e,set:Fm,str:fxe,sub:Exe,subtract:Gee,targetTo:pxe,translate:z2e,transpose:yp},Symbol.toStringTag,{value:"Module"}));const Mxe=(e,t)=>{const i=Fm(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return yp(i,i)},Ixe=(e,t)=>{const i=Fm(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return yp(i,i)},Txe=(e,t)=>{const i=1-t,r=Fm(e,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return yp(r,r)},Axe=(e,t)=>{const i=Math.sin(t*Math.PI/180),r=Math.cos(t*Math.PI/180),n=Fm(e,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return yp(n,n)},Cxe=(e,t)=>{const i=1-2*t,r=Fm(e,i,0,0,t,0,i,0,t,0,0,i,t,0,0,0,1);return yp(r,r)},$xe=(e,t)=>{const i=Fm(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return yp(i,i)},Oxe=(e,t)=>{const i=1-t,r=Fm(e,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return yp(r,r)};let qee=class Hee{constructor(t,i,r){this.strength=t,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(t,i,r){this.strength=ha(t.strength,i.strength,r),this.radius=ha(t.radius,i.radius,r),this.threshold=ha(t.threshold,i.threshold,r)}clone(){return new Hee(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:cx(this.radius),strength:this.strength,threshold:this.threshold}}},Wee=class Jee{constructor(t){this.radius=t,this.type="blur"}interpolate(t,i,r){this.radius=Math.round(ha(t.radius,i.radius,r))}clone(){return new Jee(this.radius)}toJSON(){return{type:"blur",radius:cx(this.radius)}}},wP=class Zee{constructor(t,i){this.type=t,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.amount=ha(t.amount,i.amount,r),this._updateMatrix()}clone(){return new Zee(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||v4();switch(this.type){case"brightness":this._colorMatrix=Mxe(t,this.amount);break;case"contrast":this._colorMatrix=Ixe(t,this.amount);break;case"grayscale":this._colorMatrix=Txe(t,this.amount);break;case"invert":this._colorMatrix=Cxe(t,this.amount);break;case"saturate":this._colorMatrix=$xe(t,this.amount);break;case"sepia":this._colorMatrix=Oxe(t,this.amount)}}},Yee=class Kee{constructor(t,i,r,n){this.offsetX=t,this.offsetY=i,this.blurRadius=r,this.color=n,this.type="drop-shadow"}interpolate(t,i,r){this.offsetX=ha(t.offsetX,i.offsetX,r),this.offsetY=ha(t.offsetY,i.offsetY,r),this.blurRadius=ha(t.blurRadius,i.blurRadius,r),this.color[0]=Math.round(ha(t.color[0],i.color[0],r)),this.color[1]=Math.round(ha(t.color[1],i.color[1],r)),this.color[2]=Math.round(ha(t.color[2],i.color[2],r)),this.color[3]=ha(t.color[3],i.color[3],r)}clone(){return new Kee(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:cx(this.offsetX),yoffset:cx(this.offsetY),blurRadius:cx(this.blurRadius),color:t}}},Qee=class Xee{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.angle=ha(t.angle,i.angle,r),this._updateMatrix()}clone(){return new Xee(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||v4();this._colorMatrix=Axe(t,this.angle)}},ete=class tte{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,i,r){this.amount=ha(t.amount,i.amount,r)}clone(){return new tte(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function ha(e,t,i){return e+(t-e)*i}function cx(e){return Math.round(1e3*tp(e))/1e3}function Rxe(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new wP(e.type,0);case"saturate":case"brightness":case"contrast":return new wP(e.type,1);case"opacity":return new ete(1);case"hue-rotate":return new Qee(0);case"blur":return new Wee(0);case"drop-shadow":return new Yee(0,0,0,[...uF("transparent")]);case"bloom":return new qee(0,0,1)}}function kxe(e,t){const i=e.length>t.length?e:t;return(e.length>t.length?t:e).every((r,n)=>r.type===i[n].type)}function Lxe(e,t){const i=e.length>t.length?e:t,r=e.length>t.length?t:e;for(let n=r.length;n<i.length;n++)r.push(Rxe(i[n]))}function Pxe(e){const t=e[0];return!!t&&"type"in t}var UV,VV,_P={};function ite(e){if(!e||e.length===0)return null;if(typeof e=="string"){const i=BV(e);return i&&i.length!==0?i:null}const t=e.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new Ce("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:BV(i.value)}});t.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<t.length-1;i++){if(!kxe(t[i].effects,t[i+1].effects))throw new Ce("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[i].effects,b:t[i+1].effects});Lxe(t[i].effects,t[i+1].effects)}return t.sort((i,r)=>r.scale-i.scale),t}function BV(e){let t;if(!e)return[];try{t=_P.parse(e)}catch(i){throw new Ce("effect:invalid-syntax","Invalid effect syntax",{value:e,error:i})}return t.map(i=>Nxe(i))}function Nxe(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return Fxe(e);case"opacity":return Dxe(e);case"hue-rotate":return jxe(e);case"blur":return Uxe(e);case"drop-shadow":return Vxe(e);case"bloom":return Bxe(e)}}catch(t){throw t.details.filter=e,t}throw new Ce("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function Fxe(e){let t=1;return Ew(e.parameters,1),e.parameters.length===1&&(t=Ku(e.parameters[0])),new wP(e.name,t)}function Dxe(e){let t=1;return Ew(e.parameters,1),e.parameters.length===1&&(t=Ku(e.parameters[0])),new ete(t)}function jxe(e){let t=0;return Ew(e.parameters,1),e.parameters.length===1&&(t=Jxe(e.parameters[0])),new Qee(t)}function Uxe(e){let t=0;return Ew(e.parameters,1),e.parameters.length===1&&(t=aD(e.parameters[0]),d3(t,e.parameters[0])),new Wee(t)}function Vxe(e){const t=[];let i=null;for(const r of e.parameters)if(r.type==="color"){if(t.length&&Object.freeze(t),i)throw new Ce("effect:type-error","Accepts only one color",{});i=Zxe(r)}else{const n=aD(r);if(Object.isFrozen(t))throw new Ce("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(n),t.length===3&&d3(n,r)}if(t.length<2||t.length>3)throw new Ce("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new Yee(t[0],t[1],t[2]||0,i||rte("black"))}function Bxe(e){let t=1,i=0,r=0;return Ew(e.parameters,3),e.parameters[0]&&(t=Ku(e.parameters[0])),e.parameters[1]&&(i=aD(e.parameters[1]),d3(i,e.parameters[1])),e.parameters[2]&&(r=Ku(e.parameters[2])),new qee(t,i,r)}function Ew(e,t){if(e.length>t)throw new Ce("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function b4(e){if(e.type==="color")return"<color>";if(e.unit){if(oD[e.unit])return"<length>";if(sD[e.unit])return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function d3(e,t){if(e<0)throw new Ce("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function zxe(e){if(e.type!=="quantity"||e.unit!==null)throw new Ce("effect:type-error",`Expected <double>, Actual: ${b4(e)}`,{term:e})}function Gxe(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new Ce("effect:type-error",`Expected <double> or <percentage>, Actual: ${b4(e)}`,{term:e})}VV=function(){function e(n,s){function o(){this.constructor=n}o.prototype=s.prototype,n.prototype=new o}function t(n,s,o,a){var l=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(l,t.prototype),l.expected=s,l.found=o,l.location=a,l.name="SyntaxError",l}function i(n,s,o){return o=o||" ",n.length>s?n:(s-=n.length,n+(o+=o.repeat(s)).slice(0,s))}function r(n,s){var o,a={},l=(s=s!==void 0?s:{}).grammarSource,u={start:bt},c=bt,d="none",f=")",m=",",g="(",v="%",b="px",x="cm",S="mm",T="in",_="pt",M="pc",I="deg",$="rad",L="grad",B="turn",z="#",W=".",J="e",K=/^[ \t\n\r]/,Q=/^[a-z\-]/,y=/^[0-9a-fA-F]/,A=/^[+\-]/,N=/^[0-9]/,j=Rs("none"),oe=yr("none",!1),q=yr(")",!1),de=yr(",",!1),re=Rs("whitespace"),me=Sc([" ","	",`
`,"\r"],!1,!1),ve=Rs("function"),_e=yr("(",!1),Se=Rs("identifier"),Oe=Sc([["a","z"],"-"],!1,!1),Me=Rs("percentage"),we=yr("%",!1),Ie=Rs("length"),Ae=yr("px",!1),H=yr("cm",!1),V=yr("mm",!1),D=yr("in",!1),ne=yr("pt",!1),ye=yr("pc",!1),ae=Rs("angle"),U=yr("deg",!1),le=yr("rad",!1),ie=yr("grad",!1),k=yr("turn",!1),O=Rs("number"),C=Rs("color"),G=yr("#",!1),Z=Sc([["0","9"],["a","f"],["A","F"]],!1,!1),F=Sc(["+","-"],!1,!1),te=Sc([["0","9"]],!1,!1),ge=yr(".",!1),xe=yr("e",!1),fe=function(){return[]},ze=function($e,Qe){return{type:"function",name:$e,parameters:Qe||[]}},He=function($e,Qe){return Qe.length>0?Sp($e,Qe,3):[$e]},Xe=function($e){return{type:"quantity",value:$e.value,unit:$e.unit}},Ve=function($e){return{type:"color",colorType:$e.type,value:$e.value}},be=function($e){return $e},ke=function(){return Mo()},Ge=function($e){return{value:$e,unit:"%"}},ut=function($e){return{value:$e,unit:"px"}},pt=function($e){return{value:$e,unit:"cm"}},gt=function($e){return{value:$e,unit:"mm"}},Rt=function($e){return{value:$e,unit:"in"}},dt=function($e){return{value:$e,unit:"pt"}},qt=function($e){return{value:$e,unit:"pc"}},zt=function($e){return{value:$e,unit:"deg"}},xi=function($e){return{value:$e,unit:"rad"}},Or=function($e){return{value:$e,unit:"grad"}},gs=function($e){return{value:$e,unit:"turn"}},Na=function($e){return{value:$e,unit:null}},Fa=function(){return{type:"hex",value:Mo()}},Da=function($e){return{type:"function",value:$e}},Cl=function(){return{type:"named",value:Mo()}},_p=function(){return parseFloat(Mo())},Be=0,Gi=0,Jo=[{line:1,column:1}],ki=0,vs=[],yt=0;if("startRule"in s){if(!(s.startRule in u))throw new Error(`Can't start parsing from rule "`+s.startRule+'".');c=u[s.startRule]}function Mo(){return n.substring(Gi,Be)}function yr($e,Qe){return{type:"literal",text:$e,ignoreCase:Qe}}function Sc($e,Qe,ot){return{type:"class",parts:$e,inverted:Qe,ignoreCase:ot}}function _u(){return{type:"end"}}function Rs($e){return{type:"other",description:$e}}function lt($e){var Qe,ot=Jo[$e];if(ot)return ot;for(Qe=$e-1;!Jo[Qe];)Qe--;for(ot={line:(ot=Jo[Qe]).line,column:ot.column};Qe<$e;)n.charCodeAt(Qe)===10?(ot.line++,ot.column=1):ot.column++,Qe++;return Jo[$e]=ot,ot}function t1($e,Qe){var ot=lt($e),hi=lt(Qe);return{source:l,start:{offset:$e,line:ot.line,column:ot.column},end:{offset:Qe,line:hi.line,column:hi.column}}}function ii($e){Be<ki||(Be>ki&&(ki=Be,vs=[]),vs.push($e))}function Gw($e,Qe,ot){return new t(t.buildMessage($e,Qe),$e,Qe,ot)}function bt(){var $e;return($e=Sn())===a&&($e=Zo()),$e}function Sn(){var $e,Qe;return yt++,$e=Be,Ni(),n.substr(Be,4)===d?(Qe=d,Be+=4):(Qe=a,yt===0&&ii(oe)),Qe!==a?(Ni(),Gi=$e,$e=fe()):(Be=$e,$e=a),yt--,$e===a&&yt===0&&ii(j),$e}function Zo(){var $e,Qe;if($e=[],(Qe=Li())!==a)for(;Qe!==a;)$e.push(Qe),Qe=Li();else $e=a;return $e}function Li(){var $e,Qe,ot,hi;return $e=Be,Ni(),(Qe=i1())!==a?(Ni(),(ot=Gh())===a&&(ot=null),Ni(),n.charCodeAt(Be)===41?(hi=f,Be++):(hi=a,yt===0&&ii(q)),hi!==a?(Ni(),Gi=$e,$e=ze(Qe,ot)):(Be=$e,$e=a)):(Be=$e,$e=a),$e}function Gh(){var $e,Qe,ot,hi,En,pr,Rr,$l;if($e=Be,(Qe=gr())!==a){for(ot=[],hi=Be,En=Ni(),n.charCodeAt(Be)===44?(pr=m,Be++):(pr=a,yt===0&&ii(de)),pr===a&&(pr=null),Rr=Ni(),($l=gr())!==a?hi=En=[En,pr,Rr,$l]:(Be=hi,hi=a);hi!==a;)ot.push(hi),hi=Be,En=Ni(),n.charCodeAt(Be)===44?(pr=m,Be++):(pr=a,yt===0&&ii(de)),pr===a&&(pr=null),Rr=Ni(),($l=gr())!==a?hi=En=[En,pr,Rr,$l]:(Be=hi,hi=a);Gi=$e,$e=He(Qe,ot)}else Be=$e,$e=a;return $e}function gr(){var $e,Qe;return $e=Be,(Qe=Ym())===a&&(Qe=Mc())===a&&(Qe=r1())===a&&(Qe=n1()),Qe!==a&&(Gi=$e,Qe=Xe(Qe)),($e=Qe)===a&&($e=Be,(Qe=xp())!==a&&(Gi=$e,Qe=Ve(Qe)),$e=Qe),$e}function Ni(){var $e,Qe;for(yt++,$e=[],K.test(n.charAt(Be))?(Qe=n.charAt(Be),Be++):(Qe=a,yt===0&&ii(me));Qe!==a;)$e.push(Qe),K.test(n.charAt(Be))?(Qe=n.charAt(Be),Be++):(Qe=a,yt===0&&ii(me));return yt--,Qe=a,yt===0&&ii(re),$e}function i1(){var $e,Qe,ot;return yt++,$e=Be,(Qe=Ec())!==a?(n.charCodeAt(Be)===40?(ot=g,Be++):(ot=a,yt===0&&ii(_e)),ot!==a?(Gi=$e,$e=be(Qe)):(Be=$e,$e=a)):(Be=$e,$e=a),yt--,$e===a&&(Qe=a,yt===0&&ii(ve)),$e}function Ec(){var $e,Qe,ot;if(yt++,$e=Be,Qe=[],Q.test(n.charAt(Be))?(ot=n.charAt(Be),Be++):(ot=a,yt===0&&ii(Oe)),ot!==a)for(;ot!==a;)Qe.push(ot),Q.test(n.charAt(Be))?(ot=n.charAt(Be),Be++):(ot=a,yt===0&&ii(Oe));else Qe=a;return Qe!==a&&(Gi=$e,Qe=ke()),yt--,($e=Qe)===a&&(Qe=a,yt===0&&ii(Se)),$e}function Ym(){var $e,Qe,ot;return yt++,$e=Be,Ni(),(Qe=ks())!==a?(n.charCodeAt(Be)===37?(ot=v,Be++):(ot=a,yt===0&&ii(we)),ot!==a?(Gi=$e,$e=Ge(Qe)):(Be=$e,$e=a)):(Be=$e,$e=a),yt--,$e===a&&yt===0&&ii(Me),$e}function Mc(){var $e,Qe,ot;return yt++,$e=Be,Ni(),(Qe=ks())!==a?(n.substr(Be,2)===b?(ot=b,Be+=2):(ot=a,yt===0&&ii(Ae)),ot!==a?(Gi=$e,$e=ut(Qe)):(Be=$e,$e=a)):(Be=$e,$e=a),$e===a&&($e=Be,Ni(),(Qe=ks())!==a?(n.substr(Be,2)===x?(ot=x,Be+=2):(ot=a,yt===0&&ii(H)),ot!==a?(Gi=$e,$e=pt(Qe)):(Be=$e,$e=a)):(Be=$e,$e=a),$e===a&&($e=Be,Ni(),(Qe=ks())!==a?(n.substr(Be,2)===S?(ot=S,Be+=2):(ot=a,yt===0&&ii(V)),ot!==a?(Gi=$e,$e=gt(Qe)):(Be=$e,$e=a)):(Be=$e,$e=a),$e===a&&($e=Be,Ni(),(Qe=ks())!==a?(n.substr(Be,2)===T?(ot=T,Be+=2):(ot=a,yt===0&&ii(D)),ot!==a?(Gi=$e,$e=Rt(Qe)):(Be=$e,$e=a)):(Be=$e,$e=a),$e===a&&($e=Be,Ni(),(Qe=ks())!==a?(n.substr(Be,2)===_?(ot=_,Be+=2):(ot=a,yt===0&&ii(ne)),ot!==a?(Gi=$e,$e=dt(Qe)):(Be=$e,$e=a)):(Be=$e,$e=a),$e===a&&($e=Be,Ni(),(Qe=ks())!==a?(n.substr(Be,2)===M?(ot=M,Be+=2):(ot=a,yt===0&&ii(ye)),ot!==a?(Gi=$e,$e=qt(Qe)):(Be=$e,$e=a)):(Be=$e,$e=a)))))),yt--,$e===a&&yt===0&&ii(Ie),$e}function r1(){var $e,Qe,ot;return yt++,$e=Be,(Qe=ks())!==a?(n.substr(Be,3)===I?(ot=I,Be+=3):(ot=a,yt===0&&ii(U)),ot!==a?(Gi=$e,$e=zt(Qe)):(Be=$e,$e=a)):(Be=$e,$e=a),$e===a&&($e=Be,(Qe=ks())!==a?(n.substr(Be,3)===$?(ot=$,Be+=3):(ot=a,yt===0&&ii(le)),ot!==a?(Gi=$e,$e=xi(Qe)):(Be=$e,$e=a)):(Be=$e,$e=a),$e===a&&($e=Be,(Qe=ks())!==a?(n.substr(Be,4)===L?(ot=L,Be+=4):(ot=a,yt===0&&ii(ie)),ot!==a?(Gi=$e,$e=Or(Qe)):(Be=$e,$e=a)):(Be=$e,$e=a),$e===a&&($e=Be,(Qe=ks())!==a?(n.substr(Be,4)===B?(ot=B,Be+=4):(ot=a,yt===0&&ii(k)),ot!==a?(Gi=$e,$e=gs(Qe)):(Be=$e,$e=a)):(Be=$e,$e=a)))),yt--,$e===a&&(Qe=a,yt===0&&ii(ae)),$e}function n1(){var $e,Qe;return yt++,$e=Be,Ni(),(Qe=ks())!==a?(Gi=$e,$e=Na(Qe)):(Be=$e,$e=a),yt--,$e===a&&yt===0&&ii(O),$e}function xp(){var $e,Qe,ot,hi;if(yt++,$e=Be,n.charCodeAt(Be)===35?(Qe=z,Be++):(Qe=a,yt===0&&ii(G)),Qe!==a){if(ot=[],y.test(n.charAt(Be))?(hi=n.charAt(Be),Be++):(hi=a,yt===0&&ii(Z)),hi!==a)for(;hi!==a;)ot.push(hi),y.test(n.charAt(Be))?(hi=n.charAt(Be),Be++):(hi=a,yt===0&&ii(Z));else ot=a;ot!==a?(Gi=$e,$e=Fa()):(Be=$e,$e=a)}else Be=$e,$e=a;return $e===a&&($e=Be,(Qe=Li())!==a&&(Gi=$e,Qe=Da(Qe)),($e=Qe)===a&&($e=Be,(Qe=Ec())!==a&&(Gi=$e,Qe=Cl()),$e=Qe)),yt--,$e===a&&(Qe=a,yt===0&&ii(C)),$e}function ks(){var $e,Qe,ot,hi,En,pr,Rr;for($e=Be,A.test(n.charAt(Be))?(n.charAt(Be),Be++):yt===0&&ii(F),Qe=Be,ot=[],N.test(n.charAt(Be))?(hi=n.charAt(Be),Be++):(hi=a,yt===0&&ii(te));hi!==a;)ot.push(hi),N.test(n.charAt(Be))?(hi=n.charAt(Be),Be++):(hi=a,yt===0&&ii(te));if(n.charCodeAt(Be)===46?(hi=W,Be++):(hi=a,yt===0&&ii(ge)),hi!==a){if(En=[],N.test(n.charAt(Be))?(pr=n.charAt(Be),Be++):(pr=a,yt===0&&ii(te)),pr!==a)for(;pr!==a;)En.push(pr),N.test(n.charAt(Be))?(pr=n.charAt(Be),Be++):(pr=a,yt===0&&ii(te));else En=a;En!==a?Qe=ot=[ot,hi,En]:(Be=Qe,Qe=a)}else Be=Qe,Qe=a;if(Qe===a)if(Qe=[],N.test(n.charAt(Be))?(ot=n.charAt(Be),Be++):(ot=a,yt===0&&ii(te)),ot!==a)for(;ot!==a;)Qe.push(ot),N.test(n.charAt(Be))?(ot=n.charAt(Be),Be++):(ot=a,yt===0&&ii(te));else Qe=a;if(Qe!==a){if(ot=Be,n.charCodeAt(Be)===101?(hi=J,Be++):(hi=a,yt===0&&ii(xe)),hi!==a){if(A.test(n.charAt(Be))?(En=n.charAt(Be),Be++):(En=a,yt===0&&ii(F)),En===a&&(En=null),pr=[],N.test(n.charAt(Be))?(Rr=n.charAt(Be),Be++):(Rr=a,yt===0&&ii(te)),Rr!==a)for(;Rr!==a;)pr.push(Rr),N.test(n.charAt(Be))?(Rr=n.charAt(Be),Be++):(Rr=a,yt===0&&ii(te));else pr=a;pr!==a?ot=hi=[hi,En,pr]:(Be=ot,ot=a)}else Be=ot,ot=a;ot===a&&(ot=null),Gi=$e,$e=_p()}else Be=$e,$e=a;return $e}function s1($e,Qe){return $e.map(function(ot){return ot[Qe]})}function Sp($e,Qe,ot){return[$e].concat(s1(Qe,ot))}if((o=c())!==a&&Be===n.length)return o;throw o!==a&&Be<n.length&&ii(_u()),Gw(vs,ki<n.length?n.charAt(ki):null,ki<n.length?t1(ki,ki+1):t1(ki,ki))}return e(t,Error),t.prototype.format=function(n){var s="Error: "+this.message;if(this.location){var o,a=null;for(o=0;o<n.length;o++)if(n[o].source===this.location.source){a=n[o].text.split(/\r\n|\n|\r/g);break}var l=this.location.start,u=this.location.source+":"+l.line+":"+l.column;if(a){var c=this.location.end,d=i("",l.line.toString().length," "),f=a[l.line-1],m=(l.line===c.line?c.column:f.length+1)-l.column||1;s+=`
 --> `+u+`
`+d+` |
`+l.line+" | "+f+`
`+d+" | "+i("",l.column-1," ")+i("",m,"^")}else s+=`
 at `+u}return s},t.buildMessage=function(n,s){var o={literal:function(m){return'"'+l(m.text)+'"'},class:function(m){var g=m.parts.map(function(v){return Array.isArray(v)?u(v[0])+"-"+u(v[1]):u(v)});return"["+(m.inverted?"^":"")+g.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(m){return m.description}};function a(m){return m.charCodeAt(0).toString(16).toUpperCase()}function l(m){return m.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function u(m){return m.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function c(m){return o[m.type](m)}function d(m){var g,v,b=m.map(c);if(b.sort(),b.length>0){for(g=1,v=1;g<b.length;g++)b[g-1]!==b[g]&&(b[v]=b[g],v++);b.length=v}switch(b.length){case 1:return b[0];case 2:return b[0]+" or "+b[1];default:return b.slice(0,-1).join(", ")+", or "+b[b.length-1]}}function f(m){return m?'"'+l(m)+'"':"end of input"}return"Expected "+d(n)+" but "+f(s)+" found."},{SyntaxError:t,parse:r}},(UV={get exports(){return _P},set exports(e){_P=e}}).exports&&(UV.exports=VV());const sD={deg:1,grad:.9,rad:180/Math.PI,turn:360};function qxe(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&sD[e.unit]!=null))throw new Ce("effect:type-error",`Expected <angle>, Actual: ${b4(e)}`,{term:e})}const oD={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function Hxe(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&oD[e.unit]!=null))throw new Ce("effect:type-error",`Expected <length>, Actual: ${b4(e)}`,{term:e})}function Ku(e){Gxe(e);const t=e.value;return d3(t,e),e.unit==="%"?.01*t:t}function Wxe(e){return zxe(e),d3(e.value,e),e.value}function Jxe(e){return qxe(e),e.value*sD[e.unit]||0}function aD(e){return Hxe(e),e.value*oD[e.unit]||0}function Zxe(e){switch(e.colorType){case"hex":return b0e(e.value);case"named":return rte(e.value);case"function":return Qxe(e.value)}}function rte(e){if(!ZK(e))throw new Ce("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return v0e(e)}const Yxe=/^rgba?/i,Kxe=/^hsla?/i;function Qxe(e){if(Ew(e.parameters,4),Yxe.test(e.name))return[Ku(e.parameters[0]),Ku(e.parameters[1]),Ku(e.parameters[2]),e.parameters[3]?Ku(e.parameters[3]):1];if(Kxe.test(e.name))return YK(Wxe(e.parameters[0]),Ku(e.parameters[1]),Ku(e.parameters[2]),e.parameters[3]?Ku(e.parameters[3]):1);throw new Ce("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function lD(e,t,i){try{return eSe(e)}catch(r){i?.messages?.push(r)}return null}function uD(e,t,i,r){try{const n=Xxe(e);_o(i,n,t)}catch(n){r.messages&&r.messages.push(n)}}function Xxe(e){const t=ite(e);return t?Pxe(t)?t.map(i=>i.toJSON()):t.map(({scale:i,effects:r})=>({scale:i,value:r.map(n=>n.toJSON())})):null}function eSe(e){if(!e||e.length===0)return null;if(tSe(e)){const t=[];for(const i of e)t.push({scale:i.scale,value:zV(i.value)});return t}return zV(e)}function tSe(e){const t=e[0];return!!t&&"scale"in t}function zV(e){if(!e||!e.length)return"";const t=[];for(const i of e){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[qh(i,"amount")];break;case"blur":r=[qh(i,"radius","pt")];break;case"hue-rotate":r=[qh(i,"angle","deg")];break;case"drop-shadow":r=[qh(i,"xoffset","pt"),qh(i,"yoffset","pt"),qh(i,"blurRadius","pt"),iSe(i,"color")];break;case"bloom":r=[qh(i,"strength"),qh(i,"radius","pt"),qh(i,"threshold")]}const n=`${i.type}(${r.filter(Boolean).join(" ")})`;ite(n),t.push(n)}return t.join(" ")}function qh(e,t,i){if(e[t]==null)throw new Ce("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return i?e[t]+i:""+e[t]}function iSe(e,t){if(e[t]==null)throw new Ce("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const i=e[t];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const GV={read:{reader:lD},write:{allowNull:!0,writer:uD}},q0=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return h([p({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),h([p({json:{read:!1,write:!1,origins:{"web-map":GV,"portal-item":GV}}})],t.prototype,"effect",void 0),t=h([ce("esri.layers.mixins.BlendLayer")],t),t},w4=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return h([p({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],t.prototype,"customParameters",void 0),t=h([ce("esri.layers.mixins.CustomParametersMixin")],t),t},rSe=new hp.EventEmitter,nte="esri.layers.mixins.EditBusLayer",ste=Symbol(nte);function oat(e){return e!=null&&typeof e=="object"&&ste in e}const nSe=e=>{var t;let i=class extends e{constructor(...r){super(...r),this[t]=!0,this.when().then(()=>{this.own([rSe.on("edits",n=>{const s="layer"in n?n.layer:null,o="layer"in n?n.layer?.url:n.serviceUrl,a="layer"in n?n.layer?.layerId:n.layerId,l=n.event;if(s===this||o!==this.url)return;if(a!=null&&this.layerId!=null&&a===this.layerId)return void this.emit("edits",Le(l));const u=l.editedFeatures?.find(({layerId:c})=>c===this.layerId);if(u){const{adds:c,updates:d,deletes:f}=u.editedFeatures,m={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:c?c.map(({attributes:g})=>({objectId:this.objectIdField&&g[this.objectIdField],globalId:this.globalIdField&&g[this.globalIdField]})):[],deletedFeatures:f?f.map(({attributes:g})=>({objectId:this.objectIdField&&g[this.objectIdField],globalId:this.globalIdField&&g[this.globalIdField]})):[],updatedFeatures:d?d.map(({current:{attributes:g}})=>({objectId:this.objectIdField&&g[this.objectIdField],globalId:this.globalIdField&&g[this.globalIdField]})):[],editedFeatures:Le(l.editedFeatures),exceededTransferLimit:!1};this.emit("edits",m)}})])},()=>{})}};return t=ste,i=h([ce(nte)],i),i},qV={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},sSe={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function oSe(e,t){const i=new Date(e,t+1,1);return i.setDate(0),i.getDate()}function Kg(e,t,i){const r=new Date(e.getTime());if(t&&i){const n=sSe[i],{getter:s,setter:o,multiplier:a}=n;if(i==="months"){const l=oSe(r.getFullYear(),r.getMonth()+t);r.getDate()>l&&r.setDate(l)}r[o](r[s]()+t*a)}return r}function HV(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function aSe(e,t,i){return e===0?0:e*qV[t]/qV[i]}var ju;let el=ju=class extends Je{static get allTime(){return WV}static get empty(){return lSe}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(ju.allTime)}get isEmpty(){return this.equals(ju.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new ju({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=ee(this.start)?this.start.getTime():this.start,i=ee(this.end)?this.end.getTime():this.end,r=ee(e.start)?e.start.getTime():e.start,n=ee(e.end)?e.end.getTime():e.end;return t===r&&i===n}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=Ff(this.start,r=>HV(r,e)),i=Ff(this.end,r=>{const n=HV(r,e);return r.getTime()===n.getTime()?n:Kg(n,1,e)});return new ju({start:t,end:i})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return ju.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=j_(this.start,-1/0,a=>a.getTime()),i=j_(this.end,1/0,a=>a.getTime()),r=j_(e.start,-1/0,a=>a.getTime()),n=j_(e.end,1/0,a=>a.getTime());let s,o;if(r>=t&&r<=i?s=r:t>=r&&t<=n&&(s=t),i>=r&&i<=n?o=i:n>=t&&n<=i&&(o=n),s!=null&&o!=null&&!isNaN(s)&&!isNaN(o)){const a=new ju;return a.start=s===-1/0?null:new Date(s),a.end=o===1/0?null:new Date(o),a}return ju.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const i=new ju,{start:r,end:n}=this;return ee(r)&&(i.start=Kg(r,e,t)),ee(n)&&(i.end=Kg(n,e,t)),i}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return WV.clone();const t=ee(this.start)&&ee(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,i=ee(this.end)&&ee(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new ju({start:t,end:i})}};h([p({type:Date,json:{write:{allowNull:!0}}})],el.prototype,"end",void 0),h([Ye("end")],el.prototype,"readEnd",null),h([it("end")],el.prototype,"writeEnd",null),h([p({readOnly:!0,json:{read:!1}})],el.prototype,"isAllTime",null),h([p({readOnly:!0,json:{read:!1}})],el.prototype,"isEmpty",null),h([p({type:Date,json:{write:{allowNull:!0}}})],el.prototype,"start",void 0),h([Ye("start")],el.prototype,"readStart",null),h([it("start")],el.prototype,"writeStart",null),el=ju=h([ce("esri.TimeExtent")],el);const WV=new el,lSe=new el({start:void 0,end:void 0}),ka=el;var xP;let jd=xP=class extends Je{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new xP({mapLayerId:e,gdbVersion:t})}};h([Ft({mapLayer:"map-layer"})],jd.prototype,"type",void 0),h([p({type:wi,json:{write:!0}})],jd.prototype,"mapLayerId",void 0),h([p({type:String,json:{write:!0}})],jd.prototype,"gdbVersion",void 0),jd=xP=h([ce("esri.layers.support.source.MapLayerSource")],jd);var SP;let dd=SP=class extends Je{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:i,spatialReference:r,geometryType:n}=this,s={workspaceId:e,query:t,oidFields:i,spatialReference:r?.clone()??void 0,geometryType:n};return new SP(s)}};h([Ft({queryTable:"query-table"})],dd.prototype,"type",void 0),h([p({type:String,json:{write:!0}})],dd.prototype,"workspaceId",void 0),h([p({type:String,json:{write:!0}})],dd.prototype,"query",void 0),h([p({type:String,json:{write:!0}})],dd.prototype,"oidFields",void 0),h([p({type:Et,json:{write:!0}})],dd.prototype,"spatialReference",void 0),h([Ft(cA)],dd.prototype,"geometryType",void 0),dd=SP=h([ce("esri.layers.support.source.QueryTableDataSource")],dd);var EP;let Q1=EP=class extends Je{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new EP({workspaceId:e,dataSourceName:t})}};h([Ft({raster:"raster"})],Q1.prototype,"type",void 0),h([p({type:String,json:{write:!0}})],Q1.prototype,"dataSourceName",void 0),h([p({type:String,json:{write:!0}})],Q1.prototype,"workspaceId",void 0),Q1=EP=h([ce("esri.layers.support.source.RasterDataSource")],Q1);var MP;let Gy=MP=class extends Je{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:i}=this;return new MP({workspaceId:e,gdbVersion:t,dataSourceName:i})}};h([Ft({table:"table"})],Gy.prototype,"type",void 0),h([p({type:String,json:{write:!0}})],Gy.prototype,"workspaceId",void 0),h([p({type:String,json:{write:!0}})],Gy.prototype,"gdbVersion",void 0),h([p({type:String,json:{write:!0}})],Gy.prototype,"dataSourceName",void 0),Gy=MP=h([ce("esri.layers.support.source.TableDataSource")],Gy);var IP,TP;const uSe=_n()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Wa=IP=class extends Je{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,i){return JV()(e,t,i)}castLeftTableSource(e){return $h(AP(),e)}readRightTableSource(e,t,i){return JV()(e,t,i)}castRightTableSource(e){return $h(AP(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:i,rightTableSource:r,joinType:n}=this,s={leftTableKey:e,rightTableKey:t,leftTableSource:i?.clone()??void 0,rightTableSource:r?.clone()??void 0,joinType:n};return new IP(s)}};h([Ft({joinTable:"join-table"})],Wa.prototype,"type",void 0),h([p({type:String,json:{write:!0}})],Wa.prototype,"leftTableKey",void 0),h([p({type:String,json:{write:!0}})],Wa.prototype,"rightTableKey",void 0),h([p({json:{write:!0}})],Wa.prototype,"leftTableSource",void 0),h([Ye("leftTableSource")],Wa.prototype,"readLeftTableSource",null),h([di("leftTableSource")],Wa.prototype,"castLeftTableSource",null),h([p({json:{write:!0}})],Wa.prototype,"rightTableSource",void 0),h([Ye("rightTableSource")],Wa.prototype,"readRightTableSource",null),h([di("rightTableSource")],Wa.prototype,"castRightTableSource",null),h([Ft(uSe)],Wa.prototype,"joinType",void 0),Wa=IP=h([ce("esri.layers.support.source.JoinTableDataSource")],Wa);let A$=null;function JV(){return A$||(A$=Cm({types:AP()})),A$}let C$=null;function AP(){return C$||(C$={key:"type",base:null,typeMap:{"data-layer":Vo,"map-layer":jd}}),C$}const cSe={key:"type",base:null,typeMap:{"join-table":Wa,"query-table":dd,raster:Q1,table:Gy}};let Vo=TP=class extends Je{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new TP({fields:e,dataSource:t})}};h([Ft({dataLayer:"data-layer"})],Vo.prototype,"type",void 0),h([p({type:[ol],json:{write:!0}})],Vo.prototype,"fields",void 0),h([p({types:cSe,json:{write:!0}})],Vo.prototype,"dataSource",void 0),Vo=TP=h([ce("esri.layers.support.source.DataLayerSource")],Vo),Vo.from=nn(Vo);let qy=class extends xr(Je){constructor(t){super(t),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};h([p({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:ee(this.onFields)&&this.onFields.length>0}}}}})],qy.prototype,"onFields",void 0),h([p({type:String,json:{write:!0}})],qy.prototype,"operator",void 0),h([p({type:String,json:{write:!0}})],qy.prototype,"searchTerm",void 0),h([p({type:String,json:{write:!0}})],qy.prototype,"searchType",void 0),qy=h([ce("esri.rest.support.FullTextSearch")],qy);const hSe=qy;var CP;const ZV=new ti({upperLeft:"upper-left",lowerLeft:"lower-left"});let Hy=CP=class extends Je{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new CP(Le({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};h([p({type:Kt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Hy.prototype,"extent",void 0),h([p({type:["view","edit"],json:{write:!0}})],Hy.prototype,"mode",void 0),h([p({type:String,json:{read:ZV.read,write:ZV.write}})],Hy.prototype,"originPosition",void 0),h([p({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Hy.prototype,"tolerance",void 0),Hy=CP=h([ce("esri.rest.support.QuantizationParameters")],Hy);const ote=Hy;var $P;const YV=new ti({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Uu=$P=class extends Je{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=Le(e))}clone(){return new $P({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:Le(this.statisticParameters)})}};h([p({type:Number,json:{write:!0}})],Uu.prototype,"maxPointCount",void 0),h([p({type:Number,json:{write:!0}})],Uu.prototype,"maxRecordCount",void 0),h([p({type:Number,json:{write:!0}})],Uu.prototype,"maxVertexCount",void 0),h([p({type:String,json:{write:!0}})],Uu.prototype,"onStatisticField",void 0),h([p({type:String,json:{write:!0}})],Uu.prototype,"outStatisticFieldName",void 0),h([p({type:String,json:{read:{source:"statisticType",reader:YV.read},write:{target:"statisticType",writer:YV.write}}})],Uu.prototype,"statisticType",void 0),h([p({type:Object})],Uu.prototype,"statisticParameters",void 0),h([it("statisticParameters")],Uu.prototype,"writeStatisticParameters",null),Uu=$P=h([ce("esri.rest.support.StatisticDefinition")],Uu);const ate=Uu;var Xv;const dSe=new ti({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),pSe=new ti({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Jt=Xv=class extends Je{static from(e){return Fs(Xv,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const i={};for(const r in e){const n=e[r];Array.isArray(n)?i[r]=n.map(s=>s instanceof Date?s.getTime():s):n instanceof Date?i[r]=n.getTime():i[r]=n}t.parameterValues=i}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new Xv(Le({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:ee(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};Jt.MAX_MAX_RECORD_COUNT_FACTOR=5,h([p({json:{write:!0}})],Jt.prototype,"aggregateIds",void 0),h([p({type:Boolean,json:{write:!0}})],Jt.prototype,"cacheHint",void 0),h([p({type:Boolean,json:{default:!1,write:!0}})],Jt.prototype,"compactGeometryEnabled",void 0),h([p({json:{write:!0}})],Jt.prototype,"datumTransformation",void 0),h([di("datumTransformation")],Jt.prototype,"castDatumTransformation",null),h([p({type:Boolean,json:{default:!1,write:!0}})],Jt.prototype,"defaultSpatialReferenceEnabled",void 0),h([p({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],Jt.prototype,"distance",void 0),h([p({type:Vo,json:{write:!0}})],Jt.prototype,"dynamicDataSource",void 0),h([p({type:String,json:{write:!0}})],Jt.prototype,"formatOf3DObjects",void 0),h([p({type:[hSe],json:{write:{enabled:!0,overridePolicy(){return{enabled:ee(this.fullText)&&this.fullText.length>0}}}}})],Jt.prototype,"fullText",void 0),h([p({type:String,json:{write:!0}})],Jt.prototype,"gdbVersion",void 0),h([p({types:wc,json:{read:Il,write:!0}})],Jt.prototype,"geometry",void 0),h([p({type:Number,json:{write:!0}})],Jt.prototype,"geometryPrecision",void 0),h([p({type:[String],json:{write:!0}})],Jt.prototype,"groupByFieldsForStatistics",void 0),h([p({type:String,json:{write:!0}})],Jt.prototype,"having",void 0),h([p({type:Date})],Jt.prototype,"historicMoment",void 0),h([it("historicMoment")],Jt.prototype,"writeHistoricMoment",null),h([p({type:Number,json:{write:!0}})],Jt.prototype,"maxAllowableOffset",void 0),h([p({type:Number,cast:e=>e<1?1:e>Xv.MAX_MAX_RECORD_COUNT_FACTOR?Xv.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],Jt.prototype,"maxRecordCountFactor",void 0),h([p({type:["xyFootprint"],json:{write:!0}})],Jt.prototype,"multipatchOption",void 0),h([p({type:Number,json:{read:{source:"resultRecordCount"}}})],Jt.prototype,"num",void 0),h([p({json:{write:!0}})],Jt.prototype,"objectIds",void 0),h([p({type:[String],json:{write:!0}})],Jt.prototype,"orderByFields",void 0),h([p({type:[String],json:{write:!0}})],Jt.prototype,"outFields",void 0),h([p({type:Et,json:{name:"outSR",write:!0}})],Jt.prototype,"outSpatialReference",void 0),h([p({type:[ate],json:{write:{enabled:!0,overridePolicy(){return{enabled:ee(this.outStatistics)&&this.outStatistics.length>0}}}}})],Jt.prototype,"outStatistics",void 0),h([p({json:{write:!0}})],Jt.prototype,"parameterValues",void 0),h([it("parameterValues")],Jt.prototype,"writeParameterValues",null),h([p({type:At,json:{write:!0}})],Jt.prototype,"pixelSize",void 0),h([p({type:ote,json:{write:!0}})],Jt.prototype,"quantizationParameters",void 0),h([p({type:[Object],json:{write:!0}})],Jt.prototype,"rangeValues",void 0),h([p({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],Jt.prototype,"relationParameter",void 0),h([p({type:String,json:{write:!0}})],Jt.prototype,"resultType",void 0),h([p({type:Boolean,json:{default:!1,write:!0}})],Jt.prototype,"returnCentroid",void 0),h([p({type:Boolean,json:{default:!1,write:!0}})],Jt.prototype,"returnDistinctValues",void 0),h([p({type:Boolean,json:{default:!0,write:!0}})],Jt.prototype,"returnExceededLimitFeatures",void 0),h([p({type:Boolean,json:{write:!0}})],Jt.prototype,"returnGeometry",void 0),h([p({type:Boolean,json:{default:!1,write:!0}})],Jt.prototype,"returnQueryGeometry",void 0),h([p({type:Boolean,json:{default:!1,write:!0}})],Jt.prototype,"returnM",void 0),h([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Jt.prototype,"returnZ",void 0),h([p({type:Et,json:{write:!0}})],Jt.prototype,"sourceSpatialReference",void 0),h([Ft(dSe,{ignoreUnknown:!1,name:"spatialRel"})],Jt.prototype,"spatialRelationship",void 0),h([p({type:Number,json:{read:{source:"resultOffset"}}})],Jt.prototype,"start",void 0),h([it("start"),it("num")],Jt.prototype,"writeStart",null),h([p({type:String,json:{write:!0}})],Jt.prototype,"sqlFormat",void 0),h([p({type:String,json:{write:!0}})],Jt.prototype,"text",void 0),h([p({type:ka,json:{write:!0}})],Jt.prototype,"timeExtent",void 0),h([p({type:Boolean,json:{default:!1,write:!0}})],Jt.prototype,"timeReferenceUnknownClient",void 0),h([Ft(pSe,{ignoreUnknown:!1}),p({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null&&this.distance>0}}}}})],Jt.prototype,"units",void 0),h([p({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],Jt.prototype,"where",void 0),h([it("where")],Jt.prototype,"writeWhere",null),Jt=Xv=h([ce("esri.rest.support.Query")],Jt);const On=Jt;var OP;const $$=new ti({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),O$=new ti({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let zc=OP=class extends Je{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:i,spatialRelationship:r,timeExtent:n,objectIds:s,units:o,distance:a}=this;return new On({geometry:Le(i),objectIds:Le(s),spatialRelationship:r,timeExtent:Le(n),where:t,units:o,distance:a,...e})}clone(){const{where:e,geometry:t,spatialRelationship:i,timeExtent:r,objectIds:n,units:s,distance:o}=this;return new OP({geometry:Le(t),objectIds:Le(n),spatialRelationship:i,timeExtent:Le(r),where:e,units:s,distance:o})}};h([p({type:String,json:{write:!0}})],zc.prototype,"where",void 0),h([p({types:wc,json:{write:!0}})],zc.prototype,"geometry",void 0),h([p({type:$$.apiValues,json:{name:"spatialRel",read:{reader:$$.read},write:{allowNull:!1,writer:$$.write,overridePolicy(){return{enabled:ee(this.geometry)}}}}})],zc.prototype,"spatialRelationship",void 0),h([p({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],zc.prototype,"distance",void 0),h([p({type:[Number],json:{write:!0}})],zc.prototype,"objectIds",void 0),h([p({type:O$.apiValues,json:{read:O$.read,write:{writer:O$.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],zc.prototype,"units",void 0),h([p({type:ka,json:{write:!0}})],zc.prototype,"timeExtent",void 0),zc=OP=h([ce("esri.layers.support.FeatureFilter")],zc);const lte=zc;var RP;const KV={read:{reader:lD},write:{writer:uD,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},QV={read:{reader:lD},write:{writer:uD,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},XV={name:"showExcludedLabels",default:!0};let Wy=RP=class extends Je{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){const i=super.write(e,t);if(t?.origin){if(i.filter){const r=Object.keys(i.filter);if(r.length>1||r[0]!=="where")return t.messages?.push(new Ce("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in i)return t.messages?.push(new Ce("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return i}clone(){return new RP({filter:ee(this.filter)?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};h([p({type:lte,json:{write:{allowNull:!0,writer(e,t,i,r){const n=e?.write({},r);n&&Object.keys(n).length!==0?_o(i,n,t):_o(i,null,t)}}}})],Wy.prototype,"filter",void 0),h([p({json:{write:!0,origins:{"web-map":KV,"portal-item":KV}}})],Wy.prototype,"includedEffect",void 0),h([p({json:{write:!0,origins:{"web-map":QV,"portal-item":QV}}})],Wy.prototype,"excludedEffect",void 0),h([p({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":XV,"portal-item":XV}}})],Wy.prototype,"excludedLabelsVisible",void 0),Wy=RP=h([ce("esri.layers.support.FeatureEffect")],Wy);const fSe=Wy,eB={write:{allowNull:!0}},mSe=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return h([p({type:fSe,json:{origins:{"web-map":eB,"portal-item":eB}}})],t.prototype,"featureEffect",void 0),t=h([ce("esri.layers.mixins.FeatureEffectLayer")],t),t};var b2;const gA=_n()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),ute=gA.jsonValues.slice();YZ(ute,"orthometric");const hx=_n()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Vu=b2=class extends Je{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,i){return gA.write(e,t,i)}readHeightModel(e,t,i){return gA.read(e)||(i&&i.messages&&i.messages.push(ySe(e,{context:i})),null)}readHeightUnit(e,t,i){return hx.read(e)||(i&&i.messages&&i.messages.push(tB(e,{context:i})),null)}readHeightUnitService(e,t,i){return MK(e)||hx.read(e)||(i&&i.messages&&i.messages.push(tB(e,{context:i})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new b2({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const i=Yye(t);return new b2({heightModel:e.heightModel,heightUnit:i,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new b2;return t.read(e,{origin:"web-scene"}),t}};function tB(e,t){return new El("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function ySe(e,t){return new El("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}h([p({type:gA.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:ute,default:"ellipsoidal"}}}})],Vu.prototype,"heightModel",void 0),h([it("web-scene","heightModel")],Vu.prototype,"writeHeightModel",null),h([Ye(["web-scene","service"],"heightModel")],Vu.prototype,"readHeightModel",null),h([p({type:hx.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:hx.jsonValues,write:hx.write}}}})],Vu.prototype,"heightUnit",void 0),h([Ye("web-scene","heightUnit")],Vu.prototype,"readHeightUnit",null),h([Ye("service","heightUnit")],Vu.prototype,"readHeightUnitService",null),h([p({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Vu.prototype,"vertCRS",void 0),h([Ye("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Vu.prototype,"readVertCRS",null),Vu=b2=h([ce("esri.geometry.HeightModelInfo")],Vu);const _4=Vu;function gSe(e){if(!e)return e;const{start:t,end:i}=e;return new ka({start:ee(t)?Kg(t,-t.getTimezoneOffset(),"minutes"):t,end:ee(i)?Kg(i,-i.getTimezoneOffset(),"minutes"):i})}function vSe(e){if(!e)return e;const{start:t,end:i}=e;return new ka({start:ee(t)?Kg(t,t.getTimezoneOffset(),"minutes"):t,end:ee(i)?Kg(i,i.getTimezoneOffset(),"minutes"):i})}var kP;let w2=kP=class extends Je{constructor(e){super(e)}async collectRequiredFields(e,t){return Ho(e,t,this.expression)}clone(){return new kP({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};h([p({type:String,json:{write:!0}})],w2.prototype,"expression",void 0),h([p({type:String,json:{write:!0}})],w2.prototype,"title",void 0),w2=kP=h([ce("esri.layers.support.FeatureExpressionInfo")],w2);const iB=w2;function lat(e){return 1/(BF[e]||1)}function bSe(){const e=Object.keys(BF);return e.sort(),e}const wSe=bSe();var LP;const PE=_n()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),rB=new ti({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let pd=LP=class extends Je{constructor(e){super(e),this.offset=null}readFeatureExpressionInfo(e,t){return e??(t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(e,t,i,r){t[i]=e.write({},r),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):ee(e)||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new LP({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&jpe(this.featureExpressionInfo,e.featureExpressionInfo)}};h([p({type:iB,json:{write:!0}})],pd.prototype,"featureExpressionInfo",void 0),h([Ye("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],pd.prototype,"readFeatureExpressionInfo",null),h([it("featureExpressionInfo",{featureExpressionInfo:{type:iB},"featureExpression.value":{type:[0]}})],pd.prototype,"writeFeatureExpressionInfo",null),h([p({type:PE.apiValues,nonNullable:!0,json:{type:PE.jsonValues,read:PE.read,write:{writer:PE.write,isRequired:!0}}})],pd.prototype,"mode",null),h([p({type:Number,json:{write:!0}})],pd.prototype,"offset",void 0),h([p({type:wSe,json:{type:String,read:rB.read,write:rB.write}})],pd.prototype,"unit",null),pd=LP=h([ce("esri.layers.support.ElevationInfo")],pd);const cte=pd,_Se={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},p3={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,i){t[i]=!e}}}},cD={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:!0}},f3={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:b0}}},hD={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},xSe={value:null,type:cte,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function uat(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const hte={write:!0,read:!0},vA={type:Number,json:{origins:{"web-document":hte,"portal-item":{write:!0}}}},SSe={...vA,json:{...vA.json,origins:{"web-document":{...hte,write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,i)=>i&&i.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?eS(t.layerDefinition.drawingInfo.transparency):void 0:eS(t.drawingInfo.transparency)}}},ESe={type:ka,readOnly:!0,get(){if(!this.layer?.timeInfo)return null;const{datesInUnknownTimezone:e,timeOffset:t,useViewTime:i}=this.layer,r=this.view?.timeExtent;let n=this.layer.timeExtent;e&&(n=vSe(n));let s=i?r&&n?r.intersection(n):r||n:n;if(!s||s.isEmpty||s.isAllTime)return s;t&&(s=s.offset(-t.value,t.unit)),e&&(s=gSe(s));const o=this._get("timeExtent");return s.equals(o)?o:s}},cat={type:Kt,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const i=Kt.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(i.spatialReference=Et.fromJSON(t.spatialReference)),i}}}},read:!1}},dte={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},MSe={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},ISe={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},pte={json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}},nB=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Almaty"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Chihuahua"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class H0 extends Error{}class TSe extends H0{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class ASe extends H0{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class CSe extends H0{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class _2 extends H0{}class fte extends H0{constructor(t){super(`Invalid unit ${t}`)}}class Xl extends H0{}class Rp extends H0{constructor(){super("Zone is an abstract class")}}const It="numeric",fc="short",_l="long",bA={year:It,month:It,day:It},mte={year:It,month:fc,day:It},$Se={year:It,month:fc,day:It,weekday:fc},yte={year:It,month:_l,day:It},gte={year:It,month:_l,day:It,weekday:_l},vte={hour:It,minute:It},bte={hour:It,minute:It,second:It},wte={hour:It,minute:It,second:It,timeZoneName:fc},_te={hour:It,minute:It,second:It,timeZoneName:_l},xte={hour:It,minute:It,hourCycle:"h23"},Ste={hour:It,minute:It,second:It,hourCycle:"h23"},Ete={hour:It,minute:It,second:It,hourCycle:"h23",timeZoneName:fc},Mte={hour:It,minute:It,second:It,hourCycle:"h23",timeZoneName:_l},Ite={year:It,month:It,day:It,hour:It,minute:It},Tte={year:It,month:It,day:It,hour:It,minute:It,second:It},Ate={year:It,month:fc,day:It,hour:It,minute:It},Cte={year:It,month:fc,day:It,hour:It,minute:It,second:It},OSe={year:It,month:fc,day:It,weekday:fc,hour:It,minute:It},$te={year:It,month:_l,day:It,hour:It,minute:It,timeZoneName:fc},Ote={year:It,month:_l,day:It,hour:It,minute:It,second:It,timeZoneName:fc},Rte={year:It,month:_l,day:It,weekday:_l,hour:It,minute:It,timeZoneName:_l},kte={year:It,month:_l,day:It,weekday:_l,hour:It,minute:It,second:It,timeZoneName:_l};class m3{get type(){throw new Rp}get name(){throw new Rp}get ianaName(){return this.name}get isUniversal(){throw new Rp}offsetName(t,i){throw new Rp}formatOffset(t,i){throw new Rp}offset(t){throw new Rp}equals(t){throw new Rp}get isValid(){throw new Rp}}let R$=null;class x4 extends m3{static get instance(){return R$===null&&(R$=new x4),R$}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:i,locale:r}){return Pte(t,i,r)}formatOffset(t,i){return px(this.offset(t),i)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let HI={};function RSe(e){return HI[e]||(HI[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),HI[e]}const kSe={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function LSe(e,t){const i=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,n,s,o,a,l,u,c]=r;return[o,n,s,a,l,u,c]}function PSe(e,t){const i=e.formatToParts(t),r=[];for(let n=0;n<i.length;n++){const{type:s,value:o}=i[n],a=kSe[s];s==="era"?r[a]=o:Bi(a)||(r[a]=parseInt(o,10))}return r}let NE={};class ip extends m3{static create(t){return NE[t]||(NE[t]=new ip(t)),NE[t]}static resetCache(){NE={},HI={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=ip.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:i,locale:r}){return Pte(t,i,r,this.name)}formatOffset(t,i){return px(this.offset(t),i)}offset(t){const i=new Date(t);if(isNaN(i))return NaN;const r=RSe(this.name);let[n,s,o,a,l,u,c]=r.formatToParts?PSe(r,i):LSe(r,i);a==="BC"&&(n=-Math.abs(n)+1);const f=fD({year:n,month:s,day:o,hour:l===24?0:l,minute:u,second:c,millisecond:0});let m=+i;const g=m%1e3;return m-=g>=0?g:1e3+g,(f-m)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let sB={};function NSe(e,t={}){const i=JSON.stringify([e,t]);let r=sB[i];return r||(r=new Intl.ListFormat(e,t),sB[i]=r),r}let PP={};function NP(e,t={}){const i=JSON.stringify([e,t]);let r=PP[i];return r||(r=new Intl.DateTimeFormat(e,t),PP[i]=r),r}let FP={};function FSe(e,t={}){const i=JSON.stringify([e,t]);let r=FP[i];return r||(r=new Intl.NumberFormat(e,t),FP[i]=r),r}let DP={};function DSe(e,t={}){const{base:i,...r}=t,n=JSON.stringify([e,r]);let s=DP[n];return s||(s=new Intl.RelativeTimeFormat(e,t),DP[n]=s),s}let x2=null;function jSe(){return x2||(x2=new Intl.DateTimeFormat().resolvedOptions().locale,x2)}function USe(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const i=e.indexOf("-u-");if(i===-1)return[e];{let r,n;try{r=NP(e).resolvedOptions(),n=e}catch{const l=e.substring(0,i);r=NP(l).resolvedOptions(),n=l}const{numberingSystem:s,calendar:o}=r;return[n,s,o]}}function VSe(e,t,i){return(i||t)&&(e.includes("-u-")||(e+="-u"),i&&(e+=`-ca-${i}`),t&&(e+=`-nu-${t}`)),e}function BSe(e){const t=[];for(let i=1;i<=12;i++){const r=bi.utc(2016,i,1);t.push(e(r))}return t}function zSe(e){const t=[];for(let i=1;i<=7;i++){const r=bi.utc(2016,11,13+i);t.push(e(r))}return t}function FE(e,t,i,r,n){const s=e.listingMode(i);return s==="error"?null:s==="en"?r(t):n(t)}function GSe(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class qSe{constructor(t,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:n,floor:s,...o}=r;if(!i||Object.keys(o).length>0){const a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=FSe(t,a)}}format(t){if(this.inf){const i=this.floor?Math.floor(t):t;return this.inf.format(i)}else{const i=this.floor?Math.floor(t):pD(t,3);return jn(i,this.padTo)}}}class HSe{constructor(t,i,r){this.opts=r;let n;if(t.zone.isUniversal){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&ip.create(a).valid?(n=a,this.dt=t):(n="UTC",r.timeZoneName?this.dt=t:this.dt=t.offset===0?t:bi.fromMillis(t.ts+t.offset*60*1e3))}else t.zone.type==="system"?this.dt=t:(this.dt=t,n=t.zone.name);const s={...this.opts};s.timeZone=s.timeZone||n,this.dtf=NP(i,s)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class WSe{constructor(t,i,r){this.opts={style:"long",...r},!i&&Lte()&&(this.rtf=DSe(t,r))}format(t,i){return this.rtf?this.rtf.format(t,i):c3e(i,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,i){return this.rtf?this.rtf.formatToParts(t,i):[]}}class jr{static fromOpts(t){return jr.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)}static create(t,i,r,n=!1){const s=t||Dn.defaultLocale,o=s||(n?"en-US":jSe()),a=i||Dn.defaultNumberingSystem,l=r||Dn.defaultOutputCalendar;return new jr(o,a,l,s)}static resetCache(){x2=null,PP={},FP={},DP={}}static fromObject({locale:t,numberingSystem:i,outputCalendar:r}={}){return jr.create(t,i,r)}constructor(t,i,r,n){const[s,o,a]=USe(t);this.locale=s,this.numberingSystem=i||o||null,this.outputCalendar=r||a||null,this.intl=VSe(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=n,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=GSe(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&i?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:jr.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,i=!1,r=!0){return FE(this,t,r,Dte,()=>{const n=i?{month:t,day:"numeric"}:{month:t},s=i?"format":"standalone";return this.monthsCache[s][t]||(this.monthsCache[s][t]=BSe(o=>this.extract(o,n,"month"))),this.monthsCache[s][t]})}weekdays(t,i=!1,r=!0){return FE(this,t,r,Vte,()=>{const n=i?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},s=i?"format":"standalone";return this.weekdaysCache[s][t]||(this.weekdaysCache[s][t]=zSe(o=>this.extract(o,n,"weekday"))),this.weekdaysCache[s][t]})}meridiems(t=!0){return FE(this,void 0,t,()=>Bte,()=>{if(!this.meridiemCache){const i={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[bi.utc(2016,11,13,9),bi.utc(2016,11,13,19)].map(r=>this.extract(r,i,"dayperiod"))}return this.meridiemCache})}eras(t,i=!0){return FE(this,t,i,zte,()=>{const r={era:t};return this.eraCache[t]||(this.eraCache[t]=[bi.utc(-40,1,1),bi.utc(2017,1,1)].map(n=>this.extract(n,r,"era"))),this.eraCache[t]})}extract(t,i,r){const n=this.dtFormatter(t,i),s=n.formatToParts(),o=s.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(t={}){return new qSe(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,i={}){return new HSe(t,this.intl,i)}relFormatter(t={}){return new WSe(this.intl,this.isEnglish(),t)}listFormatter(t={}){return NSe(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}let k$=null;class go extends m3{static get utcInstance(){return k$===null&&(k$=new go(0)),k$}static instance(t){return t===0?go.utcInstance:new go(t)}static parseSpecifier(t){if(t){const i=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new go(E4(i[1],i[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${px(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${px(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,i){return px(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class JSe extends m3{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Lf(e,t){if(Bi(e)||e===null)return t;if(e instanceof m3)return e;if(ZSe(e)){const i=e.toLowerCase();return i==="default"?t:i==="local"||i==="system"?x4.instance:i==="utc"||i==="gmt"?go.utcInstance:go.parseSpecifier(i)||ip.create(e)}else return Qg(e)?go.instance(e):typeof e=="object"&&e.offset&&typeof e.offset=="number"?e:new JSe(e)}let oB=()=>Date.now(),aB="system",lB=null,uB=null,cB=null,hB=60,dB;class Dn{static get now(){return oB}static set now(t){oB=t}static set defaultZone(t){aB=t}static get defaultZone(){return Lf(aB,x4.instance)}static get defaultLocale(){return lB}static set defaultLocale(t){lB=t}static get defaultNumberingSystem(){return uB}static set defaultNumberingSystem(t){uB=t}static get defaultOutputCalendar(){return cB}static set defaultOutputCalendar(t){cB=t}static get twoDigitCutoffYear(){return hB}static set twoDigitCutoffYear(t){hB=t%100}static get throwOnInvalid(){return dB}static set throwOnInvalid(t){dB=t}static resetCaches(){jr.resetCache(),ip.resetCache()}}function Bi(e){return typeof e>"u"}function Qg(e){return typeof e=="number"}function S4(e){return typeof e=="number"&&e%1===0}function ZSe(e){return typeof e=="string"}function YSe(e){return Object.prototype.toString.call(e)==="[object Date]"}function Lte(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function KSe(e){return Array.isArray(e)?e:[e]}function pB(e,t,i){if(e.length!==0)return e.reduce((r,n)=>{const s=[t(n),n];return r&&i(r[0],s[0])===r[0]?r:s},null)[1]}function QSe(e,t){return t.reduce((i,r)=>(i[r]=e[r],i),{})}function Ob(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Vd(e,t,i){return S4(e)&&e>=t&&e<=i}function XSe(e,t){return e-t*Math.floor(e/t)}function jn(e,t=2){const i=e<0;let r;return i?r="-"+(""+-e).padStart(t,"0"):r=(""+e).padStart(t,"0"),r}function Af(e){if(!(Bi(e)||e===null||e===""))return parseInt(e,10)}function iy(e){if(!(Bi(e)||e===null||e===""))return parseFloat(e)}function dD(e){if(!(Bi(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function pD(e,t,i=!1){const r=10**t;return(i?Math.trunc:Math.round)(e*r)/r}function y3(e){return e%4===0&&(e%100!==0||e%400===0)}function dx(e){return y3(e)?366:365}function wA(e,t){const i=XSe(t-1,12)+1,r=e+(t-i)/12;return i===2?y3(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function fD(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(t.getUTCFullYear()-1900)),+t}function _A(e){const t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,i=e-1,r=(i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400))%7;return t===4||r===3?53:52}function jP(e){return e>99?e:e>Dn.twoDigitCutoffYear?1900+e:2e3+e}function Pte(e,t,i,r=null){const n=new Date(e),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:t,...s},a=new Intl.DateTimeFormat(i,o).formatToParts(n).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function E4(e,t){let i=parseInt(e,10);Number.isNaN(i)&&(i=0);const r=parseInt(t,10)||0,n=i<0||Object.is(i,-0)?-r:r;return i*60+n}function Nte(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new Xl(`Invalid unit value ${e}`);return t}function xA(e,t){const i={};for(const r in e)if(Ob(e,r)){const n=e[r];if(n==null)continue;i[t(r)]=Nte(n)}return i}function px(e,t){const i=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),n=e>=0?"+":"-";switch(t){case"short":return`${n}${jn(i,2)}:${jn(r,2)}`;case"narrow":return`${n}${i}${r>0?`:${r}`:""}`;case"techie":return`${n}${jn(i,2)}${jn(r,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function M4(e){return QSe(e,["hour","minute","second","millisecond"])}const e3e=["January","February","March","April","May","June","July","August","September","October","November","December"],Fte=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t3e=["J","F","M","A","M","J","J","A","S","O","N","D"];function Dte(e){switch(e){case"narrow":return[...t3e];case"short":return[...Fte];case"long":return[...e3e];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const jte=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Ute=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],i3e=["M","T","W","T","F","S","S"];function Vte(e){switch(e){case"narrow":return[...i3e];case"short":return[...Ute];case"long":return[...jte];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Bte=["AM","PM"],r3e=["Before Christ","Anno Domini"],n3e=["BC","AD"],s3e=["B","A"];function zte(e){switch(e){case"narrow":return[...s3e];case"short":return[...n3e];case"long":return[...r3e];default:return null}}function o3e(e){return Bte[e.hour<12?0:1]}function a3e(e,t){return Vte(t)[e.weekday-1]}function l3e(e,t){return Dte(t)[e.month-1]}function u3e(e,t){return zte(t)[e.year<0?0:1]}function c3e(e,t,i="always",r=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(e)===-1;if(i==="auto"&&s){const d=e==="days";switch(t){case 1:return d?"tomorrow":`next ${n[e][0]}`;case-1:return d?"yesterday":`last ${n[e][0]}`;case 0:return d?"today":`this ${n[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,u=n[e],c=r?l?u[1]:u[2]||u[1]:l?n[e][0]:e;return o?`${a} ${c} ago`:`in ${a} ${c}`}function fB(e,t){let i="";for(const r of e)r.literal?i+=r.val:i+=t(r.val);return i}const h3e={D:bA,DD:mte,DDD:yte,DDDD:gte,t:vte,tt:bte,ttt:wte,tttt:_te,T:xte,TT:Ste,TTT:Ete,TTTT:Mte,f:Ite,ff:Ate,fff:$te,ffff:Rte,F:Tte,FF:Cte,FFF:Ote,FFFF:kte};class mo{static create(t,i={}){return new mo(t,i)}static parseFormat(t){let i=null,r="",n=!1;const s=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?(r.length>0&&s.push({literal:n,val:r}),i=null,r="",n=!n):n||a===i?r+=a:(r.length>0&&s.push({literal:!1,val:r}),r=a,i=a)}return r.length>0&&s.push({literal:n,val:r}),s}static macroTokenToFormatOpts(t){return h3e[t]}constructor(t,i){this.opts=i,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...i}).format()}formatDateTime(t,i={}){return this.loc.dtFormatter(t,{...this.opts,...i}).format()}formatDateTimeParts(t,i={}){return this.loc.dtFormatter(t,{...this.opts,...i}).formatToParts()}formatInterval(t,i={}){return this.loc.dtFormatter(t.start,{...this.opts,...i}).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,i={}){return this.loc.dtFormatter(t,{...this.opts,...i}).resolvedOptions()}num(t,i=0){if(this.opts.forceSimple)return jn(t,i);const r={...this.opts};return i>0&&(r.padTo=i),this.loc.numberFormatter(r).format(t)}formatDateTimeFromString(t,i){const r=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(m,g)=>this.loc.extract(t,m,g),o=m=>t.isOffsetFixed&&t.offset===0&&m.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,m.format):"",a=()=>r?o3e(t):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(m,g)=>r?l3e(t,m):s(g?{month:m}:{month:m,day:"numeric"},"month"),u=(m,g)=>r?a3e(t,m):s(g?{weekday:m}:{weekday:m,month:"long",day:"numeric"},"weekday"),c=m=>{const g=mo.macroTokenToFormatOpts(m);return g?this.formatWithSystemDefault(t,g):m},d=m=>r?u3e(t,m):s({era:m},"era"),f=m=>{switch(m){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return n?s({day:"numeric"},"day"):this.num(t.day);case"dd":return n?s({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return n?s({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return n?s({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return n?s({month:"numeric"},"month"):this.num(t.month);case"MM":return n?s({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return n?s({year:"numeric"},"year"):this.num(t.year);case"yy":return n?s({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return n?s({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return n?s({year:"numeric"},"year"):this.num(t.year,6);case"G":return d("short");case"GG":return d("long");case"GGGGG":return d("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return c(m)}};return fB(mo.parseFormat(i),f)}formatDurationFromString(t,i){const r=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=l=>u=>{const c=r(u);return c?this.num(l.get(c),u.length):u},s=mo.parseFormat(i),o=s.reduce((l,{literal:u,val:c})=>u?l:l.concat(c),[]),a=t.shiftTo(...o.map(r).filter(l=>l));return fB(s,n(a))}}class oc{constructor(t,i){this.reason=t,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Gte=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Mw(...e){const t=e.reduce((i,r)=>i+r.source,"");return RegExp(`^${t}$`)}function Iw(...e){return t=>e.reduce(([i,r,n],s)=>{const[o,a,l]=s(t,n);return[{...i,...o},a||r,l]},[{},null,1]).slice(0,2)}function Tw(e,...t){if(e==null)return[null,null];for(const[i,r]of t){const n=i.exec(e);if(n)return r(n)}return[null,null]}function qte(...e){return(t,i)=>{const r={};let n;for(n=0;n<e.length;n++)r[e[n]]=Af(t[i+n]);return[r,null,i+n]}}const Hte=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,d3e=`(?:${Hte.source}?(?:\\[(${Gte.source})\\])?)?`,mD=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Wte=RegExp(`${mD.source}${d3e}`),yD=RegExp(`(?:T${Wte.source})?`),p3e=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,f3e=/(\d{4})-?W(\d\d)(?:-?(\d))?/,m3e=/(\d{4})-?(\d{3})/,y3e=qte("weekYear","weekNumber","weekDay"),g3e=qte("year","ordinal"),v3e=/(\d{4})-(\d\d)-(\d\d)/,Jte=RegExp(`${mD.source} ?(?:${Hte.source}|(${Gte.source}))?`),b3e=RegExp(`(?: ${Jte.source})?`);function eb(e,t,i){const r=e[t];return Bi(r)?i:Af(r)}function w3e(e,t){return[{year:eb(e,t),month:eb(e,t+1,1),day:eb(e,t+2,1)},null,t+3]}function Aw(e,t){return[{hours:eb(e,t,0),minutes:eb(e,t+1,0),seconds:eb(e,t+2,0),milliseconds:dD(e[t+3])},null,t+4]}function g3(e,t){const i=!e[t]&&!e[t+1],r=E4(e[t+1],e[t+2]),n=i?null:go.instance(r);return[{},n,t+3]}function v3(e,t){const i=e[t]?ip.create(e[t]):null;return[{},i,t+1]}const _3e=RegExp(`^T?${mD.source}$`),x3e=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function S3e(e){const[t,i,r,n,s,o,a,l,u]=e,c=t[0]==="-",d=l&&l[0]==="-",f=(m,g=!1)=>m!==void 0&&(g||m&&c)?-m:m;return[{years:f(iy(i)),months:f(iy(r)),weeks:f(iy(n)),days:f(iy(s)),hours:f(iy(o)),minutes:f(iy(a)),seconds:f(iy(l),l==="-0"),milliseconds:f(dD(u),d)}]}const E3e={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function gD(e,t,i,r,n,s,o){const a={year:t.length===2?jP(Af(t)):Af(t),month:Fte.indexOf(i)+1,day:Af(r),hour:Af(n),minute:Af(s)};return o&&(a.second=Af(o)),e&&(a.weekday=e.length>3?jte.indexOf(e)+1:Ute.indexOf(e)+1),a}const M3e=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function I3e(e){const[,t,i,r,n,s,o,a,l,u,c,d]=e,f=gD(t,n,r,i,s,o,a);let m;return l?m=E3e[l]:u?m=0:m=E4(c,d),[f,new go(m)]}function T3e(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const A3e=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,C3e=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,$3e=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function mB(e){const[,t,i,r,n,s,o,a]=e;return[gD(t,n,r,i,s,o,a),go.utcInstance]}function O3e(e){const[,t,i,r,n,s,o,a]=e;return[gD(t,a,i,r,n,s,o),go.utcInstance]}const R3e=Mw(p3e,yD),k3e=Mw(f3e,yD),L3e=Mw(m3e,yD),P3e=Mw(Wte),Zte=Iw(w3e,Aw,g3,v3),N3e=Iw(y3e,Aw,g3,v3),F3e=Iw(g3e,Aw,g3,v3),D3e=Iw(Aw,g3,v3);function j3e(e){return Tw(e,[R3e,Zte],[k3e,N3e],[L3e,F3e],[P3e,D3e])}function U3e(e){return Tw(T3e(e),[M3e,I3e])}function V3e(e){return Tw(e,[A3e,mB],[C3e,mB],[$3e,O3e])}function B3e(e){return Tw(e,[x3e,S3e])}const z3e=Iw(Aw);function G3e(e){return Tw(e,[_3e,z3e])}const q3e=Mw(v3e,b3e),H3e=Mw(Jte),W3e=Iw(Aw,g3,v3);function J3e(e){return Tw(e,[q3e,Zte],[H3e,W3e])}const Z3e="Invalid Duration",Yte={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Y3e={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Yte},Rl=146097/400,m1=146097/4800,K3e={years:{quarters:4,months:12,weeks:Rl/7,days:Rl,hours:Rl*24,minutes:Rl*24*60,seconds:Rl*24*60*60,milliseconds:Rl*24*60*60*1e3},quarters:{months:3,weeks:Rl/28,days:Rl/4,hours:Rl*24/4,minutes:Rl*24*60/4,seconds:Rl*24*60*60/4,milliseconds:Rl*24*60*60*1e3/4},months:{weeks:m1/7,days:m1,hours:m1*24,minutes:m1*24*60,seconds:m1*24*60*60,milliseconds:m1*24*60*60*1e3},...Yte},Jy=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Q3e=Jy.slice(0).reverse();function kp(e,t,i=!1){const r={values:i?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new Hi(r)}function X3e(e){return e<0?Math.floor(e):Math.ceil(e)}function Kte(e,t,i,r,n){const s=e[n][i],o=t[i]/s,a=Math.sign(o)===Math.sign(r[n]),l=!a&&r[n]!==0&&Math.abs(o)<=1?X3e(o):Math.trunc(o);r[n]+=l,t[i]-=l*s}function eEe(e,t){Q3e.reduce((i,r)=>Bi(t[r])?i:(i&&Kte(e,t,i,t,r),r),null)}function tEe(e){const t={};for(const[i,r]of Object.entries(e))r!==0&&(t[i]=r);return t}class Hi{constructor(t){const i=t.conversionAccuracy==="longterm"||!1;let r=i?K3e:Y3e;t.matrix&&(r=t.matrix),this.values=t.values,this.loc=t.loc||jr.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(t,i){return Hi.fromObject({milliseconds:t},i)}static fromObject(t,i={}){if(t==null||typeof t!="object")throw new Xl(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new Hi({values:xA(t,Hi.normalizeUnit),loc:jr.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(t){if(Qg(t))return Hi.fromMillis(t);if(Hi.isDuration(t))return t;if(typeof t=="object")return Hi.fromObject(t);throw new Xl(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,i){const[r]=B3e(t);return r?Hi.fromObject(r,i):Hi.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,i){const[r]=G3e(t);return r?Hi.fromObject(r,i):Hi.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,i=null){if(!t)throw new Xl("need to specify a reason the Duration is invalid");const r=t instanceof oc?t:new oc(t,i);if(Dn.throwOnInvalid)throw new CSe(r);return new Hi({invalid:r})}static normalizeUnit(t){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!i)throw new fte(t);return i}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?mo.create(this.loc,r).formatDurationFromString(this,t):Z3e}toHuman(t={}){const i=Jy.map(r=>{const n=this.values[r];return Bi(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:r.slice(0,-1)}).format(n)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=pD(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const i=this.toMillis();if(i<0||i>=864e5)return null;t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t};const r=this.shiftTo("hours","minutes","seconds","milliseconds");let n=t.format==="basic"?"hhmm":"hh:mm";(!t.suppressSeconds||r.seconds!==0||r.milliseconds!==0)&&(n+=t.format==="basic"?"ss":":ss",(!t.suppressMilliseconds||r.milliseconds!==0)&&(n+=".SSS"));let s=r.toFormat(n);return t.includePrefix&&(s="T"+s),s}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const i=Hi.fromDurationLike(t),r={};for(const n of Jy)(Ob(i.values,n)||Ob(this.values,n))&&(r[n]=i.get(n)+this.get(n));return kp(this,{values:r},!0)}minus(t){if(!this.isValid)return this;const i=Hi.fromDurationLike(t);return this.plus(i.negate())}mapUnits(t){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=Nte(t(this.values[r],r));return kp(this,{values:i},!0)}get(t){return this[Hi.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const i={...this.values,...xA(t,Hi.normalizeUnit)};return kp(this,{values:i})}reconfigure({locale:t,numberingSystem:i,conversionAccuracy:r,matrix:n}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:i}),matrix:n,conversionAccuracy:r};return kp(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return eEe(this.matrix,t),kp(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=tEe(this.normalize().shiftToAll().toObject());return kp(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>Hi.normalizeUnit(o));const i={},r={},n=this.toObject();let s;for(const o of Jy)if(t.indexOf(o)>=0){s=o;let a=0;for(const u in r)a+=this.matrix[u][o]*r[u],r[u]=0;Qg(n[o])&&(a+=n[o]);const l=Math.trunc(a);i[o]=l,r[o]=(a*1e3-l*1e3)/1e3;for(const u in n)Jy.indexOf(u)>Jy.indexOf(o)&&Kte(this.matrix,n,u,i,o)}else Qg(n[o])&&(r[o]=n[o]);for(const o in r)r[o]!==0&&(i[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return kp(this,{values:i},!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=this.values[i]===0?0:-this.values[i];return kp(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function i(r,n){return r===void 0||r===0?n===void 0||n===0:r===n}for(const r of Jy)if(!i(this.values[r],t.values[r]))return!1;return!0}}const y1="Invalid Interval";function iEe(e,t){return!e||!e.isValid?pn.invalid("missing or invalid start"):!t||!t.isValid?pn.invalid("missing or invalid end"):t<e?pn.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class pn{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,i=null){if(!t)throw new Xl("need to specify a reason the Interval is invalid");const r=t instanceof oc?t:new oc(t,i);if(Dn.throwOnInvalid)throw new ASe(r);return new pn({invalid:r})}static fromDateTimes(t,i){const r=d_(t),n=d_(i),s=iEe(r,n);return s??new pn({start:r,end:n})}static after(t,i){const r=Hi.fromDurationLike(i),n=d_(t);return pn.fromDateTimes(n,n.plus(r))}static before(t,i){const r=Hi.fromDurationLike(i),n=d_(t);return pn.fromDateTimes(n.minus(r),n)}static fromISO(t,i){const[r,n]=(t||"").split("/",2);if(r&&n){let s,o;try{s=bi.fromISO(r,i),o=s.isValid}catch{o=!1}let a,l;try{a=bi.fromISO(n,i),l=a.isValid}catch{l=!1}if(o&&l)return pn.fromDateTimes(s,a);if(o){const u=Hi.fromISO(n,i);if(u.isValid)return pn.after(s,u)}else if(l){const u=Hi.fromISO(r,i);if(u.isValid)return pn.before(a,u)}}return pn.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds"){if(!this.isValid)return NaN;const i=this.start.startOf(t),r=this.end.startOf(t);return Math.floor(r.diff(i,t).get(t))+1}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:i}={}){return this.isValid?pn.fromDateTimes(t||this.s,i||this.e):this}splitAt(...t){if(!this.isValid)return[];const i=t.map(d_).filter(o=>this.contains(o)).sort(),r=[];let{s:n}=this,s=0;for(;n<this.e;){const o=i[s]||this.e,a=+o>+this.e?this.e:o;r.push(pn.fromDateTimes(n,a)),n=a,s+=1}return r}splitBy(t){const i=Hi.fromDurationLike(t);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,n=1,s;const o=[];for(;r<this.e;){const a=this.start.plus(i.mapUnits(l=>l*n));s=+a>+this.e?this.e:a,o.push(pn.fromDateTimes(r,s)),r=s,n+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const i=this.s>t.s?this.s:t.s,r=this.e<t.e?this.e:t.e;return i>=r?null:pn.fromDateTimes(i,r)}union(t){if(!this.isValid)return this;const i=this.s<t.s?this.s:t.s,r=this.e>t.e?this.e:t.e;return pn.fromDateTimes(i,r)}static merge(t){const[i,r]=t.sort((n,s)=>n.s-s.s).reduce(([n,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[n,s.union(o)]:[n.concat([s]),o]:[n,o],[[],null]);return r&&i.push(r),i}static xor(t){let i=null,r=0;const n=[],s=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,u)=>l.time-u.time);for(const l of a)r+=l.type==="s"?1:-1,r===1?i=l.time:(i&&+i!=+l.time&&n.push(pn.fromDateTimes(i,l.time)),i=null);return pn.merge(n)}difference(...t){return pn.xor([this].concat(t)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:y1}toLocaleString(t=bA,i={}){return this.isValid?mo.create(this.s.loc.clone(i),t).formatInterval(this):y1}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:y1}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:y1}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:y1}toFormat(t,{separator:i=" – "}={}){return this.isValid?`${this.s.toFormat(t)}${i}${this.e.toFormat(t)}`:y1}toDuration(t,i){return this.isValid?this.e.diff(this.s,t,i):Hi.invalid(this.invalidReason)}mapEndpoints(t){return pn.fromDateTimes(t(this.s),t(this.e))}}class DE{static hasDST(t=Dn.defaultZone){const i=bi.now().setZone(t).set({month:12});return!t.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(t){return ip.isValidZone(t)}static normalizeZone(t){return Lf(t,Dn.defaultZone)}static months(t="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||jr.create(i,r,s)).months(t)}static monthsFormat(t="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||jr.create(i,r,s)).months(t,!0)}static weekdays(t="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||jr.create(i,r,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||jr.create(i,r,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return jr.create(t).meridiems()}static eras(t="short",{locale:i=null}={}){return jr.create(i,null,"gregory").eras(t)}static features(){return{relative:Lte()}}}function yB(e,t){const i=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(t)-i(e);return Math.floor(Hi.fromMillis(r).as("days"))}function rEe(e,t,i){const r=[["years",(l,u)=>u.year-l.year],["quarters",(l,u)=>u.quarter-l.quarter+(u.year-l.year)*4],["months",(l,u)=>u.month-l.month+(u.year-l.year)*12],["weeks",(l,u)=>{const c=yB(l,u);return(c-c%7)/7}],["days",yB]],n={},s=e;let o,a;for(const[l,u]of r)i.indexOf(l)>=0&&(o=l,n[l]=u(e,t),a=s.plus(n),a>t?(n[l]--,e=s.plus(n)):e=a);return[e,n,a,o]}function nEe(e,t,i,r){let[n,s,o,a]=rEe(e,t,i);const l=t-n,u=i.filter(d=>["hours","minutes","seconds","milliseconds"].indexOf(d)>=0);u.length===0&&(o<t&&(o=n.plus({[a]:1})),o!==n&&(s[a]=(s[a]||0)+l/(o-n)));const c=Hi.fromObject(s,r);return u.length>0?Hi.fromMillis(l,r).shiftTo(...u).plus(c):c}const vD={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},gB={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},sEe=vD.hanidec.replace(/[\[|\]]/g,"").split("");function oEe(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);if(e[i].search(vD.hanidec)!==-1)t+=sEe.indexOf(e[i]);else for(const n in gB){const[s,o]=gB[n];r>=s&&r<=o&&(t+=r-s)}}return parseInt(t,10)}else return t}function Mu({numberingSystem:e},t=""){return new RegExp(`${vD[e||"latn"]}${t}`)}const aEe="missing Intl.DateTimeFormat.formatToParts support";function Qi(e,t=i=>i){return{regex:e,deser:([i])=>t(oEe(i))}}const lEe=String.fromCharCode(160),Qte=`[ ${lEe}]`,Xte=new RegExp(Qte,"g");function uEe(e){return e.replace(/\./g,"\\.?").replace(Xte,Qte)}function vB(e){return e.replace(/\./g,"").replace(Xte," ").toLowerCase()}function Iu(e,t){return e===null?null:{regex:RegExp(e.map(uEe).join("|")),deser:([i])=>e.findIndex(r=>vB(i)===vB(r))+t}}function bB(e,t){return{regex:e,deser:([,i,r])=>E4(i,r),groups:t}}function L$(e){return{regex:e,deser:([t])=>t}}function cEe(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function hEe(e,t){const i=Mu(t),r=Mu(t,"{2}"),n=Mu(t,"{3}"),s=Mu(t,"{4}"),o=Mu(t,"{6}"),a=Mu(t,"{1,2}"),l=Mu(t,"{1,3}"),u=Mu(t,"{1,6}"),c=Mu(t,"{1,9}"),d=Mu(t,"{2,4}"),f=Mu(t,"{4,6}"),m=b=>({regex:RegExp(cEe(b.val)),deser:([x])=>x,literal:!0}),v=(b=>{if(e.literal)return m(b);switch(b.val){case"G":return Iu(t.eras("short",!1),0);case"GG":return Iu(t.eras("long",!1),0);case"y":return Qi(u);case"yy":return Qi(d,jP);case"yyyy":return Qi(s);case"yyyyy":return Qi(f);case"yyyyyy":return Qi(o);case"M":return Qi(a);case"MM":return Qi(r);case"MMM":return Iu(t.months("short",!0,!1),1);case"MMMM":return Iu(t.months("long",!0,!1),1);case"L":return Qi(a);case"LL":return Qi(r);case"LLL":return Iu(t.months("short",!1,!1),1);case"LLLL":return Iu(t.months("long",!1,!1),1);case"d":return Qi(a);case"dd":return Qi(r);case"o":return Qi(l);case"ooo":return Qi(n);case"HH":return Qi(r);case"H":return Qi(a);case"hh":return Qi(r);case"h":return Qi(a);case"mm":return Qi(r);case"m":return Qi(a);case"q":return Qi(a);case"qq":return Qi(r);case"s":return Qi(a);case"ss":return Qi(r);case"S":return Qi(l);case"SSS":return Qi(n);case"u":return L$(c);case"uu":return L$(a);case"uuu":return Qi(i);case"a":return Iu(t.meridiems(),0);case"kkkk":return Qi(s);case"kk":return Qi(d,jP);case"W":return Qi(a);case"WW":return Qi(r);case"E":case"c":return Qi(i);case"EEE":return Iu(t.weekdays("short",!1,!1),1);case"EEEE":return Iu(t.weekdays("long",!1,!1),1);case"ccc":return Iu(t.weekdays("short",!0,!1),1);case"cccc":return Iu(t.weekdays("long",!0,!1),1);case"Z":case"ZZ":return bB(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return bB(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return L$(/[a-z_+-/]{1,256}?/i);default:return m(b)}})(e)||{invalidReason:aEe};return v.token=e,v}const dEe={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function pEe(e,t){const{type:i,value:r}=e;if(i==="literal")return{literal:!0,val:r};const n=t[i];let s=dEe[i];if(typeof s=="object"&&(s=s[n]),s)return{literal:!1,val:s}}function fEe(e){return[`^${e.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,e]}function mEe(e,t,i){const r=e.match(t);if(r){const n={};let s=1;for(const o in i)if(Ob(i,o)){const a=i[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(n[a.token.val[0]]=a.deser(r.slice(s,s+l))),s+=l}return[r,n]}else return[r,{}]}function yEe(e){const t=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return Bi(e.z)||(i=ip.create(e.z)),Bi(e.Z)||(i||(i=new go(e.Z)),r=e.Z),Bi(e.q)||(e.M=(e.q-1)*3+1),Bi(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),Bi(e.u)||(e.S=dD(e.u)),[Object.keys(e).reduce((s,o)=>{const a=t(o);return a&&(s[a]=e[o]),s},{}),i,r]}let P$=null;function gEe(){return P$||(P$=bi.fromMillis(1555555555555)),P$}function vEe(e,t){if(e.literal)return e;const i=mo.macroTokenToFormatOpts(e.val),r=iie(i,t);return r==null||r.includes(void 0)?e:r}function eie(e,t){return Array.prototype.concat(...e.map(i=>vEe(i,t)))}function tie(e,t,i){const r=eie(mo.parseFormat(i),e),n=r.map(o=>hEe(o,e)),s=n.find(o=>o.invalidReason);if(s)return{input:t,tokens:r,invalidReason:s.invalidReason};{const[o,a]=fEe(n),l=RegExp(o,"i"),[u,c]=mEe(t,l,a),[d,f,m]=c?yEe(c):[null,null,void 0];if(Ob(c,"a")&&Ob(c,"H"))throw new _2("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:r,regex:l,rawMatches:u,matches:c,result:d,zone:f,specificOffset:m}}}function bEe(e,t,i){const{result:r,zone:n,specificOffset:s,invalidReason:o}=tie(e,t,i);return[r,n,s,o]}function iie(e,t){return e?mo.create(t,e).formatDateTimeParts(gEe()).map(n=>pEe(n,e)):null}const rie=[0,31,59,90,120,151,181,212,243,273,304,334],nie=[0,31,60,91,121,152,182,213,244,274,305,335];function ru(e,t){return new oc("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function sie(e,t,i){const r=new Date(Date.UTC(e,t-1,i));e<100&&e>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const n=r.getUTCDay();return n===0?7:n}function oie(e,t,i){return i+(y3(e)?nie:rie)[t-1]}function aie(e,t){const i=y3(e)?nie:rie,r=i.findIndex(s=>s<t),n=t-i[r];return{month:r+1,day:n}}function UP(e){const{year:t,month:i,day:r}=e,n=oie(t,i,r),s=sie(t,i,r);let o=Math.floor((n-s+10)/7),a;return o<1?(a=t-1,o=_A(a)):o>_A(t)?(a=t+1,o=1):a=t,{weekYear:a,weekNumber:o,weekday:s,...M4(e)}}function wB(e){const{weekYear:t,weekNumber:i,weekday:r}=e,n=sie(t,1,4),s=dx(t);let o=i*7+r-n-3,a;o<1?(a=t-1,o+=dx(a)):o>s?(a=t+1,o-=dx(t)):a=t;const{month:l,day:u}=aie(a,o);return{year:a,month:l,day:u,...M4(e)}}function N$(e){const{year:t,month:i,day:r}=e,n=oie(t,i,r);return{year:t,ordinal:n,...M4(e)}}function _B(e){const{year:t,ordinal:i}=e,{month:r,day:n}=aie(t,i);return{year:t,month:r,day:n,...M4(e)}}function wEe(e){const t=S4(e.weekYear),i=Vd(e.weekNumber,1,_A(e.weekYear)),r=Vd(e.weekday,1,7);return t?i?r?!1:ru("weekday",e.weekday):ru("week",e.week):ru("weekYear",e.weekYear)}function _Ee(e){const t=S4(e.year),i=Vd(e.ordinal,1,dx(e.year));return t?i?!1:ru("ordinal",e.ordinal):ru("year",e.year)}function lie(e){const t=S4(e.year),i=Vd(e.month,1,12),r=Vd(e.day,1,wA(e.year,e.month));return t?i?r?!1:ru("day",e.day):ru("month",e.month):ru("year",e.year)}function uie(e){const{hour:t,minute:i,second:r,millisecond:n}=e,s=Vd(t,0,23)||t===24&&i===0&&r===0&&n===0,o=Vd(i,0,59),a=Vd(r,0,59),l=Vd(n,0,999);return s?o?a?l?!1:ru("millisecond",n):ru("second",r):ru("minute",i):ru("hour",t)}const F$="Invalid DateTime",xB=864e13;function jE(e){return new oc("unsupported zone",`the zone "${e.name}" is not supported`)}function D$(e){return e.weekData===null&&(e.weekData=UP(e.c)),e.weekData}function c_(e,t){const i={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new bi({...i,...t,old:i})}function cie(e,t,i){let r=e-t*60*1e3;const n=i.offset(r);if(t===n)return[r,t];r-=(n-t)*60*1e3;const s=i.offset(r);return n===s?[r,n]:[e-Math.min(n,s)*60*1e3,Math.max(n,s)]}function SB(e,t){e+=t*60*1e3;const i=new Date(e);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function WI(e,t,i){return cie(fD(e),t,i)}function EB(e,t){const i=e.o,r=e.c.year+Math.trunc(t.years),n=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,s={...e.c,year:r,month:n,day:Math.min(e.c.day,wA(r,n))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=Hi.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=fD(s);let[l,u]=cie(a,i,e.zone);return o!==0&&(l+=o,u=e.zone.offset(l)),{ts:l,o:u}}function h_(e,t,i,r,n,s){const{setZone:o,zone:a}=i;if(e&&Object.keys(e).length!==0){const l=t||a,u=bi.fromObject(e,{...i,zone:l,specificOffset:s});return o?u:u.setZone(a)}else return bi.invalid(new oc("unparsable",`the input "${n}" can't be parsed as ${r}`))}function UE(e,t,i=!0){return e.isValid?mo.create(jr.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(e,t):null}function j$(e,t){const i=e.c.year>9999||e.c.year<0;let r="";return i&&e.c.year>=0&&(r+="+"),r+=jn(e.c.year,i?6:4),t?(r+="-",r+=jn(e.c.month),r+="-",r+=jn(e.c.day)):(r+=jn(e.c.month),r+=jn(e.c.day)),r}function MB(e,t,i,r,n,s){let o=jn(e.c.hour);return t?(o+=":",o+=jn(e.c.minute),(e.c.second!==0||!i)&&(o+=":")):o+=jn(e.c.minute),(e.c.second!==0||!i)&&(o+=jn(e.c.second),(e.c.millisecond!==0||!r)&&(o+=".",o+=jn(e.c.millisecond,3))),n&&(e.isOffsetFixed&&e.offset===0&&!s?o+="Z":e.o<0?(o+="-",o+=jn(Math.trunc(-e.o/60)),o+=":",o+=jn(Math.trunc(-e.o%60))):(o+="+",o+=jn(Math.trunc(e.o/60)),o+=":",o+=jn(Math.trunc(e.o%60)))),s&&(o+="["+e.zone.ianaName+"]"),o}const hie={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},xEe={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},SEe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},die=["year","month","day","hour","minute","second","millisecond"],EEe=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],MEe=["year","ordinal","hour","minute","second","millisecond"];function IB(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new fte(e);return t}function TB(e,t){const i=Lf(t.zone,Dn.defaultZone),r=jr.fromObject(t),n=Dn.now();let s,o;if(Bi(e.year))s=n;else{for(const u of die)Bi(e[u])&&(e[u]=hie[u]);const a=lie(e)||uie(e);if(a)return bi.invalid(a);const l=i.offset(n);[s,o]=WI(e,l,i)}return new bi({ts:s,zone:i,loc:r,o})}function AB(e,t,i){const r=Bi(i.round)?!0:i.round,n=(o,a)=>(o=pD(o,r||i.calendary?0:2,!0),t.loc.clone(i).relFormatter(i).format(o,a)),s=o=>i.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(i.unit)return n(s(i.unit),i.unit);for(const o of i.units){const a=s(o);if(Math.abs(a)>=1)return n(a,o)}return n(e>t?-0:0,i.units[i.units.length-1])}function CB(e){let t={},i;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],i=Array.from(e).slice(0,e.length-1)):i=Array.from(e),[t,i]}class bi{constructor(t){const i=t.zone||Dn.defaultZone;let r=t.invalid||(Number.isNaN(t.ts)?new oc("invalid input"):null)||(i.isValid?null:jE(i));this.ts=Bi(t.ts)?Dn.now():t.ts;let n=null,s=null;if(!r)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(i))[n,s]=[t.old.c,t.old.o];else{const a=i.offset(this.ts);n=SB(this.ts,a),r=Number.isNaN(n.year)?new oc("invalid input"):null,n=r?null:n,s=r?null:a}this._zone=i,this.loc=t.loc||jr.create(),this.invalid=r,this.weekData=null,this.c=n,this.o=s,this.isLuxonDateTime=!0}static now(){return new bi({})}static local(){const[t,i]=CB(arguments),[r,n,s,o,a,l,u]=i;return TB({year:r,month:n,day:s,hour:o,minute:a,second:l,millisecond:u},t)}static utc(){const[t,i]=CB(arguments),[r,n,s,o,a,l,u]=i;return t.zone=go.utcInstance,TB({year:r,month:n,day:s,hour:o,minute:a,second:l,millisecond:u},t)}static fromJSDate(t,i={}){const r=YSe(t)?t.valueOf():NaN;if(Number.isNaN(r))return bi.invalid("invalid input");const n=Lf(i.zone,Dn.defaultZone);return n.isValid?new bi({ts:r,zone:n,loc:jr.fromObject(i)}):bi.invalid(jE(n))}static fromMillis(t,i={}){if(Qg(t))return t<-xB||t>xB?bi.invalid("Timestamp out of range"):new bi({ts:t,zone:Lf(i.zone,Dn.defaultZone),loc:jr.fromObject(i)});throw new Xl(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,i={}){if(Qg(t))return new bi({ts:t*1e3,zone:Lf(i.zone,Dn.defaultZone),loc:jr.fromObject(i)});throw new Xl("fromSeconds requires a numerical input")}static fromObject(t,i={}){t=t||{};const r=Lf(i.zone,Dn.defaultZone);if(!r.isValid)return bi.invalid(jE(r));const n=Dn.now(),s=Bi(i.specificOffset)?r.offset(n):i.specificOffset,o=xA(t,IB),a=!Bi(o.ordinal),l=!Bi(o.year),u=!Bi(o.month)||!Bi(o.day),c=l||u,d=o.weekYear||o.weekNumber,f=jr.fromObject(i);if((c||a)&&d)throw new _2("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&a)throw new _2("Can't mix ordinal dates with month/day");const m=d||o.weekday&&!c;let g,v,b=SB(n,s);m?(g=EEe,v=xEe,b=UP(b)):a?(g=MEe,v=SEe,b=N$(b)):(g=die,v=hie);let x=!1;for(const L of g){const B=o[L];Bi(B)?x?o[L]=v[L]:o[L]=b[L]:x=!0}const S=m?wEe(o):a?_Ee(o):lie(o),T=S||uie(o);if(T)return bi.invalid(T);const _=m?wB(o):a?_B(o):o,[M,I]=WI(_,s,r),$=new bi({ts:M,zone:r,o:I,loc:f});return o.weekday&&c&&t.weekday!==$.weekday?bi.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${$.toISO()}`):$}static fromISO(t,i={}){const[r,n]=j3e(t);return h_(r,n,i,"ISO 8601",t)}static fromRFC2822(t,i={}){const[r,n]=U3e(t);return h_(r,n,i,"RFC 2822",t)}static fromHTTP(t,i={}){const[r,n]=V3e(t);return h_(r,n,i,"HTTP",i)}static fromFormat(t,i,r={}){if(Bi(t)||Bi(i))throw new Xl("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:s=null}=r,o=jr.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0}),[a,l,u,c]=bEe(o,t,i);return c?bi.invalid(c):h_(a,l,r,`format ${i}`,t,u)}static fromString(t,i,r={}){return bi.fromFormat(t,i,r)}static fromSQL(t,i={}){const[r,n]=J3e(t);return h_(r,n,i,"SQL",t)}static invalid(t,i=null){if(!t)throw new Xl("need to specify a reason the DateTime is invalid");const r=t instanceof oc?t:new oc(t,i);if(Dn.throwOnInvalid)throw new TSe(r);return new bi({invalid:r})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,i={}){const r=iie(t,jr.fromObject(i));return r?r.map(n=>n?n.val:null).join(""):null}static expandFormat(t,i={}){return eie(mo.parseFormat(t),jr.fromObject(i)).map(n=>n.val).join("")}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?D$(this).weekYear:NaN}get weekNumber(){return this.isValid?D$(this).weekNumber:NaN}get weekday(){return this.isValid?D$(this).weekday:NaN}get ordinal(){return this.isValid?N$(this.c).ordinal:NaN}get monthShort(){return this.isValid?DE.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?DE.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?DE.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?DE.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return y3(this.year)}get daysInMonth(){return wA(this.year,this.month)}get daysInYear(){return this.isValid?dx(this.year):NaN}get weeksInWeekYear(){return this.isValid?_A(this.weekYear):NaN}resolvedLocaleOptions(t={}){const{locale:i,numberingSystem:r,calendar:n}=mo.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:n}}toUTC(t=0,i={}){return this.setZone(go.instance(t),i)}toLocal(){return this.setZone(Dn.defaultZone)}setZone(t,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(t=Lf(t,Dn.defaultZone),t.equals(this.zone))return this;if(t.isValid){let n=this.ts;if(i||r){const s=t.offset(this.ts),o=this.toObject();[n]=WI(o,s,t)}return c_(this,{ts:n,zone:t})}else return bi.invalid(jE(t))}reconfigure({locale:t,numberingSystem:i,outputCalendar:r}={}){const n=this.loc.clone({locale:t,numberingSystem:i,outputCalendar:r});return c_(this,{loc:n})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const i=xA(t,IB),r=!Bi(i.weekYear)||!Bi(i.weekNumber)||!Bi(i.weekday),n=!Bi(i.ordinal),s=!Bi(i.year),o=!Bi(i.month)||!Bi(i.day),a=s||o,l=i.weekYear||i.weekNumber;if((a||n)&&l)throw new _2("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&n)throw new _2("Can't mix ordinal dates with month/day");let u;r?u=wB({...UP(this.c),...i}):Bi(i.ordinal)?(u={...this.toObject(),...i},Bi(i.day)&&(u.day=Math.min(wA(u.year,u.month),u.day))):u=_B({...N$(this.c),...i});const[c,d]=WI(u,this.o,this.zone);return c_(this,{ts:c,o:d})}plus(t){if(!this.isValid)return this;const i=Hi.fromDurationLike(t);return c_(this,EB(this,i))}minus(t){if(!this.isValid)return this;const i=Hi.fromDurationLike(t).negate();return c_(this,EB(this,i))}startOf(t){if(!this.isValid)return this;const i={},r=Hi.normalizeUnit(t);switch(r){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(r==="weeks"&&(i.weekday=1),r==="quarters"){const n=Math.ceil(this.month/3);i.month=(n-1)*3+1}return this.set(i)}endOf(t){return this.isValid?this.plus({[t]:1}).startOf(t).minus(1):this}toFormat(t,i={}){return this.isValid?mo.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,t):F$}toLocaleString(t=bA,i={}){return this.isValid?mo.create(this.loc.clone(i),t).formatDateTime(this):F$}toLocaleParts(t={}){return this.isValid?mo.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:n=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=t==="extended";let a=j$(this,o);return a+="T",a+=MB(this,o,i,r,n,s),a}toISODate({format:t="extended"}={}){return this.isValid?j$(this,t==="extended"):null}toISOWeekDate(){return UE(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:n=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(n?"T":"")+MB(this,o==="extended",i,t,r,s):null}toRFC2822(){return UE(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return UE(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?j$(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let n="HH:mm:ss.SSS";return(i||t)&&(r&&(n+=" "),i?n+="z":t&&(n+="ZZ")),UE(this,n,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():F$}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const i={...this.c};return t.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,i="milliseconds",r={}){if(!this.isValid||!t.isValid)return Hi.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=KSe(i).map(Hi.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,l=o?t:this,u=nEe(a,l,s,n);return o?u.negate():u}diffNow(t="milliseconds",i={}){return this.diff(bi.now(),t,i)}until(t){return this.isValid?pn.fromDateTimes(this,t):this}hasSame(t,i){if(!this.isValid)return!1;const r=t.valueOf(),n=this.setZone(t.zone,{keepLocalTime:!0});return n.startOf(i)<=r&&r<=n.endOf(i)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const i=t.base||bi.fromObject({},{zone:this.zone}),r=t.padding?this<i?-t.padding:t.padding:0;let n=["years","months","days","hours","minutes","seconds"],s=t.unit;return Array.isArray(t.unit)&&(n=t.unit,s=void 0),AB(i,this.plus(r),{...t,numeric:"always",units:n,unit:s})}toRelativeCalendar(t={}){return this.isValid?AB(t.base||bi.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(bi.isDateTime))throw new Xl("min requires all arguments be DateTimes");return pB(t,i=>i.valueOf(),Math.min)}static max(...t){if(!t.every(bi.isDateTime))throw new Xl("max requires all arguments be DateTimes");return pB(t,i=>i.valueOf(),Math.max)}static fromFormatExplain(t,i,r={}){const{locale:n=null,numberingSystem:s=null}=r,o=jr.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return tie(o,t,i)}static fromStringExplain(t,i,r={}){return bi.fromFormatExplain(t,i,r)}static get DATE_SHORT(){return bA}static get DATE_MED(){return mte}static get DATE_MED_WITH_WEEKDAY(){return $Se}static get DATE_FULL(){return yte}static get DATE_HUGE(){return gte}static get TIME_SIMPLE(){return vte}static get TIME_WITH_SECONDS(){return bte}static get TIME_WITH_SHORT_OFFSET(){return wte}static get TIME_WITH_LONG_OFFSET(){return _te}static get TIME_24_SIMPLE(){return xte}static get TIME_24_WITH_SECONDS(){return Ste}static get TIME_24_WITH_SHORT_OFFSET(){return Ete}static get TIME_24_WITH_LONG_OFFSET(){return Mte}static get DATETIME_SHORT(){return Ite}static get DATETIME_SHORT_WITH_SECONDS(){return Tte}static get DATETIME_MED(){return Ate}static get DATETIME_MED_WITH_SECONDS(){return Cte}static get DATETIME_MED_WITH_WEEKDAY(){return OSe}static get DATETIME_FULL(){return $te}static get DATETIME_FULL_WITH_SECONDS(){return Ote}static get DATETIME_HUGE(){return Rte}static get DATETIME_HUGE_WITH_SECONDS(){return kte}}function d_(e){if(bi.isDateTime(e))return e;if(e&&e.valueOf&&Qg(e.valueOf()))return bi.fromJSDate(e);if(e&&typeof e=="object")return bi.fromObject(e);throw new Xl(`Unknown datetime argument: ${e}, of type ${typeof e}`)}function IEe(e,t="system"){if(!e||!nB.has(e.timeZone))return t;const i=nB.get(e.timeZone);return AEe(e.timeZone)||e.respectsDaylightSaving?i:TEe(i)}function TEe(e){const t=bi.local().setZone(e),i=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${go.instance(-i).formatOffset(0,"narrow")}`}function AEe(e){return e.startsWith("UTC")}let lf=class extends xr(Je){constructor(t){super(t),this.legacy=null,this.timeZone="system"}readLegacy(t,i){const{timeZone:r,respectsDaylightSaving:n}=i;return{timeZone:r,respectsDaylightSaving:n}}readTimeZone(t,i){return"timeZoneIANA"in i?i.timeZoneIANA:IEe(i)}writeTimeZone(t,i){i.timeZoneIANA=t}equals(t){return!(Re(t)||Re(this.timeZone)||Re(t.timeZone))&&this.timeZone===t.timeZone}};h([p()],lf.prototype,"legacy",void 0),h([Ye("legacy",["timeZone"])],lf.prototype,"readLegacy",null),h([p({type:String,nonNullable:!0})],lf.prototype,"timeZone",void 0),h([Ye("timeZone",["timeZone","timeZoneIANA","respectsDaylightSaving"])],lf.prototype,"readTimeZone",null),h([it("timeZone")],lf.prototype,"writeTimeZone",null),lf=h([ce("esri.time.TimeReference")],lf);const fm=lf;let fd=class extends xr(Je){constructor(t){super(t),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.dateFieldsTimeReference=null}};h([p()],fd.prototype,"creatorField",void 0),h([p()],fd.prototype,"creationDateField",void 0),h([p()],fd.prototype,"editorField",void 0),h([p()],fd.prototype,"editDateField",void 0),h([p()],fd.prototype,"realm",void 0),h([p({type:fm})],fd.prototype,"dateFieldsTimeReference",void 0),fd=h([ce("esri.layers.support.EditFieldsInfo")],fd);const CEe=fd;let sh=class extends xr(Je){constructor(t){super(t)}};h([p({constructOnly:!0,json:{write:!0}})],sh.prototype,"name",void 0),h([p({constructOnly:!0,json:{write:!0}})],sh.prototype,"fields",void 0),h([p({constructOnly:!0,json:{write:!0}})],sh.prototype,"isAscending",void 0),h([p({constructOnly:!0,json:{write:!0}})],sh.prototype,"indexType",void 0),h([p({constructOnly:!0,json:{write:!0}})],sh.prototype,"isUnique",void 0),h([p({constructOnly:!0,json:{write:!0}})],sh.prototype,"description",void 0),sh=h([ce("esri.layers.support.FeatureIndex")],sh);var VP;let _s=VP=class extends Je{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new VP(Le({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};h([p({type:[String],json:{write:!0}})],_s.prototype,"attachmentTypes",void 0),h([p({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],_s.prototype,"attachmentsWhere",void 0),h([p({type:Boolean,json:{write:!0}})],_s.prototype,"cacheHint",void 0),h([p({type:[String],json:{write:!0}})],_s.prototype,"keywords",void 0),h([p({type:[Number],json:{write:!0}})],_s.prototype,"globalIds",void 0),h([p({json:{write:!0}})],_s.prototype,"name",void 0),h([p({type:Number,json:{read:{source:"resultRecordCount"}}})],_s.prototype,"num",void 0),h([p({type:[Number],json:{write:!0}})],_s.prototype,"objectIds",void 0),h([p({type:Boolean,json:{default:!1,write:!0}})],_s.prototype,"returnMetadata",void 0),h([p({type:[Number],json:{write:!0}})],_s.prototype,"size",void 0),h([p({type:Number,json:{read:{source:"resultOffset"}}})],_s.prototype,"start",void 0),h([it("start"),it("num")],_s.prototype,"writeStart",null),h([p({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],_s.prototype,"where",void 0),_s=VP=h([ce("esri.rest.support.AttachmentQuery")],_s),_s.from=nn(_s);const SA=_s;var BP;let Vr=BP=class extends Je{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new BP(Le({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};h([p({type:Boolean,json:{write:!0}})],Vr.prototype,"cacheHint",void 0),h([p({type:Vo,json:{write:!0}})],Vr.prototype,"dynamicDataSource",void 0),h([p({type:String,json:{write:!0}})],Vr.prototype,"gdbVersion",void 0),h([p({type:Number,json:{write:!0}})],Vr.prototype,"geometryPrecision",void 0),h([p({type:Date})],Vr.prototype,"historicMoment",void 0),h([it("historicMoment")],Vr.prototype,"_writeHistoricMoment",null),h([p({type:Number,json:{write:!0}})],Vr.prototype,"maxAllowableOffset",void 0),h([p({type:[Number],json:{write:!0}})],Vr.prototype,"objectIds",void 0),h([p({type:[String],json:{write:!0}})],Vr.prototype,"orderByFields",void 0),h([p({type:[String],json:{write:!0}})],Vr.prototype,"outFields",void 0),h([p({type:Et,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Vr.prototype,"outSpatialReference",void 0),h([p({json:{write:!0}})],Vr.prototype,"relationshipId",void 0),h([p({type:Number,json:{read:{source:"resultOffset"}}})],Vr.prototype,"start",void 0),h([it("start"),it("num")],Vr.prototype,"writeStart",null),h([p({type:Number,json:{read:{source:"resultRecordCount"}}})],Vr.prototype,"num",void 0),h([p({json:{write:!0}})],Vr.prototype,"returnGeometry",void 0),h([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Vr.prototype,"returnM",void 0),h([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Vr.prototype,"returnZ",void 0),h([p({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Vr.prototype,"where",void 0),Vr=BP=h([ce("esri.rest.support.RelationshipQuery")],Vr),Vr.from=nn(Vr);const Rb=Vr,$B=Object.freeze(Object.defineProperty({__proto__:null,default:Rb},Symbol.toStringTag,{value:"Module"})),zP=new ti({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function $Ee(e,t,i,r){const n=await Dm(e);if(await bD(e,t,r),!n.addAttachment)throw new Ce(r,"Layer source does not support addAttachment capability");return n.addAttachment(t,i)}function bD(e,t,i){const{attributes:r}=t,{objectIdField:n}=e;return e.get("capabilities.data.supportsAttachment")?t?r?n&&r[n]?Promise.resolve():Promise.reject(new Ce(i,`feature is missing the identifying attribute ${n}`)):Promise.reject(new Ce(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new Ce(i,"A feature is required to add/delete/update attachments")):Promise.reject(new Ce(i,"this layer doesn't support attachments"))}async function OEe(e,t,i,r,n){const s=await Dm(e);if(await bD(e,t,n),!s.updateAttachment)throw new Ce(n,"Layer source does not support updateAttachment capability");return s.updateAttachment(t,i,r)}async function REe(e,t,i){const r=await De(()=>import("./editingSupport-cb6fe05c.js"),["./editingSupport-cb6fe05c.js","./assetEditingSupport-2cebf928.js","./preload-helper-388ac9d5.js"],import.meta.url),n=await e.load();return r.applyEdits(n,n.source,t,i)}async function kEe(e,t,i,r){const n=await Dm(e);if(await bD(e,t,r),!n.deleteAttachments)throw new Ce(r,"Layer source does not support deleteAttachments capability");return n.deleteAttachments(t,i)}async function LEe(e,t,i){const r=(await e.load({signal:t?.signal})).source;if(!r.fetchRecomputedExtents)throw new Ce(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(t)}async function PEe(e,t,i,r){t=SA.from(t),await e.load();const n=e.source,s=e.capabilities;if(!s?.data?.supportsAttachment)throw new Ce(r,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:a,globalIds:l,num:u,size:c,start:d,where:f}=t;if(!s?.operations?.supportsQueryAttachments&&(o?.length>0||l?.length>0||c?.length>0||u||d||f))throw new Ce(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(a?.length||l?.length||f))throw new Ce(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);if(!n.queryAttachments)throw new Ce(r,"Layer source does not support queryAttachments capability",t);return n.queryAttachments(t)}async function NEe(e,t,i,r){const n=await Dm(e);if(!n.queryObjectIds)throw new Ce(r,"Layer source does not support queryObjectIds capability");return n.queryObjectIds(On.from(t)??e.createQuery(),i)}async function FEe(e,t,i,r){const n=await Dm(e);if(!n.queryFeatureCount)throw new Ce(r,"Layer source does not support queryFeatureCount capability");return n.queryFeatureCount(On.from(t)??e.createQuery(),i)}async function DEe(e,t,i,r){const n=await Dm(e);if(!n.queryExtent)throw new Ce(r,"Layer source does not support queryExtent capability");return n.queryExtent(On.from(t)??e.createQuery(),i)}async function jEe(e,t,i,r){const n=await Dm(e);if(!n.queryRelatedFeatures)throw new Ce(r,"Layer source does not support queryRelatedFeatures capability");return n.queryRelatedFeatures(Rb.from(t),i)}async function UEe(e,t,i,r){const n=await Dm(e);if(!n.queryRelatedFeaturesCount)throw new Ce(r,"Layer source does not support queryRelatedFeaturesCount capability");return n.queryRelatedFeaturesCount(Rb.from(t),i)}async function VEe(e){const t=e.source;if(t?.refresh)try{const{dataChanged:i,updates:r}=await t.refresh();if(ee(r)&&(e.sourceJSON={...e.sourceJSON,...r},e.read(r,{origin:"service",url:e.parsedUrl})),i)return!0}catch{}if(e.definitionExpression)try{return(await I_e(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function BEe(e){const t=new On,i=e.get("capabilities.data"),r=e.get("capabilities.query");t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,r&&(t.compactGeometryEnabled=r.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),i&&(i.supportsZ&&e.returnZ!=null&&(t.returnZ=e.returnZ),i.supportsM&&e.returnM!=null&&(t.returnM=e.returnM)),t.outFields=["*"];const{timeOffset:n,timeExtent:s}=e;return t.timeExtent=n!=null&&s!=null?s.offset(-n.value,n.unit):s||null,t.multipatchOption=e.geometryType==="multipatch"?"xyFootprint":null,t}function pie(e){const{globalIdField:t,fields:i}=e;if(t)return t;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function fie(e){const{objectIdField:t,fields:i}=e;if(t)return t;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function zEe(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}async function Dm(e){return(await e.load()).source}async function GEe(e,t){if(!wr||wr.findCredential(e))return;let i;try{const r=await HK(e,t);r&&(i=await wr.checkSignInStatus(`${r}/sharing`))}catch{}if(i)try{const r=ee(t)?t.signal:null;await wr.getCredential(e,{signal:r})}catch{}}async function qEe(e,t){const i=e.parsedUrl?.path;if(!i)return;const r=e.editFieldsInfo;(e.userHasUpdateItemPrivileges||e.userHasFullEditingPrivileges&&e.capabilities.operations.supportsEditing||r?.creatorField||r?.editorField)&&await GEe(i,t)}function HEe(e){return!e.sourceJSON?.isMultiServicesView&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}let X1=class extends xr(Je){constructor(t){super(t),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};h([p({type:String,json:{read:{source:"shapeAreaFieldName"}}})],X1.prototype,"shapeAreaField",void 0),h([p({type:String,json:{read:{source:"shapeLengthFieldName"}}})],X1.prototype,"shapeLengthField",void 0),h([p({type:String,json:{read:e=>Jx.read(e)||Qd.read(e)}})],X1.prototype,"units",void 0),X1=h([ce("esri.layers.support.GeometryFieldsInfo")],X1);const WEe=X1;var GP;let ev=GP=class extends Je{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new Pt}clone(){return new GP({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};h([p({type:String,json:{write:!0}})],ev.prototype,"floorField",void 0),h([p({json:{read:!1,write:!1}})],ev.prototype,"viewAllMode",void 0),h([p({json:{read:!1,write:!1}})],ev.prototype,"viewAllLevelIds",void 0),ev=GP=h([ce("esri.layers.support.LayerFloorInfo")],ev);const mie=ev,OB=new ti({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),RB=new ti({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let Gl=class extends xr(Je){constructor(t){super(t),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};h([p({json:{read:OB.read,write:OB.write}})],Gl.prototype,"cardinality",void 0),h([p({json:{read:!0,write:!0}})],Gl.prototype,"composite",void 0),h([p({json:{read:!0,write:!0}})],Gl.prototype,"id",void 0),h([p({json:{read:!0,write:!0}})],Gl.prototype,"keyField",void 0),h([p({json:{read:!0,write:!0}})],Gl.prototype,"keyFieldInRelationshipTable",void 0),h([p({json:{read:!0,write:!0}})],Gl.prototype,"name",void 0),h([p({json:{read:!0,write:!0}})],Gl.prototype,"relatedTableId",void 0),h([p({json:{read:!0,write:!0}})],Gl.prototype,"relationshipTableId",void 0),h([p({json:{read:RB.read,write:RB.write}})],Gl.prototype,"role",void 0),Gl=h([ce("esri.layers.support.Relationship")],Gl);const JEe=Gl,ZEe={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function Xt(e,t,i){return!!(e&&e.hasOwnProperty(t)?e[t]:i)}function VE(e,t,i){return e&&e.hasOwnProperty(t)?e[t]:i}function YEe(e){const t=e?.supportedSpatialAggregationStatistics?.map(i=>i.toLowerCase());return{envelope:!!t?.includes("envelopeaggregate"),centroid:!!t?.includes("centroidaggregate"),convexHull:!!t?.includes("convexhullaggregate")}}function b3(e,t){return!!e?.supportedOperationsWithCacheHint?.map(r=>r.toLowerCase())?.includes(t.toLowerCase())}function wD(e,t){return{analytics:KEe(e),attachment:QEe(e),data:XEe(e),metadata:eMe(e),operations:tMe(e.capabilities,e,t),query:iMe(e,t),queryRelated:rMe(e),queryTopFeatures:nMe(e),editing:sMe(e)}}function KEe(e){return{supportsCacheHint:b3(e.advancedQueryCapabilities,"queryAnalytics")}}function QEe(e){const t=e.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:b3(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:Xt(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(r=>{const n=ZEe[r.name];n&&(i[n]=!!r.isEnabled)}),i}function XEe(e){return{isVersioned:Xt(e,"isDataVersioned",!1),supportsAttachment:Xt(e,"hasAttachments",!1),supportsM:Xt(e,"hasM",!1),supportsZ:Xt(e,"hasZ",!1)}}function eMe(e){return{supportsAdvancedFieldProperties:Xt(e,"supportsFieldDescriptionProperty",!1)}}function tMe(e,t,i){const r=e?e.toLowerCase().split(",").map(f=>f.trim()):[],n=i?G0(i):null,s=r.includes(ee(n)&&n.serverType==="MapServer"?"data":"query"),o=r.includes("editing")&&!t.datesInUnknownTimezone;let a=o&&r.includes("create"),l=o&&r.includes("delete"),u=o&&r.includes("update");const c=r.includes("changetracking"),d=t.advancedQueryCapabilities;return o&&!(a||l||u)&&(a=l=u=!0),{supportsCalculate:Xt(t,"supportsCalculate",!1),supportsTruncate:Xt(t,"supportsTruncate",!1),supportsValidateSql:Xt(t,"supportsValidateSql",!1),supportsAdd:a,supportsDelete:l,supportsEditing:o,supportsChangeTracking:c,supportsQuery:s,supportsQueryAnalytics:Xt(d,"supportsQueryAnalytic",!1),supportsQueryAttachments:Xt(d,"supportsQueryAttachments",!1),supportsQueryTopFeatures:Xt(d,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:Xt(t,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:u,supportsExceedsLimitStatistics:Xt(t,"supportsExceedsLimitStatistics",!1)}}function iMe(e,t){const i=e.advancedQueryCapabilities,r=e.ownershipBasedAccessControlForFeatures,n=e.archivingInfo,s=e.currentVersion,o=t?.includes("MapServer"),a=!o||s>=Ze("mapserver-pbf-version-support"),l=nD(t),u=new Set((e.supportedQueryFormats??"").split(",").map(c=>c.toLowerCase().trim()));return{supportsStatistics:Xt(i,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:Xt(i,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:Xt(i,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:YEe(i),supportsCentroid:Xt(i,"supportsReturningGeometryCentroid",!1),supportsDistance:Xt(i,"supportsQueryWithDistance",!1),supportsDistinct:Xt(i,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:Xt(i,"supportsReturningQueryExtent",!1),supportsGeometryProperties:Xt(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:Xt(i,"supportsHavingClause",!1),supportsOrderBy:Xt(i,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:Xt(i,"supportsPagination",!1),supportsQuantization:Xt(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Xt(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:Xt(e,"supportsReturningQueryGeometry",!1),supportsResultType:Xt(i,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:Xt(i,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:Xt(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Xt(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:Xt(i,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:Xt(r,"allowOthersToQuery",!0),supportsHistoricMoment:Xt(n,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:a&&u.has("pbf"),supportsDisjointSpatialRelationship:Xt(i,"supportsDisjointSpatialRel",!1),supportsCacheHint:Xt(i,"supportsQueryWithCacheHint",!1)||b3(i,"query"),supportsDefaultSpatialReference:Xt(i,"supportsDefaultSR",!1),supportsCompactGeometry:l,supportsFullTextSearch:Xt(i,"supportsFullTextSearch",!1),maxRecordCountFactor:VE(e,"maxRecordCountFactor",void 0),maxRecordCount:VE(e,"maxRecordCount",void 0),standardMaxRecordCount:VE(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:VE(e,"tileMaxRecordCount",void 0)}}function rMe(e){const t=e.advancedQueryCapabilities,i=Xt(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Xt(t,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:b3(t,"queryRelated")}}function nMe(e){return{supportsCacheHint:b3(e.advancedQueryCapabilities,"queryTopFilter")}}function sMe(e){const t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:Xt(e,"allowGeometryUpdates",!0),supportsGlobalId:Xt(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Xt(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Xt(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Xt(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Xt(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Xt(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Xt(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Xt(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Xt(t,"allowOthersToUpdate",!0)}}const oMe=e=>{let t=class extends e{constructor(){super(...arguments),this.capabilities=null,this.copyright=null,this.dateFieldsTimeReference=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.isTable=!1,this.layerId=void 0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.preferredTimeReference=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.spatialReference=Et.WGS84,this.subtypeField=null,this.trackIdField=null,this.indexes=new(Pt.ofType(sh)),this.version=void 0}readCapabilitiesFromService(i,r){return wD(r,this.url)}get effectiveCapabilities(){const i=this.capabilities;if(!i)return null;const r=Le(i),{operations:n,editing:s}=r;return this.sourceJSON?.isMultiServicesView?(this.userHasUpdateItemPrivileges&&(n.supportsQuery=!0),r):this.userHasUpdateItemPrivileges?(n.supportsAdd=n.supportsDelete=n.supportsEditing=n.supportsQuery=n.supportsUpdate=s.supportsDeleteByOthers=s.supportsGeometryUpdate=s.supportsUpdateByOthers=!0,r):(this.userHasFullEditingPrivileges&&n.supportsEditing&&(n.supportsAdd=n.supportsDelete=n.supportsUpdate=s.supportsGeometryUpdate=!0),r)}readEditingInfo(i,r){const{editingInfo:n}=r;return n?{lastEditDate:n.lastEditDate!=null?new Date(n.lastEditDate):null}:null}readIsTableFromService(i,r){return r.type==="Table"}readMinScale(i,r){return r.effectiveMinScale||i||0}readMaxScale(i,r){return r.effectiveMaxScale||i||0}readGlobalIdFieldFromService(i,r){return pie(r)}readObjectIdFieldFromService(i,r){return fie(r)}readServiceDefinitionExpression(i,r){return r.definitionQuery||r.definitionExpression}set url(i){const r=R2e({layer:this,url:i,nonStandardUrlAllowed:!0,logger:et.getLogger(this.declaredClass)});this._set("url",r.url),r.layerId!=null&&this._set("layerId",r.layerId)}writeUrl(i,r,n,s){k2e(this,i,null,r,s)}readVersion(i,r){return zEe(r)}};return h([p({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],t.prototype,"capabilities",void 0),h([Ye("service","capabilities")],t.prototype,"readCapabilitiesFromService",null),h([p({readOnly:!0})],t.prototype,"effectiveCapabilities",null),h([p({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),h([p({type:fm})],t.prototype,"dateFieldsTimeReference",void 0),h([p({type:Boolean})],t.prototype,"datesInUnknownTimezone",void 0),h([p({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),h([p({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),h([p({readOnly:!0,type:CEe})],t.prototype,"editFieldsInfo",void 0),h([p({readOnly:!0})],t.prototype,"editingInfo",void 0),h([Ye("editingInfo")],t.prototype,"readEditingInfo",null),h([p((()=>{const i=Le(xSe),r=i.json.origins;return r["web-map"]={read:!1,write:!1},r["portal-item"]={read:!1,write:!1},i})())],t.prototype,"elevationInfo",void 0),h([p({type:mie,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],t.prototype,"floorInfo",void 0),h([p({type:Kt,json:{origins:{service:{read:{source:"extent"}}}}})],t.prototype,"fullExtent",void 0),h([p()],t.prototype,"gdbVersion",void 0),h([p({readOnly:!0,type:WEe,json:{read:{source:"geometryProperties"}}})],t.prototype,"geometryFieldsInfo",void 0),h([p({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:zP.read}}}})],t.prototype,"geometryType",void 0),h([p({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasM",void 0),h([p({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasZ",void 0),h([p({readOnly:!0,type:_4})],t.prototype,"heightModelInfo",void 0),h([p({type:Date})],t.prototype,"historicMoment",void 0),h([p({readOnly:!0})],t.prototype,"isTable",void 0),h([Ye("service","isTable",["type"])],t.prototype,"readIsTableFromService",null),h([p({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],t.prototype,"layerId",void 0),h([p(MSe)],t.prototype,"minScale",void 0),h([Ye("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),h([p(ISe)],t.prototype,"maxScale",void 0),h([Ye("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),h([p({type:String})],t.prototype,"globalIdField",void 0),h([Ye("service","globalIdField",["globalIdField","fields"])],t.prototype,"readGlobalIdFieldFromService",null),h([p({type:String})],t.prototype,"objectIdField",void 0),h([Ye("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),h([p({type:fm})],t.prototype,"preferredTimeReference",void 0),h([p({type:[JEe],readOnly:!0})],t.prototype,"relationships",void 0),h([p()],t.prototype,"sourceJSON",void 0),h([p({type:Boolean})],t.prototype,"returnM",void 0),h([p({type:Boolean})],t.prototype,"returnZ",void 0),h([p({readOnly:!0})],t.prototype,"serviceDefinitionExpression",void 0),h([Ye("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],t.prototype,"readServiceDefinitionExpression",null),h([p({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"serviceItemId",void 0),h([p({type:Et,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],t.prototype,"spatialReference",void 0),h([p({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],t.prototype,"subtypeField",void 0),h([p({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),h([p({readOnly:!0,json:{write:!1}})],t.prototype,"serverGens",void 0),h([p({type:Pt.ofType(sh),readOnly:!0})],t.prototype,"indexes",void 0),h([p(f3)],t.prototype,"url",null),h([it("url")],t.prototype,"writeUrl",null),h([p({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),h([Ye("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),t=h([ce("esri.layers.mixins.FeatureLayerBase")],t),t};let tv=class extends xr(Je){constructor(t){super(t),this.expression=null,this.title=null,this.returnType=null}};h([p({type:String,json:{write:!0}})],tv.prototype,"expression",void 0),h([p({type:String,json:{write:!0}})],tv.prototype,"title",void 0),h([p({type:String,json:{write:!0}})],tv.prototype,"returnType",void 0),tv=h([ce("esri.layers.support.ExpressionInfo")],tv);const _D=tv;var qP;let md=qP=class extends Je{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new qP({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:Le(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};h([p({type:Boolean,json:{write:!0}})],md.prototype,"isAutoGenerated",void 0),h([p({type:String,json:{write:!0}})],md.prototype,"name",void 0),h([p({type:String,json:{write:!0}})],md.prototype,"alias",void 0),h([p({type:String,json:{write:!0}})],md.prototype,"onStatisticField",void 0),h([p({type:_D,json:{write:!0}})],md.prototype,"onStatisticExpression",void 0),h([p({type:String,json:{write:!0}})],md.prototype,"statisticType",void 0),md=qP=h([ce("esri.layers.support.AggregateField")],md);const x0=md;let Kf=class extends Je{constructor(){super(...arguments),this.type=null}};h([p({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],Kf.prototype,"type",void 0),Kf=h([ce("esri.layers.support.FeatureReduction")],Kf);const xD="__begin__",SD="__end__",aMe=new RegExp(xD,"ig"),lMe=new RegExp(SD,"ig"),kB=new RegExp("^"+xD,"i"),LB=new RegExp(SD+"$","i"),EA='"',uMe=EA+" + ",cMe=" + "+EA;function hMe(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}function dMe(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function ED(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=hMe(e.labelExpression),t.type="conventional"),t}function pMe(e){const t=ED(e);if(!t)return null;switch(t.type){case"conventional":return HP(t.expression);case"arcade":return t.expression}return null}function fMe(e){const t=ED(e);if(!t)return null;switch(t.type){case"conventional":return yMe(t.expression);case"arcade":return yie(t.expression)}return null}function HP(e){let t;return e?(t=dc(e,i=>xD+'$feature["'+i+'"]'+SD),t=kB.test(t)?t.replace(kB,""):EA+t,t=LB.test(t)?t.replace(LB,""):t+EA,t=t.replace(aMe,uMe).replace(lMe,cMe)):t='""',t}const mMe=/^\s*\{([^}]+)\}\s*$/i;function yMe(e){const t=e?.match(mMe);return t&&t[1].trim()||null}const gMe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,vMe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,bMe=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function yie(e){if(!e)return null;let t=gMe.exec(e)||vMe.exec(e);return t?t[1]||t[3]:(t=bMe.exec(e),t?t[2]:null)}var WP;let uf=WP=class extends Je{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?HP(t.value):e}writeExpression(e,t,i){this.value!=null&&(e=HP(this.value)),e!=null&&(t[i]=e)}clone(){return new WP({expression:this.expression,title:this.title,value:this.value})}};h([p({type:String,json:{write:{writerEnsuresNonNull:!0}}})],uf.prototype,"expression",void 0),h([Ye("expression",["expression","value"])],uf.prototype,"readExpression",null),h([it("expression")],uf.prototype,"writeExpression",null),h([p({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],uf.prototype,"title",void 0),h([p({json:{read:!1,write:!1}})],uf.prototype,"value",void 0),uf=WP=h([ce("esri.layers.support.LabelExpressionInfo")],uf);const gie=uf,vie=[252,146,31,255],wMe={type:"esriSMS",style:"esriSMSCircle",size:6,color:vie,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},_Me={type:"esriSLS",style:"esriSLSSolid",width:.75,color:vie},xMe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},SMe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},EMe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},MMe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},IMe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},vat=pu.fromJSON(wMe),bat=Ra.fromJSON(_Me),wat=fp.fromJSON(xMe),TMe=bw.fromJSON(SMe),_at=pu.fromJSON(EMe),xat=Ra.fromJSON(MMe),Sat=fp.fromJSON(IMe);var JP;const BE=new ti({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function zE(e,t,i){return{enabled:!qK(i?.layer)}}function bie(e){return!e||e.origin!=="service"&&e.layer?.type!=="map-image"}function AMe(e){return e?.type==="map-image"}function wie(e){return!!AMe(e)&&!!e.capabilities?.exportMap?.supportsArcadeExpressionForLabeling}function CMe(e){return bie(e)||wie(e?.layer)}let ln=JP=class extends Je{static evaluateWhere(e,t){const i=(r,n,s)=>{switch(n){case"=":return r==s;case"<>":return r!=s;case">":return r>s;case">=":return r>=s;case"<":return r<s;case"<=":return r<=s}return!1};try{if(e==null)return!0;const r=e.split(" ");if(r.length===3)return i(t[r[0]],r[1],r[2]);if(r.length===7){const n=i(t[r[0]],r[1],r[2]),s=r[3],o=i(t[r[4]],r[5],r[6]);switch(s){case"AND":return n&&o;case"OR":return n||o}}return!1}catch{console.log("Error.: can't parse = "+e)}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=TMe,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,t){const i=t.labelExpressionInfo;if(!i||!i.value&&!i.expression)return e}writeLabelExpression(e,t,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=dMe(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const r=yie(this.labelExpressionInfo.expression);r&&(e="["+r+"]")}}e!=null&&(t[i]=e)}writeLabelExpressionInfo(e,t,i,r){if(e==null&&this.labelExpression!=null&&bie(r))e=new gie({expression:this.getLabelExpressionArcade()});else if(!e)return;const n=e.toJSON(r);n.expression&&(t[i]=n)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return ED(this)}getLabelExpressionArcade(){return pMe(this)}getLabelExpressionSingleField(){return fMe(this)}hash(){return JSON.stringify(this)}clone(){return new JP({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:Le(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:Le(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};h([p({type:String,json:{write:!0}})],ln.prototype,"name",void 0),h([p({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:zE}}}}})],ln.prototype,"allowOverrun",void 0),h([p({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:zE}}}}})],ln.prototype,"deconflictionStrategy",void 0),h([p({type:String,json:{write:{overridePolicy(e,t,i){return this.labelExpressionInfo&&i?.origin==="service"&&wie(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],ln.prototype,"labelExpression",void 0),h([Ye("labelExpression")],ln.prototype,"readLabelExpression",null),h([it("labelExpression")],ln.prototype,"writeLabelExpression",null),h([p({type:gie,json:{write:{overridePolicy:(e,t,i)=>CMe(i)?{allowNull:!0}:{enabled:!1}}}})],ln.prototype,"labelExpressionInfo",void 0),h([it("labelExpressionInfo")],ln.prototype,"writeLabelExpressionInfo",null),h([p({type:BE.apiValues,json:{type:BE.jsonValues,read:BE.read,write:BE.write}})],ln.prototype,"labelPlacement",void 0),h([p({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],ln.prototype,"labelPosition",void 0),h([p({type:Number})],ln.prototype,"maxScale",void 0),h([it("maxScale")],ln.prototype,"writeMaxScale",null),h([p({type:Number})],ln.prototype,"minScale",void 0),h([it("minScale")],ln.prototype,"writeMinScale",null),h([p({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:zE}}}}})],ln.prototype,"repeatLabel",void 0),h([p({type:Number,cast:Oi,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:zE}}}}})],ln.prototype,"repeatLabelDistance",void 0),h([p({types:lwe,json:{origins:{"web-scene":{types:uwe,write:hV,default:null}},write:hV,default:null}})],ln.prototype,"symbol",void 0),h([p({type:Boolean,json:{write:!0}})],ln.prototype,"useCodedValues",void 0),h([p({type:String,json:{write:!0}})],ln.prototype,"where",void 0),ln=JP=h([ce("esri.layers.support.LabelClass")],ln);const w3=ln;var ZP;const U$=Cm({types:c4}),$Me="esri.layers.support.FeatureReductionBinning";let Ro=ZP=class extends Kf{constructor(e){super(e),this.type="binning",this.binType="geohash",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}writeFields(e,t,i){const r=e.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());_o(i,r,t)}readRenderer(e,t,i){const r=t.drawingInfo?.renderer;return r?rS(r,t,i)??void 0:t.defaultSymbol?t.types&&t.types.length?new Pm({defaultSymbol:U$(t.defaultSymbol,t,i),field:t.typeIdField,uniqueValueInfos:t.types.map(n=>({id:n.id,symbol:U$(n.symbol,n,i)}))}):new _0({symbol:U$(t.defaultSymbol,t,i)}):null}clone(){return new ZP({fields:Le(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:Le(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:Le(this.popupTemplate),renderer:Le(this.renderer)})}};h([Ft({binning:"binning"})],Ro.prototype,"type",void 0),h([Ft({geohash:"geohash"})],Ro.prototype,"binType",void 0),h([p({type:Number,range:{min:1,max:9},json:{write:!0}})],Ro.prototype,"fixedBinLevel",void 0),h([p({type:[w3],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Ro.prototype,"labelingInfo",void 0),h([p(cD)],Ro.prototype,"labelsVisible",void 0),h([p({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Ro.prototype,"maxScale",void 0),h([p(p3)],Ro.prototype,"popupEnabled",void 0),h([p({type:Rm,json:{name:"popupInfo",write:!0}})],Ro.prototype,"popupTemplate",void 0),h([p({type:[x0],json:{write:!0}})],Ro.prototype,"fields",void 0),h([it("fields")],Ro.prototype,"writeFields",null),h([p({types:c3,json:{write:{target:"drawingInfo.renderer"}}})],Ro.prototype,"renderer",void 0),h([Ye("renderer",["drawingInfo.renderer"])],Ro.prototype,"readRenderer",null),Ro=ZP=h([ce($Me)],Ro);const _ie=Ro;var YP;const V$=Cm({types:c4}),OMe="esri.layers.support.FeatureReductionCluster";function PB(e){return e.type==="simple"&&!e.visualVariables?.length}let Nn=YP=class extends Je{constructor(e){super(e),this.type="cluster",this.clusterRadius=Oi("80px"),this.clusterMinSize=Oi("12px"),this.clusterMaxSize=Oi("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}readRenderer(e,t,i){const r=t.drawingInfo?.renderer;return r?.authoringInfo?.isAutoGenerated?null:r?PB(r)?null:rS(r,t,i)??void 0:t.defaultSymbol?t.types&&t.types.length?new Pm({defaultSymbol:V$(t.defaultSymbol,t,i),field:t.typeIdField,uniqueValueInfos:t.types.map(n=>({id:n.id,symbol:V$(n.symbol,n,i)}))}):new _0({symbol:V$(t.defaultSymbol,t,i)}):null}readSymbol(e,t,i){const r=t.drawingInfo?.renderer;return r?.authoringInfo?.isAutoGenerated?null:r&&PB(r)?rS(r,t,i)?.symbol:null}writeSymbol(e,t,i,r){const n=this.renderer?.authoringInfo?.isAutoGenerated;if(!this.renderer||n){const s=new _0({symbol:e});t.drawingInfo={renderer:s.write({},r)}}}writeFields(e,t,i){const r=e.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());_o(i,r,t)}readFields(e,t,i){return e.filter(r=>!r.isAutoGenerated).map(r=>x0.fromJSON(r))}clone(){return new YP({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:Le(this.labelingInfo),labelsVisible:this.labelsVisible,fields:Le(this.fields),maxScale:this.maxScale,renderer:Le(this.renderer),symbol:Le(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:Le(this.popupTemplate)})}};h([p({type:["cluster"],readOnly:!0,json:{write:!0}})],Nn.prototype,"type",void 0),h([p({type:Number,cast:e=>e==="auto"?e:Oi(e),json:{write:!0}})],Nn.prototype,"clusterRadius",void 0),h([p({type:Number,cast:Oi,json:{write:!0}})],Nn.prototype,"clusterMinSize",void 0),h([p({type:Number,cast:Oi,json:{write:!0}})],Nn.prototype,"clusterMaxSize",void 0),h([p({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Nn.prototype,"maxScale",void 0),h([p(p3)],Nn.prototype,"popupEnabled",void 0),h([p({type:Rm,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Nn.prototype,"popupTemplate",void 0),h([p({types:c3,json:{write:{target:"drawingInfo.renderer"}}})],Nn.prototype,"renderer",void 0),h([Ye("renderer",["drawingInfo.renderer"])],Nn.prototype,"readRenderer",null),h([p({types:owe})],Nn.prototype,"symbol",void 0),h([Ye("symbol",["drawingInfo.renderer"])],Nn.prototype,"readSymbol",null),h([it("symbol")],Nn.prototype,"writeSymbol",null),h([p({type:[w3],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Nn.prototype,"labelingInfo",void 0),h([p(cD)],Nn.prototype,"labelsVisible",void 0),h([p({type:[x0],json:{write:!0}})],Nn.prototype,"fields",void 0),h([it("fields")],Nn.prototype,"writeFields",null),h([Ye("fields")],Nn.prototype,"readFields",null),Nn=YP=h([ce(OMe)],Nn);const xie=Nn;var KP;let JI=KP=class extends Kf{constructor(e){super(e),this.type="selection"}clone(){return new KP}};h([p({type:["selection"]})],JI.prototype,"type",void 0),JI=KP=h([ce("esri.layers.support.FeatureReductionSelection")],JI);const NB=JI,FB={key:"type",base:Kf,typeMap:{cluster:xie,binning:_ie}},RMe={types:{key:"type",base:Kf,typeMap:{selection:NB,cluster:xie,binning:_ie}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:FB},"portal-item":{types:FB},"web-scene":{types:{key:"type",base:Kf,typeMap:{selection:NB}}}}}},g1={Base64:0,Hex:1,String:2,Raw:3},tb=8,Sie=(1<<tb)-1;function Bf(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function kMe(e){const t=[];for(let i=0,r=e.length*tb;i<r;i+=tb)t[i>>5]|=(e.charCodeAt(i/tb)&Sie)<<i%32;return t}function LMe(e){const t=[];for(let i=0,r=32*e.length;i<r;i+=tb)t.push(String.fromCharCode(e[i>>5]>>>i%32&Sie));return t.join("")}function PMe(e){const t="0123456789abcdef",i=[];for(let r=0,n=4*e.length;r<n;r++)i.push(t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15));return i.join("")}function NMe(e){const t="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let n=0,s=4*e.length;n<s;n+=3){const o=(e[n>>2]>>n%4*8&255)<<16|(e[n+1>>2]>>(n+1)%4*8&255)<<8|e[n+2>>2]>>(n+2)%4*8&255;for(let a=0;a<4;a++)8*n+6*a>32*e.length?r.push(t):r.push(i.charAt(o>>6*(3-a)&63))}return r.join("")}function FMe(e,t){return e<<t|e>>>32-t}function I4(e,t,i,r,n,s){return Bf(FMe(Bf(Bf(t,e),Bf(r,s)),n),i)}function Ys(e,t,i,r,n,s,o){return I4(t&i|~t&r,e,t,n,s,o)}function Ks(e,t,i,r,n,s,o){return I4(t&r|i&~r,e,t,n,s,o)}function Qs(e,t,i,r,n,s,o){return I4(t^i^r,e,t,n,s,o)}function Xs(e,t,i,r,n,s,o){return I4(i^(t|~r),e,t,n,s,o)}function DMe(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let i=1732584193,r=-271733879,n=-1732584194,s=271733878;for(let o=0;o<e.length;o+=16){const a=i,l=r,u=n,c=s;i=Ys(i,r,n,s,e[o+0],7,-680876936),s=Ys(s,i,r,n,e[o+1],12,-389564586),n=Ys(n,s,i,r,e[o+2],17,606105819),r=Ys(r,n,s,i,e[o+3],22,-1044525330),i=Ys(i,r,n,s,e[o+4],7,-176418897),s=Ys(s,i,r,n,e[o+5],12,1200080426),n=Ys(n,s,i,r,e[o+6],17,-1473231341),r=Ys(r,n,s,i,e[o+7],22,-45705983),i=Ys(i,r,n,s,e[o+8],7,1770035416),s=Ys(s,i,r,n,e[o+9],12,-1958414417),n=Ys(n,s,i,r,e[o+10],17,-42063),r=Ys(r,n,s,i,e[o+11],22,-1990404162),i=Ys(i,r,n,s,e[o+12],7,1804603682),s=Ys(s,i,r,n,e[o+13],12,-40341101),n=Ys(n,s,i,r,e[o+14],17,-1502002290),r=Ys(r,n,s,i,e[o+15],22,1236535329),i=Ks(i,r,n,s,e[o+1],5,-165796510),s=Ks(s,i,r,n,e[o+6],9,-1069501632),n=Ks(n,s,i,r,e[o+11],14,643717713),r=Ks(r,n,s,i,e[o+0],20,-373897302),i=Ks(i,r,n,s,e[o+5],5,-701558691),s=Ks(s,i,r,n,e[o+10],9,38016083),n=Ks(n,s,i,r,e[o+15],14,-660478335),r=Ks(r,n,s,i,e[o+4],20,-405537848),i=Ks(i,r,n,s,e[o+9],5,568446438),s=Ks(s,i,r,n,e[o+14],9,-1019803690),n=Ks(n,s,i,r,e[o+3],14,-187363961),r=Ks(r,n,s,i,e[o+8],20,1163531501),i=Ks(i,r,n,s,e[o+13],5,-1444681467),s=Ks(s,i,r,n,e[o+2],9,-51403784),n=Ks(n,s,i,r,e[o+7],14,1735328473),r=Ks(r,n,s,i,e[o+12],20,-1926607734),i=Qs(i,r,n,s,e[o+5],4,-378558),s=Qs(s,i,r,n,e[o+8],11,-2022574463),n=Qs(n,s,i,r,e[o+11],16,1839030562),r=Qs(r,n,s,i,e[o+14],23,-35309556),i=Qs(i,r,n,s,e[o+1],4,-1530992060),s=Qs(s,i,r,n,e[o+4],11,1272893353),n=Qs(n,s,i,r,e[o+7],16,-155497632),r=Qs(r,n,s,i,e[o+10],23,-1094730640),i=Qs(i,r,n,s,e[o+13],4,681279174),s=Qs(s,i,r,n,e[o+0],11,-358537222),n=Qs(n,s,i,r,e[o+3],16,-722521979),r=Qs(r,n,s,i,e[o+6],23,76029189),i=Qs(i,r,n,s,e[o+9],4,-640364487),s=Qs(s,i,r,n,e[o+12],11,-421815835),n=Qs(n,s,i,r,e[o+15],16,530742520),r=Qs(r,n,s,i,e[o+2],23,-995338651),i=Xs(i,r,n,s,e[o+0],6,-198630844),s=Xs(s,i,r,n,e[o+7],10,1126891415),n=Xs(n,s,i,r,e[o+14],15,-1416354905),r=Xs(r,n,s,i,e[o+5],21,-57434055),i=Xs(i,r,n,s,e[o+12],6,1700485571),s=Xs(s,i,r,n,e[o+3],10,-1894986606),n=Xs(n,s,i,r,e[o+10],15,-1051523),r=Xs(r,n,s,i,e[o+1],21,-2054922799),i=Xs(i,r,n,s,e[o+8],6,1873313359),s=Xs(s,i,r,n,e[o+15],10,-30611744),n=Xs(n,s,i,r,e[o+6],15,-1560198380),r=Xs(r,n,s,i,e[o+13],21,1309151649),i=Xs(i,r,n,s,e[o+4],6,-145523070),s=Xs(s,i,r,n,e[o+11],10,-1120210379),n=Xs(n,s,i,r,e[o+2],15,718787259),r=Xs(r,n,s,i,e[o+9],21,-343485551),i=Bf(i,a),r=Bf(r,l),n=Bf(n,u),s=Bf(s,c)}return[i,r,n,s]}function Eie(e,t=g1.Hex){const i=t||g1.Base64,r=DMe(kMe(e),e.length*tb);switch(i){case g1.Raw:return r;case g1.Hex:return PMe(r);case g1.String:return LMe(r);case g1.Base64:return NMe(r)}}var QP;let S2=QP=class extends B0{writeLevels(e,t,i){for(const r in e){const n=this.levels[r];return void(t.stops=n)}}clone(){return new QP({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:Vf(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:Vf(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone(),levels:Le(this.levels)})}};h([p()],S2.prototype,"levels",void 0),h([it("levels")],S2.prototype,"writeLevels",null),S2=QP=h([ce("esri.views.2d.engine.LevelDependentSizeVariable")],S2);const jMe=et.getLogger("esri.views.2d.layers.support.clusterUtils");Ze.add("esri-cluster-arcade-enabled",!0);const UMe=Ze("esri-cluster-arcade-enabled"),VMe=(e,t,i,r,n)=>{const s=t.clone();if(!zMe(s))return s;if(s.authoringInfo||(s.authoringInfo=new l3),s.authoringInfo.isAutoGenerated=!0,"visualVariables"in s){const o=(s.visualVariables||[]).filter(l=>l.valueExpression!=="$view.scale"),a=Mie(o);o.forEach(l=>{l.type==="rotation"?l.field?l.field=ry(e,l.field,"avg_angle","number"):l.valueExpression&&(l.field=p_(e,l.valueExpression,"avg_angle","number"),l.valueExpression=null):l.normalizationField?(l.field=ry(e,l.field,"avg_norm","number",l.normalizationField),l.normalizationField=null):l.field?l.field=ry(e,l.field,"avg","number"):l.valueExpression&&(l.field=p_(e,l.valueExpression,"avg","number"),l.valueExpression=null)}),Re(a)&&!BMe(o)&&n&&(o.push(Iie(i,r)),s.dynamicClusterSize=!0),s.visualVariables=o}switch(s.type){case"simple":break;case"pie-chart":for(const o of s.attributes)o.field?o.field=ry(e,o.field,"sum","number"):o.valueExpression&&(o.field=p_(e,o.valueExpression,"sum","number"),o.valueExpression=null);break;case"unique-value":s.field?s.field=ry(e,s.field,"mode","string"):s.valueExpression&&(s.field=p_(e,s.valueExpression,"mode","string"),s.valueExpression=null);break;case"class-breaks":s.normalizationField?(s.field=ry(e,s.field,"avg_norm","number",s.normalizationField),s.normalizationField=null):s.field?s.field=ry(e,s.field,"avg","number"):s.valueExpression&&(s.field=p_(e,s.valueExpression,"avg","number"),s.valueExpression=null)}return s},Mie=e=>{for(const t of e)if(t.type==="size")return t;return null};function Eat(e,t,i){const r=e.clone();let n=!1;if("visualVariables"in r){const s=(r.visualVariables||[]).filter(a=>a.valueExpression!=="$view.scale"),o=Mie(s);Re(o)&&(r.visualVariables||(r.visualVariables=[]),r.visualVariables.push(Iie(t,i)),r.dynamicClusterSize=!0,n=!0)}return{renderer:r,didInject:n}}const BMe=e=>{for(const t of e)if(t.field==="cluster_count")return!0;return!1},Iie=(e,t)=>{const i=[new G1({value:0,size:0}),new G1({value:1})];if(Re(t))return new B0({field:"cluster_count",stops:[...i,new G1({value:2,size:0})]});const r=Object.keys(t).reduce((n,s)=>({...n,[s]:[...i,new G1({value:Math.max(2,t[s].minValue),size:e.clusterMinSize}),new G1({value:Math.max(3,t[s].maxValue),size:e.clusterMaxSize})]}),{});return new S2({field:"cluster_count",levels:r})},zMe=e=>{const t=i=>jMe.error(new Ce("Unsupported-renderer",i,{renderer:e}));switch(e.type){case"unique-value":if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(e.normalizationField){const i=e.normalizationType;if(i!=="field")return t(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return t(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!UMe){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function GMe(e,t,i){switch(e){case"sum":return`cluster_sum_${t}`;case"avg":case"avg_angle":return`cluster_avg_${t}`;case"mode":return`cluster_type_${t}`;case"avg_norm":{const r=i,n="field",s=t.toLowerCase()+",norm:"+n+","+r.toLowerCase();return"cluster_avg_"+Eie(s)}}}function p_(e,t,i,r){const n=Eie(t),s=i==="mode"?`cluster_type_${n}`:i==="sum"?`cluster_sum_${n}`:`cluster_avg_${n}`;return e.some(o=>o.name===s)||e.push(new x0({name:s,isAutoGenerated:!0,onStatisticExpression:new _D({expression:t,returnType:r}),statisticType:i})),s}function ry(e,t,i,r,n){if(t==="cluster_count"||e.some(o=>o.name===t))return t;const s=GMe(i,t,n);return e.some(o=>o.name===s)||(i==="avg_norm"?e.push(new x0({name:s,isAutoGenerated:!0,onStatisticExpression:new _D({expression:`$feature.${t} / $feature.${n}`,returnType:r}),statisticType:"avg"})):e.push(new x0({name:s,isAutoGenerated:!0,onStatisticField:t,statisticType:i}))),s}const qMe=e=>{let t=class extends e{constructor(...i){super(...i),this.own(this.watch("renderer",()=>{if(this.featureReduction){const r=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",r)}},!0))}set featureReduction(i){const r=this._normalizeFeatureReduction(i);this._set("featureReduction",r)}set renderer(i){}_normalizeFeatureReduction(i){if(i?.type!=="cluster")return i;const r=i.clone(),n=[new x0({name:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],s=(r.fields??[]).filter(a=>!a.isAutoGenerated);if(i.renderer&&!i.renderer.authoringInfo?.isAutoGenerated)return r.fields=[...n,...s],r;if(i.symbol)return r.fields=[...n,...s],r.renderer=null,r;if(!this.renderer)return i;const o=VMe(n,this.renderer,i,null,!1);return r.fields=[...n,...s],r.renderer=o,r}};return h([p(RMe)],t.prototype,"featureReduction",null),t=h([ce("esri.layers.mixins.FeatureReductionLayer")],t),t},HMe={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0,OrientedImageryLayer:!0}},Cw=e=>{let t=class extends e{constructor(){super(...arguments),this.title=null}writeListMode(i,r,n,s){(s&&s.layerContainerType==="ground"||i&&nK(this,n,{},s))&&(r[n]=i)}writeOperationalLayerType(i,r,n,s){!i||s&&s.layerContainerType==="tables"||(r.layerType=i)}writeTitle(i,r){r.title=i??"Layer"}read(i,r){r&&(r.layer=this),jme(this,i,n=>super.read(i,n),r)}write(i,r){if(r?.origin){const o=`${r.origin}/${r.layerContainerType||"operational-layers"}`,a=HMe[o];let l=a&&a[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&o==="web-scene/operational-layers"&&(l=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&o==="web-map/operational-layers"&&(l=!1),!l)return r.messages?.push(new Ce("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${o}'`,{layer:this})),null}const n=super.write(i,{...r,layer:this}),s=!!r&&!!r.messages&&!!r.messages.filter(o=>o instanceof Ce&&o.name==="web-document-write:property-required").length;return K5(n?.url)?(r?.messages?.push(new Ce("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&s?null:n}beforeSave(){}};return h([p({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),h([p(pte)],t.prototype,"listMode",void 0),h([it("listMode")],t.prototype,"writeListMode",null),h([p({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),h([it("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),h([p(vA)],t.prototype,"opacity",void 0),h([p({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),h([it("title"),it(["web-scene"],"title")],t.prototype,"writeTitle",null),h([p({type:Boolean,json:{name:"visibility"}})],t.prototype,"visible",void 0),t=h([ce("esri.layers.mixins.OperationalLayer")],t),t};var XP;const B$=new ti({asc:"ascending",desc:"descending"});let iv=XP=class extends Je{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new XP({field:this.field,valueExpression:this.valueExpression,order:this.order})}};h([p({type:String,json:{write:!0}})],iv.prototype,"field",void 0),h([p({type:String,json:{write:!0}})],iv.prototype,"valueExpression",void 0),h([p({type:B$.apiValues,json:{read:B$.read,write:B$.write}})],iv.prototype,"order",void 0),iv=XP=h([ce("esri.layers.support.OrderByInfo")],iv);const Tie=iv;function WMe(e,t,i){if(!e)return null;const r=e.find(s=>!!s.field);if(!r)return null;const n=new Tie;return n.read(r,i),[n]}function JMe(e,t,i,r){const n=e.find(s=>!!s.field);n&&_o(i,[n.toJSON()],t)}const ZMe=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return h([p({type:[Tie],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:WMe},write:{target:"layerDefinition.orderBy",writer:JMe}}})],t.prototype,"orderBy",void 0),t=h([ce("esri.layers.mixins.OrderedLayer")],t),t};let z$,Ue=null;function Aie(){return!!Ue}function YMe(){return!!Ze("esri-wasm")}function Cie(){return z$||(z$=De(()=>import("./pe-wasm-67793c2f.js"),[],import.meta.url).then(e=>e.p).then(({default:e})=>e({locateFile:t=>Di(`esri/geometry/support/${t}`)})).then(e=>{Oie(e)}),z$)}var e8,Dr,t8;(function(e){function t(s,o,a){Ue.ensureCache.prepare();const l=mg(a),u=a===l,c=Ue.ensureFloat64(l),d=Ue._pe_geog_to_proj(Ue.getPointer(s),o,c);return d&&Pf(a,o,c,u),d}function i(s,o,a,l){switch(l){case Dr.PE_TRANSFORM_P_TO_G:return r(s,o,a);case Dr.PE_TRANSFORM_G_TO_P:return t(s,o,a)}return 0}function r(s,o,a){return n(s,o,a,0)}function n(s,o,a,l){Ue.ensureCache.prepare();const u=mg(a),c=a===u,d=Ue.ensureFloat64(u),f=Ue._pe_proj_to_geog_center(Ue.getPointer(s),o,d,l);return f&&Pf(a,o,d,c),f}e.geogToProj=t,e.projGeog=i,e.projToGeog=r,e.projToGeogCenter=n})(e8||(e8={})),function(e){function t(){e.PE_BUFFER_MAX=Ue.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=Ue.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=Ue.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=Ue.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=Ue.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=Ue.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=Ue.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=Ue.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=Ue.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=Ue.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=Ue.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=Ue.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=Ue.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=Ue.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=Ue.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=Ue.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=Ue.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=Ue.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=Ue.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=Ue.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=Ue.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=Ue.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=Ue.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=Ue.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=Ue.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=Ue.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=Ue.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=Ue.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=Ue.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=Ue.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(Dr||(Dr={})),function(e){const t={},i={},r=m=>{if(m){const g=m.getType();switch(g){case Dr.PE_TYPE_GEOGCS:m=Ue.castObject(m,Ue.PeGeogcs);break;case Dr.PE_TYPE_PROJCS:m=Ue.castObject(m,Ue.PeProjcs);break;case Dr.PE_TYPE_GEOGTRAN:m=Ue.castObject(m,Ue.PeGeogtran);break;default:g&Dr.PE_TYPE_UNIT&&(m=Ue.castObject(m,Ue.PeUnit))}}return m};function n(){Ue.PeFactory.prototype.initialize(null)}function s(m){return o(Dr.PE_TYPE_COORDSYS,m)}function o(m,g){let v=null,b=t[m];if(b||(b={},t[m]=b),b.hasOwnProperty(String(g)))v=b[g];else{const x=Ue.PeFactory.prototype.factoryByType(m,g);Ue.compare(x,Ue.NULL)||(v=x,b[g]=v)}return v=r(v),v}function a(m,g){let v=null,b=i[m];if(b||(b={},i[m]=b),b.hasOwnProperty(g))v=b[g];else{const x=Ue.PeFactory.prototype.fromString(m,g);Ue.compare(x,Ue.NULL)||(v=x,b[g]=v)}return v=r(v),v}function l(m){return o(Dr.PE_TYPE_GEOGCS,m)}function u(m){return o(Dr.PE_TYPE_GEOGTRAN,m)}function c(m){return Ue.PeFactory.prototype.getCode(m)}function d(m){return o(Dr.PE_TYPE_PROJCS,m)}function f(m){return o(Dr.PE_TYPE_UNIT,m)}e.initialize=n,e.coordsys=s,e.factoryByType=o,e.fromString=a,e.geogcs=l,e.geogtran=u,e.getCode=c,e.projcs=d,e.unit=f}(t8||(t8={}));let $ie=null;var MA,i8,r8,n8,IA,s8,TA,AA,o8;function Oie(e){function t(s,o,a){s[o]=a(s[o])}Ue=e,Dr.init(),MA.init(),IA.init(),TA.init(),AA.init(),$ie=class extends Ue.PeGCSExtent{destroy(){Ue.destroy(this)}};const i=[Ue.PeDatum,Ue.PeGeogcs,Ue.PeGeogtran,Ue.PeObject,Ue.PeParameter,Ue.PePrimem,Ue.PeProjcs,Ue.PeSpheroid,Ue.PeUnit];for(const s of i)t(s.prototype,"getName",o=>function(){return o.call(this,new Array(Dr.PE_NAME_MAX))});for(const s of[Ue.PeGeogtran,Ue.PeProjcs])t(s.prototype,"getParameters",o=>function(){const a=new Array(Dr.PE_PARM_MAX);let l=o.call(this);for(let u=0;u<a.length;u++){const c=Ue.getValue(l,"*");a[u]=c?Ue.wrapPointer(c,Ue.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a});t(Ue.PeHorizon.prototype,"getCoord",s=>function(){const o=this.getSize();if(!o)return null;const a=[];return Pf(a,o,s.call(this)),a}),t(Ue.PeGTlistExtendedEntry.prototype,"getEntries",s=>{const o=Ue._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=s.call(this);if(!Ue.compare(l,Ue.NULL)){a=[l];const u=this.getSteps();if(u>1){const c=Ue.getPointer(l);for(let d=1;d<u;d++)a.push(Ue.wrapPointer(c+o*d,Ue.PeGTlistExtendedGTs))}}return a}});const r=Ue._pe_getPeHorizonSize(),n=s=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(s))return o.get(s);let a=null;const l=s.call(this);if(!Ue.compare(l,Ue.NULL)){a=[l];const u=l.getNump();if(u>1){const c=Ue.getPointer(l);for(let d=1;d<u;d++)a.push(Ue.wrapPointer(c+r*d,Ue.PeHorizon))}}return o.set(s,a),a};t(Ue.PeProjcs.prototype,"horizonGcsGenerate",n),t(Ue.PeProjcs.prototype,"horizonPcsGenerate",n),Ue.PeObject.prototype.toString=function(s=Dr.PE_STR_OPTS_NONE){Ue.ensureCache.prepare();const o=Ue.getPointer(this),a=Ue.ensureInt8(new Array(Dr.PE_BUFFER_MAX));return Ue.UTF8ToString(Ue._pe_object_to_string_ext(o,s,a))}}function Hh(e){if(!e)return;const t=Ue.getClass(e);if(!t)return;const i=Ue.getCache(t);if(!i)return;const r=Ue.getPointer(e);r&&delete i[r]}function GE(e,t){const i=[],r=new Array(t);for(let n=0;n<e;n++)i.push(Ue.ensureInt8(r));return i}function mg(e){let t;return Array.isArray(e[0])?(t=[],e.forEach(i=>{t.push(i[0],i[1])})):t=e,t}function Pf(e,t,i,r=!1){if(r)for(let n=0;n<2*t;n++)e[n]=Ue.getValue(i+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=e.length===0;for(let s=0;s<t;s++)n&&(e[s]=new Array(2)),e[s][0]=Ue.getValue(i,"double"),e[s][1]=Ue.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function i(){e.PE_GTLIST_OPTS_COMMON=Ue.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=Ue._pe_getPeGTlistExtendedEntrySize()}function r(n,s,o,a,l,u){let c=null;const d=new Ue.PeInteger(u);try{const f=Ue.PeGTlistExtended.prototype.getGTlist(n,s,o,a,l,d);if((u=d.val)&&(c=[f],u>1)){const m=Ue.getPointer(f);for(let g=1;g<u;g++)c.push(Ue.wrapPointer(m+t*g,Ue.PeGTlistExtendedEntry))}}finally{Ue.destroy(d)}return c}e.init=i,e.getGTlist=r})(MA||(MA={})),function(e){function t(i){if(i&&i.length){for(const r of i)Hh(r),r.getEntries().forEach(n=>{Hh(n);const s=n.getGeogtran();Hh(s),s.getParameters().forEach(Hh),[s.getGeogcs1(),s.getGeogcs2()].forEach(o=>{Hh(o);const a=o.getDatum();Hh(a),Hh(a.getSpheroid()),Hh(o.getPrimem()),Hh(o.getUnit())})});Ue.PeGTlistExtendedEntry.prototype.Delete(i[0])}}e.destroy=t}(i8||(i8={})),function(e){function t(i,r,n,s,o){Ue.ensureCache.prepare();const a=mg(n),l=n===a,u=Ue.ensureFloat64(a);let c=0;s&&(c=Ue.ensureFloat64(s));const d=Ue._pe_geog_to_geog(Ue.getPointer(i),r,u,c,o);return d&&Pf(n,r,u,l),d}e.geogToGeog=t}(r8||(r8={})),function(e){const t=(u,c,d,f,m,g)=>{let v,b;switch(Ue.ensureCache.prepare(),u){case"dd":v=Ue._pe_geog_to_dd,b=Dr.PE_DD_MAX;break;case"ddm":v=Ue._pe_geog_to_ddm,b=Dr.PE_DDM_MAX;break;case"dms":v=Ue._pe_geog_to_dms,b=Dr.PE_DMS_MAX}let x=0;c&&(x=Ue.getPointer(c));const S=mg(f),T=Ue.ensureFloat64(S),_=GE(d,b),M=v(x,d,T,m,Ue.ensureInt32(_));if(M)for(let I=0;I<d;I++)g[I]=Ue.UTF8ToString(_[I]);return M},i=(u,c,d,f,m)=>{let g;switch(Ue.ensureCache.prepare(),u){case"dd":g=Ue._pe_dd_to_geog;break;case"ddm":g=Ue._pe_ddm_to_geog;break;case"dms":g=Ue._pe_dms_to_geog}let v=0;c&&(v=Ue.getPointer(c));const b=f.map(_=>Ue.ensureString(_)),x=Ue.ensureInt32(b),S=Ue.ensureFloat64(new Array(2*d)),T=g(v,d,x,S);return T&&Pf(m,d,S),T};function r(u,c,d,f,m){return t("dms",u,c,d,f,m)}function n(u,c,d,f){return i("dms",u,c,d,f)}function s(u,c,d,f,m){return t("ddm",u,c,d,f,m)}function o(u,c,d,f){return i("ddm",u,c,d,f)}function a(u,c,d,f,m){return t("dd",u,c,d,f,m)}function l(u,c,d,f){return i("dd",u,c,d,f)}e.geogToDms=r,e.dmsToGeog=n,e.geogToDdm=s,e.ddmToGeog=o,e.geogToDd=a,e.ddToGeog=l}(n8||(n8={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=Ue.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=Ue.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=Ue.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=Ue.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=Ue.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(n,s,o,a,l,u,c){Ue.ensureCache.prepare();let d=0;n&&(d=Ue.getPointer(n));const f=mg(o),m=Ue.ensureFloat64(f),g=GE(s,Dr.PE_MGRS_MAX),v=Ue.ensureInt32(g),b=Ue._pe_geog_to_mgrs_extended(d,s,m,a,l,u,v);if(b)for(let x=0;x<s;x++)c[x]=Ue.UTF8ToString(g[x]);return b}function r(n,s,o,a,l){Ue.ensureCache.prepare();let u=0;n&&(u=Ue.getPointer(n));const c=o.map(g=>Ue.ensureString(g)),d=Ue.ensureInt32(c),f=Ue.ensureFloat64(new Array(2*s)),m=Ue._pe_mgrs_to_geog_extended(u,s,d,a,f);return m&&Pf(l,s,f),m}e.init=t,e.geogToMgrsExtended=i,e.mgrsToGeogExtended=r}(IA||(IA={})),function(e){function t(r,n,s,o,a,l,u){Ue.ensureCache.prepare();let c=0;r&&(c=Ue.getPointer(r));const d=mg(s),f=Ue.ensureFloat64(d),m=GE(n,Dr.PE_MGRS_MAX),g=Ue.ensureInt32(m),v=Ue._pe_geog_to_usng(c,n,f,o,a,l,g);if(v)for(let b=0;b<n;b++)u[b]=Ue.UTF8ToString(m[b]);return v}function i(r,n,s,o){Ue.ensureCache.prepare();let a=0;r&&(a=Ue.getPointer(r));const l=s.map(f=>Ue.ensureString(f)),u=Ue.ensureInt32(l),c=Ue.ensureFloat64(new Array(2*n)),d=Ue._pe_usng_to_geog(a,n,u,c);return d&&Pf(o,n,c),d}e.geogToUsng=t,e.usngToGeog=i}(s8||(s8={})),function(e){function t(){e.PE_UTM_OPTS_NONE=Ue.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=Ue.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=Ue.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(n,s,o,a,l){Ue.ensureCache.prepare();let u=0;n&&(u=Ue.getPointer(n));const c=mg(o),d=Ue.ensureFloat64(c),f=GE(s,Dr.PE_UTM_MAX),m=Ue.ensureInt32(f),g=Ue._pe_geog_to_utm(u,s,d,a,m);if(g)for(let v=0;v<s;v++)l[v]=Ue.UTF8ToString(f[v]);return g}function r(n,s,o,a,l){Ue.ensureCache.prepare();let u=0;n&&(u=Ue.getPointer(n));const c=o.map(g=>Ue.ensureString(g)),d=Ue.ensureInt32(c),f=Ue.ensureFloat64(new Array(2*s)),m=Ue._pe_utm_to_geog(u,s,d,a,f);return m&&Pf(l,s,f),m}e.init=t,e.geogToUtm=i,e.utmToGeog=r}(TA||(TA={})),function(e){const t=new Map;function i(){e.PE_PCSINFO_OPTION_NONE=Ue.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=Ue.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=Ue.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=Ue.PePCSInfo.prototype.PE_POLE_POINT}function r(n,s=e.PE_PCSINFO_OPTION_DOMAIN){let o=null,a=null;return t.has(n)&&(a=t.get(n),a[s]&&(o=a[s])),o||(o=Ue.PePCSInfo.prototype.generate(n,s),a||(a=[],t.set(n,a)),a[s]=o),o}e.init=i,e.generate=r}(AA||(AA={})),function(e){function t(){return Ue.PeVersion.prototype.version_string()}e.versionString=t}(o8||(o8={}));const KMe=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return e8},get PeDefs(){return Dr},get PeFactory(){return t8},get PeGCSExtent(){return $ie},get PeGTTransformations(){return r8},get PeGTlistExtended(){return MA},get PeGTlistExtendedEntry(){return i8},get PeNotationDms(){return n8},get PeNotationMgrs(){return IA},get PeNotationUsng(){return s8},get PeNotationUtm(){return TA},get PePCSInfo(){return AA},get PeVersion(){return o8},_init:Oie,get _pe(){return Ue},isLoaded:Aie,isSupported:YMe,load:Cie},Symbol.toStringTag,{value:"Module"})),ny=Math.PI/180,QMe=/SPHEROID\[([^\]]+)]/i,Lp=_r.radius,Tu=_r.eccentricitySquared,XMe={a1:Lp*Tu,a2:Lp*Tu*Lp*Tu,a3:Lp*Tu*Tu/2,a4:Lp*Tu*Lp*Tu*2.5,a5:Lp*Tu+Lp*Tu*Tu/2,a6:1-Tu},eIe={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:_r.radius,f:_r.flattening},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:um.radius,f:um.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Gd.radius,f:Gd.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Gd.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};let qE=0,G$=class a8{static fromGE(t){const i=new a8;return i._wkt=t.wkt,i._wkid=t.wkid,i._isInverse=t.isInverse,i}constructor(t){this.uid=qE++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=qE++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=qE++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=qE++}getInverse(){const t=new a8;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}},l8=class E2{static cacheKey(t,i){return[t.wkid!==void 0&&t.wkid!==null?t.wkid.toString():"-1",t.wkt!==void 0&&t.wkt!==null?t.wkt.toString():"",i.wkid!==void 0&&i.wkid!==null?i.wkid.toString():"-1",i.wkt!==void 0&&i.wkt!==null?i.wkt.toString():""].join(",")}static fromGE(t){const i=new E2;let r="";for(const n of t.steps){const s=G$.fromGE(n);i.steps.push(s),r+=s.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=r,i}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t&&t.steps)for(const i of t.steps)i instanceof G$?this.steps.push(i):this.steps.push(new G$({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const t=new E2;t.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];t.steps.push(r.getInverse())}return t}getGTListEntry(){let t="";for(const i of this.steps)t+=i.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,i,r){this._cachedProjection[E2.cacheKey(t,i)]=r}getCachedGeTransformation(t,i){let r="";for(const s of this.steps)r+=s.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);const n=this._cachedProjection[E2.cacheKey(t,i)];return n===void 0?null:n}},Qf=null,oS=null,q$=null,H$={};const Rie=new zN;function mm(){return!!Qf&&Aie()}function ym(e){return Re(q$)&&(q$=Promise.all([Cie(),De(()=>import("./geometryEngineBase-807394fe.js"),[],import.meta.url).then(t=>t.g),De(()=>import("./hydrated-95680b80.js"),["./hydrated-95680b80.js","./preload-helper-388ac9d5.js"],import.meta.url)])),q$.then(([,t,{hydratedAdapter:i}])=>{hr(e),oS=i,Qf=t.default,Qf._enableProjection(KMe),Rie.notify()})}function W0(e,t,i=null,r=null){return Array.isArray(e)?e.length===0?[]:DB(oS,e,e[0].spatialReference,t,i,r):DB(oS,[e],e.spatialReference,t,i,r)[0]}function DB(e,t,i,r,n=null,s=null){if(Re(i)||Re(r))return t;if(rp(i,r,n))return t.map(o=>sIe(o,i,r));if(Re(n)){const o=l8.cacheKey(i,r);H$[o]!==void 0?n=H$[o]:(n=iIe(i,r,void 0),Re(n)&&(n=new l8),H$[o]=n)}if(Re(Qf)||Re(e))throw new MD;return ee(s)?Qf._project(e,t,i,r,n,s):Qf._project(e,t,i,r,n)}function Mat(e,t){const i=tIe([e],t);return ee(i.pending)?{pending:i.pending,geometry:null}:ee(i.geometries)?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function tIe(e,t){if(!mm()){for(const i of e)if(ee(i)&&!vn(i.spatialReference,t)&&Es(i.spatialReference)&&Es(t)&&!rp(i.spatialReference,t))return ci(Rie),{pending:ym(),geometries:null}}return{pending:null,geometries:e.map(i=>Re(i)?null:vn(i.spatialReference,t)?i:Es(i.spatialReference)&&Es(t)?rIe(i,t):null)}}function iIe(e,t,i=null){if(Re(e)||Re(t))return null;if(Re(Qf)||Re(oS))throw new MD;const r=Qf._getTransformation(oS,e,t,i,i?.spatialReference);return r!==null?l8.fromGE(r):null}class MD extends Ce{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}var Pe;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",e[e.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=8]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=10]="GCSMOON2000",e[e.LON_LAT=11]="LON_LAT",e[e.PLATE_CARREE=12]="PLATE_CARREE"})(Pe||(Pe={}));function rIe(e,t){try{const i=W0(e,t);if(i==null)return null;"xmin"in e&&"xmin"in i&&(i.zmin=e.zmin,i.zmax=e.zmax);const r=tD(i.type,e.spatialReference,t);return ee(r)&&r(i),i}catch(i){if(!(i instanceof MD))throw i;return null}}function rp(e,t,i){return!i&&(!!vn(e,t)||Es(e)&&Es(t)&&!!Nie(e,t,Die))}async function nIe(e,t,i,r){if(mm())return aU(r);if(Array.isArray(e)){for(const{source:n,dest:s,geographicTransformation:o}of e)if(!rp(n,s,o))return ym(r)}else if(!rp(e,t,i))return ym(r);return aU(r)}function sIe(e,t,i){return e?"x"in e?oIe(e,t,new At,i,0):"xmin"in e?uIe(e,t,new Kt,i,0):"rings"in e?kie(e,t,new Aa,i,0):"paths"in e?lIe(e,t,new fa,i,0):"points"in e?aIe(e,t,new fw,i,0):null:null}function oIe(e,t,i,r,n){Un[0]=e.x,Un[1]=e.y;const s=e.z;return Un[2]=s!==void 0?s:n,_3(Un,t,0,Un,r,0,1)?(i.x=Un[0],i.y=Un[1],i.spatialReference=r,s===void 0?(i.z=void 0,i.hasZ=!1):(i.z=Un[2],i.hasZ=!0),e.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=e.m,i.hasM=!0),i):null}function aIe(e,t,i,r,n){const{points:s,hasZ:o,hasM:a}=e,l=[],u=s.length,c=[];for(const d of s)c.push(d[0],d[1],o?d[2]:n);if(!_3(c,t,0,c,r,0,u))return null;for(let d=0;d<u;++d){const f=3*d,m=c[f],g=c[f+1];o&&a?l.push([m,g,c[f+2],s[d][3]]):o?l.push([m,g,c[f+2]]):a?l.push([m,g,s[d][2]]):l.push([m,g])}return i.points=l,i.spatialReference=r,i.hasZ=o,i.hasM=a,i}function lIe(e,t,i,r,n){const{paths:s,hasZ:o,hasM:a}=e,l=[];return Lie(s,o??!1,a??!1,t,l,r,n)?(i.paths=l,i.spatialReference=r,i.hasZ=o,i.hasM=a,i):null}function Iat(e,t,i=t.spatialReference,r=0){return ee(e.spatialReference)&&ee(i)&&ee(kie(e,e.spatialReference,t,i,r))}function kie(e,t,i,r,n){const{rings:s,hasZ:o,hasM:a}=e,l=[];return Lie(s,o??!1,a??!1,t,l,r,n)?(i.rings=l,i.spatialReference=r,i.hasZ=o,i.hasM=a,i):null}function uIe(e,t,i,r,n){const{xmin:s,ymin:o,xmax:a,ymax:l,hasZ:u,hasM:c}=e;return jB(s,o,u?e.zmin:n,t,Un,r)?(i.xmin=Un[0],i.ymin=Un[1],u&&(i.zmin=Un[2]),jB(a,l,u?e.zmax:n,t,Un,r)?(i.xmax=Un[0],i.ymax=Un[1],u&&(i.zmax=Un[2]),c&&(i.mmin=e.mmin,i.mmax=e.mmax),i.spatialReference=r,i):null):null}function Tat(e,t,i,r=0){Un[0]=e.x,Un[1]=e.y;const n=e.z;return Un[2]=n!==void 0?n:r,_3(Un,e.spatialReference,0,t,i,0,1)}function jB(e,t,i,r,n,s){return HE[0]=e,HE[1]=t,HE[2]=i,_3(HE,r,0,n,s,0,1)}function _3(e,t,i,r,n,s,o=1){const a=Nie(t,n,Die);if(Re(a))return!1;if(a===lr){if(e===r&&i===s)return!0;const u=i+3*o;for(let c=i,d=s;c<u;c++,d++)r[d]=e[c];return!0}const l=i+3*o;for(let u=i,c=s;u<l;u+=3,c+=3)a(e,u,r,c);return!0}function Lie(e,t,i,r,n,s,o=0){const a=new Array;for(const u of e)for(const c of u)a.push(c[0],c[1],t?c[2]:o);if(!_3(a,r,0,a,s,0,a.length/3))return!1;let l=0;n.length=0;for(const u of e){const c=new Array;for(const d of u)t&&i?c.push([a[l++],a[l++],a[l++],d[3]]):t?c.push([a[l++],a[l++],a[l++]]):i?(c.push([a[l++],a[l++],d[2]]),l++):(c.push([a[l++],a[l++]]),l++);n.push(c)}return!0}function Aat(e,t,i,r){if(Re(e)||Re(r))return!1;const n=aS(e,Fie),s=aS(r,IIe);if(n===s&&!UB(s)&&(n!==Pe.UNKNOWN||vn(e,r)))return Bee(i,t),!0;if(UB(s)){const o=Ov[n][Pe.LON_LAT],a=Ov[Pe.LON_LAT][s];return!Re(o)&&!Re(a)&&(o(t,0,Pp,0),a(Pp,0,Np,0),Pie(fh*Pp[0],fh*Pp[1],i),i[12]=Np[0],i[13]=Np[1],i[14]=Np[2],!0)}if((s===Pe.WEB_MERCATOR||s===Pe.PLATE_CARREE)&&(n===Pe.WGS84||n===Pe.CGCS2000&&s===Pe.PLATE_CARREE||n===Pe.SPHERICAL_ECEF||n===Pe.WEB_MERCATOR)){const o=Ov[n][Pe.LON_LAT],a=Ov[Pe.LON_LAT][s];return!Re(o)&&!Re(a)&&(o(t,0,Pp,0),a(Pp,0,Np,0),n===Pe.SPHERICAL_ECEF?cIe(fh*Pp[0],fh*Pp[1],i):h3(i),i[12]=Np[0],i[13]=Np[1],i[14]=Np[2],!0)}return!1}function UB(e){return e===Pe.SPHERICAL_ECEF||e===Pe.SPHERICAL_MARS_PCPF||e===Pe.SPHERICAL_MOON_PCPF}function Pie(e,t,i){const r=Math.sin(e),n=Math.cos(e),s=Math.sin(t),o=Math.cos(t),a=i;return a[0]=-r,a[4]=-s*n,a[8]=o*n,a[12]=0,a[1]=n,a[5]=-s*r,a[9]=o*r,a[13]=0,a[2]=0,a[6]=o,a[10]=s,a[14]=0,a[3]=0,a[7]=0,a[11]=0,a[15]=1,a}function cIe(e,t,i){return Pie(e,t,i),yp(i,i),i}function aS(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=dp(e,1)),e.wkt===Uye.wkt?t.spatialReferenceId=Pe.SPHERICAL_ECEF:Hx(e)?t.spatialReferenceId=Pe.WGS84:f0(e)?t.spatialReferenceId=Pe.WEB_MERCATOR:Pye(e)?t.spatialReferenceId=Pe.PLATE_CARREE:e.wkt===Vye.wkt?t.spatialReferenceId=Pe.WGS84_ECEF:e.wkid===tu.CGCS2000?t.spatialReferenceId=Pe.CGCS2000:e.wkt===wK.wkt?t.spatialReferenceId=Pe.SPHERICAL_MARS_PCPF:e.wkt===_K.wkt?t.spatialReferenceId=Pe.SPHERICAL_MOON_PCPF:e3(e)?t.spatialReferenceId=Pe.GCSMARS2000:t3(e)?t.spatialReferenceId=Pe.GCSMOON2000:t.spatialReferenceId=Pe.UNKNOWN):Pe.UNKNOWN}function lr(e,t,i,r){e!==i&&(i[r++]=e[t++],i[r++]=e[t++],i[r]=e[t])}function ib(e,t,i,r){i[r++]=kb*(e[t++]/_r.radius),i[r++]=kb*(Math.PI/2-2*Math.atan(Math.exp(-e[t++]/_r.radius))),i[r]=e[t]}function hIe(e,t,i,r){ib(e,t,i,r),Rg(i,r,i,r)}function dIe(e,t,i,r){ib(e,t,i,r),Lg(i,r,i,r)}function pIe(e,t,i,r,n){const s=.4999999*Math.PI,o=Ta(fh*e[t+1],-s,s),a=Math.sin(o);i[r++]=fh*e[t]*n.radius,i[r++]=n.halfSemiMajorAxis*Math.log((1+a)/(1-a)),i[r]=e[t+2]}function lS(e,t,i,r){pIe(e,t,i,r,_r)}const VB=_r.radius*Math.PI/180,BB=180/(_r.radius*Math.PI);function $g(e,t,i,r){i[r]=e[t]*VB,i[r+1]=e[t+1]*VB,i[r+2]=e[t+2]}function Og(e,t,i,r){i[r]=e[t]*BB,i[r+1]=e[t+1]*BB,i[r+2]=e[t+2]}function fIe(e,t,i,r){ib(e,t,i,r),$g(i,r,i,r)}function mIe(e,t,i,r){Pg(e,t,i,r),$g(i,r,i,r)}function yIe(e,t,i,r){kg(e,t,i,r),$g(i,r,i,r)}function gIe(e,t,i,r){Og(e,t,i,r),Rg(i,r,i,r)}function vIe(e,t,i,r){Og(e,t,i,r),lS(i,r,i,r)}function bIe(e,t,i,r){Og(e,t,i,r),Lg(i,r,i,r)}function ID(e){if(Re(e))return!1;const t=aS(e,Fie);return!!Ov[t][Pe.WGS84_COMPARABLE_LON_LAT]}function TD(e,t,i,r,n){const s=n+e[t+2],o=fh*e[t+1],a=fh*e[t],l=Math.cos(o);i[r++]=Math.cos(a)*l*s,i[r++]=Math.sin(a)*l*s,i[r]=Math.sin(o)*s}function zB(e,t,i,r){TD(e,t,i,r,um.radius)}function GB(e,t,i,r){TD(e,t,i,r,Gd.radius)}function Rg(e,t,i,r){TD(e,t,i,r,_r.radius)}function AD(e,t,i,r,n){const s=e[t],o=e[t+1],a=e[t+2],l=Math.sqrt(s*s+o*o+a*a),u=bQ(a/(l===0?1:l)),c=Math.atan2(o,s);i[r++]=kb*c,i[r++]=kb*u,i[r]=l-n}function qB(e,t,i,r){AD(e,t,i,r,um.radius)}function HB(e,t,i,r){AD(e,t,i,r,Gd.radius)}function kg(e,t,i,r){AD(e,t,i,r,_r.radius)}function wIe(e,t,i,r){kg(e,t,i,r),lS(i,r,i,r)}function _Ie(e,t,i,r){kg(e,t,i,r),Lg(i,r,i,r)}function xIe(e,t,i,r,n){const s=fh*e[t],o=fh*e[t+1],a=e[t+2],l=Math.sin(o),u=Math.cos(o),c=n.radius/Math.sqrt(1-n.eccentricitySquared*l*l);i[r++]=(c+a)*u*Math.cos(s),i[r++]=(c+a)*u*Math.sin(s),i[r++]=(c*(1-n.eccentricitySquared)+a)*l}function Lg(e,t,i,r){xIe(e,t,i,r,_r)}function Pg(e,t,i,r){const n=XMe,s=e[t],o=e[t+1],a=e[t+2];let l,u,c,d,f,m,g,v,b,x,S,T,_,M,I,$,L,B,z,W,J;l=Math.abs(a),u=s*s+o*o,c=Math.sqrt(u),d=u+a*a,f=Math.sqrt(d),W=Math.atan2(o,s),m=a*a/d,g=u/d,M=n.a2/f,I=n.a3-n.a4/f,g>.3?(v=l/f*(1+g*(n.a1+M+m*I)/f),z=Math.asin(v),x=v*v,b=Math.sqrt(1-x)):(b=c/f*(1-m*(n.a5-M-g*I)/f),z=Math.acos(b),x=1-b*b,v=Math.sqrt(x)),S=1-_r.eccentricitySquared*x,T=_r.radius/Math.sqrt(S),_=n.a6*T,M=c-T*b,I=l-_*v,L=b*M+v*I,$=b*I-v*M,B=$/(_/S+L),z+=B,J=L+$*B/2,a<0&&(z=-z),i[r++]=kb*W,i[r++]=kb*z,i[r]=J}function SIe(e,t,i,r){Pg(e,t,i,r),Rg(i,r,i,r)}function EIe(e,t,i,r){Pg(e,t,i,r),lS(i,r,i,r)}const Ov={[Pe.WGS84]:{[Pe.CGCS2000]:null,[Pe.GCSMARS2000]:null,[Pe.GCSMOON2000]:null,[Pe.LON_LAT]:lr,[Pe.WGS84_COMPARABLE_LON_LAT]:lr,[Pe.SPHERICAL_ECEF]:Rg,[Pe.SPHERICAL_MARS_PCPF]:null,[Pe.SPHERICAL_MOON_PCPF]:null,[Pe.UNKNOWN]:null,[Pe.WEB_MERCATOR]:lS,[Pe.PLATE_CARREE]:$g,[Pe.WGS84]:lr,[Pe.WGS84_ECEF]:Lg},[Pe.CGCS2000]:{[Pe.CGCS2000]:lr,[Pe.GCSMARS2000]:null,[Pe.GCSMOON2000]:null,[Pe.LON_LAT]:lr,[Pe.WGS84_COMPARABLE_LON_LAT]:lr,[Pe.SPHERICAL_ECEF]:Rg,[Pe.SPHERICAL_MARS_PCPF]:null,[Pe.SPHERICAL_MOON_PCPF]:null,[Pe.UNKNOWN]:null,[Pe.WEB_MERCATOR]:null,[Pe.PLATE_CARREE]:$g,[Pe.WGS84]:null,[Pe.WGS84_ECEF]:Lg},[Pe.GCSMARS2000]:{[Pe.CGCS2000]:null,[Pe.GCSMARS2000]:lr,[Pe.GCSMOON2000]:null,[Pe.LON_LAT]:lr,[Pe.WGS84_COMPARABLE_LON_LAT]:null,[Pe.SPHERICAL_ECEF]:null,[Pe.SPHERICAL_MARS_PCPF]:GB,[Pe.SPHERICAL_MOON_PCPF]:null,[Pe.UNKNOWN]:null,[Pe.WEB_MERCATOR]:null,[Pe.PLATE_CARREE]:null,[Pe.WGS84]:null,[Pe.WGS84_ECEF]:null},[Pe.GCSMOON2000]:{[Pe.CGCS2000]:null,[Pe.GCSMARS2000]:null,[Pe.GCSMOON2000]:lr,[Pe.LON_LAT]:lr,[Pe.WGS84_COMPARABLE_LON_LAT]:null,[Pe.SPHERICAL_ECEF]:null,[Pe.SPHERICAL_MARS_PCPF]:null,[Pe.SPHERICAL_MOON_PCPF]:zB,[Pe.UNKNOWN]:null,[Pe.WEB_MERCATOR]:null,[Pe.PLATE_CARREE]:null,[Pe.WGS84]:null,[Pe.WGS84_ECEF]:null},[Pe.WEB_MERCATOR]:{[Pe.CGCS2000]:null,[Pe.GCSMARS2000]:null,[Pe.GCSMOON2000]:null,[Pe.LON_LAT]:ib,[Pe.WGS84_COMPARABLE_LON_LAT]:ib,[Pe.SPHERICAL_ECEF]:hIe,[Pe.SPHERICAL_MARS_PCPF]:null,[Pe.SPHERICAL_MOON_PCPF]:null,[Pe.UNKNOWN]:null,[Pe.WEB_MERCATOR]:lr,[Pe.PLATE_CARREE]:fIe,[Pe.WGS84]:ib,[Pe.WGS84_ECEF]:dIe},[Pe.WGS84_ECEF]:{[Pe.CGCS2000]:Pg,[Pe.GCSMARS2000]:null,[Pe.GCSMOON2000]:null,[Pe.LON_LAT]:Pg,[Pe.WGS84_COMPARABLE_LON_LAT]:Pg,[Pe.SPHERICAL_ECEF]:SIe,[Pe.SPHERICAL_MARS_PCPF]:null,[Pe.SPHERICAL_MOON_PCPF]:null,[Pe.UNKNOWN]:null,[Pe.WEB_MERCATOR]:EIe,[Pe.PLATE_CARREE]:mIe,[Pe.WGS84]:Pg,[Pe.WGS84_ECEF]:lr},[Pe.SPHERICAL_ECEF]:{[Pe.CGCS2000]:kg,[Pe.GCSMARS2000]:null,[Pe.GCSMOON2000]:null,[Pe.LON_LAT]:kg,[Pe.WGS84_COMPARABLE_LON_LAT]:kg,[Pe.SPHERICAL_ECEF]:lr,[Pe.SPHERICAL_MARS_PCPF]:null,[Pe.SPHERICAL_MOON_PCPF]:null,[Pe.UNKNOWN]:null,[Pe.WEB_MERCATOR]:wIe,[Pe.PLATE_CARREE]:yIe,[Pe.WGS84]:kg,[Pe.WGS84_ECEF]:_Ie},[Pe.SPHERICAL_MARS_PCPF]:{[Pe.CGCS2000]:null,[Pe.GCSMARS2000]:HB,[Pe.GCSMOON2000]:null,[Pe.LON_LAT]:HB,[Pe.WGS84_COMPARABLE_LON_LAT]:null,[Pe.SPHERICAL_ECEF]:null,[Pe.SPHERICAL_MARS_PCPF]:lr,[Pe.SPHERICAL_MOON_PCPF]:null,[Pe.UNKNOWN]:null,[Pe.WEB_MERCATOR]:null,[Pe.PLATE_CARREE]:null,[Pe.WGS84]:null,[Pe.WGS84_ECEF]:null},[Pe.SPHERICAL_MOON_PCPF]:{[Pe.CGCS2000]:null,[Pe.GCSMARS2000]:null,[Pe.GCSMOON2000]:qB,[Pe.LON_LAT]:qB,[Pe.WGS84_COMPARABLE_LON_LAT]:null,[Pe.SPHERICAL_ECEF]:null,[Pe.SPHERICAL_MARS_PCPF]:null,[Pe.SPHERICAL_MOON_PCPF]:lr,[Pe.UNKNOWN]:null,[Pe.WEB_MERCATOR]:null,[Pe.PLATE_CARREE]:null,[Pe.WGS84]:null,[Pe.WGS84_ECEF]:null},[Pe.UNKNOWN]:{[Pe.CGCS2000]:null,[Pe.GCSMARS2000]:null,[Pe.GCSMOON2000]:null,[Pe.LON_LAT]:null,[Pe.WGS84_COMPARABLE_LON_LAT]:null,[Pe.SPHERICAL_ECEF]:null,[Pe.SPHERICAL_MARS_PCPF]:null,[Pe.SPHERICAL_MOON_PCPF]:null,[Pe.UNKNOWN]:lr,[Pe.WEB_MERCATOR]:null,[Pe.PLATE_CARREE]:null,[Pe.WGS84]:null,[Pe.WGS84_ECEF]:null},[Pe.LON_LAT]:{[Pe.CGCS2000]:lr,[Pe.GCSMARS2000]:lr,[Pe.GCSMOON2000]:lr,[Pe.LON_LAT]:lr,[Pe.WGS84_COMPARABLE_LON_LAT]:lr,[Pe.SPHERICAL_ECEF]:Rg,[Pe.SPHERICAL_MARS_PCPF]:GB,[Pe.SPHERICAL_MOON_PCPF]:zB,[Pe.UNKNOWN]:null,[Pe.WEB_MERCATOR]:lS,[Pe.PLATE_CARREE]:$g,[Pe.WGS84]:lr,[Pe.WGS84_ECEF]:Lg},[Pe.WGS84_COMPARABLE_LON_LAT]:{[Pe.CGCS2000]:null,[Pe.GCSMARS2000]:null,[Pe.GCSMOON2000]:null,[Pe.LON_LAT]:lr,[Pe.WGS84_COMPARABLE_LON_LAT]:lr,[Pe.SPHERICAL_ECEF]:Rg,[Pe.SPHERICAL_MARS_PCPF]:null,[Pe.SPHERICAL_MOON_PCPF]:null,[Pe.UNKNOWN]:null,[Pe.WEB_MERCATOR]:null,[Pe.PLATE_CARREE]:$g,[Pe.WGS84]:lr,[Pe.WGS84_ECEF]:Lg},[Pe.PLATE_CARREE]:{[Pe.CGCS2000]:Og,[Pe.GCSMARS2000]:null,[Pe.GCSMOON2000]:null,[Pe.LON_LAT]:Og,[Pe.WGS84_COMPARABLE_LON_LAT]:Og,[Pe.SPHERICAL_ECEF]:gIe,[Pe.SPHERICAL_MARS_PCPF]:null,[Pe.SPHERICAL_MOON_PCPF]:null,[Pe.UNKNOWN]:null,[Pe.WEB_MERCATOR]:vIe,[Pe.PLATE_CARREE]:lr,[Pe.WGS84]:Og,[Pe.WGS84_ECEF]:bIe}};function Nie(e,t,i=CD()){return Re(e)||Re(t)?null:MIe(e,t,i).projector}function MIe(e,t,i){if(Re(e)||Re(t)||i.source.spatialReference===e&&i.dest.spatialReference===t)return i;const r=aS(e,i.source),n=aS(t,i.dest);return r===Pe.UNKNOWN&&n===Pe.UNKNOWN?vn(e,t)?i.projector=lr:i.projector=null:i.projector=Ov[r][n],i}function CD(){return{source:{spatialReference:null,spatialReferenceId:Pe.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:Pe.UNKNOWN,metersPerUnit:1},projector:lr}}const Fie={spatialReference:null,spatialReferenceId:Pe.UNKNOWN},IIe={spatialReference:null,spatialReferenceId:Pe.UNKNOWN},Die=CD();CD();const fh=Tv(1),kb=vQ(1),HE=$a(),Pp=$a(),Np=$a(),Un=$a();async function TIe(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return Ig(e);const i=Et.WGS84;return await nIe(t,i),W0(e,i)}function Cat(e,t){if(!AIe(e,t)){const i=e.typeKeywords;i?i.push(t):e.typeKeywords=[t]}}function AIe(e,t){return!!e.typeKeywords?.includes(t)}function $at(e,t){const i=e.typeKeywords;if(i){const r=i.indexOf(t);r>-1&&i.splice(r,1)}}async function Oat(e){const t=e.clone().normalize();let i;if(t.length>1)for(const r of t)i?r.width>i.width&&(i=r):i=r;else i=t[0];return TIe(i)}const Rat={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table"};function WB(e){const{portal:t,isOrgItem:i,itemControl:r}=e,n=t.user?.privileges;let s=!n||n.includes("features:user:edit"),o=!!i&&!!n?.includes("features:user:fullEdit");const a=r==="update"||r==="admin";return a?o=s=!0:o&&(s=!0),{features:{edit:s,fullEdit:o},content:{updateItem:a}}}const $w=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=qr(this.portalItem)}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,r,n){if(r.itemId)return new Jv({id:r.itemId,portal:n&&n.portal})}writePortalItem(i,r){i&&i.id&&(r.itemId=i.id)}async loadFromPortal(i,r){if(this.portalItem&&this.portalItem.id)try{const n=await De(()=>import("./layersLoader-b0ea3324.js"),["./layersLoader-b0ea3324.js","./fetchService-7aa3a0fc.js","./jsonContext-26af1f96.js","./preload-helper-388ac9d5.js"],import.meta.url);return hr(r),await n.load({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap},r)}catch(n){throw fs(n)||et.getLogger(this.declaredClass).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${n}`),n}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(r=>(da(r),!0)))}async _setUserPrivileges(i,r){if(!Ri.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(r);if(this.url)try{const{features:{edit:n,fullEdit:s},content:{updateItem:o}}=await this._fetchUserPrivileges(i,r);this._set("userHasEditingPrivileges",n),this._set("userHasFullEditingPrivileges",s),this._set("userHasUpdateItemPrivileges",o)}catch(n){da(n)}}async _fetchUserPrivileges(i,r){let n=this.portalItem;if(!i||!n||!n.loaded||n.sourceUrl)return this._fetchFallbackUserPrivileges(r);const s=i===n.id;if(s&&n.portal.user)return WB(n);let o,a;if(s)o=n.portal.url;else try{o=await HK(this.url,r)}catch(d){da(d)}if(!o||!mye(o,n.portal.url))return this._fetchFallbackUserPrivileges(r);try{const d=ee(r)?r.signal:null;a=await wr?.getCredential(`${o}/sharing`,{prompt:!1,signal:d})}catch(d){da(d)}const l=!0,u=!1,c=!1;if(!a)return{features:{edit:l,fullEdit:u},content:{updateItem:c}};try{if(s?await n.reload():(n=new Jv({id:i,portal:{url:o}}),await n.load(r)),n.portal.user)return WB(n)}catch(d){da(d)}return{features:{edit:l,fullEdit:u},content:{updateItem:c}}}async _fetchFallbackUserPrivileges(i){let r=!0;try{r=await this._fetchUserHasEditingPrivileges(i)}catch(n){da(n)}return{features:{edit:r,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const r=this.url?wr?.findCredential(this.url):null;if(!r)return!0;const n=WE.credential===r?WE.user:await this._fetchEditingUser(i);return WE.credential=r,WE.user=n,Re(n)||n.privileges==null||n.privileges.includes("features:user:edit")}async _fetchEditingUser(i){const r=this.portalItem?.portal?.user;if(r)return r;const n=wr.findServerInfo(this.url??"");if(!n?.owningSystemUrl)return null;const s=`${n.owningSystemUrl}/sharing/rest`,o=xo.getDefault();if(o&&o.loaded&&ml(o.restUrl)===ml(s))return o.user;const a=`${s}/community/self`,l=ee(i)?i.signal:null,u=await J5(St(a,{authMode:"no-prompt",query:{f:"json"},signal:l}));return u.ok?aF.fromJSON(u.value.data):null}read(i,r){r&&(r.layer=this),super.read(i,r)}write(i,r){const n=r&&r.portal,s=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||xo.getDefault());return n&&s&&!dK(s.restUrl,n.restUrl)?(r.messages&&r.messages.push(new Ce("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...r,layer:this})}};return h([p({type:Jv})],t.prototype,"portalItem",null),h([Ye("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),h([it("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),h([p({clonable:!1})],t.prototype,"resourceReferences",void 0),h([p({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),h([p({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),h([p({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=h([ce("esri.layers.mixins.PortalLayer")],t),t},WE={credential:null,user:null};let M2=class extends Lt{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};h([p()],M2.prototype,"updating",void 0),h([p()],M2.prototype,"status",void 0),M2=h([ce("esri.layers.support.PublishingInfo")],M2);const CIe=M2,jie="esri.layers.mixins.PublishableLayer",$Ie=Symbol(jie),OIe=e=>{var t;let i=class extends e{constructor(){super(...arguments),this[t]=!0}get publishingInfo(){if(this.destroyed)return null;const r=this._get("publishingInfo");if(r)return r;const n=new CIe;return this._checkPublishingStatus(n),n}_checkPublishingStatus(r){let o=0;const a=async u=>{let c;r.updating=!0;try{c=await this.fetchPublishingStatus()}catch{c="unavailable"}c!=="published"&&c!=="unavailable"||(r.status==="publishing"&&this.refresh(),l.remove()),r.status=c,r.updating=!1,l.removed||(o=setTimeout(a,u,u+125))},l={removed:!1,remove(){this.removed=!0,clearTimeout(o)}};this.when().catch(()=>l.remove()),a(250),this.own(l)}};return t=$Ie,h([p({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=h([ce(jie)],i),i},uS=new Pt,fx=new WeakMap;function RIe(e){Uie(e)&&uS.push(e)}function kIe(e){Uie(e)&&uS.includes(e)&&uS.remove(e)}function Uie(e){return e!=null&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function Vie(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:Vie(t,e%t):0}let W$=0,JE=0;function LIe(){const e=Date.now();for(const t of uS)t.refreshInterval&&e-(fx.get(t)??0)+5>=6e4*t.refreshInterval&&(fx.set(t,e),t.refresh(e))}AY(()=>{const e=Date.now();let t=0;for(const i of uS)t=Vie(Math.round(6e4*i.refreshInterval),t),i.refreshInterval?fx.get(i)||fx.set(i,e):fx.delete(i);if(t!==JE){if(JE=t,clearInterval(W$),JE===0)return void(W$=0);W$=setInterval(LIe,JE)}});const Ow=e=>{let t=class extends e{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=_Y(()=>this.hasDataChanged()),this.when().then(()=>{RIe(this)},()=>{})}destroy(){kIe(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){qv(this._debounceHasDataChanged()).then(r=>{r&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:r})},r=>{et.getLogger(this.declaredClass).error(r),this.emit("refresh",{dataChanged:!1,error:r})})}async hasDataChanged(){return!0}};return h([p({type:Number,cast:i=>i>=.1?i:i<=0?0:.1,json:{write:!0}})],t.prototype,"refreshInterval",void 0),h([p({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),h([p()],t.prototype,"refreshParameters",null),t=h([ce("esri.layers.mixins.RefreshableLayer")],t),t},J0=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&PIe(i,r.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===i.minScale&&n.maxScale===i.maxScale?n:i}};return h([p({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),h([p({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),h([p({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=h([ce("esri.layers.mixins.ScaleRangeLayer")],t),t};function PIe(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const Bie=_n()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let I2=class extends xr(Je){constructor(t){super(t),this.unit="milliseconds",this.value=0}toMilliseconds(){return aSe(this.value,this.unit,"milliseconds")}};h([Ft(Bie,{nonNullable:!0})],I2.prototype,"unit",void 0),h([p({type:Number,json:{write:!0},nonNullable:!0})],I2.prototype,"value",void 0),I2=h([ce("esri.TimeInterval")],I2);const CA=I2;function JB(e,t){return CA.fromJSON({value:e,unit:t})}let ro=class extends xr(Je){constructor(t){super(t),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(t,i){if(!i.timeExtent||!Array.isArray(i.timeExtent)||i.timeExtent.length!==2)return null;const r=new Date(i.timeExtent[0]),n=new Date(i.timeExtent[1]);return new ka({start:r,end:n})}writeFullTimeExtent(t,i){t&&ee(t.start)&&ee(t.end)?i.timeExtent=[t.start.getTime(),t.end.getTime()]:i.timeExtent=null}readInterval(t,i){return i.timeInterval&&i.timeIntervalUnits?JB(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?JB(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(t,i){i.timeInterval=t?.toJSON().value??null,i.timeIntervalUnits=t?.toJSON().unit??null}};h([p({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],ro.prototype,"cumulative",void 0),h([p({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],ro.prototype,"endField",void 0),h([p({type:ka,json:{write:{enabled:!0,allowNull:!0}}})],ro.prototype,"fullTimeExtent",void 0),h([Ye("fullTimeExtent",["timeExtent"])],ro.prototype,"readFullTimeExtent",null),h([it("fullTimeExtent")],ro.prototype,"writeFullTimeExtent",null),h([p({type:Boolean,json:{write:!0}})],ro.prototype,"hasLiveData",void 0),h([p({type:CA,json:{write:{enabled:!0,allowNull:!0}}})],ro.prototype,"interval",void 0),h([Ye("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],ro.prototype,"readInterval",null),h([it("interval")],ro.prototype,"writeInterval",null),h([p({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],ro.prototype,"startField",void 0),h([p({type:fm,json:{write:{enabled:!0,allowNull:!0}}})],ro.prototype,"timeReference",void 0),h([p({type:String,json:{write:{enabled:!0,allowNull:!0}}})],ro.prototype,"trackIdField",void 0),h([p({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],ro.prototype,"useTime",void 0),ro=h([ce("esri.layers.support.TimeInfo")],ro);const zie=ro,T4=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,r){const n=r.timeInfo.exportOptions;if(!n)return null;const s=n.timeOffset,o=Bie.fromJSON(n.timeOffsetUnits);return s&&o?new CA({value:s,unit:o}):null}set timeInfo(i){jQ(i,this.fieldsIndex),this._set("timeInfo",i)}};return h([p({type:ka,json:{write:!1}})],t.prototype,"timeExtent",void 0),h([p({type:CA})],t.prototype,"timeOffset",void 0),h([Ye("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),h([p({value:null,type:zie,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),h([p({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=h([ce("esri.layers.mixins.TemporalLayer")],t),t},ZB=new ti({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let cf=class extends xr(Je){constructor(t){super(t),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};h([p({json:{write:!0}})],cf.prototype,"name",void 0),h([p({json:{write:!0}})],cf.prototype,"description",void 0),h([p({json:{read:ZB.read,write:ZB.write}})],cf.prototype,"drawingTool",void 0),h([p({json:{write:!0}})],cf.prototype,"prototype",void 0),h([p({json:{write:!0}})],cf.prototype,"thumbnail",void 0),cf=h([ce("esri.layers.support.FeatureTemplate")],cf);const $D=cf;let yd=class extends xr(Je){constructor(t){super(t),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(t){const i={};for(const r of Object.keys(t))i[r]=QF(t[r]);return i}writeDomains(t,i){const r={};for(const n of Object.keys(t))t[n]&&(r[n]=t[n]?.toJSON());i.domains=r}};h([p({json:{write:!0}})],yd.prototype,"id",void 0),h([p({json:{write:!0}})],yd.prototype,"name",void 0),h([p({json:{write:!0}})],yd.prototype,"domains",void 0),h([Ye("domains")],yd.prototype,"readDomains",null),h([it("domains")],yd.prototype,"writeDomains",null),h([p({type:[$D],json:{write:!0}})],yd.prototype,"templates",void 0),yd=h([ce("esri.layers.support.FeatureType")],yd);const OD=yd;function NIe(e){return e.type==="date"||e.type==="esriFieldTypeDate"}function YB(e){return e.type==="oid"||e.type==="esriFieldTypeOID"}function KB(e){return e.type==="global-id"||e.type==="esriFieldTypeGlobalID"}let RD=class{constructor(t=[]){if(this.fields=[],this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!t)return;this.fields=t;const i=[];for(const r of t){const n=r?.name,s=XB(r?.name);if(n&&s){const o=QB(n);this._fieldsMap.set(n,r),this._fieldsMap.set(o,r),this._normalizedFieldsMap.set(s,r),i.push(o),NIe(r)?(this.dateFields.push(r),this._dateFieldsSet.add(r)):xF(r)&&(this._numericFieldsSet.add(r),this.numericFields.push(r)),YB(r)||KB(r)||(r.editable=r.editable==null||!!r.editable,r.nullable=r.nullable==null||!!r.nullable)}}i.sort(),this.uid=i.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)YB(t)||KB(t)||t.nullable||$ve(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}has(t){return this.get(t)!=null}get(t){if(!t)return;let i=this._fieldsMap.get(t);return i||(i=this._fieldsMap.get(QB(t))??this._normalizedFieldsMap.get(XB(t)),i&&this._fieldsMap.set(t,i),i)}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){const i=this.get(t);if(i)return i.name??void 0}};function QB(e){return e.trim().toLowerCase()}function XB(e){return _ve(e)?.toLowerCase()??""}function FIe(){return{fields:{type:[ol],value:null},fieldsIndex:{readOnly:!0,get(){return new RD(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e)this.fieldsIndex?.has(t)||et.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e});return UQ(this.fieldsIndex,e)}}}}const J$=et.getLogger("esri.layers.support.labelingInfo"),DIe=/\[([^\[\]]+)\]/gi;function ez(e,t,i){return e?e.map(r=>{const n=new w3;if(n.read(r,i),n.labelExpression){const s=t.fields||t.layerDefinition&&t.layerDefinition.fields||this.fields;n.labelExpression=n.labelExpression.replace(DIe,(o,a)=>`[${jIe(a,s)}]`)}return n}):null}function jIe(e,t){if(!t)return e;const i=e.toLowerCase();for(let r=0;r<t.length;r++){const n=t[r].name;if(n.toLowerCase()===i)return n}return e}const UIe={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};function VIe(e,t){const i=Le(e);return i.some(r=>BIe(r,t))?[]:i}function BIe(e,t){const i=e.labelPlacement,r=UIe[t];if(!e.symbol)return J$.warn("No ILabelClass symbol specified."),!0;if(!r)return J$.error(new Ce("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${t}' is not supported`)),!0;if(!r.includes(i)){const n=r[0];i&&J$.warn(`Found invalid label placement type ${i} for ${t}. Defaulting to ${n}`),e.labelPlacement=n}return!1}const Bu=[];function kD(e,t){if(nD(e.url??""))return!0;const{wkid:i}=t;for(const r of Bu){if((e.version??0)>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}Bu.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102901;t<=102955;t++)e.add(t);return e}]),Bu.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),Bu.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),Bu.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),Bu.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}]),Bu.push([10.7,()=>{const e=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let t=8065;t<=8068;t++)e.add(t);for(let t=8082;t<=8083;t++)e.add(t);for(let t=8379;t<=8385;t++)e.add(t);for(let t=8836;t<=8840;t++)e.add(t);for(let t=8857;t<=8860;t++)e.add(t);for(let t=53035;t<=53037;t++)e.add(t);for(let t=54090;t<=54091;t++)e.add(t);for(let t=102498;t<=102499;t++)e.add(t);return e}]),Bu.push([10.61,()=>new Set([102497])]),Bu.push([10.6,()=>{const e=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let t=7755;t<=7787;t++)e.add(t);for(let t=7791;t<=7795;t++)e.add(t);for(let t=7799;t<=7801;t++)e.add(t);for(let t=7825;t<=7831;t++)e.add(t);for(let t=7877;t<=7878;t++)e.add(t);for(let t=7882;t<=7883;t++)e.add(t);for(let t=7991;t<=7992;t++)e.add(t);for(let t=8042;t<=8043;t++)e.add(t);for(let t=8058;t<=8059;t++)e.add(t);for(let t=8311;t<=8348;t++)e.add(t);for(let t=9060;t<=9067;t++)e.add(t);for(let t=102562;t<=102568;t++)e.add(t);for(let t=102799;t<=102900;t++)e.add(t);return e}]),Bu.push([10.51,()=>{const e=new Set([7683,7881,7886,7899,8888,9e3]);for(let t=8013;t<=8032;t++)e.add(t);for(let t=9053;t<=9057;t++)e.add(t);for(let t=104017;t<=104018;t++)e.add(t);for(let t=104971;t<=104974;t++)e.add(t);return e}]),Bu.push([10.5,()=>{const e=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let t=4087;t<=4088;t++)e.add(t);for(let t=5896;t<=5899;t++)e.add(t);for(let t=7005;t<=7007;t++)e.add(t);for(let t=7057;t<=7070;t++)e.add(t);for(let t=7073;t<=7082;t++)e.add(t);for(let t=7109;t<=7128;t++)e.add(t);for(let t=7844;t<=7859;t++)e.add(t);return e}]);async function zIe(e,t,i){const r=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const n=await J5(r.populateFromStyle());if(hr(i),n.ok===!1){const s=n.error;t&&t.messages&&t.messages.push(new El("renderer:style-reference",`Failed to create unique value renderer from style reference: ${s.message}`,{error:s,context:t})),e.clear("renderer",t?.origin)}}}var u8;let rv=u8=class extends Je{constructor(e){super(e),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new u8({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};h([p({type:[String],json:{write:!0}})],rv.prototype,"groupByFields",void 0),h([p({type:Number,json:{write:!0}})],rv.prototype,"topCount",void 0),h([p({type:[String],json:{write:!0}})],rv.prototype,"orderByFields",void 0),rv=u8=h([ce("esri.rest.support.TopFilter")],rv);const GIe=rv;var c8;const tz=new ti({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),iz=new ti({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Er=c8=class extends Je{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new c8(Le({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};h([p({type:Boolean,json:{write:!0}})],Er.prototype,"cacheHint",void 0),h([p({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],Er.prototype,"distance",void 0),h([p({types:wc,json:{read:Il,write:!0}})],Er.prototype,"geometry",void 0),h([p({type:Number,json:{write:!0}})],Er.prototype,"geometryPrecision",void 0),h([p({type:Number,json:{write:!0}})],Er.prototype,"maxAllowableOffset",void 0),h([p({type:Number,json:{read:{source:"resultRecordCount"}}})],Er.prototype,"num",void 0),h([p({json:{write:!0}})],Er.prototype,"objectIds",void 0),h([p({type:[String],json:{write:!0}})],Er.prototype,"orderByFields",void 0),h([p({type:[String],json:{write:!0}})],Er.prototype,"outFields",void 0),h([p({type:Et,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Er.prototype,"outSpatialReference",void 0),h([p({type:String,json:{write:!0}})],Er.prototype,"resultType",void 0),h([p({json:{write:!0}})],Er.prototype,"returnGeometry",void 0),h([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Er.prototype,"returnM",void 0),h([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Er.prototype,"returnZ",void 0),h([p({type:Number,json:{read:{source:"resultOffset"}}})],Er.prototype,"start",void 0),h([it("start"),it("num")],Er.prototype,"writeStart",null),h([p({type:String,json:{read:{source:"spatialRel",reader:tz.read},write:{target:"spatialRel",writer:tz.write}}})],Er.prototype,"spatialRelationship",void 0),h([p({type:ka,json:{write:!0}})],Er.prototype,"timeExtent",void 0),h([p({type:GIe,json:{write:!0}})],Er.prototype,"topFilter",void 0),h([p({type:String,json:{read:iz.read,write:{writer:iz.write,overridePolicy(e){return{enabled:ee(e)&&ee(this.distance)&&this.distance>0}}}}})],Er.prototype,"units",void 0),h([p({type:String,json:{write:!0}})],Er.prototype,"where",void 0),Er=c8=h([ce("esri.rest.support.TopFeaturesQuery")],Er),Er.from=nn(Er);const ZE=Er,qIe=["oid","global-id"],HIe=["oid","global-id","guid"];function LD({displayField:e,editFieldsInfo:t,fields:i,objectIdField:r,title:n},s){if(!i)return null;const o=QIe({editFieldsInfo:t,fields:i,objectIdField:r},s);if(!o.length)return null;const a=tTe({titleBase:n,fields:i,displayField:e}),l=eTe();return new Rm({title:a,content:l,fieldInfos:o})}const WIe=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],JIe=(e,{editFieldsInfo:t,objectIdField:i,visibleFieldNames:r})=>r?r.has(e.name):!Gie(e.name,t)&&(!i||e.name!==i)&&!qIe.includes(e.type)&&!WIe.some(n=>n.test(e.name));function ZIe(e,t){const i=e;return t&&(e=e.filter(r=>!t.includes(r.type))),e===i&&(e=e.slice()),e.sort(YIe),e}function YIe(e,t){return e.type==="oid"?-1:t.type==="oid"?1:rz(e)?-1:rz(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function Gie(e,t){if(!e||!t)return!1;const{creationDateField:i,creatorField:r,editDateField:n,editorField:s}=t;return[i&&i.toLowerCase(),r&&r.toLowerCase(),n&&n.toLowerCase(),s&&s.toLowerCase()].includes(e.toLowerCase())}function KIe(e,t){return e.editable&&!HIe.includes(e.type)&&!Gie(e.name,t)}function QIe({editFieldsInfo:e,fields:t,objectIdField:i},r){return ZIe(t??[],r?.ignoreFieldTypes||iTe).map(n=>new i3({fieldName:n.name,isEditable:KIe(n,e),label:n.alias,format:XIe(n),visible:JIe(n,{editFieldsInfo:e,objectIdField:i,visibleFieldNames:r?.visibleFieldNames})}))}function XIe(e){switch(e.type){case"small-integer":case"integer":case"single":return new Av({digitSeparator:!0,places:0});case"double":return new Av({digitSeparator:!0,places:2});case"date":return new Av({dateFormat:"long-month-day-year"});default:return e.type==="string"&&HQ(e.name)?new Av({digitSeparator:!0,places:0}):null}}function eTe(){return[new Ib,new Yx]}function tTe(e){const t=Eve(e),{titleBase:i}=e;return t?`${i}: {${t.trim()}}`:i??""}function rz(e){return(e.name&&e.name.toLowerCase())==="name"?!0:(e.alias&&e.alias.toLowerCase())==="name"}const iTe=["geometry","blob","raster","guid","xml"],Io="FeatureLayer",qie="esri.layers.FeatureLayer",rTe=et.getLogger(qie);function YE(e,t){return new Ce("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function nz(e){return e&&e instanceof Pt}const Z$=FIe();function Y$(e,t,i){const r=!!i?.writeLayerSchema;return{enabled:r,ignoreOrigin:r}}let jt=class extends oMe(qMe(mSe(OIe(nSe(q0(ZMe(T4(J0(Ow(g4(Cw($w(Nm(w4(iD(xr(Rh))))))))))))))))){constructor(...e){super(...e),this._handles=new So,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=Et.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0}destroy(){this.source?.destroy(),this._handles=qr(this._handles)}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){const t=ee(e)?e.signal:null;if(this.portalItem?.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(t).then(r=>this.initLayerProperties(r))),Promise.resolve(this);const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(da).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const r=await this._fetchFirstLayerId(t);r!=null&&(this.layerId=r)}if(!this.url&&!this._hasMemorySource())throw new Ce("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(t))}).then(()=>this._setUserPrivileges(this.serviceItemId,e)).then(()=>qEe(this,e));return this.addResolvingPromise(i),Promise.resolve(this)}readCapabilities(e,t){return t=t.layerDefinition||t,wD(t,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities?.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,i){return this._readEditingEnabled(t,!0,i)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,i,r){this._writeEditingEnabled(e,t,!0,r)}get effectiveEditingEnabled(){return HEe(this)}readIsTable(e,t){return(t=t?.layerDefinition??t).type==="Table"||!t.geometryType}writeIsTable(e,t,i,r){r?.writeLayerSchema&&_o(i,e?"Table":"Feature Layer",t)}readGlobalIdField(e,t){return pie(t.layerDefinition||t)}readObjectIdField(e,t){return fie(t.layerDefinition||t)}get parsedUrl(){const e=Ln(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=p0(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=p0(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){HU(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,i){const r=(t=t.layerDefinition||t).drawingInfo?.renderer;if(r){const n=rS(r,t,i)??void 0;return n||rTe.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:i}),n}if(t.defaultSymbol)return t.types&&t.types.length?new Pm({defaultSymbol:K$(t.defaultSymbol,t,i),field:t.typeIdField,uniqueValueInfos:t.types.map(n=>({id:n.id,symbol:K$(n.symbol,n,i)}))}):new _0({symbol:K$(t.defaultSymbol,t,i)})}set source(e){const t=this._get("source");t!==e&&(nz(t)&&this._resetMemorySource(t),nz(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof Pt?new Cd({layer:this,items:e}):e:null}readSource(e,t){const i=z0.fromJSON(t.featureSet);return new Cd({layer:this,items:i?.features??[]})}readTemplates(e,t){const i=t.editFieldsInfo,r=i&&i.creatorField,n=i&&i.editorField;return e=e&&e.map(s=>$D.fromJSON(s)),this._fixTemplates(e,r),this._fixTemplates(e,n),e}readTitle(e,t){const i=t.layerDefinition?.name??t.name,r=t.title||t.layerDefinition&&t.layerDefinition.title;if(i){const n=this.portalItem&&this.portalItem.title;if(this.sublayerTitleMode==="item-title")return this.url?$2e(this.url,i):i;let s=i;if(!s&&this.url){const o=G0(this.url);ee(o)&&(s=o.title)}return s?(this.sublayerTitleMode==="item-title-and-service-name"&&n&&n!==s&&(s=n+" - "+s),rD(s)):void 0}if(this.sublayerTitleMode==="item-title"&&r)return r}readTitleFromWebMap(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}readTypeIdField(e,t){let i=(t=t.layerDefinition||t).typeIdField;if(i&&t.fields){i=i.toLowerCase();const r=t.fields.find(n=>n.name.toLowerCase()===i);r&&(i=r.name)}return i}readTypes(e,t){e=(t=t.layerDefinition||t).types;const i=t.editFieldsInfo,r=i&&i.creatorField,n=i&&i.editorField;return e&&e.map(s=>(s=OD.fromJSON(s),this._fixTemplates(s.templates,r),this._fixTemplates(s.templates,n),s))}readVisible(e,t){return t.layerDefinition&&t.layerDefinition.defaultVisibility!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}async addAttachment(e,t){return $Ee(this,e,t,Io)}async updateAttachment(e,t,i){return OEe(this,e,t,i,Io)}async applyEdits(e,t){return REe(this,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return LD(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:t}=await ih(De(()=>import("./FeatureLayerSource-6ab7dcce.js"),["./FeatureLayerSource-6ab7dcce.js","./assetEditingSupport-2cebf928.js","./clientSideDefaults-2f6721a1.js","./QueryEngineCapabilities-42e44ded.js","./preload-helper-388ac9d5.js"],import.meta.url),e);return new t({layer:this}).load({signal:e})}createQuery(){const e=BEe(this);e.dynamicDataSource=this.dynamicDataSource;const t=ee(this.subtypeCode)?`${this.subtypeField} = ${this.subtypeCode}`:null,i=YF(this.definitionExpression,t);return e.where=i||"1=1",e}async deleteAttachments(e,t){return kEe(this,e,t,Io)}async fetchRecomputedExtents(e){return LEe(this,e,Io)}getFeatureType(e){const{typeIdField:t,types:i}=this;if(!t||!e)return null;const r=e.attributes?e.attributes[t]:void 0;if(r==null)return null;let n=null;return i?.some(s=>{const{id:o}=s;return o!=null&&(o.toString()===r.toString()&&(n=s),!!n)}),n}getFieldDomain(e,t){const i=t&&t.feature,r=this.getFeatureType(i);if(r){const n=r.domains&&r.domains[e];if(n&&n.type!=="inherited")return n}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}async queryAttachments(e,t){return PEe(this,e,t,Io)}async queryFeatures(e,t){const i=await this.load(),r=await i.source.queryFeatures(On.from(e)??i.createQuery(),t);if(r?.features)for(const n of r.features)n.layer=n.sourceLayer=i;return r}async queryObjectIds(e,t){return NEe(this,e,t,Io)}async queryFeatureCount(e,t){return FEe(this,e,t,Io)}async queryExtent(e,t){return DEe(this,e,t,Io)}async queryRelatedFeatures(e,t){return jEe(this,e,t,Io)}async queryRelatedFeaturesCount(e,t){return UEe(this,e,t,Io)}async queryTopFeatures(e,t){const{source:i,capabilities:r}=await this.load();if(!i.queryTopFeatures||!r?.query?.supportsTopFeaturesQuery)throw new Ce(Io,"Layer source does not support queryTopFeatures capability");const n=await i.queryTopFeatures(ZE.from(e),t);if(n?.features)for(const s of n.features)s.layer=s.sourceLayer=this;return n}async queryTopObjectIds(e,t){const{source:i,capabilities:r}=await this.load();if(!i.queryTopObjectIds||!r?.query.supportsTopFeaturesQuery)throw new Ce(Io,"Layer source does not support queryTopObjectIds capability");return i.queryTopObjectIds(ZE.from(e),t)}async queryTopFeaturesExtent(e,t){const{source:i,capabilities:r}=await this.load();if(!i.queryTopExtents||!r?.query?.supportsTopFeaturesQuery)throw new Ce(Io,"Layer source does not support queryTopExtents capability");return i.queryTopExtents(ZE.from(e),t)}async queryTopFeatureCount(e,t){const{source:i,capabilities:r}=await this.load();if(!i.queryTopCount||!r?.query?.supportsTopFeaturesQuery)throw new Ce(Io,"Layer source does not support queryFeatureCount capability");return i.queryTopCount(ZE.from(e),t)}read(e,t){const i=e.featureCollection;if(i){const r=i.layers;r&&r.length===1&&(super.read(r[0],t),i.showLegend!=null&&super.read({showLegend:i.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,t){t={...t,origin:t?.origin??void 0,writeLayerSchema:t?.writeLayerSchema??this._hasMemorySource()};const{origin:i,layerContainerType:r,messages:n}=t;if(this.dynamicDataSource)return n?.push(YE(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if(i==="web-scene"||i==="web-map"&&r!=="tables")return n?.push(YE(this,"using a table source cannot be written to web scenes and web maps")),null;if(this._hasMemorySource())return n?.push(YE(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&i==="web-map"&&r==="tables")return n?.push(YE(this,"using a non-table source cannot be written to tables in web maps")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new Ce(Io,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){return!!this.loaded&&(this.source?.type==="memory"||kD(this,e))}async save(e){return(await De(()=>import("./featureLayerUtils-83625ecf.js"),["./featureLayerUtils-83625ecf.js","./originUtils-1469eeaf.js","./multiOriginJSONSupportUtils-c978f4c3.js","./fetchService-7aa3a0fc.js","./jsonContext-26af1f96.js","./preload-helper-388ac9d5.js"],import.meta.url)).save(this,e)}async saveAs(e,t){return(await De(()=>import("./featureLayerUtils-83625ecf.js"),["./featureLayerUtils-83625ecf.js","./originUtils-1469eeaf.js","./multiOriginJSONSupportUtils-c978f4c3.js","./fetchService-7aa3a0fc.js","./jsonContext-26af1f96.js","./preload-helper-388ac9d5.js"],import.meta.url)).saveAs(this,e,t)}_readEditingEnabled(e,t,i){let r=e.layerDefinition?.capabilities;return r?this._hasEditingCapability(r):(r=e.capabilities,t&&i?.origin==="web-map"&&!this._hasMemorySource()&&r?this._hasEditingCapability(r):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,i,r){if(!e){const n=this.capabilities?.operations?.supportsSync?"Query,Sync":"Query";_o("layerDefinition.capabilities",n,t),i&&!r?.writeLayerSchema&&(t.capabilities=n)}}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstLayerId(e){return St(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t=>{const i=t.data;if(i)return Array.isArray(i.layers)&&i.layers.length>0?i.layers[0].id:Array.isArray(i.tables)&&i.tables.length>0?i.tables[0].id:void 0})}async initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:this.portalItem?.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),HU(this.renderer,this.fieldsIndex),jQ(this.timeInfo,this.fieldsIndex),zIe(this,{origin:"service"})}async hasDataChanged(){return VEe(this)}async fetchPublishingStatus(){const e=this.source;return e?.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){const e=this.parsedUrl?.path??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||this.fields?.some(t=>t.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(i=>{const r=i.prototype&&i.prototype.attributes;r&&t&&delete r[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new Ce("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new Ce("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this._handles.add([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}};h([Ye("service","capabilities")],jt.prototype,"readCapabilities",null),h([p({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],jt.prototype,"charts",void 0),h([p({readOnly:!0})],jt.prototype,"createQueryVersion",null),h([p({json:{read:{source:"layerDefinition.copyrightText"}}})],jt.prototype,"copyright",void 0),h([p({json:{read:{source:"layerDefinition.displayField"}}})],jt.prototype,"displayField",void 0),h([p({types:Jg,readOnly:!0})],jt.prototype,"defaultSymbol",void 0),h([p({type:Vo})],jt.prototype,"dynamicDataSource",void 0),h([p({type:Boolean})],jt.prototype,"editingEnabled",null),h([Ye(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],jt.prototype,"readEditingEnabled",null),h([Ye("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],jt.prototype,"readEditingEnabledFromWebMap",null),h([it(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],jt.prototype,"writeEditingEnabled",null),h([it("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],jt.prototype,"writeEditingEnabledToWebMap",null),h([p({readOnly:!0})],jt.prototype,"effectiveEditingEnabled",null),h([p({...Z$.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:Y$}}}}})],jt.prototype,"fields",void 0),h([p(Z$.fieldsIndex)],jt.prototype,"fieldsIndex",void 0),h([p({type:j_e,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],jt.prototype,"formTemplate",void 0),h([p({json:{read:{source:"layerDefinition.extent"}}})],jt.prototype,"fullExtent",void 0),h([p({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:Y$,writer(e,t,i){const r=e?zP.toJSON(e):null;r&&_o(i,r,t)}}}},read:{source:"layerDefinition.geometryType",reader:zP.read}}})],jt.prototype,"geometryType",void 0),h([p({json:{read:{source:"layerDefinition.hasM"}}})],jt.prototype,"hasM",void 0),h([p({json:{read:{source:"layerDefinition.hasZ"}}})],jt.prototype,"hasZ",void 0),h([p(dte)],jt.prototype,"id",void 0),h([p({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],jt.prototype,"infoFor3D",void 0),h([p({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],jt.prototype,"isTable",void 0),h([Ye("service","isTable",["type","geometryType"]),Ye("isTable",["layerDefinition.type","layerDefinition.geometryType"])],jt.prototype,"readIsTable",null),h([it("web-map","isTable")],jt.prototype,"writeIsTable",null),h([p(cD)],jt.prototype,"labelsVisible",void 0),h([p({type:[w3],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:ez},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:ez},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],jt.prototype,"labelingInfo",void 0),h([p((()=>{const e=Le(SSe);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,i,r){_o(r,n4(t),i)}}},e})())],jt.prototype,"opacity",void 0),h([p(hD)],jt.prototype,"legendEnabled",void 0),h([p({type:["show","hide"],json:(()=>{const e=Le(pte.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],jt.prototype,"listMode",void 0),h([Ye("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],jt.prototype,"readGlobalIdField",null),h([p({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:Y$}}}}})],jt.prototype,"objectIdField",void 0),h([Ye("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],jt.prototype,"readObjectIdField",null),h([p({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],jt.prototype,"operationalLayerType",void 0),h([p(Z$.outFields)],jt.prototype,"outFields",void 0),h([p({readOnly:!0})],jt.prototype,"parsedUrl",null),h([p({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],jt.prototype,"path",void 0),h([p(p3)],jt.prototype,"popupEnabled",void 0),h([p({type:Rm,json:{name:"popupInfo",write:!0}})],jt.prototype,"popupTemplate",void 0),h([p({readOnly:!0})],jt.prototype,"defaultPopupTemplate",null),h([p({types:c3,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:bee,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(e,t,i)=>({ignoreOrigin:i?.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,i)=>({ignoreOrigin:i?.writeLayerSchema})}}})],jt.prototype,"renderer",null),h([Ye("service","renderer",["drawingInfo.renderer","defaultSymbol"]),Ye("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],jt.prototype,"readRenderer",null),h([p((()=>{const e=Le(_Se);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],jt.prototype,"screenSizePerspectiveEnabled",void 0),h([p({clonable:!1})],jt.prototype,"source",null),h([di("source")],jt.prototype,"castSource",null),h([Ye("portal-item","source",["featureSet"]),Ye("web-map","source",["featureSet"])],jt.prototype,"readSource",null),h([p({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],jt.prototype,"spatialReference",void 0),h([p({type:Number})],jt.prototype,"subtypeCode",void 0),h([p({type:[$D]})],jt.prototype,"templates",void 0),h([Ye("templates",["editFieldsInfo","creatorField","editorField","templates"])],jt.prototype,"readTemplates",null),h([p({type:zie})],jt.prototype,"timeInfo",void 0),h([p()],jt.prototype,"title",void 0),h([Ye("service","title",["name"]),Ye("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],jt.prototype,"readTitle",null),h([Ye("web-map","title",["layerDefinition.name","title"])],jt.prototype,"readTitleFromWebMap",null),h([p({type:String})],jt.prototype,"sublayerTitleMode",void 0),h([p({json:{read:!1}})],jt.prototype,"type",void 0),h([p({type:String})],jt.prototype,"typeIdField",void 0),h([Ye("service","typeIdField"),Ye("typeIdField",["layerDefinition.typeIdField"])],jt.prototype,"readTypeIdField",null),h([p({type:[OD]})],jt.prototype,"types",void 0),h([Ye("service","types",["types"]),Ye("types",["layerDefinition.types"])],jt.prototype,"readTypes",null),h([p({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],jt.prototype,"visible",void 0),h([Ye("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],jt.prototype,"readVisible",null),jt=h([ce(qie)],jt);const K$=Cm({types:c4}),A4=jt,nTe=Object.freeze(Object.defineProperty({__proto__:null,default:A4},Symbol.toStringTag,{value:"Module"}));let mx=class extends Wo(Pt){constructor(t){super(t),this.handles.add([this.on("before-add",i=>{Re(i.item)&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(t){t!==this._get("owner")&&(this._releaseAll(),this._set("owner",t),this._ownAll())}_ownAll(){for(const t of this.items)this._own(t)}_releaseAll(){for(const t of this.items)this._release(t)}_createNewInstance(t){return this.itemType?new(Pt.ofType(this.itemType.Type))(t):new Pt(t)}};function h8(e,t){return{type:e,cast:QY,set(i){const r=d0(i,this._get(t),e);r.owner=this,this._set(t,r)}}}h([p()],mx.prototype,"owner",null),mx=h([ce("esri.core.support.OwningCollection")],mx);let Xg=class extends mx{_own(t){t.layer&&"remove"in t.layer&&t.layer!==this.owner&&t.layer.remove(t),t.layer=this.owner}_release(t){t.layer===this.owner&&(t.layer=null)}};h([BN({Type:As,ensureType:nn(As)})],Xg.prototype,"itemType",void 0),Xg=h([ce("esri.support.GraphicsCollection")],Xg);let gd=class extends q0(J0(Rh)){constructor(t){super(t),this.elevationInfo=null,this.graphics=new Xg,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(t){return this.graphics.add(t),this}addMany(t){return this.graphics.addMany(t),this}removeAll(){return this.graphics.removeAll(),this}remove(t){this.graphics.remove(t)}removeMany(t){this.graphics.removeMany(t)}on(t,i){return super.on(t,i)}graphicChanged(t){this.emit("graphic-update",t)}};h([p({type:cte})],gd.prototype,"elevationInfo",void 0),h([p(h8(Xg,"graphics"))],gd.prototype,"graphics",void 0),h([p({type:["show","hide"]})],gd.prototype,"listMode",void 0),h([p()],gd.prototype,"screenSizePerspectiveEnabled",void 0),h([p({readOnly:!0})],gd.prototype,"type",void 0),h([p({constructOnly:!0})],gd.prototype,"internal",void 0),gd=h([ce("esri.layers.GraphicsLayer")],gd);const sTe=gd;var d8;const KE=new ti({flow_from:"flow-from",flow_to:"flow-to"});let no=d8=class extends Lm(Je){constructor(e){super(e),this.density=.8,this.color=new Mt([255,255,255,1]),this.maxPathLength=200,this.trailWidth=1.5,this.flowSpeed=10,this.trailLength=100,this.smoothing=0,this.flowRepresentation="flow-from",this.type="flow",this.authoringInfo=null,this.legendOptions=null,this.trailCap="butt",this.background="none"}clone(){const{density:e,maxPathLength:t,trailWidth:i,flowSpeed:r,trailLength:n,smoothing:s,flowRepresentation:o,trailCap:a,background:l}=this,u=this.color.clone(),c=(this.visualVariables||[]).map(m=>m.clone()),d=this.authoringInfo?.clone(),f=this.legendOptions?.clone();return new d8({density:e,color:u,maxPathLength:t,trailWidth:i,flowSpeed:r,trailLength:n,trailCap:a,background:l,smoothing:s,flowRepresentation:o,visualVariables:c,authoringInfo:d,legendOptions:f})}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}};h([p({type:Number,json:{write:!0}})],no.prototype,"density",void 0),h([p({type:Mt,json:{write:{allowNull:!0}}})],no.prototype,"color",void 0),h([p({type:Number,cast:Oi,json:{write:!0}})],no.prototype,"maxPathLength",void 0),h([p({type:Number,cast:Oi,json:{write:!0}})],no.prototype,"trailWidth",void 0),h([p({type:Number,json:{write:!0}})],no.prototype,"flowSpeed",void 0),h([p({type:Number,json:{write:!0}})],no.prototype,"trailLength",void 0),h([p({type:Number,cast:Oi,json:{write:!1}})],no.prototype,"smoothing",void 0),h([p({type:KE.apiValues,json:{type:KE.jsonValues,read:{reader:KE.read},write:{writer:KE.write}}})],no.prototype,"flowRepresentation",void 0),h([Ft({flowRenderer:"flow"})],no.prototype,"type",void 0),h([p({type:l3,json:{write:!0}})],no.prototype,"authoringInfo",void 0),h([p({type:Zg,json:{write:!0}})],no.prototype,"legendOptions",void 0),h([p({type:String,json:{write:!0}})],no.prototype,"trailCap",void 0),h([p({type:String,json:{write:!0}})],no.prototype,"background",void 0),no=d8=h([ce("esri.renderers.FlowRenderer")],no);const Hie=no;let nv=class extends Je{constructor(){super(...arguments),this.value=null,this.label=null,this.color=null}};h([p({type:Number,json:{write:!0}})],nv.prototype,"value",void 0),h([p({type:String,json:{write:!0}})],nv.prototype,"label",void 0),h([p({type:Mt,json:{type:[wi],write:!0}})],nv.prototype,"color",void 0),nv=h([ce("esri.renderers.support.ColormapInfo")],nv);const Wie=nv;function oTe(e){return"r"in e&&"g"in e&&"b"in e}function Jie(e){return"h"in e&&"s"in e&&"v"in e}function Zie(e){return"l"in e&&"a"in e&&"b"in e}function Yie(e){return"l"in e&&"c"in e&&"h"in e}function aTe(e){return"x"in e&&"y"in e&&"z"in e}const lTe=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],uTe=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function Kie(e,t){const i=[];let r,n;if(e[0].length!==t.length)throw new Error("dimensions do not match");const s=e.length,o=e[0].length;let a=0;for(r=0;r<s;r++){for(a=0,n=0;n<o;n++)a+=e[r][n]*t[n];i.push(a)}return i}function Qie(e){const t=[e.r/255,e.g/255,e.b/255].map(r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4),i=Kie(lTe,t);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function PD(e){const t=Kie(uTe,[e.x/100,e.y/100,e.z/100]).map(i=>{const r=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(r,0))});return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function Xie(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map(i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862);return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function ere(e){const t=e.l,i=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map(r=>r>6/29?r**3:3*(6/29)**2*(r-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function cTe(e){const t=e.l,i=e.a,r=e.b,n=Math.sqrt(i*i+r*r);let s=Math.atan2(r,i);return s=s>0?s:s+2*Math.PI,{l:t,c:n,h:s}}function hTe(e){const t=e.l,i=e.c,r=e.h;return{l:t,a:i*Math.cos(r),b:i*Math.sin(r)}}function dTe(e){return Xie(Qie(e))}function pTe(e){return PD(ere(e))}function fTe(e){return cTe(Xie(Qie(e)))}function mTe(e){return PD(ere(hTe(e)))}function yTe(e){const t=e.r,i=e.g,r=e.b,n=Math.max(t,i,r),s=n-Math.min(t,i,r);let o=n,a=s===0?0:n===t?(i-r)/s%6:n===i?(r-t)/s+2:(t-i)/s+4,l=s===0?0:s/o;return a<0&&(a+=6),a*=60,l*=100,o*=100/255,{h:a,s:l,v:o}}function gTe(e){const t=(e.h+360)%360/60,i=e.s/100,r=e.v/100*255,n=r*i,s=n*(1-Math.abs(t%2-1));let o;switch(Math.floor(t)){case 0:o={r:n,g:s,b:0};break;case 1:o={r:s,g:n,b:0};break;case 2:o={r:0,g:n,b:s};break;case 3:o={r:0,g:s,b:n};break;case 4:o={r:s,g:0,b:n};break;case 5:case 6:o={r:n,g:0,b:s};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+r-n),o.g=Math.round(o.g+r-n),o.b=Math.round(o.b+r-n),o}function C4(e){return oTe(e)?e:Yie(e)?mTe(e):Zie(e)?pTe(e):aTe(e)?PD(e):Jie(e)?gTe(e):e}function $A(e){return Jie(e)?e:yTe(C4(e))}function sz(e){return Zie(e)?e:dTe(C4(e))}function oz(e){return Yie(e)?e:fTe(C4(e))}const zat=["random","ndvi","ndvi2","ndvi3","elevation","gray","hillshade"],ND=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],tre={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"},vTe=new ti({Aspect:"aspect","Black to White":"black-to-white","Blue Bright":"blue-bright","Blue Light to Dark":"blue-light-to-dark","Blue-Green Bright":"blue-green-bright","Blue-Green Light to Dark":"blue-green-light-to-dark","Brown Light to Dark":"brown-light-to-dark","Brown to Blue Green Diverging, Bright":"brown-to-blue-green-diverging-right","Brown to Blue Green Diverging, Dark":"brown-to-blue-green-diverging-dark","Coefficient Bias":"coefficient-bias","Cold to Hot Diverging":"cold-to-hot-diverging","Condition Number":"condition-number","Cyan to Purple":"cyan-to-purple","Cyan-Light to Blue-Dark":"cyan-light-to-blue-dark",Distance:"distance","Elevation #1":"elevation1","Elevation #2":"elevation2",Errors:"errors","Gray Light to Dark":"gray-light-to-dark","Green Bright":"green-bright","Green Light to Dark":"green-light-to-dark","Green to Blue":"green-to-blue","Orange Bright":"orange-bright","Orange Light to Dark":"orange-light-to-dark","Partial Spectrum":"partial-spectrum","Partial Spectrum 1 Diverging":"partial-spectrum-1-diverging","Partial Spectrum 2 Diverging":"partial-spectrum-2-diverging","Pink to YellowGreen Diverging, Bright":"pink-to-yellow-green-diverging-bright","Pink to YellowGreen Diverging, Dark":"pink-to-yellow-green-diverging-dark",Precipitation:"precipitation",Prediction:"prediction","urple Bright":"purple-bright","Purple to Green Diverging, Bright":"purple-to-green-diverging-bright","Purple to Green Diverging, Dark":"purple-to-green-diverging-dark","Purple-Blue Bright":"purple-blue-bright","Purple-Blue Light to Dark":"purple-blue-light-to-dark","Purple-Red Bright":"purple-red-bright","Purple-Red Light to Dark":"purple-red-light-to-dark","Red Bright":"red-bright","Red Light to Dark":"red-light-to-dark","Red to Blue Diverging, Bright":"red-to-blue-diverging-bright","Red to Blue Diverging, Dark":"red-to-blue-diverging-dark","Red to Green":"red-to-green","Red to Green Diverging, Bright":"red-to-green-diverging-bright","Red to Green Diverging, Dark":"red-to-green-diverging-dark",Slope:"slope","Spectrum-Full Bright":"spectrum-full-bright","Spectrum-Full Dark":"spectrum-full-dark","Spectrum-Full Light":"spectrum-full-light",Surface:"surface",Temperature:"temperature","White to Black":"white-to-black","Yellow to Dark Red":"yellow-to-dark-red","Yellow to Green to Dark Blue":"yellow-to-green-to-dark-blue","Yellow to Red":"yellow-to-red","Yellow-Green Bright":"yellow-green-bright","Yellow-Green Light to Dark":"yellow-green-light-to-dark"});function QE(e,t){if(!e||!t||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]>t[i]+2||e[i]<t[i]-2)return!1;return!0}function bTe(e,t){if(!e)return;const i=t||ND;let r=null;return e.type==="algorithmic"?i.some(n=>{if(QE(e.fromColor.toRgb(),n.fromColor)&&QE(e.toColor.toRgb(),n.toColor))return r=n.id,!0}):e.type==="multipart"&&i.some(n=>{const s=e.colorRamps,o=n.colorRamps;if(s&&o&&s.length===o.length&&!o.some((a,l)=>{if(!QE(s[l].fromColor.toRgb(),new Mt(a.fromColor).toRgb())||!QE(s[l].toColor.toRgb(),new Mt(a.toColor).toRgb()))return!0})){if(r)return!0;r=n.id}}),r}function ire(e){const t=bTe(e);return t?tre[t]:null}function Gat(e){const t=vTe.toJSON(e),i=Object.entries(tre).find(n=>n[1]===t)?.[0],r=ND.find(n=>n.id===i);return r?r.colorRamps?{type:"multipart",colorRamps:r.colorRamps.map(n=>({type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:n.fromColor,toColor:n.toColor}))}:{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:r.fromColor,toColor:r.toColor}:null}function rre(e){const t=(e=e||{}).numColors||256,i=e.distanceOffset||0,r=e.isCustomInterval!=null?e.isCustomInterval:e.distanceInterval!==null&&e.distanceInterval!==1/(t-1),n=e.distanceInterval||1/(t-1);return{...e,numColors:t,distanceOffset:i,interpolateAlpha:!!e.interpolateAlpha,distanceInterval:n,isCustomInterval:r,weights:e.weights}}function wTe(e,t,i){const{numColors:r,distanceOffset:n,distanceInterval:s,isCustomInterval:o}=i,a=e.s===0,l=t.s===0;let u=e.h,c=t.h;a&&!l?u=c:l&&!a&&(t={...t,h:u},c=u);let d,f=Math.abs(c-u);const m=360;f<m/2?d=(c-u)*s:(f=m-f,d=u>c?f*s:-f*s);const g=(t.s-e.s)*s,v=(t.v-e.v)*s;let{s:b,v:x}=e,S=u;if(n){const _=n/s;S=(S+_*d+m)%m,b+=_*g,x+=_*v}const T=[];for(let _=0;_<r-1;_++)T.push({h:S,s:b,v:x}),S=(S+d+m)%m,b+=g,x+=v;return T.push(o?{h:S,s:b,v:x}:t),T}function _Te(e,t,i){const{numColors:r,distanceOffset:n,distanceInterval:s,isCustomInterval:o}=i;let{l:a,a:l,b:u}=e;const c=(t.l-a)*s,d=(t.a-l)*s,f=(t.b-u)*s,m=[];if(n){const g=n/s;a+=g*c,l+=g*d,u+=g*f}for(let g=0;g<r-1;g++)m.push({l:a,a:l,b:u}),a+=c,l+=d,u+=f;return m.push(o?{l:a,a:l,b:u}:t),m}function xTe(e,t,i){const{numColors:r,distanceOffset:n,distanceInterval:s,isCustomInterval:o}=i,a=e.h,l=t.h,u=2*Math.PI;let c;if(a<=l){const S=l-a,T=l-a-u;c=Math.abs(T)<Math.abs(S)?T:S}else{const S=l+u-a,T=l-a;c=Math.abs(T)<Math.abs(S)?T:S}const d=c*s,f=(t.l-e.l)*s,m=(t.c-e.c)*s;let{l:g,c:v,h:b}=e;if(n){const S=n/s;g+=S*f,v+=S*m,b=(b+S*d+u)%u}const x=[];for(let S=0;S<r-1;S++)x.push({l:g,c:v,h:b}),g+=f,v+=m,b=(b+d+u)%u;return x.push(o?{l:g,c:v,h:b}:t),x}function nre(e,t){let{fromColor:i,toColor:r}=e;i.length===3&&(i=i.concat([255])),r.length===3&&(r=r.concat([255]));const n=e.algorithm||"esriCIELabAlgorithm",s=rre(t),{numColors:o,distanceOffset:a,isCustomInterval:l,interpolateAlpha:u}=s;if(o===1&&a===0)return[i];if(o===2&&a===0&&!l)return[i,r];const c={r:i[0],g:i[1],b:i[2]},d={r:r[0],g:r[1],b:r[2]},f=n==="esriCIELabAlgorithm"?_Te(sz(c),sz(d),s):n==="esriHSVAlgorithm"?wTe($A(c),$A(d),s):xTe(oz(c),oz(d),s),m=[],g=i[3]??255,v=((r[3]??255)-g)/(o-1);for(let b=0;b<o;b++){const{r:x,g:S,b:T}=C4(f[b]),_=u?Math.round(g+v*b):255;m.push([x,S,T,_])}return m}function STe(e,t){const{numColors:i,interpolateAlpha:r}=rre(t);let n=t?.weights;const{colorRamps:s}=e;if(n){const f=n.reduce((m,g)=>m+g);n=n.map(m=>m/f)}else{n=[];for(let f=0;f<s.length;f++)n[f]=1/s.length}const o=[];let a=0,l=0;const u=1/(i-1);let c=!1;for(let f=0;f<s.length;f++){let m=c?0:a*u-l,g=f===s.length-1?i-1-a:(n[f]-m)/u;if(c=Math.ceil(g)===g,g=Math.ceil(g),g===0)continue;m/=n[f];const v=nre(s[f],{numColors:g,interpolateAlpha:r,distanceOffset:m,distanceInterval:u/n[f]});a+=v.length,o.push(...v),l+=n[f]}const d=[...s[s.length-1].toColor];return d.length===3&&d.push(255),o.push(d),o}function ETe(e,t){const i="toJSON"in e?e.toJSON():e;return i.type==="multipart"?STe(i,t):nre(i,t)}function S0(e,t){const i=ETe(e,t),r=t?.interpolateAlpha;return i.forEach((n,s)=>{n.unshift(s),r||n.pop()}),i}function sre(e){const t=ire(e);if(e){if(e.type==="algorithmic")return{...az(e),Name:t};if(e.colorRamps){const i=e.colorRamps.map(az);return{type:"MultiPartColorRamp",NumColorRamps:i.length,ArrayOfColorRamp:i,Name:t}}}}function az(e){if(e)return{Algorithm:e.toJSON()?.Algorithm||"esriHSVAlgorithm",type:"AlgorithmicColorRamp",FromColor:lz(e.fromColor),ToColor:lz(e.toColor)}}function lz(e){const t=$A(e);return{type:"HsvColor",Hue:t.h,Saturation:t.s,Value:t.v,AlphaValue:255}}function MTe(e){const t=e.reverse().map(i=>{const r=i.toString(16);return r.length<2?"0"+r:r});return 4294967295&Number.parseInt(t.join(""),16)}var T2;let A2=T2=class extends Je{constructor(e){super(e),this.colormapInfos=null,this.type="raster-colormap"}static createFromColormap(e,t){if(!e)return null;const i=e[0].length===5,r=[...e].sort(n=>n[0][0]-n[1][0]).map(n=>Wie.fromJSON({value:n[0],color:i?n.slice(1,5):n.slice(1,4).concat([255]),label:t?t[n[0]]??"":n[0]}));return new T2({colormapInfos:r})}static createFromColorramp(e){const t=S0(e);return T2.createFromColormap(t)}clone(){return new T2({colormapInfos:this.colormapInfos.map(e=>e.toJSON())})}extractColormap(){return this.colormapInfos.map(({value:e,color:t})=>[e,t.r,t.g,t.b,t.a>1?t.a:255*t.a&255]).sort((e,t)=>e[0]-t[0])}};h([p({type:[Wie],json:{write:!0}})],A2.prototype,"colormapInfos",void 0),h([Ft({rasterColormap:"raster-colormap"})],A2.prototype,"type",void 0),A2=T2=h([ce("esri.renderers.RasterColormapRenderer")],A2);const FD=A2;var p8;let Ja=p8=class extends Je{constructor(e){super(e),this.altitude=45,this.azimuth=315,this.colorRamp=null,this.hillshadeType="traditional",this.pixelSizePower=.664,this.pixelSizeFactor=.024,this.scalingType="none",this.type="raster-shaded-relief",this.zFactor=1}readColorRamp(e){return VF(e)}clone(){return new p8({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:Le(this.colorRamp)})}};h([p({type:Number,json:{write:!0}})],Ja.prototype,"altitude",void 0),h([p({type:Number,json:{write:!0}})],Ja.prototype,"azimuth",void 0),h([p({types:UF,json:{write:!0}})],Ja.prototype,"colorRamp",void 0),h([Ye("colorRamp")],Ja.prototype,"readColorRamp",null),h([p({type:["traditional","multi-directional"],json:{write:!0}})],Ja.prototype,"hillshadeType",void 0),h([p({type:Number,json:{write:!0}})],Ja.prototype,"pixelSizePower",void 0),h([p({type:Number,json:{write:!0}})],Ja.prototype,"pixelSizeFactor",void 0),h([p({type:["none","adjusted"],json:{write:!0}})],Ja.prototype,"scalingType",void 0),h([Ft({rasterShadedRelief:"raster-shaded-relief"})],Ja.prototype,"type",void 0),h([p({type:Number,json:{write:!0}})],Ja.prototype,"zFactor",void 0),Ja=p8=h([ce("esri.renderers.RasterShadedReliefRenderer")],Ja);const ore=Ja,yx=new ti({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"}),are={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"};var f8;let Mn=f8=class extends Je{constructor(e){super(e),this.colorRamp=null,this.computeGamma=!1,this.dynamicRangeAdjustment=!1,this.gamma=[],this.maxPercent=null,this.minPercent=null,this.numberOfStandardDeviations=null,this.outputMax=null,this.outputMin=null,this.sigmoidStrengthLevel=null,this.statistics=[],this.histograms=null,this.useGamma=!1,this.stretchType="none",this.type="raster-stretch"}readColorRamp(e){if(e)return VF(e)}writeStatistics(e,t,i){e?.length&&(Array.isArray(e[0])||(e=e.map(r=>[r.min,r.max,r.avg,r.stddev])),t[i]=e)}readStretchType(e,t){let i=t.stretchType;return typeof i=="number"&&(i=are[i]),yx.read(i)}clone(){return new f8({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:Le(this.statistics),gamma:Le(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:Le(this.colorRamp),histograms:Le(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})}};h([p({types:UF,json:{write:!0}})],Mn.prototype,"colorRamp",void 0),h([Ye("colorRamp")],Mn.prototype,"readColorRamp",null),h([p({type:Boolean,json:{write:!0}})],Mn.prototype,"computeGamma",void 0),h([p({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],Mn.prototype,"dynamicRangeAdjustment",void 0),h([p({type:[Number],json:{write:!0}})],Mn.prototype,"gamma",void 0),h([p({type:Number,json:{write:!0}})],Mn.prototype,"maxPercent",void 0),h([p({type:Number,json:{write:!0}})],Mn.prototype,"minPercent",void 0),h([p({type:Number,json:{write:!0}})],Mn.prototype,"numberOfStandardDeviations",void 0),h([p({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],Mn.prototype,"outputMax",void 0),h([p({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],Mn.prototype,"outputMin",void 0),h([p({type:Number,json:{write:!0}})],Mn.prototype,"sigmoidStrengthLevel",void 0),h([p({json:{type:[[Number]],write:!0}})],Mn.prototype,"statistics",void 0),h([p()],Mn.prototype,"histograms",void 0),h([it("statistics")],Mn.prototype,"writeStatistics",null),h([p({type:Boolean,json:{write:!0}})],Mn.prototype,"useGamma",void 0),h([p({type:yx.apiValues,json:{type:yx.jsonValues,write:yx.write}})],Mn.prototype,"stretchType",void 0),h([Ye("stretchType",["stretchType"])],Mn.prototype,"readStretchType",null),h([Ft({rasterStretch:"raster-stretch"})],Mn.prototype,"type",void 0),Mn=f8=h([ce("esri.renderers.RasterStretchRenderer")],Mn);const DD=Mn,XE={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new fa({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Et.WebMercator}),minus180Line:new fa({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Et.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new fa({paths:[[[180,-180],[180,180]]],spatialReference:Et.WGS84}),minus180Line:new fa({paths:[[[-180,-180],[-180,180]]],spatialReference:Et.WGS84})}};function Ng(e,t){return Math.ceil((e-t)/(2*t))}function lre(e,t){const i=gx(e);for(const r of i)for(const n of r)n[0]+=t;return e}function gx(e){return Wg(e)?e.rings:e.paths}function jm(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function Hs(e){return typeof e=="string"?Ln(e):Le(e)}function gp(e,t,i){const r={};for(const n in e){if(n==="declaredClass")continue;const s=e[n];if(s!=null&&typeof s!="function")if(Array.isArray(s)){r[n]=[];for(let o=0;o<s.length;o++)r[n][o]=gp(s[o])}else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(i&&i[n]);r[n]=t?o:JSON.stringify(o)}else r[n]=t?s:JSON.stringify(s);else r[n]=s}return r}async function ITe(e,t,i,r){const n=Hs(e),s=t[0].spatialReference,o={...r,query:{...n.query,f:"json",sr:JSON.stringify(s),target:JSON.stringify({geometryType:bc(t[0]),geometries:t}),cutter:JSON.stringify(i)}},a=await St(n.path+"/cut",o),{cutIndexes:l,geometries:u=[]}=a.data;return{cutIndexes:l,geometries:u.map(c=>{const d=Il(c);return d.spatialReference=s,d})}}function TTe(e){return{geometryType:bc(e[0]),geometries:e.map(t=>t.toJSON())}}function ATe(e,t,i){const r=dve(t);return e.map(n=>{const s=r.fromJSON(n);return s.spatialReference=i,s})}async function CTe(e,t,i){const r=typeof e=="string"?Ln(e):e,n=t[0].spatialReference,s=bc(t[0]),o={...i,query:{...r.query,f:"json",sr:n.wkid?n.wkid:JSON.stringify(n),geometries:JSON.stringify(TTe(t))}},{data:a}=await St(r.path+"/simplify",o);return ATe(a.geometries,s,n)}const ure=et.getLogger("esri.geometry.support.normalizeUtils");function $Te(e){return e.type==="polygon"}function OTe(e){return e[0].type==="polygon"}function RTe(e){return e[0].type==="polyline"}function cre(e,t){if(!(e instanceof fa||e instanceof Aa)){const n="straightLineDensify: the input geometry is neither polyline nor polygon";throw ure.error(n),new Ce(n)}const i=gx(e),r=[];for(const n of i){const s=[];r.push(s),s.push([n[0][0],n[0][1]]);for(let o=0;o<n.length-1;o++){const a=n[o][0],l=n[o][1],u=n[o+1][0],c=n[o+1][1],d=Math.sqrt((u-a)*(u-a)+(c-l)*(c-l)),f=(c-l)/d,m=(u-a)/d,g=d/t;if(g>1){for(let S=1;S<=g-1;S++){const T=S*t,_=m*T+a,M=f*T+l;s.push([_,M])}const v=(d+Math.floor(g-1)*t)/2,b=m*v+a,x=f*v+l;s.push([b,x])}s.push([u,c])}}return $Te(e)?new Aa({rings:r,spatialReference:e.spatialReference}):new fa({paths:r,spatialReference:e.spatialReference})}function uz(e,t,i){if(t){const r=cre(e,1e6);e=Ig(r,!0)}return i&&(e=lre(e,i)),e}function cz(e,t,i){if(Array.isArray(e)){const r=e[0];if(r>t){const n=Ng(r,t);e[0]=r+n*(-2*t)}else if(r<i){const n=Ng(r,i);e[0]=r+n*(-2*i)}}else{const r=e.x;if(r>t){const n=Ng(r,t);e=e.clone().offset(n*(-2*t),0)}else if(r<i){const n=Ng(r,i);e=e.clone().offset(n*(-2*i),0)}}return e}function kTe(e,t){let i=-1;for(let r=0;r<t.cutIndexes.length;r++){const n=t.cutIndexes[r],s=t.geometries[r],o=gx(s);for(let a=0;a<o.length;a++){const l=o[a];l.some(u=>{if(u[0]<180)return!0;{let c=0;for(let f=0;f<l.length;f++){const m=l[f][0];c=m>c?m:c}c=Number(c.toFixed(9));const d=-360*Ng(c,180);for(let f=0;f<l.length;f++){const m=s.getPoint(a,f);s.setPoint(a,f,m.clone().offset(d,0))}return!0}})}if(n===i){if(OTe(e))for(const a of gx(s))e[n]=e[n].addRing(a);else if(RTe(e))for(const a of gx(s))e[n]=e[n].addPath(a)}else i=n,e[n]=s}return e}async function Z0(e,t,i){if(!Array.isArray(e))return Z0([e],t);t&&typeof t!="string"&&ure.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof t=="string"?t:t?.url??Ri.geometryServiceUrl;let n,s,o,a,l,u,c,d,f=0;const m=[],g=[];for(const _ of e)if(Re(_))g.push(_);else if(n||(n=_.spatialReference,s=gl(n),o=n.isWebMercator,u=o?102100:4326,a=XE[u].maxX,l=XE[u].minX,c=XE[u].plus180Line,d=XE[u].minus180Line),s)if(_.type==="mesh")g.push(_);else if(_.type==="point")g.push(cz(_.clone(),a,l));else if(_.type==="multipoint"){const M=_.clone();M.points=M.points.map(I=>cz(I,a,l)),g.push(M)}else if(_.type==="extent"){const M=_.clone()._normalize(!1,!1,s);g.push(M.rings?new Aa(M):M)}else if(_.extent){const M=_.extent,I=Ng(M.xmin,l)*(2*a);let $=I===0?_.clone():lre(_.clone(),I);M.offset(I,0),M.intersects(c)&&M.xmax!==a?(f=M.xmax>f?M.xmax:f,$=uz($,o),m.push($),g.push("cut")):M.intersects(d)&&M.xmin!==l?(f=M.xmax*(2*a)>f?M.xmax*(2*a):f,$=uz($,o,360),m.push($),g.push("cut")):g.push($)}else g.push(_.clone());else g.push(_);let v=Ng(f,a),b=-90;const x=v,S=new fa;for(;v>0;){const _=360*v-180;S.addPath([[_,b],[_,-1*b]]),b*=-1,v--}if(m.length>0&&x>0){const _=kTe(m,await ITe(r,m,S,i)),M=[],I=[];for(let B=0;B<g.length;B++){const z=g[B];if(z!=="cut")I.push(z);else{const W=_.shift(),J=e[B];ee(J)&&J.type==="polygon"&&J.rings&&J.rings.length>1&&W.rings.length>=J.rings.length?(M.push(W),I.push("simplify")):I.push(o?Zf(W):W)}}if(!M.length)return I;const $=await CTe(r,M,i),L=[];for(let B=0;B<I.length;B++){const z=I[B];z!=="simplify"?L.push(z):L.push(o?Zf($.shift()):$.shift())}return L}const T=[];for(let _=0;_<g.length;_++){const M=g[_];if(M!=="cut")T.push(M);else{const I=m.shift();T.push(o===!0?Zf(I):I)}}return T}function qat(e,t){const i=gl(t);if(i){const[r,n]=i.valid,s=n-r;if(e<r)for(;e<r;)e+=s;if(e>n)for(;e>n;)e-=s}return e}let hz=class{constructor(t=null,i=null,r=null){this.minValue=t,this.maxValue=i,this.noDataValue=r}};const LTe=9999999e31,PTe=2e-7,NTe={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Rw(e){return NTe[e]??[-34028234663852886e22,34028234663852886e22]}function jD(e,t,i){if(e.depthCount&&e.depthCount>1)return;const{pixels:r,statistics:n,pixelType:s}=e,o=r[0].length,a=e.bandMasks??[],l=e.mask??new Uint8Array(o).fill(255),u=s==="f32"||s==="f64",c=Rw(s);let d=!1;for(let f=0;f<r.length;f++){const m=typeof t=="number"?t:t[f];if(m==null)continue;const g=n?.[f].minValue??c[0],v=n?.[f].maxValue??c[1];if(g>m+Number.EPSILON||v<m-Number.EPSILON)continue;const b=a[f]||new Uint8Array(o).fill(255),x=r[f],S=i?.customFloatTolerance;if(u&&S!==0){let T=S;T||(T=Math.abs(m)>=LTe?PTe*Math.abs(m):s==="f32"?2**-23:Number.EPSILON);for(let _=0;_<x.length;_++)b[_]&&Math.abs(x[_]-m)<T&&(x[_]=0,b[_]=0,l[_]=0,d=!0)}else for(let T=0;T<x.length;T++)b[T]&&x[T]===m&&(x[T]=0,b[T]=0,l[T]=0,d=!0);a[f]=b}d&&(e.bandMasks=a,e.mask=l),d&&"updateStatistics"in e&&e.updateStatistics()}var Zy;let so=Zy=class extends Je{static createEmptyBand(e,t){return new(Zy.getPixelArrayConstructor(e))(t)}static getPixelArrayConstructor(e){let t;switch(e){case"u1":case"u2":case"u4":case"u8":t=Uint8Array;break;case"u16":t=Uint16Array;break;case"u32":t=Uint32Array;break;case"s8":t=Int8Array;break;case"s16":t=Int16Array;break;case"s32":t=Int32Array;break;case"f32":case"c64":case"c128":case"unknown":t=Float32Array;break;case"f64":t=Float64Array}return t}constructor(e){super(e),this.width=null,this.height=null,this.pixelType="f32",this.validPixelCount=null,this.mask=null,this.maskIsAlpha=!1,this.premultiplyAlpha=!1,this.statistics=null,this.depthCount=1}castPixelType(e){if(!e)return"f32";let t=e.toLowerCase();return["u1","u2","u4"].includes(t)?t="u8":["unknown","u8","s8","u16","s16","u32","s32","f32","f64"].includes(t)||(t="f32"),t}getPlaneCount(){return this.pixels?.length}addData(e){if(!e.pixels||e.pixels.length!==this.width*this.height)throw new Ce("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]),this.statistics||(this.statistics=[]),this.pixels.push(e.pixels),this.statistics.push(e.statistics??new hz)}getAsRGBA(){const e=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case"s8":case"s16":case"u16":case"s32":case"u32":case"f32":case"f64":this._fillFromNon8Bit(e);break;default:this._fillFrom8Bit(e)}return new Uint8ClampedArray(e)}getAsRGBAFloat(){const e=new Float32Array(this.width*this.height*4);return this._fillFrom32Bit(e),e}updateStatistics(){if(!this.pixels)return;this.statistics=this.pixels.map(i=>this._calculateBandStatistics(i,this.mask));const e=this.mask;let t=0;if(ee(e))for(let i=0;i<e.length;i++)e[i]&&t++;else t=this.width*this.height;this.validPixelCount=t}clamp(e){if(!e||e==="f64"||e==="f32"||!this.pixels)return;const[t,i]=Rw(e),r=this.pixels,n=this.width*this.height,s=r.length;let o,a,l;const u=[];for(let c=0;c<s;c++){l=Zy.createEmptyBand(e,n),o=r[c];for(let d=0;d<n;d++)a=o[d],l[d]=a>i?i:a<t?t:a;u.push(l)}this.pixels=u,this.pixelType=e}extractBands(e){const{pixels:t,statistics:i}=this;if(Re(e)||e.length===0||!t||t.length===0)return this;const r=t.length,n=e.some(o=>o>=t.length),s=r===e.length&&!e.some((o,a)=>o!==a);return n||s?this:new Zy({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:e.map(o=>t[o]),statistics:i&&e.map(o=>i[o])})}clone(){const e=new Zy({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});let t;ee(this.mask)&&(this.mask instanceof Uint8Array?e.mask=new Uint8Array(this.mask):e.mask=this.mask.slice(0));const i=Zy.getPixelArrayConstructor(this.pixelType);if(this.pixels&&this.pixels.length>0){e.pixels=[];const r=!!this.pixels[0].slice;for(t=0;t<this.pixels.length;t++)e.pixels[t]=r?this.pixels[t].slice(0,this.pixels[t].length):new i(this.pixels[t])}if(this.statistics)for(e.statistics=[],t=0;t<this.statistics.length;t++)e.statistics[t]=Le(this.statistics[t]);return e.premultiplyAlpha=this.premultiplyAlpha,e}_fillFrom8Bit(e){const{mask:t,maskIsAlpha:i,premultiplyAlpha:r,pixels:n}=this;if(!e||!n||!n.length)return void et.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.");let s,o,a,l;s=o=a=n[0],n.length>=3?(o=n[1],a=n[2]):n.length===2&&(o=n[1]);const u=new Uint32Array(e),c=this.width*this.height;if(s.length===c)if(ee(t)&&t.length===c)if(i)for(l=0;l<c;l++){const d=t[l];if(d){const f=d/255;u[l]=r?d<<24|a[l]*f<<16|o[l]*f<<8|s[l]*f:d<<24|a[l]<<16|o[l]<<8|s[l]}}else for(l=0;l<c;l++)t[l]&&(u[l]=255<<24|a[l]<<16|o[l]<<8|s[l]);else for(l=0;l<c;l++)u[l]=255<<24|a[l]<<16|o[l]<<8|s[l];else et.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.")}_fillFromNon8Bit(e){const{pixels:t,mask:i,statistics:r}=this;if(!e||!t||!t.length)return void et.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.");const n=this.pixelType;let s=1,o=0,a=1;if(r&&r.length>0){for(const v of r)if(v.minValue!=null&&(o=Math.min(o,v.minValue)),v.maxValue!=null&&v.minValue!=null){const b=v.maxValue-v.minValue;a=Math.max(a,b)}s=255/a}else{let v=255;n==="s8"?(o=-128,v=127):n==="u16"?v=65535:n==="s16"?(o=-32768,v=32767):n==="u32"?v=4294967295:n==="s32"?(o=-2147483648,v=2147483647):n==="f32"?(o=-34e38,v=34e38):n==="f64"&&(o=-Number.MAX_VALUE,v=Number.MAX_VALUE),s=255/(v-o)}const l=new Uint32Array(e),u=this.width*this.height;let c,d,f,m,g;if(c=d=f=t[0],c.length!==u)return et.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(t.length>=2)if(d=t[1],t.length>=3&&(f=t[2]),ee(i)&&i.length===u)for(m=0;m<u;m++)i[m]&&(l[m]=255<<24|(f[m]-o)*s<<16|(d[m]-o)*s<<8|(c[m]-o)*s);else for(m=0;m<u;m++)l[m]=255<<24|(f[m]-o)*s<<16|(d[m]-o)*s<<8|(c[m]-o)*s;else if(ee(i)&&i.length===u)for(m=0;m<u;m++)g=(c[m]-o)*s,i[m]&&(l[m]=255<<24|g<<16|g<<8|g);else for(m=0;m<u;m++)g=(c[m]-o)*s,l[m]=255<<24|g<<16|g<<8|g}_fillFrom32Bit(e){const{pixels:t,mask:i}=this;if(!e||!t||!t.length)return et.getLogger(this.declaredClass).error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");let r,n,s,o;r=n=s=t[0],t.length>=3?(n=t[1],s=t[2]):t.length===2&&(n=t[1]);const a=this.width*this.height;if(r.length!==a)return et.getLogger(this.declaredClass).error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let l=0;if(ee(i)&&i.length===a)for(o=0;o<a;o++)e[l++]=r[o],e[l++]=n[o],e[l++]=s[o],e[l++]=1&i[o];else for(o=0;o<a;o++)e[l++]=r[o],e[l++]=n[o],e[l++]=s[o],e[l++]=1}_calculateBandStatistics(e,t){let i=1/0,r=-1/0;const n=e.length;let s,o=0;if(ee(t))for(s=0;s<n;s++)t[s]&&(o=e[s],i=o<i?o:i,r=o>r?o:r);else for(s=0;s<n;s++)o=e[s],i=o<i?o:i,r=o>r?o:r;return new hz(i,r)}};h([p({json:{write:!0}})],so.prototype,"width",void 0),h([p({json:{write:!0}})],so.prototype,"height",void 0),h([p({json:{write:!0}})],so.prototype,"pixelType",void 0),h([di("pixelType")],so.prototype,"castPixelType",null),h([p({json:{write:!0}})],so.prototype,"validPixelCount",void 0),h([p({json:{write:!0}})],so.prototype,"mask",void 0),h([p({json:{write:!0}})],so.prototype,"maskIsAlpha",void 0),h([p({json:{write:!0}})],so.prototype,"pixels",void 0),h([p()],so.prototype,"premultiplyAlpha",void 0),h([p({json:{write:!0}})],so.prototype,"statistics",void 0),h([p({json:{write:!0}})],so.prototype,"depthCount",void 0),h([p({json:{write:!0}})],so.prototype,"noDataValues",void 0),h([p({json:{write:!0}})],so.prototype,"bandMasks",void 0),so=Zy=h([ce("esri.layers.support.PixelBlock")],so);const ai=so;var dz,pz;(function(e){e[e.matchAny=0]="matchAny",e[e.matchAll=1]="matchAll"})(dz||(dz={})),function(e){e[e.bestMatch=0]="bestMatch",e[e.fail=1]="fail"}(pz||(pz={}));const Wat=6;function $r(e){return ee(e)&&e.declaredClass==="esri.layers.support.PixelBlock"&&e.pixels&&e.pixels.length>0}function fz(e,t){if(!t?.length||!$r(e))return e;const i=e.pixels.length;return t&&t.some(r=>r>=i)||i===1&&t.length===1&&t[0]===0?e:i!==t.length||t.some((r,n)=>r!==n)?new ai({pixelType:e.pixelType,width:e.width,height:e.height,mask:e.mask,validPixelCount:e.validPixelCount,maskIsAlpha:e.maskIsAlpha,pixels:t.map(r=>e.pixels[r]),statistics:e.statistics&&t.map(r=>e.statistics[r])}):e}function Jat(e){if(!e?.length||e.some(c=>!$r(c)))return null;if(e.length===1)return ee(e[0])?e[0].clone():null;const t=e,{width:i,height:r,pixelType:n}=t[0];if(t.some(c=>c.width!==i||c.height!==r))return null;const s=t.map(({mask:c})=>c).filter(c=>c!=null);let o=null;s.length&&(o=new Uint8Array(i*r),o.set(s[0]),s.length>1&&dre(s.slice(1),o));const a=[];t.forEach(({pixels:c})=>a.push(...c));const l=t.map(({statistics:c})=>c).filter(c=>c?.length),u=[];return l.forEach(c=>u.push(...c)),new ai({pixelType:n,width:i,height:r,mask:o,pixels:a,statistics:u.length?u:null})}function f_(e){if(!e)return;const t=e.colormap;if(!t||t.length===0)return;const i=t.sort((d,f)=>d[0]-f[0]);let r=0;i[0][0]<0&&(r=i[0][0]);const n=Math.max(256,i[i.length-1][0]-r+1),s=new Uint8Array(4*n),o=[];let a,l=0,u=0;const c=i[0].length===5;if(n>65536)return i.forEach(d=>{o[d[0]-r]=c?d.slice(1):d.slice(1).concat([255])}),{indexed2DColormap:o,offset:r,alphaSpecified:c};if(e.fillUnspecified)for(a=i[u],l=a[0]-r;l<n;l++)s[4*l]=a[1],s[4*l+1]=a[2],s[4*l+2]=a[3],s[4*l+3]=c?a[4]:255,l===a[0]-r&&(a=u===i.length-1?a:i[++u]);else for(l=0;l<i.length;l++)a=i[l],u=4*(a[0]-r),s[u]=a[1],s[u+1]=a[2],s[u+2]=a[3],s[u+3]=c?a[4]:255;return{indexedColormap:s,offset:r,alphaSpecified:c}}function Q$(e,t){if(!$r(e)||!t||!t.indexedColormap&&!t.indexed2DColormap)return e;const i=e.clone(),r=i.pixels;let n=i.mask;const s=i.width*i.height;if(r.length!==1)return e;const{indexedColormap:o,indexed2DColormap:a,offset:l,alphaSpecified:u}=t;let c=0;const d=r[0],f=new Uint8Array(d.length),m=new Uint8Array(d.length),g=new Uint8Array(d.length);let v,b=0;if(o){const x=o.length-1;if(ee(n))for(c=0;c<s;c++)n[c]&&(b=4*(d[c]-l),b<l||b>x?n[c]=0:(f[c]=o[b],m[c]=o[b+1],g[c]=o[b+2],n[c]=o[b+3]));else{for(n=new Uint8Array(s),c=0;c<s;c++)b=4*(d[c]-l),b<l||b>x?n[c]=0:(f[c]=o[b],m[c]=o[b+1],g[c]=o[b+2],n[c]=o[b+3]);i.mask=n}}else if(a)if(ee(n))for(c=0;c<s;c++)n[c]&&(v=a[d[c]],f[c]=v[0],m[c]=v[1],g[c]=v[2],n[c]=v[3]);else{for(n=new Uint8Array(s),c=0;c<s;c++)v=a[d[c]],f[c]=v[0],m[c]=v[1],g[c]=v[2],n[c]=v[3];i.mask=n}return i.pixels=[f,m,g],i.statistics=null,i.pixelType="u8",i.maskIsAlpha=u,i}function mz(e,t){if(!$r(e))return null;const{pixels:i,mask:r}=e,n=i.length;let s=t.lut;const{offset:o}=t;s&&s[0].length===1&&(s=i.map(()=>s));const a=[],l=t.outputPixelType||"u8";for(let c=0;c<n;c++){const d=hre(i[c],r,s[c],o||0,l);a.push(d)}const u=new ai({width:e.width,height:e.height,pixels:a,mask:r,pixelType:l});return u.updateStatistics(),u}function hre(e,t,i,r,n){const s=e.length,o=ai.createEmptyBand(n,s);if(t)for(let a=0;a<s;a++)t[a]&&(o[a]=i[e[a]-r]);else for(let a=0;a<s;a++)o[a]=i[e[a]-r];return o}function FTe(e,t){if(!$r(e))return null;const i=e.clone(),{pixels:r}=i,n=i.width*i.height,s=t.length,o=Math.floor(s/2),a=t[Math.floor(o)],l=r[0];let u,c,d,f,m,g,v=!1;const b=new Uint8Array(n),x=new Uint8Array(n),S=new Uint8Array(n);let T=i.mask;const _=t[0].mappedColor.length===4;for(T||(T=new Uint8Array(n),T.fill(_?255:1),i.mask=T),m=0;m<n;m++)if(T[m]){for(u=l[m],v=!1,g=o,c=a,d=0,f=s-1;f-d>1;){if(u===c.value){v=!0;break}u>c.value?d=g:f=g,g=Math.floor((d+f)/2),c=t[Math.floor(g)]}v||(u===t[d].value?(c=t[d],v=!0):u===t[f].value?(c=t[f],v=!0):u<t[d].value?(v=!1,c=null):u>t[d].value&&(u<t[f].value?(c=t[d],v=!0):f===s-1?(v=!1,c=null):(c=t[f],v=!0))),v?(b[m]=c.mappedColor[0],x[m]=c.mappedColor[1],S[m]=c.mappedColor[2],T[m]=c.mappedColor[3]):b[m]=x[m]=S[m]=T[m]=0}return i.pixels=[b,x,S],i.mask=T,i.pixelType="u8",i.maskIsAlpha=_,i}function Zat(e,t){if(!$r(e))return null;const{width:i,height:r}=e,{inputRanges:n,outputValues:s,outputPixelType:o,noDataRanges:a,allowUnmatched:l,isLastInputRangeInclusive:u}=t,c=e.pixels[0],d=ai.createEmptyBand(o,c.length),f=e.mask,m=new Uint8Array(i*r);f?m.set(f):m.fill(255);const g=e.pixelType.startsWith("f")?1e-6:0,v=n.map(T=>T-g);v[0]=n[0],v[v.length-1]=n[n.length-1]+(u?1e-6:0);const b=n.length/2,[x,S]=Rw(o);for(let T=0;T<r;T++)for(let _=0;_<i;_++){const M=T*i+_;if(m[M]){const I=c[M];let $=!1;for(let L=b-1;L>=0;L--)if(I===v[2*L]||I>v[2*L]&&I<v[2*L+1]){d[M]=s[L],$=!0;break}$||(l?d[M]=I>S?S:I<x?x:I:m[M]=0)}}if(a?.length)for(let T=0;T<r;T++)for(let _=0;_<i;_++){const M=T*i+_;if(!f||f[M]){const I=c[M];for(let $=0;$<b;$+=2)if(I>=a[$]&&I<=a[$+1]){d[M]=0,m[M]=0;break}}}return new ai({width:i,height:r,pixelType:o,pixels:[d],mask:m})}function yz(e,t,i,r){const n=i!=null&&i.length>=2?new Set(i):null,s=i?.length===1?i[0]:null,o=!!t?.length;for(let a=0;a<e.length;a++)if(r[a]){const l=e[a];if(o){let u=!1;for(let c=0;c<t.length;c+=2)if(l>=t[c]&&l<=t[c+1]){u=!0;break}u||(r[a]=0)}r[a]&&(l===s||n?.has(l))&&(r[a]=0)}}function gz(e,t){const i=e[0].length;for(let r=0;r<i;r++)if(t[r]){let n=!1;for(let s=0;s<e.length;s++)if(e[s][r]){n=!0;break}n||(t[r]=0)}}function dre(e,t){const i=e[0].length;for(let r=0;r<i;r++)if(t[r]){let n=!1;for(let s=0;s<e.length;s++)if(e[s][r]===0){n=!0;break}n&&(t[r]=0)}}function Yat(e,t){if(!$r(e))return null;const{width:i,height:r,pixels:n}=e,s=i*r,o=new Uint8Array(s);e.mask?o.set(e.mask):o.fill(255);const a=n.length,{includedRanges:l,noDataValues:u,outputPixelType:c,matchAll:d,lookups:f}=t;if(f){const m=[];for(let g=0;g<a;g++){const v=f[g],b=hre(n[g],o,v.lut,v.offset||0,"u8");m.push(b)}m.length===1?o.set(m[0]):d?gz(m,o):dre(m,o)}else if(d){const m=[];for(let g=0;g<a;g++){const v=new Uint8Array(s);v.set(o),yz(n[g],l?.slice(2*g,2*g+2),u?.[g],v),m.push(v)}m.length===1?o.set(m[0]):gz(m,o)}else for(let m=0;m<a;m++)yz(n[m],l?.slice(2*m,2*m+2),u?.[m],o);return new ai({width:i,height:r,pixelType:c,pixels:n,mask:o})}function Kat(e){const{srcPixelType:t,inputRanges:i,outputValues:r,allowUnmatched:n,noDataRanges:s,isLastInputRangeInclusive:o,outputPixelType:a}=e;if(t!=="u8"&&t!=="s8"&&t!=="u16"&&t!=="s16")return null;const l=t.includes("16")?65536:256,u=t.includes("s")?-l/2:0,c=ai.createEmptyBand(a,l),d=new Uint8Array(l);n&&d.fill(255);const[f,m]=Rw(a);if(i?.length&&r?.length){const v=i.map(b=>b-1e-6);v[0]=i[0],o&&(v[v.length-1]=i[i.length-1]);for(let b=0;b<v.length;b++){const x=r[b]>m?m:r[b]<f?f:r[b],S=Math.ceil(v[2*b]-u),T=Math.floor(v[2*b+1]-u);for(let _=S;_<=T;_++)c[_]=x,d[_]=255}}if(s?.length)for(let g=0;g<s.length;g++){const v=Math.ceil(s[2*g]-u),b=Math.floor(s[2*g+1]-u);for(let x=v;x<=b;x++)d[x]=0}return{lut:c,offset:u,mask:d}}function Qat(e,t,i){if(e!=="u8"&&e!=="s8"&&e!=="u16"&&e!=="s16")return null;const r=e.includes("16")?65536:256,n=e.includes("s")?-r/2:0,s=new Uint8Array(r);if(t)for(let o=0;o<t.length;o++){const a=Math.ceil(t[2*o]-n),l=Math.floor(t[2*o+1]-n);for(let u=a;u<=l;u++)s[u]=255}else s.fill(255);if(i)for(let o=0;o<i.length;o++)s[i[o]-n]=0;return{lut:s,offset:n}}function DTe(e,t,i,r,n,s,o,a){return{xmin:n<=i*e?0:n<i*e+e?n-i*e:e,ymin:s<=r*t?0:s<r*t+t?s-r*t:t,xmax:n+o<=i*e?0:n+o<i*e+e?n+o-i*e:e,ymax:s+a<=r*t?0:s+a<r*t+t?s+a-r*t:t}}function Xat(e,t){if(!e||e.length===0)return null;const i=e.find(g=>g.pixelBlock);if(!i||Re(i.pixelBlock))return null;const r=(i.extent.xmax-i.extent.xmin)/i.pixelBlock.width,n=(i.extent.ymax-i.extent.ymin)/i.pixelBlock.height,s=.01*Math.min(r,n),o=e.sort((g,v)=>Math.abs(g.extent.ymax-v.extent.ymax)>s?v.extent.ymax-g.extent.ymax:Math.abs(g.extent.xmin-v.extent.xmin)>s?g.extent.xmin-v.extent.xmin:0),a=Math.min.apply(null,o.map(g=>g.extent.xmin)),l=Math.min.apply(null,o.map(g=>g.extent.ymin)),u=Math.max.apply(null,o.map(g=>g.extent.xmax)),c=Math.max.apply(null,o.map(g=>g.extent.ymax)),d={x:Math.round((t.xmin-a)/r),y:Math.round((c-t.ymax)/n)},f={width:Math.round((u-a)/r),height:Math.round((c-l)/n)},m={width:Math.round((t.xmax-t.xmin)/r),height:Math.round((t.ymax-t.ymin)/n)};return Math.round(f.width/i.pixelBlock.width)*Math.round(f.height/i.pixelBlock.height)!==o.length||d.x<0||d.y<0||f.width<m.width||f.height<m.height?null:{extent:t,pixelBlock:jTe(o.map(g=>g.pixelBlock),f,{clipOffset:d,clipSize:m})}}function X$(e,t,i,r,n,s){const{width:o,height:a}=i.block,{x:l,y:u}=i.offset,{width:c,height:d}=i.mosaic,f=DTe(o,a,r,n,l,u,c,d);let m=0,g=0;if(s){const v=s.hasGCSSShiftTransform?360:s.halfWorldWidth??0,b=o*s.resolutionX,x=s.startX+r*b;x<v&&x+b>v?g=s.rightPadding:x>=v&&(m=s.leftMargin-s.rightPadding,g=0)}if(f.xmax-=g,typeof t!="number")for(let v=f.ymin;v<f.ymax;v++){const b=(n*a+v-u)*c+(r*o-l)+m,x=v*o;for(let S=f.xmin;S<f.xmax;S++)e[b+S]=t[x+S]}else for(let v=f.ymin;v<f.ymax;v++){const b=(n*a+v-u)*c+(r*o-l)+m;for(let x=f.xmin;x<f.xmax;x++)e[b+x]=t}}function jTe(e,t,i={}){const{clipOffset:r,clipSize:n,alignmentInfo:s,blockWidths:o}=i;if(o)return UTe(e,t,{blockWidths:o});const a=e.find($=>$r($));if(Re(a))return null;const l=n?n.width:t.width,u=n?n.height:t.height,c=a.width,d=a.height,f=t.width/c,m=t.height/d,g={offset:r||{x:0,y:0},mosaic:n||t,block:{width:c,height:d}},v=a.pixelType,b=ai.getPixelArrayConstructor(v),x=a.pixels.length,S=[];let T,_;for(let $=0;$<x;$++){_=new b(l*u);for(let L=0;L<m;L++)for(let B=0;B<f;B++){const z=e[L*f+B];$r(z)&&(T=z.pixels[$],X$(_,T,g,B,L,s))}S.push(_)}let M;if(e.some($=>Re($)||ee($.mask)&&$.mask.length>0)){M=new Uint8Array(l*u);for(let $=0;$<m;$++)for(let L=0;L<f;L++){const B=e[$*f+L],z=ee(B)?B.mask:null;ee(z)?X$(M,z,g,L,$,s):X$(M,B?1:0,g,L,$,s)}}const I=new ai({width:l,height:u,pixels:S,pixelType:v,mask:M});return I.updateStatistics(),I}function UTe(e,t,i){const r=e.find(m=>ee(m));if(Re(r))return null;const n=e.some(m=>!ee(m)||!!m.mask),{width:s,height:o}=t,a=n?new Uint8Array(s*o):null,{blockWidths:l}=i,u=[],c=r.getPlaneCount(),d=ai.getPixelArrayConstructor(r.pixelType);if(n)for(let m=0,g=0;m<e.length;g+=l[m],m++){const v=e[m];if(!$r(v))continue;const b=v.mask;for(let x=0;x<o;x++)for(let S=0;S<l[m];S++)a[x*s+S+g]=b==null?255:b[x*v.width+S]}for(let m=0;m<c;m++){const g=new d(s*o);for(let v=0,b=0;v<e.length;b+=l[v],v++){const x=e[v];if(!$r(x))continue;const S=x.pixels[m];if(S!=null)for(let T=0;T<o;T++)for(let _=0;_<l[v];_++)g[T*s+_+b]=S[T*x.width+_]}u.push(g)}const f=new ai({width:s,height:o,mask:a,pixels:u,pixelType:r.pixelType});return f.updateStatistics(),f}function elt(e,t,i){if(!$r(e))return null;const{width:r,height:n}=e,s=t.x,o=t.y,a=i.width+s,l=i.height+o;if(s<0||o<0||a>r||l>n||s===0&&o===0&&a===r&&l===n)return e;e.mask||(e.mask=new Uint8Array(r*n));const u=e.mask;for(let c=0;c<n;c++){const d=c*r;for(let f=0;f<r;f++)u[d+f]=c<o||c>=l||f<s||f>=a?0:1}return e.updateStatistics(),e}function VTe(e){if(!$r(e))return null;const t=e.clone(),{width:i,height:r,pixels:n}=e,s=n[0],o=t.pixels[0],a=e.mask;for(let l=2;l<r-1;l++){const u=new Map;for(let d=l-2;d<l+2;d++)for(let f=0;f<4;f++){const m=d*i+f;m_(u,s[m],a?a[m]:1)}o[l*i]=vz(u),o[l*i+1]=o[l*i+2]=o[l*i];let c=3;for(;c<i-1;c++){let d=(l-2)*i+c+1;m_(u,s[d],a?a[d]:1),d=(l-1)*i+c+1,m_(u,s[d],a?a[d]:1),d=l*i+c+1,m_(u,s[d],a?a[d]:1),d=(l+1)*i+c+1,m_(u,s[d],a?a[d]:1),d=(l-2)*i+c-3,eM(u,s[d],a?a[d]:1),d=(l-1)*i+c-3,eM(u,s[d],a?a[d]:1),d=l*i+c-3,eM(u,s[d],a?a[d]:1),d=(l+1)*i+c-3,eM(u,s[d],a?a[d]:1),o[l*i+c]=vz(u)}o[l*i+c+1]=o[l*i+c]}for(let l=0;l<i;l++)o[l]=o[i+l]=o[2*i+l],o[(r-1)*i+l]=o[(r-2)*i+l];return t.updateStatistics(),t}function vz(e){if(e.size===0)return 0;let t=0,i=-1,r=0;const n=e.keys();let s=n.next();for(;!s.done;)r=e.get(s.value),r>t&&(i=s.value,t=r),s=n.next();return i}function eM(e,t,i){if(i===0)return;const r=e.get(t);r===1?e.delete(t):e.set(t,r-1)}function m_(e,t,i){i!==0&&e.set(t,e.has(t)?e.get(t)+1:1)}function BTe(e,t,i){let{x:r,y:n}=t;const{width:s,height:o}=i;if(r===0&&n===0&&o===e.height&&s===e.width)return e;const{width:a,height:l}=e,u=Math.max(0,n),c=Math.max(0,r),d=Math.min(r+s,a),f=Math.min(n+o,l);if(d<0||f<0||!$r(e))return null;r=Math.max(0,-r),n=Math.max(0,-n);const{pixels:m}=e,g=s*o,v=m.length,b=[];for(let _=0;_<v;_++){const M=m[_],I=ai.createEmptyBand(e.pixelType,g);for(let $=u;$<f;$++){const L=$*a;let B=($+n-u)*s+r;for(let z=c;z<d;z++)I[B++]=M[L+z]}b.push(I)}const x=new Uint8Array(g),S=e.mask;for(let _=u;_<f;_++){const M=_*a;let I=(_+n-u)*s+r;for(let $=c;$<d;$++)x[I++]=S?S[M+$]:1}const T=new ai({width:i.width,height:i.height,pixelType:e.pixelType,pixels:b,mask:x});return T.updateStatistics(),T}function zTe(e,t=!0){if(!$r(e))return null;const{pixels:i,width:r,height:n,mask:s,pixelType:o}=e,a=[],l=Math.round(r/2),u=Math.round(n/2),c=n-1,d=r-1;for(let m=0;m<i.length;m++){const g=i[m],v=ai.createEmptyBand(o,l*u);let b=0;for(let x=0;x<n;x+=2)for(let S=0;S<r;S+=2){const T=g[x*r+S];if(t){const _=S===d?T:g[x*r+S+1],M=x===c?T:g[x*r+S+r],I=S===d?M:x===c?_:g[x*r+S+r+1];v[b++]=(T+_+M+I)/4}else v[b++]=T}a.push(v)}let f=null;if(ee(s)){f=new Uint8Array(l*u);let m=0;for(let g=0;g<n;g+=2)for(let v=0;v<r;v+=2){const b=s[g*r+v];if(t){const x=v===d?b:s[g*r+v+1],S=g===c?b:s[g*r+v+r],T=v===d?S:g===c?x:s[g*r+v+r+1];f[m++]=b*x*S*T?1:0}else f[m++]=b}}return new ai({width:l,height:u,pixelType:o,pixels:a,mask:f})}function tlt(e,t,i){if(!$r(e))return null;const{width:r,height:n}=t;let{width:s,height:o}=e;const a=new Map,l={x:0,y:0},u=i==null?1:1+i;let c=e;for(let d=0;d<u;d++){const f=Math.ceil(s/r),m=Math.ceil(o/n);for(let g=0;g<m;g++){l.y=g*n;for(let v=0;v<f;v++){l.x=v*r;const b=BTe(c,l,t);a.set(`${d}/${g}/${v}`,b)}}d<u-1&&(c=zTe(c)),s=Math.round(s/2),o=Math.round(o/2)}return a}function pre(e,t,i,r,n=0){const{width:s,height:o}=e,{width:a,height:l}=t,u=r.cols,c=r.rows,d=Math.ceil(a/u-.1/u),f=Math.ceil(l/c-.1/c);let m,g,v,b,x,S,T;const _=d*u,M=_*f*c,I=new Float32Array(M),$=new Float32Array(M),L=new Uint32Array(M),B=new Uint32Array(M);let z,W,J=0;for(let K=0;K<f;K++)for(let Q=0;Q<d;Q++){m=12*(K*d+Q),g=i[m],v=i[m+1],b=i[m+2],x=i[m+3],S=i[m+4],T=i[m+5];for(let y=0;y<c;y++){J=(K*c+y)*_+Q*u,W=(y+.5)/c;for(let A=0;A<y;A++)z=(A+.5)/u,I[J+A]=(g*z+v*W+b)*s+n,$[J+A]=(x*z+S*W+T)*o+n,L[J+A]=Math.floor(I[J+A]),B[J+A]=Math.floor($[J+A])}m+=6,g=i[m],v=i[m+1],b=i[m+2],x=i[m+3],S=i[m+4],T=i[m+5];for(let y=0;y<c;y++){J=(K*c+y)*_+Q*u,W=(y+.5)/c;for(let A=y;A<u;A++)z=(A+.5)/u,I[J+A]=(g*z+v*W+b)*s+n,$[J+A]=(x*z+S*W+T)*o+n,L[J+A]=Math.floor(I[J+A]),B[J+A]=Math.floor($[J+A])}}return{offsets_x:I,offsets_y:$,offsets_xi:L,offsets_yi:B,gridWidth:_}}function ilt(e,t){const{coefficients:i,spacing:r}=t,{offsets_x:n,offsets_y:s,gridWidth:o}=pre(e,e,i,{rows:r[0],cols:r[1]}),{width:a,height:l}=e,u=new Float32Array(a*l),c=180/Math.PI;for(let d=0;d<l;d++)for(let f=0;f<a;f++){const m=d*o+f,g=d===0?m:m-o,v=d===l-1?m:m+o,b=n[g]-n[v],x=s[v]-s[g];if(isNaN(b)||isNaN(x))u[d*a+f]=90;else{let S=Math.atan2(x,b)*c;S=(360+S)%360,u[d*a+f]=S}}return u}function rlt(e,t,i,r,n="nearest"){if(!$r(e))return null;n==="majority"&&(e=VTe(e));const{pixels:s,mask:o,pixelType:a}=e,l=e.width,u=e.height,c=ai.getPixelArrayConstructor(a),d=s.length,{width:f,height:m}=t;let g=!1;for(let B=0;B<i.length;B+=3)i[B]===-1&&i[B+1]===-1&&i[B+2]===-1&&(g=!0);const{offsets_x:v,offsets_y:b,offsets_xi:x,offsets_yi:S,gridWidth:T}=pre({width:l,height:u},t,i,r,n==="majority"?.5:0);let _;const M=(B,z,W)=>{const J=B instanceof Float32Array||B instanceof Float64Array?0:.5;for(let K=0;K<m;K++){_=K*T;for(let Q=0;Q<f;Q++){if(v[_]<0||b[_]<0)B[K*f+Q]=0;else if(W)B[K*f+Q]=z[x[_]+S[_]*l];else{const y=Math.floor(v[_]),A=Math.floor(b[_]),N=Math.ceil(v[_]),j=Math.ceil(b[_]),oe=v[_]-y,q=b[_]-A;if(!o||o[y+A*l]&&o[y+A*l]&&o[y+j*l]&&o[N+j*l]){const de=(1-oe)*z[y+A*l]+oe*z[N+A*l],re=(1-oe)*z[y+j*l]+oe*z[N+j*l];B[K*f+Q]=(1-q)*de+q*re+J}else B[K*f+Q]=z[x[_]+S[_]*l]}_++}}},I=[];let $;for(let B=0;B<d;B++)$=new c(f*m),M($,s[B],n==="nearest"||n==="majority"),I.push($);const L=new ai({width:f,height:m,pixelType:a,pixels:I});if(ee(o))L.mask=new Uint8Array(f*m),M(L.mask,o,!0);else if(g){L.mask=new Uint8Array(f*m);for(let B=0;B<f*m;B++)L.mask[B]=v[B]<0||b[B]<0?0:1}return L.updateStatistics(),L}const yg=new Map;yg.set("meter-per-second",1),yg.set("kilometer-per-hour",.277778),yg.set("knots",.514444),yg.set("feet-per-second",.3048),yg.set("mile-per-hour",.44704);const m8=180/Math.PI,UD=5,al=new ti({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"});function $4(e,t){return yg.get(e)/yg.get(t)||1}function fre(e){return(450-e)%360}function VD(e,t="geographic"){const[i,r]=e,n=Math.sqrt(i*i+r*r);let s=Math.atan2(r,i)*m8;return s=(360+s)%360,t==="geographic"&&(s=fre(s)),[n,s]}function mre(e,t="geographic"){let i=e[1];t==="geographic"&&(i=fre(i)),i%=360;const r=e[0];return[r*Math.cos(i/m8),r*Math.sin(i/m8)]}function nlt(e,t,i,r="geographic"){if(!$r(e)||Re(i))return e;const n=t==="vector-magdir"?e.clone():y8(e,t),s=n.pixels[1];for(let o=0;o<s.length;o++)s[o]=r==="geographic"?(s[o]+i[o]+270)%360:(s[o]+360-i[o])%360;return t==="vector-magdir"?n:y8(n,"vector-magdir")}function y8(e,t,i="geographic",r=1){if(!$r(e))return e;const{pixels:n,width:s,height:o}=e,a=s*o,l=n[0],u=n[1],c=e.pixelType.startsWith("f")?e.pixelType:"f32",d=ai.createEmptyBand(c,a),f=ai.createEmptyBand(c,a);let m=0;for(let v=0;v<o;v++)for(let b=0;b<s;b++)t==="vector-uv"?([d[m],f[m]]=VD([l[m],u[m]],i),d[m]*=r):([d[m],f[m]]=mre([l[m],u[m]],i),d[m]*=r,f[m]*=r),m++;const g=new ai({pixelType:c,width:e.width,height:e.height,mask:e.mask,validPixelCount:e.validPixelCount,maskIsAlpha:e.maskIsAlpha,pixels:[d,f]});return g.updateStatistics(),g}function GTe(e,t,i=1){if(i===1||!$r(e))return e;const r=e.clone(),{pixels:n,width:s,height:o}=r,a=n[0],l=n[1];let u=0;for(let c=0;c<o;c++)for(let d=0;d<s;d++)t==="vector-uv"?(a[u]*=i,l[u]*=i):a[u]*=i,u++;return r.updateStatistics(),r}function slt(e,t,i,r,n){if(Re(n)||!n.spatialReference.equals(e.spatialReference))return{extent:e,width:Math.round(t/r),height:Math.round(i/r),resolution:e.width/t};const s=n.xmin,o=n.ymax,a=(e.xmax-e.xmin)/t*r,l=(e.ymax-e.ymin)/i*r,u=(a+l)/2;return e.xmin=s+Math.floor((e.xmin-s)/a)*a,e.xmax=s+Math.ceil((e.xmax-s)/a)*a,e.ymin=o+Math.floor((e.ymin-o)/l)*l,e.ymax=o+Math.ceil((e.ymax-o)/l)*l,{extent:e,width:Math.round(e.width/a),height:Math.round(e.height/l),resolution:u}}const qTe=yre(0,0,0);function yre(e=0,t=0,i=Math.PI,r=!0){r&&(i=(2*Math.PI-i)%(2*Math.PI));const n=r?-1:1,s=13*n,o=-7*n,a=-2*n,l=-16*n,u=21.75,[c,d]=Vs(0,t+s,i,u),[f,m]=Vs(e-5.5,t+o,i,u),[g,v]=Vs(e+5.5,t+o,i,u),[b,x]=Vs(e-1.5,t+a,i,u),[S,T]=Vs(e+1.5,t+a,i,u),[_,M]=Vs(e-1.5,t+l,i,u),[I,$]=Vs(e+1.5,t+l,i,u);return[c,d,f,m,b,x,S,T,g,v,_,M,I,$]}function HTe(e=0,t=Math.PI,i=!0){i&&(t=(2*Math.PI-t)%(2*Math.PI));const r=10,n=i?-1:1,s=5*n,o=20*n,a=25*n,l=45,u=0,c=0,d=2,f=0,m=d*n,g=i?1:-1,v=r/2*g;let[b,x]=[u+v,c-o],[S,T]=[b+d*g,x],[_,M]=[S-f*g,T+m],[I,$]=[u-v,c-a],[L,B]=[I+f*g,$-m],z=Math.ceil(e/UD),W=Math.floor(z/10);z-=8*W;const J=[],K=[];for(let me=0;me<z/2;me++,W--){W<=0&&z%2==1&&me===(z-1)/2&&(I=u,L=I+f*g,$=($+x)/2,B=$-m);const[ve,_e]=Vs(I,$,t,l);if(W>0){const[Se,Oe]=Vs(S,$,t,l),[Me,we]=Vs(b,x,t,l);J.push(Se),J.push(Oe),J.push(ve),J.push(_e),J.push(Me),J.push(we)}else{const[Se,Oe]=Vs(S,T,t,l),[Me,we]=Vs(_,M,t,l),[Ie,Ae]=Vs(L,B,t,l);K.push(ve),K.push(_e),K.push(Ie),K.push(Ae),K.push(Me),K.push(we),K.push(Se),K.push(Oe)}$+=s,x+=s,T+=s,M+=s,B+=s}const[Q,y]=Vs(u+v,c+o,t,l),A=(r/2+d)*g,[N,j]=Vs(u+A,c+o,t,l),[oe,q]=Vs(u+v,c-a,t,l),[de,re]=Vs(u+A,c-a,t,l);return{pennants:J,barbs:K,shaft:[Q,y,N,j,oe,q,de,re]}}function Vs(e,t,i,r=1){const n=Math.sqrt(e*e+t*t)/r,s=(2*Math.PI+Math.atan2(t,e))%(2*Math.PI);return[n,(2*Math.PI+s-i)%(2*Math.PI)]}const tM=[0,1,3,6,10,16,21,27,33,40,47,55,63],WTe=[0,.5,1,1.5,2],JTe=[0,.25,.5,1,1.5,2,2.5,3,3.5,4];function sy(e,t,i,r){const n=$4(r||"knots",i);let s;for(s=1;s<t.length;s++)if(s===t.length-1){if(e<t[s]*n)break}else if(e<=t[s]*n)break;return Math.min(s-1,t.length-2)}function ZTe(e,t,i,r,n){let s=0;switch(t){case"beaufort_kn":s=sy(e,tM,"knots",i);break;case"beaufort_km":s=sy(e,tM,"kilometer-per-hour",i);break;case"beaufort_ft":s=sy(e,tM,"feet-per-second",i);break;case"beaufort_m":s=sy(e,tM,"meter-per-second",i);break;case"classified_arrow":s=sy(e,n??[],r,i);break;case"ocean_current_m":s=sy(e,WTe,"meter-per-second",i);break;case"ocean_current_kn":s=sy(e,JTe,"knots",i)}return s}function YTe(e,t){const{style:i,inputUnit:r,outputUnit:n,breakValues:s}=t,o=al.fromJSON(r),a=al.fromJSON(n),l=7*6,u=15;let c=0,d=0;const{width:f,height:m,mask:g}=e,v=e.pixels[0],b=e.pixels[1],x=ee(g)?g.filter(M=>M>0).length:f*m,S=new Float32Array(x*l),T=new Uint32Array(u*x),_=t.invertDirection?yre(0,0,0,!1):qTe;for(let M=0;M<m;M++)for(let I=0;I<f;I++){const $=M*f+I;if(!g||g[M*f+I]){const L=(b[$]+360)%360/180*Math.PI,B=ZTe(v[$],i,o,a,s);for(let W=0;W<_.length;W+=2)S[c++]=(I+.5)/f,S[c++]=(M+.5)/m,S[c++]=_[W],S[c++]=_[W+1]+L,S[c++]=B,S[c++]=v[$];const z=7*(c/l-1);T[d++]=z,T[d++]=z+1,T[d++]=z+2,T[d++]=z+0,T[d++]=z+4,T[d++]=z+3,T[d++]=z+0,T[d++]=z+2,T[d++]=z+3,T[d++]=z+2,T[d++]=z+5,T[d++]=z+3,T[d++]=z+5,T[d++]=z+6,T[d++]=z+3}}return{vertexData:S,indexData:T}}const eO=[];function KTe(e,t){if(eO.length===0)for(let m=0;m<30;m++)eO.push(HTe(5*m,0,!t.invertDirection));const i=$4(al.fromJSON(t.inputUnit),"knots"),{width:r,height:n,mask:s}=e,o=e.pixels[0],a=e.pixels[1],l=6,u=[],c=[];let d=0,f=0;for(let m=0;m<n;m++)for(let g=0;g<r;g++){const v=m*r+g,b=o[v]*i;if((!s||s[m*r+g])&&b>=UD){const x=(a[v]+360)%360/180*Math.PI,{pennants:S,barbs:T,shaft:_}=eO[Math.min(Math.floor(b/5),29)];if(S.length+T.length===0)continue;let M=u.length/l;const I=(g+.5)/r,$=(m+.5)/n;for(let L=0;L<S.length;L+=2)u[d++]=I,u[d++]=$,u[d++]=S[L],u[d++]=S[L+1]+x,u[d++]=0,u[d++]=b;for(let L=0;L<T.length;L+=2)u[d++]=I,u[d++]=$,u[d++]=T[L],u[d++]=T[L+1]+x,u[d++]=0,u[d++]=b;for(let L=0;L<_.length;L+=2)u[d++]=I,u[d++]=$,u[d++]=_[L],u[d++]=_[L+1]+x,u[d++]=0,u[d++]=b;for(let L=0;L<S.length/6;L++)c[f++]=M,c[f++]=M+1,c[f++]=M+2,M+=3;for(let L=0;L<T.length/8;L++)c[f++]=M,c[f++]=M+1,c[f++]=M+2,c[f++]=M+1,c[f++]=M+2,c[f++]=M+3,M+=4;c[f++]=M+0,c[f++]=M+1,c[f++]=M+2,c[f++]=M+1,c[f++]=M+3,c[f++]=M+2,M+=4}}return{vertexData:new Float32Array(u),indexData:new Uint32Array(c)}}function QTe(e,t){let r=0,n=0;const{width:s,height:o,mask:a}=e,l=e.pixels[0],u=[],c=[],d=$4(al.fromJSON(t.inputUnit),"knots"),f=t.style==="wind_speed"?UD:Number.MAX_VALUE;for(let m=0;m<o;m++)for(let g=0;g<s;g++){const v=l[m*s+g]*d;if((!a||a[m*s+g])&&v<f){for(let x=0;x<4;x++)u[r++]=(g+.5)/s,u[r++]=(m+.5)/o,u[r++]=x<2?-.5:.5,u[r++]=x%2==0?-.5:.5,u[r++]=0,u[r++]=v;const b=4*(r/24-1);c[n++]=b,c[n++]=b+1,c[n++]=b+2,c[n++]=b+1,c[n++]=b+2,c[n++]=b+3}}return{vertexData:new Float32Array(u),indexData:new Uint32Array(c)}}function olt(e,t){return t.style==="simple_scalar"?QTe(e,t):t.style==="wind_speed"?KTe(e,t):YTe(e,t)}function alt(e,t,i,r=[0,0],n=.5){const{width:s,height:o,mask:a}=e,[l,u]=e.pixels,[c,d]=r,f=Math.round((s-c)/i),m=Math.round((o-d)/i),g=f*m,v=new Float32Array(g),b=new Float32Array(g),x=new Uint8Array(g),S=t==="vector-uv";for(let _=0;_<m;_++)for(let M=0;M<f;M++){let I=0;const $=_*f+M,L=Math.max(0,_*i+d),B=Math.max(0,M*i+c),z=Math.min(o,L+i),W=Math.min(s,B+i);for(let J=L;J<z;J++)for(let K=B;K<W;K++){const Q=J*s+K;if(!a||a[Q]){I++;const y=S?[l[Q],u[Q]]:[l[Q],(360+u[Q])%360],[A,N]=S?y:mre(y);v[$]+=A,b[$]+=N}}if(I>=(z-L)*(W-B)*(1-n)){x[$]=1;const[J,K]=VD([v[$]/I,b[$]/I]);v[$]=J,b[$]=K}else x[$]=0,v[$]=0,b[$]=0}const T=new ai({width:f,height:m,pixels:[v,b],mask:x});return T.updateStatistics(),T}let XTe=class{constructor(t,i){this._storage=new iee,this._storage.maxSize=t,i&&this._storage.registerRemoveFunc("",i)}put(t,i){this._storage.put(t,i,1,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}};new XTe(1e3);new Mt([128,128,128]);const eAe=new Mt("white");function v1(e,t){if(!e)return null;let i=null;return w0(e)?i=tAe(e):u4(e)&&(i=e.color?new Mt(e.color):null),i?cS(i,t):null}function tAe(e){const t=e.symbolLayers;if(!t)return null;let i=null;return t.forEach(r=>{r.type==="object"&&r.resource?.href!=null||(i=r.type==="water"?r.color:ee(r.material)?r.material.color:null)}),i?new Mt(i):null}function cS(e,t){if(t==null||e==null)return e;const i=e.toRgba();return i[3]=i[3]*t,new Mt(i)}function iAe(e,t,i){const r=e.symbolLayers;if(!r)return;const n=s=>{const o=ee(s)?s:null;return cS(t=t??o??(i!=null?eAe:null),i)};r.forEach(s=>{if(s.type!=="object"||s.resource?.href==null||t)if(s.type==="water")s.color=n(s.color);else{const o=ee(s.material)?s.material.color:null,a=n(o);Re(s.material)?s.material=new bl({color:a}):s.material.color=a,i!=null&&"outline"in s&&ee(s.outline)&&ee(s.outline.color)&&(s.outline.color=cS(s.outline.color,i))}})}function rAe(e,t,i){(t=t??e.color)&&(e.color=cS(t,i)),i!=null&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=cS(e.outline.color,i))}function tO(e,t,i){e&&(t||i!=null)&&(t&&(t=new Mt(t)),w0(e)?iAe(e,t,i):u4(e)&&rAe(e,t,i))}async function nAe(e,t){const i=e.symbolLayers;i&&await Wme(i,async r=>sAe(r,t))}async function sAe(e,t){switch(e.type){case"extrude":aAe(e,t);break;case"icon":case"line":case"text":oAe(e,t);break;case"path":uAe(e,t);break;case"object":await lAe(e,t)}}function oAe(e,t){const i=gre(t);ee(i)&&(e.size=i)}function gre(e){for(const t of e)if(typeof t=="number")return t;return null}function aAe(e,t){e.size=typeof t[2]=="number"?t[2]:0}async function lAe(e,t){const{resourceSize:i,symbolSize:r}=await cAe(e),n=vre(t,i,r);e.width=vx(t[0],r[0],i[0],n),e.depth=vx(t[1],r[1],i[1],n),e.height=vx(t[2],r[2],i[2],n)}function uAe(e,t){const i=vre(t,iQ,[e.width,void 0,e.height]);e.width=vx(t[0],e.width,1,i),e.height=vx(t[2],e.height,1,i)}function vre(e,t,i){for(let r=0;r<3;r++){const n=e[r];switch(n){case"symbol-value":{const s=i[r];return s!=null?s/t[r]:1}case"proportional":break;default:if(n&&t[r])return n/t[r]}}return 1}async function cAe(e){const t=await De(()=>import("./symbolLayerUtils-f2dca9f6.js"),["./symbolLayerUtils-f2dca9f6.js","./preload-helper-388ac9d5.js"],import.meta.url),i=await t.computeObjectLayerResourceSize(e,10),{width:r,height:n,depth:s}=e,o=[r,s,n];let a=1;for(let l=0;l<3;l++){const u=o[l];if(u!=null){a=u/i[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=i[l]*a);return{resourceSize:i,symbolSize:o}}function vx(e,t,i,r){switch(e){case"proportional":return i*r;case"symbol-value":return t??i;default:return e}}function hAe(e,t){const i=gre(t);if(!Re(i))switch(e.type){case"simple-marker":e.size=i;break;case"picture-marker":{const r=e.width/e.height;r>1?(e.width=i,e.height=i*r):(e.width=i*r,e.height=i);break}case"simple-line":e.width=i;break;case"text":e.font.size=i}}async function bre(e,t){if(e&&t)return w0(e)?nAe(e,t):void(u4(e)&&hAe(e,t))}function wre(e,t,i){if(e&&t!=null)if(w0(e)){const r=e.symbolLayers;r&&r.forEach(n=>{if(n&&n.type==="object")switch(i){case"tilt":n.tilt=t;break;case"roll":n.roll=t;break;default:n.heading=t}})}else u4(e)&&(e.type!=="simple-marker"&&e.type!=="picture-marker"&&e.type!=="text"||(e.angle=t))}async function dAe(e,t){return await e.fetchSymbol(t)||e.fetchCIMSymbol(t)}var g8;const bz=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]),iM=new ti({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"}),rM=new ti({flow_from:"flow-from",flow_to:"flow-to"});let oo=g8=class extends Lm(Je){constructor(e){super(e),this.attributeField="Magnitude",this.flowRepresentation="flow-from",this.rotationType="arithmetic",this.style="single-arrow",this.symbolTileSize=50,this.type="vector-field"}readInputUnit(e,t){return bz.has(e)?al.fromJSON(e):null}readOutputUnit(e,t){return bz.has(e)?al.fromJSON(e):null}get styleRenderer(){const e=this.style,t=this.attributeField,i=this._createStyleRenderer(e);return i.field=t,i}get sizeVariables(){const e=[];if(this.visualVariables)for(const t of this.visualVariables)t.type==="size"&&e.push(t);if(e.length===0){const t=new B0({field:"Magnitude",minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize});this.visualVariables?this.visualVariables.push(t):this._set("visualVariables",[t]),e.push(t)}return e}get rotationVariables(){const e=[];if(this.visualVariables)for(const t of this.visualVariables)t.type==="rotation"&&e.push(t);if(e.length===0){const t=new d4({field:"Direction",rotationType:this.rotationType});this.visualVariables?this.visualVariables.push(t):this._set("visualVariables",[t]),e.push(t)}return e}clone(){return new g8({attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,symbolTileSize:this.symbolTileSize,style:this.style,visualVariables:Le(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})}async getGraphicsFromPixelData(e,t=!1,i=[]){const r=new Array,n=$4(this.inputUnit,this.outputUnit),s=this.rotationVariables[0]?.rotationType||this.rotationType,o=t?y8(e.pixelBlock,"vector-uv",s,n):GTe(e.pixelBlock,"vector-magdir",n);if(Re(o))return r;const a=e.extent,l=ee(o.mask)&&o.mask.length>0;let u=0;const c=(a.xmax-a.xmin)/o.width,d=(a.ymax-a.ymin)/o.height;for(let f=0;f<o.height;f++)for(let m=0;m<o.width;m++,u++){let g=new At({x:a.xmin+m*c+c/2,y:a.ymax-f*d-d/2,spatialReference:a.spatialReference});g=(await Z0(g))[0];const v=i.some(b=>b.intersects(g));if((!l||o.mask[u])&&!v){const b={Magnitude:o.pixels[0][u],Direction:o.pixels[1][u]},x=new As({geometry:{type:"point",x:g.x,y:g.y,spatialReference:a.spatialReference},attributes:b});x.symbol=this._getVisualVariablesAppliedSymbol(x),r.push(x)}}return r}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getClassBreakInfos(){return this.styleRenderer?.classBreakInfos}getDefaultSymbol(){return this.styleRenderer?.defaultSymbol}_getDefaultSymbol(e){return new pu({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new Ra({width:0}),size:20,color:e||new Mt([0,92,230])})}_getVisualVariablesAppliedSymbol(e){if(!e)return;const t=this.styleRenderer?.getSymbol(e)?.clone(),i=this.sizeVariables,r=this.rotationVariables;if(i&&i.length&&this.sizeVariables.forEach(n=>bre(t,QX([n],e))),r&&r.length){const n=this.flowRepresentation==="flow-to"==(this.style==="ocean-current-kn"||this.style==="ocean-current-m")?0:180;e.attributes.Direction=e.attributes.Direction+n,this.rotationVariables.forEach(s=>wre(t,zF(s,e),s.axis))}return t}_createStyleRenderer(e){let t={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(e){case"single-arrow":t=this._createSingleArrowRenderer();break;case"beaufort-kn":t=this._createBeaufortKnotsRenderer();break;case"beaufort-m":t=this._createBeaufortMeterRenderer();break;case"beaufort-ft":t=this._createBeaufortFeetRenderer();break;case"beaufort-mi":t=this._createBeaufortMilesRenderer();break;case"beaufort-km":t=this._createBeaufortKilometersRenderer();break;case"ocean-current-m":t=this._createCurrentMeterRenderer();break;case"ocean-current-kn":t=this._createCurrentKnotsRenderer();break;case"simple-scalar":t=this._createSimpleScalarRenderer();break;case"wind-barb":t=this._createWindBarbsRenderer();break;case"classified-arrow":t=this._createClassifiedArrowRenderer()}return new _w(t)}_createSingleArrowRenderer(){return{defaultSymbol:this._getDefaultSymbol()}}_createBeaufortKnotsRenderer(){const e=[0,1,3,6,10,16,21,27,33,40,47,55,63],t=[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]];return{defaultSymbol:this._getDefaultSymbol(new Mt([214,47,39])),classBreakInfos:this._getClassBreaks(e,t)}}_createBeaufortMeterRenderer(){const e=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],t=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]];return{defaultSymbol:this._getDefaultSymbol(new Mt([214,47,39])),classBreakInfos:this._getClassBreaks(e,t)}}_createBeaufortFeetRenderer(){const e=this._getDefaultSymbol(new Mt([214,47,39]));let t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];const i=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]],r=3.28084;return t=t.map(n=>n*r),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,i)}}_createBeaufortMilesRenderer(){const e=this._getDefaultSymbol(new Mt([214,47,39]));let t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];const i=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]],r=2.23694;return t=t.map(n=>n*r),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,i)}}_createBeaufortKilometersRenderer(){const e=this._getDefaultSymbol(new Mt([214,47,39]));let t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];const i=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]],r=3.6;return t=t.map(n=>n*r),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,i)}}_createCurrentMeterRenderer(){const e=[0,.5,1,1.5,2],t=[[78,26,153],[179,27,26],[202,128,26],[177,177,177]];return{defaultSymbol:this._getDefaultSymbol(new Mt([177,177,177])),classBreakInfos:this._getClassBreaks(e,t)}}_createCurrentKnotsRenderer(){const e=[0,.25,.5,1,1.5,2,2.5,3,3.5,4],t=[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]];return{defaultSymbol:this._getDefaultSymbol(new Mt([177,177,177])),classBreakInfos:this._getClassBreaks(e,t)}}_createClassifiedArrowRenderer(){const e=this._getDefaultSymbol(new Mt([56,168,0]));let t=[0,1e-6,3.5,7,10.5,14];if(this.sizeVariables?.length){const r=this.sizeVariables[0].minDataValue,n=this.sizeVariables[0].maxDataValue;if(r&&n){const s=(n-r)/5;t=Array.from(Array(6).keys()).map(o=>r+s*o)}}const i=[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]];return{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,i)}}_createSimpleScalarRenderer(){return{defaultSymbol:Yf.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII=",height:20,width:20,type:"esriPMS",angle:0})}}_createWindBarbsRenderer(){const e=Array.from(Array(31).keys()).map(n=>5*n),t=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"90-95",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="}],i=Yf.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",height:20,width:20,type:"esriPMS",angle:0}),r=e.map((n,s)=>{let o;if(s!==e.length-1)if(s===0)o={minValue:n,maxValue:e[s+1],symbol:i};else{const a=Yf.fromJSON({type:"esriPMS",imageData:t[s].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0});o={minValue:n,maxValue:e[s+1],symbol:a}}return new Ab(o)});return{defaultSymbol:i,classBreakInfos:r}}_getClassBreaks(e,t){return t.map((i,r)=>new Ab({minValue:e[r],maxValue:e[r+1],symbol:this._getDefaultSymbol(new Mt(i))}))}};h([p({type:String,json:{write:!0}})],oo.prototype,"attributeField",void 0),h([p({type:rM.apiValues,json:{type:rM.jsonValues,read:{reader:rM.read},write:{writer:rM.write}}})],oo.prototype,"flowRepresentation",void 0),h([p({type:["geographic","arithmetic"],json:{write:!0}})],oo.prototype,"rotationType",void 0),h([p({type:iM.apiValues,json:{type:iM.jsonValues,read:{reader:iM.read},write:{writer:iM.write}}})],oo.prototype,"style",void 0),h([p({json:{write:!0}})],oo.prototype,"symbolTileSize",void 0),h([p({type:al.apiValues,json:{type:al.jsonValues,write:{writer:al.write}}})],oo.prototype,"inputUnit",void 0),h([Ye("inputUnit")],oo.prototype,"readInputUnit",null),h([p({type:al.apiValues,json:{type:al.jsonValues,read:{reader:al.read},write:{writer:al.write}}})],oo.prototype,"outputUnit",void 0),h([Ye("outputUnit")],oo.prototype,"readOutputUnit",null),h([Ft({vectorField:"vector-field"})],oo.prototype,"type",void 0),h([p({type:_w})],oo.prototype,"styleRenderer",null),h([p({type:B0})],oo.prototype,"sizeVariables",null),h([p({type:d4})],oo.prototype,"rotationVariables",null),oo=g8=h([ce("esri.renderers.VectorFieldRenderer")],oo);const BD=oo,v8={key:"type",base:null,typeMap:{"unique-value":Pm,"class-breaks":_w,"raster-colormap":FD,"raster-stretch":DD,"vector-field":BD,"raster-shaded-relief":ore,flow:Hie}},b8={...v8,typeMap:{...v8.typeMap}};delete b8.typeMap["vector-field"],delete b8.typeMap.flow;const pAe={uniqueValue:Pm,classBreaks:_w,rasterStretch:DD,rasterColormap:FD,vectorField:BD,rasterShadedRelief:ore,flowRenderer:Hie};function fAe(e){return e&&pAe[e.type]||null}function mAe(e,t){if(!e)return null;if(e.type==="classBreaks"&&e.classificationMethod){const r=e.authoringInfo||{classificationMethod:""};r.classificationMethod=e.classificationMethod,e.authoringInfo=r}e.type==="vectorField"&&e.visualVariables&&!Array.isArray(e.visualVariables)&&(e.visualVariables=[e.visualVariables]);const i=fAe(e);if(i){const r=new i;return r.read(e,t),r}return t&&t.messages&&e&&t.messages.push(new El("renderer:unsupported","Renderers of type '"+(e.type||"unknown")+"' are not supported",{definition:e,context:t})),null}var w8;let Yy=w8=class extends Je{constructor(e){super(e),this.variableName=null,this.dimensionName=null,this.values=[],this.isSlice=!1}clone(){return new w8({variableName:this.variableName,dimensionName:this.dimensionName,values:Le(this.values),isSlice:this.isSlice})}};h([p({type:String,json:{write:!0}})],Yy.prototype,"variableName",void 0),h([p({type:String,json:{write:!0}})],Yy.prototype,"dimensionName",void 0),h([p({type:e_.array(e_.oneOf([e_.native(Number),e_.array(e_.native(Number))])),json:{write:!0}})],Yy.prototype,"values",void 0),h([p({type:Boolean,json:{write:!0}})],Yy.prototype,"isSlice",void 0),Yy=w8=h([ce("esri.layers.support.DimensionalDefinition")],Yy);const Lb=Yy;var _8;const ZI=new Set(["raster","raster2","dem","fillraster"]),YI=new Set(["rasters"]),wz=e=>e&&e.rasterFunction?ua.fromJSON(e):e,iO=e=>e&&e instanceof ua?e.toJSON():e,x8=e=>e?.functionName&&!e.declaredClass,_z=e=>x8(e)?new ua(e):e,yAe=e=>{if(e==null)return null;e=Le(e);const t={};for(const i of Object.keys(e))ZI.has(i.toLowerCase())?t[i]=wz(e[i]):YI.has(i.toLowerCase())&&Array.isArray(e[i])?t[i]=e[i].map(wz):t[i]=e[i];return t};let ua=_8=class extends Je{constructor(e){super(e),this.functionName=null,this.outputPixelType="unknown",this.variableName=null,this.rasterFunctionDefinition=null}set functionArguments(e){if(e){const t=Object.keys(e);if(t.some(i=>ZI.has(i.toLowerCase())&&x8(e[i]))||t.some(i=>YI.has(i.toLowerCase())&&Array.isArray(e[i])&&e[i].some(r=>x8(r)))){e=Le(e);for(const i of t)ZI.has(i.toLowerCase())?e[i]=_z(e[i]):YI.has(i.toLowerCase())&&Array.isArray(e[i])&&(e[i]=e[i].map(r=>_z(r)))}}this._set("functionArguments",e)}readFunctionArguments(e){return yAe(e)}writeFunctionArguments(e,t,i){const r={};for(const n of Object.keys(e))ZI.has(n.toLowerCase())?r[n]=iO(e[n]):YI.has(n.toLowerCase())&&Array.isArray(e[n])?r[n]=e[n].map(iO):r[n]=iO(e[n]);t[i]=r}readFunctionName(e,t){const i=t.rasterFunctionInfos;return t.name||(i&&i.length&&i[0].name!=="None"?i[0].name:t.rasterFunctionDefinition?t.rasterFunctionDefinition.name:t.rasterFunction)}clone(){return new _8({functionName:this.functionName,functionArguments:Le(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,rasterFunctionDefinition:Le(this.rasterFunctionDefinition)})}};h([p({json:{type:Object,name:"rasterFunctionArguments"}})],ua.prototype,"functionArguments",null),h([Ye("functionArguments")],ua.prototype,"readFunctionArguments",null),h([it("functionArguments")],ua.prototype,"writeFunctionArguments",null),h([p({json:{type:String,write:{target:"rasterFunction"}}})],ua.prototype,"functionName",void 0),h([Ye("functionName",["rasterFunction","rasterFunctionInfos","rasterFunctionDefinition"])],ua.prototype,"readFunctionName",null),h([Ft({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1}),p({json:{default:"unknown"}})],ua.prototype,"outputPixelType",void 0),h([p({type:String,json:{read:!0,write:!0}})],ua.prototype,"variableName",void 0),h([p({type:Object,json:{name:"rasterFunctionDefinition"}})],ua.prototype,"rasterFunctionDefinition",void 0),ua=_8=h([ce("esri.layers.support.RasterFunction")],ua);const zi=ua,gAe={StretchFunction:{arguments:{ComputeGamma:{isDataset:!1,isPublic:!1,name:"ComputeGamma",type:"RasterFunctionVariable",value:!1},DRA:{isDataset:!1,isPublic:!1,name:"DRA",type:"RasterFunctionVariable",value:!1},EstimateStatsHistogram:{isDataset:!1,isPublic:!1,name:"EstimateStatsHistogram",type:"RasterFunctionVariable",value:!1},Gamma:{displayName:"Gamma",isDataset:!1,isPublic:!1,name:"Gamma",type:"RasterFunctionVariable"},Histograms:{isDataset:!1,isPublic:!1,name:"Histograms",type:"RasterFunctionVariable"},Max:{isDataset:!1,isPublic:!1,name:"Max",type:"RasterFunctionVariable",value:255},MaxPercent:{isDataset:!1,isPublic:!1,name:"MaxPercent",type:"RasterFunctionVariable",value:.5},Min:{isDataset:!1,isPublic:!1,name:"Min",type:"RasterFunctionVariable",value:0},MinPercent:{isDataset:!1,isPublic:!1,name:"MinPercent",type:"RasterFunctionVariable",value:.25},NumberOfStandardDeviations:{isDataset:!1,isPublic:!1,name:"NumberOfStandardDeviation",type:"RasterFunctionVariable",value:2},Raster:{isDataset:!0,isPublic:!1,name:"Raster",type:"RasterFunctionVariable"},SigmoidStrengthLevel:{isDataset:!1,isPublic:!1,name:"SigmoidStrengthLevel",type:"RasterFunctionVariable",value:2},Statistics:{isDataset:!1,isPublic:!1,name:"Statistics",type:"RasterFunctionVariable"},StretchType:{isDataset:!1,isPublic:!1,name:"StretchType",type:"RasterFunctionVariable",value:0},type:"StretchFunctionArguments",UseGamma:{isDataset:!1,isPublic:!1,name:"UseGamma",type:"RasterFunctionVariable",value:!1}},description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",function:{description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",name:"Stretch",pixelType:"UNKNOWN",type:"StretchFunction"},functionType:0,name:"Stretch",thumbnail:""},RemapFunction:{name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table.",function:{type:"RemapFunction",pixelType:"UNKNOWN",name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},UseTable:{name:"UseTable",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},InputRanges:{name:"InputRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"Input Ranges"},OutputValues:{name:"OutputValues",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"Output Values"},NoDataRanges:{name:"NoDataRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"NoData Ranges"},Table:{name:"Table",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputField:{name:"InputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},OutputField:{name:"OutputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputMaxField:{name:"InputMaxField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},RemapTableType:{name:"RemapTableType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},AllowUnmatched:{name:"AllowUnmatched",isPublic:!1,isDataset:!1,value:!0,type:"RasterFunctionVariable"},type:"RemapFunctionArguments"},functionType:0,thumbnail:""},ColormapFunction:{name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp.",function:{type:"ColormapFunction",pixelType:"UNKNOWN",name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},ColormapName:{name:"ColormapName",isPublic:!1,isDataset:!1,value:"Gray",type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},type:"ColormapFunctionArguments"},functionType:0,thumbnail:""},ShadedReliefFunction:{name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image.",function:{type:"ShadedReliefFunction",pixelType:"UNKNOWN",name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"ShadedReliefFunctionArguments"},functionType:0,thumbnail:""},HillshadeFunction:{name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image",function:{type:"HillshadeFunction",pixelType:"UNKNOWN",name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image"},arguments:{DEM:{name:"DEM",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"HillshadeFunctionArguments"},functionType:0,thumbnail:""},ResampleFunction:{name:"Resample",description:"Changes the cell size of a raster.",function:{type:"ResampleFunction",pixelType:"UNKNOWN",name:"Resample",description:"Changes the cell size of a raster."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ResamplingType:{name:"ResamplingType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},InputCellSize:{name:"InputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},OutputCellSize:{name:"OutputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},type:"ResampleFunctionArguments"},functionType:0,thumbnail:""}},vAe=new Set(["u1","u2","u4","u8","s8","u16","s16"]),bAe={simple_scalar:"Simple Scalar",wind_barb:"Wind Barb",single_arrow:"Single Arrow",beaufort_kn:"Beaufort Wind (Knots)",beaufort_m:"Beaufort Wind (MetersPerSecond)",ocean_current_m:"Ocean Current (MetersPerSecond)",ocean_current_kn:"Ocean Current (Knots)"},wAe=new Set(["raster-stretch","unique-value","class-breaks","raster-shaded-relief","vector-field","raster-colormap"]);function _re(e){return wAe.has(e.type)}function rO(e,t){if(!e||!t)return Le(e||t);const i=Le(e);if(i.rasterFunctionDefinition&&t.rasterFunctionDefinition){const r=t.rasterFunctionDefinition;(r.thumbnail||r.thumbnailEx)&&(r.thumbnail=r.thumbnailEx=void 0),xre(i.rasterFunctionDefinition.arguments,t)}else t.functionName?.toLowerCase()!=="none"&&(Sre(i.functionArguments).Raster=t);return i}function xre(e,t){for(const i in e)i.toLowerCase()==="raster"&&(e[i].type==="RasterFunctionVariable"?(e[i]=t.rasterFunctionDefinition,e[i].type="RasterFunctionTemplate"):e[i].type==="RasterFunctionTemplate"&&xre(e[i].arguments,t))}function kh(e){const t=Le(gAe[e.functionName+"Function"]),i=e.functionArguments;for(const r in i)r.toLowerCase()==="raster"?(t.arguments[r]=kh(i[r]),t.arguments[r].type="RasterFunctionTemplate"):r.toLowerCase()==="colormap"?(t.arguments[r].value=CAe(i[r]),t.arguments.ColorSchemeType.value=0):t.arguments[r].value=i[r];return t}function _Ae(e,t){switch(t=t||{},e.type){case"raster-stretch":return EAe(e,t);case"class-breaks":return MAe(e,t);case"unique-value":return IAe(e,t);case"raster-colormap":return TAe(e,t);case"vector-field":return xAe(e,t);case"raster-shaded-relief":return SAe(e,t);case"flow":throw new Error("Unsupported rendering rule.")}}function Sre(e){const t=e?.Raster;return t&&t.declaredClass==="esri.layers.support.RasterFunction"?Sre(t.functionArguments):e}const y_={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,sigmoid:9};function xAe(e,t){const i=new zi;i.functionName="VectorFieldRenderer";const{dataType:r,bandProperties:n}=t,s=r==="vector-uv";let o,a;n&&n.length===2&&(o=n.map(f=>f.BandName.toLowerCase()).indexOf("magnitude"),a=n.map(f=>f.BandName.toLowerCase()).indexOf("direction")),o!==-1&&o!==null||(o=0,a=1);const l=e.rotationType==="arithmetic"?1:2,u=e.flowRepresentation==="flow-from"?0:1,c=e.visualVariables?e.visualVariables.find(f=>f.field==="Magnitude"):new B0,d={magnitudeBandID:o,directionBandID:a,isUVComponents:s,referenceSystem:l,massFlowAngleRepresentation:u,symbolTileSize:50,symbolTileSizeUnits:100,calculationMethod:"Vector Average",symbologyName:bAe[e.style.toLowerCase().replace("-","_")],minimumMagnitude:c.minDataValue,maximumMagnitude:c.maxDataValue,minimumSymbolSize:c.minSize,maximumSymbolSize:c.maxSize};return i.functionArguments=d,t.convertToRFT?new zi({rasterFunctionDefinition:kh(i)}):i}function SAe(e,t){const i=t.convertToRFT;if(t.dataType!=="elevation"&&(t.dataType!=="generic"||t.bandCount!==1||t.pixelType!=="s16"&&t.pixelType!=="s32"&&t.pixelType!=="f32"&&t.pixelType!=="f64"))return new zi;const r=new zi;r.functionName="Hillshade";const n=e.hillshadeType==="traditional"?0:1,s=e.scalingType==="none"?1:3,o={HillshadeType:n,SlopeType:s,ZFactor:e.zFactor};return n===0&&(o.Azimuth=e.azimuth,o.Altitude=e.altitude),s===3&&(o.PSPower=e.pixelSizePower,o.PSZFactor=e.pixelSizeFactor),r.functionArguments=o,r.variableName="Raster",e.colorRamp&&(r.functionName="ShadedRelief",i?o.ColorRamp=sre(e.colorRamp):o.Colormap=S0(e.colorRamp)),i?new zi({rasterFunctionDefinition:kh(r)}):r}function EAe(e,t){const i=t.convertToRFT,r=new zi;r.functionName="Stretch";const n=y_[yx.toJSON(e.stretchType)],s="u8",o={StretchType:n,Statistics:AAe(e.statistics??[]),DRA:e.dynamicRangeAdjustment,UseGamma:e.useGamma,Gamma:e.gamma,ComputeGamma:e.computeGamma};if(e.outputMin!=null&&(o.Min=e.outputMin),e.outputMax!=null&&(o.Max=e.outputMax),n===y_.standardDeviation?(o.NumberOfStandardDeviations=e.numberOfStandardDeviations,r.outputPixelType=s):n===y_.percentClip?(o.MinPercent=e.minPercent,o.MaxPercent=e.maxPercent,r.outputPixelType=s):n===y_.minMax?r.outputPixelType=s:n===y_.sigmoid&&(o.SigmoidStrengthLevel=e.sigmoidStrengthLevel),r.functionArguments=o,r.variableName="Raster",e.colorRamp){const a=e.colorRamp,l=new zi;if(i)l.functionArguments={ColorRamp:sre(a)};else{const u=ire(a);if(u)l.functionArguments={colorRamp:u};else if(!t.convertColorRampToColormap||a.type!=="algorithmic"&&a.type!=="multipart"){const c=e.colorRamp.toJSON();c.type==="algorithmic"?c.algorithm=c.algorithm||"esriCIELabAlgorithm":c.type==="multipart"&&c.colorRamps?.length&&c.colorRamps.forEach(d=>d.algorithm=d.algorithm||"esriCIELabAlgorithm"),l.functionArguments={colorRamp:c}}else l.functionArguments={Colormap:S0(a)}}return l.variableName="Raster",l.functionName="Colormap",l.functionArguments.Raster=r,i?new zi({rasterFunctionDefinition:kh(l)}):l}return i?new zi({rasterFunctionDefinition:kh(r)}):r}function MAe(e,t){const i=[],r=[],n=[],s=[],{pixelType:a,rasterAttributeTable:l}=t,u=Re(l)?null:l.features,c=Ere(l);if(c&&u&&Array.isArray(u)&&e.classBreakInfos){e.classBreakInfos.forEach((b,x)=>{const S=b.symbol?.color;let T;S?.a&&b.minValue!=null&&b.maxValue!=null&&u.forEach(_=>{b.minValue!=null&&b.maxValue!=null&&(T=_.attributes[e.field],(T>=b.minValue&&T<b.maxValue||x===e.classBreakInfos.length-1&&T>=b.minValue)&&s.push([_.attributes[c],S.r,S.g,S.b]))})});const g=a?OA(s,a):s,v=new zi;return v.functionName="Colormap",v.functionArguments={},v.functionArguments.Colormap=g,v.variableName="Raster",t.convertToRFT?new zi({rasterFunctionDefinition:kh(v)}):v}e.classBreakInfos.forEach((g,v)=>{if(g.minValue==null||g.maxValue==null)return;const b=g.symbol&&g.symbol.color;b?.a?(v===0?i.push(g.minValue,g.maxValue+1e-6):i.push(g.minValue+1e-6,g.maxValue+1e-6),r.push(v),s.push([v,b.r,b.g,b.b])):n.push(g.minValue,g.maxValue)});const d=a?OA(s,a):s,f=new zi;f.functionName="Remap",f.functionArguments={InputRanges:i,OutputValues:r,NoDataRanges:n},f.variableName="Raster";const m=new zi;return m.functionName="Colormap",m.functionArguments={Colormap:d,Raster:f},t.convertToRFT?new zi({rasterFunctionDefinition:kh(m)}):m}function OA(e,t){const i=vAe.has(t)?Rw(t):null;return i&&e.push([Math.floor(i[0]-1),0,0,0],[Math.ceil(i[1]+1),0,0,0]),e}function Ere(e){if(Re(e))return;const{fields:t}=e,i=t&&t.find(r=>r&&r.name&&r.name.toLowerCase()==="value");return i&&i.name}function IAe(e,t){const i=[],{pixelType:r,rasterAttributeTable:n}=t,s=Re(n)?null:n.features,o=Ere(n),a=e.defaultSymbol?.color?.toRgb(),l=e.uniqueValueInfos;if(l)if(s){if(o){const d=new Map;l.forEach(m=>{const g=m.value,v=m.symbol?.color;g!=null&&v&&v.a&&d.set(String(g),v.toRgb())});const f=e.field;s.forEach(({attributes:m})=>{const g=String(m[f]),v=m[o],b=d.get(g);b?i.push([v,...b]):a&&i.push([v,...a])})}}else for(let d=0;d<l.length;d++){const f=l[d],m=f.symbol?.color,g=+f.value;if(m?.a){if(isNaN(g))return null;i.push([g,m.r,m.g,m.b])}}const u=r&&i.length>0?OA(i,r):i,c=new zi;return c.functionName="Colormap",c.functionArguments={},c.functionArguments.Colormap=u,c.variableName="Raster",t.convertToRFT?new zi({rasterFunctionDefinition:kh(c)}):c}function TAe(e,t){const i=e.extractColormap();if(!i||i.length===0)return null;const{pixelType:r}=t,n=r?OA(i,r):i,s=new zi;return s.functionName="Colormap",s.functionArguments={},s.functionArguments.Colormap=n,t.convertToRFT?new zi({rasterFunctionDefinition:kh(s)}):s}function AAe(e){const t=[];return e?.forEach(i=>{const r=i;if(Array.isArray(r))t.push(r);else{if(r.min==null||r.max==null)return;const n=[r.min,r.max,r.avg||0,r.stddev||0];t.push(n)}}),t}function CAe(e){const t=[],i=[];return e.forEach(r=>{t.push(r[0]),i.push(MTe([...r.slice(1),255]))}),{type:"RasterColormap",values:t,colors:i}}var S8;const bx=_n()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),E8=_n()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"});function $Ae(e){let t;switch(e?e.toLowerCase().replace("esrimosaic",""):""){case"byattribute":case"attribute":t="esriMosaicAttribute";break;case"lockraster":t="esriMosaicLockRaster";break;case"center":t="esriMosaicCenter";break;case"northwest":t="esriMosaicNorthwest";break;case"nadir":t="esriMosaicNadir";break;case"viewpoint":t="esriMosaicViewpoint";break;case"seamline":t="esriMosaicSeamline";break;default:t="esriMosaicNone"}return E8.fromJSON(t)}let ts=S8=class extends Je{constructor(e){super(e),this.ascending=!0,this.itemRenderingRule=null,this.lockRasterIds=null,this.method=null,this.multidimensionalDefinition=null,this.objectIds=null,this.operation=null,this.sortField=null,this.sortValue=null,this.viewpoint=null,this.where=null}readAscending(e,t){return t.ascending!=null?t.ascending:t.sortAscending==null||t.sortAscending}readMethod(e,t){return $Ae(t.mosaicMethod||t.defaultMosaicMethod)}writeMultidimensionalDefinition(e,t,i){e!=null&&(e=e.filter(({variableName:r,dimensionName:n})=>r&&r!=="*"||n)).length&&(t[i]=e.map(r=>r.toJSON()))}readOperation(e,t){const i=t.mosaicOperation,r=t.mosaicOperator&&t.mosaicOperator.toLowerCase(),n=i||(r?bx.toJSON(r):null);return bx.fromJSON(n)||"first"}castSortValue(e){return e==null||typeof e=="string"||typeof e=="number"?e:`${e}`}clone(){return new S8({ascending:this.ascending,itemRenderingRule:Le(this.itemRenderingRule),lockRasterIds:Le(this.lockRasterIds),method:this.method,multidimensionalDefinition:Le(this.multidimensionalDefinition),objectIds:Le(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:Le(this.viewpoint),where:this.where})}};h([p({type:Boolean,json:{write:!0}})],ts.prototype,"ascending",void 0),h([Ye("ascending",["ascending","sortAscending"])],ts.prototype,"readAscending",null),h([p({type:zi,json:{write:!0}})],ts.prototype,"itemRenderingRule",void 0),h([p({type:[wi],json:{write:{overridePolicy(){return{enabled:this.method==="lock-raster"}}}}})],ts.prototype,"lockRasterIds",void 0),h([p({type:String,json:{type:E8.jsonValues,write:{target:"mosaicMethod",writer:E8.write}}})],ts.prototype,"method",void 0),h([Ye("method",["mosaicMethod","defaultMosaicMethod"])],ts.prototype,"readMethod",null),h([p({type:[Lb],json:{write:!0}})],ts.prototype,"multidimensionalDefinition",void 0),h([it("multidimensionalDefinition")],ts.prototype,"writeMultidimensionalDefinition",null),h([p({type:[wi],json:{name:"fids",write:!0}})],ts.prototype,"objectIds",void 0),h([p({json:{type:bx.jsonValues,read:{reader:bx.read},write:{target:"mosaicOperation",writer:bx.write}}})],ts.prototype,"operation",void 0),h([Ye("operation",["mosaicOperation","mosaicOperator"])],ts.prototype,"readOperation",null),h([p({type:String,json:{write:{overridePolicy(){return{enabled:this.method==="attribute"}}}}})],ts.prototype,"sortField",void 0),h([p({type:[String,Number],json:{write:{allowNull:!0,overridePolicy(){return{enabled:this.method==="attribute",allowNull:!0}}}}})],ts.prototype,"sortValue",void 0),h([di("sortValue")],ts.prototype,"castSortValue",null),h([p({type:At,json:{write:!0}})],ts.prototype,"viewpoint",void 0),h([p({type:String,json:{write:!0}})],ts.prototype,"where",void 0),ts=S8=h([ce("esri.layers.support.MosaicRule")],ts);const ll=ts,Xf=_n()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"}),wx=_n()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"});let un=class extends Je{constructor(){super(...arguments),this.layer=null,this.compression=void 0,this.pixelType=void 0,this.lercVersion=2}get adjustAspectRatio(){return this.layer.adjustAspectRatio}writeAdjustAspectRatio(t,i,r){this.layer.version<10.3||(i[r]=t)}get bandIds(){return this.layer.bandIds}get compressionQuality(){return this.layer.compressionQuality}writeCompressionQuality(t,i,r){this.format&&this.format.toLowerCase().includes("jpg")&&t!=null&&(i[r]=t)}get compressionTolerance(){return this.layer.compressionTolerance}writeCompressionTolerance(t,i,r){this.format==="lerc"&&t!=null&&(i[r]=t)}get format(){return this.layer.renderer?.type==="vector-field"?"lerc":this.layer.format}get interpolation(){return this.layer.interpolation}get noData(){return this.layer.noData}get noDataInterpretation(){return this.layer.noDataInterpretation}writeLercVersion(t,i,r){this.format==="lerc"&&this.layer.version>=10.5&&(i[r]=t)}get version(){const t=this.layer;return t.commitProperty("bandIds"),t.commitProperty("format"),t.commitProperty("compressionQuality"),t.commitProperty("compressionTolerance"),t.commitProperty("interpolation"),t.commitProperty("noData"),t.commitProperty("noDataInterpretation"),t.commitProperty("mosaicRule"),t.commitProperty("renderingRule"),t.commitProperty("adjustAspectRatio"),t.commitProperty("pixelFilter"),t.commitProperty("definitionExpression"),t.commitProperty("multidimensionalSubset"),(this._get("version")||0)+1}set version(t){this._set("version",t)}get mosaicRule(){const t=this.layer;let i=t.mosaicRule;const r=t.definitionExpression;return i?r&&r!==i.where&&(i=i.clone(),i.where=r):r&&(i=new ll({where:r})),i}get renderingRule(){const t=this.layer;let i=t.renderingRule;const r=t.pixelFilter,n=!t.format||t.format.includes("jpg")||t.format.includes("png");i=this._addResampleRasterFunction(i);const s=t.multidimensionalSubset?.areaOfInterest;return s&&(i=this._addClipFunction(i,s)),n&&!r&&t.renderer?.type!=="vector-field"&&(i=this.combineRendererWithRenderingRule(i)),i}combineRendererWithRenderingRule(t){const i=this.layer,{rasterInfo:r,renderer:n}=i;return t=t||i.renderingRule,!n||!_re(n)?t:rO(_Ae(n,{rasterAttributeTable:r.attributeTable,pixelType:r.pixelType,dataType:r.dataType,bandProperties:r.keyProperties?.BandProperties,convertColorRampToColormap:i.version<10.6,convertToRFT:!!t?.rasterFunctionDefinition,bandCount:r.bandCount}),t)}_addResampleRasterFunction(t){if(this.layer.renderer?.type!=="vector-field"||t?.functionName==="Resample")return t;const i=this.layer.serviceDataType==="esriImageServiceDataTypeVector-UV"?7:10,r=this.layer.serviceRasterInfo.pixelSize;let n=new zi({functionName:"Resample",functionArguments:{ResamplingType:i,InputCellSize:r}});return n=t?.rasterFunctionDefinition?new zi({rasterFunctionDefinition:kh(n)}):n,rO(n,t)}_addClipFunction(t,i){const r=new zi({functionName:"Clip",functionArguments:{ClippingGeometry:i.toJSON(),ClippingType:1}});return rO(r,t)}};h([p()],un.prototype,"layer",void 0),h([p({json:{write:!0}})],un.prototype,"adjustAspectRatio",null),h([it("adjustAspectRatio")],un.prototype,"writeAdjustAspectRatio",null),h([p({json:{write:!0}})],un.prototype,"bandIds",null),h([p({json:{write:!0}})],un.prototype,"compression",void 0),h([p({json:{write:!0}})],un.prototype,"compressionQuality",null),h([it("compressionQuality")],un.prototype,"writeCompressionQuality",null),h([p({json:{write:!0}})],un.prototype,"compressionTolerance",null),h([it("compressionTolerance")],un.prototype,"writeCompressionTolerance",null),h([p({json:{write:!0}})],un.prototype,"format",null),h([p({type:String,json:{read:{reader:Xf.read},write:{writer:Xf.write}}})],un.prototype,"interpolation",null),h([p({json:{write:!0}})],un.prototype,"noData",null),h([p({type:String,json:{read:{reader:wx.read},write:{writer:wx.write}}})],un.prototype,"noDataInterpretation",null),h([p({json:{write:!0}})],un.prototype,"pixelType",void 0),h([p({json:{write:!0}})],un.prototype,"lercVersion",void 0),h([it("lercVersion")],un.prototype,"writeLercVersion",null),h([p({type:Number})],un.prototype,"version",null),h([p({json:{write:!0}})],un.prototype,"mosaicRule",null),h([p({json:{write:!0}})],un.prototype,"renderingRule",null),un=h([ce("esri.layers.mixins.ExportImageServiceParameters")],un);async function Pb(e,t){try{return await createImageBitmap(e)}catch(i){throw new Ce("request:server",`Unable to load ${t}`,{url:t,error:i})}}var M8;const OAe={base:pp,key:"type",typeMap:{extent:Kt,polygon:Aa}};let Ky=M8=class extends Je{constructor(e){super(e),this.areaOfInterest=null,this.subsetDefinitions=null}get dimensions(){const{subsetDefinitions:e}=this;if(e==null||e.length===0)return[];const t=new Map;e.forEach(r=>{if(!r.dimensionName)return;let n,s;if(Array.isArray(r.values[0])){const o=r.values;n=o[0][0],s=o[r.values.length-1][1]}else{const o=r.values;n=o[0],s=o[r.values.length-1]}if(t.has(r.dimensionName)){const o=t.get(r.dimensionName);o[0]=Math.min(n,o[0]),o[1]=Math.max(s,o[1])}else t.set(r.dimensionName,[n,s])});const i=[];for(const r of t)i.push({name:r[0],extent:r[1]});return i}get variables(){const{subsetDefinitions:e}=this;if(e==null||e.length===0)return[];const t=new Set;return e.forEach(i=>{i.variableName&&t.add(i.variableName)}),[...t]}clone(){const e=this.subsetDefinitions?.map(i=>i.clone()),t=this.areaOfInterest?this.areaOfInterest.clone():this.areaOfInterest;return new M8({areaOfInterest:t,subsetDefinitions:e})}};h([p({types:OAe,json:{read:Il,write:!0}})],Ky.prototype,"areaOfInterest",void 0),h([p({readOnly:!0})],Ky.prototype,"dimensions",null),h([p({readOnly:!0})],Ky.prototype,"variables",null),h([p({type:[Lb],json:{write:!0}})],Ky.prototype,"subsetDefinitions",void 0),Ky=M8=h([ce("esri.layers.support.MultidimensionalSubset")],Ky);const RAe=Ky;var I8;let Ns=I8=class extends Je{constructor(){super(...arguments),this.blockWidth=void 0,this.blockHeight=void 0,this.compression=null,this.origin=null,this.firstPyramidLevel=null,this.maximumPyramidLevel=null,this.pyramidScalingFactor=2,this.pyramidBlockWidth=null,this.pyramidBlockHeight=null,this.isVirtualTileInfo=!1,this.tileInfo=null,this.transposeInfo=null,this.blockBoundary=null}clone(){return new I8({blockWidth:this.blockWidth,blockHeight:this.blockHeight,compression:this.compression,origin:Le(this.origin),firstPyramidLevel:this.firstPyramidLevel,maximumPyramidLevel:this.maximumPyramidLevel,pyramidResolutions:Le(this.pyramidResolutions),pyramidScalingFactor:this.pyramidScalingFactor,pyramidBlockWidth:this.pyramidBlockWidth,pyramidBlockHeight:this.pyramidBlockHeight,isVirtualTileInfo:this.isVirtualTileInfo,tileInfo:Le(this.tileInfo),transposeInfo:Le(this.transposeInfo),blockBoundary:Le(this.blockBoundary)})}};h([p({type:Number,json:{write:!0}})],Ns.prototype,"blockWidth",void 0),h([p({type:Number,json:{write:!0}})],Ns.prototype,"blockHeight",void 0),h([p({type:String,json:{write:!0}})],Ns.prototype,"compression",void 0),h([p({type:At,json:{write:!0}})],Ns.prototype,"origin",void 0),h([p({type:Number,json:{write:!0}})],Ns.prototype,"firstPyramidLevel",void 0),h([p({type:Number,json:{write:!0}})],Ns.prototype,"maximumPyramidLevel",void 0),h([p({json:{write:!0}})],Ns.prototype,"pyramidResolutions",void 0),h([p({type:Number,json:{write:!0}})],Ns.prototype,"pyramidScalingFactor",void 0),h([p({type:Number,json:{write:!0}})],Ns.prototype,"pyramidBlockWidth",void 0),h([p({type:Number,json:{write:!0}})],Ns.prototype,"pyramidBlockHeight",void 0),h([p({type:Boolean,json:{write:!0}})],Ns.prototype,"isVirtualTileInfo",void 0),h([p({json:{write:!0}})],Ns.prototype,"tileInfo",void 0),h([p()],Ns.prototype,"transposeInfo",void 0),h([p()],Ns.prototype,"blockBoundary",void 0),Ns=I8=h([ce("esri.layers.support.RasterStorageInfo")],Ns);const Mre=Ns;var T8;let Nr=T8=class extends Je{constructor(e){super(e),this.attributeTable=null,this.bandCount=null,this.colormap=null,this.extent=null,this.format=void 0,this.height=null,this.width=null,this.histograms=null,this.keyProperties={},this.multidimensionalInfo=null,this.noDataValue=null,this.pixelSize=null,this.pixelType=null,this.isPseudoSpatialReference=!1,this.spatialReference=null,this.statistics=null,this.storageInfo=null,this.transform=null}get dataType(){const e=this.keyProperties?.DataType?.toLowerCase()??"generic";return e==="stdtime"?"standard-time":e}get nativeExtent(){return this._get("nativeExtent")||this.extent}set nativeExtent(e){e&&this._set("nativeExtent",e)}get nativePixelSize(){if(Re(this.transform)||!this.transform.affectsPixelSize)return this.pixelSize;const e=this.nativeExtent;return{x:e.width/this.width,y:e.height/this.height}}get hasMultidimensionalTranspose(){return!!this.storageInfo?.transposeInfo}clone(){return new T8({attributeTable:Le(this.attributeTable),bandCount:this.bandCount,colormap:Le(this.colormap),extent:Le(this.extent),nativePixelSize:Le(this.nativePixelSize),format:this.format,height:this.height,width:this.width,histograms:Le(this.histograms),keyProperties:Le(this.keyProperties),multidimensionalInfo:Le(this.multidimensionalInfo),noDataValue:this.noDataValue,pixelSize:Le(this.pixelSize),pixelType:this.pixelType,isPseudoSpatialReference:this.isPseudoSpatialReference,spatialReference:Le(this.spatialReference),statistics:Le(this.statistics),storageInfo:Le(this.storageInfo),transform:Le(this.transform)})}};h([p({json:{write:!0}})],Nr.prototype,"attributeTable",void 0),h([p({json:{write:!0}})],Nr.prototype,"bandCount",void 0),h([p({json:{write:!0}})],Nr.prototype,"colormap",void 0),h([p({type:String,readOnly:!0})],Nr.prototype,"dataType",null),h([p({type:Kt,json:{write:!0}})],Nr.prototype,"extent",void 0),h([p({type:Kt,json:{write:!0}})],Nr.prototype,"nativeExtent",null),h([p({json:{write:!0}})],Nr.prototype,"nativePixelSize",null),h([p({json:{write:!0}})],Nr.prototype,"format",void 0),h([p({json:{write:!0}})],Nr.prototype,"height",void 0),h([p({json:{write:!0}})],Nr.prototype,"width",void 0),h([p({json:{write:!0}})],Nr.prototype,"hasMultidimensionalTranspose",null),h([p({json:{write:!0}})],Nr.prototype,"histograms",void 0),h([p({json:{write:!0}})],Nr.prototype,"keyProperties",void 0),h([p({json:{write:!0}})],Nr.prototype,"multidimensionalInfo",void 0),h([p({json:{write:!0}})],Nr.prototype,"noDataValue",void 0),h([p({json:{write:!0}})],Nr.prototype,"pixelSize",void 0),h([p({json:{write:!0}})],Nr.prototype,"pixelType",void 0),h([p()],Nr.prototype,"isPseudoSpatialReference",void 0),h([p({type:Et,json:{write:!0}})],Nr.prototype,"spatialReference",void 0),h([p({json:{write:!0}})],Nr.prototype,"statistics",void 0),h([p({type:Mre,json:{write:!0}})],Nr.prototype,"storageInfo",void 0),h([p({json:{write:!0}})],Nr.prototype,"transform",void 0),Nr=T8=h([ce("esri.layers.support.RasterInfo")],Nr);const x3=Nr;let kAe=class{constructor(){this._workerThread=null,this._destroyed=!1}async initialize(){const t=await Lee("RasterWorker");this._destroyed?t.close():this._workerThread=t}destroy(){this._destroyed=!0,this._workerThread&&(this._workerThread.close(),this._workerThread=null)}async convertVectorFieldData(t,i){if(!this._workerThread)throw new Ce("raster-jobhandler:no-connection","no available worker connection");const r=await this._workerThread.invoke("convertVectorFieldData",{pixelBlock:t.pixelBlock.toJSON(),type:t.dataType},i);return r?new ai(r):null}async decode(t,i){if(!this._workerThread)throw new Ce("raster-jobhandler:no-connection","no available worker connection");const r=await this._workerThread.invoke("decode",t,i);return r?new ai(r):null}async symbolize(t,i){if(!this._workerThread)throw new Ce("raster-jobhandler:no-connection","no available worker connection");const r={extent:t.extent&&t.extent.toJSON(),pixelBlock:ee(t.pixelBlock)&&t.pixelBlock.toJSON(),simpleStretchParams:t.simpleStretchParams,bandIds:t.bandIds},n=await this._workerThread.invoke("symbolize",r,i);return n?new ai(n):null}async updateSymbolizer(t,i){if(!this._workerThread)throw new Ce("raster-jobhandler:no-connection","no available worker connection");const r=t?.rendererJSON?.histograms;await Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:t.toJSON(),histograms:r},i))}async updateRasterFunction(t,i){if(!this._workerThread)throw new Ce("raster-jobhandler:no-connection","no available worker connection");await Promise.all(this._workerThread.broadcast("updateRasterFunction",{rasterFunctionJSON:t.toJSON()},i))}async process(t,i){if(!this._workerThread)throw new Ce("raster-jobhandler:no-connection","no available worker connection");const r=await this._workerThread.invoke("process",{extent:t.extent?.toJSON(),primaryPixelBlocks:t.primaryPixelBlocks.map(n=>ee(n)?n.toJSON():null),primaryRasterIds:t.primaryRasterIds},i);return r?new ai(r):null}async stretch(t,i){if(!this._workerThread)throw new Ce("raster-jobhandler:no-connection","no available worker connection");if(!t?.pixelBlock)return null;const r={srcPixelBlock:t.pixelBlock.toJSON(),stretchParams:t.stretchParams},n=await this._workerThread.invoke("stretch",r,i);return n?new ai(n):null}async split(t,i){if(!this._workerThread)throw new Ce("raster-jobhandler:no-connection","no available worker connection");if(!t?.pixelBlock)return null;const r={srcPixelBlock:t.pixelBlock.toJSON(),tileSize:t.tileSize,maximumPyramidLevel:t.maximumPyramidLevel},n=await this._workerThread.invoke("split",r,i);return n&&n.forEach((s,o)=>{n.set(o,s?ai.fromJSON(s):null)}),n}async estimateStatisticsHistograms(t,i){if(!this._workerThread)throw new Ce("raster-jobhandler:no-connection","no available worker connection");if(!t?.pixelBlock)return null;const r={srcPixelBlock:t.pixelBlock.toJSON()};return await this._workerThread.invoke("estimateStatisticsHistograms",r,i)}async mosaicAndTransform(t,i){if(!this._workerThread)throw new Ce("raster-jobhandler:no-connection","no available worker connection");if(!t?.srcPixelBlocks?.length)return{pixelBlock:null};const r={...t,srcPixelBlocks:t.srcPixelBlocks.map(s=>ee(s)?s.toJSON():null)},n=await this._workerThread.invoke("mosaicAndTransform",r,i);return{pixelBlock:n.pixelBlock?new ai(n.pixelBlock):null,localNorthDirections:n.localNorthDirections}}async createFlowMesh(t,i){if(!this._workerThread)throw new Ce("raster-jobhandler:no-connection","no available worker connection");const r={buffer:t.flowData.data.buffer,maskBuffer:t.flowData.mask.buffer,width:t.flowData.width,height:t.flowData.height},{meshType:n,simulationSettings:s}=t,o=await this._workerThread.invoke("createFlowMesh",{meshType:n,flowData:r,simulationSettings:s},{...i,transferList:[r.buffer,r.maskBuffer]});return{vertexData:new Float32Array(o.vertexBuffer),indexData:new Uint32Array(o.indexBuffer)}}getProjectionOffsetGrid(t,i){if(!this._workerThread)throw new Ce("raster-jobhandler:no-connection","no available worker connection");const r=ee(t.datumTransformation)?t.datumTransformation.steps.map(o=>({wkid:o.wkid,wkt:o.wkt,isInverse:o.isInverse})):null,n=ee(t.rasterTransform)?t.rasterTransform.toJSON():null,s={projectedExtent:t.projectedExtent.toJSON(),srcBufferExtent:t.srcBufferExtent.toJSON(),pixelSize:t.pixelSize,hasWrapAround:t.hasWrapAround,spacing:t.spacing,datumTransformationSteps:r,rasterTransform:n,isAdaptive:t.isAdaptive,includeGCSGrid:t.includeGCSGrid};return this._workerThread.invoke("getProjectionOffsetGrid",s,i)}};function Ire(e,t,i){const r=t.shift();if(i.length===0){const s=[];i.push({sliceId:-1,multidimensionalDefinition:s})}const n=i.length;for(let s=0;s<n;s++){const o=i.shift().multidimensionalDefinition;r.values?.forEach(a=>{i.push({sliceId:-1,multidimensionalDefinition:[...o,{variableName:e,dimensionName:r.name,values:[a]}]})})}t.length&&Ire(e,t,i)}function hlt(e,t){const i=[];let r=0;return(t?e.variables.filter(n=>n.name.toLowerCase()===t.toLowerCase()):[...e.variables].sort((n,s)=>n.name>s.name?1:-1)).forEach(n=>{const s=[],o=[...n.dimensions].sort((a,l)=>a.name>l.name?-1:1);Ire(n.name,o,s),s.forEach(a=>{i.push({...a,sliceId:r++})})}),i}function dlt(e,t,i){let r=e;if(t&&(t=[...t].sort((n,s)=>n.dimensionName<s.dimensionName?-1:1)).forEach(({dimensionName:n,values:s,isSlice:o})=>{s.length&&(r=r.filter(a=>{const l=a.multidimensionalDefinition.find(c=>c.dimensionName===n);if(l==null)return!1;const u=l.values[0];return typeof u=="number"?typeof s[0]=="number"?s.includes(u):s.some(c=>c[0]<=u&&c[1]>=u):typeof s[0]=="number"?s.some(c=>u[0]<=c&&u[1]>=c):o?s.some(c=>c[0]===u[0]&&c[0]===u[1]):s.some(c=>c[0]>=u[0]&&c[0]<=u[1]||c[1]>=u[0]&&c[1]<=u[1]||c[0]<u[0]&&c[1]>u[1])}))}),r.length&&i&&ee(i.start)&&ee(i.end)){const n=i.start.getTime(),s=i.end.getTime(),o=r[0].multidimensionalDefinition.findIndex(a=>a.dimensionName==="StdTime");o>-1&&(r=r.filter(a=>{const l=a.multidimensionalDefinition[o].values[0];return n<=l&&s>=l}))}return r.map(n=>n.sliceId)}function Tre(e,t){return Array.isArray(e)?t[0]===t[1]?e[0]===t[0]||e[1]===t[0]:e[0]>=t[0]&&e[0]<=t[1]&&e[1]>=t[0]&&e[1]<=t[1]:e>=t[0]&&e<=t[1]}function LAe(e,t){return e[0]<=t[0]&&e[1]>=t[0]||e[0]<=t[1]&&e[1]>=t[1]||e[0]>=t[0]&&e[1]<=t[1]}function Are(e){return e.length===1?[e[0],e[0]]:[e[0],e[e.length-1]]}function Cre(e,t,i){if(!t?.subsetDefinitions?.length)return e;let r;if(i){const{variables:o}=t;if(o.length&&!o.includes(i))return null;const a=t.subsetDefinitions.find(l=>l.dimensionName===e.name&&l.variableName===i);if(!a?.values?.length)return e;r=Are(a.values)}else r=t.dimensions.find(({name:o})=>o===e.name)?.extent;const n=r;if(!n||!n?.length)return e;const s=e.values.filter(o=>Tre(o,n));return{...e,extent:[...n],values:s}}function $re(e,t,i){if(!t?.subsetDefinitions?.length)return!1;const{variables:r}=t;if(r.length&&e.some(({variableName:n})=>n&&!r.includes(n)))return!0;for(let n=0;n<e.length;n++){const s=e[n],o=t.subsetDefinitions.find(a=>(s.variableName===""||a.variableName===s.variableName)&&a.dimensionName===s.dimensionName);if(o?.values.length){const a=Are(o.values);if(!s.isSlice&&s.values.length===2&&!Array.isArray(s.values[0])&&s.values[0]!==s.values[1]&&i){if(!LAe(s.values,a))return!0}else if(s.values.some(l=>!Tre(l,a)))return!0}}return!1}function nO(e,t){if(Re(e))return{isOutside:!1};const{geometry:i,timeExtent:r,multidimensionalDefinition:n}=t;let s=null;if(ee(r)&&(s=PAe(e,r),Re(s)))return{isOutside:!0};const{areaOfInterest:o}=e;if(o&&i){const a=i.type==="point"?i:i.type==="extent"?i.center:i.type==="polygon"?i.centroid:null;if(a&&!o.contains(a))return{isOutside:!0}}return ee(n)&&n.length&&$re(n,e,!0)?{isOutside:!0}:{isOutside:!1,intersection:{geometry:i,timeExtent:s,multidimensionalDefinition:n}}}function PAe(e,t){const i=e.dimensions.find(({name:o})=>o==="StdTime");if(i==null||Re(t.start)&&Re(t.end))return t;t=t.clone();const{start:r,end:n}=t.toJSON(),s=r===n?[r]:r!=null&&n!=null?[r,n]:[r??n];return s.length===2&&i?.extent.length&&(s[0]=Math.max(s[0],i.extent[0]),s[1]=Math.min(s[1],i.extent[1]??i.extent[0]),s[1]<s[0])||$re([new Lb({variableName:"",dimensionName:"StdTime",isSlice:s.length===1,values:s})],e,!0)?null:(t.start=new Date(s[0]),t.end=new Date(s[1]??s[0]),t)}function NAe(e,t={}){const{multidimensionalInfo:i,keyProperties:r}=e;if(Re(i))return null;const{variableName:n,multidimensionalSubset:s,multidimensionalDefinition:o}=t,a=ee(o)?o[0]?.variableName:null,l=n||a||r?.DefaultVariable;let{variables:u}=i;return s?.variables?.length&&(u=u.filter(({name:c})=>s.variables.includes(c))),l?u.find(({name:c})=>c===l)??u[0]:u[0]}function FAe(e,t={}){const i=NAe(e,t);if(!i)return null;const r=[],{dimensions:n,name:s}=i;if(n.length===0)return[new Lb({variableName:s,dimensionName:"",values:[],isSlice:!0})];for(let o=0;o<n.length;o++){const a=Cre(n[o],t.multidimensionalSubset,s);if(!a)return null;const{values:l,extent:u}=a;let c=l?.[0]??u[0];a.name.toLowerCase()==="stdz"&&!a.hasRanges&&Math.abs(u[1])<=Math.abs(u[0])&&(c=l?.length?l[l.length-1]:u[1]),r.push(new Lb({variableName:s,dimensionName:a.name,values:[c],isSlice:!t.useRangeForRangedDimensionInfo||!!a.hasRanges}))}return r}function plt(e){return!(Re(e)||!e.length)&&e.some(t=>{if(t.values==null)return!0;const i=t.values.length;return i===0||i>1||!t.isSlice&&Array.isArray(t.values[0])})}function DAe(e,t){if(Re(t)||Re(e))return null;let i=t.variables.map(r=>({...r}));return e?.variables?.length&&(i=i.filter(({name:r})=>e.variables.includes(r)),i.forEach(r=>{r.dimensions=r.dimensions.map(n=>Cre(n,e,r.name)).filter(ee)})),i}function jAe(e,t){const{values:i}=t;if(i?.length)return Array.isArray(i[0])!==Array.isArray(e)?-1:Array.isArray(i[0])?i.findIndex(a=>a[0]===e[0]&&a[1]===e[1]):i.indexOf(e);const{extent:r}=t;if(Array.isArray(e)||e<r[0]||e>r[1])return-1;const n=t.interval||1;if(t.unit!=="ISO8601")return Math.round((e-r[0])/n);const s=r[0];let o=-1;switch(t.intervalUnit?.toLowerCase()||"seconds"){case"seconds":o=Math.round((e-s)/1e3/n);break;case"minutes":o=Math.round((e-s)/6e4/n);break;case"hours":o=Math.round((e-s)/36e5/n);break;case"days":o=Math.round((e-s)/864e5/n);break;case"months":{const a=new Date(e).getUTCFullYear()-new Date(s).getUTCFullYear(),l=new Date(s).getUTCMonth(),u=new Date(e).getUTCMonth();o=a===0?u-l:u+11-l+12*(a-1)}break;case"years":o=Math.round((new Date(e).getUTCFullYear()-new Date(s).getUTCFullYear())/n);break;case"decades":o=Math.round((new Date(e).getUTCFullYear()-new Date(s).getUTCFullYear())/10/n)}return o}function xz(e){let t=e.values?.length;if(t)return t;const{extent:i,unit:r}=e,n=e.interval||1,s=i?i[1]-i[0]:0;if(r!=="ISO8601")return Math.round(s/n);switch(e.intervalUnit?.toLowerCase()??"seconds"){case"seconds":t=Math.round(s/1e3/n);break;case"minutes":t=Math.round(s/6e4/n);break;case"hours":t=Math.round(s/36e5/n);break;case"days":t=Math.round(s/864e5/n);break;case"months":{const o=new Date(i[1]).getUTCFullYear()-new Date(i[0]).getUTCFullYear(),a=new Date(i[1][0]).getUTCMonth(),l=new Date(i[1][1]).getUTCMonth();t=o===0?l-a+1:l+11-a+12*(o-1)+1}break;case"years":t=Math.round((new Date(i[1]).getUTCFullYear()-new Date(i[0]).getUTCFullYear())/n);break;case"decades":t=Math.round((new Date(i[1]).getUTCFullYear()-new Date(i[0]).getUTCFullYear())/10/n);break;default:t=0}return t}function flt(e,t){let i=0;const r=e[0].variableName,n=[...t.variables].sort((s,o)=>s.name>o.name?1:-1);for(let s=0;s<n.length;s++){const o=n[s],a=[...o.dimensions].sort((c,d)=>c.name>d.name?-1:1);if(o.name!==r){i+=a.map(c=>xz(c)).reduce((c,d)=>c*d);continue}const l=a.map(c=>xz(c)),u=a.length;for(let c=0;c<u;c++){const d=e.find(m=>m.dimensionName===a[c].name);if(d==null)return null;const f=jAe(d.values[0],a[c]);if(f===-1)return null;l.shift(),i+=c===u-1?f:f*l.reduce((m,g)=>m*g)}break}return i}var sO,Sz,Ez,E0={},UAe={get exports(){return E0},set exports(e){E0=e}};Sz=UAe,sO=function(){function e(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return e.prototype={ensureBuffer:function(t){var i=this.buffer,r=i?i.byteLength:0;if(t<r)return i;for(var n=512;n<t;)n<<=1;for(var s=new Uint8Array(n),o=0;o<r;++o)s[o]=i[o];return this.buffer=s},getByte:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(t){var i=this.pos;if(t){this.ensureBuffer(i+t);for(var r=i+t;!this.eof&&this.bufferLength<r;)this.readBlock();var n=this.bufferLength;r>n&&(r=n)}else{for(;!this.eof;)this.readBlock();r=this.bufferLength}return this.pos=r,this.buffer.subarray(i,r)},lookChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(t,i,r){for(var n=t+i;this.bufferLength<=n&&!this.eof;)this.readBlock();return new Stream(this.buffer,t,i,r)},skip:function(t){t||(t=1),this.pos+=t},reset:function(){this.pos=0}},e}(),(Ez=function(){if(!self||!self.Uint32Array)return null;var e=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),t=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),i=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),r=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],n=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];function s(a){throw new Error(a)}function o(a){var l=0,u=a[l++],c=a[l++];u!=-1&&c!=-1||s("Invalid header in flate stream"),(15&u)!=8&&s("Unknown compression method in flate stream"),((u<<8)+c)%31!=0&&s("Bad FCHECK in flate stream"),32&c&&s("FDICT bit set in flate stream"),this.bytes=a,this.bytesPos=l,this.codeSize=0,this.codeBuf=0,sO.call(this)}return o.prototype=Object.create(sO.prototype),o.prototype.getBits=function(a){for(var l,u=this.codeSize,c=this.codeBuf,d=this.bytes,f=this.bytesPos;u<a;)(l=d[f++])===void 0&&s("Bad encoding in flate stream"),c|=l<<u,u+=8;return l=c&(1<<a)-1,this.codeBuf=c>>a,this.codeSize=u-=a,this.bytesPos=f,l},o.prototype.getCode=function(a){for(var l=a[0],u=a[1],c=this.codeSize,d=this.codeBuf,f=this.bytes,m=this.bytesPos;c<u;){var g;(g=f[m++])===void 0&&s("Bad encoding in flate stream"),d|=g<<c,c+=8}var v=l[d&(1<<u)-1],b=v>>16,x=65535&v;return(c==0||c<b||b==0)&&s("Bad encoding in flate stream"),this.codeBuf=d>>b,this.codeSize=c-b,this.bytesPos=m,x},o.prototype.generateHuffmanTable=function(a){for(var l=a.length,u=0,c=0;c<l;++c)a[c]>u&&(u=a[c]);for(var d=1<<u,f=new Uint32Array(d),m=1,g=0,v=2;m<=u;++m,g<<=1,v<<=1)for(var b=0;b<l;++b)if(a[b]==m){var x=0,S=g;for(c=0;c<m;++c)x=x<<1|1&S,S>>=1;for(c=x;c<d;c+=v)f[c]=m<<16|b;++g}return[f,u]},o.prototype.readBlock=function(){function a(q,de,re,me,ve){for(var _e=q.getBits(re)+me;_e-- >0;)de[v++]=ve}var l=this.getBits(3);if(1&l&&(this.eof=!0),(l>>=1)!=0){var u,c;if(l==1)u=r,c=n;else if(l==2){for(var d=this.getBits(5)+257,f=this.getBits(5)+1,m=this.getBits(4)+4,g=Array(e.length),v=0;v<m;)g[e[v++]]=this.getBits(3);for(var b=this.generateHuffmanTable(g),x=0,S=(v=0,d+f),T=new Array(S);v<S;){var _=this.getCode(b);_==16?a(this,T,2,3,x):_==17?a(this,T,3,3,x=0):_==18?a(this,T,7,11,x=0):T[v++]=x=_}u=this.generateHuffmanTable(T.slice(0,d)),c=this.generateHuffmanTable(T.slice(d,S))}else s("Unknown block type in flate stream");for(var M=(N=this.buffer)?N.length:0,I=this.bufferLength;;){var $=this.getCode(u);if($<256)I+1>=M&&(M=(N=this.ensureBuffer(I+1)).length),N[I++]=$;else{if($==256)return void(this.bufferLength=I);var L=($=t[$-=257])>>16;L>0&&(L=this.getBits(L)),x=(65535&$)+L,$=this.getCode(c),(L=($=i[$])>>16)>0&&(L=this.getBits(L));var B=(65535&$)+L;I+x>=M&&(M=(N=this.ensureBuffer(I+x)).length);for(var z=0;z<x;++z,++I)N[I]=N[I-B]}}}else{var W,J=this.bytes,K=this.bytesPos;(W=J[K++])===void 0&&s("Bad block header in flate stream");var Q=W;(W=J[K++])===void 0&&s("Bad block header in flate stream"),Q|=W<<8,(W=J[K++])===void 0&&s("Bad block header in flate stream");var y=W;(W=J[K++])===void 0&&s("Bad block header in flate stream"),(y|=W<<8)!=(65535&~Q)&&s("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var A=this.bufferLength,N=this.ensureBuffer(A+Q),j=A+Q;this.bufferLength=j;for(var oe=A;oe<j;++oe){if((W=J[K++])===void 0){this.eof=!0;break}N[oe]=W}this.bytesPos=K}},o}())!==void 0&&(Sz.exports=Ez);let VAe=class Ore{constructor(t){this._canvas=null,this._ctx=null,t&&(this._canvas=t.canvas,this._ctx=t.ctx||t.canvas&&t.canvas.getContext("2d"))}decode(t,i,r){if(!t||t.byteLength<10)throw new Ce("imagecanvasdecoder: decode","required a valid encoded data as input.");let{width:n=0,height:s=0,format:o}=i;const{applyJpegMask:a}=i;if(a&&(!n||!s))throw new Ce("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((l,u)=>{let c=null;o==="jpg"&&a&&(c=Ore._getMask(t,{width:n,height:s}));const d=new Blob([new Uint8Array(t)],{type:"image/"+o=="jpg"?"jpeg":o}),f=URL.createObjectURL(d),m=new Image;let g;m.src=f,m.onload=()=>{if(URL.revokeObjectURL(f),Sl(r))return void u(fr());n=m.width,s=m.height,this._canvas&&this._ctx?(this._canvas.width===n&&this._canvas.height===s||(this._canvas.width=n,this._canvas.height=s),this._ctx.clearRect(0,0,n,s)):(this._canvas=document.createElement("canvas"),this._canvas.width=n,this._canvas.height=s,this._ctx=this._canvas.getContext("2d")),this._ctx.drawImage(m,0,0);const v=this._ctx.getImageData(0,0,n,s);let b;if(g=v.data,i.renderOnCanvas){if(c)for(b=0;b<c.length;b++)c[b]?g[4*b+3]=255:g[4*b+3]=0;return this._ctx.putImageData(v,0,0),void l(null)}const x=n*s,S=new Uint8Array(x),T=new Uint8Array(x),_=new Uint8Array(x);if(c)for(b=0;b<x;b++)S[b]=g[4*b],T[b]=g[4*b+1],_[b]=g[4*b+2];else for(c=new Uint8Array(x),b=0;b<x;b++)S[b]=g[4*b],T[b]=g[4*b+1],_[b]=g[4*b+2],c[b]=g[4*b+3];l({width:n,height:s,pixels:[S,T,_],mask:c,pixelType:"u8"})},m.onerror=()=>{URL.revokeObjectURL(f),u("cannot load image")}})}static _getMask(t,i){let r=null;try{const n=new Uint8Array(t),s=Math.ceil(n.length/2);let o=0;const a=n.length-2;for(o=s;o<a&&(n[o]!==255||n[o+1]!==217);o++);if(o+=2,o<n.length-1){const l=new E0(n.subarray(o)).getBytes();r=new Uint8Array(i.width*i.height);let u=0;for(let c=0;c<l.length;c++)for(let d=7;d>=0;d--)r[u++]=l[c]>>d&1}}catch{}return r}};var Mz,Iz,Tz,RA={},BAe={get exports(){return RA},set exports(e){RA=e}};Mz=BAe,Iz=function(){var e=function(){function t(i){this.message="JPEG error: "+i}return t.prototype=new Error,t.prototype.name="JpegError",t.constructor=t,t}();return function(){if(!self||!self.Uint8ClampedArray)return null;var t=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),i=4017,r=799,n=3406,s=2276,o=1567,a=3784,l=5793,u=2896;function c(){this.decodeTransform=null,this.colorTransform=-1}function d(x,S){for(var T,_,M=0,I=[],$=16;$>0&&!x[$-1];)$--;I.push({children:[],index:0});var L,B=I[0];for(T=0;T<$;T++){for(_=0;_<x[T];_++){for((B=I.pop()).children[B.index]=S[M];B.index>0;)B=I.pop();for(B.index++,I.push(B);I.length<=T;)I.push(L={children:[],index:0}),B.children[B.index]=L.children,B=L;M++}T+1<$&&(I.push(L={children:[],index:0}),B.children[B.index]=L.children,B=L)}return I[0].children}function f(x,S,T){return 64*((x.blocksPerLine+1)*S+T)}function m(x,S,T,_,M,I,$,L,B){var z=T.mcusPerLine,W=T.progressive,J=S,K=0,Q=0;function y(){if(Q>0)return Q--,K>>Q&1;if((K=x[S++])===255){var C=x[S++];if(C)throw new e("unexpected marker "+(K<<8|C).toString(16))}return Q=7,K>>>7}function A(C){for(var G=C;;){if(typeof(G=G[y()])=="number")return G;if(typeof G!="object")throw new e("invalid huffman sequence")}}function N(C){for(var G=0;C>0;)G=G<<1|y(),C--;return G}function j(C){if(C===1)return y()===1?1:-1;var G=N(C);return G>=1<<C-1?G:G+(-1<<C)+1}function oe(C,G){var Z=A(C.huffmanTableDC),F=Z===0?0:j(Z);C.blockData[G]=C.pred+=F;for(var te=1;te<64;){var ge=A(C.huffmanTableAC),xe=15&ge,fe=ge>>4;if(xe!==0){var ze=t[te+=fe];C.blockData[G+ze]=j(xe),te++}else{if(fe<15)break;te+=16}}}function q(C,G){var Z=A(C.huffmanTableDC),F=Z===0?0:j(Z)<<B;C.blockData[G]=C.pred+=F}function de(C,G){C.blockData[G]|=y()<<B}var re=0;function me(C,G){if(re>0)re--;else for(var Z=I,F=$;Z<=F;){var te=A(C.huffmanTableAC),ge=15&te,xe=te>>4;if(ge!==0){var fe=t[Z+=xe];C.blockData[G+fe]=j(ge)*(1<<B),Z++}else{if(xe<15){re=N(xe)+(1<<xe)-1;break}Z+=16}}}var ve,_e=0;function Se(C,G){for(var Z,F,te=I,ge=$,xe=0;te<=ge;){var fe=t[te];switch(_e){case 0:if(xe=(F=A(C.huffmanTableAC))>>4,(Z=15&F)==0)xe<15?(re=N(xe)+(1<<xe),_e=4):(xe=16,_e=1);else{if(Z!==1)throw new e("invalid ACn encoding");ve=j(Z),_e=xe?2:3}continue;case 1:case 2:C.blockData[G+fe]?C.blockData[G+fe]+=y()<<B:--xe==0&&(_e=_e===2?3:0);break;case 3:C.blockData[G+fe]?C.blockData[G+fe]+=y()<<B:(C.blockData[G+fe]=ve<<B,_e=0);break;case 4:C.blockData[G+fe]&&(C.blockData[G+fe]+=y()<<B)}te++}_e===4&&--re==0&&(_e=0)}function Oe(C,G,Z,F,te){var ge=Z%z;G(C,f(C,(Z/z|0)*C.v+F,ge*C.h+te))}function Me(C,G,Z){G(C,f(C,Z/C.blocksPerLine|0,Z%C.blocksPerLine))}var we,Ie,Ae,H,V,D,ne=_.length;D=W?I===0?L===0?q:de:L===0?me:Se:oe;var ye,ae,U,le,ie=0;for(ae=ne===1?_[0].blocksPerLine*_[0].blocksPerColumn:z*T.mcusPerColumn;ie<ae;){var k=M?Math.min(ae-ie,M):ae;for(Ie=0;Ie<ne;Ie++)_[Ie].pred=0;if(re=0,ne===1)for(we=_[0],V=0;V<k;V++)Me(we,D,ie),ie++;else for(V=0;V<k;V++){for(Ie=0;Ie<ne;Ie++)for(U=(we=_[Ie]).h,le=we.v,Ae=0;Ae<le;Ae++)for(H=0;H<U;H++)Oe(we,D,ie,Ae,H);ie++}Q=0,(ye=b(x,S))&&ye.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+ye.invalid),S=ye.offset);var O=ye&&ye.marker;if(!O||O<=65280)throw new e("marker was not found");if(!(O>=65488&&O<=65495))break;S+=2}return(ye=b(x,S))&&ye.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+ye.invalid),S=ye.offset),S-J}function g(x,S,T){var _,M,I,$,L,B,z,W,J,K,Q,y,A,N,j,oe,q,de=x.quantizationTable,re=x.blockData;if(!de)throw new e("missing required Quantization Table.");for(var me=0;me<64;me+=8)J=re[S+me],K=re[S+me+1],Q=re[S+me+2],y=re[S+me+3],A=re[S+me+4],N=re[S+me+5],j=re[S+me+6],oe=re[S+me+7],J*=de[me],K|Q|y|A|N|j|oe?(K*=de[me+1],Q*=de[me+2],y*=de[me+3],A*=de[me+4],N*=de[me+5],j*=de[me+6],oe*=de[me+7],M=(_=(_=l*J+128>>8)+(M=l*A+128>>8)+1>>1)-M,q=(I=Q)*a+($=j)*o+128>>8,I=I*o-$*a+128>>8,z=(L=(L=u*(K-oe)+128>>8)+(z=N<<4)+1>>1)-z,B=(W=(W=u*(K+oe)+128>>8)+(B=y<<4)+1>>1)-B,$=(_=_+($=q)+1>>1)-$,I=(M=M+I+1>>1)-I,q=L*s+W*n+2048>>12,L=L*n-W*s+2048>>12,W=q,q=B*r+z*i+2048>>12,B=B*i-z*r+2048>>12,z=q,T[me]=_+W,T[me+7]=_-W,T[me+1]=M+z,T[me+6]=M-z,T[me+2]=I+B,T[me+5]=I-B,T[me+3]=$+L,T[me+4]=$-L):(q=l*J+512>>10,T[me]=q,T[me+1]=q,T[me+2]=q,T[me+3]=q,T[me+4]=q,T[me+5]=q,T[me+6]=q,T[me+7]=q);for(var ve=0;ve<8;++ve)J=T[ve],(K=T[ve+8])|(Q=T[ve+16])|(y=T[ve+24])|(A=T[ve+32])|(N=T[ve+40])|(j=T[ve+48])|(oe=T[ve+56])?(M=(_=4112+((_=l*J+2048>>12)+(M=l*A+2048>>12)+1>>1))-M,q=(I=Q)*a+($=j)*o+2048>>12,I=I*o-$*a+2048>>12,$=q,z=(L=(L=u*(K-oe)+2048>>12)+(z=N)+1>>1)-z,B=(W=(W=u*(K+oe)+2048>>12)+(B=y)+1>>1)-B,q=L*s+W*n+2048>>12,L=L*n-W*s+2048>>12,W=q,q=B*r+z*i+2048>>12,B=B*i-z*r+2048>>12,J=(J=(_=_+$+1>>1)+W)<16?0:J>=4080?255:J>>4,K=(K=(M=M+I+1>>1)+(z=q))<16?0:K>=4080?255:K>>4,Q=(Q=(I=M-I)+B)<16?0:Q>=4080?255:Q>>4,y=(y=($=_-$)+L)<16?0:y>=4080?255:y>>4,A=(A=$-L)<16?0:A>=4080?255:A>>4,N=(N=I-B)<16?0:N>=4080?255:N>>4,j=(j=M-z)<16?0:j>=4080?255:j>>4,oe=(oe=_-W)<16?0:oe>=4080?255:oe>>4,re[S+ve]=J,re[S+ve+8]=K,re[S+ve+16]=Q,re[S+ve+24]=y,re[S+ve+32]=A,re[S+ve+40]=N,re[S+ve+48]=j,re[S+ve+56]=oe):(q=(q=l*J+8192>>14)<-2040?0:q>=2024?255:q+2056>>4,re[S+ve]=q,re[S+ve+8]=q,re[S+ve+16]=q,re[S+ve+24]=q,re[S+ve+32]=q,re[S+ve+40]=q,re[S+ve+48]=q,re[S+ve+56]=q)}function v(x,S){for(var T=S.blocksPerLine,_=S.blocksPerColumn,M=new Int16Array(64),I=0;I<_;I++)for(var $=0;$<T;$++)g(S,f(S,I,$),M);return S.blockData}function b(x,S,T){function _(B){return x[B]<<8|x[B+1]}var M=x.length-1,I=T<S?T:S;if(S>=M)return null;var $=_(S);if($>=65472&&$<=65534)return{invalid:null,marker:$,offset:S};for(var L=_(I);!(L>=65472&&L<=65534);){if(++I>=M)return null;L=_(I)}return{invalid:$.toString(16),marker:L,offset:I}}return c.prototype={parse:function(x){function S(){var C=x[$]<<8|x[$+1];return $+=2,C}function T(){var C=S(),G=$+C-2,Z=b(x,G,$);Z&&Z.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+Z.invalid),G=Z.offset);var F=x.subarray($,G);return $+=F.length,F}function _(C){for(var G=Math.ceil(C.samplesPerLine/8/C.maxH),Z=Math.ceil(C.scanLines/8/C.maxV),F=0;F<C.components.length;F++){V=C.components[F];var te=Math.ceil(Math.ceil(C.samplesPerLine/8)*V.h/C.maxH),ge=Math.ceil(Math.ceil(C.scanLines/8)*V.v/C.maxV),xe=G*V.h,fe=Z*V.v*64*(xe+1);V.blockData=new Int16Array(fe),V.blocksPerLine=te,V.blocksPerColumn=ge}C.mcusPerLine=G,C.mcusPerColumn=Z}var M,I,$=0,L=null,B=null,z=[],W=[],J=[],K=S();if(K!==65496)throw new e("SOI not found");for(K=S();K!==65497;){var Q,y,A;switch(K){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var N=T();K===65504&&N[0]===74&&N[1]===70&&N[2]===73&&N[3]===70&&N[4]===0&&(L={version:{major:N[5],minor:N[6]},densityUnits:N[7],xDensity:N[8]<<8|N[9],yDensity:N[10]<<8|N[11],thumbWidth:N[12],thumbHeight:N[13],thumbData:N.subarray(14,14+3*N[12]*N[13])}),K===65518&&N[0]===65&&N[1]===100&&N[2]===111&&N[3]===98&&N[4]===101&&(B={version:N[5]<<8|N[6],flags0:N[7]<<8|N[8],flags1:N[9]<<8|N[10],transformCode:N[11]});break;case 65499:for(var j=S()+$-2;$<j;){var oe=x[$++],q=new Uint16Array(64);if(oe>>4){if(oe>>4!=1)throw new e("DQT - invalid table spec");for(y=0;y<64;y++)q[t[y]]=S()}else for(y=0;y<64;y++)q[t[y]]=x[$++];z[15&oe]=q}break;case 65472:case 65473:case 65474:if(M)throw new e("Only single frame JPEGs supported");S(),(M={}).extended=K===65473,M.progressive=K===65474,M.precision=x[$++],M.scanLines=S(),M.samplesPerLine=S(),M.components=[],M.componentIds={};var de,re=x[$++],me=0,ve=0;for(Q=0;Q<re;Q++){de=x[$];var _e=x[$+1]>>4,Se=15&x[$+1];me<_e&&(me=_e),ve<Se&&(ve=Se);var Oe=x[$+2];A=M.components.push({h:_e,v:Se,quantizationId:Oe,quantizationTable:null}),M.componentIds[de]=A-1,$+=3}M.maxH=me,M.maxV=ve,_(M);break;case 65476:var Me=S();for(Q=2;Q<Me;){var we=x[$++],Ie=new Uint8Array(16),Ae=0;for(y=0;y<16;y++,$++)Ae+=Ie[y]=x[$];var H=new Uint8Array(Ae);for(y=0;y<Ae;y++,$++)H[y]=x[$];Q+=17+Ae,(we>>4?W:J)[15&we]=d(Ie,H)}break;case 65501:S(),I=S();break;case 65498:S();var V,D=x[$++],ne=[];for(Q=0;Q<D;Q++){var ye=M.componentIds[x[$++]];V=M.components[ye];var ae=x[$++];V.huffmanTableDC=J[ae>>4],V.huffmanTableAC=W[15&ae],ne.push(V)}var U=x[$++],le=x[$++],ie=x[$++],k=m(x,$,M,ne,I,U,le,ie>>4,15&ie);$+=k;break;case 65535:x[$]!==255&&$--;break;default:if(x[$-3]===255&&x[$-2]>=192&&x[$-2]<=254){$-=3;break}throw new e("unknown marker "+K.toString(16))}K=S()}for(this.width=M.samplesPerLine,this.height=M.scanLines,this.jfif=L,this.eof=$,this.adobe=B,this.components=[],Q=0;Q<M.components.length;Q++){var O=z[(V=M.components[Q]).quantizationId];O&&(V.quantizationTable=O),this.components.push({output:v(M,V),scaleX:V.h/M.maxH,scaleY:V.v/M.maxV,blocksPerLine:V.blocksPerLine,blocksPerColumn:V.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(x,S){var T,_,M,I,$,L,B,z,W,J,K,Q=this.width/x,y=this.height/S,A=0,N=this.components.length,j=x*S*N,oe=new Uint8ClampedArray(j),q=new Uint32Array(x),de=4294967288;for(B=0;B<N;B++){for(_=(T=this.components[B]).scaleX*Q,M=T.scaleY*y,A=B,K=T.output,I=T.blocksPerLine+1<<3,$=0;$<x;$++)z=0|$*_,q[$]=(z&de)<<3|7&z;for(L=0;L<S;L++)for(J=I*((z=0|L*M)&de)|(7&z)<<3,$=0;$<x;$++)oe[A]=K[J+q[$]],A+=N}var re=this.decodeTransform;if(re)for(B=0;B<j;)for(z=0,W=0;z<N;z++,B++,W+=2)oe[B]=(oe[B]*re[W]>>8)+re[W+1];return oe},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:this.numComponents===3?this.colorTransform!==0:this.colorTransform===1},_convertYccToRgb:function(x){for(var S,T,_,M=0,I=x.length;M<I;M+=3)S=x[M],T=x[M+1],_=x[M+2],x[M]=S-179.456+1.402*_,x[M+1]=S+135.459-.344*T-.714*_,x[M+2]=S-226.816+1.772*T;return x},_convertYcckToRgb:function(x){for(var S,T,_,M,I=0,$=0,L=x.length;$<L;$+=4)S=x[$],T=x[$+1],_=x[$+2],M=x[$+3],x[I++]=T*(-660635669420364e-19*T+.000437130475926232*_-54080610064599e-18*S+.00048449797120281*M-.154362151871126)-122.67195406894+_*(-.000957964378445773*_+.000817076911346625*S-.00477271405408747*M+1.53380253221734)+S*(.000961250184130688*S-.00266257332283933*M+.48357088451265)+M*(-.000336197177618394*M+.484791561490776),x[I++]=107.268039397724+T*(219927104525741e-19*T-.000640992018297945*_+.000659397001245577*S+.000426105652938837*M-.176491792462875)+_*(-.000778269941513683*_+.00130872261408275*S+.000770482631801132*M-.151051492775562)+S*(.00126935368114843*S-.00265090189010898*M+.25802910206845)+M*(-.000318913117588328*M-.213742400323665),x[I++]=T*(-.000570115196973677*T-263409051004589e-19*_+.0020741088115012*S-.00288260236853442*M+.814272968359295)-20.810012546947+_*(-153496057440975e-19*_-.000132689043961446*S+.000560833691242812*M-.195152027534049)+S*(.00174418132927582*S-.00255243321439347*M+.116935020465145)+M*(-.000343531996510555*M+.24165260232407);return x},_convertYcckToCmyk:function(x){for(var S,T,_,M=0,I=x.length;M<I;M+=4)S=x[M],T=x[M+1],_=x[M+2],x[M]=434.456-S-1.402*_,x[M+1]=119.541-S+.344*T+.714*_,x[M+2]=481.816-S-1.772*T;return x},_convertCmykToRgb:function(x){for(var S,T,_,M,I=0,$=1/255,L=0,B=x.length;L<B;L+=4)S=x[L]*$,T=x[L+1]*$,_=x[L+2]*$,M=x[L+3]*$,x[I++]=255+S*(-4.387332384609988*S+54.48615194189176*T+18.82290502165302*_+212.25662451639585*M-285.2331026137004)+T*(1.7149763477362134*T-5.6096736904047315*_-17.873870861415444*M-5.497006427196366)+_*(-2.5217340131683033*_-21.248923337353073*M+17.5119270841813)-M*(21.86122147463605*M+189.48180835922747),x[I++]=255+S*(8.841041422036149*S+60.118027045597366*T+6.871425592049007*_+31.159100130055922*M-79.2970844816548)+T*(-15.310361306967817*T+17.575251261109482*_+131.35250912493976*M-190.9453302588951)+_*(4.444339102852739*_+9.8632861493405*M-24.86741582555878)-M*(20.737325471181034*M+187.80453709719578),x[I++]=255+S*(.8842522430003296*S+8.078677503112928*T+30.89978309703729*_-.23883238689178934*M-14.183576799673286)+T*(10.49593273432072*T+63.02378494754052*_+50.606957656360734*M-112.23884253719248)+_*(.03296041114873217*_+115.60384449646641*M-193.58209356861505)-M*(22.33816807309886*M+180.12613974708367);return x},getData:function(x,S,T){if(this.numComponents>4)throw new e("Unsupported color mode");var _=this._getLinearizedBlockData(x,S);if(this.numComponents===1&&T){for(var M=_.length,I=new Uint8ClampedArray(3*M),$=0,L=0;L<M;L++){var B=_[L];I[$++]=B,I[$++]=B,I[$++]=B}return I}if(this.numComponents===3&&this._isColorConversionNeeded())return this._convertYccToRgb(_);if(this.numComponents===4){if(this._isColorConversionNeeded())return T?this._convertYcckToRgb(_):this._convertYcckToCmyk(_);if(T)return this._convertCmykToRgb(_)}return _}},c}()},(Tz=Iz())!==void 0&&(Mz.exports=Tz);let zAe=class{static decode(t,i=!1){const r=new Uint8Array(t),n=new RA;n.parse(r);const{width:s,height:o,numComponents:a,eof:l}=n,u=n.getData(s,o,!0),c=s*o;let d,f=null,m=0,g=0,v=0;if(!i&&l<r.length-1)try{const b=new E0(r.subarray(l)).getBytes();f=new Uint8Array(c);let x=0;for(m=0;m<b.length;m++)for(v=7;v>=0;v--)f[x++]=b[m]>>v&1}catch{}if(a===1&&u.length===s*o){const b=new Uint8Array(u.buffer);d=[b,b,b]}else{for(d=[],m=0;m<3;m++)d.push(new Uint8Array(c));for(v=0,g=0;g<c;g++)for(m=0;m<3;m++)d[m][g]=u[v++]}return{width:s,height:o,pixels:d,mask:f}}};const Rre=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,127]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-34027999387901484e22,34027999387901484e22]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-17976931348623157e292,17976931348623157e292]}];let oO=null;function kre(){return oO||(oO=De(()=>import("./lerc-wasm-81cbfca1.js"),[],import.meta.url).then(e=>e.l).then(({default:e})=>e({locateFile:t=>Di(`esri/layers/support/rasterFormats/${t}`)})).then(e=>{qAe(e)}),oO)}const kA={getBlobInfo:null,decode:null};function GAe(e){return 16+(e>>3<<3)}function Fp(e,t,i){i.set(e.slice(t,t+i.length))}function qAe(e){const{_malloc:t,_free:i,_lerc_getBlobInfo:r,_lerc_getDataRanges:n,_lerc_decode_4D:s,asm:o}=e;let a;const l=Object.values(o).find(c=>c&&"buffer"in c&&c.buffer===e.HEAPU8.buffer),u=c=>{const d=c.map(v=>GAe(v)),f=d.reduce((v,b)=>v+b),m=t(f);a=new Uint8Array(l.buffer);let g=d[0];d[0]=m;for(let v=1;v<d.length;v++){const b=d[v];d[v]=d[v-1]+g,g=b}return d};kA.getBlobInfo=c=>{const m=new Uint8Array(48),g=new Uint8Array(8*3),[v,b,x]=u([c.length,m.length,g.length]);a.set(c,v),a.set(m,b),a.set(g,x);let S=r(v,c.length,b,x,12,3);if(S)throw i(v),new Error(`lerc-getBlobInfo: error code is ${S}`);a=new Uint8Array(l.buffer),Fp(a,b,m),Fp(a,x,g);const T=new Uint32Array(m.buffer),_=new Float64Array(g.buffer),[M,I,,$,L,B,z,W,J,K,Q]=T,y={version:M,depthCount:K,width:$,height:L,validPixelCount:z,bandCount:B,blobSize:W,maskCount:J,dataType:I,minValue:_[0],maxValue:_[1],maxZerror:_[2],statistics:[],bandCountWithNoData:Q};if(Q)return y;if(K===1&&B===1)return i(v),y.statistics.push({minValue:_[0],maxValue:_[1]}),y;const A=K*B*8,N=new Uint8Array(A),j=new Uint8Array(A);let oe=v,q=0,de=0,re=!1;if(a.byteLength<v+2*A?(i(v),re=!0,[oe,q,de]=u([c.length,A,A]),a.set(c,oe)):[q,de]=u([A,A]),a.set(N,q),a.set(j,de),S=n(oe,c.length,K,B,q,de),S)throw i(oe),re||i(q),new Error(`lerc-getDataRanges: error code is ${S}`);a=new Uint8Array(l.buffer),Fp(a,q,N),Fp(a,de,j);const me=new Float64Array(N.buffer),ve=new Float64Array(j.buffer),_e=y.statistics;for(let Se=0;Se<B;Se++)if(K>1){const Oe=me.slice(Se*K,(Se+1)*K),Me=ve.slice(Se*K,(Se+1)*K),we=Math.min.apply(null,Oe),Ie=Math.max.apply(null,Me);_e.push({minValue:we,maxValue:Ie,depthStats:{minValues:Oe,maxValues:Me}})}else _e.push({minValue:me[Se],maxValue:ve[Se]});return i(oe),re||i(q),y},kA.decode=(c,d)=>{const{maskCount:f,depthCount:m,bandCount:g,width:v,height:b,dataType:x,bandCountWithNoData:S}=d,T=Rre[x],_=v*b,M=new Uint8Array(_*g),I=_*m*g*T.size,$=new Uint8Array(I),L=new Uint8Array(g),B=new Uint8Array(8*g),[z,W,J,K,Q]=u([c.length,M.length,$.length,L.length,B.length]);a.set(c,z),a.set(M,W),a.set($,J),a.set(L,K),a.set(B,Q);const y=s(z,c.length,f,W,m,v,b,g,x,J,K,Q);if(y)throw i(z),new Error(`lerc-decode: error code is ${y}`);a=new Uint8Array(l.buffer),Fp(a,J,$),Fp(a,W,M);let A=null;if(S){Fp(a,K,L),Fp(a,Q,B),A=[];const N=new Float64Array(B.buffer);for(let j=0;j<L.length;j++)A.push(L[j]?N[j]:null)}return i(z),{data:$,maskData:M,noDataValues:A}}}function HAe(e,t,i,r,n){if(i<2)return e;const s=new r(t*i);if(n)for(let o=0,a=0;o<t;o++)for(let l=0,u=o;l<i;l++,u+=t)s[u]=e[a++];else for(let o=0,a=0;o<t;o++)for(let l=0,u=o;l<i;l++,u+=t)s[a++]=e[u];return s}function Lre(e,t={}){const i=t.inputOffset??0,r=e instanceof Uint8Array?e.subarray(i):new Uint8Array(e,i),n=kA.getBlobInfo(r),{data:s,maskData:o,noDataValues:a}=kA.decode(r,n),{width:l,height:u,bandCount:c,depthCount:d,dataType:f,maskCount:m,statistics:g}=n,v=Rre[f],b=new v.ctor(s.buffer),x=[],S=[],T=l*u,_=T*d;for(let z=0;z<c;z++){const W=b.subarray(z*_,(z+1)*_);if(t.returnInterleaved)x.push(W);else{const J=HAe(W,T,d,v.ctor,!0);x.push(J)}S.push(o.subarray(z*_,(z+1)*_))}const M=m===0?null:m===1?S[0]:new Uint8Array(T);if(m>1){M.set(S[0]);for(let z=1;z<S.length;z++){const W=S[z];for(let J=0;J<T;J++)M[J]=M[J]&W[J]}}const{noDataValue:I}=t,$=I!=null&&v.range[0]<=I&&v.range[1]>=I;if(m>0&&$)for(let z=0;z<c;z++){const W=x[z],J=S[z]||M;for(let K=0;K<T;K++)J[K]===0&&(W[K]=I)}const L=m===c&&c>1?S:null,{pixelType:B}=v;return{width:l,height:u,bandCount:c,pixelType:B,depthCount:d,statistics:g,pixels:x,mask:M,bandMasks:L,noDataValues:a}}function WAe(e,t,i,r=!0){if(t%4!=0||i%4!=0){const n=new ArrayBuffer(4*Math.ceil(i/4)),s=new Uint8Array(n),o=new Uint8Array(e,t,i);if(r)for(let a=0;a<s.length;a+=4)s[a]=o[a+3],s[a+1]=o[a+2],s[a+2]=o[a+1],s[a+3]=o[a];else s.set(o);return new Uint32Array(s.buffer)}if(r){const n=new Uint8Array(e,t,i),s=new Uint8Array(n.length);for(let o=0;o<s.length;o+=4)s[o]=n[o+3],s[o+1]=n[o+2],s[o+2]=n[o+1],s[o+3]=n[o];return new Uint32Array(s.buffer)}return new Uint32Array(e,t,i/4)}function Az(){const e=[];for(let t=0;t<=257;t++)e[t]=[t];return e}function Cz(e,t){for(let i=0;i<t.length;i++)e.push(t[i])}const sv=new Set;function zD(e,t,i,r=!0){const n=WAe(e,t,i,r);let s=9,o=Az(),a=32,l=o.length,u=[],c=1,d=n[0],f=0;const m=n.length,g=8*(4*m-i),v=[];for(;d!=null;){if(a>=s)a-=s,f=d>>>32-s,d<<=s;else{f=d>>>32-a,d=n[c++];const x=s-a;a=32-x,f=(f<<x)+(d>>>a),d<<=x}if(f===257)break;if(f===256){s=9,o=Az(),l=o.length,u=[];continue}const b=o[f];if(b==null){if(f>o.length)throw new Error("data integrity issue: code does not exist on code page");u.push(u[0]),o[l++]=u.slice(),Cz(v,u)}else Cz(v,b),u.push(b[0]),u.length>1&&(o[l++]=u.slice()),u=b.slice();if(sv.has(l)&&s++,a===0&&(d=n[c++],a=32),c>m||c===m&&a<=g)break}return new Uint8Array(v)}sv.add(511),sv.add(1023),sv.add(2047),sv.add(4095),sv.add(8191);const $z=(e,t)=>{const i=t.width*t.height,r=t.pixelType;return Math.floor(e.byteLength/(i*Pre(r)))},Pre=e=>{let t=1;switch(e){case Uint8Array:case Int8Array:t=1;break;case Uint16Array:case Int16Array:t=2;break;case Uint32Array:case Int32Array:case Float32Array:t=4;break;case Float64Array:t=8}return t},JAe=(e,t)=>{if(8*e.byteLength<t)return null;const i=new Uint8Array(e,0,Math.ceil(t/8)),r=new Uint8Array(t);let n=0,s=0,o=0,a=0;for(o=0;o<i.length-1;o++)for(s=i[o],a=7;a>=0;a--)r[n++]=s>>a&1;for(a=7;n<t-1;)s=i[i.length-1],r[n++]=s>>a&1,a--;return r};let ZAe=class{static decode(t,i){const r=i.pixelType,n=[],s=i.width*i.height,o=$z(t,i),{bandIds:a,format:l}=i,u=a&&a.length||$z(t,i),c=t.byteLength-t.byteLength%(s*Pre(r)),d=new r(t,0,s*o);let f,m,g,v,b=null;if(l==="bip")for(f=0;f<u;f++){for(g=new r(s),v=a?a[f]:f,m=0;m<s;m++)g[m]=d[m*o+v];n.push(g)}else if(l==="bsq")for(f=0;f<u;f++)v=a?a[f]:f,n.push(d.subarray(v*s,(v+1)*s));return c<t.byteLength-1&&(b=JAe(t.slice(c),s)),{pixels:n,mask:b}}};function YAe(e,t){let i=0,r="",n=0,s=0;const o=e.length;for(;i<o;)s=e[i++],n=s>>4,n<8?n=1:n===15?(n=4,s=(7&s)<<18|(63&e[i++])<<12|(63&e[i++])<<6|63&e[i++]):n===14?(n=3,s=(15&s)<<12|(63&e[i++])<<6|63&e[i++]):(n=2,s=(31&s)<<6|63&e[i++]),(s!==0||t)&&(r+=String.fromCharCode(s));return r}const GD=(()=>{const e=[];return e[254]="NEWSUBFILETYPE",e[255]="SUBFILETYPE",e[256]="IMAGEWIDTH",e[257]="IMAGELENGTH",e[258]="BITSPERSAMPLE",e[259]="COMPRESSION",e[262]="PHOTOMETRICINTERPRETATION",e[263]="THRESHHOLDING",e[264]="CELLWIDTH",e[265]="CELLLENGTH",e[266]="FILLORDER",e[269]="DOCUMENTNAME",e[270]="IMAGEDESCRIPTION",e[271]="MAKE",e[272]="MODEL",e[273]="STRIPOFFSETS",e[274]="ORIENTATION",e[277]="SAMPLESPERPIXEL",e[278]="ROWSPERSTRIP",e[279]="STRIPBYTECOUNTS",e[280]="MINSAMPLEVALUE",e[281]="MAXSAMPLEVALUE",e[282]="XRESOLUTION",e[283]="YRESOLUTION",e[284]="PLANARCONFIGURATION",e[285]="PAGENAME",e[286]="XPOSITION",e[287]="YPOSITION",e[288]="FREEOFFSETS",e[289]="FREEBYTECOUNTS",e[290]="GRAYRESPONSEUNIT",e[291]="GRAYRESPONSECURVE",e[292]="T4OPTIONS",e[293]="T6OPTIONS",e[296]="RESOLUTIONUNIT",e[297]="PAGENUMBER",e[300]="COLORRESPONSEUNIT",e[301]="TRANSFERFUNCTION",e[305]="SOFTWARE",e[306]="DATETIME",e[315]="ARTIST",e[316]="HOSTCOMPUTER",e[317]="PREDICTOR",e[318]="WHITEPOINT",e[319]="PRIMARYCHROMATICITIES",e[320]="COLORMAP",e[321]="HALFTONEHINTS",e[322]="TILEWIDTH",e[323]="TILELENGTH",e[324]="TILEOFFSETS",e[325]="TILEBYTECOUNTS",e[326]="BADFAXLINES",e[327]="CLEANFAXDATA",e[328]="CONSECUTIVEBADFAXLINES",e[330]="SUBIFD",e[332]="INKSET",e[333]="INKNAMES",e[334]="NUMBEROFINKS",e[336]="DOTRANGE",e[337]="TARGETPRINTER",e[338]="EXTRASAMPLES",e[339]="SAMPLEFORMAT",e[340]="SMINSAMPLEVALUE",e[341]="SMAXSAMPLEVALUE",e[342]="TRANSFERRANGE",e[347]="JPEGTABLES",e[512]="JPEGPROC",e[513]="JPEGIFOFFSET",e[514]="JPEGIFBYTECOUNT",e[515]="JPEGRESTARTINTERVAL",e[517]="JPEGLOSSLESSPREDICTORS",e[518]="JPEGPOINTTRANSFORM",e[519]="JPEGQTABLES",e[520]="JPEGDCTABLES",e[521]="JPEGACTABLES",e[529]="YCBCRCOEFFICIENTS",e[530]="YCBCRSUBSAMPLING",e[531]="YCBCRPOSITIONING",e[532]="REFERENCEBLACKWHITE",e[700]="XMP",e[33550]="GEOPIXELSCALE",e[33922]="GEOTIEPOINTS",e[33432]="COPYRIGHT",e[42112]="GDAL_METADATA",e[42113]="GDAL_NODATA",e[50844]="RPCCOEFFICIENT",e[34264]="GEOTRANSMATRIX",e[34735]="GEOKEYDIRECTORY",e[34736]="GEODOUBLEPARAMS",e[34737]="GEOASCIIPARAMS",e[34665]="EXIFIFD",e[34853]="GPSIFD",e[40965]="INTEROPERABILITYIFD",e})(),KAe=(()=>{const e=GD.slice();return e[36864]="ExifVersion",e[40960]="FlashpixVersion",e[40961]="ColorSpace",e[42240]="Gamma",e[37121]="ComponentsConfiguration",e[37122]="CompressedBitsPerPixel",e[40962]="PixelXDimension",e[40963]="PixelYDimension",e[37500]="MakerNote",e[37510]="UserComment",e[40964]="RelatedSoundFile",e[36867]="DateTimeOriginal",e[36868]="DateTimeDigitized",e[36880]="OffsetTime",e[36881]="OffsetTimeOriginal",e[36882]="OffsetTimeDigitized",e[37520]="SubSecTime",e[37521]="SubSecTimeOriginal",e[37522]="SubSecTimeDigitized",e[37888]="Temperature",e[37889]="Humidity",e[37890]="Pressure",e[37891]="WaterDepth",e[37892]="Acceleration",e[37893]="CameraElevationAngle",e[42016]="ImageUniqueID",e[42032]="CameraOwnerName",e[42033]="BodySerialNumber",e[42034]="LensSpecification",e[42035]="LensMake",e[42036]="LensModel",e[42037]="LensSerialNumber",e[33434]="ExposureTime",e[33437]="FNumber",e[34850]="ExposureProgram",e[34852]="SpectralSensitivity",e[34855]="PhotographicSensitivity",e[34856]="OECF",e[34864]="SensitivityType",e[34865]="StandardOutputSensitivity",e[34866]="RecommendedExposureIndex",e[34867]="ISOSpeed",e[34868]="ISOSpeedLatitudeyyy",e[34869]="ISOSpeedLatitudezzz",e[37377]="ShutterSpeedValue",e[37378]="ApertureValue",e[37379]="BrightnessValue",e[37380]="ExposureBiasValue",e[37381]="MaxApertureValue",e[37382]="SubjectDistance",e[37383]="MeteringMode",e[37384]="LightSource",e[37385]="Flash",e[37386]="FocalLength",e[37396]="SubjectArea",e[41483]="FlashEnergy",e[41484]="SpatialFrequencyResponse",e[41486]="FocalPlaneXResolution",e[41487]="FocalPlaneYResolution",e[41488]="FocalPlaneResolutionUnit",e[41492]="SubjectLocation",e[41493]="ExposureIndex",e[41495]="SensingMethod",e[41728]="FileSource",e[41729]="SceneType",e[41730]="CFAPattern",e[41985]="CustomRendered",e[41986]="ExposureMode",e[41987]="WhiteBalance",e[41988]="DigitalZoomRatio",e[41989]="FocalLengthIn35mmFilm",e[41990]="SceneCaptureType",e[41991]="GainControl",e[41992]="Contrast",e[41993]="Saturation",e[41994]="Sharpness",e[41995]="DeviceSettingDescription",e[41996]="SubjectDistanceRange",e})(),QAe=["GPSVersionID","GPSLatitudeRef","GPSLatitude","GPSLongitudeRef","GPSLongitude","GPSAltitudeRef","GPSAltitude","GPSTimeStamp","GPSSatellites","GPSStatus","GPSMeasureMode","GPSDOP","GPSSpeedRef","GPSSpeed","GPSTrackRef","GPSTrack","GPSImgDirectionRef","GPSImgDirection","GPSMapDatum","GPSDestLatitudeRef","GPSDestLatitude","GPSDestLongitudeRef","GPSDestLongitude","GPSDestBearingRef","GPSDestBearing","GPSDestDistanceRef","GPSDestDistance","GPSProcessingMethod","GPSAreaInformation","GPSDateStamp","GPSDifferential","GPSHPositioningError"],XAe=(()=>{const e=[];return e[1024]="GTModelTypeGeoKey",e[1025]="GTRasterTypeGeoKey",e[1026]="GTCitationGeoKey",e[2048]="GeographicTypeGeoKey",e[2049]="GeogCitationGeoKey",e[2050]="GeogGeodeticDatumGeoKey",e[2051]="GeogPrimeMeridianGeoKey",e[2052]="GeogLinearUnitsGeoKey",e[2053]="GeogLinearUnitSizeGeoKey",e[2054]="GeogAngularUnitsGeoKey",e[2055]="GeogAngularUnitSizeGeoKey",e[2056]="GeogEllipsoidGeoKey",e[2057]="GeogSemiMajorAxisGeoKey",e[2058]="GeogSemiMinorAxisGeoKey",e[2059]="GeogInvFlatteningGeoKey",e[2061]="GeogPrimeMeridianLongGeoKey",e[2060]="GeogAzimuthUnitsGeoKey",e[3072]="ProjectedCSTypeGeoKey",e[3073]="PCSCitationGeoKey",e[3074]="ProjectionGeoKey",e[3075]="ProjCoordTransGeoKey",e[3076]="ProjLinearUnitsGeoKey",e[3077]="ProjLinearUnitSizeGeoKey",e[3078]="ProjStdParallel1GeoKey",e[3079]="ProjStdParallel2GeoKey",e[3080]="ProjNatOriginLongGeoKey",e[3081]="ProjNatOriginLatGeoKey",e[3082]="ProjFalseEastingGeoKey",e[3083]="ProjFalseNorthingGeoKey",e[3084]="ProjFalseOriginLongGeoKey",e[3085]="ProjFalseOriginLatGeoKey",e[3086]="ProjFalseOriginEastingGeoKey",e[3087]="ProjFalseOriginNorthingGeoKey",e[3088]="ProjCenterLongGeoKey",e[3090]="ProjCenterEastingGeoKey",e[3091]="ProjCenterNorthingGeoKey",e[3092]="ProjScaleAtNatOriginGeoKey",e[3093]="ProjScaleAtCenterGeoKey",e[3094]="ProjAzimuthAngleGeoKey",e[3095]="ProjStraightVertPoleLongGeoKey",e[4096]="VerticalCSTypeGeoKey",e[4097]="VerticalCitationGeoKey",e[4098]="VerticalDatumGeoKey",e[4099]="VerticalUnitsGeoKey",e})(),e5e=(e,t)=>{let i=(t||GD)[e];return i===void 0&&(i="unknown"+String(e)),i},A8=new Map;A8.set("EXIFIFD",KAe),A8.set("GPSIFD",QAe);const rb={TIFF_TAGS:GD,ifdTags:A8,GEO_KEYS:XAe,getTagName:e5e},qD=(()=>{const e=new ArrayBuffer(4),t=new Uint8Array(e);return new Uint32Array(e)[0]=1,t[0]===1})(),Oz=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],Nb=4294967296,t5e=new Set([1,5,6,7,8,34712,34887]);function HD(e,t){let i="unknown";return e===3?i=t===64?"f64":"f32":e===1?t===1?i="u1":t===2?i="u2":t===4?i="u4":t<=8?i="u8":t<=16?i="u16":t<=32&&(i="u32"):e===2&&(t<=8?i="s8":t<=16?i="s16":t<=32&&(i="s32")),i}function O4(e){let t=null;switch(e?e.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":t=Uint8Array;break;case"u16":t=Uint16Array;break;case"u32":t=Uint32Array;break;case"s8":t=Int8Array;break;case"s16":t=Int16Array;break;case"s32":t=Int32Array;break;case"f64":t=Float64Array;break;default:t=Float32Array}return t}function i5e(e,t){return{x:t[0]*e.x+t[1]*e.y+t[2],y:t[3]*e.x+t[4]*e.y+t[5]}}function Nre(e,t){return e.get(t)?.values}function e0(e,t){return e.get(t)?.values}function Rz(e,t){return e.get(t)?.values?.[0]}function yi(e,t){return e.get(t)?.values?.[0]}function aO(e,t,i,r=0,n=rb.TIFF_TAGS,s=4){const o=s===8,a=o?ZD(new DataView(e,i,8),0,t):new DataView(e,i,2).getUint16(0,t),l=4+2*s,u=o?8:2,c=u+a*l;if(i+c>e.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:c};const d=i+c+4<=e.byteLength?KI(new DataView(e,i+c,s===8?8:4),0,t,s===8):null,f=i+u,m=new Map;let g,v,b,x,S,T=0,_=0;for(let M=0;M<a;M++){v=new DataView(e,f+l*M,l),b=v.getUint16(0,t),S=v.getUint16(2,t),x=rb.getTagName(b,n);const I=[];s===2?(T=v.getUint16(4,t),_=v.getUint16(6,t)):s===4?(T=v.getUint32(4,t),_=v.getUint32(8,t)):s===8&&(T=KI(v,4,t,!0),_=KI(v,12,t,!0),I.push(v.getUint32(12,t)),I.push(v.getUint32(16,t))),g={id:b,type:S,valueCount:T,valueOffset:_,valueOffsets:I,values:null},l5e(e,t,g,r,!1,s),m.set(x,g)}return{success:!0,ifd:m,nextIFD:d,requiredBufferSize:c}}const r5e=(e,t)=>Lre(e,{inputOffset:t}).pixels[0];function C8(e,t){if(t!==1&&t!==2&&t!==4)return e;const i=new Uint8Array(e),r=8/t,n=new Uint8Array(e.byteLength*r);let s=0;const o=2**t-1;for(let a=0;a<i.length;a++){const l=i[a];for(let u=0;u<r;u++)n[s++]=l<<t*u>>>8-t&o}return n.buffer}function $8(e,t,i){const r=new RA;r.parse(e),r.colorTransform=i===6?-1:0;const n=r.getData(r.width,r.height,t!==1);return new Uint8Array(n.buffer)}function O8(e){const t=new E0(e).getBytes(),i=new ArrayBuffer(t.length),r=new Uint8Array(i);return r.set(t),r}async function R8(e,t,i,r,n){const s=qD===t,o=yi(i,"BITSPERSAMPLE"),a=yi(i,"SAMPLESPERPIXEL"),l=yi(i,"PHOTOMETRICINTERPRETATION"),u=HD(yi(i,"SAMPLEFORMAT")??1,o),c=yi(i,"COMPRESSION")??1,d=O4(u);let f,m,g;if(c===34887)return await kre(),r5e(e,r);if(c===1)f=e.slice(r,r+n),m=new Uint8Array(f);else if(c===8||c===32946)m=new Uint8Array(e,r,n),m=O8(m),f=m.buffer;else if(c===6)m=new Uint8Array(e,r,n),m=$8(m,a,l),f=m.buffer;else if(c===7){const v=i.get("JPEGTABLES").values,b=v.length-2;m=new Uint8Array(b+n-2);for(let S=0;S<b;S++)m[S]=v[S];const x=new Uint8Array(e,r+2,n-2);for(let S=0;S<x.length;S++)m[b+S]=x[S];m=$8(m,a,l),f=m.buffer}else{if(c!==5)throw new Error("tiff-decode: unsupport compression "+c);m=zD(e,r,n,t),f=m.buffer}if(f=C8(f,o),u==="u8"||u==="s8"||s)g=new d(f);else{f=new ArrayBuffer(m.length);const v=new Uint8Array(f);switch(u){case"u16":case"s16":for(let b=0;b<m.length;b+=2)v[b]=m[b+1],v[b+1]=m[b];break;case"u32":case"s32":case"f32":for(let b=0;b<m.length;b+=4)v[b]=m[b+3],v[b+1]=m[b+2],v[b+2]=m[b+1],v[b+3]=m[b]}g=new d(f)}return g}async function n5e(e,t,i){const r=e0(i,"TILEOFFSETS");if(r===void 0)return null;const n=e0(i,"TILEBYTECOUNTS"),{width:s,height:o,pixelType:a,tileWidth:l,tileHeight:u}=WD([i]),c=JD(i,t),d=yi(i,"SAMPLESPERPIXEL")||t.planes,f=s*o,m=yi(i,"BITSPERSAMPLE"),g=(yi(i,"COMPRESSION")??1)===34887,v=O4(a),b=[];for(let y=0;y<d;y++)b.push(new v(f));let x,S,T,_,M,I,$,L,B,z,W,J,K;const Q=Math.ceil(s/l);if(m%8==0){if(g&&c&&d>1){const y=Math.round(r.length/d);for(x=0;x<y;x++){I=Math.floor(x/Q)*u,$=x%Q*l,L=I*s+$;for(let A=0;A<d;A++){const N=x*d+A;if(n[N]!==0)for(T=await R8(e,t.littleEndian,i,r[N],n[N]),z=0,B=L,J=Math.min(l,s-$),W=Math.min(u,o-I),K=b[A],_=0;_<W;_++)for(B=L+_*s,z=_*l,M=0;M<J;M++,B++,z++)K[B]=T[z]}}}else for(x=0;x<r.length;x++)if(n[x]!==0)for(I=Math.floor(x/Q)*u,$=x%Q*l,L=I*s+$,T=await R8(e,t.littleEndian,i,r[x],n[x]),z=0,B=L,J=Math.min(l,s-$),W=Math.min(u,o-I),S=0;S<d;S++)if(K=b[S],c||g)for(_=0;_<W;_++)for(B=L+_*s,z=l*u*S+_*l,M=0;M<J;M++,B++,z++)K[B]=T[z];else for(_=0;_<W;_++)for(B=L+_*s,z=_*l*d+S,M=0;M<J;M++,B++,z+=d)K[B]=T[z]}return{width:s,height:o,pixelType:a,pixels:b}}const s5e=(e,t,i)=>{const r=qD===t.littleEndian,n=e0(i,"STRIPOFFSETS");if(n===void 0)return null;const{width:s,height:o,pixelType:a}=WD([i]),l=yi(i,"SAMPLESPERPIXEL")||t.planes,u=yi(i,"PHOTOMETRICINTERPRETATION"),c=s*o,d=yi(i,"BITSPERSAMPLE"),f=O4(a),m=new f(c*l),g=e0(i,"STRIPBYTECOUNTS"),v=yi(i,"ROWSPERSTRIP"),b=yi(i,"COMPRESSION")??1;let x,S,T,_,M,I,$,L,B,z=v;if(d%8==0)for(x=0;x<n.length;x++){if(M=x*(v*s)*l,z=(x+1)*v>o?o-x*v:v,a==="u8"||a==="s8"||r)b===8||b===32946?($=new Uint8Array(e,n[x],g[x]),$=O8($),I=$.buffer):b===6?($=new Uint8Array(e,n[x],g[x]),$=$8($,l,u),I=$.buffer):b===5?($=zD(e,n[x],g[x],t.littleEndian),I=$.buffer):(g[x]!==z*s*l*d/8&&console.log("strip byte counts is different than expected"),I=e.slice(n[x],n[x]+g[x])),I=C8(I,d),_=new f(I);else{switch(b===6||b===8||b===32946?($=new Uint8Array(e,n[x],g[x]),L=O8($),I=L.buffer):(g[x]!==z*s*l*d/8&&console.log("strip byte counts is different than expected"),I=new ArrayBuffer(g[x]),$=new Uint8Array(e,n[x],g[x]),L=new Uint8Array(I)),a){case"u16":case"s16":for(T=0;T<$.length;T+=2)L[T]=$[T+1],L[T+1]=$[T];break;case"u32":case"s32":case"f32":for(T=0;T<$.length;T+=4)L[T]=$[T+3],L[T+1]=$[T+2],L[T+2]=$[T+1],L[T+3]=$[T]}I=C8(I,d),_=new f(I)}m.set(_,M)}const W=[];if(l===1)W.push(m);else for(x=0;x<l;x++){for(B=new f(c),S=0;S<c;S++)B[S]=m[S*l+x];W.push(B)}return{width:s,height:o,pixelType:a,pixels:W}},o5e=(e,t,i)=>{if(!(e&&e.length>0&&t&&i))return null;let r,n,s;const o=e[0].length,a=e.length,l=new Uint8Array(o);for(let u=0;u<a;u++)if(r=e[u],n=t[u],s=i[u],u===0)for(let c=0;c<o;c++)l[c]=r[c]<n||r[c]>s?0:1;else for(let c=0;c<o;c++)l[c]&&(l[c]=r[c]<n||r[c]>s?0:1);return l},a5e=e=>{if(!e)return null;const t=e.match(/<Item(.*?)Item>/gi);if(!t||t.length===0)return null;const i=new Map;let r,n,s,o,a;for(let x=0;x<t.length;x++)r=t[x],n=r.slice(6,r.indexOf(">")),o=r.indexOf("sample="),o>-1&&(a=r.slice(o+8,r.indexOf('"',o+8))),o=r.indexOf("name="),o>-1&&(n=r.slice(o+6,r.indexOf('"',o+6))),n&&(s=r.slice(r.indexOf(">")+1,r.indexOf("</Item>")).trim(),a!=null?i.has(n)?i.get(n)[a]=s:i.set(n,[s]):i.set(n,s)),a=null;const l=i.get("STATISTICS_MINIMUM"),u=i.get("STATISTICS_MAXIMUM"),c=i.get("STATISTICS_MEAN"),d=i.get("STATISTICS_STDDEV");let f=null;if(l&&u){f=[];for(let x=0;x<l.length;x++)f.push({min:parseFloat(l[x]),max:parseFloat(u[x]),avg:c&&parseFloat(c[x]),stddev:d&&parseFloat(d[x])})}const m=i.get("BandName"),g=i.get("WavelengthMin"),v=i.get("WavelengthMax");let b=null;if(m){b=[];for(let x=0;x<m.length;x++)b.push({BandName:m[x],WavelengthMin:g&&parseFloat(g[x]),WavelengthMax:v&&parseFloat(v[x])})}return{statistics:f,bandProperties:b,dataType:i.get("DataType"),rawMetadata:i}};function l5e(e,t,i,r=0,n=!1,s=4){if(i.values)return!0;const o=i.type,a=i.valueCount;let l=i.valueOffset,u=[];const c=Oz[o],d=8*c,f=a*c,m=a*Oz[o]*8;let g,v;const b=s===8?64:32,x=i.valueOffsets;if(m>b&&f>(n?e.byteLength:e?e.byteLength-l+r:0))return i.offlineOffsetSize=[l,f],i.values=null,!1;if(m<=b){if(!t)if(b<=32)l>>>=32-m;else{const S=x?.length?x[0]:l>>>0,T=x?.length?x[1]:Math.round((l-S)/Nb);m<=32?(l=S>>>32-m,x[0]=l):(l=S*2**(32-m)+(T>>>32-m),x[0]=S,x[1]=T>>>32-m)}if(a===1&&d===b)u=[l];else if(b===64){const S=x?.length?x[0]:l>>>0,T=x?.length?x[1]:Math.round((l-S)/Nb);let _=S,M=32;for(v=1;v<=a;v++){const I=32-d*v%32;if(M<d){const $=_<<I>>>32-M,L=T<<32-M>>>32-M;_=T,u.push($+L*2**(d-M)),M-=32-(d-M)}else u.push(_<<I>>>32-d),M-=d;M===0&&(M=32,_=T)}}else for(v=1;v<=a;v++){const S=32-d*v;u.push(l<<S>>>32-d)}}else{l-=r,n&&(l=0);for(let S=l;S<l+f;S+=c){switch(o){case 1:case 2:case 7:g=new DataView(e,S,1).getUint8(0);break;case 3:g=new DataView(e,S,2).getUint16(0,t);break;case 4:case 13:g=new DataView(e,S,4).getUint32(0,t);break;case 5:g=new DataView(e,S,4).getUint32(0,t)/new DataView(e,S+4,4).getUint32(0,t);break;case 6:g=new DataView(e,S,1).getInt8(0);break;case 8:g=new DataView(e,S,2).getInt16(0,t);break;case 9:g=new DataView(e,S,4).getInt32(0,t);break;case 10:g=new DataView(e,S,4).getInt32(0,t)/new DataView(e,S+4,4).getInt32(0,t);break;case 11:g=new DataView(e,S,4).getFloat32(0,t);break;case 12:g=new DataView(e,S,8).getFloat64(0,t);break;case 16:case 18:g=ZD(new DataView(e,S,8),0,t);break;case 17:g=c5e(new DataView(e,S,8),0,t);break;default:g=null}u.push(g)}}if(o===2){let S="";const T=u;for(u=[],v=0;v<T.length;v++)T[v]===0&&S!==""?(u.push(S),S=""):S+=String.fromCharCode(T[v]);S===""&&u.length!==0||u.push(S)}return i.values=u,!0}function WD(e){const t=e[0],i=yi(t,"TILEWIDTH"),r=yi(t,"TILELENGTH"),n=yi(t,"IMAGEWIDTH"),s=yi(t,"IMAGELENGTH"),o=yi(t,"BITSPERSAMPLE"),a=yi(t,"SAMPLESPERPIXEL"),l=yi(t,"SAMPLEFORMAT")??1,u=HD(l,o),c=JD(t),d=Nre(t,"GDAL_NODATA");let f=null;d?.length&&(f=d.map(oe=>parseFloat(oe)),f.some(oe=>isNaN(oe))&&(f=null));const m=yi(t,"COMPRESSION")??1;let g;switch(m){case 1:g="NONE";break;case 2:case 3:case 4:case 32771:g="CCITT";break;case 5:g="LZW";break;case 6:case 7:g="JPEG";break;case 32773:g="PACKBITS";break;case 8:case 32946:g="DEFLATE";break;case 34712:g="JPEG2000";break;case 34887:g="LERC";break;default:g=String(m)}let v=!0,b="";t5e.has(m)||(v=!1,b+="unsupported tag compression "+m),l>3&&(v=!1,b+="unsupported tag sampleFormat "+l),o!==1&&o!==2&&o!==4&&o%8!=0&&(v=!1,b+="unsupported tag bitsPerSample "+o);const x=Rz(t,"GEOASCIIPARAMS");let S;if(x){const oe=x.split("|").find(de=>de.includes("ESRI PE String = ")),q=oe?oe.replace("ESRI PE String = ",""):"";S=q.startsWith("COMPD_CS")||q.startsWith("PROJCS")||q.startsWith("GEOGCS")?{wkid:null,wkt:q}:null}const T=e0(t,"GEOTIEPOINTS"),_=e0(t,"GEOPIXELSCALE"),M=e0(t,"GEOTRANSMATRIX"),I=t.has("GEOKEYDIRECTORY")?t.get("GEOKEYDIRECTORY").data:null;let $,L,B=!1,z=!1;if(I){B=yi(I,"GTRasterTypeGeoKey")===2;const oe=yi(I,"GTModelTypeGeoKey");if(oe===2){const q=yi(I,"GeographicTypeGeoKey");q>=1024&&q<=32766&&(S={wkid:q}),S||q!==32767||(z=!0,S={wkid:4326})}else if(oe===1){const q=yi(I,"ProjectedCSTypeGeoKey");q>=1024&&q<=32766&&(S={wkid:q})}}if(_&&T&&T.length>=6?($=[_[0],0,T[3]-T[0]*_[0],0,-Math.abs(_[1]),T[4]-T[1]*_[1]],B&&($[2]-=.5*$[0]+.5*$[1],$[5]-=.5*$[3]+.5*$[4])):M&&M.length===16&&($=B?[M[0],M[1],M[3]-.5*M[0],M[4],M[5],M[7]-.5*M[5]]:[M[0],M[1],M[3],M[4],M[5],M[7]]),$){const oe=[{x:0,y:s},{x:0,y:0},{x:n,y:s},{x:n,y:0}];let q,de=Number.POSITIVE_INFINITY,re=Number.POSITIVE_INFINITY,me=Number.NEGATIVE_INFINITY,ve=Number.NEGATIVE_INFINITY;for(let _e=0;_e<oe.length;_e++)q=i5e(oe[_e],$),de=q.x>de?de:q.x,me=q.x<me?me:q.x,re=q.y>re?re:q.y,ve=q.y<ve?ve:q.y;L={xmin:de,xmax:me,ymin:re,ymax:ve,spatialReference:S}}else L={xmin:-.5,ymin:.5-s,xmax:n-.5,ymax:.5,spatialReference:S};z&&(L.xmax-L.xmin>400||Math.max(Math.abs(L.xmin),Math.abs(L.xmax))>361)&&(S=null,L.spatialReference=null);const W=Fre(e);let J,K,Q,y,A;if(W.length>0){Q=Math.round(Math.log(n/yi(W[0],"IMAGEWIDTH"))/Math.LN2);const oe=W[W.length-1];y=Math.round(Math.log(n/yi(oe,"IMAGEWIDTH"))/Math.LN2),J=yi(oe,"TILEWIDTH"),K=yi(oe,"TILELENGTH")}J=y!=null&&y>0?J||i:null,K=y!=null&&y>0?K||r:null,i&&(A=[{maxCol:Math.ceil(n/i)-1,maxRow:Math.ceil(s/r)-1,minRow:0,minCol:0}],W.forEach(oe=>{A.push({maxCol:Math.ceil(yi(oe,"IMAGEWIDTH")/yi(oe,"TILEWIDTH"))-1,maxRow:Math.ceil(yi(oe,"IMAGELENGTH")/yi(oe,"TILELENGTH"))-1,minRow:0,minCol:0})}));const N=Rz(e[0],"GDAL_METADATA"),j=a5e(N);return b+=" "+jre({width:n,height:s,tileWidth:i,tileHeight:r,planes:a,ifds:e}),{width:n,height:s,tileWidth:i,tileHeight:r,planes:a,isBSQ:c,pixelType:u,compression:g,noData:f,hasMaskBand:Dre(e).length===W.length+1,isSupported:v,message:b,extent:L,isPseudoGeographic:z,affine:_?null:$,firstPyramidLevel:Q,maximumPyramidLevel:y,pyramidBlockWidth:J,pyramidBlockHeight:K,tileBoundary:A,metadata:j}}function JD(e,t){const i=Nre(e,"PLANARCONFIGURATION");return i?i[0]===2:!!t&&t.isBSQ}function Fre(e){return e.filter(t=>yi(t,"NEWSUBFILETYPE")===1)}function Dre(e){return e.filter(t=>{const i=(4&(yi(t,"NEWSUBFILETYPE")??0))==4,r=yi(t,"PHOTOMETRICINTERPRETATION")===4;return i&&r})}function u5e(e){const{littleEndian:t,isBigTiff:i,firstIFDPos:r}=h5e(e);let n=r;const s=[];do{const o=d5e(e,t,n,0,rb.TIFF_TAGS,i?8:4);if(!o.success)break;s.push(o.ifd),n=o.nextIFD}while(n>0);return{...WD(s),littleEndian:t,isBigTiff:i,ifds:s,pyramidIFDs:Fre(s),maskIFDs:Dre(s)}}function ZD(e,t,i){const r=e.getUint32(t,i),n=e.getUint32(t+4,i);return i?n*Nb+r:r*Nb+n}function c5e(e,t,i){let r=i?e.getInt32(t,i):e.getUint32(t,i),n=i?e.getUint32(t+4,i):e.getInt32(t+4,i);const s=(i?r:n)>=0?1:-1;return i?r*=s:n*=s,s*(i?n*Nb+r:r*Nb+n)}function KI(e,t,i,r){return r?ZD(e,t,i):e.getUint32(t,i)}function h5e(e){const t=new DataView(e,0,16),i=t.getUint16(0,!1);let r=null;if(i===18761)r=!0;else{if(i!==19789)throw new Error("unexpected endianess byte");r=!1}const n=t.getUint16(2,r);if(n!==42&&n!==43)throw new Error("unexpected tiff identifier");let s=4;const o=n===43;if(o){const a=t.getUint16(s,r);if(s+=2,a!==8)throw new Error("unsupported bigtiff version");if(t.getUint16(s,r)!==0)throw new Error("unsupported bigtiff version");s+=2}return{littleEndian:r,isBigTiff:o,firstIFDPos:KI(t,s,r,o)}}function d5e(e,t,i,r=0,n=rb.TIFF_TAGS,s=4){const o=aO(e,t,i,r,n,s);let a;const l=o.ifd;if(l){if(rb.ifdTags.forEach((u,c)=>{l.has(c)&&(a=l.get(c),a.data=aO(e,t,a.valueOffset-r,r,u).ifd)}),l.has("GEOKEYDIRECTORY")){a=l.get("GEOKEYDIRECTORY");const u=a.values;if(u&&u.length>4){const c=u[0]+"."+u[1]+"."+u[2];a.data=aO(e,t,a.valueOffset+6-r,r,rb.GEO_KEYS,2).ifd,a.data&&a.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[c]})}}if(l.has("XMP")){a=l.get("XMP");const u=a.values;typeof u[0]=="number"&&a.type===7&&(a.values=[YAe(new Uint8Array(u))])}}return o}function jre(e){const{width:t,height:i,tileHeight:r,tileWidth:n}=e,s=e.planes,o=n?n*r:t*i,a=yi(e.ifds[0],"BITSPERSAMPLE");let l="";return o*s>2**30/(a>8?a/8:1)&&(l=n?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported"),l}async function p5e(e,t){const{headerInfo:i,ifd:r,offsets:n,sizes:s}=t,o=[];for(let B=0;B<n.length;B++){const z=await R8(e,i.littleEndian,r,n[B],s[B]||e.byteLength);o.push(z)}const a=JD(r,i),l=yi(r,"BITSPERSAMPLE"),u=HD(yi(r,"SAMPLEFORMAT")??1,l),c=yi(r,"SAMPLESPERPIXEL")||i.planes,d=O4(u),f=yi(r,"TILEWIDTH"),m=yi(r,"TILELENGTH"),g=yi(r,"COMPRESSION")??1,v=f*m;let b;const x=[];let S=o[0];const T=g===34887;for(let B=0;B<c;B++){if(b=new d(v),a&&T){if(S=o[B],S.length)for(let z=0;z<v;z++)b[z]=S[B][z+B]}else if(S.length)if(a||T&&!a)b=S.slice(v*B,v*(B+1));else for(let z=0;z<v;z++)b[z]=S[z*c+B];x.push(b)}const _=i.noData?i.noData[0]:t.noDataValue,M=i.metadata?i.metadata.statistics:null,I=M?M.map(B=>B.min):null,$=M?M.map(B=>B.max):null,L={pixelType:u,width:f,height:m,pixels:x,noDataValue:_};return _!=null?jD(L,_):I&&$&&t.applyMinMaxConstraint&&(L.mask=o5e(x,I,$)),L}async function f5e(e,t={}){const i=t.pyramidLevel||0,r=t.headerInfo||u5e(e),{ifds:n,noData:s}=r;if(n.length===0)throw new Error("no valid image file directory");const o=jre(r);if(o)throw o;let a=null;const l=i===-1?n[n.length-1]:n[i],u=s??t.noDataValue;return a=r.tileWidth?await n5e(e,r,l):await s5e(e,r,l),a&&(u!=null&&jD(a,u),a)}var m5e=function(e){var t,i,r,n,s,o;function a(l){var u,c,d,f,m,g,v,b,x,S,T,_,M;for(this.data=l,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(u=this.readUInt32(),b=function(){var I,$;for($=[],I=0;I<4;++I)$.push(String.fromCharCode(this.data[this.pos++]));return $}.call(this).join(""),b){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(u);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),d=this.readUInt16()||100,m.delay=1e3*f/d,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,u-=4),l=m?.data||this.imgData,T=0;0<=u?T<u:T>u;0<=u?++T:--T)l.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(this.transparency.indexed=this.read(u),(x=255-this.transparency.indexed.length)>0)for(_=0;0<=x?_<x:_>x;0<=x?++_:--_)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(u)[0];break;case 2:this.transparency.rgb=this.read(u)}break;case"tEXt":g=(S=this.read(u)).indexOf(0),v=String.fromCharCode.apply(String,S.slice(0,g)),this.text[v]=String.fromCharCode.apply(String,S.slice(g+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(M=this.colorType)===4||M===6,c=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*c,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=u}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}return a.load=function(l,u,c){var d;return typeof u=="function"&&(c=u),(d=new XMLHttpRequest).open("GET",l,!0),d.responseType="arraybuffer",d.onload=function(){var f;return f=new a(new Uint8Array(d.response||d.mozResponseArrayBuffer)),typeof u?.getContext=="function"&&f.render(u),typeof c=="function"?c(f):void 0},d.send(null)},i=1,r=2,t=0,a.prototype.read=function(l){var u,c;for(c=[],u=0;0<=l?u<l:u>l;0<=l?++u:--u)c.push(this.data[this.pos++]);return c},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(l){var u,c,d,f,m,g,v,b,x,S,T,_,M,I,$,L,B,z,W,J,K,Q,y;if(l==null&&(l=this.imgData),l.length===0)return new Uint8Array(0);for(l=(l=new E0(l)).getBytes(),L=(_=this.pixelBitlength/8)*this.width,M=new Uint8Array(L*this.height),g=l.length,$=0,I=0,c=0;I<g;){switch(l[I++]){case 0:for(f=W=0;W<L;f=W+=1)M[c++]=l[I++];break;case 1:for(f=J=0;J<L;f=J+=1)u=l[I++],m=f<_?0:M[c-_],M[c++]=(u+m)%256;break;case 2:for(f=K=0;K<L;f=K+=1)u=l[I++],d=(f-f%_)/_,B=$&&M[($-1)*L+d*_+f%_],M[c++]=(B+u)%256;break;case 3:for(f=Q=0;Q<L;f=Q+=1)u=l[I++],d=(f-f%_)/_,m=f<_?0:M[c-_],B=$&&M[($-1)*L+d*_+f%_],M[c++]=(u+Math.floor((m+B)/2))%256;break;case 4:for(f=y=0;y<L;f=y+=1)u=l[I++],d=(f-f%_)/_,m=f<_?0:M[c-_],$===0?B=z=0:(B=M[($-1)*L+d*_+f%_],z=d&&M[($-1)*L+(d-1)*_+f%_]),v=m+B-z,b=Math.abs(v-m),S=Math.abs(v-B),T=Math.abs(v-z),x=b<=S&&b<=T?m:S<=T?B:z,M[c++]=(u+x)%256;break;default:throw new Error("Invalid filter algorithm: "+l[I-1])}$++}return M},a.prototype.decodePalette=function(){var l,u,c,d,f,m,g,v,b;for(c=this.palette,m=this.transparency.indexed||[],f=new Uint8Array((m.length||0)+c.length),d=0,c.length,l=0,u=g=0,v=c.length;g<v;u=g+=3)f[d++]=c[u],f[d++]=c[u+1],f[d++]=c[u+2],f[d++]=(b=m[l++])!=null?b:255;return f},a.prototype.copyToImageData=function(l,u){var c,d,f,m,g,v,b,x,S,T,_;if(d=this.colors,S=null,c=this.hasAlphaChannel,this.palette.length&&(S=(_=this._decodedPalette)!=null?_:this._decodedPalette=this.decodePalette(),d=4,c=!0),x=(f=l.data||l).length,g=S||u,m=v=0,d===1)for(;m<x;)b=S?4*u[m/4]:v,T=g[b++],f[m++]=T,f[m++]=T,f[m++]=T,f[m++]=c?g[b++]:this.transparency.grayscale&&this.transparency.grayscale===T?0:255,v=b;else for(;m<x;)b=S?4*u[m/4]:v,f[m++]=g[b++],f[m++]=g[b++],f[m++]=g[b++],f[m++]=c?g[b++]:this.transparency.rgb&&this.transparency.rgb[1]===g[b-3]&&this.transparency.rgb[3]===g[b-2]&&this.transparency.rgb[5]===g[b-1]?0:255,v=b},a.prototype.decode=function(){var l;return l=new Uint8Array(this.width*this.height*4),this.copyToImageData(l,this.decodePixels()),l},s=e.document&&e.document.createElement("canvas"),o=s&&s.getContext("2d"),n=function(l){var u;return o.width=l.width,o.height=l.height,o.clearRect(0,0,l.width,l.height),o.putImageData(l,0,0),(u=new Image).src=s.toDataURL(),u},a.prototype.decodeFrames=function(l){var u,c,d,f,m,g,v,b;if(this.animation){for(b=[],c=m=0,g=(v=this.animation.frames).length;m<g;c=++m)u=v[c],d=l.createImageData(u.width,u.height),f=this.decodePixels(new Uint8Array(u.data)),this.copyToImageData(d,f),u.imageData=d,b.push(u.image=n(d));return b}},a.prototype.renderFrame=function(l,u){var c,d,f;return c=(d=this.animation.frames)[u],f=d[u-1],u===0&&l.clearRect(0,0,this.width,this.height),f?.disposeOp===i?l.clearRect(f.xOffset,f.yOffset,f.width,f.height):f?.disposeOp===r&&l.putImageData(f.imageData,f.xOffset,f.yOffset),c.blendOp===t&&l.clearRect(c.xOffset,c.yOffset,c.width,c.height),l.drawImage(c.image,c.xOffset,c.yOffset)},a.prototype.animate=function(l){var u,c,d,f,m,g,v=this;return c=0,g=this.animation,f=g.numFrames,d=g.frames,m=g.numPlays,(u=function(){var b,x;if(b=c++%f,x=d[b],v.renderFrame(l,b),f>1&&c/f<m)return v.animation._timeout=setTimeout(u,x.delay)})()},a.prototype.stopAnimation=function(){var l;return clearTimeout((l=this.animation)!=null?l._timeout:void 0)},a.prototype.render=function(l){var u,c;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,u=l.getContext("2d"),this.animation?(this.decodeFrames(u),this.animate(u)):(c=u.createImageData(this.width,this.height),this.copyToImageData(c,this.decodePixels()),u.putImageData(c,0,0))},a}(self);const y5e=new Set(["jpg","png","bmp","gif"]);async function g5e(e,t){if(!qD)throw new Ce("rasterCoded:decode","lerc decoder is not supported on big endian platform");await kre();const{offset:i}=t,{width:r,height:n,pixelType:s,statistics:o,depthCount:a,noDataValues:l,bandMasks:u,pixels:c,mask:d}=Lre(e,{inputOffset:i,returnInterleaved:t.returnInterleaved});return new ai({width:r,height:n,pixelType:s.toLowerCase(),pixels:c,mask:d,statistics:o,bandMasks:u,depthCount:a,noDataValues:l})}async function v5e(e,t){const i=await f5e(e,{...t,noDataValue:null});Wf(i);const r=new ai({width:i.width,height:i.height,pixels:i.pixels,pixelType:i.pixelType.toLowerCase(),mask:i.mask,statistics:null});return r.updateStatistics(),r}async function b5e(e,t){const i=await p5e(e,t.customOptions),r=new ai({width:i.width,height:i.height,pixels:i.pixels,pixelType:i.pixelType.toLowerCase(),mask:i.mask,statistics:null});return r.updateStatistics(),r}function Ure(e,t){const i=t.pixelType||"u8",r=ai.getPixelArrayConstructor(i),n=i==="u8"?e:new r(e.buffer),s=[],o=t.planes||1;if(o===1)s.push(n);else for(let l=0;l<o;l++){const u=(t.width||1)*(t.height||e.length),c=new r(u);for(let d=0;d<u;d++)c[d]=n[d*o+l];s.push(c)}const a=new ai({width:t.width||1,height:t.height||e.length,pixels:s,pixelType:i,statistics:null});return a.updateStatistics(),a}function w5e(e,t){return Ure(new E0(new Uint8Array(e)).getBytes(),t)}function _5e(e,t){return Ure(zD(e,t.offset,t.eof,!t.isInputBigEndian),t)}function x5e(e,t,i){const{pixelTypeCtor:r}=T5e(t.pixelType),n=(0,ZAe.decode)(e,{width:t.width,height:t.height,pixelType:r,format:i}),s=new ai({width:t.width,height:t.height,pixels:n.pixels,pixelType:t.pixelType,mask:n.mask,statistics:null});return s.updateStatistics(),s}function S5e(e,t){const i=zAe.decode(e,t.hasNoZlibMask??void 0),r=new ai({width:i.width,height:i.height,pixels:i.pixels,pixelType:"U8",mask:i.mask,statistics:null});return r.updateStatistics(),r}function E5e(e,t){const i=new Uint8Array(e),r=new m5e(i),{width:n,height:s}=t,o=n*s,a=r.decode();let l,u=0,c=0;const d=new Uint8Array(o);for(u=0;u<o;u++)d[u]=a[4*u+3];const f=new ai({width:n,height:s,pixels:[],pixelType:"U8",mask:d,statistics:[]});for(u=0;u<3;u++){for(l=new Uint8Array(o),c=0;c<o;c++)l[c]=a[4*c+u];f.addData({pixels:l})}return f.updateStatistics(),f}async function M5e(e,t,i,r){const n=new VAe,s={applyJpegMask:!1,format:t,...i},o=await n.decode(e,s,r),a=new ai(o);return a.updateStatistics(),a}function Vre(e){if(e==null)throw new Ce("rasterCodec:decode","parameter encodeddata is required.");const t=new Uint8Array(e,0,10);let i="";return t[0]===255&&t[1]===216?i="jpg":t[0]===137&&t[1]===80&&t[2]===78&&t[3]===71?i="png":t[0]===67&&t[1]===110&&t[2]===116&&t[3]===90&&t[4]===73&&t[5]===109&&t[6]===97&&t[7]===103&&t[8]===101&&t[9]===32?i="lerc":t[0]===76&&t[1]===101&&t[2]===114&&t[3]===99&&t[4]===50&&t[5]===32?i="lerc2":t[0]===73&&t[1]===73&&t[2]===42&&t[3]===0||t[0]===77&&t[1]===77&&t[2]===0&&t[3]===42||t[0]===73&&t[1]===73&&t[2]===43&&t[3]===0||t[0]===77&&t[1]===77&&t[2]===0&&t[3]===43?i="tiff":t[0]===71&&t[1]===73&&t[2]===70?i="gif":t[0]===66&&t[1]===77?i="bmp":String.fromCharCode.apply(null,t).toLowerCase().includes("error")&&(i="error"),i}function I5e(e){let t=null;switch(e){case"lerc":case"lerc2":t=g5e;break;case"jpg":t=S5e;break;case"png":t=E5e;break;case"bsq":case"bip":t=(i,r)=>x5e(i,r,e);break;case"tiff":t=v5e;break;case"deflate":t=w5e;break;case"lzw":t=_5e;break;case"error":t=()=>{throw new Ce("rasterCodec:decode","input data contains error")};break;default:t=()=>{throw new Ce("rasterCodec:decode","unsupported raster format")}}return t}function T5e(e){let t=null,i=null;switch(e?e.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":i=255,t=Uint8Array;break;case"u16":i=i||65535,t=Uint16Array;break;case"u32":i=i||2**32-1,t=Uint32Array;break;case"s8":i=i||-128,t=Int8Array;break;case"s16":i=i||-32768,t=Int16Array;break;case"s32":i=i||0-2**31,t=Int32Array;break;default:t=Float32Array}return{pixelTypeCtor:t,noDataValue:i}}function A5e(e,t=1){if(!e)return;const{pixels:i,width:r,height:n,mask:s}=e;if(!i||i.length===0)return;const o=i.length,a=r-1,l=n-1,u=[];let c,d,f,m,g,v,b=null;const x=ai.getPixelArrayConstructor(e.pixelType);if(t===0){for(c=0;c<o;c++){for(g=i[c],v=new x(a*l),d=0;d<l;d++)for(m=d*r,f=0;f<a;f++)v[d*a+f]=g[m+f];u.push(v)}if(ee(s))for(b=new Uint8Array(a*l),d=0;d<l;d++)for(m=d*r,f=0;f<a;f++)b[d*a+f]=s[m+f]}else{for(c=0;c<o;c++){for(g=i[c],v=new x(a*l),d=0;d<l;d++)for(m=d*r,f=0;f<a;f++)v[d*a+f]=(g[m+f]+g[m+f+1]+g[m+r+f]+g[m+r+f+1])/4;u.push(v)}if(s)for(b=new Uint8Array(a*l),d=0;d<l;d++)for(m=d*r,f=0;f<a;f++)b[d*a+f]=Math.min.apply(null,[s[m+f],s[m+f+1],s[m+r+f],s[m+r+f+1]])}e.width=a,e.height=l,e.mask=b,e.pixels=u}function C5e(e){let t=Vre(e);return t==="lerc2"?t="lerc":t==="error"&&(t=""),t}async function kz(e,t={},i){if(e==null)throw new Ce("rasterCodec:decode","missing encodeddata parameter.");let r=t.format&&t.format.toLowerCase();if(!(r!=="bsq"&&r!=="bip"||t.width!=null&&t.height!=null))throw new Ce("rasterCodec:decode","requires width and height in options parameter.");if(r==="tiff"&&t.customOptions)return b5e(e,t);if((!r||r!=="bsq"&&r!=="bip"&&r!=="deflate"&&r!=="lzw")&&(r=Vre(e)),t.useCanvas&&y5e.has(r))return M5e(e,r,t,i);const n=I5e(r);t.isPoint&&((t={...t}).width!=null&&t.width++,t.height!=null&&t.height++);const s=await n(e,t);return s&&(r!=="jpg"&&t.noDataValue!=null&&s.depthCount===1&&jD(s,t.noDataValue,{customFloatTolerance:t.tolerance}),t.isPoint&&A5e(s),s)}const Lz=new ti({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),Pz=new ti({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});let zu=class extends Je{constructor(t){super(t),this.type="class-breaks-definition",this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null}set standardDeviationInterval(t){this.classificationMethod==="standard-deviation"&&this._set("standardDeviationInterval",t)}set definedInterval(t){this.classificationMethod==="defined-interval"&&this._set("definedInterval",t)}};h([Ft({classBreaksDef:"class-breaks-definition"})],zu.prototype,"type",void 0),h([p({json:{write:!0}})],zu.prototype,"breakCount",void 0),h([p({json:{write:!0}})],zu.prototype,"classificationField",void 0),h([p({type:String,json:{read:Lz.read,write:Lz.write}})],zu.prototype,"classificationMethod",void 0),h([p({json:{write:!0}})],zu.prototype,"normalizationField",void 0),h([p({json:{read:Pz.read,write:Pz.write}})],zu.prototype,"normalizationType",void 0),h([p({value:null,json:{write:!0}})],zu.prototype,"standardDeviationInterval",null),h([p({value:null,json:{write:!0}})],zu.prototype,"definedInterval",null),zu=h([ce("esri.rest.support.ClassBreaksDefinition")],zu);const vlt=zu,$5e=et.getLogger("esri.rest.support.generateRendererUtils");function b1(e,t){return Number(e.toFixed(t))}function blt(e){const{normalizationTotal:t}=e;return{classBreaks:O5e(e),normalizationTotal:t}}function O5e(e){const t=e.definition,{classificationMethod:i,normalizationType:r,definedInterval:n}=t,s=t.breakCount??1,o=[];let a=e.values;if(a.length===0)return[];a=a.sort((c,d)=>c-d);const l=a[0],u=a[a.length-1];if(i==="equal-interval")if(a.length>=s){const c=(u-l)/s;let d=l;for(let f=1;f<s;f++){const m=b1(l+f*c,6);o.push({minValue:d,maxValue:m,label:Ko(d,m,r)}),d=m}o.push({minValue:d,maxValue:u,label:Ko(d,u,r)})}else a.forEach(c=>{o.push({minValue:c,maxValue:c,label:Ko(c,c,r)})});else if(i==="natural-breaks"){const c=R5e(a),d=e.valueFrequency||c.valueFrequency,f=k5e(c.uniqueValues,d,s);let m=l;for(let g=1;g<s;g++)if(c.uniqueValues.length>g){const v=b1(c.uniqueValues[f[g]],6);o.push({minValue:m,maxValue:v,label:Ko(m,v,r)}),m=v}o.push({minValue:m,maxValue:u,label:Ko(m,u,r)})}else if(i==="quantile")if(a.length>=s&&l!==u){let c=l,d=Math.ceil(a.length/s),f=0;for(let m=1;m<s;m++){let g=d+f-1;g>a.length&&(g=a.length-1),g<0&&(g=0),o.push({minValue:c,maxValue:a[g],label:Ko(c,a[g],r)}),c=a[g],f+=d,d=Math.ceil((a.length-f)/(s-m))}o.push({minValue:c,maxValue:u,label:Ko(c,u,r)})}else{let c=-1;for(let d=0;d<a.length;d++){const f=a[d];f!==c&&(c=f,o.push({minValue:c,maxValue:f,label:Ko(c,f,r)}),c=f)}}else if(i==="standard-deviation"){const c=N5e(a),d=F5e(a,c);if(d===0)o.push({minValue:a[0],maxValue:a[0],label:Ko(a[0],a[0],r)});else{const f=P5e(l,u,s,c,d)*d;let m=0,g=l;for(let b=s;b>=1;b--){const x=b1(c-(b-.5)*f,6);o.push({minValue:g,maxValue:x,label:Ko(g,x,r)}),g=x,m++}let v=b1(c+.5*f,6);o.push({minValue:g,maxValue:v,label:Ko(g,v,r)}),g=v,m++;for(let b=1;b<=s;b++)v=m===2*s?u:b1(c+(b+.5)*f,6),o.push({minValue:g,maxValue:v,label:Ko(g,v,r)}),g=v,m++}}else if(i==="defined-interval"){if(!n)return o;const c=a[0],d=a[a.length-1],f=Math.ceil((d-c)/n);let m=c;for(let g=1;g<f;g++){const v=b1(c+g*n,6);o.push({minValue:m,maxValue:v,label:Ko(m,v,r)}),m=v}o.push({minValue:m,maxValue:d,label:Ko(m,d,r)})}return o}function Ko(e,t,i){let r=null;return r=e===t?i&&i==="percent-of-total"?e+"%":e.toString():i&&i==="percent-of-total"?e+"% - "+t+"%":e+" - "+t,r}function R5e(e){const t=[],i=[];let r=Number.MIN_VALUE,n=1,s=-1;for(let o=0;o<e.length;o++){const a=e[o];a===r?(n++,i[s]=n):a!==null&&(t.push(a),r=a,n=1,i.push(n),s++)}return{uniqueValues:t,valueFrequency:i}}function k5e(e,t,i){const r=e.length,n=[];i>r&&(i=r);for(let o=0;o<i;o++)n.push(Math.round(o*r/i-1));n.push(r-1);let s=Nz(n,e,t,i);return L5e(s.mean,s.sdcm,n,e,t,i)&&(s=Nz(n,e,t,i)),n}function Nz(e,t,i,r){let n=[],s=[],o=[],a=0;const l=[],u=[];for(let m=0;m<r;m++){const g=Rv(m,e,t,i);l.push(g.sbMean),u.push(g.sbSdcm),a+=u[m]}let c,d=a,f=!0;for(;f||a<d;){f=!1,n=[];for(let m=0;m<r;m++)n.push(e[m]);for(let m=0;m<r;m++)for(let g=e[m]+1;g<=e[m+1];g++)if(c=t[g],m>0&&g!==e[m+1]&&Math.abs(c-l[m])>Math.abs(c-l[m-1]))e[m]=g;else if(m<r-1&&e[m]!==g-1&&Math.abs(c-l[m])>Math.abs(c-l[m+1])){e[m+1]=g-1;break}d=a,a=0,s=[],o=[];for(let m=0;m<r;m++){s.push(l[m]),o.push(u[m]);const g=Rv(m,e,t,i);l[m]=g.sbMean,u[m]=g.sbSdcm,a+=u[m]}}if(a>d){for(let m=0;m<r;m++)e[m]=n[m],l[m]=s[m],u[m]=o[m];a=d}return{mean:l,sdcm:u}}function L5e(e,t,i,r,n,s){let o=0,a=0,l=0,u=0,c=!0;for(let d=0;d<2&&c;d++){d===0&&(c=!1);for(let f=0;f<s-1;f++)for(;i[f+1]+1!==i[f+2];){i[f+1]=i[f+1]+1;const m=Rv(f,i,r,n);l=m.sbMean,o=m.sbSdcm;const g=Rv(f+1,i,r,n);if(u=g.sbMean,a=g.sbSdcm,!(o+a<t[f]+t[f+1])){i[f+1]=i[f+1]-1;break}t[f]=o,t[f+1]=a,e[f]=l,e[f+1]=u,c=!0}for(let f=s-1;f>0;f--)for(;i[f]!==i[f-1]+1;){i[f]=i[f]-1;const m=Rv(f-1,i,r,n);l=m.sbMean,o=m.sbSdcm;const g=Rv(f,i,r,n);if(u=g.sbMean,a=g.sbSdcm,!(o+a<t[f-1]+t[f])){i[f]=i[f]+1;break}t[f-1]=o,t[f]=a,e[f-1]=l,e[f]=u,c=!0}}return c}function P5e(e,t,i,r,n){let s=Math.max(r-e,t-r)/n/i;return s=s>=1?1:s>=.5?.5:.25,s}function N5e(e){let t=0;for(let i=0;i<e.length;i++)t+=e[i];return t/=e.length,t}function F5e(e,t){let i=0;for(let r=0;r<e.length;r++){const n=e[r];i+=(n-t)*(n-t)}return i/=e.length,Math.sqrt(i)}function Rv(e,t,i,r){let n=0,s=0;for(let l=t[e]+1;l<=t[e+1];l++){const u=r[l];n+=i[l]*u,s+=u}s<=0&&$5e.warn("Exception in Natural Breaks calculation");const o=n/s;let a=0;for(let l=t[e]+1;l<=t[e+1];l++)a+=r[l]*(i[l]-o)**2;return{sbMean:o,sbSdcm:a}}const D5e=.25,j5e=h4.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),Fz=h4.fromJSON(ND[0]),Bre=new Set(["scientific","standard-time","vector-uv","vector-magdir","vector-u","vector-v","vector-magnitude","vector-direction"]);function U5e(e,t){const{attributeTable:i,colormap:r}=e;if(YD(e)){const n=e4e(e);if(ee(n))return n}if(ee(r)){const n=J5e(e);if(ee(n))return n}if(ee(i)){const n=H5e(e);if(ee(n))return n}return B5e(e,t)}function V5e(e,t=!1){const i=["raster-stretch"];return Hre(e)&&i.push("raster-colormap"),qre(e)&&i.push("unique-value"),Y5e(e,t)&&i.push("class-breaks"),Z5e(e)&&i.push("raster-shaded-relief"),YD(e)&&i.push("vector-field"),Q5e(e)&&i.push("flow"),i}function wlt(e,t,i){const r=["nearest","bilinear","cubic","majority"].find(n=>n===i?.toLowerCase());return t==="Map"?r??"bilinear":e.dataType==="standard-time"?r??"nearest":e.dataType==="thematic"||e.attributeTable||e.colormap?r==="nearest"||r==="majority"?r:"nearest":r??"bilinear"}function B5e(e,t){e=z5e(e,t?.variableName);const{bandCount:i}=e;let{bandIds:r,stretchType:n}=t||{};r?.some(d=>d>=i)&&(r=null);let s=e.statistics,o=e.histograms;i>1?(r=r?.length?r:zre(e),s=s==null?null:r?.map(d=>s[d]),o=o==null?null:r?.map(d=>o[d])):r=[0],n==null&&(n=q5e(e));let a=!1;switch(n){case"none":a=!1;break;case"percent-clip":a=!o?.length;break;default:a=!s?.length}const{dataType:l}=e,u=r?.length===1&&Bre.has(l)?j5e:null,c=new DD({stretchType:n,dynamicRangeAdjustment:a,colorRamp:u,outputMin:0,outputMax:255,gamma:r?.length===1?[1]:[1,1,1],useGamma:!1});return n==="percent-clip"?c.maxPercent=c.minPercent=D5e:n==="standard-deviation"&&(c.numberOfStandardDeviations=2),a||!ee(e.multidimensionalInfo)&&!t?.includeStatisticsInStretch||(n==="percent-clip"?c.histograms=o:n!=="min-max"&&n!=="standard-deviation"||(c.statistics=s)),c}function z5e(e,t){if(!t)return e;let i=e.statistics,r=e.histograms;const{multidimensionalInfo:n}=e;if(t&&ee(n)){const s=n.variables.find(o=>o.name===t);if(s){const{statistics:o,histograms:a}=s;o?.length&&(i=o),a?.length&&(r=a)}}return x3.fromJSON({...e.toJSON(),statistics:i,histograms:r})}function zre(e){const t=e.bandCount;if(t===1)return null;if(t===2)return[0];const i=e.keyProperties&&e.keyProperties.BandProperties;let r;if(i&&i.length===t){const{red:n,green:s,blue:o,nir:a}=G5e(i);n!=null&&s!=null&&o!=null?r=[n,s,o]:a!=null&&n!=null&&s!=null&&(r=[a,n,s])}return!r&&t>=3&&(r=[0,1,2]),r}function G5e(e){const t={};for(let i=0;i<e.length;i++){const r=e[i],n=r.BandName?.toLowerCase();if(n==="red")t.red=i;else if(n==="green")t.green=i;else if(n==="blue")t.blue=i;else if(n==="nearinfrared"||n==="nearinfrared_1"||n==="nir")t.nir=i;else if(r.WavelengthMax&&r.WavelengthMin){const s=r.WavelengthMin,o=r.WavelengthMax;t.blue==null&&s>=410&&s<=480&&o>=480&&o<=540?t.blue=i:t.green==null&&s>=490&&s<=560&&o>=560&&o<=610?t.green=i:t.red==null&&s>=595&&s<=670&&o>=660&&o<=730?t.red=i:t.nir==null&&s>=700&&s<=860&&o>=800&&o<=950&&(t.nir=i)}}return t}function q5e(e){let t="percent-clip";const{pixelType:i,dataType:r,histograms:n,statistics:s,multidimensionalInfo:o}=e,a=Bre.has(r)||r==="generic"&&ee(o);return i!=="u8"||r!=="processed"&&ee(n)&&ee(s)?i==="u8"||r==="elevation"||a?t="min-max":ee(n)?t="percent-clip":ee(s)&&(t="min-max"):t="none",t}function H5e(e,t,i,r){if(!qre(e,t))return null;const{attributeTable:n,statistics:s}=e,o=Gre(n,t),a=_x(n,"red"),l=_x(n,"green"),u=_x(n,"blue"),c=new l3,d=[],f=new Set,m=!!(a&&l&&u);if(ee(n))n.features.forEach(g=>{const v=g.attributes[o.name];if(!f.has(g.attributes[o.name])&&v!=null){f.add(v);const b=m&&(a.type==="single"||a.type==="double")&&(l.type==="single"||l.type==="double")&&(u.type==="single"||u.type==="double")&&!n.features.some(S=>S.attributes[a.name]>1||S.attributes[l.name]>1||S.attributes[u.name]>1),x=b?255:1;d.push(new Yg({value:g.attributes[o.name],label:g.attributes[o.name]+"",symbol:{type:"simple-fill",style:"solid",outline:null,color:new Mt(m?[g.attributes[a.name]*x,g.attributes[l.name]*x,g.attributes[u.name]*x,1]:[0,0,0,0])}}))}});else if(s?.[0])for(let g=s[0].min;g<=s[0].max;g++)d.push(new Yg({value:g,label:g.toString(),symbol:{type:"simple-fill",style:"solid",outline:null,color:new Mt([0,0,0,0])}}));if(d.sort((g,v)=>g.value&&typeof g.value.valueOf()=="string"?0:g.value>v.value?1:-1),!m){const g=S0(Fz,{numColors:d.length});d.forEach((v,b)=>v.symbol.color=new Mt(g[b].slice(1,4))),c.colorRamp=Fz}if(i||r){const g=i||S0(r,{numColors:d.length}).map(v=>v.slice(1));d.forEach((v,b)=>v.symbol.color=new Mt(g[b])),c.colorRamp=r}return new Pm({field:o.name,uniqueValueInfos:d,authoringInfo:c})}function Gre(e,t,i){let r;return ee(e)?(r=t?e.fields.find(n=>t.toLowerCase()===n.name.toLowerCase()):W5e(e.fields),r||(i||(r=e.fields.find(n=>n.type==="string")),r||(r=_x(e,"value")))):r=new ol({name:"value"}),r}function W5e(e){let t;for(let i=0;i<e.length;i++){const r=e[i].name.toLowerCase();if(e[i].type==="string"){if(r.startsWith("class")){t=e[i];break}t==null&&(r.endsWith("name")||r.endsWith("type"))&&(t=e[i])}}return t}function _x(e,t){return Re(e)?null:e.fields.find(i=>i.name.toLowerCase()===t)}function qre(e,t){const{attributeTable:i,bandCount:r}=e;return Re(i)&&K5e(e)?!0:!(Re(i)||r>1||t&&i.fields.find(n=>n.name.toLowerCase()===t.toLowerCase())==null)}function Hre(e){const{bandCount:t,colormap:i}=e;return ee(i)&&i.length>0&&t===1}function J5e(e){if(!Hre(e))return null;let t;const{attributeTable:i,colormap:r}=e;if(ee(i)){const n=_x(i,"value"),s=Gre(i,null,!0);s.type==="string"&&(t={},i.features.forEach(o=>{const a=o.attributes;t[a[n.name]]=s?a[s.name]:a[n.name]}))}return FD.createFromColormap(r,t)}function Z5e(e){const{bandCount:t,dataType:i,pixelType:r}=e;return i==="elevation"||i==="generic"&&t===1&&(r==="s16"||r==="s32"||r==="f32"||r==="f64")}function Y5e(e,t=!1){const{attributeTable:i,bandCount:r}=e;return r===1&&(!t||ee(i)||ee(e.histograms))}function K5e(e){return["u8","s8"].includes(e.pixelType)&&e.statistics?.[0]?.min!=null&&e.statistics[0]?.max!=null&&e.bandCount===1}function YD(e){const{dataType:t}=e;return t==="vector-uv"||t==="vector-magdir"}function Q5e(e){const{dataType:t}=e;return t==="vector-uv"||t==="vector-magdir"}const X5e=new Map([["m/s","meter-per-second"],["km/h","kilometer-per-hour"],["knots","knots"],["ft/s","feet-per-second"],["mph","mile-per-hour"]]);function e4e(e){if(!YD(e))return null;let t;if(ee(e.statistics)&&e.statistics.length&&(e.dataType==="vector-magdir"||e.dataType==="vector-uv")){const{minMagnitude:n,maxMagnitude:s}=i4e(e.dataType,e.statistics);t=[{type:"size",field:"Magnitude",minSize:10,maxSize:40,minDataValue:n,maxDataValue:s}]}const i=ee(e.multidimensionalInfo)?X5e.get(e.multidimensionalInfo.variables[0].unit):null,r=new BD({visualVariables:t,inputUnit:i,rotationType:"geographic"});return r.visualVariables=[...r.sizeVariables,...r.rotationVariables],r}function Dz(e){return{color:e.symbolLayers[0].material?.color,type:"esriSFS",style:"esriSFSSolid"}}function t4e(e){if(e.type==="uniqueValue"){const t=e.uniqueValueInfos;return t?.[0].symbol?.symbolLayers?.length&&(e.uniqueValueInfos=t?.map(r=>({value:r.value,label:r.label,symbol:r.symbol?Dz(r.symbol):null}))),e}if(e.type==="classBreaks"){const t=e.classBreakInfos;return t[0].symbol?.symbolLayers?.length&&(e.classBreakInfos=t.map(i=>({classMinValue:i.classMinValue,classMaxValue:i.classMaxValue,label:i.label,symbol:i.symbol?Dz(i.symbol):null}))),e}return e}function i4e(e,t){let i,r;if(e==="vector-magdir")i=t[0].min,r=t[0].max;else{const n=t[0].min,s=t[0].max,o=t[1].min,a=t[1].max;i=0,r=Math.max(Math.abs(n),Math.abs(o),Math.abs(s),Math.abs(a))}return{minMagnitude:i,maxMagnitude:r}}const lO=1,r4e=[.299,.587,.114];function Wre(e,t=256){t=Math.min(t,256);const{size:i,counts:r}=e,n=new Uint8Array(i),s=r.reduce((c,d)=>c+d/t,0);let o=0,a=0,l=0,u=s;for(let c=0;c<i;c++)if(l+=r[c],!(c<i-1&&l+r[c+1]<u)){for(;o<t-1&&u<l;)o++,u+=s;for(let d=a;d<=c;d++)n[d]=o;a=c+1}for(let c=a;c<i;c++)n[c]=t-1;return n}function jz(e){const{minCutOff:t,maxCutOff:i,gamma:r,pixelType:n,rounding:s}=e,o=e.outMin||0,a=e.outMax||255;if(!["u8","u16","s8","s16"].includes(n))return null;const l=t.length;let u,c,d=0;n==="s8"?d=-127:n==="s16"&&(d=-32767);let f=256;["u16","s16"].includes(n)&&(f=65536);const m=[],g=[],v=a-o;for(u=0;u<l;u++)g[u]=i[u]-t[u],m[u]=g[u]===0?0:v/g[u];let b;const x=[];let S,T,_;if(r&&r.length>=l){const M=Jre(l,r);for(u=0;u<l;u++){for(_=[],c=0;c<f;c++)if(g[u]!==0)if(S=c+d,b=(S-t[u])/g[u],T=1,r[u]>1&&(T-=(1/v)**(b*M[u])),S<i[u]&&S>t[u]){const I=T*v*b**(1/r[u])+o;_[c]=s==="floor"?Math.floor(I):s==="round"?Math.round(I):I}else S>=i[u]?_[c]=a:_[c]=o;else _[c]=o;x[u]=_}}else for(u=0;u<l;u++){for(_=[],c=0;c<f;c++)if(S=c+d,S<=t[u])_[c]=o;else if(S>=i[u])_[c]=a;else{const M=(S-t[u])*m[u]+o;_[c]=s==="floor"?Math.floor(M):s==="round"?Math.round(M):M}x[u]=_}if(e.contrastOffset!=null){const M=n4e(e.contrastOffset,e.brightnessOffset);for(u=0;u<l;u++)for(_=x[u],c=0;c<f;c++)_[c]=M[_[c]]}return{lut:x,offset:d}}function n4e(e,t){const i=Math.min(Math.max(e,-100),100),r=Math.min(Math.max(t??0,-100),100),n=255,s=128;let o=0,a=0;const l=new Uint8Array(256);for(o=0;o<256;o++)i>0&&i<100?a=(200*o-100*n+2*n*r)/(2*(100-i))+s:i<=0&&i>-100?a=(200*o-100*n+2*n*r)*(100+i)/2e4+s:i===100?(a=200*o-100*n+(n+1)*(100-i)+2*n*r,a=a>0?n:0):i===-100&&(a=s),l[o]=a>n?n:a<0?0:a;return l}function s4e(e,t,i){const r=[];for(let n=0;n<t.length;n++){let s=0,o=0,a=0;"min"in t[n]?{min:s,max:o,avg:a}=t[n]:[s,o,a]=t[n];let l=a??0;e!=="u8"&&(l=255*(l-s)/(o-s)),i&&(l*=r4e[n]),r.push(o4e(l))}return r}function o4e(e){if(e<=0||e>=255)return lO;let t=0;e!==150&&(t=e<=150?45*Math.cos(.01047*e):17*Math.sin(.021*e));const i=255,r=e+t,n=Math.log(e/i),s=Math.log(r/i);if(s===0)return lO;const o=n/s;return isNaN(o)?lO:Math.min(9.9,Math.max(.01,o))}function a4e(e){if(Re(e)||!e.pixels?.length)return null;const{pixels:t,mask:i,pixelType:r}=e,n=e.width*e.height,s=t.length;let o,a,l,u,c;const d=[],f=[];let m,g,v,b,x,S,T,_,M,I;const $=256;for(u=0;u<s;u++){if(m=new Uint32Array($),v=t[u],r==="u8")if(o=-.5,a=255.5,i)for(c=0;c<n;c++)i[c]&&m[v[c]]++;else for(c=0;c<n;c++)m[v[c]]++;else{let L=!1;e.statistics||(e.updateStatistics(),L=!0);const B=e.statistics;if(o=B[u].minValue,a=B[u].maxValue,l=(a-o)/$,l===0){!B||e.validPixelCount||L||e.updateStatistics();const z=(e.validPixelCount||e.width*e.height)/$;for(let W=0;W<$;W++)m[W]=Math.round(z*(W+1))-Math.round(z*W)}else{for(g=new Uint32Array($+1),c=0;c<n;c++)i&&!i[c]||g[Math.floor((v[c]-o)/l)]++;for(c=0;c<$-1;c++)m[c]=g[c];m[$-1]=g[$-1]+g[$]}}for(d.push({min:o,max:a,size:$,counts:m}),b=0,x=0,_=0,c=0;c<$;c++)b+=m[c],x+=c*m[c];for(M=x/b,c=0;c<$;c++)_+=m[c]*(c-M)**2;I=Math.sqrt(_/(b-1)),l=(a-o)/$,S=(M+.5)*l+o,T=I*l,f.push({min:o,max:a,avg:S,stddev:T})}return{statistics:f,histograms:d}}function _lt(e){const t=[];for(let i=0;i<e.length;i++){const{min:r,max:n,size:s,counts:o}=e[i];let a=0,l=0;for(let g=0;g<s;g++)a+=o[g],l+=g*o[g];const u=l/a;let c=0;for(let g=0;g<s;g++)c+=o[g]*(g-u)**2;const d=(n-r)/s,f=(u+.5)*d+r,m=Math.sqrt(c/(a-1))*d;t.push({min:r,max:n,avg:f,stddev:m})}return t}function g_(e,t){const{pixelBlock:i,bandIds:r,returnHistogramLut:n,rasterInfo:s}=t;let o=null,a=null,l=e.stretchType;if(typeof l=="number"&&(l=are[l]),e.dra)if(l==="minMax"&&ee(i)&&i.statistics)o=i.statistics.map(z=>[z.minValue,z.maxValue,0,0]);else{const z=a4e(i);o=ee(z)?z.statistics:null,a=ee(z)?z.histograms:null}else o=e.statistics?.length>0?e.statistics:s.statistics,a=e.histograms||s.histograms;l!=="percentClip"&&l!=="histogramEqualization"||a?.length||(l="minMax");const u=o?.length||a?.length||s.bandCount,c=[],d=[];let f,m,g,v,b,x,S,T,_;o&&!Array.isArray(o[0])&&(o=o.map(z=>[z.min,z.max,z.avg,z.stddev]));const[M,I]=Rw(s.pixelType);if(!o?.length){for(o=[],T=0;T<u;T++)o.push([M,I,1,1]);l==="standardDeviation"&&(l="minMax")}switch(l){case"none":for(T=0;T<u;T++)c[T]=M,d[T]=I;break;case"minMax":for(T=0;T<u;T++)c[T]=o[T][0],d[T]=o[T][1];break;case"standardDeviation":for(T=0;T<u;T++)c[T]=o[T][2]-e.numberOfStandardDeviations*o[T][3],d[T]=o[T][2]+e.numberOfStandardDeviations*o[T][3],c[T]<o[T][0]&&(c[T]=o[T][0]),d[T]>o[T][1]&&(d[T]=o[T][1]);break;case"histogramEqualization":for(Wf(a),T=0;T<u;T++)c[T]=a[T].min,d[T]=a[T].max;break;case"percentClip":for(Wf(a),T=0;T<a.length;T++){for(f=a[T],b=new Uint32Array(f.size),v=[...f.counts],v.length>=20&&(v[0]=v[1]=v[2]=v[v.length-1]=v[v.length-2]=0),g=0,m=(f.max-f.min)/f.size,S=f.min===-.5&&m===1?.5:0,_=0;_<f.size;_++)g+=v[_],b[_]=g;for(x=(e.minPercent||0)*g/100,c[T]=f.min+S,_=0;_<f.size;_++)if(b[_]>x){c[T]=f.min+m*(_+S);break}for(x=(1-(e.maxPercent||0)/100)*g,d[T]=f.max+S,_=f.size-2;_>=0;_--)if(b[_]<x){d[T]=f.min+m*(_+2-S);break}if(d[T]<c[T]){const z=c[T];c[T]=d[T],d[T]=z}}break;default:for(T=0;T<u;T++)c[T]=o[T][0],d[T]=o[T][1]}let $,L,B;return l==="histogramEqualization"?(Wf(a),L=a[0].size||256,$=0,n&&(B=a.map(z=>Wre(z)))):(L=e.max||255,$=e.min||0),l4e({minCutOff:c,maxCutOff:d,outMax:L,outMin:$,histogramLut:B},r)}function l4e(e,t){if(t==null||t.length===0)return e;const i=Math.max.apply(null,t),{minCutOff:r,maxCutOff:n,outMin:s,outMax:o,histogramLut:a}=e;return r.length===t.length||r.length<=i?e:{minCutOff:t.map(l=>r[l]),maxCutOff:t.map(l=>n[l]),histogramLut:a?t.map(l=>a[l]):null,outMin:s,outMax:o}}function Jre(e,t){const i=new Float32Array(e);for(let r=0;r<e;r++)t[r]>1?t[r]>2?i[r]=6.5+(t[r]-2)**2.5:i[r]=6.5+100*(2-t[r])**4:i[r]=1;return i}function uO(e,t){if(Re(e)||!e.pixels?.length)return e;const{mask:i,width:r,height:n,pixels:s}=e,{minCutOff:o,maxCutOff:a,gamma:l}=t,u=t.outMin||0,c=t.outMax||255,d=r*n,f=t.outputPixelType||"u8",m=e.pixels.map(()=>ai.createEmptyBand(f,d)),g=m.length;let v,b,x,S,T;const _=c-u,M=[],I=[];for(v=0;v<g;v++)I[v]=a[v]-o[v],M[v]=I[v]===0?0:_/I[v];const $=f.startsWith("u")||f.startsWith("s"),L=l&&l.length>=g,B=!!t.isRenderer;if(L){const W=Jre(g,l);for(b=0;b<d;b++)if(i==null||i[b])for(v=0;v<g;v++)if(I[v]!==0)if(x=s[v][b],T=(x-o[v])/I[v],S=1,l[v]>1&&(S-=(1/_)**(T*W[v])),x<a[v]&&x>o[v]){const J=S*_*T**(1/l[v])+u;m[v][b]=B?Math.floor(J):$?Math.round(J):J}else x>=a[v]?m[v][b]=c:m[v][b]=u;else m[v][b]=u}else for(b=0;b<d;b++)if(i==null||i[b])for(v=0;v<g;v++)if(x=s[v][b],x<a[v]&&x>o[v]){const W=(x-o[v])*M[v]+u;m[v][b]=B?Math.floor(W):$?Math.round(W):W}else x>=a[v]?m[v][b]=c:m[v][b]=u;const z=new ai({width:r,height:n,mask:i,pixels:m,pixelType:f});return z.updateStatistics(),z}function Zre(e){let{altitude:t,azimuth:i}=e;const{hillshadeType:r,pixelSizePower:n=1,pixelSizeFactor:s=1,scalingType:o,isGCS:a,resolution:l}=e,u=r==="multi-directional"?2*e.zFactor:e.zFactor,{x:c,y:d}=l;let f=u/(8*c),m=u/(8*d);if(a&&u>.001&&(f/=111e3,m/=111e3),o==="adjusted")if(a){const J=111e3*c,K=111e3*d;f=(u+J**n*s)/(8*J),m=(u+K**n*s)/(8*K)}else f=(u+c**n*s)/(8*c),m=(u+d**n*s)/(8*d);let g=(90-t)*Math.PI/180,v=Math.cos(g),b=(360-i+90)*Math.PI/180,x=Math.sin(g)*Math.cos(b),S=Math.sin(g)*Math.sin(b);const T=[315,270,225,360,180,0],_=[60,60,60,60,60,90],M=new Float32Array([3,5,3,2,1,4]),I=M.reduce((J,K)=>J+K),$=M.map(J=>J/I),L=r==="multi-directional"?T.length:1,B=new Float32Array(6),z=new Float32Array(6),W=new Float32Array(6);if(r==="multi-directional")for(let J=0;J<L;J++)t=_[J],i=T[J],g=(90-t)*Math.PI/180,v=Math.cos(g),b=(360-i+90)*Math.PI/180,x=Math.sin(g)*Math.cos(b),S=Math.sin(g)*Math.sin(b),B[J]=v,z[J]=x,W[J]=S;else B.fill(v),z.fill(x),W.fill(S);return{resolution:l,factor:[f,m],sinZcosA:x,sinZsinA:S,cosZ:v,sinZcosAs:z,sinZsinAs:W,cosZs:B,weights:$,hillshadeType:["traditional","multi-directional"].indexOf(r)}}function u4e(e,t){if(!$r(e))return e;const{width:i,height:r,mask:n}=e,s=new Uint8Array(i*r);let o=1;if(ee(n)){for(let Q=0;Q<n.length;Q++)if(n[Q]){o=n[Q];break}s.set(n)}const{factor:a,sinZcosA:l,sinZsinA:u,cosZ:c,sinZcosAs:d,sinZsinAs:f,cosZs:m,weights:g}=Zre(t),[v,b]=a,{hillshadeType:x}=t,S=e.pixels[0],T=new Uint8Array(i*r);let _,M,I,$,L,B,z,W;const J=1,K=ee(n);for(let Q=J;Q<r-J;Q++){const y=Q*i;for(let A=J;A<i-J;A++){if(n&&!n[y+A]){T[y+A]=0;continue}let N=8;if(K&&(N=(n[y-i+A-1]+n[y-i+A]+n[y-i+A+1]+n[y+A-1]+n[y+A+1]+n[y+i+A-1]+n[y+i+A]+n[y+i+A+1])/o,N<7)){T[y+A]=0,s[y+A]=0;continue}n&&N===7?(_=n[y-i+A-1]?S[y-i+A-1]:S[y+A],M=n[y-i+A]?S[y-i+A]:S[y+A],I=n[y-i+A+1]?S[y-i+A+1]:S[y+A],$=n[y+A-1]?S[y+A-1]:S[y+A],L=n[y+A+1]?S[y+A+1]:S[y+A],B=n[y+i+A-1]?S[y+i+A-1]:S[y+A],z=n[y+i+A]?S[y+i+A]:S[y+A],W=n[y+i+A+1]?S[y+i+A+1]:S[y+A]):(_=S[y-i+A-1],M=S[y-i+A],I=S[y-i+A+1],$=S[y+A-1],L=S[y+A+1],B=S[y+i+A-1],z=S[y+i+A],W=S[y+i+A+1]);const j=(I+L+L+W-(_+$+$+B))*v,oe=(B+z+z+W-(_+M+M+I))*b,q=Math.sqrt(1+j*j+oe*oe);let de=0;if(x==="traditional"){let re=255*(c+u*oe-l*j)/q;re<0&&(re=0),de=re}else{const re=f.length;for(let me=0;me<re;me++){let ve=255*(m[me]+f[me]*oe-d[me]*j)/q;ve<0&&(ve=0),de+=ve*g[me]}}T[y+A]=255&de}}for(let Q=0;Q<r;Q++)T[Q*i]=T[Q*i+1],T[(Q+1)*i-1]=T[(Q+1)*i-2];for(let Q=1;Q<i-1;Q++)T[Q]=T[Q+i],T[Q+(r-1)*i]=T[Q+(r-2)*i];return new ai({width:i,height:r,pixels:[T],mask:n?s:null,pixelType:"u8",validPixelCount:e.validPixelCount,statistics:[{minValue:0,maxValue:255}]})}function c4e(e,t,i,r){if(!$r(e)||!$r(t))return;const{min:n,max:s}=r,o=e.pixels[0],{pixels:a,mask:l}=t,u=a[0],c=255.00001/(s-n),d=new Uint8ClampedArray(u.length),f=new Uint8ClampedArray(u.length),m=new Uint8ClampedArray(u.length),g=i.length-1;for(let v=0;v<u.length;v++){if(l&&l[v]===0)continue;const b=Math.floor((u[v]-n)*c),[x,S]=i[b<0?0:b>g?g:b],T=o[v],_=T*S,M=_*(1-Math.abs(x%2-1)),I=T-_;switch(Math.floor(x)){case 0:d[v]=_+I,f[v]=M+I,m[v]=I;break;case 1:d[v]=M+I,f[v]=_+I,m[v]=I;break;case 2:d[v]=I,f[v]=_+I,m[v]=M+I;break;case 3:d[v]=I,f[v]=M+I,m[v]=_+I;break;case 4:d[v]=M+I,f[v]=I,m[v]=_+I;break;case 5:case 6:d[v]=_+I,f[v]=I,m[v]=M+I}}e.pixels=[d,f,m],e.updateStatistics()}function xlt(e,t){if(!$r(e))return e;const i=t.zFactor,r=t.pixelSizePower??1,n=t.pixelSizeFactor??1,s=t.slopeType,o=t.isGCS,{width:a,height:l,mask:u}=e,c=e.pixels[0],d=new Uint8Array(a*l);let f=1;if(ee(u)){for(let K=0;K<u.length;K++)if(u[K]){f=u[K];break}d.set(u)}const m=new Float32Array(a*l),{x:g,y:v}=t.resolution;let b=i/(8*g),x=i/(8*v);o&&Math.abs(i-1)<1e-4&&(b/=111e3,x/=111e3),s==="adjusted"&&(b=(i+g**r*n)/(8*g),x=(i+v**r*n)/(8*v));const S=1;let T,_,M,I,$,L,B,z;const W=ee(u);for(let K=S;K<l-S;K++){const Q=K*a;for(let y=S;y<a-S;y++){if(u&&!u[Q+y]){m[Q+y]=0;continue}let A=0;if(W&&(A=(u[Q-a+y-1]+u[Q-a+y]+u[Q-a+y+1]+u[Q+y-1]+u[Q+y+1]+u[Q+a+y-1]+u[Q+a+y]+u[Q+a+y+1])/f,A<7)){m[Q+y]=0,d[Q+y]=0;continue}u&&A===7?(T=u[Q-a+y-1]?c[Q-a+y-1]:c[Q+y],_=u[Q-a+y]?c[Q-a+y]:c[Q+y],M=u[Q-a+y+1]?c[Q-a+y+1]:c[Q+y],I=u[Q+y-1]?c[Q+y-1]:c[Q+y],$=u[Q+y+1]?c[Q+y+1]:c[Q+y],L=u[Q+a+y-1]?c[Q+a+y-1]:c[Q+y],B=u[Q+a+y]?c[Q+a+y]:c[Q+y],z=u[Q+a+y+1]?c[Q+a+y+1]:c[Q+y]):(T=c[Q-a+y-1],_=c[Q-a+y],M=c[Q-a+y+1],I=c[Q+y-1],$=c[Q+y+1],L=c[Q+a+y-1],B=c[Q+a+y],z=c[Q+a+y+1]);const N=(M+$+$+z-(T+I+I+L))*b,j=(L+B+B+z-(T+_+_+M))*x,oe=Math.sqrt(N*N+j*j);m[Q+y]=s==="percent-rise"?100*oe:57.2957795*Math.atan(oe)}}for(let K=0;K<l;K++)m[K*a]=m[K*a+1],m[(K+1)*a-1]=m[(K+1)*a-2];for(let K=1;K<a-1;K++)m[K]=m[K+a],m[K+(l-1)*a]=m[K+(l-2)*a];const J=new ai({width:a,height:l,pixels:[m],mask:u?d:null,pixelType:"f32",validPixelCount:e.validPixelCount});return J.updateStatistics(),J}function Slt(e,t={}){if(!$r(e))return e;const{width:i,height:r,mask:n}=e,s=e.pixels[0],o=new Uint8Array(i*r);ee(n)&&o.set(n);const a=new Float32Array(i*r),{resolution:l}=t,u=l?1/l.x:1,c=l?1/l.y:1,d=1;let f,m,g,v,b,x,S,T;const _=ee(n);for(let M=d;M<r-d;M++){const I=M*i;for(let $=d;$<i-d;$++){if(n&&!n[I+$]){a[I+$]=0;continue}let L=0;if(_&&(L=n[I-i+$-1]+n[I-i+$]+n[I-i+$+1]+n[I+$-1]+n[I+$+1]+n[I+i+$-1]+n[I+i+$]+n[I+i+$+1],L<7)){a[I+$]=0,o[I+$]=0;continue}n&&L===7?(f=n[I-i+$-1]?s[I-i+$-1]:s[I+$],m=n[I-i+$]?s[I-i+$]:s[I+$],g=n[I-i+$+1]?s[I-i+$+1]:s[I+$],v=n[I+$-1]?s[I+$-1]:s[I+$],b=n[I+$+1]?s[I+$+1]:s[I+$],x=n[I+i+$-1]?s[I+i+$-1]:s[I+$],S=n[I+i+$]?s[I+i+$]:s[I+$],T=n[I+i+$+1]?s[I+i+$+1]:s[I+$]):(f=s[I-i+$-1],m=s[I-i+$],g=s[I-i+$+1],v=s[I+$-1],b=s[I+$+1],x=s[I+i+$-1],S=s[I+i+$],T=s[I+i+$+1]);const B=(g+b+b+T-(f+v+v+x))*u,z=(x+S+S+T-(f+m+m+g))*c;let W=-1;B===0&&z===0||(W=90-57.29578*Math.atan2(z,-B),W<0&&(W+=360),W===360?W=0:W>360&&(W%=360)),a[I+$]=W}}for(let M=0;M<r;M++)a[M*i]=a[M*i+1],a[(M+1)*i-1]=a[(M+1)*i-2];for(let M=1;M<i-1;M++)a[M]=a[M+i],a[M+(r-1)*i]=a[M+(r-2)*i];return new ai({width:i,height:r,pixels:[a],mask:n?o:null,pixelType:"f32",validPixelCount:e.validPixelCount,statistics:[{minValue:0,maxValue:360}]})}function h4e(e,t){const{attributeTable:i,bandCount:r}=e;return!(Re(i)||r>1||t&&i.fields.find(n=>n.name.toLowerCase()===t.toLowerCase())==null)}function d4e(e){const{bandCount:t,dataType:i,pixelType:r}=e;return i==="elevation"||i==="generic"&&t===1&&(r==="s16"||r==="f32"||r==="f64")}function p4e(e){const{bandCount:t,colormap:i}=e;return ee(i)&&i.length>0&&t===1}let Qy=class extends Je{constructor(t){super(t)}bind(){const{rendererJSON:t}=this;if(!t)return{success:!1};let i;switch(this.lookup={rendererJSON:{}},t.type){case"uniqueValue":i=this._updateUVRenderer(t);break;case"rasterColormap":i=this._updateColormapRenderer(t);break;case"rasterStretch":i=this._updateStretchRenderer(t);break;case"classBreaks":i=this._updateClassBreaksRenderer(t);break;case"rasterShadedRelief":i=this._updateShadedReliefRenderer(t);break;case"vectorField":i=this._updateVectorFieldRenderer();break;case"flowRenderer":i=this._updateFlowRenderer()}return i}symbolize(t){let i=t&&t.pixelBlock;if(!Uz(i))return i;if(t.simpleStretchParams&&this.rendererJSON.type==="rasterStretch")return this.simpleStretch(i,t.simpleStretchParams);try{let r;switch(i.pixels.length>3&&(i=fz(i,[0,1,2])),this.rendererJSON.type){case"uniqueValue":case"rasterColormap":r=this._symbolizeColormap(i);break;case"classBreaks":r=this._symbolizeClassBreaks(i);break;case"rasterStretch":r=this._symbolizeStretch(i,t.bandIds);break;case"rasterShadedRelief":{const n=t.extent,s=n.spatialReference.isGeographic,o={x:(n.xmax-n.xmin)/i.width,y:(n.ymax-n.ymin)/i.height};r=this._symbolizeShadedRelief(i,{isGCS:s,resolution:o});break}}return r}catch(r){return et.getLogger(this.declaredClass).error("symbolize",r.message),i}}simpleStretch(t,i){if(!Uz(t))return t;try{return t.pixels.length>3&&(t=fz(t,[0,1,2])),uO(t,{...i,isRenderer:!0})}catch(r){return et.getLogger(this.declaredClass).error("symbolize",r.message),t}}generateWebGLParameters(t){if(["uniqueValue","rasterColormap","classBreaks"].includes(this.rendererJSON.type)){const{indexedColormap:a,offset:l}=this.lookup.colormapLut||{};return{colormap:a,colormapOffset:l,type:"lut"}}const{pixelBlock:i,isGCS:r,resolution:n,bandIds:s}=t,{rendererJSON:o}=this;return o.type==="rasterStretch"?this._generateStretchWebGLParams(i,o,s):o.type==="rasterShadedRelief"?this._generateShadedReliefWebGLParams(o,r,n??void 0):o.type==="vectorField"?this._generateVectorFieldWebGLParams(o):null}_isLUTChanged(t){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const i=this.rendererJSON.colorRamp;return t?JSON.stringify(i)!==JSON.stringify(this.lookup.rendererJSON.colorRamp):(this.rendererJSON,this.lookup.rendererJSON,JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON))}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)}_symbolizeColormap(t){return this._isLUTChanged()&&!this.bind().success?t:Q$(t,this.lookup.colormapLut)}_symbolizeClassBreaks(t){const{canUseIndexedLUT:i}=this._analyzeClassBreaks(this.rendererJSON);return this._isLUTChanged()&&!this.bind().success?t:i?Q$(t,this.lookup.colormapLut):FTe(t,this.lookup.remapLut??[])}_symbolizeStretch(t,i){const{rasterInfo:r}=this,{pixelType:n,bandCount:s}=r,o=this.rendererJSON,a=["u8","u16","s8","s16"].includes(n);let l,u;const{dra:c}=o,{gamma:d}=this.lookup;if(o.stretchType==="histogramEqualization"){const f=c?null:this.lookup?.histogramLut,m=g_(o,{rasterInfo:r,pixelBlock:t,bandIds:i,returnHistogramLut:!f}),g=uO(t,{...m,gamma:d,isRenderer:!0});u=mz(g,{lut:c?m.histogramLut:f,offset:0})}else if(a){if(c){const f=g_(o,{rasterInfo:r,pixelBlock:t,bandIds:i});l=jz({pixelType:n,...f,gamma:d,rounding:"floor"})}else if(this._isLUTChanged()){if(!this.bind().success)return t;l=this.lookup?this.lookup.stretchLut:null}else l=this.lookup?this.lookup.stretchLut:null;if(!l)return t;s>1&&i?.length===t?.pixels.length&&l?.lut.length===s&&(l={lut:i.map(f=>l.lut[f]),offset:l.offset}),u=mz(t,l)}else{const f=g_(o,{rasterInfo:r,pixelBlock:t,bandIds:i});u=uO(t,{...f,gamma:d,isRenderer:!0})}if(o.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return t;u=Q$(u,this.lookup?.colormapLut)}return u}_symbolizeShadedRelief(t,i){const r=this.rendererJSON,n={...r,...i},s=u4e(t,n);if(!r.colorRamp)return s;let o;if(this._isLUTChanged(!0)){if(!this.bind().success)return s;o=this.lookup?this.lookup.hsvMap:null}else o=this.lookup?this.lookup.hsvMap:null;if(!o)return s;const a=this.rasterInfo.statistics?.[0]??{min:0,max:8e3};return c4e(s,t,o,a),s}_isVectorFieldData(){const{bandCount:t,dataType:i}=this.rasterInfo;return t===2&&(i==="vector-magdir"||i==="vector-uv")}_updateVectorFieldRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".`}}_updateFlowRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; FlowRenderer only supports "vector-magdir" and "vector-uv".`}}_updateUVRenderer(t){const{bandCount:i,attributeTable:r,pixelType:n}=this.rasterInfo,s=t.field1;if(!s)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};const o=t.defaultSymbol,a=i===1&&["u8","s8"].includes(n);if(!h4e(this.rasterInfo,s)&&!a)return{success:!1,error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};const l=[];if(ee(r)){const c=r.fields.find(d=>d.name.toLowerCase()==="value");if(!c)return{success:!1,error:"Unsupported data; the data's raster attribute table does not have a value field."};r.features.forEach(d=>{const f=t.uniqueValueInfos?.find(g=>String(g.value)===String(d.attributes[s])),m=f?.symbol?.color;m?l.push([d.attributes[c.name]].concat(m)):o&&l.push([d.attributes[c.name]].concat(o.color))})}else{if(s.toLowerCase()!=="value")return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not availalbe.'};t.uniqueValueInfos?.forEach(c=>{const d=c?.symbol?.color;d?l.push([parseInt(""+c.value,10)].concat(d)):o&&l.push([parseInt(""+c.value,10)].concat(o?.color))})}if(l.length===0)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};const u=f_({colormap:l});return this.lookup={rendererJSON:t,colormapLut:u},this.canRenderInWebGL=!0,{success:!0}}_updateColormapRenderer(t){if(!p4e(this.rasterInfo))return{success:!1,error:"Unsupported data; the data source does not have a colormap."};const i=t.colormapInfos.map(n=>[n.value].concat(n.color)).sort((n,s)=>n[0]-s[0]);if(!i||i.length===0)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};const r=f_({colormap:i});return this.lookup={rendererJSON:t,colormapLut:r},this.canRenderInWebGL=!0,{success:!0}}_updateShadedReliefRenderer(t){if(!d4e(this.rasterInfo))return{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; ShadedReliefRenderer only supports "elevation", or single band float/s16 data.`};if(t.colorRamp){const i=S0(t.colorRamp,{interpolateAlpha:!0}),r=f_({colormap:i}),n=[],s=r.indexedColormap;for(let o=0;o<s.length;o+=4){const a=$A({r:s[o],g:s[o+1],b:s[o+2]});n.push([a.h/60,a.s/100,255*a.v/100])}this.lookup={rendererJSON:t,colormapLut:r,hsvMap:n}}else this.lookup=null;return this.canRenderInWebGL=!0,{success:!0}}_analyzeClassBreaks(t){const{attributeTable:i,pixelType:r}=this.rasterInfo,n=ee(i)?i.fields.find(a=>a.name.toLowerCase()==="value"):null,s=ee(i)?i.fields.find(a=>a.name.toLowerCase()===t.field.toLowerCase()):null,o=n!=null&&s!==null;return{canUseIndexedLUT:["u8","u16","s8","s16"].includes(r)||o,tableValueField:n,tableBreakField:s}}_updateClassBreaksRenderer(t){const{attributeTable:i}=this.rasterInfo,{canUseIndexedLUT:r,tableValueField:n,tableBreakField:s}=this._analyzeClassBreaks(t),o=t.classBreakInfos;if(!o?.length)return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};const a=o.sort((f,m)=>f.classMaxValue-m.classMaxValue),l=a[a.length-1];let u=t.minValue;if(!r){const f=[];for(let m=0;m<a.length;m++)f.push({value:a[m].classMinValue??u,mappedColor:a[m].symbol.color}),u=a[m].classMaxValue;return f.push({value:l.classMaxValue,mappedColor:l.symbol.color}),this.lookup={rendererJSON:t,remapLut:f},this.canRenderInWebGL=!1,{success:!0}}const c=[];if(ee(i)&&n!=null&&s!==null&&n!==s){const f=n.name,m=s.name,g=a[a.length-1],{classMaxValue:v}=g;u=t.minValue;for(const b of i.features){const x=b.attributes[f],S=b.attributes[m],T=S===v?g:S<u?null:a.find(({classMaxValue:_})=>_>S);T&&c.push([x].concat(T.symbol.color))}}else{u=Math.floor(t.minValue);for(let f=0;f<a.length;f++){const m=a[f];for(let g=u;g<m.classMaxValue;g++)c.push([g].concat(m.symbol.color));u=Math.ceil(m.classMaxValue)}l.classMaxValue===u&&c.push([l.classMaxValue].concat(l.symbol.color))}const d=f_({colormap:c,fillUnspecified:!1});return this.lookup={rendererJSON:t,colormapLut:d},this.canRenderInWebGL=!0,{success:!0}}_isHistogramRequired(t){return t==="percentClip"||t==="histogramEqualization"}_isValidRasterStatistics(t){return ee(t)&&t.length>0&&t[0].min!=null&&t[0].max!=null}_updateStretchRenderer(t){let{stretchType:i,dra:r}=t;if(!(i==="none"||t.statistics?.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||r))return{success:!1,error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};const n=t.histograms||this.rasterInfo.histograms;!this._isHistogramRequired(t.stretchType)||n?.length||r||(i="minMax");const{computeGamma:s,useGamma:o,colorRamp:a}=t;let{gamma:l}=t;if(o&&s&&!l?.length){const d=t.statistics?.length?t.statistics:this.rasterInfo.statistics;l=s4e(this.rasterInfo.pixelType,d)}const u=this.rasterInfo.pixelType,c=!r&&["u8","u16","s8","s16"].includes(u);if(i==="histogramEqualization"){const d=n.map(f=>Wre(f));this.lookup={rendererJSON:t,histogramLut:d}}else if(c){const d=g_(t,{rasterInfo:this.rasterInfo}),f=jz({pixelType:u,...d,gamma:o?l:null,rounding:"floor"});this.lookup={rendererJSON:t,stretchLut:f}}if(a){const d=S0(a,{interpolateAlpha:!0});this.lookup||(this.lookup={rendererJSON:t}),this.lookup.colormapLut=f_({colormap:d}),this.lookup.rendererJSON=t}return this.lookup.gamma=o&&l?.length?l:null,this.canRenderInWebGL=!0,{success:!0}}_generateStretchWebGLParams(t,i,r){let n=null,s=null;const o=this.lookup&&this.lookup.colormapLut;i.colorRamp&&o&&(n=o.indexedColormap,s=o.offset),i.stretchType==="histogramEqualization"&&(i={...i,stretchType:"minMax"});const{gamma:a}=this.lookup,l=!!(i.useGamma&&a&&a.some(_=>_!==1)),{minCutOff:u,maxCutOff:c,outMin:d,outMax:f}=g_(i,{rasterInfo:this.rasterInfo,pixelBlock:t,bandIds:r});let m=0;ee(t)&&(m=t.getPlaneCount(),m===2&&((t=t.clone()).statistics=[t.statistics[0]],t.pixels=[t.pixels[0]]));const{bandCount:g}=this.rasterInfo,v=Math.min(3,r?.length||m||g,g),b=new Float32Array(v),x=n||l?1:255;let S;for(S=0;S<u.length;S++)b[S]=c[S]===u[S]?0:(f-d)/(c[S]-u[S])/x;const T=new Float32Array(v);if(l&&a)for(S=0;S<v;S++)a[S]>1?a[S]>2?T[S]=6.5+(a[S]-2)**2.5:T[S]=6.5+100*(2-a[S])**4:T[S]=1;return{bandCount:v,outMin:d/x,outMax:f/x,minCutOff:u,maxCutOff:c,factor:b,useGamma:l,gamma:l?a:[1,1,1],gammaCorrection:l?T:[1,1,1],colormap:n,colormapOffset:s,stretchType:i.stretchType,type:"stretch"}}_generateShadedReliefWebGLParams(t,i=!1,r={x:0,y:0}){let n=null,s=null;const o=this.lookup&&this.lookup.colormapLut;t.colorRamp&&o&&(n=o.indexedColormap,s=o.offset);const a={...t,isGCS:i,resolution:r},l=Zre(a),u=this.rasterInfo.statistics?.[0];return{...l,minValue:u?.min??0,maxValue:u?.max??8e3,hillshadeType:t.hillshadeType==="traditional"?0:1,type:"hillshade",colormap:n,colormapOffset:s}}_generateVectorFieldWebGLParams(t){const{style:i,inputUnit:r,outputUnit:n,visualVariables:s,symbolTileSize:o,flowRepresentation:a}=t;let l;const u=this.rasterInfo.statistics?.[0].min??0,c=this.rasterInfo.statistics?.[0].max??50,d=s?.find(S=>S.type==="sizeInfo")??{type:"sizeInfo",field:"Magnitude",maxDataValue:c,maxSize:.8*o,minDataValue:u,minSize:.2*o},f=d.minDataValue??u,m=d.maxDataValue??c,g=ee(d.maxSize)&&ee(d.minSize)?[d.minSize/o,d.maxSize/o]:[.2,.8];if(i==="wind_speed"){const S=(g[0]+g[1])/2;g[0]=g[1]=S}const v=ee(f)&&ee(m)?[f,m]:null;if(i==="classified_arrow")if(ee(f)&&ee(m)&&ee(d)){l=[];const S=(d.maxDataValue-d.minDataValue)/5;for(let T=0;T<6;T++)l.push(d.minDataValue+S*T)}else l=[0,1e-6,3.5,7,10.5,14];const b=a==="flow_to"==(i==="ocean_current_kn"||i==="ocean_current_m")?0:Math.PI,x=s?.find(S=>S.type==="rotationInfo");return{breakValues:l,dataRange:v,inputUnit:r,outputUnit:n,symbolTileSize:o,symbolPercentRange:g,style:i||"single_arrow",rotation:b,rotationType:this.rasterInfo.storageInfo?.tileInfo&&this.rasterInfo.dataType==="vector-uv"?"geographic":x?.rotationType||t.rotationType,type:"vectorField"}}};function Uz(e){return $r(e)&&e.validPixelCount!==0}h([p({json:{write:!0}})],Qy.prototype,"rendererJSON",void 0),h([p({type:x3,json:{write:!0}})],Qy.prototype,"rasterInfo",void 0),h([p({json:{write:!0}})],Qy.prototype,"lookup",void 0),h([p()],Qy.prototype,"canRenderInWebGL",void 0),Qy=h([ce("esri.renderers.support.RasterSymbolizer")],Qy);const f4e=Qy;let ov=class extends Je{constructor(t){super(t),this.north=null,this.up=null,this.spatialReference=null}};h([p({type:Number,json:{write:!0}})],ov.prototype,"north",void 0),h([p({type:Number,json:{write:!0}})],ov.prototype,"up",void 0),h([p({type:Et,json:{write:!0}})],ov.prototype,"spatialReference",void 0),ov=h([ce("esri.rest.support.ImageAngleResult")],ov);const m4e=ov;let Nf=class extends Je{constructor(){super(...arguments),this.value=null,this.displayValue=null,this.uncertainty=null}};h([p({type:Number,json:{read:!0,write:!0}})],Nf.prototype,"value",void 0),h([p({type:String,json:{read:!0,write:!0}})],Nf.prototype,"displayValue",void 0),h([p({type:Number,json:{read:!0,write:!0}})],Nf.prototype,"uncertainty",void 0),Nf=h([ce("esri.rest.support.ImageMeasureResultValue")],Nf);let nb=class extends Nf{constructor(){super(...arguments),this.unit=null}};h([p({type:String,json:{read:Qd.read,write:Qd.write}})],nb.prototype,"unit",void 0),nb=h([ce("esri.rest.support.ImageMeasureResultLengthValue")],nb);let QI=class extends Nf{constructor(){super(...arguments),this.unit=null}};h([p({type:String,json:{read:Jx.read,write:Jx.write}})],QI.prototype,"unit",void 0),QI=h([ce("esri.rest.support.ImageMeasureResultAreaValue")],QI);let xx=class extends Nf{constructor(){super(...arguments),this.unit=null}};h([p({type:String,json:{read:iA.read,write:iA.write}})],xx.prototype,"unit",void 0),xx=h([ce("esri.rest.support.ImageMeasureResultAngleValue")],xx);let zf=class extends Je{constructor(){super(...arguments),this.name=null,this.sensorName=null}};h([p({type:String,json:{read:!0,write:!0}})],zf.prototype,"name",void 0),h([p({type:String,json:{read:!0,write:!0}})],zf.prototype,"sensorName",void 0),zf=h([ce("esri.rest.support.BaseImageMeasureResult")],zf);let C2=class extends zf{constructor(){super(...arguments),this.area=null,this.perimeter=null}};h([p({type:QI,json:{read:!0,write:!0}})],C2.prototype,"area",void 0),h([p({type:nb,json:{read:!0,write:!0}})],C2.prototype,"perimeter",void 0),C2=h([ce("esri.rest.support.ImageAreaResult")],C2);const y4e=C2;let av=class extends zf{constructor(){super(...arguments),this.distance=null,this.azimuthAngle=null,this.elevationAngle=null}};h([p({type:nb,json:{read:!0,write:!0}})],av.prototype,"distance",void 0),h([p({type:xx,json:{read:!0,write:!0}})],av.prototype,"azimuthAngle",void 0),h([p({type:xx,json:{read:!0,write:!0}})],av.prototype,"elevationAngle",void 0),av=h([ce("esri.rest.support.ImageDistanceResult")],av);const g4e=av;let XI=class extends zf{constructor(){super(...arguments),this.height=null}};h([p({type:nb,json:{read:!0,write:!0}})],XI.prototype,"height",void 0),XI=h([ce("esri.rest.support.ImageHeightResult")],XI);const v4e=XI;let Gu=class extends Je{constructor(){super(...arguments),this.catalogItemVisibilities=null,this.catalogItems=null,this.location=null,this.name=null,this.objectId=null,this.processedValues=null,this.properties=null,this.value=null}};h([p({json:{write:!0}})],Gu.prototype,"catalogItemVisibilities",void 0),h([p({type:z0,json:{write:!0}})],Gu.prototype,"catalogItems",void 0),h([p({type:At,json:{write:!0}})],Gu.prototype,"location",void 0),h([p({json:{write:!0}})],Gu.prototype,"name",void 0),h([p({json:{write:!0}})],Gu.prototype,"objectId",void 0),h([p({json:{write:!0}})],Gu.prototype,"processedValues",void 0),h([p({json:{write:!0}})],Gu.prototype,"properties",void 0),h([p({json:{write:!0}})],Gu.prototype,"value",void 0),Gu=h([ce("esri.rest.support.ImageIdentifyResult")],Gu);const b4e=Gu;let eT=class extends Je{constructor(){super(...arguments),this.geometries=null}};h([p({json:{write:!0}})],eT.prototype,"geometries",void 0),eT=h([ce("esri.rest.support.ImagePixelLocationResult")],eT);const w4e=eT;let tT=class extends zf{constructor(){super(...arguments),this.point=null}};h([p({type:At,json:{name:"point.value",read:!0,write:!0}})],tT.prototype,"point",void 0),tT=h([ce("esri.rest.support.ImagePointResult")],tT);const _4e=tT;let vd=class extends Je{constructor(){super(...arguments),this.attributes=null,this.location=null,this.locationId=null,this.rasterId=null,this.resolution=null,this.pixelValue=null}};h([p({json:{write:!0}})],vd.prototype,"attributes",void 0),h([p({type:At,json:{write:!0}})],vd.prototype,"location",void 0),h([p({json:{write:!0}})],vd.prototype,"locationId",void 0),h([p({json:{write:!0}})],vd.prototype,"rasterId",void 0),h([p({json:{write:!0}})],vd.prototype,"resolution",void 0),h([p({json:{write:!0}})],vd.prototype,"pixelValue",void 0),vd=h([ce("esri.rest.support.ImageSample")],vd);const x4e=vd;let iT=class extends Je{constructor(){super(...arguments),this.samples=null}};h([p({type:[x4e],json:{write:!0}})],iT.prototype,"samples",void 0),iT=h([ce("esri.rest.support.ImageSampleResult")],iT);const S4e=iT;function Yre(e){const t=e?.time;if(t&&(t.start!=null||t.end!=null)){const i=[];t.start!=null&&i.push(t.start),t.end==null||i.includes(t.end)||i.push(t.end),e.time=i.join(",")}}async function Kre(e,t,i){const r=Hs(e),n=t.geometry?[t.geometry]:[],s=await Z0(n),o=t.toJSON();Yre(o);const a=s&&s[0];ee(a)&&(o.geometry=a.toJSON());const l=gp({...r.query,f:"json",...o});return jm(l,i)}async function E4e(e,t,i){const r=t.toJSON();ee(r.angleName)&&(r.angleName=r.angleName.join(",")),ee(t.point)&&t.point.spatialReference?.imageCoordinateSystem&&(r.point.spatialReference=k4(t.point.spatialReference)),ee(t.spatialReference)&&t.spatialReference.imageCoordinateSystem&&(r.spatialReference=Qre(t.spatialReference));const n=Hs(e),s=gp({...n.query,f:"json",...r}),o=jm(s,i),{data:a}=await St(`${n.path}/computeAngles`,o);return a.spatialReference=a.spatialReference?a.spatialReference.geodataXform!=null?new Et({wkid:0,imageCoordinateSystem:a.spatialReference}):Et.fromJSON(a.spatialReference):null,a.north==="NaN"&&(a.north=null),a.up==="NaN"&&(a.up=null),new m4e(a)}async function M4e(e,t,i){const r=t.toJSON(),{geometries:n}=t;if(n)for(let u=0;u<n.length;u++)n[u].spatialReference?.imageCoordinateSystem&&(r.geometries.geometries[u].spatialReference=k4(n[u].spatialReference));const s=Hs(e),o=gp({...s.query,f:"json",...r}),a=jm(o,i),{data:l}=await St(`${s.path}/computePixelLocation`,a);return w4e.fromJSON(l)}async function I4e(e,t,i){const r=await Kre(e,t,i),n=Hs(e),{data:s}=await St(`${n.path}/computeStatisticsHistograms`,r),{statistics:o}=s;return o?.length&&o.forEach(a=>{a.avg=a.mean,a.stddev=a.standardDeviation}),{statistics:o,histograms:s.histograms}}async function T4e(e,t,i){const r=await Kre(e,t,i),n=Hs(e),{data:s}=await St(`${n.path}/computeHistograms`,r);return{histograms:s.histograms}}async function A4e(e,t,i){const r=t.toJSON();Yre(r),r.outFields?.length&&(r.outFields=r.outFields.join(","));const n=(await Z0(t.geometry))?.[0];ee(n)&&(r.geometry=n.toJSON());const s=Hs(e),o=gp({...s.query,f:"json",...r}),a=jm(o,i),{data:l}=await St(`${s.path}/getSamples`,a),u=l?.samples?.map(c=>{const d=c.value==="NaN"||c.value===""?null:c.value.split(" ").map(f=>Number(f));return{...c,pixelValue:d}});return S4e.fromJSON({samples:u})}async function Vz(e,t,i){const r=Hs(e),n=t.geometry?[t.geometry]:[];return Z0(n).then(s=>{const o=t.toJSON(),a=s&&s[0];ee(a)&&(o.geometry=JSON.stringify(a.toJSON()));const l=gp({...r.query,f:"json",...o}),u=jm(l,i);return St(r.path+"/identify",u)}).then(s=>b4e.fromJSON(s.data))}async function C4e(e,t,i){const r=await R4(e,t,[t.fromGeometry,t.toGeometry],i);return v4e.fromJSON(r)}async function $4e(e,t,i){const r=await R4(e,t,[t.geometry],i);return y4e.fromJSON(r)}async function O4e(e,t,i){const r=await R4(e,t,[t.geometry],i);return _4e.fromJSON(r)}async function R4e(e,t,i){const r=await R4(e,t,[t.fromGeometry,t.toGeometry],i);return g4e.fromJSON(r)}async function R4(e,t,i,r){const n=Hs(e),s=await Z0(i),o=t.toJSON();ee(s[0])&&(o.fromGeometry=JSON.stringify(Bz(s[0]))),ee(s[1])&&(o.toGeometry=JSON.stringify(Bz(s[1])));const a=gp({...n.query,f:"json",...o}),l=jm(a,r),{data:u}=await St(n.path+"/measure",l);return u}function Bz(e){const t=e.toJSON();return e.spatialReference?.imageCoordinateSystem&&(t.spatialReference=k4(e.spatialReference)),t}function k4(e){const{imageCoordinateSystem:t}=e;if(t){const{id:i,referenceServiceName:r}=t;return i!=null?r?{icsid:i,icsns:r}:{icsid:i}:{ics:t}}return e.toJSON()}function Qre(e,t){const i=k4(e),{icsid:r,icsns:n,wkid:s}=i;return r!=null?n==null||t?.toLowerCase().includes("/"+n.toLowerCase()+"/")?`0:${r}`:JSON.stringify(i):s?s.toString():JSON.stringify(i)}function Xre(e){const t={};for(const i in e){if(i==="declaredClass")continue;const r=e[i];if(r!=null&&typeof r!="function")if(Array.isArray(r)){t[i]=[];for(let n=0;n<r.length;n++)t[i][n]=Xre(r[n])}else typeof r=="object"?r.toJSON&&(t[i]=JSON.stringify(r)):t[i]=r}return t}var Cf;(function(e){e[e.varint=0]="varint",e[e.fixed64=1]="fixed64",e[e.delimited=2]="delimited",e[e.fixed32=5]="fixed32",e[e.unknown=99]="unknown"})(Cf||(Cf={}));const zz=4294967296,k4e=new TextDecoder("utf-8"),L4e=Ze("safari")||Ze("ios")?6:Ze("ff")?12:32;let k8=class rT{constructor(t,i,r=0,n=t?t.byteLength:0){this._tag=0,this._dataType=Cf.unknown,this._init(t,i,r,n)}_init(t,i,r,n){this._data=t,this._dataView=i,this._pos=r,this._end=n}asUnsafe(){return this}clone(){return new rT(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const i=this._decodeVarint();if(this._tag=i>>3,this._dataType=7&i,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;return t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?t:(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?t:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();if(t!==void 0)return t>>>1^-(1&t)|0}getSInt64(){return this._decodeSVarint()}getBool(){const t=this._data[this._pos]!==0;return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getUint32(i+4,!0)*zz;return this._skip(8),r}getSFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getInt32(i+4,!0)*zz;return this._skip(8),r}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),i=this._pos,r=this._toString(this._data,i,i+t);return this._skip(t),r}getBytes(){const t=this._getLength(),i=this._pos,r=this._toBytes(this._data,i,i+t);return this._skip(t),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,i,r,n){const s=this.getMessage(),o=t(s,i,r,n);return s.release(),o}processMessage(t){const i=this.getMessage(),r=t(i);return i.release(),r}getMessage(){const t=this._getLength(),i=rT.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),i}release(){rT.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case Cf.varint:this._decodeVarint();break;case Cf.fixed64:this._skip(8);break;case Cf.delimited:this._skip(this._getLength());break;case Cf.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t}_decodeVarint(){const t=this._data;let i=this._pos,r=0,n=0;if(this._end-i>=10)do{if(n=t[i++],r|=127&n,(128&n)==0||(n=t[i++],r|=(127&n)<<7,(128&n)==0)||(n=t[i++],r|=(127&n)<<14,(128&n)==0)||(n=t[i++],r|=(127&n)<<21,(128&n)==0)||(n=t[i++],r+=268435456*(127&n),(128&n)==0)||(n=t[i++],r+=34359738368*(127&n),(128&n)==0)||(n=t[i++],r+=4398046511104*(127&n),(128&n)==0)||(n=t[i++],r+=562949953421312*(127&n),(128&n)==0)||(n=t[i++],r+=72057594037927940*(127&n),(128&n)==0)||(n=t[i++],r+=9223372036854776e3*(127&n),(128&n)==0))break;throw new Error("Varint too long!")}while(0);else{let s=1;for(;i!==this._end&&(n=t[i],(128&n)!=0);)++i,r+=(127&n)*s,s*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=n*s}return this._pos=i,r}_decodeSVarint(){const t=this._data;let i=this._pos,r=0,n=0;const s=1&t[i];if(this._end-i>=10)do{if(n=t[i++],r|=127&n,(128&n)==0||(n=t[i++],r|=(127&n)<<7,(128&n)==0)||(n=t[i++],r|=(127&n)<<14,(128&n)==0)||(n=t[i++],r|=(127&n)<<21,(128&n)==0)||(n=t[i++],r+=268435456*(127&n),(128&n)==0)||(n=t[i++],r+=34359738368*(127&n),(128&n)==0)||(n=t[i++],r+=4398046511104*(127&n),(128&n)==0)||(n=t[i++],r+=562949953421312*(127&n),(128&n)==0)||(n=t[i++],r+=72057594037927940*(127&n),(128&n)==0)||(n=t[i++],r+=9223372036854776e3*(127&n),(128&n)==0))break;throw new Error("Varint too long!")}while(0);else{let o=1;for(;i!==this._end&&(n=t[i],(128&n)!=0);)++i,r+=(127&n)*o,o*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=n*o}return this._pos=i,s?-(r+1)/2:r/2}_getLength(){if(this._dataType!==Cf.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,i,r){if((r=Math.min(this._end,r))-i>L4e){const o=t.subarray(i,r);return k4e.decode(o)}let n="",s="";for(let o=i;o<r;++o){const a=t[o];128&a?s+="%"+a.toString(16):(n+=decodeURIComponent(s)+String.fromCharCode(a),s="")}return s.length&&(n+=decodeURIComponent(s)),n}_toBytes(t,i,r){return r=Math.min(this._end,r),new Uint8Array(t.buffer,i,r-i)}};k8.pool=new Am(k8,void 0,e=>{e._data=null,e._dataView=null});let mc=class nT{constructor(t=[],i=[],r=!1){this.lengths=t??[],this.coords=i??[],this.hasIndeterminateRingOrder=r}static fromRect(t){const[i,r,n,s]=t,o=n-i,a=s-r;return new nT([5],[i,r,o,0,0,a,-o,0,0,-a])}get isPoint(){return this.lengths.length===0}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((t,i)=>t+i)}forEachVertex(t){let i=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const n=this.lengths[r];for(let s=0;s<n;s++)t(this.coords[2*(s+i)],this.coords[2*(s+i)+1]);i+=n}}clone(t){return t?(t.set(this.coords),new nT(this.lengths.slice(),t,this.hasIndeterminateRingOrder)):new nT(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}},gm=class ene{constructor(t=null,i={},r,n){this.geometry=t,this.attributes=i,this.centroid=r,this.objectId=n,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const t=new ene(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}};function P4e(e){return!(Re(e.geometry)||!e.geometry.coords||!e.geometry.coords.length)}let jlt=class extends gm{},tne=class ine{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new ine;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}};const rne=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let Vlt=class{constructor(t){this._options=t,this.geometryTypes=rne,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new tne}prepareFeatures(t){this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&this._vertexDimension++}finishFeatureResult(t){if(!t||!t.features||!t.hasZ||!this._options.sourceSpatialReference||!t.spatialReference||vn(t.spatialReference,this._options.sourceSpatialReference)||t.spatialReference.vcsWkid)return;const i=_b(this._options.sourceSpatialReference)/_b(t.spatialReference);if(i!==1)for(const r of t.features){if(!P4e(r))continue;const n=r.geometry.coords;for(let s=2;s<n.length;s+=3)n[s]*=i}}addFeature(t,i){t.features.push(i)}createFeature(){return new gm}createSpatialReference(){return{wkid:0}}createGeometry(){return new mc}addField(t,i){t.fields.push(i)}allocateCoordinates(t){t.coords.length=t.lengths.reduce((i,r)=>i+r,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(t,i){t.coords[this._coordinatePtr++]=i}addCoordinatePoint(t,i){t.coords.push(i)}addLength(t,i){t.lengths.push(i)}addQueryGeometry(t,i){t.queryGeometry=i.queryGeometry,t.queryGeometryType=i.queryGeometryType}createPointGeometry(){return new mc}};const Gz=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],qz=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],Hz=["upperLeft","lowerLeft"];function Wz(e){return e>=Gz.length?null:Gz[e]}function N4e(e){return e>=qz.length?null:qz[e]}function Jz(e){return e>=Hz.length?null:Hz[e]}function Zz(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function F4e(e,t,i){const n=e.asUnsafe(),s=t.createPointGeometry(i);for(;n.next();)switch(n.tag()){case 3:{const o=n.getUInt32(),a=n.pos()+o;let l=0;for(;n.pos()<a;)t.addCoordinatePoint(s,n.getSInt64(),l++);break}default:n.skip()}return s}function D4e(e,t,i){const s=e.asUnsafe(),o=t.createGeometry(i),a=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;s.next();)switch(s.tag()){case 2:{const l=s.getUInt32(),u=s.pos()+l;let c=0;for(;s.pos()<u;)t.addLength(o,s.getUInt32(),c++);break}case 3:{const l=s.getUInt32(),u=s.pos()+l;let c=0;for(t.allocateCoordinates(o);s.pos()<u;)t.addCoordinate(o,s.getSInt64(),c),c++,c===a&&(c=0);break}default:s.skip()}return o}function j4e(e){const n=e.asUnsafe(),s=new mc;let o="esriGeometryPoint";for(;n.next();)switch(n.tag()){case 2:{const a=n.getUInt32(),l=n.pos()+a;for(;n.pos()<l;)s.lengths.push(n.getUInt32());break}case 3:{const a=n.getUInt32(),l=n.pos()+a;for(;n.pos()<l;)s.coords.push(n.getSInt64());break}case 1:o=rne[n.getEnum()];break;default:n.skip()}return{queryGeometry:s,queryGeometryType:o}}function U4e(e){const c=e.asUnsafe();for(;c.next();)switch(c.tag()){case 1:return c.getString();case 2:return c.getFloat();case 3:return c.getDouble();case 4:return c.getSInt32();case 5:return c.getUInt32();case 6:return c.getInt64();case 7:return c.getUInt64();case 8:return c.getSInt64();case 9:return c.getBool();default:return c.skip(),null}return null}function V4e(e){const a=e.asUnsafe(),l={type:Wz(0)};for(;a.next();)switch(a.tag()){case 1:l.name=a.getString();break;case 2:l.type=Wz(a.getEnum());break;case 3:l.alias=a.getString();break;case 4:l.sqlType=N4e(a.getEnum());break;case 5:a.skip();break;case 6:l.defaultValue=a.getString();break;default:a.skip()}return l}function B4e(e){const r={},n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:r.name=n.getString();break;case 2:r.isSystemMaintained=n.getBool();break;default:n.skip()}return r}function z4e(e,t,i,r){const a=t.createFeature(i);let l=0;for(;e.next();)switch(e.tag()){case 1:{const u=r[l++].name;a.attributes[u]=e.processMessage(U4e);break}case 2:a.geometry=e.processMessageWithArgs(D4e,t,i);break;case 4:a.centroid=e.processMessageWithArgs(F4e,t,i);break;default:e.skip()}return a}function G4e(e){const s=[1,1,1,1],o=e.asUnsafe();for(;o.next();)switch(o.tag()){case 1:s[0]=o.getDouble();break;case 2:s[1]=o.getDouble();break;case 4:s[2]=o.getDouble();break;case 3:s[3]=o.getDouble();break;default:o.skip()}return s}function q4e(e){const s=[0,0,0,0],o=e.asUnsafe();for(;o.next();)switch(o.tag()){case 1:s[0]=o.getDouble();break;case 2:s[1]=o.getDouble();break;case 4:s[2]=o.getDouble();break;case 3:s[3]=o.getDouble();break;default:o.skip()}return s}function H4e(e){const n={originPosition:Jz(0)},s=e.asUnsafe();for(;s.next();)switch(s.tag()){case 1:n.originPosition=Jz(s.getEnum());break;case 2:n.scale=s.processMessage(G4e);break;case 3:n.translate=s.processMessage(q4e);break;default:s.skip()}return n}function W4e(e){const n={},s=e.asUnsafe();for(;s.next();)switch(s.tag()){case 1:n.shapeAreaFieldName=s.getString();break;case 2:n.shapeLengthFieldName=s.getString();break;case 3:n.units=s.getString();break;default:s.skip()}return n}function J4e(e,t){const a=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:a.wkid=e.getUInt32();break;case 5:a.wkt=e.getString();break;case 2:a.latestWkid=e.getUInt32();break;case 3:a.vcsWkid=e.getUInt32();break;case 4:a.latestVcsWkid=e.getUInt32();break;default:e.skip()}return a}function Z4e(e,t){const v=t.createFeatureResult(),b=e.asUnsafe();v.geometryType=Zz(t,0);let x=!1;for(;b.next();)switch(b.tag()){case 1:v.objectIdFieldName=b.getString();break;case 3:v.globalIdFieldName=b.getString();break;case 4:v.geohashFieldName=b.getString();break;case 5:v.geometryProperties=b.processMessage(W4e);break;case 7:v.geometryType=Zz(t,b.getEnum());break;case 8:v.spatialReference=b.processMessageWithArgs(J4e,t);break;case 10:v.hasZ=b.getBool();break;case 11:v.hasM=b.getBool();break;case 12:v.transform=b.processMessage(H4e);break;case 9:{const S=b.getBool();v.exceededTransferLimit=S;break}case 13:t.addField(v,b.processMessage(V4e));break;case 15:x||(t.prepareFeatures(v),x=!0),t.addFeature(v,b.processMessageWithArgs(z4e,t,v,v.fields));break;case 2:v.uniqueIdField=b.processMessage(B4e);break;default:b.skip()}return t.finishFeatureResult(v),v}function Y4e(e,t){const n={};let s=null;for(;e.next();)switch(e.tag()){case 4:s=e.processMessageWithArgs(j4e);break;case 1:n.featureResult=e.processMessageWithArgs(Z4e,t);break;default:e.skip()}return ee(s)&&n.featureResult&&t.addQueryGeometry(n,s),n}function K4e(e,t){try{const r=new k8(new Uint8Array(e),new DataView(e)),n={};for(;r.next();)r.tag()===2?n.queryResult=r.processMessageWithArgs(Y4e,t):r.skip();return n}catch(i){throw new Ce("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}function Q4e(e,t){const i=K4e(e,t),r=i.queryResult.featureResult,n=i.queryResult.queryGeometry,s=i.queryResult.queryGeometryType;if(r&&r.features&&r.features.length&&r.objectIdFieldName){const o=r.objectIdFieldName;for(const a of r.features)a.attributes&&(a.objectId=a.attributes[o])}return r&&(r.queryGeometry=n,r.queryGeometryType=s),r}const Yz="Layer does not support extent calculation.";function X4e(e,t){if(t&&e.type==="extent")return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&e.type==="point")return`${e.x},${e.y}`;const i=e.toJSON();return delete i.spatialReference,JSON.stringify(i)}function eCe(e,t){const i=e.geometry,r=e.toJSON();delete r.compactGeometryEnabled,delete r.defaultSpatialReferenceEnabled;const n=r;let s,o,a;if(ee(i)&&(o=i.spatialReference,a=i.spatialReference.wkid||JSON.stringify(i.spatialReference),n.geometryType=bc(i),n.geometry=X4e(i,e.compactGeometryEnabled),n.inSR=a),r.groupByFieldsForStatistics&&(n.groupByFieldsForStatistics=r.groupByFieldsForStatistics.join(",")),r.objectIds&&(n.objectIds=r.objectIds.join(",")),r.orderByFields&&(n.orderByFields=r.orderByFields.join(",")),!r.outFields||!r.returnDistinctValues&&(t?.returnCountOnly||t?.returnExtentOnly||t?.returnIdsOnly)?delete n.outFields:r.outFields.includes("*")?n.outFields="*":n.outFields=r.outFields.join(","),r.outSR?(n.outSR=r.outSR.wkid||JSON.stringify(r.outSR),s=e.outSpatialReference):i&&(r.returnGeometry||r.returnCentroid)&&(n.outSR=n.inSR,s=o),r.returnGeometry&&delete r.returnGeometry,r.outStatistics&&(n.outStatistics=JSON.stringify(r.outStatistics)),r.fullText&&(n.fullText=JSON.stringify(r.fullText)),r.pixelSize&&(n.pixelSize=JSON.stringify(r.pixelSize)),r.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&ee(o)&&ee(e.quantizationParameters)&&ee(e.quantizationParameters.extent)&&o.equals(e.quantizationParameters.extent.spatialReference)&&delete r.quantizationParameters.extent.spatialReference,n.quantizationParameters=JSON.stringify(r.quantizationParameters)),r.parameterValues&&(n.parameterValues=JSON.stringify(r.parameterValues)),r.rangeValues&&(n.rangeValues=JSON.stringify(r.rangeValues)),r.dynamicDataSource&&(n.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r.timeExtent){const l=r.timeExtent,{start:u,end:c}=l;u==null&&c==null||(n.time=u===c?u:`${u??"null"},${c??"null"}`),delete r.timeExtent}return e.defaultSpatialReferenceEnabled&&ee(o)&&ee(s)&&o.equals(s)&&(n.defaultSR=n.inSR,delete n.inSR,delete n.outSR),n}async function tCe(e,t,i,r){const n=ee(t.timeExtent)&&t.timeExtent.isEmpty?{data:{features:[]}}:await S3(e,t,"json",r);return yP(t,i,n.data),n}async function iCe(e,t,i,r){if(ee(t.timeExtent)&&t.timeExtent.isEmpty)return{data:i.createFeatureResult()};const n=await rCe(e,t,r),s=n;return s.data=Q4e(n.data,i),s}function rCe(e,t,i){return S3(e,t,"pbf",i)}function nCe(e,t,i){return ee(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):S3(e,t,"json",i,{returnIdsOnly:!0})}function sCe(e,t,i){return ee(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):S3(e,t,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}function oCe(e,t,i){return ee(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):S3(e,t,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}).then(r=>{const n=r.data;if(n.hasOwnProperty("extent"))return r;if(n.features)throw new Error(Yz);if(n.hasOwnProperty("count"))throw new Error(Yz);return r})}function S3(e,t,i,r={},n={}){const s=typeof e=="string"?Ln(e):e,o=t.geometry?[t.geometry]:[];return r.responseType=i==="pbf"?"array-buffer":"json",Z0(o,null,r).then(a=>{const l=a&&a[0];ee(l)&&((t=t.clone()).geometry=l);const u=Xre({...s.query,f:i,...n,...eCe(t,n)});return St(p0(s.path,"query"),{...r,query:{...u,...r.query}})})}async function sT(e,t,i){const r=await nne(e,t,i);return z0.fromJSON(r)}async function nne(e,t,i){const r=Hs(e),n={...i},s=On.from(t),{data:o}=await tCe(r,s,s.sourceSpatialReference,n);return o}function Gs(e,t){return e?t?4:3:t?3:2}const kw=et.getLogger("esri.layers.graphics.featureConversionUtils"),sne={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},aCe=(e,t,i,r,n,s)=>{e[i]=n,e[i+1]=s},Kz=(e,t,i,r,n,s)=>{e[i]=n,e[i+1]=s,e[i+2]=t[r+2]},lCe=(e,t,i,r,n,s)=>{e[i]=n,e[i+1]=s,e[i+2]=t[r+3]},uCe=(e,t,i,r,n,s)=>{e[i]=n,e[i+1]=s,e[i+2]=t[r+2],e[i+3]=t[r+3]};function KD(e,t,i,r){if(e){if(i)return t&&r?uCe:Kz;if(t&&r)return lCe}else if(t&&r)return Kz;return aCe}function cO({scale:e,translate:t},i){return Math.round((i-t[0])/e[0])}function hO({scale:e,translate:t},i){return Math.round((t[1]-i)/e[1])}function dO({scale:e,translate:t},i,r){return i*e[r]+t[r]}function zlt(e,t,i){return e?t?i?e9(e):QD(e):i?XD(e):L4(e):null}function L4(e){const t=e.coords;return{x:t[0],y:t[1]}}function one(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function QD(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function cCe(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function XD(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function hCe(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function e9(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function dCe(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function pCe(e,t,i,r){let n=L4;i&&r?n=e9:i?n=QD:r&&(n=XD);for(const s of t){const{geometry:o,attributes:a}=s,l=ee(o)?n(o):null;e.push({attributes:a,geometry:l})}return e}function t9(e,t){return e&&t?dCe:e?cCe:t?hCe:one}function ane(e,t,i,r,n){const s=t9(i,r);for(const{geometry:o,attributes:a}of t){const l=ee(o)?s(new mc,o):null;e.push(new gm(l,a,null,n?a[n]:void 0))}return e}function Glt(e,t,i=t9(t.z!=null,t.m!=null)){return i(e,t)}function fCe(e,t,i,r){for(const{geometry:n,attributes:s}of t)e.push({attributes:s,geometry:ee(n)?lne(n,i,r):null});return e}function lne(e,t,i){if(Re(e))return null;const r=Gs(t,i),n=[];for(let s=0;s<e.coords.length;s+=r){const o=[];for(let a=0;a<r;a++)o.push(e.coords[s+a]);n.push(o)}return t?i?{points:n,hasZ:t,hasM:i}:{points:n,hasZ:t}:i?{points:n,hasM:i}:{points:n}}function une(e,t,i,r,n){const s=Gs(i,r);for(const{geometry:o,attributes:a}of t){const l=ee(o)?cne(new mc,o,s):null;e.push(new gm(l,a,null,n?a[n]:void 0))}return e}function cne(e,t,i=Gs(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const r=e.coords;let n=0;for(const s of t.points)for(let o=0;o<i;o++)r[n++]=s[o];return e}function mCe(e,t,i,r){for(const{geometry:n,attributes:s}of t)e.push({attributes:s,geometry:ee(n)?hne(n,i,r):null});return e}function hne(e,t,i){if(!e)return null;const r=Gs(t,i),{coords:n,lengths:s}=e,o=[];let a=0;for(const l of s){const u=[];for(let c=0;c<l;c++){const d=[];for(let f=0;f<r;f++)d.push(n[a++]);u.push(d)}o.push(u)}return t?i?{paths:o,hasZ:t,hasM:i}:{paths:o,hasZ:t}:i?{paths:o,hasM:i}:{paths:o}}function dne(e,t,i,r,n){const s=Gs(i,r);for(const{geometry:o,attributes:a}of t){const l=ee(o)?pne(new mc,o,s):null;e.push(new gm(l,a,null,n?a[n]:void 0))}return e}function pne(e,t,i=Gs(t.hasZ,t.hasM)){const{lengths:r,coords:n}=e;let s=0;for(const o of t.paths){for(const a of o)for(let l=0;l<i;l++)n[s++]=a[l];r.push(o.length)}return e}function yCe(e,t,i,r){for(const{geometry:n,attributes:s,centroid:o}of t){const a=ee(n)?fne(n,i,r):null;if(ee(o)){const l=L4(o);e.push({attributes:s,centroid:l,geometry:a})}else e.push({attributes:s,geometry:a})}return e}function fne(e,t,i){if(!e)return null;const r=Gs(t,i),{coords:n,lengths:s}=e,o=[];let a=0;for(const l of s){const u=[];for(let c=0;c<l;c++){const d=[];for(let f=0;f<r;f++)d.push(n[a++]);u.push(d)}o.push(u)}return t?i?{rings:o,hasZ:t,hasM:i}:{rings:o,hasZ:t}:i?{rings:o,hasM:i}:{rings:o}}function mne(e,t,i,r,n){for(const{geometry:s,centroid:o,attributes:a}of t){const l=ee(s)?yne(new mc,s,i,r):null,u=n?a[n]:void 0;ee(o)?e.push(new gm(l,a,one(new mc,o),u)):e.push(new gm(l,a,null,u))}return e}function yne(e,t,i=t.hasZ,r=t.hasM){return gCe(e,t.rings,i,r),e}function gCe(e,t,i,r){const n=Gs(i,r),{lengths:s,coords:o}=e;let a=0;Hd(e);for(const l of t){for(const u of l)for(let c=0;c<n;c++)o[a++]=u[c];s.push(l.length)}return e}const sb=[],Sx=[];function qlt(e,t,i,r,n){sb[0]=e;const[s]=gne(Sx,sb,t,i,r,n);return yc(sb),yc(Sx),s}function gne(e,t,i,r,n,s){if(yc(e),!i){for(const o of t){const a=s?o.attributes[s]:void 0;e.push(new gm(null,o.attributes,null,a))}return e}switch(i){case"esriGeometryPoint":return ane(e,t,r,n,s);case"esriGeometryMultipoint":return une(e,t,r,n,s);case"esriGeometryPolyline":return dne(e,t,r,n,s);case"esriGeometryPolygon":return mne(e,t,r,n,s);default:kw.error("convertToFeatureSet:unknown-geometry",new Ce(`Unable to parse unknown geometry type '${i}'`)),yc(e)}return e}function Hlt(e,t,i,r,n,s){const o=e.length;switch(i){case"esriGeometryPoint":ane(e,t,r,n,s);break;case"esriGeometryMultipoint":une(e,t,r,n,s);break;case"esriGeometryPolyline":dne(e,t,r,n,s);break;case"esriGeometryPolygon":mne(e,t,r,n,s);break;default:kw.error("convertToFeatureSet:unknown-geometry",new Ce(`Unable to parse unknown geometry type '${i}'`))}for(let a=0;a<t.length;a++)e[a+o].geometryType=i,e[a+o].insertAfter=t[a].insertAfter,e[a+o].groupId=t[a].groupId;return e}function Wlt(e,t,i,r){Sx[0]=e,bne(sb,Sx,t,i,r);const n=sb[0];return yc(sb),yc(Sx),n}function Jlt(e,t,i){if(Re(e))return null;const r=new mc;return"hasZ"in e&&t==null&&(t=e.hasZ),"hasM"in e&&i==null&&(i=e.hasM),vF(e)?t9(t??e.z!=null,i??e.m!=null)(r,e):Wg(e)?yne(r,e,t,i):bF(e)?pne(r,e,Gs(t,i)):gF(e)?cne(r,e,Gs(t,i)):void kw.error("convertFromGeometry:unknown-geometry",new Ce(`Unable to parse unknown geometry type '${e}'`))}function vne(e,t,i,r){const n=e&&("coords"in e?e:e.geometry);if(Re(n))return null;switch(t){case"esriGeometryPoint":{let s=L4;return i&&r?s=e9:i?s=QD:r&&(s=XD),s(n)}case"esriGeometryMultipoint":return lne(n,i,r);case"esriGeometryPolyline":return hne(n,i,r);case"esriGeometryPolygon":return fne(n,i,r);default:return kw.error("convertToGeometry:unknown-geometry",new Ce(`Unable to parse unknown geometry type '${t}'`)),null}}function vCe(e,t){for(const i of t)e.push({attributes:i.attributes});return e}function bne(e,t,i,r,n){if(yc(e),Re(i))return vCe(e,t);switch(i){case"esriGeometryPoint":return pCe(e,t,r,n);case"esriGeometryMultipoint":return fCe(e,t,r,n);case"esriGeometryPolyline":return mCe(e,t,r,n);case"esriGeometryPolygon":return yCe(e,t,r,n);default:kw.error("convertToFeatureSet:unknown-geometry",new Ce(`Unable to parse unknown geometry type '${i}'`))}return e}function Zlt(e){const{objectIdFieldName:t,spatialReference:i,transform:r,fields:n,hasM:s,hasZ:o,features:a,geometryType:l,exceededTransferLimit:u,uniqueIdField:c,queryGeometry:d,queryGeometryType:f}=e,m={features:bne([],a,l,o,s),fields:n,geometryType:l,objectIdFieldName:t,spatialReference:i,uniqueIdField:c,queryGeometry:vne(d,f,!1,!1)};return r&&(m.transform=r),u&&(m.exceededTransferLimit=u),s&&(m.hasM=s),o&&(m.hasZ=o),m}function Ylt(e,t){const i=new tne,{hasM:r,hasZ:n,features:s,objectIdFieldName:o,spatialReference:a,geometryType:l,exceededTransferLimit:u,transform:c,fields:d}=e;return d&&(i.fields=d),i.geometryType=l??null,i.objectIdFieldName=o??t??null,i.spatialReference=a??null,i.objectIdFieldName?(s&&gne(i.features,s,l,n,r,i.objectIdFieldName),u&&(i.exceededTransferLimit=u),r&&(i.hasM=r),n&&(i.hasZ=n),c&&(i.transform=c),i):(kw.error(new Ce("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),i)}function Klt(e){const{transform:t,features:i,hasM:r,hasZ:n}=e;if(!t)return e;for(const s of i)ee(s.geometry)&&P8(s.geometry,s.geometry,r,n,t),ee(s.centroid)&&P8(s.centroid,s.centroid,r,n,t);return e.transform=null,e}function Qlt(e,t){const{geometryType:i,features:r,hasM:n,hasZ:s}=t;if(!e)return t;for(let o=0;o<r.length;o++){const a=r[o],l=a.weakClone();l.geometry=new mc,Qz(l.geometry,a.geometry,n,s,i,e),a.centroid&&(l.centroid=new mc,Qz(l.centroid,a.centroid,n,s,"esriGeometryPoint",e)),r[o]=l}return t.transform=e,t}function Qz(e,t,i,r,n,s,o=i,a=r){if(Hd(e),Re(t)||!t.coords.length)return null;const l=sne[n],{coords:u,lengths:c}=t,d=Gs(i,r),f=Gs(i&&o,r&&a),m=KD(i,r,o,a);if(!c.length)return m(e.coords,u,0,0,cO(s,u[0]),hO(s,u[1])),Hd(e,d,0),e;let g,v,b,x,S=0,T=0,_=T;for(const M of c){if(M<l)continue;let I=0;T=_,b=g=cO(s,u[S]),x=v=hO(s,u[S+1]),m(e.coords,u,T,S,b,x),I++,S+=d,T+=f;for(let $=1;$<M;$++,S+=d)b=cO(s,u[S]),x=hO(s,u[S+1]),b===g&&x===v||(m(e.coords,u,T,S,b-g,x-v),T+=f,I++,g=b,v=x);I>=l&&(e.lengths.push(I),_=T)}return yc(e.coords,_),e.coords.length?e:null}function Xlt(e,t,i,r,n,s,o=i,a=r){if(Hd(e),!t||!t.coords.length)return null;const l=sne[n],{coords:u,lengths:c}=t,d=Gs(i,r),f=Gs(i&&o,r&&a),m=KD(i,r,o,a);if(!c.length)return m(e.coords,u,0,0,u[0],u[1]),Hd(e,d,0),e;let g=0;const v=s*s;for(const b of c){if(b<l){g+=b*d;continue}const x=e.coords.length/f,S=g,T=g+(b-1)*d;m(e.coords,u,e.coords.length,S,u[S],u[S+1]),L8(e.coords,u,d,v,m,S,T),m(e.coords,u,e.coords.length,T,u[T],u[T+1]);const _=e.coords.length/f-x;_>=l?e.lengths.push(_):yc(e.coords,x*f),g+=b*d}return e.coords.length?e:null}function bCe(e,t,i,r){const n=e[t],s=e[t+1],o=e[i],a=e[i+1],l=e[r],u=e[r+1];let c=o,d=a,f=l-c,m=u-d;if(f!==0||m!==0){const g=((n-c)*f+(s-d)*m)/(f*f+m*m);g>1?(c=l,d=u):g>0&&(c+=f*g,d+=m*g)}return f=n-c,m=s-d,f*f+m*m}function L8(e,t,i,r,n,s,o){let a,l=r,u=0;for(let c=s+i;c<o;c+=i)a=bCe(t,c,s,o),a>l&&(u=c,l=a);l>r&&(u-s>i&&L8(e,t,i,r,n,s,u),n(e,t,e.length,u,t[u],t[u+1]),o-u>i&&L8(e,t,i,r,n,u,o))}function eut(e,t,i,r){if(Re(t)||!t.coords||!t.coords.length)return null;const n=Gs(i,r);let s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;if(t&&t.coords){const u=t.coords;for(let c=0;c<u.length;c+=n){const d=u[c],f=u[c+1];s=Math.min(s,d),a=Math.max(a,d),o=Math.min(o,f),l=Math.max(l,f)}}return Jk(e)?Lbe(e,s,o,a,l):_be(s,o,a,l,e),e}function P8(e,t,i,r,n){const{coords:s,lengths:o}=t,a=Gs(i,r);if(!s.length)return e!==t&&Hd(e),e;Wf(n);const{originPosition:l,scale:u,translate:c}=n,d=_Ce;d.originPosition=l;const f=d.scale;f[0]=u[0]??1,f[1]=-(u[1]??1),f[2]=u[2]??1,f[3]=u[3]??1;const m=d.translate;if(m[0]=c[0]??0,m[1]=c[1]??0,m[2]=c[2]??0,m[3]=c[3]??0,!o.length){for(let v=0;v<a;++v)e.coords[v]=dO(d,s[v],v);return e!==t&&Hd(e,a,0),e}let g=0;for(let v=0;v<o.length;v++){const b=o[v];e.lengths[v]=b;for(let T=0;T<a;++T)e.coords[g+T]=dO(d,s[g+T],T);let x=e.coords[g],S=e.coords[g+1];g+=a;for(let T=1;T<b;T++,g+=a){x+=s[g]*f[0],S+=s[g+1]*f[1],e.coords[g]=x,e.coords[g+1]=S;for(let _=2;_<a;++_)e.coords[g+_]=dO(d,s[g+_],_)}}return e!==t&&Hd(e,s.length,o.length),e}function tut(e,t,i,r,n,s){if(Hd(e),e.lengths.push(...t.lengths),i===n&&r===s)for(let o=0;o<t.coords.length;o++)e.coords.push(t.coords[o]);else{const o=Gs(i,r),a=KD(i,r,n,s),l=t.coords;for(let u=0;u<l.length;u+=o)a(e.coords,l,e.coords.length,u,l[u],l[u+1])}return e}function wCe(e,t,i,r){let n=0,s=e[r*t],o=e[r*(t+1)];for(let a=1;a<i;a++){const l=s+e[r*(t+a)],u=o+e[r*(t+a)+1],c=(l-s)*(u+o);s=l,o=u,n+=c}return .5*n}function iut(e,t){const{coords:i,lengths:r}=e;let n=0,s=0;for(let o=0;o<r.length;o++){const a=r[o];s+=wCe(i,n,a,t),n+=a}return Math.abs(s)}function rut(e,t){if(Re(e))return null;const i=e.clone(),r=e.coords,n=e.lengths;let s=0;for(let o=0;o<n.length;o++){const a=n[o];let l=r[t*s],u=r[t*s+1];for(let c=1;c<a;c++){const d=l+r[t*(s+c)],f=u+r[t*(s+c)+1];i.coords[t*(s+c)]=d,i.coords[t*(s+c)+1]=f,l=d,u=f}s+=a}return i}function Hd(e,t=0,i=0){yc(e.lengths,i),yc(e.coords,t)}function yc(e,t=0){e.length!==t&&(e.length=t)}const _Ce={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};function xCe(e){const{exifInfo:t,exifName:i,tagName:r}=e;if(!t||!i||!r)return null;const n=t.find(s=>s.name===i);return n?SCe({tagName:r,tags:n.tags}):null}function SCe(e){const{tagName:t,tags:i}=e;if(!i||!t)return null;const r=i.find(n=>n.name===t);return r&&r.value||null}var N8;const ECe={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let ra=N8=class extends Je{constructor(e){super(e),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:e}=this,t=xCe({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:e});return ECe[t]||null}clone(){return new N8({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};h([p({type:String})],ra.prototype,"contentType",void 0),h([p()],ra.prototype,"exifInfo",void 0),h([p({readOnly:!0})],ra.prototype,"orientationInfo",null),h([p({type:wi})],ra.prototype,"id",void 0),h([p({type:String})],ra.prototype,"globalId",void 0),h([p({type:String})],ra.prototype,"keywords",void 0),h([p({type:String})],ra.prototype,"name",void 0),h([p({json:{read:!1}})],ra.prototype,"parentGlobalId",void 0),h([p({json:{read:!1}})],ra.prototype,"parentObjectId",void 0),h([p({type:wi})],ra.prototype,"size",void 0),h([p({json:{read:!1}})],ra.prototype,"url",void 0),ra=N8=h([ce("esri.layers.support.AttachmentInfo")],ra);const MCe=ra;async function wne(e,t,i){const r=Hs(e);return sCe(r,On.from(t),{...i}).then(n=>n.data.count)}async function i9(e,t,i){const r=Hs(e);return nCe(r,On.from(t),{...i}).then(n=>n.data.objectIds)}async function _ne(e,t,i){const r=Hs(e),{renderingRule:n,sourceJSON:s}=t||{},o=n?JSON.stringify(n.rasterFunctionDefinition||n):null,a=gp({...r.query,renderingRule:o,f:"json"}),l=jm(a,i);e=r.path;const u=s||await St(e,l).then(K=>K.data),c=u.hasRasterAttributeTable?St(`${e}/rasterAttributeTable`,l):null,d=u.hasColormap?St(`${e}/colormap`,l):null,f=u.hasHistograms?St(`${e}/histograms`,l):null,m=u.currentVersion>=10.3?St(`${e}/keyProperties`,l):null,g=u.hasMultidimensions?St(`${e}/multidimensionalInfo`,l):null,v=await Promise.allSettled([c,d,f,m,g]);let b=null;if(u.minValues&&u.minValues.length===u.bandCount){b=[];for(let K=0;K<u.minValues.length;K++)b.push({min:u.minValues[K],max:u.maxValues[K],avg:u.meanValues[K],stddev:u.stdvValues[K]})}const x=Kt.fromJSON(u.extent),S=Math.ceil(x.width/u.pixelSizeX-.1),T=Math.ceil(x.height/u.pixelSizeY-.1),_=Et.fromJSON(u.spatialReference||u.extent.spatialReference),M=v[0].status==="fulfilled"&&v[0].value?z0.fromJSON(v[0].value.data):null,I=v[1].status==="fulfilled"?v[1].value?.data.colormap:null,$=v[2].status==="fulfilled"?v[2].value?.data.histograms:null,L=v[3].status==="fulfilled"?v[3].value?.data??{}:{},B=v[4].status==="fulfilled"?v[4].value?.data.multidimensionalInfo:null;B?.variables?.length&&B.variables.forEach(K=>{K.statistics?.length&&K.statistics.forEach(Q=>{Q.avg=Q.mean,Q.stddev=Q.standardDeviation})});const{defaultVariable:z,serviceDataType:W}=u;z&&z!==L.DefaultVariable&&(L.DefaultVariable=z),W&&W.includes("esriImageServiceDataTypeVector")&&!W.includes(L.DataType)&&(L.DataType=W.replace("esriImageServiceDataType",""));let J=u.noDataValue;return u.noDataValues?.length&&u.noDataValues.some(K=>K!==J)&&(J=u.noDataValues),new x3({width:S,height:T,bandCount:u.bandCount,extent:Kt.fromJSON(u.extent),spatialReference:_,pixelSize:new At({x:u.pixelSizeX,y:u.pixelSizeY,spatialReference:_}),pixelType:u.pixelType.toLowerCase(),statistics:b,attributeTable:M,colormap:I,histograms:$,keyProperties:L,noDataValue:J,multidimensionalInfo:B})}function ICe(e,t,i){return _ne(e,{sourceJSON:t},i)}function TCe(e,t,i){return _ne(e,{renderingRule:t},i)}async function ACe(e,t,i){const r=Hs(e),n=gp({...r?.query,f:"json"}),s=jm(n,i),o=`${r?.path}/${t}/info`,a=St(`${o}`,s),l=St(`${o}/keyProperties`,s),u=await Promise.allSettled([a,l]),c=u[0].status==="fulfilled"?u[0].value.data:null,d=u[1].status==="fulfilled"?u[1].value.data:null;let f=null;c.statistics?.length&&(f=c.statistics.map(_=>({min:_[0],max:_[1],avg:_[2],stddev:_[3]})));const m=Kt.fromJSON(c.extent),g=Math.ceil(m.width/c.pixelSizeX-.1),v=Math.ceil(m.height/c.pixelSizeY-.1),b=m.spatialReference,x=new At({x:c.pixelSizeX,y:c.pixelSizeY,spatialReference:b}),S=c.histograms?.length?c.histograms:null,T=new Mre({origin:c.origin,blockWidth:c.blockWidth,blockHeight:c.blockHeight,firstPyramidLevel:c.firstPyramidLevel,maximumPyramidLevel:c.maxPyramidLevel});return new x3({width:g,height:v,bandCount:c.bandCount,extent:m,spatialReference:b,pixelSize:x,pixelType:c.pixelType.toLowerCase(),statistics:f,histograms:S,keyProperties:d,storageInfo:T})}var F8;let Xy=F8=class extends Je{constructor(e){super(e),this.angleNames=null,this.point=null,this.spatialReference=null,this.rasterId=null}clone(){return new F8(Le({angleNames:this.angleNames,point:this.point,spatialReference:this.spatialReference,rasterId:this.rasterId}))}};h([p({type:[String],json:{name:"angleName",write:!0}})],Xy.prototype,"angleNames",void 0),h([p({type:At,json:{write:!0}})],Xy.prototype,"point",void 0),h([p({type:Et,json:{write:!0}})],Xy.prototype,"spatialReference",void 0),h([p({type:wi,json:{write:!0}})],Xy.prototype,"rasterId",void 0),Xy=F8=h([ce("esri.rest.support.ImageAngleParameters")],Xy);const CCe=Xy,lu=new ti({esriMensurationPoint:"point",esriMensurationCentroid:"centroid",esriMensurationDistanceAndAngle:"distance-and-angle",esriMensurationAreaAndPerimeter:"area-and-perimeter",esriMensurationHeightFromBaseAndTop:"base-and-top",esriMensurationHeightFromBaseAndTopShadow:"base-and-top-shadow",esriMensurationHeightFromTopAndTopShadow:"top-and-top-shadow",esriMensurationPoint3D:"point-3D",esriMensurationCentroid3D:"centroid-3D",esriMensurationDistanceAndAngle3D:"distance-and-angle-3D",esriMensurationAreaAndPerimeter3D:"area-and-perimeter-3D"});let Kl=class extends Je{constructor(){super(...arguments),this.type=null,this.measureOperation=null,this.mosaicRule=null,this.renderingRule=null,this.pixelSize=null,this.raster=void 0}};h([p()],Kl.prototype,"type",void 0),h([p({type:lu.apiValues,json:{read:lu.read,write:lu.write}})],Kl.prototype,"measureOperation",void 0),h([p({type:ll,json:{write:!0}})],Kl.prototype,"mosaicRule",void 0),h([p({type:zi,json:{write:!0}})],Kl.prototype,"renderingRule",void 0),h([p({type:At,json:{write:!0}})],Kl.prototype,"pixelSize",void 0),h([p({json:{write:!0}})],Kl.prototype,"raster",void 0),Kl=h([ce("esri.rest.support.BaseImageMeasureParameters")],Kl);var D8;let bd=D8=class extends Kl{constructor(){super(...arguments),this.type="area-perimeter",this.geometry=null,this.is3D=!1,this.linearUnit="meters",this.areaUnit="square-meters"}writeGeometry(e,t,i){e!=null&&(t.geometryType=bc(e),t[i]=e.toJSON())}get measureOperation(){return this.is3D?"area-and-perimeter-3D":"area-and-perimeter"}clone(){return new D8(Le({geometry:this.geometry,is3D:this.is3D,linearUnit:this.linearUnit,areaUnit:this.areaUnit,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,raster:this.raster}))}};h([p({types:wc,json:{name:"fromGeometry",read:!0,write:!0}})],bd.prototype,"geometry",void 0),h([it("geometry")],bd.prototype,"writeGeometry",null),h([p({type:lu.apiValues,json:{write:lu.write}})],bd.prototype,"measureOperation",null),h([p({json:{read:!0}})],bd.prototype,"is3D",void 0),h([p({type:String,json:{read:Qd.read,write:Qd.write}})],bd.prototype,"linearUnit",void 0),h([p({type:String,json:{read:Jx.read,write:Jx.write}})],bd.prototype,"areaUnit",void 0),bd=D8=h([ce("esri.rest.support.ImageAreaParameters")],bd);const $Ce=bd;var j8;let Gc=j8=class extends Kl{constructor(){super(...arguments),this.type="distance-angle",this.fromGeometry=null,this.toGeometry=null,this.is3D=!1,this.linearUnit="meters",this.angularUnit="degrees"}writeFromGeometry(e,t,i){e!=null&&(t.geometryType=bc(e),t[i]=e.toJSON())}get measureOperation(){return this.is3D?"distance-and-angle-3D":"distance-and-angle"}clone(){return new j8(Le({fromGeometry:this.fromGeometry,toGeometry:this.toGeometry,is3D:this.is3D,linearUnit:this.linearUnit,angularUnit:this.angularUnit,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,raster:this.raster}))}};h([p({type:At,json:{read:!0,write:!0}})],Gc.prototype,"fromGeometry",void 0),h([it("fromGeometry")],Gc.prototype,"writeFromGeometry",null),h([p({type:At,json:{read:!0,write:!0}})],Gc.prototype,"toGeometry",void 0),h([p({type:lu.apiValues,json:{write:lu.write}})],Gc.prototype,"measureOperation",null),h([p({json:{read:!0}})],Gc.prototype,"is3D",void 0),h([p({type:String,json:{read:Qd.read,write:Qd.write}})],Gc.prototype,"linearUnit",void 0),h([p({type:String,json:{read:iA.read,write:iA.write}})],Gc.prototype,"angularUnit",void 0),Gc=j8=h([ce("esri.rest.support.ImageDistanceParameters")],Gc);const OCe=Gc;var U8;let wd=U8=class extends Kl{constructor(){super(...arguments),this.type="height",this.fromGeometry=null,this.toGeometry=null,this.operationType="base-and-top",this.linearUnit="meters"}writeFromGeometry(e,t,i){e!=null&&(t.geometryType=bc(e),t[i]=e.toJSON())}get measureOperation(){return this.operationType}clone(){return new U8(Le({fromGeometry:this.fromGeometry,toGeometry:this.toGeometry,operationType:this.operationType,linearUnit:this.linearUnit,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,raster:this.raster}))}};h([p({type:At,json:{read:!0}})],wd.prototype,"fromGeometry",void 0),h([it("fromGeometry")],wd.prototype,"writeFromGeometry",null),h([p({type:At,json:{read:!0,write:!0}})],wd.prototype,"toGeometry",void 0),h([p({type:lu.apiValues,json:{write:lu.write}})],wd.prototype,"measureOperation",null),h([p({json:{read:!0}})],wd.prototype,"operationType",void 0),h([p({type:String,json:{read:Qd.read,write:Qd.write}})],wd.prototype,"linearUnit",void 0),wd=U8=h([ce("esri.rest.support.ImageHeightParameters")],wd);const RCe=wd;var V8;let qc=V8=class extends Je{constructor(){super(...arguments),this.geometry=null,this.mosaicRule=null,this.renderingRule=null,this.pixelSize=null,this.raster=void 0,this.timeExtent=null}writeGeometry(e,t,i){e!=null&&(t.geometryType=bc(e),t[i]=e.toJSON())}clone(){return new V8(Le({geometry:this.geometry,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,raster:this.raster,timeExtent:this.timeExtent}))}};h([p({types:wc,json:{read:Il}})],qc.prototype,"geometry",void 0),h([it("geometry")],qc.prototype,"writeGeometry",null),h([p({type:ll,json:{write:!0}})],qc.prototype,"mosaicRule",void 0),h([p({type:zi,json:{write:!0}})],qc.prototype,"renderingRule",void 0),h([p({type:At,json:{write:!0}})],qc.prototype,"pixelSize",void 0),h([p({json:{write:!0}})],qc.prototype,"raster",void 0),h([p({type:ka,json:{read:{source:"time"},write:{target:"time"}}})],qc.prototype,"timeExtent",void 0),qc=V8=h([ce("esri.rest.support.ImageHistogramParameters")],qc);const Xz=qc;var B8;let cn=B8=class extends Je{constructor(){super(...arguments),this.geometry=null,this.renderingRules=null,this.pixelSize=null,this.returnGeometry=!0,this.returnCatalogItems=!0,this.returnPixelValues=!0,this.maxItemCount=null,this.timeExtent=null,this.raster=void 0,this.viewId=void 0,this.processAsMultidimensional=!1}writeGeometry(e,t,i){e!=null&&(t.geometryType=bc(e),t[i]=JSON.stringify(e.toJSON()))}set mosaicRule(e){let t=e;t&&t.mosaicMethod&&(t=ll.fromJSON({...t.toJSON(),mosaicMethod:t.mosaicMethod,mosaicOperation:t.mosaicOperation})),this._set("mosaicRule",t)}writeMosaicRule(e,t,i){e!=null&&(t[i]=JSON.stringify(e.toJSON()))}set renderingRule(e){let t=e;t&&t.rasterFunction&&(t=zi.fromJSON({...t.toJSON(),rasterFunction:t.rasterFunction,rasterFunctionArguments:t.rasterFunctionArguments})),this._set("renderingRule",t)}writeRenderingRule(e,t,i){e!=null&&(t[i]=JSON.stringify(e.toJSON())),e.rasterFunctionDefinition&&(t[i]=JSON.stringify(e.rasterFunctionDefinition))}writeRenderingRules(e,t,i){e!=null&&(t[i]=JSON.stringify(e.map(r=>r.rasterFunctionDefinition||r.toJSON())))}writePixelSize(e,t,i){e!=null&&(t[i]=JSON.stringify(e))}writeTimeExtent(e,t,i){if(e!=null){const r=ee(e.start)?e.start.getTime():null,n=ee(e.end)?e.end.getTime():null;t[i]=r!=null?n!=null?`${r},${n}`:`${r}`:null}}clone(){return new B8(Le({geometry:this.geometry,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,returnPixelValues:this.returnPixelValues,maxItemCount:this.maxItemCount,processAsMultidimensional:this.processAsMultidimensional,raster:this.raster,viewId:this.viewId,timeExtent:this.timeExtent}))}};h([p({json:{write:!0}})],cn.prototype,"geometry",void 0),h([it("geometry")],cn.prototype,"writeGeometry",null),h([p({type:ll,json:{write:!0}})],cn.prototype,"mosaicRule",null),h([it("mosaicRule")],cn.prototype,"writeMosaicRule",null),h([p({type:zi,json:{write:!0}})],cn.prototype,"renderingRule",null),h([it("renderingRule")],cn.prototype,"writeRenderingRule",null),h([p({type:[zi],json:{write:!0}})],cn.prototype,"renderingRules",void 0),h([it("renderingRules")],cn.prototype,"writeRenderingRules",null),h([p({type:At,json:{write:!0}})],cn.prototype,"pixelSize",void 0),h([it("pixelSize")],cn.prototype,"writePixelSize",null),h([p({type:Boolean,json:{write:!0}})],cn.prototype,"returnGeometry",void 0),h([p({type:Boolean,json:{write:!0}})],cn.prototype,"returnCatalogItems",void 0),h([p({type:Boolean,json:{write:!0}})],cn.prototype,"returnPixelValues",void 0),h([p({type:Number,json:{write:!0}})],cn.prototype,"maxItemCount",void 0),h([p({type:ka,json:{write:{target:"time"}}})],cn.prototype,"timeExtent",void 0),h([it("timeExtent")],cn.prototype,"writeTimeExtent",null),h([p({json:{write:!0}})],cn.prototype,"raster",void 0),h([p({json:{write:!0}})],cn.prototype,"viewId",void 0),h([p({type:Boolean,json:{write:!0}})],cn.prototype,"processAsMultidimensional",void 0),cn=B8=h([ce("esri.rest.support.ImageIdentifyParameters")],cn);const eG=cn;var z8;let lv=z8=class extends Je{constructor(){super(...arguments),this.geometries=null,this.rasterId=null}writeGeometry(e,t,i){t.geometries={geometryType:"esriGeometryPoint",geometries:e.map(r=>r.toJSON())}}clone(){return new z8({geometries:this.geometries?.map(e=>e.clone())??[],rasterId:this.rasterId})}};h([p({type:[At],json:{write:!0}})],lv.prototype,"geometries",void 0),h([it("geometries")],lv.prototype,"writeGeometry",null),h([p({type:wi,json:{write:!0}})],lv.prototype,"rasterId",void 0),lv=z8=h([ce("esri.rest.support.ImagePixelLocationParameters")],lv);const kCe=lv;var G8;let eg=G8=class extends Kl{constructor(){super(...arguments),this.type="point",this.geometry=null,this.is3D=!1}writeGeometry(e,t,i){e!=null&&(t.geometryType=bc(e),t[i]=e.toJSON())}get measureOperation(){const{is3D:e,geometry:t}=this;return t.type==="point"?e?"point-3D":"point":e?"centroid-3D":"centroid"}clone(){return new G8(Le({geometry:this.geometry,is3D:this.is3D,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,raster:this.raster}))}};h([p({types:wc,json:{name:"fromGeometry",read:Il}})],eg.prototype,"geometry",void 0),h([it("geometry")],eg.prototype,"writeGeometry",null),h([p({type:lu.apiValues,json:{read:lu.read,write:lu.write}})],eg.prototype,"measureOperation",null),h([p({json:{read:!0}})],eg.prototype,"is3D",void 0),eg=G8=h([ce("esri.rest.support.ImagePointParameters")],eg);const LCe=eg;var q8;let ao=q8=class extends Je{constructor(){super(...arguments),this.geometry=null,this.interpolation="nearest",this.mosaicRule=null,this.outFields=null,this.pixelSize=null,this.returnFirstValueOnly=!0,this.sampleDistance=null,this.sampleCount=null,this.sliceId=null,this.timeExtent=null}writeGeometry(e,t,i){e!=null&&(t.geometryType=bc(e),t[i]=e.toJSON())}set locations(e){if(e?.length){const t=new fw({spatialReference:e[0].spatialReference});t.points=e.map(i=>[i.x,i.y]),this._set("locations",e),this.geometry=t}}clone(){return new q8(Le({geometry:this.geometry,locations:this.locations,interpolation:this.interpolation,mosaicRule:this.mosaicRule,outFields:this.outFields,raster:this.raster,returnFirstValueOnly:this.returnFirstValueOnly,sampleDistance:this.sampleDistance,sampleCount:this.sampleCount,sliceId:this.sliceId,pixelSize:this.pixelSize,timeExtent:this.timeExtent}))}};h([p({types:wc,json:{read:Il}})],ao.prototype,"geometry",void 0),h([it("geometry")],ao.prototype,"writeGeometry",null),h([p()],ao.prototype,"locations",null),h([p({type:String,json:{type:Xf.jsonValues,read:Xf.read,write:Xf.write}})],ao.prototype,"interpolation",void 0),h([p({type:ll,json:{write:!0}})],ao.prototype,"mosaicRule",void 0),h([p({type:[String],json:{write:!0}})],ao.prototype,"outFields",void 0),h([p({type:At,json:{write:!0}})],ao.prototype,"pixelSize",void 0),h([p({type:String,json:{write:!0}})],ao.prototype,"raster",void 0),h([p({type:Boolean,json:{write:!0}})],ao.prototype,"returnFirstValueOnly",void 0),h([p({type:Number,json:{write:!0}})],ao.prototype,"sampleDistance",void 0),h([p({type:Number,json:{write:!0}})],ao.prototype,"sampleCount",void 0),h([p({type:Number,json:{write:!0}})],ao.prototype,"sliceId",void 0),h([p({type:ka,json:{read:{source:"time"},write:{target:"time"}}})],ao.prototype,"timeExtent",void 0),ao=q8=h([ce("esri.rest.support.ImageSampleParameters")],ao);const PCe=ao,Qu=et.getLogger("esri.views.2d.engine.flow.dataUtils"),NCe=10;async function FCe(e,t,i,r){const n=performance.now(),s=DCe(t,i),o=performance.now(),a=UCe(t,s,i.width,i.height),l=performance.now(),u=BCe(a,!0),c=performance.now(),d=e==="Streamlines"?zCe(u,NCe):GCe(u),f=performance.now();return Ze("esri-2d-profiler")&&(Qu.info("I.1","_createFlowFieldFromData (ms)",Math.round(o-n)),Qu.info("I.2","_getStreamlines (ms)",Math.round(l-o)),Qu.info("I.3","createAnimatedLinesData (ms)",Math.round(c-l)),Qu.info("I.4","create{Streamlines|Particles}Mesh (ms)",Math.round(f-c)),Qu.info("I.5","createFlowMesh (ms)",Math.round(f-n)),Qu.info("I.6","Mesh size (bytes)",d.vertexData.buffer.byteLength+d.indexData.buffer.byteLength)),await Promise.resolve(),hr(r),d}function DCe(e,t){const i=VCe(t.data,t.width,t.height,e.smoothing);return e.interpolate?(r,n)=>{const s=Math.floor(r),o=Math.floor(n);if(s<0||s>=t.width)return[0,0];if(o<0||o>=t.height)return[0,0];const a=r-s,l=n-o,u=s,c=o,d=s<t.width-1?s+1:s,f=o<t.height-1?o+1:o,m=i[2*(c*t.width+u)],g=i[2*(c*t.width+d)],v=i[2*(f*t.width+u)],b=i[2*(f*t.width+d)],x=i[2*(c*t.width+u)+1],S=i[2*(c*t.width+d)+1];return[(m*(1-l)+v*l)*(1-a)+(g*(1-l)+b*l)*a,(x*(1-l)+i[2*(f*t.width+u)+1]*l)*(1-a)+(S*(1-l)+i[2*(f*t.width+d)+1]*l)*a]}:(r,n)=>{const s=Math.round(r),o=Math.round(n);return s<0||s>=t.width||o<0||o>=t.height?[0,0]:[i[2*(o*t.width+s)+0],i[2*(o*t.width+s)+1]]}}function jCe(e,t,i,r,n,s,o,a,l){const u=[];let c=i,d=r,f=0,[m,g]=t(c,d);m*=e.velocityScale,g*=e.velocityScale;const v=Math.sqrt(m*m+g*g);let b,x;u.push({x:c,y:d,t:f,speed:v});for(let S=0;S<e.verticesPerLine;S++){let[T,_]=t(c,d);T*=e.velocityScale,_*=e.velocityScale;const M=Math.sqrt(T*T+_*_);if(M<e.minSpeedThreshold)return u;const I=T/M,$=_/M;if(c+=I*e.segmentLength,d+=$*e.segmentLength,f+=e.segmentLength/M,Math.acos(I*b+$*x)>e.maxTurnAngle)return u;if(e.collisions){const L=Math.round(c*l),B=Math.round(d*l);if(L<0||L>o-1||B<0||B>a-1)return u;const z=s[B*o+L];if(z!==-1&&z!==n)return u;s[B*o+L]=n}u.push({x:c,y:d,t:f,speed:M}),b=I,x=$}return u}function UCe(e,t,i,r){const n=[],s=new Z2,o=1/Math.max(e.lineCollisionWidth,1),a=Math.round(i*o),l=Math.round(r*o),u=new Int32Array(a*l);for(let d=0;d<u.length;d++)u[d]=-1;const c=[];for(let d=0;d<r;d+=e.lineSpacing)for(let f=0;f<i;f+=e.lineSpacing)c.push({x:f,y:d,sort:s.getFloat()});c.sort((d,f)=>d.sort-f.sort);for(const{x:d,y:f}of c)if(s.getFloat()<e.density){const m=jCe(e,t,d,f,n.length,u,a,l,o);if(m.length<2)continue;n.push(m)}return n}function VCe(e,t,i,r){if(r===0)return e;const n=Math.round(3*r),s=new Array(2*n+1);let o=0;for(let u=-n;u<=n;u++){const c=Math.exp(-u*u/(r*r));s[u+n]=c,o+=c}for(let u=-n;u<=n;u++)s[u+n]/=o;const a=new Float32Array(e.length);for(let u=0;u<i;u++)for(let c=0;c<t;c++){let d=0,f=0;for(let m=-n;m<=n;m++){if(c+m<0||c+m>=t)continue;const g=s[m+n];d+=g*e[2*(u*t+(c+m))+0],f+=g*e[2*(u*t+(c+m))+1]}a[2*(u*t+c)+0]=d,a[2*(u*t+c)+1]=f}const l=new Float32Array(e.length);for(let u=0;u<t;u++)for(let c=0;c<i;c++){let d=0,f=0;for(let m=-n;m<=n;m++){if(c+m<0||c+m>=i)continue;const g=s[m+n];d+=g*a[2*((c+m)*t+u)+0],f+=g*a[2*((c+m)*t+u)+1]}l[2*(c*t+u)+0]=d,l[2*(c*t+u)+1]=f}return l}function BCe(e,t){const i=new Z2,r=e.reduce((l,u)=>l+u.length,0),n=new Float32Array(4*r),s=new Array(e.length);let o=0,a=0;for(const l of e){const u=o;for(const c of l)n[4*o+0]=c.x,n[4*o+1]=c.y,n[4*o+2]=c.t,n[4*o+3]=c.speed,o++;s[a++]={startVertex:u,numberOfVertices:l.length,totalTime:l[l.length-1].t,timeSeed:t?i.getFloat():0}}return{lineVertices:n,lineDescriptors:s}}function zCe(e,t){const{lineVertices:r,lineDescriptors:n}=e;let s=0,o=0;for(const m of n)s+=2*m.numberOfVertices,o+=6*(m.numberOfVertices-1);const a=new Float32Array(s*9),l=new Uint32Array(o);let u=0,c=0;function d(){l[c++]=u-2,l[c++]=u,l[c++]=u-1,l[c++]=u,l[c++]=u+1,l[c++]=u-1}function f(m,g,v,b,x,S,T,_){const M=u*9;let I=0;a[M+I++]=m,a[M+I++]=g,a[M+I++]=1,a[M+I++]=v,a[M+I++]=S,a[M+I++]=T,a[M+I++]=b/2,a[M+I++]=x/2,a[M+I++]=_,u++,a[M+I++]=m,a[M+I++]=g,a[M+I++]=-1,a[M+I++]=v,a[M+I++]=S,a[M+I++]=T,a[M+I++]=-b/2,a[M+I++]=-x/2,a[M+I++]=_,u++}for(const m of n){const{totalTime:g,timeSeed:v}=m;let b=null,x=null,S=null,T=null,_=null,M=null;for(let I=0;I<m.numberOfVertices;I++){const $=r[4*(m.startVertex+I)+0],L=r[4*(m.startVertex+I)+1],B=r[4*(m.startVertex+I)+2],z=r[4*(m.startVertex+I)+3];let W=null,J=null,K=null,Q=null;if(I>0){W=$-b,J=L-x;const y=Math.sqrt(W*W+J*J);if(W/=y,J/=y,I>1){let A=W+_,N=J+M;const j=Math.sqrt(A*A+N*N);A/=j,N/=j;const oe=Math.min(1/(A*W+N*J),t);A*=oe,N*=oe,K=-N,Q=A}else K=-J,Q=W;K!==null&&Q!==null&&(f(b,x,S,K,Q,g,v,z),d())}b=$,x=L,S=B,_=W,M=J,T=z}f(b,x,S,-M,_,g,v,T)}return{vertexData:a,indexData:l}}function GCe(e){const{lineVertices:n,lineDescriptors:s}=e;let o=0,a=0;for(const y of s){const A=y.numberOfVertices-1;o+=4*A*2,a+=6*A*2}const l=new Float32Array(o*16),u=new Uint32Array(a);let c,d,f,m,g,v,b,x,S,T,_,M,I,$,L=0,B=0;function z(){u[B++]=L-8,u[B++]=L-7,u[B++]=L-6,u[B++]=L-7,u[B++]=L-5,u[B++]=L-6,u[B++]=L-4,u[B++]=L-3,u[B++]=L-2,u[B++]=L-3,u[B++]=L-1,u[B++]=L-2}function W(y,A,N,j,oe,q,de,re,me,ve,_e,Se,Oe,Me){const we=L*16;let Ie=0;for(const Ae of[1,2])for(const H of[1,2,3,4])l[we+Ie++]=y,l[we+Ie++]=A,l[we+Ie++]=N,l[we+Ie++]=j,l[we+Ie++]=de,l[we+Ie++]=re,l[we+Ie++]=me,l[we+Ie++]=ve,l[we+Ie++]=Ae,l[we+Ie++]=H,l[we+Ie++]=Oe,l[we+Ie++]=Me,l[we+Ie++]=oe/2,l[we+Ie++]=q/2,l[we+Ie++]=_e/2,l[we+Ie++]=Se/2,L++}function J(y,A){let N=S+_,j=T+M;const oe=Math.sqrt(N*N+j*j);N/=oe,j/=oe;const q=S*N+T*j;N/=q,j/=q;let de=_+I,re=M+$;const me=Math.sqrt(de*de+re*re);de/=me,re/=me;const ve=_*de+M*re;de/=ve,re/=ve,W(c,d,f,m,-j,N,g,v,b,x,-re,de,y,A),z()}function K(y,A,N,j,oe,q){if(S=_,T=M,_=I,M=$,S==null&&T==null&&(S=_,T=M),g!=null&&v!=null){I=y-g,$=A-v;const de=Math.sqrt(I*I+$*$);I/=de,$/=de}S!=null&&T!=null&&J(oe,q),c=g,d=v,f=b,m=x,g=y,v=A,b=N,x=j}function Q(y,A){S=_,T=M,_=I,M=$,S==null&&T==null&&(S=_,T=M),S!=null&&T!=null&&J(y,A)}for(const y of s){c=null,d=null,f=null,m=null,g=null,v=null,b=null,x=null,S=null,T=null,_=null,M=null,I=null,$=null;const{totalTime:A,timeSeed:N}=y;for(let j=0;j<y.numberOfVertices;j++)K(n[4*(y.startVertex+j)+0],n[4*(y.startVertex+j)+1],n[4*(y.startVertex+j)+2],n[4*(y.startVertex+j)+3],A,N);Q(A,N)}return{vertexData:l,indexData:u}}function tG(e,t){const i=t.pixels,{width:r,height:n}=t,s=new Float32Array(r*n*2),o=t.mask||new Uint8Array(r*n*2);if(t.mask||o.fill(255),e==="vector-uv")for(let a=0;a<r*n;a++)s[2*a+0]=i[0][a],s[2*a+1]=-i[1][a];else if(e==="vector-magdir")for(let a=0;a<r*n;a++){const l=i[0][a],u=Tv(i[1][a]),c=Math.cos(u-Math.PI/2),d=Math.sin(u-Math.PI/2);s[2*a+0]=c*l,s[2*a+1]=d*l}return{data:s,mask:o,width:r,height:n}}async function sut(e,t,i,r,n,s){const o=performance.now(),a=gl(t.spatialReference);if(!a){const _=await iG(e,t,i,r,n,s);return Ze("esri-2d-profiler")&&Qu.info("I.7","loadImagery, early exit (ms)",Math.round(performance.now()-o)),Ze("esri-2d-profiler")&&Qu.info("I.9","Number of parts",1),_}const[l,u]=a.valid,c=u-l,d=Math.ceil(t.width/c),f=t.width/d,m=Math.round(i/d);let g=t.xmin;const v=[],b=performance.now();for(let _=0;_<d;_++){const M=new Kt({xmin:g,xmax:g+f,ymin:t.ymin,ymax:t.ymax,spatialReference:t.spatialReference});v.push(iG(e,M,m,r,n,s)),g+=f}const x=await Promise.all(v);Ze("esri-2d-profiler")&&Qu.info("I.8","All calls to _fetchPart (ms)",Math.round(performance.now()-b)),Ze("esri-2d-profiler")&&Qu.info("I.9","Number of parts",x.length);const S={data:new Float32Array(i*r*2),mask:new Uint8Array(i*r),width:i,height:r};let T=0;for(const _ of x){for(let M=0;M<_.height;M++)for(let I=0;I<_.width;I++)T+I>=i||(S.data[2*(M*i+T+I)+0]=_.data[2*(M*_.width+I)+0],S.data[2*(M*i+T+I)+1]=_.data[2*(M*_.width+I)+1],S.mask[M*i+T+I]=_.mask[M*_.width+I]);T+=_.width}return Ze("esri-2d-profiler")&&Qu.info("I.10","loadImagery, general exit (ms)",Math.round(performance.now()-o)),S}async function iG(e,t,i,r,n,s){const o={requestProjectedLocalDirections:!0,signal:s};if(ee(n)&&(o.timeExtent=n),e.type==="imagery"){await e.load({signal:s});const u=e.rasterInfo.dataType,c=await e.fetchImage(t,i,r,o);return!c||Re(c.pixelData)||Re(c.pixelData.pixelBlock)?{data:new Float32Array(i*r*2),mask:new Uint8Array(i*r),width:i,height:r}:tG(u,c.pixelData.pixelBlock)}await e.load({signal:s});const a=e.rasterInfo.dataType,l=await e.fetchPixels(t,i,r,o);return!l||Re(l.pixelBlock)?{data:new Float32Array(i*r*2),mask:new Uint8Array(i*r),width:i,height:r}:tG(a,l.pixelBlock)}const pO=_n()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",S16:"s16",U32:"u32",S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",UNKNOWN:"unknown"}),qCe=new Set(["png","png8","png24","png32","jpg","bmp","gif","jpgpng","lerc","tiff"]),HCe=DY(ul,{min:0,max:255});function WCe(e){if(!e)return null;const t=JSON.stringify(e).match(/"rasterFunction":"(.*?")/gi)?.map(i=>i.replace('"rasterFunction":"',"").replace('"',""));return t?t.join("/"):null}const JCe=e=>{let t=class extends e{constructor(){super(...arguments),this._functionRasterInfos={},this._rasterJobHandler={instance:null,refCount:0,connectionPromise:null},this._cachedRendererJson=null,this._serviceSupportsMosaicRule=null,this._rasterAttributeTableFieldPrefix="Raster.",this.adjustAspectRatio=null,this.bandIds=void 0,this.capabilities=null,this.compressionQuality=void 0,this.compressionTolerance=.01,this.copyright=null,this.defaultMosaicRule=null,this.definitionExpression=null,this.exportImageServiceParameters=null,this.rasterInfo=null,this.fields=null,this.fullExtent=null,this.hasMultidimensions=!1,this.imageMaxHeight=4100,this.imageMaxWidth=4100,this.interpolation=void 0,this.minScale=0,this.maxScale=0,this.multidimensionalInfo=null,this.multidimensionalSubset=null,this.noData=null,this.noDataInterpretation=void 0,this.objectIdField=null,this.geometryType="polygon",this.typeIdField=null,this.types=[],this.pixelFilter=null,this.raster=void 0,this.sourceType=null,this.viewId=void 0,this.symbolizer=null,this.rasterFunctionInfos=null,this.serviceDataType=null,this.spatialReference=null,this.pixelType=null,this.serviceRasterInfo=null,this.sourceJSON=null,this.url=null,this.version=void 0}initialize(){this._set("exportImageServiceParameters",new un({layer:this}))}readServiceSupportsMosaicRule(r,n){return this._isMosaicRuleSupported(n)}get _rasterFunctionNamesIndex(){const r=new Map;return!this.rasterFunctionInfos||ee(this.rasterFunctionInfos)&&this.rasterFunctionInfos.length<1||ee(this.rasterFunctionInfos)&&this.rasterFunctionInfos.forEach(n=>{r.set(n.name.toLowerCase().replace(/ /gi,"_"),n.name)}),r}readBandIds(r,n){if(Array.isArray(r)&&r.length>0&&r.every(s=>typeof s=="number"))return r}readCapabilities(r,n){return this._readCapabilities(n)}writeCompressionQuality(r,n,s){r!=null&&this.format!=="lerc"&&(n[s]=r)}writeCompressionTolerance(r,n,s){this.format==="lerc"&&r!=null&&(n[s]=r)}readDefaultMosaicRule(r,n){return this._serviceSupportsMosaicRule?ll.fromJSON(n):null}get fieldsIndex(){return this.fields?new RD(this.fields):null}set format(r){r&&qCe.has(r.toLowerCase())&&this._set("format",r.toLowerCase())}readFormat(r,n){return n.serviceDataType==="esriImageServiceDataTypeVector-UV"||n.serviceDataType==="esriImageServiceDataTypeVector-MagDir"||this.pixelFilter!=null?"lerc":"jpgpng"}readMinScale(r,n){return n.minLOD!=null&&n.maxLOD!=null?r:0}readMaxScale(r,n){return n.minLOD!=null&&n.maxLOD!=null?r:0}set mosaicRule(r){let n=r;n&&n.mosaicMethod&&(n=ll.fromJSON({...n.toJSON(),mosaicMethod:n.mosaicMethod,mosaicOperation:n.mosaicOperation})),this._set("mosaicRule",n)}readMosaicRule(r,n){const s=r||n.mosaicRule;return s?ll.fromJSON(s):this._isMosaicRuleSupported(n)?ll.fromJSON(n):null}writeMosaicRule(r,n,s){let o=this.mosaicRule;const a=this.definitionExpression;o?a&&a!==o.where&&(o=o.clone(),o.where=a):a&&(o=new ll({where:a})),this._isValidCustomizedMosaicRule(o)&&(n[s]=o.toJSON())}writeNoData(r,n,s){r!=null&&typeof r=="number"&&(n[s]=HCe(r))}readObjectIdField(r,n){if(!r){const s=n.fields.filter(o=>o.type==="esriFieldTypeOID"||o.type==="oid");r=s&&s[0]&&s[0].name}return r}get parsedUrl(){return Ln(this.url)}readSourceType(r,n){return this._isMosaicDataset(n)?"mosaic-dataset":"raster-dataset"}set renderer(r){this.loaded&&(r=this._configRenderer(r)),this._set("renderer",r)}readRenderer(r,n,s){const o=n?.layerDefinition?.drawingInfo?.renderer,a=mAe(o,s);return a==null?null:(a.type==="vector-field"&&n.symbolTileSize&&!o.symbolTileSize&&(a.symbolTileSize=n.symbolTileSize),_re(a)||et.getLogger(this.declaredClass).warn("ArcGISImageService","Imagery layer doesn't support given renderer type."),a)}writeRenderer(r,n,s){n.layerDefinition=n.layerDefinition||{},n.layerDefinition.drawingInfo=n.layerDefinition.drawingInfo||{},n.layerDefinition.drawingInfo.renderer=r.toJSON(),r.type==="vector-field"&&(n.symbolTileSize=r.symbolTileSize)}get rasterFields(){const r=this._rasterAttributeTableFieldPrefix||"Raster.",n=new ol({name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:"string"}),s=new ol({name:"Raster.ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),o=new ol({name:"Raster.ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"string"});let a=this.fields?Le(this.fields):[];a.push(s),this.capabilities?.operations.supportsQuery&&this.fields&&this.fields.length>0&&a.push(n),this.version>=10.4&&ee(this.rasterFunctionInfos)&&this.rasterFunctionInfos.some(u=>u.name.toLowerCase()==="none")&&a.push(o),ee(this.rasterFunctionInfos)&&this.rasterFunctionInfos.filter(u=>u.name.toLowerCase()!=="none").forEach(u=>{a.push(new ol({name:"Raster.ServicePixelValue."+u.name,alias:u.name,domain:null,editable:!1,length:50,type:"string"}))}),this._isVectorDataSet()&&(a.push(new ol({name:"Raster.Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"double"})),a.push(new ol({name:"Raster.Direction",alias:"Direction",domain:null,editable:!1,type:"double"})));const{attributeTable:l}=this.rasterInfo??{};if(ee(l)){const u=l.fields.filter(c=>c.type!=="esriFieldTypeOID"&&c.name.toLowerCase()!=="value").map(c=>{const d=Le(c);return d.name=r+c.name,d});a=a.concat(u)}return a}set renderingRule(r){let n=r;n&&n.rasterFunction&&(n=zi.fromJSON({...n.toJSON(),rasterFunction:n.rasterFunction,rasterFunctionArguments:n.rasterFunctionArguments})),this._set("renderingRule",n)}readRenderingRule(r,n){const s=n.rasterFunctionInfos;return n.renderingRule||s&&s.length&&s[0].name!=="None"?this._isRFTJson(n.renderingRule)?zi.fromJSON({rasterFunctionDefinition:n.renderingRule}):zi.fromJSON(n.renderingRule||{rasterFunctionInfos:n.rasterFunctionInfos}):null}writeRenderingRule(r,n,s){const o=r.toJSON();o.rasterFunctionDefinition?n[s]=o.rasterFunctionDefinition:n[s]=o}readSpatialReference(r,n){const s=r||n.extent.spatialReference;return s?Et.fromJSON(s):null}readPixelType(r){return pO.fromJSON(r)||r}writePixelType(r,n,s){(Re(this.serviceRasterInfo)||this.pixelType!==this.serviceRasterInfo.pixelType)&&(n[s]=pO.toJSON(r))}readVersion(r,n){let s=n.currentVersion;return s||(s=n.hasOwnProperty("fields")||n.hasOwnProperty("timeInfo")?10:9.3),s}applyFilter(r){let n=r;return this.pixelFilter&&(n=this._clonePixelData(r),this.pixelFilter(n)),n}async applyRenderer(r,n){let s=r;const{renderer:o,symbolizer:a,pixelFilter:l,bandIds:u}=this;if(!this._isPicture()&&o&&a&&!l){const c=JSON.stringify(this._cachedRendererJson)!==JSON.stringify(o.toJSON()),d=this._rasterJobHandler.instance;if(d){c&&(a.bind(),await d.updateSymbolizer(a,n),this._cachedRendererJson=o.toJSON());const f=await d.symbolize({bandIds:u,...r},n);s={extent:r.extent,pixelBlock:f}}else s={extent:r.extent,pixelBlock:a.symbolize({bandIds:u,...r})}}return s}destroy(){this._shutdownJobHandler()}increaseRasterJobHandlerUsage(){this._rasterJobHandler.refCount++}decreaseRasterJobHandlerUsage(){this._rasterJobHandler.refCount--,this._rasterJobHandler.refCount<=0&&this._shutdownJobHandler()}async computeAngles(r,n){if(!(await this._fetchCapabilities(n?.signal)).operations.supportsComputeAngles)throw new Ce("imagery-layer:compute-angles","this operation is not supported on the input image service");return r=Fs(CCe,r).clone(),E4e(this.url,r,this._getRequestOptions(n))}async computePixelSpaceLocations(r,n){if(!(await this._fetchCapabilities(n?.signal)).operations.supportsComputePixelLocation)throw new Ce("imagery-layer:compute-pixel-space-locations","this operation is not supported on the input image service");return r=Fs(kCe,r).clone(),M4e(this.url,r,this._getRequestOptions(n))}async computeHistograms(r,n){if(!(await this._fetchCapabilities(n?.signal)).operations.supportsComputeHistograms)throw new Ce("imagery-layer:compute-histograms","this operation is not supported on the input image service");return r=Fs(Xz,r).clone(),this._applyMosaicAndRenderingRules(r),T4e(this.url,r,this._getRequestOptions(n))}async computeStatisticsHistograms(r,n){if(!(await this._fetchCapabilities(n?.signal)).operations.supportsComputeStatisticsHistograms)throw new Ce("imagery-layer:compute-statistics-histograms","this operation is not supported on the input image service");return r=Fs(Xz,r).clone(),this._applyMosaicAndRenderingRules(r),I4e(this.url,r,this._getRequestOptions(n))}async measureHeight(r,n){const s=await this._fetchCapabilities(n?.signal);if(!(r.operationType==="base-and-top"?s.mensuration.supportsHeightFromBaseAndTop:r.operationType==="base-and-top-shadow"?s.mensuration.supportsHeightFromBaseAndTopShadow:s.mensuration.supportsHeightFromTopAndTopShadow))throw new Ce("imagery-layer:measure-height","this operation is not supported on the input image service");return r=Fs(RCe,r).clone(),this._applyMosaicAndRenderingRules(r),C4e(this.url,r,this._getRequestOptions(n))}async measureAreaAndPerimeter(r,n){const s=await this._fetchCapabilities(n?.signal);if(!(s.mensuration.supportsAreaAndPerimeter&&(!r.is3D||s.mensuration.supports3D)))throw new Ce("imagery-layer:measure-area-and-perimeter","this operation is not supported on the input image service");return r=Fs($Ce,r).clone(),this._applyMosaicAndRenderingRules(r),$4e(this.url,r,this._getRequestOptions(n))}async measureDistanceAndAngle(r,n){const s=await this._fetchCapabilities(n?.signal);if(!(s.mensuration.supportsDistanceAndAngle&&(!r.is3D||s.mensuration.supports3D)))throw new Ce("imagery-layer:measure-distance-and-angle","this operation is not supported on the input image service");return r=Fs(OCe,r).clone(),this._applyMosaicAndRenderingRules(r),R4e(this.url,r,this._getRequestOptions(n))}async measurePointOrCentroid(r,n){const s=await this._fetchCapabilities(n?.signal);if(!(s.mensuration.supportsPointOrCentroid&&(!r.is3D||s.mensuration.supports3D)))throw new Ce("imagery-layer:measure-point-or-centroid","this operation is not supported on the input image service");return r=Fs(LCe,r).clone(),this._applyMosaicAndRenderingRules(r),O4e(this.url,r,this._getRequestOptions(n))}getField(r){const{fieldsIndex:n}=this;return ee(n)?n.get(r):void 0}getFieldDomain(r,n){const s=this.getField(r);return s?s.domain:null}async fetchImage(r,n,s,o={}){if(r==null||n==null||s==null)throw new Ce("imagery-layer:fetch-image","Insufficient parameters for requesting an image. A valid extent, width and height values are required.");if(this.renderer||this.symbolizer){const d=await this.generateRasterInfo(this.renderingRule,{signal:o.signal});d&&(this.rasterInfo=d)}const a=this.getExportImageServiceParameters(r,n,s,o.timeExtent);if(a==null){if(o.requestAsImageElement&&this._canRequestImageElement(this.format)){const x=document.createElement("canvas");return x.width=n,x.height=s,o.returnImageBitmap?{imageBitmap:await Pb(x,`${i(this.parsedUrl)}/exportImage`)}:{imageOrCanvasElement:x}}const{bandIds:d,rasterInfo:f}=this,m=(d?.length||f.bandCount)??0,g=n*s,v=f.pixelType,b=[];for(let x=0;x<m;x++)b.push(ai.createEmptyBand(v,g));return{pixelData:{pixelBlock:new ai({width:n,height:s,pixels:b,mask:new Uint8Array(g),pixelType:v}),extent:r}}}const l=!!o.requestAsImageElement&&!this.pixelFilter,u=l&&!!o.returnImageBitmap,c={imageServiceParameters:a,imageProps:{extent:r,width:n,height:s,format:this.format},requestAsImageElement:l,returnImageBitmap:u,signal:o.signal};return this._requestArrayBuffer(c)}fetchKeyProperties(r){return St(i(this.parsedUrl)+"/keyProperties",{query:this._getQueryParams({renderingRule:this.version>=10.3?r?.renderingRule:null})}).then(n=>n.data)}fetchRasterAttributeTable(r){return this.version<10.1?Promise.reject(new Ce("#fetchRasterAttributeTable()","Failed to get rasterAttributeTable")):St(i(this.parsedUrl)+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:this.version>=10.3?r?.renderingRule:null})}).then(n=>z0.fromJSON(n.data))}getCatalogItemRasterInfo(r,n){const s={...n,query:this._getQueryParams()};return ACe(i(this.parsedUrl),r,s)}async getCatalogItemICSInfo(r,n){const{data:s}=await St(i(this.parsedUrl)+"/"+r+"/info/ics",{query:this._getQueryParams(),...n}),o=s&&s.ics;if(!o)return;let a=null;try{a=(await St(i(this.parsedUrl)+"/"+r+"/info",{query:this._getQueryParams(),...n})).data.extent}catch{}if(!a||!a.spatialReference)return{ics:o,icsToPixelTransform:null,icsExtent:null,northDirection:null};const l=this.version>=10.7?St(i(this.parsedUrl)+"/"+r+"/info/icstopixel",{query:this._getQueryParams(),...n}).then(A=>A.data).catch(()=>({})):{},u=a.spatialReference,c={geometries:JSON.stringify({geometryType:"esriGeometryEnvelope",geometries:[a]}),inSR:u.wkid||JSON.stringify(u),outSR:"0:"+r},d=St(i(this.parsedUrl)+"/project",{query:this._getQueryParams(c),...n}).then(A=>A.data).catch(()=>({})),f=5,m=(a.xmin+a.xmax)/2,g=(a.ymax-a.ymin)/(f+1),v=a.ymin+g,b=[];for(let A=0;A<f;A++)b.push({x:m,y:v+g*A});const x={geometries:JSON.stringify({geometryType:"esriGeometryPoint",geometries:b}),inSR:u.wkid||JSON.stringify(u),outSR:"0:"+r},S=St(i(this.parsedUrl)+"/project",{query:this._getQueryParams(x),...n}).then(A=>A.data).catch(()=>({})),T=await Promise.all([l,d,S]);let _=T[0].ipxf;if(_==null){const A=o.geodataXform?.xf_0;A?.name?.toLowerCase()==="topup"&&A?.coefficients?.length===6&&(_={affine:{name:"ics [sensor: Frame] to pixel (column, row) transformation",coefficients:A.coefficients,cellsizeRatio:0,type:"GeometricXform"}})}const M=Kt.fromJSON(T[1]&&T[1].geometries&&T[1].geometries[0]);M&&(M.spatialReference=new Et({wkid:0,imageCoordinateSystem:o}));const I=T[2].geometries?T[2].geometries.filter(A=>A!=null&&A.x!=null&&A.y!=null&&A.x!=="NaN"&&A.y!=="NaN"):[],$=I.length;if($<3)return{ics:o,icsToPixelTransform:_,icsExtent:M,northDirection:null};let L=0,B=0,z=0,W=0;for(let A=0;A<$;A++)L+=I[A].x,B+=I[A].y,z+=I[A].x*I[A].x,W+=I[A].x*I[A].y;const J=($*W-L*B)/($*z-L*L);let K=0;const Q=I[f-1].x>I[0].x,y=I[f-1].y>I[0].y;return J===1/0?K=y?90:270:J===0?K=Q?0:180:J>0?K=Q?180*Math.atan(J)/Math.PI:180*Math.atan(J)/Math.PI+180:J<0&&(K=y?180+180*Math.atan(J)/Math.PI:360+180*Math.atan(J)/Math.PI),{ics:o,icsToPixelTransform:_,icsExtent:M,northDirection:K}}async generateRasterInfo(r,n){if(r=Fs(zi,r),this.serviceRasterInfo&&(!r||r.functionName?.toLowerCase()==="none"||this._isVectorFieldResampleFunction(r)))return this.serviceRasterInfo;const s=WCe(r);if(!s)return null;if(this._functionRasterInfos[s])return this._functionRasterInfos[s];const o=this._generateRasterInfo(r,n);this._functionRasterInfos[s]=o;try{return await o}catch{return this._functionRasterInfos[s]=null,null}}getExportImageServiceParameters(r,n,s,o){r=r.clone().shiftCentralMeridian();const a=Qre(r.spatialReference,i(this.parsedUrl));this.pixelType!==this.serviceRasterInfo.pixelType&&(this.exportImageServiceParameters.pixelType=this.pixelType);const l=this.exportImageServiceParameters.toJSON(),{bandIds:u,noData:c}=l;let{renderingRule:d}=l;const f=this.renderingRule?.rasterFunctionDefinition,m=!this.renderer||this.renderer.type==="raster-stretch";if(u?.length&&this._hasRenderingRule(this.renderingRule)&&!f&&m){const b={rasterFunction:"ExtractBand",rasterFunctionArguments:{BandIds:u}};if(d.rasterFunction==="Stretch")b.rasterFunctionArguments.Raster=d.rasterFunctionArguments.Raster,d.rasterFunctionArguments.Raster=b;else if(d.rasterFunction==="Colormap"){const x=d.rasterFunctionArguments.Raster;x?.rasterFunction==="Stretch"?(b.rasterFunctionArguments.Raster=x.rasterFunctionArguments.Raster,x.rasterFunctionArguments.Raster=b):(b.rasterFunctionArguments.Raster=x,d.rasterFunctionArguments.Raster=b)}else b.rasterFunctionArguments.Raster=d,d=b;l.bandIds=void 0}else l.bandIds=u?.join(",");c instanceof Array&&c.length>0&&(l.noData=c.join(","));const g=this._processMultidimensionalIntersection(null,o,this.exportImageServiceParameters.mosaicRule);if(g.isOutSide)return null;l.mosaicRule=ee(g.mosaicRule)?JSON.stringify(g.mosaicRule):null,o=g.timeExtent,l.renderingRule=this._getRenderingRuleString(zi.fromJSON(d));const v={};if(ee(o)){const{start:b,end:x}=o.toJSON();b&&x&&b===x?v.time=""+b:b==null&&x==null||(v.time=`${b??"null"},${x??"null"}`)}return{bbox:r.xmin+","+r.ymin+","+r.xmax+","+r.ymax,bboxSR:a,imageSR:a,size:n+","+s,...l,...v}}async getSamples(r,n){if(!(await this._fetchCapabilities(n?.signal))?.operations.supportsGetSamples)throw new Ce("imagery-layer:get-samples","getSamples operation is not supported on the input image service");r=Fs(PCe,r).clone();const{raster:s}=this;return s&&r.raster==null&&(r.raster=s),A4e(this.url,r,this._getRequestOptions(n))}async identify(r,n){if(!(await this._fetchCapabilities(n?.signal)).operations.supportsIdentify)throw new Ce("imagery-layer:identify","identify operation is not supported on the input image service");r=Fs(eG,r).clone();const s=this._processMultidimensionalIntersection(r.geometry,r.timeExtent,r.mosaicRule||this.mosaicRule);if(s.isOutSide)throw new Ce("imagery-layer:identify","the request cannot be fulfilled when falling outside of the multidimensional subset");r.timeExtent=s.timeExtent,r.mosaicRule=s.mosaicRule;const{raster:o,renderingRule:a}=this;return a&&r.renderingRule==null&&(r.renderingRule=a),o&&r.raster==null&&(r.raster=o),Vz(this.url,r,this._getRequestOptions(n))}createQuery(){const r=new On;return r.outFields=["*"],r.returnGeometry=!0,r.where=this.definitionExpression||"1=1",r}async queryRasters(r,n){return{query:r,requestOptions:n}=await this._prepareForQuery(r,n),sT(this.url,r,n)}async queryObjectIds(r,n){return{query:r,requestOptions:n}=await this._prepareForQuery(r,n),i9(this.url,r,n)}async queryRasterCount(r,n){return{query:r,requestOptions:n}=await this._prepareForQuery(r,n),wne(this.url,r,n)}async queryVisibleRasters(r,n){if(!r)throw new Ce("imagery-layer: query-visible-rasters","missing query parameter");await this.load();const{pixelSize:s,returnDomainValues:o,returnTopmostRaster:a,showNoDataRecords:l}=n||{pixelSize:null,returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1};let u=!1,c=null,d=null;const f="raster.servicepixelvalue",m=this._rasterFunctionNamesIndex;if(ee(r.outFields)&&(u=r.outFields.some(_=>!_.toLowerCase().includes(f)),this.version>=10.4)){const _=r.outFields.filter(I=>I.toLowerCase().includes(f)&&I.length>f.length).map(I=>{const $=I.slice(f.length+1);return[this._updateRenderingRulesFunctionName($,m),$]});c=_.map(I=>new zi({functionName:I[0]})),d=_.map(I=>I[1]);const{renderingRule:M}=this;c.length===0?M?.functionName?(c.push(M),d.push(M.functionName)):c=null:M?.functionName&&!c.some(I=>I.functionName===M.functionName)&&(c.push(M),d.push(M.functionName))}const g=Re(r.outSpatialReference)||r.outSpatialReference.equals(this.spatialReference),{multidimensionalSubset:v}=this;let b=r.timeExtent||this.timeExtent;if(v){const{isOutside:_,intersection:M}=nO(v,{geometry:r.geometry,timeExtent:r.timeExtent,multidimensionalDefinition:this.exportImageServiceParameters.mosaicRule?.multidimensionalDefinition});if(_)throw new Ce("imagery-layer:query-visible-rasters","the request cannot be fulfilled when falling outside of the multidimensional subset");M&&ee(M.timeExtent)&&(b=M.timeExtent)}const x=this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule,b),S=this._getQueryParams({geometry:r.geometry,timeExtent:b,mosaicRule:x,renderingRule:this.version<10.4?this.renderingRule:null,renderingRules:c,pixelSize:s,returnCatalogItems:u,returnGeometry:g,raster:this.raster,maxItemCount:a?1:null});delete S.f;const T=new eG(S);try{await this.generateRasterInfo(this.renderingRule);const _=await Vz(this.url,T,{signal:n?.signal,query:{...this.customParameters}}),M=r.outFields,I=_.value!=null&&_.value.toLowerCase().includes("nodata");if(!(u&&!g&&_?.catalogItems?.features.length&&(l||!I)))return this._processVisibleRastersResponse(_,{returnDomainValues:o,templateRRFunctionNames:d,showNoDataRecords:l,templateFields:M});const $=this.objectIdField||"ObjectId",L=_.catalogItems?.features??[],B=L.map(J=>J.attributes?.[$]),z=new On({objectIds:B,returnGeometry:!0,outSpatialReference:r.outSpatialReference,outFields:[$]}),W=await this.queryRasters(z);return W?.features?.length&&W.features.forEach(J=>{L.forEach(K=>{K.attributes[$]===J.attributes[$]&&(K.geometry=new Aa(J.geometry),ee(r.outSpatialReference)&&(K.geometry.spatialReference=r.outSpatialReference))})}),this._processVisibleRastersResponse(_,{returnDomainValues:o,templateRRFunctionNames:d,showNoDataRecords:l,templateFields:M})}catch{throw new Ce("imagery-layer:query-visible-rasters","encountered error when querying visible rasters")}}async fetchVariableStatisticsHistograms(r,n){const s=St(i(this.parsedUrl)+"/statistics",{query:this._getQueryParams({variable:r}),signal:n}).then(l=>l.data?.statistics),o=St(i(this.parsedUrl)+"/histograms",{query:this._getQueryParams({variable:r}),signal:n}).then(l=>l.data?.histograms),a=await Promise.all([s,o]);return a[0]&&a[0].forEach(l=>{l.avg=l.mean,l.stddev=l.standardDeviation}),{statistics:a[0]||null,histograms:a[1]||null}}async createFlowMesh(r,n){const s=this._rasterJobHandler.instance;return s?s.createFlowMesh(r,n):FCe(r.meshType,r.simulationSettings,r.flowData,ee(n.signal)?n.signal:new AbortController().signal)}getMultidimensionalSubsetVariables(r){const n=r??this.serviceRasterInfo.multidimensionalInfo;return DAe(this.multidimensionalSubset,n)}async _fetchService(r){await this._fetchServiceInfo(r),this.rasterInfo||(this.rasterInfo=this.serviceRasterInfo);const n=this.sourceJSON,s=ee(this.serviceRasterInfo)?Promise.resolve(this.serviceRasterInfo):ICe(i(this.parsedUrl),n,{signal:r,query:this._getQueryParams()}).then(l=>(this._set("serviceRasterInfo",l),this._set("multidimensionalInfo",l.multidimensionalInfo),l)),o=this._hasRenderingRule(this.renderingRule)?this.generateRasterInfo(this.renderingRule,{signal:r}):null,a=this._getRasterFunctionInfos();return Promise.all([s,o,a]).then(l=>{l[1]?this._set("rasterInfo",l[1]):this._set("rasterInfo",l[0]),l[2]&&this._set("rasterFunctionInfos",l[2]),this.renderer&&!this._isSupportedRenderer(this.renderer)&&(this._set("renderer",null),et.getLogger(this.declaredClass).warn("ArcGISImageService","Switching to the default renderer. Renderer applied is not valid for this Imagery Layer")),this._set("renderer",this._configRenderer(this.renderer)),this.addHandles([nt(()=>this.renderingRule,c=>{(this.renderer||this.symbolizer||this.popupEnabled&&this.popupTemplate)&&this.generateRasterInfo(c).then(d=>{d&&(this.rasterInfo=d)})})]);const{serviceRasterInfo:u}=this;ee(u.multidimensionalInfo)&&this._updateMultidimensionalDefinition(u)})}_combineMosaicRuleWithTimeExtent(r,n){const s=this.timeInfo,{multidimensionalInfo:o}=this.serviceRasterInfo;if(Re(r)||Re(o)||Re(n)||Re(s?.startField))return r;const{startField:a}=s,l=o.variables.some(v=>v.dimensions.some(b=>b.name===a))?a:"StdTime";if(r=r.clone(),this.sourceType==="mosaic-dataset")return r.multidimensionalDefinition=r.multidimensionalDefinition?.filter(v=>v.dimensionName!==l),this._cleanupMultidimensionalDefinition(r);r.multidimensionalDefinition=r.multidimensionalDefinition||[];const u=r.multidimensionalDefinition.filter(v=>v.dimensionName===l),c=ee(n.start)?n.start.getTime():null,d=ee(n.end)?n.end.getTime():null,f=c==null||d==null||c===d,m=f?[c||d]:[[c,d]],g=this.version>=10.8;if(u.length)u.forEach(v=>{v.dimensionName===l&&(g?(v.dimensionName=null,v.isSlice=!1,v.values=[]):(v.isSlice=f,v.values=m))});else if(!g){const v=r.multidimensionalDefinition.filter(b=>b.variableName!=null&&b.dimensionName==null);v.length?v.forEach(b=>{b.dimensionName=l,b.isSlice=f,b.values=m}):r.multidimensionalDefinition.push(new Lb({variableName:"",dimensionName:l,isSlice:f,values:m}))}return this._cleanupMultidimensionalDefinition(r)}_cleanupMultidimensionalDefinition(r){return Re(r)?null:(r.multidimensionalDefinition&&(r.multidimensionalDefinition=r.multidimensionalDefinition.filter(n=>!(!n.variableName&&!n.dimensionName)),r.multidimensionalDefinition.length===0&&(r.multidimensionalDefinition=null)),this.sourceType!=="mosaic-dataset"&&r.multidimensionalDefinition==null?null:r)}async _prepareForQuery(r,n){if(!(await this._fetchCapabilities(n?.signal)).operations.supportsQuery)throw new Ce("imagery-layer:query-rasters","query operation is not supported on the input image service");return r=ee(r)?Fs(On,r):this.createQuery(),n=this._getRequestOptions(n),this.raster&&(n.query={...n.query,raster:this.raster}),{query:r,requestOptions:n}}async _initJobHandler(){if(this._rasterJobHandler.connectionPromise!=null)return this._rasterJobHandler.connectionPromise;const r=new kAe;this._rasterJobHandler.connectionPromise=r.initialize().then(()=>{this._rasterJobHandler.instance=r},()=>{}),await this._rasterJobHandler.connectionPromise}_shutdownJobHandler(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy(),this._rasterJobHandler.instance=null,this._rasterJobHandler.connectionPromise=null,this._rasterJobHandler.refCount=0,this._cachedRendererJson=null}_isSupportedRenderer(r){const{rasterInfo:n,renderingRule:s}=this;return r.type==="unique-value"&&this._hasRenderingRule(s)&&n?.bandCount===1&&["u8","s8"].includes(n.pixelType)||n!=null&&r!=null&&V5e(n).includes(r.type)}async _fetchCapabilities(r){return this.capabilities||await this._fetchServiceInfo(r),this.capabilities}async _fetchServiceInfo(r){let n=this.sourceJSON;if(!n){const{data:s,ssl:o}=await St(i(this.parsedUrl),{query:this._getQueryParams(),signal:r});n=s,this.sourceJSON=n,o&&(this.url=this.url.replace(/^http:/i,"https:"))}if(n.capabilities?.toLowerCase().split(",").map(s=>s.trim()).indexOf("tilesonly")>-1)throw new Ce("imagery-layer:fetch-service-info","use ImageryTileLayer to open tiles-only image services");this.read(n,{origin:"service",url:this.parsedUrl})}_isMosaicDataset(r){return r.serviceSourceType?r.serviceSourceType==="esriImageServiceSourceTypeMosaicDataset":r.fields?.length>0}_isMosaicRuleSupported(r){if(!r)return!1;const n=this._isMosaicDataset(r),s=r.currentVersion>=10.71&&r.hasMultidimensions&&!(r.fields?.length>1);return n||s}_isVectorFieldResampleFunction(r){if(Re(r))return!1;const{functionName:n,functionArguments:s}=r,o=n?.toLowerCase()==="resample",a=s?.ResampleType||s?.resampleType;return o&&(a===7||a===10)}_isPicture(){return!this.format||this.format.includes("jpg")||this.format.includes("png")}_configRenderer(r){const n=this._isPicture(),{rasterInfo:s}=this;if(!n&&!this.pixelFilter||this._isVectorDataSet()){if(!this.bandIds&&s.bandCount>=3){const a=zre(s);!a||s.bandCount===3&&a[0]===0&&a[1]===1&&a[2]===2||(this.bandIds=a)}r||(r=U5e(s,{bandIds:this.bandIds,variableName:this.renderingRule?null:this.mosaicRule?.multidimensionalDefinition?.[0].variableName}));const o=t4e(r.toJSON());this.symbolizer?(this.symbolizer.rendererJSON=o,this.symbolizer.rasterInfo=s):this.symbolizer=new f4e({rendererJSON:o,rasterInfo:s}),this.symbolizer.bind().success||(this.symbolizer=null)}return r}_clonePixelData(r){return r==null?r:{extent:r.extent&&r.extent.clone(),pixelBlock:ee(r.pixelBlock)?r.pixelBlock.clone():null}}_getQueryParams(r){r&&ee(r.renderingRule)&&typeof r.renderingRule!="string"&&(r.renderingRule=this._getRenderingRuleString(r.renderingRule));const{raster:n,viewId:s}=this;return{raster:n,viewId:s,f:"json",...r,...this.customParameters}}_getRequestOptions(r){return{...r,query:{...r?.query,...this.customParameters}}}_decodePixelBlock(r,n,s){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:r,options:n}):kz(r,n,s)}async _getRasterFunctionInfos(r){const n=this.sourceJSON.rasterFunctionInfos;return this.loaded?n:n&&this.version>=10.3?n.length===1&&n[0].name.toLowerCase()==="none"?n:(await St(i(this.parsedUrl)+"/rasterFunctionInfos",{query:this._getQueryParams(),signal:r})).data?.rasterFunctionInfos:null}_canRequestImageElement(r){return!this.pixelFilter&&(!r||r.includes("png"))}async _requestArrayBuffer(r){const{imageProps:n,requestAsImageElement:s,returnImageBitmap:o,signal:a}=r;if(s&&this._canRequestImageElement(n.format)){const v=`${i(this.parsedUrl)}/exportImage`,{data:b}=await St(v,{responseType:o?"blob":"image",query:this._getQueryParams({f:"image",...this.refreshParameters,...r.imageServiceParameters}),signal:a});return b instanceof Blob?{imageBitmap:await Pb(b,v),params:n}:{imageOrCanvasElement:b,params:n}}const l=this._initJobHandler(),u=St(i(this.parsedUrl)+"/exportImage",{responseType:"array-buffer",query:this._getQueryParams({f:"image",...r.imageServiceParameters}),signal:a}),c=(await Promise.all([u,l]))[0].data,d=n.format||"jpgpng";let f=d;if(f!=="bsq"&&f!=="bip"&&(f=C5e(c)),!f)throw new Ce("imagery-layer:fetch-image","unsupported format signature "+String.fromCharCode.apply(null,new Uint8Array(c)));const m={signal:a};return{pixelData:{pixelBlock:await(d==="gif"||d==="bmp"||d.includes("png")&&(f==="png"||f==="jpg")?kz(c,{useCanvas:!0,...n},m):this._decodePixelBlock(c,{width:n.width,height:n.height,planes:null,pixelType:null,noDataValue:null,format:d},m)),extent:n.extent},params:n}}_generateRasterInfo(r,n){const s={...n,query:this._getQueryParams()};return TCe(i(this.parsedUrl),r,s)}_isValidCustomizedMosaicRule(r){return r&&JSON.stringify(r.toJSON())!==JSON.stringify(this.defaultMosaicRule?.toJSON())}_updateMultidimensionalDefinition(r){if(this._isValidCustomizedMosaicRule(this.mosaicRule))return;let n=FAe(r,{multidimensionalSubset:this.multidimensionalSubset});if(ee(n)&&n.length>0){this.mosaicRule=this.mosaicRule||new ll;const s=this.mosaicRule.multidimensionalDefinition;!this.sourceJSON.defaultVariableName&&this.renderingRule&&this.renderingRule.functionName?.toLowerCase()!=="none"&&n.forEach(o=>o.variableName=""),n=n.filter(({variableName:o,dimensionName:a})=>o&&o!=="*"||a),!s?.length&&n.length&&(this.mosaicRule.multidimensionalDefinition=n)}}_processVisibleRastersResponse(r,n){n=n||{};const s=r.value,{templateRRFunctionNames:o,showNoDataRecords:a,returnDomainValues:l,templateFields:u}=n,c=r.processedValues;let d=r.catalogItems&&r.catalogItems.features,f=r.properties&&r.properties.Values&&r.properties.Values.map(T=>T.replace(/ /gi,", "))||[];const m=this.objectIdField||"ObjectId",g=typeof s=="string"&&s.toLowerCase().includes("nodata"),v=[];if(s&&!d&&!g){const T={};T[m]=0,f=[s],d=[new As(this.fullExtent,null,T)]}if(!d)return[];let b,x,S;this._updateResponseFieldNames(d,u),g&&!a&&(d=[]);for(let T=0;T<d.length;T++){if(b=d[T],s!=null){if(x=f[T],S=this.renderingRule&&c&&c.length>0&&o&&o.length>0&&o.includes(this.renderingRule.functionName)?c[o.indexOf(this.renderingRule.functionName)]:s,x.toLowerCase()==="nodata"&&!a)continue;const _="Raster.ItemPixelValue",M="Raster.ServicePixelValue";b.attributes[_]=x,b.attributes[M]=S,this._updateFeatureWithMagDirValues(b,x);const I=this.fields&&this.fields.length>0;let $=this.renderingRule&&ee(this.serviceRasterInfo.attributeTable)?I?x:s:S;this.renderingRule||($=I?x:s),this._updateFeatureWithRasterAttributeTableValues(b,$)}if(b.sourceLayer=b.layer=this,l&&this._updateFeatureWithDomainValues(b),o&&c&&o.length===c.length)for(let _=0;_<o.length;_++){const M="Raster.ServicePixelValue."+o[_];b.attributes[M]=c[_]}v.push(d[T])}return v}_processMultidimensionalIntersection(r,n,s){const{multidimensionalSubset:o}=this;if(!o)return{isOutSide:!1,timeExtent:n,mosaicRule:s=this._combineMosaicRuleWithTimeExtent(s,n)};if(o){const{isOutside:a,intersection:l}=nO(o,{geometry:r,timeExtent:n});if(a)return{isOutSide:!0,timeExtent:null,mosaicRule:null};l&&ee(l.timeExtent)&&(n=l.timeExtent)}if(s=this._combineMosaicRuleWithTimeExtent(s,n),ee(s)&&s.multidimensionalDefinition){const{isOutside:a}=nO(o,{multidimensionalDefinition:s.multidimensionalDefinition});if(a)return{isOutSide:!0,timeExtent:null,mosaicRule:null}}return{isOutSide:!1,timeExtent:n,mosaicRule:s}}_updateFeatureWithRasterAttributeTableValues(r,n){const s=this.rasterInfo.attributeTable||this.serviceRasterInfo.attributeTable;if(Re(s))return;const{features:o,fields:a}=s,l=a.map(d=>d.name).filter(d=>d.toLowerCase()==="value"),u=l&&l[0];if(!u)return;const c=o.filter(d=>d.attributes[u]===(n!=null?parseInt(n,10):null));c&&c[0]&&a.forEach(d=>{const f=this._rasterAttributeTableFieldPrefix+d.name;r.attributes[f]=c[0].attributes[d.name]})}_updateFeatureWithMagDirValues(r,n){if(!this._isVectorDataSet())return;const s=n.split(/,\s*/).map(c=>parseFloat(c)),o=s.map(c=>[c]),a=s.map(c=>({minValue:c,maxValue:c,noDataValue:null})),l=new ai({height:1,width:1,pixelType:"f32",pixels:o,statistics:a});this.pixelFilter!=null&&this.pixelFilter({pixelBlock:l,extent:new Kt(0,0,0,0,this.spatialReference)});const u=this.serviceDataType==="esriImageServiceDataTypeVector-MagDir"?[l.pixels[0][0],l.pixels[1][0]]:VD([l.pixels[0][0],l.pixels[1][0]]);r.attributes["Raster.Magnitude"]=u[0],r.attributes["Raster.Direction"]=u[1]}_updateFeatureWithDomainValues(r){const n=this.fields&&this.fields.filter(s=>s.domain&&s.domain.type==="coded-value");n?.forEach(s=>{const o=r.attributes[s.name];if(o!=null){const a=s.domain.codedValues.find(l=>l.code===o);a&&(r.attributes[s.name]=a.name)}})}_updateResponseFieldNames(r,n){if(!n||n.length<1)return;const s=this.fieldsIndex;Re(s)||r.forEach(o=>{if(o&&o.attributes)for(const a of n){const l=s.get(a)?.name;l&&l!==a&&(o.attributes[a]=o.attributes[l],delete o.attributes[l])}})}_getRenderingRuleString(r){if(r){let n=r.toJSON();return n=n.rasterFunctionDefinition??n,(n.thumbnail||n.thumbnailEx)&&(n.thumbnail=n.thumbnailEx=null),JSON.stringify(n)}return null}_hasRenderingRule(r){return r!=null&&r.functionName!=null&&r.functionName.toLowerCase()!=="none"}_updateRenderingRulesFunctionName(r,n){if(!r||r.length<1)return;if(r==="Raw")return r.replace("Raw","None");const s=r.toLowerCase().replace(/ /gi,"_");return n.has(s)?n.get(s):r}_isRFTJson(r){return r&&r.name&&r.arguments&&r.function&&r.hasOwnProperty("functionType")}_isVectorDataSet(){return this.serviceDataType==="esriImageServiceDataTypeVector-UV"||this.serviceDataType==="esriImageServiceDataTypeVector-MagDir"}_applyMosaicAndRenderingRules(r){const{raster:n,mosaicRule:s,renderingRule:o}=this;o&&r.renderingRule==null&&(r.renderingRule=o),s&&r.mosaicRule==null&&(r.mosaicRule=s),n&&r.raster==null&&(r.raster=n)}_readCapabilities(r){const n=r.capabilities?r.capabilities.toLowerCase().split(",").map(v=>v.trim()):["image","catalog"],{currentVersion:s,advancedQueryCapabilities:o,maxRecordCount:a}=r,l=n.includes("image"),u=r.serviceDataType==="esriImageServiceDataTypeElevation",c=!!(r.spatialReference||r.extent&&r.extent.spatialReference),d=n.includes("edit"),f=n.includes("mensuration")&&c,m=r.mensurationCapabilities==null?[]:r.mensurationCapabilities.toLowerCase().split(",").map(v=>v.trim()),g=f&&m.includes("basic");return{data:{supportsAttachment:!1},operations:{supportsComputeHistograms:l,supportsExportImage:l,supportsIdentify:l,supportsMeasure:f,supportsDownload:n.includes("download"),supportsQuery:n.includes("catalog")&&r.fields&&r.fields.length>0,supportsGetSamples:s>=10.2&&l,supportsProject:s>=10.3&&l,supportsComputeStatisticsHistograms:s>=10.4&&l,supportsQueryBoundary:s>=10.6&&l,supportsCalculateVolume:s>=10.7&&u,supportsComputePixelLocation:s>=10.7&&n.includes("catalog"),supportsComputeAngles:s>=10.91,supportsAdd:d,supportsDelete:d,supportsEditing:d,supportsUpdate:d,supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsChangeTracking:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsExceedsLimitStatistics:!1,supportsQueryAnalytics:!1,supportsQueryTopFeatures:!1},query:{maxRecordCount:a,maxRecordCountFactor:void 0,supportsStatistics:!!o?.supportsStatistics,supportsOrderBy:!!o?.supportsOrderBy,supportsDistinct:!!o?.supportsDistinct,supportsPagination:!!o?.supportsPagination,supportsStandardizedQueriesOnly:!!o?.useStandardizedQueries,supportsPercentileStatistics:!!o?.supportsPercentileStatistics,supportsCentroid:!!o?.supportsReturningGeometryCentroid,supportsDistance:!!o?.supportsQueryWithDistance,supportsExtent:!!o?.supportsReturningQueryExtent,supportsGeometryProperties:!!o?.supportsReturningGeometryProperties,supportsHavingClause:!!o?.supportsHavingClause,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsMaxRecordCountFactor:!1,supportsSqlExpression:!1,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!1,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!1,supportsCacheHint:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!!o?.supportsDefaultSR,supportsFullTextSearch:!1,supportsCompactGeometry:!1,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0},mensuration:{supportsDistanceAndAngle:g,supportsAreaAndPerimeter:g,supportsPointOrCentroid:g,supportsHeightFromBaseAndTop:f&&m.includes("base-top height"),supportsHeightFromBaseAndTopShadow:f&&m.includes("base-top shadow height"),supportsHeightFromTopAndTopShadow:f&&m.includes("top-top shadow height"),supports3D:f&&m.includes("3d")}}}};function i(r){return r?.path??""}return h([p()],t.prototype,"_functionRasterInfos",void 0),h([p()],t.prototype,"_rasterJobHandler",void 0),h([p()],t.prototype,"_cachedRendererJson",void 0),h([p({readOnly:!0})],t.prototype,"_serviceSupportsMosaicRule",void 0),h([Ye("_serviceSupportsMosaicRule",["currentVersion","fields"])],t.prototype,"readServiceSupportsMosaicRule",null),h([p()],t.prototype,"_rasterAttributeTableFieldPrefix",void 0),h([p({readOnly:!0})],t.prototype,"_rasterFunctionNamesIndex",null),h([p()],t.prototype,"adjustAspectRatio",void 0),h([p({type:[wi],json:{write:!0}})],t.prototype,"bandIds",void 0),h([Ye("bandIds")],t.prototype,"readBandIds",null),h([p({readOnly:!0,json:{read:!1}})],t.prototype,"capabilities",void 0),h([Ye("service","capabilities",["capabilities","currentVersion","serviceDataType"])],t.prototype,"readCapabilities",null),h([p({type:Number})],t.prototype,"compressionQuality",void 0),h([it("compressionQuality")],t.prototype,"writeCompressionQuality",null),h([p({type:Number})],t.prototype,"compressionTolerance",void 0),h([it("compressionTolerance")],t.prototype,"writeCompressionTolerance",null),h([p({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),h([p({readOnly:!0,dependsOn:["_serviceSupportsMosaicRule"]})],t.prototype,"defaultMosaicRule",void 0),h([Ye("defaultMosaicRule",["defaultMosaicMethod"])],t.prototype,"readDefaultMosaicRule",null),h([p({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),h([p({readOnly:!0,constructOnly:!0})],t.prototype,"exportImageServiceParameters",void 0),h([p()],t.prototype,"rasterInfo",void 0),h([p({readOnly:!0,type:[ol]})],t.prototype,"fields",void 0),h([p({readOnly:!0})],t.prototype,"fieldsIndex",null),h([p({type:["png","png8","png24","png32","jpg","bmp","gif","jpgpng","lerc","tiff"],json:{write:!0}})],t.prototype,"format",null),h([Ye("service","format",["serviceDataType"])],t.prototype,"readFormat",null),h([p({type:Kt})],t.prototype,"fullExtent",void 0),h([p({readOnly:!0})],t.prototype,"hasMultidimensions",void 0),h([p({json:{read:{source:"maxImageHeight"}}})],t.prototype,"imageMaxHeight",void 0),h([p({json:{read:{source:"maxImageWidth"}}})],t.prototype,"imageMaxWidth",void 0),h([p({type:String,json:{type:Xf.jsonValues,read:Xf.read,write:Xf.write}})],t.prototype,"interpolation",void 0),h([p()],t.prototype,"minScale",void 0),h([Ye("service","minScale")],t.prototype,"readMinScale",null),h([p()],t.prototype,"maxScale",void 0),h([Ye("service","maxScale")],t.prototype,"readMaxScale",null),h([p({type:ll})],t.prototype,"mosaicRule",null),h([Ye("mosaicRule",["mosaicRule","defaultMosaicMethod"])],t.prototype,"readMosaicRule",null),h([it("mosaicRule")],t.prototype,"writeMosaicRule",null),h([p()],t.prototype,"multidimensionalInfo",void 0),h([p({type:RAe,json:{write:!0}})],t.prototype,"multidimensionalSubset",void 0),h([p({json:{type:wi}})],t.prototype,"noData",void 0),h([it("noData")],t.prototype,"writeNoData",null),h([p({type:String,json:{type:wx.jsonValues,read:wx.read,write:wx.write}})],t.prototype,"noDataInterpretation",void 0),h([p({type:String,readOnly:!0,json:{read:{source:["fields"]}}})],t.prototype,"objectIdField",void 0),h([Ye("objectIdField")],t.prototype,"readObjectIdField",null),h([p({})],t.prototype,"geometryType",void 0),h([p({})],t.prototype,"typeIdField",void 0),h([p({})],t.prototype,"types",void 0),h([p({readOnly:!0})],t.prototype,"parsedUrl",null),h([p({type:Function})],t.prototype,"pixelFilter",void 0),h([p()],t.prototype,"raster",void 0),h([p({readOnly:!0})],t.prototype,"sourceType",void 0),h([Ye("sourceType",["serviceSourceType","fields"])],t.prototype,"readSourceType",null),h([p()],t.prototype,"viewId",void 0),h([p({types:v8,json:{name:"layerDefinition.drawingInfo.renderer",origins:{"web-scene":{types:b8,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:r=>({enabled:r&&r.type!=="vector-field"&&r.type!=="flow"})}}}}})],t.prototype,"renderer",null),h([Ye("renderer")],t.prototype,"readRenderer",null),h([it("renderer")],t.prototype,"writeRenderer",null),h([p()],t.prototype,"symbolizer",void 0),h([p(vA)],t.prototype,"opacity",void 0),h([p({readOnly:!0})],t.prototype,"rasterFields",null),h([p({constructOnly:!0})],t.prototype,"rasterFunctionInfos",void 0),h([p({type:zi})],t.prototype,"renderingRule",null),h([Ye("renderingRule",["renderingRule","rasterFunctionInfos"])],t.prototype,"readRenderingRule",null),h([it("renderingRule")],t.prototype,"writeRenderingRule",null),h([p()],t.prototype,"serviceDataType",void 0),h([p({readOnly:!0,type:Et})],t.prototype,"spatialReference",void 0),h([Ye("spatialReference",["spatialReference","extent"])],t.prototype,"readSpatialReference",null),h([p({json:{type:pO.jsonValues}})],t.prototype,"pixelType",void 0),h([Ye("pixelType")],t.prototype,"readPixelType",null),h([it("pixelType")],t.prototype,"writePixelType",null),h([p({constructOnly:!0,type:x3})],t.prototype,"serviceRasterInfo",void 0),h([p()],t.prototype,"sourceJSON",void 0),h([p(f3)],t.prototype,"url",void 0),h([p({readOnly:!0})],t.prototype,"version",void 0),h([Ye("version",["currentVersion","fields","timeInfo"])],t.prototype,"readVersion",null),t=h([ce("esri.layers.mixins.ArcGISImageService")],t),t};let ql=class extends q0(T4(J0(Cw($w(JCe(Ow(w4(g4(Nm(Rh)))))))))){constructor(...t){super(...t),this.legendEnabled=!0,this.isReference=null,this.operationalLayerType="ArcGISImageServiceLayer",this.popupEnabled=!0,this.popupTemplate=null,this.type="imagery"}normalizeCtorArgs(t,i){return typeof t=="string"?{url:t,...i}:t}load(t){const i=ee(t)?t.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},t).catch(da).then(()=>this._fetchService(i))),Promise.resolve(this)}writeOperationalLayerType(t,i,r){const n=this.renderer?.type==="vector-field";i[r]=n?"ArcGISImageServiceVectorLayer":"ArcGISImageServiceLayer"}get defaultPopupTemplate(){return this.createPopupTemplate()}createPopupTemplate(t){const i=this.rasterFields,r=this.title,n=new Set;let s=!1,o=!1;this.capabilities&&(s=this.capabilities.operations.supportsQuery&&this.fields&&this.fields.length>0,o=this.serviceDataType==="esriImageServiceDataTypeVector-UV"||this.serviceDataType==="esriImageServiceDataTypeVector-MagDir");const a=new Set;s&&a.add("raster.itempixelvalue");for(const l of i){const u=l.name.toLowerCase();a.has(u)||u.includes("raster.servicepixelvalue.")||n.add(l.name)}return o&&n.add("raster.magnitude").add("raster.direction"),LD({fields:i,title:r},{...t,visibleFieldNames:n})}queryFeatures(t,i){return this.queryRasters(t,i).then(r=>{if(r?.features)for(const n of r.features)n.layer=n.sourceLayer=this;return r})}queryFeatureCount(t,i){return this.queryRasterCount(t,i)}redraw(){this.emit("redraw")}serviceSupportsSpatialReference(t){return kD(this,t)}};h([p(hD)],ql.prototype,"legendEnabled",void 0),h([p({type:["show","hide"]})],ql.prototype,"listMode",void 0),h([p({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],ql.prototype,"isReference",void 0),h([p({type:["ArcGISImageServiceLayer"],json:{origins:{"web-map":{type:["ArcGISImageServiceLayer","ArcGISImageServiceVectorLayer"],read:!1,write:{target:"layerType",ignoreOrigin:!0}}}}})],ql.prototype,"operationalLayerType",void 0),h([it("web-map","operationalLayerType")],ql.prototype,"writeOperationalLayerType",null),h([p(p3)],ql.prototype,"popupEnabled",void 0),h([p({type:Rm,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],ql.prototype,"popupTemplate",void 0),h([p({readOnly:!0})],ql.prototype,"defaultPopupTemplate",null),h([p({readOnly:!0,json:{read:!1}})],ql.prototype,"type",void 0),ql=h([ce("esri.layers.ImageryLayer")],ql);const ZCe=ql,aut=Object.freeze(Object.defineProperty({__proto__:null,default:ZCe},Symbol.toStringTag,{value:"Module"})),xne=96;function H8(e,t){const i=t||e.extent,r=e.width,n=dp(i&&i.spatialReference);return i&&r?i.width/r*n*xK*xne:0}function lut(e,t){return e/(dp(t)*xK*xne)}let W8=class{constructor(t,i,r=""){this.major=t,this.minor=i,this._context=r}lessThan(t,i){return this.major<t||t===this.major&&this.minor<i}since(t,i){return!this.lessThan(t,i)}validate(t){if(this.major!==t.major){const i=this._context&&this._context+":",r=this._context&&this._context+" ";throw new Ce(i+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new W8(this.major,this.minor,this._context)}static parse(t,i=""){const[r,n]=t.split("."),s=/^\s*\d+\s*$/;if(!r||!r.match||!r.match(s))throw new Ce((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!n||!n.match||!n.match(s))throw new Ce((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const o=parseInt(r,10),a=parseInt(n,10);return new W8(o,a,i)}};const Sne=e=>{let t=class extends e{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=void 0,this._allLayersAndTablesPromise=null,this._allLayersAndTablesMap=null}readCapabilities(i,r){const n=r.capabilities&&r.capabilities.split(",").map(S=>S.toLowerCase().trim());if(!n)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const s=this.type,o=s!=="tile"&&!!r.supportsDynamicLayers,a=n.includes("query"),l=n.includes("map"),u=!!r.exportTilesAllowed,c=n.includes("tilemap"),d=n.includes("data"),f=s!=="tile"&&(!r.tileInfo||o),m=s!=="tile"&&(!r.tileInfo||o),g=s!=="tile",v=r.cimVersion&&W8.parse(r.cimVersion),b=v?.since(1,4)??!1,x=v?.since(2,0)??!1;return{operations:{supportsExportMap:l,supportsExportTiles:u,supportsIdentify:a,supportsQuery:d,supportsTileMap:c},exportMap:l?{supportsArcadeExpressionForLabeling:b,supportsSublayersChanges:g,supportsDynamicLayers:o,supportsSublayerVisibility:f,supportsSublayerDefinitionExpression:m,supportsCIMSymbols:x}:null,exportTiles:u?{maxExportTilesCount:+r.maxExportTilesCount}:null}}readVersion(i,r){let n=r.currentVersion;return n||(n=r.hasOwnProperty("capabilities")||r.hasOwnProperty("tables")?10:r.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),n}async fetchSublayerInfo(i,r){try{return await this.fetchAllLayersAndTables(r),this._allLayersAndTablesMap?.get(i)}catch{return}}async fetchAllLayersAndTables(i){await this.load(i),this._allLayersAndTablesPromise||(this._allLayersAndTablesPromise=St(Ln(this.url).path+"/layers",{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey}}).then(n=>{this._allLayersAndTablesMap=new Map;for(const s of n.data.layers)this._allLayersAndTablesMap.set(s.id,s);return{result:n.data}},n=>({error:n})));const r=await this._allLayersAndTablesPromise;if(hr(i),"result"in r)return r.result;throw r.error}};return h([p({readOnly:!0})],t.prototype,"capabilities",void 0),h([Ye("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],t.prototype,"readCapabilities",null),h([p({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),h([p({type:Kt})],t.prototype,"fullExtent",void 0),h([p(dte)],t.prototype,"id",void 0),h([p({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],t.prototype,"legendEnabled",void 0),h([p(p3)],t.prototype,"popupEnabled",void 0),h([p({type:Et})],t.prototype,"spatialReference",void 0),h([p({readOnly:!0})],t.prototype,"version",void 0),h([Ye("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],t.prototype,"readVersion",null),t=h([ce("esri.layers.mixins.ArcGISMapService")],t),t};let uv=class extends Pt{constructor(t){super(t),this.getCollections=null}initialize(){this.own(AY(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const t=ee(this.getCollections)?this.getCollections():null;if(Re(t))return void this.removeAll();let i=0;for(const r of t)ee(r)&&(i=this._processCollection(i,r));this.splice(i,this.length)}_createNewInstance(t){return new Pt(t)}_processCollection(t,i){if(!i)return t;const r=this.itemFilterFunction?this.itemFilterFunction:n=>!!n;for(const n of i)if(n){if(r(n)){const s=this.indexOf(n,t);s>=0?s!==t&&this.reorder(n,t):this.add(n,t),++t}if(this.getChildrenFunction){const s=this.getChildrenFunction(n);if(Array.isArray(s))for(const o of s)t=this._processCollection(t,o);else t=this._processCollection(t,s)}}return t}};h([p()],uv.prototype,"getCollections",void 0),h([p()],uv.prototype,"getChildrenFunction",void 0),h([p()],uv.prototype,"itemFilterFunction",void 0),uv=h([ce("esri.core.CollectionFlattener")],uv);const M0=uv;async function YCe(e,t,i){const r=Hs(e);return oCe(r,On.from(t),{...i}).then(n=>({count:n.data.count,extent:Kt.fromJSON(n.data.extent)}))}function KCe(e,t){return t}function r9(e,t,i,r){switch(i){case 0:return hS(e,t+r,0);case 1:return e.originPosition==="lowerLeft"?hS(e,t+r,1):e$e(e,t+r,1)}}function Ene(e,t,i,r){return i===2?hS(e,t,2):r9(e,t,i,r)}function QCe(e,t,i,r){return i===2?hS(e,t,3):r9(e,t,i,r)}function XCe(e,t,i,r){return i===3?hS(e,t,3):Ene(e,t,i,r)}function hS({translate:e,scale:t},i,r){return e[r]+i*t[r]}function e$e({translate:e,scale:t},i,r){return e[r]-i*t[r]}let t$e=class{constructor(t){this._options=t,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=KCe,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(t){if(this._options.applyTransform&&(t.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!t.hasZ)return;const i=tD(t.geometryType,this._options.sourceSpatialReference,t.spatialReference);if(!Re(i))for(const r of t.features)i(r.geometry)}createSpatialReference(){return{}}addField(t,i){const r=t.fields;Wf(r),r.push(i);const n=r.map(s=>s.name);this._attributesConstructor=function(){for(const s of n)this[s]=null}}addFeature(t,i){t.features.push(i)}prepareFeatures(t){switch(this._transform=t.transform,this._options.applyTransform&&t.transform&&(this._applyTransform=this._deriveApplyTransform(t)),this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&this._vertexDimension++,t.geometryType){case"esriGeometryPoint":this.addCoordinate=(i,r,n)=>this.addCoordinatePoint(i,r,n),this.createGeometry=i=>this.createPointGeometry(i);break;case"esriGeometryPolygon":this.addCoordinate=(i,r,n)=>this._addCoordinatePolygon(i,r,n),this.createGeometry=i=>this._createPolygonGeometry(i);break;case"esriGeometryPolyline":this.addCoordinate=(i,r,n)=>this._addCoordinatePolyline(i,r,n),this.createGeometry=i=>this._createPolylineGeometry(i);break;case"esriGeometryMultipoint":this.addCoordinate=(i,r,n)=>this._addCoordinateMultipoint(i,r,n),this.createGeometry=i=>this._createMultipointGeometry(i)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(t,i,r){this._lengths.length===0&&(this._toAddInCurrentPath=i),this._lengths.push(i)}addQueryGeometry(t,i){const{queryGeometry:r,queryGeometryType:n}=i,s=P8(r.clone(),r,!1,!1,this._transform),o=vne(s,n,!1,!1);t.queryGeometryType=n,t.queryGeometry={...o}}createPointGeometry(t){const i={x:0,y:0,spatialReference:t.spatialReference};return t.hasZ&&(i.z=0),t.hasM&&(i.m=0),i}addCoordinatePoint(t,i,r){const n=Uo(this._transform,"transform");switch(i=this._applyTransform(n,i,r,0),r){case 0:t.x=i;break;case 1:t.y=i;break;case 2:"z"in t?t.z=i:t.m=i;break;case 3:t.m=i}}_transformPathLikeValue(t,i){let r=0;i<=1&&(r=this._previousCoordinate[i],this._previousCoordinate[i]+=t);const n=Uo(this._transform,"transform");return this._applyTransform(n,t,i,r)}_addCoordinatePolyline(t,i,r){this._dehydratedAddPointsCoordinate(t.paths,i,r)}_addCoordinatePolygon(t,i,r){this._dehydratedAddPointsCoordinate(t.rings,i,r)}_addCoordinateMultipoint(t,i,r){r===0&&t.points.push([]);const n=this._transformPathLikeValue(i,r);t.points[t.points.length-1].push(n)}_createPolygonGeometry(t){return{rings:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createPolylineGeometry(t){return{paths:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createMultipointGeometry(t){return{points:[],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_dehydratedAddPointsCoordinate(t,i,r){r===0&&this._toAddInCurrentPath--==0&&(t.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const n=this._transformPathLikeValue(i,r),s=t[t.length-1];r===0&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),s.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=n}_deriveApplyTransform(t){const{hasZ:i,hasM:r}=t;return i&&r?XCe:i?Ene:r?QCe:r9}};async function i$e(e,t,i){const r=Hs(e),n={...i},s=On.from(t),o=!s.quantizationParameters,{data:a}=await iCe(r,s,new t$e({sourceSpatialReference:s.sourceSpatialReference,applyTransform:o}),n);return a}let Hl=class extends Lt{constructor(t){super(t),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.url=null}get parsedUrl(){return Ln(this.url)}async execute(t,i){const r=await this.executeJSON(t,i);return this.featureSetFromJSON(t,r,i)}async executeJSON(t,i){const r=this._normalizeQuery(t),n=t.outStatistics?.[0]!=null,s=Ze("featurelayer-pbf-statistics"),o=!n||s;let a;if(this.pbfSupported&&o)try{a=await i$e(this.url,r,i)}catch(l){if(l.name!=="query:parsing-pbf")throw l;this.pbfSupported=!1}return this.pbfSupported&&o||(a=await nne(this.url,r,i)),this._normalizeFields(a.fields),a}async featureSetFromJSON(t,i,r){if(!this._queryIs3DObjectFormat(t)||Re(this.infoFor3D)||!i.assetMaps||!i.features||!i.features.length)return z0.fromJSON(i);const{meshFeatureSetFromJSON:n}=await ih(De(()=>import("./meshFeatureSet-13e8716e.js").then(s=>s.a),["./meshFeatureSet-13e8716e.js","./preload-helper-388ac9d5.js","./georeference-9ba4da4f.js","./mat3f64-221ce671.js","./mat4f64-1413b4a7.js","./spatialReferenceEllipsoidUtils-16f7c4fd.js","./quat-55be1b4e.js","./quatf64-3363c48e.js","./BufferView-7889b416.js","./vec33-cdbb49d4.js","./imageUtils-c2d0d1ae.js","./earcut-61f7b102.js","./deduplicate-0ee60c69.js","./Indices-aedba8a7.js"],import.meta.url),r);return n(t,this.infoFor3D,i)}executeForCount(t,i){return wne(this.url,this._normalizeQuery(t),i)}executeForExtent(t,i){return YCe(this.url,this._normalizeQuery(t),i)}executeForIds(t,i){return i9(this.url,this._normalizeQuery(t),i)}async executeRelationshipQuery(t,i){const[{default:r},{executeRelationshipQuery:n}]=await ih(Promise.all([De(()=>Promise.resolve().then(()=>$B),void 0,import.meta.url),De(()=>import("./executeRelationshipQuery-c61949ee.js"),["./executeRelationshipQuery-c61949ee.js","./preload-helper-388ac9d5.js"],import.meta.url)]),i);return t=r.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),n(this.url,t,i)}async executeRelationshipQueryForCount(t,i){const[{default:r},{executeRelationshipQueryForCount:n}]=await ih(Promise.all([De(()=>Promise.resolve().then(()=>$B),void 0,import.meta.url),De(()=>import("./executeRelationshipQuery-c61949ee.js"),["./executeRelationshipQuery-c61949ee.js","./preload-helper-388ac9d5.js"],import.meta.url)]),i);return t=r.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),n(this.url,t,i)}async executeAttachmentQuery(t,i){const{executeAttachmentQuery:r,fetchAttachments:n,processAttachmentQueryResult:s}=await ih(De(()=>import("./queryAttachments-1cd315d0.js"),["./queryAttachments-1cd315d0.js","./preload-helper-388ac9d5.js"],import.meta.url),i),o=Hs(this.url);return s(o,await(this.queryAttachmentsSupported?r(o,t,i):n(o,t,i)))}async executeTopFeaturesQuery(t,i){const{executeTopFeaturesQuery:r}=await ih(De(()=>import("./executeTopFeaturesQuery-080bacda.js"),["./executeTopFeaturesQuery-080bacda.js","./queryTopFeatures-73b00349.js","./preload-helper-388ac9d5.js"],import.meta.url),i);return r(this.parsedUrl,t,this.sourceSpatialReference,i)}async executeForTopIds(t,i){const{executeForTopIds:r}=await ih(De(()=>import("./executeForTopIds-e25e0b0e.js"),["./executeForTopIds-e25e0b0e.js","./queryTopFeatures-73b00349.js","./preload-helper-388ac9d5.js"],import.meta.url),i);return r(this.parsedUrl,t,i)}async executeForTopExtents(t,i){const{executeForTopExtents:r}=await ih(De(()=>import("./executeForTopExtents-924590fd.js"),["./executeForTopExtents-924590fd.js","./queryTopFeatures-73b00349.js","./preload-helper-388ac9d5.js"],import.meta.url),i);return r(this.parsedUrl,t,i)}async executeForTopCount(t,i){const{executeForTopCount:r}=await ih(De(()=>import("./executeForTopCount-e5866b78.js"),["./executeForTopCount-e5866b78.js","./queryTopFeatures-73b00349.js","./preload-helper-388ac9d5.js"],import.meta.url),i);return r(this.parsedUrl,t,i)}_normalizeQuery(t){let i=On.from(t);if(i.sourceSpatialReference=i.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(i=i===t?i.clone():i,i.gdbVersion=t.gdbVersion||this.gdbVersion,i.dynamicDataSource=t.dynamicDataSource?Vo.from(t.dynamicDataSource):this.dynamicDataSource),ee(this.infoFor3D)&&this._queryIs3DObjectFormat(t)){i=i===t?i.clone():i,i.formatOf3DObjects=null;for(const r of this.infoFor3D.queryFormats){if(r==="3D_glb"){i.formatOf3DObjects=r;break}r!=="3D_gltf"||i.formatOf3DObjects||(i.formatOf3DObjects=r)}if(!i.formatOf3DObjects)throw new Ce("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(Re(i.outFields)||!i.outFields.includes("*")){i=i===t?i.clone():i,Re(i.outFields)&&(i.outFields=[]);const{originX:r,originY:n,originZ:s,translationX:o,translationY:a,translationZ:l,scaleX:u,scaleY:c,scaleZ:d,rotationX:f,rotationY:m,rotationZ:g,rotationDeg:v}=this.infoFor3D.transformFieldRoles;i.outFields.push(r,n,s,o,a,l,u,c,d,f,m,g,v)}}return i}_normalizeFields(t){if(ee(this.fieldsIndex)&&ee(t))for(const i of t){const r=this.fieldsIndex.get(i.name);r&&Object.assign(i,r.toJSON())}}_queryIs3DObjectFormat(t){return ee(this.infoFor3D)&&t.returnGeometry===!0&&t.multipatchOption!=="xyFootprint"&&!t.outStatistics}};h([p({type:Vo})],Hl.prototype,"dynamicDataSource",void 0),h([p()],Hl.prototype,"fieldsIndex",void 0),h([p()],Hl.prototype,"gdbVersion",void 0),h([p()],Hl.prototype,"infoFor3D",void 0),h([p({readOnly:!0})],Hl.prototype,"parsedUrl",null),h([p()],Hl.prototype,"pbfSupported",void 0),h([p()],Hl.prototype,"queryAttachmentsSupported",void 0),h([p()],Hl.prototype,"sourceSpatialReference",void 0),h([p({type:String})],Hl.prototype,"url",void 0),Hl=h([ce("esri.tasks.QueryTask")],Hl);const r$e=Hl;var oT;function fO(e){return e!=null&&e.type==="esriSMS"}function mO(e,t,i){const r=this.originIdOf(t)>=pa(i.origin);return{ignoreOrigin:!0,allowNull:r,enabled:!!i&&i.layer?.type==="map-image"&&(i.writeSublayerStructure||r)}}function rG(e,t,i){return{enabled:!!i&&i.layer?.type==="tile"&&this._isOverridden(t)}}function kl(e,t,i){return{ignoreOrigin:!0,enabled:i&&i.writeSublayerStructure||!1}}function nM(e,t,i){return{ignoreOrigin:!0,enabled:!!i&&(i.writeSublayerStructure||this.originIdOf(t)>=pa(i.origin))}}let n$e=0;const tg=new Set;tg.add("layer"),tg.add("parent"),tg.add("loaded"),tg.add("loadStatus"),tg.add("loadError"),tg.add("loadWarnings");let ei=oT=class extends Wo(Nm(Om(Ml))){constructor(e){super(e),this.capabilities=void 0,this.fields=null,this.fullExtent=null,this.geometryType=null,this.globalIdField=null,this.legendEnabled=!0,this.objectIdField=null,this.popupEnabled=!0,this.popupTemplate=null,this.sourceJSON=null,this.title=null,this.typeIdField=null,this.types=null,this._lastParsedUrl=null}async load(e){return this.addResolvingPromise((async()=>{const{layer:t,source:i,url:r}=this;if(!t&&!r)throw new Ce("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:this});let n=null;if(!t||this.originIdOf("url")>xt.SERVICE||i?.type==="data-layer")n=(await St(r,{responseType:"json",query:{f:"json"},...e})).data;else{let s=this.id;i?.type==="map-layer"&&(s=i.mapLayerId),n=await t.fetchSublayerInfo(s,e)}n&&(this.sourceJSON=n,this.read({layerDefinition:n},{origin:"service"}))})()),this}readCapabilities(e,t){t=t.layerDefinition||t;const{operations:{supportsQuery:i,supportsQueryAttachments:r},query:{supportsFormatPBF:n},data:{supportsAttachment:s}}=wD(t,this.url);return{exportMap:{supportsModification:!!t.canModifyLayer},operations:{supportsQuery:i,supportsQueryAttachments:r},data:{supportsAttachment:s},query:{supportsFormatPBF:n}}}get defaultPopupTemplate(){return this.createPopupTemplate()}set definitionExpression(e){this._setAndNotifyLayer("definitionExpression",e)}get fieldsIndex(){return new RD(this.fields||[])}set floorInfo(e){this._setAndNotifyLayer("floorInfo",e)}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){for(const i of t.fields)if(i.type==="esriFieldTypeGlobalID")return i.name}}get id(){return this._get("id")??n$e++}set id(e){this._get("id")!==e&&(this.layer?.capabilities?.exportMap?.supportsDynamicLayers!==!1?this._set("id",e):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}set labelingInfo(e){this._setAndNotifyLayer("labelingInfo",e)}writeLabelingInfo(e,t,i,r){e&&e.length&&(t.layerDefinition={drawingInfo:{labelingInfo:e.map(n=>n.write({},r))}})}set labelsVisible(e){this._setAndNotifyLayer("labelsVisible",e)}set layer(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach(t=>t.layer=e)}set listMode(e){this._set("listMode",e)}set minScale(e){this._setAndNotifyLayer("minScale",e)}readMinScale(e,t){return t.minScale||t.layerDefinition&&t.layerDefinition.minScale||0}set maxScale(e){this._setAndNotifyLayer("maxScale",e)}readMaxScale(e,t){return t.maxScale||t.layerDefinition&&t.layerDefinition.maxScale||0}get effectiveScaleRange(){const{minScale:e,maxScale:t}=this;return{minScale:e,maxScale:t}}readObjectIdFieldFromService(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){for(const i of t.fields)if(i.type==="esriFieldTypeOID")return i.name}}set opacity(e){this._setAndNotifyLayer("opacity",e)}readOpacity(e,t){const i=t.layerDefinition;return 1-.01*((i?.transparency!=null?i.transparency:i?.drawingInfo?.transparency)??0)}writeOpacity(e,t,i,r){t.layerDefinition={drawingInfo:{transparency:100-100*e}}}writeParent(e,t){this.parent&&this.parent!==this.layer?t.parentLayerId=H5(this.parent.id):t.parentLayerId=-1}get queryTask(){if(!this.layer)return null;const{spatialReference:e}=this.layer,t="gdbVersion"in this.layer?this.layer.gdbVersion:void 0,{capabilities:i,fieldsIndex:r}=this,n=Ze("featurelayer-pbf")&&i?.query.supportsFormatPBF,s=i?.operations?.supportsQueryAttachments??!1;return new r$e({url:this.url,pbfSupported:n,fieldsIndex:r,gdbVersion:t,sourceSpatialReference:e,queryAttachmentsSupported:s})}set renderer(e){if(e){for(const t of e.getSymbols())if(w0(t)){et.getLogger(this.declaredClass).warn("Sublayer renderer should use 2D symbols");break}}this._setAndNotifyLayer("renderer",e)}get source(){return this._get("source")||new jd({mapLayerId:this.id})}set source(e){this._setAndNotifyLayer("source",e)}set sublayers(e){this._handleSublayersChange(e,this._get("sublayers")),this._set("sublayers",e)}castSublayers(e){return nn(Pt.ofType(oT),e)}writeSublayers(e,t,i){this.sublayers?.length&&(t[i]=this.sublayers.map(r=>r.id).toArray().reverse())}readTypeIdField(e,t){let i=(t=t.layerDefinition||t).typeIdField;if(i&&t.fields){i=i.toLowerCase();const r=t.fields.find(n=>n.name.toLowerCase()===i);r&&(i=r.name)}return i}get url(){const e=this.layer?.parsedUrl??this._lastParsedUrl,t=this.source;if(!e)return null;if(this._lastParsedUrl=e,t?.type==="map-layer")return`${e.path}/${t.mapLayerId}`;const i={layer:JSON.stringify({source:this.source})};return`${e.path}/dynamicLayer?${lm(i)}`}set url(e){this._overrideIfSome("url",e)}set visible(e){this._setAndNotifyLayer("visible",e)}writeVisible(e,t,i,r){t[i]=this.getAtOrigin("defaultVisibility","service")||e}clone(){const{store:e}=zn(this),t=new oT;return zn(t).store=e.clone(tg),this.commitProperty("url"),t._lastParsedUrl=this._lastParsedUrl,t}createPopupTemplate(e){return LD(this,e)}createQuery(){return new On({returnGeometry:!0,where:this.definitionExpression||"1=1"})}async createFeatureLayer(){if(this.hasOwnProperty("sublayers"))return null;const{layer:e}=this,t=e?.parsedUrl,i=new(await De(()=>Promise.resolve().then(()=>nTe),void 0,import.meta.url)).default({url:t?.path});return t&&this.source&&(this.source.type==="map-layer"?i.layerId=this.source.mapLayerId:i.dynamicDataSource=this.source),e?.refreshInterval!=null&&(i.refreshInterval=e.refreshInterval),this.definitionExpression&&(i.definitionExpression=this.definitionExpression),this.floorInfo&&(i.floorInfo=Le(this.floorInfo)),this.originIdOf("labelingInfo")>xt.SERVICE&&(i.labelingInfo=Le(this.labelingInfo)),this.originIdOf("labelsVisible")>xt.DEFAULTS&&(i.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>xt.DEFAULTS&&(i.legendEnabled=this.legendEnabled),this.originIdOf("visible")>xt.DEFAULTS&&(i.visible=this.visible),this.originIdOf("minScale")>xt.DEFAULTS&&(i.minScale=this.minScale),this.originIdOf("maxScale")>xt.DEFAULTS&&(i.maxScale=this.maxScale),this.originIdOf("opacity")>xt.DEFAULTS&&(i.opacity=this.opacity),this.originIdOf("popupTemplate")>xt.DEFAULTS&&(i.popupTemplate=Le(this.popupTemplate)),this.originIdOf("renderer")>xt.SERVICE&&(i.renderer=Le(this.renderer)),this.source?.type==="data-layer"&&(i.dynamicDataSource=this.source.clone()),this.originIdOf("title")>xt.DEFAULTS&&(i.title=this.title),e?.type==="map-image"&&e.originIdOf("customParameters")>xt.DEFAULTS&&(i.customParameters=e.customParameters),e?.type==="tile"&&e.originIdOf("customParameters")>xt.DEFAULTS&&(i.customParameters=e.customParameters),i}getField(e){return this.fieldsIndex.get(e)}getFeatureType(e){const{typeIdField:t,types:i}=this;if(!t||!e)return null;const r=e.attributes?e.attributes[t]:void 0;if(r==null)return null;let n=null;return i?.some(s=>{const{id:o}=s;return o!=null&&(o.toString()===r.toString()&&(n=s),!!n)}),n}getFieldDomain(e,t){const i=t&&t.feature,r=this.getFeatureType(i);if(r){const n=r.domains&&r.domains[e];if(n&&n.type!=="inherited")return n}return this._getLayerDomain(e)}async queryAttachments(e,t){await this.load(),e=SA.from(e);const i=this.capabilities;if(!i?.data?.supportsAttachment)throw new Ce("queryAttachments:not-supported","this layer doesn't support attachments");const{attachmentTypes:r,objectIds:n,globalIds:s,num:o,size:a,start:l,where:u}=e;if(!i?.operations?.supportsQueryAttachments&&(r?.length>0||s?.length>0||a?.length>0||o||l||u))throw new Ce("queryAttachments:option-not-supported","when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(n?.length||s?.length||u))throw new Ce("queryAttachments:invalid-query","'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);return this.queryTask.executeAttachmentQuery(e,t)}async queryFeatures(e=this.createQuery(),t){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new Ce("queryFeatures:not-supported","this layer doesn't support queries.");if(!this.url)throw new Ce("queryFeatures:not-supported","this layer has no url.");const i=await this.queryTask.execute(e,{...t,query:{...this.layer?.customParameters,token:this.layer?.apiKey}});if(i?.features)for(const r of i.features)r.sourceLayer=this;return i}toExportImageJSON(e){const t={id:this.id,source:this.source?.toJSON()||{mapLayerId:this.id,type:"mapLayer"}},i=YF(e,this.definitionExpression);ee(i)&&(t.definitionExpression=i);const r=["renderer","labelingInfo","opacity","labelsVisible"].reduce((s,o)=>(s[o]=this.originIdOf(o),s),{});if(Object.keys(r).some(s=>r[s]>xt.SERVICE)){const s=t.drawingInfo={};if(r.renderer>xt.SERVICE&&(s.renderer=this.renderer?this.renderer.toJSON():null),r.labelsVisible>xt.SERVICE&&(s.showLabels=this.labelsVisible),this.labelsVisible&&r.labelingInfo>xt.SERVICE){!this.loaded&&this.labelingInfo.some(a=>!a.labelPlacement)&&et.getLogger(this.declaredClass).warnOnce(`A Sublayer (title: ${this.title}, id: ${this.id}) has an undefined 'labelPlacement' and so labels cannot be displayed. Either define a valid 'labelPlacement' or call Sublayer.load() to use a default value based on geometry type.`,{sublayer:this});let o=this.labelingInfo;ee(this.geometryType)&&(o=VIe(this.labelingInfo,cA.toJSON(this.geometryType))),s.labelingInfo=o.filter(a=>a.labelPlacement).map(a=>a.toJSON({origin:"service",layer:this.layer})),s.showLabels=!0}r.opacity>xt.SERVICE&&(s.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(s.renderer)}return t}_assignDefaultSymbolColors(e){this._forEachSimpleMarkerSymbols(e,t=>{t.color||t.style!=="esriSMSX"&&t.style!=="esriSMSCross"||(t.outline&&t.outline.color?t.color=t.outline.color:t.color=[0,0,0,0])})}_forEachSimpleMarkerSymbols(e,t){if(e){const i=("uniqueValueInfos"in e?e.uniqueValueInfos:"classBreakInfos"in e?e.classBreakInfos:null)??[];for(const r of i)fO(r.symbol)&&t(r.symbol);"symbol"in e&&fO(e.symbol)&&t(e.symbol),"defaultSymbol"in e&&fO(e.defaultSymbol)&&t(e.defaultSymbol)}}_setAndNotifyLayer(e,t){const i=this.layer,r=this._get(e);let n,s;switch(e){case"definitionExpression":case"floorInfo":n="supportsSublayerDefinitionExpression";break;case"minScale":case"maxScale":case"visible":n="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":n="supportsDynamicLayers",s="supportsModification"}const o=zn(this).getDefaultOrigin();if(o!=="service"){if(n&&this.layer?.capabilities?.exportMap?.[n]===!1)return void this._logLockedError(e,`capability not available 'layer.capabilities.exportMap.${n}'`);if(s&&this.capabilities?.exportMap[s]===!1)return void this._logLockedError(e,`capability not available 'capabilities.exportMap.${s}'`)}e!=="source"||this.loadStatus==="not-loaded"?(this._set(e,t),o!=="service"&&r!==t&&i&&i.emit&&i.emit("sublayer-update",{propertyName:e,target:this})):this._logLockedError(e,"'source' can't be changed after calling sublayer.load()")}_handleSublayersChange(e,t){t&&(t.forEach(i=>{i.parent=null,i.layer=null}),this.handles.removeAll()),e&&(e.forEach(i=>{i.parent=this,i.layer=this.layer}),this.handles.add([e.on("after-add",({item:i})=>{i.parent=this,i.layer=this.layer}),e.on("after-remove",({item:i})=>{i.parent=null,i.layer=null}),e.on("before-changes",i=>{const r=this.layer?.capabilities?.exportMap?.supportsSublayersChanges;r==null||r||(et.getLogger(this.declaredClass).error(new Ce("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),i.preventDefault())})]))}_logLockedError(e,t){const{layer:i,declaredClass:r}=this;et.getLogger(r).error(new Ce("sublayer:locked",`Property '${String(e)}' can't be changed on Sublayer from the layer '${i?.id}'`,{reason:t,sublayer:this,layer:i}))}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}};ei.test={isMapImageLayerOverridePolicy:e=>e===kl||e===mO,isTileImageLayerOverridePolicy:e=>e===rG},h([p({readOnly:!0})],ei.prototype,"capabilities",void 0),h([Ye("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],ei.prototype,"readCapabilities",null),h([p()],ei.prototype,"defaultPopupTemplate",null),h([p({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:mO}}})],ei.prototype,"definitionExpression",null),h([p({type:[ol],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],ei.prototype,"fields",void 0),h([p({readOnly:!0})],ei.prototype,"fieldsIndex",null),h([p({type:mie,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:mO},origins:{"web-scene":{read:!1,write:!1}}}})],ei.prototype,"floorInfo",null),h([p({type:Kt,json:{read:{source:"layerDefinition.extent"}}})],ei.prototype,"fullExtent",void 0),h([p({type:cA.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:cA.read}}}}})],ei.prototype,"geometryType",void 0),h([p({type:String})],ei.prototype,"globalIdField",void 0),h([Ye("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],ei.prototype,"readGlobalIdFieldFromService",null),h([p({type:wi,json:{write:{ignoreOrigin:!0}}})],ei.prototype,"id",null),h([p({value:null,type:[w3],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:kl}}})],ei.prototype,"labelingInfo",null),h([it("labelingInfo")],ei.prototype,"writeLabelingInfo",null),h([p({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:kl}}})],ei.prototype,"labelsVisible",null),h([p({value:null})],ei.prototype,"layer",null),h([p({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:nM}}})],ei.prototype,"legendEnabled",void 0),h([p({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],ei.prototype,"listMode",null),h([p({type:Number,value:0,json:{write:{overridePolicy:kl}}})],ei.prototype,"minScale",null),h([Ye("minScale",["minScale","layerDefinition.minScale"])],ei.prototype,"readMinScale",null),h([p({type:Number,value:0,json:{write:{overridePolicy:kl}}})],ei.prototype,"maxScale",null),h([Ye("maxScale",["maxScale","layerDefinition.maxScale"])],ei.prototype,"readMaxScale",null),h([p({readOnly:!0})],ei.prototype,"effectiveScaleRange",null),h([p({type:String})],ei.prototype,"objectIdField",void 0),h([Ye("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],ei.prototype,"readObjectIdFieldFromService",null),h([p({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:kl}}})],ei.prototype,"opacity",null),h([Ye("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],ei.prototype,"readOpacity",null),h([it("opacity")],ei.prototype,"writeOpacity",null),h([p({json:{type:wi,write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:kl}}})],ei.prototype,"parent",void 0),h([it("parent")],ei.prototype,"writeParent",null),h([p({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:(e,t)=>!t.disablePopup},write:{target:"disablePopup",overridePolicy:nM,writer(e,t,i){t[i]=!e}}}})],ei.prototype,"popupEnabled",void 0),h([p({type:Rm,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:nM}}})],ei.prototype,"popupTemplate",void 0),h([p({readOnly:!0})],ei.prototype,"queryTask",null),h([p({types:c3,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:kl},origins:{"web-scene":{types:bee,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:kl}}}}})],ei.prototype,"renderer",null),h([p({types:{key:"type",base:null,typeMap:{"data-layer":Vo,"map-layer":jd}},cast(e){if(e){if("mapLayerId"in e)return Fs(jd,e);if("dataSource"in e)return Fs(Vo,e)}return e},json:{name:"layerDefinition.source",write:{overridePolicy:kl}}})],ei.prototype,"source",null),h([p()],ei.prototype,"sourceJSON",void 0),h([p({value:null,json:{type:[wi],write:{target:"subLayerIds",allowNull:!0,overridePolicy:kl}}})],ei.prototype,"sublayers",null),h([di("sublayers")],ei.prototype,"castSublayers",null),h([it("sublayers")],ei.prototype,"writeSublayers",null),h([p({type:String,json:{name:"name",write:{overridePolicy:nM}}})],ei.prototype,"title",void 0),h([p({type:String})],ei.prototype,"typeIdField",void 0),h([Ye("typeIdField",["layerDefinition.typeIdField"])],ei.prototype,"readTypeIdField",null),h([p({type:[OD],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],ei.prototype,"types",void 0),h([p({type:String,json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:rG}}})],ei.prototype,"url",null),h([p({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:kl}}})],ei.prototype,"visible",null),h([it("visible")],ei.prototype,"writeVisible",null),ei=oT=h([ce("esri.layers.support.Sublayer")],ei);const E3=ei;function nG(e,t,i){return t.flatten(({sublayers:n})=>n).length!==e.length?!0:!!e.some(n=>n.originIdOf("minScale")>i||n.originIdOf("maxScale")>i||n.originIdOf("renderer")>i||n.originIdOf("labelingInfo")>i||n.originIdOf("opacity")>i||n.originIdOf("labelsVisible")>i||n.originIdOf("source")>i)||!Mne(e,t)}function s$e(e,t,i){return!!e.some(r=>{const n=r.source;return!(!n||n.type==="map-layer"&&n.mapLayerId===r.id&&(Re(n.gdbVersion)||n.gdbVersion===i))||r.originIdOf("renderer")>xt.SERVICE||r.originIdOf("labelingInfo")>xt.SERVICE||r.originIdOf("opacity")>xt.SERVICE||r.originIdOf("labelsVisible")>xt.SERVICE})||!Mne(e,t)}function Mne(e,t){if(!e||!e.length||Re(t))return!0;const i=t.slice().reverse().flatten(({sublayers:s})=>s&&s.toArray().reverse()).map(s=>s.id).toArray();if(e.length>i.length)return!1;let r=0;const n=i.length;for(const{id:s}of e){for(;r<n&&i[r]!==s;)r++;if(r>=n)return!1}return!0}function o$e(e){return!!e&&e.some(t=>t.minScale!=null||t.layerDefinition&&t.layerDefinition.minScale!=null)}const a$e=et.getLogger("esri.layers.TileLayer");function l$e(e,t){const i=[],r={};return e&&e.forEach(n=>{const s=new E3;if(s.read(n,t),r[s.id]=s,n.parentLayerId!=null&&n.parentLayerId!==-1){const o=r[n.parentLayerId];o.sublayers||(o.sublayers=[]),o.sublayers.unshift(s)}else i.unshift(s)}),i}const yO=Pt.ofType(E3);function Ine(e,t){e&&e.forEach(i=>{t(i),i.sublayers&&i.sublayers.length&&Ine(i.sublayers,t)})}const Tne=e=>{let t=class extends e{constructor(...i){super(...i),this.allSublayers=new M0({getCollections:()=>[this.sublayers],getChildrenFunction:r=>r.sublayers}),this.sublayersSourceJSON={[xt.SERVICE]:{},[xt.PORTAL_ITEM]:{},[xt.WEB_SCENE]:{},[xt.WEB_MAP]:{}},this.addHandles(nt(()=>this.sublayers,(r,n)=>this._handleSublayersChange(r,n),wl))}readSublayers(i,r){if(!r||!i)return;const{sublayersSourceJSON:n}=this,s=pa(r.origin);if(s<xt.SERVICE||(n[s]={context:r,visibleLayers:i.visibleLayers||n[s].visibleLayers,layers:i.layers||n[s].layers},s>xt.SERVICE))return;this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);const{sublayers:o,origin:a}=this.createSublayersForOrigin("web-document"),l=zn(this);l.setDefaultOrigin(a),this._set("sublayers",new yO(o)),l.setDefaultOrigin("user")}findSublayerById(i){return this.allSublayers.find(r=>r.id===i)}createServiceSublayers(){return this.createSublayersForOrigin("service").sublayers}createSublayersForOrigin(i){const r=pa(i==="web-document"?"web-map":i);let n=xt.SERVICE,s=this.sublayersSourceJSON[xt.SERVICE].layers,o=this.sublayersSourceJSON[xt.SERVICE].context,a=null;const l=[xt.PORTAL_ITEM,xt.WEB_SCENE,xt.WEB_MAP].filter(g=>g<=r);for(const g of l){const v=this.sublayersSourceJSON[g];o$e(v.layers)&&(n=g,s=v.layers,o=v.context,v.visibleLayers&&(a={visibleLayers:v.visibleLayers,context:v.context}))}const u=[xt.PORTAL_ITEM,xt.WEB_SCENE,xt.WEB_MAP].filter(g=>g>n&&g<=r);let c=null;for(const g of u){const{layers:v,visibleLayers:b,context:x}=this.sublayersSourceJSON[g];v&&(c={layers:v,context:x}),b&&(a={visibleLayers:b,context:x})}const d=l$e(s,o),f=new Map,m=new Set;if(c)for(const g of c.layers)f.set(g.id,g);if(a?.visibleLayers)for(const g of a.visibleLayers)m.add(g);return Ine(d,g=>{c&&g.read(f.get(g.id),c.context),a&&g.read({defaultVisibility:m.has(g.id)},a.context)}),{origin:Bx(n),sublayers:new yO({items:d})}}read(i,r){super.read(i,r),this.readSublayers(i,r)}_handleSublayersChange(i,r){r&&(r.forEach(n=>{n.parent=null,n.layer=null}),this.handles.remove("sublayers-owner")),i&&(i.forEach(n=>{n.parent=this,n.layer=this}),this.handles.add([i.on("after-add",({item:n})=>{n.parent=this,n.layer=this}),i.on("after-remove",({item:n})=>{n.parent=null,n.layer=null})],"sublayers-owner"),this.type==="tile"&&this.handles.add(i.on("before-changes",n=>{a$e.error(new Ce("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:this})),n.preventDefault()}),"sublayers-owner"))}};return h([p({readOnly:!0})],t.prototype,"allSublayers",void 0),h([p({readOnly:!0,type:Pt.ofType(E3)})],t.prototype,"serviceSublayers",void 0),h([p({value:null,type:yO,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],t.prototype,"sublayers",void 0),h([p({readOnly:!0})],t.prototype,"sublayersSourceJSON",void 0),t=h([ce("esri.layers.mixins.SublayersOwner")],t),t};function put(e){const t=e.layer;return"floorInfo"in t&&t.floorInfo?.floorField&&"floors"in e.view?Ane(e.view.floors,t.floorInfo.floorField):null}function sG(e,t){return"floorInfo"in t&&t.floorInfo?.floorField?Ane(e,t.floorInfo.floorField):null}function Ane(e,t){if(!e?.length)return null;const i=e.filter(r=>r!=="").map(r=>`'${r}'`);return i.push("''"),`${t} IN (${i.join(",")}) OR ${t} IS NULL`}const u$e={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let Za=class extends Wo(Lt){constructor(t){super(t),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const t=this.visibleSublayers.map(i=>{const r=sG(this.floors,i);return i.toExportImageJSON(r)});return t.length?JSON.stringify(t):null}get hasDynamicLayers(){return this.layer&&s$e(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(t){this._get("layer")!==t&&(this._set("layer",t),this.handles.remove("layer"),t&&this.handles.add([t.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),t.on("sublayer-update",i=>this.notifyChange(u$e[i.propertyName]))],"layer"))}get layers(){const t=this.visibleSublayers;return t?t.length?"show:"+t.map(i=>i.id).join(","):"show:-1":null}get layerDefs(){const t=!!this.floors?.length,i=this.visibleSublayers.filter(r=>r.definitionExpression!=null||t&&r.floorInfo!=null);return i.length?JSON.stringify(i.reduce((r,n)=>{const s=sG(this.floors,n),o=YF(s,n.definitionExpression);return ee(o)&&(r[n.id]=o),r},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const t=this.layer;return t&&(t.commitProperty("dpi"),t.commitProperty("imageFormat"),t.commitProperty("imageTransparency"),t.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const t=[];if(!this.layer)return t;const i=this.layer.sublayers,r=s=>{const o=this.scale,a=o===0,l=s.minScale===0||o<=s.minScale,u=s.maxScale===0||o>=s.maxScale;s.visible&&(a||l&&u)&&(s.sublayers?s.sublayers.forEach(r):t.unshift(s))};i&&i.forEach(r);const n=this._get("visibleSublayers");return!n||n.length!==t.length||n.some((s,o)=>t[o]!==s)?t:n}toJSON(){const t=this.layer;let i={dpi:t.dpi,format:t.imageFormat,transparent:t.imageTransparency,gdbVersion:t.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?i.dynamicLayers=this.dynamicLayers:i={...i,layers:this.layers,layerDefs:this.layerDefs},i}};h([p({readOnly:!0})],Za.prototype,"dynamicLayers",null),h([p()],Za.prototype,"floors",void 0),h([p({readOnly:!0})],Za.prototype,"hasDynamicLayers",null),h([p()],Za.prototype,"layer",null),h([p({readOnly:!0})],Za.prototype,"layers",null),h([p({readOnly:!0})],Za.prototype,"layerDefs",null),h([p({type:Number})],Za.prototype,"scale",void 0),h([p(ESe)],Za.prototype,"timeExtent",void 0),h([p({readOnly:!0})],Za.prototype,"version",null),h([p({readOnly:!0})],Za.prototype,"visibleSublayers",null),Za=h([ce("esri.layers.mixins.ExportImageParameters")],Za);let Xr=class extends q0(T4(J0(Tne(Sne(g4(Cw($w(Nm(Ow(iD(w4(Wo(Rh))))))))))))){constructor(...t){super(...t),this.dateFieldsTimeReference=null,this.datesInUnknownTimezone=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.preferredTimeReference=null,this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(t,i){return typeof t=="string"?{url:t,...i}:t}load(t){const i=ee(t)?t.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},t).catch(da).then(()=>this._fetchService(i))),Promise.resolve(this)}readImageFormat(t,i){const r=i.supportedImageFormatTypes;return r&&r.includes("PNG32")?"png32":"png24"}writeSublayers(t,i,r,n){if(!this.loaded||!t)return;const s=t.slice().reverse().flatten(({sublayers:c})=>c&&c.toArray().reverse()).toArray();let o=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap?.supportsDynamicLayers){const c=pa(n.origin);if(c===xt.PORTAL_ITEM){const d=this.createSublayersForOrigin("service").sublayers;o=nG(s,d,xt.SERVICE)}else if(c>xt.PORTAL_ITEM){const d=this.createSublayersForOrigin("portal-item");o=nG(s,d.sublayers,pa(d.origin))}}const a=[],l={writeSublayerStructure:o,...n};let u=o;s.forEach(c=>{const d=c.write({},l);a.push(d),u=u||c.originOf("visible")==="user"}),a.some(c=>Object.keys(c).length>1)&&(i.layers=a),u&&(i.visibleLayers=s.filter(c=>c.visible).map(c=>c.id))}createExportImageParameters(t,i,r,n){const s=n&&n.pixelRatio||1;t&&this.version>=10&&(t=t.clone().shiftCentralMeridian());const o=new Za({layer:this,floors:n?.floors,scale:H8({extent:t,width:i})*s}),a=o.toJSON();o.destroy();const l=!n||!n.rotation||this.version<10.3?{}:{rotation:-n.rotation},u=t&&t.spatialReference,c=u.wkid||JSON.stringify(u.toJSON());a.dpi*=s;const d={};if(n?.timeExtent){const{start:f,end:m}=n.timeExtent.toJSON();d.time=f&&m&&f===m?""+f:`${f??"null"},${m??"null"}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(d.time="null,null");return{bbox:t&&t.xmin+","+t.ymin+","+t.xmax+","+t.ymax,bboxSR:c,imageSR:c,size:i+","+r,...a,...l,...d}}async fetchImage(t,i,r,n){const{data:s}=await this._fetchImage("image",t,i,r,n);return s}async fetchImageBitmap(t,i,r,n){const{data:s,url:o}=await this._fetchImage("blob",t,i,r,n);return Pb(s,o)}async fetchRecomputedExtents(t={}){const i={...t,query:{returnUpdates:!0,f:"json",...this.customParameters,token:this.apiKey}},{data:r}=await St(this.url,i),{extent:n,fullExtent:s,timeExtent:o}=r,a=n||s;return{fullExtent:a&&Kt.fromJSON(a),timeExtent:o&&ka.fromJSON({start:o[0],end:o[1]})}}loadAll(){return Z5(this,t=>{t(this.allSublayers)})}serviceSupportsSpatialReference(t){return kD(this,t)}async _fetchImage(t,i,r,n,s){const o={responseType:t,signal:s?.signal??null,query:{...this.parsedUrl.query,...this.createExportImageParameters(i,r,n,s),f:"image",...this.refreshParameters,...this.customParameters,token:this.apiKey}},a=this.parsedUrl.path+"/export";if(o.query?.dynamicLayers!=null&&!this.capabilities?.exportMap?.supportsDynamicLayers)throw new Ce("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:o.query});try{const{data:l}=await St(a,o);return{data:l,url:a}}catch(l){throw fs(l)?l:new Ce("mapimagelayer:image-fetch-error",`Unable to load image: ${a}`,{error:l})}}async _fetchService(t){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const{data:i,ssl:r}=await St(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},signal:t});r&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=i,this.read(i,{origin:"service",url:this.parsedUrl})}};h([p({type:fm})],Xr.prototype,"dateFieldsTimeReference",void 0),h([p({type:Boolean})],Xr.prototype,"datesInUnknownTimezone",void 0),h([p()],Xr.prototype,"dpi",void 0),h([p()],Xr.prototype,"gdbVersion",void 0),h([p()],Xr.prototype,"imageFormat",void 0),h([Ye("imageFormat",["supportedImageFormatTypes"])],Xr.prototype,"readImageFormat",null),h([p({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],Xr.prototype,"imageMaxHeight",void 0),h([p({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],Xr.prototype,"imageMaxWidth",void 0),h([p()],Xr.prototype,"imageTransparency",void 0),h([p({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],Xr.prototype,"isReference",void 0),h([p({json:{read:!1,write:!1}})],Xr.prototype,"labelsVisible",void 0),h([p({type:["ArcGISMapServiceLayer"]})],Xr.prototype,"operationalLayerType",void 0),h([p({json:{read:!1,write:!1}})],Xr.prototype,"popupEnabled",void 0),h([p({type:fm})],Xr.prototype,"preferredTimeReference",void 0),h([p()],Xr.prototype,"sourceJSON",void 0),h([p({json:{write:{ignoreOrigin:!0}}})],Xr.prototype,"sublayers",void 0),h([it("sublayers",{layers:{type:[E3]},visibleLayers:{type:[wi]}})],Xr.prototype,"writeSublayers",null),h([p({type:["show","hide","hide-children"]})],Xr.prototype,"listMode",void 0),h([p({json:{read:!1},readOnly:!0,value:"map-image"})],Xr.prototype,"type",void 0),h([p(f3)],Xr.prototype,"url",void 0),Xr=h([ce("esri.layers.MapImageLayer")],Xr);const n9=Xr,yut=Object.freeze(Object.defineProperty({__proto__:null,default:n9},Symbol.toStringTag,{value:"Module"}));var J8;let Hc=J8=class extends Je{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new J8({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};h([p({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Hc.prototype,"cols",void 0),h([p({type:wi,json:{write:!0}})],Hc.prototype,"level",void 0),h([p({type:String,json:{write:!0}})],Hc.prototype,"levelValue",void 0),h([p({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Hc.prototype,"origin",void 0),h([p({type:Number,json:{write:!0}})],Hc.prototype,"resolution",void 0),h([p({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Hc.prototype,"rows",void 0),h([p({type:Number,json:{write:!0}})],Hc.prototype,"scale",void 0),Hc=J8=h([ce("esri.layers.support.LOD")],Hc);const Wt=Hc;let Cne=class{constructor(t,i,r,n,s){this.id=t,this.level=i,this.row=r,this.col=n,this.extent=s}};var hf;const oG=new ti({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let is=hf=class extends Je{static create(e={}){const{resolutionFactor:t=1,scales:i,size:r=256,spatialReference:n=Et.WebMercator,numLODs:s=24}=e;if(!Es(n)){const d=[];if(i)for(let f=0;f<i.length;f++){const m=i[f];d.push(new Wt({level:f,scale:m,resolution:m}))}else{let f=5e-4;for(let m=s-1;m>=0;m--)d.unshift(new Wt({level:m,scale:f,resolution:f})),f*=2}return new hf({dpi:96,lods:d,origin:new At(0,0,n),size:[r,r],spatialReference:n})}const o=gl(n),a=e.origin?new At({x:e.origin.x,y:e.origin.y,spatialReference:n}):new At(o?{x:o.origin[0],y:o.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),l=96,u=1/(dp(n)*39.37*l),c=[];if(i)for(let d=0;d<i.length;d++){const f=i[d],m=f*u;c.push(new Wt({level:d,scale:f,resolution:m}))}else{let d=tF(n)?512/r*5916575275917094e-7:256/r*591657527591555e-6;const f=Math.ceil(s/t);c.push(new Wt({level:0,scale:d,resolution:d*u}));for(let m=1;m<f;m++){const g=d/2**t,v=g*u;c.push(new Wt({level:m,scale:g,resolution:v})),d=g}}return new hf({dpi:l,lods:c,origin:a,size:[r,r],spatialReference:n})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=gl(e);return e.isWrappable&&!!i&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return At.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,i=0;const r=[],n=this._levelToLOD={};e&&(t=-1/0,i=1/0,e.forEach(s=>{r.push(s.scale),t=s.scale>t?s.scale:t,i=s.scale<i?s.scale:i,n[s.level]=s})),this._set("scales",r),this._set("minScale",t),this._set("maxScale",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];const i=Math.floor(e),r=i+1;return t[i]/(t[i]/t[r])**(e-i)}scaleToZoom(e){const t=this.scales,i=t.length-1;let r=0;for(;r<i;r++){const n=t[r],s=t[r+1];if(n<=e)return r;if(s===e)return r+1;if(n>e&&s<e)return r+Math.log(n/e)/Math.log(n/s)}return r}snapScale(e,t=.95){const i=this.scaleToZoom(e);return i%Math.floor(i)>=t?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(e,t,i,r){const n=this.lodAt(e);if(!n)return null;let s,o;if(typeof t=="number")s=t,o=i;else if(vn(t.spatialReference,this.spatialReference))s=t.x,o=t.y,r=i;else{const u=Q5(t,this.spatialReference);if(Re(u))return null;s=u.x,o=u.y,r=i}const a=n.resolution*this.size[0],l=n.resolution*this.size[1];return r||(r=new Cne(null,0,0,0,du())),r.level=e,r.row=Math.floor((this.origin.y-o)/l+.001),r.col=Math.floor((s-this.origin.x)/a+.001),this.updateTileInfo(r),r}updateTileInfo(e,t=hf.ExtrapolateOptions.NONE){let i=this.lodAt(e.level);if(!i&&t===hf.ExtrapolateOptions.POWER_OF_TWO){const o=this.lods[this.lods.length-1];o.level<e.level&&(i=o)}if(!i)return;const r=e.level-i.level,n=i.resolution*this.size[0]/2**r,s=i.resolution*this.size[1]/2**r;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=du()),e.extent[0]=this.origin.x+e.col*n,e.extent[1]=this.origin.y-(e.row+1)*s,e.extent[2]=e.extent[0]+n,e.extent[3]=e.extent[1]+s}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const i=this.lodAt(t.level);if(i==null)return null;const{resolution:r}=i,n=r*this.size[0],s=r*this.size[1];return e[0]=this.origin.x+t.col*n,e[1]=this.origin.y-(t.row+1)*s,e[2]=e[0]+n,e[3]=e[1]+s,e}lodAt(e){return this._levelToLOD?.[e]??null}clone(){return hf.fromJSON(this.write({}))}getOrCreateCompatible(e,t){if(this.size[0]===256&&this.size[1]===256)return e===256?this:null;const i=[],r=this.lods.length;for(let n=0;n<r;n++){const s=this.lods[n],o=s.resolution*t;i.push(new Wt({level:s.level,scale:s.scale,resolution:o}))}return new hf({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const r=e[i];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};h([p({type:Number,json:{write:!0}})],is.prototype,"compressionQuality",void 0),h([p({type:Number,json:{write:!0}})],is.prototype,"dpi",void 0),h([p({type:String,json:{read:oG.read,write:oG.write,origins:{"web-scene":{read:!1,write:!1}}}})],is.prototype,"format",void 0),h([p({readOnly:!0})],is.prototype,"isWrappable",null),h([p({type:At,json:{write:!0}})],is.prototype,"origin",void 0),h([Ye("origin")],is.prototype,"readOrigin",null),h([p({type:[Wt],value:null,json:{write:!0}})],is.prototype,"lods",null),h([p({readOnly:!0})],is.prototype,"minScale",void 0),h([p({readOnly:!0})],is.prototype,"maxScale",void 0),h([p({readOnly:!0})],is.prototype,"scales",void 0),h([p({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],is.prototype,"size",void 0),h([Ye("size",["rows","cols"])],is.prototype,"readSize",null),h([it("size",{cols:{type:wi},rows:{type:wi}})],is.prototype,"writeSize",null),h([p({type:Et,json:{write:!0}})],is.prototype,"spatialReference",void 0),is=hf=h([ce("esri.layers.support.TileInfo")],is),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(is||(is={}));const ma=is;var Z8;let df=Z8=class extends Je{constructor(e){super(e)}clone(){return new Z8({customLayerParameters:Le(this.customLayerParameters),customParameters:Le(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};h([p({json:{type:Object,write:!0}})],df.prototype,"customLayerParameters",void 0),h([p({json:{type:Object,write:!0}})],df.prototype,"customParameters",void 0),h([p({type:String,json:{write:!0}})],df.prototype,"layerIdentifier",void 0),h([p({type:String,json:{write:!0}})],df.prototype,"tileMatrixSet",void 0),h([p({type:String,json:{write:!0}})],df.prototype,"url",void 0),df=Z8=h([ce("esri.layer.support.WMTSLayerInfo")],df);var Y8;let en=Y8=class extends q0(Ow(J0(Cw($w(Nm(Rh)))))){constructor(...e){super(...e),this.copyright="",this.fullExtent=new Kt(-20037508342787e-6,-2003750834278e-5,2003750834278e-5,20037508342787e-6,Et.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=Et.WebMercator,this.subDomains=null,this.tileInfo=new ma({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new At({x:-20037508342787e-6,y:20037508342787e-6,spatialReference:Et.WebMercator}),spatialReference:Et.WebMercator,lods:[new Wt({level:0,scale:591657527591555e-6,resolution:156543.033928}),new Wt({level:1,scale:295828763795777e-6,resolution:78271.5169639999}),new Wt({level:2,scale:147914381897889e-6,resolution:39135.7584820001}),new Wt({level:3,scale:73957190948944e-6,resolution:19567.8792409999}),new Wt({level:4,scale:36978595474472e-6,resolution:9783.93962049996}),new Wt({level:5,scale:18489297737236e-6,resolution:4891.96981024998}),new Wt({level:6,scale:9244648868618e-6,resolution:2445.98490512499}),new Wt({level:7,scale:4622324434309e-6,resolution:1222.99245256249}),new Wt({level:8,scale:2311162217155e-6,resolution:611.49622628138}),new Wt({level:9,scale:1155581108577e-6,resolution:305.748113140558}),new Wt({level:10,scale:577790.554289,resolution:152.874056570411}),new Wt({level:11,scale:288895.277144,resolution:76.4370282850732}),new Wt({level:12,scale:144447.638572,resolution:38.2185141425366}),new Wt({level:13,scale:72223.819286,resolution:19.1092570712683}),new Wt({level:14,scale:36111.909643,resolution:9.55462853563415}),new Wt({level:15,scale:18055.954822,resolution:4.77731426794937}),new Wt({level:16,scale:9027.977411,resolution:2.38865713397468}),new Wt({level:17,scale:4513.988705,resolution:1.19432856685505}),new Wt({level:18,scale:2256.994353,resolution:.597164283559817}),new Wt({level:19,scale:1128.497176,resolution:.298582141647617}),new Wt({level:20,scale:564.248588,resolution:.14929107082380833}),new Wt({level:21,scale:282.124294,resolution:.07464553541190416}),new Wt({level:22,scale:141.062147,resolution:.03732276770595208}),new Wt({level:23,scale:70.5310735,resolution:.01866138385297604})]}),this.type="web-tile",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(e,t){return typeof e=="string"?{urlTemplate:e,...t}:e}load(e){const t=this.loadFromPortal({supportedTypes:["WMTS"]},e).then(()=>{let i="";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const r=new wh(this.urlTemplate);!(this.subDomains&&this.subDomains.length>0)&&r.authority?.includes("{subDomain}")&&(i="is missing 'subDomains' property")}else i="spatialReference must match tileInfo.spatialReference";else i="is missing the required 'urlTemplate' property value";if(i)throw new Ce("web-tile-layer:load",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${i}`)});return this.addResolvingPromise(t),Promise.resolve(this)}get levelValues(){const e=[];if(!this.tileInfo)return null;for(const t of this.tileInfo.lods)e[t.level]=t.levelValue||t.level;return e}readSpatialReference(e,t){return e||t.fullExtent&&t.fullExtent.spatialReference&&Et.fromJSON(t.fullExtent.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const e=[],{urlTemplate:t,subDomains:i}=this,r=new wh(t),n=r.scheme?r.scheme+"://":"//",s=n+r.authority+"/",o=r.authority;if(o?.includes("{subDomain}")){if(i&&i.length>0&&o.split(".").length>1)for(const a of i)e.push(n+o.replace(/\{subDomain\}/gi,a)+"/")}else e.push(s);return e.map(a=>(a.charAt(a.length-1)!=="/"&&(a+="/"),a))}get urlPath(){if(!this.urlTemplate)return null;const e=this.urlTemplate,t=new wh(e),i=(t.scheme?t.scheme+"://":"//")+t.authority+"/";return e.substring(i.length)}readUrlTemplate(e,t){return e||t.templateUrl}writeUrlTemplate(e,t){e&&pc(e)&&(e="https:"+e),e&&(e=e.replace(/\{z\}/gi,"{level}").replace(/\{x\}/gi,"{col}").replace(/\{y\}/gi,"{row}"),e=ml(e)),t.templateUrl=e}fetchTile(e,t,i,r={}){const{signal:n}=r,s=this.getTileUrl(e,t,i),o={responseType:"image",signal:n,query:{...this.refreshParameters}};return St(s,o).then(a=>a.data)}async fetchImageBitmapTile(e,t,i,r={}){const{signal:n}=r;if(this.fetchTile!==Y8.prototype.fetchTile){const l=await this.fetchTile(e,t,i,r);try{return createImageBitmap(l)}catch(u){throw new Ce("request:server",`Unable to load tile ${e}/${t}/${i}`,{error:u,level:e,row:t,col:i})}}const s=this.getTileUrl(e,t,i),o={responseType:"blob",signal:n,query:{...this.refreshParameters}},{data:a}=await St(s,o);return Pb(a,s)}getTileUrl(e,t,i){const{levelValues:r,tileServers:n,urlPath:s}=this;if(!r||!n||!s)return"";const o=r[e];return n[t%n.length]+dc(s,{level:o,z:o,col:i,x:i,row:t,y:t})}};h([p({type:String,value:"",json:{write:!0}})],en.prototype,"copyright",void 0),h([p({type:Kt,json:{write:!0},nonNullable:!0})],en.prototype,"fullExtent",void 0),h([p({readOnly:!0,json:{read:!1,write:!1}})],en.prototype,"legendEnabled",void 0),h([p({type:["show","hide"]})],en.prototype,"listMode",void 0),h([p({json:{read:!0,write:!0}})],en.prototype,"blendMode",void 0),h([p()],en.prototype,"levelValues",null),h([p({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],en.prototype,"isReference",void 0),h([p({type:["WebTiledLayer"],value:"WebTiledLayer"})],en.prototype,"operationalLayerType",void 0),h([p({readOnly:!0,json:{read:!1,write:!1}})],en.prototype,"popupEnabled",void 0),h([p({type:Et})],en.prototype,"spatialReference",void 0),h([Ye("spatialReference",["spatialReference","fullExtent.spatialReference"])],en.prototype,"readSpatialReference",null),h([p({type:[String],json:{write:!0}})],en.prototype,"subDomains",void 0),h([p({type:ma,json:{write:!0}})],en.prototype,"tileInfo",void 0),h([p({readOnly:!0})],en.prototype,"tileServers",null),h([p({json:{read:!1}})],en.prototype,"type",void 0),h([p()],en.prototype,"urlPath",null),h([p({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],en.prototype,"urlTemplate",void 0),h([Ye("urlTemplate",["urlTemplate","templateUrl"])],en.prototype,"readUrlTemplate",null),h([it("urlTemplate",{templateUrl:{type:String}})],en.prototype,"writeUrlTemplate",null),h([p({type:df,json:{write:!0}})],en.prototype,"wmtsInfo",void 0),en=Y8=h([ce("esri.layers.WebTileLayer")],en);const $ne=en,vut=Object.freeze(Object.defineProperty({__proto__:null,default:$ne},Symbol.toStringTag,{value:"Module"}));let ko=class extends $ne{constructor(...t){super(...t),this.portalItem=null,this.isReference=null,this.tileInfo=new ma({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new At({x:-20037508342787e-6,y:20037508342787e-6,spatialReference:Et.WebMercator}),spatialReference:Et.WebMercator,lods:[new Wt({level:0,scale:591657527591555e-6,resolution:156543.033928}),new Wt({level:1,scale:295828763795777e-6,resolution:78271.5169639999}),new Wt({level:2,scale:147914381897889e-6,resolution:39135.7584820001}),new Wt({level:3,scale:73957190948944e-6,resolution:19567.8792409999}),new Wt({level:4,scale:36978595474472e-6,resolution:9783.93962049996}),new Wt({level:5,scale:18489297737236e-6,resolution:4891.96981024998}),new Wt({level:6,scale:9244648868618e-6,resolution:2445.98490512499}),new Wt({level:7,scale:4622324434309e-6,resolution:1222.99245256249}),new Wt({level:8,scale:2311162217155e-6,resolution:611.49622628138}),new Wt({level:9,scale:1155581108577e-6,resolution:305.748113140558}),new Wt({level:10,scale:577790.554289,resolution:152.874056570411}),new Wt({level:11,scale:288895.277144,resolution:76.4370282850732}),new Wt({level:12,scale:144447.638572,resolution:38.2185141425366}),new Wt({level:13,scale:72223.819286,resolution:19.1092570712683}),new Wt({level:14,scale:36111.909643,resolution:9.55462853563415}),new Wt({level:15,scale:18055.954822,resolution:4.77731426794937}),new Wt({level:16,scale:9027.977411,resolution:2.38865713397468}),new Wt({level:17,scale:4513.988705,resolution:1.19432856685505}),new Wt({level:18,scale:2256.994353,resolution:.597164283559817}),new Wt({level:19,scale:1128.497176,resolution:.298582141647617})]}),this.subDomains=["a","b","c"],this.fullExtent=new Kt(-20037508342787e-6,-2003750834278e-5,2003750834278e-5,20037508342787e-6,Et.WebMercator),this.urlTemplate="https://{subDomain}.tile.openstreetmap.org/{level}/{col}/{row}.png",this.operationalLayerType="OpenStreetMap",this.type="open-street-map",this.copyright="Map data &copy; OpenStreetMap contributors, CC-BY-SA"}get refreshInterval(){return 0}};h([p({type:Jv,json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],ko.prototype,"portalItem",void 0),h([p({type:Boolean,json:{read:!1,write:!1}})],ko.prototype,"isReference",void 0),h([p({type:Number,readOnly:!0,json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],ko.prototype,"refreshInterval",null),h([p({type:ma,json:{write:!1}})],ko.prototype,"tileInfo",void 0),h([p({type:["show","hide"]})],ko.prototype,"listMode",void 0),h([p({readOnly:!0,json:{read:!1,write:!1}})],ko.prototype,"subDomains",void 0),h([p({readOnly:!0,json:{read:!1,write:!1},nonNullable:!0})],ko.prototype,"fullExtent",void 0),h([p({readOnly:!0,json:{read:!1,write:!1}})],ko.prototype,"urlTemplate",void 0),h([p({type:["OpenStreetMap"]})],ko.prototype,"operationalLayerType",void 0),h([p({json:{read:!1}})],ko.prototype,"type",void 0),h([p({json:{read:!1,write:!1}})],ko.prototype,"copyright",void 0),h([p({json:{read:!1,write:!1}})],ko.prototype,"wmtsInfo",void 0),ko=h([ce("esri.layers.OpenStreetMapLayer")],ko);const s9=ko,wut=Object.freeze(Object.defineProperty({__proto__:null,default:s9},Symbol.toStringTag,{value:"Module"})),c$e={type:ma,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:h$e}}}}};function h$e(e,t,i,r){if(!e)return null;const{minScale:n,maxScale:s,minLOD:o,maxLOD:a}=t;if(o!=null&&a!=null)return r&&r.ignoreMinMaxLOD?ma.fromJSON(e):ma.fromJSON({...e,lods:e.lods.filter(({level:l})=>l!=null&&l>=o&&l<=a)});if(n!==0&&s!==0){const l=d=>Math.round(1e4*d)/1e4,u=n?l(n):1/0,c=s?l(s):-1/0;return ma.fromJSON({...e,lods:e.lods.filter(d=>{const f=l(d.scale);return f<=u&&f>=c})})}return ma.fromJSON(e)}function One(e){return 32+e.length}function Rne(e){return 16}function _ut(e){if(!e)return 0;let t=Lne;for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];switch(typeof r){case"string":t+=One(r);break;case"number":t+=Rne();break;case"boolean":t+=4}}return t}function d$e(e){if(!e)return 0;if(Array.isArray(e))return p$e(e);let t=Lne;for(const i in e)e.hasOwnProperty(i)&&(t+=kne(e[i]));return t}function p$e(e){const t=e.length;if(t===0||typeof e[0]=="number")return 32+8*t;let i=Pne;for(let r=0;r<t;r++)i+=kne(e[r]);return i}function kne(e){switch(typeof e){case"object":return d$e(e);case"string":return One(e);case"number":return Rne();case"boolean":return 4;default:return 8}}function xut(e,t){return Pne+e.length*t}const Lne=32,Pne=32;var dS;(function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"})(dS||(dS={}));let aG=class aT{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(t,i){if(this._allAvailability!=="unknown")return this._allAvailability;const r=(t-this.location.top)*this.location.width+(i-this.location.left),n=r%8,s=r>>3,o=this._tileAvailabilityBitSet;return s<0||s>o.length?"unknown":o[s]&1<<n?"available":"unavailable"}_updateFromData(t){const i=this.location.width,r=this.location.height;let n=!0,s=!0;const o=Math.ceil(i*r/8),a=new Uint8Array(o);let l=0;for(let u=0;u<t.length;u++){const c=u%8;t[u]?(s=!1,a[l]|=1<<c):n=!1,c===7&&++l}s?this._allAvailability="unavailable":n?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=a,this.byteSize+=a.length)}static fromDefinition(t,i){const r=t.service.request||St,{row:n,col:s,width:o,height:a}=t,l={query:{f:"json"}};return i=i?{...l,...i}:l,r(f$e(t),i).then(u=>u.data).catch(u=>{if(u&&u.details&&u.details.httpStatus===422)return{location:{top:n,left:s,width:o,height:a},valid:!0,data:zpe(o*a,0)};throw u}).then(u=>{if(u.location&&(u.location.top!==n||u.location.left!==s||u.location.width!==o||u.location.height!==a))throw new Ce("tilemap:location-mismatch","Tilemap response for different location than requested",{response:u,definition:{top:n,left:s,width:o,height:a}});return aT.fromJSON(u)})}static fromJSON(t){aT._validateJSON(t);const i=new aT;return i.location=Object.freeze(Le(t.location)),i._updateFromData(t.data),Object.freeze(i)}static _validateJSON(t){if(!t||!t.location)throw new Ce("tilemap:missing-location","Location missing from tilemap response");if(t.valid===!1)throw new Ce("tilemap:invalid","Tilemap response was marked as invalid");if(!t.data)throw new Ce("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(t.data))throw new Ce("tilemap:data-mismatch","Data must be an array of numbers");if(t.data.length!==t.location.width*t.location.height)throw new Ce("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}};function lG(e){return`${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}function f$e(e){let t;if(e.service.type==="vector-tile")t=`${e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`;else{const r=e.service.tileServers;t=`${r&&r.length?r[e.row%r.length]:e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}const i=e.service.query;return i&&(t=`${t}?${i}`),t}var gg;let qu=gg=class extends Wo(Lt){constructor(e){super(e),this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2*dS.MEGABYTES,this.request=St,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new ree(this.cacheByteSize),this.addHandles([nt(()=>{const{layer:e}=this;return[e?.parsedUrl,e?.tileServers,e?.apiKey,e?.customParameters]},()=>this._initializeTilemapDefinition()),nt(()=>this.layer?.tileInfo?.lods,e=>this._initializeAvailableLevels(e),Tf)]),this._initializeTilemapDefinition()}castLevels(e){return e<=2?(et.getLogger(this.declaredClass).error("Minimum levels for Tilemap is 3, but got ",e),3):e}get size(){return 1<<this.levels}fetchTilemap(e,t,i,r){if(!this._availableLevels[e])return Promise.reject(new Ce("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`));const n=this._tmpTilemapDefinition,s=this._tilemapFromCache(e,t,i,n);if(s)return Promise.resolve(s);const o=r&&r.signal;return r={...r,signal:null},new Promise((a,l)=>{ba(o,()=>l(fr()));const u=lG(n);let c=this._pendingTilemapRequests[u];if(!c){c=aG.fromDefinition(n,r).then(f=>(this._tilemapCache.put(u,f,f.byteSize),f));const d=()=>delete this._pendingTilemapRequests[u];this._pendingTilemapRequests[u]=c,c.then(d,d)}c.then(a,l)})}getAvailability(e,t,i){if(!this._availableLevels[e])return"unavailable";const r=this._tilemapFromCache(e,t,i,this._tmpTilemapDefinition);return r?r.getAvailability(t,i):"unknown"}fetchAvailability(e,t,i,r){return this._availableLevels[e]?this.fetchTilemap(e,t,i,r).catch(n=>n).then(n=>{if(n instanceof aG){const s=n.getAvailability(t,i);if(s==="unavailable")throw new Ce("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:i});return s}if(fs(n))throw n;return"unknown"}):Promise.reject(new Ce("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`))}fetchAvailabilityUpsample(e,t,i,r,n){r.level=e,r.row=t,r.col=i;const s=this.layer.tileInfo;s.updateTileInfo(r);const o=this.fetchAvailability(e,t,i,n).catch(a=>{if(fs(a))throw a;if(s.upsampleTile(r))return this.fetchAvailabilityUpsample(r.level,r.row,r.col,r);throw a});return this._fetchAvailabilityUpsamplePrefetch(r.id,e,t,i,n,o),o}async _fetchAvailabilityUpsamplePrefetch(e,t,i,r,n,s){if(!this._prefetchingEnabled||e==null)return;const o=`prefetch-${e}`;if(this.handles.has(o))return;const a=new AbortController;s.then(()=>a.abort(),()=>a.abort());let l=!1;const u={remove(){l||(l=!0,a.abort())}};if(this.handles.add(u,o),await Nfe(10,a.signal).catch(()=>{}),l||(l=!0,this.handles.remove(o)),Sl(a))return;const c=new Cne(e,t,i,r),d={...n,signal:a.signal},f=this.layer.tileInfo;for(let m=0;gg._prefetches.length<gg._maxPrefetch&&f.upsampleTile(c);++m){const g=this.fetchAvailability(c.level,c.row,c.col,d);gg._prefetches.push(g);const v=()=>{gg._prefetches.removeUnordered(g)};g.then(v,v)}}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const{parsedUrl:e,apiKey:t,customParameters:i}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:lm({...e.query,...i,token:t??e.query?.token}),tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(e,t,i,r){r.level=e,r.row=t-t%this.size,r.col=i-i%this.size;const n=lG(r);return this._tilemapCache.get(n)}_initializeAvailableLevels(e){this._availableLevels={},e&&e.forEach(t=>this._availableLevels[t.level]=!0)}get test(){const e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:(t,i,r)=>!!e._tilemapFromCache(t,i,r,e._tmpTilemapDefinition)}}};qu._maxPrefetch=4,qu._prefetches=new Jf({initialSize:gg._maxPrefetch}),h([p({constructOnly:!0,type:Number})],qu.prototype,"levels",void 0),h([di("levels")],qu.prototype,"castLevels",null),h([p({readOnly:!0,type:Number})],qu.prototype,"size",null),h([p({constructOnly:!0,type:Number})],qu.prototype,"cacheByteSize",void 0),h([p({constructOnly:!0})],qu.prototype,"layer",void 0),h([p({constructOnly:!0})],qu.prototype,"request",void 0),qu=gg=h([ce("esri.layers.support.TilemapCache")],qu);const m$e=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(i,r){return r.minLOD!=null&&r.maxLOD!=null?i:0}readMaxScale(i,r){return r.minLOD!=null&&r.maxLOD!=null?i:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(i,r){return r.capabilities&&r.capabilities.includes("Tilemap")?new qu({layer:this}):null}};return h([p({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),h([p()],t.prototype,"minScale",void 0),h([Ye("service","minScale")],t.prototype,"readMinScale",null),h([p()],t.prototype,"maxScale",void 0),h([Ye("service","maxScale")],t.prototype,"readMaxScale",null),h([p({type:Et})],t.prototype,"spatialReference",void 0),h([p({readOnly:!0})],t.prototype,"supportsBlankTile",null),h([p(c$e)],t.prototype,"tileInfo",void 0),h([p()],t.prototype,"tilemapCache",void 0),h([Ye("service","tilemapCache",["capabilities"])],t.prototype,"readTilemapCache",null),h([p()],t.prototype,"version",void 0),t=h([ce("esri.layers.mixins.ArcGISCachedService")],t),t},uG=["Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Elevation/World_Hillshade","Elevation/World_Hillshade_Dark","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Ocean_Basemap","Reference/World_Boundaries_and_Places","Reference/World_Boundaries_and_Places_Alternate","Reference/World_Transportation","World_Imagery","World_Street_Map","World_Topo_Map"];let In=class extends q0(Tne(J0(Cw($w(m$e(Sne(g4(Nm(Wo(Ow(iD(w4(Rh))))))))))))){constructor(...t){super(...t),this.listMode="show",this.isReference=null,this.operationalLayerType="ArcGISTiledMapServiceLayer",this.resampling=!0,this.sourceJSON=null,this.spatialReference=null,this.path=null,this.sublayers=null,this.type="tile",this.url=null}normalizeCtorArgs(t,i){return typeof t=="string"?{url:t,...i}:t}load(t){const i=ee(t)?t.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},t).catch(da).then(()=>this._fetchService(i))),Promise.resolve(this)}get attributionDataUrl(){const t=this.parsedUrl?.path.toLowerCase();return t?this._getDefaultAttribution(this._getMapName(t)):null}readSpatialReference(t,i){return(t=t||i.tileInfo&&i.tileInfo.spatialReference)&&Et.fromJSON(t)}writeSublayers(t,i,r,n){if(!this.loaded||!t)return;const s=t.slice().reverse().flatten(({sublayers:l})=>l&&l.toArray().reverse()).toArray(),o=[],a={writeSublayerStructure:!1,...n};s.forEach(l=>{const u=l.write({},a);o.push(u)}),o.some(l=>Object.keys(l).length>1)&&(i.layers=o)}get tileServers(){return this._getDefaultTileServers(this.parsedUrl?.path)}castTileServers(t){return Array.isArray(t)?t.map(i=>Ln(i).path):null}fetchTile(t,i,r,n={}){const{signal:s}=n,o=this.getTileUrl(t,i,r),a={responseType:"image",signal:s,query:{...this.refreshParameters}};return St(o,a).then(l=>l.data)}async fetchImageBitmapTile(t,i,r,n={}){const{signal:s}=n,o=this.getTileUrl(t,i,r),a={responseType:"blob",signal:s,query:{...this.refreshParameters}},{data:l}=await St(o,a);return Pb(l,o)}getTileUrl(t,i,r){const n=!this.tilemapCache&&this.supportsBlankTile,s=lm({...this.parsedUrl?.query,blankTile:!n&&null,...this.customParameters,token:this.apiKey}),o=this.tileServers;return`${o&&o.length?o[i%o.length]:this.parsedUrl?.path}/tile/${t}/${i}/${r}${s?"?"+s:""}`}loadAll(){return Z5(this,t=>{t(this.allSublayers)})}_fetchService(t){return new Promise((i,r)=>{if(this.sourceJSON){if(this.sourceJSON.bandCount!=null&&this.sourceJSON.pixelSizeX!=null)throw new Ce("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");return void i({data:this.sourceJSON})}if(!this.parsedUrl)throw new Ce("tile-layer:undefined-url","layer's url is not defined");const n=G0(this.parsedUrl.path);if(ee(n)&&n.serverType==="ImageServer")throw new Ce("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");St(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},responseType:"json",signal:t}).then(i,r)}).then(i=>{let r=this.url;if(i.ssl&&(r=this.url=r.replace(/^http:/i,"https:")),this.sourceJSON=i.data,this.read(i.data,{origin:"service",url:this.parsedUrl}),this.version===10.1&&!nD(r))return this._fetchServerVersion(r,t).then(n=>{this.read({currentVersion:n})}).catch(()=>{})})}_fetchServerVersion(t,i){if(!A2e(t))return Promise.reject();const r=t.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return St(r,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:i}).then(n=>{if(n.data&&n.data.currentVersion)return n.data.currentVersion;throw new Ce("tile-layer:version-not-available")})}_getMapName(t){const i=t.match(/^(?:https?:)?\/\/(server\.arcgisonline\.com|services\.arcgisonline\.com|ibasemaps-api\.arcgis\.com)\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i);return i?i[2]:void 0}_getDefaultAttribution(t){if(t==null)return null;let i;t=t.toLowerCase();for(let r=0,n=uG.length;r<n;r++)if(i=uG[r],i.toLowerCase().includes(t))return hl("//static.arcgis.com/attribution/"+i);return null}_getDefaultTileServers(t){if(t==null)return[];const i=t.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i)!==-1,r=t.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i)!==-1;return i||r?[t,t.replace(i?/server\.arcgisonline/i:/services\.arcgisonline/i,i?"services.arcgisonline":"server.arcgisonline")]:[]}get hasOverriddenFetchTile(){return!this.fetchTile.__isDefault__}};h([p({readOnly:!0})],In.prototype,"attributionDataUrl",null),h([p({type:["show","hide","hide-children"]})],In.prototype,"listMode",void 0),h([p({json:{read:!0,write:!0}})],In.prototype,"blendMode",void 0),h([p({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],In.prototype,"isReference",void 0),h([p({readOnly:!0,type:["ArcGISTiledMapServiceLayer"]})],In.prototype,"operationalLayerType",void 0),h([p({type:Boolean})],In.prototype,"resampling",void 0),h([p()],In.prototype,"sourceJSON",void 0),h([p({type:Et})],In.prototype,"spatialReference",void 0),h([Ye("spatialReference",["spatialReference","tileInfo"])],In.prototype,"readSpatialReference",null),h([p({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],In.prototype,"path",void 0),h([p({readOnly:!0})],In.prototype,"sublayers",void 0),h([it("sublayers",{layers:{type:[E3]}})],In.prototype,"writeSublayers",null),h([p({json:{read:!1,write:!1}})],In.prototype,"popupEnabled",void 0),h([p()],In.prototype,"tileServers",null),h([di("tileServers")],In.prototype,"castTileServers",null),h([p({readOnly:!0,json:{read:!1}})],In.prototype,"type",void 0),h([p(f3)],In.prototype,"url",void 0),In=h([ce("esri.layers.TileLayer")],In),In.prototype.fetchTile.__isDefault__=!0;const o9=In,Eut=Object.freeze(Object.defineProperty({__proto__:null,default:o9},Symbol.toStringTag,{value:"Module"})),y$e=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function K8(e){return e!=null&&y$e.some(([t,i])=>e>=t&&e<=i)}const g$e={visible:"visibleSublayers"};let $d=class extends Wo(Lt){constructor(t){super(t),this.scale=0}set layer(t){this._get("layer")!==t&&(this._set("layer",t),this.handles.remove("layer"),t&&this.handles.add([t.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),t.on("wms-sublayer-update",i=>this.notifyChange(g$e[i.propertyName]))],"layer"))}get layers(){return this.visibleSublayers.filter(({name:t})=>t).map(({name:t})=>t).join()}get version(){this.commitProperty("layers");const t=this.layer;return t&&t.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:t,scale:i}=this,r=t?.sublayers,n=[],s=o=>{const{minScale:a,maxScale:l,sublayers:u,visible:c}=o;c&&(i===0||(a===0||i<=a)&&(l===0||i>=l))&&(u?u.forEach(s):n.push(o))};return r?.forEach(s),n}toJSON(){const{layer:t,layers:i}=this,{imageFormat:r,imageTransparency:n,version:s}=t;return{format:r,request:"GetMap",service:"WMS",styles:"",transparent:n?"TRUE":"FALSE",version:s,layers:i}}};h([p()],$d.prototype,"layer",null),h([p({readOnly:!0})],$d.prototype,"layers",null),h([p({type:Number})],$d.prototype,"scale",void 0),h([p({readOnly:!0})],$d.prototype,"version",null),h([p({readOnly:!0})],$d.prototype,"visibleSublayers",null),$d=h([ce("esri.layers.support.ExportWMSImageParameters")],$d);var lT;let v$e=0,Fr=lT=class extends Om(YL){constructor(e){super(e),this.dimensions=null,this.fullExtents=null,this.legendUrl=null,this.legendEnabled=!0,this.layer=null,this.maxScale=0,this.minScale=0,this.parent=null,this.popupEnabled=!1,this.queryable=!1,this.sublayers=null,this.spatialReferences=null,this.addHandles([ms(()=>this.sublayers,"after-add",({item:t})=>{t.parent=this,t.layer=this.layer},wl),ms(()=>this.sublayers,"after-remove",({item:t})=>{t.layer=t.parent=null},wl),nt(()=>this.sublayers,(t,i)=>{if(i)for(const r of i)r.layer=r.parent=null;if(t)for(const r of t)r.parent=this,r.layer=this.layer},wl)])}get description(){return this._get("description")}set description(e){this._set("description",e)}get fullExtent(){return this._get("fullExtent")}set fullExtent(e){this._set("fullExtent",e)}readExtent(e,t){return(e=t.extent)?Kt.fromJSON(e):null}get id(){return this._get("id")??v$e++}set id(e){this._set("id",e)}readLegendUrl(e,t){return t?.legendUrl??t?.legendURL??null}get effectiveScaleRange(){const{minScale:e,maxScale:t}=this;return{minScale:e,maxScale:t}}get name(){return this._get("name")}set name(e){this._set("name",e)}castSublayers(e){return nn(Pt.ofType(lT),e)}get title(){return this._get("title")}set title(e){this._set("title",e)}get visible(){return this._get("visible")}set visible(e){this._setAndNotifyLayer("visible",e)}clone(){const e=new lT;return this.hasOwnProperty("description")&&(e.description=this.description),this.hasOwnProperty("fullExtent")&&(e.fullExtent=this.fullExtent.clone()),this.hasOwnProperty("fullExtents")&&(e.fullExtents=this.fullExtents?.map(t=>t.clone())??null),this.hasOwnProperty("legendUrl")&&(e.legendUrl=this.legendUrl),this.hasOwnProperty("legendEnabled")&&(e.legendEnabled=this.legendEnabled),this.hasOwnProperty("layer")&&(e.layer=this.layer),this.hasOwnProperty("name")&&(e.name=this.name),this.hasOwnProperty("parent")&&(e.parent=this.parent),this.hasOwnProperty("queryable")&&(e.queryable=this.queryable),this.hasOwnProperty("sublayers")&&(e.sublayers=this.sublayers&&this.sublayers.map(t=>t.clone())),this.hasOwnProperty("spatialReferences")&&(e.spatialReferences=this.spatialReferences?.map(t=>t)),this.hasOwnProperty("visible")&&(e.visible=this.visible),this.hasOwnProperty("title")&&(e.title=this.title),e}_setAndNotifyLayer(e,t){const i=this.layer;this._get(e)!==t&&(this._set(e,t),i&&i.emit("wms-sublayer-update",{propertyName:e,id:this.id}))}};h([p()],Fr.prototype,"description",null),h([p({readOnly:!0})],Fr.prototype,"dimensions",void 0),h([p({value:null})],Fr.prototype,"fullExtent",null),h([Ye("fullExtent",["extent"])],Fr.prototype,"readExtent",null),h([p()],Fr.prototype,"fullExtents",void 0),h([p({type:Number,json:{write:{enabled:!1,overridePolicy:()=>({ignoreOrigin:!0,enabled:!0})}}})],Fr.prototype,"id",null),h([p({type:String,json:{origins:{"web-document":{read:{source:["legendUrl","legendURL"]},write:{target:"legendUrl",ignoreOrigin:!0}}},read:{source:"legendURL"},write:{ignoreOrigin:!0}}})],Fr.prototype,"legendUrl",void 0),h([Ye(["web-document"],"legendUrl")],Fr.prototype,"readLegendUrl",null),h([p({value:!0,type:Boolean,json:{read:{source:"showLegend"},write:{target:"showLegend"},origins:{"web-map":{read:!1,write:!1},"web-scene":{read:!1,write:!1}}}})],Fr.prototype,"legendEnabled",void 0),h([p()],Fr.prototype,"layer",void 0),h([p()],Fr.prototype,"maxScale",void 0),h([p()],Fr.prototype,"minScale",void 0),h([p({readOnly:!0})],Fr.prototype,"effectiveScaleRange",null),h([p({type:String,value:null,json:{read:{source:"name"},write:{ignoreOrigin:!0}}})],Fr.prototype,"name",null),h([p()],Fr.prototype,"parent",void 0),h([p({type:Boolean,json:{read:{source:"showPopup"},write:{ignoreOrigin:!0,target:"showPopup"}}})],Fr.prototype,"popupEnabled",void 0),h([p({type:Boolean,json:{write:{ignoreOrigin:!0}}})],Fr.prototype,"queryable",void 0),h([p()],Fr.prototype,"sublayers",void 0),h([di("sublayers")],Fr.prototype,"castSublayers",null),h([p({type:[Number],json:{read:{source:"spatialReferences"}}})],Fr.prototype,"spatialReferences",void 0),h([p({type:String,value:null,json:{write:{ignoreOrigin:!0}}})],Fr.prototype,"title",null),h([p({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"}}})],Fr.prototype,"visible",null),Fr=lT=h([ce("esri.layers.support.WMSSublayer")],Fr);const Q8=Fr,sM={84:4326,83:4269,27:4267};function b$e(e){if(!e)return null;const t={idCounter:-1};typeof e=="string"&&(e=new DOMParser().parseFromString(e,"text/xml"));const i=e.documentElement;if(i.nodeName==="ServiceExceptionReport"){const oe=Array.prototype.slice.call(i.childNodes).map(q=>q.textContent).join(`\r
`);throw new Ce("wmslayer:wms-capabilities-xml-is-not-valid","The server returned errors when the WMS capabilities were requested.",oe)}const r=vo("Capability",i),n=vo("Service",i),s=r&&vo("Request",r);if(!r||!n||!s)return null;const o=vo("Layer",r);if(!o)return null;const a=i.nodeName==="WMS_Capabilities"||i.nodeName==="WMT_MS_Capabilities"?i.getAttribute("version"):"1.3.0",l=lh("Title",n,"")||lh("Name",n,""),u=lh("AccessConstraints",n,""),c=/^none$/i.test(u)?"":u,d=lh("Abstract",n,""),f=parseInt(lh("MaxWidth",n,"5000"),10),m=parseInt(lh("MaxHeight",n,"5000"),10),g=hG(s,"GetMap"),v=cG(s,"GetMap"),b=$2(o,a,t);if(!b)return null;let x,S=0;const T=Array.prototype.slice.call(r.childNodes),_=b.sublayers??[],M=oe=>{oe!=null&&_.push(oe)};T.forEach(oe=>{oe.nodeName==="Layer"&&(S===0?x=oe:(S===1&&b.name&&(b.name="",M($2(x,a,t))),M($2(oe,a,t))),S++)});let I=b.sublayers,$=b.extent;const L=b.fullExtents??[];if(I||(I=[]),I.length===0&&I.push(b),!$){const oe=new Kt(I[0].extent);b.extent=oe.toJSON(),$=b.extent}const B=b.spatialReferences.length>0?b.spatialReferences:Nne(b),z=cG(s,"GetFeatureInfo"),W=z?hG(s,"GetFeatureInfo"):null,J=Fne(I),K=b.minScale||0,Q=b.maxScale||0,y=b.dimensions??[],A=J.reduce((oe,q)=>oe.concat(q.dimensions??[]),[]),N=y.concat(A).filter(jne);let j=null;if(N.length){const oe=N.map(q=>{const{extent:de}=q;return x$e(de)?de.map(re=>re.getTime()):de?.map(re=>[re.min.getTime(),re.max.getTime()])}).flat(2).filter(ee);j={startTimeField:null,endTimeField:null,trackIdField:void 0,timeExtent:[Math.min(...oe),Math.max(...oe)]}}return{copyright:c,description:d,dimensions:y,extent:$,fullExtents:L,featureInfoFormats:W,featureInfoUrl:z,mapUrl:v,maxWidth:f,maxHeight:m,maxScale:Q,minScale:K,layers:J,spatialReferences:B,supportedImageFormatTypes:g,timeInfo:j,title:l,version:a}}function w$e(e){const t=e.filter(i=>i.popupEnabled&&i.name&&i.queryable);return t.length?t.map(({name:i})=>i).join():null}function Nne(e){if(e.spatialReferences.length>0)return e.spatialReferences;if(e.sublayers)for(const t of e.sublayers){const i=Nne(t);if(i.length>0)return i}return[]}function Fne(e){let t=[];for(const i of e)t.push(i),i.sublayers?.length&&(t=t.concat(Fne(i.sublayers)),delete i.sublayers);return t}function uT(e,t,i){return t.getAttribute(e)??i}function _$e(e,t,i,r){const n=vo(e,i);return n?uT(t,n,r):r}function vo(e,t){for(let i=0;i<t.childNodes.length;i++){const r=t.childNodes[i];if(Dne(r)&&r.nodeName===e)return r}return null}function cT(e,t){if(t==null)return[];const i=[];for(let r=0;r<t.childNodes.length;r++){const n=t.childNodes[r];Dne(n)&&n.nodeName===e&&i.push(n)}return i}function lh(e,t,i){return vo(e,t)?.textContent??i}function v_(e,t,i){if(!e)return null;const r=parseFloat(e.getAttribute("minx")),n=parseFloat(e.getAttribute("miny")),s=parseFloat(e.getAttribute("maxx")),o=parseFloat(e.getAttribute("maxy"));let a,l,u,c;i?(a=isNaN(n)?-Number.MAX_VALUE:n,l=isNaN(r)?-Number.MAX_VALUE:r,u=isNaN(o)?Number.MAX_VALUE:o,c=isNaN(s)?Number.MAX_VALUE:s):(a=isNaN(r)?-Number.MAX_VALUE:r,l=isNaN(n)?-Number.MAX_VALUE:n,u=isNaN(s)?Number.MAX_VALUE:s,c=isNaN(o)?Number.MAX_VALUE:o);const d=new Et({wkid:t});return new Kt({xmin:a,ymin:l,xmax:u,ymax:c,spatialReference:d})}function cG(e,t){const i=vo(t,e);if(i){const r=vo("DCPType",i);if(r){const n=vo("HTTP",r);if(n){const s=vo("Get",n);if(s){let o=_$e("OnlineResource","xlink:href",s,null);if(o)return o.indexOf("&")===o.length-1&&(o=o.substring(0,o.length-1)),E$e(o,["service","request"])}}}}return null}function hG(e,t){const i=cT("Operation",e);if(!i.length)return cT("Format",vo(t,e)).map(({textContent:n})=>n).filter(ee);const r=[];for(const n of i)if(n.getAttribute("name")===t){const s=cT("Format",n);for(const{textContent:o}of s)o!=null&&r.push(o)}return r}function dG(e,t,i){const r=vo(t,e);if(!r)return i;const{textContent:n}=r;if(n==null||n==="")return i;const s=Number(n);return isNaN(s)?i:s}function $2(e,t,i){if(!e)return null;const r={id:i.idCounter++,fullExtents:[],parentLayerId:null,queryable:e.getAttribute("queryable")==="1",spatialReferences:[],sublayers:null},n=vo("LatLonBoundingBox",e),s=vo("EX_GeographicBoundingBox",e);let o=null;n&&(o=v_(n,4326)),s&&(o=new Kt(0,0,0,0,new Et({wkid:4326})),o.xmin=parseFloat(lh("westBoundLongitude",s,"0")),o.ymin=parseFloat(lh("southBoundLatitude",s,"0")),o.xmax=parseFloat(lh("eastBoundLongitude",s,"0")),o.ymax=parseFloat(lh("northBoundLatitude",s,"0"))),n||s||(o=new Kt(-180,-90,180,90,new Et({wkid:4326}))),r.minScale=dG(e,"MaxScaleDenominator",0),r.maxScale=dG(e,"MinScaleDenominator",0);const a=["1.0.0","1.1.0","1.1.1"].includes(t)?"SRS":"CRS";return Array.prototype.slice.call(e.childNodes).forEach(l=>{if(l.nodeName==="Name")r.name=l.textContent||"";else if(l.nodeName==="Title")r.title=l.textContent||"";else if(l.nodeName==="Abstract")r.description=l.textContent||"";else if(l.nodeName==="BoundingBox"){const u=l.getAttribute(a);if(u&&u.indexOf("EPSG:")===0){const d=parseInt(u.substring(5),10);d===0||isNaN(d)||o||(o=t==="1.3.0"?v_(l,d,K8(d)):v_(l,d))}const c=u&&u.indexOf(":");if(c&&c>-1){let d=parseInt(u.substring(c+1,u.length),10);d===0||isNaN(d)||(d=sM[d]?sM[d]:d);const f=t==="1.3.0"?v_(l,d,K8(d)):v_(l,d);f&&r.fullExtents&&r.fullExtents.push(f)}}else if(l.nodeName===a)(l.textContent?.split(" ")??[]).forEach(u=>{const c=u.includes(":")?parseInt(u.split(":")[1],10):parseInt(u,10);if(c!==0&&!isNaN(c)){const d=sM[c]?sM[c]:c;r.spatialReferences.includes(d)||r.spatialReferences.push(d)}});else if(l.nodeName!=="Style"||r.legendURL){if(l.nodeName==="Layer"){const u=$2(l,t,i);u&&(u.parentLayerId=r.id,r.sublayers||(r.sublayers=[]),r.sublayers.push(u))}}else{const u=vo("LegendURL",l);if(u){const c=vo("OnlineResource",u);c&&(r.legendURL=c.getAttribute("xlink:href"))}}}),r.extent=o?.toJSON(),r.dimensions=cT("Dimension",e).filter(l=>l.getAttribute("name")&&l.getAttribute("units")&&l.textContent).map(l=>{const u=l.getAttribute("name"),c=l.getAttribute("units"),d=l.textContent,f=l.getAttribute("unitSymbol")??void 0,m=l.getAttribute("default")??void 0,g=uT("default",l,"0")!=="0",v=uT("nearestValue",l,"0")!=="0",b=uT("current",l,"0")!=="0";return jne({name:u,units:c})?{name:"time",units:"ISO8601",extent:mG(d),default:mG(m),multipleValues:g,nearestValue:v,current:b}:S$e({name:u,units:c})?{name:"elevation",units:c,extent:pG(d),unitSymbol:f,default:pG(m),multipleValues:g,nearestValue:v}:{name:u,units:c,extent:fG(d),unitSymbol:f,default:fG(m),multipleValues:g,nearestValue:v}}),r}function x$e(e){return Array.isArray(e)&&e.length>0&&e[0]instanceof Date}function Dne(e){return e.nodeType===Node.ELEMENT_NODE}function S$e(e){return/^elevation$/i.test(e.name)&&/^(epsg|crs):\d+$/i.test(e.units)}function jne(e){return/^time$/i.test(e.name)&&/^iso8601$/i.test(e.units)}function E$e(e,t){const i=[],r=Ln(e);for(const n in r.query)r.query.hasOwnProperty(n)&&(t.includes(n.toLowerCase())||i.push(n+"="+r.query[n]));return r.path+(i.length?"?"+i.join("&"):"")}function pG(e){if(!e)return;const t=e.includes("/"),i=e.split(",");return t?i.map(r=>{const n=r.split("/");return n.length<2?null:{min:parseFloat(n[0]),max:parseFloat(n[1]),resolution:n.length>=3&&n[2]!=="0"?parseFloat(n[2]):void 0}}).filter(ee):i.map(r=>parseFloat(r))}function fG(e){if(!e)return;const t=e.includes("/"),i=e.split(",");return t?i.map(r=>{const n=r.split("/");return n.length<2?null:{min:n[0],max:n[1],resolution:n.length>=3&&n[2]!=="0"?n[2]:void 0}}).filter(ee):i}function mG(e){if(!e)return;const t=e.includes("/"),i=e.split(",");return t?i.map(r=>{const n=r.split("/");return n.length<2?null:{min:new Date(n[0]),max:new Date(n[1]),resolution:n.length>=3&&n[2]!=="0"?M$e(n[2]):void 0}}).filter(ee):i.map(r=>new Date(r))}function M$e(e){const t=/(?:p(\d+y|\d+(?:.|,)\d+y)?(\d+m|\d+(?:.|,)\d+m)?(\d+d|\d+(?:.|,)\d+d)?)?(?:t(\d+h|\d+(?:.|,)\d+h)?(\d+m|\d+(?:.|,)\d+m)?(\d+s|\d+(?:.|,)\d+s)?)?/i,i=e.match(t);return i?{years:w1(i[1]),months:w1(i[2]),days:w1(i[3]),hours:w1(i[4]),minutes:w1(i[5]),seconds:w1(i[6])}:null}function w1(e){if(!e)return 0;const t=/(?:\d+(?:.|,)\d+|\d+)/,i=e.match(t);if(!i)return 0;const r=i[0].replace(",",".");return Number(r)}function _1(e){return e.toISOString().replace(/\.[0-9]{3}/,"")}const yG=new Set([102100,3857,102113,900913]),I$e=new Set([3395,54004]);function T$e(e,t){let i=e.wkid;return Re(t)?i:(i!=null&&t.includes(i)||!e.latestWkid||(i=e.latestWkid),i!=null&&yG.has(i)?t.find(r=>yG.has(r))||t.find(r=>I$e.has(r))||102100:i)}const gO=new ti({bmp:"image/bmp",gif:"image/gif",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml"},{ignoreUnknown:!1});function gG(e){return e==="text/html"}function vG(e){return e==="text/plain"}let Mi=class extends q0(T4(Ow(J0(Cw($w(Nm(Rh))))))){constructor(...t){super(...t),this.allSublayers=new M0({getCollections:()=>[this.sublayers],getChildrenFunction:i=>i.sublayers}),this.customParameters=null,this.customLayerParameters=null,this.copyright=null,this.description=null,this.dimensions=null,this.fullExtent=null,this.fullExtents=null,this.featureInfoFormats=null,this.featureInfoUrl=null,this.fetchFeatureInfoFunction=null,this.imageFormat=null,this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.legendEnabled=!0,this.mapUrl=null,this.isReference=null,this.operationalLayerType="WMS",this.spatialReference=null,this.spatialReferences=null,this.sublayers=null,this.type="wms",this.url=null,this.version=null,this.addHandles([ms(()=>this.sublayers,"after-add",({item:i})=>{i.parent=i.layer=this},wl),ms(()=>this.sublayers,"after-remove",({item:i})=>{i.layer=i.parent=null},wl),nt(()=>this.sublayers,(i,r)=>{if(r)for(const n of r)n.layer=n.parent=null;if(i)for(const n of i)n.parent=n.layer=this},wl)])}normalizeCtorArgs(t,i){return typeof t=="string"?{url:t,...i}:t}load(t){const i=ee(t)?t.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["WMS"]},t).catch(da).then(()=>this._fetchService(i))),Promise.resolve(this)}readFullExtentFromItemOrMap(t,i){const r=i.extent;return r?new Kt({xmin:r[0][0],ymin:r[0][1],xmax:r[1][0],ymax:r[1][1]}):null}writeFullExtent(t,i){i.extent=[[t.xmin,t.ymin],[t.xmax,t.ymax]]}get featureInfoFormat(){return Re(this.featureInfoFormats)?null:this.featureInfoFormats.find(gG)??this.featureInfoFormats.find(vG)??null}set featureInfoFormat(t){ee(t)?(gG(t)||vG(t))&&this._override("featureInfoFormat",t):(this.revert("featureInfoFormat","service"),this._clearOverride("featureInfoFormat"))}readImageFormat(t,i){const r=i.supportedImageFormatTypes;return r&&r.includes("image/png")?"image/png":r&&r[0]}readSpatialReferenceFromItemOrDocument(t,i){return new Et(i.spatialReferences[0])}writeSpatialReferences(t,i){const r=this.spatialReference?.wkid;t&&r?(i.spatialReferences=t.filter(n=>n!==r),i.spatialReferences.unshift(r)):i.spatialReferences=t}readSublayersFromItemOrMap(t,i,r){return bG(i.layers,r,i.visibleLayers)}readSublayers(t,i,r){return bG(i.layers,r)}writeSublayers(t,i,r,n){i.layers=[];const s=new Map,o=t.flatten(({sublayers:a})=>a??[]);for(const a of o)if(typeof a.parent?.id=="number"){const l=s.get(a.parent.id);l!=null?l.push(a.id):s.set(a.parent.id,[a.id])}for(const a of o){const l={sublayer:a,...n},u=a.write({parentLayerId:typeof a.parent?.id=="number"?a.parent.id:-1},l);if(s.has(a.id)&&(u.sublayerIds=s.get(a.id)),!a.sublayers&&a.name){const c=a.write({},l);delete c.id,i.layers.push(c)}}i.visibleLayers=o.filter(({visible:a,sublayers:l})=>a&&!l).map(({name:a})=>a).toArray()}createExportImageParameters(t,i,r,n){const s=n?.pixelRatio??1,o=H8({extent:t,width:i})*s,a=new $d({layer:this,scale:o}),{xmin:l,ymin:u,xmax:c,ymax:d,spatialReference:f}=t,m=T$e(f,this.spatialReferences),g=this.version==="1.3.0"&&K8(m)?`${u},${l},${d},${c}`:`${l},${u},${c},${d}`,v=a.toJSON();return{bbox:g,[this.version==="1.3.0"?"crs":"srs"]:m==null||isNaN(m)?void 0:"EPSG:"+m,...v}}async fetchImage(t,i,r,n){const s=this.mapUrl,o=this.createExportImageParameters(t,i,r,n);if(!o.layers){const d=document.createElement("canvas");return d.width=i,d.height=r,d}const a=n?.timeExtent?.start,l=n?.timeExtent?.end,u=ee(a)&&ee(l)?a.getTime()===l.getTime()?_1(a):`${_1(a)}/${_1(l)}`:void 0,c={responseType:"image",query:this._mixCustomParameters({width:i,height:r,...o,time:u,...this.refreshParameters}),signal:n?.signal};return St(s??"",c).then(d=>d.data)}async fetchImageBitmap(t,i,r,n){const s=this.mapUrl??"",o=this.createExportImageParameters(t,i,r,n);if(!o.layers){const f=document.createElement("canvas");return f.width=i,f.height=r,f}const a=n?.timeExtent?.start,l=n?.timeExtent?.end,u=ee(a)&&ee(l)?a.getTime()===l.getTime()?_1(a):`${_1(a)}/${_1(l)}`:void 0,c={responseType:"blob",query:this._mixCustomParameters({width:i,height:r,...o,time:u,...this.refreshParameters}),signal:n?.signal},{data:d}=await St(s,c);return Pb(d,s)}fetchFeatureInfo(t,i,r,n,s){const o=H8({extent:t,width:i}),a=new $d({layer:this,scale:o}),l=w$e(a.visibleSublayers);if(Re(this.featureInfoUrl)||Re(l))return Promise.resolve([]);if(Re(this.fetchFeatureInfoFunction)&&Re(this.featureInfoFormat))return Promise.resolve([]);const u=this.version==="1.3.0"?{I:n,J:s}:{x:n,y:s},c={query_layers:l,request:"GetFeatureInfo",info_format:this.featureInfoFormat,feature_count:25,width:i,height:r,...u},d={...this.createExportImageParameters(t,i,r),...c},f=this._mixCustomParameters(d);return ee(this.fetchFeatureInfoFunction)?this.fetchFeatureInfoFunction(f):this._defaultFetchFeatureInfoFunction(nI(this.featureInfoUrl,f))}findSublayerById(t){return this.allSublayers.find(i=>i.id===t)}findSublayerByName(t){return this.allSublayers.find(i=>i.name===t)}serviceSupportsSpatialReference(t){return L2e(this.url)||this.spatialReferences!=null&&this.spatialReferences.some(i=>{const r=i===900913?Et.WebMercator:new Et({wkid:i});return vn(r,t)})}_defaultFetchFeatureInfoFunction(t){const i=document.createElement("iframe");i.src=pye(t),i.style.border="none",i.style.margin="0",i.style.width="100%",i.setAttribute("sandbox","");const r=new Rm({title:this.title,content:i}),n=new As({sourceLayer:this,popupTemplate:r});return Promise.resolve([n])}async _fetchService(t){if(!this.resourceInfo){const{path:i,query:r}=this.parsedUrl??{};r?.service&&(r.SERVICE=r.service,delete r.service),r?.request&&(r.REQUEST=r.request,delete r.request);const{data:n}=await St(i??"",{query:{SERVICE:"WMS",REQUEST:"GetCapabilities",...r,...this.customParameters},responseType:"xml",signal:t});this.resourceInfo=b$e(n)}if(this.parsedUrl){const i=new wh(this.parsedUrl.path),{httpsDomains:r}=Ri.request;i.scheme!=="https"||i.port&&i.port!=="443"||!i.host||r.includes(i.host)||r.push(i.host)}this.read(this.resourceInfo,{origin:"service"})}_mixCustomParameters(t){if(!this.customLayerParameters&&!this.customParameters)return t;const i={...this.customParameters,...this.customLayerParameters};for(const r in i)t[r.toLowerCase()]=i[r];return t}};function A$e(e,t){return e.some(i=>{for(const r in i)if(nK(i,r,null,t))return!0;return!1})}function bG(e,t,i){e=e??[];const r=new Map;e.every(s=>s.id==null)&&(e=Le(e)).forEach((s,o)=>s.id=o);for(const s of e){const o=new Q8;o.read(s,t),i&&!i.includes(o.name)&&(o.visible=!1),r.set(o.id,o)}const n=[];for(const s of e){const o=s.id!=null?r.get(s.id):null;if(o)if(s.parentLayerId!=null&&s.parentLayerId>=0){const a=r.get(s.parentLayerId);if(!a)continue;a.sublayers||(a.sublayers=new Pt),a.sublayers.push(o)}else n.push(o)}return n}h([p({readOnly:!0})],Mi.prototype,"allSublayers",void 0),h([p({json:{type:Object,write:!0}})],Mi.prototype,"customParameters",void 0),h([p({json:{type:Object,write:!0}})],Mi.prototype,"customLayerParameters",void 0),h([p({type:String,json:{write:!0}})],Mi.prototype,"copyright",void 0),h([p()],Mi.prototype,"description",void 0),h([p({readOnly:!0})],Mi.prototype,"dimensions",void 0),h([p({json:{type:[[Number]],read:{source:"extent"},write:{target:"extent"},origins:{"web-document":{write:{ignoreOrigin:!0}},"portal-item":{write:{ignoreOrigin:!0}}}}})],Mi.prototype,"fullExtent",void 0),h([Ye(["web-document","portal-item"],"fullExtent",["extent"])],Mi.prototype,"readFullExtentFromItemOrMap",null),h([it(["web-document","portal-item"],"fullExtent",{extent:{type:[[Number]]}})],Mi.prototype,"writeFullExtent",null),h([p()],Mi.prototype,"fullExtents",void 0),h([p({type:String,json:{write:{ignoreOrigin:!0}}})],Mi.prototype,"featureInfoFormat",null),h([p({type:[String],readOnly:!0})],Mi.prototype,"featureInfoFormats",void 0),h([p({type:String,json:{write:{ignoreOrigin:!0}}})],Mi.prototype,"featureInfoUrl",void 0),h([p()],Mi.prototype,"fetchFeatureInfoFunction",void 0),h([p({type:String,json:{origins:{"web-document":{default:"image/png",type:gO.jsonValues,read:{reader:gO.read,source:"format"},write:{writer:gO.write,target:"format"}}}}})],Mi.prototype,"imageFormat",void 0),h([Ye("imageFormat",["supportedImageFormatTypes"])],Mi.prototype,"readImageFormat",null),h([p({type:Number,json:{read:{source:"maxHeight"},write:{target:"maxHeight"}}})],Mi.prototype,"imageMaxHeight",void 0),h([p({type:Number,json:{read:{source:"maxWidth"},write:{target:"maxWidth"}}})],Mi.prototype,"imageMaxWidth",void 0),h([p()],Mi.prototype,"imageTransparency",void 0),h([p(hD)],Mi.prototype,"legendEnabled",void 0),h([p({type:["show","hide","hide-children"]})],Mi.prototype,"listMode",void 0),h([p({type:String,json:{write:{ignoreOrigin:!0}}})],Mi.prototype,"mapUrl",void 0),h([p({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],Mi.prototype,"isReference",void 0),h([p({type:["WMS"]})],Mi.prototype,"operationalLayerType",void 0),h([p()],Mi.prototype,"resourceInfo",void 0),h([p({type:Et,json:{origins:{service:{read:{source:"extent.spatialReference"}}},write:!1}})],Mi.prototype,"spatialReference",void 0),h([Ye(["web-document","portal-item"],"spatialReference",["spatialReferences"])],Mi.prototype,"readSpatialReferenceFromItemOrDocument",null),h([p({type:[wi],json:{read:!1,origins:{service:{read:!0},"web-document":{read:!1,write:{ignoreOrigin:!0}},"portal-item":{read:!1,write:{ignoreOrigin:!0}}}}})],Mi.prototype,"spatialReferences",void 0),h([it(["web-document","portal-item"],"spatialReferences")],Mi.prototype,"writeSpatialReferences",null),h([p({type:Pt.ofType(Q8),json:{write:{target:"layers",overridePolicy(e,t,i){if(A$e(this.allSublayers,i))return{ignoreOrigin:!0}}}}})],Mi.prototype,"sublayers",void 0),h([Ye(["web-document","portal-item"],"sublayers",["layers","visibleLayers"])],Mi.prototype,"readSublayersFromItemOrMap",null),h([Ye("service","sublayers",["layers"])],Mi.prototype,"readSublayers",null),h([it("sublayers",{layers:{type:[Q8]},visibleLayers:{type:[String]}})],Mi.prototype,"writeSublayers",null),h([p({json:{read:!1},readOnly:!0,value:"wms"})],Mi.prototype,"type",void 0),h([p(f3)],Mi.prototype,"url",void 0),h([p({type:String,json:{write:{ignoreOrigin:!0}}})],Mi.prototype,"version",void 0),Mi=h([ce("esri.layers.WMSLayer")],Mi);const Une=Mi,Tut=Object.freeze(Object.defineProperty({__proto__:null,default:Une},Symbol.toStringTag,{value:"Module"}));var X8;let hT=X8=class extends Je{constructor(e){super(e),this.type="none"}clone(){return new X8({type:this.type})}};h([Ft({none:"none",stayAbove:"stay-above"})],hT.prototype,"type",void 0),hT=X8=h([ce("esri.ground.NavigationConstraint")],hT);let Mr=class extends Lt{constructor(){super(...arguments),this.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1,this.DECONFLICTOR_SHOW_VISIBLE=!1,this.DECONFLICTOR_SHOW_INVISIBLE=!1,this.DECONFLICTOR_SHOW_GRID=!1,this.LABELS_SHOW_BORDER=!1,this.TEXT_SHOW_BASELINE=!1,this.TEXT_SHOW_BORDER=!1,this.OVERLAY_DRAW_DEBUG_TEXTURE=!1,this.OVERLAY_SHOW_CENTER=!1,this.SHOW_POI=!1,this.TESTS_DISABLE_OPTIMIZATIONS=!1,this.TESTS_DISABLE_FAST_UPDATES=!1,this.DRAW_MESH_GEOMETRY_NORMALS=!1,this.FEATURE_TILE_FETCH_SHOW_TILES=!1,this.FEATURE_TILE_TREE_SHOW_TILES=!1,this.TERRAIN_TILE_TREE_SHOW_TILES=!1,this.I3S_TREE_SHOW_TILES=!1,this.I3S_SHOW_MODIFICATIONS=!1,this.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1,this.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1,this.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES=!1,this.LINE_WIREFRAMES=!1,this.TERRAIN_USE_LEGACY_SHADING=!1}};h([p()],Mr.prototype,"SCENEVIEW_HITTEST_RETURN_INTERSECTOR",void 0),h([p()],Mr.prototype,"DECONFLICTOR_SHOW_VISIBLE",void 0),h([p()],Mr.prototype,"DECONFLICTOR_SHOW_INVISIBLE",void 0),h([p()],Mr.prototype,"DECONFLICTOR_SHOW_GRID",void 0),h([p()],Mr.prototype,"LABELS_SHOW_BORDER",void 0),h([p()],Mr.prototype,"TEXT_SHOW_BASELINE",void 0),h([p()],Mr.prototype,"TEXT_SHOW_BORDER",void 0),h([p()],Mr.prototype,"OVERLAY_DRAW_DEBUG_TEXTURE",void 0),h([p()],Mr.prototype,"OVERLAY_SHOW_CENTER",void 0),h([p()],Mr.prototype,"SHOW_POI",void 0),h([p()],Mr.prototype,"TESTS_DISABLE_OPTIMIZATIONS",void 0),h([p()],Mr.prototype,"TESTS_DISABLE_FAST_UPDATES",void 0),h([p()],Mr.prototype,"DRAW_MESH_GEOMETRY_NORMALS",void 0),h([p()],Mr.prototype,"FEATURE_TILE_FETCH_SHOW_TILES",void 0),h([p()],Mr.prototype,"FEATURE_TILE_TREE_SHOW_TILES",void 0),h([p()],Mr.prototype,"TERRAIN_TILE_TREE_SHOW_TILES",void 0),h([p()],Mr.prototype,"I3S_TREE_SHOW_TILES",void 0),h([p()],Mr.prototype,"I3S_SHOW_MODIFICATIONS",void 0),h([p()],Mr.prototype,"LOD_INSTANCE_RENDERER_DISABLE_UPDATES",void 0),h([p()],Mr.prototype,"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL",void 0),h([p()],Mr.prototype,"EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES",void 0),h([p()],Mr.prototype,"LINE_WIREFRAMES",void 0),h([p()],Mr.prototype,"TERRAIN_USE_LEGACY_SHADING",void 0),Mr=h([ce("esri.views.3d.support.DebugFlags")],Mr);const C$e=new Mr;var e6;let Wc=e6=class extends QS(Ml){constructor(e){super(e),this.opacity=1,this.shading=!C$e.TERRAIN_USE_LEGACY_SHADING,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Pt;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&et.getLogger(this.declaredClass).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.layers.on("after-add",r=>t(r.item)),this.layers.on("after-remove",r=>i(r.item))}initialize(){this.when().catch(e=>{et.getLogger(this.declaredClass).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)t.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",d0(e,this._get("layers")))}writeLayers(e,t,i,r){const n=[];e&&(r={...r,layerContainerType:"ground"},e.forEach(s=>{if("write"in s){const o={};xwe(s)().write(o,r)&&n.push(o)}else r&&r.messages&&r.messages.push(new Ce("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))})),t.layers=n}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return Z5(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t?.signal});const{ElevationQuery:i}=await De(()=>import("./ElevationQuery-328c0944.js"),["./ElevationQuery-328c0944.js","./preload-helper-388ac9d5.js"],import.meta.url);hr(t);const r=new i,n=this.layers.filter(wG).toArray();return r.queryAll(n,e,t)}async createElevationSampler(e,t){await this.load({signal:t?.signal});const{ElevationQuery:i}=await De(()=>import("./ElevationQuery-328c0944.js"),["./ElevationQuery-328c0944.js","./preload-helper-388ac9d5.js"],import.meta.url);hr(t);const r=new i,n=this.layers.filter(wG).toArray();return r.createSamplerAll(n,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:Le(this.surfaceColor),navigationConstraint:Le(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new e6({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}_loadLayersFromJSON(e,t,i){const r=t&&t.origin||"web-scene",n=t&&t.portal||null,s=t&&t.url||null;return De(()=>import("./layersCreator-ccad3ac8.js"),["./layersCreator-ccad3ac8.js","./lazyLayerLoader-66f8ee92.js","./preload-helper-388ac9d5.js","./portalLayers-ed46f9f9.js","./layersLoader-b0ea3324.js","./fetchService-7aa3a0fc.js","./jsonContext-26af1f96.js"],import.meta.url).then(({populateOperationalLayers:o})=>{hr(i);const a=[];if(e.layers&&Array.isArray(e.layers)){const l={context:{origin:r,url:s,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,e.layers,l))}return Ia(a)}).then(()=>{})}};function $$e(e){return e&&"createElevationSampler"in e}function wG(e){return e.type==="elevation"||$$e(e)}h([p({json:{read:!1}})],Wc.prototype,"layers",null),h([it("layers")],Wc.prototype,"writeLayers",null),h([p({readOnly:!0})],Wc.prototype,"resourceInfo",void 0),h([p({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:wi,read:{reader:eS,source:"transparency"},write:{writer:(e,t)=>{t.transparency=n4(e)},target:"transparency"}}})],Wc.prototype,"opacity",void 0),h([p({type:Boolean,nonNullable:!0,json:{read:!1}})],Wc.prototype,"shading",void 0),h([p({type:Mt,json:{type:[wi],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],Wc.prototype,"surfaceColor",void 0),h([p({type:hT,json:{write:!0}})],Wc.prototype,"navigationConstraint",void 0),Wc=e6=h([ce("esri.Ground")],Wc);const LA=Wc;function O$e(e){return!(!e?.loaded||!WK(e)?.operations?.supportsEditing||"editingEnabled"in e&&!u0e(e))}const _G=et.getLogger("esri.support.basemapUtils");function R$e(){return{}}function k$e(e){for(const t in e){const i=e[t];i?.destroyed===!1&&i.destroy(),delete e[t]}}function L$e(e,t){let i;if(typeof e=="string"){if(!(e in ak)){const r=Object.entries(ak).filter(([n,s])=>Ri.apiKey&&!s.classic||!Ri.apiKey&&s.classic&&!s.deprecated).map(([n])=>`"${n}"`).join(", ");return _G.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${r}`),null}t&&(i=t[e]),i||(i=cm.fromId(e),t&&(t[e]=i))}else i=nn(cm,e);return i?.destroyed&&(_G.warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function P$e(e,t){return e===t?!0:U$e(xG(e),xG(t),{mustMatchReferences:!0})==="equal"}function N$e(e,t){if(Re(t)||Re(e))return{spatialReference:null,updating:!1};if(t.loadStatus==="not-loaded")return t.load(),{spatialReference:null,updating:!0};if(t.spatialReference)return{spatialReference:t.spatialReference,updating:!1};if(t.baseLayers.length===0)return{spatialReference:null,updating:!1};const i=t.baseLayers.getItemAt(0);switch(i.loadStatus){case"not-loaded":i.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const r=(("supportedSpatialReferences"in i?i.supportedSpatialReferences:null)||["tileInfo"in i?i.tileInfo?.spatialReference:i.spatialReference]).filter(Boolean),n=e.spatialReference;return n?{spatialReference:r.find(s=>n.equals(s))??r[0]??null,updating:!1}:{spatialReference:r[0],updating:!1}}function xG(e){return e?!e.loaded&&e.resourceInfo?D$e(e.resourceInfo.data):{baseLayers:SG(e.baseLayers),referenceLayers:SG(e.referenceLayers)}:null}function SG(e){return(Pt.isCollection(e)?e.toArray():e).map(F$e)}function F$e(e){return{type:e.type,url:Vne("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl||""),minScale:"minScale"in e&&e.minScale!=null?e.minScale:0,maxScale:"maxScale"in e&&e.maxScale!=null?e.maxScale:0,opacity:e.opacity!=null?e.opacity:1,visible:e.visible==null||!!e.visible,sublayers:e.type!=="map-image"&&e.type!=="wms"||!ee(e.sublayers)?void 0:e.sublayers?.map(t=>({id:t.id,visible:t.visible})),activeLayerId:e.type==="wmts"?e.activeLayer?.id:void 0}}function D$e(e){return e?{baseLayers:EG((e.baseMapLayers??[]).filter(t=>!t.isReference)),referenceLayers:EG((e.baseMapLayers??[]).filter(t=>t.isReference))}:null}function EG(e){return e.map(t=>j$e(t))}function j$e(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;default:t="unknown"}return{type:t,url:Vne(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:e.minScale!=null?e.minScale:0,maxScale:e.maxScale!=null?e.maxScale:0,opacity:e.opacity!=null?e.opacity:1,visible:e.visibility==null||!!e.visibility,sublayers:void 0,activeLayerId:void 0}}function U$e(e,t,i){return e!=null!=(t!=null)?"not-equal":!e||!t?"equal":MG(e.baseLayers,t.baseLayers)?MG(e.referenceLayers,t.referenceLayers)?"equal":i.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal"}function MG(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!V$e(e[i],t[i]))return!1;return!0}function V$e(e,t){if(e.type!==t.type||e.type==="scene"||e.url!==t.url||e.minScale!==t.minScale||e.maxScale!==t.maxScale||e.visible!==t.visible||e.opacity!==t.opacity)return!1;if(ee(e.activeLayerId)||ee(t.activeLayerId))return e.activeLayerId===t.activeLayerId;if(ee(e.sublayers)||ee(t.sublayers)){if(Re(e.sublayers)||Re(t.sublayers)||e.sublayers.length!==t.sublayers.length)return!1;for(let i=0;i<e.sublayers.length;i++){const r=e.sublayers.at(i),n=t.sublayers.at(i);if(r?.id!==n?.id||r?.visible!==n?.visible)return!1}}return!0}function Vne(e){return e?ml(e).replace(/^\s*https?:/i,"").toLowerCase():""}function B$e(e){return new M0({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const i=[];return"tables"in t&&i.push(t.tables),"layers"in t&&i.push(t.layers),i},itemFilterFunction:t=>{const i=t.parent;return!!i&&"tables"in i&&i.tables.includes(t)}})}const IG={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function z$e(e){let t=null;if(typeof e=="string")if(e in IG){const i=IG[e];t=new LA({resourceInfo:{data:{layers:[i]}}})}else et.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=nn(LA,e);return t}function t6(e,t,i){let r,n;if(e)for(let s=0,o=e.length;s<o;s++){if(r=e.getItemAt(s),r[t]===i)return r;if(r?.type==="group"&&(n=t6(r.layers,t,i),n))return n}}const G$e=e=>{let t=class extends e{constructor(...i){super(...i),this.layers=new Pt;const r=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},n=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||et.getLogger(this.declaredClass).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},s=o=>{o.parent=null,this.layerRemoved(o)};this.layers.on("before-add",o=>r(o.item)),this.layers.on("after-add",o=>n(o.item)),this.layers.on("after-remove",o=>s(o.item))}destroy(){const i=this.layers.removeAll();for(const r of i)this.layerRemoved(r),r.destroy();this.layers.destroy()}set layers(i){this._set("layers",d0(i,this._get("layers")))}add(i,r){const n=this.layers;if(r=n.getNextIndex(r),i instanceof Rh){const s=i;s.parent===this?this.reorder(s,r):n.add(s,r)}else cp(i)?i.then(s=>{this.destroyed||this.add(s,r)}):et.getLogger(this.declaredClass).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,r){const n=this.layers;let s=n.getNextIndex(r);i.slice().forEach(o=>{o.parent!==this?(n.add(o,s),s+=1):this.reorder(o,s)})}findLayerById(i){return t6(this.layers,"id",i)}findLayerByUid(i){return t6(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,r){return this.layers.reorder(i,r)}layerAdded(i){}layerRemoved(i){}};return h([p()],t.prototype,"layers",null),t=h([ce("esri.support.LayersMixin")],t),t};function i6(e,t,i){if(e)for(let r=0,n=e.length;r<n;r++){const s=e.getItemAt(r);if(s[t]===i)return s;if(s?.type==="group"){const o=i6(s.tables,t,i);if(o)return o}}}const q$e=e=>{let t=class extends e{constructor(...i){super(...i),this.tables=new Pt,this.tables.on("after-add",r=>{const n=r.item;n.parent&&n.parent!==this&&"tables"in n.parent&&n.parent.tables.remove(n),n.parent=this,n.type!=="feature"&&et.getLogger(this.declaredClass).error(`Layer 'title:${n.title}, id:${n.id}' of type '${n.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",r=>{r.item.parent=null})}destroy(){const i=this.tables.removeAll();for(const r of i)r.destroy();this.tables.destroy()}set tables(i){this._set("tables",d0(i,this._get("tables")))}findTableById(i){return i6(this.tables,"id",i)}findTableByUid(i){return i6(this.tables,"uid",i)}};return h([p()],t.prototype,"tables",null),t=h([ce("esri.support.TablesMixin")],t),t};let Jc=class extends q$e(G$e(hp.EventedMixin(Lt))){constructor(t){super(t),this.allLayers=new M0({getCollections:()=>[this.basemap?.baseLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:i=>"layers"in i?i.layers:null}),this.allTables=B$e(this),this.basemap=null,this.editableLayers=new M0({getCollections:()=>[this.allLayers],itemFilterFunction:O$e}),this.ground=new LA,this._basemapCache=R$e()}destroy(){this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.ground?.destroy(),this.basemap?.destroy(),k$e(this._basemapCache),this._basemapCache=null}castBasemap(t){return L$e(t,this._basemapCache)}castGround(t){const i=z$e(t);return Re(i)?this._get("ground"):i}findLayerById(t){return this.allLayers.find(i=>i.id===t)}findTableById(t){return this.allTables.find(i=>i.id===t)}};h([p({readOnly:!0,dependsOn:[]})],Jc.prototype,"allLayers",void 0),h([p({readOnly:!0})],Jc.prototype,"allTables",void 0),h([p({type:cm})],Jc.prototype,"basemap",void 0),h([di("basemap")],Jc.prototype,"castBasemap",null),h([p({readOnly:!0})],Jc.prototype,"editableLayers",void 0),h([p({type:LA,nonNullable:!0})],Jc.prototype,"ground",void 0),h([di("ground")],Jc.prototype,"castGround",null),Jc=h([ce("esri.Map")],Jc);const Bne=Jc;let a9=class{constructor(t,i){this.min=t,this.max=i,this.range=i-t}ndiff(t,i=0){return Math.ceil((t-i)/this.range)*this.range+i}_normalize(t,i,r,n=0,s=!1){return(r-=n)<t?r+=this.ndiff(t-r):r>i&&(r-=this.ndiff(r-i)),s&&r===i&&(r=t),r+n}normalize(t,i=0,r=!1){return this._normalize(this.min,this.max,t,i,r)}clamp(t,i=0){return Ta(t-i,this.min,this.max)+i}monotonic(t,i,r){return t<i?i:i+this.ndiff(t-i,r)}minimalMonotonic(t,i,r){return this._normalize(t,t+this.range,i,r)}center(t,i,r){return i=this.monotonic(t,i,r),this.normalize((t+i)/2,r)}diff(t,i,r){return this.monotonic(t,i,r)-t}shortestSignedDiff(t,i){t=this.normalize(t);const r=(i=this.normalize(i))-t,n=i<t?this.minimalMonotonic(t,i)-t:i-this.minimalMonotonic(i,t);return Math.abs(r)<Math.abs(n)?r:n}contains(t,i,r){return i=this.minimalMonotonic(t,i),(r=this.minimalMonotonic(t,r))>t&&r<i}};function l9(e){for(const t in e){const i=e[t];i instanceof Function&&(e[t]=i.bind(e))}return e}l9(new a9(0,2*Math.PI));l9(new a9(-Math.PI,Math.PI));const H$e=l9(new a9(0,360));let _d=class extends xr(Je){constructor(...t){super(...t),this.position=new At([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(t,i,r,n){if(t&&typeof t=="object"&&("x"in t||Array.isArray(t))){const s={position:t};return i!=null&&(s.heading=i),r!=null&&(s.tilt=r),n!=null&&(s.fov=n),s}return t}writePosition(t,i,r,n){const s=t.clone();s.x=ul(t.x||0),s.y=ul(t.y||0),s.z=t.hasZ?ul(t.z||0):t.z,i[r]=s.write({},n)}readPosition(t,i){const r=new At;return r.read(t,i),r.x=ul(r.x||0),r.y=ul(r.y||0),r.z=r.hasZ?ul(r.z||0):r.z,r}equals(t){return!Re(t)&&this.tilt===t.tilt&&this.heading===t.heading&&this.fov===t.fov&&this.position.equals(t.position)}};h([p({type:At,json:{write:{isRequired:!0}}})],_d.prototype,"position",void 0),h([it("position")],_d.prototype,"writePosition",null),h([Ye("position")],_d.prototype,"readPosition",null),h([p({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),di(e=>H$e.normalize(ul(e)))],_d.prototype,"heading",void 0),h([p({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),di(e=>Ta(ul(e),-180,180))],_d.prototype,"tilt",void 0),h([p({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],_d.prototype,"fov",void 0),_d=h([ce("esri.Camera")],_d);const W$e=_d;var r6;let pf=r6=class extends Je{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new r6({rotation:this.rotation,scale:this.scale,targetGeometry:ee(this.targetGeometry)?this.targetGeometry.clone():null,camera:ee(this.camera)?this.camera.clone():null})}};function vO(){return{enabled:!this.camera}}h([p({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:vO}}}}})],pf.prototype,"rotation",void 0),h([di("rotation")],pf.prototype,"castRotation",null),h([p({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:vO}}}}})],pf.prototype,"scale",void 0),h([p({types:wc,json:{read:Il,write:!0,origins:{"web-scene":{read:Il,write:{overridePolicy:vO}}}}})],pf.prototype,"targetGeometry",void 0),h([p({type:W$e,json:{write:!0}})],pf.prototype,"camera",void 0),pf=r6=h([ce("esri.Viewpoint")],pf);const _h=pf,dT={widthBreakpoint:{getValue(e){const t=e.viewSize[0],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,i=t[0],r=t[1],n=this.values;return r>=i?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},bO={xsmall:544,small:768,medium:992,large:1200};function J$e(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function wO(e,t){return t?dT[e].valueToClassName[t].split(" "):[]}const Z$e=e=>{let t=class extends e{constructor(...i){super(...i),this._breakpointsHandles=new So,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=bO}initialize(){this._breakpointsHandles.add(nt(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),Pi))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=qr(this._breakpointsHandles))}set breakpoints(i){if(i===this._get("breakpoints"))return;const r=J$e(i);if(!r){const n=JSON.stringify(bO,null,2);console.warn("provided breakpoints are not valid, using defaults:"+n)}i=r?i:bO,this._set("breakpoints",{...i})}_updateClassNames(){if(!this.container)return;const i=Bo.acquire(),r=Bo.acquire();let n,s=!1;for(n in dT){const o=this[n],a=dT[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(s=!0,this[n]=a,wO(n,o).forEach(l=>r.push(l)),wO(n,a).forEach(l=>i.push(l)))}s&&(this._applyClassNameChanges(i,r),Bo.release(i),Bo.release(r))}_applyClassNameChanges(i,r){const n=this.container;n&&(r.forEach(s=>n.classList.remove(s)),i.forEach(s=>n.classList.add(s)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let r;for(r in dT)wO(r,this[r]).forEach(n=>i.classList.remove(n))}};return h([p()],t.prototype,"breakpoints",null),h([p()],t.prototype,"orientation",void 0),h([p()],t.prototype,"widthBreakpoint",void 0),h([p()],t.prototype,"heightBreakpoint",void 0),t=h([ce("esri.views.BreakpointsOwner")],t),t};function u9(e){return typeof e=="string"?document.getElementById(e):e??null}function zne(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function TG(e,t){const i=t.parentNode;i&&i.insertBefore(e,t)}function AG(e,t){for(;;){const i=e.firstChild;if(!i)break;t.appendChild(i)}}/*!
 * @esri/arcgis-html-sanitizer - v3.0.1 - Tue Nov 15 2022 09:46:54 GMT-0800 (Pacific Standard Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 */var Y$e=function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},vg={exports:{}},on={},pS={exports:{}},Y0={};function Gne(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function K$e(e,t,i){}function Q$e(e,t,i){}var X$e=/javascript\s*\:/img;function eOe(e,t){return X$e.test(t)?"":t}Y0.whiteList=Gne();Y0.getDefaultWhiteList=Gne;Y0.onAttr=K$e;Y0.onIgnoreAttr=Q$e;Y0.safeAttrValue=eOe;var tOe={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,n;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,n=e.length;r<n;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},b_=tOe;function iOe(e,t){e=b_.trimRight(e),e[e.length-1]!==";"&&(e+=";");var i=e.length,r=!1,n=0,s=0,o="";function a(){if(!r){var c=b_.trim(e.slice(n,s)),d=c.indexOf(":");if(d!==-1){var f=b_.trim(c.slice(0,d)),m=b_.trim(c.slice(d+1));if(f){var g=t(n,o.length,f,m,c);g&&(o+=g+"; ")}}}n=s+1}for(;s<i;s++){var l=e[s];if(l==="/"&&e[s+1]==="*"){var u=e.indexOf("*/",s+2);if(u===-1)break;s=u+1,n=s+1,r=!1}else l==="("?r=!0:l===")"?r=!1:l===";"?r||a():l===`
`&&a()}return b_.trim(o)}var rOe=iOe,oM=Y0,nOe=rOe;function CG(e){return e==null}function sOe(e){var t={};for(var i in e)t[i]=e[i];return t}function qne(e){e=sOe(e||{}),e.whiteList=e.whiteList||oM.whiteList,e.onAttr=e.onAttr||oM.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||oM.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||oM.safeAttrValue,this.options=e}qne.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,n=i.onAttr,s=i.onIgnoreAttr,o=i.safeAttrValue,a=nOe(e,function(l,u,c,d,f){var m=r[c],g=!1;if(m===!0?g=m:typeof m=="function"?g=m(d):m instanceof RegExp&&(g=m.test(d)),g!==!0&&(g=!1),d=o(c,d),!!d){var v={position:u,sourcePosition:l,source:f,isWhite:g};if(g){var b=n(c,d,v);return CG(b)?c+":"+d:b}else{var b=s(c,d,v);if(!CG(b))return b}}});return a};var oOe=qne;(function(e,t){var i=Y0,r=oOe;function n(o,a){var l=new r(a);return l.process(o)}t=e.exports=n,t.FilterCSS=r;for(var s in i)t[s]=i[s]})(pS,pS.exports);var c9={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,n;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,n=e.length;r<n;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,i=t.exec(e);return i?i.index:-1}},aOe=pS.exports.FilterCSS,lOe=pS.exports.getDefaultWhiteList,PA=c9;function Hne(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var Wne=new aOe;function uOe(e,t,i){}function cOe(e,t,i){}function hOe(e,t,i){}function dOe(e,t,i){}function Jne(e){return e.replace(fOe,"&lt;").replace(mOe,"&gt;")}function pOe(e,t,i,r){if(i=ese(i),t==="href"||t==="src"){if(i=PA.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(t==="background"){if(aM.lastIndex=0,aM.test(i))return""}else if(t==="style"){if($G.lastIndex=0,$G.test(i)||(OG.lastIndex=0,OG.test(i)&&(aM.lastIndex=0,aM.test(i))))return"";r!==!1&&(r=r||Wne,i=r.process(i))}return i=tse(i),i}var fOe=/</g,mOe=/>/g,yOe=/"/g,gOe=/&quot;/g,vOe=/&#([a-zA-Z0-9]*);?/gim,bOe=/&colon;?/gim,wOe=/&newline;?/gim,aM=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,$G=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,OG=/u\s*r\s*l\s*\(.*/gi;function Zne(e){return e.replace(yOe,"&quot;")}function Yne(e){return e.replace(gOe,'"')}function Kne(e){return e.replace(vOe,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function Qne(e){return e.replace(bOe,":").replace(wOe," ")}function Xne(e){for(var t="",i=0,r=e.length;i<r;i++)t+=e.charCodeAt(i)<32?" ":e.charAt(i);return PA.trim(t)}function ese(e){return e=Yne(e),e=Kne(e),e=Qne(e),e=Xne(e),e}function tse(e){return e=Zne(e),e=Jne(e),e}function _Oe(){return""}function xOe(e,t){typeof t!="function"&&(t=function(){});var i=!Array.isArray(e);function r(o){return i?!0:PA.indexOf(e,o)!==-1}var n=[],s=!1;return{onIgnoreTag:function(o,a,l){if(r(o))if(l.isClosing){var u="[/removed]",c=l.position+u.length;return n.push([s!==!1?s:l.position,c]),s=!1,u}else return s||(s=l.position),"[removed]";else return t(o,a,l)},remove:function(o){var a="",l=0;return PA.forEach(n,function(u){a+=o.slice(l,u[0]),l=u[1]}),a+=o.slice(l),a}}}function SOe(e){for(var t="",i=0;i<e.length;){var r=e.indexOf("<!--",i);if(r===-1){t+=e.slice(i);break}t+=e.slice(i,r);var n=e.indexOf("-->",r);if(n===-1)break;i=n+3}return t}function EOe(e){var t=e.split("");return t=t.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),t.join("")}on.whiteList=Hne();on.getDefaultWhiteList=Hne;on.onTag=uOe;on.onIgnoreTag=cOe;on.onTagAttr=hOe;on.onIgnoreTagAttr=dOe;on.safeAttrValue=pOe;on.escapeHtml=Jne;on.escapeQuote=Zne;on.unescapeQuote=Yne;on.escapeHtmlEntities=Kne;on.escapeDangerHtml5Entities=Qne;on.clearNonPrintableCharacter=Xne;on.friendlyAttrValue=ese;on.escapeAttrValue=tse;on.onIgnoreTagStripAll=_Oe;on.StripTagBody=xOe;on.stripCommentTag=SOe;on.stripBlankChar=EOe;on.cssFilter=Wne;on.getDefaultCSSWhiteList=lOe;var P4={},$f=c9;function MOe(e){var t=$f.spaceIndex(e),i;return t===-1?i=e.slice(1,-1):i=e.slice(1,t+1),i=$f.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function IOe(e){return e.slice(0,2)==="</"}function TOe(e,t,i){var r="",n=0,s=!1,o=!1,a=0,l=e.length,u="",c="";e:for(a=0;a<l;a++){var d=e.charAt(a);if(s===!1){if(d==="<"){s=a;continue}}else if(o===!1){if(d==="<"){r+=i(e.slice(n,a)),s=a,n=a;continue}if(d===">"){r+=i(e.slice(n,s)),c=e.slice(s,a+1),u=MOe(c),r+=t(s,r.length,u,c,IOe(c)),n=a+1,s=!1;continue}if(d==='"'||d==="'")for(var f=1,m=e.charAt(a-f);m.trim()===""||m==="=";){if(m==="="){o=d;continue e}m=e.charAt(a-++f)}}else if(d===o){o=!1;continue}}return n<e.length&&(r+=i(e.substr(n))),r}var AOe=/[^a-zA-Z0-9\\_:.-]/gim;function COe(e,t){var i=0,r=0,n=[],s=!1,o=e.length;function a(f,m){if(f=$f.trim(f),f=f.replace(AOe,"").toLowerCase(),!(f.length<1)){var g=t(f,m||"");g&&n.push(g)}}for(var l=0;l<o;l++){var u=e.charAt(l),c,d;if(s===!1&&u==="="){s=e.slice(i,l),i=l+1,r=e.charAt(i)==='"'||e.charAt(i)==="'"?i:OOe(e,l+1);continue}if(s!==!1&&l===r){if(d=e.indexOf(u,l+1),d===-1)break;c=$f.trim(e.slice(r+1,d)),a(s,c),s=!1,l=d,i=l+1;continue}if(/\s|\n|\t/.test(u))if(e=e.replace(/\s|\n|\t/g," "),s===!1)if(d=$Oe(e,l),d===-1){c=$f.trim(e.slice(i,l)),a(c),s=!1,i=l+1;continue}else{l=d-1;continue}else if(d=ROe(e,l-1),d===-1){c=$f.trim(e.slice(i,l)),c=RG(c),a(s,c),s=!1,i=l+1;continue}else continue}return i<e.length&&(s===!1?a(e.slice(i)):a(s,RG($f.trim(e.slice(i))))),$f.trim(n.join(" "))}function $Oe(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="="?t:-1}}function OOe(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="'"||i==='"'?t:-1}}function ROe(e,t){for(;t>0;t--){var i=e[t];if(i!==" ")return i==="="?t:-1}}function kOe(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function RG(e){return kOe(e)?e.substr(1,e.length-2):e}P4.parseTag=TOe;P4.parseAttr=COe;var LOe=pS.exports.FilterCSS,Zu=on,ise=P4,POe=ise.parseTag,NOe=ise.parseAttr,pT=c9;function lM(e){return e==null}function FOe(e){var t=pT.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=pT.trim(e.slice(t+1,-1));var i=e[e.length-1]==="/";return i&&(e=pT.trim(e.slice(0,-1))),{html:e,closing:i}}function DOe(e){var t={};for(var i in e)t[i]=e[i];return t}function jOe(e){var t={};for(var i in e)Array.isArray(e[i])?t[i.toLowerCase()]=e[i].map(function(r){return r.toLowerCase()}):t[i.toLowerCase()]=e[i];return t}function rse(e){e=DOe(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Zu.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=jOe(e.whiteList||e.allowList):e.whiteList=Zu.whiteList,e.onTag=e.onTag||Zu.onTag,e.onTagAttr=e.onTagAttr||Zu.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Zu.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Zu.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Zu.safeAttrValue,e.escapeHtml=e.escapeHtml||Zu.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new LOe(e.css))}rse.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,n=i.onTag,s=i.onIgnoreTag,o=i.onTagAttr,a=i.onIgnoreTagAttr,l=i.safeAttrValue,u=i.escapeHtml,c=t.cssFilter;i.stripBlankChar&&(e=Zu.stripBlankChar(e)),i.allowCommentTag||(e=Zu.stripCommentTag(e));var d=!1;i.stripIgnoreTagBody&&(d=Zu.StripTagBody(i.stripIgnoreTagBody,s),s=d.onIgnoreTag);var f=POe(e,function(m,g,v,b,x){var S={sourcePosition:m,position:g,isClosing:x,isWhite:Object.prototype.hasOwnProperty.call(r,v)},T=n(v,b,S);if(!lM(T))return T;if(S.isWhite){if(S.isClosing)return"</"+v+">";var _=FOe(b),M=r[v],I=NOe(_.html,function($,L){var B=pT.indexOf(M,$)!==-1,z=o(v,$,L,B);return lM(z)?B?(L=l(v,$,L,c),L?$+'="'+L+'"':$):(z=a(v,$,L,B),lM(z)?void 0:z):z});return b="<"+v,I&&(b+=" "+I),_.closing&&(b+=" /"),b+=">",b}else return T=s(v,b,S),lM(T)?u(b):T},u);return d&&(f=d.remove(f)),f};var UOe=rse;(function(e,t){var i=on,r=P4,n=UOe;function s(a,l){var u=new n(l);return u.process(a)}t=e.exports=s,t.filterXSS=s,t.FilterXSS=n,function(){for(var a in i)t[a]=i[a];for(var l in r)t[l]=r[l]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=e.exports)})(vg,vg.exports);var VOe=function(){function e(t,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,o,a,l){return s==="a"&&o==="href"||(s==="img"||s==="source")&&o==="src"?r.sanitizeUrl(a):vg.exports.safeAttrValue(s,o,a,l)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var n;t&&!i?n=t:t&&i?(n=Object.create(this.arcgisFilterOptions),Object.keys(t).forEach(function(s){s==="whiteList"?n.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,t.whiteList||{}]):n[s]=t[s]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList),this.xssFilterOptions=n,this._xssFilter=new vg.exports.FilterXSS(n)}return e.prototype.sanitize=function(t,i){switch(i===void 0&&(i={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,i);default:return i.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,i){var r=(i??{}).isProtocolRequired,n=r===void 0?!0:r,s=this._trim(t.substring(0,t.indexOf(":"))),o=t==="/",a=/^#/.test(t),l=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return o||a||l?vg.exports.escapeAttrValue(t):!s&&!n?vg.exports.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,i,r,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,i,r,n):vg.exports.safeAttrValue(t,i,r,n)},e.prototype.validate=function(t,i){i===void 0&&(i={});var r=this.sanitize(t,i);return{isValid:t===r,sanitized:r}},e.prototype.encodeHTML=function(t){var i=this;return String(t).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},e.prototype.encodeAttrValue=function(t){var i=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,function(r,n){return i.test(r)?r:"&#x".concat(Number(t.charCodeAt(n)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(t){var i={};return t.forEach(function(r){Object.keys(r).forEach(function(n){Array.isArray(r[n])&&Array.isArray(i[n])?i[n]=i[n].concat(r[n]):i[n]=r[n]})}),i},e.prototype._iterateOverObject=function(t,i){var r=this;i===void 0&&(i={});try{var n=!1,s=void 0;if(Array.isArray(t))s=t.reduce(function(a,l){var u=r.validate(l,i);return u.isValid?a.concat([l]):(n=!0,a.concat([u.sanitized]))},[]);else if(Y$e(t)){var o=Object.keys(t);s=o.reduce(function(a,l){var u=t[l],c=r.validate(u,i);return c.isValid?a[l]=u:(n=!0,a[l]=c.sanitized),a},{})}else return i.allowUndefined&&typeof t>"u"?void 0:null;return n?s:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const N4=new Map;function nse(){N4.clear()}function BOe(e){return N4.get(e)}function zOe(e,t){N4.set(e,t)}function _O(e){N4.delete(e)}var I0,Fb,GOe=function(e){if("WebkitTransition"in e.style)I0="webkitTransitionEnd",Fb="webkitAnimationEnd";else{if(!("transition"in e.style))throw new Error("Your browser is not supported!");I0="transitionend",Fb="animationend"}},sse=function(e){I0||GOe(e)},qOe=function(e,t){return t===void 0&&(t=e+"-active"),function(i){sse(i);var r=!1,n=function(s){r||(r=!0,i.removeEventListener(I0,n),i.removeEventListener(Fb,n),i.classList.remove(e),i.classList.remove(t))};i.classList.add(e),i.addEventListener(I0,n),i.addEventListener(Fb,n),requestAnimationFrame(function(){i.classList.add(t)})}},HOe=function(e,t){return t===void 0&&(t=e+"-active"),function(i,r){sse(i);var n=!1,s=function(o){n||(n=!0,i.removeEventListener(I0,s),i.removeEventListener(Fb,s),r())};i.classList.add(e),i.addEventListener(I0,s),i.addEventListener(Fb,s),requestAnimationFrame(function(){i.classList.add(t)})}};const WOe=et.getLogger("esri.widgets.support.widgetUtils");function ose(e){const t=Bo.acquire();for(let r=0;r<arguments.length;r++){const n=arguments[r],s=typeof n;if(s==="string")t.push(n);else if(Array.isArray(n))t.push.apply(t,n);else if(s==="object")for(const o in n)n[o]&&t.push(o)}const i=t.join(" ");return Bo.release(t),i}(()=>{const e=new Map,t=new ResizeObserver(i=>{nse();for(const r of i)e.get(r.target)?.(r)});return(i,r,n)=>(e.has(i)&&WOe.error("Already observing element",i),e.set(i,r),t.observe(i,n),cw(()=>{t.unobserve(i),e.delete(i)}))})();function mh(e){const t=e?.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function kG(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function NA(e){const t="data-node-ref";this[e.getAttribute(t)]=e}function JOe(e,t){return(e==="enter"?qOe:HOe)(t)}const ZOe=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],YOe=ZOe.reduce((e,t)=>(e[t]=[],e),{}),KOe=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],ase=new VOe({whiteList:YOe,onTagAttr:(e,t,i)=>{const r=`${t}="${i}"`;if(KOe.includes(t))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function QOe(e){return e==="Enter"||e===" "}const lse="http://www.w3.org/",F4=`${lse}2000/svg`,use=`${lse}1999/xlink`;let LG=[],h9=(e,t)=>{let i={};return Object.keys(e).forEach(r=>{i[r]=e[r]}),t&&Object.keys(t).forEach(r=>{i[r]=t[r]}),i},d9=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),cse=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},XOe=(e,t,i)=>{if(t.vnodeSelector!==""){for(let r=i;r<e.length;r++)if(d9(e[r],t))return r}return-1},xO=(e,t,i,r)=>{let n=e[t];if(n.vnodeSelector==="")return;let s=n.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let o=0;o<e.length;o++)if(o!==t){let a=e[o];if(d9(a,n))throw new Error(`${i.vnodeSelector} had a ${n.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},eRe=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},n6=[],s6=!1,hse=e=>{(e.children||[]).forEach(hse),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},PG=()=>{s6=!1,n6.forEach(hse),n6.length=0},NG=e=>{n6.push(e),s6||(s6=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(PG,{timeout:16}):setTimeout(PG,16))},FG=e=>{let t=e.domNode;if(e.properties){let i=e.properties.exitAnimation;if(i)return t.style.pointerEvents="none",void i(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),NG(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),NG(e))},tRe=(e,t,i)=>{if(!t)return;let r=i.eventHandlerInterceptor,n=Object.keys(t),s=n.length;for(let o=0;o<s;o++){let a=n[o],l=t[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")o6(e,l,!0);else if(a==="classes"){let u=Object.keys(l),c=u.length;for(let d=0;d<c;d++){let f=u[d];l[f]&&e.classList.add(f)}}else if(a==="styles"){let u=Object.keys(l),c=u.length;for(let d=0;d<c;d++){let f=u[d],m=l[f];m&&(cse(m),i.styleApplyer(e,f,m))}}else if(a!=="key"&&l!=null){let u=typeof l;u==="function"?(a.lastIndexOf("on",0)===0&&(r&&(l=r(a,l,e,t)),a==="oninput"&&function(){let c=l;l=function(d){c.apply(this,[d]),d.target["oninput-value"]=d.target.value}}()),e[a]=l):i.namespace===F4?a==="href"?e.setAttributeNS(use,a,l):e.setAttribute(a,l):u==="string"&&a!=="value"?a==="innerHTML"?e[a]=ase.sanitize(l):dse(e)&&a in e?e[a]=l:e.setAttribute(a,l):e[a]=l}}};function dse(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let FA,iRe=(e,t,i)=>{if(t)for(let r of t)kv(r,e,void 0,i)},pse=(e,t,i)=>{iRe(e,t.children,i),t.text&&(e.textContent=t.text),tRe(e,t.properties,i),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,i,t.vnodeSelector,t.properties,t.children])},kv=(e,t,i,r)=>{let n,s=0,o=e.vnodeSelector,a=t.ownerDocument;if(o==="")n=e.domNode=a.createTextNode(e.text),i!==void 0?t.insertBefore(n,i):t.appendChild(n);else{for(let l=0;l<=o.length;++l){let u=o.charAt(l);if(l===o.length||u==="."||u==="#"){let c=o.charAt(s-1),d=o.slice(s,l);c==="."?n.classList.add(d):c==="#"?n.id=d:(d==="svg"&&(r=h9(r,{namespace:F4})),r.namespace!==void 0?n=e.domNode=a.createElementNS(r.namespace,d):(n=e.domNode=e.domNode||a.createElement(d),d==="input"&&e.properties&&e.properties.type!==void 0&&n.setAttribute("type",e.properties.type)),i!==void 0?t.insertBefore(n,i):n.parentNode!==t&&t.appendChild(n)),s=l+1}}pse(n,e,r)}},o6=(e,t,i)=>{t&&t.split(" ").forEach(r=>{r&&e.classList.toggle(r,i)})},rRe=(e,t,i,r)=>{if(!i)return;let n=!1,s=Object.keys(i),o=s.length;for(let a=0;a<o;a++){let l=s[a],u=i[l],c=t[l];if(l==="class")c!==u&&(o6(e,c,!1),o6(e,u,!0));else if(l==="classes"){let d=e.classList,f=Object.keys(u),m=f.length;for(let g=0;g<m;g++){let v=f[g],b=!!u[v];b!==!!c[v]&&(n=!0,b?d.add(v):d.remove(v))}}else if(l==="styles"){let d=Object.keys(u),f=d.length;for(let m=0;m<f;m++){let g=d[m],v=u[g];v!==c[g]&&(n=!0,v?(cse(v),r.styleApplyer(e,g,v)):r.styleApplyer(e,g,""))}}else if(u||typeof c!="string"||(u=""),l==="value"){let d=e[l];d!==u&&(e["oninput-value"]?d===e["oninput-value"]:u!==c)&&(e[l]=u,e["oninput-value"]=void 0),u!==c&&(n=!0)}else if(u!==c){let d=typeof u;d==="function"&&r.eventHandlerInterceptor||(r.namespace===F4?l==="href"?e.setAttributeNS(use,l,u):e.setAttribute(l,u):d==="string"?l==="innerHTML"?e[l]=ase.sanitize(u):l==="role"&&u===""?e.removeAttribute(l):dse(e)&&l in e?e[l]=u:e.setAttribute(l,u):e[l]!==u&&(e[l]=u),n=!0)}}return n},nRe=(e,t,i,r,n)=>{if(i===r)return!1;r=r||LG;let s,o=(i=i||LG).length,a=r.length,l=0,u=0,c=!1;for(;u<a;){let d=l<o?i[l]:void 0,f=r[u];if(d!==void 0&&d9(d,f))c=FA(d,f,n)||c,l++;else{let m=XOe(i,f,l+1);if(m>=0){for(s=l;s<m;s++)FG(i[s]),xO(i,s,e,"removed");c=FA(i[m],f,n)||c,l=m+1}else kv(f,t,l<o?i[l].domNode:void 0,n),eRe(f),xO(r,u,e,"added")}u++}if(o>l)for(s=l;s<o;s++)FG(i[s]),xO(i,s,e,"removed");return c};FA=(e,t,i)=>{let r=e.domNode,n=!1;if(e===t)return!1;let s=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let o=r.ownerDocument.createTextNode(t.text);return r.parentNode.replaceChild(o,r),t.domNode=o,n=!0,n}t.domNode=r}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(i=h9(i,{namespace:F4})),e.text!==t.text&&(s=!0,t.text===void 0?r.removeChild(r.firstChild):r.textContent=t.text),t.domNode=r,s=nRe(t,r,e.children,t.children,i)||s,s=rRe(r,e.properties,t.properties,i)||s,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[r,i,t.vnodeSelector,t.properties,t.children]);return s&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(r,t.properties,e.properties),n};let w_=(e,t)=>({getLastRender:()=>e,update:i=>{if(e.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=e;e=i,FA(r,i,t)},domNode:e.domNode});const sRe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{t.charAt(0)==="-"?e.style.setProperty(t,i):e.style[t]=i}};let cv=e=>h9(sRe,e),Gf={create:(e,t)=>(t=cv(t),kv(e,document.createElement("div"),void 0,t),w_(e,t)),append:(e,t,i)=>(i=cv(i),kv(t,e,void 0,i),w_(t,i)),insertBefore:(e,t,i)=>(i=cv(i),kv(t,e.parentNode,e,i),w_(t,i)),merge:(e,t,i)=>(i=cv(i),t.domNode=e,pse(e,t,i),w_(t,i)),replace:(e,t,i)=>(i=cv(i),kv(t,e.parentNode,e,i),e.parentNode.removeChild(e),w_(t,i))},fse,oRe=(e,t)=>{let i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i};fse=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let aRe=(e,t)=>{let i=e;return t.forEach(r=>{i=i&&i.children?fse(i.children,n=>n.domNode===r):void 0}),i},lRe=(e,t,i)=>{let r=function(n){i("domEvent",n);let s=t(),o=oRe(n.currentTarget,s.domNode);o.reverse();let a,l=aRe(s.getLastRender(),o);return e.scheduleRender(),l&&(a=l.properties[`on${n.type}`].apply(l.properties.bind||this,arguments)),i("domEventProcessed",n),a};return(n,s,o,a)=>r},a6=e=>{let t,i,r=cv(e),n=r.performanceLogger,s=!0,o=!1,a=[],l=[],u=(d,f,m)=>{let g,v=()=>g;r.eventHandlerInterceptor=lRe(t,v,n),g=d(f,m(),r),a.push(g),l.push(m)},c=()=>{if(i=void 0,s){s=!1,n("renderStart",void 0);for(let d=0;d<a.length;d++){let f=l[d]();n("rendered",void 0),a[d].update(f),n("patched",void 0)}n("renderDone",void 0),s=!0}};return t={renderNow:c,scheduleRender:()=>{i||o||(i=requestAnimationFrame(c))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),o=!0},resume:()=>{o=!1,s=!0,t.scheduleRender()},append:(d,f)=>{u(Gf.append,d,f)},insertBefore:(d,f)=>{u(Gf.insertBefore,d,f)},merge:(d,f)=>{u(Gf.merge,d,f)},replace:(d,f)=>{u(Gf.replace,d,f)},detach:d=>{for(let f=0;f<l.length;f++)if(l[f]===d)return l.splice(f,1),a.splice(f,1)[0];throw new Error("renderFunction was not found")}},t},ff=class extends Lt{constructor(){super(...arguments),this.items=new Pt,this._watchUpdatingTracking=new Qv,this._callbacks=new Map,this._projector=a6(),this._hiddenProjector=a6()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){const t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const r of i.added){const n=()=>r.render();this._callbacks.set(r,n),this._projector.append(this.surface,n)}for(const r of i.removed){const n=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(n.domNode),this._callbacks.delete(r)}})}addItem(t){this.items.add(t)}removeItem(t){this.items.remove(t)}destroy(){this.items.removeAll(),this._callbacks.forEach(t=>this._projector.detach(t)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(t){const i=this._hiddenSurface,r=this._hiddenProjector;let n;const s=()=>(n=t.render(),n);r.append(i,s),r.renderNow();const o={left:0,top:0,right:0,bottom:0};if(n&&n.domNode){const a=n.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(r.detach(s);i.firstChild;)i.removeChild(i.firstChild);return o}overlaps(t,i){const r=this.computeBoundingRect(t),n=this.computeBoundingRect(i);return Math.max(r.left,n.left)<=Math.min(r.right,n.right)&&Math.max(r.top,n.top)<=Math.min(r.bottom,n.bottom)}get hasVisibleItems(){return this.items.some(t=>t.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(t){if(!this.items.some(r=>r.visible))return;const i=t.getContext("2d");i.save(),i.font=this._fontString(),this.items.forEach(r=>{i.save(),r.renderCanvas(i),i.restore()}),i.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};h([p({readOnly:!0})],ff.prototype,"surface",void 0),h([p({readOnly:!0})],ff.prototype,"items",void 0),h([p({readOnly:!0})],ff.prototype,"needsRender",null),h([p({readOnly:!0})],ff.prototype,"_watchUpdatingTracking",void 0),h([p({readOnly:!0})],ff.prototype,"updating",null),ff=h([ce("esri.views.overlay.ViewOverlay")],ff);const DG=ff;function ob(e,t,i,r){let n=null,s=1e3;typeof t=="number"?(s=t,r=i):(n=t??null,s=i);let o,a=0;const l=()=>{a=0,e.apply(r,o)},u=(...c)=>{n&&n.apply(r,c),o=c,s?a||(a=setTimeout(l,s)):l()};return u.remove=()=>{a&&(clearTimeout(a),a=0)},u.forceUpdate=()=>{a&&(clearTimeout(a),l())},u.hasPendingUpdates=()=>!!a,u}const uRe="randomUUID"in crypto;function cRe(){if(uRe)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=i=>e[i].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}const hRe={handleInterceptedEvent:(e,t,i,r)=>(e.scheduleRender(),t.properties[`on${r.type}`].apply(t.properties.bind||i,[r]))},dRe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{e.style[t]=i}},pRe=e=>({...dRe,...e}),fRe=(e,t)=>{const i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i},mRe=(e,t)=>e.find(t),jG=(e,t,i=!1)=>{let r=e;return t.forEach((n,s)=>{const o=r?.children?mRe(r.children,a=>a.domNode===n):void 0;i&&!o&&s!==t.length-1||(r=o)}),r},yRe=e=>{let t;const i={...hRe,...e},r=pRe(i),n=r.performanceLogger;let s,o=!0,a=!1;const l=[],u=[],c=(f,m,g)=>{let v;r.eventHandlerInterceptor=(x,S,T,_)=>function(M){let I;n("domEvent",M);const $=fRe(M.currentTarget,v.domNode),L=$.some(z=>customElements.get(z?.tagName?.toLowerCase()));if(M.eventPhase===Event.CAPTURING_PHASE||!L)$.reverse(),I=jG(v.getLastRender(),$);else{const z=M.composedPath(),W=z.slice(z.indexOf(M.currentTarget),z.indexOf(v.domNode)).filter(J=>J.getRootNode()===J.ownerDocument).reverse();I=jG(v.getLastRender(),W,!0)}let B;return I&&(B=i.handleInterceptedEvent(t,I,this,M)),n("domEventProcessed",M),B},i.postProcessProjectionOptions?.(r);const b=g();v=f(m,b,r),l.push(v),u.push(g),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(v,b)};let d=()=>{if(s=void 0,o){o=!1,n("renderStart",void 0);for(let f=0;f<l.length;f++){const m=u[f]();n("rendered",void 0),l[f].update(m),n("patched",void 0)}n("renderDone",void 0),o=!0}};return i.modifyDoRenderImplementation&&(d=i.modifyDoRenderImplementation(d,l,u)),t={renderNow:d,scheduleRender:()=>{s||a||(s=requestAnimationFrame(d))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),a=!0},resume:()=>{a=!1,o=!0,t.scheduleRender()},append:(f,m)=>{c(Gf.append,f,m)},insertBefore:(f,m)=>{c(Gf.insertBefore,f,m)},merge:(f,m)=>{c(Gf.merge,f,m)},replace:(f,m)=>{c(Gf.replace,f,m)},detach:f=>{for(let m=0;m<u.length;m++)if(u[m]===f)return u.splice(m,1),l.splice(m,1)[0];throw new Error("renderFunction was not found")}},t},hv={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let dv,mse,D4,yse=!1,DA=!1,p9=!1,il=!1,UG=null,l6=!1;const kut=e=>{const t=new URL(e,qs.$resourcesUrl$);return t.origin!==T3.location.origin?t.href:t.pathname},gRe=e=>qs.$resourcesUrl$=e,T0=(e,t="")=>()=>{},VG="http://www.w3.org/1999/xlink",BG={},vRe="http://www.w3.org/2000/svg",bRe="http://www.w3.org/1999/xhtml",wRe=e=>e!=null,f9=e=>(e=typeof e,e==="object"||e==="function"),gse=(e,t,...i)=>{let r=null,n=null,s=null,o=!1,a=!1;const l=[],u=d=>{for(let f=0;f<d.length;f++)r=d[f],Array.isArray(r)?u(r):r!=null&&typeof r!="boolean"&&((o=typeof e!="function"&&!f9(r))&&(r=String(r)),o&&a?l[l.length-1].$text$+=r:l.push(o?jA(null,r):r),a=o)};if(u(i),t){t.key&&(n=t.key),t.name&&(s=t.name);{const d=t.className||t.class;d&&(t.class=typeof d!="object"?d:Object.keys(d).filter(f=>d[f]).join(" "))}}if(typeof e=="function")return e(t===null?{}:t,l,SRe);const c=jA(e,null);return c.$attrs$=t,l.length>0&&(c.$children$=l),c.$key$=n,c.$name$=s,c},jA=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},_Re={},xRe=e=>e&&e.$tag$===_Re,SRe={forEach:(e,t)=>e.map(zG).forEach(t),map:(e,t)=>e.map(zG).map(t).map(ERe)},zG=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),ERe=e=>{if(typeof e.vtag=="function"){const i=Object.assign({},e.vattrs);return e.vkey&&(i.key=e.vkey),e.vname&&(i.name=e.vname),gse(e.vtag,i,...e.vchildren||[])}const t=jA(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},MRe=e=>QRe.map(t=>t(e)).find(t=>!!t),IRe=(e,t)=>e!=null&&!f9(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,TRe=e=>e,Lut=(e,t,i)=>{const r=TRe(e);return{emit:n=>ARe(r,t,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:n})}},ARe=(e,t,i)=>{const r=qs.ce(t,i);return e.dispatchEvent(r),r},GG=new WeakMap,CRe=(e,t,i)=>{let r=VA.get(e);tke&&i?(r=r||new CSSStyleSheet,typeof r=="string"?r=t:r.replaceSync(t)):r=t,VA.set(e,r)},$Re=(e,t,i,r)=>{let n=vse(t,i);const s=VA.get(n);if(e=e.nodeType===11?e:xh,s)if(typeof s=="string"){e=e.head||e;let o=GG.get(e),a;o||GG.set(e,o=new Set),o.has(n)||(a=xh.createElement("style"),a.innerHTML=s,e.insertBefore(a,e.querySelector("link")),o&&o.add(n))}else e.adoptedStyleSheets.includes(s)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,s]);return n},ORe=e=>{const t=e.$cmpMeta$,i=e.$hostElement$,r=t.$flags$,n=T0("attachStyles",t.$tagName$),s=$Re(i.shadowRoot?i.shadowRoot:i.getRootNode(),t,e.$modeName$);r&10&&(i["s-sc"]=s,i.classList.add(s+"-h"),r&2&&i.classList.add(s+"-s")),n()},vse=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),qG=(e,t,i,r,n,s)=>{if(i!==r){let o=ZG(e,t),a=t.toLowerCase();if(t==="class"){const l=e.classList,u=HG(i),c=HG(r);l.remove(...u.filter(d=>d&&!c.includes(d))),l.add(...c.filter(d=>d&&!u.includes(d)))}else if(t==="style"){for(const l in i)(!r||r[l]==null)&&(l.includes("-")?e.style.removeProperty(l):e.style[l]="");for(const l in r)(!i||r[l]!==i[l])&&(l.includes("-")?e.style.setProperty(l,r[l]):e.style[l]=r[l])}else if(t!=="key")if(t==="ref")r&&r(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):ZG(T3,a)?t=a.slice(2):t=a[2]+t.slice(3),i&&qs.rel(e,t,i,!1),r&&qs.ael(e,t,r,!1);else{const l=f9(r);if((o||l&&r!==null)&&!n)try{if(e.tagName.includes("-"))e[t]=r;else{const c=r??"";t==="list"?o=!1:(i==null||e[t]!=c)&&(e[t]=c)}}catch{}let u=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(t=a,u=!0),r==null||r===!1?(r!==!1||e.getAttribute(t)==="")&&(u?e.removeAttributeNS(VG,t):e.removeAttribute(t)):(!o||s&4||n)&&!l&&(r=r===!0?"":r,u?e.setAttributeNS(VG,t,r):e.setAttribute(t,r))}}},RRe=/\s/,HG=e=>e?e.split(RRe):[],bse=(e,t,i,r)=>{const n=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,s=e&&e.$attrs$||BG,o=t.$attrs$||BG;for(r in s)r in o||qG(n,r,s[r],void 0,i,t.$flags$);for(r in o)qG(n,r,s[r],o[r],i,t.$flags$)},UA=(e,t,i,r)=>{const n=t.$children$[i];let s=0,o,a,l;if(yse||(p9=!0,n.$tag$==="slot"&&(dv&&r.classList.add(dv+"-s"),n.$flags$|=n.$children$?2:1)),n.$text$!==null)o=n.$elm$=xh.createTextNode(n.$text$);else if(n.$flags$&1)o=n.$elm$=xh.createTextNode("");else{if(il||(il=n.$tag$==="svg"),o=n.$elm$=xh.createElementNS(il?vRe:bRe,n.$flags$&2?"slot-fb":n.$tag$),il&&n.$tag$==="foreignObject"&&(il=!1),bse(null,n,il),wRe(dv)&&o["s-si"]!==dv&&o.classList.add(o["s-si"]=dv),n.$children$)for(s=0;s<n.$children$.length;++s)a=UA(e,n,s,o),a&&o.appendChild(a);n.$tag$==="svg"?il=!1:o.tagName==="foreignObject"&&(il=!0)}return o["s-hn"]=D4,n.$flags$&3&&(o["s-sr"]=!0,o["s-cr"]=mse,o["s-sn"]=n.$name$||"",l=e&&e.$children$&&e.$children$[i],l&&l.$tag$===n.$tag$&&e.$elm$&&fS(e.$elm$,!1)),o},fS=(e,t)=>{qs.$flags$|=1;const i=e.childNodes;for(let r=i.length-1;r>=0;r--){const n=i[r];n["s-hn"]!==D4&&n["s-ol"]&&(xse(n).insertBefore(n,m9(n)),n["s-ol"].remove(),n["s-ol"]=void 0,p9=!0),t&&fS(n,t)}qs.$flags$&=-2},wse=(e,t,i,r,n,s)=>{let o=e["s-cr"]&&e["s-cr"].parentNode||e,a;for(o.shadowRoot&&o.tagName===D4&&(o=o.shadowRoot);n<=s;++n)r[n]&&(a=UA(null,i,n,e),a&&(r[n].$elm$=a,o.insertBefore(a,m9(t))))},_se=(e,t,i,r,n)=>{for(;t<=i;++t)(r=e[t])&&(n=r.$elm$,Mse(r),DA=!0,n["s-ol"]?n["s-ol"].remove():fS(n,!0),n.remove())},kRe=(e,t,i,r)=>{let n=0,s=0,o=0,a=0,l=t.length-1,u=t[0],c=t[l],d=r.length-1,f=r[0],m=r[d],g,v;for(;n<=l&&s<=d;)if(u==null)u=t[++n];else if(c==null)c=t[--l];else if(f==null)f=r[++s];else if(m==null)m=r[--d];else if(uM(u,f))pv(u,f),u=t[++n],f=r[++s];else if(uM(c,m))pv(c,m),c=t[--l],m=r[--d];else if(uM(u,m))(u.$tag$==="slot"||m.$tag$==="slot")&&fS(u.$elm$.parentNode,!1),pv(u,m),e.insertBefore(u.$elm$,c.$elm$.nextSibling),u=t[++n],m=r[--d];else if(uM(c,f))(u.$tag$==="slot"||m.$tag$==="slot")&&fS(c.$elm$.parentNode,!1),pv(c,f),e.insertBefore(c.$elm$,u.$elm$),c=t[--l],f=r[++s];else{for(o=-1,a=n;a<=l;++a)if(t[a]&&t[a].$key$!==null&&t[a].$key$===f.$key$){o=a;break}o>=0?(v=t[o],v.$tag$!==f.$tag$?g=UA(t&&t[s],i,o,e):(pv(v,f),t[o]=void 0,g=v.$elm$),f=r[++s]):(g=UA(t&&t[s],i,s,e),f=r[++s]),g&&xse(u.$elm$).insertBefore(g,m9(u.$elm$))}n>l?wse(e,r[d+1]==null?null:r[d+1].$elm$,i,r,s,d):s>d&&_se(t,n,l)},uM=(e,t)=>e.$tag$===t.$tag$?e.$tag$==="slot"?e.$name$===t.$name$:e.$key$===t.$key$:!1,m9=e=>e&&e["s-ol"]||e,xse=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,pv=(e,t)=>{const i=t.$elm$=e.$elm$,r=e.$children$,n=t.$children$,s=t.$tag$,o=t.$text$;let a;o===null?(il=s==="svg"?!0:s==="foreignObject"?!1:il,s==="slot"||bse(e,t,il),r!==null&&n!==null?kRe(i,r,t,n):n!==null?(e.$text$!==null&&(i.textContent=""),wse(i,null,t,n,0,n.length-1)):r!==null&&_se(r,0,r.length-1),il&&s==="svg"&&(il=!1)):(a=i["s-cr"])?a.parentNode.textContent=o:e.$text$!==o&&(i.data=o)},Sse=e=>{const t=e.childNodes;let i,r,n,s,o,a;for(r=0,n=t.length;r<n;r++)if(i=t[r],i.nodeType===1){if(i["s-sr"]){for(o=i["s-sn"],i.hidden=!1,s=0;s<n;s++)if(a=t[s].nodeType,t[s]["s-hn"]!==i["s-hn"]||o!==""){if(a===1&&o===t[s].getAttribute("slot")){i.hidden=!0;break}}else if(a===1||a===3&&t[s].textContent.trim()!==""){i.hidden=!0;break}}Sse(i)}},Xu=[],Ese=e=>{let t,i,r,n,s,o,a=0;const l=e.childNodes,u=l.length;for(;a<u;a++){if(t=l[a],t["s-sr"]&&(i=t["s-cr"])&&i.parentNode)for(r=i.parentNode.childNodes,n=t["s-sn"],o=r.length-1;o>=0;o--)i=r[o],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==t["s-hn"]&&(WG(i,n)?(s=Xu.find(c=>c.$nodeToRelocate$===i),DA=!0,i["s-sn"]=i["s-sn"]||n,s?s.$slotRefNode$=t:Xu.push({$slotRefNode$:t,$nodeToRelocate$:i}),i["s-sr"]&&Xu.map(c=>{WG(c.$nodeToRelocate$,i["s-sn"])&&(s=Xu.find(d=>d.$nodeToRelocate$===i),s&&!c.$slotRefNode$&&(c.$slotRefNode$=s.$slotRefNode$))})):Xu.some(c=>c.$nodeToRelocate$===i)||Xu.push({$nodeToRelocate$:i}));t.nodeType===1&&Ese(t)}},WG=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",Mse=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(Mse)},LRe=(e,t)=>{const i=e.$hostElement$,r=e.$cmpMeta$,n=e.$vnode$||jA(null,null),s=xRe(t)?t:gse(null,null,t);D4=i.tagName,r.$attrsToReflect$&&(s.$attrs$=s.$attrs$||{},r.$attrsToReflect$.map(([o,a])=>s.$attrs$[a]=i[o])),s.$tag$=null,s.$flags$|=4,e.$vnode$=s,s.$elm$=n.$elm$=i.shadowRoot||i,dv=i["s-sc"],mse=i["s-cr"],yse=(r.$flags$&1)!==0,DA=!1,pv(n,s);{if(qs.$flags$|=1,p9){Ese(s.$elm$);let o,a,l,u,c,d,f=0;for(;f<Xu.length;f++)o=Xu[f],a=o.$nodeToRelocate$,a["s-ol"]||(l=xh.createTextNode(""),l["s-nr"]=a,a.parentNode.insertBefore(a["s-ol"]=l,a));for(f=0;f<Xu.length;f++)if(o=Xu[f],a=o.$nodeToRelocate$,o.$slotRefNode$){for(u=o.$slotRefNode$.parentNode,c=o.$slotRefNode$.nextSibling,l=a["s-ol"];l=l.previousSibling;)if(d=l["s-nr"],d&&d["s-sn"]===a["s-sn"]&&u===d.parentNode&&(d=d.nextSibling,!d||!d["s-nr"])){c=d;break}(!c&&u!==a.parentNode||a.nextSibling!==c)&&a!==c&&(!a["s-hn"]&&a["s-ol"]&&(a["s-hn"]=a["s-ol"].parentNode.nodeName),u.insertBefore(a,c))}else a.nodeType===1&&(a.hidden=!0)}DA&&Sse(s.$elm$),qs.$flags$&=-2,Xu.length=0}},PRe=(e,t)=>{},y9=(e,t)=>(e.$flags$|=16,PRe(e,e.$ancestorComponent$),nke(()=>NRe(e,t))),NRe=(e,t)=>{const i=e.$hostElement$,r=T0("scheduleUpdate",e.$cmpMeta$.$tagName$),n=i;let s;return t?s=ab(n,"componentWillLoad"):s=ab(n,"componentWillUpdate"),s=JG(s,()=>ab(n,"componentWillRender")),r(),JG(s,()=>FRe(e,n,t))},FRe=async(e,t,i)=>{const r=e.$hostElement$,n=T0("update",e.$cmpMeta$.$tagName$);r["s-rc"],i&&ORe(e);const s=T0("render",e.$cmpMeta$.$tagName$);DRe(e,t,r),s(),n(),jRe(e)},DRe=(e,t,i)=>{try{UG=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(hv.hasRenderFn||hv.reflect)&&(hv.vdomRender||hv.reflect)&&(hv.hydrateServerSide||LRe(e,t))}catch(a){I3(a,e.$hostElement$)}return UG=null,null},jRe=e=>{const t=e.$cmpMeta$.$tagName$,i=e.$hostElement$,r=T0("postUpdate",t),n=i;e.$ancestorComponent$,ab(n,"componentDidRender"),e.$flags$&64?(ab(n,"componentDidUpdate"),r()):(e.$flags$|=64,ab(n,"componentDidLoad"),r())},Put=e=>{{const t=M3(e),i=t.$hostElement$.isConnected;return i&&(t.$flags$&18)===2&&y9(t,!1),i}},ab=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(r){I3(r)}},JG=(e,t)=>e&&e.then?e.then(t):t(),URe=(e,t)=>M3(e).$instanceValues$.get(t),VRe=(e,t,i,r)=>{const n=M3(e),s=e,o=n.$instanceValues$.get(t),a=n.$flags$,l=s;i=IRe(i,r.$members$[t][0]);const u=Number.isNaN(o)&&Number.isNaN(i);if(i!==o&&!u){n.$instanceValues$.set(t,i);{if(r.$watchers$&&a&128){const d=r.$watchers$[t];d&&d.map(f=>{try{l[f](i,o,t)}catch(m){I3(m,s)}})}if((a&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(i,o,t)===!1)return;y9(n,!1)}}}},BRe=(e,t,i)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const r=Object.entries(t.$members$),n=e.prototype;r.map(([s,[o]])=>{(o&31||o&32)&&Object.defineProperty(n,s,{get(){return URe(this,s)},set(a){VRe(this,s,a,t)},configurable:!0,enumerable:!0})});{const s=new Map;n.attributeChangedCallback=function(o,a,l){qs.jmp(()=>{const u=s.get(o);if(this.hasOwnProperty(u))l=this[u],delete this[u];else if(n.hasOwnProperty(u)&&typeof this[u]=="number"&&this[u]==l)return;this[u]=l===null&&typeof this[u]=="boolean"?!1:l})},e.observedAttributes=r.filter(([o,a])=>a[0]&15).map(([o,a])=>{const l=a[1]||o;return s.set(l,o),a[0]&512&&t.$attrsToReflect$.push([o,l]),l})}}return e},zRe=async(e,t,i,r,n)=>{if(!(t.$flags$&32)&&(n=e.constructor,t.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>t.$flags$|=128),n.style)){let o=n.style;typeof o!="string"&&(o=o[t.$modeName$=MRe(e)]);const a=vse(i,t.$modeName$);if(!VA.has(a)){const l=T0("registerStyles",i.$tagName$);CRe(a,o,!!(i.$flags$&1)),l()}}t.$ancestorComponent$,(()=>y9(t,!0))()},GRe=e=>{},qRe=e=>{if(!(qs.$flags$&1)){const t=M3(e),i=t.$cmpMeta$,r=T0("connectedCallback",i.$tagName$);t.$flags$&1?(Ise(e,t,i.$listeners$),GRe(t.$lazyInstance$)):(t.$flags$|=1,i.$flags$&12&&HRe(e),i.$members$&&Object.entries(i.$members$).map(([n,[s]])=>{if(s&31&&e.hasOwnProperty(n)){const o=e[n];delete e[n],e[n]=o}}),zRe(e,t,i)),r()}},HRe=e=>{const t=e["s-cr"]=xh.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},WRe=e=>{if(!(qs.$flags$&1)){const t=M3(e);t.$rmListeners$&&(t.$rmListeners$.map(i=>i()),t.$rmListeners$=void 0)}},Nut=(e,t)=>{const i={$flags$:t[0],$tagName$:t[1]};i.$members$=t[2],i.$listeners$=t[3],i.$watchers$=e.$watchers$,i.$attrsToReflect$=[];const r=e.prototype.connectedCallback,n=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){KRe(this,i)},connectedCallback(){qRe(this),r&&r.call(this)},disconnectedCallback(){WRe(this),n&&n.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)})}}),e.is=i.$tagName$,BRe(e,i)},Fut=(e,t)=>t,Ise=(e,t,i,r)=>{i&&i.map(([n,s,o])=>{const a=ZRe(e,n),l=JRe(t,o),u=YRe(n);qs.ael(a,s,l,u),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>qs.rel(a,s,l,u))})},JRe=(e,t)=>i=>{try{hv.lazyLoad||e.$hostElement$[t](i)}catch(r){I3(r)}},ZRe=(e,t)=>t&4?xh:t&8?T3:t&16?xh.body:e,YRe=e=>XRe?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0,Tse=new WeakMap,M3=e=>Tse.get(e),KRe=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return Ise(e,i,t.$listeners$),Tse.set(e,i)},ZG=(e,t)=>t in e,I3=(e,t)=>(0,console.error)(e,t),VA=new Map,QRe=[],T3=typeof window<"u"?window:{},xh=T3.document||{head:{}},Dut=T3.HTMLElement||class{},qs={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,r)=>e.addEventListener(t,i,r),rel:(e,t,i,r)=>e.removeEventListener(t,i,r),ce:(e,t)=>new CustomEvent(e,t)},XRe=(()=>{let e=!1;try{xh.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),eke=e=>Promise.resolve(e),tke=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),YG=[],Ase=[],ike=(e,t)=>i=>{e.push(i),l6||(l6=!0,t&&qs.$flags$&4?rke(u6):qs.raf(u6))},KG=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(i){I3(i)}e.length=0},u6=()=>{KG(YG),KG(Ase),(l6=YG.length>0)&&qs.raf(u6)},rke=e=>eke().then(e),nke=ike(Ase,!0);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Cse="calcite-mode-auto",$se="calcite-mode-dark",ske="calcite-mode-light",jut={autoMode:Cse,darkMode:$se,lightMode:ske,rtl:"calcite--rtl"};/*!
* tabbable 6.0.1
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Ose=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],BA=Ose.join(","),Rse=typeof Element>"u",A0=Rse?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,zA=!Rse&&Element.prototype.getRootNode?function(e){return e.getRootNode()}:function(e){return e.ownerDocument},kse=function(t,i,r){var n=Array.prototype.slice.apply(t.querySelectorAll(BA));return i&&A0.call(t,BA)&&n.unshift(t),n=n.filter(r),n},Lse=function e(t,i,r){for(var n=[],s=Array.from(t);s.length;){var o=s.shift();if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,u=e(l,!0,r);r.flatten?n.push.apply(n,u):n.push({scopeParent:o,candidates:u})}else{var c=A0.call(o,BA);c&&r.filter(o)&&(i||!t.includes(o))&&n.push(o);var d=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),f=!r.shadowRootFilter||r.shadowRootFilter(o);if(d&&f){var m=e(d===!0?o.children:d.children,!0,r);r.flatten?n.push.apply(n,m):n.push({scopeParent:o,candidates:m})}else s.unshift.apply(s,o.children)}}return n},Pse=function(t,i){return t.tabIndex<0&&(i||/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||t.isContentEditable)&&isNaN(parseInt(t.getAttribute("tabindex"),10))?0:t.tabIndex},oke=function(t,i){return t.tabIndex===i.tabIndex?t.documentOrder-i.documentOrder:t.tabIndex-i.tabIndex},Nse=function(t){return t.tagName==="INPUT"},ake=function(t){return Nse(t)&&t.type==="hidden"},lke=function(t){var i=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return i},uke=function(t,i){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===i)return t[r]},cke=function(t){if(!t.name)return!0;var i=t.form||zA(t),r=function(a){return i.querySelectorAll('input[type="radio"][name="'+a+'"]')},n;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")n=r(window.CSS.escape(t.name));else try{n=r(t.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=uke(n,t.form);return!s||s===t},hke=function(t){return Nse(t)&&t.type==="radio"},dke=function(t){return hke(t)&&!cke(t)},pke=function(t){for(var i,r=zA(t).host,n=!!((i=r)!==null&&i!==void 0&&i.ownerDocument.contains(r)||t.ownerDocument.contains(t));!n&&r;){var s;r=zA(r).host,n=!!((s=r)!==null&&s!==void 0&&s.ownerDocument.contains(r))}return n},QG=function(t){var i=t.getBoundingClientRect(),r=i.width,n=i.height;return r===0&&n===0},fke=function(t,i){var r=i.displayCheck,n=i.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var s=A0.call(t,"details>summary:first-of-type"),o=s?t.parentElement:t;if(A0.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof n=="function"){for(var a=t;t;){var l=t.parentElement,u=zA(t);if(l&&!l.shadowRoot&&n(l)===!0)return QG(t);t.assignedSlot?t=t.assignedSlot:!l&&u!==t.ownerDocument?t=u.host:t=l}t=a}if(pke(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return QG(t);return!1},mke=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var i=t.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var n=i.children.item(r);if(n.tagName==="LEGEND")return A0.call(i,"fieldset[disabled] *")?!0:!n.contains(t)}return!0}i=i.parentElement}return!1},GA=function(t,i){return!(i.disabled||ake(i)||fke(i,t)||lke(i)||mke(i))},c6=function(t,i){return!(dke(i)||Pse(i)<0||!GA(t,i))},yke=function(t){var i=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},gke=function e(t){var i=[],r=[];return t.forEach(function(n,s){var o=!!n.scopeParent,a=o?n.scopeParent:n,l=Pse(a,o),u=o?e(n.candidates):a;l===0?o?i.push.apply(i,u):i.push(a):r.push({documentOrder:s,tabIndex:l,item:n,isScope:o,content:u})}),r.sort(oke).reduce(function(n,s){return s.isScope?n.push.apply(n,s.content):n.push(s.content),n},[]).concat(i)},vke=function(t,i){i=i||{};var r;return i.getShadowRoot?r=Lse([t],i.includeContainer,{filter:c6.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:yke}):r=kse(t,i.includeContainer,c6.bind(null,i)),gke(r)},Uut=function(t,i){i=i||{};var r;return i.getShadowRoot?r=Lse([t],i.includeContainer,{filter:GA.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=kse(t,i.includeContainer,GA.bind(null,i)),r},Vut=function(t,i){if(i=i||{},!t)throw new Error("No node provided");return A0.call(t,BA)===!1?!1:c6(i,t)},bke=Ose.concat("iframe").join(","),But=function(t,i){if(i=i||{},!t)throw new Error("No node provided");return A0.call(t,bke)===!1?!1:GA(i,t)};const wke={getShadowRoot:!0};function zut(e){const t="dir",i=`[${t}]`,r=_ke(e,i);return r?r.getAttribute(t):"ltr"}function Gut(e,t,i){const r=`[${t}]`,n=e.closest(r);return n?n.getAttribute(t):i}function Fse(e){return e.getRootNode()}function Dse(e){return e.host||null}function qut(e,{selector:t,id:i}){function r(n){if(!n)return null;n.assignedSlot&&(n=n.assignedSlot);const s=Fse(n),o=i?"getElementById"in s?s.getElementById(i):null:t?s.querySelector(t):null,a=Dse(s);return o||(a?r(a):null)}return r(e)}function _ke(e,t){function i(r){return r?r.closest(t)||i(Dse(Fse(r))):null}return i(e)}function xke(e,t){return jse(e,t)}function jse(e,t){if(!e)return;const i=t(e);if(i!==void 0)return i;const{parentNode:r}=e;return jse(r instanceof ShadowRoot?r.host:r,t)}function Hut(e,t){return!!xke(t,i=>i===e?!0:void 0)}function Ske(e){return typeof e?.setFocus=="function"}async function Wut(e){if(e)return Ske(e)?e.setFocus():e.focus()}function Jut(e){(vke(e,wke)[0]||e).focus()}const mS=":not([slot])";function Zut(e,t,i){t&&!Array.isArray(t)&&typeof t!="string"&&(i=t,t=null);const r=t?Array.isArray(t)?t.map(n=>`[slot="${n}"]`).join(","):`[slot="${t}"]`:mS;return i?.all?Eke(e,r,i):Mke(e,r,i)}function Use(e,t){return e?Array.from(e.children||[]).filter(i=>i?.matches(t)):[]}function Eke(e,t,i){let r=t===mS?Use(e,mS):Array.from(e.querySelectorAll(t));r=i&&i.direct===!1?r:r.filter(s=>s.parentElement===e),r=i?.matches?r.filter(s=>s?.matches(i.matches)):r;const n=i?.selector;return n?r.map(s=>Array.from(s.querySelectorAll(n))).reduce((s,o)=>[...s,...o],[]).filter(s=>!!s):r}function Mke(e,t,i){let r=t===mS?Use(e,mS)[0]||null:e.querySelector(t);r=i&&i.direct===!1||r?.parentElement===e?r:null,r=i?.matches?r?.matches(i.matches)?r:null:r;const n=i?.selector;return n?r?.querySelector(n):r}function Yut(e,t,i){if(typeof t=="string"&&t!=="")return t;if(t==="")return e[i]}function Kut(e){return(!!e).toString()}function Qut(e){return!!Ike(e).length}function Ike(e){return e.target.assignedElements({flatten:!0})}function Xut(e){return!!(e.isPrimary&&e.button===0)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */function XG(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>e.contains($se)||e.contains(Cse)&&t?"dark":"light",r=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),n=o=>{s!==o&&r(o),s=o};let s=i();r(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>n(o.matches?"dark":"light")),new MutationObserver(()=>n(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function Tke(){typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document&&(document.readyState==="interactive"?XG():document.addEventListener("DOMContentLoaded",()=>XG(),{once:!0}))}const Ake=Tke;Ake();let Vse;function Cke(){gRe(hl(Di(Vse)))}Vse="components/assets";const Bse=Symbol("widget"),$ke=Symbol("widget-test-data"),Oke=[],Rke={},qA=new WeakMap;function zse(e,t){let i=t.children;if(i&&i.length)for(let n=0;n<i.length;++n)i[n]=zse(e,i[n]);else i=Oke;const r=t.vnodeSelector;if(g9(r)){const n=t.properties||Rke,s=n.key||r;return{vnodeSelector:"div",properties:{key:s,afterCreate:kke,afterUpdate:Lke,afterRemoved:Gse,parentWidget:e,widgetConstructor:r,widgetProperties:{...n,key:s,children:i}},children:void 0,text:void 0,domNode:null}}return t}function kke(e,t,i,{parentWidget:r,widgetConstructor:n,widgetProperties:s}){const o=new n(s);o.container=e,qA.set(e,o),o.afterCreate?.(o,e),r._internalHandles.add(cw(()=>Gse(e)))}function Lke(e,t,i,{widgetProperties:r}){const n=qA.get(e);n&&(n.set(r),n.afterUpdate?.(n,e))}function Gse(e){const t=qA.get(e);t&&(t.afterRemoved?.(t,e),t.destroy(),qA.delete(e))}function g9(e){return typeof e=="function"&&e[Bse]}const eq=new Set;function Pke(e){eq.add(e),e.finally(()=>eq.delete(e))}var qse;const Nke="esri.widgets.Widget";let Fke=0;const Dke={widgetIcon:"esri-icon-checkbox-unchecked"};function Hse(e,t){for(const i in t)e[i]!=null&&(typeof e[i]=="object"&&typeof t[i]=="object"?Hse(e[i],t?.[i]):e[i]=t[i]);return e}const jke=yRe({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,i=/capture$/i;e.eventHandlerInterceptor=(r,n,s,o)=>{const a=t?.(r,n,s,o),l=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in s)||l){const u=r[2].toLowerCase()+r.slice(3),c=m=>a?.call(s,m);s.addEventListener(u,c,l);const d=()=>s.removeEventListener(u,c,l),f=o.afterRemoved;o.afterRemoved=m=>{f?.(m),d()}}return a}},handleInterceptedEvent(e,t,i,r){const{eventPhase:n,type:s}=r,o=n===Event.CAPTURING_PHASE;let a=`on${s}${o?"capture":""}`;const l=t.properties;(l&&a in l||(a=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,l&&a in l))&&(nse(),e.scheduleRender(),l[a].call(l.bind||i,r))}});let SO=!1,rs=class extends XS(hp.EventedAccessor){constructor(t,i){super(t,i),this._attached=!1,this._internalHandles=new So,this._projector=jke,this._readyForTrueRender=!1,this.iconClass=Dke.widgetIcon,this.key=this,this._loadLocale=_Y(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const o=await Ia(this._messageBundleProps.map(async({bundlePath:a,propertyName:l})=>{let u=await zK(a);this.uiStrings&&Object.keys(this.uiStrings)&&(u=Hse(Le(u),this.uiStrings)),this[l]=u}));for(const a of o)a.error&&et.getLogger(this.declaredClass).error("widget-intl:locale-error",this.declaredClass,a.error)}await this.loadLocale()}),Cke();const r="esri-widget-uid-"+cRe(),n=this.render.bind(this);this._trackingTarget=new G5(()=>this.scheduleRender());const s=()=>{if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:r,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0};const o=n();let{properties:a}=o;a||(o.properties=a={});let{key:l,styles:u}=a;l||(a.key=r),u||(a.styles=u={}),u.display||(u.display="");let c=0;return o.children?.forEach(d=>{if(g9(d.vnodeSelector))return;let{properties:f}=d;f||(d.properties=f={}),f.key||(f.key=`${this.id}--${c++}`)}),zse(this,o)};this.render=()=>{if(SO)return s();let o=BOe(this)??null;if(o)return o;this._trackingTarget.clear(),SO=!0;try{o=Yd(this._trackingTarget,s)}catch(a){throw console.error(a),a}finally{SO=!1}return o&&zOe(this,o),o},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()})),Pke(this._resourcesFetch)}normalizeCtorArgs(t,i){const r={...t};return i&&(r.container=i),r}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(PR)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(qr(this._trackingTarget),qr(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,_O(this))}set container(t){this._get("container")||this._set("container",t)}castContainer(t){return u9(t)}get domNode(){return this.container}set domNode(t){this.container=t}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+Fke++}set id(t){t&&this._set("id",t)}get label(){return this.declaredClass.split(".").pop()}set label(t){this._overrideIfSome("label",t)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(t){this._set("visible",t)}get[(qse=Bse,$ke)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(_O(this),this._projector.scheduleRender())}classes(...t){return ose.apply(this,t)}renderNow(){_O(this),this._projector.renderNow()}_postInitialize(){if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this._internalHandles.add(nt(()=>this.viewModel,(i,r)=>{r&&this._internalHandles.remove("delegated-events"),i&&U5(i)&&this._internalHandles.add(this._delegatedEventNames.map(n=>V5(i,n,s=>{this.emit(n,s)})),"delegated-events")},Pi)),this.postInitialize();const t=async()=>{await this._loadLocale().catch(PR),this.scheduleRender()};this._internalHandles.add([VK(t),nt(()=>this.uiStrings,t),Tl(()=>this.container,i=>{this.destroyed||this._attach(i)},{initial:!0,once:!0})])}_attach(t){t&&(this._projector.merge(t,this.render),this._attached=!0)}_detach(t){this._attached&&(this._projector.detach(this.render),this._attached=!1),t?.parentNode?.removeChild(t)}};rs[qse]=!0,h([p()],rs.prototype,"_readyForTrueRender",void 0),h([p({value:null})],rs.prototype,"container",null),h([di("container")],rs.prototype,"castContainer",null),h([p()],rs.prototype,"iconClass",void 0),h([p()],rs.prototype,"id",null),h([p()],rs.prototype,"label",null),h([p()],rs.prototype,"renderable",null),h([p()],rs.prototype,"uiStrings",void 0),h([p()],rs.prototype,"viewModel",void 0),h([p({value:!0})],rs.prototype,"visible",null),h([p()],rs.prototype,"key",void 0),h([p()],rs.prototype,"children",void 0),h([p()],rs.prototype,"afterCreate",void 0),h([p()],rs.prototype,"afterUpdate",void 0),h([p()],rs.prototype,"afterRemoved",void 0),rs=h([ce(Nke)],rs);const $s=rs,tq=["B","kB","MB","GB","TB"];function Uke(e,t){let i=t===0?0:Math.floor(Math.log(t)/Math.log(dS.KILOBYTES));i=Ta(i,0,tq.length-1);const r=hm(t/dS.KILOBYTES**i,{maximumFractionDigits:2});return dc(e.units.bytes[tq[i]],{fileSize:r})}const Vke="esri.widgets.Feature.support.featureUtils",iq=et.getLogger(Vke),Bke=/href=(""|'')/gi,zke=/(\{([^\{\r\n]+)\})/g,Gke=/\'/g,Wse=/^\s*expression\//i,qke=/(\n)/gi,Hke=/[\u00A0-\u9999<>\&]/gim,Wke=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,Jke=/^(?:mailto:|tel:)/,Jse="relationships/",h6=MF("short-date-short-time");function Zse(e){if(!Re(e))return e.get("sourceLayer")||e.get("layer")}async function HA(e,t){return typeof e=="function"?e.call(null,t):e}function Yse(e=""){if(e)return!Jke.test(e.trim().toLowerCase())}function v9(e){return!!e&&Wse.test(e)}function Zke(e,t){if(!v9(t)||!e)return null;const i=t.replace(Wse,"").toLowerCase();let r=null;return e.some(n=>n.name.toLowerCase()===i&&(r=n,!0)),r}function Kse(e,t){const i=Zke(t,e?.fieldName);return i?i.title||null:e?e.label||e.fieldName:null}function Yke(e,t){const i=t.get(e.toLowerCase());return`{${i&&i.fieldName||e}}`}function Kke(e){return e.replace(Bke,"")}function yS(e,t){const i=b9(t,e);return i?i.name:e}function Qke(e,t){return e&&e.map(i=>yS(i,t))}function b9(e,t){return e&&typeof e.getField=="function"&&t?e.getField(t)??null:null}function Qse(e){return`${e}`.trim()}function Fg({attributes:e,globalAttributes:t,layer:i,text:r,expressionAttributes:n,fieldInfoMap:s}){return r?d6({formattedAttributes:t,template:iLe(r,{...t,...n,...e},i),fieldInfoMap:s}):""}function d6({formattedAttributes:e,template:t,fieldInfoMap:i}){return Qse(Kke(dc(dc(t,r=>Yke(r,i)),e)))}function Xke(e,t,i=!1){const r=t[e];if(typeof r=="string"){const n="%27",s=(i?encodeURIComponent(r):r).replace(Gke,n);t[e]=s}}function eLe(e,t=!1){const i={...e};return Object.keys(i).forEach(r=>Xke(r,i,t)),i}function tLe(e,t,i){const r=(t=Qse(t))&&t[0]!=="{";return dc(e,eLe(i,r||!1))}function p6(e,t){return e.replace(zke,(i,r,n)=>{const s=b9(t,n);return s?`{${s.name}}`:r})}function iLe(e,t,i){const r=p6(e,i);return r&&r.replace(Wke,(n,s,o)=>tLe(n,s||o,t))}function rLe(e,t){if(typeof e=="string"&&t&&t.dateFormat==null&&(t.places!=null||t.digitSeparator!=null)){const i=Number(e);if(!isNaN(i))return i}return e}function nLe(e){return e?.type==="feature"}function rq(e){return!!e?.layer}function sLe(e){return e?.type==="map-image"}function oLe(e,t){const i=t.fieldInfos,r=t.fieldName,n=Xse(i,r)?.clone(),s=t.preventPlacesFormatting,o=t.layer,a=b9(o,r);if(n&&a?.type==="date"){const u=n.format||new Av;u.dateFormat=u.dateFormat||"short-date-short-time",u.dateTimeFormatOptions=!rq(o)&&nLe(o)&&o.datesInUnknownTimezone||rq(o)&&sLe(o.layer)&&o.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,n.format=u}const l=n&&n.format;return typeof e=="string"&&HQ(r)&&l?l.formatRasterPixelValue(e):typeof(e=rLe(e,l))=="string"||e==null||l==null?A3(e):s?hm(e,{...YQ(l),minimumFractionDigits:0,maximumFractionDigits:20}):l.format(e)}function Xse(e,t){if(!e||!e.length||!t)return;const i=t.toLowerCase();let r;return e.some(n=>!(!n.fieldName||n.fieldName.toLowerCase()!==i)&&(r=n,!0)),r}function aLe({fieldName:e,graphic:t,layer:i}){if(Bd(e)||!i||typeof i.getFeatureType!="function")return null;const{typeIdField:r}=i;if(!r||e!==r)return null;const n=i.getFeatureType(t);return n?n.name:null}function lLe({fieldName:e,value:t,graphic:i,layer:r}){if(Bd(e)||!r||typeof r.getFieldDomain!="function")return null;const n=i&&r.getFieldDomain(e,{feature:i});return n&&n.type==="coded-value"?n.getName(t):null}function uLe(e,t){const{creatorField:i,creationDateField:r,editorField:n,editDateField:s}=e;if(!t)return;const o=t[s];if(typeof o=="number"){const l=t[n];return{type:"edit",date:ep(o,h6),user:l}}const a=t[r];if(typeof a=="number"){const l=t[i];return{type:"create",date:ep(a,h6),user:l}}return null}function cLe(e,t){const i=new Map;return e&&e.forEach(r=>{const n=yS(r.fieldName,t);r.fieldName=n,i.set(n.toLowerCase(),r)}),i}function nq(e){const t=[];if(!e)return t;const{fieldInfos:i,content:r}=e;return i&&t.push(...i),r&&Array.isArray(r)&&r.forEach(n=>{if(n.type==="fields"){const s=n&&n.fieldInfos;s&&t.push(...s)}}),t}function w9(e){return e.replace(Hke,t=>`&#${t.charCodeAt(0)};`)}function A3(e){return typeof e=="string"?e.replace(qke,'<br class="esri-text-new-line" />'):e}function eoe(e){const{value:t,fieldName:i,fieldInfos:r,fieldInfoMap:n,layer:s,graphic:o}=e;if(t==null)return"";const a=lLe({fieldName:i,value:t,graphic:o,layer:s});if(a)return a;const l=aLe({fieldName:i,graphic:o,layer:s});if(l)return l;if(n.get(i.toLowerCase()))return oLe(t,{fieldInfos:r||Array.from(n.values()),fieldName:i,layer:s});const u=s&&s.fieldsIndex;return u&&u.isDateField(i)?ep(t,h6):A3(t)}function EO({fieldInfos:e,attributes:t,layer:i,graphic:r,fieldInfoMap:n,relatedInfos:s}){const o={};return s?.forEach(a=>fLe({attributes:o,relatedInfo:a,fieldInfoMap:n,fieldInfos:e,layer:i})),t&&Object.keys(t).forEach(a=>{const l=t[a];o[a]=eoe({fieldName:a,fieldInfos:e,fieldInfoMap:n,layer:i,value:l,graphic:r})}),o}async function toe(e,t){const{layer:i,graphic:r,outFields:n,objectIds:s,returnGeometry:o,spatialReference:a}=e,l=s[0];if(typeof l!="number"&&typeof l!="string"){const c="Could not query required fields for the specified feature. The feature's ID is invalid.",d={layer:i,graphic:r,objectId:l,requiredFields:n};return iq.warn(c,d),null}if(!WK(i)?.operations?.supportsQuery){const c="The specified layer cannot be queried. The following fields will not be available.",d={layer:i,graphic:r,requiredFields:n,returnGeometry:o};return iq.warn(c,d),null}const u=i.createQuery();return u.objectIds=s,u.outFields=n?.length?n:[i.objectIdField],u.returnGeometry=!!o,u.returnZ=!!o,u.returnM=!!o,u.outSpatialReference=a,(await i.queryFeatures(u,t)).features[0]}async function hLe(e){if(!e.expressionInfos?.length)return!1;const t=await Xd(),{arcadeUtils:{hasGeometryFunctions:i}}=t;return i(e)}async function dLe({graphic:e,popupTemplate:t,layer:i,spatialReference:r},n){if(!i||!t||(typeof i.load=="function"&&await i.load(n),!e.attributes))return;const s=e.attributes[i.objectIdField];if(s==null)return;const o=[s],a=await t.getRequiredFields(i.fieldsIndex),l=Bve(a,e),u=l?[]:a,c=t.returnGeometry||await hLe(t);if(l&&!c)return;const d=await toe({layer:i,graphic:e,outFields:u,objectIds:o,returnGeometry:c,spatialReference:r},n);d&&(d.geometry&&(e.geometry=d.geometry),d.attributes&&(e.attributes={...e.attributes,...d.attributes}))}function Bd(e=""){return!!e&&e.includes(Jse)}function pLe(e){return e?`${Jse}${e.layerId}/${e.fieldName}`:""}function sq({attributes:e,graphic:t,relatedInfo:i,fieldInfos:r,fieldInfoMap:n,layer:s}){e&&t&&i&&Object.keys(t.attributes).forEach(o=>{const a=pLe({layerId:i.relation.id.toString(),fieldName:o}),l=t.attributes[o];e[a]=eoe({fieldName:a,fieldInfos:r,fieldInfoMap:n,layer:s,value:l,graphic:t})})}function fLe({attributes:e,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:n}){e&&t&&(t.relatedFeatures&&t.relatedFeatures&&t.relatedFeatures.forEach(s=>sq({attributes:e,graphic:s,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:n})),t.relatedStatsFeatures&&t.relatedStatsFeatures&&t.relatedStatsFeatures.forEach(s=>sq({attributes:e,graphic:s,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:n})))}const oq=e=>{if(!e)return!1;const t=e.toUpperCase();return t.includes("CURRENT_TIMESTAMP")||t.includes("CURRENT_DATE")||t.includes("CURRENT_TIME")},ioe=({layer:e,method:t,query:i,definitionExpression:r})=>{if(!e.capabilities?.query?.supportsCacheHint||t==="attachments")return;const n=ee(i.where)?i.where:null,s=ee(i.geometry)?i.geometry:null;oq(r)||oq(n)||s?.type==="extent"||i.resultType==="tile"||(i.cacheHint=!0)},mLe=({query:e,layer:t,method:i})=>{ioe({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})},yLe=({queryPayload:e,layer:t,method:i})=>{ioe({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})};function gLe(e,t,i){return e&&t&&i?aq(e.allLayers,t,i)||aq(e.allTables,t,i):null}function aq(e,t,i){return e.find(r=>r!==t&&r.type==="feature"&&r.url===t.url&&r.layerId===i.relatedTableId)}const lq={editing:!1,operations:{add:!0,update:!0,delete:!0}},roe=Pt.ofType(MCe);let na=class extends Lt{constructor(t){super(t),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities={...lq},this.activeAttachmentInfo=null,this.activeFileInfo=null,this.attachmentInfos=new roe,this.fileInfos=new Pt,this.graphic=null,this.mode="view",this.filesEnabled=!1,this.addHandles(nt(()=>this.graphic,()=>this._graphicChanged(),Pi))}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(t){return{...lq,...t}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){const{graphic:t}=this;if(!t)return!1;const i=t.layer||t.sourceLayer;return i?.loaded&&"capabilities"in i&&i.capabilities&&"operations"in i.capabilities&&"supportsResizeAttachments"in i.capabilities.operations&&i.capabilities.operations.supportsResizeAttachments||!1}async getAttachments(){const{_attachmentLayer:t,attachmentInfos:i}=this;if(!t||typeof t.queryAttachments!="function")throw new Ce("invalid-layer","getAttachments(): A valid layer is required.");const r=this._getObjectId(),n=new SA({objectIds:[r],returnMetadata:!0}),s=[],o=t.queryAttachments(n).then(l=>l[r]||s).catch(()=>s);this._getAttachmentsPromise=o,this.notifyChange("state");const a=await o;return i.removeAll(),a.length&&i.addMany(a),this._getAttachmentsPromise=null,this.notifyChange("state"),a}async addAttachment(t,i=this.graphic){const{_attachmentLayer:r,attachmentInfos:n,abilities:s}=this;if(!i)throw new Ce("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:i});if(!t)throw new Ce("invalid-attachment","addAttachment(): An attachment is required.",{attachment:t});if(!s.operations?.add)throw new Ce("invalid-abilities","addAttachment(): add abilities are required.");if(!r||typeof r.addAttachment!="function")throw new Ce("invalid-layer","addAttachment(): A valid layer is required.");const o=r.addAttachment(i,t).then(l=>this._queryAttachment(l.objectId,i)),a=await o;return n.add(a),a}async deleteAttachment(t){const{_attachmentLayer:i,attachmentInfos:r,graphic:n,abilities:s}=this;if(!t)throw new Ce("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!s.operations?.delete)throw new Ce("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!i||typeof i.deleteAttachments!="function")throw new Ce("invalid-layer","deleteAttachment(): A valid layer is required.");if(!n)throw new Ce("invalid-graphic","deleteAttachment(): A graphic is required.");const o=i.deleteAttachments(n,[t.id]).then(()=>t),a=await o;return r.remove(a),a}async updateAttachment(t,i=this.activeAttachmentInfo){const{_attachmentLayer:r,attachmentInfos:n,graphic:s,abilities:o}=this;if(!t)throw new Ce("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:t});if(!i)throw new Ce("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:i});if(!o.operations?.update)throw new Ce("invalid-abilities","updateAttachment(): Update abilities are required.");const a=n.findIndex(c=>c===i);if(!r||typeof r.updateAttachment!="function")throw new Ce("invalid-layer","updateAttachment(): A valid layer is required.");if(!s)throw new Ce("invalid-graphic","updateAttachment(): A graphic is required.");const l=r.updateAttachment(s,i.id,t).then(c=>this._queryAttachment(c.objectId)),u=await l;return n.splice(a,1,u),u}async commitFiles(){return await Promise.all(this.fileInfos.items.map(t=>this.addAttachment(t.form))),this.fileInfos.removeAll(),this.getAttachments()}addFile(t,i){if(!t||!i)return null;const r={file:t,form:i};return this.fileInfos.add(r),r}updateFile(t,i,r=this.activeFileInfo){if(!t||!i||!r)return null;const n=this.fileInfos.findIndex(s=>r===s);return n>-1&&this.fileInfos.splice(n,1,{file:t,form:i}),this.fileInfos.items[n]}deleteFile(t){const i=this.fileInfos.find(r=>r.file===t);return i?(this.fileInfos.remove(i),i):null}async _queryAttachment(t,i){const{_attachmentLayer:r}=this;if(!t||!r?.queryAttachments)throw new Ce("invalid-attachment-id","Could not query attachment.");const n=this._getObjectId(i),s=new SA({objectIds:[n],attachmentsWhere:`AttachmentId=${t}`,returnMetadata:!0});return r.queryAttachments(s).then(o=>o[n][0])}_getObjectId(t=this.graphic){return t?.getObjectId()??null}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:t}=this,i=Zse(t);this._attachmentLayer=i?i.type==="scene"&&ee(i.associatedLayer)?i.associatedLayer:i:null}};h([p()],na.prototype,"abilities",void 0),h([di("abilities")],na.prototype,"castAbilities",null),h([p()],na.prototype,"activeAttachmentInfo",void 0),h([p()],na.prototype,"activeFileInfo",void 0),h([p({readOnly:!0,type:roe})],na.prototype,"attachmentInfos",void 0),h([p()],na.prototype,"fileInfos",void 0),h([p({type:As})],na.prototype,"graphic",void 0),h([p()],na.prototype,"mode",void 0),h([p({readOnly:!0})],na.prototype,"state",null),h([p()],na.prototype,"filesEnabled",void 0),h([p({readOnly:!0})],na.prototype,"supportsResizeAttachments",null),na=h([ce("esri.widgets.Attachments.AttachmentsViewModel")],na);const _9=na;function uq(e){const t=e.toLowerCase();return t==="image/bmp"||t==="image/emf"||t==="image/exif"||t==="image/gif"||t==="image/x-icon"||t==="image/jpeg"||t==="image/png"||t==="image/tiff"||t==="image/x-wmf"}function vLe(e){const t=Di("esri/themes/base/images/files/");return e?e==="text/plain"?`${t}text-32.svg`:e==="application/pdf"?`${t}pdf-32.svg`:e==="text/csv"?`${t}csv-32.svg`:e==="application/gpx+xml"?`${t}gpx-32.svg`:e==="application/x-dwf"?`${t}cad-32.svg`:e==="application/postscript"||e==="application/json"||e==="text/xml"||e==="model/vrml"?`${t}code-32.svg`:e==="application/x-zip-compressed"||e==="application/x-7z-compressed"||e==="application/x-gzip"||e==="application/x-tar"||e==="application/x-gtar"||e==="application/x-bzip2"||e==="application/gzip"||e==="application/x-compress"||e==="application/x-apple-diskimage"||e==="application/x-rar-compressed"||e==="application/zip"?`${t}zip-32.svg`:e.includes("image/")?`${t}image-32.svg`:e.includes("audio/")?`${t}sound-32.svg`:e.includes("video/")?`${t}video-32.svg`:e.includes("msexcel")||e.includes("ms-excel")||e.includes("spreadsheetml")?`${t}excel-32.svg`:e.includes("msword")||e.includes("ms-word")||e.includes("wordprocessingml")?`${t}word-32.svg`:e.includes("powerpoint")||e.includes("presentationml")?`${t}report-32.svg`:`${t}generic-32.svg`:`${t}generic-32.svg`}function Is(e){return(t,i)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:i})}}var bLe=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},noe=function(e,t){for(var i=0,r=e.length;i<r;i++){var n=e[i];Array.isArray(n)?noe(n,t):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=bLe(n)),t.push(n))}},wLe=function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:i[0],domNode:null};var n=[];return noe(i,n),{vnodeSelector:e,properties:t||void 0,children:n,text:void 0,domNode:null}};function Ne(e,t,...i){return typeof e!="function"||g9(e)?wLe(e,t,...i):e(t,...i)}const cq={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},Fi="esri-attachments",oy="esri-button",wt={base:Fi,loaderContainer:`${Fi}__loader-container`,loader:`${Fi}__loader`,fadeIn:`${Fi}--fade-in`,container:`${Fi}__container`,containerList:`${Fi}__container--list`,containerPreview:`${Fi}__container--preview`,actions:`${Fi}__actions`,deleteButton:`${Fi}__delete-button`,addAttachmentButton:`${Fi}__add-attachment-button`,errorMessage:`${Fi}__error-message`,items:`${Fi}__items`,item:`${Fi}__item`,itemButton:`${Fi}__item-button`,itemMask:`${Fi}__item-mask`,itemMaskIcon:`${Fi}__item-mask--icon`,itemImage:`${Fi}__image`,itemImageResizable:`${Fi}__image--resizable`,itemLabel:`${Fi}__label`,itemFilename:`${Fi}__filename`,itemChevronIcon:`${Fi}__item-chevron-icon`,itemLink:`${Fi}__item-link`,itemLinkOverlay:`${Fi}__item-link-overlay`,itemLinkOverlayIcon:`${Fi}__item-link-overlay-icon`,itemEditIcon:`${Fi}__item-edit-icon`,itemAddIcon:`${Fi}__item-add-icon`,itemAddButton:`${Fi}__item-add-button`,formNode:`${Fi}__form-node`,fileFieldset:`${Fi}__file-fieldset`,fileLabel:`${Fi}__file-label`,fileName:`${Fi}__file-name`,fileInput:`${Fi}__file-input`,metadata:`${Fi}__metadata`,metadataFieldset:`${Fi}__metadata-fieldset`,progressBar:`${Fi}__progress-bar`,esriWidget:"esri-widget",esriButton:oy,buttonDisabled:`${oy}--disabled`,esriButtonSecondary:`${oy}--secondary`,esriButtonTertiary:`${oy}--tertiary`,esriButtonThird:`${oy}--third`,esriButtonSmall:`${oy}--small`,esriButtonHalf:`${oy}--half`,empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},MO=window.CSS;let lo=class extends $s{constructor(t,i){super(t,i),this.displayType="auto",this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=null,this.visibleElements={...cq},this._supportsImageOrientation=MO&&MO.supports&&MO.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.viewModel||(this.viewModel=new _9),this.addHandles([ms(()=>this.viewModel?.attachmentInfos,"change",()=>this.scheduleRender()),ms(()=>this.viewModel?.fileInfos,"change",()=>this.scheduleRender()),nt(()=>this.viewModel?.mode,()=>this._modeChanged(),Pi)])}loadDependencies(){return Promise.all([De(()=>import("./calcite-icon-0e32a153.js"),["./calcite-icon-0e32a153.js","./icon-a3053e34.js","./observers-7f8bc640.js","./preload-helper-388ac9d5.js"],import.meta.url)])}get abilities(){return this.viewModel.abilities}set abilities(t){this.viewModel.abilities=t}get effectiveDisplayType(){const{displayType:t}=this;return t&&t!=="auto"?t:this.viewModel.supportsResizeAttachments?"preview":"list"}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}castVisibleElements(t){return{...cq,...t}}addAttachment(){const{_addAttachmentForm:t,viewModel:i}=this;return this._set("submitting",!0),this._set("error",null),i.addAttachment(t).then(r=>(this._set("submitting",!1),this._set("error",null),i.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new Ce("attachments:add-attachment",this.messages.addErrorMessage,r)),r})}deleteAttachment(t){const{viewModel:i}=this;return this._set("submitting",!0),this._set("error",null),i.deleteAttachment(t).then(r=>(this._set("submitting",!1),this._set("error",null),i.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new Ce("attachments:delete-attachment",this.messages.deleteErrorMessage,r)),r})}updateAttachment(){const{viewModel:t}=this,{_updateAttachmentForm:i}=this;return this._set("submitting",!0),this._set("error",null),t.updateAttachment(i).then(r=>(this._set("submitting",!1),this._set("error",null),t.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new Ce("attachments:update-attachment",this.messages.updateErrorMessage,r)),r})}addFile(){const t=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);return this.viewModel.mode="view",t}updateFile(){const{viewModel:t}=this,i=t.updateFile(this.selectedFile,this._updateAttachmentForm,t.activeFileInfo);return t.mode="view",i}deleteFile(t){const i=this.viewModel.deleteFile(t||this.viewModel.activeFileInfo?.file);return this.viewModel.mode="view",i}render(){const{submitting:t,viewModel:i}=this,{state:r}=i;return Ne("div",{class:this.classes(wt.base,wt.esriWidget)},t?this.renderProgressBar():null,r==="loading"?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:t,visibleElements:i}=this;return t&&i.errorMessage?Ne("div",{key:"error-message",class:wt.errorMessage},t.message):null}renderAttachments(){const{activeFileInfo:t,mode:i,activeAttachmentInfo:r}=this.viewModel;return i==="add"?this.renderAddForm():i==="edit"?this.renderDetailsForm(r||t):this.renderAttachmentContainer()}renderLoading(){return Ne("div",{class:wt.loaderContainer,key:"loader"},Ne("div",{class:wt.loader}))}renderProgressBar(){return this.visibleElements.progressBar?Ne("div",{class:wt.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:t,selectedFile:i}=this,r=t||!i,n=this.visibleElements.cancelAddButton?Ne("button",{type:"button",bind:this,disabled:t,onclick:this._cancelForm,class:this.classes(wt.esriButton,wt.esriButtonTertiary,wt.esriButtonSmall,wt.esriButtonHalf,t&&wt.buttonDisabled)},this.messages.cancel):null,s=this.visibleElements.addSubmitButton?Ne("button",{type:"submit",disabled:r,class:this.classes(wt.esriButton,wt.esriButtonSecondary,wt.esriButtonSmall,wt.esriButtonHalf,{[wt.buttonDisabled]:r})},this.messages.add):null,o=i?Ne("span",{key:"file-name",class:wt.fileName},i.name):null,a=Ne("form",{bind:this,afterCreate:NA,afterRemoved:kG,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},Ne("fieldset",{class:wt.fileFieldset},o,Ne("label",{class:this.classes(wt.fileLabel,wt.esriButton,wt.esriButtonSecondary)},i?this.messages.changeFile:this.messages.selectFile,Ne("input",{class:wt.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),s,n);return Ne("div",{key:"add-form-container",class:wt.formNode},a)}renderDetailsForm(t){const{visibleElements:i,viewModel:r,selectedFile:n,submitting:s}=this,{abilities:o}=r,a=s||!n;let l,u,c,d;n?(l=n.type,u=n.name,c=n.size):t&&"file"in t?(l=t.file.type,u=t.file.name,c=t.file.size):t&&"contentType"in t&&(l=t.contentType,u=t.name,c=t.size,d=t.url);const f=o.editing&&o.operations?.delete&&i.deleteButton?Ne("button",{key:"delete-button",type:"button",disabled:s,bind:this,onclick:_=>this._submitDeleteAttachment(_,t),class:this.classes(wt.esriButton,wt.esriButtonSmall,wt.esriButtonTertiary,wt.deleteButton,{[wt.buttonDisabled]:s})},this.messages.delete):void 0,m=o.editing&&o.operations?.update&&i.updateButton?Ne("button",{disabled:a,key:"update-button",type:"submit",class:this.classes(wt.esriButton,wt.esriButtonSmall,wt.esriButtonThird,{[wt.buttonDisabled]:a})},this.messages.update):void 0,g=this.visibleElements.cancelUpdateButton?Ne("button",{disabled:s,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(wt.esriButton,wt.esriButtonSmall,wt.esriButtonTertiary,wt.esriButtonThird,{[wt.buttonDisabled]:s})},this.messages.cancel):void 0,v=o.editing&&o.operations?.update?Ne("fieldset",{key:"file",class:wt.fileFieldset},Ne("span",{key:"file-name",class:wt.fileName},u),Ne("label",{class:this.classes(wt.fileLabel,wt.esriButton,wt.esriButtonSecondary)},this.messages.changeFile,Ne("input",{class:wt.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):void 0,b=Ne("fieldset",{key:"size",class:wt.metadataFieldset},Ne("label",null,Uke(this.messagesUnits,c??0))),x=Ne("fieldset",{key:"content-type",class:wt.metadataFieldset},Ne("label",null,l)),S=ee(d)?Ne("a",{class:wt.itemLink,href:d,rel:"noreferrer",target:"_blank"},this.renderImageMask(t,400),Ne("div",{class:wt.itemLinkOverlay},Ne("span",{class:wt.itemLinkOverlayIcon},Ne("calcite-icon",{icon:"launch"})))):this.renderImageMask(t,400),T=Ne("form",{bind:this,afterCreate:NA,afterRemoved:kG,"data-node-ref":"_updateAttachmentForm",onsubmit:_=>this._submitUpdateAttachment(_,t)},Ne("div",{class:wt.metadata},b,x),v,Ne("div",{class:wt.actions},f,g,m));return Ne("div",{key:"edit-form-container",class:wt.formNode},S,T)}renderImageMask(t,i){return t?"file"in t?this.renderGenericImageMask(t.file.name,t.file.type):this.renderImageMaskForAttachment(t,i):null}renderGenericImageMask(t,i){const{supportsResizeAttachments:r}=this.viewModel,n=vLe(i),s={[wt.itemImageResizable]:r};return Ne("div",{class:this.classes(wt.itemMaskIcon,wt.itemMask)},Ne("img",{title:t,alt:t,src:n,class:this.classes(s,wt.itemImage)}))}renderImageMaskForAttachment(t,i){const{supportsResizeAttachments:r}=this.viewModel;if(!t)return null;const{contentType:n,name:s,url:o}=t;if(!r||!uq(n))return this.renderGenericImageMask(s,n);const a=this._getCSSTransform(t),l=a?{transform:a,"image-orientation":"none"}:{},u=`${o}${o?.includes("?")?"&":"?"}w=${i}`,c={[wt.itemImageResizable]:r};return Ne("div",{class:this.classes(wt.itemMask)},Ne("img",{styles:l,alt:s,title:s,src:u,class:this.classes(c,wt.itemImage)}))}renderFile(t){const{file:i}=t;return Ne("li",{class:wt.item,key:i},Ne("button",{key:"details-button",bind:this,class:wt.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,onclick:()=>this._startEditFile(t),type:"button"},this.renderImageMask(t),Ne("label",{class:wt.itemLabel},Ne("span",{class:wt.itemFilename},i.name||this.messages.noTitle),Ne("span",{"aria-hidden":"true",class:this.classes(wt.itemChevronIcon,mh(this.container)?wt.iconLeft:wt.iconRight)}))))}renderAttachmentInfo({attachmentInfo:t,displayType:i}){const{viewModel:r,effectiveDisplayType:n}=this,{abilities:s,supportsResizeAttachments:o}=r,{contentType:a,name:l,url:u}=t,c=this.renderImageMask(t,i==="list"?48:400),d=s.editing?Ne("span",{"aria-hidden":"true",class:this.classes(wt.itemChevronIcon,mh(this.container)?wt.iconLeft:wt.iconRight)}):null,f=[c,n==="preview"&&o&&uq(a)?null:Ne("label",{class:wt.itemLabel},Ne("span",{class:wt.itemFilename},l||this.messages.noTitle),d)],m=s.editing?Ne("button",{key:"details-button",bind:this,class:wt.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":t.id,onclick:()=>this._startEditAttachment(t),type:"button"},f):Ne("a",{key:"details-link",class:wt.itemButton,href:u??void 0,target:"_blank"},f);return Ne("li",{class:wt.item,key:t},m)}renderAttachmentContainer(){const{effectiveDisplayType:t,viewModel:i,visibleElements:r}=this,{attachmentInfos:n,abilities:s,fileInfos:o}=i,a=!!n?.length,l=!!o?.length,u={[wt.containerList]:t!=="preview",[wt.containerPreview]:t==="preview"},c=s.editing&&s.operations?.add&&r.addButton?Ne("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(wt.esriButton,wt.esriButtonTertiary,wt.addAttachmentButton),type:"button"},Ne("span",{"aria-hidden":"true",class:this.classes(wt.itemAddIcon,wt.iconPlus)}),this.messages.add):void 0,d=a?Ne("ul",{key:"attachments-list",class:wt.items},n.toArray().map(g=>this.renderAttachmentInfo({attachmentInfo:g,displayType:t}))):void 0,f=l?Ne("ul",{key:"file-list",class:wt.items},o.toArray().map(g=>this.renderFile(g))):void 0,m=l||a?void 0:Ne("div",{class:wt.empty},this.messages.noAttachments);return Ne("div",{key:"attachments-container",class:this.classes(wt.container,u)},d,f,m,c)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(t){const i=t.target,r=i&&i.files&&i.files.item(0);this._set("selectedFile",r)}_submitDeleteAttachment(t,i){t.preventDefault(),i&&("file"in i?this.deleteFile(i.file):i&&this.deleteAttachment(i))}_submitAddAttachment(t){t.preventDefault(),this.viewModel.filesEnabled?this.addFile():this.addAttachment()}_submitUpdateAttachment(t,i){t.preventDefault(),i&&"file"in i?this.updateFile():this.updateAttachment()}_startEditAttachment(t){const{viewModel:i}=this;i.activeFileInfo=null,i.activeAttachmentInfo=t,i.mode="edit"}_startEditFile(t){const{viewModel:i}=this;i.activeAttachmentInfo=null,i.activeFileInfo=t,i.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(t){t.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(t){const{orientationInfo:i}=t;return!this._supportsImageOrientation&&i?[i.rotation?`rotate(${i.rotation}deg)`:"",i.mirrored?"scaleX(-1)":""].join(" "):""}};h([p()],lo.prototype,"abilities",null),h([p()],lo.prototype,"displayType",void 0),h([p({readOnly:!0})],lo.prototype,"effectiveDisplayType",null),h([p()],lo.prototype,"graphic",null),h([p()],lo.prototype,"label",null),h([p(),Is("esri/widgets/Attachments/t9n/Attachments")],lo.prototype,"messages",void 0),h([p(),Is("esri/core/t9n/Units")],lo.prototype,"messagesUnits",void 0),h([p({readOnly:!0})],lo.prototype,"selectedFile",void 0),h([p({readOnly:!0})],lo.prototype,"submitting",void 0),h([p({readOnly:!0})],lo.prototype,"error",void 0),h([p({type:_9})],lo.prototype,"viewModel",void 0),h([p()],lo.prototype,"visibleElements",void 0),h([di("visibleElements")],lo.prototype,"castVisibleElements",null),lo=h([ce("esri.widgets.Attachments")],lo);const _Le=lo;let O2=class extends _9{constructor(t){super(t),this.description=null,this.title=null}};h([p()],O2.prototype,"description",void 0),h([p()],O2.prototype,"title",void 0),O2=h([ce("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],O2);const x9=O2,xLe={heading:"esri-widget__heading"};function j4({level:e,class:t,...i},r){const n=SLe(e);return Ne(`h${n}`,{...i,class:ose(xLe.heading,t),role:"heading","aria-level":String(n)},r)}function SLe(e){return Ta(Math.ceil(e),1,6)}const IO="esri-feature-element-info",TO={base:IO,title:`${IO}__title`,description:`${IO}__description`};let fv=class extends $s{constructor(t,i){super(t,i),this.description=null,this.headingLevel=2,this.title=null}render(){return Ne("div",{class:TO.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:t}=this;return t?Ne(j4,{level:this.headingLevel,class:TO.title},t):null}renderDescription(){const{description:t}=this;return t?Ne("div",{key:"description",class:TO.description},t):null}};h([p()],fv.prototype,"description",void 0),h([p()],fv.prototype,"headingLevel",void 0),h([p()],fv.prototype,"title",void 0),fv=h([ce("esri.widgets.Feature.support.FeatureElementInfo")],fv);const U4=fv,ELe={base:"esri-feature-attachments"};let Zc=class extends $s{constructor(t,i){super(t,i),this._featureElementInfo=null,this.attachmentsWidget=new _Le,this.headingLevel=2,this.viewModel=new x9}initialize(){this._featureElementInfo=new U4,this.addHandles([nt(()=>[this.viewModel?.description,this.viewModel?.title,this.headingLevel],()=>this._setupFeatureElementInfo(),Pi),nt(()=>this.viewModel,t=>this.attachmentsWidget.viewModel=t,Pi)])}destroy(){this.attachmentsWidget.destroy(),this._featureElementInfo?.destroy()}get description(){return this.viewModel.description}set description(t){this.viewModel.description=t}get displayType(){return this.attachmentsWidget.displayType}set displayType(t){this.attachmentsWidget.displayType=t}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}render(){const{attachmentsWidget:t}=this;return Ne("div",{class:ELe.base},this._featureElementInfo?.render(),t?.render())}_setupFeatureElementInfo(){const{description:t,title:i,headingLevel:r}=this;this._featureElementInfo?.set({description:t,title:i,headingLevel:r})}};h([p({readOnly:!0})],Zc.prototype,"attachmentsWidget",void 0),h([p()],Zc.prototype,"description",null),h([p()],Zc.prototype,"displayType",null),h([p()],Zc.prototype,"graphic",null),h([p()],Zc.prototype,"headingLevel",void 0),h([p()],Zc.prototype,"title",null),h([p({type:x9})],Zc.prototype,"viewModel",void 0),Zc=h([ce("esri.widgets.Feature.FeatureAttachments")],Zc);const MLe=Zc;let mf=class extends Wo(Lt){constructor(t){super(t),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(nt(()=>this.creator,i=>{this._destroyContent(),this._createContent(i)},Pi))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:t,graphic:i,destroyer:r}=this;t&&i&&(HA(r,{graphic:i}).catch(()=>null),this._set("created",null))}async _createContent(t){const i=this.graphic;if(!i||!t)return;const r=HA(t,{graphic:i}).catch(()=>null);this._loadingPromise=r,this.notifyChange("state");const n=await r;r===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",n))}};h([p({readOnly:!0})],mf.prototype,"created",void 0),h([p()],mf.prototype,"creator",void 0),h([p()],mf.prototype,"destroyer",void 0),h([p({type:As})],mf.prototype,"graphic",void 0),h([p({readOnly:!0})],mf.prototype,"state",null),mf=h([ce("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],mf);const WA=mf;function rl(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${t}'`);return{value:TLe(e[t])}}}function ILe(e){const t=e?.type;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function TLe(e){return function(t,...i){ILe(t)?QOe(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...i)}}function ALe(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const i=t._delegatedEventNames,r=Array.isArray(e)?e:CLe(e);i.push(...r)}}function CLe(e){return e.split(",").map(t=>t.trim())}const soe="calcite-mode-";function $Le(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replace(/\s|'|"/g,"")}function JA(){return $Le().startsWith("dark")}function OLe(){return`${soe}${JA()?"dark":"light"}`}function RLe(e){kLe(e),e.classList.add(OLe())}function kLe(e){Array.from(e.classList).forEach(t=>{t.startsWith(soe)&&e.classList.remove(t)})}function ooe(e){return e&&typeof e.render=="function"}function LLe(e){return e&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}const AO="esri-feature-content",CO={base:AO,loaderContainer:`${AO}__loader-container`,loader:`${AO}__loader`};let mv=class extends $s{constructor(t,i){super(t,i),this.viewModel=null,this._addTargetToAnchors=r=>{Array.from(r.querySelectorAll("a")).forEach(n=>{Yse(n.href)&&!n.hasAttribute("target")&&n.setAttribute("target","_blank")})}}get creator(){return this.viewModel?.creator}set creator(t){this.viewModel&&(this.viewModel.creator=t)}get graphic(){return this.viewModel?.graphic}set graphic(t){this.viewModel&&(this.viewModel.graphic=t)}renderLoading(){return Ne("div",{class:CO.loaderContainer,key:"loader"},Ne("div",{class:CO.loader}))}renderCreated(){const t=this.viewModel?.created;return t?t instanceof HTMLElement?Ne("div",{key:t,bind:t,afterCreate:this._attachToNode}):ooe(t)?Ne("div",{key:t},!t.destroyed&&t.render()):Ne("div",{key:t,innerHTML:t,afterCreate:this._addTargetToAnchors}):null}render(){const t=this.viewModel?.state;return Ne("div",{class:CO.base},t==="loading"?this.renderLoading():this.renderCreated())}_attachToNode(t){const i=this;t.appendChild(i)}};h([p()],mv.prototype,"creator",null),h([p()],mv.prototype,"graphic",null),h([p({type:WA})],mv.prototype,"viewModel",void 0),mv=h([ce("esri.widgets.Feature.FeatureContent")],mv);const fT=mv;let xd=class extends Lt{constructor(t){super(t),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:t,fieldInfos:i}=this,r=[];return i?.forEach(n=>{if(!(!n.hasOwnProperty("visible")||n.visible))return;const s=n.clone();s.label=Kse(s,t),r.push(s)}),r}};h([p()],xd.prototype,"attributes",void 0),h([p({type:[nX]})],xd.prototype,"expressionInfos",void 0),h([p()],xd.prototype,"description",void 0),h([p({type:[i3]})],xd.prototype,"fieldInfos",void 0),h([p({readOnly:!0})],xd.prototype,"formattedFieldInfos",null),h([p()],xd.prototype,"title",void 0),xd=h([ce("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],xd);const V4=xd,PLe=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function NLe(e){let t=null;return PLe.some(i=>(i.pattern.test(e)&&(t=i),!!t)),t}function FLe(e,t){if(typeof t!="string"||!t)return t;const i=NLe(t);if(!i)return t;const r=t.match(i.pattern),n=r&&r[2],s=dc(dc(i.label,{messages:e,hierPart:n}),{appName:i.appName}),o=i.target?` target="${i.target}"`:"",a=i.target==="_blank"?' rel="noreferrer"':"";return t.replace(i.pattern,`<a${o} href="$1"${a}>${s}</a>`)}const cM="esri-feature-fields",__={base:cM,fieldHeader:`${cM}__field-header`,fieldData:`${cM}__field-data`,fieldDataDate:`${cM}__field-data--date`,esriTable:"esri-widget__table"};let Hu=class extends $s{constructor(t,i){super(t,i),this._featureElementInfo=null,this.viewModel=new V4,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new U4,this.addHandles(nt(()=>[this.viewModel?.description,this.viewModel?.title],()=>this._setupFeatureElementInfo(),Pi))}destroy(){this._featureElementInfo?.destroy()}get attributes(){return this.viewModel.attributes}set attributes(t){this.viewModel.attributes=t}get description(){return this.viewModel.description}set description(t){this.viewModel.description=t}get expressionInfos(){return this.viewModel.expressionInfos}set expressionInfos(t){this.viewModel.expressionInfos=t}get fieldInfos(){return this.viewModel.fieldInfos}set fieldInfos(t){this.viewModel.fieldInfos=t}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}renderFieldInfo(t,i){const{attributes:r}=this.viewModel,n=t.fieldName,s=t.label||n,o=r?r[n]==null?"":r[n]:"",a=!(!t.format||!t.format.dateFormat),l=typeof o=="number"&&!a?this._forceLTR(o):FLe(this.messagesURIUtils,o),u={[__.fieldDataDate]:a};return Ne("tr",{key:`fields-element-info-row-${n}-${i}`},Ne("th",{key:`fields-element-info-row-header-${n}-${i}`,class:__.fieldHeader,innerHTML:s}),Ne("td",{key:`fields-element-info-row-data-${n}-${i}`,class:this.classes(__.fieldData,u),innerHTML:l}))}renderFields(){const{formattedFieldInfos:t}=this.viewModel;return t?.length?Ne("table",{class:__.esriTable,summary:this.messages.fieldsSummary},Ne("tbody",null,t.map((i,r)=>this.renderFieldInfo(i,r)))):null}render(){return Ne("div",{class:__.base},this._featureElementInfo?.render(),this.renderFields())}_setupFeatureElementInfo(){const{description:t,title:i}=this;this._featureElementInfo?.set({description:t,title:i})}_forceLTR(t){return`&lrm;${t}`}};h([p()],Hu.prototype,"attributes",null),h([p()],Hu.prototype,"description",null),h([p()],Hu.prototype,"expressionInfos",null),h([p()],Hu.prototype,"fieldInfos",null),h([p()],Hu.prototype,"title",null),h([p({type:V4,nonNullable:!0})],Hu.prototype,"viewModel",void 0),h([p(),Is("esri/widgets/Feature/t9n/Feature")],Hu.prototype,"messages",void 0),h([p(),Is("esri/widgets/support/t9n/uriUtils")],Hu.prototype,"messagesURIUtils",void 0),Hu=h([ce("esri.widgets.Feature.FeatureFields")],Hu);const aoe=Hu,DLe={maximumFractionDigits:20};function jLe(e){return hm(e,DLe)}const ULe="<",VLe=">",BLe=MF("short-date");function zLe(e,t,i,r){let n="";t===0?n=`${ULe} `:t===i&&(n=`${VLe} `);let s=null;return s=r?ep(e,BLe):jLe(e),n+s}const GLe=new Mt([64,64,64]);function qLe(e,t){const i=[],r=e.length-1;return e.length===5?i.push(0,2,4):i.push(0,r),e.map((n,s)=>i.includes(s)?zLe(n,s,r,t):null)}async function HLe(e,t,i){let r=!1,n=[],s=[];if(e.stops){const u=e.stops;n=u.map(c=>c.value),r=u.some(c=>!!c.label),r&&(s=u.map(c=>c.label))}const o=n[0],a=n[n.length-1];if(o==null&&a==null)return null;const l=r?null:qLe(n,i??!1);return(await Promise.all(n.map(async(u,c)=>({value:u,color:e.type==="opacity"?await WLe(u,e,t):(await De(()=>Promise.resolve().then(()=>qF),void 0,import.meta.url)).getColor(e,u),label:r?s[c]:l?.[c]??""})))).reverse()}async function WLe(e,t,i=GLe){const r=new Mt(i),n=(await De(()=>Promise.resolve().then(()=>qF),void 0,import.meta.url)).getOpacity(t,e);return n!=null&&(r.a=n),r}function JLe(e){if(!e.colorStops)return[];const t=[...e.colorStops].filter(r=>r.color?.a>0);let i=t.length-1;if(t&&t[0]){const r=t[i];r&&r.ratio!==1&&(t.push(new lx({ratio:1,color:r.color})),i++)}return t.map((r,n)=>{let s="";return n===0?s=e.legendOptions?.minLabel||"low":n===i&&(s=e.legendOptions?.maxLabel||"high"),{color:r.color,label:s,ratio:r.ratio}}).reverse()}et.getLogger("esri.renderers.support.utils");async function Ba(e,t,i){OY(e,t,()=>[]).push(...i)}async function ZLe(e){const t=new Map;if(!e)return t;if("visualVariables"in e&&e.visualVariables){const i=e.visualVariables.filter(r=>r.type==="color");for(const r of i){const n=(await HLe(r)??[]).map(s=>s.color);await Ba(t,r.field||r.valueExpression,n)}}if(e.type==="heatmap"){const i=JLe(e).map(r=>r.color);await Ba(t,e.field||e.valueExpression,i)}else if(e.type==="pie-chart"){for(const i of e.attributes)await Ba(t,i.field||i.valueExpression,[i.color]);await Ba(t,"default",[e?.othersCategory?.color,v1(e.backgroundFillSymbol,null)])}else if(e.type==="dot-density"){for(const i of e.attributes)await Ba(t,i.field||i.valueExpression,[i.color]);await Ba(t,"default",[e.backgroundColor])}else if(e.type==="unique-value")if(e.authoringInfo?.type==="predominance")for(const i of e.uniqueValueInfos??[])await Ba(t,i.value.toString(),[v1(i.symbol,null)]);else{const i=(e.uniqueValueInfos??[]).map(a=>v1(a.symbol,null)),{field:r,field2:n,field3:s,valueExpression:o}=e;(r||o)&&await Ba(t,r||o,i),n&&await Ba(t,n,i),s&&await Ba(t,s,i)}else if(e.type==="class-breaks"){const i=e.classBreakInfos.map(s=>v1(s.symbol,null)),{field:r,valueExpression:n}=e;await Ba(t,r??n,i)}else e.type==="simple"&&await Ba(t,"default",[v1(e.symbol,null)]);return"defaultSymbol"in e&&e.defaultSymbol&&await Ba(t,"default",[v1(e.defaultSymbol,null)]),t.forEach((i,r)=>{const n=Vpe(i.filter(Boolean),(s,o)=>JSON.stringify(s)===JSON.stringify(o));t.set(r,n)}),t}const YLe="esri.widgets.Feature.support.relatedFeatureUtils",hq=et.getLogger(YLe),dq=new Map;function mT(e){if(!Bd(e))return null;const[t,i]=e.split("/").slice(1);return{layerId:t,fieldName:i}}function KLe(e,t){if(!t.relationships)return null;let i=null;const{relationships:r}=t;return r.some(n=>n.id===parseInt(e,10)&&(i=n,!0)),i}function QLe({originRelationship:e,relationships:t,layerId:i}){let r=null;return t&&t.some(n=>(`${n.relatedTableId}`===i&&n.id===e?.id&&(r=n),!!r)),r}function XLe(e,t){const i=t.toLowerCase();for(const r in e)if(r.toLowerCase()===i)return e[r];return null}function ePe(e,t){const i=KLe(e,t);if(i)return{url:`${t.url}/${i.relatedTableId}`,sourceSpatialReference:t.spatialReference,relation:i,relatedFields:[],outStatistics:[]}}function tPe(e,t){if(!t||!e)return;const{features:i,statsFeatures:r}=e,n=i&&i.value;t.relatedFeatures=n?n.features:[];const s=r&&r.value;t.relatedStatsFeatures=s?s.features:[]}function iPe(e,t,i,r){const n=new Rb;return n.outFields=["*"],n.relationshipId=typeof t.id=="number"?t.id:parseInt(t.id,10),n.objectIds=[e.attributes[i.objectIdField]],i.queryRelatedFeatures?.(n,r)??Promise.resolve({})}function rPe(e,t,i){let r=0;const n=[];for(;r<t.length;)n.push(`${e} IN (${t.slice(r,i+r)})`),r+=i;return n.join(" OR ")}async function nPe(e,t,i,r){const n=i.layerId.toString(),{layerInfo:s,relation:o,relatedFields:a,outStatistics:l,url:u,sourceSpatialReference:c}=t;if(!s||!o)return null;const d=QLe({originRelationship:o,relationships:s.relationships,layerId:n});if(d?.relationshipTableId&&d.keyFieldInRelationshipTable){const m=(await iPe(e,d,i,r))[e.attributes[i.objectIdField]];if(!m)return null;const g=m.features.map(v=>v.attributes[s.objectIdField]);if(l?.length&&s.supportsStatistics){const v=new On;v.where=rPe(s.objectIdField,g,1e3),v.outFields=a,v.outStatistics=l,v.sourceSpatialReference=c;const b={features:Promise.resolve(m),statsFeatures:sT(u,v)};return Ia(b)}}const f=d?.keyField;if(f){const m=xF(uPe(s.fields,f)),g=XLe(e.attributes,o.keyField),v=m?`${f}=${g}`:`${f}='${g}'`,b=sT(u,new On({where:v,outFields:t.relatedFields,sourceSpatialReference:c}),r),x=t.outStatistics&&t.outStatistics.length>0&&s.supportsStatistics?sT(u,new On({where:v,outFields:t.relatedFields,outStatistics:t.outStatistics,sourceSpatialReference:c}),r):null,S={features:b};return x&&(S.statsFeatures=x),Ia(S)}return null}function sPe(e,t){return St(e,{query:{f:"json"},signal:t&&t.signal})}function oPe({relatedInfos:e,layer:t},i){const r={};return e.forEach((n,s)=>{const{relation:o}=n;if(!o){const d=new Ce("relation-required","A relation is required on a layer to retrieve related records.");throw hq.error(d),d}const{relatedTableId:a}=o;if(typeof a!="number"){const d=new Ce("A related table ID is required on a layer to retrieve related records.");throw hq.error(d),d}const l=`${t.url}/${a}`,u=dq.get(l),c=u||sPe(l);u||dq.set(l,c),r[s]=c}),ih(Ia(r),i)}function aPe({graphic:e,relatedInfos:t,layer:i},r){const n={};return t.forEach((s,o)=>{s.layerInfo&&(n[o]=nPe(e,s,i,r))}),Ia(n)}function lPe({relatedInfo:e,fieldName:t,fieldInfo:i}){if(e.relatedFields?.push(t),i.statisticType){const r=new ate({statisticType:i.statisticType,onStatisticField:t,outStatisticFieldName:t});e.outStatistics?.push(r)}}function uPe(e,t){if(e!=null){t=t.toLowerCase();for(const i of e)if(i&&i.name.toLowerCase()===t)return i}return null}const pq={chartAnimation:!0};let Fn=class extends Lt{constructor(t){super(t),this.abilities={...pq},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.isAggregate=!1,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(t){return{...pq,...t}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(t){this._setContentElementMedia(t)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(t){const{formattedMediaInfoCount:i}=this,r=(t+i)%i;this.activeMediaInfoIndex=r}_pageContentElementMedia(t){const{activeMediaInfoIndex:i}=this,r=i+t;this._setContentElementMedia(r)}_formatMediaInfos(){const{mediaInfos:t,layer:i}=this,r=this.attributes??{},n=this.formattedAttributes??{},s=this.expressionAttributes??{},o=this.fieldInfoMap??new Map;return t?.map(a=>{const l=a?.clone();if(!l)return null;if(l.title=Fg({attributes:r,fieldInfoMap:o,globalAttributes:n,expressionAttributes:s,layer:i,text:l.title}),l.caption=Fg({attributes:r,fieldInfoMap:o,globalAttributes:n,expressionAttributes:s,layer:i,text:l.caption}),l.altText=Fg({attributes:r,fieldInfoMap:o,globalAttributes:n,expressionAttributes:s,layer:i,text:l.altText}),l.type==="image"){const{value:u}=l;return this._setImageValue({value:u,formattedAttributes:n,layer:i}),l.value.sourceURL?l:void 0}if(l.type==="pie-chart"||l.type==="line-chart"||l.type==="column-chart"||l.type==="bar-chart"){const{value:u}=l;return this._setChartValue({value:u,chartType:l.type,attributes:r,formattedAttributes:n,layer:i,expressionAttributes:s}),l}return null}).filter(ee)??[]}_setImageValue(t){const i=this.fieldInfoMap??new Map,{value:r,formattedAttributes:n,layer:s}=t,{linkURL:o,sourceURL:a}=r;if(a){const l=p6(a,s);r.sourceURL=d6({formattedAttributes:n,template:l,fieldInfoMap:i})}if(o){const l=p6(o,s);r.linkURL=d6({formattedAttributes:n,template:l,fieldInfoMap:i})}}_setChartValue(t){const{value:i,attributes:r,formattedAttributes:n,chartType:s,layer:o,expressionAttributes:a}=t,{popupTemplate:l,relatedInfos:u}=this,{fields:c,normalizeField:d}=i,f=o;if(i.fields=Qke(c,f),d&&(i.normalizeField=yS(d,f)),!c.some(g=>!!(n[g]!=null||Bd(g)&&u?.size)))return;const m=l?.fieldInfos??[];c.forEach(g=>{if(Bd(g))return void(i.series=[...i.series,...this._getRelatedChartInfos({fieldInfos:m,fieldName:g,formattedAttributes:n,chartType:s,value:i})]);const v=this._getChartOption({value:i,attributes:r,chartType:s,formattedAttributes:n,expressionAttributes:a,fieldName:g,fieldInfos:m});i.series.push(v)})}_getRelatedChartInfos(t){const{fieldInfos:i,fieldName:r,formattedAttributes:n,chartType:s,value:o}=t,a=[],l=mT(r),u=l&&this.relatedInfos?.get(l.layerId.toString());if(!u)return a;const{relatedFeatures:c,relation:d}=u;if(!d||!c)return a;const{cardinality:f}=d;return c.forEach(m=>{const{attributes:g}=m;g&&Object.keys(g).forEach(v=>{v===l.fieldName&&a.push(this._getChartOption({value:o,attributes:g,formattedAttributes:n,fieldName:r,chartType:s,relatedFieldName:v,hasMultipleRelatedFeatures:c?.length>1,fieldInfos:i}))})}),f==="one-to-many"||f==="many-to-many"?a:[a[0]]}_getTooltip({label:t,value:i,chartType:r}){return r==="pie-chart"?`${t}`:`${t}: ${i}`}_getChartOption(t){const{value:i,attributes:r,formattedAttributes:n,expressionAttributes:s,fieldName:o,relatedFieldName:a,fieldInfos:l,chartType:u,hasMultipleRelatedFeatures:c}=t,d=this.layer,f=this.fieldInfoMap??new Map,{normalizeField:m,tooltipField:g}=i,v=m?Bd(m)?r[mT(m).fieldName]:r[m]:null,b=v9(o)&&s&&s[o]!==void 0?s[o]:a&&r[a]!==void 0?r[a]:r[o]!==void 0?r[o]:n[o],x=new KQ({fieldName:o,value:b===void 0?null:b&&v?b/v:b});if(Bd(o)){const I=f.get(o.toLowerCase()),$=g&&f.get(g.toLowerCase()),L=I?.fieldName??o,B=c&&g?mT(g).fieldName:$?.fieldName??g,z=c&&B?r[B]:n[B]??I?.label??I?.fieldName??a,W=c&&a?r[a]:n[L];return x.tooltip=this._getTooltip({label:z,value:W,chartType:u}),x}const S=Xse(l,o),T=yS(o,d),_=g&&n[g]!==void 0?n[g]:Kse(S||new i3({fieldName:T}),this.popupTemplate?.expressionInfos),M=n[T];return x.tooltip=this._getTooltip({label:_,value:M,chartType:u}),x}};h([p()],Fn.prototype,"abilities",void 0),h([di("abilities")],Fn.prototype,"castAbilities",null),h([p()],Fn.prototype,"activeMediaInfoIndex",void 0),h([p({readOnly:!0})],Fn.prototype,"activeMediaInfo",null),h([p()],Fn.prototype,"attributes",void 0),h([p()],Fn.prototype,"description",void 0),h([p()],Fn.prototype,"fieldInfoMap",void 0),h([p()],Fn.prototype,"formattedAttributes",void 0),h([p()],Fn.prototype,"expressionAttributes",void 0),h([p({readOnly:!0})],Fn.prototype,"formattedMediaInfos",null),h([p()],Fn.prototype,"isAggregate",void 0),h([p()],Fn.prototype,"layer",void 0),h([p({readOnly:!0})],Fn.prototype,"formattedMediaInfoCount",null),h([p()],Fn.prototype,"mediaInfos",void 0),h([p()],Fn.prototype,"popupTemplate",void 0),h([p()],Fn.prototype,"relatedInfos",void 0),h([p()],Fn.prototype,"title",void 0),Fn=h([ce("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],Fn);const Dg=Fn;var fq=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],cPe=[].concat(fq.slice(30,39),fq.slice(28,30).reverse()),hPe=[{name:"default",colors:cPe},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}];const mq="en-us",S9=new Map([["ar",()=>De(()=>import("./ar-bb1fe5ab.js"),["./ar-bb1fe5ab.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.a)],["bg-bg",()=>De(()=>import("./bg_BG-184a2bfa.js"),["./bg_BG-184a2bfa.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.b)],["bs-ba",()=>De(()=>import("./bs_BA-f32cc344.js"),["./bs_BA-f32cc344.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.b)],["ca-es",()=>De(()=>import("./ca_ES-d17ee95b.js"),["./ca_ES-d17ee95b.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.c)],["cs-cz",()=>De(()=>import("./cs_CZ-bcd1e782.js"),["./cs_CZ-bcd1e782.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.c)],["da-dk",()=>De(()=>import("./da_DK-27b1b06e.js"),["./da_DK-27b1b06e.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.d)],["de-de",()=>De(()=>import("./de_DE-c0a1d8dd.js"),["./de_DE-c0a1d8dd.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.d)],["de-ch",()=>De(()=>import("./de_CH-be7b4255.js"),["./de_CH-be7b4255.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.d)],["el-gr",()=>De(()=>import("./el_GR-05fb9ec0.js"),["./el_GR-05fb9ec0.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.e)],["en-us",()=>De(()=>import("./en_US-170979d8.js"),["./en_US-170979d8.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.e)],["en-ca",()=>De(()=>import("./en_CA-170979d8.js"),["./en_CA-170979d8.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.e)],["es-es",()=>De(()=>import("./es_ES-d0b66640.js"),["./es_ES-d0b66640.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.e)],["et-ee",()=>De(()=>import("./et_EE-56dd74d3.js"),["./et_EE-56dd74d3.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.e)],["fi-fi",()=>De(()=>import("./fi_FI-91d58cb9.js"),["./fi_FI-91d58cb9.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.f)],["fr-fr",()=>De(()=>import("./fr_FR-a11503e0.js"),["./fr_FR-a11503e0.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.f)],["he-il",()=>De(()=>import("./he_IL-90db98c4.js"),["./he_IL-90db98c4.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.h)],["hr-hr",()=>De(()=>import("./hr_HR-fac8bb29.js"),["./hr_HR-fac8bb29.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.h)],["hu-hu",()=>De(()=>import("./hu_HU-e8803856.js"),["./hu_HU-e8803856.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.h)],["id-id",()=>De(()=>import("./id_ID-86e57d06.js"),["./id_ID-86e57d06.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.i)],["it-it",()=>De(()=>import("./it_IT-2d4485ba.js"),["./it_IT-2d4485ba.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.i)],["ja-jp",()=>De(()=>import("./ja_JP-77c6c16d.js"),["./ja_JP-77c6c16d.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.j)],["ko-kr",()=>De(()=>import("./ko_KR-e155b9ab.js"),["./ko_KR-e155b9ab.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.k)],["lt-lt",()=>De(()=>import("./lt_LT-fde47ae9.js"),["./lt_LT-fde47ae9.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.l)],["lv-lv",()=>De(()=>import("./lv_LV-359be050.js"),["./lv_LV-359be050.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.l)],["nb-no",()=>De(()=>import("./nb_NO-30d57c1a.js"),["./nb_NO-30d57c1a.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.n)],["nl-nl",()=>De(()=>import("./nl_NL-cb904b48.js"),["./nl_NL-cb904b48.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.n)],["pl-pl",()=>De(()=>import("./pl_PL-58c54c9f.js"),["./pl_PL-58c54c9f.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.p)],["pt-br",()=>De(()=>import("./pt_BR-d2e10248.js"),["./pt_BR-d2e10248.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.p)],["pt-pt",()=>De(()=>import("./pt_PT-65a41842.js"),["./pt_PT-65a41842.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.p)],["ro-ro",()=>De(()=>import("./ro_RO-15e90e9f.js"),["./ro_RO-15e90e9f.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.r)],["ru-ru",()=>De(()=>import("./ru_RU-a74d21e5.js"),["./ru_RU-a74d21e5.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.r)],["sk-sk",()=>De(()=>import("./sk_SK-a928dbd1.js"),["./sk_SK-a928dbd1.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.s)],["sl-sl",()=>De(()=>import("./sl_SL-1a3c3078.js"),["./sl_SL-1a3c3078.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.s)],["sr-rs",()=>De(()=>import("./sr_RS-0b18b911.js"),["./sr_RS-0b18b911.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.s)],["sv-se",()=>De(()=>import("./sv_SE-ce7e3f84.js"),["./sv_SE-ce7e3f84.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.s)],["th-th",()=>De(()=>import("./th_TH-1448f333.js"),["./th_TH-1448f333.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.t)],["tr-tr",()=>De(()=>import("./tr_TR-dd92f630.js"),["./tr_TR-dd92f630.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.t)],["uk-ua",()=>De(()=>import("./uk_UA-fe4434ed.js"),["./uk_UA-fe4434ed.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.u)],["vi-vn",()=>De(()=>import("./vi_VN-41938633.js"),["./vi_VN-41938633.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.v)],["zh-cn",()=>De(()=>import("./zh_Hans-524a1291.js"),["./zh_Hans-524a1291.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.z)],["zh-hk",()=>De(()=>import("./zh_Hant-0e1f08e5.js"),["./zh_Hant-0e1f08e5.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.z)],["zh-tw",()=>De(()=>import("./zh_Hant-0e1f08e5.js"),["./zh_Hant-0e1f08e5.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(e=>e.z)]]);function dPe(e){const t=e.split("-")[0].toLowerCase();let i=null;for(const r of S9.keys())if(r.startsWith(t)){i=r;break}return i}function pPe(e){return e?S9.has(e.toLowerCase())?e.toLowerCase():dPe(e)||mq:mq}let x1=null,x_=null;async function fPe(e=au()){if(e=pPe(e),x1&&e===x_)return x1;x1=De(()=>import("./index-a1a574a3.js"),["./index-a1a574a3.js","./_commonjsHelpers-2f3e7994.js"],import.meta.url).then(t=>t.i),x_=e;try{const[t,i]=await Promise.all([x1,S9.get(x_)()]);x_===e&&(t.am4core.options.defaultLocale=i.default),t.am4core.options.suppressWarnings=!0,t.am4core.options.autoDispose=!0}catch{return x1=null,x_=null,null}return x1}function mPe(e,t="default"){const i=hPe.find(r=>r.name===t);return i?i.colors.map(r=>e.color(r)):null}const To="esri-feature-media",Yr={base:To,mediaContainer:`${To}__container`,mediaItemContainer:`${To}__item-container`,mediaItem:`${To}__item`,mediaItemTitle:`${To}__item-title`,mediaItemCaption:`${To}__item-caption`,mediaPrevious:`${To}__previous`,mediaPreviousIconLTR:`${To}__previous-icon`,mediaPreviousIconRTL:`${To}__previous-icon--rtl`,mediaNext:`${To}__next`,mediaNextIconLTR:`${To}__next-icon`,mediaNextIconRTL:`${To}__next-icon--rtl`,mediaChart:`${To}__chart`,mediaButton:`${To}__button`,mediaIcon:`${To}__icon`,iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow"},$O=.05,OO=.95,RO=15,Wh="color",Dp="tooltip",S_="value",yq="default-line-value";let sa=class extends $s{constructor(t,i){super(t,i),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.viewModel=new Dg,this.messages=null,this._getChartDependencies=async r=>{const n=await fPe(),{destroyed:s,viewModel:o}=this;if(s||!o||!r)return;const{activeMediaInfo:a}=o,l=await this._getRendererColors(n);this._renderChart({chartDiv:r,mediaInfo:a,chartsModule:n,colorMap:l})}}initialize(){this._featureElementInfo=new U4,this.addHandles([nt(()=>[this.viewModel?.activeMediaInfo,this.viewModel?.activeMediaInfoIndex],()=>this._setupMediaRefreshTimer(),Pi),nt(()=>[this.viewModel?.description,this.viewModel?.title],()=>this._setupFeatureElementInfo(),Pi)])}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo?.destroy()}get attributes(){return this.viewModel.attributes}set attributes(t){this.viewModel.attributes=t}get activeMediaInfoIndex(){return this.viewModel.activeMediaInfoIndex}set activeMediaInfoIndex(t){this.viewModel.activeMediaInfoIndex=t}get description(){return this.viewModel.description}set description(t){this.viewModel.description=t}get fieldInfoMap(){return this.viewModel.fieldInfoMap}set fieldInfoMap(t){this.viewModel.fieldInfoMap=t}get layer(){return this.viewModel.layer}set layer(t){this.viewModel.layer=t}get mediaInfos(){return this.viewModel.mediaInfos}set mediaInfos(t){this.viewModel.mediaInfos=t}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(t){this.viewModel.popupTemplate=t}get relatedInfos(){return this.viewModel.relatedInfos}set relatedInfos(t){this.viewModel.relatedInfos=t}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}render(){return Ne("div",{bind:this,class:Yr.base,onkeyup:this._handleMediaKeyup},this._featureElementInfo?.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:t}=this.viewModel;return t?Ne("div",{key:"media-element-container",class:Yr.mediaContainer},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(t){const{_refreshIntervalInfo:i}=this,{activeMediaInfoIndex:r,formattedMediaInfoCount:n}=this.viewModel,{value:s,refreshInterval:o,altText:a,title:l,type:u}=t,{sourceURL:c,linkURL:d}=s,f=Yse(d??void 0)?"_blank":"_self",m=f==="_blank"?"noreferrer":"",g=o?i:null,v=g?g.timestamp:0,b=g?g.sourceURL:c,x=Ne("img",{alt:a||l,key:`media-${u}-${r}-${n}-${v}`,src:b??void 0});return(d?Ne("a",{title:l,href:d,rel:m,target:f},x):null)||x}renderChartMediaInfo(t){const{activeMediaInfoIndex:i,formattedMediaInfoCount:r}=this.viewModel;return Ne("div",{key:`media-${t.type}-${i}-${r}`,bind:this,class:Yr.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:t}=this.viewModel;return t?t.type==="image"?this.renderImageMediaInfo(t):t.type.includes("chart")?this.renderChartMediaInfo(t):null:null}renderMediaInfo(){const{activeMediaInfo:t}=this.viewModel;if(!t)return null;const i=t.title?Ne("div",{key:"media-title",class:Yr.mediaItemTitle,innerHTML:t.title}):null,r=t.caption?Ne("div",{key:"media-caption",class:Yr.mediaItemCaption,innerHTML:t.caption}):null;return Ne("div",{key:"media-container",class:Yr.mediaItemContainer},Ne("div",{key:"media-item-container",class:Yr.mediaItem},this.renderMediaInfoType()),i,r)}renderMediaPageButton(t){if(this.viewModel.formattedMediaInfoCount<2)return null;const i=t==="previous",r=i?this.messages.previous:this.messages.next,n=i?this.classes(Yr.mediaButton,Yr.mediaPrevious):this.classes(Yr.mediaButton,Yr.mediaNext),s=i?this.classes(Yr.mediaIcon,Yr.mediaPreviousIconLTR,Yr.iconLeftTriangleArrow):this.classes(Yr.mediaIcon,Yr.mediaNextIconLTR,Yr.iconRightTriangleArrow),o=i?this.classes(Yr.mediaIcon,Yr.mediaPreviousIconRTL,Yr.iconRightTriangleArrow):this.classes(Yr.mediaIcon,Yr.mediaNextIconRTL,Yr.iconLeftTriangleArrow),a=i?"media-previous":"media-next",l=i?this._previous:this._next;return Ne("button",{type:"button",key:a,title:r,"aria-label":r,tabIndex:0,class:n,bind:this,onclick:l},Ne("span",{"aria-hidden":"true",class:s}),Ne("span",{"aria-hidden":"true",class:o}))}_setupFeatureElementInfo(){const{description:t,title:i}=this;this._featureElementInfo?.set({description:t,title:i})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_getRenderer(){const{isAggregate:t,layer:i}=this.viewModel;return t&&i?.featureReduction&&"renderer"in i.featureReduction?i.featureReduction.renderer:i?.renderer}async _getRendererColors(t){const{am4core:i}=t,r=new Map,n=this._getRenderer(),s="default";if(!n)return r;const o=await ZLe(n);return o.delete(s),Array.from(o.values()).every(a=>a?.length===1)&&(r.set(yq,i.color({r:50,g:50,b:50,a:1})),Array.from(o.keys()).forEach(a=>{a&&r.set(a,i.color(o.get(a)?.[0].toCss(!0)))})),r}_handleMediaKeyup(t){const i=hg(t);i==="ArrowLeft"&&(t.stopPropagation(),this.viewModel.previous()),i==="ArrowRight"&&(t.stopPropagation(),this.viewModel.next())}_renderChart(t){const{abilities:i}=this.viewModel,{chartsModule:r,chartDiv:n,mediaInfo:s,colorMap:o}=t,{value:a,type:l}=s,{am4core:u}=r,c=mPe(u);function d(g){g instanceof u.ColorSet&&c&&(g.list=c)}JA()&&u.useTheme(r.am4themes_dark);const f=window.matchMedia("(prefers-reduced-motion: reduce)");i.chartAnimation&&!f.matches?u.useTheme(r.am4themes_animated):u.unuseTheme(r.am4themes_animated),u.useTheme(d);const m=l==="pie-chart"?this._createPieChart(t):this._createXYChart(t);n.setAttribute("aria-label",s.altText||s.title),m.data=a.series.map(g=>({[Dp]:g.tooltip,[S_]:g.value,[Wh]:o.get(g.fieldName)})).filter(g=>l!=="pie-chart"||g.value!=null&&g.value>0)}_customizeChartTooltip(t,i){t&&(t.label.wrap=!0,t.label.maxWidth=200,t.autoTextColor=!1,t.getFillFromObject=!1,t.label.fill=i.color("#ffffff"),t.background.fill=i.color({r:0,g:0,b:0,a:.7}))}_createPieChart(t){const{chartDiv:i,chartsModule:r}=t,{am4core:n,am4charts:s}=r,o=n.create(i,s.PieChart);o.rtl=mh(this.container);const a=o.series.push(new s.PieSeries);return a.labels.template.disabled=!0,a.ticks.template.disabled=!0,a.dataFields.value=S_,a.dataFields.category=Dp,this._customizeChartTooltip(a.tooltip,n),a.slices.template.propertyFields.fill=Wh,a.slices.template.propertyFields.stroke=Wh,o}_getMinSeriesValue(t){let i=0;return t.forEach(r=>i=Math.min(r.value,i)),i}_createColumnChart(t,i){const{chartsModule:r,mediaInfo:n}=i,{value:s}=n,{am4core:o,am4charts:a}=r,l=t.xAxes.push(new a.CategoryAxis);l.dataFields.category=Dp,l.renderer.labels.template.disabled=!0;const u=l.tooltip;this._customizeChartTooltip(u,o),u.events.on("sizechanged",()=>{u.dy=-u.contentHeight});const c=t.yAxes.push(new a.ValueAxis),d=c.renderer.labels.template;c.renderer.minLabelPosition=$O,c.renderer.maxLabelPosition=OO,c.min=this._getMinSeriesValue(s.series),this._customizeChartTooltip(c.tooltip,o),d.wrap=!0;const f=t.series.push(new a.ColumnSeries);f.dataFields.valueY=S_,f.dataFields.categoryX=Dp,f.columns.template.propertyFields.fill=Wh,f.columns.template.propertyFields.stroke=Wh,t.cursor=new a.XYCursor,s.series.length>RO&&(t.scrollbarX=new o.Scrollbar)}_createBarChart(t,i){const{chartsModule:r,mediaInfo:n}=i,{value:s}=n,{am4core:o,am4charts:a}=r,l=t.yAxes.push(new a.CategoryAxis);l.dataFields.category=Dp,l.renderer.inversed=!0,l.renderer.labels.template.disabled=!0;const u=l.tooltip;this._customizeChartTooltip(u,o),u.events.on("sizechanged",()=>{u.dx=u.contentWidth});const c=t.xAxes.push(new a.ValueAxis),d=c.renderer.labels.template;c.renderer.minLabelPosition=$O,c.renderer.maxLabelPosition=OO,c.min=this._getMinSeriesValue(s.series),this._customizeChartTooltip(c.tooltip,o),d.wrap=!0;const f=t.series.push(new a.ColumnSeries);f.dataFields.valueX=S_,f.dataFields.categoryY=Dp,f.columns.template.propertyFields.fill=Wh,f.columns.template.propertyFields.stroke=Wh,t.cursor=new a.XYCursor,s.series.length>RO&&(t.scrollbarY=new o.Scrollbar)}_createLineChart(t,i){const{chartsModule:r,mediaInfo:n,colorMap:s}=i,{value:o}=n,{am4core:a,am4charts:l}=r,u=t.xAxes.push(new l.CategoryAxis);u.dataFields.category=Dp,u.renderer.labels.template.disabled=!0;const c=u.tooltip;this._customizeChartTooltip(c,a),c.events.on("sizechanged",()=>{c.dy=-c.contentHeight});const d=t.yAxes.push(new l.ValueAxis),f=d.renderer.labels.template;d.renderer.minLabelPosition=$O,d.renderer.maxLabelPosition=OO,d.min=this._getMinSeriesValue(o.series),this._customizeChartTooltip(d.tooltip,a),f.wrap=!0;const m=t.series.push(new l.LineSeries);m.dataFields.categoryX=Dp,m.dataFields.valueY=S_,m.strokeWidth=1;const g=s.get(yq);g&&(m.stroke=g);const v=m.bullets.push(new l.CircleBullet);v.propertyFields.fill=Wh,v.propertyFields.stroke=Wh,t.cursor=new l.XYCursor,o.series.length>RO&&(t.scrollbarX=new a.Scrollbar)}_createXYChart(t){const{chartDiv:i,chartsModule:r,mediaInfo:n}=t,{type:s}=n,{am4core:o,am4charts:a}=r,l=o.create(i,a.XYChart);return l.rtl=mh(this.container),s==="column-chart"&&this._createColumnChart(l,t),s==="bar-chart"&&this._createBarChart(l,t),s==="line-chart"&&this._createLineChart(l,t),l}_clearMediaRefreshTimer(){const{_refreshTimer:t}=this;t&&(clearTimeout(t),this._refreshTimer=null)}_updateMediaInfoTimestamp(t){const i=Date.now();this._refreshIntervalInfo={timestamp:i,sourceURL:t&&this._getImageSource(t,i)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:t}=this.viewModel;t&&t.type==="image"&&t.refreshInterval&&this._setRefreshTimeout(t)}_setRefreshTimeout(t){const{refreshInterval:i,value:r}=t;if(!i)return;const n=6e4*i;this._updateMediaInfoTimestamp(r.sourceURL);const s=setInterval(()=>{this._updateMediaInfoTimestamp(r.sourceURL)},n);this._refreshTimer=s}_getImageSource(t,i){const r=t.includes("?")?"&":"?",[n,s=""]=t.split("#");return`${n}${r}timestamp=${i}${s?"#":""}${s}`}};h([p()],sa.prototype,"attributes",null),h([p()],sa.prototype,"activeMediaInfoIndex",null),h([p()],sa.prototype,"description",null),h([p()],sa.prototype,"fieldInfoMap",null),h([p()],sa.prototype,"layer",null),h([p()],sa.prototype,"mediaInfos",null),h([p()],sa.prototype,"popupTemplate",null),h([p()],sa.prototype,"relatedInfos",null),h([p()],sa.prototype,"title",null),h([p({type:Dg})],sa.prototype,"viewModel",void 0),h([p(),Is("esri/widgets/Feature/t9n/Feature")],sa.prototype,"messages",void 0),sa=h([ce("esri.widgets.Feature.FeatureMedia")],sa);const loe=sa,yPe=["$datastore","$map","$layer","$aggregatedfeatures"],gPe="esri.widgets.Feature.support.arcadeFeatureUtils",vPe=et.getLogger(gPe);function bPe(e){return typeof e=="string"?A3(w9(e)):Array.isArray(e)?wPe(e):e?.declaredClass==="esri.arcade.Dictionary"?_Pe(e):e}function wPe(e){return`<ul class="esri-widget__list">${e.map(t=>`<li>${typeof t=="string"?A3(w9(t)):t}</li>`).join("")}</ul>`}function _Pe(e){return`<table class="esri-widget__table">${e.keys().map(t=>{const i=e.field(t);return`<tr><th>${t}</th><td>${typeof i=="string"?A3(w9(i)):i}</td></tr>`}).join("")}</table>`}function xPe({aggregatedFeatures:e,arcadeUtils:t,featureSetVars:i,context:r,viewInfo:n,map:s,graphic:o,interceptor:a}){i.forEach(l=>{const u=l.toLowerCase(),c=n.sr,d={map:s,spatialReference:c,interceptor:a};if(u==="$map"&&(r.vars[u]=t.convertMapToFeatureSetCollection(d)),u==="$layer"&&(r.vars[u]=t.convertFeatureLayerToFeatureSet({layer:o.sourceLayer,spatialReference:c,interceptor:a})),u==="$datastore"&&(r.vars[u]=t.convertServiceUrlToWorkspace({url:o.sourceLayer.url,spatialReference:c,interceptor:a})),u==="$aggregatedfeatures"){const f=o.layer,{fields:m,objectIdField:g,geometryType:v,spatialReference:b,displayField:x}=f,S=new A4({fields:m,objectIdField:g,geometryType:v,spatialReference:b,displayField:x,...f.type==="feature"?{templates:f.templates,typeIdField:f.typeIdField,types:f.types}:null,source:e});r.vars[u]=t.convertFeatureLayerToFeatureSet({layer:S,spatialReference:b,interceptor:a})}})}function uoe(){return De(()=>import("./arcadeUtils-c52e7f72.js").then(e=>e.ax),["./arcadeUtils-c52e7f72.js","./preload-helper-388ac9d5.js","./arcadeTimeUtils-b303a482.js","./executionError-c1d13a98.js","./number-1809ae92.js"],import.meta.url)}function SPe(e){return"createQuery"in e&&"queryFeatures"in e}async function EPe({graphic:e,view:t}){const{isAggregate:i,layer:r}=e;if(!i||!r||t?.type!=="2d")return[];const n=await t.whenLayerView(r);if(!SPe(n))return[];const s=n.createQuery(),o=e.getObjectId();s.aggregateIds=o!=null?[o]:[];const{features:a}=await n.queryFeatures(s);return a}async function coe({expressionInfo:e,arcadeUtils:t,interceptor:i,spatialReference:r,map:n,graphic:s,view:o}){if(!e||!e.expression)return null;const a=t.createSyntaxTree(e.expression),l=yPe.filter(m=>t.hasVariable(a,m)),[u]=await Promise.all([EPe({graphic:s,view:o}),t.loadScriptDependencies(a,!0,l)]),c=t.getViewInfo({spatialReference:r}),d=t.createExecContext(s,c);d.interceptor=i,d.useAsync=!0,xPe({aggregatedFeatures:u,arcadeUtils:t,featureSetVars:l,context:d,viewInfo:c,map:n,graphic:s,interceptor:i});const f=t.createFunction(a,d);return t.executeAsyncFunction(f,d).catch(m=>vPe.error("arcade-execution-error",{error:m,graphic:s,expressionInfo:e}))}async function MPe({expressionInfos:e,spatialReference:t,graphic:i,interceptor:r,map:n,view:s}){if(!e||!e.length)return{};const o=await uoe(),a={};for(const c of e)a[`expression/${c.name}`]=coe({expressionInfo:c,arcadeUtils:o,interceptor:r,spatialReference:t,map:n,graphic:i,view:s});const l=await Ia(a),u={};for(const c in l)u[c]=bPe(l[c].value);return u}const IPe=1;let Ya=class extends Wo(Lt){constructor(t){super(t),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:i}=this;i&&i.abort(),this._abortController=null},this._createVM=()=>{const i=this.contentElement?.type;this.contentElementViewModel?.destroy();const r=i==="fields"?new V4:i==="media"?new Dg:i==="text"?new WA:null;this._set("contentElementViewModel",r)},this._compile=async()=>{this._cancelQuery();const i=new AbortController;this._abortController=i,await this._compileExpression(),this._abortController===i&&(this._abortController=null)},this._compileThrottled=ob(this._compile,IPe,this),this._compileExpression=async()=>{const{expressionInfo:i,graphic:r,interceptor:n,spatialReference:s,map:o,view:a,_abortController:l}=this;if(!(i&&r&&s&&o))return void this._set("contentElement",null);const u=await uoe();if(l!==this._abortController)return;const c=await coe({arcadeUtils:u,expressionInfo:i,graphic:r,interceptor:n,map:o,spatialReference:s,view:a});if(!c||c.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const d=await c.castAsJsonAsync(l?.signal),f=d?.type,m=f==="media"?Xx.fromJSON(d):f==="text"?Tb.fromJSON(d):f==="fields"?Ib.fromJSON(d):null;this._set("contentElement",m)},this.handles.add([nt(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),Pi),nt(()=>[this.contentElement],()=>this._createVM(),Pi)])}destroy(){this._cancelQuery(),this.contentElementViewModel?.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){return this.view?.spatialReference??null}set spatialReference(t){this._override("spatialReference",t)}get state(){const{_abortController:t,contentElement:i,contentElementViewModel:r}=this;return t?"loading":i||r?"ready":"disabled"}get map(){return this.view?.map??null}set map(t){this._override("map",t)}};h([p()],Ya.prototype,"_abortController",void 0),h([p({type:WQ})],Ya.prototype,"expressionInfo",void 0),h([p({type:As})],Ya.prototype,"graphic",void 0),h([p({readOnly:!0})],Ya.prototype,"contentElement",void 0),h([p({readOnly:!0})],Ya.prototype,"contentElementViewModel",void 0),h([p()],Ya.prototype,"interceptor",void 0),h([p()],Ya.prototype,"spatialReference",null),h([p({readOnly:!0})],Ya.prototype,"state",null),h([p()],Ya.prototype,"map",null),h([p()],Ya.prototype,"view",void 0),Ya=h([ce("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],Ya);const E9=Ya,hM={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let yT=class extends $s{constructor(t,i){super(t,i),this._contentWidget=null,this.viewModel=new E9}initialize(){this.addHandles(nt(()=>this.viewModel?.contentElementViewModel,()=>this._setupExpressionWidget(),Pi))}destroy(){this._destroyContentWidget()}renderLoading(){return Ne("div",{key:"loading-container",class:hM.loadingSpinnerContainer},Ne("span",{class:this.classes(hM.iconLoading,hM.spinner)}))}render(){const{state:t}=this.viewModel;return Ne("div",{class:hM.base},t==="loading"?this.renderLoading():t==="disabled"?null:this._contentWidget?.render())}_destroyContentWidget(){const{_contentWidget:t}=this;t&&(t.viewModel=null,t.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:t,contentElement:i}=this.viewModel,r=i?.type;this._destroyContentWidget();const n=t?r==="fields"?new aoe({viewModel:t}):r==="media"?new loe({viewModel:t}):r==="text"?new fT({viewModel:t}):null:null;this._contentWidget=n,this.scheduleRender()}};h([p({type:E9})],yT.prototype,"viewModel",void 0),yT=h([ce("esri.widgets.Feature.FeatureExpression")],yT);const TPe=yT,kO=100;let or=class extends xr(Om(Wo(Lt))){constructor(t){super(t),this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.featuresPerPage=10,this.description=null,this.graphic=null,this.layer=null,this.map=null,this.orderByFields=null,this.featureCount=0,this.relationshipId=null,this.showAllEnabled=!1,this.title=null,this._cancelQuery=()=>{const{_queryAbortController:i}=this;i&&i.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:i}=this;i&&i.abort(),this._queryFeatureCountAbortController=null},this._cancelQueryPage=()=>{const{_queryPageAbortController:i}=this;i&&i.abort(),this._queryPageAbortController=null},this._queryController=async()=>{this._cancelQuery();const i=new AbortController;this._queryAbortController=i,await qv(this._query()),this._queryAbortController===i&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._cancelQueryFeatureCount();const i=new AbortController;this._queryFeatureCountAbortController=i,await qv(this._queryFeatureCount()),this._queryFeatureCountAbortController===i&&(this._queryFeatureCountAbortController=null)},this._queryPageController=async()=>{const i=new AbortController;this._queryPageAbortController=i,await qv(this._queryPage()),this._queryPageAbortController===i&&(this._queryPageAbortController=null)},this._queryThrottled=ob(this._queryController,kO,this),this._queryFeatureCountThrottled=ob(this._queryFeatureCountController,kO,this),this._queryPageThrottled=ob(this._queryPageController,kO,this),this._query=async()=>{const{_queryAbortController:i,relatedFeatures:r}=this;this._destroyRelatedFeatureViewModels(),this.featurePage=1,r.removeAll(),r.addMany(this._sliceFeatures(await this._queryRelatedFeatures({signal:i?.signal})))},this.handles.add([nt(()=>[this.displayCount,this.graphic,this.layer,this.map,this.orderByFieldsFixedCasing,this.relationshipId,this.featuresPerPage,this.showAllEnabled,this.canQuery,this.featureCount],()=>this._queryThrottled(),Pi),nt(()=>[this.featurePage,this.showAllEnabled],()=>this._queryPageThrottled()),nt(()=>[this.layer,this.relationshipId,this.objectId,this.canQuery],()=>this._queryFeatureCountThrottled())])}destroy(){this._destroyRelatedFeatureViewModels(),this.relatedFeatures.removeAll(),this._cancelQuery(),this._cancelQueryFeatureCount(),this._cancelQueryPage()}set featurePage(t){const{featuresPerPage:i,featureCount:r}=this,n=1,s=Math.ceil(r/i)||1;this._set("featurePage",Math.min(Math.max(t,n),s))}get featurePage(){return this._get("featurePage")}get orderByFieldsFixedCasing(){const{orderByFields:t,relatedLayer:i}=this;return t&&i?.loaded?t.map(r=>{const n=r.clone(),s=yS(r.field,i);return n.field=s,n}):t??[]}get supportsCacheHint(){return!!this.layer?.capabilities?.queryRelated?.supportsCacheHint}get canQuery(){const t=this.layer?.capabilities?.queryRelated;return!!(this.relatedLayer&&this.relationship&&typeof this.relationshipId=="number"&&typeof this.objectId=="number"&&t?.supportsCount&&t?.supportsPagination)}get itemDescriptionFieldName(){return this.orderByFieldsFixedCasing?.[0]?.field||null}set displayCount(t){this._set("displayCount",Math.min(Math.max(t,0),10))}get displayCount(){return this._get("displayCount")}get objectId(){return(this.objectIdField&&this.graphic?.attributes?.[this.objectIdField])??null}get objectIdField(){return this.layer?.objectIdField||null}get relatedFeatures(){return this._get("relatedFeatures")||new Pt}get relatedLayer(){const{layer:t,map:i,relationship:r}=this;return t?.loaded&&i&&r?gLe(i,t,r)??null:null}get relationship(){const{relationshipId:t,layer:i}=this;return typeof t=="number"?i?.relationships?.find(({id:r})=>r===t)??null:null}get relatedFeatureViewModels(){return this._get("relatedFeatureViewModels")||new Pt}get state(){const{_queryAbortController:t,_queryFeatureCountAbortController:i,_queryPageAbortController:r,canQuery:n}=this;return i?"loading":t||r?"querying":n?"ready":"disabled"}_destroyRelatedFeatureViewModels(){this.relatedFeatureViewModels?.forEach(t=>!t.destroyed&&t.destroy()),this.relatedFeatureViewModels.removeAll()}async _queryFeatureCount(){const{layer:t,relatedLayer:i,relationshipId:r,objectId:n,_queryFeatureCountAbortController:s,canQuery:o,supportsCacheHint:a}=this;if(await t?.load(),await i?.load(),!o||!t||!i)return void this._set("featureCount",0);const l=i.createQuery(),u=new Rb({cacheHint:a,relationshipId:r,returnGeometry:!1,objectIds:[n],where:Jj(l.where,void 0)}),c=await t.queryRelatedFeaturesCount(u,{signal:s?.signal});this._set("featureCount",c[n]||0)}_sliceFeatures(t){const{showAllEnabled:i,displayCount:r}=this;return i?t:r?t.slice(0,r):[]}async _queryPage(){const{relatedFeatures:t,featurePage:i,showAllEnabled:r,_queryPageAbortController:n}=this;!r||i<2||t.addMany(await this._queryRelatedFeatures({signal:n?.signal}))}async _queryRelatedFeatures(t){const{orderByFieldsFixedCasing:i,showAllEnabled:r,featuresPerPage:n,displayCount:s,layer:o,relationshipId:a,featurePage:l,featureCount:u,relatedLayer:c,supportsCacheHint:d}=this,{canQuery:f,objectId:m}=this;if(!f||!o||!c)return[];const g=r?((l-1)*n+u)%u:0,v=r?n:s,b=c.objectIdField,x=[...i?.map(I=>I.field),b].filter(ee),S=i?.map(I=>`${I.field} ${I.order}`),T=c.createQuery(),_=new Rb({orderByFields:S,start:g,num:v,outFields:x,cacheHint:d,relationshipId:a,returnGeometry:!1,objectIds:[m],where:Jj(T.where,void 0)}),M=(await o.queryRelatedFeatures(_,{signal:t?.signal}))[m]?.features||[];return M.forEach(I=>{I.sourceLayer=c,I.layer=c}),M}};h([p()],or.prototype,"_queryAbortController",void 0),h([p()],or.prototype,"_queryPageAbortController",void 0),h([p()],or.prototype,"_queryFeatureCountAbortController",void 0),h([p({value:1})],or.prototype,"featurePage",null),h([p()],or.prototype,"featuresPerPage",void 0),h([p({readOnly:!0})],or.prototype,"orderByFieldsFixedCasing",null),h([p({readOnly:!0})],or.prototype,"supportsCacheHint",null),h([p({readOnly:!0})],or.prototype,"canQuery",null),h([p()],or.prototype,"description",void 0),h([p({readOnly:!0})],or.prototype,"itemDescriptionFieldName",null),h([p({value:3})],or.prototype,"displayCount",null),h([p({type:As})],or.prototype,"graphic",void 0),h([p()],or.prototype,"layer",void 0),h([p()],or.prototype,"map",void 0),h([p({readOnly:!0})],or.prototype,"objectId",null),h([p({readOnly:!0})],or.prototype,"objectIdField",null),h([p()],or.prototype,"orderByFields",void 0),h([p({readOnly:!0})],or.prototype,"relatedFeatures",null),h([p({readOnly:!0})],or.prototype,"relatedLayer",null),h([p({readOnly:!0})],or.prototype,"relationship",null),h([p()],or.prototype,"featureCount",void 0),h([p({readOnly:!0})],or.prototype,"relatedFeatureViewModels",null),h([p()],or.prototype,"relationshipId",void 0),h([p()],or.prototype,"showAllEnabled",void 0),h([p()],or.prototype,"state",null),h([p()],or.prototype,"title",void 0),or=h([ce("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],or);const M9=or,R2="esri-feature",LO=`${R2}-relationship`,Jh={base:LO,esriWidget:"esri-widget",listContainer:`${LO}__list`,listContainerQuerying:`${LO}__list--querying`,featureObserver:`${R2}__feature-observer`,stickySpinnerContainer:`${R2}__sticky-loading-container`,loadingSpinnerContainer:`${R2}__loading-container`,spinner:`${R2}__loading-spinner`,iconLoading:"esri-icon-loading-indicator esri-rotating"},gq={title:!0,description:!0};let Lo=class extends $s{constructor(t,i){super(t,i),this._featureElementInfo=null,this._relatedFeatureIntersectionObserverNode=null,this._relatedFeatureIntersectionObserver=new IntersectionObserver(([r])=>{r?.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this.headingLevel=2,this.viewModel=new M9,this.messages=null,this.messagesCommon=null,this.visibleElements={...gq},this._increaseFeaturePage=()=>{const{state:r,showAllEnabled:n,relatedFeatures:s,featuresPerPage:o,featurePage:a}=this.viewModel;r==="ready"&&n&&s.length>=o*a&&this.viewModel.featurePage++}}initialize(){this._featureElementInfo=new U4,this.addHandles([nt(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),Pi),nt(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),ms(()=>this.viewModel.relatedFeatureViewModels,"change",()=>this._setupRelatedFeatureViewModels())])}loadDependencies(){return Promise.all([De(()=>import("./calcite-list-0e3eb0f9.js"),["./calcite-list-0e3eb0f9.js","./interactive-573cbe88.js","./observers-7f8bc640.js","./utils3-667f7e8e.js","./loadable-25ad9e4e.js","./debounce-31e0cfcc.js","./t9n-a01f9aaf.js","./icon-a3053e34.js","./loader-a91b0f8f.js","./guid-9426053f.js","./scrim-15f97f5a.js","./preload-helper-388ac9d5.js"],import.meta.url),De(()=>import("./calcite-list-item-4dd43398.js"),["./calcite-list-item-4dd43398.js","./interactive-573cbe88.js","./utils3-667f7e8e.js","./loadable-25ad9e4e.js","./icon-a3053e34.js","./observers-7f8bc640.js","./preload-helper-388ac9d5.js"],import.meta.url),De(()=>import("./calcite-icon-0e32a153.js"),["./calcite-icon-0e32a153.js","./icon-a3053e34.js","./observers-7f8bc640.js","./preload-helper-388ac9d5.js"],import.meta.url),De(()=>import("./calcite-notice-65261a7e.js"),["./calcite-notice-65261a7e.js","./observers-7f8bc640.js","./loadable-25ad9e4e.js","./t9n-a01f9aaf.js","./icon-a3053e34.js","./preload-helper-388ac9d5.js"],import.meta.url)])}destroy(){this._unobserveRelatedFeatureObserver(),this._featureElementInfo=qr(this._featureElementInfo)}get displayShowAllButton(){const{showAllEnabled:t,featureCount:i,displayCount:r}=this.viewModel;return!t&&!!i&&(i>r||r===0)}get displayListItems(){return this.displayShowAllButton||this.viewModel.relatedFeatureViewModels.length>0}get description(){return this.viewModel.description}set description(t){this.viewModel.description=t}get featureCountDescription(){const{messages:t}=this,{featureCount:i}=this.viewModel;return nh(i===1?t?.numberRecord:t?.numberRecords,{number:i})}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}castVisibleElements(t){return{...gq,...t}}renderStickyLoading(){return this.viewModel.state==="querying"?Ne("div",{key:"sticky-loader",class:Jh.stickySpinnerContainer},this.renderLoadingIcon()):null}renderLoadingIcon(){return Ne("span",{class:this.classes(Jh.iconLoading,Jh.spinner)})}renderLoading(){return Ne("div",{key:"loading-container",class:Jh.loadingSpinnerContainer},this.renderLoadingIcon())}renderShowAllIconNode(){return Ne("calcite-icon",{scale:"s",icon:"list",slot:"content-end"})}renderChevronIconNode(){const t=mh(this.container)?"chevron-left":"chevron-right";return Ne("calcite-icon",{scale:"s",icon:t,slot:"content-end"})}renderRelatedFeature(t){const{itemDescriptionFieldName:i}=this.viewModel,r=t.title;t.description=i&&t.formattedAttributes?.global[i];const n=t.state==="loading";return Ne("calcite-list-item",{key:t.uid,label:n?`${this.messagesCommon?.loading}…`:r,description:n?"…":t.description??"",onCalciteListItemSelect:()=>this.emit("select-record",{featureViewModel:t})},this.renderChevronIconNode())}renderShowAllListItem(){return this.displayShowAllButton?Ne("calcite-list-item",{key:"show-all-item",label:this.messages?.showAll,description:this.featureCountDescription,onCalciteListItemSelect:()=>this.emit("show-all-records")},this.renderShowAllIconNode()):null}renderNoRelatedFeaturesMessage(){return Ne("calcite-notice",{key:"no-related-features-message",icon:"information",open:!0,kind:"brand",scale:"s",width:"full"},Ne("div",{slot:"message"},this.messages?.noRelatedFeatures))}renderFeatureObserver(){return Ne("div",{key:"feature-observer",class:Jh.featureObserver,bind:this,afterCreate:this._relatedFeatureIntersectionObserverCreated})}renderList(){const{relatedFeatureViewModels:t}=this.viewModel;return Ne("calcite-list",null,t.toArray().map(i=>this.renderRelatedFeature(i)),this.renderShowAllListItem())}renderRelatedFeatures(){const{displayListItems:t}=this,{state:i}=this.viewModel;return Ne("div",{key:"list-container",class:this.classes(Jh.listContainer,{[Jh.listContainerQuerying]:i==="querying"})},t?this.renderList():i==="ready"?this.renderNoRelatedFeaturesMessage():null,this.renderStickyLoading(),this.renderFeatureObserver())}renderRelationshipNotFound(){return Ne("calcite-notice",{key:"relationship-not-found",icon:"exclamation-mark-triangle",open:!0,kind:"danger",scale:"s",width:"full"},Ne("div",{slot:"message"},this.messages?.relationshipNotFound))}render(){const{state:t}=this.viewModel;return Ne("div",{class:this.classes(Jh.base,Jh.esriWidget)},this._featureElementInfo?.render(),t==="loading"?this.renderLoading():t==="disabled"?this.renderRelationshipNotFound():this.renderRelatedFeatures())}_setupRelatedFeatureViewModels(){const{relatedFeatureViewModels:t}=this.viewModel,i="related-feature-viewmodels";this.removeHandles(i),t?.forEach(r=>{this.addHandles(nt(()=>[r.title,r.state],()=>this.scheduleRender(),Pi),i)}),this.scheduleRender()}_setupFeatureElementInfo(){const{headingLevel:t,visibleElements:i}=this,r=i.description&&this.description,n=i.title&&this.title;this._featureElementInfo?.set({description:r,title:n,headingLevel:t})}async _handleRelatedFeatureObserverChange(){this._unobserveRelatedFeatureObserver();const{state:t,showAllEnabled:i}=this.viewModel;await z5(0),this._relatedFeatureIntersectionObserverNode&&t==="ready"&&i&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)}_relatedFeatureIntersectionObserverCreated(t){this._relatedFeatureIntersectionObserverNode=t}_unobserveRelatedFeatureObserver(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)}};h([p()],Lo.prototype,"_relatedFeatureIntersectionObserverNode",void 0),h([p({readOnly:!0})],Lo.prototype,"displayShowAllButton",null),h([p({readOnly:!0})],Lo.prototype,"displayListItems",null),h([p()],Lo.prototype,"description",null),h([p({readOnly:!0})],Lo.prototype,"featureCountDescription",null),h([p()],Lo.prototype,"headingLevel",void 0),h([p()],Lo.prototype,"title",null),h([p({type:M9})],Lo.prototype,"viewModel",void 0),h([p(),Is("esri/widgets/Feature/t9n/Feature")],Lo.prototype,"messages",void 0),h([p(),Is("esri/t9n/common")],Lo.prototype,"messagesCommon",void 0),h([p()],Lo.prototype,"visibleElements",void 0),h([di("visibleElements")],Lo.prototype,"castVisibleElements",null),Lo=h([ce("esri.widgets.Feature.FeatureRelationship")],Lo);const vq=Lo;let APe=class{constructor(t,i){this.preLayerQueryCallback=t,this.preRequestCallback=i,this.preLayerQueryCallback||(this.preLayerQueryCallback=r=>{}),this.preRequestCallback||(this.preLayerQueryCallback=r=>{})}};var k2;const CPe=1,bq="content-view-models",wq="relationship-view-models",_q={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0};let Ir=k2=class extends Om(Lt){constructor(e){super(e),this._handles=new So,this._error=null,this._featureAbortController=null,this._graphicChangedThrottled=ob(this._graphicChanged,CPe,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={..._q},this.content=null,this.contentViewModels=[],this.description=null,this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=t=>{const{abilities:i}=this;return t.type==="attachments"&&!!i.attachmentsContent||t.type==="custom"&&!!i.customContent||t.type==="fields"&&!!i.fieldsContent||t.type==="media"&&!!i.mediaContent||t.type==="text"&&!!i.textContent||t.type==="expression"&&!!i.expressionContent||t.type==="relationship"&&!!i.relationshipContent},this._handles.add(nt(()=>[this.graphic,this._effectivePopupTemplate,this.abilities],()=>this._graphicChangedThrottled(),Pi))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return ee(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return cLe(nq(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return Zse(this.graphic)}castAbilities(e){return{..._q,...e}}get isTable(){return this._sourceLayer?.isTable||!1}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(e){this._set("graphic",e?e.clone():null)}get spatialReference(){return this.view?.spatialReference??null}set spatialReference(e){this._override("spatialReference",e)}get map(){return this.view?.map||null}set map(e){this._override("map",e)}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(e,t){const i=this.contentViewModels[e];i instanceof Dg&&i.setActiveMedia(t)}nextMedia(e){const t=this.contentViewModels[e];t instanceof Dg&&t.next()}previousMedia(e){const t=this.contentViewModels[e];t instanceof Dg&&t.previous()}async updateGeometry(){const{graphic:e,spatialReference:t,_sourceLayer:i}=this;await i?.load();const r=i?.objectIdField;if(!r||!e||!i)return;const n=e?.attributes?.[r];if(n==null)return;const s=[n];if(!e.geometry){const o=(await toe({layer:i,graphic:e,outFields:[],objectIds:s,returnGeometry:!0,spatialReference:t}))?.geometry;o&&(e.geometry=o)}}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:e}=this;if(!e)return;const t=new AbortController;this._featureAbortController=t;try{await this._queryFeature({signal:t.signal})}catch(i){fs(i)||(this._error=i,et.getLogger(this.declaredClass).error("error","The popupTemplate could not be displayed for this feature.",{error:i,graphic:e,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===t&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:e}=this;e&&e.abort(),this._featureAbortController=null}_compileContentElement(e,t){return e.type==="attachments"?this._compileAttachments(e,t):e.type==="custom"?this._compileCustom(e,t):e.type==="fields"?this._compileFields(e,t):e.type==="media"?this._compileMedia(e,t):e.type==="text"?this._compileText(e,t):e.type==="expression"?this._compileExpression(e,t):e.type==="relationship"?this._compileRelationship(e,t):void 0}_compileContent(e){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.filter(this._isAllowedContentType).map((t,i)=>this._compileContentElement(t,i)).filter(ee):typeof e=="string"?this._compileText(new Tb({text:e}),0).text:e}_destroyContentViewModels(){this._handles?.remove(wq),this._handles?.remove(bq),this.contentViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("contentViewModels",[])}_matchesFeature(e,t){const i=e?.graphic?.getObjectId(),r=t?.getObjectId();return ee(i)&&ee(r)&&i===r}_setRelatedFeaturesViewModels({relatedFeatureViewModels:e,relatedFeatures:t,map:i}){const{view:r,spatialReference:n}=this;t?.filter(Boolean).forEach(s=>{e.find(o=>this._matchesFeature(o,s))||e.add(new k2({abilities:{relationshipContent:!1},map:i,view:r,spatialReference:n,graphic:s}))}),e.forEach(s=>{t?.find(a=>this._matchesFeature(s,a))||e.remove(s)})}_setExpressionContentVM(e,t){const i=this.formattedAttributes,{contentElement:r,contentElementViewModel:n}=e,s=r?.type;n&&s&&(s==="fields"&&(this._createFieldsFormattedAttributes({contentElement:r,contentElementIndex:t,formattedAttributes:i}),n.set(this._createFieldsVMParams(r,t))),s==="media"&&(this._createMediaFormattedAttributes({contentElement:r,contentElementIndex:t,formattedAttributes:i}),n.set(this._createMediaVMParams(r,t))),s==="text"&&n.set(this._createTextVMParams(r)))}_compileRelationship(e,t){const{displayCount:i,orderByFields:r,relationshipId:n,title:s,description:o}=e,{_sourceLayer:a,graphic:l,map:u}=this,c=new M9({displayCount:i,graphic:l,orderByFields:r,relationshipId:n,layer:a,map:u,...this._compileTitleAndDesc({title:s,description:o})});return this.contentViewModels[t]=c,this._handles.add(ms(()=>c.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels(c)),wq),e}_compileExpression(e,t){const{expressionInfo:i}=e,{graphic:r,map:n,spatialReference:s,view:o}=this,a=new E9({expressionInfo:i,graphic:r,interceptor:k2.interceptor,map:n,spatialReference:s,view:o});return this.contentViewModels[t]=a,this._handles.add(nt(()=>a.contentElementViewModel,()=>this._setExpressionContentVM(a,t),Pi),bq),e}_compileAttachments(e,t){const{graphic:i}=this,{description:r,title:n}=e;return this.contentViewModels[t]=new x9({graphic:i,...this._compileTitleAndDesc({title:n,description:r})}),e}_compileCustom(e,t){const{graphic:i}=this,{creator:r,destroyer:n}=e;return this.contentViewModels[t]=new WA({graphic:i,creator:r,destroyer:n}),e}_compileTitleAndDesc({title:e,description:t}){const{_fieldInfoMap:i,_sourceLayer:r,graphic:n,formattedAttributes:s}=this,o=n?.attributes,a=this._expressionAttributes,l=s.global;return{title:Fg({attributes:o,fieldInfoMap:i,globalAttributes:l,expressionAttributes:a,layer:r,text:e}),description:Fg({attributes:o,fieldInfoMap:i,globalAttributes:l,expressionAttributes:a,layer:r,text:t})}}_createFieldsVMParams(e,t){const i=this._effectivePopupTemplate,r=this.formattedAttributes,n={...r?.global,...r?.content[t]},s=(e?.fieldInfos||i?.fieldInfos)?.filter(({fieldName:u})=>v9(u)||Bd(u)||n.hasOwnProperty(u)),o=i?.expressionInfos,{description:a,title:l}=e;return{attributes:n,expressionInfos:o,fieldInfos:s,...this._compileTitleAndDesc({title:l,description:a})}}_compileFields(e,t){const i=e.clone(),r=new V4(this._createFieldsVMParams(e,t));return this.contentViewModels[t]=r,i.fieldInfos=r.formattedFieldInfos.slice(0),i}_createMediaVMParams(e,t){const{abilities:i,graphic:r,_fieldInfoMap:n,_effectivePopupTemplate:s,relatedInfos:o,_sourceLayer:a,_expressionAttributes:l}=this,u=this.formattedAttributes,c=r?.attributes??{},{description:d,mediaInfos:f,title:m}=e;return{abilities:{chartAnimation:i.chartAnimation},activeMediaInfoIndex:e.activeMediaInfoIndex||0,attributes:c,isAggregate:r?.isAggregate,layer:a,fieldInfoMap:n,formattedAttributes:{...u?.global,...u?.content[t]},expressionAttributes:l,mediaInfos:f,popupTemplate:s,relatedInfos:o,...this._compileTitleAndDesc({title:m,description:d})}}_compileMedia(e,t){const i=e.clone(),r=new Dg(this._createMediaVMParams(e,t));return i.mediaInfos=r.formattedMediaInfos.slice(0),this.contentViewModels[t]=r,i}_createTextVMParams(e){const{graphic:t,_fieldInfoMap:i,_sourceLayer:r,_expressionAttributes:n}=this;if(e&&e.text){const s=t?.attributes??{},o=this.formattedAttributes?.global??{};e.text=Fg({attributes:s,fieldInfoMap:i,globalAttributes:o,expressionAttributes:n,layer:r,text:e.text})}return{graphic:t,creator:e.text}}_compileText(e,t){const i=e.clone();return this.contentViewModels[t]=new WA(this._createTextVMParams(i)),i}_compileLastEditInfo(){const{_effectivePopupTemplate:e,_sourceLayer:t,graphic:i}=this;if(!e)return;const{lastEditInfoEnabled:r}=e,n=t?.editFieldsInfo;return r&&n?uLe(n,i?.attributes):void 0}_compileTitle(e){const{_fieldInfoMap:t,_sourceLayer:i,graphic:r,_expressionAttributes:n}=this,s=r?.attributes??{},o=this.formattedAttributes?.global??{};return Fg({attributes:s,fieldInfoMap:t,globalAttributes:o,expressionAttributes:n,layer:i,text:e})}async _getTitle(){const{_effectivePopupTemplate:e,graphic:t}=this;if(!t)return null;const i=e?.title;return HA(i,{graphic:t})}async _getContent(){const{_effectivePopupTemplate:e,graphic:t}=this;if(!t)return null;const i=e?.content;return HA(i,{graphic:t})}async _queryFeature(e){const{_featureAbortController:t,_sourceLayer:i,graphic:r,_effectivePopupTemplate:n}=this,s=this.map,o=this.view,a=this.spatialReference;if(t!==this._featureAbortController||!r)return;await dLe({graphic:r,popupTemplate:n,layer:i,spatialReference:a},e);const{content:{value:l},title:{value:u}}=await Ia({content:this._getContent(),title:this._getTitle()}),{expressionAttributes:{value:c}}=await Ia({checkForRelatedFeatures:this._checkForRelatedFeatures(e),expressionAttributes:MPe({expressionInfos:n?.expressionInfos,spatialReference:a,graphic:r,map:s,interceptor:k2.interceptor,view:o})});t===this._featureAbortController&&r&&(this._expressionAttributes=c,this._graphicExpressionAttributes={...r.attributes,...c},this._set("formattedAttributes",this._createFormattedAttributes(l)),this._set("title",this._compileTitle(u)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(l)||null))}_createMediaFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){const{_effectivePopupTemplate:r,graphic:n,relatedInfos:s,_sourceLayer:o,_fieldInfoMap:a,_graphicExpressionAttributes:l}=this;i.content[t]=EO({fieldInfos:r?.fieldInfos,graphic:n,attributes:{...l,...e.attributes},layer:o,fieldInfoMap:a,relatedInfos:s})}_createFieldsFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){if(e.fieldInfos){const{graphic:r,relatedInfos:n,_sourceLayer:s,_fieldInfoMap:o,_graphicExpressionAttributes:a}=this;i.content[t]=EO({fieldInfos:e.fieldInfos,graphic:r,attributes:{...a,...e.attributes},layer:s,fieldInfoMap:o,relatedInfos:n})}}_createFormattedAttributes(e){const{_effectivePopupTemplate:t,graphic:i,relatedInfos:r,_sourceLayer:n,_fieldInfoMap:s,_graphicExpressionAttributes:o}=this,a=t?.fieldInfos,l={global:EO({fieldInfos:a,graphic:i,attributes:o,layer:n,fieldInfoMap:s,relatedInfos:r}),content:[]};return Array.isArray(e)&&e.forEach((u,c)=>{u.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:u,contentElementIndex:c,formattedAttributes:l}),u.type==="media"&&this._createMediaFormattedAttributes({contentElement:u,contentElementIndex:c,formattedAttributes:l})}),l}_checkForRelatedFeatures(e){const{graphic:t,_effectivePopupTemplate:i}=this;return this._queryRelatedInfos(t,nq(i),e)}async _queryRelatedInfos(e,t,i){const{relatedInfos:r,_sourceLayer:n}=this;r.clear();const s=ee(n?.associatedLayer)?await n?.associatedLayer.load(i):n;if(!s||!e)return;const o=t.filter(u=>u&&Bd(u.fieldName));if(!o||!o.length)return;t.forEach(u=>this._configureRelatedInfo(u,s));const a=await oPe({relatedInfos:r,layer:s},i);Object.keys(a).forEach(u=>{const c=r.get(u.toString()),d=a[u]?.value;c&&d&&(c.layerInfo=d.data)});const l=await aPe({graphic:e,relatedInfos:r,layer:s},i);Object.keys(l).forEach(u=>{tPe(l[u]?.value,r.get(u.toString()))})}_configureRelatedInfo(e,t){const{relatedInfos:i}=this,r=mT(e.fieldName);if(!r)return;const{layerId:n,fieldName:s}=r;if(!n)return;const o=i.get(n.toString())||ePe(n,t);o&&(lPe({relatedInfo:o,fieldName:s,fieldInfo:e}),this.relatedInfos.set(n,o))}};Ir.interceptor=new APe(mLe,yLe),h([p()],Ir.prototype,"_error",void 0),h([p()],Ir.prototype,"_featureAbortController",void 0),h([p({readOnly:!0})],Ir.prototype,"_effectivePopupTemplate",null),h([p({readOnly:!0})],Ir.prototype,"_fieldInfoMap",null),h([p({readOnly:!0})],Ir.prototype,"_sourceLayer",null),h([p()],Ir.prototype,"abilities",void 0),h([di("abilities")],Ir.prototype,"castAbilities",null),h([p({readOnly:!0})],Ir.prototype,"content",void 0),h([p({readOnly:!0})],Ir.prototype,"contentViewModels",void 0),h([p()],Ir.prototype,"description",void 0),h([p({type:Boolean})],Ir.prototype,"defaultPopupTemplateEnabled",void 0),h([p({readOnly:!0})],Ir.prototype,"isTable",null),h([p({readOnly:!0})],Ir.prototype,"state",null),h([p({readOnly:!0})],Ir.prototype,"formattedAttributes",void 0),h([p({type:As,value:null})],Ir.prototype,"graphic",null),h([p({readOnly:!0})],Ir.prototype,"lastEditInfo",void 0),h([p({readOnly:!0})],Ir.prototype,"relatedInfos",void 0),h([p()],Ir.prototype,"spatialReference",null),h([p({readOnly:!0})],Ir.prototype,"title",void 0),h([p()],Ir.prototype,"map",null),h([p({readOnly:!0})],Ir.prototype,"waitingForContent",null),h([p()],Ir.prototype,"view",void 0),Ir=k2=h([ce("esri.widgets.FeatureViewModel")],Ir);const I9=Ir,Ls="esri-feature",Br={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:Ls,container:`${Ls}__size-container`,title:`${Ls}__title`,main:`${Ls}__main-container`,btn:`${Ls}__button`,icon:`${Ls}__icon`,content:`${Ls}__content`,contentNode:`${Ls}__content-node`,contentElement:`${Ls}__content-element`,text:`${Ls}__text`,lastEditedInfo:`${Ls}__last-edited-info`,fields:`${Ls}__fields`,fieldHeader:`${Ls}__field-header`,fieldData:`${Ls}__field-data`,fieldDataDate:`${Ls}__field-data--date`,loadingSpinnerContainer:`${Ls}__loading-container`,spinner:`${Ls}__loading-spinner`},hoe=e=>{let t=class extends e{constructor(){super(...arguments),this.renderNodeContent=i=>ooe(i)&&!i.destroyed?Ne("div",{class:Br.contentNode,key:i},i.render()):i instanceof HTMLElement?Ne("div",{class:Br.contentNode,key:i,bind:i,afterCreate:this._attachToNode}):LLe(i)?Ne("div",{class:Br.contentNode,key:i,bind:i.domNode,afterCreate:this._attachToNode}):null}_attachToNode(i){const r=this;i.appendChild(r)}};return t=h([ce("esri.widgets.Feature.ContentMixin")],t),t};var f6;const xq={title:!0,content:!0,lastEditedInfo:!0},Sq="relationship-handles";let ns=f6=class extends hoe($s){constructor(e,t){super(e,t),this._contentWidgets=[],this.flowItems=null,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.visibleElements={...xq},this.viewModel=new I9}initialize(){this.addHandles(nt(()=>this.viewModel?.contentViewModels,()=>this._setupContentWidgets(),Pi))}loadDependencies(){return De(()=>import("./calcite-notice-65261a7e.js"),["./calcite-notice-65261a7e.js","./observers-7f8bc640.js","./loadable-25ad9e4e.js","./t9n-a01f9aaf.js","./icon-a3053e34.js","./preload-helper-388ac9d5.js"],import.meta.url)}destroy(){this._destroyContentWidgets()}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(e){this.viewModel.defaultPopupTemplateEnabled=e}get isTable(){return this.viewModel.isTable}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(e){this.viewModel.spatialReference=e}get title(){return this.viewModel.title}castVisibleElements(e){return{...xq,...e}}get map(){return this.viewModel.map}set map(e){this.viewModel.map=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const{state:e}=this.viewModel,t=Ne("div",{class:Br.container,key:"container"},this.renderTitle(),e==="error"?this.renderError():e==="loading"?this.renderLoading():this.renderContentContainer());return Ne("div",{class:this.classes(Br.base,Br.esriWidget)},t)}setActiveMedia(e,t){return this.viewModel.setActiveMedia(e,t)}nextMedia(e){return this.viewModel.nextMedia(e)}previousMedia(e){return this.viewModel.previousMedia(e)}renderError(){const{messagesCommon:e,messages:t,visibleElements:i}=this;return Ne("calcite-notice",{open:!0,kind:"danger",icon:"exclamation-mark-circle",scale:"s"},i.title?Ne("div",{key:"error-title",slot:"title"},e.errorMessage):null,Ne("div",{key:"error-message",slot:"message"},t.loadingError))}renderLoading(){return Ne("div",{key:"loading-container",class:Br.loadingSpinnerContainer},Ne("span",{class:this.classes(Br.iconLoading,Br.spinner)}))}renderContentContainer(){const{visibleElements:e}=this;return e.content?Ne("div",{class:Br.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:e,title:t}=this;return e.title?Ne(j4,{level:this.headingLevel,class:Br.title,innerHTML:t}):null}renderContent(){const e=this.viewModel.content,t="content";if(!e)return null;if(Array.isArray(e))return e.length?Ne("div",{class:Br.contentNode,key:`${t}-content-elements`},e.map(this.renderContentElement,this)):null;if(typeof e=="string"){const i=this._contentWidgets[0];return!i||i.destroyed?null:Ne("div",{class:Br.contentNode,key:`${t}-content`},i.render())}return this.renderNodeContent(e)}renderContentElement(e,t){const{visibleElements:i}=this;if(typeof i.content!="boolean"&&!i.content?.[e.type])return null;switch(e.type){case"attachments":return this.renderAttachments(t);case"custom":return this.renderCustom(e,t);case"fields":return this.renderFields(t);case"media":return this.renderMedia(t);case"text":return this.renderText(e,t);case"expression":return this.renderExpression(t);case"relationship":return this.renderRelationship(t);default:return null}}renderAttachments(e){const t=this._contentWidgets[e];if(!t||t.destroyed)return null;const{state:i,attachmentInfos:r}=t.viewModel;return i==="loading"||r.length>0?Ne("div",{key:this._buildKey("attachments-element",e),class:this.classes(Br.contentElement)},t.render()):null}renderRelationship(e){const t=this._contentWidgets[e];return t&&!t.destroyed&&this.flowItems?Ne("div",{key:this._buildKey("relationship-element",e),class:Br.contentElement},t.render()):null}renderExpression(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:Ne("div",{key:this._buildKey("expression-element",e),class:Br.contentElement},t.render())}renderCustom(e,t){const{creator:i}=e,r=this._contentWidgets[t];return!r||r.destroyed?null:i?Ne("div",{key:this._buildKey("custom-element",t),class:Br.contentElement},r.render()):null}renderFields(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:Ne("div",{key:this._buildKey("fields-element",e),class:Br.contentElement},t.render())}renderMedia(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:Ne("div",{key:this._buildKey("media-element",e),class:Br.contentElement},t.render())}renderLastEditInfo(){const{visibleElements:e,messages:t}=this,{lastEditInfo:i}=this.viewModel;if(!i||!e.lastEditedInfo)return null;const{date:r,user:n}=i,s=i.type==="edit"?n?t.lastEditedByUser:t.lastEdited:n?t.lastCreatedByUser:t.lastCreated,o=nh(s,{date:r,user:n});return Ne("div",{key:"edit-info-element",class:this.classes(Br.lastEditedInfo,Br.contentElement)},o)}renderText(e,t){const i=e.text,r=this._contentWidgets[t];return!r||r.destroyed?null:i?Ne("div",{key:this._buildKey("text-element",t),class:this.classes(Br.contentElement,Br.text)},r.render()):null}_buildKey(e,...t){return`${e}__${this.get("viewModel.graphic.uid")||"0"}-${t.join("-")}`}_destroyContentWidget(e){e&&(e.viewModel=null,!e.destroyed&&e.destroy())}_destroyContentWidgets(){this.removeHandles(Sq),this._contentWidgets.forEach(e=>this._destroyContentWidget(e)),this._contentWidgets=[]}_addFeatureRelationshipHandles(e){const{flowItems:t,visibleElements:i}=this;this.addHandles([ms(()=>e,"select-record",({featureViewModel:r})=>{t&&(r.abilities={relationshipContent:!0},t.push(new f6({flowItems:t,viewModel:r,visibleElements:i})))}),ms(()=>e,"show-all-records",()=>{if(!t)return;const{viewModel:r}=e;r.showAllEnabled=!0;const n=new vq({visibleElements:{title:!1,description:!1},viewModel:r});this._addFeatureRelationshipHandles(n),t.push(n)})],Sq)}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:e,visibleElements:t}=this,i=this.get("viewModel.content"),{contentViewModels:r}=this.viewModel;if(Array.isArray(i))i.forEach((n,s)=>{if(n.type==="attachments"&&(this._contentWidgets[s]=new MLe({displayType:n.displayType,headingLevel:t.title?e+1:e,viewModel:r[s]})),n.type==="fields"&&(this._contentWidgets[s]=new aoe({viewModel:r[s]})),n.type==="media"&&(this._contentWidgets[s]=new loe({viewModel:r[s]})),n.type==="text"&&(this._contentWidgets[s]=new fT({viewModel:r[s]})),n.type==="custom"&&(this._contentWidgets[s]=new fT({viewModel:r[s]})),n.type==="expression"&&(this._contentWidgets[s]=new TPe({viewModel:r[s]})),n.type==="relationship"){const o=new vq({viewModel:r[s]});this._addFeatureRelationshipHandles(o),this._contentWidgets[s]=o}},this);else{const n=r[0];n&&!n.destroyed&&(this._contentWidgets[0]=new fT({viewModel:n}))}this.scheduleRender()}};h([p()],ns.prototype,"graphic",null),h([p()],ns.prototype,"defaultPopupTemplateEnabled",null),h([p()],ns.prototype,"flowItems",void 0),h([p()],ns.prototype,"headingLevel",void 0),h([p({readOnly:!0})],ns.prototype,"isTable",null),h([p()],ns.prototype,"label",null),h([p(),Is("esri/widgets/Feature/t9n/Feature")],ns.prototype,"messages",void 0),h([p(),Is("esri/t9n/common")],ns.prototype,"messagesCommon",void 0),h([p(),Is("esri/widgets/support/t9n/uriUtils")],ns.prototype,"messagesURIUtils",void 0),h([p()],ns.prototype,"spatialReference",null),h([p({readOnly:!0})],ns.prototype,"title",null),h([p()],ns.prototype,"visibleElements",void 0),h([di("visibleElements")],ns.prototype,"castVisibleElements",null),h([p()],ns.prototype,"map",null),h([p()],ns.prototype,"view",null),h([p({type:I9})],ns.prototype,"viewModel",void 0),ns=f6=h([ce("esri.widgets.Feature")],ns);const $Pe=ns;var doe;const gT=Symbol("anchorHandles");let ig=class extends hp.EventedAccessor{constructor(t){super(t),this[doe]=new So,this.location=null,this.screenLocationEnabled=!1,this.view=null,this[gT].add([Tl(()=>Ff(this.screenLocationEnabled?this.view:null,i=>[i.size,i.type==="3d"?i.camera:i.viewpoint]),()=>this.notifyChange("screenLocation")),nt(()=>this.screenLocation,(i,r)=>{ee(i)&&ee(r)&&this.emit("view-change")})])}destroy(){this.view=null,this[gT]=qr(this[gT])}get screenLocation(){const{location:t,view:i,screenLocationEnabled:r}=this;return r&&ee(t)&&ee(i)&&i.ready?i.toScreen?.(t):null}};doe=gT,h([p()],ig.prototype,"location",void 0),h([p()],ig.prototype,"screenLocation",null),h([p()],ig.prototype,"screenLocationEnabled",void 0),h([p()],ig.prototype,"view",void 0),ig=h([ce("esri.widgets.support.AnchorElementViewModel")],ig);const poe=ig,OPe="esri.widgets.CompassViewModel";let vT=class extends poe{constructor(t){super(t),this.visible=!1}};h([p()],vT.prototype,"visible",void 0),vT=h([ce(OPe)],vT);const foe=vT,PO="esri-spinner",NO={base:PO,spinnerStart:`${PO}--start`,spinnerFinish:`${PO}--finish`};let rg=class extends $s{constructor(t,i){super(t,i),this._animationDelay=500,this._animationPromise=null,this.viewModel=new foe}initialize(){this.addHandles(nt(()=>this.visible,t=>this._visibleChange(t)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(t){this.viewModel.location=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}get visible(){return this.viewModel.visible}set visible(t){this.viewModel.visible=t}show(t){const{location:i,promise:r}=t??{};i&&(this.viewModel.location=i),this.visible=!0;const n=()=>this.hide();r&&r.catch(()=>{}).then(n)}hide(){this.visible=!1}render(){const{visible:t}=this,{screenLocation:i}=this.viewModel,r=!!i,n=t&&r,s=!t&&r,o={[NO.spinnerStart]:n,[NO.spinnerFinish]:s},a=this._getPositionStyles();return Ne("div",{class:this.classes(NO.base,o),styles:a})}_visibleChange(t){if(t)return void(this.viewModel.screenLocationEnabled=!0);const i=z5(this._animationDelay);this._animationPromise=i,i.catch(()=>{}).then(()=>{this._animationPromise===i&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:t,view:i}=this.viewModel;if(Re(i)||Re(t))return{};const{padding:r}=i;return{left:t.x-r.left+"px",top:t.y-r.top+"px"}}};h([p()],rg.prototype,"location",null),h([p()],rg.prototype,"view",null),h([p({type:foe})],rg.prototype,"viewModel",void 0),h([p()],rg.prototype,"visible",null),rg=h([ce("esri.widgets.Spinner")],rg);const RPe=rg,B4={iconZoom:"esri-icon-zoom-in-magnifying-glass",iconTrash:"esri-icon-trash",iconBrowseClusteredFeatures:"esri-icon-table"},jg=new mw({id:"zoom-to-feature",title:"{messages.zoom}",className:B4.iconZoom}),Eq=new mw({id:"remove-selected-feature",title:"{messages.remove}",className:B4.iconTrash}),Lv=new mw({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:B4.iconZoom}),Pv=new mw({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:B4.iconBrowseClusteredFeatures}),kPe="esri.widgets.Popup.PopupViewModel",ZA=et.getLogger(kPe),LPe=e=>{const{event:t,view:i}=e,{action:r}=t,n=i&&i.popup;if(!r)return Promise.reject(new Ce("trigger-action:missing-arguments","Event has no action"));if(!n)return Promise.reject(new Ce("trigger-action:missing-arguments","view.popup is missing"));const{disabled:s,id:o}=r;if(!o)return Promise.reject(new Ce("trigger-action:invalid-action","action.id is missing"));if(s)return Promise.reject(new Ce("trigger-action:invalid-action","Action is disabled"));if(o===jg.id)return NPe(n.viewModel).catch(PR);if(o===Lv.id)return FPe(n.viewModel);if(o===Pv.id)return n.featureMenuOpen=!n.featureMenuOpen,n.viewModel.browseClusterEnabled=!n.viewModel.browseClusterEnabled,Promise.resolve();if(n.viewModel.browseClusterEnabled=!1,o===Eq.id){n.close();const{selectedFeature:a}=n;if(!a)return Promise.reject(new Ce(`trigger-action:${Eq.id}`,"selectedFeature is required",{selectedFeature:a}));const{sourceLayer:l}=a;return l?l.remove(a):i.graphics.remove(a),Promise.resolve()}return Promise.resolve()};function moe(e){const{selectedFeature:t,location:i,view:r}=e;return r?r.type==="3d"?t??i??null:e.get("selectedFeature.geometry")||i:null}function bg(e){return!!e&&e.isAggregate&&e.sourceLayer?.featureReduction?.type==="cluster"}async function PPe(e,t){if(t?.type!=="3d"||!e||e.declaredClass!=="esri.Graphic")return!0;const i=t.getViewForGraphic(e);if(i&&"whenGraphicBounds"in i){let r;try{r=await i.whenGraphicBounds(e,{useViewElevation:!0})}catch{}return!r||!r.boundingBox||r.boundingBox[0]===r.boundingBox[3]&&r.boundingBox[1]===r.boundingBox[4]&&r.boundingBox[2]===r.boundingBox[5]}return!0}async function NPe(e){const{location:t,selectedFeature:i,view:r,zoomFactor:n}=e,s=moe(e);if(!r||!s){const c=new Ce("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:s,view:r});throw ZA.error(c),c}const o=r.scale/n,a=e.selectedFeature?.geometry,l=a??t,u=ee(l)&&l.type==="point"&&await PPe(i,r);jg.active=!0,jg.disabled=!0;try{await e.zoomTo({target:{target:s,scale:u?o:void 0}})}catch{const d=new Ce("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:i});ZA.error(d)}finally{jg.active=!1,jg.disabled=!1,e.zoomToLocation=null,u&&(e.location=l)}}async function FPe(e){const{selectedFeature:t,view:i}=e;if(i?.type!=="2d"){const o=new Ce("zoomToCluster:invalid-view","View must be 2d MapView.",{view:i});throw ZA.error(o),o}if(!t||!bg(t)){const o=new Ce("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw ZA.error(o),o}const[r,n]=await T9(i,t);Lv.active=!0,Lv.disabled=!0;const{extent:s}=await r.queryExtent(n);await e.zoomTo({target:s}),Lv.active=!1,Lv.disabled=!1}async function DPe(e){const{view:t,selectedFeature:i}=e;if(!t||!i)return;const[r,n]=await T9(t,i),{extent:s}=await r.queryExtent(n);e.selectedClusterBoundaryFeature.geometry=s,t.graphics.add(e.selectedClusterBoundaryFeature)}async function jPe(e){const{selectedFeature:t,view:i}=e;if(!i||!t)return;const[r,n]=await T9(i,t);Pv.active=!0,Pv.disabled=!0;const{features:s}=await r.queryFeatures(n);Pv.active=!1,Pv.disabled=!1,i.popup?.open({features:[t].concat(s),featureMenuOpen:!0})}async function T9(e,t){const i=await e.whenLayerView(t.sourceLayer),r=i.createQuery(),n=t.getObjectId();return r.aggregateIds=n!=null?[n]:[],[i,r]}function UPe(e){const t=e.features.filter(i=>bg(i));t.length&&(e.features=t)}function yoe(e){if(Re(e))return null;switch(e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":case"polyline":return e.extent?.center;default:return null}}const Bt="esri-popup",E_=`${Bt}__header`,ay=`${Bt}--is-docked`,st={calciteThemeLight:"calcite-mode-light",calciteThemeDark:"calcite-mode-dark",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:Bt,widget:"esri-widget",main:`${Bt}__main-container`,loadingContainer:`${Bt}__loading-container`,isCollapsible:`${Bt}--is-collapsible`,isCollapsed:`${Bt}--is-collapsed`,shadow:`${Bt}--shadow`,isDocked:ay,isDockedTopLeft:`${ay}-top-left`,isDockedTopCenter:`${ay}-top-center`,isDockedTopRight:`${ay}-top-right`,isDockedBottomLeft:`${ay}-bottom-left`,isDockedBottomCenter:`${ay}-bottom-center`,isDockedBottomRight:`${ay}-bottom-right`,alignTopCenter:`${Bt}--aligned-top-center`,alignBottomCenter:`${Bt}--aligned-bottom-center`,alignTopLeft:`${Bt}--aligned-top-left`,alignBottomLeft:`${Bt}--aligned-bottom-left`,alignTopRight:`${Bt}--aligned-top-right`,alignBottomRight:`${Bt}--aligned-bottom-right`,isFeatureMenuOpen:`${Bt}--feature-menu-open`,isActionsMenuOpen:`${Bt}--actions-menu-open`,hasFeatureUpdated:`${Bt}--feature-updated`,header:E_,headerButtons:`${E_}-buttons`,headerContainer:`${E_}-container`,headerContainerButton:`${E_}-container--button`,headerTitle:`${E_}-title`,content:`${Bt}__content`,contentHasFlows:"esri-content--has-flows",contentFlowItem:"esri-content__flow-item",footer:`${Bt}__footer`,footerHasPagination:`${Bt}__footer--has-pagination`,footerHasActions:`${Bt}__footer--has-actions`,footerHasActionsMenu:`${Bt}__footer--has-actions-menu`,button:`${Bt}__button`,buttonDisabled:`${Bt}__button--disabled`,buttonDock:`${Bt}__button--dock`,icon:`${Bt}__icon`,iconDock:`${Bt}__icon--dock-icon`,inlineActionsContainer:`${Bt}__inline-actions-container`,actionsMenuButton:`${Bt}__actions-menu-button`,actions:`${Bt}__actions`,action:`${Bt}__action`,actionImage:`${Bt}__action-image`,actionText:`${Bt}__action-text`,actionToggle:`${Bt}__action-toggle`,actionToggleOn:`${Bt}__action-toggle--on`,actionExit:`${Bt}__action--exit`,actionSelectFeature:`${Bt}__action--select-feature`,pointer:`${Bt}__pointer`,pointerDirection:`${Bt}__pointer-direction`,navigation:`${Bt}__navigation`,paginationPrevious:`${Bt}__pagination-previous`,paginationNext:`${Bt}__pagination-next`,paginationPreviousIconLTR:`${Bt}__pagination-previous-icon`,paginationPreviousIconRTL:`${Bt}__pagination-previous-icon--rtl`,paginationNextIconLTR:`${Bt}__pagination-next-icon`,paginationNextIconRTL:`${Bt}__pagination-next-icon--rtl`,featureMenu:`${Bt}__feature-menu`,featureMenuList:`${Bt}__feature-menu-list`,featureMenuItem:`${Bt}__feature-menu-item`,featureMenuViewport:`${Bt}__feature-menu-viewport`,featureMenuHeader:`${Bt}__feature-menu-header`,featureMenuNote:`${Bt}__feature-menu-note`,featureMenuSelected:`${Bt}__feature-menu-item--selected`,featureMenuButton:`${Bt}__feature-menu-button`,featureMenuTitle:`${Bt}__feature-menu-title`,featureMenuObserver:`${Bt}__feature-menu-observer`,featureMenuLoader:`${Bt}__feature-menu-loader`,collapseButton:`${Bt}__collapse-button`,collapseIcon:`${Bt}__collapse-icon`},VPe="OBJECTID";var C0;(function(e){e[e.size=22]="size",e[e.lineWidth=50]="lineWidth",e[e.maxSize=120]="maxSize",e[e.maxOutlineSize=80]="maxOutlineSize",e[e.tallSymbolWidth=20]="tallSymbolWidth"})(C0||(C0={}));function goe(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function BPe(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function zPe(e,t,i,r,n,s){const o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=i,o[3]=r,o[4]=n,o[5]=s,o}function GPe(e,t){return new Float32Array(e,t,6)}function voe(e,t,i,r){const n=t[r],s=t[r+1];e[r]=i[0]*n+i[2]*s+i[4],e[r+1]=i[1]*n+i[3]*s+i[5]}function qPe(e,t,i,r=0,n=0,s=2){const o=n||t.length/s;for(let a=r;a<o;a++)voe(e,t,i,a*s)}Object.freeze(Object.defineProperty({__proto__:null,clone:BPe,create:goe,createView:GPe,fromValues:zPe,transform:voe,transformMany:qPe},Symbol.toStringTag,{value:"Module"}));function HPe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function WPe(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function JPe(e,t,i,r,n,s,o){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e[4]=s,e[5]=o,e}function A9(e,t){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5];let l=i*s-r*n;return l?(l=1/l,e[0]=s*l,e[1]=-r*l,e[2]=-n*l,e[3]=i*l,e[4]=(n*a-s*o)*l,e[5]=(r*o-i*a)*l,e):null}function ZPe(e){return e[0]*e[3]-e[1]*e[2]}function boe(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=i[0],c=i[1],d=i[2],f=i[3],m=i[4],g=i[5];return e[0]=r*u+s*c,e[1]=n*u+o*c,e[2]=r*d+s*f,e[3]=n*d+o*f,e[4]=r*m+s*g+a,e[5]=n*m+o*g+l,e}function z4(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=Math.sin(i),c=Math.cos(i);return e[0]=r*c+s*u,e[1]=n*c+o*u,e[2]=r*-u+s*c,e[3]=n*-u+o*c,e[4]=a,e[5]=l,e}function C9(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=i[0],c=i[1];return e[0]=r*u,e[1]=n*u,e[2]=s*c,e[3]=o*c,e[4]=a,e[5]=l,e}function gS(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=i[0],c=i[1];return e[0]=r,e[1]=n,e[2]=s,e[3]=o,e[4]=r*u+s*c+a,e[5]=n*u+o*c+l,e}function woe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=-i,e[3]=r,e[4]=0,e[5]=0,e}function _oe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function $9(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function YPe(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function KPe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function QPe(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e}function xoe(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e}function XPe(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e}function e8e(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e}function t8e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function i8e(e,t){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=t[0],u=t[1],c=t[2],d=t[3],f=t[4],m=t[5],g=bu();return Math.abs(i-l)<=g*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(r-u)<=g*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-c)<=g*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(s-d)<=g*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(o-f)<=g*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-m)<=g*Math.max(1,Math.abs(a),Math.abs(m))}const r8e=boe,n8e=xoe;Object.freeze(Object.defineProperty({__proto__:null,add:QPe,copy:HPe,determinant:ZPe,equals:i8e,exactEquals:t8e,frob:KPe,fromRotation:woe,fromScaling:_oe,fromTranslation:$9,identity:WPe,invert:A9,mul:r8e,multiply:boe,multiplyScalar:XPe,multiplyScalarAndAdd:e8e,rotate:z4,scale:C9,set:JPe,str:YPe,sub:n8e,subtract:xoe,translate:gS},Symbol.toStringTag,{value:"Module"}));const Mq=Ze("android");Ze("chrome")||Mq&&Mq>=4;a6();C0.size;C0.maxSize;C0.maxOutlineSize;C0.lineWidth;C0.tallSymbolWidth;function Soe(e){return e&&"opacity"in e?e.opacity*Soe(e.parent):1}async function s8e(e,t){if(!e)return;const i=e.sourceLayer,r=(ee(t)&&t.useSourceLayer?i:e.layer)??i,n=Soe(r);if(ee(e.symbol)&&(!ee(t)||t.ignoreGraphicSymbol!==!0)){const b=e.symbol.type==="web-style"?await dAe(e.symbol,{...t,cache:ee(t)?t.webStyleCache:null}):e.symbol.clone();return tO(b,null,n),b}const s=(ee(t)?t.renderer:null)??(r&&"renderer"in r?r.renderer:null);let o=s&&"getSymbolAsync"in s?await s.getSymbolAsync(e,t):null;if(!o)return;if(o=o.type==="web-style"?await o.fetchSymbol({...t,cache:ee(t)?t.webStyleCache:null}):o.clone(),!(s&&"visualVariables"in s&&s.visualVariables&&s.visualVariables.length))return tO(o,null,n),o;if("arcadeRequiredForVisualVariables"in s&&s.arcadeRequiredForVisualVariables&&(Re(t)||Re(t.arcade))){const b={...t};b.arcade=await Xd(),t=b}const a=await De(()=>Promise.resolve().then(()=>qF),void 0,import.meta.url),l=[],u=[],c=[],d=[];for(const b of s.visualVariables)switch(b.type){case"color":l.push(b);break;case"opacity":u.push(b);break;case"rotation":d.push(b);break;case"size":b.target||c.push(b)}const f=!!l.length&&l[l.length-1],m=f?a.getColor(f,e,t):null,g=!!u.length&&u[u.length-1];let v=g?a.getOpacity(g,e,t):null;if(n!=null&&(v=v!=null?v*n:n),tO(o,m,v),c.length){const b=a.getAllSizes(c,e,t);await bre(o,b)}for(const b of d)wre(o,a.getRotationAngle(b,e,t),b.axis);return o}let o8e=class{constructor(t,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in t){const n=t[r],s=new vY(n,void 0,void 0,2,2);this._properties[r]={pool:s,acquired:[]}}this._afterDispatchHandle=Wfe(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const t in this._properties){const i=this._properties[t];for(const r of i.acquired)uU(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(t){const i=this._owner._get(t),r=this._properties[t];let n=r.pool.acquire();for(r.acquired.push(n);n===i;)r.acquired.push(n),n=r.pool.acquire();return n}_release(){for(const t in this._properties){const i=this._properties[t];let r=0;for(const n of i.acquired)uU(n)?i.acquired[r++]=n:i.pool.release(n);i.acquired.length=r}}};const a8e=Ze("mac")?"Meta":"Ctrl",G4={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let e=48;e<58;e++)G4[e]=String.fromCharCode(e);for(let e=1;e<25;e++)G4[111+e]=`F${e}`;for(let e=65;e<91;e++)G4[e]=[String.fromCharCode(e+32),String.fromCharCode(e)];function l8e(e){if(e.key!==void 0)return hg(e);const t=G4[e.keyCode];return Array.isArray(t)?e.shiftKey?t[1]:t[0]:t}function u8e(e){switch(e){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}let c8e=class{constructor(t,i=[]){this.eventType=t,this.keyModifiers=i}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=t.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}};const Iq=et.getLogger("esri.views.input.InputHandler");let ys=class{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const i=this._incoming[t];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager?Iq.error("This InputHandler has already been registered with an InputManager"):(t.setEventCallback(i=>this._handleEvent(i)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,i,r){let n;typeof i=="function"?(r=i,n=[]):n=i||[];const s=typeof t=="string"?new c8e(t,n):t,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=c=>{const d=this._incoming[c.match.eventType];if(d){const f=d.indexOf(c);d.splice(f,1),o(),this._manager&&this._manager.updateDependencies()}},l=new h8e(s,r,{onPause:a,onRemove:a,onResume:c=>{const d=this._incoming[c.match.eventType];d&&!d.includes(c)&&(d.push(c),o(),this._manager&&this._manager.updateDependencies())}});let u=this._incoming[s.eventType];return u||(u=[],this._incoming[s.eventType]=u),u.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(t){if(this._outgoing[t])throw new Error("There is already a callback registered for this outgoing InputEvent: "+t);const i=new d8e(t,{onEmit:(r,n,s,o)=>{this._manager?.emit(r.eventType,n,s,o)},onRemove:r=>{delete this._outgoing[r.eventType],this._manager?.updateDependencies()}});return this._outgoing[t]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(t){this._manager?.setPointerCapture(t,!0)}stopCapturingPointer(t){this._manager?.setPointerCapture(t,!1)}refreshHasPendingInputs(){this._manager?.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):Iq.error("This InputHandler is not registered with an InputManager")}_handleEvent(t){const i=this._incoming[t.type];if(i){for(const r of i)if(r.match.matches(t)&&(r.callback?.(t),t.shouldStopPropagation()))break}}},h8e=class{constructor(t,i,r){this.match=t,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},d8e=class{constructor(t,i){this.eventType=t,this._removed=!1,this._handler=i}emit(t,i,r){this._removed||this._handler.onEmit(this,t,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},p8e=class extends ys{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>{this._update(i.data)})}_update(t){const i=t.native.pointerType==="touch"?"touch":"mouse",{x:r,y:n}=t;i===this._value&&this._x===r&&this._y===n||(this._value=i,this._x=r,this._y=n,this._onChange(i,r,n))}},YA=class{constructor(t){this._observable=new zN,this._value=t}get(){return ci(this._observable),this._value}set(t){t!==this._value&&(this._value=t,this._observable.notify())}},f8e=class extends ys{get multiTouchActive(){return this._multiTouchActive.get()}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=new YA(!1),this._onPointerAdd=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.add(t.native.pointerId),this._update())},this._onPointerRemove=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.delete(t.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.set(this._activeTouchPointerIds.size>1)}},Yc=class extends Lt{constructor(t){super(t),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=a8e,this._latestPointerType="mouse",this._propertiesPool=new o8e({latestPointerLocation:g8e},this),this.latestPointerLocation=null,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const t=Object.keys(this._nameToGroup);for(const i of t)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(t=>t.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}installHandlers(t,i,r=em.INTERNAL){if(this._nameToGroup[t])return void et.getLogger(this.declaredClass).error("There is already an InputHandler group registered under the name `"+t+"`");if(i.length===0)return void et.getLogger(this.declaredClass).error("Can't register a group of zero handlers");const n={name:t,handlers:i.map(s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[t]=n;for(let s=n.handlers.length-1;s>=0;s--){const o=n.handlers[s];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,l,u,c,d)=>{this._emitInputEvent(o.priorityIndex+1,a,l,u,d,c)},setPointerCapture:(a,l)=>{this._setPointerCapture(n,o,a,l)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(t){const i=this._nameToGroup[t];i?(i.handlers.forEach(r=>{r.removed=!0,r.uninstallCallback?.()}),delete this._nameToGroup[t],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):et.getLogger(this.declaredClass).error("There is no InputHandler group registered under the name `"+t+"`")}hasHandlers(t){return this._nameToGroup[t]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const t=new Set,i=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const n=this._handlers[r];n.priorityIndex=r,this._handlersPriority.push(n)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const n=this._handlersPriority[r];n.priorityIndex=r;let s=n.handler.hasSideEffects;if(!s){for(const o of n.handler.outgoingEventTypes)if(t.has(o)){s=!0;break}}if(s)for(const o of n.handler.incomingEventMatches){t.add(o.eventType);for(const a of o.keyModifiers)u8e(a)||i.add(a)}n.active=s}this._sourceEvents=t,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(t,i,r){this._latestPointerType=t;const n=this._get("latestPointerLocation");if(Re(n)||n.x!==i||n.y!==r){const s=this._propertiesPool.get("latestPointerLocation");s.x=i,s.y=r,this._set("latestPointerLocation",s)}}_onEventReceived(t,i){if(t==="pointer-capture-lost"){const s=i;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(t,i);const r=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,n=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(t,i,r,n)}_updateKeyModifiers(t,i){if(!i)return;let r=!1;const n=()=>{if(!r){const a=new Set;this._activeKeyModifiers.forEach(l=>{a.add(l)}),this._activeKeyModifiers=a,r=!0}},s=(a,l)=>{l&&!this._activeKeyModifiers.has(a)?(n(),this._activeKeyModifiers.add(a)):!l&&this._activeKeyModifiers.has(a)&&(n(),this._activeKeyModifiers.delete(a))};if(t==="key-down"||t==="key-up"){const a=i.key;this._keyModifiers.has(a)&&s(a,t==="key-down")}const o=i.native;s("Alt",!(!o||!o.altKey)),s("Ctrl",!(!o||!o.ctrlKey)),s("Shift",!(!o||!o.shiftKey)),s("Meta",!(!o||!o.metaKey)),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new p8e((t,i,r)=>this._setLatestPointer(t,i,r)),this._multiTouchHandler=new f8e,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],em.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,em.INTERNAL)}_setPointerCapture(t,i,r,n){const s=t.name+"-"+i.priorityIndex,o=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,o),n?(o.add(s),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):o.has(s)&&(o.delete(s),o.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(t=>!t.removed),this.updateDependencies()}_emitInputEventFromSource(t,i,r,n){this._emitInputEvent(0,t,i,r,n)}_emitInputEvent(t,i,r,n,s,o){const a=n!==void 0?n:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),l=s!==void 0&&s,u={event:new m8e(i,r,a,o||this._activeKeyModifiers,l),priorityIndex:t};this._currentPropagation?this._currentPropagation.events.push(u):this._doNewPropagation(u)}_doNewPropagation(t){this._currentPropagation={events:new yA,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:t.event.timestamp},this._currentPropagation.events.push(t),this._continuePropagation()}_continuePropagation(){const t=Uo(this._currentPropagation);for(;t.events.length>0;){const{event:i,priorityIndex:r}=t.events.pop(),n=i.data&&i.data.eventId;if(!(n!=null&&this._stoppedPropagationEventIds.has(n)))for(t.currentHandler=this._handlersPriority[r];t.currentHandler;){if(t.currentHandler.removed)t.needsHandlerGarbageCollect=!0;else{if(t.currentHandler.active&&!i.shouldStopPropagation()&&t.currentHandler.eventCallback?.(i),i.shouldStopPropagation()){n!=null&&this._stoppedPropagationEventIds.add(n);break}if(i.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:i,priorityIndex:t.currentHandler.priorityIndex+1})}t.currentHandler=this._handlersPriority[t.currentHandler.priorityIndex+1]}}t.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}_pausePropagation(t){const i=new yA;i.push(t);const r=this._currentPropagation;if(r){for(;r.events.length;)i.push(r.events.pop());r.events=i,r.currentHandler=null}}_compareHandlerPriority(t,i){if(t.handler.hasSideEffects!==i.handler.hasSideEffects)return t.handler.hasSideEffects?1:-1;if(t.groupPriority!==i.groupPriority)return t.groupPriority>i.groupPriority?-1:1;for(const r of t.handler.incomingEventMatches)for(const n of i.handler.incomingEventMatches){if(r.eventType!==n.eventType)continue;const s=r.keyModifiers.filter(o=>n.keyModifiers.includes(o));if(s.length===r.keyModifiers.length!=(s.length===n.keyModifiers.length))return r.keyModifiers.length>n.keyModifiers.length?-1:1}return t.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(t){const i=[];for(const r of t){let n=0;for(;n<i.length&&this._compareHandlerPriority(r,i[n])>=0;)n++;i.splice(n,0,r)}return i}get debug(){const t=i=>{const r=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=r};return{injectEvent:(i,r)=>{t(()=>{this._onEventReceived(i,r)})},disablePointerCapture:t}}};h([p({readOnly:!0})],Yc.prototype,"hasPendingInputs",null),h([p({constructOnly:!0})],Yc.prototype,"eventSource",void 0),h([p({constructOnly:!0})],Yc.prototype,"recognizers",void 0),h([p()],Yc.prototype,"_latestPointerType",void 0),h([p()],Yc.prototype,"latestPointerType",null),h([p()],Yc.prototype,"multiTouchActive",null),h([p({readOnly:!0})],Yc.prototype,"latestPointerLocation",void 0),Yc=h([ce("esri.views.input.InputManager")],Yc);let m8e=class{constructor(t,i,r,n,s){this.type=t,this.data=i,this.timestamp=r,this.modifiers=n,this.cancelable=s,this._propagationState=Of.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Of.STOPPED}shouldStopPropagation(){return(this._propagationState&Of.STOPPED)!=0}async(t){this._propagationState|=Of.PAUSED;const i=(r,n)=>{this._propagationState&=~Of.PAUSED;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),n)throw r;return r};return(typeof t=="function"?t():t).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(t){return!!(this._propagationState&Of.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}};var Of;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(Of||(Of={}));const em={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let y8e=class{};const g8e=y8e;function Tq(e){return e&&typeof e.highlight=="function"}const Eoe=e=>{let t=class extends e{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:r}=this;return Wf(r),this.goToOverride?this.goToOverride(r,i):r.goTo(i.target,i.options)}};return h([p()],t.prototype,"goToOverride",void 0),h([p()],t.prototype,"view",void 0),t=h([ce("esri.widgets.support.GoTo")],t),t},Ex=Pt.ofType({key:"type",defaultKeyValue:"button",base:r4,typeMap:{button:mw,toggle:oX}}),v8e=()=>[jg.clone()],b8e=()=>[Lv.clone(),Pv.clone()];let Ii=class extends Eoe(poe){get isLoadingFeature(){return this.featureViewModels.some(t=>t.waitingForContent)}constructor(t){super(t),this._handles=new So,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._highlightSelectedFeaturePromise=null,this._highlightActiveFeaturePromise=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new Ex,this.activeFeature=null,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new As({symbol:new fp({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}initialize(){this._handles.add([nt(()=>[this.autoOpenEnabled,this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),nt(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),nt(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),nt(()=>this.view?.animation?.state,t=>this._animationStateChange(t)),nt(()=>this.location,t=>this._locationChange(t)),nt(()=>this.selectedFeature,t=>this._selectedFeatureChange(t)),nt(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),nt(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),nt(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",t=>LPe({event:t,view:this.view})),Tl(()=>!this.waitingForResult,()=>this._waitingForResultChange(),wl),nt(()=>[this.features,this.view?.map,this.view?.spatialReference],()=>this._updateFeatureVMs()),nt(()=>this.view?.scale,()=>this._viewScaleChange()),Tl(()=>!this.visible,()=>this.browseClusterEnabled=!1),nt(()=>this.browseClusterEnabled,t=>t?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const t=this._get("allActions")||new Ex;t.removeAll();const{actions:i,defaultActions:r,defaultPopupTemplateEnabled:n,includeDefaultActions:s,selectedFeature:o}=this,a=s?r.concat(i):i,l=o&&(typeof o.getEffectivePopupTemplate=="function"&&o.getEffectivePopupTemplate(n)||o.popupTemplate),u=l&&l.actions,c=l&&l.overwriteActions?u:u?u.concat(a):a;return c&&c.filter(Boolean).forEach(d=>t.add(d)),t}get defaultActions(){const t=this._get("defaultActions")||new Ex;return t.removeAll(),t.addMany(bg(this.selectedFeature)?b8e():v8e()),t}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(t){const i=t||[];this._set("features",i);const{pendingPromisesCount:r,promiseCount:n,selectedFeatureIndex:s}=this,o=n&&i.length;o&&r&&s===-1?this.selectedFeatureIndex=0:o&&s!==-1||(this.selectedFeatureIndex=i.length?0:-1)}get location(){return this._get("location")||null}set location(t){let i=t;const r=this.view?.spatialReference?.isWebMercator;t&&t?.spatialReference?.isWGS84&&r&&(i=Zf(t)),this._set("location",i)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(t){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(t)||!t.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",t),(t=t.slice(0)).forEach(i=>{this._pendingPromises.add(i);const r=s=>{this._pendingPromises.has(i)&&this._updateFeatures(s),this._updatePendingPromises(i)},n=()=>this._updatePendingPromises(i);i.then(r,n)}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:t,selectedFeatureIndex:i}=this;return i===-1?null:t[i]||null}get selectedFeatureIndex(){const t=this._get("selectedFeatureIndex");return typeof t=="number"?t:-1}set selectedFeatureIndex(t){const{featureCount:i}=this;t=isNaN(t)||t<-1||!i?-1:(t+i)%i,this.activeFeature=null,this._set("selectedFeatureIndex",t)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:t}=this,i=moe(this);return i&&t?this.callGoTo({target:{target:i,scale:t.scale}}):Promise.reject(new Ce("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:i,view:t}))}zoomTo(t){return this.callGoTo(t)}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(t,i){const{view:r}=this;if(!r||!t)throw new Ce("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:t,view:r});return r.fetchPopupFeatures(t,{event:i&&i.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:i&&i.signal})}open(t){const i={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...t,visible:!0},{fetchFeatures:r}=i;delete i.fetchFeatures,r&&this._setFetchFeaturesPromises(i.location);const n=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const s of n)delete i[s];this.set(i)}triggerAction(t){const i=this.allActions.getItemAt(t);i&&!i.disabled&&this.emit("trigger-action",{action:i})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){UPe(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:t,selectedFeature:i}=this;t?.type==="2d"?bg(i)?(await DPe(this),await jPe(this)):et.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",i):et.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",i)}_animationStateChange(t){this.zoomToLocation||(jg.disabled=t==="waiting-for-target")}_clearBrowsedClusterGraphics(){const t=this.view?.graphics;t&&(t.remove(this.selectedClusterBoundaryFeature),this._selectedClusterFeature&&t.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(bg(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=this.selectedFeature?[this.selectedFeature]:[])}_locationChange(t){const{selectedFeature:i,updateLocationEnabled:r}=this;r&&t&&(!i||i.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:t,featureCount:i,featurePage:r,featuresPerPage:n,featureViewModels:s}=this;if(r===null)return;const o=((r-1)*n+i)%i,a=o+n;s.slice(o,a).forEach((l,u)=>{l&&!l.graphic&&(l.graphic=t[o+u])})}async _selectedFeatureChange(t){const{location:i,updateLocationEnabled:r,view:n}=this;if(t&&n){if(this.browseClusterEnabled)return this._selectedClusterFeature&&(n.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),bg(t)?void 0:(t.symbol=await s8e(t),this._selectedClusterFeature=t,void n.graphics.add(this._selectedClusterFeature));!r&&i||!t.geometry?r&&!t.geometry&&this.centerAtLocation().then(()=>{const s=n.center?.clone();s&&(this.location=s)}):this.location=yoe(t.geometry)}}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(t){return this._fetchFeaturesWithController(this._getScreenPoint(t||this.location)).then(i=>{const{clientOnlyGraphics:r,promisesPerLayerView:n}=i,s=Promise.resolve(r),o=n.map(a=>a.promise);this.promises=[s,...o]})}_destroyFeatureVMs(){this.featureViewModels.forEach(t=>t&&!t.destroyed&&t.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:t,features:i,featureViewModels:r}=this;if(bg(t)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!i||!i.length)return;const n=r.slice(0),s=[];i.forEach((o,a)=>{if(!o)return;let l=null;if(n.some((u,c)=>(u&&u.graphic===o&&(l=u,n.splice(c,1)),!!l)),l)s[a]=l;else{const u=new I9({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:this.view?.spatialReference,graphic:o===t?o:null,map:this.view?.map,view:this.view});s[a]=u}}),n.forEach(o=>o&&!o.destroyed&&o.destroy()),this._set("featureViewModels",s)}_getScreenPoint(t){const{view:i}=this;return i&&t&&typeof i.toScreen=="function"?i.toScreen(t):null}_autoOpenEnabledChange(){const t="auto-fetch-features",{_handles:i,autoOpenEnabled:r}=this;if(i.remove(t),r&&this.view){const n=this.view.on("click",s=>{s.pointerType==="mouse"&&s.button!==0||this._fetchFeaturesAndOpen(s)},em.WIDGET);i.add(n,t)}}_cancelFetchingFeatures(){const t=this._fetchFeaturesController;t&&t.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(t,i){this._cancelFetchingFeatures();const r=new AbortController,{signal:n}=r;this._fetchFeaturesController=r,this.notifyChange("waitingForResult");const s=this.fetchFeatures(t,{signal:n,event:i});return s.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),s}_fetchFeaturesAndOpen(t){const{screenPoint:i,mapPoint:r}=t,{view:n}=this;this._fetchFeaturesWithController(i,t).then(s=>{const{clientOnlyGraphics:o,promisesPerLayerView:a,location:l}=s,u=[Promise.resolve(o),...a.map(c=>c.promise)];return n?.popup?.open({location:l||r,promises:u}),s})}_updatePendingPromises(t){t&&this._pendingPromises.has(t)&&(this._pendingPromises.delete(t),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}async _getLayerView(t,i){return await t.when(),t.whenLayerView(i)}_getHighlightLayer(t){const{layer:i,sourceLayer:r}=t;return r&&"layer"in r&&r.layer?r.layer:r?.type==="map-notes"||r?.type==="subtype-group"?r:i}_getHighlightTarget(t,i){const r=i.type==="imagery"?void 0:"objectIdField"in i?i.objectIdField||VPe:null,n=t.attributes;return n&&r&&n[r]||t}async _highlightActiveFeature(){const t="highlight-active-feature";this._handles.remove(t);const{highlightEnabled:i,view:r,activeFeature:n,visible:s}=this;if(!(n&&r&&i&&s))return;const o=this._getHighlightLayer(n);if(!(o&&o instanceof Rh))return;const a=this._getLayerView(r,o);this._highlightActiveFeaturePromise=a;const l=await a;if(!(l&&Tq(l)&&this._highlightActiveFeaturePromise===a&&this.activeFeature&&this.highlightEnabled))return;const u=l.highlight(this._getHighlightTarget(n,o));this._handles.add(u,t)}async _highlightSelectedFeature(){const t="highlight-selected-feature";this._handles.remove(t);const{selectedFeature:i,highlightEnabled:r,view:n,visible:s}=this;if(!(i&&n&&r&&s))return;const o=this._getHighlightLayer(i);if(!(o&&o instanceof Rh))return;const a=this._getLayerView(n,o);this._highlightSelectedFeaturePromise=a;const l=await a;if(!(l&&Tq(l)&&this._highlightSelectedFeaturePromise===a&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const u=l.highlight(this._getHighlightTarget(i,o));this._handles.add(u,t)}_updateFeatures(t){const{features:i}=this;if(!t||!t.length)return;if(!i.length)return void(this.features=t);const r=t.filter(n=>!i.includes(n));this.features=i.concat(r)}};h([p()],Ii.prototype,"featurePage",void 0),h([p()],Ii.prototype,"isLoadingFeature",null),h([p({type:Ex})],Ii.prototype,"actions",void 0),h([p({readOnly:!0})],Ii.prototype,"active",null),h([p()],Ii.prototype,"activeFeature",void 0),h([p({readOnly:!0})],Ii.prototype,"allActions",null),h([p({type:Boolean})],Ii.prototype,"defaultPopupTemplateEnabled",void 0),h([p()],Ii.prototype,"autoCloseEnabled",void 0),h([p()],Ii.prototype,"autoOpenEnabled",void 0),h([p()],Ii.prototype,"browseClusterEnabled",void 0),h([p()],Ii.prototype,"content",void 0),h([p({type:Ex,readOnly:!0})],Ii.prototype,"defaultActions",null),h([p({readOnly:!0})],Ii.prototype,"featureCount",null),h([p()],Ii.prototype,"features",null),h([p()],Ii.prototype,"featuresPerPage",void 0),h([p()],Ii.prototype,"featureViewModelAbilities",void 0),h([p({readOnly:!0})],Ii.prototype,"featureViewModels",void 0),h([p()],Ii.prototype,"highlightEnabled",void 0),h([p()],Ii.prototype,"includeDefaultActions",void 0),h([p({type:At})],Ii.prototype,"location",null),h([p({readOnly:!0})],Ii.prototype,"pendingPromisesCount",null),h([p({readOnly:!0})],Ii.prototype,"selectedClusterBoundaryFeature",void 0),h([p({readOnly:!0})],Ii.prototype,"waitingForResult",null),h([p({readOnly:!0})],Ii.prototype,"promiseCount",null),h([p()],Ii.prototype,"promises",null),h([p({value:null,readOnly:!0})],Ii.prototype,"selectedFeature",null),h([p({value:-1})],Ii.prototype,"selectedFeatureIndex",null),h([p({readOnly:!0})],Ii.prototype,"selectedFeatureViewModel",null),h([p({readOnly:!0})],Ii.prototype,"state",null),h([p()],Ii.prototype,"title",void 0),h([p()],Ii.prototype,"updateLocationEnabled",void 0),h([p()],Ii.prototype,"view",void 0),h([p()],Ii.prototype,"visible",void 0),h([p()],Ii.prototype,"zoomFactor",void 0),h([p()],Ii.prototype,"zoomToLocation",void 0),h([p()],Ii.prototype,"centerAtLocation",null),Ii=h([ce("esri.widgets.Popup.PopupViewModel")],Ii);const Moe=Ii,Aq="selected-index",w8e=0,Cq="popup-spinner",$q={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},Oq="esri-popup";function Zh(e,t){return t===void 0?`${Oq}__${e}`:`${Oq}__${e}-${t}`}const Rq={closeButton:!0,featureNavigation:!0};let Vt=class extends hoe($s){constructor(t,i){super(t,i),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new So,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverNode=null,this._featureMenuViewportNode=null,this._rootFlowItemNode=null,this._featureMenuIntersectionObserverCallback=([r])=>{r?.isIntersecting&&this.viewModel.featurePage!=null&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=ob(()=>this._displaySpinner(),w8e),this._exitRelatedRecordsActions=new WeakMap,this._featureSelectionActions=new WeakMap,this._flowItems=new Pt,this.alignment="auto",this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureMenuOpen=!1,this.headingLevel=2,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.spinnerEnabled=!0,this.viewModel=new Moe,this.visibleElements={...Rq},this._handleOpenRelatedFeature=r=>{this._openRelatedFeature(r)},this._addSelectedFeatureIndexHandle(),this.addHandles([nt(()=>this.viewModel?.screenLocation,()=>this._positionContainer()),nt(()=>[this.viewModel?.active,this.dockEnabled],()=>this._toggleScreenLocationEnabled()),nt(()=>this.viewModel?.screenLocation,(r,n)=>{!!r!=!!n&&this.reposition()}),nt(()=>[this.viewModel?.view?.padding,this.viewModel?.view?.size,this.viewModel?.active,this.viewModel?.location,this.alignment],()=>this.reposition()),nt(()=>this.spinnerEnabled,r=>this._spinnerEnabledChange(r)),nt(()=>this.viewModel?.view?.size,(r,n)=>this._updateDockEnabledForViewSize(r,n)),nt(()=>this.viewModel?.view,(r,n)=>this._viewChange(r,n)),nt(()=>this.viewModel?.view?.ready,(r,n)=>this._viewReadyChange(r??!1,n??!1)),nt(()=>[this.viewModel?.waitingForResult,this.viewModel?.location],()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),nt(()=>this.selectedFeatureWidget,()=>this._destroyFlowItemWidgets()),nt(()=>[this.selectedFeatureWidget?.viewModel?.title,this.selectedFeatureWidget?.viewModel?.state],()=>this._setTitleFromFeatureWidget()),nt(()=>[this.selectedFeatureWidget?.viewModel?.content,this.selectedFeatureWidget?.viewModel?.state],()=>this._setContentFromFeatureWidget()),Tl(()=>!this.collapsed,()=>{this.viewModel?.view?.widthBreakpoint==="xsmall"&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),ms(()=>this.viewModel?.allActions,"change",()=>this._watchActions()),nt(()=>this.viewModel?.allActions,()=>this._watchActions(),Pi),nt(()=>this.viewModel?.featureViewModels,()=>this._featureMenuViewportScrollTop()),ms(()=>this._flowItems,"change",()=>{this.notifyChange("_activeFlowItemWidget"),this.scheduleRender()}),nt(()=>[this._activeFlowItemWidget?.viewModel?.state,this._activeFlowItemWidget?.viewModel?.title],()=>this.scheduleRender())])}loadDependencies(){return Promise.all([De(()=>import("./calcite-flow-d33a8b5c.js"),["./calcite-flow-d33a8b5c.js","./observers-7f8bc640.js","./preload-helper-388ac9d5.js"],import.meta.url),De(()=>import("./calcite-flow-item-c32ba464.js"),["./calcite-flow-item-c32ba464.js","./interactive-573cbe88.js","./loadable-25ad9e4e.js","./t9n-a01f9aaf.js","./observers-7f8bc640.js","./guid-9426053f.js","./action-985d3bd6.js","./icon-a3053e34.js","./loader-a91b0f8f.js","./tooltip-f5a51971.js","./preload-helper-388ac9d5.js","./debounce-31e0cfcc.js","./scrim-15f97f5a.js"],import.meta.url),De(()=>import("./calcite-action-010692d8.js"),["./calcite-action-010692d8.js","./action-985d3bd6.js","./guid-9426053f.js","./interactive-573cbe88.js","./loadable-25ad9e4e.js","./t9n-a01f9aaf.js","./observers-7f8bc640.js","./icon-a3053e34.js","./loader-a91b0f8f.js","./preload-helper-388ac9d5.js"],import.meta.url),De(()=>import("./calcite-tooltip-846bbb72.js"),["./calcite-tooltip-846bbb72.js","./tooltip-f5a51971.js","./preload-helper-388ac9d5.js","./debounce-31e0cfcc.js","./guid-9426053f.js"],import.meta.url),De(()=>import("./calcite-icon-0e32a153.js"),["./calcite-icon-0e32a153.js","./icon-a3053e34.js","./observers-7f8bc640.js","./preload-helper-388ac9d5.js"],import.meta.url)])}destroy(){this._destroyFlowItemWidgets(),this._destroySelectedFeatureWidget(),this._destroySpinner(),this._handles?.destroy(),this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver?.disconnect()}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){const{selectedFeatureWidget:t,viewModel:i}=this;if(!t)return!!i?.content;const r=t.viewModel;if(r?.waitingForContent||r?.state==="error")return!0;const n=r?.content;return Array.isArray(n)?!!n.length:!!n}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation!=null}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}get _activeFlowItemWidget(){const{_flowItems:t}=this;return t.getItemAt(t.length-1)||null}get actions(){return this.viewModel.actions}set actions(t){this.viewModel.actions=t}set actionsMenuOpen(t){this._set("actionsMenuOpen",!!t)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get autoCloseEnabled(){return this.viewModel.autoCloseEnabled}set autoCloseEnabled(t){this.viewModel.autoCloseEnabled=t}get autoOpenEnabled(){return this.viewModel.autoOpenEnabled}set autoOpenEnabled(t){this.viewModel.autoOpenEnabled=t}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(t){this.viewModel.defaultPopupTemplateEnabled=t}get content(){return this.viewModel.content}set content(t){this.viewModel.content=t}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||$q}set dockOptions(t){const i={...$q},r=this.viewModel?.view?.breakpoints,n={};r&&(n.width=r.xsmall,n.height=r.xsmall);const s={...i,...t},o={...i.breakpoint,...n},{breakpoint:a}=s;typeof a=="object"?s.breakpoint={...o,...a}:a&&(s.breakpoint=o),this._set("dockOptions",s),this._setCurrentDockPosition(),this.reposition()}get featureCount(){return this.viewModel.featureCount}get features(){return this.viewModel.features}set features(t){this.viewModel.features=t}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get highlightEnabled(){return this.viewModel.highlightEnabled}set highlightEnabled(t){this.viewModel.highlightEnabled=t}get location(){return this.viewModel.location}set location(t){this.viewModel.location=t}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get promises(){return this.viewModel.promises}set promises(t){this.viewModel.promises=t}get selectedFeature(){return this.viewModel.selectedFeature}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(t){this.viewModel.selectedFeatureIndex=t}get selectedFeatureWidget(){const{_feature:t,visibleElements:i,headingLevel:r,_flowItems:n}=this,{selectedFeatureViewModel:s}=this.viewModel,o={...i,title:!1};return s?(t?(t.viewModel=s,t.visibleElements=o):this._feature=new $Pe({flowItems:n,headingLevel:r+1,viewModel:s,visibleElements:o}),this._feature):null}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(t){this.viewModel.updateLocationEnabled=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}get visible(){return this.viewModel.visible}set visible(t){this.viewModel.visible=t}castVisibleElements(t){return{...Rq,...t}}blur(){const{active:t}=this.viewModel;t||et.getLogger(this.declaredClass).warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){return this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(t,i){return this.viewModel.fetchFeatures(t,i)}focus(){const{active:t}=this.viewModel;t||et.getLogger(this.declaredClass).warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(t){this._handles.remove(Aq);const i=!!t&&!!t.featureMenuOpen,r=!!t&&!!t.actionsMenuOpen,n={collapsed:!!t&&!!t.collapsed,actionsMenuOpen:r,featureMenuOpen:i};this.viewModel?.view?.widthBreakpoint==="xsmall"&&(n.collapsed=!0),this.set(n),this.viewModel.open(t),this._shouldFocus(t),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(t){return this.viewModel.triggerAction(t)}render(){const{actionsMenuOpen:t,dockEnabled:i,featureMenuVisible:r,dividedActions:n,currentAlignment:s,currentDockPosition:o}=this,{active:a}=this.viewModel,{menuActions:l}=n,u=a&&l.length>1&&t,c=a&&i,d=a&&!i,f=this.selectedFeature?.layer?.title,m=this.selectedFeature?.layer?.id,g={[st.alignTopCenter]:s==="top-center",[st.alignBottomCenter]:s==="bottom-center",[st.alignTopLeft]:s==="top-left",[st.alignBottomLeft]:s==="bottom-left",[st.alignTopRight]:s==="top-right",[st.alignBottomRight]:s==="bottom-right",[st.isDocked]:c,[st.shadow]:d,[st.isDockedTopLeft]:o==="top-left",[st.isDockedTopCenter]:o==="top-center",[st.isDockedTopRight]:o==="top-right",[st.isDockedBottomLeft]:o==="bottom-left",[st.isDockedBottomCenter]:o==="bottom-center",[st.isDockedBottomRight]:o==="bottom-right",[st.isFeatureMenuOpen]:r,[st.isActionsMenuOpen]:u};return Ne("div",{class:this.classes(st.base,g),role:"presentation","data-layer-title":f,"data-layer-id":m,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},a?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return Ne("span",{"aria-hidden":"true",class:this.classes(st.icon,st.iconLoading,st.rotating)})}renderNavigationLoading(){const{messagesCommon:t}=this;return this.viewModel.pendingPromisesCount?Ne("div",{key:Zh("loading-container"),role:"presentation",class:st.loadingContainer,"aria-label":t.loading,title:t.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const t=mh(this.container),i={[st.iconRightTriangleArrow]:t,[st.paginationPreviousIconRTL]:t,[st.iconLeftTriangleArrow]:!t,[st.paginationPreviousIconLTR]:!t};return Ne("span",{"aria-hidden":"true",class:this.classes(st.icon,i)})}renderPreviousButton(){const{messages:t}=this;return Ne("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(st.button,st.paginationPrevious),"aria-label":t.previous,title:t.previous},this.renderPreviousIcon())}renderNextIcon(){const t=mh(this.container),i={[st.iconLeftTriangleArrow]:t,[st.paginationNextIconRTL]:t,[st.iconRightTriangleArrow]:!t,[st.paginationNextIconLTR]:!t};return Ne("span",{"aria-hidden":"true",class:this.classes(st.icon,i)})}renderNextButton(){const{messages:t}=this;return Ne("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(st.button,st.paginationNext),"aria-label":t.next,title:t.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:t,featureMenuId:i,messagesCommon:r}=this,{featureCount:n,selectedFeatureIndex:s}=this.viewModel;return Ne("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(st.button,st.featureMenuButton),"aria-haspopup":"true","aria-controls":i,"aria-expanded":t.toString(),"aria-label":r.menu,title:r.menu},this._getPageText(n,s))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:[]}renderDockIcon(){const{dockEnabled:t}=this,i=this._wouldDockTo(),r={[st.iconUndock]:t,[st.iconDock]:!t,[st.iconDockToRight]:!t&&(i==="top-right"||i==="bottom-right"),[st.iconDockToLeft]:!t&&(i==="top-left"||i==="bottom-left"),[st.iconDockToTop]:!t&&i==="top-center",[st.iconDockToBottom]:!t&&i==="bottom-center"};return Ne("span",{"aria-hidden":"true",class:this.classes(r,st.icon)})}renderDockButton(){const{dockEnabled:t,messages:i}=this,r=this.viewModel?.view?.widthBreakpoint,n=t?i.undock:i.dock;return r!=="xsmall"&&this.dockOptions?.buttonEnabled?Ne("div",{role:"button","aria-label":n,title:n,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(st.button,st.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:t}=this.viewModel,{titleId:i,collapsible:r,contentCollapsed:n,messagesCommon:s}=this,o={[st.headerContainerButton]:r},a=Ne(j4,{level:this.headingLevel,class:st.headerTitle,innerHTML:t??""}),l=r?Ne("button",{key:`${t}--collapsible`,id:i,title:n?s.expand:s.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(st.headerContainer,o),"aria-expanded":n?"false":"true",onclick:this._toggleCollapsed,type:"button"},a,Ne("calcite-icon",{class:st.collapseIcon,key:"collapse-icon",icon:n?"chevron-down":"chevron-up",scale:"m"})):Ne("div",{key:t??"title",id:i,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(st.headerContainer,o)},a);return t?l:null}renderCloseIcon(){return Ne("span",{"aria-hidden":"true",class:this.classes(st.icon,st.iconClose)})}renderCloseButton(){const{visibleElements:t,messagesCommon:i}=this;return t.closeButton?Ne("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:st.button,"aria-label":i.close,title:i.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return Ne("header",{class:st.header},this.renderTitle(),Ne("div",{class:st.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:t,hasContent:i,contentCollapsed:r,_flowItems:n}=this,{content:s}=this.viewModel,o=n.toArray(),a={[st.contentHasFlows]:!!o.length};return i&&!r?Ne("div",{key:s??"content",enterAnimation:this._createFeatureUpdatedAnimation(),id:t,class:this.classes(st.content,a)},Ne("calcite-flow",{bind:this},Ne("calcite-flow-item",{bind:this,"data-node-ref":"_rootFlowItemNode",afterCreate:NA,key:"root-flow-item",onCalciteFlowItemBack:this._handleBackClick},this.renderContent()),o.map(l=>this.renderFlowItem(l))),o.map(l=>this.renderFlowItemTooltips(l))):null}renderFlowItem(t){const{messages:i}=this,r=JA(),n="graphic"in t&&!t.isTable;return Ne("calcite-flow-item",{bind:this,class:this.classes({[st.calciteThemeDark]:!r,[st.calciteThemeLight]:r}),heading:t.title??"",description:this._getFlowItemDescription(t),onCalciteFlowItemBack:this._handleBackClick,key:`flow-item-${t.viewModel.uid}`},Ne("calcite-action",{class:st.actionExit,icon:"move-up",label:i?.exitRelatedRecords,text:i?.exitRelatedRecords,slot:"header-actions-start",bind:this,afterCreate:s=>this._storeExitRelatedRecordsAction(t,s),onclick:this._destroyFlowItemWidgets}),n?Ne("calcite-action",{class:st.actionSelectFeature,icon:"zoom-to-object",label:i?.selectFeature,text:i?.selectFeature,slot:"header-actions-end",bind:this,afterCreate:s=>this._storeFeatureSelectionAction(t,s),onclick:()=>this._handleOpenRelatedFeature(t)}):null,Ne("div",{class:this.classes(st.contentFlowItem,{[st.calciteThemeDark]:r,[st.calciteThemeLight]:!r})},t.render()))}renderFlowItemTooltips(t){const{messages:i,_exitRelatedRecordsActions:r,_featureSelectionActions:n}=this,s=JA(),o=n.get(t);return[Ne("calcite-tooltip",{class:this.classes({[st.calciteThemeDark]:!s,[st.calciteThemeLight]:s}),key:`exit-related-records-tooltip-${t.viewModel.uid}`,label:i?.exitRelatedRecords,overlayPositioning:"fixed",referenceElement:r.get(t),placement:"top"},i?.exitRelatedRecords),o?Ne("calcite-tooltip",{class:this.classes({[st.calciteThemeDark]:!s,[st.calciteThemeLight]:s}),key:`select-related-record-tooltip-${t.viewModel.uid}`,label:i?.selectFeature,overlayPositioning:"fixed",referenceElement:o,placement:"top"},i?.selectFeature):null]}renderActionsMenuButton(){const{actionsMenuId:t,actionsMenuButtonId:i,actionsMenuOpen:r,dividedActions:n,messagesCommon:s}=this,o=r?s.close:s.open,{menuActions:a}=n;return a.length?Ne("div",{key:Zh("actions-menu-button"),class:this.classes(st.button,st.actionsMenuButton),role:"button",id:i,"aria-haspopup":"true","aria-controls":r?t:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":o,title:o},Ne("span",{"aria-hidden":"true",class:st.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:t,actionsMenuButtonId:i,actionsMenuOpen:r,dividedActions:n}=this,{menuActions:s}=n;return s.length&&r?Ne("ul",{id:t,role:"menu","aria-labelledby":i,key:Zh("actions"),class:st.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},s.toArray().map(o=>this.renderAction({action:o,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:t}=this.dividedActions;return t.length?t.toArray().map(i=>this.renderAction({action:i,type:"inline"})):[]}renderInlineActionsContainer(){const{inlineActions:t,menuActions:i}=this.dividedActions,r=!!t.length,n=!!i.length;return r||n?Ne("div",{key:"inline-actions-container","data-inline-actions":r.toString(),"data-menu-actions":n.toString(),class:st.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?Ne("section",{key:Zh("navigation"),class:this.classes(st.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:t,dividedActions:i}=this,{inlineActions:r,menuActions:n}=i,s=!!r.length,o=!!n.length,a={[st.footerHasPagination]:t,[st.footerHasActions]:s,[st.footerHasActionsMenu]:o};return t||s?Ne("div",{key:Zh("feature-buttons"),class:this.classes(st.footer,a)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:t}=this,{featureViewModels:i,isLoadingFeature:r}=this.viewModel,n=nh(t.selectedFeatures,{total:i.length});return Ne("section",{key:Zh("menu"),class:st.featureMenu},Ne("strong",{class:st.featureMenuHeader},n),Ne("nav",{bind:this,class:st.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:NA},this.renderFeatureMenu(),Ne("div",{class:st.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),r?Ne("div",{class:st.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:Ne("div",{key:Zh("pointer"),class:st.pointer,role:"presentation"},Ne("div",{class:this.classes(st.pointerDirection,st.shadow)}))}renderMainContainer(){const{dockEnabled:t,currentAlignment:i,currentDockPosition:r,titleId:n,contentId:s,collapsible:o,hasContent:a,contentCollapsed:l,visibleElements:u}=this,{title:c}=this.viewModel,d=i==="bottom-left"||i==="bottom-center"||i==="bottom-right"||r==="top-left"||r==="top-center"||r==="top-right",f=i==="top-left"||i==="top-center"||i==="top-right"||r==="bottom-left"||r==="bottom-center"||r==="bottom-right",m={[st.shadow]:t,[st.isCollapsible]:o,[st.isCollapsed]:l};return Ne("div",{class:this.classes(st.main,st.widget,m),tabIndex:u.closeButton?void 0:-1,role:"dialog","aria-labelledby":c?n:"","aria-describedby":a&&!l?s:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},d?this.renderFooter():null,d?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),f?this.renderFooter():null,f?this.renderFeatureMenuContainer():null)}renderContent(){const t=this.viewModel?.content;return t?typeof t=="string"?Ne("div",{class:Br.contentNode,key:t,innerHTML:t}):this.renderNodeContent(t):null}renderActionText(t){return Ne("span",{key:"text",class:st.actionText},t)}renderActionIcon(t){const i=this._getActionClass(t),r=this._getActionImage(t),n={[st.iconLoading]:t.active,[st.rotating]:t.active,[st.icon]:!!i,[st.actionImage]:!t.active&&!!r};return i&&(n[i]=!t.active),Ne("span",{key:"icon","aria-hidden":"true",class:this.classes(st.icon,n),styles:this._getIconStyles(r)})}renderAction(t){const{action:i,type:r}=t,n=this._getActionTitle(i),s={[st.action]:i.type!=="toggle",[st.actionToggle]:i.type==="toggle",[st.actionToggleOn]:i.type==="toggle"&&i.value,[st.buttonDisabled]:i.disabled},o=[this.renderActionIcon(i),this.renderActionText(n)],a=r==="menu-item"?Ne("li",{key:i.uid,role:"menuitem",tabIndex:0,title:n,"aria-label":n,class:this.classes(st.button,s),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":i.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},o):Ne("div",{key:i.uid,role:"button",tabIndex:0,title:n,"aria-label":n,class:this.classes(st.button,s),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":i.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},o);return i.visible?a:null}renderFeatureMenuItem(t,i){const{messages:r,messagesCommon:n}=this,{selectedFeatureIndex:s,selectedFeatureViewModel:o}=this.viewModel,a=t===o,l={[st.featureMenuSelected]:a},u=a?Ne("span",{key:Zh(`feature-menu-selected-feature-${s}`),title:r.selectedFeature,"aria-label":r.selectedFeature,class:st.iconCheckMark}):null,c=Ne("span",{innerHTML:t.title||n.untitled});return Ne("li",{role:"menuitem",tabIndex:-1,key:Zh(`feature-menu-feature-${s}`),class:this.classes(l,st.featureMenuItem),bind:this,"data-feature-index":i,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},Ne("span",{class:st.featureMenuTitle},c,u))}renderFeatureMenu(){const{featureMenuId:t}=this,{featureViewModels:i}=this.viewModel;return i.length>1?Ne("ol",{class:st.featureMenuList,id:t,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},i.filter(r=>!!r.graphic).map((r,n)=>this.renderFeatureMenuItem(r,n))):null}_storeFeatureSelectionAction(t,i){this._featureSelectionActions.set(t,i),this.scheduleRender()}_storeExitRelatedRecordsAction(t,i){this._exitRelatedRecordsActions.set(t,i),this.scheduleRender()}_getFlowItemDescription(t){return"featureCountDescription"in t?t.featureCountDescription:t.viewModel.description??""}async _openRelatedFeature(t){await t.viewModel.updateGeometry();const i=t.graphic,r=i?.geometry;if(Re(r)||Re(i))return;this._destroyFlowItemWidgets(),await this.viewModel.zoomTo({target:r});const n=yoe(r);this.open({features:[i],location:ee(n)?n:void 0})}_destroyFlowItemWidgets(){this._flowItems.removeAll().forEach(t=>{"showAllEnabled"in t.viewModel&&(t.viewModel.showAllEnabled=!1),t.viewModel=null,t.destroy()})}_handleBackClick(){const t=this._flowItems.pop();t&&(this._exitRelatedRecordsActions.delete(t),this._featureSelectionActions.delete(t),"showAllEnabled"in t.viewModel&&(t.viewModel.showAllEnabled=!1),t&&(t.viewModel=null,t.destroy()))}_getActionTitle(t){const{messages:i,selectedFeature:r,messagesCommon:n}=this,{id:s}=t,o=r?.attributes,a=t.title??"",l=s==="zoom-to-feature"?nh(a,{messages:i}):s==="remove-selected-feature"?nh(a,{messages:n}):s==="zoom-to-clustered-features"||s==="browse-clustered-features"?nh(a,{messages:i}):t.title;return l&&o?nh(l,o):l??""}_getActionClass(t){const{selectedFeature:i}=this,r=i?.attributes,{className:n,image:s}=t,o=s||n?n:st.iconDefaultAction;return o&&r?nh(o,r):o??""}_getActionImage(t){const{selectedFeature:i}=this,r=i?.attributes,{image:n}=t;return n&&r?nh(n,r):n??""}_createFeatureUpdatedAnimation(){return JOe("enter",st.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:t,featureNavigationVisible:i}=this;if(typeof t!="number")return null;const r=Math.round(t);return Math.max(i?r-1:r,0)}_watchActions(){const{allActions:t}=this.viewModel;this.notifyChange("dividedActions");const i="actions";this._handles.remove(i),t&&t.forEach(r=>{this._handles.add(nt(()=>[r.uid,r.active,r.className,r.disabled,r.id,r.title,r.image,r.visible],()=>this.scheduleRender()),i)})}_divideActions(){const{allActions:t}=this.viewModel,i=t.filter(o=>o.visible),r=this._getInlineActionCount(),n=r===null,s=r===0;return{inlineActions:n?i.slice(0):s?new Pt:i.slice(0,r),menuActions:n?new Pt:s?i.slice(0):i.slice(r)}}_featureMenuOpenChanged(t){t?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(t){t?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){const{selectedFeatureWidget:t,messagesCommon:i}=this;t&&(this.viewModel.title=t.viewModel?.state==="error"?i.errorMessage:t.viewModel?.title||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:t}=this;t&&(this.viewModel.content=t)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(t){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(t),this._featureMenuIntersectionObserverNode=t}_handleFeatureMenuKeyup(t){hg(t)==="Escape"&&(t.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(t){hg(t)==="Escape"&&(t.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_setActiveFeature(t){const{viewModel:i}=this,r=t.currentTarget["data-feature-index"];i.activeFeature=i.features[r]||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_handleFeatureMenuItemKeyup(t){const i=hg(t),{_featureMenuNode:r}=this,n=t.currentTarget["data-feature-index"];if(!r)return;const s=r.querySelectorAll("li"),o=s.length;i!=="ArrowUp"?i!=="ArrowDown"?i!=="Home"?i!=="End"||(t.stopPropagation(),s[s.length-1].focus()):(t.stopPropagation(),s[0].focus()):(t.stopPropagation(),s[(n+1+o)%o].focus()):(t.stopPropagation(),s[(n-1+o)%o].focus())}_handleActionMenuItemKeyup(t){const i=hg(t),{_actionsMenuNode:r}=this,n=t.currentTarget.dataset.actionUid,{menuActions:s}=this.dividedActions,o=s.findIndex(u=>u.uid===n);if(!r)return;const a=r.querySelectorAll("li"),l=a.length;i!=="ArrowUp"?i!=="ArrowDown"?i!=="Home"?i!=="End"||(t.stopPropagation(),a[a.length-1].focus()):(t.stopPropagation(),a[0].focus()):(t.stopPropagation(),a[(o+1+l)%l].focus()):(t.stopPropagation(),a[(o-1+l)%l].focus())}_handleMainKeyup(t){const i=hg(t);i==="ArrowLeft"&&(t.stopPropagation(),this.previous()),i==="ArrowRight"&&(t.stopPropagation(),this.next())}_spinnerEnabledChange(t){if(this._destroySpinner(),!t)return;const i=this.get("viewModel.view");this._createSpinner(i)}_hideSpinner(){const{_spinner:t}=this;t&&(t.location=null,t.hide())}_displaySpinner(){const{_spinner:t}=this;if(!t)return;const{location:i,waitingForResult:r}=this.viewModel;r&&i?t.show({location:i}):t.hide()}_getIconStyles(t){return{"background-image":t?`url(${t})`:""}}async _shouldFocus(t){t?.shouldFocus&&(await m4(()=>this.viewModel?.active===!0),this.focus())}_addSelectedFeatureIndexHandle(){const t=nt(()=>this.viewModel?.selectedFeatureIndex,(i,r)=>this._selectedFeatureIndexUpdated(i,r));this._handles.add(t,Aq)}_selectedFeatureIndexUpdated(t,i){const{featureCount:r}=this;r&&t!==i&&t!==-1&&(this._destroyFlowItemWidgets(),this.actionsMenuOpen=!1,this.featureMenuOpen=!1,this._mainContainerNode&&(this._mainContainerNode.scrollTop=0),this._rootFlowItemNode&&this._rootFlowItemNode.scrollContentTo({top:0}))}_destroySelectedFeatureWidget(){const{_feature:t}=this;t&&(t.viewModel=null,t&&!t.destroyed&&t.destroy()),this._feature=null}_isScreenLocationWithinView(t,i){return t.x>-1&&t.y>-1&&t.x<=i.width&&t.y<=i.height}_isOutsideView(t){const{popupHeight:i,popupWidth:r,screenLocation:n,side:s,view:o}=t;if(isNaN(r)||isNaN(i)||!o||!n)return!1;const a=o.padding;return s==="right"&&n.x+r/2>o.width-a.right||s==="left"&&n.x-r/2<a.left||s==="top"&&n.y-i<a.top||s==="bottom"&&n.y+i>o.height-a.bottom}_calculateAutoAlignment(t){if(t!=="auto")return t;const{_pointerOffsetInPx:i,_containerNode:r,_mainContainerNode:n,viewModel:s}=this,{screenLocation:o,view:a}=s;if(Re(o)||!a||!r)return"top-center";if(!this._isScreenLocationWithinView(o,a))return this._get("currentAlignment")||"top-center";function l(_){return parseInt(_.replace(/[^-\d\.]/g,""),10)}const u=n?window.getComputedStyle(n,null):null,c=u?l(u.getPropertyValue("max-height")):0,d=u?l(u.getPropertyValue("height")):0,{height:f,width:m}=r.getBoundingClientRect(),g=m+i,v=Math.max(f,c,d)+i,b=this._isOutsideView({popupHeight:v,popupWidth:g,screenLocation:o,side:"right",view:a}),x=this._isOutsideView({popupHeight:v,popupWidth:g,screenLocation:o,side:"left",view:a}),S=this._isOutsideView({popupHeight:v,popupWidth:g,screenLocation:o,side:"top",view:a}),T=this._isOutsideView({popupHeight:v,popupWidth:g,screenLocation:o,side:"bottom",view:a});return x?S?"bottom-right":"top-right":b?S?"bottom-left":"top-left":S?T?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(t){return typeof t=="function"?t.call(this):t}_getCurrentAlignment(){const{alignment:t,dockEnabled:i}=this;return i||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(t)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(t){const i=["left","right"];return mh(this.container)&&i.reverse(),t.replace(/leading/gi,i[0]).replace(/trailing/gi,i[1])}_callDockPosition(t){return typeof t=="function"?t.call(this):t}_getDockPosition(){return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(this.dockOptions?.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(t){if(t!=="auto")return t;const i=this.viewModel?.view,r=mh(this.container)?"top-left":"top-right";if(!i)return r;const n=i.padding||{left:0,right:0,top:0,bottom:0},s=i.width-n.left-n.right,{breakpoints:o}=i;return o&&s<=o.xsmall?"bottom-center":r}_positionContainer(t=this._containerNode){if(t&&(this._containerNode=t),!this._containerNode)return;const{screenLocation:i}=this.viewModel,{width:r}=this._containerNode.getBoundingClientRect(),n=this._calculatePositionStyle(i,r);n&&Object.assign(this._containerNode.style,n)}_calculateFullWidth(t){const{currentAlignment:i,_pointerOffsetInPx:r}=this;return i==="top-left"||i==="bottom-left"||i==="top-right"||i==="bottom-right"?t+r:t}_calculateAlignmentPosition(t,i,r,n){const{currentAlignment:s,_pointerOffsetInPx:o}=this;if(!r)return;const{padding:a}=r,l=n/2,u=r.height-i,c=r.width-t;return s==="bottom-center"?{top:i+o-a.top,left:t-l-a.left}:s==="top-left"?{bottom:u+o-a.bottom,right:c+o-a.right}:s==="bottom-left"?{top:i+o-a.top,right:c+o-a.right}:s==="top-right"?{bottom:u+o-a.bottom,left:t+o-a.left}:s==="bottom-right"?{top:i+o-a.top,left:t+o-a.left}:s==="top-center"?{bottom:u+o-a.bottom,left:t-l-a.left}:void 0}_calculatePositionStyle(t,i){const{dockEnabled:r,view:n}=this;if(!n)return;if(r)return{left:"",top:"",right:"",bottom:""};if(Re(t)||!i)return;const s=this._calculateFullWidth(i),o=this._calculateAlignmentPosition(t.x,t.y,n,s);return o?{top:o.top!==void 0?`${o.top}px`:"auto",left:o.left!==void 0?`${o.left}px`:"auto",bottom:o.bottom!==void 0?`${o.bottom}px`:"auto",right:o.right!==void 0?`${o.right}px`:"auto"}:void 0}_viewChange(t,i){t&&i&&(this.close(),this.clear())}_viewReadyChange(t,i){if(t){const r=this.get("viewModel.view");this._wireUpView(r)}else i&&(this.close(),this.clear())}_wireUpView(t){if(this._destroySpinner(),!t)return;const{spinnerEnabled:i}=this;i&&this._createSpinner(t),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(t,i,r){const[n,s]=t,[o,a]=i,{width:l=0,height:u=0}=r??{};return n<=l&&o>l||n>l&&o<=l||s<=u&&a>u||s>u&&a<=u}_updateDockEnabledForViewSize(t,i){if(!t||!i)return;const r=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},n=r.left+r.right,s=r.top+r.bottom,o=[],a=[];o[0]=t[0]-n,o[1]=t[1]-s,a[0]=i[0]-n,a[1]=i[1]-s;const{dockOptions:l}=this,u=l.breakpoint;this._dockingThresholdCrossed(o,a,u)&&this._setDockEnabledForViewSize(l),this._setCurrentDockPosition()}_focusDockButtonNode(t){this._focusDockButton&&(this._focusDockButton=!1,t.focus())}_closeButtonNodeUpdated(t){return this._focusClose?(this._focusClose=!1,void t.focus()):this._blurClose?(this._blurClose=!1,void t.blur()):void 0}_mainContainerNodeUpdated(t){return this._mainContainerNode=t,this._focusContainer?(this._focusContainer=!1,void t.focus()):this._blurContainer?(this._blurContainer=!1,void t.blur()):void 0}_featureMenuNodeUpdated(t){if(this._featureMenuNode=t,!t||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const i=t.querySelectorAll("li");i.length&&i[0].focus()}_actionsMenuNodeUpdated(t){if(this._actionsMenuNode=t,!t||!this._focusFirstAction)return;this._focusFirstAction=!1;const i=t.querySelectorAll("li");i.length&&i[0].focus()}_focusFeatureMenuButtonNode(t){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,t.focus())}_focusActionsMenuButtonNode(t){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,t.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:t,viewModel:i}=this;if(!i)return;const r=i.active&&!t;i.screenLocationEnabled=r}_shouldDockAtCurrentViewSize(t){const i=t.breakpoint,r=this.viewModel?.view?.ui;if(!r)return!1;const{width:n,height:s}=r;if(isNaN(n)||isNaN(s)||!i)return!1;const o=i.hasOwnProperty("width")&&n<=(i.width??0),a=i.hasOwnProperty("height")&&s<=(i.height??0);return o||a}_setDockEnabledForViewSize(t){t.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(t))}_getPageText(t,i){return this.featureNavigationVisible?nh(this.messages.pageText,{index:i+1,total:t}):null}_destroySpinner(){const{_spinner:t,view:i}=this;t&&(i&&i.ui&&i.ui.remove(t,Cq),t.destroy(),this._spinner=null)}_createSpinner(t){t&&(this._spinner=new RPe({view:t}),t.ui.add(this._spinner,{key:Cq,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const t=!this.featureMenuOpen;this._featureMenuOpenChanged(t),this.actionsMenuOpen=!1,this.featureMenuOpen=t}_toggleActionsMenu(){const t=!this.actionsMenuOpen;this._actionsMenuOpenChanged(t),this.featureMenuOpen=!1,this.actionsMenuOpen=t}_triggerAction(t){const i=t.currentTarget.dataset.actionUid,{allActions:r}=this.viewModel,n=r.findIndex(o=>o.uid===i),s=r.getItemAt(n);s&&s.type==="toggle"&&(s.value=!s.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(n)}_selectFeature(t){const i=t.currentTarget["data-feature-index"];isNaN(i)||(this.viewModel.selectedFeatureIndex=i),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};h([p({readOnly:!0})],Vt.prototype,"actionsMenuId",null),h([p({readOnly:!0})],Vt.prototype,"actionsMenuButtonId",null),h([p({readOnly:!0})],Vt.prototype,"featureMenuId",null),h([p({readOnly:!0})],Vt.prototype,"titleId",null),h([p({readOnly:!0})],Vt.prototype,"contentId",null),h([p({readOnly:!0})],Vt.prototype,"hasContent",null),h([p({readOnly:!0})],Vt.prototype,"featureNavigationVisible",null),h([p({readOnly:!0})],Vt.prototype,"collapsible",null),h([p({readOnly:!0})],Vt.prototype,"featureMenuVisible",null),h([p({readOnly:!0})],Vt.prototype,"contentCollapsed",null),h([p({readOnly:!0})],Vt.prototype,"dividedActions",null),h([p({readOnly:!0,dependsOn:["_flowItems.length"]})],Vt.prototype,"_activeFlowItemWidget",null),h([p()],Vt.prototype,"actions",null),h([p()],Vt.prototype,"actionsMenuOpen",null),h([p()],Vt.prototype,"alignment",void 0),h([p()],Vt.prototype,"autoCloseEnabled",null),h([p()],Vt.prototype,"autoOpenEnabled",null),h([p()],Vt.prototype,"defaultPopupTemplateEnabled",null),h([p()],Vt.prototype,"content",null),h([p()],Vt.prototype,"collapsed",void 0),h([p()],Vt.prototype,"collapseEnabled",void 0),h([p({readOnly:!0})],Vt.prototype,"currentAlignment",null),h([p({readOnly:!0})],Vt.prototype,"currentDockPosition",null),h([p()],Vt.prototype,"dockOptions",null),h([p()],Vt.prototype,"dockEnabled",void 0),h([p({readOnly:!0})],Vt.prototype,"featureCount",null),h([p()],Vt.prototype,"featureMenuOpen",void 0),h([p()],Vt.prototype,"features",null),h([p()],Vt.prototype,"goToOverride",null),h([p()],Vt.prototype,"headingLevel",void 0),h([p()],Vt.prototype,"highlightEnabled",null),h([p()],Vt.prototype,"location",null),h([p()],Vt.prototype,"label",null),h([p()],Vt.prototype,"maxInlineActions",void 0),h([p(),Is("esri/widgets/Popup/t9n/Popup")],Vt.prototype,"messages",void 0),h([p(),Is("esri/t9n/common")],Vt.prototype,"messagesCommon",void 0),h([p()],Vt.prototype,"promises",null),h([p({readOnly:!0})],Vt.prototype,"selectedFeature",null),h([p()],Vt.prototype,"selectedFeatureIndex",null),h([p({readOnly:!0})],Vt.prototype,"selectedFeatureWidget",null),h([p()],Vt.prototype,"spinnerEnabled",void 0),h([p()],Vt.prototype,"title",null),h([p()],Vt.prototype,"updateLocationEnabled",null),h([p()],Vt.prototype,"view",null),h([p({type:Moe}),ALe(["triggerAction","trigger-action"])],Vt.prototype,"viewModel",void 0),h([p()],Vt.prototype,"visible",null),h([p()],Vt.prototype,"visibleElements",void 0),h([di("visibleElements")],Vt.prototype,"castVisibleElements",null),h([rl()],Vt.prototype,"_close",null),h([rl()],Vt.prototype,"_toggleDockEnabled",null),h([rl()],Vt.prototype,"_toggleFeatureMenu",null),h([rl()],Vt.prototype,"_toggleActionsMenu",null),h([rl()],Vt.prototype,"_triggerAction",null),h([rl()],Vt.prototype,"_selectFeature",null),h([rl()],Vt.prototype,"_next",null),h([rl()],Vt.prototype,"_previous",null),Vt=h([ce("esri.widgets.Popup")],Vt);const kq=Vt,FO=[0,0];function _8e(e){const t=(e.ownerDocument||window.document).defaultView,i=e.getBoundingClientRect();return FO[0]=i.left+(t?.pageXOffset??0),FO[1]=i.top+(t?.pageYOffset??0),FO}function Lq(e){e&&(zne(e),e.parentNode&&e.parentNode.removeChild(e))}function x8e(e){const t=document.createElement("div");return e.appendChild(t),t}const M_=16,dM=750,S8e=512,E8e=2,M8e=e=>{let t=class extends e{constructor(...i){super(...i),this._freqInfo={freq:M_,time:dM},this._overlayRenderTaskHandle=null,this.height=0,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,i.length!==0&&i[0]?.popup!==void 0||(this.popup=new kq({view:this})),this.handles.add([nt(()=>this.cursor,r=>{const{surface:n}=this;n&&n.setAttribute("data-cursor",r)}),nt(()=>this.interacting,r=>{const{surface:n}=this;n&&n.setAttribute("data-interacting",r.toString())})])}initialize(){this.handles.add(nt(()=>this.ui,(i,r)=>this._handleUIChange(i,r))),this._wireUI(this.ui),this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=qr(this.ui),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(i){const r=this._get("container"),n=u9(i);if(n||typeof i!="string"||et.getLogger(this.declaredClass).error("#container",`element with id '${i}' not found`),r===n)return;const s="dom-size";if(this.handles.remove(s),this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(Lq(this.root),this._set("root",null)),this.userContent&&(AG(this.userContent,r),Lq(this.userContent),this._set("userContent",null))),!n)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);n.classList.add("esri-view");const o=document.createElement("div");o.className="esri-view-user-storage",AG(n,o),n.appendChild(o),this._set("userContent",o);const a=document.createElement("div");a.className="esri-view-root",n.insertBefore(a,n.firstChild),this._set("root",a);const l=document.createElement("div");l.className="esri-view-surface",l.setAttribute("role","application"),l.tabIndex=0,a.appendChild(l),this._set("surface",l);const u=new DG;a.appendChild(u.surface),this._set("overlay",u),nt(()=>u.needsRender,c=>{c&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=bb({render:()=>this.overlay?.render()}):this._overlayRenderTaskHandle=yn(this._overlayRenderTaskHandle)}),this.forceDOMReadyCycle(),this.handles.add(nt(()=>this.size,c=>{const[d,f]=c,m="esri-view-surface--inset-outline";d>=document.body.clientWidth||f>=document.body.clientHeight?l.classList.add(m):l.classList.remove(m)},Pi),s),this._set("container",n),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}set popup(i){const r=this._get("popup");r&&r!==i&&r.destroy(),this._set("popup",i)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(i,r,n){const s=this.position;return i-=s?s[0]:0,r-=s?s[1]:0,n?(n[0]=i,n[1]=r):n=[i,r],n}containerToPage(i,r,n){const s=this.position;return i+=s?s[0]:0,r+=s?s[1]:0,n?(n[0]=i,n[1]=r):n=[i,r],n}_handleUIChange(i,r){r&&(this.handles.remove("ui"),r.destroy()),i&&this._wireUI(i),this._set("ui",i)}_wireUI(i){this.handles.remove("ui"),i&&(i.view=this,this.handles.add([nt(()=>this.root,r=>{i.container=r?x8e(r):null},Pi),nt(()=>this.popup,(r,n)=>{const s="popup",o="manual";n&&i.remove(n,s),r&&(r.view=i.view,i.add(r,{key:s,position:o}))},Pi)],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=M_,i.time=dM,this.handles.add([(()=>{const r=()=>{i.freq=M_,i.time=dM};return window.addEventListener("resize",r),{remove(){window.removeEventListener("resize",r)}}})(),bb({prepare:r=>{const n=this._measure(),s=this._freqInfo;if(s.time+=r.deltaTime,n&&(s.freq=M_,this._get("resizing")||this._set("resizing",!0)),s.time<s.freq)return;s.time=0;const o=this._position();s.freq=o||n?M_:Math.min(dM,s.freq*E8e),!n&&s.freq>=S8e&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,r=i?i.clientWidth:0,n=i?i.clientHeight:0;if(r===0||n===0)return this.suspended||this._set("suspended",!0),!1;const s=this.width,o=this.height;return r===s&&n===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:s,oldHeight:o,width:r,height:n}),!0)}_position(){const i=this.container,r=this.position,n=i&&_8e(i);return!!n&&(!r||n[0]!==r[0]||n[1]!==r[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return h([p()],t.prototype,"container",null),h([p({readOnly:!0})],t.prototype,"focused",null),h([p({readOnly:!0})],t.prototype,"height",void 0),h([p({type:kq})],t.prototype,"popup",null),h([p({type:DG})],t.prototype,"overlay",void 0),h([p({readOnly:!0})],t.prototype,"position",void 0),h([p({readOnly:!0})],t.prototype,"resizing",void 0),h([p({readOnly:!0})],t.prototype,"root",void 0),h([p({value:null,readOnly:!0})],t.prototype,"size",null),h([p({readOnly:!0})],t.prototype,"surface",void 0),h([p({readOnly:!0})],t.prototype,"suspended",void 0),h([p()],t.prototype,"ui",void 0),h([p({readOnly:!0})],t.prototype,"userContent",void 0),h([p({readOnly:!0})],t.prototype,"width",void 0),h([p()],t.prototype,"widthBreakpoint",void 0),t=h([ce("esri.views.DOMContainer")],t),t},I8e=e=>{let t=class extends e{async fetchPopupFeatures(i,r){await this.when();const{location:n,queryArea:s,layerViewsAndGraphics:o,clientOnlyGraphics:a}=await this._prepareFetchPopupFeatures(i,r),l=Promise.resolve(a),u=this._queryLayerPopupFeatures(s,o,r),c=u.map(d=>d.promise);return{location:n,clientOnlyGraphics:a,allGraphicsPromise:$fe([l,...c]).then(d=>Array.from(new Set(d.flat()))),promisesPerLayerView:u}}_queryLayerPopupFeatures(i,r,n){return r.map(({layerView:s,graphics:o})=>{const a={clientGraphics:o,event:ee(n)?n.event:void 0,signal:ee(n)?n.signal:void 0,defaultPopupTemplateEnabled:!!ee(n)&&!!n.defaultPopupTemplateEnabled},l=s.fetchPopupFeatures(i,a);return{layerView:s,promise:l}})}_isValidPopupGraphic(i,r){return i&&!!i.getEffectivePopupTemplate(ee(r)&&r.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(i,r){const{clientGraphics:n,queryArea:s,location:o}=await this._popupHitTestGraphics(i,r),a=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:l,clientOnlyGraphics:u}=this._graphicsPerFetchPopupLayerView(n,a);return{clientOnlyGraphics:u,layerViewsAndGraphics:l,queryArea:s,location:o}}async _popupHitTestGraphics(i,r){const n=await this.popupHitTest(i),s=n.results,o=n.mapPoint,a=s.filter(u=>u.type==="graphic"&&this._isValidPopupGraphic(u.graphic,r)),l=a.length?a[0].mapPoint:null;return{clientGraphics:a.map(u=>u.graphic),queryArea:o,location:o||l}}_getFetchPopupLayerViews(){const i=[];return this.allLayerViews.forEach(r=>{this._isValidPopupLayerView(r)&&i.push(r)}),ee(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&i.push(this.graphicsView),i.reverse()}_isValidPopupLayerView(i){return ee(i)&&(!("layer"in i)||!i.suspended)&&"fetchPopupFeatures"in i}_graphicsPerFetchPopupLayerView(i,r){const n=[],s=new Map,o=r.map(a=>{const l=[];return"layer"in a?s.set(a.layer,l):s.set(a.graphics,l),{layerView:a,graphics:l}});for(const a of i){const l=s.get(a.layer)||s.get(a.sourceLayer)||null;l?l.push(a):n.push(a)}return{layerViewsAndGraphics:o,clientOnlyGraphics:n}}};return t=h([ce("esri.views.PopupView")],t),t};let KA=class extends mx{constructor(t){super(t),this.handles.add(this.on("before-add",i=>{Re(i.item)||i.item.parent===this.owner&&(et.getLogger(this.declaredClass).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(t){t.parent=this.owner}_release(t){t.parent=null}};KA=h([ce("esri.support.AnalysesCollection")],KA);let yf=class extends Lt{constructor(t){super(t),this.view=null,this.baseLayerViews=new Pt,this.referenceLayerViews=new Pt,this._loadingHandle=nt(()=>this.view?.map?.basemap,i=>{i&&i.load().catch(()=>{})},Pi)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){if(this.view&&this.view.suspended)return!1;const t=this.view?.map?.basemap;return!!t&&!!t.loaded&&(this.baseLayerViews.some(i=>i.updating)||this.referenceLayerViews.some(i=>i.updating))}};h([p({constructOnly:!0})],yf.prototype,"view",void 0),h([p({readOnly:!0})],yf.prototype,"baseLayerViews",void 0),h([p({readOnly:!0})],yf.prototype,"referenceLayerViews",void 0),h([p({readOnly:!0})],yf.prototype,"suspended",null),h([p({type:Boolean,readOnly:!0})],yf.prototype,"updating",null),yf=h([ce("esri.views.BasemapView")],yf);function T8e(e){return"tryRecycleWith"in e}let A8e=class{constructor(t,i,r){this.layer=t,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=Kd(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,ba(this._controller.signal,()=>{const n=new Ce("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(n)})}tryRecycle(t){if(!this.done||!this.layerView||!T8e(this.layerView))return null;const i=this.layer.type,r=this._controller.signal;for(let n=0;n<t.length;n++){const s=t[n];if(s.type!==i)continue;const o=this.layerView.tryRecycleWith(s,{signal:r});if(o){t.splice(n,1),this.layer=s;const a=this.layerView,l=a.view;return this.promise=Promise.race([o.then(()=>(hr(this._controller.signal),s.emit("layerview-destroy",{view:l,layerView:a}),l.emit("layerview-destroy",{view:l,layerView:a}),s.emit("layerview-create",{view:l,layerView:a}),l.emit("layerview-create",{view:l,layerView:a}),a)),new Promise((u,c)=>ba(this._controller.signal,()=>c(fr())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:t}=this;if(!t)return;const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:t}),r.emit("layerview-destroy",{layer:i,layerView:t}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}async start(){if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:i,view:r}=this;this._map=r.map;try{let n,s;if(await i.load({signal:t}),"prefetchResources"in i&&await i.prefetchResources?.({signal:t}),$8e(i))n=await i.createLayerView(r,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new Ce("layer:view-not-supported","No layerview implementation was found");const l=await this.layerViewImporter.importLayerView(i);hr(t),n="default"in l?new l.default({layer:i,view:r}):new l({layer:i,view:r})}const o=()=>{s=yn(s),n.destroyed||n.destroy(),n.layer=null,n.parent=null,n.view=null,this.done=!0};s=ba(t,o),hr(t);try{await n.when()}catch(l){throw o(),l}if(!this._map?.allLayers?.includes(i))return o(),void this._deferred.reject(new Ce("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=n,i.emit("layerview-create",{view:r,layerView:n}),r.emit("layerview-create",{layer:i,layerView:n}),this.done=!0,this._deferred.resolve(n)}catch(n){i.emit("layerview-create-error",{view:r,error:n}),r.emit("layerview-create-error",{layer:i,error:n}),this.done=!0,this._deferred.reject(new Ce("layerview:create-error","layerview creation failed",{layer:i,error:n}))}}},Wl=class extends Lt{constructor(t){super(t),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new Qv,this.supportsGround=!0,this._preloadLayerViewModules=()=>{const i=this.view.map?.allLayers;if(i)for(const r of i)this.layerViewImporter.hasLayerViewModule(r)&&this.layerViewImporter.importLayerView(r)},this._reschedule=()=>(Re(this._workPromise)&&(this._workPromise=Kd(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(hw(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{const i=this.view.map;if(this._map!==i&&(this.clear(),this._map=i),Re(this._workPromise))return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,n=[],s=this.view.ready,o=l=>{if(!Re(l)){for(const u of l)if(u){r.add(u);const c=this._layerLayerViewInfoMap.get(u);c&&s?c.start():c||this._recyclingInfoMap.has(u)||n.push(u),"layers"in u&&u.layers&&o(u.layers)}}};for(const l of this._rootCollectionNames)o(this.get(l));for(const[l,u]of this._layerLayerViewInfoMap)if(!r.has(l)){this._layerLayerViewInfoMap.delete(u.layer);const c=u.tryRecycle(n);c?(this._recyclingInfoMap.set(u.layer,u),c.then(()=>{this._recyclingInfoMap.delete(u.layer),this._layerLayerViewInfoMap.set(u.layer,u),this._reschedule()}).catch(()=>{this._recyclingInfoMap.delete(u.layer),u.destroy(),this._reschedule()})):u.destroy()}for(const[l,u]of this._recyclingInfoMap)r.has(l)||(this._recyclingInfoMap.delete(u.layer),u.destroy());for(const l of n)this._createLayerView(l);this._refreshCollections();const a=[i?.ground?.layers,i?.basemap?.baseLayers,i?.basemap?.referenceLayers,i?.layers].filter(l=>!!l);r.forEach(l=>"layers"in l&&a.push(l.layers)),this.addHandles(a.map(l=>this._watchUpdatingTracking.addOnCollectionChange(()=>l,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.own([ms(()=>this.view?.map?.allLayers,"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),nt(()=>{const t=this.view,i=t?.map;return[i?.basemap,i?.ground,i?.layers,t?.ready]},()=>this._reschedule(),Tf)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null,ee(this._workPromise)&&(this._workPromise.reject(fr()),this._workPromise=null)}get _layersToLayerViews(){const t=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&t.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(t)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return ee(this._workPromise)||this._watchUpdatingTracking.updating||q5(this._layerLayerViewInfoMap,t=>!t.done)}get updatingRemaining(){let t=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++t;return t}clear(){if(!this.destroyed){for(const t of this._layerLayerViewInfoMap.values())t.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}async whenLayerView(t){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(t)){if(this._recyclingInfoMap.has(t))return this._recyclingInfoMap.get(t).promise;throw new Ce("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:t})}return this._layerLayerViewInfoMap.get(t).promise}_refreshCollections(){for(const[t,i]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(t),this.get(i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(t,i,r){if(!t||!i)return void(i&&i.removeAll());let n=0;for(const s of t){const o=this._layerLayerViewInfoMap.get(s);if(!o||!o.layerView)continue;const a=o.layerView;a.layer=s,a.parent=r,i.getItemAt(n)!==a&&i.splice(n,0,a),s.layers&&this._populateLayerViewsOwners(s.layers,a.layerViews,a),n+=1}n<i.length&&i.splice(n,i.length)}_createLayerView(t){t.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t);const i=new A8e(t,this.view,this.layerViewImporter);i.promise.then(()=>this._refreshCollections(),r=>{r&&(fs(r)||r.name==="cancelled:layerview-create")||et.getLogger(this.declaredClass).error(`Failed to create layerview for layer title:'${t.title??"no title"}', id:'${t.id??"no id"}' of type '${t.type}'.`,{layer:t,error:r}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(t,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};h([p()],Wl.prototype,"_workPromise",void 0),h([p({readOnly:!0})],Wl.prototype,"_watchUpdatingTracking",void 0),h([p({readOnly:!0})],Wl.prototype,"_layersToLayerViews",null),h([p({readOnly:!0})],Wl.prototype,"_rootCollectionNames",null),h([p()],Wl.prototype,"layerViewImporter",void 0),h([p()],Wl.prototype,"supportsGround",void 0),h([p({readOnly:!0})],Wl.prototype,"updating",null),h([p({readOnly:!0})],Wl.prototype,"updatingRemaining",null),h([p({constructOnly:!0})],Wl.prototype,"view",void 0),Wl=h([ce("esri.views.LayerViewManager")],Wl);const C8e=Wl;function $8e(e){return"createLayerView"in e&&e.createLayerView!=null}let Ka=class extends Lt{constructor(t){super(t),this.factor=1.5,this.offset=cs(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};h([p({type:Number})],Ka.prototype,"factor",void 0),h([p({nonNullable:!0})],Ka.prototype,"offset",void 0),h([p()],Ka.prototype,"position",void 0),h([p({type:Number,range:{min:0}})],Ka.prototype,"size",void 0),h([p()],Ka.prototype,"maskUrl",void 0),h([p()],Ka.prototype,"maskEnabled",void 0),h([p()],Ka.prototype,"overlayUrl",void 0),h([p()],Ka.prototype,"overlayEnabled",void 0),h([p({readOnly:!0})],Ka.prototype,"version",null),h([p({type:Boolean})],Ka.prototype,"visible",void 0),Ka=h([ce("esri.views.Magnifier")],Ka);const Ioe=Ka;let O8e=class{constructor(){this._tasks=new Array,this._running=new YA(!1)}get length(){return this._tasks.length}get running(){return this._running.get()}destroy(){this.cancelAll()}runTask(t){for(;!t.done&&this._process(t);)t.madeProgress()}push(t,i,r){return this._running.set(!0),new Promise((n,s)=>this._tasks.push(new Pq(n,s,t,i,r)))}unshift(t,i,r){return this._running.set(!0),new Promise((n,s)=>this._tasks.unshift(new Pq(n,s,t,i,r)))}_process(t){if(this._tasks.length===0)return!1;const i=this._tasks.shift();try{const r=Sl(i.signal);if(r&&!i.abortCallback)i.reject(fr());else{const n=r?i.abortCallback?.(fr()):i.callback(t);cp(n)?n.then(i.resolve,i.reject):i.resolve(n)}}catch(r){i.reject(r)}return this._running.set(this._tasks.length>0),!0}cancelAll(){const t=fr();for(const i of this._tasks)if(i.abortCallback){const r=i.abortCallback(t);i.resolve(r)}else i.reject(t);this._tasks.length=0,this._running.set(!1)}},Pq=class{constructor(t,i,r,n,s){this.resolve=t,this.reject=i,this.callback=r,this.signal=n,this.abortCallback=s}},L2=class extends Lt{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};h([p()],L2.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),h([p()],L2.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),L2=h([ce("esri.views.support.DebugFlags")],L2);const R8e=new L2;var Xa;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(Xa||(Xa={}));var m6,vi;(function(e){e[e.YIELD=1]="YIELD"})(m6||(m6={})),function(e){e.RESOURCE_CONTROLLER_IMMEDIATE="immediate",e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.LOD_RENDERER="LoD renderer",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="clouds generator",e[e.TEST_PRIO=1]="TEST_PRIO"}(vi||(vi={}));const oh=0,Nq=new Map([[vi.RESOURCE_CONTROLLER_IMMEDIATE,oh],[vi.RESOURCE_CONTROLLER,4],[vi.SLIDE,oh],[vi.STREAM_DATA_LOADER,oh],[vi.ELEVATION_QUERY,oh],[vi.TERRAIN_SURFACE,1],[vi.SURFACE_GEOMETRY_UPDATES,1],[vi.LOD_RENDERER,2],[vi.GRAPHICS_CORE,2],[vi.I3S_CONTROLLER,2],[vi.POINT_CLOUD_LAYER,2],[vi.FEATURE_TILE_FETCHER,2],[vi.OVERLAY,4],[vi.STAGE,4],[vi.GRAPHICS_DECONFLICTOR,4],[vi.FILTER_VISIBILITY,4],[vi.SCALE_VISIBILITY,4],[vi.FRUSTUM_VISIBILITY,4],[vi.CLOUDS_GENERATOR,4],[vi.POINT_OF_INTEREST_FREQUENT,6],[vi.POINT_OF_INTEREST_INFREQUENT,30],[vi.LABELER,8],[vi.FEATURE_QUERY_ENGINE,8],[vi.FEATURE_TILE_TREE,16],[vi.FEATURE_TILE_TREE_ACTIVE,oh],[vi.ELEVATION_ALIGNMENT,12],[vi.TEXT_TEXTURE_ATLAS,12],[vi.TEXTURE_UNLOAD,12],[vi.LINE_OF_SIGHT_TOOL,16],[vi.LINE_OF_SIGHT_TOOL_INTERACTIVE,oh],[vi.SNAPPING,oh],[vi.SHADOW_ACCUMULATOR,30]]);function Fq(e){return Nq.has(e)?Nq.get(e):typeof e=="number"?e:1}const Dq=6.5,jq=1,k8e=30,Uq=1e3/30,Vq=100,Bq=.9;var y6,ly;(function(e){class t{get updating(){return this._updating.get()}_updatingChanged(){this._updating.set(this._tasks.some(s=>s.needsUpdate))}constructor(){this._updating=new YA(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new K2("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=Xa.INTERACTING,this._tasks=new Jf,this._runQueue=new Jf,this._load=0,this._idleStateCallbacks=new Jf,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=nt(()=>R8e.SCHEDULER_LOG_SLOW_TASKS,o=>this._debug=o,Pi);for(const o of Object.keys(vi))this.performanceInfo.tasks.set(vi[o],new K2(vi[o]));const s=this;this._test={FRAME_SAFETY_BUDGET:Dq,INTERACTING_BUDGET:Uq,IDLE_BUDGET:Vq,get availableBudget(){return s._budget.budget},usedBudget:0,getBudget:()=>s._budget,setBudget:o=>s._budget=o,updateTask:o=>this._updateTask(o),getState:o=>this._getState(o),getRuntime:o=>this._getRuntime(o),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(s=>s.remove()),this._tasks.clear(),yn(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(s){this._updatingChanged(),s&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())}))}registerTask(s,o){const a=Fq(s),l=new i(this,s,o,a);return this._tasks.push(l),this._updatingChanged(),this.performanceInfo.tasks.has(s)||this.performanceInfo.tasks.set(s,new K2(s)),l}registerIdleStateCallbacks(s,o){const a={idleBegin:s,idleEnd:o};this._idleStateCallbacks.push(a),this.state===Xa.IDLE&&this._idleUpdatesStartFired&&a.idleBegin();const l=this;return{remove:()=>this._removeIdleStateCallbacks(a),set idleBegin(u){l._idleUpdatesStartFired&&(a.idleEnd(),l._state===Xa.IDLE&&u()),a.idleBegin=u},set idleEnd(u){a.idleEnd=u}}}get load(){return this._load}set state(s){this._state!==s&&(this._state=s,this.state!==Xa.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(o=>o.idleEnd())))}get state(){return this._state}updateBudget(s){this._test.usedBudget=0,++this._frameNumber;let o=Dq,a=s.frameDuration,l=jq;switch(this.state){case Xa.IDLE:o=0,a=Math.max(Vq,s.frameDuration),l=k8e;break;case Xa.INTERACTING:a=Math.max(Uq,s.frameDuration);case Xa.ANIMATING:}return a=a-s.elapsedFrameTime-o,this.state!==Xa.IDLE&&a<jq&&!this._forceTask?(this._forceTask=!0,!1):(a=Math.max(a,l),this._budget.reset(a,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case Xa.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(s=>s.idleBegin())),this._runIdle();break;case Xa.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(s){this._idleUpdatesStartFired&&s.idleEnd(),this._idleStateCallbacks.removeUnordered(s)}removeTask(s){this._tasks.removeUnordered(s),this._runQueue.removeUnordered(s),this._updatingChanged()}_updateTask(s){this._tasks.forAll(o=>{o.name===s&&o.setPriority(s)})}_getState(s){if(this._runQueue.some(a=>a.name===s))return ly.SCHEDULED;let o=ly.IDLE;return this._tasks.forAll(a=>{a.name===s&&a.needsUpdate&&(a.schedulePriority<=1?o=ly.READY:o!==ly.READY&&(o=ly.WAITING))}),o}_getRuntime(s){let o=0;return this._tasks.forAll(a=>{a.name===s&&(o+=a.runtime)}),o}_resetRuntimes(){this._tasks.forAll(s=>s.runtime=0)}_getRunning(){const s=new Map;if(this._tasks.forAll(a=>{a.needsUpdate&&s.set(a.name,(s.get(a.name)||0)+1)}),s.size===0)return null;let o="";return s.forEach((a,l)=>{o+=a>1?` ${a}x ${l}`:` ${l}`}),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const s=this._tasks.reduce((o,a)=>a.needsUpdate?++o:o,0);this._load=this._load*Bq+s*(1-Bq)}_schedule(){for(this._runQueue.filterInPlace(s=>!!s.needsUpdate||(s.schedulePriority=s.basePriority,!1)),this._tasks.forAll(s=>{s.basePriority===oh&&s.needsUpdate&&!this._runQueue.includes(s)&&s.blockFrame!==this._frameNumber&&this._runQueue.unshift(s)});this._runQueue.length===0;){let s=!1,o=0;if(this._tasks.forAll(a=>{a.needsUpdate&&a.schedulePriority!==0&&a.basePriority!==oh&&a.blockFrame!==this._frameNumber&&(s=!0,o=Math.max(o,a.basePriority),a.schedulePriority===1?(a.schedulePriority=0,this._runQueue.push(a)):--a.schedulePriority)}),!s)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const s=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const o=this._budget.now(),a=this._runQueue.pop();this._budget.resetProgress();try{a.task.runTask(this._budget)===m6.YIELD&&(a.blockFrame=this._frameNumber)}catch(u){et.getLogger("esri.views.support.Scheduler").error(`Exception in task "${a.name}"`,u)}!this._budget.hasProgressed&&a.blockFrame!==this._frameNumber&&a.needsUpdate&&(a.name,vi.I3S_CONTROLLER,a.blockFrame=this._frameNumber),a.schedulePriority=a.basePriority;const l=this._budget.now()-o;if(a.runtime+=l,this._frameTaskTimes.set(a.priority,this._frameTaskTimes.get(a.priority)+l),this._debug&&l>2*this._budget.budget&&console.log("Task",a.name,"used",l,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-s)}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-s)}_startFrameTaskTimes(){for(const s of Object.keys(vi))this._frameTaskTimes.set(vi[s],0)}_recordFrameTaskTimes(s){this._frameTaskTimes.forEach((o,a)=>this.performanceInfo.tasks.get(a).record(o)),this.performanceInfo.total.record(s)}get test(){return this._test}}e.Scheduler=t;class i{get task(){return this._task.get()}get updating(){return this._queue.running}constructor(s,o,a,l){this._scheduler=s,this.name=o,this._basePriority=l,this.blockFrame=0,this.runtime=0,this._queue=new O8e,this._handles=new So,this.schedulePriority=this._basePriority,this._task=new YA(ee(a)?a:this._queue),this._handles.add(Tl(()=>this.task.running,u=>s.taskRunningChanged(u)))}remove(){this.processQueue(Toe),this._scheduler.removeTask(this),this.schedule=g6.schedule,this.reschedule=g6.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(s){this.name=s;const o=Fq(s);this._basePriority!==oh&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(s){this.setPriority(s)}get needsUpdate(){return this.updating||this.task.running}schedule(s,o,a){return this._queue.push(s,o,a)}reschedule(s,o,a){return this._queue.unshift(s,o,a)}processQueue(s){this._queue.runTask(s)}}class r{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=Xa.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(s){return!this.done&&(s()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(s){this._enabled=s}reset(s,o){this._begin=this.now(),this._budget=s,this._state=o,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}e.Budget=r})(y6||(y6={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(ly||(ly={}));const Toe=(()=>{const e=new y6.Budget;return e.enabled=!1,e})();let L8e=class{remove(){}processQueue(){}schedule(t,i,r){try{if(Sl(i)){const n=fr();return r?Promise.resolve(r(n)):Promise.reject(n)}return NR(t(Toe))}catch(n){return Promise.reject(n)}}reschedule(t,i,r){return this.schedule(t,i,r)}};const g6=new L8e;let P2=class extends Lt{constructor(t,i){super({}),this._stage=t,this._textureRequests=new Map,this._frameTask=i?.registerTask(vi.TEXTURE_UNLOAD)??g6}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask.remove(),this._textureRequests.forEach(t=>this._releaseTextureRequest(t)),this._textureRequests.clear()}get updating(){return this._frameTask.updating}fromData(t,i,r){const n=this.makeUid(t);let s=this._textureRequests.get(n);if(!s){const o=i();s={referenceCount:0,texture:o,textureAsync:null,abortController:null,onRemove:r},this._stage&&(this._stage.add(o),this._stage.loadImmediate(o)),this._textureRequests.set(n,s)}return s.referenceCount++,{uid:n,texture:s.texture,release:()=>this._release(n)}}_release(t){const i=this._textureRequests.get(t);i?(i.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+t),i.referenceCount--,i.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(t))):console.warn(`TextureCollection: texture doesn't exist: '${t}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(t){if(!this._textureRequests)return;const i=this._textureRequests.get(t);!i||i.referenceCount>0||(this._releaseTextureRequest(i),this._textureRequests.delete(t))}_releaseTextureRequest(t){t.onRemove&&t.onRemove(),t.texture?this._stage?.remove(t.texture):t.abortController&&(t.abortController.abort(),t.abortController=null)}makeUid(t,i=null){return ee(i)?`${t}.${i}px`:t}};h([p()],P2.prototype,"_frameTask",void 0),h([p()],P2.prototype,"updating",null),P2=h([ce("esri.views.3d.support.TextureCollection")],P2);var zq;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(zq||(zq={}));const Aoe=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],Coe={};function $oe(e){return!!Coe[e]}function P8e(e){for(const t of e)if(!$oe(t))return!1;return!0}Aoe.forEach(e=>{Coe[e]=!0});let N8e=class{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:i,priority:r},n)=>this.inputManager?.installHandlers(n,[i],r))}disconnect(){this.inputManager&&this._handlers.forEach((t,i)=>this.inputManager?.uninstallHandlers(i)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,i,r,n){const s=Array.isArray(t)?t:t.split(",");if(!P8e(s))return s.some($oe)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(i)?a=i:(o=i,a=[]),typeof r=="function"?o=r:n=r,n=n??em.DEFAULT;const l=this._createUniqueGroupName(),u=new F8e(this.view,s,a,o);this._handlers.set(l,{handler:u,priority:n});for(const c of s){const d=this._handlerCounts.get(c)||0;this._handlerCounts.set(c,d+1)}return this.inputManager&&this.inputManager.installHandlers(l,[u],n),{remove:()=>this._removeHandler(l,s)}}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,i){if(this._handlers.has(t)){this._handlers.delete(t);for(const r of i){const n=this._handlerCounts.get(r);n===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",r):n===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,n-1)}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},F8e=class extends ys{constructor(t,i,r,n){super(!0),this._latestDragStart=void 0,this.view=t;for(const s of i)switch(s){case"click":this.registerIncoming("click",r,o=>n(this._wrapClick(o)));break;case"double-click":this.registerIncoming("double-click",r,o=>n(this._wrapDoubleClick(o)));break;case"immediate-click":this.registerIncoming("immediate-click",r,o=>n(this._wrapImmediateClick(o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,o=>n(this._wrapImmediateDoubleClick(o)));break;case"hold":this.registerIncoming("hold",r,o=>n(this._wrapHold(o)));break;case"drag":this.registerIncoming("drag",r,o=>{const a=this._wrapDrag(o);a&&n(a)});break;case"key-down":this.registerIncoming("key-down",r,o=>n(this._wrapKeyDown(o)));break;case"key-up":this.registerIncoming("key-up",r,o=>n(this._wrapKeyUp(o)));break;case"pointer-down":this.registerIncoming("pointer-down",r,o=>n(this._wrapPointer(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,o=>n(this._wrapPointer(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,o=>n(this._wrapPointer(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,o=>n(this._wrapPointerDrag(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,o=>n(this._wrapMouseWheel(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,o=>n(this._wrapPointer(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,o=>n(this._wrapPointer(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,o=>{n(this._wrapGamepad(o))});break;case"focus":this.registerIncoming("focus",r,o=>{n(this._wrapFocus(o))});break;case"blur":this.registerIncoming("blur",r,o=>{n(this._wrapBlur(o))})}}_wrapFocus(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:i=>t.async(i),preventDefault:()=>t.preventDefault()}}_wrapBlur(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:i=>t.async(i),preventDefault:()=>t.preventDefault()}}_wrapClick(t){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:l}=t.data,{cancelable:u,timestamp:c}=t;return{type:"click",pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:c,screenPoint:cs(s,o),mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:u,stopPropagation:()=>t.stopPropagation(),async:d=>t.async(d),preventDefault:()=>t.preventDefault()}}_wrapDoubleClick(t){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:l}=t.data,{cancelable:u,timestamp:c}=t;return{type:"double-click",pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:c,mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:u,stopPropagation:()=>t.stopPropagation(),async:d=>t.async(d),preventDefault:()=>t.preventDefault()}}_wrapImmediateClick(t){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:l}=t.data,u=a.pointerId,{cancelable:c,timestamp:d}=t;return{type:"immediate-click",pointerId:u,pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:d,mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}_wrapImmediateDoubleClick(t){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:l}=t.data,u=a.pointerId,{cancelable:c,timestamp:d}=t;return{type:"immediate-double-click",pointerId:u,pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:d,mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}_wrapHold(t){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a}=t.data,{cancelable:l,timestamp:u}=t;return{type:"hold",pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:u,mapPoint:this._getMapPoint(s,o),cancelable:l,stopPropagation:()=>t.stopPropagation(),async:c=>t.async(c),preventDefault:()=>t.preventDefault()}}_getMapPoint(t,i){return this.view.toMap(cs(t,i),{exclude:[]})}_wrapDrag(t){const i=t.data,{x:r,y:n}=i.center,{action:s,pointerType:o,button:a}=i;if(s==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const l=i.pointer.native,u=i.buttons,{cancelable:c,timestamp:d}=t,f={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return s==="end"&&(this._latestDragStart=void 0),{type:"drag",action:s,x:r,y:n,origin:f,pointerType:o,button:a,buttons:u,radius:i.radius,angle:vQ(i.angle),native:l,timestamp:d,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}_wrapKeyDown(t){const{key:i,repeat:r,native:n}=t.data,{cancelable:s,timestamp:o}=t;return{type:"key-down",key:i,repeat:r,native:n,timestamp:o,cancelable:s,stopPropagation:()=>t.stopPropagation(),async:a=>t.async(a),preventDefault:()=>t.preventDefault()}}_wrapKeyUp(t){const{key:i,native:r}=t.data,{cancelable:n,timestamp:s}=t;return{type:"key-up",key:i,native:r,timestamp:s,cancelable:n,stopPropagation:()=>t.stopPropagation(),async:o=>t.async(o),preventDefault:()=>t.preventDefault()}}_wrapPointer(t,i){const{x:r,y:n,button:s,buttons:o,native:a,eventId:l}=t.data,u=a.pointerId,c=a.pointerType,{cancelable:d,timestamp:f}=t;return{type:i,x:r,y:n,pointerId:u,pointerType:c,button:s,buttons:o,native:a,timestamp:f,eventId:l,cancelable:d,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}_wrapPointerDrag(t){const{x:i,y:r,buttons:n,native:s,eventId:o}=t.data.currentEvent,{button:a}=t.data.startEvent,l=t.data.startEvent.native.pointerId,u=t.data.startEvent.native.pointerType,c=t.data.action,d={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:f,timestamp:m}=t;return{type:"pointer-drag",x:i,y:r,pointerId:l,pointerType:u,button:a,buttons:n,action:c,origin:d,native:s,timestamp:m,eventId:o,cancelable:f,stopPropagation:()=>t.stopPropagation(),async:g=>t.async(g),preventDefault:()=>t.preventDefault()}}_wrapMouseWheel(t){const{cancelable:i,data:r,timestamp:n}=t,{x:s,y:o,deltaY:a,native:l}=r;return{type:"mouse-wheel",x:s,y:o,deltaY:a,native:l,timestamp:n,cancelable:i,stopPropagation:()=>t.stopPropagation(),async:u=>t.async(u),preventDefault:()=>t.preventDefault()}}_wrapGamepad(t){const{action:i,state:r,device:n}=t.data,{cancelable:s,timestamp:o}=t,{buttons:a,axes:l}=r;return{type:"gamepad",device:n,timestamp:o,action:i,buttons:a,axes:l,cancelable:s,stopPropagation:()=>t.stopPropagation(),async:u=>t.async(u),preventDefault:()=>t.preventDefault()}}};var vS,Gq,qq;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(vS||(vS={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(Gq||(Gq={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(qq||(qq={}));function D8e(e){return[e.on("before-add",t=>{const i=t.item;if(i==null||e.includes(i))return et.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();i.onAdd()}),e.on("after-remove",t=>{const i=t.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function v6(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(vS.USER)&&e.getEditableFlag(vS.MANAGER)}function Kc(e){return cs(e.x,e.y)}function Ooe(e,t){const i=(e instanceof HTMLElement?e:e.surface)?.getBoundingClientRect();return i?cs(t.clientX-i.left,t.clientY-i.top):cs(0,0)}function Hq(e,t){return t instanceof Event?Ooe(e,t):Kc(t)}function Wq(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let j8e=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(t,i){const r=()=>t.stopPropagation();switch(t.type){case"pointer-move":Jq(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(r(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!Zq(t))break;const n=Kc(t),s=this._intersect(n,t.pointerType,i.forEachTool);if(Re(s))break;const o=s.manipulator,a=s.tool;!(ee(o)&&ee(a)&&o.interactive)||o.grabbable&&o.grabbableForEvent(t)||!o.grabbing||o.dragging||this._ungrabManipulatorBeforeDragging(o,t,i),ee(o)&&ee(a)&&o.interactive&&o.grabbable&&o.grabbableForEvent(t)&&!o.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:o,tool:a,start:n,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&Re(i.activeTool)&&(this._revertToNullActiveTool=!0,i.setActiveTool(s.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:n}),r());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,i);break;case"pointer-drag":{if(!Zq(t))break;const n=this._grabbedManipulators.get(t.pointerId),s=Ff(n,({manipulator:c})=>c),o=Ff(n,({tool:c})=>c);if(Re(s)||Re(o))break;const a=Kc(t);a.x=Ta(a.x,0,i.view.width),a.y=Ta(a.y,0,i.view.height);const l=n.start,u=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(s.dragging=!0,u?s.events.emit("drag",{action:"update",start:l,screenPoint:a}):s.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:o,manipulator:s,start:l}));break;case"end":s.dragging=!1,u&&s.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,i)}r();break}case"immediate-click":{const n=Kc(t),s=this._intersect(n,t.pointerType,i.forEachTool);if(U8e(t)||i.forEachTool(u=>{if((!ee(s)||s.tool!==u||u.automaticManipulatorSelection)&&u.manipulators){let c=!1;u.manipulators.forEach(({manipulator:d})=>{d.selected&&(d.selected=!1,c=!0)}),c&&u.onManipulatorSelectionChanged&&u.onManipulatorSelectionChanged()}}),Re(s))break;const{manipulator:o,tool:a}=s;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const l=t.native.shiftKey;o.events.emit("immediate-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:l,stopPropagation:r});break}case"click":{const n=Kc(t),s=this._intersect(n,t.pointerType,i.forEachTool),o=ee(s)?s.manipulator:null;if(Re(o)||!o.interactive)break;const a=t.native.shiftKey;o.events.emit(t.type,{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a}),r();break}case"double-click":{const n=Kc(t),s=this._intersect(n,t.pointerType,i.forEachTool),o=ee(s)?s.manipulator:null;if(Re(o)||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:r});break}case"immediate-double-click":{const n=Kc(t),s=this._intersect(n,t.pointerType,i.forEachTool),o=ee(s)?s.manipulator:null;if(Re(o)||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:r});break}}this._onFocusChange(i.forEachTool)}_ungrabManipulatorBeforeDragging(t,i,r){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:Kc(i)}),this._grabbedManipulators.forEach(({manipulator:n},s)=>{n===t&&this._grabbedManipulators.delete(s)}),this._afterManipulatorUngrab(r.setActiveTool)}_handlePointerEnd(t,i){const r=Ff(this._grabbedManipulators.get(t.pointerId),({manipulator:n})=>n);Re(r)||r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:Kc(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorUngrab(i.setActiveTool))}_cursorFromMap(t){let i=null;return q5(t,({manipulator:r})=>!(Re(r)||!r.interactive)&&(r.grabbing&&r.grabCursor?(i=r.grabCursor,!0):!!r.cursor&&(i=r.cursor,!0))),i}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const i=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:n})=>{i.add(n)}),this._hoveredManipulators.forEach(({tool:n})=>{r.add(n)}),t(n=>{n.hasGrabbedManipulators=i.has(n),n.hasHoveredManipulators=r.has(n);const s=this._grabbedManipulators.values(),o=Fpe(s,({tool:a})=>a===n);n.firstGrabbedManipulator=ee(o)?o.manipulator:null})}clearPointers(t,{forEachTool:i,setActiveTool:r},n=!0,s){const o=(a,l)=>a===t&&(Re(s)||s===l);this._grabbedManipulators.forEach(({tool:a,manipulator:l,pointerType:u},c)=>{o(a,l)&&(this._grabbedManipulators.delete(c),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:u}))}),this._draggedManipulators.forEach(({tool:a,manipulator:l},u)=>{o(a,l)&&(this._draggedManipulators.delete(u),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}),n&&this._hoveredManipulators.forEach(({tool:a,manipulator:l},u)=>{o(a,l)&&(this._hoveredManipulators.delete(u),l.hovering=!1)}),this._afterManipulatorUngrab(r),this._onFocusChange(i)}_intersect(t,i,r){let n=null;return r(s=>{if(s.manipulators==null||!v6(s))return!1;const o=s.manipulators.intersect(t,i);return!Re(o)&&(n={tool:s,manipulator:o},!0)}),n}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(cs(i.x,i.y),r,i.pointerType,t)})}handleHoverEvent(t,i){t.type!=="pointer-up"&&t.type!=="immediate-click"&&t.type!=="pointer-move"||!Jq(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(Kc(t),t.pointerId,t.pointerType,i)}_updateHoveredStateForPointerAtScreenPosition(t,i,r,n){let s=this._intersect(t,r,n);const o=Ff(this._hoveredManipulators.get(i),({manipulator:a})=>a);ee(s)&&!s.manipulator.interactive&&(s=null),ee(s)&&o===s.manipulator||(ee(o)&&(o.hovering=!1),ee(s)?(s.manipulator.hovering=!0,this._hoveredManipulators.set(i,s)):this._hoveredManipulators.delete(i),this._onFocusChange(n))}_afterManipulatorUngrab(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}};function Jq(e){return e==="mouse"}function Zq(e){return e.pointerType!=="mouse"||e.button===0}function U8e(e){return!!e.native.shiftKey}const Yq="attached",DO="tools";let Sd=class extends mA{constructor(t){super(t),this._manipulatorState=new j8e,this.tools=new Pt,this.cursor=null,this._forEachTool=i=>{for(const r of this.tools.items)if(i(r))return}}initialize(){this.handles.add([this.view.on(Aoe,t=>{this._handleInputEvent(t)},em.TOOL),...D8e(this.tools),this.tools.on("before-add",({item:t})=>{this._updateToolEditableFlag(t)}),this.tools.on("before-remove",({item:t})=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t},view:this.view}}set activeTool(t){if(ee(t)&&!this.view.ready)return void et.getLogger(this.declaredClass).error("Cannot set active tool while view is not ready.");if(t===this.activeTool)return;const i=this.activeTool;this._set("activeTool",t),ee(i)&&i.deactivate(),ee(t)&&t.activate(),this._removeIncompleteTools(t);for(const r of this.tools){this._updateToolEditableFlag(r);const n=v6(r);!Re(this.activeTool)&&n||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!n)}this._updateCursor()}get updating(){return this.updatingHandles.updating||this.tools.some(t=>t.updating)||(this.textures?.updating??!1)}attach(){this.view.type==="3d"?(this._set("textures",new P2(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([nt(()=>{const{state:t}=this.view;return"camera"in t&&t.camera},()=>this._forEachManipulator(t=>t.onViewChange())),this.view.elevationProvider?.on("elevation-change",t=>this._forEachManipulator(i=>i.onElevationChange(t))),cw(()=>this._set("textures",qr(this.textures)))],Yq)):this.handles.add(nt(()=>this.view.extent,()=>this._forEachManipulator(t=>t.onViewChange())))}detach(){ee(this.activeTool)&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove(Yq)}_forEachManipulator(t){this._forEachTool(i=>{i.manipulators&&i.manipulators.forEach(({manipulator:r})=>t(r,i))})}_handleInputEvent(t){let i=!1;const r={...t,stopPropagation:()=>{i=!0,t.stopPropagation()}};ee(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r):this._forEachTool(n=>{!i&&n.visible&&n.handleInputEvent(r)}),!i&&t.type==="key-down"&&t.key==="Escape"&&this.activeTool&&(t.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),!i&&ee(this.activeTool)&&this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove(DO),this._forEachTool(t=>{if(t instanceof Lt){const i=nt(()=>[t.cursor,t.visible,t.editable],()=>{v6(t)||this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()});this.handles.add(i,DO)}t.manipulators&&this.handles.add([t.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),t.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],DO)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(t){t.setEditableFlag?.(vS.MANAGER,Re(this.activeTool)||t===this.activeTool)}_updateCursor(){let t=this._manipulatorState.cursor;Re(t)&&this._forEachTool(i=>!(!ee(i.cursor)||!i.visible)&&(t=i.cursor,!0)),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(t){this.tools.filter(i=>(Re(t)||i!==t)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}};h([p({constructOnly:!0,nonNullable:!0})],Sd.prototype,"view",void 0),h([p({readOnly:!0,nonNullable:!0})],Sd.prototype,"textures",void 0),h([p({value:null})],Sd.prototype,"activeTool",null),h([p({readOnly:!0,type:Pt})],Sd.prototype,"tools",void 0),h([p({readOnly:!0})],Sd.prototype,"cursor",void 0),h([p({readOnly:!0})],Sd.prototype,"updating",null),Sd=h([ce("esri.views.ToolViewManager")],Sd);const V8e=Sd;let yv=class extends Lt{constructor(t){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",t.mapping==="standard"?this._detectedDeviceType="standard":B8e.test(t.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=t.index}get native(){const t=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<t.length?t[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return z8e[this.deviceType]}};h([p({nonNullable:!0,readOnly:!0})],yv.prototype,"nativeIndex",void 0),h([p({type:String,readOnly:!0})],yv.prototype,"deviceType",null),h([p({type:Number,readOnly:!0})],yv.prototype,"axisThreshold",null),yv=h([ce("esri.views.input.gamepad.GamepadInputDevice")],yv);const B8e=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),z8e={standard:.15,spacemouse:.025,unknown:0},O9=yv;let N2=class extends Lt{constructor(...t){super(...t),this.devices=new Pt,this.enabledFocusMode="document"}};h([p({type:Pt.ofType(O9),readOnly:!0})],N2.prototype,"devices",void 0),h([p({type:["document","view","none"]})],N2.prototype,"enabledFocusMode",void 0),N2=h([ce("esri.views.input.gamepad.GamepadSettings")],N2);const G8e=N2;let bT=class extends Lt{constructor(){super(...arguments),this.gamepad=new G8e}};h([p({readOnly:!0})],bT.prototype,"gamepad",void 0),bT=h([ce("esri.views.input.Input")],bT);const q8e=bT;let gf=class extends Lt{constructor(t){super(t),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};h([p({type:Boolean,nonNullable:!0})],gf.prototype,"enabled",void 0),h([p({type:O9})],gf.prototype,"device",void 0),h([p({type:["pan","zoom"],nonNullable:!0})],gf.prototype,"mode",void 0),h([p({type:["forward-down","forward-up"],nonNullable:!0})],gf.prototype,"tiltDirection",void 0),h([p({type:Number,nonNullable:!0})],gf.prototype,"velocityFactor",void 0),gf=h([ce("esri.views.navigation.gamepad.GamepadSettings")],gf);const Roe=gf;let ng=class extends Lt{constructor(t){super(t),this.browserTouchPanEnabled=!0,this.gamepad=new Roe,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};h([p({type:Boolean})],ng.prototype,"browserTouchPanEnabled",void 0),h([p({type:Roe,nonNullable:!0})],ng.prototype,"gamepad",void 0),h([p({type:Boolean})],ng.prototype,"momentumEnabled",void 0),h([p({type:Boolean})],ng.prototype,"mouseWheelZoomEnabled",void 0),ng=h([ce("esri.views.navigation.Navigation")],ng);const koe=ng;var Kq;function H8e(e){const t=e.url?G0(e.url):void 0;return!(e.spatialReference?.vcsWkid==null&&ee(t)&&t.serverType==="ImageServer")&&Loe(e)&&e.heightModelInfo?e.heightModelInfo:W8e(e)?_4.deriveUnitFromSR(Z8e,e.spatialReference):null}function Loe(e){return"heightModelInfo"in e}function Poe(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function W8e(e){return Poe(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):Noe(e)}function J8e(e){return e.layers!=null||Noe(e)||Poe(e)||Loe(e)}function Noe(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(Kq||(Kq={}));const Z8e=new _4({heightModel:"gravity-related-height"});var np;function Qq(e){return e===np.Global?"global":"local"}(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(np||(np={}));let b6,jO=null;async function Y8e(e){jO||(jO=De(()=>import("./geometryServiceUtils-f3594cf8.js"),["./geometryServiceUtils-f3594cf8.js","./preload-helper-388ac9d5.js"],import.meta.url).then(t=>b6=t)),await jO,hr(e)}async function Foe(e,t,i,r){if(!e)return null;const n=e.spatialReference;return mm()||rp(n,t)?W0(e,t):b6?b6.projectGeometry(e,t,i,r):(await Promise.race([Y8e(r),ym(r)]),Foe(e,t,i,r))}let ar=class extends Lt{constructor(t){super(t),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=Vx(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return ee(this.userSpatialReference)?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return Re(this.userSpatialReference)||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){const t=this.map?.(),i=[];return ee(this.priorityCollection)&&i.push(this.priorityCollection),i.push({parent:t?.basemap,layers:t?.basemap?.baseLayers},{layers:t?.layers},{parent:t?.ground,layers:t?.ground?.layers},{parent:t?.basemap,layers:t?.basemap?.referenceLayers}),i}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:t,updating:i}=this._allLayers;let r=null;for(const s of t){const o=this._getSupportedSpatialReferences(s);if(o.length>0){const a=this._narrowDownSpatialReferenceCandidates(r,o);ee(a)&&(r=a)}if(ee(r)&&r.length===1)break}if(i&&(Re(r)||r.length!==1))return{updating:!0};const n=this._pickSpatialReferenceCandidate(r);return{spatialReference:ee(n)?n.spatialReference:null,viewingMode:ee(n)?n.viewingMode:null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:t,updating:i}=this._collectLayers([{parent:this.map?.()?.basemap,layers:this.map?.()?.basemap?.baseLayers},{layers:this.map?.()?.layers}]);if(t&&t.length>0&&"tileInfo"in t[0]){const r=t[0].tileInfo;return{tileInfo:r&&r.spatialReference.equals(this.spatialReference)?r:null,updating:!1}}return{updating:i}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};const{layers:t,updating:i}=this._allLayers;for(const r of t)if(J8e(r)){const n=H8e(r);if(n)return{heightModelInfo:n,vcsWkid:r.spatialReference?.vcsWkid,latestVcsWkid:r.spatialReference?.latestVcsWkid,updating:!1}}return{updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const t=this._allLayers,i=t.updating,r=[];for(const n of t.layers){const s="fullExtents"in n&&n.fullExtents||(ee(n.fullExtent)?[n.fullExtent]:[]),o=this.requiresExtentInSpatialReference?null:s[0],a=s.find(l=>l.spatialReference.equals(this.spatialReference))??o;if(a)return{candidates:[{extent:a,layer:n}],updating:!1};if(this._getSupportedSpatialReferences(n).length>0)for(const l of s)r.push({extent:l,layer:n})}return{candidates:r,updating:i}}get _extentTask(){const{candidates:t,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(Re(t)||t.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(t),n=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:ee(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished}:(ee(this._projectExtentTask.task)&&(this._projectExtentTask.task=Vx(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:n.clone(),task:aK(async s=>{try{const o=await Foe(r.extent,n,r.layer.portalItem,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(Sl(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(t,i){if(Re(t))return i;const r=[],n=(s,o)=>ee(s)?ee(o)?s===o&&s:s:o;for(const s of t)for(const o of i){if(!s.spatialReference.equals(o.spatialReference))continue;const a=n(s.viewingMode,o.viewingMode);if(a!==!1){r.push({spatialReference:s.spatialReference,viewingMode:a});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(t){const i=this.defaultSpatialReference;return Re(t)||t.length<1?ee(i)?{spatialReference:i,viewingMode:null}:null:(ee(i)&&t.length>1&&t.some(({spatialReference:r})=>r.equals(i))&&(t=t.filter(({spatialReference:r})=>r.equals(i))),t.length>1&&t.some(({viewingMode:r})=>r!==np.Local)&&(t=t.filter(({viewingMode:r})=>r!==np.Local)),t[0])}_getSupportedSpatialReferences(t){const i="supportedSpatialReferences"in t&&t.supportedSpatialReferences||(t.spatialReference?[t.spatialReference]:[]);if(i.length===0)return[];const r=[];for(const n of i){const s=this.getSpatialReferenceSupport({spatialReference:n,layer:t});if(ee(s)){const o=ee(s.constraints)?s.constraints:[{spatialReference:n,viewingMode:null}];for(const{spatialReference:a,viewingMode:l}of o)(!this.requiresExtentInSpatialReference||Re(this.userSpatialReference)||a.equals(this.userSpatialReference))&&r.push({spatialReference:a,viewingMode:l})}}return r}_pickExtentCandidate(t){const i=this.spatialReference;return t.find(({extent:r})=>i.equals(r.spatialReference))||t[0]}_collectLayers(t){if(this._loadMaybe(this.map?.())!=="loaded")return{layers:[],updating:!0};const i={layers:[],preloading:-1,updating:!1};for(const r of t)if(this._collectCollection(r,i),i.preloading===this.sourcePreloadCount)break;return{layers:i.layers,updating:i.updating}}_collectCollection(t,i){if(t.layers){switch(this._loadMaybe(t.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const r of t.layers){switch(this._loadMaybe(r)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":i.updating||i.layers.push(r),"layers"in r&&this._collectCollection({layers:r.layers},i)}if(i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(t){return t&&"loadStatus"in t&&t.loadStatus!=null?t.loadStatus==="not-loaded"?(t.load().catch(()=>{}),"loading"):t.loadStatus:"loaded"}};h([p()],ar.prototype,"required",void 0),h([p({constructOnly:!0})],ar.prototype,"map",void 0),h([p({constructOnly:!0})],ar.prototype,"getSpatialReferenceSupport",void 0),h([p()],ar.prototype,"defaultSpatialReference",void 0),h([p()],ar.prototype,"userSpatialReference",void 0),h([p()],ar.prototype,"sourcePreloadCount",void 0),h([p()],ar.prototype,"priorityCollection",void 0),h([p()],ar.prototype,"requiresExtentInSpatialReference",void 0),h([p()],ar.prototype,"suspended",void 0),h([p({readOnly:!0})],ar.prototype,"ready",null),h([p({readOnly:!0})],ar.prototype,"heightModelInfoReady",null),h([p({readOnly:!0})],ar.prototype,"spatialReference",null),h([p({readOnly:!0})],ar.prototype,"extent",null),h([p({readOnly:!0})],ar.prototype,"heightModelInfo",null),h([p({readOnly:!0})],ar.prototype,"vcsWkid",null),h([p({readOnly:!0})],ar.prototype,"latestVcsWkid",null),h([p({readOnly:!0})],ar.prototype,"viewingMode",null),h([p({readOnly:!0})],ar.prototype,"tileInfo",null),h([p({readOnly:!0})],ar.prototype,"mapCollections",null),h([p({readOnly:!0})],ar.prototype,"_allLayers",null),h([p({readOnly:!0})],ar.prototype,"_spatialReferenceTask",null),h([p({readOnly:!0})],ar.prototype,"_tileInfoTask",null),h([p({readOnly:!0})],ar.prototype,"_heightModelInfoTask",null),h([p({readOnly:!0})],ar.prototype,"_extentCandidatesTask",null),h([p()],ar.prototype,"_extentTask",null),h([p()],ar.prototype,"_projectExtentTask",void 0),ar=h([ce("esri.views.support.DefaultsFromMap")],ar);var wT;let Ht=wT=class extends Wo(hp.EventedMixin(XS(Lt))){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new M0({getCollections:()=>[this.basemapView?.baseLayerViews,this.groundView?.layerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:t=>t.layerViews}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new Xg,this.analyses=new KA,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Pt,this.magnifier=new Ioe,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.timeReference=new fm,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new q8e,this.navigation=new koe,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new N8e(this),this.persistableViewModels=new Pt,this._isValid=!1,this._readyCycleForced=!1,this._currentSpatialReference=null,this.handles.add(nt(()=>this.preconditionsReady,t=>{t?(this._currentSpatialReference=this.spatialReference,wT.views.add(this)):(this._currentSpatialReference=null,wT.views.remove(this)),this.notifyChange("spatialReference"),!t&&this.ready?(this.toolViewManager?.detach(),ee(this.analysisViewManager)&&this.analysisViewManager.detach(),this.layerViewManager?.clear(),this._teardown()):t&&!this.ready&&(this._startup(),ee(this.analysisViewManager)&&this.analysisViewManager.attach(),this.toolViewManager.attach())},wl))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,m4(()=>this.ready)))),this.basemapView=new yf({view:this}),this.layerViewManager=new C8e({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new V8e({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([nt(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},{sync:!0,initial:!0}),nt(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},{sync:!0}),nt(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let e=null;this.handles.add([nt(()=>this.defaultsFromMap?.ready,t=>{const i=this.map?.allLayers.length>0;if(t&&!this.spatialReference&&i){if(ee(e))return;const r=cw(()=>e=Vx(e));e=aK(async n=>{try{await z5(this.spatialReferenceWarningDelay,null,n)}catch{return}finally{e=null}et.getLogger(this.declaredClass).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(r,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=qr(this.graphics),this.analyses=qr(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),qr(this.analysisViewManager),this.toolViewManager=qr(this.toolViewManager),this.layerViewManager=qr(this.layerViewManager),this.basemapView=qr(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const e=this.map;this.map=null,e?.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return et.getLogger(this.declaredClass).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new ar({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:e=>this.getSpatialReferenceSupport(e),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||Ml.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e?.destroyed&&(et.getLogger(this.declaredClass).warn("#map","The provided map is already destroyed",{map:e}),e=null),Ml.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",e))}get spatialReference(){let e=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return e&&this.defaultsFromMap?.required?.heightModelInfo&&(e=e.clone(),e.vcsWkid=this.defaultsFromMap.vcsWkid,e.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),e}set spatialReference(e){const t=!vn(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){const e=this.toolViewManager?this.toolViewManager.cursor:null;return ee(e)?e:this._cursor||"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(e){return this.layerViewManager.whenLayerView(e)}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}importLayerView(e){throw new Ce("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return ee(this.getSpatialReferenceSupport({spatialReference:e}))}when(e,t){return this.isResolved()&&!this.ready&&et.getLogger(this.declaredClass).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(Tl(()=>this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};Ht.views=new Pt,h([p()],Ht.prototype,"_userSpatialReference",void 0),h([p()],Ht.prototype,"activeTool",null),h([p({readOnly:!0})],Ht.prototype,"allLayerViews",void 0),h([p()],Ht.prototype,"groundView",void 0),h([p()],Ht.prototype,"animation",null),h([p()],Ht.prototype,"basemapView",void 0),h([p()],Ht.prototype,"center",null),h([p({readOnly:!0})],Ht.prototype,"_defaultsFromMapSettings",null),h([p()],Ht.prototype,"defaultsFromMap",null),h([p()],Ht.prototype,"fatalError",void 0),h([p({type:Kt})],Ht.prototype,"extent",null),h([p(h8(Xg,"graphics"))],Ht.prototype,"graphics",void 0),h([p(h8(KA,"analyses"))],Ht.prototype,"analyses",void 0),h([p({readOnly:!0,type:_4})],Ht.prototype,"heightModelInfo",null),h([p({readOnly:!0})],Ht.prototype,"interacting",null),h([p({readOnly:!0})],Ht.prototype,"navigating",null),h([p({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Ht.prototype,"preconditionsReady",null),h([p({readOnly:!0})],Ht.prototype,"typeSpecificPreconditionsReady",void 0),h([p({type:Pt,readOnly:!0})],Ht.prototype,"layerViews",void 0),h([p()],Ht.prototype,"resolution",null),h([p({type:Ioe})],Ht.prototype,"magnifier",void 0),h([p({value:null,type:Bne})],Ht.prototype,"map",null),h([p()],Ht.prototype,"padding",void 0),h([p({readOnly:!0})],Ht.prototype,"ready",void 0),h([p({type:Et})],Ht.prototype,"spatialReference",null),h([p()],Ht.prototype,"spatialReferenceWarningDelay",void 0),h([p()],Ht.prototype,"stationary",null),h([p({readOnly:!0})],Ht.prototype,"supportsGround",void 0),h([p({type:ka})],Ht.prototype,"timeExtent",void 0),h([p({type:fm,nonNullable:!0})],Ht.prototype,"timeReference",void 0),h([p()],Ht.prototype,"tools",null),h([p()],Ht.prototype,"toolViewManager",void 0),h([p({readOnly:!0})],Ht.prototype,"type",void 0),h([p({type:Number})],Ht.prototype,"scale",void 0),h([p({readOnly:!0})],Ht.prototype,"updating",void 0),h([p({readOnly:!0})],Ht.prototype,"initialExtentRequired",void 0),h([p({readOnly:!0})],Ht.prototype,"initialExtent",null),h([p()],Ht.prototype,"cursor",null),h([p({readOnly:!0})],Ht.prototype,"input",void 0),h([p({type:koe,nonNullable:!0})],Ht.prototype,"navigation",void 0),h([p()],Ht.prototype,"layerViewManager",void 0),h([p()],Ht.prototype,"analysisViewManager",void 0),h([p()],Ht.prototype,"width",void 0),h([p()],Ht.prototype,"height",void 0),h([p({readOnly:!0})],Ht.prototype,"resizing",void 0),h([p({value:null,readOnly:!0})],Ht.prototype,"size",null),h([p({readOnly:!0})],Ht.prototype,"suspended",void 0),h([p({readOnly:!0})],Ht.prototype,"viewEvents",void 0),h([p({readOnly:!0})],Ht.prototype,"persistableViewModels",void 0),h([p()],Ht.prototype,"_isValid",void 0),h([p()],Ht.prototype,"_readyCycleForced",void 0),h([p()],Ht.prototype,"_currentSpatialReference",void 0),Ht=wT=h([ce("esri.views.View")],Ht);const K8e=Ht;let vf=class extends XT{constructor(t){super(t),this.state="running",this.target=null,this._dfd=null}initialize(){this.addResolvingPromise(new Promise((t,i)=>this._dfd={resolve:t,reject:i}))}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._dfd?.reject(new Ce("ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._dfd?.resolve())}update(t,i){i||(i=cp(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",i)}};h([p({readOnly:!0})],vf.prototype,"done",null),h([p({readOnly:!0,type:String})],vf.prototype,"state",void 0),h([p()],vf.prototype,"target",void 0),vf=h([ce("esri.views.ViewAnimation")],vf),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(vf||(vf={}));const w6=vf;function wg(e,t,i,r){const n=3*e,s=3*(i-e)-n,o=1-n-s,a=3*t,l=3*(r-t)-a,u=1-a-l;function c(g){return((o*g+s)*g+n)*g}function d(g){return((u*g+l)*g+a)*g}function f(g){return(3*o*g+2*s)*g+n}function m(g,v){let b,x,S,T,_,M;for(S=g,M=0;M<8;M++){if(T=c(S)-g,Math.abs(T)<v)return S;if(_=f(S),Math.abs(_)<1e-6)break;S-=T/_}if(b=0,x=1,S=g,S<b)return b;if(S>x)return x;for(;b<x;){if(T=c(S),Math.abs(T-g)<v)return S;g>T?b=S:x=S,S=.5*(x-b)+b}return S}return function(g,v=1e-6){return d(m(g,v))}}const Q8e=/^cubic-bezier\((.*)\)/,Ql={};function X8e(e){let t=Ql[e]||null;if(!t){const i=Q8e.exec(e);if(i){const r=i[1].split(",").map(n=>parseFloat(n.trim()));r.length!==4||r.some(n=>isNaN(n))||(t=wg.apply(wg,r))}}return t}Ql.ease=wg(.25,.1,.25,1),Ql.linear=wg(0,0,1,1),Ql.easeIn=Ql["ease-in"]=wg(.42,0,1,1),Ql.easeOut=Ql["ease-out"]=wg(0,0,.58,1),Ql.easeInOut=Ql["ease-in-out"]=wg(.42,0,.58,1);function tm(){return[1,0,0,1,0,0]}function e6e(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function t6e(e,t,i,r,n,s){return[e,t,i,r,n,s]}function i6e(e,t){return new Float64Array(e,t,6)}Object.freeze(Object.defineProperty({__proto__:null,clone:e6e,create:tm,createView:i6e,fromValues:t6e},Symbol.toStringTag,{value:"Module"}));function bS(e,t){return e[0]=t[0],e[1]=t[1],e}function xs(e,t,i){return e[0]=t,e[1]=i,e}function Doe(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function wS(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function joe(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function Uoe(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function r6e(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function n6e(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function s6e(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function o6e(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}function a6e(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function C3(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function l6e(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e}function $3(e,t){const i=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(i*i+r*r)}function QA(e,t){const i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r}function XA(e){const t=e[0],i=e[1];return Math.sqrt(t*t+i*i)}function Voe(e){const t=e[0],i=e[1];return t*t+i*i}function Boe(e,t){return e[0]=-t[0],e[1]=-t[1],e}function u6e(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function _6(e,t){const i=t[0],r=t[1];let n=i*i+r*r;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n),e}function zoe(e,t){return e[0]*t[0]+e[1]*t[1]}function Goe(e,t,i){const r=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=r,e}function c6e(e,t,i,r){const n=t[0],s=t[1];return e[0]=n+r*(i[0]-n),e[1]=s+r*(i[1]-s),e}function h6e(e,t){t=t||1;const i=2*e4()*Math.PI;return e[0]=Math.cos(i)*t,e[1]=Math.sin(i)*t,e}function d6e(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[2]*n,e[1]=i[1]*r+i[3]*n,e}function uh(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[2]*n+i[4],e[1]=i[1]*r+i[3]*n+i[5],e}function p6e(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[3]*n+i[6],e[1]=i[1]*r+i[4]*n+i[7],e}function f6e(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[4]*n+i[12],e[1]=i[1]*r+i[5]*n+i[13],e}function m6e(e,t,i,r){const n=t[0]-i[0],s=t[1]-i[1],o=Math.sin(r),a=Math.cos(r);return e[0]=n*a-s*o+i[0],e[1]=n*o+s*a+i[1],e}function y6e(e,t){const i=e[0],r=e[1],n=t[0],s=t[1];let o=i*i+r*r;o>0&&(o=1/Math.sqrt(o));let a=n*n+s*s;a>0&&(a=1/Math.sqrt(a));const l=(i*n+r*s)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function g6e(e){return"vec2("+e[0]+", "+e[1]+")"}function v6e(e,t){return e[0]===t[0]&&e[1]===t[1]}function b6e(e,t){const i=e[0],r=e[1],n=t[0],s=t[1],o=bu();return Math.abs(i-n)<=o*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-s)<=o*Math.max(1,Math.abs(r),Math.abs(s))}function w6e(e,t,i,r,n){let s=t[0]-i[0],o=t[1]-i[1];const a=(r[0]*s+r[1]*o)*(n-1);return s=r[0]*a,o=r[1]*a,e[0]=t[0]+s,e[1]=t[1]+o,e}const _6e=XA,R9=wS,x6e=joe,S6e=Uoe,E6e=$3,M6e=QA,I6e=Voe;Object.freeze(Object.defineProperty({__proto__:null,add:Doe,angle:y6e,ceil:r6e,copy:bS,cross:Goe,dist:E6e,distance:$3,div:S6e,divide:Uoe,dot:zoe,equals:b6e,exactEquals:v6e,floor:n6e,inverse:u6e,len:_6e,length:XA,lerp:c6e,max:o6e,min:s6e,mul:x6e,multiply:joe,negate:Boe,normalize:_6,projectAndScale:w6e,random:h6e,rotate:m6e,round:a6e,scale:C3,scaleAndAdd:l6e,set:xs,sqrDist:M6e,sqrLen:I6e,squaredDistance:QA,squaredLength:Voe,str:g6e,sub:R9,subtract:wS,transformMat2:d6e,transformMat2d:uh,transformMat3:p6e,transformMat4:f6e},Symbol.toStringTag,{value:"Module"}));function gn(){return[0,0]}function T6e(e){return[e[0],e[1]]}function O3(e,t){return[e,t]}function A6e(e){const t=gn(),i=Math.min(2,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function C6e(e,t){return new Float64Array(e,t,2)}function qoe(){return gn()}function Hoe(){return O3(1,1)}function Woe(){return O3(1,0)}function Joe(){return O3(0,1)}const $6e=qoe(),O6e=Hoe(),R6e=Woe(),k6e=Joe();Object.freeze(Object.defineProperty({__proto__:null,ONES:O6e,UNIT_X:R6e,UNIT_Y:k6e,ZEROS:$6e,clone:T6e,create:gn,createView:C6e,fromArray:A6e,fromValues:O3,ones:Hoe,unitX:Woe,unitY:Joe,zeros:qoe},Symbol.toStringTag,{value:"Module"}));const Zoe=96,Yoe=39.37,L6e=180/Math.PI;function Koe(e){return e.wkid?e:e.spatialReference||Et.WGS84}function k9(e,t){return t.type?xs(e,t.x,t.y):bS(e,t)}function Qoe(e){return dp(e)}function Mx(e,t){const i=Math.max(1,t[0]),r=Math.max(1,t[1]);return Math.max(e.width/i,e.height/r)*z6e(e.spatialReference)}async function F2(e,t,i,r){let n,s;if(!e||Array.isArray(e)&&!e.length)return null;if(Pt.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const a=e.every(c=>"attributes"in c),l=e.some(c=>!c.geometry);let u=e;if(a&&l&&t&&t.allLayerViews){const c=new Map;for(const g of e){const v=g.layer,b=c.get(v)||[],x=g.attributes[v.objectIdField];x!=null&&b.push(x),c.set(v,b)}const d=[];c.forEach((g,v)=>{const b=t.allLayerViews.find(x=>x.layer.id===v.id);if(b&&"queryFeatures"in b){const x=v.createQuery();x.objectIds=g,x.returnGeometry=!0,d.push(b.queryFeatures(x))}});const f=await Promise.all(d),m=[];for(const g of f)if(g&&g.features&&g.features.length)for(const v of g.features)ee(v.geometry)&&m.push(v.geometry);u=m}for(const c of u)r=await F2(c,t,i,r);return r}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")n=new At(e);else if(e instanceof pp)n=e;else if("geometry"in e){if(e.geometry)n=e.geometry;else if(e.layer){const a=e.layer,l=t.allLayerViews.find(u=>u.layer.id===a.id);if(l&&"queryFeatures"in l){const u=a.createQuery();u.objectIds=[e.attributes[a.objectIdField]],u.returnGeometry=!0;const c=await l.queryFeatures(u);n=HZ(c,"features",0,"geometry")}}}if(Re(n)||(s=n.type==="point"?new Kt({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference}):n.extent,!s))return null;mm()||rp(s.spatialReference,i)||await ym();const o=W0(s,i);return o?r=r?r.union(o):o:null}function P6e(e){if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&e.layer&&e.layer.minScale&&e.layer.maxScale){const t=e.layer;return{min:t.minScale,max:t.maxScale}}if(Array.isArray(e)&&e.length&&e.every(t=>"layer"in t)){let t=0,i=0;for(const r of e){const n=r.layer;n&&n.minScale&&n.maxScale&&(t=n.minScale<t?n.minScale:t,i=n.maxScale>i?n.maxScale:i)}return t&&i?{min:t,max:i}:null}}}function UO(e,t){return vn(Koe(e),t)?e:W0(e,t)}async function N6e(e,t){if(!e||!t)return new _h({targetGeometry:new At,scale:0,rotation:0});let i=t.spatialReference;const{constraints:r,padding:n,viewpoint:s,size:o}=t,a=[n?o[0]-n.left-n.right:o[0],n?o[1]-n.top-n.bottom:o[1]];let l=null;e instanceof _h?l=e:e.viewpoint?l=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(l=e.target);let u=null;l&&l.targetGeometry?u=l.targetGeometry:e instanceof Kt?u=e:(e||e&&("center"in e||"extent"in e||"target"in e))&&(u=await F2(e.center,t,i)||await F2(e.extent,t,i)||await F2(e.target,t,i)||await F2(e,t,i)),!u&&s&&s.targetGeometry?u=s.targetGeometry:!u&&t.extent&&(u=t.extent),i||(i=Koe(t.spatialReference||t.extent||u)),mm()||vn(u.spatialReference,i)||rp(u,i)||await ym();const c=UO(u.center?u.center:u,i);let d=0;if(l&&ee(l.targetGeometry)&&l.targetGeometry.type==="point")d=l.scale;else if("scale"in e&&e.scale)d=e.scale;else if("zoom"in e&&e.zoom!==-1&&r&&r.effectiveLODs)d=r.zoomToScale(e.zoom);else if(Array.isArray(u)||u.type==="point"||u.type==="extent"&&u.width===0&&u.height===0){const v=UO(t.extent,i);d=ee(v)?Mx(v,a):t.extent?Mx(t.extent,a):s.scale}else d=Mx(UO(u.extent,i),a);const f=P6e(e);f&&(f.min&&f.min>d?d=f.min:f.max&&f.max<d&&(d=f.max));let m=0;l?m=l.rotation:e.hasOwnProperty("rotation")?m=e.rotation:s&&(m=s.rotation);let g=new _h({targetGeometry:c,scale:d,rotation:m});return r&&(g=r.fit(g),r.constrainByGeometry(g),r.rotationEnabled||(g.rotation=m)),g}function _c(e,t){const i=e.targetGeometry,r=t.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function F6e(e,t,i){return i?xs(e,.5*(t[0]-i.right+i.left),.5*(t[1]-i.bottom+i.top)):C3(e,t,.5)}const D6e=function(){const e=gn();return function(t,i,r){const n=i.targetGeometry;k9(e,n);const s=.5*Lw(i);return t.xmin=e[0]-s*r[0],t.ymin=e[1]-s*r[1],t.xmax=e[0]+s*r[0],t.ymax=e[1]+s*r[1],t.spatialReference=n.spatialReference,t}}();function j6e(e,t,i,r,n){return x6(e,t,i.center),e.scale=Mx(i,r),n&&n.constraints&&n.constraints.constrain(e),e}function U6e(e,t,i,r){return N9(e,t,i,r),A9(e,e)}const Xoe=function(){const e=gn();return function(t,i,r){return R9(t,G6e(t,i),F6e(e,i,r))}}(),V6e=function(){const e=tm(),t=gn();return function(i,r,n,s){const o=Lw(r),a=L9(r);return xs(t,o,o),_oe(e,t),z4(e,e,a),gS(e,e,Xoe(t,n,s)),gS(e,e,[0,s.top-s.bottom]),xs(i,e[4],e[5])}}();function Lw(e){return e.scale*B6e(e.targetGeometry)}function B6e(e){return ee(e)&&Es(e.spatialReference)?1/(Qoe(e.spatialReference)*Yoe*Zoe):1}function L9(e){return hF(e.rotation)||0}function z6e(e){return Es(e)?Qoe(e)*Yoe*Zoe:1}function G6e(e,t){return C3(e,t,.5)}const P9=function(){const e=gn(),t=gn(),i=gn();return function(r,n,s,o,a,l){return Boe(e,n),C3(t,s,.5*l),xs(i,1/o*l,-1/o*l),$9(r,t),a&&z4(r,r,a),C9(r,r,i),gS(r,r,e),r}}(),N9=function(){const e=gn();return function(t,i,r,n){const s=Lw(i),o=L9(i);return k9(e,i.targetGeometry),P9(t,e,r,s,o,n)}}(),q6e=function(){const e=gn();return function(t,i,r,n){const s=Lw(i);return k9(e,i.targetGeometry),P9(t,e,r,s,0,n)}}();function H6e(e){const t=gl(e);return t?t.valid[1]-t.valid[0]:0}function W6e(e,t){return Math.round(H6e(e)/t)}const J6e=function(){const e=gn(),t=gn(),i=[0,0,0];return function(r,n,s){wS(e,r,n),_6(e,e),wS(t,r,s),_6(t,t),Goe(i,e,t);let o=Math.acos(zoe(e,t)/(XA(e)*XA(t)))*L6e;return i[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),Z6e=function(){const e=gn();return function(t,i,r,n){const s=t.targetGeometry;return _c(t,i),V6e(e,i,r,n),s.x+=e[0],s.y+=e[1],t}}(),x6=function(e,t,i){_c(e,t);const r=e.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e},Y6e=function(){const e=gn();return function(t,i,r,n,s){s||(s="center"),R9(e,r,n),C3(e,e,.5);const o=e[0],a=e[1];switch(s){case"center":xs(e,0,0);break;case"left":xs(e,-o,0);break;case"top":xs(e,0,a);break;case"right":xs(e,o,0);break;case"bottom":xs(e,0,-a);break;case"top-left":xs(e,-o,a);break;case"bottom-left":xs(e,-o,-a);break;case"top-right":xs(e,o,a);break;case"bottom-right":xs(e,o,-a)}return q4(t,i,e),t}}();function eht(e,t,i){return _c(e,t),e.rotation+=i,e}function K6e(e,t,i){return _c(e,t),e.rotation=i,e}const Q6e=function(){const e=gn();return function(t,i,r,n,s){return _c(t,i),isNaN(r)||r===0||(tae(e,n,i,s),t.scale=i.scale*r,iae(e,e,t,s),q4(t,t,xs(e,e[0]-n[0],n[1]-e[1]))),t}}();function Xq(e,t,i){return _c(e,t),e.scale=i,e}const eae=function(){const e=gn();return function(t,i,r,n,s,o){return _c(t,i),isNaN(r)||r===0||(tae(e,s,i,o),t.scale=i.scale*r,t.rotation+=n,iae(e,e,t,o),q4(t,t,xs(e,e[0]-s[0],s[1]-e[1]))),t}}(),tht=function(){const e=gn(),t=gn();return function(i,r,n,s,o,a,l){return Xoe(t,a,l),Doe(e,o,t),s?eae(i,r,n,s,e,a):Q6e(i,r,n,e,a)}}(),tae=function(){const e=tm();return function(t,i,r,n){return uh(t,i,U6e(e,r,n,1))}}(),iae=function(){const e=tm();return function(t,i,r,n){return uh(t,i,N9(e,r,n,1))}}(),q4=function(){const e=gn(),t=tm();return function(i,r,n){_c(i,r);const s=Lw(r),o=i.targetGeometry;return woe(t,L9(r)),C9(t,t,O3(s,s)),uh(e,n,t),o.x+=e[0],o.y+=e[1],i}}();let X6e=class{constructor(t,i,r,n){const s=t.targetGeometry,o=i.targetGeometry;n?typeof n=="string"&&(n=X8e(n)||Ql.ease):n=Ql.ease,this.easing=n,this.duration=r,this.sCenterX=s.x,this.sCenterY=s.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=o.x,this.tCenterY=o.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(t,i){const r=this.easing(i);let n,s,o,a;i>=1?(n=this.tCenterX,s=this.tCenterY,o=this.tRotation,a=this.tScale):(n=this.sCenterX+r*this.dCenterX,s=this.sCenterY+r*this.dCenterY,o=this.sRotation+r*this.dRotation,a=this.sScale+r*this.dScale),t.targetGeometry.x=n,t.targetGeometry.y=s,t.scale=a,t.rotation=o}},Ed=class extends Lt{constructor(t){super(t),this.updateFunction=null,this.animation=null,this.duration=200,this.transition=null,this.easing=Ql.ease,this.view=null,this.viewpoint=new _h({targetGeometry:new At,scale:0,rotation:0}),this._updateTask=bb({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask=yn(this._updateTask)}animate(t,i,r){this.stop();const n=this.viewpoint;_c(n,i),this.transition=new X6e(this.viewpoint,t.target,r&&r.duration||this.duration,r&&r.easing||this.easing);const s=()=>{this.animation===t&&this._updateTask&&(t.state==="finished"&&(this.transition?.applyRatio(this.viewpoint,1),this.view?.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinous(t,i){this.stop(),this.updateFunction=i,this.viewpoint=t;const r=new w6({target:t.clone()}),n=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){const i=this.animation;if(i&&i.state!==w6.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime);else{const r=this.transition,n=(performance.now()-this._startTime)/r.duration,s=n>=1;r.applyRatio(this.viewpoint,n),s&&this.animation?.finish()}this.view?.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};h([p()],Ed.prototype,"animation",void 0),h([p()],Ed.prototype,"duration",void 0),h([p()],Ed.prototype,"transition",void 0),h([p()],Ed.prototype,"easing",void 0),h([p()],Ed.prototype,"view",void 0),h([p()],Ed.prototype,"viewpoint",void 0),Ed=h([ce("esri.views.2d.AnimationManager")],Ed);const eNe=Ed;let tNe=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)},this.update=()=>{this._updateRequested=!1;const{basemapView:i,graphicsView:r,labelManager:n,layerViews:s,state:{id:o}}=this.view;i?.baseLayerViews.forEach(this._updateLayerView,this),s.forEach(this._updateLayerView,this),i?.referenceLayerViews.forEach(this._updateLayerView,this),ee(n)&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),ee(r)&&(r.lastUpdateId!==o&&(r.viewChange(),r.lastUpdateId=o),r.updateRequested&&r.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle?.pause()}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=nt(()=>t.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=bb(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){if(!t.attached)return void this.requestUpdate();const i=this.view.state,r=t.lastUpdateId;r!=null&&(this.stationary||t.moving)||(t.moving=!0,t.moveStart()),r!==i.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=i.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&t.layerViews.forEach(this._updateLayerView,this)}};function dn(){return Promise.all([De(()=>import("./webglDeps-14f25380.js"),["./webglDeps-14f25380.js","./VertexArrayObject-e9cbf53c.js","./Texture-54c1cd22.js","./enums-64ab819c.js","./ProgramTemplate-edacfcc0.js","./programUtils-d3ce4af8.js","./NestedMap-7c434b47.js","./preload-helper-388ac9d5.js"],import.meta.url),De(()=>import("./mapViewDeps-0b9d705c.js"),["./mapViewDeps-0b9d705c.js","./MagnifierPrograms-ef986b03.js","./_commonjsHelpers-2f3e7994.js","./WGLContainer-89ed5ced.js","./definitions-cc1dbf1d.js","./VertexArrayObject-e9cbf53c.js","./Texture-54c1cd22.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./color-db1e2af1.js","./enums-f1a6a48a.js","./ProgramTemplate-edacfcc0.js","./MaterialKey-b40e2f2f.js","./utils-8928f1dc.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-9107641e.js","./earcut-61f7b102.js","./ExpandedCIM-9c7118f8.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-3cda2a0c.js","./floatRGBA-a019290c.js","./rasterizingUtils-9ae385c0.js","./imageutils-ce0ae93c.js","./Matcher-7e90ee77.js","./visualVariablesUtils-19bb0f88.js","./visualVariablesUtils-0c1b8204.js","./tileUtils-c2f19f52.js","./TurboLine-3fb14243.js","./devEnvironmentUtils-f2a1f21e.js","./CircularArray-faaa0557.js","./webgl-debug-b1f7a2c5.js","./ComputedAttributeStorage-119e2cd6.js","./arcadeTimeUtils-b303a482.js","./executionError-c1d13a98.js","./centroid-ad024a23.js","./BufferPool-3f973015.js","./enums-fb086c25.js","./programUtils-d3ce4af8.js","./NestedMap-7c434b47.js","./RenderingContext-b5a82d1c.js","./OrderIndependentTransparency-e1b3a745.js","./basicInterfaces-b7051eb1.js","./doublePrecisionUtils-e3c3d0d8.js","./imageUtils-c2d0d1ae.js","./GraphicsView2D-0752e7a2.js","./normalizeUtilsSync-96066691.js","./projectionSupport-3f6ca955.js","./json-48e3ea08.js","./AttributeStoreView-a03da5ff.js","./TiledDisplayObject-34f8c26b.js","./schemaUtils-4ce7eb31.js","./util-bcfd34c1.js","./GraphicContainer-3ca17b25.js","./BaseGraphicContainer-5ddab985.js","./FeatureContainer-e59f9073.js","./TileContainer-daa0ec0d.js","./vec3f32-ad1dc57f.js","./requestImageUtils-7de6e3c3.js"],import.meta.url)])}const I_=()=>dn().then(()=>De(()=>import("./TileLayerView2D-16208490.js"),["./TileLayerView2D-16208490.js","./MagnifierPrograms-ef986b03.js","./_commonjsHelpers-2f3e7994.js","./WGLContainer-89ed5ced.js","./definitions-cc1dbf1d.js","./VertexArrayObject-e9cbf53c.js","./Texture-54c1cd22.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./color-db1e2af1.js","./enums-f1a6a48a.js","./ProgramTemplate-edacfcc0.js","./MaterialKey-b40e2f2f.js","./utils-8928f1dc.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-9107641e.js","./earcut-61f7b102.js","./ExpandedCIM-9c7118f8.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-3cda2a0c.js","./floatRGBA-a019290c.js","./rasterizingUtils-9ae385c0.js","./imageutils-ce0ae93c.js","./Matcher-7e90ee77.js","./visualVariablesUtils-19bb0f88.js","./visualVariablesUtils-0c1b8204.js","./tileUtils-c2f19f52.js","./TurboLine-3fb14243.js","./devEnvironmentUtils-f2a1f21e.js","./CircularArray-faaa0557.js","./webgl-debug-b1f7a2c5.js","./ComputedAttributeStorage-119e2cd6.js","./arcadeTimeUtils-b303a482.js","./executionError-c1d13a98.js","./centroid-ad024a23.js","./BufferPool-3f973015.js","./enums-fb086c25.js","./OrderIndependentTransparency-e1b3a745.js","./basicInterfaces-b7051eb1.js","./GraphicsView2D-0752e7a2.js","./normalizeUtilsSync-96066691.js","./projectionSupport-3f6ca955.js","./json-48e3ea08.js","./AttributeStoreView-a03da5ff.js","./TiledDisplayObject-34f8c26b.js","./schemaUtils-4ce7eb31.js","./util-bcfd34c1.js","./vec3f32-ad1dc57f.js","./imageUtils-b35a0ae5.js","./BitmapTileContainer-d6a8aab1.js","./Bitmap-d75cb323.js","./TileContainer-daa0ec0d.js","./LayerView-4cbc94e3.js","./HighlightGraphicContainer-13c896ed.js","./BaseGraphicContainer-5ddab985.js","./FeatureContainer-e59f9073.js","./RefreshableLayerView-bcc6a8c5.js","./drapedUtils-2453c0fd.js","./popupUtils-4c7b9c4d.js"],import.meta.url)),S1=()=>dn().then(()=>De(()=>import("./FeatureLayerView2D-c99f7d01.js"),["./FeatureLayerView2D-c99f7d01.js","./Container-9107641e.js","./definitions-cc1dbf1d.js","./enums-64ab819c.js","./Texture-54c1cd22.js","./LayerView-4cbc94e3.js","./schemaUtils-4ce7eb31.js","./color-db1e2af1.js","./enums-f1a6a48a.js","./VertexElementDescriptor-2925c6af.js","./utils-8928f1dc.js","./MaterialKey-b40e2f2f.js","./visualVariablesUtils-0c1b8204.js","./ExpandedCIM-9c7118f8.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-3cda2a0c.js","./floatRGBA-a019290c.js","./util-bcfd34c1.js","./popupUtils-4c7b9c4d.js","./RefreshableLayerView-bcc6a8c5.js"],import.meta.url)),eH={"base-dynamic":()=>dn().then(()=>De(()=>import("./BaseDynamicLayerView2D-4bdebe0e.js"),["./BaseDynamicLayerView2D-4bdebe0e.js","./BitmapContainer-58f50df4.js","./WGLContainer-89ed5ced.js","./definitions-cc1dbf1d.js","./VertexArrayObject-e9cbf53c.js","./Texture-54c1cd22.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./color-db1e2af1.js","./enums-f1a6a48a.js","./ProgramTemplate-edacfcc0.js","./MaterialKey-b40e2f2f.js","./utils-8928f1dc.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-9107641e.js","./earcut-61f7b102.js","./LayerView-4cbc94e3.js","./ExportStrategy-103b54cb.js","./Bitmap-d75cb323.js","./RefreshableLayerView-bcc6a8c5.js","./preload-helper-388ac9d5.js"],import.meta.url)),"base-tile":I_,"bing-maps":I_,csv:S1,"geo-rss":()=>dn().then(()=>De(()=>import("./GeoRSSLayerView2D-d7617ae9.js"),["./GeoRSSLayerView2D-d7617ae9.js","./LayerView-4cbc94e3.js","./Container-9107641e.js","./definitions-cc1dbf1d.js","./enums-64ab819c.js","./Texture-54c1cd22.js","./GraphicContainer-3ca17b25.js","./color-db1e2af1.js","./enums-f1a6a48a.js","./VertexElementDescriptor-2925c6af.js","./BaseGraphicContainer-5ddab985.js","./FeatureContainer-e59f9073.js","./AttributeStoreView-a03da5ff.js","./TiledDisplayObject-34f8c26b.js","./visualVariablesUtils-19bb0f88.js","./visualVariablesUtils-0c1b8204.js","./VertexArrayObject-e9cbf53c.js","./TileContainer-daa0ec0d.js","./WGLContainer-89ed5ced.js","./ProgramTemplate-edacfcc0.js","./MaterialKey-b40e2f2f.js","./utils-8928f1dc.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./earcut-61f7b102.js","./vec3f32-ad1dc57f.js","./GraphicsView2D-0752e7a2.js","./ExpandedCIM-9c7118f8.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-3cda2a0c.js","./floatRGBA-a019290c.js","./normalizeUtilsSync-96066691.js","./projectionSupport-3f6ca955.js","./json-48e3ea08.js","./Matcher-7e90ee77.js","./tileUtils-c2f19f52.js","./TurboLine-3fb14243.js","./devEnvironmentUtils-f2a1f21e.js","./schemaUtils-4ce7eb31.js","./util-bcfd34c1.js","./ComputedAttributeStorage-119e2cd6.js","./arcadeTimeUtils-b303a482.js","./executionError-c1d13a98.js","./centroid-ad024a23.js"],import.meta.url)),feature:S1,geojson:S1,graphics:()=>dn().then(()=>De(()=>import("./GraphicsLayerView2D-3403d17f.js"),["./GraphicsLayerView2D-3403d17f.js","./LayerView-4cbc94e3.js","./Container-9107641e.js","./definitions-cc1dbf1d.js","./enums-64ab819c.js","./Texture-54c1cd22.js","./GraphicContainer-3ca17b25.js","./color-db1e2af1.js","./enums-f1a6a48a.js","./VertexElementDescriptor-2925c6af.js","./BaseGraphicContainer-5ddab985.js","./FeatureContainer-e59f9073.js","./AttributeStoreView-a03da5ff.js","./TiledDisplayObject-34f8c26b.js","./visualVariablesUtils-19bb0f88.js","./visualVariablesUtils-0c1b8204.js","./VertexArrayObject-e9cbf53c.js","./TileContainer-daa0ec0d.js","./WGLContainer-89ed5ced.js","./ProgramTemplate-edacfcc0.js","./MaterialKey-b40e2f2f.js","./utils-8928f1dc.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./earcut-61f7b102.js","./vec3f32-ad1dc57f.js","./GraphicsView2D-0752e7a2.js","./ExpandedCIM-9c7118f8.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-3cda2a0c.js","./floatRGBA-a019290c.js","./normalizeUtilsSync-96066691.js","./projectionSupport-3f6ca955.js","./json-48e3ea08.js","./Matcher-7e90ee77.js","./tileUtils-c2f19f52.js","./TurboLine-3fb14243.js","./devEnvironmentUtils-f2a1f21e.js","./schemaUtils-4ce7eb31.js","./util-bcfd34c1.js","./ComputedAttributeStorage-119e2cd6.js","./arcadeTimeUtils-b303a482.js","./executionError-c1d13a98.js","./centroid-ad024a23.js"],import.meta.url)),group:()=>dn().then(()=>De(()=>import("./GroupLayerView2D-36669ace.js"),["./GroupLayerView2D-36669ace.js","./GroupContainer-7c5f77d9.js","./WGLContainer-89ed5ced.js","./definitions-cc1dbf1d.js","./VertexArrayObject-e9cbf53c.js","./Texture-54c1cd22.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./color-db1e2af1.js","./enums-f1a6a48a.js","./ProgramTemplate-edacfcc0.js","./MaterialKey-b40e2f2f.js","./utils-8928f1dc.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-9107641e.js","./earcut-61f7b102.js","./LayerView-4cbc94e3.js","./preload-helper-388ac9d5.js"],import.meta.url)),imagery:()=>dn().then(()=>De(()=>import("./ImageryLayerView2D-967a7646.js"),["./ImageryLayerView2D-967a7646.js","./RasterVFDisplayObject-7c8a424b.js","./VertexArrayObject-e9cbf53c.js","./Texture-54c1cd22.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./WGLContainer-89ed5ced.js","./definitions-cc1dbf1d.js","./color-db1e2af1.js","./enums-f1a6a48a.js","./ProgramTemplate-edacfcc0.js","./MaterialKey-b40e2f2f.js","./utils-8928f1dc.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-9107641e.js","./earcut-61f7b102.js","./LayerView-4cbc94e3.js","./GraphicsView2D-0752e7a2.js","./ExpandedCIM-9c7118f8.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-3cda2a0c.js","./floatRGBA-a019290c.js","./normalizeUtilsSync-96066691.js","./projectionSupport-3f6ca955.js","./json-48e3ea08.js","./AttributeStoreView-a03da5ff.js","./TiledDisplayObject-34f8c26b.js","./visualVariablesUtils-19bb0f88.js","./visualVariablesUtils-0c1b8204.js","./Matcher-7e90ee77.js","./tileUtils-c2f19f52.js","./TurboLine-3fb14243.js","./devEnvironmentUtils-f2a1f21e.js","./schemaUtils-4ce7eb31.js","./util-bcfd34c1.js","./ComputedAttributeStorage-119e2cd6.js","./arcadeTimeUtils-b303a482.js","./executionError-c1d13a98.js","./centroid-ad024a23.js","./HighlightGraphicContainer-13c896ed.js","./BaseGraphicContainer-5ddab985.js","./FeatureContainer-e59f9073.js","./TileContainer-daa0ec0d.js","./vec3f32-ad1dc57f.js","./BitmapContainer-58f50df4.js","./Bitmap-d75cb323.js","./ExportStrategy-103b54cb.js","./rasterProjectionHelper-a318d515.js","./popupUtils-4c7b9c4d.js","./RefreshableLayerView-bcc6a8c5.js"],import.meta.url)),"imagery-tile":()=>dn().then(()=>De(()=>import("./ImageryTileLayerView2D-d237a239.js"),["./ImageryTileLayerView2D-d237a239.js","./RasterVFDisplayObject-7c8a424b.js","./VertexArrayObject-e9cbf53c.js","./Texture-54c1cd22.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./WGLContainer-89ed5ced.js","./definitions-cc1dbf1d.js","./color-db1e2af1.js","./enums-f1a6a48a.js","./ProgramTemplate-edacfcc0.js","./MaterialKey-b40e2f2f.js","./utils-8928f1dc.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-9107641e.js","./earcut-61f7b102.js","./LayerView-4cbc94e3.js","./rasterUtils-cceaa50d.js","./TiledDisplayObject-34f8c26b.js","./TileContainer-daa0ec0d.js","./RawBlockCache-08f576c3.js","./rasterProjectionHelper-a318d515.js","./util-bcfd34c1.js","./popupUtils-4c7b9c4d.js","./RefreshableLayerView-bcc6a8c5.js","./preload-helper-388ac9d5.js"],import.meta.url)),kml:()=>dn().then(()=>De(()=>import("./KMLLayerView2D-3ba4fd62.js"),["./KMLLayerView2D-3ba4fd62.js","./kmlUtils-a970f083.js","./Bitmap-d75cb323.js","./Container-9107641e.js","./definitions-cc1dbf1d.js","./enums-64ab819c.js","./Texture-54c1cd22.js","./BitmapContainer-58f50df4.js","./WGLContainer-89ed5ced.js","./VertexArrayObject-e9cbf53c.js","./VertexElementDescriptor-2925c6af.js","./color-db1e2af1.js","./enums-f1a6a48a.js","./ProgramTemplate-edacfcc0.js","./MaterialKey-b40e2f2f.js","./utils-8928f1dc.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./earcut-61f7b102.js","./LayerView-4cbc94e3.js","./GraphicContainer-3ca17b25.js","./BaseGraphicContainer-5ddab985.js","./FeatureContainer-e59f9073.js","./AttributeStoreView-a03da5ff.js","./TiledDisplayObject-34f8c26b.js","./visualVariablesUtils-19bb0f88.js","./visualVariablesUtils-0c1b8204.js","./TileContainer-daa0ec0d.js","./vec3f32-ad1dc57f.js","./GraphicsView2D-0752e7a2.js","./ExpandedCIM-9c7118f8.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-3cda2a0c.js","./floatRGBA-a019290c.js","./normalizeUtilsSync-96066691.js","./projectionSupport-3f6ca955.js","./json-48e3ea08.js","./Matcher-7e90ee77.js","./tileUtils-c2f19f52.js","./TurboLine-3fb14243.js","./devEnvironmentUtils-f2a1f21e.js","./schemaUtils-4ce7eb31.js","./util-bcfd34c1.js","./ComputedAttributeStorage-119e2cd6.js","./arcadeTimeUtils-b303a482.js","./executionError-c1d13a98.js","./centroid-ad024a23.js","./rasterProjectionHelper-a318d515.js","./RenderingContext-b5a82d1c.js","./programUtils-d3ce4af8.js","./NestedMap-7c434b47.js","./OrderIndependentTransparency-e1b3a745.js","./basicInterfaces-b7051eb1.js","./doublePrecisionUtils-e3c3d0d8.js","./webgl-debug-b1f7a2c5.js","./rasterUtils-cceaa50d.js"],import.meta.url)),"knowledge-graph":()=>dn().then(()=>De(()=>import("./KnowledgeGraphLayerView2D-50805f26.js"),["./KnowledgeGraphLayerView2D-50805f26.js","./LayerView-4cbc94e3.js","./Container-9107641e.js","./definitions-cc1dbf1d.js","./enums-64ab819c.js","./Texture-54c1cd22.js","./preload-helper-388ac9d5.js"],import.meta.url)),"link-chart":()=>dn().then(()=>De(()=>import("./KnowledgeGraphLayerView2D-50805f26.js"),["./KnowledgeGraphLayerView2D-50805f26.js","./LayerView-4cbc94e3.js","./Container-9107641e.js","./definitions-cc1dbf1d.js","./enums-64ab819c.js","./Texture-54c1cd22.js","./preload-helper-388ac9d5.js"],import.meta.url)),"knowledge-graph-sublayer":S1,"map-image":()=>dn().then(()=>De(()=>import("./MapImageLayerView2D-e97476a3.js"),["./MapImageLayerView2D-e97476a3.js","./BitmapContainer-58f50df4.js","./WGLContainer-89ed5ced.js","./definitions-cc1dbf1d.js","./VertexArrayObject-e9cbf53c.js","./Texture-54c1cd22.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./color-db1e2af1.js","./enums-f1a6a48a.js","./ProgramTemplate-edacfcc0.js","./MaterialKey-b40e2f2f.js","./utils-8928f1dc.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-9107641e.js","./earcut-61f7b102.js","./LayerView-4cbc94e3.js","./GraphicsView2D-0752e7a2.js","./ExpandedCIM-9c7118f8.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-3cda2a0c.js","./floatRGBA-a019290c.js","./normalizeUtilsSync-96066691.js","./projectionSupport-3f6ca955.js","./json-48e3ea08.js","./AttributeStoreView-a03da5ff.js","./TiledDisplayObject-34f8c26b.js","./visualVariablesUtils-19bb0f88.js","./visualVariablesUtils-0c1b8204.js","./Matcher-7e90ee77.js","./tileUtils-c2f19f52.js","./TurboLine-3fb14243.js","./devEnvironmentUtils-f2a1f21e.js","./schemaUtils-4ce7eb31.js","./util-bcfd34c1.js","./ComputedAttributeStorage-119e2cd6.js","./arcadeTimeUtils-b303a482.js","./executionError-c1d13a98.js","./centroid-ad024a23.js","./HighlightGraphicContainer-13c896ed.js","./BaseGraphicContainer-5ddab985.js","./FeatureContainer-e59f9073.js","./TileContainer-daa0ec0d.js","./vec3f32-ad1dc57f.js","./ExportStrategy-103b54cb.js","./Bitmap-d75cb323.js","./RefreshableLayerView-bcc6a8c5.js","./drapedUtils-2453c0fd.js","./popupUtils-4c7b9c4d.js"],import.meta.url)),"map-notes":()=>dn().then(()=>De(()=>import("./MapNotesLayerView2D-ac32f6e2.js"),["./MapNotesLayerView2D-ac32f6e2.js","./Container-9107641e.js","./definitions-cc1dbf1d.js","./enums-64ab819c.js","./Texture-54c1cd22.js","./GroupContainer-7c5f77d9.js","./WGLContainer-89ed5ced.js","./VertexArrayObject-e9cbf53c.js","./VertexElementDescriptor-2925c6af.js","./color-db1e2af1.js","./enums-f1a6a48a.js","./ProgramTemplate-edacfcc0.js","./MaterialKey-b40e2f2f.js","./utils-8928f1dc.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./earcut-61f7b102.js","./LayerView-4cbc94e3.js","./GraphicContainer-3ca17b25.js","./BaseGraphicContainer-5ddab985.js","./FeatureContainer-e59f9073.js","./AttributeStoreView-a03da5ff.js","./TiledDisplayObject-34f8c26b.js","./visualVariablesUtils-19bb0f88.js","./visualVariablesUtils-0c1b8204.js","./TileContainer-daa0ec0d.js","./vec3f32-ad1dc57f.js","./GraphicsView2D-0752e7a2.js","./ExpandedCIM-9c7118f8.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-3cda2a0c.js","./floatRGBA-a019290c.js","./normalizeUtilsSync-96066691.js","./projectionSupport-3f6ca955.js","./json-48e3ea08.js","./Matcher-7e90ee77.js","./tileUtils-c2f19f52.js","./TurboLine-3fb14243.js","./devEnvironmentUtils-f2a1f21e.js","./schemaUtils-4ce7eb31.js","./util-bcfd34c1.js","./ComputedAttributeStorage-119e2cd6.js","./arcadeTimeUtils-b303a482.js","./executionError-c1d13a98.js","./centroid-ad024a23.js"],import.meta.url)),media:()=>dn().then(()=>De(()=>import("./MediaLayerView2D-935f5ac6.js"),["./MediaLayerView2D-935f5ac6.js","./perspectiveUtils-ade28abb.js","./normalizeUtilsSync-96066691.js","./mat3f64-221ce671.js","./MagnifierPrograms-ef986b03.js","./_commonjsHelpers-2f3e7994.js","./WGLContainer-89ed5ced.js","./definitions-cc1dbf1d.js","./VertexArrayObject-e9cbf53c.js","./Texture-54c1cd22.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./color-db1e2af1.js","./enums-f1a6a48a.js","./ProgramTemplate-edacfcc0.js","./MaterialKey-b40e2f2f.js","./utils-8928f1dc.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-9107641e.js","./earcut-61f7b102.js","./ExpandedCIM-9c7118f8.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-3cda2a0c.js","./floatRGBA-a019290c.js","./rasterizingUtils-9ae385c0.js","./imageutils-ce0ae93c.js","./Matcher-7e90ee77.js","./visualVariablesUtils-19bb0f88.js","./visualVariablesUtils-0c1b8204.js","./tileUtils-c2f19f52.js","./TurboLine-3fb14243.js","./devEnvironmentUtils-f2a1f21e.js","./CircularArray-faaa0557.js","./webgl-debug-b1f7a2c5.js","./ComputedAttributeStorage-119e2cd6.js","./arcadeTimeUtils-b303a482.js","./executionError-c1d13a98.js","./centroid-ad024a23.js","./BufferPool-3f973015.js","./enums-fb086c25.js","./OrderIndependentTransparency-e1b3a745.js","./basicInterfaces-b7051eb1.js","./GraphicsView2D-0752e7a2.js","./projectionSupport-3f6ca955.js","./json-48e3ea08.js","./AttributeStoreView-a03da5ff.js","./TiledDisplayObject-34f8c26b.js","./schemaUtils-4ce7eb31.js","./util-bcfd34c1.js","./vec3f32-ad1dc57f.js","./LayerView-4cbc94e3.js"],import.meta.url)),"ogc-feature":()=>dn().then(()=>De(()=>import("./OGCFeatureLayerView2D-adbadff6.js"),["./OGCFeatureLayerView2D-adbadff6.js","./FeatureLayerView2D-c99f7d01.js","./Container-9107641e.js","./definitions-cc1dbf1d.js","./enums-64ab819c.js","./Texture-54c1cd22.js","./LayerView-4cbc94e3.js","./schemaUtils-4ce7eb31.js","./color-db1e2af1.js","./enums-f1a6a48a.js","./VertexElementDescriptor-2925c6af.js","./utils-8928f1dc.js","./MaterialKey-b40e2f2f.js","./visualVariablesUtils-0c1b8204.js","./ExpandedCIM-9c7118f8.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-3cda2a0c.js","./floatRGBA-a019290c.js","./util-bcfd34c1.js","./popupUtils-4c7b9c4d.js","./RefreshableLayerView-bcc6a8c5.js"],import.meta.url)),"open-street-map":I_,"oriented-imagery":S1,route:()=>dn().then(()=>De(()=>import("./RouteLayerView2D-70d4d9ab.js"),["./RouteLayerView2D-70d4d9ab.js","./Stop-1ee7a5b8.js","./LayerView-4cbc94e3.js","./Container-9107641e.js","./definitions-cc1dbf1d.js","./enums-64ab819c.js","./Texture-54c1cd22.js","./GraphicContainer-3ca17b25.js","./color-db1e2af1.js","./enums-f1a6a48a.js","./VertexElementDescriptor-2925c6af.js","./BaseGraphicContainer-5ddab985.js","./FeatureContainer-e59f9073.js","./AttributeStoreView-a03da5ff.js","./TiledDisplayObject-34f8c26b.js","./visualVariablesUtils-19bb0f88.js","./visualVariablesUtils-0c1b8204.js","./VertexArrayObject-e9cbf53c.js","./TileContainer-daa0ec0d.js","./WGLContainer-89ed5ced.js","./ProgramTemplate-edacfcc0.js","./MaterialKey-b40e2f2f.js","./utils-8928f1dc.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./earcut-61f7b102.js","./vec3f32-ad1dc57f.js","./GraphicsView2D-0752e7a2.js","./ExpandedCIM-9c7118f8.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-3cda2a0c.js","./floatRGBA-a019290c.js","./normalizeUtilsSync-96066691.js","./projectionSupport-3f6ca955.js","./json-48e3ea08.js","./Matcher-7e90ee77.js","./tileUtils-c2f19f52.js","./TurboLine-3fb14243.js","./devEnvironmentUtils-f2a1f21e.js","./schemaUtils-4ce7eb31.js","./util-bcfd34c1.js","./ComputedAttributeStorage-119e2cd6.js","./arcadeTimeUtils-b303a482.js","./executionError-c1d13a98.js","./centroid-ad024a23.js"],import.meta.url)),stream:()=>dn().then(()=>De(()=>import("./StreamLayerView2D-97c7fc3d.js"),["./StreamLayerView2D-97c7fc3d.js","./FeatureLayerView2D-c99f7d01.js","./Container-9107641e.js","./definitions-cc1dbf1d.js","./enums-64ab819c.js","./Texture-54c1cd22.js","./LayerView-4cbc94e3.js","./schemaUtils-4ce7eb31.js","./color-db1e2af1.js","./enums-f1a6a48a.js","./VertexElementDescriptor-2925c6af.js","./utils-8928f1dc.js","./MaterialKey-b40e2f2f.js","./visualVariablesUtils-0c1b8204.js","./ExpandedCIM-9c7118f8.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-3cda2a0c.js","./floatRGBA-a019290c.js","./util-bcfd34c1.js","./popupUtils-4c7b9c4d.js","./RefreshableLayerView-bcc6a8c5.js"],import.meta.url)),"subtype-group":()=>dn().then(()=>De(()=>import("./SubtypeGroupLayerView2D-45012cfe.js"),["./SubtypeGroupLayerView2D-45012cfe.js","./FeatureLayerView2D-c99f7d01.js","./Container-9107641e.js","./definitions-cc1dbf1d.js","./enums-64ab819c.js","./Texture-54c1cd22.js","./LayerView-4cbc94e3.js","./schemaUtils-4ce7eb31.js","./color-db1e2af1.js","./enums-f1a6a48a.js","./VertexElementDescriptor-2925c6af.js","./utils-8928f1dc.js","./MaterialKey-b40e2f2f.js","./visualVariablesUtils-0c1b8204.js","./ExpandedCIM-9c7118f8.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-3cda2a0c.js","./floatRGBA-a019290c.js","./util-bcfd34c1.js","./popupUtils-4c7b9c4d.js","./RefreshableLayerView-bcc6a8c5.js"],import.meta.url)),tile:I_,"vector-tile":()=>dn().then(()=>De(()=>import("./VectorTileLayerView2D-6f93ba5b.js"),["./VectorTileLayerView2D-6f93ba5b.js","./enums-fb086c25.js","./Rect-ea14f53a.js","./enums-64ab819c.js","./Texture-54c1cd22.js","./rasterizingUtils-9ae385c0.js","./floatRGBA-a019290c.js","./VertexArrayObject-e9cbf53c.js","./config-1337d16e.js","./TiledDisplayObject-34f8c26b.js","./Container-9107641e.js","./definitions-cc1dbf1d.js","./StyleDefinition-29c49b98.js","./enums-f1a6a48a.js","./color-db1e2af1.js","./VertexElementDescriptor-2925c6af.js","./TileContainer-daa0ec0d.js","./WGLContainer-89ed5ced.js","./ProgramTemplate-edacfcc0.js","./MaterialKey-b40e2f2f.js","./utils-8928f1dc.js","./GeometryUtils-dd03fc25.js","./earcut-61f7b102.js","./StyleRepository-29d7c693.js","./GeometryUtils-984e8446.js","./LayerView-4cbc94e3.js","./preload-helper-388ac9d5.js"],import.meta.url)),wcs:()=>dn().then(()=>De(()=>import("./ImageryTileLayerView2D-d237a239.js"),["./ImageryTileLayerView2D-d237a239.js","./RasterVFDisplayObject-7c8a424b.js","./VertexArrayObject-e9cbf53c.js","./Texture-54c1cd22.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./WGLContainer-89ed5ced.js","./definitions-cc1dbf1d.js","./color-db1e2af1.js","./enums-f1a6a48a.js","./ProgramTemplate-edacfcc0.js","./MaterialKey-b40e2f2f.js","./utils-8928f1dc.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-9107641e.js","./earcut-61f7b102.js","./LayerView-4cbc94e3.js","./rasterUtils-cceaa50d.js","./TiledDisplayObject-34f8c26b.js","./TileContainer-daa0ec0d.js","./RawBlockCache-08f576c3.js","./rasterProjectionHelper-a318d515.js","./util-bcfd34c1.js","./popupUtils-4c7b9c4d.js","./RefreshableLayerView-bcc6a8c5.js","./preload-helper-388ac9d5.js"],import.meta.url)),"web-tile":I_,wfs:S1,wms:()=>dn().then(()=>De(()=>import("./WMSLayerView2D-0bc86ac1.js"),["./WMSLayerView2D-0bc86ac1.js","./BitmapContainer-58f50df4.js","./WGLContainer-89ed5ced.js","./definitions-cc1dbf1d.js","./VertexArrayObject-e9cbf53c.js","./Texture-54c1cd22.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./color-db1e2af1.js","./enums-f1a6a48a.js","./ProgramTemplate-edacfcc0.js","./MaterialKey-b40e2f2f.js","./utils-8928f1dc.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-9107641e.js","./earcut-61f7b102.js","./LayerView-4cbc94e3.js","./ExportStrategy-103b54cb.js","./Bitmap-d75cb323.js","./RefreshableLayerView-bcc6a8c5.js","./preload-helper-388ac9d5.js"],import.meta.url)),wmts:()=>dn().then(()=>De(()=>import("./WMTSLayerView2D-cd450b4a.js"),["./WMTSLayerView2D-cd450b4a.js","./imageUtils-b35a0ae5.js","./BitmapTileContainer-d6a8aab1.js","./Bitmap-d75cb323.js","./Container-9107641e.js","./definitions-cc1dbf1d.js","./enums-64ab819c.js","./Texture-54c1cd22.js","./TiledDisplayObject-34f8c26b.js","./WGLContainer-89ed5ced.js","./VertexArrayObject-e9cbf53c.js","./VertexElementDescriptor-2925c6af.js","./color-db1e2af1.js","./enums-f1a6a48a.js","./ProgramTemplate-edacfcc0.js","./MaterialKey-b40e2f2f.js","./utils-8928f1dc.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./earcut-61f7b102.js","./TileContainer-daa0ec0d.js","./LayerView-4cbc94e3.js","./RefreshableLayerView-bcc6a8c5.js","./preload-helper-388ac9d5.js"],import.meta.url)),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function iNe(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new Ce(`${i}:view-not-supported`,`${t} is not supported in 2D`)}const tH={hasLayerViewModule:e=>ee(eH[e.type]),importLayerView:e=>{const t=eH[e.type];if(Re(t))throw iNe(e);return t(e)}};function rNe(e,t){const{spatialReference:i}=t,r=[t.x,t.y];let n=Number.POSITIVE_INFINITY,s=0,o=0;const a=[0,0],l=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const u of l)for(let c=0;c<u.length-1;c++){H1e(a,r,u,c);const d=$3(r,a);d<n&&(n=d,s=a[0],o=a[1])}return{coordinate:new At({x:s,y:o,spatialReference:i}),distance:n}}var S6;let _g=S6=class extends AF(Lt){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(Re(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return W0(this.geometry,this.spatialReference)}catch(e){return et.getLogger(this.declaredClass).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(Re(this.normalizedGeometry))return e;const i=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?X5(this.normalizedGeometry,i):NK(this.normalizedGeometry,i))return e;const{coordinate:r}=rNe(this.normalizedGeometry,i);return r&&(e.targetGeometry=r),e}clone(){return new S6({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};h([p({constructOnly:!0})],_g.prototype,"geometry",void 0),h([p({readOnly:!0})],_g.prototype,"normalizedGeometry",null),h([p({constructOnly:!0})],_g.prototype,"spatialReference",void 0),_g=S6=h([ce("esri.views.2d.constraints.GeometryConstraint")],_g);var E6;let D2=E6=class extends AF(Lt){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new E6({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};h([p()],D2.prototype,"enabled",void 0),h([p()],D2.prototype,"rotationEnabled",void 0),D2=E6=h([ce("esri.views.2d.constraints.RotationConstraint")],D2);const rae=D2;var M6;let oa=M6=class extends AF(Lt){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:i,maxScale:r,minZoom:n,maxZoom:s}=this,o=-1,a=-1,l=!1,u=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!t||!t.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);t=t.map(c=>c.clone()),t.sort((c,d)=>d.scale-c.scale),t.forEach((c,d)=>c.level=d);for(const c of t)!l&&i>0&&i>=c.scale&&(o=c.level,l=!0),!u&&r>0&&r>=c.scale&&(a=e?e.level:-1,u=!0),e=c;n===-1&&(n=i===0?0:o),s===-1&&(s=r===0?t.length-1:a),n=Math.max(n,0),n=Math.min(n,t.length-1),s=Math.max(s,0),s=Math.min(s,t.length-1),n>s&&([n,s]=[s,n]),i=t[n].scale,r=t[s].scale,t.splice(0,n),t.splice(s-n+1,t.length),t.forEach((c,d)=>{this._lodByScale[c.scale]=c,this._scales[d]=c.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(e,t){if(t&&e.scale===t.scale)return e;const i=this.effectiveMinScale,r=this.effectiveMaxScale,n=e.targetGeometry,s=t&&t.targetGeometry,o=r!==0&&e.scale<r,a=i!==0&&e.scale>i;if(o||a){const l=a?i:r;if(t&&s){const u=(l-t.scale)/(e.scale-t.scale);n.x=s.x+(n.x-s.x)*u,n.y=s.y+(n.y-s.y)*u}e.scale=l}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),i=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(i>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const i=Math.round(e-.5),r=Math.round(e);return t[r]+(r-e)*(t[i]-t[r])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let i,r;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let n=0;n<t.length-1;n++){if(i=t[n],r=t[n+1],r===e)return n+this.effectiveMinZoom+1;if(i>e&&r<e)return n+this.effectiveMinZoom+1-(e-r)/(i-r)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}clone(){return new M6({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,i)=>Math.abs(i-e)<=Math.abs(t-e)?i:t,this._scales[0])),this._lodByScale[e].scale}};h([p({readOnly:!0})],oa.prototype,"effectiveLODs",void 0),h([p({readOnly:!0})],oa.prototype,"effectiveMinZoom",void 0),h([p({readOnly:!0})],oa.prototype,"effectiveMaxZoom",void 0),h([p({readOnly:!0})],oa.prototype,"effectiveMinScale",void 0),h([p({readOnly:!0})],oa.prototype,"effectiveMaxScale",void 0),h([p()],oa.prototype,"lods",void 0),h([p()],oa.prototype,"minZoom",void 0),h([p()],oa.prototype,"maxZoom",void 0),h([p()],oa.prototype,"minScale",void 0),h([p()],oa.prototype,"maxScale",void 0),h([p()],oa.prototype,"snapToZoom",void 0),oa=M6=h([ce("esri.views.2d.constraints.ZoomConstraint")],oa);const nae=oa,nNe={base:null,key:"type",typeMap:{extent:Kt,polygon:Aa}};let hn=class extends Lt{constructor(t){super(t),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(t){t?this._set("geometry",t):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _defaultLODs(){const t=this.view?.defaultsFromMap?.tileInfo,i=this.view?.spatialReference;return t&&i&&t.spatialReference.equals(i)?t.lods:null}get _geometry(){return new _g({geometry:this.geometry,spatialReference:this.view?.spatialReference})}get _rotation(){return new rae({rotationEnabled:this.rotationEnabled})}get _zoom(){const t=this._get("_zoom"),i=this.lods||this._defaultLODs,r=this.minZoom,n=this.maxZoom,s=this.minScale,o=this.maxScale,a=this.snapToZoom;return t&&t.lods===i&&t.minZoom===r&&t.maxZoom===n&&t.minScale===s&&t.maxScale===o&&t.snapToZoom===a?t:new nae({lods:i,minZoom:r,maxZoom:n,minScale:s,maxScale:o,snapToZoom:a})}canZoomInTo(t){const i=this.effectiveMaxScale;return i===0||t>=i}canZoomOutTo(t){const i=this.effectiveMinScale;return i===0||t<=i}constrain(t,i){return this._zoom.constrain(t,i),this._rotation.constrain(t,i),this._geometry.constrain(t,i),t}constrainByGeometry(t){return this._geometry.constrain(t)}fit(t){return this._zoom.fit(t)}zoomToScale(t){return this._zoom.zoomToScale(t)}scaleToZoom(t){return this._zoom.scaleToZoom(t)}snapScale(t){return this._zoom.snapToClosestScale(t)}snapToNextScale(t){return this._zoom.snapToNextScale(t)}snapToPreviousScale(t){return this._zoom.snapToPreviousScale(t)}};h([p({readOnly:!0})],hn.prototype,"effectiveLODs",null),h([p({readOnly:!0})],hn.prototype,"effectiveMinScale",null),h([p({readOnly:!0})],hn.prototype,"effectiveMaxScale",null),h([p({readOnly:!0})],hn.prototype,"effectiveMinZoom",null),h([p({readOnly:!0})],hn.prototype,"effectiveMaxZoom",null),h([p({types:nNe,value:null})],hn.prototype,"geometry",null),h([p({type:[Wt]})],hn.prototype,"lods",void 0),h([p()],hn.prototype,"minScale",void 0),h([p()],hn.prototype,"maxScale",void 0),h([p()],hn.prototype,"minZoom",void 0),h([p()],hn.prototype,"maxZoom",void 0),h([p()],hn.prototype,"rotationEnabled",void 0),h([p()],hn.prototype,"snapToZoom",void 0),h([p()],hn.prototype,"view",void 0),h([p({readOnly:!0})],hn.prototype,"version",null),h([p()],hn.prototype,"_defaultLODs",null),h([p({type:_g})],hn.prototype,"_geometry",null),h([p({type:rae})],hn.prototype,"_rotation",null),h([p({readOnly:!0,type:nae})],hn.prototype,"_zoom",null),hn=h([ce("esri.views.2d.MapViewConstraints")],hn);const sae=hn;function sNe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function oNe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function oae(e,t,i,r,n,s,o,a,l,u){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e[8]=u,e}function aae(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function aNe(e,t){if(e===t){const i=t[1],r=t[2],n=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=r,e[7]=n}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function lNe(e,t){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],d=c*o-a*u,f=-c*s+a*l,m=u*s-o*l;let g=i*d+r*f+n*m;return g?(g=1/g,e[0]=d*g,e[1]=(-c*r+n*u)*g,e[2]=(a*r-n*o)*g,e[3]=f*g,e[4]=(c*i-n*l)*g,e[5]=(-a*i+n*s)*g,e[6]=m*g,e[7]=(-u*i+r*l)*g,e[8]=(o*i-r*s)*g,e):null}function uNe(e,t){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8];return e[0]=o*c-a*u,e[1]=n*u-r*c,e[2]=r*a-n*o,e[3]=a*l-s*c,e[4]=i*c-n*l,e[5]=n*s-i*a,e[6]=s*u-o*l,e[7]=r*l-i*u,e[8]=i*o-r*s,e}function cNe(e){const t=e[0],i=e[1],r=e[2],n=e[3],s=e[4],o=e[5],a=e[6],l=e[7],u=e[8];return t*(u*s-o*l)+i*(-u*n+o*a)+r*(l*n-s*a)}function F9(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],d=t[8],f=i[0],m=i[1],g=i[2],v=i[3],b=i[4],x=i[5],S=i[6],T=i[7],_=i[8];return e[0]=f*r+m*o+g*u,e[1]=f*n+m*a+g*c,e[2]=f*s+m*l+g*d,e[3]=v*r+b*o+x*u,e[4]=v*n+b*a+x*c,e[5]=v*s+b*l+x*d,e[6]=S*r+T*o+_*u,e[7]=S*n+T*a+_*c,e[8]=S*s+T*l+_*d,e}function I6(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],d=t[8],f=i[0],m=i[1];return e[0]=r,e[1]=n,e[2]=s,e[3]=o,e[4]=a,e[5]=l,e[6]=f*r+m*o+u,e[7]=f*n+m*a+c,e[8]=f*s+m*l+d,e}function lae(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],d=t[8],f=Math.sin(i),m=Math.cos(i);return e[0]=m*r+f*o,e[1]=m*n+f*a,e[2]=m*s+f*l,e[3]=m*o-f*r,e[4]=m*a-f*n,e[5]=m*l-f*s,e[6]=u,e[7]=c,e[8]=d,e}function hNe(e,t,i){const r=i[0],n=i[1],s=i[2];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e[6]=s*t[6],e[7]=s*t[7],e[8]=s*t[8],e}function dNe(e,t,i){const r=i[0],n=i[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e}function pNe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function fNe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=-i,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function mNe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function yNe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function gNe(e,t){const i=t[0],r=t[1],n=t[2],s=t[3],o=i+i,a=r+r,l=n+n,u=i*o,c=r*o,d=r*a,f=n*o,m=n*a,g=n*l,v=s*o,b=s*a,x=s*l;return e[0]=1-d-g,e[3]=c-x,e[6]=f+b,e[1]=c+x,e[4]=1-u-g,e[7]=m-v,e[2]=f-b,e[5]=m+v,e[8]=1-u-d,e}function vNe(e,t){const i=t[0],r=t[1],n=t[2],s=t[4],o=t[5],a=t[6],l=t[8],u=t[9],c=t[10],d=c*o-a*u,f=-c*s+a*l,m=u*s-o*l,g=i*d+r*f+n*m;if(!g)return null;const v=1/g;return e[0]=d*v,e[1]=(-c*r+n*u)*v,e[2]=(a*r-n*o)*v,e[3]=f*v,e[4]=(c*i-n*l)*v,e[5]=(-a*i+n*s)*v,e[6]=m*v,e[7]=(-u*i+r*l)*v,e[8]=(o*i-r*s)*v,e}function bNe(e,t){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],d=t[9],f=t[10],m=t[11],g=t[12],v=t[13],b=t[14],x=t[15],S=i*a-r*o,T=i*l-n*o,_=i*u-s*o,M=r*l-n*a,I=r*u-s*a,$=n*u-s*l,L=c*v-d*g,B=c*b-f*g,z=c*x-m*g,W=d*b-f*v,J=d*x-m*v,K=f*x-m*b;let Q=S*K-T*J+_*W+M*z-I*B+$*L;return Q?(Q=1/Q,e[0]=(a*K-l*J+u*W)*Q,e[1]=(l*z-o*K-u*B)*Q,e[2]=(o*J-a*z+u*L)*Q,e[3]=(n*J-r*K-s*W)*Q,e[4]=(i*K-n*z+s*B)*Q,e[5]=(r*z-i*J-s*L)*Q,e[6]=(v*$-b*I+x*M)*Q,e[7]=(b*_-g*$-x*T)*Q,e[8]=(g*I-v*_+x*S)*Q,e):null}function wNe(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function _Ne(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function xNe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function SNe(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e}function uae(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e}function ENe(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e}function MNe(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e}function INe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function TNe(e,t){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],d=t[0],f=t[1],m=t[2],g=t[3],v=t[4],b=t[5],x=t[6],S=t[7],T=t[8],_=bu();return Math.abs(i-d)<=_*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(r-f)<=_*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-m)<=_*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(s-g)<=_*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(o-v)<=_*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(a-b)<=_*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(l-x)<=_*Math.max(1,Math.abs(l),Math.abs(x))&&Math.abs(u-S)<=_*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(c-T)<=_*Math.max(1,Math.abs(c),Math.abs(T))}function ANe(e){const t=bu(),i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8];return Math.abs(1-(i*i+s*s+l*l))<=t&&Math.abs(1-(r*r+o*o+u*u))<=t&&Math.abs(1-(n*n+a*a+c*c))<=t}const CNe=F9,$Ne=uae;Object.freeze(Object.defineProperty({__proto__:null,add:SNe,adjoint:uNe,copy:oNe,determinant:cNe,equals:TNe,exactEquals:INe,frob:xNe,fromMat2d:yNe,fromMat4:sNe,fromQuat:gNe,fromRotation:fNe,fromScaling:mNe,fromTranslation:pNe,identity:aae,invert:lNe,isOrthoNormal:ANe,mul:CNe,multiply:F9,multiplyScalar:ENe,multiplyScalarAndAdd:MNe,normalFromMat4:bNe,normalFromMat4Legacy:vNe,projection:wNe,rotate:lae,scale:hNe,scaleByVec2:dNe,set:oae,str:_Ne,sub:$Ne,subtract:uae,translate:I6,transpose:aNe},Symbol.toStringTag,{value:"Module"}));function _T(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function ONe(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function RNe(e,t,i,r,n,s,o,a,l){const u=new Float32Array(9);return u[0]=e,u[1]=t,u[2]=i,u[3]=r,u[4]=n,u[5]=s,u[6]=o,u[7]=a,u[8]=l,u}function kNe(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:ONe,create:_T,createView:kNe,fromValues:RNe},Symbol.toStringTag,{value:"Module"}));function cae(){return new Float32Array(2)}function LNe(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function Db(e,t){const i=new Float32Array(2);return i[0]=e,i[1]=t,i}function PNe(e,t){return new Float32Array(e,t,2)}function hae(){return cae()}function dae(){return Db(1,1)}function pae(){return Db(1,0)}function fae(){return Db(0,1)}const NNe=hae(),FNe=dae(),DNe=pae(),jNe=fae();Object.freeze(Object.defineProperty({__proto__:null,ONES:FNe,UNIT_X:DNe,UNIT_Y:jNe,ZEROS:NNe,clone:LNe,create:cae,createView:PNe,fromValues:Db,ones:dae,unitX:pae,unitY:fae,zeros:hae},Symbol.toStringTag,{value:"Module"}));function UNe(e){return e instanceof Float32Array&&e.length>=2}function VNe(e){return Array.isArray(e)&&e.length>=2}function VO(e){return UNe(e)||VNe(e)}var T6;const Yh=[0,0];let bf=T6=class extends Je{constructor(e){super(e),this._viewpoint2D={center:gn(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Kt,this.id=0,this.inverseTransform=tm(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=tm(),this.transformNoRotation=tm(),this.displayMat3=_T(),this.displayViewMat3=_T(),this.viewMat3=_T(),this.viewMat2d=goe(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,i=e.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=i.spatialReference}this._update()}copy(e){const t=this.size,i=this.viewpoint;return i&&t?(this.viewpoint=_c(i,e.viewpoint),this._set("size",bS(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new T6({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,i){return VO(t)?uh(e,t,this.inverseTransform):(Yh[0]=t,Yh[1]=i,uh(e,Yh,this.inverseTransform))}toScreen(e,t,i){return VO(t)?uh(e,t,this.transform):(Yh[0]=t,Yh[1]=i,uh(e,Yh,this.transform))}toScreenNoRotation(e,t,i){return VO(t)?uh(e,t,this.transformNoRotation):(Yh[0]=t,Yh[1]=i,uh(e,Yh,this.transformNoRotation))}getScreenTransform(e,t){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,n=this._get("size");return P9(e,i,n,t,0,r),e}_update(){const{center:e,spatialReference:t,scale:i,rotation:r}=this._viewpoint2D,n=this._get("pixelRatio")||1,s=this._get("size"),o=new _h({targetGeometry:new At(e[0],e[1],t),scale:i,rotation:r});if(this._set("viewpoint",o),!s||!t||!i)return;this.resolution=Lw(o),this.rotation=r,this.scale=i,this.spatialReference=t,bS(this.center,e);const a=s[0]!==0?2/s[0]:0,l=s[1]!==0?-2/s[1]:0;oae(this.displayMat3,a,0,0,0,l,0,-1,1,1);const u=aae(this.viewMat3),c=Db(s[0]/2,s[1]/2),d=Db(-s[0]/2,-s[1]/2),f=hF(r);I6(u,u,c),lae(u,u,f),I6(u,u,d),F9(this.displayViewMat3,this.displayMat3,u);const m=$9(this.viewMat2d,c);return z4(m,m,f),gS(m,m,d),D6e(this.extent,o,s),N9(this.transform,o,s,n),A9(this.inverseTransform,this.transform),q6e(this.transformNoRotation,o,s,n),this.worldScreenWidth=W6e(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};h([p({readOnly:!0})],bf.prototype,"id",void 0),h([p({value:1,json:{write:!0}})],bf.prototype,"pixelRatio",null),h([p({json:{write:!0}})],bf.prototype,"size",null),h([p()],bf.prototype,"spatialReference",void 0),h([p({type:_h,json:{write:!0}})],bf.prototype,"viewpoint",null),bf=T6=h([ce("esri.views.2d.ViewState")],bf);const iH=bf;var A6,C6;let kd=A6=class extends Lt{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new A6({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};h([p()],kd.prototype,"left",void 0),h([p()],kd.prototype,"top",void 0),h([p()],kd.prototype,"right",void 0),h([p()],kd.prototype,"bottom",void 0),kd=A6=h([ce("esri.views.2d.PaddedViewState.Padding")],kd);let gv=C6=class extends iH{constructor(...e){super(...e),this.paddedViewState=new iH,this._updateContent=(()=>{const t=gn();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const n=this.paddedViewState;xs(t,r.left+r.right,r.top+r.bottom),wS(t,i,t),bS(n.size,t);const s=n.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles(nt(()=>[this.size,this.padding],()=>this._updateContent(),wl)),this.padding=new kd,this.size=[0,0]}set padding(e){this._set("padding",e||new kd)}set viewpoint(e){if(e){const t=e.clone();this.paddedViewState.viewpoint=e,Z6e(t,e,this._get("size"),this._get("padding"));const i=this._viewpoint2D,r=t.targetGeometry;i.center[0]=r.x,i.center[1]=r.y,i.rotation=t.rotation,i.scale=t.scale,i.spatialReference=r.spatialReference,this._update()}}clone(){return new C6({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};h([p()],gv.prototype,"paddedViewState",void 0),h([p({type:kd})],gv.prototype,"padding",null),h([p()],gv.prototype,"viewpoint",null),gv=C6=h([ce("esri.views.2d.PaddedViewState")],gv);const BNe=gv;let zNe=class{constructor(t,i){this.item=t,this.controller=i,this.promise=null}},mae=class{constructor(t){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new yA(t.peeker),this.process=t.process;const i=t.scheduler;t.priority&&ee(i)&&(this._task=i.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}get length(){return this._processingItems.size+this._queue.length}abort(t){const i=this._controllers.get(t);i&&i.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(i=>t.push(i)),this._controllers.clear(),t.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((i,r)=>t(r))}get(t){const i=this._deferreds.get(t);return i?i.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(t,i){const r=this.get(t);if(r)return r;const n=new AbortController;let s=null;i&&(s=ba(i,()=>n.abort()));const o=()=>{const c=this._processingItems.get(t);c&&c.controller.abort(),a(),u.reject(fr())},a=()=>{l.remove(),ee(s)&&s.remove(),this._deferreds.delete(t),this._controllers.delete(t),this._queue.remove(t),this._processingItems.delete(t),this._scheduleNext()},l=DN(n.signal,o),u=Kd();return this._deferreds.set(t,u),this._controllers.set(t,n),u.promise.then(a,a),this._queue.push(t),this._scheduleNext(),u.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const t=[];this._processingItems.forEach(i=>t.push(i)),this._processingItems.clear();for(const i of t)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=hw(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(i))}_processError(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(i))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(Re(t))return;let i;const r=new AbortController,n=new zNe(t,r);this._processingItems.set(t,n);try{i=this.process(t,r.signal)}catch(s){this._processError(n,s)}cp(i)?(n.promise=i,i.then(s=>this._processResult(n,s),s=>this._processError(n,s))):this._processResult(n,i)}get test(){return{update:t=>this.runTask(t)}}};function GNe(e,t){return e.length=0,t.forEach(i=>e.push(i)),e}const BO=new Set,pM=[],E1=new Map,rH=[0,0];let jp=class extends Lt{constructor(t){super(t),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:t,process:i}=this;this._queue=new mae({concurrency:t,process:(r,n)=>{const s=this._keyToItem.get(r);return i(s,{signal:n})},peeker:r=>r.values().next().value})}destroy(){this.clear(),this._queue=qr(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(t){const i=typeof t=="string"?t:t.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(t){return typeof t=="string"?this._keyToItem.has(t):this._keyToItem.has(t.id)}isOngoing(t){const i=typeof t=="string"?t:t.id;return this.has(i)&&this._queue.isOngoing(i)}pause(){this._queue.pause()}push(t,i){const r=t.key.id+"-"+i;if(this.has(r))return this.get(r);const n=this._queue.push(r),s=()=>{this._keyToItem.delete(r),this.notifyChange("updating")};return this._keyToItem.set(r,t),n.then(s,s),this.notifyChange("updating"),n}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(t){if(!this.state)return t.values().next().value;const i=this.tileInfoView;let r=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;t.forEach(c=>{const d=this._keyToItem.get(c),f=this.tileInfoView.getTileScale(d.key);E1.has(f)||(E1.set(f,[]),r=Math.max(f,r),n=Math.min(f,n)),E1.get(f).push(d.key),BO.add(f)});let s=this.state.scale;E1.has(s)||(GNe(pM,BO),pM.sort((c,d)=>c-d),s=pM.reduce((c,d)=>Math.abs(d-s)<Math.abs(c-s)?d:c,pM[0])),s=Math.min(s,r),s=Math.max(s,n);const o=E1.get(s),a=i.getClosestInfoForScale(s),l=a.getColumnForX(this.state.center[0]),u=a.getRowForY(this.state.center[1]);return o.sort((c,d)=>{const f=a.denormalizeCol(c.col,c.world),m=a.denormalizeCol(d.col,d.world);return Math.sqrt((l-f)*(l-f)+(u-c.row)*(u-c.row))-Math.sqrt((l-m)*(l-m)+(u-d.row)*(u-d.row))}),BO.clear(),E1.clear(),o[0].id}_peekByCenterFirst(t){if(!this.state)return t.values().next().value;const i=this.tileInfoView,r=this.state.center;let n,s=Number.POSITIVE_INFINITY;return t.forEach(o=>{const a=this._keyToItem.get(o);i.getTileCoords(rH,a.key);const l=$3(rH,r);l<s&&(s=l,n=a.key)}),n.id}};h([p({constructOnly:!0})],jp.prototype,"concurrency",void 0),h([p({constructOnly:!0})],jp.prototype,"process",void 0),h([p()],jp.prototype,"state",void 0),h([p({constructOnly:!0})],jp.prototype,"strategy",void 0),h([p({constructOnly:!0})],jp.prototype,"tileInfoView",void 0),h([p({readOnly:!0})],jp.prototype,"updating",null),jp=h([ce("esri.views.2d.tiling.PagedTileQueue")],jp);let $0=class sg{static getId(t,i,r,n){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${i}/${r}/${n}`}constructor(t,i,r,n){this.set(t,i,r,n)}get key(){return this}get id(){return this.toString()}set id(t){this.set(t)}get hash(){const t=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|t<<8|r}acquire(t,i,r,n){this.set(t,i,r,n)}contains(t){const i=t.level-this.level;return i>=0&&this.row===t.row>>i&&this.col===t.col>>i&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new sg(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,i,r,n){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[s,o,a,l]=t.split("/");this.level=parseFloat(s),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+t,this.row=+i,this.col=+r,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new sg(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const t=this.level+1,i=this.row<<1,r=this.col<<1,n=this.world;return[new sg(t,i,r,n),new sg(t,i,r+1,n),new sg(t,i+1,r,n),new sg(t,i+1,r+1,n)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}};$0.pool=new Am($0,null,null,25,50);function Up(e,t){return[e,t]}function uy(e,t,i){return e[0]=t,e[1]=i,e}function qNe(e,t,i,r,n){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e}const Au=new $0("0/0/0/0");let HNe=class yae{static create(t,i,r=null){const n=gl(t.spatialReference),s=i.origin||Up(t.origin.x,t.origin.y),o=Up(t.size[0]*i.resolution,t.size[1]*i.resolution),a=Up(-1/0,-1/0),l=Up(1/0,1/0),u=Up(1/0,1/0);ee(r)&&(uy(a,Math.max(0,Math.floor((r.xmin-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymax)/o[1]))),uy(l,Math.max(0,Math.floor((r.xmax-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymin)/o[1]))),uy(u,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:c,rows:d}=i;let f,m,g,v;return!r&&c&&d&&(uy(a,c[0],d[0]),uy(l,c[1],d[1]),uy(u,c[1]-c[0]+1,d[1]-d[0]+1)),t.isWrappable?(f=Up(Math.ceil(Math.round((n.valid[1]-n.valid[0])/i.resolution)/t.size[0]),u[1]),m=Up(Math.floor((n.origin[0]-s[0])/o[0]),a[1]),g=Up(f[0]+m[0]-1,l[1]),v=!0):(m=a,g=l,f=u,v=!1),new yae(i.level,i.resolution,i.scale,s,a,l,u,o,m,g,f,v)}constructor(t,i,r,n,s,o,a,l,u,c,d,f){this.level=t,this.resolution=i,this.scale=r,this.origin=n,this.first=s,this.last=o,this.size=a,this.norm=l,this.worldStart=u,this.worldEnd=c,this.worldSize=d,this.wrap=f}normalizeCol(t){if(!this.wrap)return t;const i=this.worldSize[0];return t<0?i-1-Math.abs((t+1)%i):t%i}denormalizeCol(t,i){return this.wrap?this.worldSize[0]*i+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){return this.origin[0]+t*this.norm[0]}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,i,r=!1){Au.set(i);const n=r?Au.col:this.denormalizeCol(Au.col,Au.world),s=Au.row;return qNe(t,this.getXForColumn(n),this.getYForRow(s+1),this.getXForColumn(n+1),this.getYForRow(s)),t}getTileCoords(t,i,r=!1){Au.set(i);const n=r?Au.col:this.denormalizeCol(Au.col,Au.world);return Array.isArray(t)?uy(t,this.getXForColumn(n),this.getYForRow(Au.row)):(t.x=this.getXForColumn(n),t.y=this.getYForRow(Au.row)),t}},jb=class{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}forEach(t,i){const{spans:r,lodInfo:n}=this,{level:s}=n;if(r.length!==0)for(const{row:o,colFrom:a,colTo:l}of r)for(let u=a;u<=l;u++)t.call(i,s,o,n.normalizeCol(u),n.getWorldForColumn(u))}};jb.pool=new Am(jb);let zO=class{constructor(t,i,r){this.row=t,this.colFrom=i,this.colTo=r}};const kr=new $0("0/0/0/0");let WNe=class gae{static create(t,i){t[1]>i[1]&&([t,i]=[i,t]);const[r,n]=t,[s,o]=i,a=s-r,l=o-n,u=l!==0?a/l:0,c=(Math.ceil(n)-n)*u,d=(Math.floor(n)-n)*u;return new gae(r,Math.floor(n),Math.ceil(o),u,a<0?c:d,a<0?d:c,a<0?s:r,a<0?r:s)}constructor(t,i,r,n,s,o,a,l){this.x=t,this.ymin=i,this.ymax=r,this.invM=n,this.leftAdjust=s,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const za=[[0,0],[0,0],[0,0],[0,0]],JNe=1e-6;let ZNe=class{constructor(t,i=null){this.tileInfo=t,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const r=t.lods.slice();r.sort((s,o)=>o.scale-s.scale);const n=this._lodInfos=r.map(s=>HNe.create(t,s,i));r.forEach((s,o)=>{this._infoByLevel[s.level]=n[o],this._infoByScale[s.scale]=n[o],this.scales[o]=s.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,i,r=!1){kr.set(i);const n=this._infoByLevel[kr.level];return n?n.getTileBounds(t,kr,r):t}getTileCoords(t,i,r=!1){kr.set(i);const n=this._infoByLevel[kr.level];return n?n.getTileCoords(t,kr,r):t}getTileCoverage(t,i=192,r="closest"){const n=r==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),s=jb.pool.acquire(n),o=this._wrap;let a,l,u,c=1/0,d=-1/0;const f=s.spans;za[0][0]=za[0][1]=za[1][1]=za[3][0]=-i,za[1][0]=za[2][0]=t.size[0]+i,za[2][1]=za[3][1]=t.size[1]+i;for(const b of za)t.toMap(b,b),b[0]=n.getColumnForX(b[0]),b[1]=n.getRowForY(b[1]);const m=[];let g=3;for(let b=0;b<4;b++){if(za[b][1]===za[g][1]){g=b;continue}const x=WNe.create(za[b],za[g]);c=Math.min(x.ymin,c),d=Math.max(x.ymax,d),m[x.ymin]===void 0&&(m[x.ymin]=[]),m[x.ymin].push(x),g=b}if(c==null||d==null||d-c>100)return null;let v=[];for(a=c;a<d;){m[a]!=null&&(v=v.concat(m[a])),l=1/0,u=-1/0;for(let b=v.length-1;b>=0;b--){const x=v[b];l=Math.min(l,x.getLeftCol()),u=Math.max(u,x.getRightCol())}if(l=Math.floor(l),u=Math.floor(u),a>=n.first[1]&&a<=n.last[1])if(o)if(n.size[0]<n.worldSize[0]){const b=Math.floor(u/n.worldSize[0]);for(let x=Math.floor(l/n.worldSize[0]);x<=b;x++)f.push(new zO(a,Math.max(n.getFirstColumnForWorld(x),l),Math.min(n.getLastColumnForWorld(x),u)))}else f.push(new zO(a,l,u));else l>n.last[0]||u<n.first[0]||(l=Math.max(l,n.first[0]),u=Math.min(u,n.last[0]),f.push(new zO(a,l,u)));a+=1;for(let b=v.length-1;b>=0;b--){const x=v[b];x.ymax>=a?x.incrRow():v.splice(b,1)}}return s}getTileParentId(t){kr.set(t);const i=this._infoByLevel[kr.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(kr,this._lodInfos[r],kr),kr.id)}getTileResolution(t){const i=this._infoByLevel[typeof t=="object"?t.level:t];return i?i.resolution:-1}getTileScale(t){const i=this._infoByLevel[t.level];return i?i.scale:-1}intersects(t,i){kr.set(i);const r=this._infoByLevel[kr.level],n=t.lodInfo;if(n.resolution>r.resolution){this._getTileIdAtLOD(kr,n,kr);const o=n.denormalizeCol(kr.col,kr.world);for(const a of t.spans)if(a.row===kr.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(n.resolution<r.resolution){const[o,a,l,u]=t.spans.reduce((v,b)=>(v[0]=Math.min(v[0],b.row),v[1]=Math.max(v[1],b.row),v[2]=Math.min(v[2],b.colFrom),v[3]=Math.max(v[3],b.colTo),v),[1/0,-1/0,1/0,-1/0]),c=r.denormalizeCol(kr.col,kr.world),d=n.getColumnForX(r.getXForColumn(c)),f=n.getRowForY(r.getYForRow(kr.row)),m=n.getColumnForX(r.getXForColumn(c+1))-1,g=n.getRowForY(r.getYForRow(kr.row+1))-1;return!(d>u||m<l||f>a||g<o)}const s=n.denormalizeCol(kr.col,kr.world);return t.spans.some(o=>o.row===kr.row&&o.colFrom<=s&&o.colTo>=s)}normalizeBounds(t,i,r){if(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],this._wrap){const n=gl(this.tileInfo.spatialReference),s=-r*(n.valid[1]-n.valid[0]);t[0]+=s,t[2]+=s}return t}getSmallestInfoForScale(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(t>i[r]+JNe)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(t){const i=this.scales;return this._infoByScale[t]||(t=i.reduce((r,n)=>Math.abs(n-t)<Math.abs(r-t)?n:r,i[0])),this._infoByScale[t]}scaleToLevel(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let r=i.length-1;r>=0;r--)if(t<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-t)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}_getTileIdAtLOD(t,i,r){const n=this._infoByLevel[r.level];return t.set(r),i.resolution<n.resolution?null:(i.resolution===n.resolution||(t.level=i.level,t.col=Math.floor(r.col*n.resolution/i.resolution+.01),t.row=Math.floor(r.row*n.resolution/i.resolution+.01)),t)}};function YNe(e,t){return e.length=0,t.forEach(i=>e.push(i)),e}const GO=new Set,fM=[],M1=new Map,nH=[0,0];let Md=class extends Lt{constructor(t){super(t),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:t,process:i,strategy:r}=this;this._queue=new mae({concurrency:t,process:(n,s)=>{const o=this._keyToItem.get(n);return i(o,{signal:s})},peeker:r==="scale-first"?n=>this._peekByScaleFirst(n):n=>this._peekByCenterFirst(n)})}destroy(){this.clear(),this._queue=qr(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(t){const i=typeof t=="string"?t:t.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(t){return typeof t=="string"?this._keyToItem.has(t):this._keyToItem.has(t.id)}isOngoing(t){const i=typeof t=="string"?t:t.id;return this.has(i)&&this._queue.isOngoing(i)}pause(){this._queue.pause()}push(t){const i=t.key.id;if(this._queue.has(i))return this._queue.get(i);const r=this._queue.push(i),n=()=>{this._keyToItem.delete(i),this.notifyChange("updating")};return this._keyToItem.set(i,t),r.then(n,n),this.notifyChange("updating"),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(t){if(!this.state)return t.values().next().value;const i=this.tileInfoView;let r=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;t.forEach(c=>{const d=this._keyToItem.get(c),f=this.tileInfoView.getTileScale(d.key);M1.has(f)||(M1.set(f,[]),r=Math.max(f,r),n=Math.min(f,n)),M1.get(f).push(d.key),GO.add(f)});let s=this.state.scale;M1.has(s)||(YNe(fM,GO),fM.sort((c,d)=>c-d),s=fM.reduce((c,d)=>Math.abs(d-s)<Math.abs(c-s)?d:c,fM[0])),s=Math.min(s,r),s=Math.max(s,n);const o=M1.get(s),a=i.getClosestInfoForScale(s),l=a.getColumnForX(this.state.center[0]),u=a.getRowForY(this.state.center[1]);return o.sort((c,d)=>{const f=a.denormalizeCol(c.col,c.world),m=a.denormalizeCol(d.col,d.world);return Math.sqrt((l-f)*(l-f)+(u-c.row)*(u-c.row))-Math.sqrt((l-m)*(l-m)+(u-d.row)*(u-d.row))}),GO.clear(),M1.clear(),o[0].id}_peekByCenterFirst(t){if(!this.state)return t.values().next().value;const i=this.tileInfoView,r=this.state.center;let n,s=Number.POSITIVE_INFINITY;return t.forEach(o=>{const a=this._keyToItem.get(o);i.getTileCoords(nH,a.key);const l=$3(nH,r);l<s&&(s=l,n=a.key)}),n.id}};h([p({constructOnly:!0})],Md.prototype,"concurrency",void 0),h([p({constructOnly:!0})],Md.prototype,"process",void 0),h([p()],Md.prototype,"state",void 0),h([p({constructOnly:!0})],Md.prototype,"strategy",void 0),h([p({constructOnly:!0})],Md.prototype,"tileInfoView",void 0),h([p({readOnly:!0})],Md.prototype,"updating",null),Md=h([ce("esri.views.2d.tiling.TileQueue")],Md);const pht=Md;let KNe=class{constructor(t,i,r){this.maxSize=t,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const i=this._tilePerId.get(t);if(!i)return;const r=i.key.level,n=this._tileKeysPerLevel[r];sH(this._tilePerId,t);for(let s=0;s<n.length;s++)if(n[s].id===t){n.splice(s,1);break}return i.visible=!0,i}add(t){t.visible=!1;const i=t.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,t);const n=i.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(i)}prune(t,i,r){let n=this._tilePerId.size;if(n<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&s>=0;)s!==t&&(n=this._pruneAroundCenterTile(n,i,r,s)),s--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,i,r,t))}_pruneAroundCenterTile(t,i,r,n){const s=this._tileKeysPerLevel[n];if(!s||s.length===0)return t;const{size:o,origin:a}=this._tileInfoView.tileInfo,l=r*o[0],u=r*o[1],c=[0,0],d=[0,0];for(s.sort((f,m)=>(c[0]=a.x+l*(f.col+.5),c[1]=a.y-u*(f.row+.5),d[0]=a.x+l*(m.col+.5),d[1]=a.y-u*(m.row+.5),QA(c,i)-QA(d,i)));s.length>0;){const f=s.pop();if(this._removeTile(f.id),--t===this.maxSize)break}return t}_removeTile(t){const i=this._tilePerId.get(t);this._removedFunc&&i&&this._removedFunc(i),sH(this._tilePerId,t)}};function sH(e,t){e.delete(t)}const cy=new $0(0,0,0,0),Ll=new Map,I1=[],mM=[];let mht=class{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,this.resampling=t.resampling==null||!!t.resampling,t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new KNe(t.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(t){const{resampling:i,tileIndex:r}=this,n=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.coveragePolicy);if(mM.length=0,I1.length=0,Ll.clear(),!n)return;const{minScale:s,maxScale:o}=this.tileInfoView.tileInfo,{spans:a,lodInfo:l}=n,{level:u}=l,{scale:c,center:d,resolution:f}=t.state,m=!t.stationary&&c>this._previousScale;if(this._previousScale=c,this.tiles.length=0,!i&&(c>s||c<o))return this.tiles.length=0,Ll.clear(),r.forEach(x=>{this.releaseTile(x)}),r.clear(),mM.length=0,I1.length=0,Ll.clear(),jb.pool.release(n),!0;r.forEach(x=>x.visible=!0);let g=0,v=0;if(a.length>0)for(const{row:x,colFrom:S,colTo:T}of a)for(let _=S;_<=T;_++){g++;const M=cy.set(u,x,l.normalizeCol(_),l.getWorldForColumn(_)).id;if(r.has(M)){const I=r.get(M);I.isReady?(Ll.set(M,I),v++):m||this._addParentTile(M,Ll)}else{let I;if(this._tileCache&&this._tileCache.has(M)){if(I=this._tileCache.pop(M),this.tileIndex.set(M,I),I.isReady){Ll.set(M,I),v++;continue}}else I=this.acquireTile(cy),this.tileIndex.set(M,I);m||this._addParentTile(M,Ll)}}const b=v===g;r.forEach((x,S)=>{if(cy.set(S),Ll.has(S))return;const T=this.tileInfoView.intersects(n,cy),_=this.cachePolicy==="purge"?cy.level!==u:cy.level>u;!T||!m&&b?!_&&T||I1.push(S):x.isReady?_&&this.cachePolicy==="purge"&&this._hasReadyAncestor(cy,u)?I1.push(S):mM.push(S):_&&I1.push(S)});for(const x of mM){const S=r.get(x);S&&S.isReady&&Ll.set(x,S)}for(const x of I1){const S=r.get(x);this._tileCache?this._tileCache.add(S):this.releaseTile(S),r.delete(x)}return Ll.forEach(x=>this.tiles.push(x)),r.forEach(x=>{Ll.has(x.key.id)||(x.visible=!1)}),this._tileCache&&this._tileCache.prune(u,d,f),jb.pool.release(n),Ll.clear(),b}clear(t=!0){const{tileIndex:i}=this;t&&i.forEach(r=>{this.releaseTile(r)}),i.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,i){let r=t,n=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(n=this.tileIndex.get(r),n&&n.isReady){i.has(n.key.id)||i.set(n.key.id,n);break}}else if(this._tileCache&&this._tileCache.has(r)&&(n=this._tileCache.pop(r),this.tileIndex.set(r,n),n&&n.isReady)){i.has(n.key.id)||i.set(n.key.id,n);break}}_hasReadyAncestor(t,i){const r=du();this.tileInfoView.getTileBounds(r,t,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=i&&n.key.level<t.level){const s=du();if(this.tileInfoView.getTileBounds(s,n.key,!0),Abe(s,r))return!0}return!1}};function D9(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}let oH=class extends ys{constructor(t,i){super(!0),this._view=t,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(t,i){D9(t.data,"primary")&&(t.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}},QNe=class extends ys{constructor(t,i,r){super(!0),this.view=t,this.pointerType=i,this.registerIncoming("double-tap-drag",r,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(t){const{data:i}=t,{pointerType:r}=i;if(r!==this.pointerType)return;t.stopPropagation();const{action:n,delta:s}=i,{view:o}=this,{mapViewNavigation:a}=o;switch(n){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=s,a.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const l=1.015**s.y,u=this._startScale*l,c=u/this._currentScale;a.setViewpointImmediate(c),this._currentScale=u;break}case"end":{const{constraints:l}=o,{effectiveLODs:u,snapToZoom:c}=l;if(!c||!u)return void a.end();const d=l.snapScale(this._currentScale),f=(s.y>0?Math.max(d,l.snapToPreviousScale(this._startScale)):Math.min(d,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(f);break}}}},H4=class{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){const i=t.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){this._startEvent=t,this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}},XNe=class extends ys{constructor(t,i,r){super(!0),this.view=t,this.pointerAction=i,this.registerIncoming("drag",r,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new H4({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&D9(r.data,this.pointerAction)})}_handleDrag(t){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},eFe=class extends ys{constructor(t,i,r){super(!0),this._view=t,this.pointerAction=i;const n=this._view.mapViewNavigation;this._dragEventSeparator=new H4({start:(s,o)=>{n.rotate.begin(this._view,o.data),o.stopPropagation()},update:(s,o)=>{n.rotate.update(this._view,o.data),o.stopPropagation()},end:(s,o)=>{n.rotate.end(),o.stopPropagation()},condition:(s,o)=>s===1&&D9(o.data,this.pointerAction)}),this.registerIncoming("drag",r,s=>this._dragEventSeparator.handle(s))}};function Cu(e){let t=e*e;return e<0&&(t*=-1),t}function tFe(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function iFe(e,t,i){const r=i,n=e.state,s=e.device,o=t.tiltDirection==="forward-down"?1:-1,a=1;return s.deviceType==="standard"?(r.translation[0]=Cu(n.axes[0]),r.translation[1]=Cu(n.axes[1]),r.translation[2]=Cu(n.buttons[7])-Cu(n.buttons[6]),r.heading=Cu(n.axes[2]),r.tilt=Cu(n.axes[3])):s.deviceType==="spacemouse"&&(r.translation[0]=1.2*Cu(n.axes[0]),r.translation[1]=1.2*Cu(n.axes[1]),r.translation[2]=2*-Cu(n.axes[2]),r.heading=1.2*Cu(n.axes[5]),r.tilt=1.2*Cu(n.axes[3])),r.tilt*=o,pF(r.translation,r.translation,a),r}function rFe(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}let nFe=class extends ys{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new So,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([nt(()=>this._view.navigation.gamepad?.enabled,i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=bb({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},Pi)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const i=this._view.navigation.gamepad.device;i&&t.data.device!==i||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,tFe(this._transformation)):(this._currentDevice=t.data.device,iFe(t.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(t){const i=this._transformation;if(rFe(i))return;const r=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,s=oFe*n*t;q4(r,r,[i.translation[0]*s,-i.translation[1]*s]);const o=1+i.translation[2]*aFe*t,a=this._view.constraints.rotationEnabled?-i.heading*sFe*t:0,l=this._view.size,u=[l[0]/2,l[1]];eae(r,r,o,a,u,l);const c=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=c}};const sFe=.06,oFe=.7,aFe=6e-4;let lFe=class extends ys{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",r,n=>this._handleKeyUp(n)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const r=this._keyMap[t.data.key];if(this._pressed=r!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),r){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}},uFe=class extends ys{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",r,n=>this._handleKeyUp(n)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const r=t.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection[t.data.key];if(this._pressed=n!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}};var Nv;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(Nv||(Nv={}));let cFe=class extends ys{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),i.zoomIn.forEach(n=>this._keysToZoomAction[n]=Nv.IN),i.zoomOut.forEach(n=>this._keysToZoomAction[n]=Nv.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const i=t.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=t.data;if(!(r in this._keysToZoomAction))return;const n=this._keysToZoomAction[r],{mapViewNavigation:s}=this.view;let o=null;switch(n){case Nv.IN:o=s.zoomIn();break;case Nv.OUT:o=s.zoomOut();break;default:return}s.begin(),o.then(()=>s.end()),t.stopPropagation()}};const hFe=.6;let dFe=class extends ys{constructor(t,i){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(t){if(!this._view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:n,deltaY:s}=t.data,o=1/hFe**(1/60*s),a=i.zoom(o,[r,n]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}},pFe=class extends ys{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new H4({start:(r,n)=>{i.pinch.begin(this.view,n.data),n.stopPropagation()},update:(r,n)=>{i.pinch.update(this.view,n.data),n.stopPropagation()},end:(r,n)=>{i.pinch.end(this.view),n.stopPropagation()},condition:r=>r>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function aH(e){const t=e.native;return t?{buttons:t.buttons.map(i=>i.pressed?i.value?i.value:1:0),axes:t.axes.map(i=>yFe(i,e.axisThreshold))}:{buttons:[],axes:[]}}function fFe(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let i=0;i<e.axes.length;i++)if(e.axes[i]!==t.axes[i])return!1;for(let i=0;i<e.buttons.length;i++)if(e.buttons[i]!==t.buttons[i])return!1;return!0}function mFe(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function yFe(e,t){const i=Math.abs(e);return i<t?0:Math.sign(e)*(i-t)/(1-t)}let gFe=class{constructor(t,i){this._element=t,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const o=s.gamepad,a=o.index,l=this._inputDevices[a];l&&(this._emitGamepadEvent(o,aH(l),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=r&&n,this.supported&&(this._forEachGamepad(s=>this._connectGamepad(s)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){const i=new O9(t);i.deviceType!=="unknown"&&(this._inputDevices[t.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=bb({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!i;this._forEachGamepad(n=>{const s=this._inputDevices[n.index];if(!s)return;const o=this._latestUpdate[n.index],a=aH(s),l=r||mFe(a);o&&(o.timestamp===n.timestamp||!o.active&&l||fFe(o.state,a))||this._emitGamepadEvent(n,a,!l)})}_forEachGamepad(t){const i=window.navigator.getGamepads();for(let r=0;r<i.length;r++){const n=i[r];this._validate(n)&&t(n)}}_emitGamepadEvent(t,i,r){const n=this._latestUpdate[t.index],s=n&&n.active;if(!s&&!r)return;const o=!s&&r?"start":s&&r?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[t.index],state:i,action:o})}_validate(t){if(!t||!t.connected)return!1;for(let i=0;i<t.axes.length;i++)if(isNaN(t.axes[i]))return!1;return!0}};const lH=Ze("edge"),vFe=Ze("chrome"),bFe=Ze("ff"),wFe=Ze("safari"),uH="esri-view-surface",T1={touchNone:`${uH}--touch-none`,touchPan:`${uH}--touch-pan`};let vae=class bae{constructor(t,i){this._input=i,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new gFe(t,this._input),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource=qr(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const i in this._active)if(!t||!t.has(i)){const r=this._active[i];this._element.removeEventListener(qO[i],r),delete this._active[i]}t&&t.forEach(i=>{if(!this._active[i]&&qO[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(qO[i],r),this._active[i]=r}}),this._gamepadSource.hasEventListeners=t?.has("gamepad")??!1}setPointerCapture(t,i){i?(this._element.setPointerCapture(t.pointerId),this._activePointerCaptures.add(t.pointerId)):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?T1.touchNone:T1.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?T1.touchPan:T1.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(T1.touchNone),this._element.classList.remove(T1.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,i){const r=Ooe(this._element,t);return bae.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(t,i){const r=l8e(i);r&&t==="key-up"&&this._keyDownState.delete(r);const n={native:i,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&t==="key-down"&&this._keyDownState.add(n.key),this._callback(t,n)}_handlePointer(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(t,r)}_handlePointerPreventDefault(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(t,r)}_handleMouseWheel(t,i){let r=i.deltaY;switch(i.deltaMode){case 0:lH&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}lH?r*=.7:vFe||wFe?r*=.6:bFe&&(r*=1.375);const n=100,s=Math.abs(r);s>n&&(r=r/s*200/(1+Math.exp(-.02*(s-n))));const o=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(t,o)}_handlePointerCaptureLost(t,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(t,i)}_handleDefault(t,i){const r={native:i};i.preventDefault(),this._callback(t,r)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}};vae.test={disableSubpixelCoordinates:!1};const qO={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let _Fe=class extends ys{constructor(){super(!0),this.registerIncoming("context-menu",t=>{t.data.native.preventDefault()})}};function j9(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function xFe(e,t){const i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)}function SFe(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:cs()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[T,_]=e,[M,I]=[_.x-T.x,_.y-T.y];return t.radius=Math.sqrt(M*M+I*I)/2,t.center.x=(T.x+_.x)/2,t.center.y=(T.y+_.y)/2,t}let i=0,r=0;for(let T=0;T<e.length;T++)i+=e[T].x,r+=e[T].y;i/=e.length,r/=e.length;const n=e.map(T=>T.x-i),s=e.map(T=>T.y-r);let o=0,a=0,l=0,u=0,c=0,d=0,f=0;for(let T=0;T<n.length;T++){const _=n[T],M=s[T],I=_*_,$=M*M;o+=I,a+=$,l+=_*M,u+=I*_,c+=$*M,d+=_*$,f+=M*I}const m=.5*(u+d),g=.5*(c+f),v=o*a-l*l,b=(m*a-g*l)/v,x=(o*g-l*m)/v,S=cs(b+i,x+r);return{radius:Math.sqrt(b*b+x*x+(o+a)/e.length),center:S}}function t0(e){const{native:t}=e,{pointerId:i,button:r,pointerType:n}=t;return n==="mouse"?`${i}:${r}`:`${n}`}const nu={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};let EFe=class extends ys{constructor(t=nu.maximumDoubleClickDelay,i=nu.maximumDoubleClickDistance,r=nu.maximumDoubleTouchDelay,n=nu.maximumDoubleTouchDistance,s=YS){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=n,this._clock=s,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=yn(t.doubleClickTimer))}get hasPendingInputs(){return q5(this._pointerState,t=>t.doubleClickTimer!=null)}_clearDoubleClickTimer(t,i){const r=this._pointerState.get(t);r&&(r.doubleClickTimer=yn(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const i=this._pointerState.get(t);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_getPointerId(t){const{pointerId:i,pointerType:r,button:n}=t.native;return r==="mouse"?`${i}:${n}`:`${r}`}_handleImmediateClick(t){const i=t.data,{pointerType:r}=i.native,n=this._getPointerId(i);if(!this._pointerState.has(n))return void this._startClick(t);const s=this._pointerState.get(n),{data:o,modifiers:a}=s.event,l=r==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;j9(o,i)>l?(this._clearDoubleClickTimer(n,!0),this._startClick(t)):(this._clearDoubleClickTimer(n,!1),s.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(t){const i=t0(t.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(t){const{data:i}=t,{native:{pointerType:r}}=i,n=t0(i),s=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(n),s),a=1;this._pointerState.set(n,{event:t,doubleClickTimer:o,pointerDownCount:a}),this.refreshHasPendingInputs()}},MFe=class extends ys{constructor(t=nu.maximumDoubleClickDelay,i=nu.maximumDoubleClickDistance,r=nu.maximumDoubleTouchDelay,n=nu.maximumDoubleTouchDistance,s=YS){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=n,this._clock=s,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=cs(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new H4({start:(o,a)=>this._dragStart(o,a),update:(o,a)=>this._dragUpdate(a),end:(o,a)=>this._dragEnd(a)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=yn(t.doubleTapTimeout)})}get hasPendingInputs(){return q5(this._pointerState,t=>t.doubleTapTimeout!=null)}_clearPointerDown(t){const i=this._pointerState.get(t);i&&(i.doubleTapTimeout=yn(i.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_createDoubleTapDragData(t,i,r){const{button:n,buttons:s,pointer:o,pointers:a,pointerType:l,timestamp:u}=r;return{action:t,delta:i,button:n,buttons:s,pointer:o,pointers:a,pointerType:l,timestamp:u}}_dragStart(t,i){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:n}=i,{center:s}=r;this._dragStartCenter=s;const o=this._createDoubleTapDragData("begin",cs(0,0),r);this._doubleTapDrag.emit(o,void 0,n),i.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:n}=i,s=cs(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("update",s,i);this._doubleTapDrag.emit(o,void 0,r),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:n}=i,s=cs(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("end",s,i);this._doubleTapDrag.emit(o,void 0,r),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:i}=t,r=t0(i),n=this._pointerState.get(r),{pointerType:s}=i.native;if(n){const o=s==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(r),j9(n.event.data,i)>o?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:i}=t,{pointerType:r}=i.native,n=t0(i),s=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(n),s);this._pointerState.set(n,{event:t,doubleTapTimeout:o}),this.refreshHasPendingInputs()}},IFe=class extends ys{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,i,r,n){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:n,pointers:TFe(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(t){const i=t.native.pointerId,r=yM(this._activePointerMap).angle,n={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,n);const s=xT(n,wae(this._activePointerMap));n.initialAngle=s,n.lastAngle=s,this._updatePointerAngles(r)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const i=t.native.pointerId,r=this._activePointerMap.get(i);r?r.event=t:this._addPointer(t)}_removePointer(t){const i=yM(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(i)}_updatePointerAngles(t){const i=yM(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=xT(r,i)-t,r.lastAngle=xT(r,i)-t})}_emitEvent(t,i,r){const n=yM(this._activePointerMap);this._drag.emit(this._createPayload(t,i,n,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){const i=t.data.native.pointerId,r=t.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const i=t.data,r=i.currentEvent,n=t.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,n)):(this._addPointer(r),this._emitEvent("added",r,n),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,n))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function wae(e){const t=[];return e.forEach(i=>{t.push(cs(i.event.x,i.event.y))}),SFe(t)}function yM(e){const t=wae(e);let i=0;return e.forEach(r=>{let n=xT(r,t),s=n-r.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;n=r.lastAngle+s,r.lastAngle=n;const o=n-r.initialAngle;i+=o}),i/=e.size||1,{angle:i,radius:t.radius,center:t.center}}function TFe(e){const t=new Map;return e.forEach((i,r)=>t.set(r,i.event)),t}function xT(e,t){const i=e.event,r=i.x-t.center.x,n=i.y-t.center.y;return Math.atan2(n,r)}var cH;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(cH||(cH={}));let AFe=class extends ys{constructor(t=nu.maximumDoubleClickDelay,i=nu.maximumDoubleClickDistance,r=nu.maximumDoubleTouchDelay,n=nu.maximumDoubleTouchDistance,s=YS){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=n,this._clock=s,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=t0(i);if(!this._pointerState.has(r)){const n={downButton:i.native.button,immediateDoubleClick:null};this._pointerState.set(r,n),this.startCapturingPointer(i.native)}}_handlePointerUp(t){const i=t.data,r=t0(i),n=this._pointerState.get(r);if(n&&n.downButton===i.native.button){const s=n.immediateDoubleClick;if(s){s.timeoutHandle.remove();const o=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;j9(s,t.data)>o?this._startImmediateDoubleClick(t,n):(this._immediateDoubleClick.emit(t.data,void 0,s.modifiers),this._removeState(i))}else this._startImmediateDoubleClick(t,n)}}_startImmediateDoubleClick(t,i){const r=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;i.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),r)}}_removeState(t){const i=t0(t);this._pointerState.delete(i),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}};const T_={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};let CFe=class extends ys{constructor(t=T_.maximumClickDelay,i=T_.movementUntilMouseDrag,r=T_.movementUntilPenDrag,n=T_.movementUntilTouchDrag,s=T_.holdDelay,o=YS){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=i,this._movementUntilPenDrag=r,this._movementUntilTouchDrag=n,this._holdDelay=s,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",a=>{this._handlePointerLoss(a,"pointer-up")}),this.registerIncoming("pointer-capture-lost",a=>{this._handlePointerLoss(a,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",a=>{this._handlePointerLoss(a,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=yn(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=i.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const o=this._pointerState.get(r);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,t.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._holdDelay));const s={startEvent:i,previousEvent:i,startTimestamp:t.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(r,s),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_createPointerDragData(t,i,r){return{action:t,startEvent:i.startEvent,previousEvent:i.previousEvent,currentEvent:r}}_handlePointerMove(t){const i=t.data,r=i.native.pointerId,n=this._pointerState.get(r);n&&(n.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",n,i),void 0,n.modifiers):xFe(i,n.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(t),n.previousEvent=i)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){const i=t.data,r=i.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=t.modifiers,n.isDragging=!0,r===n.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",n,i)):this._pointerDrag.emit(this._createPointerDragData("start",n,n.previousEvent),t.timestamp))})}_handlePointerLoss(t,i){const r=t.data,n=r.native.pointerId,s=this._pointerState.get(n);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",s,i==="pointer-up"?r:s.previousEvent),void 0,s.modifiers):i==="pointer-up"&&s.downButton===r.native.button&&t.timestamp-s.startTimestamp<=this._maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(n),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};const gM={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let og=class extends Lt{constructor(){super(...arguments),this._handles=new So}initialize(){const t=()=>this.view?.ready;this._handles.add([Tl(()=>!t(),()=>this._disconnect()),Tl(t,()=>this._connect())])}destroy(){this._handles=qr(this._handles),this._disconnect()}get latestPointerType(){return this._inputManager?.latestPointerType}get latestPointerLocation(){return this._inputManager?.latestPointerLocation}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=qr(this._inputManager)}_connect(){const t=this.view.surface,i=new vae(t,this.view.input),r=[new AFe,new CFe,new EFe,new IFe(this.view.navigation),new MFe],n=new Yc({eventSource:i,recognizers:r});n.installHandlers("prevent-context-menu",[new _Fe],em.INTERNAL),n.installHandlers("navigation",[new pFe(this.view),new nFe(this.view),new dFe(this.view),new oH(this.view),new oH(this.view,[gM.counter]),new XNe(this.view,"primary"),new lFe(this.view,gM.pan),new cFe(this.view,gM.zoom),new uFe(this.view,gM.rotate),new eFe(this.view,"secondary"),new QNe(this.view,"touch")],em.INTERNAL),this.view.viewEvents.connect(n),this._source=i,this._inputManager=n,nt(()=>this.view?.navigation?.browserTouchPanEnabled,s=>{this._source&&(this._source.browserTouchPanningEnabled=!s)},Pi)}get test(){return{inputManager:this._inputManager}}};h([p()],og.prototype,"view",void 0),h([p()],og.prototype,"latestPointerType",null),h([p()],og.prototype,"latestPointerLocation",null),h([p()],og.prototype,"multiTouchActive",null),og=h([ce("esri.views.2d.input.MapViewInputManager")],og);const $Fe=og;var hH,dH,pH,$6={},OFe={get exports(){return $6},set exports(e){$6=e}};hH=OFe,dH=function(){function e(n,s,o,a,l){t(n,s,o||0,a||n.length-1,l||r)}function t(n,s,o,a,l){for(;a>o;){if(a-o>600){var u=a-o+1,c=s-o+1,d=Math.log(u),f=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*f*(u-f)/u)*(c-u/2<0?-1:1);t(n,s,Math.max(o,Math.floor(s-c*f/u+m)),Math.min(a,Math.floor(s+(u-c)*f/u+m)),l)}var g=n[s],v=o,b=a;for(i(n,o,s),l(n[a],g)>0&&i(n,o,a);v<b;){for(i(n,v,b),v++,b--;l(n[v],g)<0;)v++;for(;l(n[b],g)>0;)b--}l(n[o],g)===0?i(n,o,b):i(n,++b,a),b<=s&&(o=b+1),s<=b&&(a=b-1)}}function i(n,s,o){var a=n[s];n[s]=n[o],n[o]=a}function r(n,s){return n<s?-1:n>s?1:0}return e},(pH=dH())!==void 0&&(hH.exports=pH);const RFe=$6;function e5(e,t){if(!(this instanceof e5))return new e5(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function kFe(e,t,i){if(!i)return t.indexOf(e);for(var r=0;r<t.length;r++)if(i(e,t[r]))return r;return-1}function A1(e,t){j2(e,0,e.children.length,t,e)}function j2(e,t,i,r,n){n||(n=vv(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var s,o=t;o<i;o++)s=e.children[o],U2(n,e.leaf?r(s):s);return n}function U2(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function fH(e,t){return e.minX-t.minX}function mH(e,t){return e.minY-t.minY}function HO(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function vM(e){return e.maxX-e.minX+(e.maxY-e.minY)}function LFe(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function PFe(e,t){var i=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),n=Math.min(e.maxX,t.maxX),s=Math.min(e.maxY,t.maxY);return Math.max(0,n-i)*Math.max(0,s-r)}function WO(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function bM(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function vv(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function yH(e,t,i,r,n){for(var s,o=[t,i];o.length;)(i=o.pop())-(t=o.pop())<=r||(s=t+Math.ceil((i-t)/r/2)*r,RFe(e,s,t,i,n),o.push(t,s,s,i))}e5.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],r=this.toBBox;if(!bM(e,t))return i;for(var n,s,o,a,l=[];t;){for(n=0,s=t.children.length;n<s;n++)o=t.children[n],bM(e,a=t.leaf?r(o):o)&&(t.leaf?i.push(o):WO(e,a)?this._all(o,i):l.push(o));t=l.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!bM(e,t))return!1;for(var r,n,s,o,a=[];t;){for(r=0,n=t.children.length;r<n;r++)if(s=t.children[r],bM(e,o=t.leaf?i(s):s)){if(t.leaf||WO(e,o))return!0;a.push(s)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=vv([]),this},remove:function(e,t){if(!e)return this;for(var i,r,n,s,o=this.data,a=this.toBBox(e),l=[],u=[];o||l.length;){if(o||(o=l.pop(),r=l[l.length-1],i=u.pop(),s=!0),o.leaf&&(n=kFe(e,o.children,t))!==-1)return o.children.splice(n,1),l.push(o),this._condense(l),this;s||o.leaf||!WO(o,a)?r?(i++,o=r.children[i],s=!1):o=null:(l.push(o),u.push(i),i=0,r=o,o=o.children[0])}return this},toBBox:function(e){return e},compareMinX:fH,compareMinY:mH,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,r){var n,s=i-t+1,o=this._maxEntries;if(s<=o)return A1(n=vv(e.slice(t,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),(n=vv([])).leaf=!1,n.height=r;var a,l,u,c,d=Math.ceil(s/o),f=d*Math.ceil(Math.sqrt(o));for(yH(e,t,i,f,this.compareMinX),a=t;a<=i;a+=f)for(yH(e,a,u=Math.min(a+f-1,i),d,this.compareMinY),l=a;l<=u;l+=d)c=Math.min(l+d-1,u),n.children.push(this._build(e,l,c,r-1));return A1(n,this.toBBox),n},_chooseSubtree:function(e,t,i,r){for(var n,s,o,a,l,u,c,d;r.push(t),!t.leaf&&r.length-1!==i;){for(c=d=1/0,n=0,s=t.children.length;n<s;n++)l=HO(o=t.children[n]),(u=LFe(e,o)-l)<d?(d=u,c=l<c?l:c,a=o):u===d&&l<c&&(c=l,a=o);t=a||t.children[0]}return t},_insert:function(e,t,i){var r=this.toBBox,n=i?e:r(e),s=[],o=this._chooseSubtree(n,this.data,t,s);for(o.children.push(e),U2(o,n);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(n,s,t)},_split:function(e,t){var i=e[t],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var s=this._chooseSplitIndex(i,n,r),o=vv(i.children.splice(s,i.children.length-s));o.height=i.height,o.leaf=i.leaf,A1(i,this.toBBox),A1(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(e,t){this.data=vv([e,t]),this.data.height=e.height+1,this.data.leaf=!1,A1(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var r,n,s,o,a,l,u,c;for(l=u=1/0,r=t;r<=i-t;r++)o=PFe(n=j2(e,0,r,this.toBBox),s=j2(e,r,i,this.toBBox)),a=HO(n)+HO(s),o<l?(l=o,c=r,u=a<u?a:u):o===l&&a<u&&(u=a,c=r);return c},_chooseSplitAxis:function(e,t,i){var r=e.leaf?this.compareMinX:fH,n=e.leaf?this.compareMinY:mH;this._allDistMargin(e,t,i,r)<this._allDistMargin(e,t,i,n)&&e.children.sort(r)},_allDistMargin:function(e,t,i,r){e.children.sort(r);var n,s,o=this.toBBox,a=j2(e,0,t,o),l=j2(e,i-t,i,o),u=vM(a)+vM(l);for(n=t;n<i-t;n++)s=e.children[n],U2(a,e.leaf?o(s):s),u+=vM(a);for(n=i-t-1;n>=t;n--)s=e.children[n],U2(l,e.leaf?o(s):s),u+=vM(l);return u},_adjustParentBBoxes:function(e,t,i){for(var r=i;r>=0;r--)U2(t[r],e)},_condense:function(e){for(var t,i=e.length-1;i>=0;i--)e[i].children.length===0?i>0?(t=e[i-1].children).splice(t.indexOf(e[i]),1):this.clear():A1(e[i],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};let gH=class _ae{constructor(t,i){this.key=new $0(0,0,0,0),this.bounds=du(),this.objectIds=new Set,this.key.set(i);const r=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.scale=r.scale,this.level=r.level}get id(){return this.key.id}get extent(){return Kt.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const t=this.key.getChildKeys(),i=Bo.acquire();for(let r=0;r<t.length;r++)i[r]=new _ae(this.tileInfoView,t[r]);return i}getQuantizationParameters(){return ote.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const hy={added:[],removed:[]},JO=new Set,NFe=new $0(0,0,0,0);let FFe=class extends hp{constructor(t){super(),this._tiles=new Map,this._index=e5(9,Ze("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const i={added:[],removed:[]};for(const r of t.added)if(!this.has(r)){const n=new gH(this.tileScheme,r);this._tiles.set(r,n),this._index.insert(n),i.added.push(n)}for(const r of t.removed)if(this.has(r)){const n=this.get(r);this._tiles.delete(r),this._index.remove(n),i.removed.push(n)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(t){const i=this.tileScheme.getTileCoverage(t,0);if(!i)return;const{spans:r,lodInfo:n}=i,{level:s}=n;if(r.length>0)for(const{row:o,colFrom:a,colTo:l}of r)for(let u=a;u<=l;u++){const c=NFe.set(s,o,n.normalizeCol(u),n.getWorldForColumn(u)).id;if(JO.add(c),!this.has(c)){const d=new gH(this.tileScheme,c);this._tiles.set(c,d),this._index.insert(d),this.tiles.push(d),hy.added.push(d)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];JO.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),hy.removed.push(a))}(hy.added.length||hy.removed.length)&&this.emit("update",hy),jb.pool.release(i),JO.clear(),hy.added.length=0,hy.removed.length=0}},ag=class extends Lt{constructor(){super(...arguments),this.color=new Mt([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity}};h([p({type:Mt})],ag.prototype,"color",void 0),h([p({type:Mt})],ag.prototype,"haloColor",void 0),h([p()],ag.prototype,"haloOpacity",void 0),h([p()],ag.prototype,"fillOpacity",void 0),ag=h([ce("esri.views.2d.support.HighlightOptions")],ag);const xae=ag,DFe=e=>e.includes("Brush");let Sae=class{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),DFe(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}};function jFe(e,t,i,r,n,s,o,a){e.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let l=null;e.width!=null&&e.height!=null?l=[e.width,e.height]:e.width==null&&e.height!=null?l=[e.height,e.height]:e.width!=null&&e.height==null?l=[e.width,e.width]:e.width==null&&e.height==null&&(l=null);const u=i[0]-(r.left+r.right),c=i[1]-(r.top+r.bottom);let d,f,m=e.area||{x:0,y:0,width:u,height:c};if(l){const g=u/c,v=l[0]/l[1];if(v>g){const b=m.width/v;m={x:m.x,y:Math.round(m.y+(m.height-b)/2),width:m.width,height:Math.round(b)}}else{const b=m.height*v;m={x:Math.round(m.x+(m.width-b)/2),y:m.y,width:Math.round(b),height:m.height}}}else l=[m.width,m.height];return l[0]>m.width?(d=Math.min(l[0]/m.width,t),f=l[0]/m.width/d):(d=1,f=l[0]/m.width),{resolutionScale:d,cropArea:{x:Math.round((m.x+r.left)*d),y:Math.round((m.y+r.top)*d),width:Math.round(m.width*d),height:Math.round(m.height*d)},outputScale:f,format:n,quality:s,children:o,rotation:a}}function UFe(e,t,i){const{ctx:r,canvas:n}=Eae(e,i),s=r.getImageData(0,0,e.width,e.height),o=zFe(n,t);return Mae(n),{dataUrl:o,data:s}}function VFe(e,t){const{ctx:i,canvas:r}=Eae(e,t),n=i.getImageData(0,0,e.width,e.height);return Mae(r),n}function Eae(e,t){const i=BFe();t.premultipliedAlpha&&JFe(e),i.width=e.width,i.height=e.height;const r=i.getContext("2d",{willReadFrequently:!0});return r.putImageData(e,0,0),t.flipY&&WFe(r),{ctx:r,canvas:i}}function Mae(e){e.width=0,e.height=0}function BFe(){return Re(ZO)&&(ZO=document.createElement("canvas")),ZO}let ZO=null;function zFe(e,t){const i=ZFe[t.format],r=t.quality/100;return e.toDataURL(i,r)}function GFe(e,t){const i=HFe(e),r=KFe[i];return{format:i,quality:Ta(t??r,0,100)}}function qFe(e,t){return t/Math.max(e[0],e[1])}function jht(e,t,i,r=0,n=0,s=e.width-r,o=e.height-n,a=!1){const{data:l}=e,{width:u,height:c,data:d}=t,f=s/u,m=o/c,g=Math.ceil(f/2),v=Math.ceil(m/2),b=e.width;for(let x=0;x<c;x++)for(let S=0;S<u;S++){const T=4*(S+(a?c-x-1:x)*u);let _=0,M=0,I=0,$=0,L=0,B=0;const z=(x+.5)*m;for(let W=Math.floor(x*m);W<(x+1)*m;W++){const J=Math.abs(z-(W+.5))/v,K=(S+.5)*f,Q=J*J;for(let y=Math.floor(S*f);y<(S+1)*f;y++){const A=Math.abs(K-(y+.5))/g,N=Math.sqrt(Q+A*A);if(N>=1)continue;let j=2*N*N*N-3*N*N+1;const oe=4*(r+y+(n+W)*b);B+=j*l[oe+3],M+=j,!i&&l[oe+3]<255&&(j=j*l[oe+3]/255),I+=j*l[oe],$+=j*l[oe+1],L+=j*l[oe+2],_+=j}}d[T]=I/_,d[T+1]=$/_,d[T+2]=L/_,d[T+3]=B/M}return t}function HFe(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return YFe}}function WFe(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function JFe(e){const t=e.data,i=t.length;for(let r=0;r<i;r+=4){const n=t[r+3];if(n!==255&&n>0){const s=255/n;t[r+0]=t[r+0]*s,t[r+1]=t[r+1]*s,t[r+2]=t[r+2]*s}}}const ZFe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},vH=98,YFe="png",KFe={png:100,jpg:vH,jpeg:vH};var Tn;function Uht(e,t,i={}){const r=Iae(e);for(;r.length>1;){const n=t5(t,r.shift(),i);if(ee(n))return n}return QFe(t,r.shift(),i)}function Iae(e){const t=Ze("esri-force-webgl");if(t===Tn.WEBGL1||t===Tn.WEBGL2)return[t];switch(e){case"2d":return Ze("mac")&&Ze("chrome")?[Tn.WEBGL1,Tn.WEBGL2]:[Tn.WEBGL2,Tn.WEBGL1];case"3d":return[Tn.WEBGL2,Tn.WEBGL1]}}function QFe(e,t,i={}){if(!window.WebGLRenderingContext)return bH(e,XFe),null;const r=t5(e,t,i);return Re(r)&&bH(e,eDe),r}function t5(e,t,i={}){const r=t===Tn.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let n=null;for(const s of r){try{n=e.getContext(s,i)}catch{}if(n)break}return n}function bH(e,t){const i=e.parentNode;i&&(i.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>")}(function(e){e[e.WEBGL1=1]="WEBGL1",e[e.WEBGL2=2]="WEBGL2"})(Tn||(Tn={}));const XFe='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',eDe=`It doesn't appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>`;let YO,KO;function tDe(e){const t=Iae(e);for(;t.length>1;){const i=wH(t.shift());if(i.available)return i}return wH(t.shift())}function wH(e){switch(e){case Tn.WEBGL1:return iDe();case Tn.WEBGL2:return rDe()}}function iDe(){return YO||(YO=oDe()),YO}function rDe(){return KO||(KO=aDe()),KO}let Tae=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}},nDe=class extends Tae{constructor(){super(...arguments),this.type=Tn.WEBGL1}},sDe=class extends Tae{constructor(){super(...arguments),this.type=Tn.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}};function Aae(e,t){if(e===Tn.WEBGL1&&typeof WebGLRenderingContext>"u"||e===Tn.WEBGL2&&typeof WebGL2RenderingContext>"u")return null;const i=document.createElement("canvas");if(!i)return null;let r=t5(i,e,{failIfMajorPerformanceCaveat:!0});if(Re(r)&&(r=t5(i,e),ee(r)&&(t.majorPerformanceCaveat=!0)),Re(r))return r;if(e===Tn.WEBGL1){const s=r.getParameter(r.VERSION)?.match(/^WebGL\s+([\d.]*)/);if(s){const o=parseFloat(s[1]);t.available=o>=.94}}else t.available=!0;t.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const n=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return n&&(t.supportsHighPrecisionFragment=n.precision>0),r}function oDe(){const e=new nDe,t=Aae(Tn.WEBGL1,e);return Re(t)||(e.supportsElementIndexUint=t.getExtension("OES_element_index_uint")!==null,e.supportsStandardDerivatives=t.getExtension("OES_standard_derivatives")!==null,e.supportsInstancedArrays=t.getExtension("ANGLE_instanced_arrays")!==null,e.supportsTextureFloat=t.getExtension("OES_texture_float")!==null,e.supportsTextureHalfFloat=t.getExtension("OES_texture_half_float")!==null,e.supportsColorBufferFloat=t.getExtension("WEBGL_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=t.getExtension("EXT_color_buffer_half_float")!==null),e}function aDe(){const e=new sDe,t=Aae(Tn.WEBGL2,e);return Re(t)||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null),e}function lDe(e){const t=tDe(e);if(!t.available)return new Ce("webgl:required","WebGL is required but not supported.");if(e==="3d"&&t.majorPerformanceCaveat)return new Ce("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!t.supportsHighPrecisionFragment)return new Ce("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!t.supportsVertexShaderSamplers)return new Ce("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(t.type===Tn.WEBGL1){if(!t.supportsElementIndexUint)return new Ce("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!t.supportsStandardDerivatives)return new Ce("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!t.supportsInstancedArrays)return new Ce("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function uDe(e){return e&&"nodeType"in e}function cDe(e){return e&&typeof e.render=="function"}const _H={component:"esri-component"};let lg=class extends Lt{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(t){const i=this._get("node");t!==i&&(t&&t.classList.add(_H.component),i&&i.classList.remove(_H.component),this._set("node",t))}castNode(t){return t?typeof t=="string"||uDe(t)?(this._set("widget",null),u9(t)):(cDe(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};h([p({dependsOn:[]})],lg.prototype,"id",null),h([p()],lg.prototype,"node",null),h([di("node")],lg.prototype,"castNode",null),h([p({readOnly:!0})],lg.prototype,"widget",void 0),lg=h([ce("esri.views.ui.Component")],lg);const ST=lg,hDe={left:0,top:0,bottom:0,right:0},Cae={bottom:30,top:15,right:15,left:15},QO="manual",Kh="esri-ui",Ao={ui:Kh,corner:`${Kh}-corner`,innerContainer:`${Kh}-inner-container`,manualContainer:`${Kh}-manual-container`,cornerContainer:`${Kh}-corner-container`,topLeft:`${Kh}-top-left`,topRight:`${Kh}-top-right`,bottomLeft:`${Kh}-bottom-left`,bottomRight:`${Kh}-bottom-right`};function dDe(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function XO(e){const t=e,i=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(i===null||i===Object.prototype)&&("component"in t||"index"in t||"position"in t)?e:null}function eR(e,{top:t,bottom:i,left:r,right:n}){e.style.top=t,e.style.bottom=i,e.style.left=r,e.style.right=n}let Qc=class extends hp.EventedAccessor{constructor(t){super(t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._locale=au(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&eR(i,this._toPxPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&eR(i,this._toPxPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([nt(()=>[this.view?.padding,this.container],this._applyViewPadding,Pi),nt(()=>this.padding,this._applyUIPadding,Pi),nt(()=>[this.container,this._locale],([t,i])=>{t&&t.setAttribute("lang",i)},Pi),VK(t=>{this._locale=t})])}destroy(){this.container=null;for(const t of this._components)t.destroy();this._components.length=0,this._componentToKey.clear()}set container(t){const i=this._get("container");t!==i&&(t&&(t.classList.add(Ao.ui),RLe(t),this._attachContainers(t)),i&&(i.classList.remove(Ao.ui),eR(i,{top:"",bottom:"",left:"",right:""}),zne(i)),this._set("container",t))}get height(){const t=this.get("view.height")||0;if(t===0)return t;const i=this._getViewPadding(),r=i.top+i.bottom;return Math.max(t-r,0)}get padding(){return this._get("padding")}set padding(t){this._overrideIfSome("padding",t)}castPadding(t){return typeof t=="number"?{bottom:t,top:t,right:t,left:t}:{...Cae,...t}}get width(){const t=this.get("view.width")||0;if(t===0)return t;const i=this._getViewPadding(),r=i.left+i.right;return Math.max(t-r,0)}add(t,i){let r,n;if(Array.isArray(t))return void t.forEach(o=>this.add(o,i));const s=XO(t);s&&({index:r,position:i,component:t,key:n}=s),i&&typeof i=="object"&&({index:r,key:n,position:i}=i),!t||i&&!this._isValidPosition(i)||this._add(t,i,r,n)}remove(t,i){if(!t)return;if(Array.isArray(t))return t.map(n=>this.remove(n,i));const r=this._find(t);if(r){const n=this._componentToKey;if(n.has(t)&&n.get(t)!==i)return;const s=this._components.indexOf(r);return r.node.parentNode&&r.node.parentNode.removeChild(r.node),this._componentToKey.delete(t),this._components.splice(s,1)[0]}}empty(t){return Array.isArray(t)?t.map(i=>this.empty(i)).reduce((i,r)=>i.concat(r)):(t=t||QO)===QO?Array.prototype.slice.call(this._manualContainer.children).filter(i=>!i.classList.contains(Ao.corner)).map(i=>this.remove(i)):this._isValidPosition(t)?Array.prototype.slice.call(this._cornerNameToContainerLookup[t].children).map(this.remove,this):null}move(t,i){if(Array.isArray(t)&&t.forEach(o=>this.move(o,i)),!t)return;let r;const n=XO(t)||XO(i);if(n&&(r=n.index,i=n.position,t=n.component||t),i&&!this._isValidPosition(i))return;const s=this.remove(t);s&&this.add(s,{position:i,index:r})}find(t){if(!t)return null;const i=this._findById(t);return i&&(i.widget||i.node)}getPosition(t){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(t))return i;return null}_add(t,i,r,n){t instanceof ST||(t=new ST({node:t})),this._place({component:t,position:i,index:r}),this._components.push(t),n&&this._componentToKey.set(t,n)}_find(t){return t?t instanceof ST?this._findByComponent(t):typeof t=="string"?this._findById(t):this._findByNode(t.domNode||t):null}_getViewPadding(){return this.get("view.padding")||hDe}_attachContainers(t){t.appendChild(this._innerContainer),t.appendChild(this._manualContainer)}_initContainers(){const t=document.createElement("div");t.classList.add(Ao.innerContainer),t.classList.add(Ao.cornerContainer);const i=document.createElement("div");i.classList.add(Ao.innerContainer),i.classList.add(Ao.manualContainer);const r=document.createElement("div");r.classList.add(Ao.topLeft),r.classList.add(Ao.corner),t.appendChild(r);const n=document.createElement("div");n.classList.add(Ao.topRight),n.classList.add(Ao.corner),t.appendChild(n);const s=document.createElement("div");s.classList.add(Ao.bottomLeft),s.classList.add(Ao.corner),t.appendChild(s);const o=document.createElement("div");o.classList.add(Ao.bottomRight),o.classList.add(Ao.corner),t.appendChild(o),this._innerContainer=t,this._manualContainer=i;const a=mh();this._cornerNameToContainerLookup={"top-left":r,"top-right":n,"bottom-left":s,"bottom-right":o,"top-leading":a?n:r,"top-trailing":a?r:n,"bottom-leading":a?o:s,"bottom-trailing":a?s:o},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(t){return!!this._positionNameToContainerLookup[t]}_place(t){const i=t.component,r=t.position||QO,n=t.index,s=this._positionNameToContainerLookup[r],o=n!=null&&n>-1;if(dDe(i.widget)&&i.widget.startup(),!o)return void s.appendChild(i.node);const a=Array.prototype.slice.call(s.children);if(n===0)return void(s.firstChild?TG(i.node,s.firstChild):s.appendChild(i.node));n>=a.length?s.appendChild(i.node):TG(i.node,a[n])}_toPxPosition(t){return{top:this._toPxUnit(t.top),left:this._toPxUnit(t.left),right:this._toPxUnit(t.right),bottom:this._toPxUnit(t.bottom)}}_toPxUnit(t){return t===0?"0":t+"px"}_findByComponent(t){let i,r=null;return this._components.some(n=>(i=n===t,i&&(r=n),i)),r}_findById(t){let i,r=null;return this._components.some(n=>(i=n.id===t,i&&(r=n),i)),r}_findByNode(t){let i,r=null;return this._components.some(n=>(i=n.node===t,i&&(r=n),i)),r}};h([p()],Qc.prototype,"_locale",void 0),h([p()],Qc.prototype,"container",null),h([p()],Qc.prototype,"height",null),h([p({value:Cae})],Qc.prototype,"padding",null),h([di("padding")],Qc.prototype,"castPadding",null),h([p()],Qc.prototype,"view",void 0),h([p()],Qc.prototype,"width",null),Qc=h([ce("esri.views.ui.UI")],Qc);const pDe=Qc;function xH(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function fDe(e,t){return e.length!==t.length||e.some((i,r)=>i.text!==t[r].text)}function wM(e,t,i){!i||!t||e.find(r=>r.layerView===t&&r.text===i)||e.push({text:i,layerView:t})}function mDe(e){return e.type==="bing-maps"}const Vp=[];let bv=class extends mA{constructor(t){super(t),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Pt,this.view=null,this._allLayerViewsChange=i=>{this.handles.remove("suspension");const r=this.get("view.allLayerViews");r&&this.handles.add(r.map(n=>nt(()=>[n.suspended,n.layer?.attributionVisible],()=>this._updateAttributionItems())),"suspension"),i&&i.removed&&i.removed.forEach(n=>{this._pendingAttributions.delete(n),this._fetchedAttributionData.delete(n)}),this._updateAttributionItems()},this.handles.add([ms(()=>this.view?.allLayerViews,"change",i=>this._allLayerViewsChange(i),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Tl(()=>this.view?.stationary===!0,()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const t=this.view,i=t?.allLayerViews;Vp.length=0,t&&i?(i.forEach(r=>{if(r.suspended||!r.layer?.attributionVisible)return;const n=r.layer;if(xH(n,"user"))return void wM(Vp,r,n.copyright);if(n.hasAttributionData){if(this._fetchedAttributionData.has(r)){const o=this._fetchedAttributionData.get(r);return void(o?wM(Vp,r,this._getDynamicAttribution(o,t,n)):xH(n)&&wM(Vp,r,n.copyright))}return void this._fetchAttributionData(r)}const s=n.get("portalItem.accessInformation");wM(Vp,r,s||n.copyright)}),fDe(this.items,Vp)&&(this.items.removeAll(),this.items.addMany(Vp)),Vp.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(t){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);const i=await J5(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){const r=i.ok?this._createContributionIndex(i.value,mDe(t.layer)):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,r)}this._updateAttributionItems()}_createContributionIndex(t,i){const r=t.contributors,n={};if(!r)return n;for(let s=0;s<r.length;s++){const o=r[s],a=o.coverageAreas;if(!a)return;for(const l of a){const u=l.bbox,c=l.zoomMin-(i&&l.zoomMin?1:0),d=l.zoomMax-(i&&l.zoomMax?1:0),f={xmin:u[1],ymin:u[0],xmax:u[3],ymax:u[2],spatialReference:Et.WGS84},m={extent:Zf(f),attribution:o.attribution||"",score:l.score!=null?l.score:100,id:s};for(let g=c;g<=d;g++)n[g]=n[g]||[],n[g].push(m)}}return n.maxKey=Math.max.apply(null,Object.keys(n)),n}_getDynamicAttribution(t,i,r){const{extent:n,scale:s}=i;let o=r.tileInfo?.scaleToZoom(s)??0;if(o=Math.min(t.maxKey??0,Math.round(o)),!n||o==null||o<=-1)return"";const a=t[o],l=Q5(n.center.clone().normalize(),i.spatialReference),u={};return a?a.filter(c=>{const d=c.id,f=!u[d]&&l&&c.extent&&X5(c.extent,l);return f&&(u[d]=!0),f}).sort((c,d)=>d.score-c.score||c.objectId-d.objectId).map(c=>c.attribution).join(", "):""}};h([p({readOnly:!0,type:Pt})],bv.prototype,"items",void 0),h([p({readOnly:!0})],bv.prototype,"state",null),h([p()],bv.prototype,"view",void 0),bv=h([ce("esri.widgets.Attribution.AttributionViewModel")],bv);const $ae=bv,C1="esri-attribution",Bp={base:`${C1} esri-widget`,poweredBy:`${C1}__powered-by`,sources:`${C1}__sources`,open:`${C1}--open`,sourcesOpen:`${C1}__sources--open`,link:`${C1}__link`,widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let Po=class extends $s{constructor(t,i){super(t,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(r=>r.forEach(({target:n})=>this._checkSourceTextOverflow(n))),this.iconClass=Bp.widgetIcon,this.itemDelimiter=" | ",this.messages=null,this.viewModel=new $ae}initialize(){this.addHandles(ms(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((t,i)=>(t.includes(i.text)||t.push(i.text),t),[]).join(this.itemDelimiter)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t={[Bp.open]:this._isOpen};return Ne("div",{bind:this,class:this.classes(Bp.base,t),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return Ne("div",{class:Bp.poweredBy},"Powered by"," ",Ne("a",{class:Bp.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const t=this._isOpen,i=this._isInteractive,r=i?"0":"",{attributionText:n}=this,s={[Bp.sourcesOpen]:t,[Bp.interactive]:i};return Ne("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Bp.sources,s),innerHTML:n,tabindex:r})}_afterSourcesNodeCreate(t){this._prevSourceNodeHeight=t.clientWidth,this._resizeObserver.observe(t)}_checkSourceTextOverflow(t){let i=!1;const{clientHeight:r,clientWidth:n,scrollWidth:s}=t,o=s>n,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(i=!0),this._isOpen){const l=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,l&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};h([p()],Po.prototype,"_isOpen",void 0),h([p()],Po.prototype,"_isInteractive",null),h([p()],Po.prototype,"_attributionTextOverflowed",void 0),h([p()],Po.prototype,"_prevSourceNodeHeight",void 0),h([p({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Po.prototype,"attributionText",null),h([p()],Po.prototype,"iconClass",void 0),h([p()],Po.prototype,"itemDelimiter",void 0),h([p()],Po.prototype,"label",null),h([p(),Is("esri/widgets/Attribution/t9n/Attribution")],Po.prototype,"messages",void 0),h([p()],Po.prototype,"view",null),h([p({type:$ae})],Po.prototype,"viewModel",void 0),h([rl()],Po.prototype,"_toggleState",null),Po=h([ce("esri.widgets.Attribution")],Po);const yDe=Po,gDe="esri.widgets.CompassViewModel";let ug=class extends Eoe(Lt){constructor(t){super(t),this._handles=new So,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(nt(()=>this.view,this._updateRotationWatcher,Pi))}destroy(){yn(this._handles),this.view=null}get canShowNorth(){const t=this.get("view.spatialReference");return!(!t||!t.isWebMercator&&!t.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const t={};this.view?.type==="2d"?t.rotation=0:t.heading=0,this.callGoTo({target:t})}_updateForRotation(t){t!=null&&(this.orientation={z:t})}_updateForCamera(t){if(!t)return;const i=-t.heading;this.orientation={x:0,y:0,z:i}}_updateRotationWatcher(t){this._handles.removeAll(),t&&this._handles.add(t.type==="2d"?nt(()=>t?.rotation,this._updateForRotation,Pi):nt(()=>t?.camera,this._updateForCamera,Pi))}};h([p({readOnly:!0})],ug.prototype,"canShowNorth",null),h([p()],ug.prototype,"orientation",void 0),h([p({readOnly:!0})],ug.prototype,"state",null),h([p()],ug.prototype,"view",void 0),ug=h([ce(gDe)],ug);const Oae=ug,zp={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let Xc=class extends $s{constructor(t,i){super(t,i),this.iconClass=zp.widgetIcon,this.messages=null,this.viewModel=new Oae}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}reset(){return this.viewModel.reset()}render(){const{orientation:t,state:i}=this.viewModel,r=i==="disabled",n=(i==="rotation"?"rotation":"compass")=="compass",s=r?-1:0,o={[zp.disabled]:r,[zp.interactive]:!r},a={[zp.northIcon]:n,[zp.rotationIcon]:!n},{messages:l}=this;return Ne("div",{bind:this,class:this.classes(zp.base,o),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:s,"aria-label":l.reset,title:l.reset},Ne("span",{"aria-hidden":"true",class:this.classes(zp.icon,a),styles:this._toRotationTransform(t)}),Ne("span",{class:zp.text},l.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(t){return{transform:`rotateZ(${t.z}deg)`}}};h([p()],Xc.prototype,"goToOverride",null),h([p()],Xc.prototype,"iconClass",void 0),h([p()],Xc.prototype,"label",null),h([p(),Is("esri/widgets/Compass/t9n/Compass")],Xc.prototype,"messages",void 0),h([p()],Xc.prototype,"view",null),h([p({type:Oae})],Xc.prototype,"viewModel",void 0),h([rl()],Xc.prototype,"_reset",null),Xc=h([ce("esri.widgets.Compass")],Xc);const vDe=Xc,$1="esri-navigation-toggle",Pl={base:`${$1} esri-widget`,button:`${$1}__button esri-widget--button`,activeButton:`${$1}__button--active`,panButton:`${$1}__button--pan`,rotateButton:`${$1}__button--rotate`,isLayoutHorizontal:`${$1}--horizontal`,rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let wv=class extends Lt{constructor(t){super(t),this.navigationMode="pan",this.view=null}initialize(){this.own(Tl(()=>this.view?.inputManager,()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){return this.get("view.ready")&&this.view?.type==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};h([p({readOnly:!0})],wv.prototype,"state",null),h([p()],wv.prototype,"navigationMode",void 0),h([p()],wv.prototype,"view",void 0),wv=h([ce("esri.widgets.NavigationToggleViewModel")],wv);const Rae=wv;let eh=class extends $s{constructor(t,i){super(t,i),this.iconClass=Pl.widgetIcon,this.messages=null,this.viewModel=new Rae}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}toggle(){return this.viewModel.toggle()}render(){const t=this.get("viewModel.state")==="disabled",i=this.get("viewModel.navigationMode")==="pan",r={[Pl.disabled]:t,[Pl.isLayoutHorizontal]:this.layout==="horizontal"},n={[Pl.activeButton]:i},s={[Pl.activeButton]:!i},o=t?-1:0,a=this.messages.toggle;return Ne("div",{bind:this,class:this.classes(Pl.base,r),onclick:this._toggle,onkeydown:this._toggle,tabIndex:o,"aria-label":a,title:a},Ne("div",{class:this.classes(Pl.button,Pl.panButton,n)},Ne("span",{class:Pl.panIcon})),Ne("div",{class:this.classes(Pl.button,Pl.rotateButton,s)},Ne("span",{class:Pl.rotationIcon})))}_toggle(){this.toggle()}};h([p()],eh.prototype,"iconClass",void 0),h([p()],eh.prototype,"label",null),h([p({value:"vertical"})],eh.prototype,"layout",null),h([p(),Is("esri/widgets/NavigationToggle/t9n/NavigationToggle")],eh.prototype,"messages",void 0),h([p()],eh.prototype,"view",null),h([p({type:Rae})],eh.prototype,"viewModel",void 0),h([rl()],eh.prototype,"_toggle",null),eh=h([ce("esri.widgets.NavigationToggle")],eh);const bDe=eh,A_={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let wf=class extends $s{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const t=this.enabled?0:-1,i={[A_.disabled]:!this.enabled,[A_.interactive]:this.enabled},r={[this.iconClass]:!!this.iconClass};return Ne("div",{bind:this,class:this.classes(A_.button,i),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:t,title:this.title},Ne("span",{"aria-hidden":"true",role:"presentation",class:this.classes(A_.icon,r)}),Ne("span",{class:A_.iconText},this.title))}_triggerAction(){this.action.call(this)}};h([p()],wf.prototype,"action",void 0),h([p()],wf.prototype,"enabled",void 0),h([p()],wf.prototype,"iconClass",void 0),h([p()],wf.prototype,"title",void 0),h([rl()],wf.prototype,"_triggerAction",null),wf=h([ce("esri.widgets.IconButton")],wf);const SH=wf;let _v=class extends Lt{get canZoomIn(){if(!this.get("view.ready"))return!1;const t=this.get("view.animation.target.scale")||this.get("view.scale"),i=this.get("view.constraints.effectiveMaxScale");return i===0||t>i}get canZoomOut(){if(!this.get("view.ready"))return!1;const t=this.get("view.animation.target.scale")||this.get("view.scale"),i=this.get("view.constraints.effectiveMinScale");return i===0||t<i}};h([p({readOnly:!0})],_v.prototype,"canZoomIn",null),h([p({readOnly:!0})],_v.prototype,"canZoomOut",null),h([p()],_v.prototype,"view",void 0),_v=h([ce("esri.widgets.Zoom.ZoomConditions2D")],_v);const wDe=_v;let xv=class extends Lt{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};h([p({readOnly:!0})],xv.prototype,"canZoomIn",null),h([p({readOnly:!0})],xv.prototype,"canZoomOut",null),h([p()],xv.prototype,"view",void 0),xv=h([ce("esri.widgets.Zoom.ZoomConditions3D")],xv);const _De=xv;let _f=class extends Lt{constructor(t){super(t)}destroy(){this.view=null}get canZoomIn(){return ee(this._zoomConditions)&&this._zoomConditions.canZoomIn}get canZoomOut(){return ee(this._zoomConditions)&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(t){t?t.type==="2d"?this._zoomConditions=new wDe({view:t}):t.type==="3d"&&(this._zoomConditions=new _De({view:t})):this._zoomConditions=null,this._set("view",t)}zoomIn(){if(!this.canZoomIn)return;const t=this.view;t.type==="2d"?t.mapViewNavigation.zoomIn():qv(t.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const t=this.view;t.type==="2d"?t.mapViewNavigation.zoomOut():qv(t.goTo({zoomFactor:.5}))}};h([p()],_f.prototype,"_zoomConditions",void 0),h([p()],_f.prototype,"canZoomIn",null),h([p()],_f.prototype,"canZoomOut",null),h([p({readOnly:!0})],_f.prototype,"state",null),h([p()],_f.prototype,"view",null),_f=h([ce("esri.widgets.Zoom.ZoomViewModel")],_f);const kae=_f,C_={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let Id=class extends $s{constructor(t,i){super(t,i),this.iconClass=C_.widgetIcon,this.messages=null,this.viewModel=new kae}initialize(){this._zoomInButton=new SH({action:this.zoomIn.bind(this),iconClass:C_.zoomInIcon}),this._zoomOutButton=new SH({action:this.zoomOut.bind(this),iconClass:C_.zoomOutIcon})}destroy(){this._zoomInButton=qr(this._zoomInButton),this._zoomOutButton=qr(this._zoomOutButton)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}set view(t){this.viewModel.view=t}get view(){return this.viewModel.view}render(){const t=this.viewModel,i={[C_.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:r,canZoomOut:n}=t;this._zoomInButton.enabled=r,this._zoomOutButton.enabled=n;const{zoomIn:s,zoomOut:o}=this.messages;return this._zoomInButton.title=s,this._zoomOutButton.title=o,Ne("div",{class:this.classes(C_.base,i)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};h([p()],Id.prototype,"iconClass",void 0),h([p()],Id.prototype,"label",null),h([p({value:"vertical"})],Id.prototype,"layout",null),h([p(),Is("esri/widgets/Zoom/t9n/Zoom")],Id.prototype,"messages",void 0),h([p()],Id.prototype,"view",null),h([p({type:kae})],Id.prototype,"viewModel",void 0),Id=h([ce("esri.widgets.Zoom")],Id);const xDe=Id;function SDe(e){return e&&e.view!==void 0}let ET=class extends pDe{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[]}initialize(){this.addHandles([nt(()=>this.components,this._componentsWatcher.bind(this),Pi),nt(()=>this.view,this._updateViewAwareWidgets.bind(this),Pi)])}_add(t,i,r,n){let s=t;if(typeof t=="string"&&this._defaultPositionLookup[t]){if(this._find(t))return;s=this._createComponent(t)}super._add(s,i,r,n)}_removeComponents(t){t.forEach(i=>{const r=this._find(i);r&&(this.remove(r),r.destroy())})}_updateViewAwareWidgets(t){this.components.forEach(i=>{const r=this._find(i),n=r&&r.widget;SDe(n)&&(n.view=t)})}_componentsWatcher(t,i){this._removeComponents(i),this._addComponents(t),this._adjustPadding(t)}_adjustPadding(t){if(!t.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(t){this.constructed&&t.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(t){const i=this._createWidget(t);if(i)return new ST({id:t,node:i})}_createWidget(t){return t==="attribution"?this._createAttribution():t==="compass"?this._createCompass():t==="navigation-toggle"?this._createNavigationToggle():t==="zoom"?this._createZoom():void 0}_createAttribution(){return new yDe({view:this.view})}_createCompass(){return new vDe({view:this.view})}_createNavigationToggle(){return new bDe({view:this.view})}_createZoom(){return new xDe({view:this.view})}};h([p()],ET.prototype,"components",void 0),ET=h([ce("esri.views.ui.DefaultUI")],ET);const EDe=ET;let MT=class extends EDe{constructor(t){super(t),this.components=["attribution","zoom"]}};h([p()],MT.prototype,"components",void 0),MT=h([ce("esri.views.ui.2d.DefaultUI2D")],MT);const Lae=MT;var O6;let IT=O6=class extends Je{constructor(e){super(e),this.color=new Mt([0,0,0,1])}clone(){return new O6(Le({color:this.color}))}};h([p({type:Mt,json:{write:!0}})],IT.prototype,"color",void 0),IT=O6=h([ce("esri.webmap.background.ColorBackground")],IT);const MDe=IT;let Pae,Nae,Fae,Dae,jae,Uae;async function IDe(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:i,MapViewNavigation:r,MagnifierView2D:n,Stage:s}]=await Promise.all([De(()=>import("./webglDeps-14f25380.js"),["./webglDeps-14f25380.js","./VertexArrayObject-e9cbf53c.js","./Texture-54c1cd22.js","./enums-64ab819c.js","./ProgramTemplate-edacfcc0.js","./programUtils-d3ce4af8.js","./NestedMap-7c434b47.js","./preload-helper-388ac9d5.js"],import.meta.url),De(()=>import("./mapViewDeps-0b9d705c.js"),["./mapViewDeps-0b9d705c.js","./MagnifierPrograms-ef986b03.js","./_commonjsHelpers-2f3e7994.js","./WGLContainer-89ed5ced.js","./definitions-cc1dbf1d.js","./VertexArrayObject-e9cbf53c.js","./Texture-54c1cd22.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./color-db1e2af1.js","./enums-f1a6a48a.js","./ProgramTemplate-edacfcc0.js","./MaterialKey-b40e2f2f.js","./utils-8928f1dc.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-9107641e.js","./earcut-61f7b102.js","./ExpandedCIM-9c7118f8.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-3cda2a0c.js","./floatRGBA-a019290c.js","./rasterizingUtils-9ae385c0.js","./imageutils-ce0ae93c.js","./Matcher-7e90ee77.js","./visualVariablesUtils-19bb0f88.js","./visualVariablesUtils-0c1b8204.js","./tileUtils-c2f19f52.js","./TurboLine-3fb14243.js","./devEnvironmentUtils-f2a1f21e.js","./CircularArray-faaa0557.js","./webgl-debug-b1f7a2c5.js","./ComputedAttributeStorage-119e2cd6.js","./arcadeTimeUtils-b303a482.js","./executionError-c1d13a98.js","./centroid-ad024a23.js","./BufferPool-3f973015.js","./enums-fb086c25.js","./programUtils-d3ce4af8.js","./NestedMap-7c434b47.js","./RenderingContext-b5a82d1c.js","./OrderIndependentTransparency-e1b3a745.js","./basicInterfaces-b7051eb1.js","./doublePrecisionUtils-e3c3d0d8.js","./imageUtils-c2d0d1ae.js","./GraphicsView2D-0752e7a2.js","./normalizeUtilsSync-96066691.js","./projectionSupport-3f6ca955.js","./json-48e3ea08.js","./AttributeStoreView-a03da5ff.js","./TiledDisplayObject-34f8c26b.js","./schemaUtils-4ce7eb31.js","./util-bcfd34c1.js","./GraphicContainer-3ca17b25.js","./BaseGraphicContainer-5ddab985.js","./FeatureContainer-e59f9073.js","./TileContainer-daa0ec0d.js","./vec3f32-ad1dc57f.js","./requestImageUtils-7de6e3c3.js"],import.meta.url)]);Nae=e,Fae=t,Dae=i,jae=r,Uae=n,Pae=s}const EH=160;function TDe(e){return e&&e.declaredClass==="esri.Viewpoint"}let ni=class extends Z$e(M8e(I8e(K8e))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new M0({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this._stationaryTimer=null,this._gotoTask=null,this.frameTask=new tNe(this),this._pePromise=null,this.floors=new Pt,this.highlightOptions=new xae,this.inputManager=new $Fe({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new Sae,this.type="2d",this.ui=new Lae,this._pixelFormat={flipY:!0,premultipliedAlpha:!0},this.constraints=new sae,this.padding={top:0,right:0,bottom:0,left:0},this.handles.add([nt(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(EH)},wl),this.on("resize",t=>this._resizeHandler(t)),nt(()=>this.animationManager?.animation,t=>{this.animation=t})]),f2e()}destroy(){this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new FFe(this.featuresTilingScheme)}get initialExtentRequired(){const{scale:e,constraints:t,center:i,viewpoint:r,extent:n}=this;let s=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint)&&!n&&(t?.effectiveLODs||(s=-1),(!i||e===0&&s===-1)&&(!r||!ee(r.targetGeometry)||r.targetGeometry.type!=="extent"&&!r.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!mm()||(this._pePromise||(this._pePromise=ym().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=this.spatialReference,i=e.targetGeometry;return!!rp(i.spatialReference,t)||this._projectionEngineLoaded}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e),this.frameTask.animationInProgress=!0;const i=()=>{e===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame()),this.frameTask&&(this.frameTask.animationInProgress=!1)};e.when(i,i)}get background(){return CDe(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:t}=this.state.paddedViewState;return new At({x:e[0],y:e[1],spatialReference:t})}set center(e){if(e==null)return;if(!this.ready)return this._set("center",e),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(r){return void et.getLogger(this.declaredClass).error(new Ce("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:r}))}const i=this.viewpoint;x6(i,i,t),this.viewpoint=i}set constraints(e){const t=this._get("constraints");t&&(this.handles.remove("map-view-constraints"),t.destroy()),this._set("constraints",e),e&&(e.view=this,this.ready&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint)),this.handles.add(nt(()=>e.version,()=>{this.ready&&this.state&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint))},wl),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void et.getLogger(this.declaredClass).error(new Ce("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(r){return void et.getLogger(this.declaredClass).error(new Ce("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:r}))}const i=this.viewpoint;j6e(i,i,t,this.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const t=this.viewpoint;K6e(t,t,e),this.viewpoint=t}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",-1);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}const t=this.viewpoint;Xq(t,t,e),this.viewpoint=t}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){const e=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(t=>!t.destroyed&&!("layerViews"in t)&&t.updating===!0));if(Ze("esri-2d-log-updating")){const t=this.allLayerViews.reduce((i,r)=>({...i,[r.layer.id]:!r.destroyed&&!("layerViews"in r)&&r.updating}),{});console.log(`Updating MapView: ${e}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${this.layerViewManager?.updating}
-> labelManager.updating: ${this.labelManager?.updating}
-> graphicsView.updating: ${this.graphicsView?.updating}
-> allLayerViews: ${JSON.stringify(t)}
`)}return e}get viewpoint(){if(!this.ready)return this._get("viewpoint");const e=this.state.paddedViewState;return e&&e.viewpoint.clone()}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");let t,i;try{t=this._project(e,this.spatialReference),!e.scale||isNaN(e.scale)?i=new Ce("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):Re(e.targetGeometry)&&(i=new Ce("mapview:invalid-viewpoint","geometry not defined"))}catch(n){i=new Ce("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:n})}if(i)return void et.getLogger(this.declaredClass).error(i);this._scaleBeforeChangingSpatialReference=null;const r=new _h({targetGeometry:new At,scale:0,rotation:0});_c(r,t),this.constraints.constrain(r,this.state.paddedViewState.viewpoint),this.state.viewpoint=r,this.frameTask.requestFrame(),this._set("viewpoint",r)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(e){if(e==null)return;if(!this.ready){this._set("zoom",e),this._set("scale",0);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}if(!this.constraints.effectiveLODs)return void this._set("zoom",-1);const t=this.viewpoint;Xq(t,t,this.constraints.zoomToScale(e)),this.viewpoint=t,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(e,t){if(e)return this.animation&&(this.animation=null),this._createAnimation(),m4(()=>this.ready,t).then(()=>{const i={animate:!0,...t},r=N6e(e,this);return this.animation?.update(r),this._gotoTask={},i.animate?this._gotoAnimated(r,i):this._gotoImmediate(r,i)});et.getLogger(this.declaredClass).error("#goTo()","target cannot be null or undefined")}async hitTest(e,t){const i=Wq(e)?Hq(this,e):e;if(!this.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let r=new Set,n=!1,s=null,o=null;t?.include?IH(t.include,MH(this,c=>r.add(c),c=>{s||(s=new Set),s.add(c)},c=>r.add(c),()=>n=!0)):(n=!0,r=new Set(this.allLayerViews)),t?.exclude&&IH(t.exclude,MH(this,c=>r.delete(c),c=>{o||(o=new Set),o.add(c)}));const a=this.allLayerViews.filter(c=>!c.suspended&&r.has(c)).reverse(),l=this.toMap(i);let u=[...n?this.graphicsView.hitTest(l).map(c=>({type:"graphic",graphic:c,layer:null,mapPoint:l})):[],...await Promise.all(a.map(c=>c.hitTest(l,i)).toArray())].filter(ee).flat().filter(ee);return s&&(u=u.filter(c=>!("graphic"in c)||!c.graphic||s?.has(R6(c.graphic)))),o&&(u=u.filter(c=>!("graphic"in c)||!c.graphic||o?.has(R6(c.graphic)))),{screenPoint:i,results:u}}async takeScreenshot(e){const t=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(t);return UFe(i,{format:t.format,quality:t.quality,rotation:0,disableDecorations:!1},this._pixelFormat)}async _takeScreenshot(e){const t=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(t);return VFe(i,this._pixelFormat)}_createScreenshotPlan(e){e=e??{};const t=this.supersampleScreenshotsEnabled?Math.min(4,qFe(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let i;e.layers?(i=[],e.layers.forEach(s=>{const o=this.allLayerViews.find(a=>a.layer.id===s.id);o&&"container"in o&&o.container&&i.push(o.container)})):i=this._stage.children;const{format:r,quality:n}=GFe(e.format,e.quality);return jFe(e,t,this.size,this.padding,r,n,i,e.rotation)}get test(){return{takeScreenshot:e=>this._takeScreenshot(e)}}toMap(e){if(!this.ready)return null;const t=Wq(e)?Hq(this,e):e,i=[0,0],[r,n]=this.state.toMap(i,[t.x,t.y]),s=this.spatialReference;return new At({x:r,y:n,spatialReference:s})}toScreen(e){if(!this.ready)return null;const t=this._project(e,this.spatialReference),i=[t.x,t.y];return this.state.toScreen(i,i),cs(i[0],i[1])}on(e,t,i,r){return this.inputManager&&this.viewEvents.on(e,t,i,r)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map?.initialViewProperties?.spatialReference||this.defaultsFromMap?.spatialReference||null}hasLayerViewModule(e){return tH.hasLayerViewModule(e)}importLayerView(e){return tH.importLayerView(e)}pixelSizeAt(){return this.ready?this.state.resolution:(et.getLogger(this.declaredClass).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return this.hitTest(e).then(t=>({...t,mapPoint:this.toMap(e)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let e=lDe(this.type);return Ze("safari")&&Ze("safari")<9&&(e=new Ce("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:Ze("safari")})),ee(e)?(et.getLogger(this.declaredClass).warn("#validate()",e.message),Promise.reject(e)):IDe()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new w6),this.animation}_cancellableGoTo(e,t,i){const r=()=>e===this._gotoTask,n=i.then(()=>{r()&&(this.animation=null)}).catch(o=>{throw r()&&(t&&!t.done&&(t.stop(),this.frameTask.animationInProgress=!1),this.animation=null),o}),s=new Promise(o=>o(n));return t.when().catch(()=>{r()&&s.cancel&&s.cancel()}),s}_gotoImmediate(e,t){const i=this._gotoTask,r=this.animation,n=e.then(s=>{if(hr(t),i!==this._gotoTask)throw new Ce("view:goto-interrupted","Goto was interrupted");this.viewpoint=r.target=s,r.finish()});return this._cancellableGoTo(i,r,n)}_flipStationary(e){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const t=performance.now()-this._lastStationaryEventTimestamp;t<EH&&(this._stationaryTimer=this._flipStationary(t))},e)),this._stationaryTimer}_getDefaultViewpoint(){const{constraints:e,initialExtent:t,map:i,padding:r,size:n}=this;if(!e)return null;const s=i&&"initialViewProperties"in i?i.initialViewProperties:void 0,o={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};e.effectiveLODs?o.zoom!==-1&&(o.scale=e.zoomToScale(o.zoom)):o.zoom=-1;let a=null,l=null,u=0;const c=o.viewpoint&&o.viewpoint.rotation,d=o.viewpoint&&o.viewpoint.targetGeometry;ee(d)&&(d.type==="extent"?a=d:d.type==="point"&&(l=d,u=o.viewpoint.scale));const f=o.extent||a||s?.viewpoint?.targetGeometry?.extent||t,m=o.center||l||f?.center,g=o.scale||u||s?.viewpoint?.scale||f&&Mx(f,[n[0]-r.left-r.right,n[1]-r.top-r.bottom]),v=o.rotation||c||s?.viewpoint?.rotation||0;return m&&g?new _h({targetGeometry:m,scale:g,rotation:v}):null}_gotoAnimated(e,t){const i=this._gotoTask,r=this.animation;if(!r)return Promise.resolve();const n=e.then(s=>{if(hr(t),i!==this._gotoTask)throw new Ce("view:goto-interrupted","Goto was interrupted");return r.update(s),this.animationManager.animate(r,this.viewpoint,t),r.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,r,n)}_project(e,t){const i=e&&e.targetGeometry||e;if(!t)return e;if(!i)return null;if(t.imageCoordinateSystem||i.spatialReference?.imageCoordinateSystem||vn(t,i.spatialReference))return e;const r=W0(i,t);if(!r)throw new Ce("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:t});return TDe(e)?(e.targetGeometry=r,e):r}_resizeHandler(e){if(!this.ready)return;const t=this.state;let i=this.state.paddedViewState.viewpoint;const r=this.state.paddedViewState.size.concat();t.size=[e.width,e.height],Y6e(i,i,r,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints.constrain(i,void 0),this.state.viewpoint=i}_startup(){this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint(),t=e.targetGeometry;try{this._project(e,this.spatialReference)}catch(a){et.getLogger(this.declaredClass).warn(new El("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:t.toJSON(),spatialReference:this.spatialReference,error:a})),e.targetGeometry=this.defaultsFromMap.extent?.center||new At({x:0,y:0,spatialReference:this.spatialReference})}this.constraints?.fit(e),this._set("state",new BNe({padding:this._get("padding"),size:this.size,viewpoint:e})),this.graphics.owner=this;const i=new Pae(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=i,this._magnifierView=new Uae,this._magnifierView.magnifier=this.magnifier;const r=new Dae({view:this});this._set("labelManager",r);const n=new eNe({view:this});this._set("animationManager",n);const s=new jae({view:this,animationManager:n});this._set("mapViewNavigation",s),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("post-render",()=>this._set("rendering",i.renderRequested)),i.on("will-render",()=>this._set("rendering",i.renderRequested)),i.on("webgl-error",a=>this.fatalError=a.error),nt(()=>this.stationary,a=>i.stationary=a,Tf),nt(()=>this.background,a=>{i.background=a,this._magnifierView.background=a},Tf),nt(()=>this.magnifier,a=>this._magnifierView.magnifier=a,Tf),nt(()=>this.renderingOptions,a=>i.renderingOptions=a,Tf),nt(()=>this.highlightOptions,a=>i.highlightOptions=a,Tf),nt(()=>this.state.id,()=>i.state=this.state,Tf)],"map-view"),this._updateStageChildren();const o=this._resolveWhenReady;this._resolveWhenReady=[],o.forEach(a=>a(this)),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);const{center:[e,t],spatialReference:i,rotation:r,scale:n}=this.state.paddedViewState,s=new At({x:e,y:t,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",s),this._set("zoom",-1),this._set("rotation",r),this._set("scale",n),this._set("spatialReference",i),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this._stage.addChild(t.container)});const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new ZNe(ma.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new Nae({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new Fae(e)});this.frameTask.graphicsView=t,this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,e.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(e){if(!this.ready)return;this.frameTask.stop();for(const a of this.allLayerViews)a.processDetach();this._destroySpatialReferenceDependentProperties();const t=this.state.paddedViewState.clone();if(Re(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=t.scale;else{const a=t.viewpoint.clone();a.scale=this._scaleBeforeChangingSpatialReference,t.viewpoint=a}const i=t.clone(),[r,n]=t.center;let s=null;try{s=this._project(new At({x:r,y:n,spatialReference:t.spatialReference}),e)}catch(a){mm()||et.getLogger(this.declaredClass).warn(new El("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:s?.toJSON(),spatialReference:e,error:a}))}s||(s=new At({x:0,y:0,spatialReference:e}));const o=x6(new _h({targetGeometry:new At,scale:0,rotation:0}),t.viewpoint,s);i.viewpoint=o;try{const l=[t.size[0]/2,t.size[1]/2],u=[l[0]+20,l[1]],c=t.toMap([0,0],u),{x:d,y:f}=this._project(new At({x:c[0],y:c[1],spatialReference:t.spatialReference}),e);c[0]=d,c[1]=f,i.toScreen(c,c);const m=J6e(l,c,u),g=Math.hypot(c[0]-l[0],c[1]-l[1])/20;!Number.isFinite(g)||Math.abs(g)>4?(o.rotation=0,o.targetGeometry=new At({x:0,y:0,spatialReference:e})):(o.scale*=g,o.scale>Ze("mapview-srswitch-adjust-rotation-scale-threshold")?o.rotation=0:o.rotation+=Number.isFinite(m)?m:0)}catch{}this._get("constraints").constrain(o,void 0),this._get("state").viewpoint=o,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const a of this.allLayerViews)a.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};ni.type="2d",h([p({readOnly:!0})],ni.prototype,"animationManager",void 0),h([p({constructOnly:!0})],ni.prototype,"deactivatedWebGLExtensions",void 0),h([p({constructOnly:!0})],ni.prototype,"debugWebGLExtensions",void 0),h([p({readOnly:!0})],ni.prototype,"featuresTilingScheme",void 0),h([p({readOnly:!0})],ni.prototype,"fullOpacity",void 0),h([p({readOnly:!0})],ni.prototype,"graphicsTileStore",null),h([p()],ni.prototype,"graphicsView",void 0),h([p({readOnly:!0})],ni.prototype,"state",void 0),h([p()],ni.prototype,"initialExtentRequired",null),h([p()],ni.prototype,"labelManager",void 0),h([p({readOnly:!0})],ni.prototype,"resourceManager",null),h([p({readOnly:!0})],ni.prototype,"textureManager",null),h([p({readOnly:!0})],ni.prototype,"mapViewNavigation",void 0),h([p({constructOnly:!0})],ni.prototype,"renderCanvas",void 0),h([p()],ni.prototype,"renderingOptions",void 0),h([p({readOnly:!0})],ni.prototype,"rendering",void 0),h([p({constructOnly:!0})],ni.prototype,"supersampleScreenshotsEnabled",void 0),h([p({readOnly:!0})],ni.prototype,"supportsGround",void 0),h([p()],ni.prototype,"_stationaryTimer",void 0),h([p()],ni.prototype,"_defaultsFromMapSettings",null),h([p()],ni.prototype,"_pePromise",void 0),h([p({readOnly:!0})],ni.prototype,"typeSpecificPreconditionsReady",null),h([p()],ni.prototype,"animation",null),h([p({type:MDe})],ni.prototype,"background",null),h([p({value:null,type:At,dependsOn:["state.id","ready"]})],ni.prototype,"center",null),h([p({type:sae})],ni.prototype,"constraints",null),h([p({value:null,type:Kt,dependsOn:["state.id","ready"]})],ni.prototype,"extent",null),h([p()],ni.prototype,"floors",void 0),h([p({type:xae})],ni.prototype,"highlightOptions",void 0),h([p({readOnly:!0})],ni.prototype,"inputManager",void 0),h([p()],ni.prototype,"map",void 0),h([p({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],ni.prototype,"padding",null),h([p()],ni.prototype,"resizeAlign",void 0),h([p({readOnly:!0,dependsOn:["state.id"]})],ni.prototype,"resolution",null),h([p({value:0,type:Number,dependsOn:["state.id","ready"]})],ni.prototype,"rotation",null),h([p({value:0,type:Number,dependsOn:["state.id","ready"]})],ni.prototype,"scale",null),h([p({constructOnly:!0})],ni.prototype,"spatialReferenceLocked",void 0),h([p()],ni.prototype,"stationary",null),h([p({type:Sae,readOnly:!0})],ni.prototype,"timeline",void 0),h([p({readOnly:!0})],ni.prototype,"type",void 0),h([p({readOnly:!0})],ni.prototype,"updating",null),h([p({value:null,type:_h,dependsOn:["state.id","ready"]})],ni.prototype,"viewpoint",null),h([p({value:-1,dependsOn:["state.id","ready"]})],ni.prototype,"zoom",null),h([p({readOnly:!0})],ni.prototype,"navigating",null),h([p({type:Lae})],ni.prototype,"ui",void 0),ni=h([ce("esri.views.MapView")],ni);const ADe=ni;function R6(e){const t=e.getObjectId();return t?`${e.layer?.uid??e.sourceLayer?.uid??"MapView"}/${t}`:`"MapView/${e.uid}`}function MH(e,t,i,r,n){return s=>{if(s instanceof As){if(s.layer===e)n?.();else{const o=e.allLayerViews.find(a=>a.layer===s.layer);o&&r?.(o)}i(R6(s))}else{const o=e.allLayerViews.find(a=>a.layer===s);o&&t(o)}}}function IH(e,t){if(e)if(DT(e))for(const i of e)if(DT(i))for(const r of i)t(r);else t(i);else t(e)}function CDe(e){return e?.declaredClass==="esri.WebMap"}let $De=class{constructor(t){this.message=t}toString(){return`AssertException: ${this.message}`}};function Vae(e,t){if(!e){t=t||"Assertion";const i=new Error(t).stack;throw new $De(`${t} at ${i}`)}}function sdt(e,t,i,r){let n,s=(i[0]-e[0])/t[0],o=(r[0]-e[0])/t[0];s>o&&(n=s,s=o,o=n);let a=(i[1]-e[1])/t[1],l=(r[1]-e[1])/t[1];if(a>l&&(n=a,a=l,l=n),s>l||a>o)return!1;a>s&&(s=a),l<o&&(o=l);let u=(i[2]-e[2])/t[2],c=(r[2]-e[2])/t[2];return u>c&&(n=u,u=c,c=n),!(s>c||u>o)&&(c<o&&(o=c),!(o<0))}let ODe=class{constructor(t){this.client=t,this._cancelled=!1,this.size=0,this.duration=0}},RDe=class{constructor(t){this.typeWorkerQuota=t,this.tasks=new Array,this.numWorkers=0,this.statistics=new kDe}},kDe=class{constructor(){this.requests=0,this.size=0,this.duration=0,this.speed=0}},LDe=class{constructor(t,i,r,n){this._workerFunc=t,this._callbackFunc=i,this._maxTotalNumWorkers=r,this._totalNumWorkers=0,this._clients=n.map(s=>new RDe(s))}destroy(){this._clients.length=0}hasQuota(t){const i=this._clients[t];return!!i&&(this._totalNumWorkers<this._maxTotalNumWorkers||i.numWorkers+i.tasks.length<i.typeWorkerQuota)}push(t){const i=this._clients[t.client];i&&(this._totalNumWorkers<this._maxTotalNumWorkers?(i.numWorkers++,this._totalNumWorkers++,this._workerFunc(t,(r,n)=>this._taskCallback(r,n))):i.tasks.push(t))}cancel(t){this._taskFinished(t),t._cancelled=!0}_taskFinished(t){const i=this._clients[t.client];this._totalNumWorkers--,i.numWorkers--,i.statistics.requests++,i.statistics.size+=t.size||0,i.statistics.duration+=t.duration||0,i.statistics.speed=i.statistics.duration>0?i.statistics.size/i.statistics.duration:0,Vae(i.numWorkers>=0),this._next()}_next(){for(const t of this._clients)if(t&&t.numWorkers<t.typeWorkerQuota&&this._processQueue(t))return;for(const t of this._clients)if(t&&this._processQueue(t))return}_processQueue(t){for(;t.tasks.length>0;)if(this._workerFunc(t.tasks.shift(),(i,r)=>this._taskCallback(i,r)))return t.numWorkers++,this._totalNumWorkers++,!0;return!1}_taskCallback(t,i){t._cancelled||(this._callbackFunc(t,i),this._taskFinished(t))}getStatsForType(t){const i=this._clients[t];return i?{quota:i.typeWorkerQuota,workers:i.numWorkers,queueSize:i.tasks.length,requestStats:i.statistics}:null}get test(){const t=this;return{set workerFunc(i){t._workerFunc=i}}}},tR=class extends Lt{constructor(){super(...arguments),this._tasks=new Map,this._onLoadQueue=new Array,this._doneQueue=new Array,this.updating=!1}setup(t,i,r){this._loadQueue=new LDe((n,s)=>this._startLoading(n,s),(n,s)=>this._doneLoadingCB(n,s),t,i),r&&(this._frameTask=r.registerTask(vi.STREAM_DATA_LOADER,this))}destroy(){this._frameTask=yn(this._frameTask),this._tasks.forEach(t=>Vx(t.abortController)),this._loadQueue=qr(this._loadQueue),this._onLoadQueue=null,this._doneQueue=null,this._tasks=null}hasDownloadSlots(t){return this._loadQueue.hasQuota(t)}request(t,i,r,n={}){const s=xY();s.__signal=ee(n)?n.signal:null;const o=this._createOrUpdateTask(t,i,r,n,s);return ba(n,()=>this._cancelRequest(o,s)),s.promise}_createTask(t,i,r,n,s,o){const a=new DDe(t,i,r,n,s);return this._updateTask(a,o),this._tasks.set(s,a),this._tasks.size===1&&this._set("updating",!0),this._loadQueue.push(a),a}_cancelRequest(t,i){YZ(t.resolvers,i),i.reject(fr()),t.resolvers.length===0&&(t.status===Yl.DOWNLOADING&&(t.status=Yl.CANCELLED,this._loadQueue.cancel(t),t.abortController?.abort(),t.request=null,t.abortController=null),t.status=Yl.CANCELLED,this._tasks.delete(t.key),this._tasks.size===0&&this._set("updating",!1))}_updateTask(t,i){t.resolvers.push(i)}_createOrUpdateTask(t,i,r,n,s){const o=jDe(ee(n)&&n.uid||t,i,r),a=this._tasks.get(o);return a?(this._updateTask(a,s),a):this._createTask(t,n,i,r,o,s)}_doneLoadingCB(t,i){this._loadQueue&&(Vae(t.status===Yl.DOWNLOADING),t.status=Yl.DOWNLOADED,this._frameTask?this._doneQueue.push({task:t,err:i}):this._doneLoading(t,i))}get running(){return this._doneQueue.length>0||this._onLoadQueue.length>0}runTask(t){for(;!t.done&&this._onLoadQueue.length>0;){const i=this._onLoadQueue.shift();hr(i.task.abortController),i.task.abortController=null,i.callback(i.task),t.madeProgress()}for(;!t.done&&this._doneQueue.length>0;){const i=this._doneQueue.shift();i.task.status!==Yl.DOWNLOADED&&(i.err=i.err||fr()),this._doneLoading(i.task,i.err),t.madeProgress()}}_doneLoading(t,i){if(i&&!fs(i)&&t.numRetries>0)return--t.numRetries,void this._loadQueue.push(t);let r=t.result instanceof HTMLImageElement?0:t.resolvers.length;for(const n of t.resolvers)if(i)fs(i)?n.reject(i):n.reject(new Ce("stream-data-loader:request-error",`Failed to request resource at '${t.url}'. ${i}`,{url:t.url,error:i}));else{--r;const s=r<=0?t.result:Le(t.result);n.resolve(s)}this._tasks.delete(t.key),this._tasks.size===0&&this._set("updating",!1)}_startLoading(t,i){if(t.status===Yl.CANCELLED)return!1;let r,n;switch(t.startTime=performance.now(),t.status=Yl.DOWNLOADING,t.docType){case"binary":n="array-buffer",r=0;break;case"image":n="image";break;case"image+type":n="array-buffer";break;default:n="json"}t.abortController=new AbortController;const s=t.abortController.signal;t.request=St(t.url,{...t.options,responseType:n,timeout:r,signal:s});let o=()=>{};const a=u=>{t.duration=performance.now()-t.startTime,t.size=u instanceof ArrayBuffer?u.byteLength:t.size||0,t.result=u,this._frameTask?this._onLoadQueue.push({callback:i,task:t}):(t.abortController=null,i(t))},l=u=>{t.status===Yl.DOWNLOADING&&i(t,u),o()};return t.docType!=="image+type"?(t.request.then(u=>a(u.data),l),!0):(t.request.then(u=>{const c=u.data,d=NDe(c);if(n="image",t.size=c.byteLength,d==="unknown")return t.request=St(t.url,{responseType:n,timeout:r,signal:s}),void t.request.then(g=>a(g.data),l);const f=new Blob([c],{type:d}),m=window.URL.createObjectURL(f);o=()=>window.URL.revokeObjectURL(m),t.request=St(m,{responseType:n,timeout:r,signal:s}),t.request.then(g=>a(new FDe(g.data,d,o)),l)},l),!0)}get test(){return{loadQueue:this._loadQueue}}};h([p({readOnly:!0})],tR.prototype,"updating",void 0),tR=h([ce("esri.views.3d.support.StreamDataLoader")],tR);const PDe={numRetries:0};function NDe(e){if(e.byteLength<2)return"unknown";const t=new Uint8Array(e,0,e.byteLength);return t[0]===137&&t[1]===80?"image/png":t[0]===71&&t[1]===73?"image/gif":t[0]===66&&t[1]===77?"image/bmp":t[0]===255&&t[1]===216?"image/jpeg":"unknown"}let FDe=class{constructor(t,i,r){this.image=t,this.type=i,this.release=r}get isOpaque(){return this.type==="image/jpeg"}};class DDe extends ODe{constructor(t,i,r,n,s){super(n),this.url=t,this.options=i,this.docType=r,this.key=s,this.result=null,this.status=Yl.QUEUED,this.request=null,this.abortController=null,this.resolvers=new Array,this.startTime=0,this.numRetries=PDe.numRetries}}function jDe(e,t,i){return`${e}:${t}:${i}`}var Yl;(function(e){e[e.QUEUED=1]="QUEUED",e[e.DOWNLOADING=2]="DOWNLOADING",e[e.DOWNLOADED=3]="DOWNLOADED",e[e.CANCELLED=4]="CANCELLED"})(Yl||(Yl={}));var TH,AH,yh,CH,$H,OH,RH;(function(e){e[e.INNER=0]="INNER",e[e.OUTER=1]="OUTER"})(TH||(TH={})),function(e){e[e.REGULAR=0]="REGULAR",e[e.HAS_NORTH_POLE=1]="HAS_NORTH_POLE",e[e.HAS_SOUTH_POLE=2]="HAS_SOUTH_POLE",e[e.HAS_BOTH_POLES=3]="HAS_BOTH_POLES"}(AH||(AH={})),function(e){e[e.NORTH=0]="NORTH",e[e.NORTH_EAST=1]="NORTH_EAST",e[e.EAST=2]="EAST",e[e.SOUTH_EAST=3]="SOUTH_EAST",e[e.SOUTH=4]="SOUTH",e[e.SOUTH_WEST=5]="SOUTH_WEST",e[e.WEST=6]="WEST",e[e.NORTH_WEST=7]="NORTH_WEST"}(yh||(yh={})),function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON"}(CH||(CH={})),function(e){e[e.Color=0]="Color",e[e.ColorNoRasterImage=1]="ColorNoRasterImage",e[e.Highlight=2]="Highlight",e[e.Water=3]="Water",e[e.Occluded=4]="Occluded",e[e.ObjectAndLayerIdColor=5]="ObjectAndLayerIdColor"}($H||($H={})),function(e){e[e.FADING=0]="FADING",e[e.IMMEDIATE=1]="IMMEDIATE",e[e.UNFADED=2]="UNFADED"}(OH||(OH={})),function(e){e[e.INSIDE=0]="INSIDE",e[e.INTERSECTS=1]="INTERSECTS",e[e.OUTSIDE=2]="OUTSIDE"}(RH||(RH={}));const UDe=12;class zr{constructor(t){const i=zr.checkUnsupported(t);if(ee(i))throw i;const r=t;this.spatialReference=r.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isGCS=ID(this.spatialReference)||e3(this.spatialReference)||t3(this.spatialReference),this.origin=[r.origin.x,r.origin.y],this.pixelSize=r.size[0],this.dpi=r.dpi;const n=r.lods.reduce((u,c,d)=>(c.level<u.min&&(u.min=c.level,u.minIndex=d),u.max=Math.max(u.max,c.level),u),{min:1/0,minIndex:0,max:-1/0}),s=r.lods[n.minIndex],o=2**s.level;let a=s.resolution*o,l=s.scale*o;this.levels=new Array(n.max+1);for(let u=0;u<this.levels.length;u++)this.levels[u]={resolution:a,scale:l,tileSize:[a*r.size[0],a*r.size[1]]},a/=2,l/=2}clone(){return new zr(this.toTileInfo())}toTileInfo(){return new ma({dpi:this.dpi,origin:new At({x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference}),size:[this.pixelSize,this.pixelSize],spatialReference:this.spatialReference,lods:this.levels.map((t,i)=>new Wt({level:i,scale:t.scale,resolution:t.resolution}))})}getExtent(t,i,r,n){const s=this.levels[t],o=s.tileSize[0],a=s.tileSize[1];n[0]=this.origin[0]+r*o,n[2]=this.origin[0]+(r+1)*o,n[3]=this.origin[1]-i*a,n[1]=this.origin[1]-(i+1)*a}convertExtentToRadians(t,i){this._isWebMercator?(i[0]=OU(t[0]),i[1]=RU(t[1]),i[2]=OU(t[2]),i[3]=RU(t[3])):this._isGCS&&(i[0]=Tv(t[0]),i[1]=Tv(t[1]),i[2]=Tv(t[2]),i[3]=Tv(t[3]))}getExtentGeometry(t,i,r,n=new Kt){return this.getExtent(t,i,r,$c),n.spatialReference=this.spatialReference,n.xmin=$c[0],n.ymin=$c[1],n.xmax=$c[2],n.ymax=$c[3],n.zmin=void 0,n.zmax=void 0,n}ensureMaxLod(t){if(t==null)return!1;let i=!1;for(;this.levels.length<=t;){const r=this.levels[this.levels.length-1],n=r.resolution/2;this.levels.push({resolution:n,scale:r.scale/2,tileSize:[n*this.pixelSize,n*this.pixelSize]}),i=!0}return i}capMaxLod(t){this.levels.length>t+1&&(this.levels.length=t+1)}getMaxLod(){return this.levels.length-1}scaleAtLevel(t){return this.levels[0].scale/2**t}levelAtScale(t){const i=this.levels[0].scale;return t>=i?0:Math.log(i/t)*Math.LOG2E}resolutionAtLevel(t){return this.levels[0].resolution/2**t}compatibleWith(t){if(!(t instanceof zr)){if(zr.checkUnsupported(t))return!1;t=new zr(t)}if(!t.spatialReference.equals(this.spatialReference)||t.pixelSize!==this.pixelSize)return!1;const i=Math.min(this.levels.length,t.levels.length)-1,r=this.levels[i].resolution;let n=.5*r;return!Yv(t.origin[0],this.origin[0],n)||!Yv(t.origin[1],this.origin[1],n)?!1:(n=.5*r/2**i/this.pixelSize*UDe,Yv(r,t.levels[i].resolution,n))}rootTilesInExtent(t,i=null,r=1/0){const n=new Array,s=this.levels[0].tileSize;if(Re(t)||s[0]===0||s[1]===0)return n;zr.computeRowColExtent(t,s,this.origin,$c);let o=$c[1],a=$c[3],l=$c[0],u=$c[2];const c=u-l,d=a-o;if(c*d>r){const f=Math.floor(Math.sqrt(r));d>f&&(o=o+Math.floor(.5*d)-Math.floor(.5*f),a=o+f),c>f&&(l=l+Math.floor(.5*c)-Math.floor(.5*f),u=l+f)}for(let f=o;f<a;f++)for(let m=l;m<u;m++)n.push([0,f,m]);return ee(i)&&(i[0]=this.origin[0]+l*s[0],i[1]=this.origin[1]-a*s[1],i[2]=this.origin[0]+u*s[0],i[3]=this.origin[1]-o*s[1]),n}static computeRowColExtent(t,i,r,n){const s=.001*(t[2]-t[0]+(t[3]-t[1]));n[0]=Math.max(0,Math.floor((t[0]+s-r[0])/i[0])),n[2]=Math.max(0,Math.ceil((t[2]-s-r[0])/i[0])),n[1]=Math.max(0,Math.floor((r[1]-t[3]+s)/i[1])),n[3]=Math.max(0,Math.ceil((r[1]-t[1]-s)/i[1]))}static isPowerOfTwo(t){const i=t.lods,r=i[0].resolution*2**i[0].level;return!i.some(n=>!V1e(n.resolution,r/2**n.level))}static hasGapInLevels(t){const i=t.lods.map(r=>r.level);i.sort((r,n)=>r-n);for(let r=1;r<i.length;r++)if(i[r]!==i[0]+r)return!0;return!1}static tileSizeSupported(t){const i=t.size[1];return i===t.size[0]&&(i&i-1)==0&&i>=128&&i<=512}static hasOriginPerLODs(t){const i=t.origin;return t.lods.some(r=>r.origin!=null&&(r.origin[0]!==i.x||r.origin[1]!==i.y))}static getMissingTileInfoError(){return new Ce("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}static checkUnsupported(t){return Re(t)?U9():t.lods.length<1?new Ce("tilingscheme:generic","Tiling scheme must have at least one level"):zr.isPowerOfTwo(t)?zr.hasGapInLevels(t)?new Ce("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):zr.tileSizeSupported(t)?zr.hasOriginPerLODs(t)?new Ce("tilingscheme:multiple-origin","Tiling scheme levels must not have their own origin"):null:new Ce("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"):new Ce("tilingscheme:power-of-two","Tiling scheme must be power of two")}static fromExtent(t,i){const r=t[2]-t[0],n=t[3]-t[1],s=dp(i),o=1.2*Math.max(r,n),a=256,l=96,u=.0254,c=new zr(new ma({size:[a,a],origin:new At({x:t[0]-.5*(o-r),y:t[3]+.5*(o-n)}),lods:[new Wt({level:0,resolution:o/a,scale:1/(a/l*u/(o*s))})],spatialReference:i}));return c.ensureMaxLod(20),c}static makeWebMercatorAuxiliarySphere(t){const i=new zr(zr.WebMercatorAuxiliarySphereTileInfo);return i.ensureMaxLod(t),i}static makeGCSWithTileSize(t,i=256,r=16){const n=256/i,s=new zr(new ma({size:[i,i],origin:new At({x:-180,y:90,spatialReference:t}),spatialReference:t,lods:[new Wt({level:0,resolution:.703125*n,scale:295497598570834e-6*n})]}));return s.ensureMaxLod(r),s}get test(){return{isWebMercator:this._isWebMercator,isGCS:this._isGCS}}}function U9(){return new Ce("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}zr.WebMercatorAuxiliarySphereTileInfo=new ma({size:[256,256],origin:new At({x:-20037508342787e-6,y:20037508342787e-6,spatialReference:Et.WebMercator}),spatialReference:Et.WebMercator,lods:[new Wt({level:0,resolution:156543.03392800014,scale:591657527591555e-6})]}),zr.WebMercatorAuxiliarySphere=zr.makeWebMercatorAuxiliarySphere(19);const $c=du(),kH=64;B1e(uk/10);const VDe=du();zr.WebMercatorAuxiliarySphere.getExtent(0,0,0,VDe);du([-180,-90,180,90]);const O1=$a(),BDe=$a(),Qh=$a(),Xh=$a();function zDe(e,t,i=0){const r=e.extent;if(Re(r))return!1;if(i===0)return Mbe(r,t);const n=Math.min(r[2]-r[0],r[3]-r[1]);return Tbe(r,t,i*n)}function _M(e,t,i,r){aA(O1,i),O1[r]=t[r];const n=rx(O1,O1,t),s=rx(BDe,e,t),o=lA(s,n),a=lA(n,n);let l;l=o<=0?t:a<=o?i:nQ(O1,t,pF(n,n,o/a));const u=rx(O1,e,l);return Math.PI/2-Math.atan(u[2]/Math.sqrt(u[0]*u[0]+u[1]*u[1]))}function GDe(e,t,i){const r=e.extent;if(Re(r))return 0;Qh[0]=r[0],Qh[1]=r[1],Qh[2]=i,Xh[0]=r[2],Xh[1]=r[3],Xh[2]=i;let n=1/0,s=1/0;return t[0]<Qh[0]?n=_M(t,Qh,Xh,0):t[0]>Xh[0]&&(n=_M(t,Xh,Qh,0)),t[1]<Qh[1]?s=_M(t,Qh,Xh,1):t[1]>Xh[1]&&(s=_M(t,Xh,Qh,1)),Math.min(n,s)}function qDe(e,t,i){if(Re(e))return U9();if(e.spatialReference.isGeographic&&!ID(e.spatialReference))return new Ce("tilingscheme:local-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in local scenes");const r=zr.checkUnsupported(e);if(ee(r))return r;if(Re(i))return new Ce("tilingscheme:extent-not-exist","The layer does not provide a layer extent.");const n=HDe(e,i);if(n)return n;const s=e.spatialReference;return ee(t)&&!(s.equals(t)||t.isWGS84&&s.isWebMercator)?new Ce("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene"):null}function HDe(e,t){const i=e.lods,r=i[0].resolution*2**i[0].level,n=[r*e.size[0],r*e.size[1]],s=[e.origin.x,e.origin.y],o=xbe(t),a=du();zr.computeRowColExtent(o,n,s,a);const l=(a[2]-a[0])*(a[3]-a[1]);if(l>kH){const u=i[0].scale*2**i[0].level;let c=Math.max((o[3]-o[1])/e.size[1],(o[2]-o[0])/e.size[0])*u/r;const d=Math.floor(Math.log(c)/Math.log(10));return c=Math.ceil(c/10**d)*10**d,new Ce("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(u).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+c.toLocaleString()+".",{level0Scale:u,suggestedLevel0Scale:c,requiredNumRootTiles:l,allowedNumRootTiles:kH})}return null}const WDe=Object.freeze(Object.defineProperty({__proto__:null,checkIfTileInfoSupportedForViewSR:qDe,isInsideExtent:zDe,tiltToExtentEdge:GDe},Symbol.toStringTag,{value:"Module"}));function JDe(){return!0}function ZDe(){return 0}function YDe(e,t){if(Re(e))return U9();const i=e.lods.length-1,r=e.spatialReference,n=ID(r)||e3(r)||t3(r);if(r.isWebMercator){if(!zr.makeWebMercatorAuxiliarySphere(i).compatibleWith(e))return new Ce("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!n)return new Ce("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!zr.makeGCSWithTileSize(e.spatialReference,e.size[0],i).compatibleWith(e))return e.spatialReference.isWGS84?new Ce("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme"):new Ce("tilingscheme:incompatible-global","The tiling scheme is not compatible with the ArcGIS Online tiling scheme")}return ee(t)&&!e.spatialReference.equals(t)?new Ce("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene"):void 0}const KDe=Object.freeze(Object.defineProperty({__proto__:null,checkIfTileInfoSupportedForViewSR:YDe,isInsideExtent:JDe,tiltToExtentEdge:ZDe},Symbol.toStringTag,{value:"Module"})),QDe={[np.Global]:KDe,[np.Local]:WDe};function k6(e,t,i,r){return QDe[r].checkIfTileInfoSupportedForViewSR(e,i,t)}function XDe(e,t,i){const r=o0e(e);if(ee(r)){if(!Pt.isCollection(r))return{tileInfo:r.tileInfo,fullExtent:r.fullExtent};{const n=r.find(s=>k6(s.tileInfo,s.fullExtent,t,i)==null);if(n)return{tileInfo:n.tileInfo,fullExtent:n.fullExtent}}}return{tileInfo:null,fullExtent:null}}yh.NORTH,yh.EAST,yh.SOUTH,yh.WEST;yh.NORTH_EAST,yh.SOUTH_EAST,yh.SOUTH_WEST,yh.NORTH_WEST;function e9e(e,t){return e!=null&&(t==null||(t===np.Local?!e.isGeographic||e.isWGS84||e.wkid===tu.CGCS2000:e.isWebMercator||e.isWGS84||e.wkid===tu.CGCS2000||e.wkid===tu.GCSMARS2000||e.wkid===tu.GCSMARS2000_SPHERE||e.wkid===tu.GCSMOON2000))}async function t9e(e,t={}){await r9e(e,t),hr(t)}async function i9e(e,t={}){const{basemap:i,view:r}=e;if(hr(t),"spatialReferenceLocked"in r&&!r.spatialReferenceLocked||(await i.load(t),hr(t),i.baseLayers.length===0))return;const n=i.baseLayers.getItemAt(0);if(!s0e(n))return;if(i.spatialReference){if(r.spatialReference.equals(i.spatialReference))return;LH()}await n.load(t),hr(t);const s=(("supportedSpatialReferences"in n?n.supportedSpatialReferences:null)||["tileInfo"in n?n.tileInfo?.spatialReference:null]).filter(ee);s.length!==0&&s.every(o=>!r.spatialReference.equals(o))&&LH()}function LH(){throw new Ce("basemap-compatibility:incompatible-spatial-reference","Basemap spatial reference is not compatible with the view")}async function r9e(e,t){const{basemap:i,view:r}=e;if(await i.load(t),i.baseLayers.length===0)return;const n=i.baseLayers.concat(i.referenceLayers).toArray().filter(o=>!jU(o)).map(o=>new Ce("basemap-compatibility:unsupported-basemap-layer-type","Unsupported basemap layer type ${operationalLayerType}",{layer:o,operationalLayerType:o.operationalLayerType||"unknown"}));if(n.length)throw n[0];const s=i.baseLayers.getItemAt(0);if(jU(s)){try{await s.load(t)}catch(o){const a="basemap-compatibility:unknown-error",l="Unknown basemap compatibility error",{name:u=a,message:c=l,details:d}=o;throw new Ce(u,c,d)}n9e(s,r)}}function n9e(e,t){const i=t.state.viewingMode;if(!i)return;let r,n;if(e?.type==="wmts"){const l=XDe(e,t.spatialReference,i);if(Re(l.tileInfo))throw new Ce("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view");r=l.tileInfo,n=l.fullExtent}else r=e.tileInfo,n=e.fullExtent;if(Re(r))return;if(!e9e(r.spatialReference,i))throw new Ce(`basemapgalleryitem:spatial-reference-unsupported-${Qq(i)}`,`Basemap spatial reference is unsupported in ${Qq(i)} mode`);const s=r.spatialReference.isGeographic,o=e?.type==="vector-tile"?r.getOrCreateCompatible(256,s?1:2):null;if(i===np.Global){let l=k6(r,n,null,i);if(l&&e?.type==="vector-tile"&&ee(n)&&o&&!k6(o,n,null,i)&&(l=null),l){const u=r.spatialReference.isWebMercator?"web-mercator":"wgs84";throw new Ce(`basemapgalleryitem:tiling-scheme-unsupported-${u}-global`,"Basemap tiling scheme is unsupported in global mode",{error:l})}}else if(zr.checkUnsupported(r))throw new Ce("basemapgalleryitem:tiling-scheme-unsupported-local","Basemap tiling scheme is unsupported in local mode");const a=t.get("basemapTerrain.tilingScheme");if(a&&!a.compatibleWith(r)&&(e?.type!=="vector-tile"||!o||!a.compatibleWith(o)))throw new Ce("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view")}let th=class extends Om(Wo(Lt)){constructor(t){super(t),this.compatibilityFunction=null,this.error=null,this.state="loading",this.view=null}initialize(){const t=()=>this.refresh();this.handles.add([nt(()=>this.basemap?.loadStatus,t),nt(()=>this.compatibilityFunction,t),nt(()=>this.view&&"basemapTerrain"in this.view&&this.view.basemapTerrain?.tilingScheme,t),nt(()=>this.view?.ready,t),nt(()=>this.view?.spatialReference,t)]),this.refresh()}destroy(){this._cancelRefresh(),this.basemap=null,this.compatibilityFunction=null,this.view=null}get _spatialReferenceTask(){return N$e(this.view,this.basemap)}set basemap(t){const i=this._get("basemap");i&&i.cancelLoad(),t&&t.load().catch(()=>{}),this._set("basemap",t)}get spatialReference(){return this._spatialReferenceTask.spatialReference}refresh(){this._cancelRefresh(),this._set("state","loading");const t=this.basemap?.loadStatus;if(t!=="loaded"&&t!=="failed")return;if(!this.compatibilityFunction)return void(t==="loaded"?(this._set("state","ready"),this._set("error",null)):(this._set("state","error"),this._set("error",this.basemap.loadError)));const i=new AbortController,{signal:r}=i;this.compatibilityFunction(this,{signal:r}).then(()=>m4(()=>!this._spatialReferenceTask.updating,r)).then(()=>{this._set("state","ready"),this._set("error",null)}).catch(n=>{fs(n)||(this._set("state","error"),this._set("error",n))}),this._refreshController=i}_cancelRefresh(){this._refreshController&&(this._refreshController.abort(),this._refreshController=null)}};h([p({readOnly:!0})],th.prototype,"_spatialReferenceTask",null),h([p()],th.prototype,"basemap",null),h([p()],th.prototype,"compatibilityFunction",void 0),h([p({readOnly:!0})],th.prototype,"error",void 0),h([p({readOnly:!0})],th.prototype,"spatialReference",null),h([p({readOnly:!0})],th.prototype,"state",void 0),h([p()],th.prototype,"view",void 0),th=h([ce("esri.widgets.BasemapGallery.support.BasemapGalleryItem")],th);const Bae=th,zae=Pt.ofType(cm);let V2=class extends Lt{constructor(e){super(e),this.basemaps=new zae}get state(){return"ready"}refresh(){}};h([p({type:zae})],V2.prototype,"basemaps",void 0),h([p({readOnly:!0})],V2.prototype,"state",null),V2=h([ce("esri.widgets.BasemapGallery.support.LocalBasemapsSource")],V2);const Gae=V2,qae=Pt.ofType(cm);let Td=class extends Ml.LoadableMixin(XS(Gae)){constructor(t){super(t),this._handles=new So,this.basemaps=new qae,this.filterFunction=null,this.portal=xo.getDefault(),this.query=null,this.updateBasemapsCallback=null}initialize(){this._handles.add([nt(()=>[this.filterFunction,this.loadStatus,this.portal?.basemapGalleryGroupQuery,this.portal?.user,this.query,this.updateBasemapsCallback],()=>this.refresh(),Pi)])}destroy(){this._handles.destroy(),this._handles=null,this.filterFunction=null,this.portal=null}get state(){return this.loadStatus==="not-loaded"?"not-loaded":this.loadStatus==="loading"||this._lastPortalBasemapFetchController?"loading":"ready"}load(t){return this.addResolvingPromise(this.portal.load(t)),this.notifyChange("state"),Promise.resolve(this)}async refresh(){if(this.state!=="ready")return;this._lastPortalBasemapFetchController&&(this._lastPortalBasemapFetchController.abort(),this._lastPortalBasemapFetchController=null);const t=this.portal,i=new AbortController;this._lastPortalBasemapFetchController=i,this.notifyChange("state");try{const r=await t.fetchBasemaps(this._toQueryString(this.query),i);this._updateBasemaps(r)}catch(r){if(fs(r))throw r;et.getLogger(this.declaredClass).warn(new Ce("basemap-source:fetch-basemaps-error","Could not fetch basemaps from portal.",{error:r})),this._updateBasemaps()}this._lastPortalBasemapFetchController=null,this.notifyChange("state")}_toQueryString(t){return t&&typeof t!="string"?Object.keys(t).map(i=>`${i}:${t[i]}`).join(" AND "):t}_updateBasemaps(t=[]){let i=this.filterFunction?t.filter(this.filterFunction):t;i=this.updateBasemapsCallback?this.updateBasemapsCallback(i):i,this.basemaps.removeAll(),this.basemaps.addMany(i)}};h([p({readOnly:!0,type:qae})],Td.prototype,"basemaps",void 0),h([p()],Td.prototype,"filterFunction",void 0),h([p({type:xo})],Td.prototype,"portal",void 0),h([p()],Td.prototype,"query",void 0),h([p({readOnly:!0})],Td.prototype,"state",null),h([p()],Td.prototype,"updateBasemapsCallback",void 0),Td=h([ce("esri.widgets.BasemapGallery.support.PortalBasemapsSource")],Td);const TT=Td,Hae=Pt.ofType(Bae);function s9e(e){return e&&e.declaredClass==="esri.portal.Portal"}function o9e(e){return e&&!(e instanceof TT)&&(!!e.portal||!!e.query)}function a9e(e){return e&&"basemaps"in e&&"state"in e&&"refresh"in e}let Jl=class extends Wo(Ml){constructor(e){super(e),this._loadingProjectionEngine=!1,this.items=new Hae,this.source=new TT,this.view=null}initialize(){const e=()=>this._recreateItems();this.handles.add([nt(()=>this.state==="ready"?this.compatibilityFunction:null,()=>this._updateItems()),ms(()=>this.source?.basemaps,"change",e,{onListenerAdd:e})])}get activeBasemap(){return this.view?.map?.basemap??null}set activeBasemap(e){if(!this.view.map)return;const t=typeof e=="string"?cm.fromId(e):e;if(!t||!this.view.ready)return this.view.map.basemap=t,void this._clearOverride("activeBasemap");const i=t.spatialReference||this.items?.find(r=>this.basemapEquals(t,r.basemap))?.spatialReference;if(i&&"spatialReferenceLocked"in this.view&&!this.view.spatialReferenceLocked){const r=this.view.spatialReference;if(ee(i)&&!vn(r,i)&&!rp(this.view.spatialReference,i)&&!mm())return this._override("activeBasemap",t),this._loadingProjectionEngine=!0,void ym().then(()=>{this._get("activeBasemap")===e&&(this.view.map.basemap=e,this.view.spatialReference=i,this._clearOverride("activeBasemap"))},()=>{}).then(()=>{this._loadingProjectionEngine=!1});this.view.map.basemap=t,this._clearOverride("activeBasemap"),ee(i)&&!vn(this.view.spatialReference,i)&&(this.view.spatialReference=i)}else this.view.map.basemap=t,this._clearOverride("activeBasemap")}get activeBasemapIndex(){const{state:e,items:t,activeBasemap:i}=this;if(e!=="ready")return-1;const r=t.findIndex(n=>n.basemap===i);return r===-1?t.findIndex(n=>this.basemapEquals(n.basemap,i)):r}get compatibilityFunction(){return this.view?.type==="3d"?t9e:i9e}set compatibilityFunction(e){this._overrideIfSome("compatibilityFunction",e)}castSource(e){return Array.isArray(e)||Pt.isCollection(e)?new Gae({basemaps:e}):s9e(e)?new TT({portal:e}):o9e(e)?new TT(e):a9e(e)?e:null}get state(){return this.view?.ready&&this.source?this._loadingProjectionEngine?"loading":"ready":"disabled"}basemapEquals(e,t){return P$e(e,t)}refresh(){this._recreateItems()}load(e){return this.addResolvingPromise(Ml.isLoadable(this.source)?this.source.load(e):null),Promise.resolve(this)}_recreateItems(){const e=this.source?.basemaps,{view:t,compatibilityFunction:i}=this;this.items.removeAll().forEach(r=>r.destroy()),e&&this.items.addMany(e.map(r=>new Bae({basemap:r,compatibilityFunction:i,view:t})))}_updateItems(){for(const e of this.items)e.compatibilityFunction=this.compatibilityFunction,e.view=this.view}};h([p()],Jl.prototype,"_loadingProjectionEngine",void 0),h([p()],Jl.prototype,"activeBasemap",null),h([p({readOnly:!0})],Jl.prototype,"activeBasemapIndex",null),h([p()],Jl.prototype,"compatibilityFunction",null),h([p({readOnly:!0,type:Hae})],Jl.prototype,"items",void 0),h([p()],Jl.prototype,"source",void 0),h([di("source")],Jl.prototype,"castSource",null),h([p({readOnly:!0})],Jl.prototype,"state",null),h([p()],Jl.prototype,"view",void 0),Jl=h([ce("esri.widgets.BasemapGallery.BasemapGalleryViewModel")],Jl);const l9e=Jl,ed="esri-basemap-gallery",Ga={base:`${ed} esri-widget esri-widget--panel-height-only`,sourceLoading:`${ed}--source-loading`,loader:`${ed}__loader`,item:`${ed}__item`,itemContainer:`${ed}__item-container`,itemTitle:`${ed}__item-title`,itemThumbnail:`${ed}__item-thumbnail`,selectedItem:`${ed}__item--selected`,itemError:`${ed}__item--error`,emptyMessage:"esri-widget__content--empty",widgetIcon:"esri-icon-basemap",disabled:"esri-disabled",loaderAnimation:"esri-widget__loader-animation"};let Nl=class extends $s{constructor(t,i){super(t,i),this._handles=new So,this._focusBasemapItemEnabled=!1,this.disabled=!1,this.headingLevel=2,this.iconClass=Ga.widgetIcon,this.messages=null,this.viewModel=new l9e}initialize(){const t=this._handles;this.addHandles([ms(()=>this.viewModel.items,"change",i=>{const r="basemap-gallery-item-changes",{added:n,moved:s}=i;t.remove(r),t.add([...n,...s].map(o=>nt(()=>o.state,()=>this.scheduleRender())),r),this.scheduleRender()}),Tl(()=>this.source,()=>this.viewModel.load(),{initial:!0,once:!0})])}destroy(){this._handles.destroy()}loadDependencies(){return De(()=>import("./calcite-scrim-e617d49a.js"),["./calcite-scrim-e617d49a.js","./scrim-15f97f5a.js","./t9n-a01f9aaf.js","./observers-7f8bc640.js","./loader-a91b0f8f.js","./guid-9426053f.js","./preload-helper-388ac9d5.js"],import.meta.url)}get activeBasemap(){return this.viewModel.activeBasemap}set activeBasemap(t){this.viewModel.activeBasemap=t}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get source(){return this.viewModel.source}set source(t){this.viewModel.source=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t=this.source.state==="loading",i=this.disabled||this.viewModel.state==="disabled",r=this.viewModel.items.map((a,l)=>this._renderBasemapGalleryItem(a,l)).toArray(),n={[Ga.sourceLoading]:t,[Ga.disabled]:i},s=t?Ne("div",{class:Ga.loader,key:"esri-basemap-gallery__loader"}):null,o=t?null:r.length>0?Ne("ul",{bind:this,"aria-disabled":this.disabled,"aria-label":this.label,class:Ga.itemContainer,key:"esri-basemap-gallery__item-container",onkeydown:this._handleKeyDown,role:"radiogroup"},r):Ne("div",{class:Ga.emptyMessage,key:"esri-basemap-gallery__empty-message"},Ne(j4,{level:this.headingLevel},this.messages.noBasemaps));return Ne("div",{class:this.classes(Ga.base,n)},s,o)}_getRoundRobinIndex(t,i){return(t+i)%i}_handleKeyDown(t){const{key:i}=t;if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(i))return;t.preventDefault();const{items:r,activeBasemapIndex:n}=this.viewModel,s=i==="ArrowUp"||i==="ArrowLeft"?this._getRoundRobinIndex(Math.max(n-1,-1),r.length):this._getRoundRobinIndex(n+1,r.length),o=r.getItemAt(s);o?.state==="ready"&&(this.viewModel.activeBasemap=o.basemap),this._focusBasemapItemEnabled=!0}_focusBasemapItem(t){this._focusBasemapItemEnabled&&t.tabIndex===0&&(t.focus(),this._focusBasemapItemEnabled=!1)}_handleClick(t){const i=t.currentTarget["data-item"];i.state==="ready"&&(this.viewModel.activeBasemap=i.basemap)}_renderBasemapGalleryItem(t,i){const r=t.basemap.thumbnailUrl||Di("esri/themes/base/images/basemap-toggle-64.svg"),n=t.basemap.title,s=t.basemap.portalItem?.snippet,o=t.error?.message||s||n,{viewModel:{state:a,activeBasemapIndex:l}}=this,u=this.disabled||a==="disabled",c=l===i,d=c||l===-1&&i===0?0:-1,f=a==="loading",m={[Ga.selectedItem]:c,[Ga.itemError]:t.state==="error"},g=`basemapgallery-item-${t.uid}`;return Ne("li",{"aria-checked":c.toString(),"aria-disabled":u.toString(),"aria-labelledby":g,bind:this,class:this.classes(Ga.item,m),"data-item":t,onkeydown:this._handleClick,onclick:this._handleClick,role:"radio",tabIndex:d,afterUpdate:this._focusBasemapItem,title:o},Ne("img",{alt:"",class:Ga.itemThumbnail,src:r}),Ne("div",{id:g,class:Ga.itemTitle},n),t.state==="loading"||c&&f?Ne("calcite-scrim",null,Ne("span",{"aria-hidden":"true",role:"presentation",class:Ga.loaderAnimation})):null)}};h([p()],Nl.prototype,"activeBasemap",null),h([p()],Nl.prototype,"disabled",void 0),h([p()],Nl.prototype,"headingLevel",void 0),h([p()],Nl.prototype,"iconClass",void 0),h([p()],Nl.prototype,"label",null),h([p(),Is("esri/widgets/BasemapGallery/t9n/BasemapGallery")],Nl.prototype,"messages",void 0),h([p()],Nl.prototype,"source",null),h([p()],Nl.prototype,"view",null),h([p()],Nl.prototype,"viewModel",void 0),h([rl()],Nl.prototype,"_handleClick",null),Nl=h([ce("esri.widgets.BasemapGallery")],Nl);const Co="esri-scale-bar",Kr={base:`${Co} esri-widget`,labelContainer:`${Co}__label-container`,rulerLabelContainer:`${Co}__label-container--ruler`,lineLabelContainer:`${Co}__label-container--line`,topLabelContainer:`${Co}__label-container--top`,bottomLabelContainer:`${Co}__label-container--bottom`,label:`${Co}__label`,line:`${Co}__line`,topLine:`${Co}__line--top`,bottomLine:`${Co}__line--bottom`,ruler:`${Co}__ruler`,rulerBlock:`${Co}__ruler-block`,barContainer:`${Co}__bar-container`,rulerBarContainer:`${Co}__bar-container--ruler`,lineBarContainer:`${Co}__bar-container--line`,disabled:"esri-disabled"};function Wae(e){if(!e)return null;if(tF(e)&&e.wkid){const t=eIe[e.wkid];if(t)return t}if(e.wkt){const t=u9e(e.wkt);if(t)return t}return null}function u9e(e){const t=QMe.exec(e);if(!t||t.length!==2)return null;const i=t[1].split(",");if(!i||i.length<3)return null;const r=parseFloat(i[1]),n=parseFloat(i[2]);return isNaN(r)||isNaN(n)?null:{a:r,f:n===0?0:1/n}}function c9e(e){const t=Wae(e??Et.WGS84);if(h9e(t))return t;const i=t.a*(1-t.f);return Object.assign(t,{b:i,eSq:1-(i/t.a)**2,radius:(2*t.a+i)/3,densificationRatio:1e4/((2*t.a+i)/3)})}function h9e(e){return e!=null&&"b"in e&&"eSq"in e&&"radius"in e}function Jae(e){return Wae(e)!==null}function d9e(e,t="meters"){if(!e)throw new Ce("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(e.some(r=>!Jae(r.spatialReference)))throw new Ce("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let r=0;r<e.length;r++){const n=e[r],{spatialReference:s}=n,o=n.type==="polyline"?n.paths:n.rings;let a=0;for(let l=0;l<o.length;l++){const u=o[l];let c=0;for(let d=1;d<u.length;d++){const f=u[d-1][0],m=u[d][0],g=u[d-1][1],v=u[d][1];if(g!==v||f!==m){const b=new p9e;f9e(b,[f,g],[m,v],s),c+=b.distance}}a+=c}a=Qa(a,"meters",t),i.push(a)}return i}class p9e{constructor(t=0,i,r){this.distance=t,this.azimuth=i,this.reverseAzimuth=r}}function f9e(e,t,i,r){const n=t[0]*ny,s=t[1]*ny,o=i[0]*ny,a=i[1]*ny,{a:l,b:u,f:c,radius:d}=c9e(r),f=o-n,m=Math.atan((1-c)*Math.tan(s)),g=Math.atan((1-c)*Math.tan(a)),v=Math.sin(m),b=Math.cos(m),x=Math.sin(g),S=Math.cos(g);let T,_,M,I,$,L,B,z,W,J,K=1e3,Q=f;do{if(B=Math.sin(Q),z=Math.cos(Q),M=Math.sqrt(S*B*(S*B)+(b*x-v*S*z)*(b*x-v*S*z)),M===0)return e.distance=0,e.azimuth=void 0,e.reverseAzimuth=void 0,e;$=v*x+b*S*z,L=Math.atan2(M,$),W=b*S*B/M,_=1-W*W,I=$-2*v*x/_,isNaN(I)&&(I=0),J=c/16*_*(4+c*(4-3*_)),T=Q,Q=f+(1-J)*c*W*(L+J*M*(I+J*$*(2*I*I-1)))}while(Math.abs(Q-T)>1e-12&&--K>0);if(K===0){const q=d,de=Math.acos(Math.sin(s)*Math.sin(a)+Math.cos(s)*Math.cos(a)*Math.cos(o-n))*q,re=o-n,me=Math.sin(re)*Math.cos(a),ve=Math.cos(s)*Math.sin(a)-Math.sin(s)*Math.cos(a)*Math.cos(re),_e=Math.atan2(me,ve);return e.azimuth=_e/ny,e.distance=de,e.reverseAzimuth=void 0,e}const y=_*(l*l-u*u)/(u*u),A=y/1024*(256+y*(y*(74-47*y)-128)),N=u*(1+y/16384*(4096+y*(y*(320-175*y)-768)))*(L-A*M*(I+A/4*($*(2*I*I-1)-A/6*I*(4*M*M-3)*(4*I*I-3)))),j=Math.atan2(S*Math.sin(Q),b*x-v*S*Math.cos(Q)),oe=Math.atan2(b*Math.sin(Q),b*x*Math.cos(Q)-v*S);return e.azimuth=j/ny,e.distance=N,e.reverseAzimuth=oe/ny,e}function m9e(e){const{wkid:t}=e;if(ue[t]!=null)return ue.values[ue[t]];const{wkt:i}=e,r=i.lastIndexOf(",")+1,n=i.lastIndexOf("]]");return parseFloat(i.substring(r,n))}function PH(e,t){return e&&e.includes(t)}function NH(e,t){const{x:i,y:r}=e==="decimal-degrees"?Ig(t,!0):t;return[i,r]}function FH({state:{paddedViewState:e},spatialReference:t,width:i}){return t.isWrappable&&e.worldScreenWidth<i}let Sv=class extends Lt{constructor(e){super(e),this.scaleComputedFrom=cs(),this.view=null}get state(){return this.get("view.ready")&&this.get("view.type")==="2d"?"ready":"disabled"}getScaleBarProperties(e,t){if(this.state==="disabled"||isNaN(e)||!t)return null;const i=this._getDistanceInKm(this.view,this.scaleComputedFrom);if(Re(i))return null;if(t==="metric")return this._getScaleBarProps(e,i,"metric");const r=i/1.609;return this._getScaleBarProps(e,r,"non-metric")}_getLocationUnit(){const e=this.get("view.spatialReference"),{isWebMercator:t,wkid:i,wkt:r}=e;return t||PH(r,"WGS_1984_Web_Mercator")?"decimal-degrees":ue[i]!=null||PH(r,"PROJCS")?"linear-unit":"unknown"}_getDistanceInKm(e,t){const{state:i,spatialReference:r}=e,n=this._getLocationUnit();if(n==="linear-unit")return i.extent.width*m9e(r)/1e3;const[s,o]=this._getScaleMeasuringPoints(e,t),a=n==="decimal-degrees"||r.isGeographic&&!Jae(r)?Et.WGS84:r,l=new fa({paths:[[NH(n,s),NH(n,o)]],spatialReference:a}),u=cre(l,10);let c;try{[c]=d9e([u],"kilometers")}catch{return null}return c}_getScaleMeasuringPoints(e,t){const{width:i,height:r,position:n,spatialReference:s}=e;if(FH(e)){const{valid:u}=gl(s);return[new At(u[0],0,s),new At(u[1],0,s)]}let o=t.y-n[1];o>r?o=r:o<0&&(o=0);const a=cs(0,o),l=cs(i,o);return[e.toMap(a),e.toMap(l)]}_getScaleBarProps(e,t,i){const{view:r}=this;let n=e*t/(FH(r)?r.state.paddedViewState.worldScreenWidth:r.width),s=i==="metric"?"km":"mi";n<.1&&(s==="mi"?(n*=5280,s="ft"):s==="km"&&(n*=1e3,s="m"));let o=0;for(;n>=1;)n/=10,o++;const a=this._getConstraints(n);if(!a)return null;const{min:l,max:u}=a,c=u/n>=n/l?l:u;return{length:e*(c/n),value:10**o*c,unit:s}}_getConstraints(e){return e>.5?{min:.5,max:1}:e>.3?{min:.3,max:.5}:e>.2?{min:.2,max:.3}:e>.15?{min:.15,max:.2}:e>=.1?{min:.15,max:.1}:void 0}};h([p()],Sv.prototype,"scaleComputedFrom",void 0),h([p({readOnly:!0})],Sv.prototype,"state",null),h([p()],Sv.prototype,"view",void 0),Sv=h([ce("esri.widgets.Scalebar.ScaleBarViewModel")],Sv);const y9e=Sv;function xM(e){return 2*e}let Oc=class extends $s{constructor(t,i){super(t,i),this.messages=null,this.unit="non-metric",this.viewModel=new y9e}initialize(){this.addHandles([nt(()=>{const{view:t}=this;return[t?.stationary,t?.center,t?.scale,t?.zoom]},([t])=>{t&&this.scheduleRender()})])}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}set style(t){const i=this.unit==="dual"?"line":t;this._set("style",i)}castStyle(t){return t==="line"?t:"ruler"}castUnit(t){return t==="metric"||t==="dual"?t:"non-metric"}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t=this.get("viewModel.state")==="disabled",i={[Kr.disabled]:t};let r,n;if(!t){const{unit:s,style:o}=this,a=s==="metric"||s==="dual",l=50;if(s==="non-metric"||s==="dual"){const u=this.viewModel.getScaleBarProperties(l,"non-metric");u&&(n=o==="ruler"?this._renderRuler(u):this._renderLine(u,"bottom"))}if(a){const u=this.viewModel.getScaleBarProperties(l,"metric");u&&(r=o==="ruler"?this._renderRuler(u):this._renderLine(u,"top"))}}return Ne("div",{afterCreate:this._handleRootCreateOrUpdate,afterUpdate:this._handleRootCreateOrUpdate,bind:this,class:this.classes(Kr.base,i)},r,n)}_renderRuler(t){const i=xM(Math.round(t.length)),{messages:r}=this,n=r[t.unit]||r.unknownUnit,s=`${xM(t.value)} ${n}`;return Ne("div",{class:this.classes(Kr.barContainer,Kr.rulerBarContainer),key:"esri-scale-bar__ruler"},Ne("div",{class:Kr.ruler,styles:{width:`${i}px`}},Ne("div",{class:Kr.rulerBlock}),Ne("div",{class:Kr.rulerBlock}),Ne("div",{class:Kr.rulerBlock}),Ne("div",{class:Kr.rulerBlock})),Ne("div",{class:this.classes(Kr.labelContainer,Kr.rulerLabelContainer)},Ne("div",{class:Kr.label},"0"),Ne("div",{class:Kr.label},s)))}_renderLine(t,i){const{messages:r}=this,n=r[t.unit]||r.unknownUnit,s=`${xM(t.value)} ${n}`,o={[Kr.topLabelContainer]:i==="top",[Kr.bottomLabelContainer]:i==="bottom"},a=Ne("div",{class:this.classes(Kr.labelContainer,Kr.lineLabelContainer,o),key:"esri-scale-bar__label"},Ne("div",{class:Kr.label},s)),l={[Kr.topLine]:i==="top",[Kr.bottomLine]:i==="bottom"},u=xM(Math.round(t.length)),c=Ne("div",{class:this.classes(Kr.line,l),key:"esri-scale-bar__line",styles:{width:`${u}px`}});return Ne("div",{class:this.classes(Kr.barContainer,Kr.lineBarContainer),key:"esri-scale-bar__line-container"},[c,a])}_handleRootCreateOrUpdate(t){const i=this.viewModel;if(!i)return;const r=t.getBoundingClientRect(),n=r.left+window.pageXOffset,s=r.top+window.pageYOffset,o=cs(n,s);(o.x!==i.scaleComputedFrom.x||o.y!==i.scaleComputedFrom.y)&&(i.scaleComputedFrom=o)}};h([p()],Oc.prototype,"label",null),h([p(),Is("esri/widgets/ScaleBar/t9n/ScaleBar")],Oc.prototype,"messages",void 0),h([p()],Oc.prototype,"style",null),h([di("style")],Oc.prototype,"castStyle",null),h([p()],Oc.prototype,"unit",void 0),h([di("unit")],Oc.prototype,"castUnit",null),h([p()],Oc.prototype,"view",null),h([p()],Oc.prototype,"viewModel",void 0),Oc=h([ce("esri.widgets.ScaleBar")],Oc);class Si{wkid;latestWkid;wkt;constructor(t,i){typeof t=="string"?this.wkt=t:(this.wkid=t,this.latestWkid=i)}isEqual(t){return!!(this.isWebMercator()&&t.isWebMercator()||this.wkid&&t.wkid&&this.wkid===t.wkid||this.wkt&&t.wkt&&this.wkt===t.wkt||this.latestWkid&&t.latestWkid&&this.latestWkid===t.latestWkid)}clone(){const t=new Si("");return t.latestWkid=this.latestWkid,t.wkid=this.wkid,t.wkt=this.wkt,t}lean(){const t={};return this.wkt?t.wkt=this.wkt:(t.wkid=this.wkid,this.latestWkid&&(t.latestWkid=this.latestWkid)),t}isWebMercator(){const t=[900913,3587,54004,41001,102113,102100,3785];return!!(this.wkid&&t.includes(this.wkid)||this.latestWkid&&t.includes(this.latestWkid))}static latLongSR(){return new Si(4326)}static fromConfig(t){if(t.wkt)return new Si(t.wkt);if(t.wkid)return new Si(t.wkid,t.latestWkid);throw new Error("Could not parse config spatial reference object")}static parseSR(t){return t?t instanceof Si?t.clone():new Si(t):Si.latLongSR()}static fromESRI(t){if(t.wkt)return new Si(t.wkt);{const i=t.toJSON().latestWkid,r=new Si(t.wkid);return i&&(r.latestWkid=i),r}}toESRI(){return new Et(this.lean())}static fromGeoJSON(t){const i=Si.parseGeoJsonCrs(t);return i.substring(0,5)==="EPSG:"?new Si(parseInt(i.slice(5))):new Si(i)}static parseGeoJsonCrs(t){if(t){if(t.type==="name"){const i=/urn:ogc:def:crs:EPSG::(\d+)/,r=t.properties.name,n=r.match(i);if(n)return"EPSG:"+n[1];if(r.substring(0,7)!=="urn:ogc")return r}}else return"EPSG:4326";return console.error("Encountered unsupported GeoJSON CRS format. Defaulting to lat-long, resuling conversion is likely wrong",t),"EPSG:4326"}toGeoJSON(){const t={type:"name",properties:{name:""}};return this.wkt?t.properties.name=this.wkt:t.properties.name="urn:ogc:def:crs:EPSG::"+(this.latestWkid||this.wkid),t}}class K0{sr;id;constructor(t,i){this.id=t?t.toString():"",this.sr=Si.parseSR(i)}get type(){return Ti.UNKNOWN}childIdGenerator(t){return`${this.id}-${t}`}toESRI(){throw new Error(`.toESRI not implemented on geometry type ${this.type}`)}toGeoJSON(){throw new Error(`.toGeoJSON not implemented on geometry type ${this.type}`)}invalid(){return this.type===Ti.NONE||this.type===Ti.UNKNOWN}geoJsonFactory(t,i){const r={type:t,coordinates:i};return this.sr&&(r.crs=this.sr.toGeoJSON()),r}}class Pw extends K0{constructor(){super("no_geometry")}get type(){return Ti.NONE}}let zo=class B2 extends K0{rawArray;constructor(t,i,r,n){super(t,i.sr||r),n?this.rawArray=i.slice():this.rawArray=B2.parseXY(i)}get type(){return Ti.POINT}get x(){return this.rawArray[0]}set x(t){this.rawArray[0]=t}get y(){return this.rawArray[1]}set y(t){this.rawArray[1]=t}toArray(){return this.rawArray.slice()}static parseXY(t){let i;if(Array.isArray(t)&&t.length===2)i=t;else{if(t instanceof B2)return t.toArray();i=[t.x,t.y]}if(isNaN(i[0])||isNaN(i[1]))throw new Error("Unsupported point format detected. Supported formats are two element array of numbers, or object with x and y properties containing numbers");return[parseFloat(i[0]),parseFloat(i[1])]}static fromESRI(t,i){return new B2(i,[t.x,t.y],Si.fromESRI(t.spatialReference),!0)}toESRI(){return new At({x:this.x,y:this.y,spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,i){return new B2(i,t.coordinates,Si.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(fn.POINT,this.toArray())}};class ya extends K0{rawArray;constructor(t,i,r,n){super(t,i.sr||r),n?this.rawArray=ya.arrayDeepCopy(i):i instanceof ya?this.rawArray=i.toArray():this.rawArray=ya.parsePointSet(i)}get pointArray(){return this.rawArray.map((t,i)=>new zo(this.childIdGenerator(i),t,this.sr,!0))}getAt(t){return new zo(this.childIdGenerator(t),this.rawArray[t],this.sr,!0)}updateAt(t,i){this.rawArray[i]=zo.parseXY(t)}get length(){return this.rawArray.length}toArray(){return ya.arrayDeepCopy(this.rawArray)}static parsePointSet(t){if(Array.isArray(t)){if(t.length===0)throw new Error("no verticies provided");return t.map(i=>zo.parseXY(i))}else throw new Error("Bad geometry input encountered")}static arrayDeepCopy(t){return t.map(i=>i.slice())}}class lb extends ya{constructor(t,i,r,n){super(t,i,r,n)}get type(){return Ti.MULTIPOINT}static fromESRI(t,i){return new lb(i,t.points,Si.fromESRI(t.spatialReference),!0)}toESRI(){return new fw({points:this.toArray(),spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,i){return new lb(i,t.coordinates,Si.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(fn.MULTIPOINT,this.toArray())}}class im extends ya{constructor(t,i,r,n){if(super(t,i,r,n),this.rawArray.length<2)throw new Error("lines require at least two verticies")}get type(){return Ti.LINESTRING}static fromESRI(t,i){return new im(i,t.paths[0],Si.fromESRI(t.spatialReference),!0)}toESRI(){return new fa({paths:[this.toArray()],spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,i){return new im(i,t.coordinates,Si.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(fn.LINESTRING,this.toArray())}}class ec extends K0{rawArray;constructor(t,i,r,n){if(super(t,i.sr||r),n)this.rawArray=ec.arrayDeepCopy(i);else if(i instanceof ec)this.rawArray=i.toArray();else if(i instanceof ya)this.rawArray=[i.toArray()];else if(Array.isArray(i)){if(i.length===0)throw new Error("no lines provided");this.rawArray=i.map(s=>ya.parsePointSet(s))}else throw new Error("invalid lines format for MulitLineString")}get lineArray(){return this.rawArray.map((t,i)=>new im(this.childIdGenerator(i),t,this.sr,!0))}getAt(t){return new im(this.childIdGenerator(t),this.rawArray[t],this.sr,!0)}updateAt(t,i){this.rawArray[i]=ya.parsePointSet(t)}get length(){return this.rawArray.length}get type(){return Ti.MULTILINESTRING}toArray(){return ec.arrayDeepCopy(this.rawArray)}static arrayDeepCopy(t){return t.map(i=>i.map(r=>r.slice()))}static fromESRI(t,i){return new ec(i,t.paths,Si.fromESRI(t.spatialReference),!0)}toESRI(){return new fa({paths:this.toArray(),spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,i){return new ec(i,t.coordinates,Si.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(fn.MULTILINESTRING,this.toArray())}}class i0 extends ya{constructor(t,i,r,n){if(super(t,i,r,n),i0.closeRing(this.rawArray),this.length<4)throw new Error("Linear Ring must have at least 3 distinct vertices.")}get type(){return Ti.LINEARRING}updateAt(t,i){const r=this.length-1;i===0?super.updateAt(t,r):i===r&&super.updateAt(t,0),super.updateAt(t,i)}static closeRing(t){const i=t[0],r=t[t.length-1];(i[0]!==r[0]||i[1]!==r[1])&&t.push(i.slice())}static fromESRI(t,i){return new i0(i,t.rings[0],Si.fromESRI(t.spatialReference),!0)}toESRI(){return new Aa({rings:[this.toArray()],spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,i){return new i0(i,t.coordinates,Si.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(fn.POLYGON,[this.toArray()])}}class po extends K0{rawArray;constructor(t,i,r,n){super(t,i.sr||r),n?this.rawArray=po.arrayDeepCopy(i):this.rawArray=po.parsePolygon(i)}addLinearRings(t){t.forEach(i=>this.rawArray.push(i.toArray()))}get ringArray(){return this.rawArray.map((t,i)=>new i0(this.childIdGenerator(i),t,this.sr,!0))}get type(){return Ti.POLYGON}toArray(){return po.arrayDeepCopy(this.rawArray)}static parsePolygon(t){let i=[];if(t instanceof po)return t.toArray();if(t instanceof ec)i=t.toArray();else if(t instanceof ya)i=[t.toArray()];else if(Array.isArray(t)){if(t.length===0)throw new Error("no rings provided");i=t.map(r=>ya.parsePointSet(r))}else throw new Error("invalid input format for parsePolygon");return i.forEach(r=>i0.closeRing(r)),i}static arrayDeepCopy(t){return t.map(i=>i.map(r=>r.slice()))}static fromESRI(t,i){return new po(i,t.rings,Si.fromESRI(t.spatialReference),!0)}toESRI(){return new Aa({rings:this.toArray(),spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,i){return new po(i,t.coordinates,Si.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(fn.POLYGON,this.toArray())}}class Ld extends K0{rawArray;constructor(t,i,r,n){super(t,i.sr||r),n?this.rawArray=Ld.arrayDeepCopy(i):this.rawArray=Ld.parseMultiPolygon(i)}addPolygon(t){this.rawArray.push(t.toArray())}get polygonArray(){return this.rawArray.map((t,i)=>new po(this.childIdGenerator(i),t,this.sr,!0))}get type(){return Ti.MULTIPOLYGON}toArray(){return Ld.arrayDeepCopy(this.rawArray)}static parseMultiPolygon(t){if(t instanceof Ld)return t.toArray();if(t instanceof po)return[t.toArray()];if(t instanceof ec||t instanceof ya)return[po.parsePolygon(t)];if(Array.isArray(t)){if(t.length===0)throw new Error("no polygons provided");return t.map(i=>po.parsePolygon(i))}else throw new Error("invalid input format for parseMultiPolygon")}static arrayDeepCopy(t){return t.map(i=>i.map(r=>r.map(n=>n.slice())))}static fromESRI(t,i){return new Ld(i,[t.rings],Si.fromESRI(t.spatialReference),!0)}toESRI(){const t=[];return this.toArray().forEach(i=>{i.forEach(r=>t.push(r))}),new Aa({rings:t,spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,i){return new Ld(i,t.coordinates,Si.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(fn.MULTIPOLYGON,this.toArray())}}class Gr extends K0{rawMin;rawMax;constructor(t,i,r,n){super(t,i.sr||n),this.rawMin=zo.parseXY(i),this.rawMax=zo.parseXY(r)}get type(){return Ti.EXTENT}get xmin(){return this.rawMin[0]}get ymin(){return this.rawMin[1]}get xmax(){return this.rawMax[0]}get ymax(){return this.rawMax[1]}center(){return new zo(this.id+"_centerPoint",[(this.xmax-this.xmin)/2+this.xmin,(this.ymax-this.ymin)/2+this.ymin],this.sr,!0)}expand(t){return Gr.fromESRI(this.toESRI().expand(t),`${this.id}-expanded`)}clone(){return new Gr(this.id,this.rawMin,this.rawMax,this.sr)}toArray(){return[this.rawMin.slice(),this.rawMax.slice()]}toPolygonArray(){return[[this.rawMin.slice(),[this.xmin,this.ymax],this.rawMax.slice(),[this.xmax,this.ymin],this.rawMin.slice()]]}toPolygon(){return new po(this.id,this.toPolygonArray(),this.sr,!0)}static fromParams(t,i,r,n,s,o){return new Gr(t,[i,r],[n,s],o)}static fromConfig(t,i){return new Gr(t,[i.xmin,i.ymin],[i.xmax,i.ymax],Si.fromConfig(i.spatialReference))}isEqual(t){return t?this.xmin===t.xmin&&this.ymin===t.ymin&&this.xmax===t.xmax&&this.ymax===t.ymax:!1}static fromESRI(t,i){return Gr.fromParams(i,t.xmin,t.ymin,t.xmax,t.ymax,Si.fromESRI(t.spatialReference))}toESRI(){return new Kt({xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax,spatialReference:this.sr.toESRI()})}static fromArcServer(t,i){return Gr.fromESRI(Kt.fromJSON(t),i)}static fromGeoJSON(t,i){if(t.coordinates.length!==5)throw new Error("Extent expected a four vertex polygon from GeoJSON");const r=t.coordinates[0].slice(),n=r.slice();return[1,2,3].forEach(s=>{[0,1].forEach(o=>{const a=t.coordinates[s];r[o]>a[o]&&(r[o]=a[o]),n[o]<a[o]&&(n[o]=a[o])})}),new Gr(i,r,n,Si.fromGeoJSON(t.crs))}toGeoJSON(){return this.geoJsonFactory(fn.POLYGON,this.toPolygonArray())}}class sp{c;constructor(t){if(!t){this.c=[0,0,0,1];return}if(Array.isArray(t)){const i=t.length;if(i<3||i>4){console.error("Invalid colour value array passed to Colour class"),this.c=[0,0,0,1];return}this.c=t.map((r,n)=>n===3?r:parseInt(r)),i===3&&this.c.push(1)}else if(typeof t=="string"){const i=t.substring(0,1)==="#"?t.substring(1):t;this.c=[0,2,4,6].map(r=>{const n=i.substring(r,r+2);return sp.hexToInt(n)})}else this.c=[t.r,t.g,t.b,t.a??1];this.c.forEach((i,r)=>{i<0&&(console.error("Negative value passed to colour"),this.c[r]=0),i>255&&(console.error("Rotund value passed to colour"),this.c[r]=255)}),this.c[3]>1&&(this.c[3]=this.c[3]/255)}get rgba(){return this.c.slice()}get hex(){const t=this.rgba;return t[3]=t[3]*255,`#${t.map(i=>sp.intToHex(i)).join("")}`}get r(){return this.c[0]}get g(){return this.c[1]}get b(){return this.c[2]}get a(){return this.c[3]}toESRI(){return new Mt(this.rgba)}toArcServer(){return[this.c[0],this.c[1],this.c[2],255*this.c[3]]}static hexToInt(t){return t.length===0?255:parseInt(t,16)}static intToHex(t){const i=t.toString(16);return i.length===1?`0${i}`:i}}class Pd{toOptions(){throw new Error(".toOptions called on BaseStyle. Likely was not implemented on subclass.")}toESRI(){throw new Error(".toESRI called on BaseStyle. Likely was not implemented on subclass.")}static convToPoints(t){if(!(typeof t>"u"))if(typeof t=="string"){let i;const r=t.length;if(r===0)return;const n=t.substring(r-2);return n==="px"?i=parseFloat(t.substring(0,r-2))*1.333333:n==="pt"?i=parseFloat(t.substring(0,r-2)):i=parseFloat(t),i}else return t}}class qf extends Pd{_height;_xOffset;_yOffset;_icon;_width;_size;_colour;_style;_outline;_path;_angle;constructor(t){if(t=t||{style:rd.CIRCLE},super(),this._style=t.style||rd.CIRCLE,t.style===rd.ICON){const i=t;this._icon=i.icon||"",this._height=Pd.convToPoints(i.height)||16.5,this._width=Pd.convToPoints(i.width)||16.5,this._size=0,this._colour=new sp,this._outline=new Sh,this._path=""}else{const i=t;this._size=Pd.convToPoints(i.size)||12,this._colour=new sp(i.colour??"#ffffff40"),this._outline=new Sh(i.outline),this._path=this._style===rd.PATH&&i.path||"",this._height=0,this._width=0,this._icon=""}this._xOffset=Pd.convToPoints(t.xOffset)||0,this._yOffset=Pd.convToPoints(t.yOffset)||0,this._angle=t.angle||0}get colour(){return this.propGrouse(!1),this._colour}get styleType(){return this._style}get width(){return this.propGrouse(!0),this._width}get height(){return this.propGrouse(!0),this._height}get size(){return this.propGrouse(!1),this._size}get xOffset(){return this._xOffset}get yOffset(){return this._yOffset}get angle(){return this._angle}get icon(){return this.propGrouse(!0),this._icon}get outline(){return this.propGrouse(!1),this._outline}get path(){return this.propGrouse(!1),this._path}propGrouse(t){this._style===rd.ICON!==t&&console.warn(`Accessed a point style property that is invalid for the style type ${this._style}`)}toOptions(){const t={style:this.styleType,yOffset:this.yOffset,xOffset:this.xOffset,angle:this.angle};return this._style===rd.ICON?{...t,icon:this.icon,width:this.width,height:this.height}:{...t,size:this.size,colour:this.colour.hex,path:this.path}}toESRI(){let t;return this.styleType===rd.ICON?qf.isImageUrl(this.icon)?(t=new Yf,t.url=this.icon,t.width=this.width,t.height=this.height,t.xoffset=this.xOffset,t.yoffset=this.yOffset,t.angle=this.angle):(t=new pu,t.color=new Mt(this.colour.rgba),t.size=this.width,t.xoffset=this.xOffset,t.yoffset=this.yOffset,t.angle=this.angle):(t=new pu,t.color=new Mt(this.colour.rgba),t.size=this.size,t.xoffset=this.xOffset,t.yoffset=this.yOffset,t.angle=this.angle,t.path=this.path,t.style=this.styleType,t.outline=this.outline.toESRI()),t}static fromESRI(t){const i={xOffset:t.xoffset,yOffset:t.yoffset,angle:t.angle};if(t.type==="simple-marker"){const r=i;r.style=t.style,r.colour=t.color.toRgba(),r.size=t.size,r.path=t.path,r.outline=Sh.fromESRI(t.outline).toOptions()}else{const r=i;r.style=rd.ICON,r.width=t.width,r.height=t.height,r.icon=t.url}return new qf(i)}static fromArcServer(t){return qf.fromESRI(HF(t))}static isImageUrl(t){return!!t.match(/\.(jpeg|jpg|gif|png|swf|svg)$/)||!!t.match(/^\s*data:([a-z]+\/[a-z0-9\-\+]+(;[a-z\-]+\=[a-z0-9\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i)}}class Sh extends Pd{_style;_width;_miter;_cap;_join;_colour;constructor(t){t=t||{},super(),this._style=t.style||aa.SOLID;const i=Pd.convToPoints(t.width);this._width=typeof i>"u"||i<0?.75:i,this._colour=new sp(t.colour),this._miter=t.miter??2,this._cap=t.cap||GZ.ROUND,this._join=t.join||zZ.ROUND}get styleType(){return this._style}get width(){return this._width}get colour(){return this._colour}get miter(){return this._miter}get cap(){return this._cap}get join(){return this._join}toOptions(){return{style:this.styleType,width:this.width,colour:this.colour.hex,miter:this.miter,cap:this.cap,join:this.join}}toESRI(){const t=new Ra;return t.width=this.width,t.color=this.colour.toESRI(),t.style=this.styleType,t.cap=this.cap,t.miterLimit=this.miter,t.join=this.join,t}static fromESRI(t){const i={width:t.width,colour:t.color.toRgba(),style:t.style};return new Sh(i)}static fromArcServer(t){return Sh.fromESRI(HF(t))}}class _S extends Pd{_outlineStyle;_fillColour;_fillStyle;constructor(t){super(),t=t||{},t.fill||(t.fill={}),this._fillColour=new sp(t.fill.colour),this._fillStyle=t.fill.style||qZ.SOLID,this._outlineStyle=new Sh(t.outline)}get fillColour(){return this._fillColour}get fillStyleType(){return this._fillStyle}get outline(){return this._outlineStyle}toOptions(){return{fill:{style:this.fillStyleType,colour:this.fillColour.hex},outline:this.outline.toOptions()}}toESRI(){const t=this.outline.toESRI(),i=new Mt(this.fillColour.rgba),r=new fp;return r.style=this.fillStyleType,r.color=i,r.outline=t,r}static fromESRI(t){const i={fill:{colour:t.color.toRgba(),style:t.style},outline:Sh.fromESRI(t.outline).toOptions()};return new _S(i)}static fromArcServer(t){return _S.fromESRI(HF(t))}}class g9e{Extent=Gr;Graphic=Zd;LineString=im;LineStyle=Sh;LinearRing=i0;MultiLineString=ec;MultiPoint=lb;MultiPolygon=Ld;Point=zo;PointStyle=qf;Polygon=po;PolygonStyle=_S;SpatialReference=Si;esriMapClickToRamp(t,i){return{mapPoint:zo.fromESRI(t.mapPoint,i),screenX:t.x,screenY:t.y,button:t.button,input:t.native.pointerType,clickTime:t.timestamp}}esriMapMouseToRamp(t){return{screenX:t.x,screenY:t.y,button:t.button,moveTime:t.timestamp}}geomRampToEsri(t){return t.toESRI()}geomEsriToRamp(t,i){switch(t.type){case"point":return zo.fromESRI(t,i);case"polyline":{const r=t;return r.paths.length===1?im.fromESRI(r,i):ec.fromESRI(r,i)}case"polygon":return po.fromESRI(t,i);case"extent":return Gr.fromESRI(t,i);case"multipoint":return lb.fromESRI(t,i);default:throw new Error(`Encountered unhandled geometry type ${t.type}`)}}geomGeoJsonToRamp(t,i){switch(t.type){case fn.POINT:return zo.fromGeoJSON(t,i);case fn.LINESTRING:return im.fromGeoJSON(t,i);case fn.POLYGON:return po.fromGeoJSON(t,i);case fn.MULTIPOINT:return lb.fromGeoJSON(t,i);case fn.MULTILINESTRING:return ec.fromGeoJSON(t,i);case fn.MULTIPOLYGON:return Ld.fromGeoJSON(t,i);default:throw new Error(`Encountered unhandled geometry type ${t.type}`)}}geomRampToGeoJson(t){return t.toGeoJSON()}graphicRampToGeoJson(t){const i={},r={type:"Feature",geometry:this.geomRampToGeoJson(t.geometry),properties:i};return Object.keys(t.attributes).forEach(n=>r.properties[n]=t.attributes[n]),r}graphicGeoJsonToRamp(t,i){if(t.type!=="Feature")throw new Error("Expected input parameter of graphicGeoJsonToRamp to be a GeoJson feature");const r=this.geomGeoJsonToRamp(t.geometry,i),n={};return Object.keys(t.properties.forEach(o=>n[o]=t.properties[o])),new Zd(r,"",n)}graphicRampToEsri(t){const i={attributes:{},id:t.id};return i.geometry=this.geomRampToEsri(t.geometry),Object.keys(t.attributes).forEach(r=>i.attributes[r]=t.attributes[r]),t.style&&(i.symbol=this.styleRampToEsri(t.style)),new As(i)}styleRampToEsri(t){return t.toESRI()}styleEsriToRamp(t){switch(t.type){case"picture-marker":case"simple-marker":return qf.fromESRI(t);case"simple-line":return Sh.fromESRI(t);case"simple-fill":return _S.fromESRI(t);default:return console.error(`Unsupported ESRI symbol type encountered: ${t.type}`),new qf}}serverGeomTypeToRampGeomType(t){if(!t)return Ti.NONE;switch(t){case"esriGeometryPolygon":return Ti.POLYGON;case"esriGeometryPolyline":return Ti.LINESTRING;case"esriGeometryPoint":return Ti.POINT;case"esriGeometryMultipoint":return Ti.MULTIPOINT;case"esriGeometryEnvelope":return Ti.EXTENT;default:return console.error(`Unrecognized server geometry type encountered: ${t}`),Ti.UNKNOWN}}clientGeomTypeToRampGeomType(t){if(!t)return Ti.NONE;switch(t){case"polygon":return Ti.POLYGON;case"polyline":return Ti.LINESTRING;case"point":return Ti.POINT;case"multipoint":return Ti.MULTIPOINT;default:return console.error(`Unrecognized client geometry type encountered: ${t}`),Ti.UNKNOWN}}geoJsonGeomTypeToEsriGeomType(t){switch(t){case fn.POINT:return"point";case fn.LINESTRING:case fn.MULTILINESTRING:return"polyline";case fn.POLYGON:case fn.MULTIPOLYGON:return"polygon";case fn.MULTIPOINT:return"multipoint";default:throw new Error(`Encountered unhandled geometry type ${t}`)}}isImageUrl(t){return qf.isImageUrl(t)}}class xS{layerIdx;name;children;uid;isRoot;constructor(t,i,r="",n=!0){this.layerIdx=t,this.name=r,this.isRoot=n,this.children=[],this.uid=i}findChildByUid(t){if(this.uid===t)return this;{let i;return this.children.some(r=>i=r.findChildByUid(t)),i}}findChildByIdx(t){if(this.layerIdx===t)return this;{let i;return this.children.some(r=>i=r.findChildByIdx(t)),i}}get isLogicalLayer(){return this.layerIdx>-1&&this.children.length===0}get isLayerRoot(){return this.isRoot}}class Zae{minScale;maxScale;constructor(t=0,i=0){this.minScale=t,this.maxScale=i}isOffScale(t){const i={offScale:!1,zoomIn:!1};return t<this.maxScale&&this.maxScale!==0?(i.offScale=!0,i.zoomIn=!1):t>this.minScale&&this.minScale!==0&&(i.offScale=!0,i.zoomIn=!0),i}}class v9e{sql;cache;extent;constructor(t="",i=""){this.sql={[Ju.PERMANENT]:t,[Ju.INITIAL]:i},this.extent=void 0,this.cache={}}sqlActiveFilters(t=[]){const i=this.sql,r=Object.keys(i).filter(n=>i[n]);return t.length===0?r:r.filter(n=>t.indexOf(n)===-1)}isActive(){return this.sqlActiveFilters([Ju.PERMANENT]).length>0}getCombinedSql(t=[]){const i=this.sqlActiveFilters(t),r=i.length;return r===0?"":r===1?this.sql[i[0]]:i.map(n=>`(${this.sql[n]})`).join(" AND ")}setSql(t,i){t===Ju.PERMANENT?console.error("Attempted to overwrite a permanent filter. Not allowed."):(this.sql[t]=i,this.clearCacheSet(t))}getSql(t){return this.sql[t]||""}setExtent(t){t.isEqual(this.extent)||(this.extent=t,this.clearCacheSet(Ju.EXTENT))}getCacheKey(t,i){return`_cache$${t.sort().join("$")}${i?"$"+Ju.EXTENT:""}$`}getCache(t,i){const r=this.getCacheKey(t,i);return this.cache[r]}setCache(t,i,r){const n=this.getCacheKey(i,r);this.cache[n]=t}cacheActiveKeys(){const t=this.cache;return Object.keys(t).filter(i=>t[i])}clearAllCaches(){this.cache={}}clearCacheSet(t){this.cacheActiveKeys().forEach(i=>{i.indexOf(`$${t}$`)>-1&&delete this.cache[i]})}clearAll(){this.sql={[Ju.PERMANENT]:this.sql[Ju.PERMANENT]},this.extent=void 0,this.clearAllCaches()}}class SS{id;sr;_defaultExtent;_fullExtent;_maximumExtent;constructor(t,i,r=void 0,n=void 0){this.id=t,this.sr=i.sr.clone(),this._defaultExtent=i.clone(),this._fullExtent=r?.clone(),this._maximumExtent=n?.clone(),r&&!r.sr.isEqual(this.sr)&&console.error(`Full extent provided in extent set has a mismatching spatial reference: ${r.sr}`),n&&!n.sr.isEqual(this.sr)&&console.error(`Maximum extent provided in extent set has a mismatching spatial reference: ${n.sr}`)}get defaultExtent(){return this._defaultExtent}set defaultExtent(t){this._defaultExtent=t.clone()}get fullExtent(){return this._fullExtent?this._fullExtent:this.defaultExtent}set fullExtent(t){this._fullExtent=t.clone()}get maximumExtent(){return this._maximumExtent?this._maximumExtent:this.fullExtent}set maximumExtent(t){this._maximumExtent=t.clone()}static fromConfig(t){return new SS(t.id,Gr.fromConfig(`${t.id}-extent-default`,t.default),t.full!==void 0?Gr.fromConfig(`${t.id}-extent-full`,t.full):void 0,t.maximum!==void 0?Gr.fromConfig(`${t.id}-extent-maximum`,t.maximum):void 0)}clone(){return new SS(this.id,this._defaultExtent,this._fullExtent,this._maximumExtent)}}class ls{realPromise;resolveMe(){}rejectMe(){}getPromise(){return this.realPromise}constructor(){this.realPromise=new Promise((t,i)=>{this.resolveMe=t,this.rejectMe=i})}}var Bs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function b9e(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function r(){if(this instanceof r){var n=[null];n.push.apply(n,arguments);var s=Function.bind.apply(t,n);return new s}return t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(i,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}),i}var w9e=function(t){return _9e(t)&&!x9e(t)};function _9e(e){return!!e&&typeof e=="object"}function x9e(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||M9e(e)}var S9e=typeof Symbol=="function"&&Symbol.for,E9e=S9e?Symbol.for("react.element"):60103;function M9e(e){return e.$$typeof===E9e}function I9e(e){return Array.isArray(e)?[]:{}}function ES(e,t){return t.clone!==!1&&t.isMergeableObject(e)?Ub(I9e(e),e,t):e}function T9e(e,t,i){return e.concat(t).map(function(r){return ES(r,i)})}function A9e(e,t){if(!t.customMerge)return Ub;var i=t.customMerge(e);return typeof i=="function"?i:Ub}function C9e(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function DH(e){return Object.keys(e).concat(C9e(e))}function Yae(e,t){try{return t in e}catch{return!1}}function $9e(e,t){return Yae(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function O9e(e,t,i){var r={};return i.isMergeableObject(e)&&DH(e).forEach(function(n){r[n]=ES(e[n],i)}),DH(t).forEach(function(n){$9e(e,n)||(Yae(e,n)&&i.isMergeableObject(t[n])?r[n]=A9e(n,i)(e[n],t[n],i):r[n]=ES(t[n],i))}),r}function Ub(e,t,i){i=i||{},i.arrayMerge=i.arrayMerge||T9e,i.isMergeableObject=i.isMergeableObject||w9e,i.cloneUnlessOtherwiseSpecified=ES;var r=Array.isArray(t),n=Array.isArray(e),s=r===n;return s?r?i.arrayMerge(e,t,i):O9e(e,t,i):ES(t,i)}Ub.all=function(t,i){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(r,n){return Ub(r,n,i)},{})};var R9e=Ub,k9e=R9e;const Kae=Nw(k9e);class L9e{generateUUID(){let t=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const r=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(i==="x"?r:r&3|8).toString(16)})}convertImageToCanvas(t,i,r=!0){const n=i??window.document.createElement("canvas"),s=window.document.createElement("img");r&&(s.crossOrigin="anonymous");const o=new Promise((a,l)=>{s.addEventListener("load",()=>{n.width=s.width,n.height=s.height,n.getContext("2d")?.drawImage(s,0,0),a(n)}),s.addEventListener("error",u=>l(u))});return s.src=t,o}async convertImagetoDataURL(t,i="image/png"){return t.startsWith("data")?t:this.convertImageToCanvas(t).then(r=>r.toDataURL(i)).catch(r=>(console.error("Failed to load crossorigin image",t,r),t))}parseUrlIndex(t){const i={rootUrl:t,index:0},r=/\/(\d+)\/?$/,n=t.match(r);if(n){const s=n[1];i.index=isNaN(parseInt(s))?void 0:parseInt(s),i.rootUrl=t.substr(0,t.length-n[0].length)}else console.warn("Cannot extract layer index from url "+t);return i}}class i5{_url;_base;_query;_queryMap={};constructor(t){this._url=t,[this._base,this._query]=t.split("?").concat(""),this._queryMap=this._query.split("&").reduce((i,r)=>{const[n,s]=r.split("=");return i[n]=s,i},{})}get query(){return this._query}get base(){return this._base}get queryMap(){return this._queryMap}updateQuery(t){const i=Kae.all([{},this.queryMap,t]);return`${this.base}${Object.entries(i).filter(([,n])=>n!==void 0).map(([n,s],o)=>`${o===0?"?":""}${n}=${s}`).join("&")}`}}var iR={exports:{}},jH;function Qae(){return jH||(jH=1,function(e,t){(function(i,r){e.exports=r(),typeof window=="object"&&(i.Terraformer=r())})(Bs,function(){var i={},r=6378137,n=57.29577951308232,s=.017453292519943,o={type:"link",properties:{href:"http://spatialreference.org/ref/sr-org/6928/ogcwkt/",type:"ogcwkt"}},a={type:"link",properties:{href:"http://spatialreference.org/ref/epsg/4326/ogcwkt/",type:"ogcwkt"}};function l(U){return Object.prototype.toString.call(U)==="[object Array]"}function u(){var U=Array.prototype.slice.apply(arguments);typeof console!==void 0&&console.warn&&console.warn.apply(console,U)}function c(U,le){for(var ie in le)le.hasOwnProperty(ie)&&(U[ie]=le[ie]);return U}function d(U){if(U.type)switch(U.type){case"Point":return[U.coordinates[0],U.coordinates[1],U.coordinates[0],U.coordinates[1]];case"MultiPoint":return g(U.coordinates);case"LineString":return g(U.coordinates);case"MultiLineString":return f(U.coordinates);case"Polygon":return f(U.coordinates);case"MultiPolygon":return m(U.coordinates);case"Feature":return U.geometry?d(U.geometry):null;case"FeatureCollection":return v(U);case"GeometryCollection":return b(U);default:throw new Error("Unknown type: "+U.type)}return null}function f(U){for(var le=null,ie=null,k=null,O=null,C=0;C<U.length;C++)for(var G=U[C],Z=0;Z<G.length;Z++){var F=G[Z],te=F[0],ge=F[1];(le===null||te<le)&&(le=te),(ie===null||te>ie)&&(ie=te),(k===null||ge<k)&&(k=ge),(O===null||ge>O)&&(O=ge)}return[le,k,ie,O]}function m(U){for(var le=null,ie=null,k=null,O=null,C=0;C<U.length;C++)for(var G=U[C],Z=0;Z<G.length;Z++)for(var F=G[Z],te=0;te<F.length;te++){var ge=F[te],xe=ge[0],fe=ge[1];(le===null||xe<le)&&(le=xe),(ie===null||xe>ie)&&(ie=xe),(k===null||fe<k)&&(k=fe),(O===null||fe>O)&&(O=fe)}return[le,k,ie,O]}function g(U){for(var le=null,ie=null,k=null,O=null,C=0;C<U.length;C++){var G=U[C],Z=G[0],F=G[1];(le===null||Z<le)&&(le=Z),(ie===null||Z>ie)&&(ie=Z),(k===null||F<k)&&(k=F),(O===null||F>O)&&(O=F)}return[le,k,ie,O]}function v(U){for(var le=[],ie,k=U.features.length-1;k>=0;k--)ie=d(U.features[k].geometry),le.push([ie[0],ie[1]]),le.push([ie[2],ie[3]]);return g(le)}function b(U){for(var le=[],ie,k=U.geometries.length-1;k>=0;k--)ie=d(U.geometries[k]),le.push([ie[0],ie[1]]),le.push([ie[2],ie[3]]);return g(le)}function x(U){var le=d(U);return{x:le[0],y:le[1],w:Math.abs(le[0]-le[2]),h:Math.abs(le[1]-le[3])}}function S(U){return U*n}function T(U){return U*s}function _(U,le){for(var ie=0;ie<U.length;ie++)typeof U[ie][0]=="number"&&(U[ie]=le(U[ie])),typeof U[ie]=="object"&&(U[ie]=_(U[ie],le));return U}function M(U){var le=U[0],ie=U[1];return[S(le/r)-Math.floor((S(le/r)+180)/360)*360,S(Math.PI/2-2*Math.atan(Math.exp(-1*ie/r)))]}function I(U){var le=U[0],ie=Math.max(Math.min(U[1],89.99999),-89.99999);return[T(le)*r,r/2*Math.log((1+Math.sin(T(ie)))/(1-Math.sin(T(ie))))]}function $(U,le,ie){if(U.type==="Point")U.coordinates=le(U.coordinates);else if(U.type==="Feature")U.geometry=$(U.geometry,le,!0);else if(U.type==="FeatureCollection")for(var k=0;k<U.features.length;k++)U.features[k]=$(U.features[k],le,!0);else if(U.type==="GeometryCollection")for(var O=0;O<U.geometries.length;O++)U.geometries[O]=$(U.geometries[O],le,!0);else U.coordinates=_(U.coordinates,le);return ie||le===I&&(U.crs=o),le===M&&delete U.crs,U}function L(U){return $(U,I)}function B(U){return $(U,M)}function z(U,le){return U<le?-1:U>le?1:0}function W(U,le){return U[0]>le[0]?-1:U[0]<le[0]?1:U[1]>le[1]?-1:U[1]<le[1]?1:0}function J(U,le,ie){return z((le[0]-U[0])*(ie[1]-U[1])-(ie[0]-U[0])*(le[1]-U[1]),0)}function K(U,le){var ie=le[0]-U[0],k=le[1]-U[1];return ie*ie+k*k}function Q(U,le){var ie=le;for(var k in U){var O=J(le,ie,U[k]);(O===-1||O===0&&K(le,U[k])>K(le,ie))&&(ie=U[k])}return ie}function y(U){if(U.length===0)return[];if(U.length===1)return U;for(var le=[U.sort(W)[0]],ie=0;ie<le.length;ie++){var k=Q(U,le[ie]);k!==le[0]&&le.push(k)}return le}function A(U){for(var le,ie=0;ie<U.length-3;ie++){var k=U[ie],O=U[ie+1],C=U[ie+2],G=[O[0]-k[0],O[1]-k[1]],Z=C[0]*G[1]-C[1]*G[0]+G[0]*k[1]-G[1]*k[0];if(ie===0)Z<0?le=!0:le=!1;else if(le&&Z>0||!le&&Z<0)return!1}return!0}function N(U,le){for(var ie=!1,k=-1,O=U.length,C=O-1;++k<O;C=k)(U[k][1]<=le[1]&&le[1]<U[C][1]||U[C][1]<=le[1]&&le[1]<U[k][1])&&le[0]<(U[C][0]-U[k][0])*(le[1]-U[k][1])/(U[C][1]-U[k][1])+U[k][0]&&(ie=!ie);return ie}function j(U,le){if(U&&U.length){if(U.length===1)return N(U[0],le);if(N(U[0],le)){for(var ie=1;ie<U.length;ie++)if(N(U[ie],le))return!1;return!0}else return!1}else return!1}function oe(U,le,ie,k){var O=(k[0]-ie[0])*(U[1]-ie[1])-(k[1]-ie[1])*(U[0]-ie[0]),C=(le[0]-U[0])*(U[1]-ie[1])-(le[1]-U[1])*(U[0]-ie[0]),G=(k[1]-ie[1])*(le[0]-U[0])-(k[0]-ie[0])*(le[1]-U[1]);if(G!==0){var Z=O/G,F=C/G;if(0<=Z&&Z<=1&&0<=F&&F<=1)return!0}return!1}function q(U){return!isNaN(parseFloat(U))&&isFinite(U)}function de(U,le){if(q(U[0][0])){if(q(le[0][0])){for(var ie=0;ie<U.length-1;ie++)for(var k=0;k<le.length-1;k++)if(oe(U[ie],U[ie+1],le[k],le[k+1]))return!0}else for(var O=0;O<le.length;O++)if(de(U,le[O]))return!0}else for(var C=0;C<U.length;C++)if(de(U[C],le))return!0;return!1}function re(U){for(var le=[],ie=0;ie<U.length;ie++){var k=U[ie].slice();me(k[0],k[k.length-1])===!1&&k.push(k[0]),le.push(k)}return le}function me(U,le){for(var ie=0;ie<U.length;ie++)if(U[ie]!==le[ie])return!1;return!0}function ve(U,le){if(U.length!==le.length)return!1;for(var ie=U.slice().sort(W),k=le.slice().sort(W),O=0;O<ie.length;O++){if(ie[O].length!==k[O].length)return!1;for(var C=0;C<ie.length;C++)if(ie[O][C]!==k[O][C])return!1}return!0}var _e=["length"];function Se(U){if(U)switch(U.type){case"Point":return new Oe(U);case"MultiPoint":return new Me(U);case"LineString":return new we(U);case"MultiLineString":return new Ie(U);case"Polygon":return new Ae(U);case"MultiPolygon":return new H(U);case"Feature":return new V(U);case"FeatureCollection":return new D(U);case"GeometryCollection":return new ne(U);default:throw new Error("Unknown type: "+U.type)}}Se.prototype.toMercator=function(){return L(this)},Se.prototype.toGeographic=function(){return B(this)},Se.prototype.envelope=function(){return x(this)},Se.prototype.bbox=function(){return d(this)},Se.prototype.convexHull=function(){var U=[],le,ie;if(this.type==="Point")return null;if(this.type==="LineString"||this.type==="MultiPoint")if(this.coordinates&&this.coordinates.length>=3)U=this.coordinates;else return null;else if(this.type==="Polygon"||this.type==="MultiLineString")if(this.coordinates&&this.coordinates.length>0){for(le=0;le<this.coordinates.length;le++)U=U.concat(this.coordinates[le]);if(U.length<3)return null}else return null;else if(this.type==="MultiPolygon")if(this.coordinates&&this.coordinates.length>0){for(le=0;le<this.coordinates.length;le++)for(ie=0;ie<this.coordinates[le].length;ie++)U=U.concat(this.coordinates[le][ie]);if(U.length<3)return null}else return null;else if(this.type==="Feature"){var k=new Se(this.geometry);return k.convexHull()}return new Ae({type:"Polygon",coordinates:re([y(U)])})},Se.prototype.toJSON=function(){var U={};for(var le in this)this.hasOwnProperty(le)&&_e.indexOf(le)===-1&&(U[le]=this[le]);return U.bbox=d(this),U},Se.prototype.contains=function(U){return new Se(U).within(this)},Se.prototype.within=function(U){var le,ie,k,O;if(U.type==="Feature"&&(U=U.geometry),U.type==="Point"&&this.type==="Point")return me(this.coordinates,U.coordinates);if(U.type==="MultiLineString"&&this.type==="Point")for(ie=0;ie<U.coordinates.length;ie++){var C={type:"LineString",coordinates:U.coordinates[ie]};if(this.within(C))return!0}if((U.type==="LineString"||U.type==="MultiPoint")&&this.type==="Point")for(ie=0;ie<U.coordinates.length;ie++){if(this.coordinates.length!==U.coordinates[ie].length)return!1;if(me(this.coordinates,U.coordinates[ie]))return!0}if(U.type==="Polygon")if(this.type==="Polygon"){if(U.coordinates.length===this.coordinates.length){for(ie=0;ie<this.coordinates.length;ie++)if(ve(this.coordinates[ie],U.coordinates[ie]))return!0}return this.coordinates.length&&j(U.coordinates,this.coordinates[0][0])?!de(re(this.coordinates),re(U.coordinates)):!1}else{if(this.type==="Point")return j(U.coordinates,this.coordinates);if(this.type==="LineString"||this.type==="MultiPoint"){if(!this.coordinates||this.coordinates.length===0)return!1;for(ie=0;ie<this.coordinates.length;ie++)if(j(U.coordinates,this.coordinates[ie])===!1)return!1;return!0}else if(this.type==="MultiLineString"){for(ie=0;ie<this.coordinates.length;ie++){var G=new we(this.coordinates[ie]);if(G.within(U)===!1)return O++,!1}return!0}else if(this.type==="MultiPolygon"){for(ie=0;ie<this.coordinates.length;ie++){var Z=new Se({type:"Polygon",coordinates:this.coordinates[ie]});if(Z.within(U)===!1)return!1}return!0}}if(U.type==="MultiPolygon"){if(this.type==="Point"){if(U.coordinates.length){for(ie=0;ie<U.coordinates.length;ie++)if(le=U.coordinates[ie],j(le,this.coordinates)&&de([this.coordinates],U.coordinates)===!1)return!0}return!1}else if(this.type==="Polygon"){for(ie=0;ie<this.coordinates.length;ie++)if(U.coordinates[ie].length===this.coordinates.length){for(k=0;k<this.coordinates.length;k++)if(ve(this.coordinates[k],U.coordinates[ie][k]))return!0}if(de(this.coordinates,U.coordinates)===!1&&U.coordinates.length){for(ie=0;ie<U.coordinates.length;ie++)le=U.coordinates[ie],j(le,this.coordinates[0][0])===!1?O=!1:O=!0;return O}}else if(this.type==="LineString"||this.type==="MultiPoint")for(ie=0;ie<U.coordinates.length;ie++){var F={type:"Polygon",coordinates:U.coordinates[ie]};return!!this.within(F)}else if(this.type==="MultiLineString"){for(ie=0;ie<this.coordinates.length;ie++){var te=new we(this.coordinates[ie]);if(te.within(U)===!1)return!1}return!0}else if(this.type==="MultiPolygon"){for(ie=0;ie<U.coordinates.length;ie++){var ge={type:"Polygon",coordinates:U.coordinates[ie]};if(this.within(ge)===!1)return!1}return!0}}return!1},Se.prototype.intersects=function(U){U.type==="Feature"&&(U=U.geometry);var le=new Se(U);if(this.within(U)||le.within(this))return!0;if(this.type!=="Point"&&this.type!=="MultiPoint"&&U.type!=="Point"&&U.type!=="MultiPoint")return de(this.coordinates,U.coordinates);if(this.type==="Feature"){var ie=new Se(this.geometry);return ie.intersects(U)}return u("Type "+this.type+" to "+U.type+" intersection is not supported by intersects"),!1};function Oe(U){var le=Array.prototype.slice.call(arguments);if(U&&U.type==="Point"&&U.coordinates)c(this,U);else if(U&&l(U))this.coordinates=U;else if(le.length>=2)this.coordinates=le;else throw"Terraformer: invalid input for Terraformer.Point";this.type="Point"}Oe.prototype=new Se,Oe.prototype.constructor=Oe;function Me(U){if(U&&U.type==="MultiPoint"&&U.coordinates)c(this,U);else if(l(U))this.coordinates=U;else throw"Terraformer: invalid input for Terraformer.MultiPoint";this.type="MultiPoint"}Me.prototype=new Se,Me.prototype.constructor=Me,Me.prototype.forEach=function(U){for(var le=0;le<this.coordinates.length;le++)U.apply(this,[this.coordinates[le],le,this.coordinates]);return this},Me.prototype.addPoint=function(U){return this.coordinates.push(U),this},Me.prototype.insertPoint=function(U,le){return this.coordinates.splice(le,0,U),this},Me.prototype.removePoint=function(U){return typeof U=="number"?this.coordinates.splice(U,1):this.coordinates.splice(this.coordinates.indexOf(U),1),this},Me.prototype.get=function(U){return new Oe(this.coordinates[U])};function we(U){if(U&&U.type==="LineString"&&U.coordinates)c(this,U);else if(l(U))this.coordinates=U;else throw"Terraformer: invalid input for Terraformer.LineString";this.type="LineString"}we.prototype=new Se,we.prototype.constructor=we,we.prototype.addVertex=function(U){return this.coordinates.push(U),this},we.prototype.insertVertex=function(U,le){return this.coordinates.splice(le,0,U),this},we.prototype.removeVertex=function(U){return this.coordinates.splice(U,1),this};function Ie(U){if(U&&U.type==="MultiLineString"&&U.coordinates)c(this,U);else if(l(U))this.coordinates=U;else throw"Terraformer: invalid input for Terraformer.MultiLineString";this.type="MultiLineString"}Ie.prototype=new Se,Ie.prototype.constructor=Ie,Ie.prototype.forEach=function(U){for(var le=0;le<this.coordinates.length;le++)U.apply(this,[this.coordinates[le],le,this.coordinates])},Ie.prototype.get=function(U){return new we(this.coordinates[U])};function Ae(U){if(U&&U.type==="Polygon"&&U.coordinates)c(this,U);else if(l(U))this.coordinates=U;else throw"Terraformer: invalid input for Terraformer.Polygon";this.type="Polygon"}Ae.prototype=new Se,Ae.prototype.constructor=Ae,Ae.prototype.addVertex=function(U){return this.insertVertex(U,this.coordinates[0].length-1),this},Ae.prototype.insertVertex=function(U,le){return this.coordinates[0].splice(le,0,U),this},Ae.prototype.removeVertex=function(U){return this.coordinates[0].splice(U,1),this},Ae.prototype.close=function(){this.coordinates=re(this.coordinates)},Ae.prototype.hasHoles=function(){return this.coordinates.length>1},Ae.prototype.holes=function(){var U=[];if(this.hasHoles())for(var le=1;le<this.coordinates.length;le++)U.push(new Ae([this.coordinates[le]]));return U};function H(U){if(U&&U.type==="MultiPolygon"&&U.coordinates)c(this,U);else if(l(U))this.coordinates=U;else throw"Terraformer: invalid input for Terraformer.MultiPolygon";this.type="MultiPolygon"}H.prototype=new Se,H.prototype.constructor=H,H.prototype.forEach=function(U){for(var le=0;le<this.coordinates.length;le++)U.apply(this,[this.coordinates[le],le,this.coordinates])},H.prototype.get=function(U){return new Ae(this.coordinates[U])},H.prototype.close=function(){var U=[];return this.forEach(function(le){U.push(re(le))}),this.coordinates=U,this};function V(U){if(U&&U.type==="Feature")c(this,U);else if(U&&U.type&&U.coordinates)this.geometry=U;else throw"Terraformer: invalid input for Terraformer.Feature";this.type="Feature"}V.prototype=new Se,V.prototype.constructor=V;function D(U){if(U&&U.type==="FeatureCollection"&&U.features)c(this,U);else if(l(U))this.features=U;else throw"Terraformer: invalid input for Terraformer.FeatureCollection";this.type="FeatureCollection"}D.prototype=new Se,D.prototype.constructor=D,D.prototype.forEach=function(U){for(var le=0;le<this.features.length;le++)U.apply(this,[this.features[le],le,this.features])},D.prototype.get=function(U){var le;return this.forEach(function(ie){ie.id===U&&(le=ie)}),new V(le)};function ne(U){if(U&&U.type==="GeometryCollection"&&U.geometries)c(this,U);else if(l(U))this.geometries=U;else if(U.coordinates&&U.type)this.type="GeometryCollection",this.geometries=[U];else throw"Terraformer: invalid input for Terraformer.GeometryCollection";this.type="GeometryCollection"}ne.prototype=new Se,ne.prototype.constructor=ne,ne.prototype.forEach=function(U){for(var le=0;le<this.geometries.length;le++)U.apply(this,[this.geometries[le],le,this.geometries])},ne.prototype.get=function(U){return new Se(this.geometries[U])};function ye(U,le,ie){for(var k=I(U),O=ie||64,C={type:"Polygon",coordinates:[[]]},G=1;G<=O;G++){var Z=G*(360/O)*Math.PI/180;C.coordinates[0].push([k[0]+le*Math.cos(Z),k[1]+le*Math.sin(Z)])}return C.coordinates=re(C.coordinates),B(C)}function ae(U,le,ie){var k=ie||64,O=le||250;if(!U||U.length<2||!O||!k)throw new Error("Terraformer: missing parameter for Terraformer.Circle");c(this,new V({type:"Feature",geometry:ye(U,O,k),properties:{radius:O,center:U,steps:k}}))}return ae.prototype=new Se,ae.prototype.constructor=ae,ae.prototype.recalculate=function(){return this.geometry=ye(this.properties.center,this.properties.radius,this.properties.steps),this},ae.prototype.center=function(U){return U&&(this.properties.center=U,this.recalculate()),this.properties.center},ae.prototype.radius=function(U){return U&&(this.properties.radius=U,this.recalculate()),this.properties.radius},ae.prototype.steps=function(U){return U&&(this.properties.steps=U,this.recalculate()),this.properties.steps},ae.prototype.toJSON=function(){var U=Se.prototype.toJSON.call(this);return U},i.Primitive=Se,i.Point=Oe,i.MultiPoint=Me,i.LineString=we,i.MultiLineString=Ie,i.Polygon=Ae,i.MultiPolygon=H,i.Feature=V,i.FeatureCollection=D,i.GeometryCollection=ne,i.Circle=ae,i.toMercator=L,i.toGeographic=B,i.Tools={},i.Tools.positionToMercator=I,i.Tools.positionToGeographic=M,i.Tools.applyConverter=$,i.Tools.toMercator=L,i.Tools.toGeographic=B,i.Tools.createCircle=ye,i.Tools.calculateBounds=d,i.Tools.calculateEnvelope=x,i.Tools.coordinatesContainPoint=N,i.Tools.polygonContainsPoint=j,i.Tools.arraysIntersectArrays=de,i.Tools.coordinatesContainPoint=N,i.Tools.coordinatesEqual=ve,i.Tools.convexHull=y,i.Tools.isConvex=A,i.MercatorCRS=o,i.GeographicCRS=a,i})}(iR)),iR.exports}var P9e=Qae();function N9e(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}var O0=1,R0=2,ub=3,F9e=4,L6=5,UH=6378137,D9e=6356752314e-3,VH=.0066943799901413165,Ix=484813681109536e-20,mt=Math.PI/2,j9e=.16666666666666666,U9e=.04722222222222222,V9e=.022156084656084655,Tt=1e-10,js=.017453292519943295,gh=57.29577951308232,rr=Math.PI/4,MS=Math.PI*2,An=3.14159265359,La={};La.greenwich=0;La.lisbon=-9.131906111111;La.paris=2.337229166667;La.bogota=-74.080916666667;La.madrid=-3.687938888889;La.rome=12.452333333333;La.bern=7.439583333333;La.jakarta=106.807719444444;La.ferro=-17.666666666667;La.brussels=4.367975;La.stockholm=18.058277777778;La.athens=23.7163375;La.oslo=10.722916666667;const B9e={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var BH=/[\s_\-\/\(\)]/g;function vm(e,t){if(e[t])return e[t];for(var i=Object.keys(e),r=t.toLowerCase().replace(BH,""),n=-1,s,o;++n<i.length;)if(s=i[n],o=s.toLowerCase().replace(BH,""),o===r)return e[s]}function P6(e){var t={},i=e.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,l){var u=l.split("=");return u.push(!0),a[u[0].toLowerCase()]=u[1],a},{}),r,n,s,o={proj:"projName",datum:"datumCode",rf:function(a){t.rf=parseFloat(a)},lat_0:function(a){t.lat0=a*js},lat_1:function(a){t.lat1=a*js},lat_2:function(a){t.lat2=a*js},lat_ts:function(a){t.lat_ts=a*js},lon_0:function(a){t.long0=a*js},lon_1:function(a){t.long1=a*js},lon_2:function(a){t.long2=a*js},alpha:function(a){t.alpha=parseFloat(a)*js},gamma:function(a){t.rectified_grid_angle=parseFloat(a)},lonc:function(a){t.longc=a*js},x_0:function(a){t.x0=parseFloat(a)},y_0:function(a){t.y0=parseFloat(a)},k_0:function(a){t.k0=parseFloat(a)},k:function(a){t.k0=parseFloat(a)},a:function(a){t.a=parseFloat(a)},b:function(a){t.b=parseFloat(a)},r_a:function(){t.R_A=!0},zone:function(a){t.zone=parseInt(a,10)},south:function(){t.utmSouth=!0},towgs84:function(a){t.datum_params=a.split(",").map(function(l){return parseFloat(l)})},to_meter:function(a){t.to_meter=parseFloat(a)},units:function(a){t.units=a;var l=vm(B9e,a);l&&(t.to_meter=l.to_meter)},from_greenwich:function(a){t.from_greenwich=a*js},pm:function(a){var l=vm(La,a);t.from_greenwich=(l||parseFloat(a))*js},nadgrids:function(a){a==="@null"?t.datumCode="none":t.nadgrids=a},axis:function(a){var l="ewnsud";a.length===3&&l.indexOf(a.substr(0,1))!==-1&&l.indexOf(a.substr(1,1))!==-1&&l.indexOf(a.substr(2,1))!==-1&&(t.axis=a)},approx:function(){t.approx=!0}};for(r in i)n=i[r],r in o?(s=o[r],typeof s=="function"?s(n):t[s]=n):t[r]=n;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}var IS=1,Xae=2,ele=3,r5=4,tle=5,V9=-1,z9e=/\s/,G9e=/[A-Za-z]/,q9e=/[A-Za-z84_]/,W4=/[,\]]/,ile=/[\d\.E\-\+]/;function vp(e){if(typeof e!="string")throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=IS}vp.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==r5)for(;z9e.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case IS:return this.neutral(e);case Xae:return this.keyword(e);case r5:return this.quoted(e);case tle:return this.afterquote(e);case ele:return this.number(e);case V9:return}};vp.prototype.afterquote=function(e){if(e==='"'){this.word+='"',this.state=r5;return}if(W4.test(e)){this.word=this.word.trim(),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in afterquote yet, index '+this.place)};vp.prototype.afterItem=function(e){if(e===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=IS;return}if(e==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=IS,this.currentObject=this.stack.pop(),this.currentObject||(this.state=V9);return}};vp.prototype.number=function(e){if(ile.test(e)){this.word+=e;return}if(W4.test(e)){this.word=parseFloat(this.word),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in number yet, index '+this.place)};vp.prototype.quoted=function(e){if(e==='"'){this.state=tle;return}this.word+=e};vp.prototype.keyword=function(e){if(q9e.test(e)){this.word+=e;return}if(e==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=IS;return}if(W4.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in keyword yet, index '+this.place)};vp.prototype.neutral=function(e){if(G9e.test(e)){this.word=e,this.state=Xae;return}if(e==='"'){this.word="",this.state=r5;return}if(ile.test(e)){this.word=e,this.state=ele;return}if(W4.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in neutral yet, index '+this.place)};vp.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===V9)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function H9e(e){var t=new vp(e);return t.output()}function zH(e,t,i){Array.isArray(t)&&(i.unshift(t),t=null);var r=t?{}:e,n=i.reduce(function(s,o){return Fv(o,s),s},r);t&&(e[t]=n)}function Fv(e,t){if(!Array.isArray(e)){t[e]=!0;return}var i=e.shift();if(i==="PARAMETER"&&(i=e.shift()),e.length===1){if(Array.isArray(e[0])){t[i]={},Fv(e[0],t[i]);return}t[i]=e[0];return}if(!e.length){t[i]=!0;return}if(i==="TOWGS84"){t[i]=e;return}if(i==="AXIS"){i in t||(t[i]=[]),t[i].push(e);return}Array.isArray(i)||(t[i]={});var r;switch(i){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[i]={name:e[0].toLowerCase(),convert:e[1]},e.length===3&&Fv(e[2],t[i]);return;case"SPHEROID":case"ELLIPSOID":t[i]={name:e[0],a:e[1],rf:e[2]},e.length===4&&Fv(e[3],t[i]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":e[0]=["name",e[0]],zH(t,i,e);return;default:for(r=-1;++r<e.length;)if(!Array.isArray(e[r]))return Fv(e,t[i]);return zH(t,i,e)}}var W9e=.017453292519943295;function J9e(e,t){var i=t[0],r=t[1];!(i in e)&&r in e&&(e[i]=e[r],t.length===3&&(e[i]=t[2](e[i])))}function td(e){return e*W9e}function Z9e(e){if(e.type==="GEOGCS"?e.projName="longlat":e.type==="LOCAL_CS"?(e.projName="identity",e.local=!0):typeof e.PROJECTION=="object"?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var t="",i=0,r=e.AXIS.length;i<r;++i){var n=[e.AXIS[i][0].toLowerCase(),e.AXIS[i][1].toLowerCase()];n[0].indexOf("north")!==-1||(n[0]==="y"||n[0]==="lat")&&n[1]==="north"?t+="n":n[0].indexOf("south")!==-1||(n[0]==="y"||n[0]==="lat")&&n[1]==="south"?t+="s":n[0].indexOf("east")!==-1||(n[0]==="x"||n[0]==="lon")&&n[1]==="east"?t+="e":(n[0].indexOf("west")!==-1||(n[0]==="x"||n[0]==="lon")&&n[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(e.axis=t)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.UNIT.convert&&(e.type==="GEOGCS"?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var s=e.GEOGCS;e.type==="GEOGCS"&&(s=e),s&&(s.DATUM?e.datumCode=s.DATUM.name.toLowerCase():e.datumCode=s.name.toLowerCase(),e.datumCode.slice(0,2)==="d_"&&(e.datumCode=e.datumCode.slice(2)),(e.datumCode==="new_zealand_geodetic_datum_1949"||e.datumCode==="new_zealand_1949")&&(e.datumCode="nzgd49"),(e.datumCode==="wgs_1984"||e.datumCode==="world_geodetic_system_1984")&&(e.PROJECTION==="Mercator_Auxiliary_Sphere"&&(e.sphere=!0),e.datumCode="wgs84"),e.datumCode.slice(-6)==="_ferro"&&(e.datumCode=e.datumCode.slice(0,-6)),e.datumCode.slice(-8)==="_jakarta"&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(e.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),e.ellps.toLowerCase().slice(0,13)==="international"&&(e.ellps="intl"),e.a=s.DATUM.SPHEROID.a,e.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(e.datum_params=s.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),e.datumCode==="ch1903+"&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a);function o(u){var c=e.to_meter||1;return u*c}var a=function(u){return J9e(e,u)},l=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",td],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",td],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",td],["lat0","latitude_of_origin",td],["lat0","standard_parallel_1",td],["lat1","standard_parallel_1",td],["lat2","standard_parallel_2",td],["azimuth","Azimuth"],["alpha","azimuth",td],["srsCode","name"]];l.forEach(a),!e.long0&&e.longc&&(e.projName==="Albers_Conic_Equal_Area"||e.projName==="Lambert_Azimuthal_Equal_Area")&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&(e.projName==="Stereographic_South_Pole"||e.projName==="Polar Stereographic (variant B)")&&(e.lat0=td(e.lat1>0?90:-90),e.lat_ts=e.lat1)}function rle(e){var t=H9e(e),i=t.shift(),r=t.shift();t.unshift(["name",r]),t.unshift(["type",i]);var n={};return Fv(t,n),Z9e(n),n}function jo(e){var t=this;if(arguments.length===2){var i=arguments[1];typeof i=="string"?i.charAt(0)==="+"?jo[e]=P6(arguments[1]):jo[e]=rle(arguments[1]):jo[e]=i}else if(arguments.length===1){if(Array.isArray(e))return e.map(function(r){Array.isArray(r)?jo.apply(t,r):jo(r)});if(typeof e=="string"){if(e in jo)return jo[e]}else"EPSG"in e?jo["EPSG:"+e.EPSG]=e:"ESRI"in e?jo["ESRI:"+e.ESRI]=e:"IAU2000"in e?jo["IAU2000:"+e.IAU2000]=e:console.log(e);return}}N9e(jo);function Y9e(e){return typeof e=="string"}function K9e(e){return e in jo}var Q9e=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function X9e(e){return Q9e.some(function(t){return e.indexOf(t)>-1})}var e7e=["3857","900913","3785","102113"];function t7e(e){var t=vm(e,"authority");if(t){var i=vm(t,"epsg");return i&&e7e.indexOf(i)>-1}}function i7e(e){var t=vm(e,"extension");if(t)return vm(t,"proj4")}function r7e(e){return e[0]==="+"}function n7e(e){if(Y9e(e)){if(K9e(e))return jo[e];if(X9e(e)){var t=rle(e);if(t7e(t))return jo["EPSG:3857"];var i=i7e(t);return i?P6(i):t}if(r7e(e))return P6(e)}else return e}function GH(e,t){e=e||{};var i,r;if(!t)return e;for(r in t)i=t[r],i!==void 0&&(e[r]=i);return e}function Lh(e,t,i){var r=e*t;return i/Math.sqrt(1-r*r)}function R3(e){return e<0?-1:1}function Nt(e){return Math.abs(e)<=An?e:e-R3(e)*MS}function cc(e,t,i){var r=e*i,n=.5*e;return r=Math.pow((1-r)/(1+r),n),Math.tan(.5*(mt-t))/r}function TS(e,t){for(var i=.5*e,r,n,s=mt-2*Math.atan(t),o=0;o<=15;o++)if(r=e*Math.sin(s),n=mt-2*Math.atan(t*Math.pow((1-r)/(1+r),i))-s,s+=n,Math.abs(n)<=1e-10)return s;return-9999}function s7e(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Lh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function o7e(e){var t=e.x,i=e.y;if(i*gh>90&&i*gh<-90&&t*gh>180&&t*gh<-180)return null;var r,n;if(Math.abs(Math.abs(i)-mt)<=Tt)return null;if(this.sphere)r=this.x0+this.a*this.k0*Nt(t-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(rr+.5*i));else{var s=Math.sin(i),o=cc(this.e,i,s);r=this.x0+this.a*this.k0*Nt(t-this.long0),n=this.y0-this.a*this.k0*Math.log(o)}return e.x=r,e.y=n,e}function a7e(e){var t=e.x-this.x0,i=e.y-this.y0,r,n;if(this.sphere)n=mt-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var s=Math.exp(-i/(this.a*this.k0));if(n=TS(this.e,s),n===-9999)return null}return r=Nt(this.long0+t/(this.a*this.k0)),e.x=r,e.y=n,e}var l7e=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const u7e={init:s7e,forward:o7e,inverse:a7e,names:l7e};function c7e(){}function qH(e){return e}var h7e=["longlat","identity"];const d7e={init:c7e,forward:qH,inverse:qH,names:h7e};var p7e=[u7e,d7e],AT={},n5=[];function nle(e,t){var i=n5.length;return e.names?(n5[i]=e,e.names.forEach(function(r){AT[r.toLowerCase()]=i}),this):(console.log(t),!0)}function f7e(e){if(!e)return!1;var t=e.toLowerCase();if(typeof AT[t]<"u"&&n5[AT[t]])return n5[AT[t]]}function m7e(){p7e.forEach(nle)}const y7e={start:m7e,add:nle,get:f7e};var mi={};mi.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};mi.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};mi.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};mi.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};mi.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};mi.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};mi.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};mi.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};mi.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};mi.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};mi.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};mi.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};mi.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};mi.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};mi.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};mi.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};mi.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};mi.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};mi.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};mi.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};mi.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};mi.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};mi.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};mi.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};mi.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};mi.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};mi.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};mi.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};mi.hough={a:6378270,rf:297,ellipseName:"Hough"};mi.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};mi.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};mi.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};mi.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};mi.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};mi.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};mi.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};mi.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};mi.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};mi.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};mi.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};mi.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var g7e=mi.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};mi.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function v7e(e,t,i,r){var n=e*e,s=t*t,o=(n-s)/n,a=0;r?(e*=1-o*(j9e+o*(U9e+o*V9e)),n=e*e,o=0):a=Math.sqrt(o);var l=(n-s)/s;return{es:o,e:a,ep2:l}}function b7e(e,t,i,r,n){if(!e){var s=vm(mi,r);s||(s=g7e),e=s.a,t=s.b,i=s.rf}return i&&!t&&(t=(1-1/i)*e),(i===0||Math.abs(e-t)<Tt)&&(n=!0,t=e),{a:e,b:t,rf:i,sphere:n}}var Os={};Os.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};Os.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};Os.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};Os.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};Os.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};Os.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};Os.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};Os.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};Os.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};Os.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};Os.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};Os.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};Os.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};Os.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};Os.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};Os.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};Os.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function w7e(e,t,i,r,n,s,o){var a={};return e===void 0||e==="none"?a.datum_type=L6:a.datum_type=F9e,t&&(a.datum_params=t.map(parseFloat),(a.datum_params[0]!==0||a.datum_params[1]!==0||a.datum_params[2]!==0)&&(a.datum_type=O0),a.datum_params.length>3&&(a.datum_params[3]!==0||a.datum_params[4]!==0||a.datum_params[5]!==0||a.datum_params[6]!==0)&&(a.datum_type=R0,a.datum_params[3]*=Ix,a.datum_params[4]*=Ix,a.datum_params[5]*=Ix,a.datum_params[6]=a.datum_params[6]/1e6+1)),o&&(a.datum_type=ub,a.grids=o),a.a=i,a.b=r,a.es=n,a.ep2=s,a}var sle={};function _7e(e,t){var i=new DataView(t),r=E7e(i),n=M7e(i,r);n.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var s=I7e(i,n,r),o={header:n,subgrids:s};return sle[e]=o,o}function x7e(e){if(e===void 0)return null;var t=e.split(",");return t.map(S7e)}function S7e(e){if(e.length===0)return null;var t=e[0]==="@";return t&&(e=e.slice(1)),e==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:e,mandatory:!t,grid:sle[e]||null,isNull:!1}}function Dv(e){return e/3600*Math.PI/180}function E7e(e){var t=e.getInt32(8,!1);return t===11?!1:(t=e.getInt32(8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function M7e(e,t){return{nFields:e.getInt32(8,t),nSubgridFields:e.getInt32(24,t),nSubgrids:e.getInt32(40,t),shiftType:N6(e,56,56+8).trim(),fromSemiMajorAxis:e.getFloat64(120,t),fromSemiMinorAxis:e.getFloat64(136,t),toSemiMajorAxis:e.getFloat64(152,t),toSemiMinorAxis:e.getFloat64(168,t)}}function N6(e,t,i){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(t,i)))}function I7e(e,t,i){for(var r=176,n=[],s=0;s<t.nSubgrids;s++){var o=A7e(e,r,i),a=C7e(e,r,o,i),l=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),u=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);n.push({ll:[Dv(o.lowerLongitude),Dv(o.lowerLatitude)],del:[Dv(o.longitudeInterval),Dv(o.latitudeInterval)],lim:[l,u],count:o.gridNodeCount,cvs:T7e(a)})}return n}function T7e(e){return e.map(function(t){return[Dv(t.longitudeShift),Dv(t.latitudeShift)]})}function A7e(e,t,i){return{name:N6(e,t+8,t+16).trim(),parent:N6(e,t+24,t+24+8).trim(),lowerLatitude:e.getFloat64(t+72,i),upperLatitude:e.getFloat64(t+88,i),lowerLongitude:e.getFloat64(t+104,i),upperLongitude:e.getFloat64(t+120,i),latitudeInterval:e.getFloat64(t+136,i),longitudeInterval:e.getFloat64(t+152,i),gridNodeCount:e.getInt32(t+168,i)}}function C7e(e,t,i,r){for(var n=t+176,s=16,o=[],a=0;a<i.gridNodeCount;a++){var l={latitudeShift:e.getFloat32(n+a*s,r),longitudeShift:e.getFloat32(n+a*s+4,r),latitudeAccuracy:e.getFloat32(n+a*s+8,r),longitudeAccuracy:e.getFloat32(n+a*s+12,r)};o.push(l)}return o}function Eh(e,t){if(!(this instanceof Eh))return new Eh(e);t=t||function(u){if(u)throw u};var i=n7e(e);if(typeof i!="object"){t(e);return}var r=Eh.projections.get(i.projName);if(!r){t(e);return}if(i.datumCode&&i.datumCode!=="none"){var n=vm(Os,i.datumCode);n&&(i.datum_params=i.datum_params||(n.towgs84?n.towgs84.split(","):null),i.ellps=n.ellipse,i.datumName=n.datumName?n.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84",i.lat1=i.lat1||i.lat0;var s=b7e(i.a,i.b,i.rf,i.ellps,i.sphere),o=v7e(s.a,s.b,s.rf,i.R_A),a=x7e(i.nadgrids),l=i.datum||w7e(i.datumCode,i.datum_params,s.a,s.b,o.es,o.ep2,a);GH(this,i),GH(this,r),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=l,this.init(),t(null,this)}Eh.projections=y7e;Eh.projections.start();function $7e(e,t){return e.datum_type!==t.datum_type||e.a!==t.a||Math.abs(e.es-t.es)>5e-11?!1:e.datum_type===O0?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type===R0?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]:!0}function ole(e,t,i){var r=e.x,n=e.y,s=e.z?e.z:0,o,a,l,u;if(n<-mt&&n>-1.001*mt)n=-mt;else if(n>mt&&n<1.001*mt)n=mt;else{if(n<-mt)return{x:-1/0,y:-1/0,z:e.z};if(n>mt)return{x:1/0,y:1/0,z:e.z}}return r>Math.PI&&(r-=2*Math.PI),a=Math.sin(n),u=Math.cos(n),l=a*a,o=i/Math.sqrt(1-t*l),{x:(o+s)*u*Math.cos(r),y:(o+s)*u*Math.sin(r),z:(o*(1-t)+s)*a}}function ale(e,t,i,r){var n=1e-12,s=n*n,o=30,a,l,u,c,d,f,m,g,v,b,x,S,T,_=e.x,M=e.y,I=e.z?e.z:0,$,L,B;if(a=Math.sqrt(_*_+M*M),l=Math.sqrt(_*_+M*M+I*I),a/i<n){if($=0,l/i<n)return L=mt,B=-r,{x:e.x,y:e.y,z:e.z}}else $=Math.atan2(M,_);u=I/l,c=a/l,d=1/Math.sqrt(1-t*(2-t)*c*c),g=c*(1-t)*d,v=u*d,T=0;do T++,m=i/Math.sqrt(1-t*v*v),B=a*g+I*v-m*(1-t*v*v),f=t*m/(m+B),d=1/Math.sqrt(1-f*(2-f)*c*c),b=c*(1-f)*d,x=u*d,S=x*g-b*v,g=b,v=x;while(S*S>s&&T<o);return L=Math.atan(x/Math.abs(b)),{x:$,y:L,z:B}}function O7e(e,t,i){if(t===O0)return{x:e.x+i[0],y:e.y+i[1],z:e.z+i[2]};if(t===R0){var r=i[0],n=i[1],s=i[2],o=i[3],a=i[4],l=i[5],u=i[6];return{x:u*(e.x-l*e.y+a*e.z)+r,y:u*(l*e.x+e.y-o*e.z)+n,z:u*(-a*e.x+o*e.y+e.z)+s}}}function R7e(e,t,i){if(t===O0)return{x:e.x-i[0],y:e.y-i[1],z:e.z-i[2]};if(t===R0){var r=i[0],n=i[1],s=i[2],o=i[3],a=i[4],l=i[5],u=i[6],c=(e.x-r)/u,d=(e.y-n)/u,f=(e.z-s)/u;return{x:c+l*d-a*f,y:-l*c+d+o*f,z:a*c-o*d+f}}}function SM(e){return e===O0||e===R0}function k7e(e,t,i){if($7e(e,t)||e.datum_type===L6||t.datum_type===L6)return i;var r=e.a,n=e.es;if(e.datum_type===ub){var s=HH(e,!1,i);if(s!==0)return;r=UH,n=VH}var o=t.a,a=t.b,l=t.es;if(t.datum_type===ub&&(o=UH,a=D9e,l=VH),n===l&&r===o&&!SM(e.datum_type)&&!SM(t.datum_type))return i;if(i=ole(i,n,r),SM(e.datum_type)&&(i=O7e(i,e.datum_type,e.datum_params)),SM(t.datum_type)&&(i=R7e(i,t.datum_type,t.datum_params)),i=ale(i,l,o,a),t.datum_type===ub){var u=HH(t,!0,i);if(u!==0)return}return i}function HH(e,t,i){if(e.grids===null||e.grids.length===0)return console.log("Grid shift grids not found"),-1;for(var r={x:-i.x,y:i.y},n={x:Number.NaN,y:Number.NaN},s=[],o=0;o<e.grids.length;o++){var a=e.grids[o];if(s.push(a.name),a.isNull){n=r;break}if(a.mandatory,a.grid===null){if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1;continue}var l=a.grid.subgrids[0],u=(Math.abs(l.del[1])+Math.abs(l.del[0]))/1e4,c=l.ll[0]-u,d=l.ll[1]-u,f=l.ll[0]+(l.lim[0]-1)*l.del[0]+u,m=l.ll[1]+(l.lim[1]-1)*l.del[1]+u;if(!(d>r.y||c>r.x||m<r.y||f<r.x)&&(n=L7e(r,t,l),!isNaN(n.x)))break}return isNaN(n.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*gh+" "+r.y*gh+" tried: '"+s+"'"),-1):(i.x=-n.x,i.y=n.y,0)}function L7e(e,t,i){var r={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return r;var n={x:e.x,y:e.y};n.x-=i.ll[0],n.y-=i.ll[1],n.x=Nt(n.x-Math.PI)+Math.PI;var s=WH(n,i);if(t){if(isNaN(s.x))return r;s.x=n.x-s.x,s.y=n.y-s.y;var o=9,a=1e-12,l,u;do{if(u=WH(s,i),isNaN(u.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:n.x-(u.x+s.x),y:n.y-(u.y+s.y)},s.x+=l.x,s.y+=l.y}while(o--&&Math.abs(l.x)>a&&Math.abs(l.y)>a);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=Nt(s.x+i.ll[0]),r.y=s.y+i.ll[1]}else isNaN(s.x)||(r.x=e.x+s.x,r.y=e.y+s.y);return r}function WH(e,t){var i={x:e.x/t.del[0],y:e.y/t.del[1]},r={x:Math.floor(i.x),y:Math.floor(i.y)},n={x:i.x-1*r.x,y:i.y-1*r.y},s={x:Number.NaN,y:Number.NaN},o;if(r.x<0||r.x>=t.lim[0]||r.y<0||r.y>=t.lim[1])return s;o=r.y*t.lim[0]+r.x;var a={x:t.cvs[o][0],y:t.cvs[o][1]};o++;var l={x:t.cvs[o][0],y:t.cvs[o][1]};o+=t.lim[0];var u={x:t.cvs[o][0],y:t.cvs[o][1]};o--;var c={x:t.cvs[o][0],y:t.cvs[o][1]},d=n.x*n.y,f=n.x*(1-n.y),m=(1-n.x)*(1-n.y),g=(1-n.x)*n.y;return s.x=m*a.x+f*l.x+g*c.x+d*u.x,s.y=m*a.y+f*l.y+g*c.y+d*u.y,s}function JH(e,t,i){var r=i.x,n=i.y,s=i.z||0,o,a,l,u={};for(l=0;l<3;l++)if(!(t&&l===2&&i.z===void 0))switch(l===0?(o=r,"ew".indexOf(e.axis[l])!==-1?a="x":a="y"):l===1?(o=n,"ns".indexOf(e.axis[l])!==-1?a="y":a="x"):(o=s,a="z"),e.axis[l]){case"e":u[a]=o;break;case"w":u[a]=-o;break;case"n":u[a]=o;break;case"s":u[a]=-o;break;case"u":i[a]!==void 0&&(u.z=o);break;case"d":i[a]!==void 0&&(u.z=-o);break;default:return null}return u}function lle(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}function P7e(e){ZH(e.x),ZH(e.y)}function ZH(e){if(typeof Number.isFinite=="function"){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if(typeof e!="number"||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function N7e(e,t){return(e.datum.datum_type===O0||e.datum.datum_type===R0||e.datum.datum_type===ub)&&t.datumCode!=="WGS84"||(t.datum.datum_type===O0||t.datum.datum_type===R0||t.datum.datum_type===ub)&&e.datumCode!=="WGS84"}function s5(e,t,i,r){var n;Array.isArray(i)?i=lle(i):i={x:i.x,y:i.y,z:i.z,m:i.m};var s=i.z!==void 0;if(P7e(i),e.datum&&t.datum&&N7e(e,t)&&(n=new Eh("WGS84"),i=s5(e,n,i,r),e=n),r&&e.axis!=="enu"&&(i=JH(e,!1,i)),e.projName==="longlat")i={x:i.x*js,y:i.y*js,z:i.z||0};else if(e.to_meter&&(i={x:i.x*e.to_meter,y:i.y*e.to_meter,z:i.z||0}),i=e.inverse(i),!i)return;if(e.from_greenwich&&(i.x+=e.from_greenwich),i=k7e(e.datum,t.datum,i),!!i)return t.from_greenwich&&(i={x:i.x-t.from_greenwich,y:i.y,z:i.z||0}),t.projName==="longlat"?i={x:i.x*gh,y:i.y*gh,z:i.z||0}:(i=t.forward(i),t.to_meter&&(i={x:i.x/t.to_meter,y:i.y/t.to_meter,z:i.z||0})),r&&t.axis!=="enu"?JH(t,!0,i):(s||delete i.z,i)}var YH=Eh("WGS84");function rR(e,t,i,r){var n,s,o;return Array.isArray(i)?(n=s5(e,t,i,r)||{x:NaN,y:NaN},i.length>2?typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof n.z=="number"?[n.x,n.y,n.z].concat(i.splice(3)):[n.x,n.y,i[2]].concat(i.splice(3)):[n.x,n.y].concat(i.splice(2)):[n.x,n.y]):(s=s5(e,t,i,r),o=Object.keys(i),o.length===2||o.forEach(function(a){if(typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(a==="x"||a==="y"||a==="z")return}else if(a==="x"||a==="y")return;s[a]=i[a]}),s)}function KH(e){return e instanceof Eh?e:e.oProj?e.oProj:Eh(e)}function br(e,t,i){e=KH(e);var r=!1,n;return typeof t>"u"?(t=e,e=YH,r=!0):(typeof t.x<"u"||Array.isArray(t))&&(i=t,t=e,e=YH,r=!0),t=KH(t),i?rR(e,t,i):(n={forward:function(s,o){return rR(e,t,s,o)},inverse:function(s,o){return rR(t,e,s,o)}},r&&(n.oProj=t),n)}var QH=6,ule="AJSAJS",cle="AFAFAF",jv=65,la=73,Zl=79,z2=86,G2=90;const F7e={forward:hle,inverse:D7e,toPoint:dle};function hle(e,t){return t=t||5,V7e(j7e({lat:e[1],lon:e[0]}),t)}function D7e(e){var t=B9(fle(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function dle(e){var t=B9(fle(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function nR(e){return e*(Math.PI/180)}function XH(e){return 180*(e/Math.PI)}function j7e(e){var t=e.lat,i=e.lon,r=6378137,n=.00669438,s=.9996,o,a,l,u,c,d,f,m=nR(t),g=nR(i),v,b;b=Math.floor((i+180)/6)+1,i===180&&(b=60),t>=56&&t<64&&i>=3&&i<12&&(b=32),t>=72&&t<84&&(i>=0&&i<9?b=31:i>=9&&i<21?b=33:i>=21&&i<33?b=35:i>=33&&i<42&&(b=37)),o=(b-1)*6-180+3,v=nR(o),a=n/(1-n),l=r/Math.sqrt(1-n*Math.sin(m)*Math.sin(m)),u=Math.tan(m)*Math.tan(m),c=a*Math.cos(m)*Math.cos(m),d=Math.cos(m)*(g-v),f=r*((1-n/4-3*n*n/64-5*n*n*n/256)*m-(3*n/8+3*n*n/32+45*n*n*n/1024)*Math.sin(2*m)+(15*n*n/256+45*n*n*n/1024)*Math.sin(4*m)-35*n*n*n/3072*Math.sin(6*m));var x=s*l*(d+(1-u+c)*d*d*d/6+(5-18*u+u*u+72*c-58*a)*d*d*d*d*d/120)+5e5,S=s*(f+l*Math.tan(m)*(d*d/2+(5-u+9*c+4*c*c)*d*d*d*d/24+(61-58*u+u*u+600*c-330*a)*d*d*d*d*d*d/720));return t<0&&(S+=1e7),{northing:Math.round(S),easting:Math.round(x),zoneNumber:b,zoneLetter:U7e(t)}}function B9(e){var t=e.northing,i=e.easting,r=e.zoneLetter,n=e.zoneNumber;if(n<0||n>60)return null;var s=.9996,o=6378137,a=.00669438,l,u=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),c,d,f,m,g,v,b,x,S,T=i-5e5,_=t;r<"N"&&(_-=1e7),b=(n-1)*6-180+3,l=a/(1-a),v=_/s,x=v/(o*(1-a/4-3*a*a/64-5*a*a*a/256)),S=x+(3*u/2-27*u*u*u/32)*Math.sin(2*x)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*x)+151*u*u*u/96*Math.sin(6*x),c=o/Math.sqrt(1-a*Math.sin(S)*Math.sin(S)),d=Math.tan(S)*Math.tan(S),f=l*Math.cos(S)*Math.cos(S),m=o*(1-a)/Math.pow(1-a*Math.sin(S)*Math.sin(S),1.5),g=T/(c*s);var M=S-c*Math.tan(S)/m*(g*g/2-(5+3*d+10*f-4*f*f-9*l)*g*g*g*g/24+(61+90*d+298*f+45*d*d-252*l-3*f*f)*g*g*g*g*g*g/720);M=XH(M);var I=(g-(1+2*d+f)*g*g*g/6+(5-2*f+28*d-3*f*f+8*l+24*d*d)*g*g*g*g*g/120)/Math.cos(S);I=b+XH(I);var $;if(e.accuracy){var L=B9({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});$={top:L.lat,right:L.lon,bottom:M,left:I}}else $={lat:M,lon:I};return $}function U7e(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function V7e(e,t){var i="00000"+e.easting,r="00000"+e.northing;return e.zoneNumber+e.zoneLetter+B7e(e.easting,e.northing,e.zoneNumber)+i.substr(i.length-5,t)+r.substr(r.length-5,t)}function B7e(e,t,i){var r=ple(i),n=Math.floor(e/1e5),s=Math.floor(t/1e5)%20;return z7e(n,s,r)}function ple(e){var t=e%QH;return t===0&&(t=QH),t}function z7e(e,t,i){var r=i-1,n=ule.charCodeAt(r),s=cle.charCodeAt(r),o=n+e-1,a=s+t,l=!1;o>G2&&(o=o-G2+jv-1,l=!0),(o===la||n<la&&o>la||(o>la||n<la)&&l)&&o++,(o===Zl||n<Zl&&o>Zl||(o>Zl||n<Zl)&&l)&&(o++,o===la&&o++),o>G2&&(o=o-G2+jv-1),a>z2?(a=a-z2+jv-1,l=!0):l=!1,(a===la||s<la&&a>la||(a>la||s<la)&&l)&&a++,(a===Zl||s<Zl&&a>Zl||(a>Zl||s<Zl)&&l)&&(a++,a===la&&a++),a>z2&&(a=a-z2+jv-1);var u=String.fromCharCode(o)+String.fromCharCode(a);return u}function fle(e){if(e&&e.length===0)throw"MGRSPoint coverting from nothing";for(var t=e.length,i=null,r="",n,s=0;!/[A-Z]/.test(n=e.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+e;r+=n,s++}var o=parseInt(r,10);if(s===0||s+3>t)throw"MGRSPoint bad conversion from: "+e;var a=e.charAt(s++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+e;i=e.substring(s,s+=2);for(var l=ple(o),u=G7e(i.charAt(0),l),c=q7e(i.charAt(1),l);c<H7e(a);)c+=2e6;var d=t-s;if(d%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+e;var f=d/2,m=0,g=0,v,b,x,S,T;return f>0&&(v=1e5/Math.pow(10,f),b=e.substring(s,s+f),m=parseFloat(b)*v,x=e.substring(s+f),g=parseFloat(x)*v),S=m+u,T=g+c,{easting:S,northing:T,zoneLetter:a,zoneNumber:o,accuracy:v}}function G7e(e,t){for(var i=ule.charCodeAt(t-1),r=1e5,n=!1;i!==e.charCodeAt(0);){if(i++,i===la&&i++,i===Zl&&i++,i>G2){if(n)throw"Bad character: "+e;i=jv,n=!0}r+=1e5}return r}function q7e(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var i=cle.charCodeAt(t-1),r=0,n=!1;i!==e.charCodeAt(0);){if(i++,i===la&&i++,i===Zl&&i++,i>z2){if(n)throw"Bad character: "+e;i=jv,n=!0}r+=1e5}return r}function H7e(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function Vb(e,t,i){if(!(this instanceof Vb))return new Vb(e,t,i);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if(typeof e=="object")this.x=e.x,this.y=e.y,this.z=e.z||0;else if(typeof e=="string"&&typeof t>"u"){var r=e.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=e,this.y=t,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Vb.fromMGRS=function(e){return new Vb(dle(e))};Vb.prototype.toMGRS=function(e){return hle([this.x,this.y],e)};var W7e=1,J7e=.25,eW=.046875,tW=.01953125,iW=.01068115234375,Z7e=.75,Y7e=.46875,K7e=.013020833333333334,Q7e=.007120768229166667,X7e=.3645833333333333,eje=.005696614583333333,tje=.3076171875;function mle(e){var t=[];t[0]=W7e-e*(J7e+e*(eW+e*(tW+e*iW))),t[1]=e*(Z7e-e*(eW+e*(tW+e*iW)));var i=e*e;return t[2]=i*(Y7e-e*(K7e+e*Q7e)),i*=e,t[3]=i*(X7e-e*eje),t[4]=i*e*tje,t}function J4(e,t,i,r){return i*=t,t*=t,r[0]*e-i*(r[1]+t*(r[2]+t*(r[3]+t*r[4])))}var ije=20;function yle(e,t,i){for(var r=1/(1-t),n=e,s=ije;s;--s){var o=Math.sin(n),a=1-t*o*o;if(a=(J4(n,o,Math.cos(n),i)-e)*(a*Math.sqrt(a))*r,n-=a,Math.abs(a)<Tt)return n}return n}function rje(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=mle(this.es),this.ml0=J4(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function nje(e){var t=e.x,i=e.y,r=Nt(t-this.long0),n,s,o,a=Math.sin(i),l=Math.cos(i);if(this.es){var c=l*r,d=Math.pow(c,2),f=this.ep2*Math.pow(l,2),m=Math.pow(f,2),g=Math.abs(l)>Tt?Math.tan(i):0,v=Math.pow(g,2),b=Math.pow(v,2);n=1-this.es*Math.pow(a,2),c=c/Math.sqrt(n);var x=J4(i,a,l,this.en);s=this.a*(this.k0*c*(1+d/6*(1-v+f+d/20*(5-18*v+b+14*f-58*v*f+d/42*(61+179*b-b*v-479*v)))))+this.x0,o=this.a*(this.k0*(x-this.ml0+a*r*c/2*(1+d/12*(5-v+9*f+4*m+d/30*(61+b-58*v+270*f-330*v*f+d/56*(1385+543*b-b*v-3111*v))))))+this.y0}else{var u=l*Math.sin(r);if(Math.abs(Math.abs(u)-1)<Tt)return 93;if(s=.5*this.a*this.k0*Math.log((1+u)/(1-u))+this.x0,o=l*Math.cos(r)/Math.sqrt(1-Math.pow(u,2)),u=Math.abs(o),u>=1){if(u-1>Tt)return 93;o=0}else o=Math.acos(o);i<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return e.x=s,e.y=o,e}function sje(e){var t,i,r,n,s=(e.x-this.x0)*(1/this.a),o=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+o/this.k0,i=yle(t,this.es,this.en),Math.abs(i)<mt){var d=Math.sin(i),f=Math.cos(i),m=Math.abs(f)>Tt?Math.tan(i):0,g=this.ep2*Math.pow(f,2),v=Math.pow(g,2),b=Math.pow(m,2),x=Math.pow(b,2);t=1-this.es*Math.pow(d,2);var S=s*Math.sqrt(t)/this.k0,T=Math.pow(S,2);t=t*m,r=i-t*T/(1-this.es)*.5*(1-T/12*(5+3*b-9*g*b+g-4*v-T/30*(61+90*b-252*g*b+45*x+46*g-T/56*(1385+3633*b+4095*x+1574*x*b)))),n=Nt(this.long0+S*(1-T/6*(1+2*b+g-T/20*(5+28*b+24*x+8*g*b+6*g-T/42*(61+662*b+1320*x+720*x*b))))/f)}else r=mt*R3(o),n=0;else{var a=Math.exp(s/this.k0),l=.5*(a-1/a),u=this.lat0+o/this.k0,c=Math.cos(u);t=Math.sqrt((1-Math.pow(c,2))/(1+Math.pow(l,2))),r=Math.asin(t),o<0&&(r=-r),l===0&&c===0?n=0:n=Nt(Math.atan2(l,c)+this.long0)}return e.x=n,e.y=r,e}var oje=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const CT={init:rje,forward:nje,inverse:sje,names:oje};function gle(e){var t=Math.exp(e);return t=(t-1/t)/2,t}function tc(e,t){e=Math.abs(e),t=Math.abs(t);var i=Math.max(e,t),r=Math.min(e,t)/(i||1);return i*Math.sqrt(1+Math.pow(r,2))}function aje(e){var t=1+e,i=t-1;return i===0?e:e*Math.log(t)/i}function lje(e){var t=Math.abs(e);return t=aje(t*(1+t/(tc(1,t)+1))),e<0?-t:t}function z9(e,t){for(var i=2*Math.cos(2*t),r=e.length-1,n=e[r],s=0,o;--r>=0;)o=-s+i*n+e[r],s=n,n=o;return t+o*Math.sin(2*t)}function uje(e,t){for(var i=2*Math.cos(t),r=e.length-1,n=e[r],s=0,o;--r>=0;)o=-s+i*n+e[r],s=n,n=o;return Math.sin(t)*o}function cje(e){var t=Math.exp(e);return t=(t+1/t)/2,t}function vle(e,t,i){for(var r=Math.sin(t),n=Math.cos(t),s=gle(i),o=cje(i),a=2*n*o,l=-2*r*s,u=e.length-1,c=e[u],d=0,f=0,m=0,g,v;--u>=0;)g=f,v=d,f=c,d=m,c=-g+a*f-l*d+e[u],m=-v+l*f+a*d;return a=r*o,l=n*s,[a*c-l*m,a*m+l*c]}function hje(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(CT.init.apply(this),this.forward=CT.forward,this.inverse=CT.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),i=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),i=i*t,this.cgb[1]=i*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=i*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),i=i*t,this.cgb[2]=i*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=i*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),i=i*t,this.cgb[3]=i*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=i*(1237/630+t*(-12/5+t*(-24832/14175))),i=i*t,this.cgb[4]=i*(4174/315+t*(-144838/6237)),this.cbg[4]=i*(-734/315+t*(109598/31185)),i=i*t,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=i*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=i*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),i=i*t,this.utg[2]=i*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=i*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),i=i*t,this.utg[3]=i*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=i*(49561/161280+t*(-179/168+t*(6601661/7257600))),i=i*t,this.utg[4]=i*(-4583/161280+t*(108847/3991680)),this.gtu[4]=i*(34729/80640+t*(-3418889/1995840)),i=i*t,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=i*(212378941/319334400);var r=z9(this.cbg,this.lat0);this.Zb=-this.Qn*(r+uje(this.gtu,2*r))}function dje(e){var t=Nt(e.x-this.long0),i=e.y;i=z9(this.cbg,i);var r=Math.sin(i),n=Math.cos(i),s=Math.sin(t),o=Math.cos(t);i=Math.atan2(r,o*n),t=Math.atan2(s*n,tc(r,n*o)),t=lje(Math.tan(t));var a=vle(this.gtu,2*i,2*t);i=i+a[0],t=t+a[1];var l,u;return Math.abs(t)<=2.623395162778?(l=this.a*(this.Qn*t)+this.x0,u=this.a*(this.Qn*i+this.Zb)+this.y0):(l=1/0,u=1/0),e.x=l,e.y=u,e}function pje(e){var t=(e.x-this.x0)*(1/this.a),i=(e.y-this.y0)*(1/this.a);i=(i-this.Zb)/this.Qn,t=t/this.Qn;var r,n;if(Math.abs(t)<=2.623395162778){var s=vle(this.utg,2*i,2*t);i=i+s[0],t=t+s[1],t=Math.atan(gle(t));var o=Math.sin(i),a=Math.cos(i),l=Math.sin(t),u=Math.cos(t);i=Math.atan2(o*u,tc(l,u*a)),t=Math.atan2(l,u*a),r=Nt(t+this.long0),n=z9(this.cgb,i)}else r=1/0,n=1/0;return e.x=r,e.y=n,e}var fje=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"];const $T={init:hje,forward:dje,inverse:pje,names:fje};function mje(e,t){if(e===void 0){if(e=Math.floor((Nt(t)+Math.PI)*30/Math.PI)+1,e<0)return 0;if(e>60)return 60}return e}var yje="etmerc";function gje(){var e=mje(this.zone,this.long0);if(e===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*js,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,$T.init.apply(this),this.forward=$T.forward,this.inverse=$T.inverse}var vje=["Universal Transverse Mercator System","utm"];const bje={init:gje,names:vje,dependsOn:yje};function G9(e,t){return Math.pow((1-e)/(1+e),t)}var wje=20;function _je(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+rr)/(Math.pow(Math.tan(.5*this.lat0+rr),this.C)*G9(this.e*e,this.ratexp))}function xje(e){var t=e.x,i=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+rr),this.C)*G9(this.e*Math.sin(i),this.ratexp))-mt,e.x=this.C*t,e}function Sje(e){for(var t=1e-14,i=e.x/this.C,r=e.y,n=Math.pow(Math.tan(.5*r+rr)/this.K,1/this.C),s=wje;s>0&&(r=2*Math.atan(n*G9(this.e*Math.sin(e.y),-.5*this.e))-mt,!(Math.abs(r-e.y)<t));--s)e.y=r;return s?(e.x=i,e.y=r,e):null}var Eje=["gauss"];const q9={init:_je,forward:xje,inverse:Sje,names:Eje};function Mje(){q9.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function Ije(e){var t,i,r,n;return e.x=Nt(e.x-this.long0),q9.forward.apply(this,[e]),t=Math.sin(e.y),i=Math.cos(e.y),r=Math.cos(e.x),n=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*i*r),e.x=n*i*Math.sin(e.x),e.y=n*(this.cosc0*t-this.sinc0*i*r),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function Tje(e){var t,i,r,n,s;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,s=Math.sqrt(e.x*e.x+e.y*e.y)){var o=2*Math.atan2(s,this.R2);t=Math.sin(o),i=Math.cos(o),n=Math.asin(i*this.sinc0+e.y*t*this.cosc0/s),r=Math.atan2(e.x*t,s*this.cosc0*i-e.y*this.sinc0*t)}else n=this.phic0,r=0;return e.x=r,e.y=n,q9.inverse.apply(this,[e]),e.x=Nt(e.x+this.long0),e}var Aje=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const Cje={init:Mje,forward:Ije,inverse:Tje,names:Aje};function $je(e,t,i){return t*=i,Math.tan(.5*(mt+e))*Math.pow((1-t)/(1+t),.5*i)}function Oje(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Tt&&(this.k0=.5*(1+R3(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Tt&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Tt&&(this.k0=.5*this.cons*Lh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/cc(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Lh(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-mt,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function Rje(e){var t=e.x,i=e.y,r=Math.sin(i),n=Math.cos(i),s,o,a,l,u,c,d=Nt(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=Tt&&Math.abs(i+this.lat0)<=Tt?(e.x=NaN,e.y=NaN,e):this.sphere?(s=2*this.k0/(1+this.sinlat0*r+this.coslat0*n*Math.cos(d)),e.x=this.a*s*n*Math.sin(d)+this.x0,e.y=this.a*s*(this.coslat0*r-this.sinlat0*n*Math.cos(d))+this.y0,e):(o=2*Math.atan(this.ssfn_(i,r,this.e))-mt,l=Math.cos(o),a=Math.sin(o),Math.abs(this.coslat0)<=Tt?(u=cc(this.e,i*this.con,this.con*r),c=2*this.a*this.k0*u/this.cons,e.x=this.x0+c*Math.sin(t-this.long0),e.y=this.y0-this.con*c*Math.cos(t-this.long0),e):(Math.abs(this.sinlat0)<Tt?(s=2*this.a*this.k0/(1+l*Math.cos(d)),e.y=s*a):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*l*Math.cos(d))),e.y=s*(this.cosX0*a-this.sinX0*l*Math.cos(d))+this.y0),e.x=s*l*Math.sin(d)+this.x0,e))}function kje(e){e.x-=this.x0,e.y-=this.y0;var t,i,r,n,s,o=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return t=this.long0,i=this.lat0,o<=Tt?(e.x=t,e.y=i,e):(i=Math.asin(Math.cos(a)*this.sinlat0+e.y*Math.sin(a)*this.coslat0/o),Math.abs(this.coslat0)<Tt?this.lat0>0?t=Nt(this.long0+Math.atan2(e.x,-1*e.y)):t=Nt(this.long0+Math.atan2(e.x,e.y)):t=Nt(this.long0+Math.atan2(e.x*Math.sin(a),o*this.coslat0*Math.cos(a)-e.y*this.sinlat0*Math.sin(a))),e.x=t,e.y=i,e)}else if(Math.abs(this.coslat0)<=Tt){if(o<=Tt)return i=this.lat0,t=this.long0,e.x=t,e.y=i,e;e.x*=this.con,e.y*=this.con,r=o*this.cons/(2*this.a*this.k0),i=this.con*TS(this.e,r),t=this.con*Nt(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else n=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,o<=Tt?s=this.X0:(s=Math.asin(Math.cos(n)*this.sinX0+e.y*Math.sin(n)*this.cosX0/o),t=Nt(this.long0+Math.atan2(e.x*Math.sin(n),o*this.cosX0*Math.cos(n)-e.y*this.sinX0*Math.sin(n)))),i=-1*TS(this.e,Math.tan(.5*(mt+s)));return e.x=t,e.y=i,e}var Lje=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"];const Pje={init:Oje,forward:Rje,inverse:kje,names:Lje,ssfn_:$je};function Nje(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),i=this.a,r=this.rf,n=1/r,s=2*n-Math.pow(n,2),o=this.e=Math.sqrt(s);this.R=this.k0*i*Math.sqrt(1-s)/(1-s*Math.pow(t,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+e/2)),u=Math.log((1+o*t)/(1-o*t));this.K=a-this.alpha*l+this.alpha*o/2*u}function Fje(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),r=-this.alpha*(t+i)+this.K,n=2*(Math.atan(Math.exp(r))-Math.PI/4),s=this.alpha*(e.x-this.lambda0),o=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(n)+Math.cos(this.b0)*Math.cos(s))),a=Math.asin(Math.cos(this.b0)*Math.sin(n)-Math.sin(this.b0)*Math.cos(n)*Math.cos(s));return e.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,e.x=this.R*o+this.x0,e}function Dje(e){for(var t=e.x-this.x0,i=e.y-this.y0,r=t/this.R,n=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(n)+Math.sin(this.b0)*Math.cos(n)*Math.cos(r)),o=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(n))),a=this.lambda0+o/this.alpha,l=0,u=s,c=-1e3,d=0;Math.abs(u-c)>1e-7;){if(++d>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return e.x=a,e.y=u,e}var jje=["somerc"];const Uje={init:Nje,forward:Fje,inverse:Dje,names:jje};var Ev=1e-7;function Vje(e){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],i=typeof e.PROJECTION=="object"?Object.keys(e.PROJECTION)[0]:e.PROJECTION;return"no_uoff"in e||"no_off"in e||t.indexOf(i)!==-1}function Bje(){var e,t,i,r,n,s,o,a,l,u,c=0,d,f=0,m=0,g=0,v=0,b=0,x=0;this.no_off=Vje(this),this.no_rot="no_rot"in this;var S=!1;"alpha"in this&&(S=!0);var T=!1;if("rectified_grid_angle"in this&&(T=!0),S&&(x=this.alpha),T&&(c=this.rectified_grid_angle*js),S||T)f=this.longc;else if(m=this.long1,v=this.lat1,g=this.long2,b=this.lat2,Math.abs(v-b)<=Ev||(e=Math.abs(v))<=Ev||Math.abs(e-mt)<=Ev||Math.abs(Math.abs(this.lat0)-mt)<=Ev||Math.abs(Math.abs(b)-mt)<=Ev)throw new Error;var _=1-this.es;t=Math.sqrt(_),Math.abs(this.lat0)>Tt?(a=Math.sin(this.lat0),i=Math.cos(this.lat0),e=1-this.es*a*a,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/_),this.A=this.B*this.k0*t/e,r=this.B*t/(i*Math.sqrt(e)),n=r*r-1,n<=0?n=0:(n=Math.sqrt(n),this.lat0<0&&(n=-n)),this.E=n+=r,this.E*=Math.pow(cc(this.e,this.lat0,a),this.B)):(this.B=1/t,this.A=this.k0,this.E=r=n=1),S||T?(S?(d=Math.asin(Math.sin(x)/r),T||(c=x)):(d=c,x=Math.asin(r*Math.sin(d))),this.lam0=f-Math.asin(.5*(n-1/n)*Math.tan(d))/this.B):(s=Math.pow(cc(this.e,v,Math.sin(v)),this.B),o=Math.pow(cc(this.e,b,Math.sin(b)),this.B),n=this.E/s,l=(o-s)/(o+s),u=this.E*this.E,u=(u-o*s)/(u+o*s),e=m-g,e<-Math.pi?g-=MS:e>Math.pi&&(g+=MS),this.lam0=Nt(.5*(m+g)-Math.atan(u*Math.tan(.5*this.B*(m-g))/l)/this.B),d=Math.atan(2*Math.sin(this.B*Nt(m-this.lam0))/(n-1/n)),c=x=Math.asin(r*Math.sin(d))),this.singam=Math.sin(d),this.cosgam=Math.cos(d),this.sinrot=Math.sin(c),this.cosrot=Math.cos(c),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(x))),this.lat0<0&&(this.u_0=-this.u_0)),n=.5*d,this.v_pole_n=this.ArB*Math.log(Math.tan(rr-n)),this.v_pole_s=this.ArB*Math.log(Math.tan(rr+n))}function zje(e){var t={},i,r,n,s,o,a,l,u;if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-mt)>Tt){if(o=this.E/Math.pow(cc(this.e,e.y,Math.sin(e.y)),this.B),a=1/o,i=.5*(o-a),r=.5*(o+a),s=Math.sin(this.B*e.x),n=(i*this.singam-s*this.cosgam)/r,Math.abs(Math.abs(n)-1)<Tt)throw new Error;u=.5*this.ArB*Math.log((1-n)/(1+n)),a=Math.cos(this.B*e.x),Math.abs(a)<Ev?l=this.A*e.x:l=this.ArB*Math.atan2(i*this.cosgam+s*this.singam,a)}else u=e.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*e.y;return this.no_rot?(t.x=l,t.y=u):(l-=this.u_0,t.x=u*this.cosrot+l*this.sinrot,t.y=l*this.cosrot-u*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function Gje(e){var t,i,r,n,s,o,a,l={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(i=e.y,t=e.x):(i=e.x*this.cosrot-e.y*this.sinrot,t=e.y*this.cosrot+e.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*i),n=.5*(r-1/r),s=.5*(r+1/r),o=Math.sin(this.BrA*t),a=(o*this.cosgam+n*this.singam)/s,Math.abs(Math.abs(a)-1)<Tt)l.x=0,l.y=a<0?-mt:mt;else{if(l.y=this.E/Math.sqrt((1+a)/(1-a)),l.y=TS(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(n*this.cosgam-o*this.singam,Math.cos(this.BrA*t))}return l.x+=this.lam0,l}var qje=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const Hje={init:Bje,forward:zje,inverse:Gje,names:qje};function Wje(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Tt)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),i=Math.cos(this.lat1),r=Lh(this.e,t,i),n=cc(this.e,this.lat1,t),s=Math.sin(this.lat2),o=Math.cos(this.lat2),a=Lh(this.e,s,o),l=cc(this.e,this.lat2,s),u=cc(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Tt?this.ns=Math.log(r/a)/Math.log(n/l):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=r/(this.ns*Math.pow(n,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function Jje(e){var t=e.x,i=e.y;Math.abs(2*Math.abs(i)-Math.PI)<=Tt&&(i=R3(i)*(mt-2*Tt));var r=Math.abs(Math.abs(i)-mt),n,s;if(r>Tt)n=cc(this.e,i,Math.sin(i)),s=this.a*this.f0*Math.pow(n,this.ns);else{if(r=i*this.ns,r<=0)return null;s=0}var o=this.ns*Nt(t-this.long0);return e.x=this.k0*(s*Math.sin(o))+this.x0,e.y=this.k0*(this.rh-s*Math.cos(o))+this.y0,e}function Zje(e){var t,i,r,n,s,o=(e.x-this.x0)/this.k0,a=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(o*o+a*a),i=1):(t=-Math.sqrt(o*o+a*a),i=-1);var l=0;if(t!==0&&(l=Math.atan2(i*o,i*a)),t!==0||this.ns>0){if(i=1/this.ns,r=Math.pow(t/(this.a*this.f0),i),n=TS(this.e,r),n===-9999)return null}else n=-mt;return s=Nt(l/this.ns+this.long0),e.x=s,e.y=n,e}var Yje=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const Kje={init:Wje,forward:Jje,inverse:Zje,names:Yje};function Qje(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Xje(e){var t,i,r,n,s,o,a,l=e.x,u=e.y,c=Nt(l-this.long0);return t=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/t)-this.s45),r=-c*this.alfa,n=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),s=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(n)),o=this.n*s,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(n/2+this.s45),this.n),e.y=a*Math.cos(o)/1,e.x=a*Math.sin(o)/1,this.czech||(e.y*=-1,e.x*=-1),e}function eUe(e){var t,i,r,n,s,o,a,l,u=e.x;e.x=e.y,e.y=u,this.czech||(e.y*=-1,e.x*=-1),o=Math.sqrt(e.x*e.x+e.y*e.y),s=Math.atan2(e.y,e.x),n=s/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),i=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(t)),e.x=this.long0-i/this.alfa,a=t,l=0;var c=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-e.y)<1e-10&&(l=1),a=e.y,c+=1;while(l===0&&c<15);return c>=15?null:e}var tUe=["Krovak","krovak"];const iUe={init:Qje,forward:Xje,inverse:eUe,names:tUe};function Go(e,t,i,r,n){return e*n-t*Math.sin(2*n)+i*Math.sin(4*n)-r*Math.sin(6*n)}function k3(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function L3(e){return .375*e*(1+.25*e*(1+.46875*e))}function P3(e){return .05859375*e*e*(1+.75*e)}function N3(e){return e*e*e*(35/3072)}function Bb(e,t,i){var r=t*i;return e/Math.sqrt(1-r*r)}function Fw(e){return Math.abs(e)<mt?e:e-R3(e)*Math.PI}function o5(e,t,i,r,n){var s,o;s=e/t;for(var a=0;a<15;a++)if(o=(e-(t*s-i*Math.sin(2*s)+r*Math.sin(4*s)-n*Math.sin(6*s)))/(t-2*i*Math.cos(2*s)+4*r*Math.cos(4*s)-6*n*Math.cos(6*s)),s+=o,Math.abs(o)<=1e-10)return s;return NaN}function rUe(){this.sphere||(this.e0=k3(this.es),this.e1=L3(this.es),this.e2=P3(this.es),this.e3=N3(this.es),this.ml0=this.a*Go(this.e0,this.e1,this.e2,this.e3,this.lat0))}function nUe(e){var t,i,r=e.x,n=e.y;if(r=Nt(r-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(n)*Math.sin(r)),i=this.a*(Math.atan2(Math.tan(n),Math.cos(r))-this.lat0);else{var s=Math.sin(n),o=Math.cos(n),a=Bb(this.a,this.e,s),l=Math.tan(n)*Math.tan(n),u=r*Math.cos(n),c=u*u,d=this.es*o*o/(1-this.es),f=this.a*Go(this.e0,this.e1,this.e2,this.e3,n);t=a*u*(1-c*l*(1/6-(8-l+8*d)*c/120)),i=f-this.ml0+a*s/o*c*(.5+(5-l+6*d)*c/24)}return e.x=t+this.x0,e.y=i+this.y0,e}function sUe(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,i=e.y/this.a,r,n;if(this.sphere){var s=i+this.lat0;r=Math.asin(Math.sin(s)*Math.cos(t)),n=Math.atan2(Math.tan(t),Math.cos(s))}else{var o=this.ml0/this.a+i,a=o5(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-mt)<=Tt)return e.x=this.long0,e.y=mt,i<0&&(e.y*=-1),e;var l=Bb(this.a,this.e,Math.sin(a)),u=l*l*l/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(a),2),d=t*this.a/l,f=d*d;r=a-l*Math.tan(a)/u*d*d*(.5-(1+3*c)*d*d/24),n=d*(1-f*(c/3+(1+3*c)*c*f/15))/Math.cos(a)}return e.x=Nt(n+this.long0),e.y=Fw(r),e}var oUe=["Cassini","Cassini_Soldner","cass"];const aUe={init:rUe,forward:nUe,inverse:sUe,names:oUe};function rm(e,t){var i;return e>1e-7?(i=e*t,(1-e*e)*(t/(1-i*i)-.5/e*Math.log((1-i)/(1+i)))):2*t}var lUe=1,uUe=2,cUe=3,hUe=4;function dUe(){var e=Math.abs(this.lat0);if(Math.abs(e-mt)<Tt?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<Tt?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var t;switch(this.qp=rm(this.e,1),this.mmf=.5/(1-this.es),this.apa=_Ue(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=rm(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function pUe(e){var t,i,r,n,s,o,a,l,u,c,d=e.x,f=e.y;if(d=Nt(d-this.long0),this.sphere){if(s=Math.sin(f),c=Math.cos(f),r=Math.cos(d),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(i=this.mode===this.EQUIT?1+c*r:1+this.sinph0*s+this.cosph0*c*r,i<=Tt)return null;i=Math.sqrt(2/i),t=i*c*Math.sin(d),i*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*c*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(f+this.lat0)<Tt)return null;i=rr-f*.5,i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)),t=i*Math.sin(d),i*=r}}else{switch(a=0,l=0,u=0,r=Math.cos(d),n=Math.sin(d),s=Math.sin(f),o=rm(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=o/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:u=1+this.sinb1*a+this.cosb1*l*r;break;case this.EQUIT:u=1+l*r;break;case this.N_POLE:u=mt+f,o=this.qp-o;break;case this.S_POLE:u=f-mt,o=this.qp+o;break}if(Math.abs(u)<Tt)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),this.mode===this.OBLIQ?i=this.ymf*u*(this.cosb1*a-this.sinb1*l*r):i=(u=Math.sqrt(2/(1+l*r)))*a*this.ymf,t=this.xmf*u*l*n;break;case this.N_POLE:case this.S_POLE:o>=0?(t=(u=Math.sqrt(o))*n,i=r*(this.mode===this.S_POLE?u:-u)):t=i=0;break}}return e.x=this.a*t+this.x0,e.y=this.a*i+this.y0,e}function fUe(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,i=e.y/this.a,r,n,s,o,a,l,u;if(this.sphere){var c=0,d,f=0;if(d=Math.sqrt(t*t+i*i),n=d*.5,n>1)return null;switch(n=2*Math.asin(n),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=Math.sin(n),c=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(d)<=Tt?0:Math.asin(i*f/d),t*=f,i=c*d;break;case this.OBLIQ:n=Math.abs(d)<=Tt?this.lat0:Math.asin(c*this.sinph0+i*f*this.cosph0/d),t*=f*this.cosph0,i=(c-Math.sin(n)*this.sinph0)*d;break;case this.N_POLE:i=-i,n=mt-n;break;case this.S_POLE:n-=mt;break}r=i===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,i)}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,i*=this.dd,l=Math.sqrt(t*t+i*i),l<Tt)return e.x=this.long0,e.y=this.lat0,e;o=2*Math.asin(.5*l/this.rq),s=Math.cos(o),t*=o=Math.sin(o),this.mode===this.OBLIQ?(u=s*this.sinb1+i*o*this.cosb1/l,a=this.qp*u,i=l*this.cosb1*s-i*this.sinb1*o):(u=i*o/l,a=this.qp*u,i=l*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),a=t*t+i*i,!a)return e.x=this.long0,e.y=this.lat0,e;u=1-a/this.qp,this.mode===this.S_POLE&&(u=-u)}r=Math.atan2(t,i),n=xUe(Math.asin(u),this.apa)}return e.x=Nt(this.long0+r),e.y=n,e}var mUe=.3333333333333333,yUe=.17222222222222222,gUe=.10257936507936508,vUe=.06388888888888888,bUe=.0664021164021164,wUe=.016415012942191543;function _Ue(e){var t,i=[];return i[0]=e*mUe,t=e*e,i[0]+=t*yUe,i[1]=t*vUe,t*=e,i[0]+=t*gUe,i[1]+=t*bUe,i[2]=t*wUe,i}function xUe(e,t){var i=e+e;return e+t[0]*Math.sin(i)+t[1]*Math.sin(i+i)+t[2]*Math.sin(i+i+i)}var SUe=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const EUe={init:dUe,forward:pUe,inverse:fUe,names:SUe,S_POLE:lUe,N_POLE:uUe,EQUIT:cUe,OBLIQ:hUe};function bm(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}function MUe(){Math.abs(this.lat1+this.lat2)<Tt||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Lh(this.e3,this.sin_po,this.cos_po),this.qs1=rm(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Lh(this.e3,this.sin_po,this.cos_po),this.qs2=rm(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=rm(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Tt?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function IUe(e){var t=e.x,i=e.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var r=rm(this.e3,this.sin_phi),n=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,s=this.ns0*Nt(t-this.long0),o=n*Math.sin(s)+this.x0,a=this.rh-n*Math.cos(s)+this.y0;return e.x=o,e.y=a,e}function TUe(e){var t,i,r,n,s,o;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),r=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),r=-1),n=0,t!==0&&(n=Math.atan2(r*e.x,r*e.y)),r=t*this.ns0/this.a,this.sphere?o=Math.asin((this.c-r*r)/(2*this.ns0)):(i=(this.c-r*r)/this.ns0,o=this.phi1z(this.e3,i)),s=Nt(n/this.ns0+this.long0),e.x=s,e.y=o,e}function AUe(e,t){var i,r,n,s,o,a=bm(.5*t);if(e<Tt)return a;for(var l=e*e,u=1;u<=25;u++)if(i=Math.sin(a),r=Math.cos(a),n=e*i,s=1-n*n,o=.5*s*s/r*(t/(1-l)-i/s+.5/e*Math.log((1-n)/(1+n))),a=a+o,Math.abs(o)<=1e-7)return a;return null}var CUe=["Albers_Conic_Equal_Area","Albers","aea"];const $Ue={init:MUe,forward:IUe,inverse:TUe,names:CUe,phi1z:AUe};function OUe(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function RUe(e){var t,i,r,n,s,o,a,l,u=e.x,c=e.y;return r=Nt(u-this.long0),t=Math.sin(c),i=Math.cos(c),n=Math.cos(r),o=this.sin_p14*t+this.cos_p14*i*n,s=1,o>0||Math.abs(o)<=Tt?(a=this.x0+this.a*s*i*Math.sin(r)/o,l=this.y0+this.a*s*(this.cos_p14*t-this.sin_p14*i*n)/o):(a=this.x0+this.infinity_dist*i*Math.sin(r),l=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*i*n)),e.x=a,e.y=l,e}function kUe(e){var t,i,r,n,s,o;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(n=Math.atan2(t,this.rc),i=Math.sin(n),r=Math.cos(n),o=bm(r*this.sin_p14+e.y*i*this.cos_p14/t),s=Math.atan2(e.x*i,t*this.cos_p14*r-e.y*this.sin_p14*i),s=Nt(this.long0+s)):(o=this.phic0,s=0),e.x=s,e.y=o,e}var LUe=["gnom"];const PUe={init:OUe,forward:RUe,inverse:kUe,names:LUe};function NUe(e,t){var i=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-i)<1e-6)return t<0?-1*mt:mt;for(var r=Math.asin(.5*t),n,s,o,a,l=0;l<30;l++)if(s=Math.sin(r),o=Math.cos(r),a=e*s,n=Math.pow(1-a*a,2)/(2*o)*(t/(1-e*e)-s/(1-a*a)+.5/e*Math.log((1-a)/(1+a))),r+=n,Math.abs(n)<=1e-10)return r;return NaN}function FUe(){this.sphere||(this.k0=Lh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function DUe(e){var t=e.x,i=e.y,r,n,s=Nt(t-this.long0);if(this.sphere)r=this.x0+this.a*s*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var o=rm(this.e,Math.sin(i));r=this.x0+this.a*this.k0*s,n=this.y0+this.a*o*.5/this.k0}return e.x=r,e.y=n,e}function jUe(e){e.x-=this.x0,e.y-=this.y0;var t,i;return this.sphere?(t=Nt(this.long0+e.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(i=NUe(this.e,2*e.y*this.k0/this.a),t=Nt(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=i,e}var UUe=["cea"];const VUe={init:FUe,forward:DUe,inverse:jUe,names:UUe};function BUe(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function zUe(e){var t=e.x,i=e.y,r=Nt(t-this.long0),n=Fw(i-this.lat0);return e.x=this.x0+this.a*r*this.rc,e.y=this.y0+this.a*n,e}function GUe(e){var t=e.x,i=e.y;return e.x=Nt(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=Fw(this.lat0+(i-this.y0)/this.a),e}var qUe=["Equirectangular","Equidistant_Cylindrical","eqc"];const HUe={init:BUe,forward:zUe,inverse:GUe,names:qUe};var rW=20;function WUe(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=k3(this.es),this.e1=L3(this.es),this.e2=P3(this.es),this.e3=N3(this.es),this.ml0=this.a*Go(this.e0,this.e1,this.e2,this.e3,this.lat0)}function JUe(e){var t=e.x,i=e.y,r,n,s,o=Nt(t-this.long0);if(s=o*Math.sin(i),this.sphere)Math.abs(i)<=Tt?(r=this.a*o,n=-1*this.a*this.lat0):(r=this.a*Math.sin(s)/Math.tan(i),n=this.a*(Fw(i-this.lat0)+(1-Math.cos(s))/Math.tan(i)));else if(Math.abs(i)<=Tt)r=this.a*o,n=-1*this.ml0;else{var a=Bb(this.a,this.e,Math.sin(i))/Math.tan(i);r=a*Math.sin(s),n=this.a*Go(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+a*(1-Math.cos(s))}return e.x=r+this.x0,e.y=n+this.y0,e}function ZUe(e){var t,i,r,n,s,o,a,l,u;if(r=e.x-this.x0,n=e.y-this.y0,this.sphere)if(Math.abs(n+this.a*this.lat0)<=Tt)t=Nt(r/this.a+this.long0),i=0;else{o=this.lat0+n/this.a,a=r*r/this.a/this.a+o*o,l=o;var c;for(s=rW;s;--s)if(c=Math.tan(l),u=-1*(o*(l*c+1)-l-.5*(l*l+a)*c)/((l-o)/c-1),l+=u,Math.abs(u)<=Tt){i=l;break}t=Nt(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(i))}else if(Math.abs(n+this.ml0)<=Tt)i=0,t=Nt(this.long0+r/this.a);else{o=(this.ml0+n)/this.a,a=r*r/this.a/this.a+o*o,l=o;var d,f,m,g,v;for(s=rW;s;--s)if(v=this.e*Math.sin(l),d=Math.sqrt(1-v*v)*Math.tan(l),f=this.a*Go(this.e0,this.e1,this.e2,this.e3,l),m=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),g=f/this.a,u=(o*(d*g+1)-g-.5*d*(g*g+a))/(this.es*Math.sin(2*l)*(g*g+a-2*o*g)/(4*d)+(o-g)*(d*m-2/Math.sin(2*l))-m),l-=u,Math.abs(u)<=Tt){i=l;break}d=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),t=Nt(this.long0+Math.asin(r*d/this.a)/Math.sin(i))}return e.x=t,e.y=i,e}var YUe=["Polyconic","poly"];const KUe={init:WUe,forward:JUe,inverse:ZUe,names:YUe};function QUe(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function XUe(e){var t,i=e.x,r=e.y,n=r-this.lat0,s=i-this.long0,o=n/Ix*1e-5,a=s,l=1,u=0;for(t=1;t<=10;t++)l=l*o,u=u+this.A[t]*l;var c=u,d=a,f=1,m=0,g,v,b=0,x=0;for(t=1;t<=6;t++)g=f*c-m*d,v=m*c+f*d,f=g,m=v,b=b+this.B_re[t]*f-this.B_im[t]*m,x=x+this.B_im[t]*f+this.B_re[t]*m;return e.x=x*this.a+this.x0,e.y=b*this.a+this.y0,e}function eVe(e){var t,i=e.x,r=e.y,n=i-this.x0,s=r-this.y0,o=s/this.a,a=n/this.a,l=1,u=0,c,d,f=0,m=0;for(t=1;t<=6;t++)c=l*o-u*a,d=u*o+l*a,l=c,u=d,f=f+this.C_re[t]*l-this.C_im[t]*u,m=m+this.C_im[t]*l+this.C_re[t]*u;for(var g=0;g<this.iterations;g++){var v=f,b=m,x,S,T=o,_=a;for(t=2;t<=6;t++)x=v*f-b*m,S=b*f+v*m,v=x,b=S,T=T+(t-1)*(this.B_re[t]*v-this.B_im[t]*b),_=_+(t-1)*(this.B_im[t]*v+this.B_re[t]*b);v=1,b=0;var M=this.B_re[1],I=this.B_im[1];for(t=2;t<=6;t++)x=v*f-b*m,S=b*f+v*m,v=x,b=S,M=M+t*(this.B_re[t]*v-this.B_im[t]*b),I=I+t*(this.B_im[t]*v+this.B_re[t]*b);var $=M*M+I*I;f=(T*M+_*I)/$,m=(_*M-T*I)/$}var L=f,B=m,z=1,W=0;for(t=1;t<=9;t++)z=z*L,W=W+this.D[t]*z;var J=this.lat0+W*Ix*1e5,K=this.long0+B;return e.x=K,e.y=J,e}var tVe=["New_Zealand_Map_Grid","nzmg"];const iVe={init:QUe,forward:XUe,inverse:eVe,names:tVe};function rVe(){}function nVe(e){var t=e.x,i=e.y,r=Nt(t-this.long0),n=this.x0+this.a*r,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return e.x=n,e.y=s,e}function sVe(e){e.x-=this.x0,e.y-=this.y0;var t=Nt(this.long0+e.x/this.a),i=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=i,e}var oVe=["Miller_Cylindrical","mill"];const aVe={init:rVe,forward:nVe,inverse:sVe,names:oVe};var lVe=20;function uVe(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=mle(this.es)}function cVe(e){var t,i,r=e.x,n=e.y;if(r=Nt(r-this.long0),this.sphere){if(!this.m)n=this.n!==1?Math.asin(this.n*Math.sin(n)):n;else for(var s=this.n*Math.sin(n),o=lVe;o;--o){var a=(this.m*n+Math.sin(n)-s)/(this.m+Math.cos(n));if(n-=a,Math.abs(a)<Tt)break}t=this.a*this.C_x*r*(this.m+Math.cos(n)),i=this.a*this.C_y*n}else{var l=Math.sin(n),u=Math.cos(n);i=this.a*J4(n,l,u,this.en),t=this.a*r*u/Math.sqrt(1-this.es*l*l)}return e.x=t,e.y=i,e}function hVe(e){var t,i,r,n;return e.x-=this.x0,r=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(t))),this.m?t=bm((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=bm(Math.sin(t)/this.n)),r=Nt(r+this.long0),t=Fw(t)):(t=yle(e.y/this.a,this.es,this.en),n=Math.abs(t),n<mt?(n=Math.sin(t),i=this.long0+e.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(t)),r=Nt(i)):n-Tt<mt&&(r=this.long0)),e.x=r,e.y=t,e}var dVe=["Sinusoidal","sinu"];const pVe={init:uVe,forward:cVe,inverse:hVe,names:dVe};function fVe(){}function mVe(e){for(var t=e.x,i=e.y,r=Nt(t-this.long0),n=i,s=Math.PI*Math.sin(i);;){var o=-(n+Math.sin(n)-s)/(1+Math.cos(n));if(n+=o,Math.abs(o)<Tt)break}n/=2,Math.PI/2-Math.abs(i)<Tt&&(r=0);var a=.900316316158*this.a*r*Math.cos(n)+this.x0,l=1.4142135623731*this.a*Math.sin(n)+this.y0;return e.x=a,e.y=l,e}function yVe(e){var t,i;e.x-=this.x0,e.y-=this.y0,i=e.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),t=Math.asin(i);var r=Nt(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),i=(2*t+Math.sin(2*t))/Math.PI,Math.abs(i)>1&&(i=1);var n=Math.asin(i);return e.x=r,e.y=n,e}var gVe=["Mollweide","moll"];const vVe={init:fVe,forward:mVe,inverse:yVe,names:gVe};function bVe(){Math.abs(this.lat1+this.lat2)<Tt||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=k3(this.es),this.e1=L3(this.es),this.e2=P3(this.es),this.e3=N3(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Lh(this.e,this.sinphi,this.cosphi),this.ml1=Go(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Tt?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Lh(this.e,this.sinphi,this.cosphi),this.ml2=Go(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Go(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function wVe(e){var t=e.x,i=e.y,r;if(this.sphere)r=this.a*(this.g-i);else{var n=Go(this.e0,this.e1,this.e2,this.e3,i);r=this.a*(this.g-n)}var s=this.ns*Nt(t-this.long0),o=this.x0+r*Math.sin(s),a=this.y0+this.rh-r*Math.cos(s);return e.x=o,e.y=a,e}function _Ve(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var t,i,r,n;this.ns>=0?(i=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(i=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var s=0;if(i!==0&&(s=Math.atan2(t*e.x,t*e.y)),this.sphere)return n=Nt(this.long0+s/this.ns),r=Fw(this.g-i/this.a),e.x=n,e.y=r,e;var o=this.g-i/this.a;return r=o5(o,this.e0,this.e1,this.e2,this.e3),n=Nt(this.long0+s/this.ns),e.x=n,e.y=r,e}var xVe=["Equidistant_Conic","eqdc"];const SVe={init:bVe,forward:wVe,inverse:_Ve,names:xVe};function EVe(){this.R=this.a}function MVe(e){var t=e.x,i=e.y,r=Nt(t-this.long0),n,s;Math.abs(i)<=Tt&&(n=this.x0+this.R*r,s=this.y0);var o=bm(2*Math.abs(i/Math.PI));(Math.abs(r)<=Tt||Math.abs(Math.abs(i)-mt)<=Tt)&&(n=this.x0,i>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*o):s=this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/r-r/Math.PI),l=a*a,u=Math.sin(o),c=Math.cos(o),d=c/(u+c-1),f=d*d,m=d*(2/u-1),g=m*m,v=Math.PI*this.R*(a*(d-g)+Math.sqrt(l*(d-g)*(d-g)-(g+l)*(f-g)))/(g+l);r<0&&(v=-v),n=this.x0+v;var b=l+d;return v=Math.PI*this.R*(m*b-a*Math.sqrt((g+l)*(l+1)-b*b))/(g+l),i>=0?s=this.y0+v:s=this.y0-v,e.x=n,e.y=s,e}function IVe(e){var t,i,r,n,s,o,a,l,u,c,d,f,m;return e.x-=this.x0,e.y-=this.y0,d=Math.PI*this.R,r=e.x/d,n=e.y/d,s=r*r+n*n,o=-Math.abs(n)*(1+s),a=o-2*n*n+r*r,l=-2*o+1+2*n*n+s*s,m=n*n/l+(2*a*a*a/l/l/l-9*o*a/l/l)/27,u=(o-a*a/3/l)/l,c=2*Math.sqrt(-u/3),d=3*m/u/c,Math.abs(d)>1&&(d>=0?d=1:d=-1),f=Math.acos(d)/3,e.y>=0?i=(-c*Math.cos(f+Math.PI/3)-a/3/l)*Math.PI:i=-(-c*Math.cos(f+Math.PI/3)-a/3/l)*Math.PI,Math.abs(r)<Tt?t=this.long0:t=Nt(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(r*r-n*n)+s*s))/2/r),e.x=t,e.y=i,e}var TVe=["Van_der_Grinten_I","VanDerGrinten","vandg"];const AVe={init:EVe,forward:MVe,inverse:IVe,names:TVe};function CVe(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function $Ve(e){var t=e.x,i=e.y,r=Math.sin(e.y),n=Math.cos(e.y),s=Nt(t-this.long0),o,a,l,u,c,d,f,m,g,v,b,x,S,T,_,M,I,$,L,B,z,W,J;return this.sphere?Math.abs(this.sin_p12-1)<=Tt?(e.x=this.x0+this.a*(mt-i)*Math.sin(s),e.y=this.y0-this.a*(mt-i)*Math.cos(s),e):Math.abs(this.sin_p12+1)<=Tt?(e.x=this.x0+this.a*(mt+i)*Math.sin(s),e.y=this.y0+this.a*(mt+i)*Math.cos(s),e):($=this.sin_p12*r+this.cos_p12*n*Math.cos(s),M=Math.acos($),I=M?M/Math.sin(M):1,e.x=this.x0+this.a*I*n*Math.sin(s),e.y=this.y0+this.a*I*(this.cos_p12*r-this.sin_p12*n*Math.cos(s)),e):(o=k3(this.es),a=L3(this.es),l=P3(this.es),u=N3(this.es),Math.abs(this.sin_p12-1)<=Tt?(c=this.a*Go(o,a,l,u,mt),d=this.a*Go(o,a,l,u,i),e.x=this.x0+(c-d)*Math.sin(s),e.y=this.y0-(c-d)*Math.cos(s),e):Math.abs(this.sin_p12+1)<=Tt?(c=this.a*Go(o,a,l,u,mt),d=this.a*Go(o,a,l,u,i),e.x=this.x0+(c+d)*Math.sin(s),e.y=this.y0+(c+d)*Math.cos(s),e):(f=r/n,m=Bb(this.a,this.e,this.sin_p12),g=Bb(this.a,this.e,r),v=Math.atan((1-this.es)*f+this.es*m*this.sin_p12/(g*n)),b=Math.atan2(Math.sin(s),this.cos_p12*Math.tan(v)-this.sin_p12*Math.cos(s)),b===0?L=Math.asin(this.cos_p12*Math.sin(v)-this.sin_p12*Math.cos(v)):Math.abs(Math.abs(b)-Math.PI)<=Tt?L=-Math.asin(this.cos_p12*Math.sin(v)-this.sin_p12*Math.cos(v)):L=Math.asin(Math.sin(s)*Math.cos(v)/Math.sin(b)),x=this.e*this.sin_p12/Math.sqrt(1-this.es),S=this.e*this.cos_p12*Math.cos(b)/Math.sqrt(1-this.es),T=x*S,_=S*S,B=L*L,z=B*L,W=z*L,J=W*L,M=m*L*(1-B*_*(1-_)/6+z/8*T*(1-2*_)+W/120*(_*(4-7*_)-3*x*x*(1-7*_))-J/48*T),e.x=this.x0+M*Math.sin(b),e.y=this.y0+M*Math.cos(b),e))}function OVe(e){e.x-=this.x0,e.y-=this.y0;var t,i,r,n,s,o,a,l,u,c,d,f,m,g,v,b,x,S,T,_,M,I,$,L;return this.sphere?(t=Math.sqrt(e.x*e.x+e.y*e.y),t>2*mt*this.a?void 0:(i=t/this.a,r=Math.sin(i),n=Math.cos(i),s=this.long0,Math.abs(t)<=Tt?o=this.lat0:(o=bm(n*this.sin_p12+e.y*r*this.cos_p12/t),a=Math.abs(this.lat0)-mt,Math.abs(a)<=Tt?this.lat0>=0?s=Nt(this.long0+Math.atan2(e.x,-e.y)):s=Nt(this.long0-Math.atan2(-e.x,e.y)):s=Nt(this.long0+Math.atan2(e.x*r,t*this.cos_p12*n-e.y*this.sin_p12*r))),e.x=s,e.y=o,e)):(l=k3(this.es),u=L3(this.es),c=P3(this.es),d=N3(this.es),Math.abs(this.sin_p12-1)<=Tt?(f=this.a*Go(l,u,c,d,mt),t=Math.sqrt(e.x*e.x+e.y*e.y),m=f-t,o=o5(m/this.a,l,u,c,d),s=Nt(this.long0+Math.atan2(e.x,-1*e.y)),e.x=s,e.y=o,e):Math.abs(this.sin_p12+1)<=Tt?(f=this.a*Go(l,u,c,d,mt),t=Math.sqrt(e.x*e.x+e.y*e.y),m=t-f,o=o5(m/this.a,l,u,c,d),s=Nt(this.long0+Math.atan2(e.x,e.y)),e.x=s,e.y=o,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),b=Math.atan2(e.x,e.y),g=Bb(this.a,this.e,this.sin_p12),x=Math.cos(b),S=this.e*this.cos_p12*x,T=-S*S/(1-this.es),_=3*this.es*(1-T)*this.sin_p12*this.cos_p12*x/(1-this.es),M=t/g,I=M-T*(1+T)*Math.pow(M,3)/6-_*(1+3*T)*Math.pow(M,4)/24,$=1-T*I*I/2-M*I*I*I/6,v=Math.asin(this.sin_p12*Math.cos(I)+this.cos_p12*Math.sin(I)*x),s=Nt(this.long0+Math.asin(Math.sin(b)*Math.sin(I)/Math.cos(v))),L=Math.sin(v),o=Math.atan2((L-this.es*$*this.sin_p12)*Math.tan(v),L*(1-this.es)),e.x=s,e.y=o,e))}var RVe=["Azimuthal_Equidistant","aeqd"];const kVe={init:CVe,forward:$Ve,inverse:OVe,names:RVe};function LVe(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function PVe(e){var t,i,r,n,s,o,a,l,u=e.x,c=e.y;return r=Nt(u-this.long0),t=Math.sin(c),i=Math.cos(c),n=Math.cos(r),o=this.sin_p14*t+this.cos_p14*i*n,s=1,(o>0||Math.abs(o)<=Tt)&&(a=this.a*s*i*Math.sin(r),l=this.y0+this.a*s*(this.cos_p14*t-this.sin_p14*i*n)),e.x=a,e.y=l,e}function NVe(e){var t,i,r,n,s,o,a;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),i=bm(t/this.a),r=Math.sin(i),n=Math.cos(i),o=this.long0,Math.abs(t)<=Tt?(a=this.lat0,e.x=o,e.y=a,e):(a=bm(n*this.sin_p14+e.y*r*this.cos_p14/t),s=Math.abs(this.lat0)-mt,Math.abs(s)<=Tt?(this.lat0>=0?o=Nt(this.long0+Math.atan2(e.x,-e.y)):o=Nt(this.long0-Math.atan2(-e.x,e.y)),e.x=o,e.y=a,e):(o=Nt(this.long0+Math.atan2(e.x*r,t*this.cos_p14*n-e.y*this.sin_p14*r)),e.x=o,e.y=a,e))}var FVe=["ortho"];const DVe={init:LVe,forward:PVe,inverse:NVe,names:FVe};var tn={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},nr={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function jVe(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=mt-rr/2?this.face=tn.TOP:this.lat0<=-(mt-rr/2)?this.face=tn.BOTTOM:Math.abs(this.long0)<=rr?this.face=tn.FRONT:Math.abs(this.long0)<=mt+rr?this.face=this.long0>0?tn.RIGHT:tn.LEFT:this.face=tn.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function UVe(e){var t={x:0,y:0},i,r,n,s,o,a,l={value:0};if(e.x-=this.long0,this.es!==0?i=Math.atan(this.one_minus_f_squared*Math.tan(e.y)):i=e.y,r=e.x,this.face===tn.TOP)s=mt-i,r>=rr&&r<=mt+rr?(l.value=nr.AREA_0,n=r-mt):r>mt+rr||r<=-(mt+rr)?(l.value=nr.AREA_1,n=r>0?r-An:r+An):r>-(mt+rr)&&r<=-rr?(l.value=nr.AREA_2,n=r+mt):(l.value=nr.AREA_3,n=r);else if(this.face===tn.BOTTOM)s=mt+i,r>=rr&&r<=mt+rr?(l.value=nr.AREA_0,n=-r+mt):r<rr&&r>=-rr?(l.value=nr.AREA_1,n=-r):r<-rr&&r>=-(mt+rr)?(l.value=nr.AREA_2,n=-r-mt):(l.value=nr.AREA_3,n=r>0?-r+An:-r-An);else{var u,c,d,f,m,g,v;this.face===tn.RIGHT?r=cb(r,+mt):this.face===tn.BACK?r=cb(r,+An):this.face===tn.LEFT&&(r=cb(r,-mt)),f=Math.sin(i),m=Math.cos(i),g=Math.sin(r),v=Math.cos(r),u=m*v,c=m*g,d=f,this.face===tn.FRONT?(s=Math.acos(u),n=EM(s,d,c,l)):this.face===tn.RIGHT?(s=Math.acos(c),n=EM(s,d,-u,l)):this.face===tn.BACK?(s=Math.acos(-u),n=EM(s,d,-c,l)):this.face===tn.LEFT?(s=Math.acos(-c),n=EM(s,d,u,l)):(s=n=0,l.value=nr.AREA_0)}return a=Math.atan(12/An*(n+Math.acos(Math.sin(n)*Math.cos(rr))-mt)),o=Math.sqrt((1-Math.cos(s))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(n))))),l.value===nr.AREA_1?a+=mt:l.value===nr.AREA_2?a+=An:l.value===nr.AREA_3&&(a+=1.5*An),t.x=o*Math.cos(a),t.y=o*Math.sin(a),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,e.x=t.x,e.y=t.y,e}function VVe(e){var t={lam:0,phi:0},i,r,n,s,o,a,l,u,c,d={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,r=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),i=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?d.value=nr.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(d.value=nr.AREA_1,i-=mt):e.x<0&&-e.x>=Math.abs(e.y)?(d.value=nr.AREA_2,i=i<0?i+An:i-An):(d.value=nr.AREA_3,i+=mt),c=An/12*Math.tan(i),o=Math.sin(c)/(Math.cos(c)-1/Math.sqrt(2)),a=Math.atan(o),n=Math.cos(i),s=Math.tan(r),l=1-n*n*s*s*(1-Math.cos(Math.atan(1/Math.cos(a)))),l<-1?l=-1:l>1&&(l=1),this.face===tn.TOP)u=Math.acos(l),t.phi=mt-u,d.value===nr.AREA_0?t.lam=a+mt:d.value===nr.AREA_1?t.lam=a<0?a+An:a-An:d.value===nr.AREA_2?t.lam=a-mt:t.lam=a;else if(this.face===tn.BOTTOM)u=Math.acos(l),t.phi=u-mt,d.value===nr.AREA_0?t.lam=-a+mt:d.value===nr.AREA_1?t.lam=-a:d.value===nr.AREA_2?t.lam=-a-mt:t.lam=a<0?-a-An:-a+An;else{var f,m,g;f=l,c=f*f,c>=1?g=0:g=Math.sqrt(1-c)*Math.sin(a),c+=g*g,c>=1?m=0:m=Math.sqrt(1-c),d.value===nr.AREA_1?(c=m,m=-g,g=c):d.value===nr.AREA_2?(m=-m,g=-g):d.value===nr.AREA_3&&(c=m,m=g,g=-c),this.face===tn.RIGHT?(c=f,f=-m,m=c):this.face===tn.BACK?(f=-f,m=-m):this.face===tn.LEFT&&(c=f,f=m,m=-c),t.phi=Math.acos(-g)-mt,t.lam=Math.atan2(m,f),this.face===tn.RIGHT?t.lam=cb(t.lam,-mt):this.face===tn.BACK?t.lam=cb(t.lam,-An):this.face===tn.LEFT&&(t.lam=cb(t.lam,+mt))}if(this.es!==0){var v,b,x;v=t.phi<0?1:0,b=Math.tan(t.phi),x=this.b/Math.sqrt(b*b+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-x*x)/(this.one_minus_f*x)),v&&(t.phi=-t.phi)}return t.lam+=this.long0,e.x=t.lam,e.y=t.phi,e}function EM(e,t,i,r){var n;return e<Tt?(r.value=nr.AREA_0,n=0):(n=Math.atan2(t,i),Math.abs(n)<=rr?r.value=nr.AREA_0:n>rr&&n<=mt+rr?(r.value=nr.AREA_1,n-=mt):n>mt+rr||n<=-(mt+rr)?(r.value=nr.AREA_2,n=n>=0?n-An:n+An):(r.value=nr.AREA_3,n+=mt)),n}function cb(e,t){var i=e+t;return i<-An?i+=MS:i>+An&&(i-=MS),i}var BVe=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const zVe={init:jVe,forward:UVe,inverse:VVe,names:BVe};var F6=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],q2=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],ble=.8487,wle=1.3523,_le=gh/5,GVe=1/_le,Uv=18,a5=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},qVe=function(e,t){return e[1]+t*(2*e[2]+t*3*e[3])};function HVe(e,t,i,r){for(var n=t;r;--r){var s=e(n);if(n-=s,Math.abs(s)<i)break}return n}function WVe(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function JVe(e){var t=Nt(e.x-this.long0),i=Math.abs(e.y),r=Math.floor(i*_le);r<0?r=0:r>=Uv&&(r=Uv-1),i=gh*(i-GVe*r);var n={x:a5(F6[r],i)*t,y:a5(q2[r],i)};return e.y<0&&(n.y=-n.y),n.x=n.x*this.a*ble+this.x0,n.y=n.y*this.a*wle+this.y0,n}function ZVe(e){var t={x:(e.x-this.x0)/(this.a*ble),y:Math.abs(e.y-this.y0)/(this.a*wle)};if(t.y>=1)t.x/=F6[Uv][0],t.y=e.y<0?-mt:mt;else{var i=Math.floor(t.y*Uv);for(i<0?i=0:i>=Uv&&(i=Uv-1);;)if(q2[i][0]>t.y)--i;else if(q2[i+1][0]<=t.y)++i;else break;var r=q2[i],n=5*(t.y-r[0])/(q2[i+1][0]-r[0]);n=HVe(function(s){return(a5(r,s)-t.y)/qVe(r,s)},n,Tt,100),t.x/=a5(F6[i],n),t.y=(5*i+n)*js,e.y<0&&(t.y=-t.y)}return t.x=Nt(t.x+this.long0),t}var YVe=["Robinson","robin"];const KVe={init:WVe,forward:JVe,inverse:ZVe,names:YVe};function QVe(){this.name="geocent"}function XVe(e){var t=ole(e,this.es,this.a);return t}function eBe(e){var t=ale(e,this.es,this.a,this.b);return t}var tBe=["Geocentric","geocentric","geocent","Geocent"];const iBe={init:QVe,forward:XVe,inverse:eBe,names:tBe};var ho={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},$_={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function rBe(){if(Object.keys($_).forEach(function(i){if(typeof this[i]>"u")this[i]=$_[i].def;else{if($_[i].num&&isNaN(this[i]))throw new Error("Invalid parameter value, must be numeric "+i+" = "+this[i]);$_[i].num&&(this[i]=parseFloat(this[i]))}$_[i].degrees&&(this[i]=this[i]*js)}.bind(this)),Math.abs(Math.abs(this.lat0)-mt)<Tt?this.mode=this.lat0<0?ho.S_POLE:ho.N_POLE:Math.abs(this.lat0)<Tt?this.mode=ho.EQUIT:(this.mode=ho.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(e),this.sw=Math.sin(e)}function nBe(e){e.x-=this.long0;var t=Math.sin(e.y),i=Math.cos(e.y),r=Math.cos(e.x),n,s;switch(this.mode){case ho.OBLIQ:s=this.sinph0*t+this.cosph0*i*r;break;case ho.EQUIT:s=i*r;break;case ho.S_POLE:s=-t;break;case ho.N_POLE:s=t;break}switch(s=this.pn1/(this.p-s),n=s*i*Math.sin(e.x),this.mode){case ho.OBLIQ:s*=this.cosph0*t-this.sinph0*i*r;break;case ho.EQUIT:s*=t;break;case ho.N_POLE:s*=-(i*r);break;case ho.S_POLE:s*=i*r;break}var o,a;return o=s*this.cg+n*this.sg,a=1/(o*this.sw*this.h1+this.cw),n=(n*this.cg-s*this.sg)*this.cw*a,s=o*a,e.x=n*this.a,e.y=s*this.a,e}function sBe(e){e.x/=this.a,e.y/=this.a;var t={x:e.x,y:e.y},i,r,n;n=1/(this.pn1-e.y*this.sw),i=this.pn1*e.x*n,r=this.pn1*e.y*this.cw*n,e.x=i*this.cg+r*this.sg,e.y=r*this.cg-i*this.sg;var s=tc(e.x,e.y);if(Math.abs(s)<Tt)t.x=0,t.y=e.y;else{var o,a;switch(a=1-s*s*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/s+s/this.pn1),o=Math.sqrt(1-a*a),this.mode){case ho.OBLIQ:t.y=Math.asin(o*this.sinph0+e.y*a*this.cosph0/s),e.y=(o-this.sinph0*Math.sin(t.y))*s,e.x*=a*this.cosph0;break;case ho.EQUIT:t.y=Math.asin(e.y*a/s),e.y=o*s,e.x*=a;break;case ho.N_POLE:t.y=Math.asin(o),e.y=-e.y;break;case ho.S_POLE:t.y=-Math.asin(o);break}t.x=Math.atan2(e.x,e.y)}return e.x=t.x+this.long0,e.y=t.y,e}var oBe=["Tilted_Perspective","tpers"];const aBe={init:rBe,forward:nBe,inverse:sBe,names:oBe};function lBe(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var e=1-this.es,t=1/e;this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function uBe(e){var t=e.x,i=e.y,r,n,s,o;if(t=t-this.long0,this.shape==="ellipse"){i=Math.atan(this.radius_p2*Math.tan(i));var a=this.radius_p/tc(this.radius_p*Math.cos(i),Math.sin(i));if(n=a*Math.cos(t)*Math.cos(i),s=a*Math.sin(t)*Math.cos(i),o=a*Math.sin(i),(this.radius_g-n)*n-s*s-o*o*this.radius_p_inv2<0)return e.x=Number.NaN,e.y=Number.NaN,e;r=this.radius_g-n,this.flip_axis?(e.x=this.radius_g_1*Math.atan(s/tc(o,r)),e.y=this.radius_g_1*Math.atan(o/r)):(e.x=this.radius_g_1*Math.atan(s/r),e.y=this.radius_g_1*Math.atan(o/tc(s,r)))}else this.shape==="sphere"&&(r=Math.cos(i),n=Math.cos(t)*r,s=Math.sin(t)*r,o=Math.sin(i),r=this.radius_g-n,this.flip_axis?(e.x=this.radius_g_1*Math.atan(s/tc(o,r)),e.y=this.radius_g_1*Math.atan(o/r)):(e.x=this.radius_g_1*Math.atan(s/r),e.y=this.radius_g_1*Math.atan(o/tc(s,r))));return e.x=e.x*this.a,e.y=e.y*this.a,e}function cBe(e){var t=-1,i=0,r=0,n,s,o,a;if(e.x=e.x/this.a,e.y=e.y/this.a,this.shape==="ellipse"){this.flip_axis?(r=Math.tan(e.y/this.radius_g_1),i=Math.tan(e.x/this.radius_g_1)*tc(1,r)):(i=Math.tan(e.x/this.radius_g_1),r=Math.tan(e.y/this.radius_g_1)*tc(1,i));var l=r/this.radius_p;if(n=i*i+l*l+t*t,s=2*this.radius_g*t,o=s*s-4*n*this.C,o<0)return e.x=Number.NaN,e.y=Number.NaN,e;a=(-s-Math.sqrt(o))/(2*n),t=this.radius_g+a*t,i*=a,r*=a,e.x=Math.atan2(i,t),e.y=Math.atan(r*Math.cos(e.x)/t),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if(this.shape==="sphere"){if(this.flip_axis?(r=Math.tan(e.y/this.radius_g_1),i=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+r*r)):(i=Math.tan(e.x/this.radius_g_1),r=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+i*i)),n=i*i+r*r+t*t,s=2*this.radius_g*t,o=s*s-4*n*this.C,o<0)return e.x=Number.NaN,e.y=Number.NaN,e;a=(-s-Math.sqrt(o))/(2*n),t=this.radius_g+a*t,i*=a,r*=a,e.x=Math.atan2(i,t),e.y=Math.atan(r*Math.cos(e.x)/t)}return e.x=e.x+this.long0,e}var hBe=["Geostationary Satellite View","Geostationary_Satellite","geos"];const dBe={init:lBe,forward:uBe,inverse:cBe,names:hBe};function pBe(e){e.Proj.projections.add(CT),e.Proj.projections.add($T),e.Proj.projections.add(bje),e.Proj.projections.add(Cje),e.Proj.projections.add(Pje),e.Proj.projections.add(Uje),e.Proj.projections.add(Hje),e.Proj.projections.add(Kje),e.Proj.projections.add(iUe),e.Proj.projections.add(aUe),e.Proj.projections.add(EUe),e.Proj.projections.add($Ue),e.Proj.projections.add(PUe),e.Proj.projections.add(VUe),e.Proj.projections.add(HUe),e.Proj.projections.add(KUe),e.Proj.projections.add(iVe),e.Proj.projections.add(aVe),e.Proj.projections.add(pVe),e.Proj.projections.add(vVe),e.Proj.projections.add(SVe),e.Proj.projections.add(AVe),e.Proj.projections.add(kVe),e.Proj.projections.add(DVe),e.Proj.projections.add(zVe),e.Proj.projections.add(KVe),e.Proj.projections.add(iBe),e.Proj.projections.add(aBe),e.Proj.projections.add(dBe)}br.defaultDatum="WGS84";br.Proj=Eh;br.WGS84=new br.Proj("WGS84");br.Point=Vb;br.toPoint=lle;br.defs=jo;br.nadgrid=_7e;br.transform=s5;br.mgrs=F7e;br.version="__VERSION__";pBe(br);const nW="EPSG:4326";class fBe{espgWorker;constructor(){this.espgWorker=this.defaultEpsgLookup,br.defs("EPSG:3978","+proj=lcc +lat_1=49 +lat_2=77 +lat_0=49 +lon_0=-95 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),br.defs("EPSG:3979","+proj=lcc +lat_1=49 +lat_2=77 +lat_0=49 +lon_0=-95 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),br.defs("EPSG:54004","+proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs"),br.defs("EPSG:102100",br.defs("EPSG:3857")),br.defs("EPSG:102187","+proj=tmerc +lat_0=0 +lon_0=-114 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),br.defs("EPSG:102190","+proj=aea +lat_1=50 +lat_2=58.5 +lat_0=45 +lon_0=-126 +x_0=1000000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs");let t=1;for(;t<=60;){const i=t<10?`0${t}`:t;br.defs(`EPSG:326${i}`,`+proj=utm +zone=${t} +ellps=WGS84 +datum=WGS84 +units=m +no_defs`),t++}}addProjection(t,i){t=typeof t=="number"?`EPSG:${t}`:t,br.defs(t,i)}defaultEpsgLookup(t){const i=/urn:ogc:def:crs:EPSG::(\d+)/,r=/EPSG:(\d+)/,n=String(t).match(i)||String(t).match(r)||[];if(n.length<2)throw new Error("Invalid code provided.");return new Promise((s,o)=>{const a=`https://epsg.io/${n[1]}.proj4`;St(a,{responseType:"text"}).then(c=>{c.data?s(c.data):o()},c=>{o(c)})})}epsgLookup(t){return this.espgWorker(t)}setEpsgLookup(t){this.espgWorker=t}normalizeProj(t){if(typeof t=="object"){if(t.wkid)return"EPSG:"+t.wkid;if(t.wkt)return t.wkt}else{if(typeof t=="number")return"EPSG:"+t;if(typeof t=="string")return t}throw new Error("Bad argument type, please provide a string, integer or SpatialReference object.")}async checkProj(t){let i,r="";if(t.wkt)return!0;try{i=this.normalizeProj(t)}catch{return!1}t.latestWkid&&(r=this.normalizeProj(t.latestWkid));const n=(l,u)=>{l!==u&&br.defs(u,br.defs(l))};if(br.defs(i))return!0;if(r&&br.defs(r))return n(r,i),!0;const s=async l=>{try{const u=await this.epsgLookup(l);return u===null||u===""?!1:(br.defs(l,u),!0)}catch{return!1}};return await(r?s(r):Promise.resolve(!1))?(n(r,i),!0):s(i)}async checkProjBomber(t){if(t.length>0){const i=t.pop();if(await this.checkProj(i))return this.checkProjBomber(t);throw console.error("Unable to parse or locate projection information for this item:",i),new Error("Could not find projection information, see console for details")}}async projectGeoJson(t,i,r){let n=this.normalizeProj(i),s=this.normalizeProj(r);if(!n&&t.crs&&t.crs.type==="name"&&(n=Si.parseGeoJsonCrs(t.crs)),n||(n=nW),s||(s=nW),s===n)return t;await this.checkProjBomber([n,s]);const o=br(n,s).forward;return P9e.Tools.applyConverter(t,o)}async projectGeometry(t,i){if(i.type===Ti.EXTENT)return this.projectExtent(t,i);await this.checkProjBomber([t,i.sr]);const r=i.toGeoJSON(),n=await this.projectGeoJson(r,this.normalizeProj(i.sr),this.normalizeProj(t)),s=vb.geom.geomGeoJsonToRamp(n,i.id);return s.sr=Si.parseSR(t),s}async projectExtent(t,i){const r=(v,b,x)=>{if(x===0)return[v,b];const S=[(v[0]+b[0])/2,(v[1]+b[1])/2];if(x===1)return[v,S,b];if(x>1){const T=r(v,S,x-1),_=r(S,b,x-1);return T.concat(_.slice(1))}return[[]]},n=i.toPolygonArray().pop()||[];let s=[];[0,1,2,3].map(v=>r(n[v],n[v+1],3).slice(1)).forEach(v=>s=s.concat(v));const o=new po("warpy",[s],i.sr,!0),a=await this.projectGeometry(t,o),l=a.toArray().pop()||[],u=l.map(v=>v[0]),c=l.map(v=>v[1]),d=Math.min.apply(null,u),f=Math.max.apply(null,u),m=Math.min.apply(null,c),g=Math.max.apply(null,c);return Gr.fromParams(i.id+"_projected",d,m,f,g,a.sr)}}class mBe{DEFAULT_MERCATOR="DEFAULT_ESRI_World_AuxMerc_3857";DEFAULT_LAMBERT="DEFAULT_NRCAN_Lambert_3978";proj;geom;sharedUtils;constructor(){this.proj=new fBe,this.geom=new g9e,this.sharedUtils=new L9e}defaultTileSchemas(){return[this.DEFAULT_LAMBERT,this.DEFAULT_MERCATOR]}defaultLODs(t){const i=r=>r.map(n=>({level:n[0],resolution:n[1],scale:n[2]}));if(t===this.DEFAULT_LAMBERT)return i([[0,38364.660062653464,145e6],[1,22489.62831258996,85e6],[2,13229.193125052918,5e7],[3,7937.5158750317505,3e7],[4,4630.2175937685215,175e5],[5,2645.8386250105837,1e7],[6,1587.5031750063501,6e6],[7,926.0435187537042,35e5],[8,529.1677250021168,2e6],[9,317.50063500127004,12e5],[10,185.20870375074085,7e5],[11,111.12522225044451,42e4],[12,66.1459656252646,25e4],[13,38.36466006265346,145e3],[14,22.48962831258996,85e3],[15,13.229193125052918,5e4],[16,7.9375158750317505,3e4],[17,4.6302175937685215,17500]]);if(t===this.DEFAULT_MERCATOR)return i([[0,19567.87924099992,73957190948944e-6],[1,9783.93962049996,36978595474472e-6],[2,4891.96981024998,18489297737236e-6],[3,2445.98490512499,9244648868618e-6],[4,1222.992452562495,4622324434309e-6],[5,611.4962262813797,2311162217155e-6],[6,305.74811314055756,1155581108577e-6],[7,152.87405657041106,577790.554289],[8,76.43702828507324,288895.277144],[9,38.21851414253662,144447.638572],[10,19.10925707126831,72223.819286],[11,9.554628535634155,36111.909643],[12,4.77731426794937,18055.954822],[13,2.388657133974685,9027.977411],[14,1.1943285668550503,4513.988705],[15,.5971642835598172,2256.994353],[16,.29858214164761665,1128.497176],[17,.14929107082380833,564.248588],[18,.07464553541190416,282.124294],[19,.03732276770595208,141.062147],[20,.01866138385297604,70.5310735]]);throw new Error(`Unknown tile schema key passed to LOD defaulter ${t}`)}}class Wn{$iApi;get $vApp(){return this.$iApi.$vApp}get $element(){return this.$iApi.$element}constructor(t){this.$iApi=t}}function yBe(e){return typeof e=="function"&&e.render&&typeof e.render=="function"}function gBe(e){const t=["data","props","propsData","computed","methods","watch","template","render","components","model"];return typeof e=="object"&&!e.functional&&t.some(i=>e[i]!==void 0)}function vBe(e){return typeof e=="object"&&e.default!==void 0}var xle={exports:{}};function H9(){}H9.prototype={on:function(e,t,i){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:i}),this},once:function(e,t,i){var r=this;function n(){r.off(e,n),t.apply(i,arguments)}return n._=t,this.on(e,n,i)},emit:function(e){var t=[].slice.call(arguments,1),i=((this.e||(this.e={}))[e]||[]).slice(),r=0,n=i.length;for(r;r<n;r++)i[r].fn.apply(i[r].ctx,t);return this},off:function(e,t){var i=this.e||(this.e={}),r=i[e],n=[];if(r&&t)for(var s=0,o=r.length;s<o;s++)r[s].fn!==t&&r[s].fn._!==t&&n.push(r[s]);return n.length?i[e]=n:delete i[e],this}};xle.exports=H9;var bBe=xle.exports.TinyEmitter=H9;function Pa(e,t){const i=Object.create(null),r=e.split(",");for(let n=0;n<r.length;n++)i[r[n]]=!0;return t?n=>!!i[n.toLowerCase()]:n=>!!i[n]}const cr={},hb=[],qo=()=>{},OT=()=>!1,wBe=/^on[^a-z]/,Q0=e=>wBe.test(e),W9=e=>e.startsWith("onUpdate:"),Ui=Object.assign,J9=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},_Be=Object.prototype.hasOwnProperty,Wi=(e,t)=>_Be.call(e,t),Ot=Array.isArray,db=e=>Dw(e)==="[object Map]",X0=e=>Dw(e)==="[object Set]",sW=e=>Dw(e)==="[object Date]",xBe=e=>Dw(e)==="[object RegExp]",li=e=>typeof e=="function",_i=e=>typeof e=="string",wm=e=>typeof e=="symbol",dr=e=>e!==null&&typeof e=="object",Z9=e=>dr(e)&&li(e.then)&&li(e.catch),Sle=Object.prototype.toString,Dw=e=>Sle.call(e),SBe=e=>Dw(e).slice(8,-1),Ele=e=>Dw(e)==="[object Object]",Y9=e=>_i(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,r0=Pa(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),EBe=Pa("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),Z4=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},MBe=/-(\w)/g,Rn=Z4(e=>e.replace(MBe,(t,i)=>i?i.toUpperCase():"")),IBe=/\B([A-Z])/g,dl=Z4(e=>e.replace(IBe,"-$1").toLowerCase()),Um=Z4(e=>e.charAt(0).toUpperCase()+e.slice(1)),n0=Z4(e=>e?`on${Um(e)}`:""),zb=(e,t)=>!Object.is(e,t),pb=(e,t)=>{for(let i=0;i<e.length;i++)e[i](t)},l5=(e,t,i)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:i})},u5=e=>{const t=parseFloat(e);return isNaN(t)?e:t},c5=e=>{const t=_i(e)?Number(e):NaN;return isNaN(t)?e:t};let oW;const D6=()=>oW||(oW=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),TBe="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console",ABe=Pa(TBe);function Vm(e){if(Ot(e)){const t={};for(let i=0;i<e.length;i++){const r=e[i],n=_i(r)?Mle(r):Vm(r);if(n)for(const s in n)t[s]=n[s]}return t}else{if(_i(e))return e;if(dr(e))return e}}const CBe=/;(?![^(]*\))/g,$Be=/:([^]+)/,OBe=/\/\*[^]*?\*\//g;function Mle(e){const t={};return e.replace(OBe,"").split(CBe).forEach(i=>{if(i){const r=i.split($Be);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function bn(e){let t="";if(_i(e))t=e;else if(Ot(e))for(let i=0;i<e.length;i++){const r=bn(e[i]);r&&(t+=r+" ")}else if(dr(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}function Ile(e){if(!e)return null;let{class:t,style:i}=e;return t&&!_i(t)&&(e.class=bn(t)),i&&(e.style=Vm(i)),e}const RBe="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",kBe="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",LBe="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",PBe=Pa(RBe),NBe=Pa(kBe),FBe=Pa(LBe),DBe="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",jBe=Pa(DBe);function Tle(e){return!!e||e===""}function UBe(e,t){if(e.length!==t.length)return!1;let i=!0;for(let r=0;i&&r<e.length;r++)i=_m(e[r],t[r]);return i}function _m(e,t){if(e===t)return!0;let i=sW(e),r=sW(t);if(i||r)return i&&r?e.getTime()===t.getTime():!1;if(i=wm(e),r=wm(t),i||r)return e===t;if(i=Ot(e),r=Ot(t),i||r)return i&&r?UBe(e,t):!1;if(i=dr(e),r=dr(t),i||r){if(!i||!r)return!1;const n=Object.keys(e).length,s=Object.keys(t).length;if(n!==s)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!_m(e[o],t[o]))return!1}}return String(e)===String(t)}function Y4(e,t){return e.findIndex(i=>_m(i,t))}const Hr=e=>_i(e)?e:e==null?"":Ot(e)||dr(e)&&(e.toString===Sle||!li(e.toString))?JSON.stringify(e,Ale,2):String(e),Ale=(e,t)=>t&&t.__v_isRef?Ale(e,t.value):db(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[r,n])=>(i[`${r} =>`]=n,i),{})}:X0(t)?{[`Set(${t.size})`]:[...t.values()]}:dr(t)&&!Ot(t)&&!Ele(t)?String(t):t;let tl;class K4{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=tl,!t&&tl&&(this.index=(tl.scopes||(tl.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const i=tl;try{return tl=this,t()}finally{tl=i}}}on(){tl=this}off(){tl=this.parent}stop(t){if(this._active){let i,r;for(i=0,r=this.effects.length;i<r;i++)this.effects[i].stop();for(i=0,r=this.cleanups.length;i<r;i++)this.cleanups[i]();if(this.scopes)for(i=0,r=this.scopes.length;i<r;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0,this._active=!1}}}function F3(e){return new K4(e)}function Cle(e,t=tl){t&&t.active&&t.effects.push(e)}function Q4(){return tl}function K9(e){tl&&tl.cleanups.push(e)}const Q9=e=>{const t=new Set(e);return t.w=0,t.n=0,t},$le=e=>(e.w&xm)>0,Ole=e=>(e.n&xm)>0,VBe=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=xm},BBe=e=>{const{deps:t}=e;if(t.length){let i=0;for(let r=0;r<t.length;r++){const n=t[r];$le(n)&&!Ole(n)?n.delete(e):t[i++]=n,n.w&=~xm,n.n&=~xm}t.length=i}},h5=new WeakMap;let H2=0,xm=1;const j6=30;let ic;const s0=Symbol(""),U6=Symbol("");class jw{constructor(t,i=null,r){this.fn=t,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,Cle(this,r)}run(){if(!this.active)return this.fn();let t=ic,i=nm;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=ic,ic=this,nm=!0,xm=1<<++H2,H2<=j6?VBe(this):aW(this),this.fn()}finally{H2<=j6&&BBe(this),xm=1<<--H2,ic=this.parent,nm=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ic===this?this.deferStop=!0:this.active&&(aW(this),this.onStop&&this.onStop(),this.active=!1)}}function aW(e){const{deps:t}=e;if(t.length){for(let i=0;i<t.length;i++)t[i].delete(e);t.length=0}}function Rle(e,t){e.effect&&(e=e.effect.fn);const i=new jw(e);t&&(Ui(i,t),t.scope&&Cle(i,t.scope)),(!t||!t.lazy)&&i.run();const r=i.run.bind(i);return r.effect=i,r}function kle(e){e.effect.stop()}let nm=!0;const Lle=[];function Uw(){Lle.push(nm),nm=!1}function Vw(){const e=Lle.pop();nm=e===void 0?!0:e}function Ca(e,t,i){if(nm&&ic){let r=h5.get(e);r||h5.set(e,r=new Map);let n=r.get(i);n||r.set(i,n=Q9()),Ple(n)}}function Ple(e,t){let i=!1;H2<=j6?Ole(e)||(e.n|=xm,i=!$le(e)):i=!e.has(ic),i&&(e.add(ic),ic.deps.push(e))}function op(e,t,i,r,n,s){const o=h5.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(i==="length"&&Ot(e)){const l=Number(r);o.forEach((u,c)=>{(c==="length"||c>=l)&&a.push(u)})}else switch(i!==void 0&&a.push(o.get(i)),t){case"add":Ot(e)?Y9(i)&&a.push(o.get("length")):(a.push(o.get(s0)),db(e)&&a.push(o.get(U6)));break;case"delete":Ot(e)||(a.push(o.get(s0)),db(e)&&a.push(o.get(U6)));break;case"set":db(e)&&a.push(o.get(s0));break}if(a.length===1)a[0]&&V6(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);V6(Q9(l))}}function V6(e,t){const i=Ot(e)?e:[...e];for(const r of i)r.computed&&lW(r);for(const r of i)r.computed||lW(r)}function lW(e,t){(e!==ic||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}function zBe(e,t){var i;return(i=h5.get(e))==null?void 0:i.get(t)}const GBe=Pa("__proto__,__v_isRef,__isVue"),Nle=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(wm)),qBe=X4(),HBe=X4(!1,!0),WBe=X4(!0),JBe=X4(!0,!0),uW=ZBe();function ZBe(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...i){const r=oi(this);for(let s=0,o=this.length;s<o;s++)Ca(r,"get",s+"");const n=r[t](...i);return n===-1||n===!1?r[t](...i.map(oi)):n}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...i){Uw();const r=oi(this)[t].apply(this,i);return Vw(),r}}),e}function YBe(e){const t=oi(this);return Ca(t,"has",e),t.hasOwnProperty(e)}function X4(e=!1,t=!1){return function(r,n,s){if(n==="__v_isReactive")return!e;if(n==="__v_isReadonly")return e;if(n==="__v_isShallow")return t;if(n==="__v_raw"&&s===(e?t?zle:Ble:t?Vle:Ule).get(r))return r;const o=Ot(r);if(!e){if(o&&Wi(uW,n))return Reflect.get(uW,n,s);if(n==="hasOwnProperty")return YBe}const a=Reflect.get(r,n,s);return(wm(n)?Nle.has(n):GBe(n))||(e||Ca(r,"get",n),t)?a:er(a)?o&&Y9(n)?a:a.value:dr(a)?e?iC(a):Hn(a):a}}const KBe=Fle(),QBe=Fle(!0);function Fle(e=!1){return function(i,r,n,s){let o=i[r];if(Sm(o)&&er(o)&&!er(n))return!1;if(!e&&(!Gb(n)&&!Sm(n)&&(o=oi(o),n=oi(n)),!Ot(i)&&er(o)&&!er(n)))return o.value=n,!0;const a=Ot(i)&&Y9(r)?Number(r)<i.length:Wi(i,r),l=Reflect.set(i,r,n,s);return i===oi(s)&&(a?zb(n,o)&&op(i,"set",r,n):op(i,"add",r,n)),l}}function XBe(e,t){const i=Wi(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&i&&op(e,"delete",t,void 0),r}function eze(e,t){const i=Reflect.has(e,t);return(!wm(t)||!Nle.has(t))&&Ca(e,"has",t),i}function tze(e){return Ca(e,"iterate",Ot(e)?"length":s0),Reflect.ownKeys(e)}const Dle={get:qBe,set:KBe,deleteProperty:XBe,has:eze,ownKeys:tze},jle={get:WBe,set(e,t){return!0},deleteProperty(e,t){return!0}},ize=Ui({},Dle,{get:HBe,set:QBe}),rze=Ui({},jle,{get:JBe}),X9=e=>e,eC=e=>Reflect.getPrototypeOf(e);function MM(e,t,i=!1,r=!1){e=e.__v_raw;const n=oi(e),s=oi(t);i||(t!==s&&Ca(n,"get",t),Ca(n,"get",s));const{has:o}=eC(n),a=r?X9:i?t7:AS;if(o.call(n,t))return a(e.get(t));if(o.call(n,s))return a(e.get(s));e!==n&&e.get(t)}function IM(e,t=!1){const i=this.__v_raw,r=oi(i),n=oi(e);return t||(e!==n&&Ca(r,"has",e),Ca(r,"has",n)),e===n?i.has(e):i.has(e)||i.has(n)}function TM(e,t=!1){return e=e.__v_raw,!t&&Ca(oi(e),"iterate",s0),Reflect.get(e,"size",e)}function cW(e){e=oi(e);const t=oi(this);return eC(t).has.call(t,e)||(t.add(e),op(t,"add",e,e)),this}function hW(e,t){t=oi(t);const i=oi(this),{has:r,get:n}=eC(i);let s=r.call(i,e);s||(e=oi(e),s=r.call(i,e));const o=n.call(i,e);return i.set(e,t),s?zb(t,o)&&op(i,"set",e,t):op(i,"add",e,t),this}function dW(e){const t=oi(this),{has:i,get:r}=eC(t);let n=i.call(t,e);n||(e=oi(e),n=i.call(t,e)),r&&r.call(t,e);const s=t.delete(e);return n&&op(t,"delete",e,void 0),s}function pW(){const e=oi(this),t=e.size!==0,i=e.clear();return t&&op(e,"clear",void 0,void 0),i}function AM(e,t){return function(r,n){const s=this,o=s.__v_raw,a=oi(o),l=t?X9:e?t7:AS;return!e&&Ca(a,"iterate",s0),o.forEach((u,c)=>r.call(n,l(u),l(c),s))}}function CM(e,t,i){return function(...r){const n=this.__v_raw,s=oi(n),o=db(s),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,u=n[e](...r),c=i?X9:t?t7:AS;return!t&&Ca(s,"iterate",l?U6:s0),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:a?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function Gp(e){return function(...t){return e==="delete"?!1:this}}function nze(){const e={get(s){return MM(this,s)},get size(){return TM(this)},has:IM,add:cW,set:hW,delete:dW,clear:pW,forEach:AM(!1,!1)},t={get(s){return MM(this,s,!1,!0)},get size(){return TM(this)},has:IM,add:cW,set:hW,delete:dW,clear:pW,forEach:AM(!1,!0)},i={get(s){return MM(this,s,!0)},get size(){return TM(this,!0)},has(s){return IM.call(this,s,!0)},add:Gp("add"),set:Gp("set"),delete:Gp("delete"),clear:Gp("clear"),forEach:AM(!0,!1)},r={get(s){return MM(this,s,!0,!0)},get size(){return TM(this,!0)},has(s){return IM.call(this,s,!0)},add:Gp("add"),set:Gp("set"),delete:Gp("delete"),clear:Gp("clear"),forEach:AM(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=CM(s,!1,!1),i[s]=CM(s,!0,!1),t[s]=CM(s,!1,!0),r[s]=CM(s,!0,!0)}),[e,i,t,r]}const[sze,oze,aze,lze]=nze();function tC(e,t){const i=t?e?lze:aze:e?oze:sze;return(r,n,s)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?r:Reflect.get(Wi(i,n)&&n in r?i:r,n,s)}const uze={get:tC(!1,!1)},cze={get:tC(!1,!0)},hze={get:tC(!0,!1)},dze={get:tC(!0,!0)},Ule=new WeakMap,Vle=new WeakMap,Ble=new WeakMap,zle=new WeakMap;function pze(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function fze(e){return e.__v_skip||!Object.isExtensible(e)?0:pze(SBe(e))}function Hn(e){return Sm(e)?e:rC(e,!1,Dle,uze,Ule)}function e7(e){return rC(e,!1,ize,cze,Vle)}function iC(e){return rC(e,!0,jle,hze,Ble)}function Gle(e){return rC(e,!0,rze,dze,zle)}function rC(e,t,i,r,n){if(!dr(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=n.get(e);if(s)return s;const o=fze(e);if(o===0)return e;const a=new Proxy(e,o===2?r:i);return n.set(e,a),a}function uu(e){return Sm(e)?uu(e.__v_raw):!!(e&&e.__v_isReactive)}function Sm(e){return!!(e&&e.__v_isReadonly)}function Gb(e){return!!(e&&e.__v_isShallow)}function nC(e){return uu(e)||Sm(e)}function oi(e){const t=e&&e.__v_raw;return t?oi(t):e}function wn(e){return l5(e,"__v_skip",!0),e}const AS=e=>dr(e)?Hn(e):e,t7=e=>dr(e)?iC(e):e;function i7(e){nm&&ic&&(e=oi(e),Ple(e.dep||(e.dep=Q9())))}function sC(e,t){e=oi(e);const i=e.dep;i&&V6(i)}function er(e){return!!(e&&e.__v_isRef===!0)}function tt(e){return qle(e,!1)}function r7(e){return qle(e,!0)}function qle(e,t){return er(e)?e:new mze(e,t)}class mze{constructor(t,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?t:oi(t),this._value=i?t:AS(t)}get value(){return i7(this),this._value}set value(t){const i=this.__v_isShallow||Gb(t)||Sm(t);t=i?t:oi(t),zb(t,this._rawValue)&&(this._rawValue=t,this._value=i?t:AS(t),sC(this))}}function Hle(e){sC(e)}function si(e){return er(e)?e.value:e}function Wle(e){return li(e)?e():si(e)}const yze={get:(e,t,i)=>si(Reflect.get(e,t,i)),set:(e,t,i,r)=>{const n=e[t];return er(n)&&!er(i)?(n.value=i,!0):Reflect.set(e,t,i,r)}};function oC(e){return uu(e)?e:new Proxy(e,yze)}class gze{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:i,set:r}=t(()=>i7(this),()=>sC(this));this._get=i,this._set=r}get value(){return this._get()}set value(t){this._set(t)}}function Jle(e){return new gze(e)}function n7(e){const t=Ot(e)?new Array(e.length):{};for(const i in e)t[i]=Yle(e,i);return t}class vze{constructor(t,i,r){this._object=t,this._key=i,this._defaultValue=r,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return zBe(oi(this._object),this._key)}}class bze{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function Zle(e,t,i){return er(e)?e:li(e)?new bze(e):dr(e)&&arguments.length>1?Yle(e,t,i):tt(e)}function Yle(e,t,i){const r=e[t];return er(r)?r:new vze(e,t,i)}class wze{constructor(t,i,r,n){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new jw(t,()=>{this._dirty||(this._dirty=!0,sC(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=r}get value(){const t=oi(this);return i7(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function _ze(e,t,i=!1){let r,n;const s=li(e);return s?(r=e,n=qo):(r=e.get,n=e.set),new wze(r,n,s||!n,i)}function Kle(e,...t){}function Qle(e,t){}function Mh(e,t,i,r){let n;try{n=r?e(...r):e()}catch(s){Bm(s,t,i)}return n}function _a(e,t,i,r){if(li(e)){const s=Mh(e,t,i,r);return s&&Z9(s)&&s.catch(o=>{Bm(o,t,i)}),s}const n=[];for(let s=0;s<e.length;s++)n.push(_a(e[s],t,i,r));return n}function Bm(e,t,i,r=!0){const n=t?t.vnode:null;if(t){let s=t.parent;const o=t.proxy,a=i;for(;s;){const u=s.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](e,o,a)===!1)return}s=s.parent}const l=t.appContext.config.errorHandler;if(l){Mh(l,null,10,[e,o,a]);return}}xze(e,i,n,r)}function xze(e,t,i,r=!0){console.error(e)}let CS=!1,B6=!1;const yo=[];let ph=0;const fb=[];let Od=null,xg=0;const Xle=Promise.resolve();let s7=null;function Bh(e){const t=s7||Xle;return e?t.then(this?e.bind(this):e):t}function Sze(e){let t=ph+1,i=yo.length;for(;t<i;){const r=t+i>>>1;$S(yo[r])<e?t=r+1:i=r}return t}function aC(e){(!yo.length||!yo.includes(e,CS&&e.allowRecurse?ph+1:ph))&&(e.id==null?yo.push(e):yo.splice(Sze(e.id),0,e),eue())}function eue(){!CS&&!B6&&(B6=!0,s7=Xle.then(tue))}function Eze(e){const t=yo.indexOf(e);t>ph&&yo.splice(t,1)}function lC(e){Ot(e)?fb.push(...e):(!Od||!Od.includes(e,e.allowRecurse?xg+1:xg))&&fb.push(e),eue()}function fW(e,t=CS?ph+1:0){for(;t<yo.length;t++){const i=yo[t];i&&i.pre&&(yo.splice(t,1),t--,i())}}function d5(e){if(fb.length){const t=[...new Set(fb)];if(fb.length=0,Od){Od.push(...t);return}for(Od=t,Od.sort((i,r)=>$S(i)-$S(r)),xg=0;xg<Od.length;xg++)Od[xg]();Od=null,xg=0}}const $S=e=>e.id==null?1/0:e.id,Mze=(e,t)=>{const i=$S(e)-$S(t);if(i===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return i};function tue(e){B6=!1,CS=!0,yo.sort(Mze);const t=qo;try{for(ph=0;ph<yo.length;ph++){const i=yo[ph];i&&i.active!==!1&&Mh(i,null,14)}}finally{ph=0,yo.length=0,d5(),CS=!1,s7=null,(yo.length||fb.length)&&tue()}}let Sg,$M=[];function o7(e,t){var i,r;Sg=e,Sg?(Sg.enabled=!0,$M.forEach(({event:n,args:s})=>Sg.emit(n,...s)),$M=[]):typeof window<"u"&&window.HTMLElement&&!((r=(i=window.navigator)==null?void 0:i.userAgent)!=null&&r.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{o7(s,t)}),setTimeout(()=>{Sg||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,$M=[])},3e3)):$M=[]}function Ize(e,t,...i){if(e.isUnmounted)return;const r=e.vnode.props||cr;let n=i;const s=t.startsWith("update:"),o=s&&t.slice(7);if(o&&o in r){const c=`${o==="modelValue"?"model":o}Modifiers`,{number:d,trim:f}=r[c]||cr;f&&(n=i.map(m=>_i(m)?m.trim():m)),d&&(n=i.map(u5))}let a,l=r[a=n0(t)]||r[a=n0(Rn(t))];!l&&s&&(l=r[a=n0(dl(t))]),l&&_a(l,e,6,n);const u=r[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,_a(u,e,6,n)}}function iue(e,t,i=!1){const r=t.emitsCache,n=r.get(e);if(n!==void 0)return n;const s=e.emits;let o={},a=!1;if(!li(e)){const l=u=>{const c=iue(u,t,!0);c&&(a=!0,Ui(o,c))};!i&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!a?(dr(e)&&r.set(e,null),null):(Ot(s)?s.forEach(l=>o[l]=null):Ui(o,s),dr(e)&&r.set(e,o),o)}function uC(e,t){return!e||!Q0(t)?!1:(t=t.slice(2).replace(/Once$/,""),Wi(e,t[0].toLowerCase()+t.slice(1))||Wi(e,dl(t))||Wi(e,t))}let Ms=null,cC=null;function OS(e){const t=Ms;return Ms=e,cC=e&&e.type.__scopeId||null,t}function zm(e){cC=e}function Gm(){cC=null}const rue=e=>kn;function kn(e,t=Ms,i){if(!t||e._n)return e;const r=(...n)=>{r._d&&m5(-1);const s=OS(t);let o;try{o=e(...n)}finally{OS(s),r._d&&m5(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function RT(e){const{type:t,vnode:i,proxy:r,withProxy:n,props:s,propsOptions:[o],slots:a,attrs:l,emit:u,render:c,renderCache:d,data:f,setupState:m,ctx:g,inheritAttrs:v}=e;let b,x;const S=OS(e);try{if(i.shapeFlag&4){const _=n||r;b=cl(c.call(_,_,d,s,m,f,g)),x=l}else{const _=t;b=cl(_.length>1?_(s,{attrs:l,slots:a,emit:u}):_(s,null)),x=t.props?l:Aze(l)}}catch(_){Cx.length=0,Bm(_,e,1),b=gi(zs)}let T=b;if(x&&v!==!1){const _=Object.keys(x),{shapeFlag:M}=T;_.length&&M&7&&(o&&_.some(W9)&&(x=Cze(x,o)),T=gc(T,x))}return i.dirs&&(T=gc(T),T.dirs=T.dirs?T.dirs.concat(i.dirs):i.dirs),i.transition&&(T.transition=i.transition),b=T,OS(S),b}function Tze(e){let t;for(let i=0;i<e.length;i++){const r=e[i];if(Ph(r)){if(r.type!==zs||r.children==="v-if"){if(t)return;t=r}}else return}return t}const Aze=e=>{let t;for(const i in e)(i==="class"||i==="style"||Q0(i))&&((t||(t={}))[i]=e[i]);return t},Cze=(e,t)=>{const i={};for(const r in e)(!W9(r)||!(r.slice(9)in t))&&(i[r]=e[r]);return i};function $ze(e,t,i){const{props:r,children:n,component:s}=e,{props:o,children:a,patchFlag:l}=t,u=s.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return r?mW(r,o,u):!!o;if(l&8){const c=t.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(o[f]!==r[f]&&!uC(u,f))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?mW(r,o,u):!0:!!o;return!1}function mW(e,t,i){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let n=0;n<r.length;n++){const s=r[n];if(t[s]!==e[s]&&!uC(i,s))return!0}return!1}function a7({vnode:e,parent:t},i){for(;t&&t.subTree===e;)(e=t.vnode).el=i,t=t.parent}const nue=e=>e.__isSuspense,Oze={name:"Suspense",__isSuspense:!0,process(e,t,i,r,n,s,o,a,l,u){e==null?Rze(t,i,r,n,s,o,a,l,u):kze(e,t,i,r,n,o,a,l,u)},hydrate:Lze,create:l7,normalize:Pze},sue=Oze;function RS(e,t){const i=e.props&&e.props[t];li(i)&&i()}function Rze(e,t,i,r,n,s,o,a,l){const{p:u,o:{createElement:c}}=l,d=c("div"),f=e.suspense=l7(e,n,r,t,d,i,s,o,a,l);u(null,f.pendingBranch=e.ssContent,d,null,r,f,s,o),f.deps>0?(RS(e,"onPending"),RS(e,"onFallback"),u(null,e.ssFallback,t,i,r,null,s,o),mb(f,e.ssFallback)):f.resolve(!1,!0)}function kze(e,t,i,r,n,s,o,a,{p:l,um:u,o:{createElement:c}}){const d=t.suspense=e.suspense;d.vnode=t,t.el=e.el;const f=t.ssContent,m=t.ssFallback,{activeBranch:g,pendingBranch:v,isInFallback:b,isHydrating:x}=d;if(v)d.pendingBranch=f,rc(f,v)?(l(v,f,d.hiddenContainer,null,n,d,s,o,a),d.deps<=0?d.resolve():b&&(l(g,m,i,r,n,null,s,o,a),mb(d,m))):(d.pendingId++,x?(d.isHydrating=!1,d.activeBranch=v):u(v,n,d),d.deps=0,d.effects.length=0,d.hiddenContainer=c("div"),b?(l(null,f,d.hiddenContainer,null,n,d,s,o,a),d.deps<=0?d.resolve():(l(g,m,i,r,n,null,s,o,a),mb(d,m))):g&&rc(f,g)?(l(g,f,i,r,n,d,s,o,a),d.resolve(!0)):(l(null,f,d.hiddenContainer,null,n,d,s,o,a),d.deps<=0&&d.resolve()));else if(g&&rc(f,g))l(g,f,i,r,n,d,s,o,a),mb(d,f);else if(RS(t,"onPending"),d.pendingBranch=f,d.pendingId++,l(null,f,d.hiddenContainer,null,n,d,s,o,a),d.deps<=0)d.resolve();else{const{timeout:S,pendingId:T}=d;S>0?setTimeout(()=>{d.pendingId===T&&d.fallback(m)},S):S===0&&d.fallback(m)}}function l7(e,t,i,r,n,s,o,a,l,u,c=!1){const{p:d,m:f,um:m,n:g,o:{parentNode:v,remove:b}}=u;let x;const S=Nze(e);S&&t?.pendingBranch&&(x=t.pendingId,t.deps++);const T=e.props?c5(e.props.timeout):void 0,_={vnode:e,parent:t,parentComponent:i,isSVG:o,container:r,hiddenContainer:n,anchor:s,deps:0,pendingId:0,timeout:typeof T=="number"?T:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:c,isUnmounted:!1,effects:[],resolve(M=!1,I=!1){const{vnode:$,activeBranch:L,pendingBranch:B,pendingId:z,effects:W,parentComponent:J,container:K}=_;if(_.isHydrating)_.isHydrating=!1;else if(!M){const A=L&&B.transition&&B.transition.mode==="out-in";A&&(L.transition.afterLeave=()=>{z===_.pendingId&&f(B,K,N,0)});let{anchor:N}=_;L&&(N=g(L),m(L,J,_,!0)),A||f(B,K,N,0)}mb(_,B),_.pendingBranch=null,_.isInFallback=!1;let Q=_.parent,y=!1;for(;Q;){if(Q.pendingBranch){Q.effects.push(...W),y=!0;break}Q=Q.parent}y||lC(W),_.effects=[],S&&t&&t.pendingBranch&&x===t.pendingId&&(t.deps--,t.deps===0&&!I&&t.resolve()),RS($,"onResolve")},fallback(M){if(!_.pendingBranch)return;const{vnode:I,activeBranch:$,parentComponent:L,container:B,isSVG:z}=_;RS(I,"onFallback");const W=g($),J=()=>{_.isInFallback&&(d(null,M,B,W,L,null,z,a,l),mb(_,M))},K=M.transition&&M.transition.mode==="out-in";K&&($.transition.afterLeave=J),_.isInFallback=!0,m($,L,null,!0),K||J()},move(M,I,$){_.activeBranch&&f(_.activeBranch,M,I,$),_.container=M},next(){return _.activeBranch&&g(_.activeBranch)},registerDep(M,I){const $=!!_.pendingBranch;$&&_.deps++;const L=M.vnode.el;M.asyncDep.catch(B=>{Bm(B,M,0)}).then(B=>{if(M.isUnmounted||_.isUnmounted||_.pendingId!==M.suspenseId)return;M.asyncResolved=!0;const{vnode:z}=M;Z6(M,B,!1),L&&(z.el=L);const W=!L&&M.subTree.el;I(M,z,v(L||M.subTree.el),L?null:g(M.subTree),_,o,l),W&&b(W),a7(M,z.el),$&&--_.deps===0&&_.resolve()})},unmount(M,I){_.isUnmounted=!0,_.activeBranch&&m(_.activeBranch,i,M,I),_.pendingBranch&&m(_.pendingBranch,i,M,I)}};return _}function Lze(e,t,i,r,n,s,o,a,l){const u=t.suspense=l7(t,r,i,e.parentNode,document.createElement("div"),null,n,s,o,a,!0),c=l(e,u.pendingBranch=t.ssContent,i,u,s,o);return u.deps===0&&u.resolve(!1,!0),c}function Pze(e){const{shapeFlag:t,children:i}=e,r=t&32;e.ssContent=yW(r?i.default:i),e.ssFallback=r?yW(i.fallback):gi(zs)}function yW(e){let t;if(li(e)){const i=L0&&e._c;i&&(e._d=!1,ht()),e=e(),i&&(e._d=!0,t=ga,Bue())}return Ot(e)&&(e=Tze(e)),e=cl(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(i=>i!==e)),e}function oue(e,t){t&&t.pendingBranch?Ot(e)?t.effects.push(...e):t.effects.push(e):lC(e)}function mb(e,t){e.activeBranch=t;const{vnode:i,parentComponent:r}=e,n=i.el=t.el;r&&r.subTree===i&&(r.vnode.el=n,a7(r,n))}function Nze(e){var t;return((t=e.props)==null?void 0:t.suspensible)!=null&&e.props.suspensible!==!1}function aue(e,t){return D3(e,null,t)}function u7(e,t){return D3(e,null,{flush:"post"})}function lue(e,t){return D3(e,null,{flush:"sync"})}const OM={};function Gn(e,t,i){return D3(e,t,i)}function D3(e,t,{immediate:i,deep:r,flush:n,onTrack:s,onTrigger:o}=cr){var a;const l=Q4()===((a=Bn)==null?void 0:a.scope)?Bn:null;let u,c=!1,d=!1;if(er(e)?(u=()=>e.value,c=Gb(e)):uu(e)?(u=()=>e,r=!0):Ot(e)?(d=!0,c=e.some(_=>uu(_)||Gb(_)),u=()=>e.map(_=>{if(er(_))return _.value;if(uu(_))return Ug(_);if(li(_))return Mh(_,l,2)})):li(e)?t?u=()=>Mh(e,l,2):u=()=>{if(!(l&&l.isUnmounted))return f&&f(),_a(e,l,3,[m])}:u=qo,t&&r){const _=u;u=()=>Ug(_())}let f,m=_=>{f=S.onStop=()=>{Mh(_,l,4)}},g;if(qb)if(m=qo,t?i&&_a(t,l,3,[u(),d?[]:void 0,m]):u(),n==="sync"){const _=L7();g=_.__watcherHandles||(_.__watcherHandles=[])}else return qo;let v=d?new Array(e.length).fill(OM):OM;const b=()=>{if(S.active)if(t){const _=S.run();(r||c||(d?_.some((M,I)=>zb(M,v[I])):zb(_,v)))&&(f&&f(),_a(t,l,3,[_,v===OM?void 0:d&&v[0]===OM?[]:v,m]),v=_)}else S.run()};b.allowRecurse=!!t;let x;n==="sync"?x=b:n==="post"?x=()=>Us(b,l&&l.suspense):(b.pre=!0,l&&(b.id=l.uid),x=()=>aC(b));const S=new jw(u,x);t?i?b():v=S.run():n==="post"?Us(S.run.bind(S),l&&l.suspense):S.run();const T=()=>{S.stop(),l&&l.scope&&J9(l.scope.effects,S)};return g&&g.push(T),T}function Fze(e,t,i){const r=this.proxy,n=_i(e)?e.includes(".")?uue(r,e):()=>r[e]:e.bind(r,r);let s;li(t)?s=t:(s=t.handler,i=t);const o=Bn;Mm(this);const a=D3(n,s.bind(r),i);return o?Mm(o):om(),a}function uue(e,t){const i=t.split(".");return()=>{let r=e;for(let n=0;n<i.length&&r;n++)r=r[i[n]];return r}}function Ug(e,t){if(!dr(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),er(e))Ug(e.value,t);else if(Ot(e))for(let i=0;i<e.length;i++)Ug(e[i],t);else if(X0(e)||db(e))e.forEach(i=>{Ug(i,t)});else if(Ele(e))for(const i in e)Ug(e[i],t);return e}function sr(e,t){const i=Ms;if(i===null)return e;const r=gC(i)||i.proxy,n=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[o,a,l,u=cr]=t[s];o&&(li(o)&&(o={mounted:o,updated:o}),o.deep&&Ug(a),n.push({dir:o,instance:r,value:a,oldValue:void 0,arg:l,modifiers:u}))}return e}function ah(e,t,i,r){const n=e.dirs,s=t&&t.dirs;for(let o=0;o<n.length;o++){const a=n[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(Uw(),_a(l,i,8,[e.el,a,e,t]),Vw())}}function hC(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Eo(()=>{e.isMounted=!0}),zh(()=>{e.isUnmounting=!0}),e}const Fl=[Function,Array],dC={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Fl,onEnter:Fl,onAfterEnter:Fl,onEnterCancelled:Fl,onBeforeLeave:Fl,onLeave:Fl,onAfterLeave:Fl,onLeaveCancelled:Fl,onBeforeAppear:Fl,onAppear:Fl,onAfterAppear:Fl,onAppearCancelled:Fl},Dze={name:"BaseTransition",props:dC,setup(e,{slots:t}){const i=Cs(),r=hC();let n;return()=>{const s=t.default&&j3(t.default(),!0);if(!s||!s.length)return;let o=s[0];if(s.length>1){for(const v of s)if(v.type!==zs){o=v;break}}const a=oi(e),{mode:l}=a;if(r.isLeaving)return sR(o);const u=gW(o);if(!u)return sR(o);const c=k0(u,a,r,i);Em(u,c);const d=i.subTree,f=d&&gW(d);let m=!1;const{getTransitionKey:g}=u.type;if(g){const v=g();n===void 0?n=v:v!==n&&(n=v,m=!0)}if(f&&f.type!==zs&&(!rc(u,f)||m)){const v=k0(f,a,r,i);if(Em(f,v),l==="out-in")return r.isLeaving=!0,v.afterLeave=()=>{r.isLeaving=!1,i.update.active!==!1&&i.update()},sR(o);l==="in-out"&&u.type!==zs&&(v.delayLeave=(b,x,S)=>{const T=cue(r,f);T[String(f.key)]=f,b._leaveCb=()=>{x(),b._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=S})}return o}}},c7=Dze;function cue(e,t){const{leavingVNodes:i}=e;let r=i.get(t.type);return r||(r=Object.create(null),i.set(t.type,r)),r}function k0(e,t,i,r){const{appear:n,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:d,onLeave:f,onAfterLeave:m,onLeaveCancelled:g,onBeforeAppear:v,onAppear:b,onAfterAppear:x,onAppearCancelled:S}=t,T=String(e.key),_=cue(i,e),M=(L,B)=>{L&&_a(L,r,9,B)},I=(L,B)=>{const z=B[1];M(L,B),Ot(L)?L.every(W=>W.length<=1)&&z():L.length<=1&&z()},$={mode:s,persisted:o,beforeEnter(L){let B=a;if(!i.isMounted)if(n)B=v||a;else return;L._leaveCb&&L._leaveCb(!0);const z=_[T];z&&rc(e,z)&&z.el._leaveCb&&z.el._leaveCb(),M(B,[L])},enter(L){let B=l,z=u,W=c;if(!i.isMounted)if(n)B=b||l,z=x||u,W=S||c;else return;let J=!1;const K=L._enterCb=Q=>{J||(J=!0,Q?M(W,[L]):M(z,[L]),$.delayedLeave&&$.delayedLeave(),L._enterCb=void 0)};B?I(B,[L,K]):K()},leave(L,B){const z=String(e.key);if(L._enterCb&&L._enterCb(!0),i.isUnmounting)return B();M(d,[L]);let W=!1;const J=L._leaveCb=K=>{W||(W=!0,B(),K?M(g,[L]):M(m,[L]),L._leaveCb=void 0,_[z]===e&&delete _[z])};_[z]=e,f?I(f,[L,J]):J()},clone(L){return k0(L,t,i,r)}};return $}function sR(e){if(U3(e))return e=gc(e),e.children=null,e}function gW(e){return U3(e)?e.children?e.children[0]:void 0:e}function Em(e,t){e.shapeFlag&6&&e.component?Em(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function j3(e,t=!1,i){let r=[],n=0;for(let s=0;s<e.length;s++){let o=e[s];const a=i==null?o.key:String(i)+String(o.key!=null?o.key:s);o.type===Tr?(o.patchFlag&128&&n++,r=r.concat(j3(o.children,t,a))):(t||o.type!==zs)&&r.push(a!=null?gc(o,{key:a}):o)}if(n>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function Vi(e,t){return li(e)?(()=>Ui({name:e.name},t,{setup:e}))():e}const o0=e=>!!e.type.__asyncLoader;function h7(e){li(e)&&(e={loader:e});const{loader:t,loadingComponent:i,errorComponent:r,delay:n=200,timeout:s,suspensible:o=!0,onError:a}=e;let l=null,u,c=0;const d=()=>(c++,l=null,f()),f=()=>{let m;return l||(m=l=t().catch(g=>{if(g=g instanceof Error?g:new Error(String(g)),a)return new Promise((v,b)=>{a(g,()=>v(d()),()=>b(g),c+1)});throw g}).then(g=>m!==l&&l?l:(g&&(g.__esModule||g[Symbol.toStringTag]==="Module")&&(g=g.default),u=g,g)))};return Vi({name:"AsyncComponentWrapper",__asyncLoader:f,get __asyncResolved(){return u},setup(){const m=Bn;if(u)return()=>oR(u,m);const g=S=>{l=null,Bm(S,m,13,!r)};if(o&&m.suspense||qb)return f().then(S=>()=>oR(S,m)).catch(S=>(g(S),()=>r?gi(r,{error:S}):null));const v=tt(!1),b=tt(),x=tt(!!n);return n&&setTimeout(()=>{x.value=!1},n),s!=null&&setTimeout(()=>{if(!v.value&&!b.value){const S=new Error(`Async component timed out after ${s}ms.`);g(S),b.value=S}},s),f().then(()=>{v.value=!0,m.parent&&U3(m.parent.vnode)&&aC(m.parent.update)}).catch(S=>{g(S),b.value=S}),()=>{if(v.value&&u)return oR(u,m);if(b.value&&r)return gi(r,{error:b.value});if(i&&!x.value)return gi(i)}}})}function oR(e,t){const{ref:i,props:r,children:n,ce:s}=t.vnode,o=gi(e,r,n);return o.ref=i,o.ce=s,delete t.vnode.ce,o}const U3=e=>e.type.__isKeepAlive,jze={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const i=Cs(),r=i.ctx;if(!r.renderer)return()=>{const S=t.default&&t.default();return S&&S.length===1?S[0]:S};const n=new Map,s=new Set;let o=null;const a=i.suspense,{renderer:{p:l,m:u,um:c,o:{createElement:d}}}=r,f=d("div");r.activate=(S,T,_,M,I)=>{const $=S.component;u(S,T,_,0,a),l($.vnode,S,T,_,$,a,M,S.slotScopeIds,I),Us(()=>{$.isDeactivated=!1,$.a&&pb($.a);const L=S.props&&S.props.onVnodeMounted;L&&ca(L,$.parent,S)},a)},r.deactivate=S=>{const T=S.component;u(S,f,null,1,a),Us(()=>{T.da&&pb(T.da);const _=S.props&&S.props.onVnodeUnmounted;_&&ca(_,T.parent,S),T.isDeactivated=!0},a)};function m(S){aR(S),c(S,i,a,!0)}function g(S){n.forEach((T,_)=>{const M=K6(T.type);M&&(!S||!S(M))&&v(_)})}function v(S){const T=n.get(S);!o||!rc(T,o)?m(T):o&&aR(o),n.delete(S),s.delete(S)}Gn(()=>[e.include,e.exclude],([S,T])=>{S&&g(_=>W2(S,_)),T&&g(_=>!W2(T,_))},{flush:"post",deep:!0});let b=null;const x=()=>{b!=null&&n.set(b,lR(i.subTree))};return Eo(x),Bw(x),zh(()=>{n.forEach(S=>{const{subTree:T,suspense:_}=i,M=lR(T);if(S.type===M.type&&S.key===M.key){aR(M);const I=M.component.da;I&&Us(I,_);return}m(S)})}),()=>{if(b=null,!t.default)return null;const S=t.default(),T=S[0];if(S.length>1)return o=null,S;if(!Ph(T)||!(T.shapeFlag&4)&&!(T.shapeFlag&128))return o=null,T;let _=lR(T);const M=_.type,I=K6(o0(_)?_.type.__asyncResolved||{}:M),{include:$,exclude:L,max:B}=e;if($&&(!I||!W2($,I))||L&&I&&W2(L,I))return o=_,T;const z=_.key==null?M:_.key,W=n.get(z);return _.el&&(_=gc(_),T.shapeFlag&128&&(T.ssContent=_)),b=z,W?(_.el=W.el,_.component=W.component,_.transition&&Em(_,_.transition),_.shapeFlag|=512,s.delete(z),s.add(z)):(s.add(z),B&&s.size>parseInt(B,10)&&v(s.values().next().value)),_.shapeFlag|=256,o=_,nue(T.type)?T:_}}},hue=jze;function W2(e,t){return Ot(e)?e.some(i=>W2(i,t)):_i(e)?e.split(",").includes(t):xBe(e)?e.test(t):!1}function d7(e,t){due(e,"a",t)}function p7(e,t){due(e,"da",t)}function due(e,t,i=Bn){const r=e.__wdc||(e.__wdc=()=>{let n=i;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(pC(t,r,i),i){let n=i.parent;for(;n&&n.parent;)U3(n.parent.vnode)&&Uze(r,t,i,n),n=n.parent}}function Uze(e,t,i,r){const n=pC(t,e,r,!0);e1(()=>{J9(r[t],n)},i)}function aR(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function lR(e){return e.shapeFlag&128?e.ssContent:e}function pC(e,t,i=Bn,r=!1){if(i){const n=i[e]||(i[e]=[]),s=t.__weh||(t.__weh=(...o)=>{if(i.isUnmounted)return;Uw(),Mm(i);const a=_a(t,i,e,o);return om(),Vw(),a});return r?n.unshift(s):n.push(s),s}}const bp=e=>(t,i=Bn)=>(!qb||e==="sp")&&pC(e,(...r)=>t(...r),i),fC=bp("bm"),Eo=bp("m"),f7=bp("bu"),Bw=bp("u"),zh=bp("bum"),e1=bp("um"),m7=bp("sp"),y7=bp("rtg"),g7=bp("rtc");function v7(e,t=Bn){pC("ec",e,t)}const b7="components",Vze="directives";function Cn(e,t){return _7(b7,e,!0,t)||e}const pue=Symbol.for("v-ndc");function w7(e){return _i(e)?_7(b7,e,!1)||e:e||pue}function mr(e){return _7(Vze,e)}function _7(e,t,i=!0,r=!1){const n=Ms||Bn;if(n){const s=n.type;if(e===b7){const a=K6(s,!1);if(a&&(a===t||a===Rn(t)||a===Um(Rn(t))))return s}const o=vW(n[e]||s[e],t)||vW(n.appContext[e],t);return!o&&r?s:o}}function vW(e,t){return e&&(e[t]||e[Rn(t)]||e[Um(Rn(t))])}function qm(e,t,i,r){let n;const s=i&&i[r];if(Ot(e)||_i(e)){n=new Array(e.length);for(let o=0,a=e.length;o<a;o++)n[o]=t(e[o],o,void 0,s&&s[o])}else if(typeof e=="number"){n=new Array(e);for(let o=0;o<e;o++)n[o]=t(o+1,o,void 0,s&&s[o])}else if(dr(e))if(e[Symbol.iterator])n=Array.from(e,(o,a)=>t(o,a,void 0,s&&s[a]));else{const o=Object.keys(e);n=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const u=o[a];n[a]=t(e[u],u,a,s&&s[a])}}else n=[];return i&&(i[r]=n),n}function fue(e,t){for(let i=0;i<t.length;i++){const r=t[i];if(Ot(r))for(let n=0;n<r.length;n++)e[r[n].name]=r[n].fn;else r&&(e[r.name]=r.key?(...n)=>{const s=r.fn(...n);return s&&(s.key=r.key),s}:r.fn)}return e}function ac(e,t,i={},r,n){if(Ms.isCE||Ms.parent&&o0(Ms.parent)&&Ms.parent.isCE)return t!=="default"&&(i.name=t),gi("slot",i,r&&r());let s=e[t];s&&s._c&&(s._d=!1),ht();const o=s&&mue(s(i)),a=Ur(Tr,{key:i.key||o&&o.key||`_${t}`},o||(r?r():[]),o&&e._===1?64:-2);return!n&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function mue(e){return e.some(t=>Ph(t)?!(t.type===zs||t.type===Tr&&!mue(t.children)):!0)?e:null}function yue(e,t){const i={};for(const r in e)i[t&&/[A-Z]/.test(r)?`on:${r}`:n0(r)]=e[r];return i}const z6=e=>e?Jue(e)?gC(e)||e.proxy:z6(e.parent):null,Tx=Ui(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>z6(e.parent),$root:e=>z6(e.root),$emit:e=>e.emit,$options:e=>x7(e),$forceUpdate:e=>e.f||(e.f=()=>aC(e.update)),$nextTick:e=>e.n||(e.n=Bh.bind(e.proxy)),$watch:e=>Fze.bind(e)}),uR=(e,t)=>e!==cr&&!e.__isScriptSetup&&Wi(e,t),G6={get({_:e},t){const{ctx:i,setupState:r,data:n,props:s,accessCache:o,type:a,appContext:l}=e;let u;if(t[0]!=="$"){const m=o[t];if(m!==void 0)switch(m){case 1:return r[t];case 2:return n[t];case 4:return i[t];case 3:return s[t]}else{if(uR(r,t))return o[t]=1,r[t];if(n!==cr&&Wi(n,t))return o[t]=2,n[t];if((u=e.propsOptions[0])&&Wi(u,t))return o[t]=3,s[t];if(i!==cr&&Wi(i,t))return o[t]=4,i[t];q6&&(o[t]=0)}}const c=Tx[t];let d,f;if(c)return t==="$attrs"&&Ca(e,"get",t),c(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(i!==cr&&Wi(i,t))return o[t]=4,i[t];if(f=l.config.globalProperties,Wi(f,t))return f[t]},set({_:e},t,i){const{data:r,setupState:n,ctx:s}=e;return uR(n,t)?(n[t]=i,!0):r!==cr&&Wi(r,t)?(r[t]=i,!0):Wi(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:r,appContext:n,propsOptions:s}},o){let a;return!!i[o]||e!==cr&&Wi(e,o)||uR(t,o)||(a=s[0])&&Wi(a,o)||Wi(r,o)||Wi(Tx,o)||Wi(n.config.globalProperties,o)},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:Wi(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}},Bze=Ui({},G6,{get(e,t){if(t!==Symbol.unscopables)return G6.get(e,t,e)},has(e,t){return t[0]!=="_"&&!ABe(t)}});function gue(){return null}function vue(){return null}function bue(e){}function wue(e){}function _ue(){return null}function xue(){}function Sue(e,t){return null}function Eue(){return Tue().slots}function Mue(){return Tue().attrs}function Iue(e,t,i){const r=Cs();if(i&&i.local){const n=tt(e[t]);return Gn(()=>e[t],s=>n.value=s),Gn(n,s=>{s!==e[t]&&r.emit(`update:${t}`,s)}),n}else return{__v_isRef:!0,get value(){return e[t]},set value(n){r.emit(`update:${t}`,n)}}}function Tue(){const e=Cs();return e.setupContext||(e.setupContext=Que(e))}function kS(e){return Ot(e)?e.reduce((t,i)=>(t[i]=null,t),{}):e}function Aue(e,t){const i=kS(e);for(const r in t){if(r.startsWith("__skip"))continue;let n=i[r];n?Ot(n)||li(n)?n=i[r]={type:n,default:t[r]}:n.default=t[r]:n===null&&(n=i[r]={default:t[r]}),n&&t[`__skip_${r}`]&&(n.skipFactory=!0)}return i}function Cue(e,t){return!e||!t?e||t:Ot(e)&&Ot(t)?e.concat(t):Ui({},kS(e),kS(t))}function $ue(e,t){const i={};for(const r in e)t.includes(r)||Object.defineProperty(i,r,{enumerable:!0,get:()=>e[r]});return i}function Oue(e){const t=Cs();let i=e();return om(),Z9(i)&&(i=i.catch(r=>{throw Mm(t),r})),[i,()=>Mm(t)]}let q6=!0;function zze(e){const t=x7(e),i=e.proxy,r=e.ctx;q6=!1,t.beforeCreate&&bW(t.beforeCreate,e,"bc");const{data:n,computed:s,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:d,mounted:f,beforeUpdate:m,updated:g,activated:v,deactivated:b,beforeDestroy:x,beforeUnmount:S,destroyed:T,unmounted:_,render:M,renderTracked:I,renderTriggered:$,errorCaptured:L,serverPrefetch:B,expose:z,inheritAttrs:W,components:J,directives:K,filters:Q}=t;if(u&&Gze(u,r,null),o)for(const N in o){const j=o[N];li(j)&&(r[N]=j.bind(i))}if(n){const N=n.call(i,i);dr(N)&&(e.data=Hn(N))}if(q6=!0,s)for(const N in s){const j=s[N],oe=li(j)?j.bind(i,i):li(j.get)?j.get.bind(i,i):qo,q=!li(j)&&li(j.set)?j.set.bind(i):qo,de=$i({get:oe,set:q});Object.defineProperty(r,N,{enumerable:!0,configurable:!0,get:()=>de.value,set:re=>de.value=re})}if(a)for(const N in a)Rue(a[N],r,i,N);if(l){const N=li(l)?l.call(i):l;Reflect.ownKeys(N).forEach(j=>{S7(j,N[j])})}c&&bW(c,e,"c");function A(N,j){Ot(j)?j.forEach(oe=>N(oe.bind(i))):j&&N(j.bind(i))}if(A(fC,d),A(Eo,f),A(f7,m),A(Bw,g),A(d7,v),A(p7,b),A(v7,L),A(g7,I),A(y7,$),A(zh,S),A(e1,_),A(m7,B),Ot(z))if(z.length){const N=e.exposed||(e.exposed={});z.forEach(j=>{Object.defineProperty(N,j,{get:()=>i[j],set:oe=>i[j]=oe})})}else e.exposed||(e.exposed={});M&&e.render===qo&&(e.render=M),W!=null&&(e.inheritAttrs=W),J&&(e.components=J),K&&(e.directives=K)}function Gze(e,t,i=qo){Ot(e)&&(e=H6(e));for(const r in e){const n=e[r];let s;dr(n)?"default"in n?s=hs(n.from||r,n.default,!0):s=hs(n.from||r):s=hs(n),er(s)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[r]=s}}function bW(e,t,i){_a(Ot(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,i)}function Rue(e,t,i,r){const n=r.includes(".")?uue(i,r):()=>i[r];if(_i(e)){const s=t[e];li(s)&&Gn(n,s)}else if(li(e))Gn(n,e.bind(i));else if(dr(e))if(Ot(e))e.forEach(s=>Rue(s,t,i,r));else{const s=li(e.handler)?e.handler.bind(i):t[e.handler];li(s)&&Gn(n,s,e)}}function x7(e){const t=e.type,{mixins:i,extends:r}=t,{mixins:n,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(t);let l;return a?l=a:!n.length&&!i&&!r?l=t:(l={},n.length&&n.forEach(u=>p5(l,u,o,!0)),p5(l,t,o)),dr(t)&&s.set(t,l),l}function p5(e,t,i,r=!1){const{mixins:n,extends:s}=t;s&&p5(e,s,i,!0),n&&n.forEach(o=>p5(e,o,i,!0));for(const o in t)if(!(r&&o==="expose")){const a=qze[o]||i&&i[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const qze={data:wW,props:_W,emits:_W,methods:J2,computed:J2,beforeCreate:No,created:No,beforeMount:No,mounted:No,beforeUpdate:No,updated:No,beforeDestroy:No,beforeUnmount:No,destroyed:No,unmounted:No,activated:No,deactivated:No,errorCaptured:No,serverPrefetch:No,components:J2,directives:J2,watch:Wze,provide:wW,inject:Hze};function wW(e,t){return t?e?function(){return Ui(li(e)?e.call(this,this):e,li(t)?t.call(this,this):t)}:t:e}function Hze(e,t){return J2(H6(e),H6(t))}function H6(e){if(Ot(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function No(e,t){return e?[...new Set([].concat(e,t))]:t}function J2(e,t){return e?Ui(Object.create(null),e,t):t}function _W(e,t){return e?Ot(e)&&Ot(t)?[...new Set([...e,...t])]:Ui(Object.create(null),kS(e),kS(t??{})):t}function Wze(e,t){if(!e)return t;if(!t)return e;const i=Ui(Object.create(null),e);for(const r in t)i[r]=No(e[r],t[r]);return i}function kue(){return{app:null,config:{isNativeTag:OT,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Jze=0;function Zze(e,t){return function(r,n=null){li(r)||(r=Ui({},r)),n!=null&&!dr(n)&&(n=null);const s=kue(),o=new Set;let a=!1;const l=s.app={_uid:Jze++,_component:r,_props:n,_container:null,_context:s,_instance:null,version:N7,get config(){return s.config},set config(u){},use(u,...c){return o.has(u)||(u&&li(u.install)?(o.add(u),u.install(l,...c)):li(u)&&(o.add(u),u(l,...c))),l},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),l},component(u,c){return c?(s.components[u]=c,l):s.components[u]},directive(u,c){return c?(s.directives[u]=c,l):s.directives[u]},mount(u,c,d){if(!a){const f=gi(r,n);return f.appContext=s,c&&t?t(f,u):e(f,u,d),a=!0,l._container=u,u.__vue_app__=l,gC(f.component)||f.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,c){return s.provides[u]=c,l},runWithContext(u){LS=l;try{return u()}finally{LS=null}}};return l}}let LS=null;function S7(e,t){if(Bn){let i=Bn.provides;const r=Bn.parent&&Bn.parent.provides;r===i&&(i=Bn.provides=Object.create(r)),i[e]=t}}function hs(e,t,i=!1){const r=Bn||Ms;if(r||LS){const n=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:LS._context.provides;if(n&&e in n)return n[e];if(arguments.length>1)return i&&li(t)?t.call(r&&r.proxy):t}}function Lue(){return!!(Bn||Ms||LS)}function Yze(e,t,i,r=!1){const n={},s={};l5(s,mC,1),e.propsDefaults=Object.create(null),Pue(e,t,n,s);for(const o in e.propsOptions[0])o in n||(n[o]=void 0);i?e.props=r?n:e7(n):e.type.props?e.props=n:e.props=s,e.attrs=s}function Kze(e,t,i,r){const{props:n,attrs:s,vnode:{patchFlag:o}}=e,a=oi(n),[l]=e.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const c=e.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];if(uC(e.emitsOptions,f))continue;const m=t[f];if(l)if(Wi(s,f))m!==s[f]&&(s[f]=m,u=!0);else{const g=Rn(f);n[g]=W6(l,a,g,m,e,!1)}else m!==s[f]&&(s[f]=m,u=!0)}}}else{Pue(e,t,n,s)&&(u=!0);let c;for(const d in a)(!t||!Wi(t,d)&&((c=dl(d))===d||!Wi(t,c)))&&(l?i&&(i[d]!==void 0||i[c]!==void 0)&&(n[d]=W6(l,a,d,void 0,e,!0)):delete n[d]);if(s!==a)for(const d in s)(!t||!Wi(t,d))&&(delete s[d],u=!0)}u&&op(e,"set","$attrs")}function Pue(e,t,i,r){const[n,s]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(r0(l))continue;const u=t[l];let c;n&&Wi(n,c=Rn(l))?!s||!s.includes(c)?i[c]=u:(a||(a={}))[c]=u:uC(e.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(s){const l=oi(i),u=a||cr;for(let c=0;c<s.length;c++){const d=s[c];i[d]=W6(n,l,d,u[d],e,!Wi(u,d))}}return o}function W6(e,t,i,r,n,s){const o=e[i];if(o!=null){const a=Wi(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&li(l)){const{propsDefaults:u}=n;i in u?r=u[i]:(Mm(n),r=u[i]=l.call(null,t),om())}else r=l}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===dl(i))&&(r=!0))}return r}function Nue(e,t,i=!1){const r=t.propsCache,n=r.get(e);if(n)return n;const s=e.props,o={},a=[];let l=!1;if(!li(e)){const c=d=>{l=!0;const[f,m]=Nue(d,t,!0);Ui(o,f),m&&a.push(...m)};!i&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!s&&!l)return dr(e)&&r.set(e,hb),hb;if(Ot(s))for(let c=0;c<s.length;c++){const d=Rn(s[c]);xW(d)&&(o[d]=cr)}else if(s)for(const c in s){const d=Rn(c);if(xW(d)){const f=s[c],m=o[d]=Ot(f)||li(f)?{type:f}:Ui({},f);if(m){const g=MW(Boolean,m.type),v=MW(String,m.type);m[0]=g>-1,m[1]=v<0||g<v,(g>-1||Wi(m,"default"))&&a.push(d)}}}const u=[o,a];return dr(e)&&r.set(e,u),u}function xW(e){return e[0]!=="$"}function SW(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function EW(e,t){return SW(e)===SW(t)}function MW(e,t){return Ot(t)?t.findIndex(i=>EW(i,e)):li(t)&&EW(t,e)?0:-1}const Fue=e=>e[0]==="_"||e==="$stable",E7=e=>Ot(e)?e.map(cl):[cl(e)],Qze=(e,t,i)=>{if(t._n)return t;const r=kn((...n)=>E7(t(...n)),i);return r._c=!1,r},Due=(e,t,i)=>{const r=e._ctx;for(const n in e){if(Fue(n))continue;const s=e[n];if(li(s))t[n]=Qze(n,s,r);else if(s!=null){const o=E7(s);t[n]=()=>o}}},jue=(e,t)=>{const i=E7(t);e.slots.default=()=>i},Xze=(e,t)=>{if(e.vnode.shapeFlag&32){const i=t._;i?(e.slots=oi(t),l5(t,"_",i)):Due(t,e.slots={})}else e.slots={},t&&jue(e,t);l5(e.slots,mC,1)},eGe=(e,t,i)=>{const{vnode:r,slots:n}=e;let s=!0,o=cr;if(r.shapeFlag&32){const a=t._;a?i&&a===1?s=!1:(Ui(n,t),!i&&a===1&&delete n._):(s=!t.$stable,Due(t,n)),o=t}else t&&(jue(e,t),o={default:1});if(s)for(const a in n)!Fue(a)&&!(a in o)&&delete n[a]};function f5(e,t,i,r,n=!1){if(Ot(e)){e.forEach((f,m)=>f5(f,t&&(Ot(t)?t[m]:t),i,r,n));return}if(o0(r)&&!n)return;const s=r.shapeFlag&4?gC(r.component)||r.component.proxy:r.el,o=n?null:s,{i:a,r:l}=e,u=t&&t.r,c=a.refs===cr?a.refs={}:a.refs,d=a.setupState;if(u!=null&&u!==l&&(_i(u)?(c[u]=null,Wi(d,u)&&(d[u]=null)):er(u)&&(u.value=null)),li(l))Mh(l,a,12,[o,c]);else{const f=_i(l),m=er(l);if(f||m){const g=()=>{if(e.f){const v=f?Wi(d,l)?d[l]:c[l]:l.value;n?Ot(v)&&J9(v,s):Ot(v)?v.includes(s)||v.push(s):f?(c[l]=[s],Wi(d,l)&&(d[l]=c[l])):(l.value=[s],e.k&&(c[e.k]=l.value))}else f?(c[l]=o,Wi(d,l)&&(d[l]=o)):m&&(l.value=o,e.k&&(c[e.k]=o))};o?(g.id=-1,Us(g,i)):g()}}}let qp=!1;const RM=e=>/svg/.test(e.namespaceURI)&&e.tagName!=="foreignObject",kM=e=>e.nodeType===8;function tGe(e){const{mt:t,p:i,o:{patchProp:r,createText:n,nextSibling:s,parentNode:o,remove:a,insert:l,createComment:u}}=e,c=(x,S)=>{if(!S.hasChildNodes()){i(null,x,S),d5(),S._vnode=x;return}qp=!1,d(S.firstChild,x,null,null,null),d5(),S._vnode=x,qp&&console.error("Hydration completed but contains mismatches.")},d=(x,S,T,_,M,I=!1)=>{const $=kM(x)&&x.data==="[",L=()=>v(x,S,T,_,M,$),{type:B,ref:z,shapeFlag:W,patchFlag:J}=S;let K=x.nodeType;S.el=x,J===-2&&(I=!1,S.dynamicChildren=null);let Q=null;switch(B){case ap:K!==3?S.children===""?(l(S.el=n(""),o(x),x),Q=x):Q=L():(x.data!==S.children&&(qp=!0,x.data=S.children),Q=s(x));break;case zs:K!==8||$?Q=L():Q=s(x);break;case sm:if($&&(x=s(x),K=x.nodeType),K===1||K===3){Q=x;const y=!S.children.length;for(let A=0;A<S.staticCount;A++)y&&(S.children+=Q.nodeType===1?Q.outerHTML:Q.data),A===S.staticCount-1&&(S.anchor=Q),Q=s(Q);return $?s(Q):Q}else L();break;case Tr:$?Q=g(x,S,T,_,M,I):Q=L();break;default:if(W&1)K!==1||S.type.toLowerCase()!==x.tagName.toLowerCase()?Q=L():Q=f(x,S,T,_,M,I);else if(W&6){S.slotScopeIds=M;const y=o(x);if(t(S,y,null,T,_,RM(y),I),Q=$?b(x):s(x),Q&&kM(Q)&&Q.data==="teleport end"&&(Q=s(Q)),o0(S)){let A;$?(A=gi(Tr),A.anchor=Q?Q.previousSibling:y.lastChild):A=x.nodeType===3?Ih(""):gi("div"),A.el=x,S.component.subTree=A}}else W&64?K!==8?Q=L():Q=S.type.hydrate(x,S,T,_,M,I,e,m):W&128&&(Q=S.type.hydrate(x,S,T,_,RM(o(x)),M,I,e,d))}return z!=null&&f5(z,null,_,S),Q},f=(x,S,T,_,M,I)=>{I=I||!!S.dynamicChildren;const{type:$,props:L,patchFlag:B,shapeFlag:z,dirs:W}=S,J=$==="input"&&W||$==="option";if(J||B!==-1){if(W&&ah(S,null,T,"created"),L)if(J||!I||B&48)for(const Q in L)(J&&Q.endsWith("value")||Q0(Q)&&!r0(Q))&&r(x,Q,null,L[Q],!1,void 0,T);else L.onClick&&r(x,"onClick",null,L.onClick,!1,void 0,T);let K;if((K=L&&L.onVnodeBeforeMount)&&ca(K,T,S),W&&ah(S,null,T,"beforeMount"),((K=L&&L.onVnodeMounted)||W)&&oue(()=>{K&&ca(K,T,S),W&&ah(S,null,T,"mounted")},_),z&16&&!(L&&(L.innerHTML||L.textContent))){let Q=m(x.firstChild,S,x,T,_,M,I);for(;Q;){qp=!0;const y=Q;Q=Q.nextSibling,a(y)}}else z&8&&x.textContent!==S.children&&(qp=!0,x.textContent=S.children)}return x.nextSibling},m=(x,S,T,_,M,I,$)=>{$=$||!!S.dynamicChildren;const L=S.children,B=L.length;for(let z=0;z<B;z++){const W=$?L[z]:L[z]=cl(L[z]);if(x)x=d(x,W,_,M,I,$);else{if(W.type===ap&&!W.children)continue;qp=!0,i(null,W,T,null,_,M,RM(T),I)}}return x},g=(x,S,T,_,M,I)=>{const{slotScopeIds:$}=S;$&&(M=M?M.concat($):$);const L=o(x),B=m(s(x),S,L,T,_,M,I);return B&&kM(B)&&B.data==="]"?s(S.anchor=B):(qp=!0,l(S.anchor=u("]"),L,B),B)},v=(x,S,T,_,M,I)=>{if(qp=!0,S.el=null,I){const B=b(x);for(;;){const z=s(x);if(z&&z!==B)a(z);else break}}const $=s(x),L=o(x);return a(x),i(null,S,L,$,T,_,RM(L),M),$},b=x=>{let S=0;for(;x;)if(x=s(x),x&&kM(x)&&(x.data==="["&&S++,x.data==="]")){if(S===0)return s(x);S--}return x};return[c,d]}const Us=oue;function M7(e){return Uue(e)}function I7(e){return Uue(e,tGe)}function Uue(e,t){const i=D6();i.__VUE__=!0;const{insert:r,remove:n,patchProp:s,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:f,setScopeId:m=qo,insertStaticContent:g}=e,v=(H,V,D,ne=null,ye=null,ae=null,U=!1,le=null,ie=!!V.dynamicChildren)=>{if(H===V)return;H&&!rc(H,V)&&(ne=Oe(H),re(H,ye,ae,!0),H=null),V.patchFlag===-2&&(ie=!1,V.dynamicChildren=null);const{type:k,ref:O,shapeFlag:C}=V;switch(k){case ap:b(H,V,D,ne);break;case zs:x(H,V,D,ne);break;case sm:H==null&&S(V,D,ne,U);break;case Tr:J(H,V,D,ne,ye,ae,U,le,ie);break;default:C&1?M(H,V,D,ne,ye,ae,U,le,ie):C&6?K(H,V,D,ne,ye,ae,U,le,ie):(C&64||C&128)&&k.process(H,V,D,ne,ye,ae,U,le,ie,we)}O!=null&&ye&&f5(O,H&&H.ref,ae,V||H,!V)},b=(H,V,D,ne)=>{if(H==null)r(V.el=a(V.children),D,ne);else{const ye=V.el=H.el;V.children!==H.children&&u(ye,V.children)}},x=(H,V,D,ne)=>{H==null?r(V.el=l(V.children||""),D,ne):V.el=H.el},S=(H,V,D,ne)=>{[H.el,H.anchor]=g(H.children,V,D,ne,H.el,H.anchor)},T=({el:H,anchor:V},D,ne)=>{let ye;for(;H&&H!==V;)ye=f(H),r(H,D,ne),H=ye;r(V,D,ne)},_=({el:H,anchor:V})=>{let D;for(;H&&H!==V;)D=f(H),n(H),H=D;n(V)},M=(H,V,D,ne,ye,ae,U,le,ie)=>{U=U||V.type==="svg",H==null?I(V,D,ne,ye,ae,U,le,ie):B(H,V,ye,ae,U,le,ie)},I=(H,V,D,ne,ye,ae,U,le)=>{let ie,k;const{type:O,props:C,shapeFlag:G,transition:Z,dirs:F}=H;if(ie=H.el=o(H.type,ae,C&&C.is,C),G&8?c(ie,H.children):G&16&&L(H.children,ie,null,ne,ye,ae&&O!=="foreignObject",U,le),F&&ah(H,null,ne,"created"),$(ie,H,H.scopeId,U,ne),C){for(const ge in C)ge!=="value"&&!r0(ge)&&s(ie,ge,null,C[ge],ae,H.children,ne,ye,Se);"value"in C&&s(ie,"value",null,C.value),(k=C.onVnodeBeforeMount)&&ca(k,ne,H)}F&&ah(H,null,ne,"beforeMount");const te=(!ye||ye&&!ye.pendingBranch)&&Z&&!Z.persisted;te&&Z.beforeEnter(ie),r(ie,V,D),((k=C&&C.onVnodeMounted)||te||F)&&Us(()=>{k&&ca(k,ne,H),te&&Z.enter(ie),F&&ah(H,null,ne,"mounted")},ye)},$=(H,V,D,ne,ye)=>{if(D&&m(H,D),ne)for(let ae=0;ae<ne.length;ae++)m(H,ne[ae]);if(ye){let ae=ye.subTree;if(V===ae){const U=ye.vnode;$(H,U,U.scopeId,U.slotScopeIds,ye.parent)}}},L=(H,V,D,ne,ye,ae,U,le,ie=0)=>{for(let k=ie;k<H.length;k++){const O=H[k]=le?Rf(H[k]):cl(H[k]);v(null,O,V,D,ne,ye,ae,U,le)}},B=(H,V,D,ne,ye,ae,U)=>{const le=V.el=H.el;let{patchFlag:ie,dynamicChildren:k,dirs:O}=V;ie|=H.patchFlag&16;const C=H.props||cr,G=V.props||cr;let Z;D&&dy(D,!1),(Z=G.onVnodeBeforeUpdate)&&ca(Z,D,V,H),O&&ah(V,H,D,"beforeUpdate"),D&&dy(D,!0);const F=ye&&V.type!=="foreignObject";if(k?z(H.dynamicChildren,k,le,D,ne,F,ae):U||j(H,V,le,null,D,ne,F,ae,!1),ie>0){if(ie&16)W(le,V,C,G,D,ne,ye);else if(ie&2&&C.class!==G.class&&s(le,"class",null,G.class,ye),ie&4&&s(le,"style",C.style,G.style,ye),ie&8){const te=V.dynamicProps;for(let ge=0;ge<te.length;ge++){const xe=te[ge],fe=C[xe],ze=G[xe];(ze!==fe||xe==="value")&&s(le,xe,fe,ze,ye,H.children,D,ne,Se)}}ie&1&&H.children!==V.children&&c(le,V.children)}else!U&&k==null&&W(le,V,C,G,D,ne,ye);((Z=G.onVnodeUpdated)||O)&&Us(()=>{Z&&ca(Z,D,V,H),O&&ah(V,H,D,"updated")},ne)},z=(H,V,D,ne,ye,ae,U)=>{for(let le=0;le<V.length;le++){const ie=H[le],k=V[le],O=ie.el&&(ie.type===Tr||!rc(ie,k)||ie.shapeFlag&70)?d(ie.el):D;v(ie,k,O,null,ne,ye,ae,U,!0)}},W=(H,V,D,ne,ye,ae,U)=>{if(D!==ne){if(D!==cr)for(const le in D)!r0(le)&&!(le in ne)&&s(H,le,D[le],null,U,V.children,ye,ae,Se);for(const le in ne){if(r0(le))continue;const ie=ne[le],k=D[le];ie!==k&&le!=="value"&&s(H,le,k,ie,U,V.children,ye,ae,Se)}"value"in ne&&s(H,"value",D.value,ne.value)}},J=(H,V,D,ne,ye,ae,U,le,ie)=>{const k=V.el=H?H.el:a(""),O=V.anchor=H?H.anchor:a("");let{patchFlag:C,dynamicChildren:G,slotScopeIds:Z}=V;Z&&(le=le?le.concat(Z):Z),H==null?(r(k,D,ne),r(O,D,ne),L(V.children,D,O,ye,ae,U,le,ie)):C>0&&C&64&&G&&H.dynamicChildren?(z(H.dynamicChildren,G,D,ye,ae,U,le),(V.key!=null||ye&&V===ye.subTree)&&T7(H,V,!0)):j(H,V,D,O,ye,ae,U,le,ie)},K=(H,V,D,ne,ye,ae,U,le,ie)=>{V.slotScopeIds=le,H==null?V.shapeFlag&512?ye.ctx.activate(V,D,ne,U,ie):Q(V,D,ne,ye,ae,U,ie):y(H,V,ie)},Q=(H,V,D,ne,ye,ae,U)=>{const le=H.component=Wue(H,ne,ye);if(U3(H)&&(le.ctx.renderer=we),Zue(le),le.asyncDep){if(ye&&ye.registerDep(le,A),!H.el){const ie=le.subTree=gi(zs);x(null,ie,V,D)}return}A(le,H,V,D,ye,ae,U)},y=(H,V,D)=>{const ne=V.component=H.component;if($ze(H,V,D))if(ne.asyncDep&&!ne.asyncResolved){N(ne,V,D);return}else ne.next=V,Eze(ne.update),ne.update();else V.el=H.el,ne.vnode=V},A=(H,V,D,ne,ye,ae,U)=>{const le=()=>{if(H.isMounted){let{next:O,bu:C,u:G,parent:Z,vnode:F}=H,te=O,ge;dy(H,!1),O?(O.el=F.el,N(H,O,U)):O=F,C&&pb(C),(ge=O.props&&O.props.onVnodeBeforeUpdate)&&ca(ge,Z,O,F),dy(H,!0);const xe=RT(H),fe=H.subTree;H.subTree=xe,v(fe,xe,d(fe.el),Oe(fe),H,ye,ae),O.el=xe.el,te===null&&a7(H,xe.el),G&&Us(G,ye),(ge=O.props&&O.props.onVnodeUpdated)&&Us(()=>ca(ge,Z,O,F),ye)}else{let O;const{el:C,props:G}=V,{bm:Z,m:F,parent:te}=H,ge=o0(V);if(dy(H,!1),Z&&pb(Z),!ge&&(O=G&&G.onVnodeBeforeMount)&&ca(O,te,V),dy(H,!0),C&&Ae){const xe=()=>{H.subTree=RT(H),Ae(C,H.subTree,H,ye,null)};ge?V.type.__asyncLoader().then(()=>!H.isUnmounted&&xe()):xe()}else{const xe=H.subTree=RT(H);v(null,xe,D,ne,H,ye,ae),V.el=xe.el}if(F&&Us(F,ye),!ge&&(O=G&&G.onVnodeMounted)){const xe=V;Us(()=>ca(O,te,xe),ye)}(V.shapeFlag&256||te&&o0(te.vnode)&&te.vnode.shapeFlag&256)&&H.a&&Us(H.a,ye),H.isMounted=!0,V=D=ne=null}},ie=H.effect=new jw(le,()=>aC(k),H.scope),k=H.update=()=>ie.run();k.id=H.uid,dy(H,!0),k()},N=(H,V,D)=>{V.component=H;const ne=H.vnode.props;H.vnode=V,H.next=null,Kze(H,V.props,ne,D),eGe(H,V.children,D),Uw(),fW(),Vw()},j=(H,V,D,ne,ye,ae,U,le,ie=!1)=>{const k=H&&H.children,O=H?H.shapeFlag:0,C=V.children,{patchFlag:G,shapeFlag:Z}=V;if(G>0){if(G&128){q(k,C,D,ne,ye,ae,U,le,ie);return}else if(G&256){oe(k,C,D,ne,ye,ae,U,le,ie);return}}Z&8?(O&16&&Se(k,ye,ae),C!==k&&c(D,C)):O&16?Z&16?q(k,C,D,ne,ye,ae,U,le,ie):Se(k,ye,ae,!0):(O&8&&c(D,""),Z&16&&L(C,D,ne,ye,ae,U,le,ie))},oe=(H,V,D,ne,ye,ae,U,le,ie)=>{H=H||hb,V=V||hb;const k=H.length,O=V.length,C=Math.min(k,O);let G;for(G=0;G<C;G++){const Z=V[G]=ie?Rf(V[G]):cl(V[G]);v(H[G],Z,D,null,ye,ae,U,le,ie)}k>O?Se(H,ye,ae,!0,!1,C):L(V,D,ne,ye,ae,U,le,ie,C)},q=(H,V,D,ne,ye,ae,U,le,ie)=>{let k=0;const O=V.length;let C=H.length-1,G=O-1;for(;k<=C&&k<=G;){const Z=H[k],F=V[k]=ie?Rf(V[k]):cl(V[k]);if(rc(Z,F))v(Z,F,D,null,ye,ae,U,le,ie);else break;k++}for(;k<=C&&k<=G;){const Z=H[C],F=V[G]=ie?Rf(V[G]):cl(V[G]);if(rc(Z,F))v(Z,F,D,null,ye,ae,U,le,ie);else break;C--,G--}if(k>C){if(k<=G){const Z=G+1,F=Z<O?V[Z].el:ne;for(;k<=G;)v(null,V[k]=ie?Rf(V[k]):cl(V[k]),D,F,ye,ae,U,le,ie),k++}}else if(k>G)for(;k<=C;)re(H[k],ye,ae,!0),k++;else{const Z=k,F=k,te=new Map;for(k=F;k<=G;k++){const be=V[k]=ie?Rf(V[k]):cl(V[k]);be.key!=null&&te.set(be.key,k)}let ge,xe=0;const fe=G-F+1;let ze=!1,He=0;const Xe=new Array(fe);for(k=0;k<fe;k++)Xe[k]=0;for(k=Z;k<=C;k++){const be=H[k];if(xe>=fe){re(be,ye,ae,!0);continue}let ke;if(be.key!=null)ke=te.get(be.key);else for(ge=F;ge<=G;ge++)if(Xe[ge-F]===0&&rc(be,V[ge])){ke=ge;break}ke===void 0?re(be,ye,ae,!0):(Xe[ke-F]=k+1,ke>=He?He=ke:ze=!0,v(be,V[ke],D,null,ye,ae,U,le,ie),xe++)}const Ve=ze?iGe(Xe):hb;for(ge=Ve.length-1,k=fe-1;k>=0;k--){const be=F+k,ke=V[be],Ge=be+1<O?V[be+1].el:ne;Xe[k]===0?v(null,ke,D,Ge,ye,ae,U,le,ie):ze&&(ge<0||k!==Ve[ge]?de(ke,D,Ge,2):ge--)}}},de=(H,V,D,ne,ye=null)=>{const{el:ae,type:U,transition:le,children:ie,shapeFlag:k}=H;if(k&6){de(H.component.subTree,V,D,ne);return}if(k&128){H.suspense.move(V,D,ne);return}if(k&64){U.move(H,V,D,we);return}if(U===Tr){r(ae,V,D);for(let C=0;C<ie.length;C++)de(ie[C],V,D,ne);r(H.anchor,V,D);return}if(U===sm){T(H,V,D);return}if(ne!==2&&k&1&&le)if(ne===0)le.beforeEnter(ae),r(ae,V,D),Us(()=>le.enter(ae),ye);else{const{leave:C,delayLeave:G,afterLeave:Z}=le,F=()=>r(ae,V,D),te=()=>{C(ae,()=>{F(),Z&&Z()})};G?G(ae,F,te):te()}else r(ae,V,D)},re=(H,V,D,ne=!1,ye=!1)=>{const{type:ae,props:U,ref:le,children:ie,dynamicChildren:k,shapeFlag:O,patchFlag:C,dirs:G}=H;if(le!=null&&f5(le,null,D,H,!0),O&256){V.ctx.deactivate(H);return}const Z=O&1&&G,F=!o0(H);let te;if(F&&(te=U&&U.onVnodeBeforeUnmount)&&ca(te,V,H),O&6)_e(H.component,D,ne);else{if(O&128){H.suspense.unmount(D,ne);return}Z&&ah(H,null,V,"beforeUnmount"),O&64?H.type.remove(H,V,D,ye,we,ne):k&&(ae!==Tr||C>0&&C&64)?Se(k,V,D,!1,!0):(ae===Tr&&C&384||!ye&&O&16)&&Se(ie,V,D),ne&&me(H)}(F&&(te=U&&U.onVnodeUnmounted)||Z)&&Us(()=>{te&&ca(te,V,H),Z&&ah(H,null,V,"unmounted")},D)},me=H=>{const{type:V,el:D,anchor:ne,transition:ye}=H;if(V===Tr){ve(D,ne);return}if(V===sm){_(H);return}const ae=()=>{n(D),ye&&!ye.persisted&&ye.afterLeave&&ye.afterLeave()};if(H.shapeFlag&1&&ye&&!ye.persisted){const{leave:U,delayLeave:le}=ye,ie=()=>U(D,ae);le?le(H.el,ae,ie):ie()}else ae()},ve=(H,V)=>{let D;for(;H!==V;)D=f(H),n(H),H=D;n(V)},_e=(H,V,D)=>{const{bum:ne,scope:ye,update:ae,subTree:U,um:le}=H;ne&&pb(ne),ye.stop(),ae&&(ae.active=!1,re(U,H,V,D)),le&&Us(le,V),Us(()=>{H.isUnmounted=!0},V),V&&V.pendingBranch&&!V.isUnmounted&&H.asyncDep&&!H.asyncResolved&&H.suspenseId===V.pendingId&&(V.deps--,V.deps===0&&V.resolve())},Se=(H,V,D,ne=!1,ye=!1,ae=0)=>{for(let U=ae;U<H.length;U++)re(H[U],V,D,ne,ye)},Oe=H=>H.shapeFlag&6?Oe(H.component.subTree):H.shapeFlag&128?H.suspense.next():f(H.anchor||H.el),Me=(H,V,D)=>{H==null?V._vnode&&re(V._vnode,null,null,!0):v(V._vnode||null,H,V,null,null,null,D),fW(),d5(),V._vnode=H},we={p:v,um:re,m:de,r:me,mt:Q,mc:L,pc:j,pbc:z,n:Oe,o:e};let Ie,Ae;return t&&([Ie,Ae]=t(we)),{render:Me,hydrate:Ie,createApp:Zze(Me,Ie)}}function dy({effect:e,update:t},i){e.allowRecurse=t.allowRecurse=i}function T7(e,t,i=!1){const r=e.children,n=t.children;if(Ot(r)&&Ot(n))for(let s=0;s<r.length;s++){const o=r[s];let a=n[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[s]=Rf(n[s]),a.el=o.el),i||T7(o,a)),a.type===ap&&(a.el=o.el)}}function iGe(e){const t=e.slice(),i=[0];let r,n,s,o,a;const l=e.length;for(r=0;r<l;r++){const u=e[r];if(u!==0){if(n=i[i.length-1],e[n]<u){t[r]=n,i.push(r);continue}for(s=0,o=i.length-1;s<o;)a=s+o>>1,e[i[a]]<u?s=a+1:o=a;u<e[i[s]]&&(s>0&&(t[r]=i[s-1]),i[s]=r)}}for(s=i.length,o=i[s-1];s-- >0;)i[s]=o,o=t[o];return i}const rGe=e=>e.__isTeleport,Ax=e=>e&&(e.disabled||e.disabled===""),IW=e=>typeof SVGElement<"u"&&e instanceof SVGElement,J6=(e,t)=>{const i=e&&e.to;return _i(i)?t?t(i):null:i},nGe={__isTeleport:!0,process(e,t,i,r,n,s,o,a,l,u){const{mc:c,pc:d,pbc:f,o:{insert:m,querySelector:g,createText:v,createComment:b}}=u,x=Ax(t.props);let{shapeFlag:S,children:T,dynamicChildren:_}=t;if(e==null){const M=t.el=v(""),I=t.anchor=v("");m(M,i,r),m(I,i,r);const $=t.target=J6(t.props,g),L=t.targetAnchor=v("");$&&(m(L,$),o=o||IW($));const B=(z,W)=>{S&16&&c(T,z,W,n,s,o,a,l)};x?B(i,I):$&&B($,L)}else{t.el=e.el;const M=t.anchor=e.anchor,I=t.target=e.target,$=t.targetAnchor=e.targetAnchor,L=Ax(e.props),B=L?i:I,z=L?M:$;if(o=o||IW(I),_?(f(e.dynamicChildren,_,B,n,s,o,a),T7(e,t,!0)):l||d(e,t,B,z,n,s,o,a,!1),x)L||LM(t,i,M,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const W=t.target=J6(t.props,g);W&&LM(t,W,null,u,0)}else L&&LM(t,I,$,u,1)}Vue(t)},remove(e,t,i,r,{um:n,o:{remove:s}},o){const{shapeFlag:a,children:l,anchor:u,targetAnchor:c,target:d,props:f}=e;if(d&&s(c),(o||!Ax(f))&&(s(u),a&16))for(let m=0;m<l.length;m++){const g=l[m];n(g,t,i,!0,!!g.dynamicChildren)}},move:LM,hydrate:sGe};function LM(e,t,i,{o:{insert:r},m:n},s=2){s===0&&r(e.targetAnchor,t,i);const{el:o,anchor:a,shapeFlag:l,children:u,props:c}=e,d=s===2;if(d&&r(o,t,i),(!d||Ax(c))&&l&16)for(let f=0;f<u.length;f++)n(u[f],t,i,2);d&&r(a,t,i)}function sGe(e,t,i,r,n,s,{o:{nextSibling:o,parentNode:a,querySelector:l}},u){const c=t.target=J6(t.props,l);if(c){const d=c._lpa||c.firstChild;if(t.shapeFlag&16)if(Ax(t.props))t.anchor=u(o(e),t,a(e),i,r,n,s),t.targetAnchor=d;else{t.anchor=o(e);let f=d;for(;f;)if(f=o(f),f&&f.nodeType===8&&f.data==="teleport anchor"){t.targetAnchor=f,c._lpa=t.targetAnchor&&o(t.targetAnchor);break}u(d,t,c,i,r,n,s)}Vue(t)}return t.anchor&&o(t.anchor)}const A7=nGe;function Vue(e){const t=e.ctx;if(t&&t.ut){let i=e.children[0].el;for(;i!==e.targetAnchor;)i.nodeType===1&&i.setAttribute("data-v-owner",t.uid),i=i.nextSibling;t.ut()}}const Tr=Symbol.for("v-fgt"),ap=Symbol.for("v-txt"),zs=Symbol.for("v-cmt"),sm=Symbol.for("v-stc"),Cx=[];let ga=null;function ht(e=!1){Cx.push(ga=e?null:[])}function Bue(){Cx.pop(),ga=Cx[Cx.length-1]||null}let L0=1;function m5(e){L0+=e}function zue(e){return e.dynamicChildren=L0>0?ga||hb:null,Bue(),L0>0&&ga&&ga.push(e),e}function $t(e,t,i,r,n,s){return zue(at(e,t,i,r,n,s,!0))}function Ur(e,t,i,r,n){return zue(gi(e,t,i,r,n,!0))}function Ph(e){return e?e.__v_isVNode===!0:!1}function rc(e,t){return e.type===t.type&&e.key===t.key}function Gue(e){}const mC="__vInternal",que=({key:e})=>e??null,kT=({ref:e,ref_key:t,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?_i(e)||er(e)||li(e)?{i:Ms,r:e,k:t,f:!!i}:e:null);function at(e,t=null,i=null,r=0,n=null,s=e===Tr?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&que(t),ref:t&&kT(t),scopeId:cC,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Ms};return a?($7(l,i),s&128&&e.normalize(l)):i&&(l.shapeFlag|=_i(i)?8:16),L0>0&&!o&&ga&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&ga.push(l),l}const gi=oGe;function oGe(e,t=null,i=null,r=0,n=null,s=!1){if((!e||e===pue)&&(e=zs),Ph(e)){const a=gc(e,t,!0);return i&&$7(a,i),L0>0&&!s&&ga&&(a.shapeFlag&6?ga[ga.indexOf(e)]=a:ga.push(a)),a.patchFlag|=-2,a}if(hGe(e)&&(e=e.__vccOpts),t){t=C7(t);let{class:a,style:l}=t;a&&!_i(a)&&(t.class=bn(a)),dr(l)&&(nC(l)&&!Ot(l)&&(l=Ui({},l)),t.style=Vm(l))}const o=_i(e)?1:nue(e)?128:rGe(e)?64:dr(e)?4:li(e)?2:0;return at(e,t,i,r,n,o,s,!0)}function C7(e){return e?nC(e)||mC in e?Ui({},e):e:null}function gc(e,t,i=!1){const{props:r,ref:n,patchFlag:s,children:o}=e,a=t?yC(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&que(a),ref:t&&t.ref?i&&n?Ot(n)?n.concat(kT(t)):[n,kT(t)]:kT(t):n,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Tr?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&gc(e.ssContent),ssFallback:e.ssFallback&&gc(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Ih(e=" ",t=0){return gi(ap,null,e,t)}function Hue(e,t){const i=gi(sm,null,e);return i.staticCount=t,i}function rn(e="",t=!1){return t?(ht(),Ur(zs,null,e)):gi(zs,null,e)}function cl(e){return e==null||typeof e=="boolean"?gi(zs):Ot(e)?gi(Tr,null,e.slice()):typeof e=="object"?Rf(e):gi(ap,null,String(e))}function Rf(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:gc(e)}function $7(e,t){let i=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Ot(t))i=16;else if(typeof t=="object")if(r&65){const n=t.default;n&&(n._c&&(n._d=!1),$7(e,n()),n._c&&(n._d=!0));return}else{i=32;const n=t._;!n&&!(mC in t)?t._ctx=Ms:n===3&&Ms&&(Ms.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else li(t)?(t={default:t,_ctx:Ms},i=32):(t=String(t),r&64?(i=16,t=[Ih(t)]):i=8);e.children=t,e.shapeFlag|=i}function yC(...e){const t={};for(let i=0;i<e.length;i++){const r=e[i];for(const n in r)if(n==="class")t.class!==r.class&&(t.class=bn([t.class,r.class]));else if(n==="style")t.style=Vm([t.style,r.style]);else if(Q0(n)){const s=t[n],o=r[n];o&&s!==o&&!(Ot(s)&&s.includes(o))&&(t[n]=s?[].concat(s,o):o)}else n!==""&&(t[n]=r[n])}return t}function ca(e,t,i,r=null){_a(e,t,7,[i,r])}const aGe=kue();let lGe=0;function Wue(e,t,i){const r=e.type,n=(t?t.appContext:e.appContext)||aGe,s={uid:lGe++,vnode:e,type:r,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new K4(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Nue(r,n),emitsOptions:iue(r,n),emit:null,emitted:null,propsDefaults:cr,inheritAttrs:r.inheritAttrs,ctx:cr,data:cr,props:cr,attrs:cr,slots:cr,refs:cr,setupState:cr,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=Ize.bind(null,s),e.ce&&e.ce(s),s}let Bn=null;const Cs=()=>Bn||Ms;let O7,R1,TW="__VUE_INSTANCE_SETTERS__";(R1=D6()[TW])||(R1=D6()[TW]=[]),R1.push(e=>Bn=e),O7=e=>{R1.length>1?R1.forEach(t=>t(e)):R1[0](e)};const Mm=e=>{O7(e),e.scope.on()},om=()=>{Bn&&Bn.scope.off(),O7(null)};function Jue(e){return e.vnode.shapeFlag&4}let qb=!1;function Zue(e,t=!1){qb=t;const{props:i,children:r}=e.vnode,n=Jue(e);Yze(e,i,n,t),Xze(e,r);const s=n?uGe(e,t):void 0;return qb=!1,s}function uGe(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=wn(new Proxy(e.ctx,G6));const{setup:r}=i;if(r){const n=e.setupContext=r.length>1?Que(e):null;Mm(e),Uw();const s=Mh(r,e,0,[e.props,n]);if(Vw(),om(),Z9(s)){if(s.then(om,om),t)return s.then(o=>{Z6(e,o,t)}).catch(o=>{Bm(o,e,0)});e.asyncDep=s}else Z6(e,s,t)}else Kue(e,t)}function Z6(e,t,i){li(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:dr(t)&&(e.setupState=oC(t)),Kue(e,i)}let y5,Y6;function R7(e){y5=e,Y6=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,Bze))}}const Yue=()=>!y5;function Kue(e,t,i){const r=e.type;if(!e.render){if(!t&&y5&&!r.render){const n=r.template||x7(e).template;if(n){const{isCustomElement:s,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=r,u=Ui(Ui({isCustomElement:s,delimiters:a},o),l);r.render=y5(n,u)}}e.render=r.render||qo,Y6&&Y6(e)}Mm(e),Uw(),zze(e),Vw(),om()}function cGe(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,i){return Ca(e,"get","$attrs"),t[i]}}))}function Que(e){const t=i=>{e.exposed=i||{}};return{get attrs(){return cGe(e)},slots:e.slots,emit:e.emit,expose:t}}function gC(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(oC(wn(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in Tx)return Tx[i](e)},has(t,i){return i in t||i in Tx}}))}function K6(e,t=!0){return li(e)?e.displayName||e.name:e.name||t&&e.__name}function hGe(e){return li(e)&&"__vccOpts"in e}const $i=(e,t)=>_ze(e,t,qb);function Nh(e,t,i){const r=arguments.length;return r===2?dr(t)&&!Ot(t)?Ph(t)?gi(e,null,[t]):gi(e,t):gi(e,null,t):(r>3?i=Array.prototype.slice.call(arguments,2):r===3&&Ph(i)&&(i=[i]),gi(e,t,i))}const k7=Symbol.for("v-scx"),L7=()=>hs(k7);function Xue(){}function ece(e,t,i,r){const n=i[r];if(n&&P7(n,e))return n;const s=t();return s.memo=e.slice(),i[r]=s}function P7(e,t){const i=e.memo;if(i.length!=t.length)return!1;for(let r=0;r<i.length;r++)if(zb(i[r],t[r]))return!1;return L0>0&&ga&&ga.push(e),!0}const N7="3.3.4",dGe={createComponentInstance:Wue,setupComponent:Zue,renderComponentRoot:RT,setCurrentRenderingInstance:OS,isVNode:Ph,normalizeVNode:cl},tce=dGe,ice=null,rce=null,pGe="http://www.w3.org/2000/svg",Eg=typeof document<"u"?document:null,AW=Eg&&Eg.createElement("template"),fGe={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,r)=>{const n=t?Eg.createElementNS(pGe,e):Eg.createElement(e,i?{is:i}:void 0);return e==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:e=>Eg.createTextNode(e),createComment:e=>Eg.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Eg.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,r,n,s){const o=i?i.previousSibling:t.lastChild;if(n&&(n===s||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),i),!(n===s||!(n=n.nextSibling)););else{AW.innerHTML=r?`<svg>${e}</svg>`:e;const a=AW.content;if(r){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,i)}return[o?o.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}};function mGe(e,t,i){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}function yGe(e,t,i){const r=e.style,n=_i(i);if(i&&!n){if(t&&!_i(t))for(const s in t)i[s]==null&&Q6(r,s,"");for(const s in i)Q6(r,s,i[s])}else{const s=r.display;n?t!==i&&(r.cssText=i):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=s)}}const CW=/\s*!important$/;function Q6(e,t,i){if(Ot(i))i.forEach(r=>Q6(e,t,r));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const r=gGe(e,t);CW.test(i)?e.setProperty(dl(r),i.replace(CW,""),"important"):e[r]=i}}const $W=["Webkit","Moz","ms"],cR={};function gGe(e,t){const i=cR[t];if(i)return i;let r=Rn(t);if(r!=="filter"&&r in e)return cR[t]=r;r=Um(r);for(let n=0;n<$W.length;n++){const s=$W[n]+r;if(s in e)return cR[t]=s}return t}const OW="http://www.w3.org/1999/xlink";function vGe(e,t,i,r,n){if(r&&t.startsWith("xlink:"))i==null?e.removeAttributeNS(OW,t.slice(6,t.length)):e.setAttributeNS(OW,t,i);else{const s=jBe(t);i==null||s&&!Tle(i)?e.removeAttribute(t):e.setAttribute(t,s?"":i)}}function bGe(e,t,i,r,n,s,o){if(t==="innerHTML"||t==="textContent"){r&&o(r,n,s),e[t]=i??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){e._value=i;const u=a==="OPTION"?e.getAttribute("value"):e.value,c=i??"";u!==c&&(e.value=c),i==null&&e.removeAttribute(t);return}let l=!1;if(i===""||i==null){const u=typeof e[t];u==="boolean"?i=Tle(i):i==null&&u==="string"?(i="",l=!0):u==="number"&&(i=0,l=!0)}try{e[t]=i}catch{}l&&e.removeAttribute(t)}function Ud(e,t,i,r){e.addEventListener(t,i,r)}function wGe(e,t,i,r){e.removeEventListener(t,i,r)}function _Ge(e,t,i,r,n=null){const s=e._vei||(e._vei={}),o=s[t];if(r&&o)o.value=r;else{const[a,l]=xGe(t);if(r){const u=s[t]=MGe(r,n);Ud(e,a,u,l)}else o&&(wGe(e,a,o,l),s[t]=void 0)}}const RW=/(?:Once|Passive|Capture)$/;function xGe(e){let t;if(RW.test(e)){t={};let r;for(;r=e.match(RW);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):dl(e.slice(2)),t]}let hR=0;const SGe=Promise.resolve(),EGe=()=>hR||(SGe.then(()=>hR=0),hR=Date.now());function MGe(e,t){const i=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=i.attached)return;_a(IGe(r,i.value),t,5,[r])};return i.value=e,i.attached=EGe(),i}function IGe(e,t){if(Ot(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(r=>n=>!n._stopped&&r&&r(n))}else return t}const kW=/^on[a-z]/,TGe=(e,t,i,r,n=!1,s,o,a,l)=>{t==="class"?mGe(e,r,n):t==="style"?yGe(e,i,r):Q0(t)?W9(t)||_Ge(e,t,i,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):AGe(e,t,r,n))?bGe(e,t,r,s,o,a,l):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),vGe(e,t,r,n))};function AGe(e,t,i,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&kW.test(t)&&li(i)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||kW.test(t)&&_i(i)?!1:t in e}function F7(e,t){const i=Vi(e);class r extends V3{constructor(s){super(i,s,t)}}return r.def=i,r}const nce=e=>F7(e,B7),CGe=typeof HTMLElement<"u"?HTMLElement:class{};class V3 extends CGe{constructor(t,i={},r){super(),this._def=t,this._props=i,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&r?r(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,Bh(()=>{this._connected||(Wd(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);new MutationObserver(r=>{for(const n of r)this._setAttr(n.attributeName)}).observe(this,{attributes:!0});const t=(r,n=!1)=>{const{props:s,styles:o}=r;let a;if(s&&!Ot(s))for(const l in s){const u=s[l];(u===Number||u&&u.type===Number)&&(l in this._props&&(this._props[l]=c5(this._props[l])),(a||(a=Object.create(null)))[Rn(l)]=!0)}this._numberProps=a,n&&this._resolveProps(r),this._applyStyles(o),this._update()},i=this._def.__asyncLoader;i?i().then(r=>t(r,!0)):t(this._def)}_resolveProps(t){const{props:i}=t,r=Ot(i)?i:Object.keys(i||{});for(const n of Object.keys(this))n[0]!=="_"&&r.includes(n)&&this._setProp(n,this[n],!0,!1);for(const n of r.map(Rn))Object.defineProperty(this,n,{get(){return this._getProp(n)},set(s){this._setProp(n,s)}})}_setAttr(t){let i=this.getAttribute(t);const r=Rn(t);this._numberProps&&this._numberProps[r]&&(i=c5(i)),this._setProp(r,i,!1)}_getProp(t){return this._props[t]}_setProp(t,i,r=!0,n=!0){i!==this._props[t]&&(this._props[t]=i,n&&this._instance&&this._update(),r&&(i===!0?this.setAttribute(dl(t),""):typeof i=="string"||typeof i=="number"?this.setAttribute(dl(t),i+""):i||this.removeAttribute(dl(t))))}_update(){Wd(this._createVNode(),this.shadowRoot)}_createVNode(){const t=gi(this._def,Ui({},this._props));return this._instance||(t.ce=i=>{this._instance=i,i.isCE=!0;const r=(s,o)=>{this.dispatchEvent(new CustomEvent(s,{detail:o}))};i.emit=(s,...o)=>{r(s,o),dl(s)!==s&&r(dl(s),o)};let n=this;for(;n=n&&(n.parentNode||n.host);)if(n instanceof V3){i.parent=n._instance,i.provides=n._instance.provides;break}}),t}_applyStyles(t){t&&t.forEach(i=>{const r=document.createElement("style");r.textContent=i,this.shadowRoot.appendChild(r)})}}function sce(e="$style"){{const t=Cs();if(!t)return cr;const i=t.type.__cssModules;if(!i)return cr;const r=i[e];return r||cr}}function oce(e){const t=Cs();if(!t)return;const i=t.ut=(n=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(s=>eN(s,n))},r=()=>{const n=e(t.proxy);X6(t.subTree,n),i(n)};u7(r),Eo(()=>{const n=new MutationObserver(r);n.observe(t.subTree.el.parentNode,{childList:!0}),e1(()=>n.disconnect())})}function X6(e,t){if(e.shapeFlag&128){const i=e.suspense;e=i.activeBranch,i.pendingBranch&&!i.isHydrating&&i.effects.push(()=>{X6(i.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)eN(e.el,t);else if(e.type===Tr)e.children.forEach(i=>X6(i,t));else if(e.type===sm){let{el:i,anchor:r}=e;for(;i&&(eN(i,t),i!==r);)i=i.nextSibling}}function eN(e,t){if(e.nodeType===1){const i=e.style;for(const r in t)i.setProperty(`--${r}`,t[r])}}const Hp="transition",O_="animation",B3=(e,{slots:t})=>Nh(c7,lce(e),t);B3.displayName="Transition";const ace={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},$Ge=B3.props=Ui({},dC,ace),py=(e,t=[])=>{Ot(e)?e.forEach(i=>i(...t)):e&&e(...t)},LW=e=>e?Ot(e)?e.some(t=>t.length>1):e.length>1:!1;function lce(e){const t={};for(const J in e)J in ace||(t[J]=e[J]);if(e.css===!1)return t;const{name:i="v",type:r,duration:n,enterFromClass:s=`${i}-enter-from`,enterActiveClass:o=`${i}-enter-active`,enterToClass:a=`${i}-enter-to`,appearFromClass:l=s,appearActiveClass:u=o,appearToClass:c=a,leaveFromClass:d=`${i}-leave-from`,leaveActiveClass:f=`${i}-leave-active`,leaveToClass:m=`${i}-leave-to`}=e,g=OGe(n),v=g&&g[0],b=g&&g[1],{onBeforeEnter:x,onEnter:S,onEnterCancelled:T,onLeave:_,onLeaveCancelled:M,onBeforeAppear:I=x,onAppear:$=S,onAppearCancelled:L=T}=t,B=(J,K,Q)=>{xf(J,K?c:a),xf(J,K?u:o),Q&&Q()},z=(J,K)=>{J._isLeaving=!1,xf(J,d),xf(J,m),xf(J,f),K&&K()},W=J=>(K,Q)=>{const y=J?$:S,A=()=>B(K,J,Q);py(y,[K,A]),PW(()=>{xf(K,J?l:s),Ad(K,J?c:a),LW(y)||NW(K,r,v,A)})};return Ui(t,{onBeforeEnter(J){py(x,[J]),Ad(J,s),Ad(J,o)},onBeforeAppear(J){py(I,[J]),Ad(J,l),Ad(J,u)},onEnter:W(!1),onAppear:W(!0),onLeave(J,K){J._isLeaving=!0;const Q=()=>z(J,K);Ad(J,d),cce(),Ad(J,f),PW(()=>{J._isLeaving&&(xf(J,d),Ad(J,m),LW(_)||NW(J,r,b,Q))}),py(_,[J,Q])},onEnterCancelled(J){B(J,!1),py(T,[J])},onAppearCancelled(J){B(J,!0),py(L,[J])},onLeaveCancelled(J){z(J),py(M,[J])}})}function OGe(e){if(e==null)return null;if(dr(e))return[dR(e.enter),dR(e.leave)];{const t=dR(e);return[t,t]}}function dR(e){return c5(e)}function Ad(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.add(i)),(e._vtc||(e._vtc=new Set)).add(t)}function xf(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const{_vtc:i}=e;i&&(i.delete(t),i.size||(e._vtc=void 0))}function PW(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let RGe=0;function NW(e,t,i,r){const n=e._endId=++RGe,s=()=>{n===e._endId&&r()};if(i)return setTimeout(s,i);const{type:o,timeout:a,propCount:l}=uce(e,t);if(!o)return r();const u=o+"end";let c=0;const d=()=>{e.removeEventListener(u,f),s()},f=m=>{m.target===e&&++c>=l&&d()};setTimeout(()=>{c<l&&d()},a+1),e.addEventListener(u,f)}function uce(e,t){const i=window.getComputedStyle(e),r=g=>(i[g]||"").split(", "),n=r(`${Hp}Delay`),s=r(`${Hp}Duration`),o=FW(n,s),a=r(`${O_}Delay`),l=r(`${O_}Duration`),u=FW(a,l);let c=null,d=0,f=0;t===Hp?o>0&&(c=Hp,d=o,f=s.length):t===O_?u>0&&(c=O_,d=u,f=l.length):(d=Math.max(o,u),c=d>0?o>u?Hp:O_:null,f=c?c===Hp?s.length:l.length:0);const m=c===Hp&&/\b(transform|all)(,|$)/.test(r(`${Hp}Property`).toString());return{type:c,timeout:d,propCount:f,hasTransform:m}}function FW(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((i,r)=>DW(i)+DW(e[r])))}function DW(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function cce(){return document.body.offsetHeight}const hce=new WeakMap,dce=new WeakMap,pce={name:"TransitionGroup",props:Ui({},$Ge,{tag:String,moveClass:String}),setup(e,{slots:t}){const i=Cs(),r=hC();let n,s;return Bw(()=>{if(!n.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!FGe(n[0].el,i.vnode.el,o))return;n.forEach(LGe),n.forEach(PGe);const a=n.filter(NGe);cce(),a.forEach(l=>{const u=l.el,c=u.style;Ad(u,o),c.transform=c.webkitTransform=c.transitionDuration="";const d=u._moveCb=f=>{f&&f.target!==u||(!f||/transform$/.test(f.propertyName))&&(u.removeEventListener("transitionend",d),u._moveCb=null,xf(u,o))};u.addEventListener("transitionend",d)})}),()=>{const o=oi(e),a=lce(o);let l=o.tag||Tr;n=s,s=t.default?j3(t.default()):[];for(let u=0;u<s.length;u++){const c=s[u];c.key!=null&&Em(c,k0(c,a,r,i))}if(n)for(let u=0;u<n.length;u++){const c=n[u];Em(c,k0(c,a,r,i)),hce.set(c,c.el.getBoundingClientRect())}return gi(l,null,s)}}},kGe=e=>delete e.mode;pce.props;const D7=pce;function LGe(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function PGe(e){dce.set(e,e.el.getBoundingClientRect())}function NGe(e){const t=hce.get(e),i=dce.get(e),r=t.left-i.left,n=t.top-i.top;if(r||n){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${n}px)`,s.transitionDuration="0s",e}}function FGe(e,t,i){const r=e.cloneNode();e._vtc&&e._vtc.forEach(o=>{o.split(/\s+/).forEach(a=>a&&r.classList.remove(a))}),i.split(/\s+/).forEach(o=>o&&r.classList.add(o)),r.style.display="none";const n=t.nodeType===1?t:t.parentNode;n.appendChild(r);const{hasTransform:s}=uce(r);return n.removeChild(r),s}const Im=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Ot(t)?i=>pb(t,i):t};function DGe(e){e.target.composing=!0}function jW(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const PS={created(e,{modifiers:{lazy:t,trim:i,number:r}},n){e._assign=Im(n);const s=r||n.props&&n.props.type==="number";Ud(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;i&&(a=a.trim()),s&&(a=u5(a)),e._assign(a)}),i&&Ud(e,"change",()=>{e.value=e.value.trim()}),t||(Ud(e,"compositionstart",DGe),Ud(e,"compositionend",jW),Ud(e,"change",jW))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:i,trim:r,number:n}},s){if(e._assign=Im(s),e.composing||document.activeElement===e&&e.type!=="range"&&(i||r&&e.value.trim()===t||(n||e.type==="number")&&u5(e.value)===t))return;const o=t??"";e.value!==o&&(e.value=o)}},vC={deep:!0,created(e,t,i){e._assign=Im(i),Ud(e,"change",()=>{const r=e._modelValue,n=Hb(e),s=e.checked,o=e._assign;if(Ot(r)){const a=Y4(r,n),l=a!==-1;if(s&&!l)o(r.concat(n));else if(!s&&l){const u=[...r];u.splice(a,1),o(u)}}else if(X0(r)){const a=new Set(r);s?a.add(n):a.delete(n),o(a)}else o(fce(e,s))})},mounted:UW,beforeUpdate(e,t,i){e._assign=Im(i),UW(e,t,i)}};function UW(e,{value:t,oldValue:i},r){e._modelValue=t,Ot(t)?e.checked=Y4(t,r.props.value)>-1:X0(t)?e.checked=t.has(r.props.value):t!==i&&(e.checked=_m(t,fce(e,!0)))}const bC={created(e,{value:t},i){e.checked=_m(t,i.props.value),e._assign=Im(i),Ud(e,"change",()=>{e._assign(Hb(e))})},beforeUpdate(e,{value:t,oldValue:i},r){e._assign=Im(r),t!==i&&(e.checked=_m(t,r.props.value))}},j7={deep:!0,created(e,{value:t,modifiers:{number:i}},r){const n=X0(t);Ud(e,"change",()=>{const s=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>i?u5(Hb(o)):Hb(o));e._assign(e.multiple?n?new Set(s):s:s[0])}),e._assign=Im(r)},mounted(e,{value:t}){VW(e,t)},beforeUpdate(e,t,i){e._assign=Im(i)},updated(e,{value:t}){VW(e,t)}};function VW(e,t){const i=e.multiple;if(!(i&&!Ot(t)&&!X0(t))){for(let r=0,n=e.options.length;r<n;r++){const s=e.options[r],o=Hb(s);if(i)Ot(t)?s.selected=Y4(t,o)>-1:s.selected=t.has(o);else if(_m(Hb(s),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!i&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Hb(e){return"_value"in e?e._value:e.value}function fce(e,t){const i=t?"_trueValue":"_falseValue";return i in e?e[i]:t}const U7={created(e,t,i){PM(e,t,i,null,"created")},mounted(e,t,i){PM(e,t,i,null,"mounted")},beforeUpdate(e,t,i,r){PM(e,t,i,r,"beforeUpdate")},updated(e,t,i,r){PM(e,t,i,r,"updated")}};function mce(e,t){switch(e){case"SELECT":return j7;case"TEXTAREA":return PS;default:switch(t){case"checkbox":return vC;case"radio":return bC;default:return PS}}}function PM(e,t,i,r,n){const o=mce(e.tagName,i.props&&i.props.type)[n];o&&o(e,t,i,r)}function jGe(){PS.getSSRProps=({value:e})=>({value:e}),bC.getSSRProps=({value:e},t)=>{if(t.props&&_m(t.props.value,e))return{checked:!0}},vC.getSSRProps=({value:e},t)=>{if(Ot(e)){if(t.props&&Y4(e,t.props.value)>-1)return{checked:!0}}else if(X0(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},U7.getSSRProps=(e,t)=>{if(typeof t.type!="string")return;const i=mce(t.type.toUpperCase(),t.props&&t.props.type);if(i.getSSRProps)return i.getSSRProps(e,t)}}const UGe=["ctrl","shift","alt","meta"],VGe={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>UGe.some(i=>e[`${i}Key`]&&!t.includes(i))},z3=(e,t)=>(i,...r)=>{for(let n=0;n<t.length;n++){const s=VGe[t[n]];if(s&&s(i,t))return}return e(i,...r)},BGe={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},V7=(e,t)=>i=>{if(!("key"in i))return;const r=dl(i.key);if(t.some(n=>n===r||BGe[n]===r))return e(i)},wC={beforeMount(e,{value:t},{transition:i}){e._vod=e.style.display==="none"?"":e.style.display,i&&t?i.beforeEnter(e):R_(e,t)},mounted(e,{value:t},{transition:i}){i&&t&&i.enter(e)},updated(e,{value:t,oldValue:i},{transition:r}){!t!=!i&&(r?t?(r.beforeEnter(e),R_(e,!0),r.enter(e)):r.leave(e,()=>{R_(e,!1)}):R_(e,t))},beforeUnmount(e,{value:t}){R_(e,t)}};function R_(e,t){e.style.display=t?e._vod:"none"}function zGe(){wC.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const yce=Ui({patchProp:TGe},fGe);let $x,BW=!1;function gce(){return $x||($x=M7(yce))}function vce(){return $x=BW?$x:I7(yce),BW=!0,$x}const Wd=(...e)=>{gce().render(...e)},B7=(...e)=>{vce().hydrate(...e)},_C=(...e)=>{const t=gce().createApp(...e),{mount:i}=t;return t.mount=r=>{const n=wce(r);if(!n)return;const s=t._component;!li(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.innerHTML="";const o=i(n,!1,n instanceof SVGElement);return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},t},bce=(...e)=>{const t=vce().createApp(...e),{mount:i}=t;return t.mount=r=>{const n=wce(r);if(n)return i(n,!0,n instanceof SVGElement)},t};function wce(e){return _i(e)?document.querySelector(e):e}let zW=!1;const _ce=()=>{zW||(zW=!0,jGe(),zGe())},GGe=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:c7,BaseTransitionPropsValidators:dC,Comment:zs,EffectScope:K4,Fragment:Tr,KeepAlive:hue,ReactiveEffect:jw,Static:sm,Suspense:sue,Teleport:A7,Text:ap,Transition:B3,TransitionGroup:D7,VueElement:V3,assertNumber:Qle,callWithAsyncErrorHandling:_a,callWithErrorHandling:Mh,camelize:Rn,capitalize:Um,cloneVNode:gc,compatUtils:rce,computed:$i,createApp:_C,createBlock:Ur,createCommentVNode:rn,createElementBlock:$t,createElementVNode:at,createHydrationRenderer:I7,createPropsRestProxy:$ue,createRenderer:M7,createSSRApp:bce,createSlots:fue,createStaticVNode:Hue,createTextVNode:Ih,createVNode:gi,customRef:Jle,defineAsyncComponent:h7,defineComponent:Vi,defineCustomElement:F7,defineEmits:vue,defineExpose:bue,defineModel:xue,defineOptions:wue,defineProps:gue,defineSSRCustomElement:nce,defineSlots:_ue,get devtools(){return Sg},effect:Rle,effectScope:F3,getCurrentInstance:Cs,getCurrentScope:Q4,getTransitionRawChildren:j3,guardReactiveProps:C7,h:Nh,handleError:Bm,hasInjectionContext:Lue,hydrate:B7,initCustomFormatter:Xue,initDirectivesForSSR:_ce,inject:hs,isMemoSame:P7,isProxy:nC,isReactive:uu,isReadonly:Sm,isRef:er,isRuntimeOnly:Yue,isShallow:Gb,isVNode:Ph,markRaw:wn,mergeDefaults:Aue,mergeModels:Cue,mergeProps:yC,nextTick:Bh,normalizeClass:bn,normalizeProps:Ile,normalizeStyle:Vm,onActivated:d7,onBeforeMount:fC,onBeforeUnmount:zh,onBeforeUpdate:f7,onDeactivated:p7,onErrorCaptured:v7,onMounted:Eo,onRenderTracked:g7,onRenderTriggered:y7,onScopeDispose:K9,onServerPrefetch:m7,onUnmounted:e1,onUpdated:Bw,openBlock:ht,popScopeId:Gm,provide:S7,proxyRefs:oC,pushScopeId:zm,queuePostFlushCb:lC,reactive:Hn,readonly:iC,ref:tt,registerRuntimeCompiler:R7,render:Wd,renderList:qm,renderSlot:ac,resolveComponent:Cn,resolveDirective:mr,resolveDynamicComponent:w7,resolveFilter:ice,resolveTransitionHooks:k0,setBlockTracking:m5,setDevtoolsHook:o7,setTransitionHooks:Em,shallowReactive:e7,shallowReadonly:Gle,shallowRef:r7,ssrContextKey:k7,ssrUtils:tce,stop:kle,toDisplayString:Hr,toHandlerKey:n0,toHandlers:yue,toRaw:oi,toRef:Zle,toRefs:n7,toValue:Wle,transformVNodeArgs:Gue,triggerRef:Hle,unref:si,useAttrs:Mue,useCssModule:sce,useCssVars:oce,useModel:Iue,useSSRContext:L7,useSlots:Eue,useTransitionState:hC,vModelCheckbox:vC,vModelDynamic:U7,vModelRadio:bC,vModelSelect:j7,vModelText:PS,vShow:wC,version:N7,warn:Kle,watch:Gn,watchEffect:aue,watchPostEffect:u7,watchSyncEffect:lue,withAsyncContext:Oue,withCtx:kn,withDefaults:Sue,withDirectives:sr,withKeys:V7,withMemo:ece,withModifiers:z3,withScopeId:rue},Symbol.toStringTag,{value:"Module"}));function z7(e){throw e}function xce(e){}function Wr(e,t,i,r){const n=e,s=new SyntaxError(String(n));return s.code=e,s.loc=t,s}const NS=Symbol(""),Ox=Symbol(""),G7=Symbol(""),g5=Symbol(""),Sce=Symbol(""),P0=Symbol(""),Ece=Symbol(""),Mce=Symbol(""),q7=Symbol(""),H7=Symbol(""),G3=Symbol(""),W7=Symbol(""),Ice=Symbol(""),J7=Symbol(""),v5=Symbol(""),Z7=Symbol(""),Y7=Symbol(""),K7=Symbol(""),Q7=Symbol(""),Tce=Symbol(""),Ace=Symbol(""),xC=Symbol(""),b5=Symbol(""),X7=Symbol(""),ej=Symbol(""),FS=Symbol(""),q3=Symbol(""),tj=Symbol(""),tN=Symbol(""),qGe=Symbol(""),iN=Symbol(""),w5=Symbol(""),HGe=Symbol(""),WGe=Symbol(""),ij=Symbol(""),JGe=Symbol(""),ZGe=Symbol(""),rj=Symbol(""),Cce=Symbol(""),Wb={[NS]:"Fragment",[Ox]:"Teleport",[G7]:"Suspense",[g5]:"KeepAlive",[Sce]:"BaseTransition",[P0]:"openBlock",[Ece]:"createBlock",[Mce]:"createElementBlock",[q7]:"createVNode",[H7]:"createElementVNode",[G3]:"createCommentVNode",[W7]:"createTextVNode",[Ice]:"createStaticVNode",[J7]:"resolveComponent",[v5]:"resolveDynamicComponent",[Z7]:"resolveDirective",[Y7]:"resolveFilter",[K7]:"withDirectives",[Q7]:"renderList",[Tce]:"renderSlot",[Ace]:"createSlots",[xC]:"toDisplayString",[b5]:"mergeProps",[X7]:"normalizeClass",[ej]:"normalizeStyle",[FS]:"normalizeProps",[q3]:"guardReactiveProps",[tj]:"toHandlers",[tN]:"camelize",[qGe]:"capitalize",[iN]:"toHandlerKey",[w5]:"setBlockTracking",[HGe]:"pushScopeId",[WGe]:"popScopeId",[ij]:"withCtx",[JGe]:"unref",[ZGe]:"isRef",[rj]:"withMemo",[Cce]:"isMemoSame"};function YGe(e){Object.getOwnPropertySymbols(e).forEach(t=>{Wb[t]=e[t]})}const Al={source:"",start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0}};function KGe(e,t=Al){return{type:0,children:e,helpers:new Set,components:[],directives:[],hoists:[],imports:[],cached:0,temps:0,codegenNode:void 0,loc:t}}function DS(e,t,i,r,n,s,o,a=!1,l=!1,u=!1,c=Al){return e&&(a?(e.helper(P0),e.helper(Yb(e.inSSR,u))):e.helper(Zb(e.inSSR,u)),o&&e.helper(K7)),{type:13,tag:t,props:i,children:r,patchFlag:n,dynamicProps:s,directives:o,isBlock:a,disableTracking:l,isComponent:u,loc:c}}function H3(e,t=Al){return{type:17,loc:t,elements:e}}function su(e,t=Al){return{type:15,loc:t,properties:e}}function mn(e,t){return{type:16,loc:Al,key:_i(e)?Ci(e,!0):e,value:t}}function Ci(e,t=!1,i=Al,r=0){return{type:4,loc:i,content:e,isStatic:t,constType:t?3:r}}function hc(e,t=Al){return{type:8,loc:t,children:e}}function Vn(e,t=[],i=Al){return{type:14,loc:i,callee:e,arguments:t}}function Jb(e,t=void 0,i=!1,r=!1,n=Al){return{type:18,params:e,returns:t,newline:i,isSlot:r,loc:n}}function rN(e,t,i,r=!0){return{type:19,test:e,consequent:t,alternate:i,newline:r,loc:Al}}function QGe(e,t,i=!1){return{type:20,index:e,value:t,isVNode:i,loc:Al}}function XGe(e){return{type:21,body:e,loc:Al}}function Zb(e,t){return e||t?q7:H7}function Yb(e,t){return e||t?Ece:Mce}function nj(e,{helper:t,removeHelper:i,inSSR:r}){e.isBlock||(e.isBlock=!0,i(Zb(r,e.isComponent)),t(P0),t(Yb(r,e.isComponent)))}const va=e=>e.type===4&&e.isStatic,Vv=(e,t)=>e===t||e===dl(t);function $ce(e){if(Vv(e,"Teleport"))return Ox;if(Vv(e,"Suspense"))return G7;if(Vv(e,"KeepAlive"))return g5;if(Vv(e,"BaseTransition"))return Sce}const eqe=/^\d|[^\$\w]/,sj=e=>!eqe.test(e),tqe=/[A-Za-z_$\xA0-\uFFFF]/,iqe=/[\.\?\w$\xA0-\uFFFF]/,rqe=/\s+[.[]\s*|\s*[.[]\s+/g,nqe=e=>{e=e.trim().replace(rqe,o=>o.trim());let t=0,i=[],r=0,n=0,s=null;for(let o=0;o<e.length;o++){const a=e.charAt(o);switch(t){case 0:if(a==="[")i.push(t),t=1,r++;else if(a==="(")i.push(t),t=2,n++;else if(!(o===0?tqe:iqe).test(a))return!1;break;case 1:a==="'"||a==='"'||a==="`"?(i.push(t),t=3,s=a):a==="["?r++:a==="]"&&(--r||(t=i.pop()));break;case 2:if(a==="'"||a==='"'||a==="`")i.push(t),t=3,s=a;else if(a==="(")n++;else if(a===")"){if(o===e.length-1)return!1;--n||(t=i.pop())}break;case 3:a===s&&(t=i.pop(),s=null);break}}return!r&&!n},Oce=nqe;function Rce(e,t,i){const n={source:e.source.slice(t,t+i),start:_5(e.start,e.source,t),end:e.end};return i!=null&&(n.end=_5(e.start,e.source,t+i)),n}function _5(e,t,i=t.length){return x5(Ui({},e),t,i)}function x5(e,t,i=t.length){let r=0,n=-1;for(let s=0;s<i;s++)t.charCodeAt(s)===10&&(r++,n=s);return e.offset+=i,e.line+=r,e.column=n===-1?e.column+i:i-n,e}function eu(e,t,i=!1){for(let r=0;r<e.props.length;r++){const n=e.props[r];if(n.type===7&&(i||n.exp)&&(_i(t)?n.name===t:t.test(n.name)))return n}}function SC(e,t,i=!1,r=!1){for(let n=0;n<e.props.length;n++){const s=e.props[n];if(s.type===6){if(i)continue;if(s.name===t&&(s.value||r))return s}else if(s.name==="bind"&&(s.exp||r)&&Vg(s.arg,t))return s}}function Vg(e,t){return!!(e&&va(e)&&e.content===t)}function sqe(e){return e.props.some(t=>t.type===7&&t.name==="bind"&&(!t.arg||t.arg.type!==4||!t.arg.isStatic))}function pR(e){return e.type===5||e.type===2}function oqe(e){return e.type===7&&e.name==="slot"}function S5(e){return e.type===1&&e.tagType===3}function E5(e){return e.type===1&&e.tagType===2}const aqe=new Set([FS,q3]);function kce(e,t=[]){if(e&&!_i(e)&&e.type===14){const i=e.callee;if(!_i(i)&&aqe.has(i))return kce(e.arguments[0],t.concat(e))}return[e,t]}function M5(e,t,i){let r,n=e.type===13?e.props:e.arguments[2],s=[],o;if(n&&!_i(n)&&n.type===14){const a=kce(n);n=a[0],s=a[1],o=s[s.length-1]}if(n==null||_i(n))r=su([t]);else if(n.type===14){const a=n.arguments[0];!_i(a)&&a.type===15?GW(t,a)||a.properties.unshift(t):n.callee===tj?r=Vn(i.helper(b5),[su([t]),n]):n.arguments.unshift(su([t])),!r&&(r=n)}else n.type===15?(GW(t,n)||n.properties.unshift(t),r=n):(r=Vn(i.helper(b5),[su([t]),n]),o&&o.callee===q3&&(o=s[s.length-2]));e.type===13?o?o.arguments[0]=r:e.props=r:o?o.arguments[0]=r:e.arguments[2]=r}function GW(e,t){let i=!1;if(e.key.type===4){const r=e.key.content;i=t.properties.some(n=>n.key.type===4&&n.key.content===r)}return i}function jS(e,t){return`_${t}_${e.replace(/[^\w]/g,(i,r)=>i==="-"?"_":e.charCodeAt(r).toString())}`}function lqe(e){return e.type===14&&e.callee===rj?e.arguments[1].returns:e}function qW(e,t){const i=t.options?t.options.compatConfig:t.compatConfig,r=i&&i[e];return e==="MODE"?r||3:r}function a0(e,t){const i=qW("MODE",t),r=qW(e,t);return i===3?r===!0:r!==!1}function US(e,t,i,...r){return a0(e,t)}const uqe=/&(gt|lt|amp|apos|quot);/g,cqe={gt:">",lt:"<",amp:"&",apos:"'",quot:'"'},HW={delimiters:["{{","}}"],getNamespace:()=>0,getTextMode:()=>0,isVoidTag:OT,isPreTag:OT,isCustomElement:OT,decodeEntities:e=>e.replace(uqe,(t,i)=>cqe[i]),onError:z7,onWarn:xce,comments:!1};function hqe(e,t={}){const i=dqe(e,t),r=xl(i);return KGe(oj(i,0,[]),fu(i,r))}function dqe(e,t){const i=Ui({},HW);let r;for(r in t)i[r]=t[r]===void 0?HW[r]:t[r];return{options:i,column:1,line:1,offset:0,originalSource:e,source:e,inPre:!1,inVPre:!1,onWarn:i.onWarn}}function oj(e,t,i){const r=EC(i),n=r?r.ns:0,s=[];for(;!_qe(e,t,i);){const a=e.source;let l;if(t===0||t===1){if(!e.inVPre&&bo(a,e.options.delimiters[0]))l=bqe(e,t);else if(t===0&&a[0]==="<")if(a.length===1)ur(e,5,1);else if(a[1]==="!")bo(a,"<!--")?l=fqe(e):bo(a,"<!DOCTYPE")?l=k_(e):bo(a,"<![CDATA[")?n!==0?l=pqe(e,i):(ur(e,1),l=k_(e)):(ur(e,11),l=k_(e));else if(a[1]==="/")if(a.length===2)ur(e,5,2);else if(a[2]===">"){ur(e,14,2),ds(e,3);continue}else if(/[a-z]/i.test(a[2])){ur(e,23),nN(e,I5.End,r);continue}else ur(e,12,2),l=k_(e);else/[a-z]/i.test(a[1])?(l=mqe(e,i),a0("COMPILER_NATIVE_TEMPLATE",e)&&l&&l.tag==="template"&&!l.props.some(u=>u.type===7&&Lce(u.name))&&(l=l.children)):a[1]==="?"?(ur(e,21,1),l=k_(e)):ur(e,12,1)}if(l||(l=wqe(e,t)),Ot(l))for(let u=0;u<l.length;u++)WW(s,l[u]);else WW(s,l)}let o=!1;if(t!==2&&t!==1){const a=e.options.whitespace!=="preserve";for(let l=0;l<s.length;l++){const u=s[l];if(u.type===2)if(e.inPre)u.content=u.content.replace(/\r\n/g,`
`);else if(/[^\t\r\n\f ]/.test(u.content))a&&(u.content=u.content.replace(/[\t\r\n\f ]+/g," "));else{const c=s[l-1],d=s[l+1];!c||!d||a&&(c.type===3&&d.type===3||c.type===3&&d.type===1||c.type===1&&d.type===3||c.type===1&&d.type===1&&/[\r\n]/.test(u.content))?(o=!0,s[l]=null):u.content=" "}else u.type===3&&!e.options.comments&&(o=!0,s[l]=null)}if(e.inPre&&r&&e.options.isPreTag(r.tag)){const l=s[0];l&&l.type===2&&(l.content=l.content.replace(/^\r?\n/,""))}}return o?s.filter(Boolean):s}function WW(e,t){if(t.type===2){const i=EC(e);if(i&&i.type===2&&i.loc.end.offset===t.loc.start.offset){i.content+=t.content,i.loc.end=t.loc.end,i.loc.source+=t.loc.source;return}}e.push(t)}function pqe(e,t){ds(e,9);const i=oj(e,3,t);return e.source.length===0?ur(e,6):ds(e,3),i}function fqe(e){const t=xl(e);let i;const r=/--(\!)?>/.exec(e.source);if(!r)i=e.source.slice(4),ds(e,e.source.length),ur(e,7);else{r.index<=3&&ur(e,0),r[1]&&ur(e,10),i=e.source.slice(4,r.index);const n=e.source.slice(0,r.index);let s=1,o=0;for(;(o=n.indexOf("<!--",s))!==-1;)ds(e,o-s+1),o+4<n.length&&ur(e,16),s=o+1;ds(e,r.index+r[0].length-s+1)}return{type:3,content:i,loc:fu(e,t)}}function k_(e){const t=xl(e),i=e.source[1]==="?"?1:2;let r;const n=e.source.indexOf(">");return n===-1?(r=e.source.slice(i),ds(e,e.source.length)):(r=e.source.slice(i,n),ds(e,n+1)),{type:3,content:r,loc:fu(e,t)}}function mqe(e,t){const i=e.inPre,r=e.inVPre,n=EC(t),s=nN(e,I5.Start,n),o=e.inPre&&!i,a=e.inVPre&&!r;if(s.isSelfClosing||e.options.isVoidTag(s.tag))return o&&(e.inPre=!1),a&&(e.inVPre=!1),s;t.push(s);const l=e.options.getTextMode(s,n),u=oj(e,l,t);t.pop();{const c=s.props.find(d=>d.type===6&&d.name==="inline-template");if(c&&US("COMPILER_INLINE_TEMPLATE",e,c.loc)){const d=fu(e,s.loc.end);c.value={type:2,content:d.source,loc:d}}}if(s.children=u,sN(e.source,s.tag))nN(e,I5.End,n);else if(ur(e,24,0,s.loc.start),e.source.length===0&&s.tag.toLowerCase()==="script"){const c=u[0];c&&bo(c.loc.source,"<!--")&&ur(e,8)}return s.loc=fu(e,s.loc.start),o&&(e.inPre=!1),a&&(e.inVPre=!1),s}var I5=(e=>(e[e.Start=0]="Start",e[e.End=1]="End",e))(I5||{});const Lce=Pa("if,else,else-if,for,slot");function nN(e,t,i){const r=xl(e),n=/^<\/?([a-z][^\t\r\n\f />]*)/i.exec(e.source),s=n[1],o=e.options.getNamespace(s,i);ds(e,n[0].length),VS(e);const a=xl(e),l=e.source;e.options.isPreTag(s)&&(e.inPre=!0);let u=JW(e,t);t===0&&!e.inVPre&&u.some(f=>f.type===7&&f.name==="pre")&&(e.inVPre=!0,Ui(e,a),e.source=l,u=JW(e,t).filter(f=>f.name!=="v-pre"));let c=!1;if(e.source.length===0?ur(e,9):(c=bo(e.source,"/>"),t===1&&c&&ur(e,4),ds(e,c?2:1)),t===1)return;let d=0;return e.inVPre||(s==="slot"?d=2:s==="template"?u.some(f=>f.type===7&&Lce(f.name))&&(d=3):yqe(s,u,e)&&(d=1)),{type:1,ns:o,tag:s,tagType:d,props:u,isSelfClosing:c,children:[],loc:fu(e,r),codegenNode:void 0}}function yqe(e,t,i){const r=i.options;if(r.isCustomElement(e))return!1;if(e==="component"||/^[A-Z]/.test(e)||$ce(e)||r.isBuiltInComponent&&r.isBuiltInComponent(e)||r.isNativeTag&&!r.isNativeTag(e))return!0;for(let n=0;n<t.length;n++){const s=t[n];if(s.type===6){if(s.name==="is"&&s.value){if(s.value.content.startsWith("vue:"))return!0;if(US("COMPILER_IS_ON_ELEMENT",i,s.loc))return!0}}else{if(s.name==="is")return!0;if(s.name==="bind"&&Vg(s.arg,"is")&&US("COMPILER_IS_ON_ELEMENT",i,s.loc))return!0}}}function JW(e,t){const i=[],r=new Set;for(;e.source.length>0&&!bo(e.source,">")&&!bo(e.source,"/>");){if(bo(e.source,"/")){ur(e,22),ds(e,1),VS(e);continue}t===1&&ur(e,3);const n=gqe(e,r);n.type===6&&n.value&&n.name==="class"&&(n.value.content=n.value.content.replace(/\s+/g," ").trim()),t===0&&i.push(n),/^[^\t\r\n\f />]/.test(e.source)&&ur(e,15),VS(e)}return i}function gqe(e,t){var i;const r=xl(e),s=/^[^\t\r\n\f />][^\t\r\n\f />=]*/.exec(e.source)[0];t.has(s)&&ur(e,2),t.add(s),s[0]==="="&&ur(e,19);{const l=/["'<]/g;let u;for(;u=l.exec(s);)ur(e,17,u.index)}ds(e,s.length);let o;/^[\t\r\n\f ]*=/.test(e.source)&&(VS(e),ds(e,1),VS(e),o=vqe(e),o||ur(e,13));const a=fu(e,r);if(!e.inVPre&&/^(v-[A-Za-z0-9-]|:|\.|@|#)/.test(s)){const l=/(?:^v-([a-z0-9-]+))?(?:(?::|^\.|^@|^#)(\[[^\]]+\]|[^\.]+))?(.+)?$/i.exec(s);let u=bo(s,"."),c=l[1]||(u||bo(s,":")?"bind":bo(s,"@")?"on":"slot"),d;if(l[2]){const m=c==="slot",g=s.lastIndexOf(l[2],s.length-(((i=l[3])==null?void 0:i.length)||0)),v=fu(e,ZW(e,r,g),ZW(e,r,g+l[2].length+(m&&l[3]||"").length));let b=l[2],x=!0;b.startsWith("[")?(x=!1,b.endsWith("]")?b=b.slice(1,b.length-1):(ur(e,27),b=b.slice(1))):m&&(b+=l[3]||""),d={type:4,content:b,isStatic:x,constType:x?3:0,loc:v}}if(o&&o.isQuoted){const m=o.loc;m.start.offset++,m.start.column++,m.end=_5(m.start,o.content),m.source=m.source.slice(1,-1)}const f=l[3]?l[3].slice(1).split("."):[];return u&&f.push("prop"),c==="bind"&&d&&f.includes("sync")&&US("COMPILER_V_BIND_SYNC",e,a,d.loc.source)&&(c="model",f.splice(f.indexOf("sync"),1)),{type:7,name:c,exp:o&&{type:4,content:o.content,isStatic:!1,constType:0,loc:o.loc},arg:d,modifiers:f,loc:a}}return!e.inVPre&&bo(s,"v-")&&ur(e,26),{type:6,name:s,value:o&&{type:2,content:o.content,loc:o.loc},loc:a}}function vqe(e){const t=xl(e);let i;const r=e.source[0],n=r==='"'||r==="'";if(n){ds(e,1);const s=e.source.indexOf(r);s===-1?i=Rx(e,e.source.length,4):(i=Rx(e,s,4),ds(e,1))}else{const s=/^[^\t\r\n\f >]+/.exec(e.source);if(!s)return;const o=/["'<=`]/g;let a;for(;a=o.exec(s[0]);)ur(e,18,a.index);i=Rx(e,s[0].length,4)}return{content:i,isQuoted:n,loc:fu(e,t)}}function bqe(e,t){const[i,r]=e.options.delimiters,n=e.source.indexOf(r,i.length);if(n===-1){ur(e,25);return}const s=xl(e);ds(e,i.length);const o=xl(e),a=xl(e),l=n-i.length,u=e.source.slice(0,l),c=Rx(e,l,t),d=c.trim(),f=c.indexOf(d);f>0&&x5(o,u,f);const m=l-(c.length-d.length-f);return x5(a,u,m),ds(e,r.length),{type:5,content:{type:4,isStatic:!1,constType:0,content:d,loc:fu(e,o,a)},loc:fu(e,s)}}function wqe(e,t){const i=t===3?["]]>"]:["<",e.options.delimiters[0]];let r=e.source.length;for(let o=0;o<i.length;o++){const a=e.source.indexOf(i[o],1);a!==-1&&r>a&&(r=a)}const n=xl(e);return{type:2,content:Rx(e,r,t),loc:fu(e,n)}}function Rx(e,t,i){const r=e.source.slice(0,t);return ds(e,t),i===2||i===3||!r.includes("&")?r:e.options.decodeEntities(r,i===4)}function xl(e){const{column:t,line:i,offset:r}=e;return{column:t,line:i,offset:r}}function fu(e,t,i){return i=i||xl(e),{start:t,end:i,source:e.originalSource.slice(t.offset,i.offset)}}function EC(e){return e[e.length-1]}function bo(e,t){return e.startsWith(t)}function ds(e,t){const{source:i}=e;x5(e,i,t),e.source=i.slice(t)}function VS(e){const t=/^[\t\r\n\f ]+/.exec(e.source);t&&ds(e,t[0].length)}function ZW(e,t,i){return _5(t,e.originalSource.slice(t.offset,i),i)}function ur(e,t,i,r=xl(e)){i&&(r.offset+=i,r.column+=i),e.options.onError(Wr(t,{start:r,end:r,source:""}))}function _qe(e,t,i){const r=e.source;switch(t){case 0:if(bo(r,"</")){for(let n=i.length-1;n>=0;--n)if(sN(r,i[n].tag))return!0}break;case 1:case 2:{const n=EC(i);if(n&&sN(r,n.tag))return!0;break}case 3:if(bo(r,"]]>"))return!0;break}return!r}function sN(e,t){return bo(e,"</")&&e.slice(2,2+t.length).toLowerCase()===t.toLowerCase()&&/[\t\r\n\f />]/.test(e[2+t.length]||">")}function xqe(e,t){LT(e,t,Pce(e,e.children[0]))}function Pce(e,t){const{children:i}=e;return i.length===1&&t.type===1&&!E5(t)}function LT(e,t,i=!1){const{children:r}=e,n=r.length;let s=0;for(let o=0;o<r.length;o++){const a=r[o];if(a.type===1&&a.tagType===0){const l=i?0:ou(a,t);if(l>0){if(l>=2){a.codegenNode.patchFlag="-1",a.codegenNode=t.hoist(a.codegenNode),s++;continue}}else{const u=a.codegenNode;if(u.type===13){const c=jce(u);if((!c||c===512||c===1)&&Fce(a,t)>=2){const d=Dce(a);d&&(u.props=t.hoist(d))}u.dynamicProps&&(u.dynamicProps=t.hoist(u.dynamicProps))}}}if(a.type===1){const l=a.tagType===1;l&&t.scopes.vSlot++,LT(a,t),l&&t.scopes.vSlot--}else if(a.type===11)LT(a,t,a.children.length===1);else if(a.type===9)for(let l=0;l<a.branches.length;l++)LT(a.branches[l],t,a.branches[l].children.length===1)}s&&t.transformHoist&&t.transformHoist(r,t,e),s&&s===n&&e.type===1&&e.tagType===0&&e.codegenNode&&e.codegenNode.type===13&&Ot(e.codegenNode.children)&&(e.codegenNode.children=t.hoist(H3(e.codegenNode.children)))}function ou(e,t){const{constantCache:i}=t;switch(e.type){case 1:if(e.tagType!==0)return 0;const r=i.get(e);if(r!==void 0)return r;const n=e.codegenNode;if(n.type!==13||n.isBlock&&e.tag!=="svg"&&e.tag!=="foreignObject")return 0;if(jce(n))return i.set(e,0),0;{let a=3;const l=Fce(e,t);if(l===0)return i.set(e,0),0;l<a&&(a=l);for(let u=0;u<e.children.length;u++){const c=ou(e.children[u],t);if(c===0)return i.set(e,0),0;c<a&&(a=c)}if(a>1)for(let u=0;u<e.props.length;u++){const c=e.props[u];if(c.type===7&&c.name==="bind"&&c.exp){const d=ou(c.exp,t);if(d===0)return i.set(e,0),0;d<a&&(a=d)}}if(n.isBlock){for(let u=0;u<e.props.length;u++)if(e.props[u].type===7)return i.set(e,0),0;t.removeHelper(P0),t.removeHelper(Yb(t.inSSR,n.isComponent)),n.isBlock=!1,t.helper(Zb(t.inSSR,n.isComponent))}return i.set(e,a),a}case 2:case 3:return 3;case 9:case 11:case 10:return 0;case 5:case 12:return ou(e.content,t);case 4:return e.constType;case 8:let o=3;for(let a=0;a<e.children.length;a++){const l=e.children[a];if(_i(l)||wm(l))continue;const u=ou(l,t);if(u===0)return 0;u<o&&(o=u)}return o;default:return 0}}const Sqe=new Set([X7,ej,FS,q3]);function Nce(e,t){if(e.type===14&&!_i(e.callee)&&Sqe.has(e.callee)){const i=e.arguments[0];if(i.type===4)return ou(i,t);if(i.type===14)return Nce(i,t)}return 0}function Fce(e,t){let i=3;const r=Dce(e);if(r&&r.type===15){const{properties:n}=r;for(let s=0;s<n.length;s++){const{key:o,value:a}=n[s],l=ou(o,t);if(l===0)return l;l<i&&(i=l);let u;if(a.type===4?u=ou(a,t):a.type===14?u=Nce(a,t):u=0,u===0)return u;u<i&&(i=u)}}return i}function Dce(e){const t=e.codegenNode;if(t.type===13)return t.props}function jce(e){const t=e.patchFlag;return t?parseInt(t,10):void 0}function Eqe(e,{filename:t="",prefixIdentifiers:i=!1,hoistStatic:r=!1,cacheHandlers:n=!1,nodeTransforms:s=[],directiveTransforms:o={},transformHoist:a=null,isBuiltInComponent:l=qo,isCustomElement:u=qo,expressionPlugins:c=[],scopeId:d=null,slotted:f=!0,ssr:m=!1,inSSR:g=!1,ssrCssVars:v="",bindingMetadata:b=cr,inline:x=!1,isTS:S=!1,onError:T=z7,onWarn:_=xce,compatConfig:M}){const I=t.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),$={selfName:I&&Um(Rn(I[1])),prefixIdentifiers:i,hoistStatic:r,cacheHandlers:n,nodeTransforms:s,directiveTransforms:o,transformHoist:a,isBuiltInComponent:l,isCustomElement:u,expressionPlugins:c,scopeId:d,slotted:f,ssr:m,inSSR:g,ssrCssVars:v,bindingMetadata:b,inline:x,isTS:S,onError:T,onWarn:_,compatConfig:M,root:e,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],constantCache:new Map,temps:0,cached:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,currentNode:e,childIndex:0,inVOnce:!1,helper(L){const B=$.helpers.get(L)||0;return $.helpers.set(L,B+1),L},removeHelper(L){const B=$.helpers.get(L);if(B){const z=B-1;z?$.helpers.set(L,z):$.helpers.delete(L)}},helperString(L){return`_${Wb[$.helper(L)]}`},replaceNode(L){$.parent.children[$.childIndex]=$.currentNode=L},removeNode(L){const B=$.parent.children,z=L?B.indexOf(L):$.currentNode?$.childIndex:-1;!L||L===$.currentNode?($.currentNode=null,$.onNodeRemoved()):$.childIndex>z&&($.childIndex--,$.onNodeRemoved()),$.parent.children.splice(z,1)},onNodeRemoved:()=>{},addIdentifiers(L){},removeIdentifiers(L){},hoist(L){_i(L)&&(L=Ci(L)),$.hoists.push(L);const B=Ci(`_hoisted_${$.hoists.length}`,!1,L.loc,2);return B.hoisted=L,B},cache(L,B=!1){return QGe($.cached++,L,B)}};return $.filters=new Set,$}function Mqe(e,t){const i=Eqe(e,t);MC(e,i),t.hoistStatic&&xqe(e,i),t.ssr||Iqe(e,i),e.helpers=new Set([...i.helpers.keys()]),e.components=[...i.components],e.directives=[...i.directives],e.imports=i.imports,e.hoists=i.hoists,e.temps=i.temps,e.cached=i.cached,e.filters=[...i.filters]}function Iqe(e,t){const{helper:i}=t,{children:r}=e;if(r.length===1){const n=r[0];if(Pce(e,n)&&n.codegenNode){const s=n.codegenNode;s.type===13&&nj(s,t),e.codegenNode=s}else e.codegenNode=n}else if(r.length>1){let n=64;e.codegenNode=DS(t,i(NS),void 0,e.children,n+"",void 0,void 0,!0,void 0,!1)}}function Tqe(e,t){let i=0;const r=()=>{i--};for(;i<e.children.length;i++){const n=e.children[i];_i(n)||(t.parent=e,t.childIndex=i,t.onNodeRemoved=r,MC(n,t))}}function MC(e,t){t.currentNode=e;const{nodeTransforms:i}=t,r=[];for(let s=0;s<i.length;s++){const o=i[s](e,t);if(o&&(Ot(o)?r.push(...o):r.push(o)),t.currentNode)e=t.currentNode;else return}switch(e.type){case 3:t.ssr||t.helper(G3);break;case 5:t.ssr||t.helper(xC);break;case 9:for(let s=0;s<e.branches.length;s++)MC(e.branches[s],t);break;case 10:case 11:case 1:case 0:Tqe(e,t);break}t.currentNode=e;let n=r.length;for(;n--;)r[n]()}function Uce(e,t){const i=_i(e)?r=>r===e:r=>e.test(r);return(r,n)=>{if(r.type===1){const{props:s}=r;if(r.tagType===3&&s.some(oqe))return;const o=[];for(let a=0;a<s.length;a++){const l=s[a];if(l.type===7&&i(l.name)){s.splice(a,1),a--;const u=t(r,l,n);u&&o.push(u)}}return o}}}const IC="/*#__PURE__*/",Vce=e=>`${Wb[e]}: _${Wb[e]}`;function YW(e,{mode:t="function",prefixIdentifiers:i=t==="module",sourceMap:r=!1,filename:n="template.vue.html",scopeId:s=null,optimizeImports:o=!1,runtimeGlobalName:a="Vue",runtimeModuleName:l="vue",ssrRuntimeModuleName:u="vue/server-renderer",ssr:c=!1,isTS:d=!1,inSSR:f=!1}){const m={mode:t,prefixIdentifiers:i,sourceMap:r,filename:n,scopeId:s,optimizeImports:o,runtimeGlobalName:a,runtimeModuleName:l,ssrRuntimeModuleName:u,ssr:c,isTS:d,inSSR:f,source:e.loc.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper(v){return`_${Wb[v]}`},push(v,b){m.code+=v},indent(){g(++m.indentLevel)},deindent(v=!1){v?--m.indentLevel:g(--m.indentLevel)},newline(){g(m.indentLevel)}};function g(v){m.push(`
`+"  ".repeat(v))}return m}function Aqe(e,t={}){const i=YW(e,t);t.onContextCreated&&t.onContextCreated(i);const{mode:r,push:n,prefixIdentifiers:s,indent:o,deindent:a,newline:l,scopeId:u,ssr:c}=i,d=Array.from(e.helpers),f=d.length>0,m=!s&&r!=="module",g=!1,v=g?YW(e,t):i;Cqe(e,v);const b=c?"ssrRender":"render",S=(c?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"]).join(", ");if(n(`function ${b}(${S}) {`),o(),m&&(n("with (_ctx) {"),o(),f&&(n(`const { ${d.map(Vce).join(", ")} } = _Vue`),n(`
`),l())),e.components.length&&(fR(e.components,"component",i),(e.directives.length||e.temps>0)&&l()),e.directives.length&&(fR(e.directives,"directive",i),e.temps>0&&l()),e.filters&&e.filters.length&&(l(),fR(e.filters,"filter",i),l()),e.temps>0){n("let ");for(let T=0;T<e.temps;T++)n(`${T>0?", ":""}_temp${T}`)}return(e.components.length||e.directives.length||e.temps)&&(n(`
`),l()),c||n("return "),e.codegenNode?wo(e.codegenNode,i):n("null"),m&&(a(),n("}")),a(),n("}"),{ast:e,code:i.code,preamble:g?v.code:"",map:i.map?i.map.toJSON():void 0}}function Cqe(e,t){const{ssr:i,prefixIdentifiers:r,push:n,newline:s,runtimeModuleName:o,runtimeGlobalName:a,ssrRuntimeModuleName:l}=t,u=a,c=Array.from(e.helpers);if(c.length>0&&(n(`const _Vue = ${u}
`),e.hoists.length)){const d=[q7,H7,G3,W7,Ice].filter(f=>c.includes(f)).map(Vce).join(", ");n(`const { ${d} } = _Vue
`)}$qe(e.hoists,t),s(),n("return ")}function fR(e,t,{helper:i,push:r,newline:n,isTS:s}){const o=i(t==="filter"?Y7:t==="component"?J7:Z7);for(let a=0;a<e.length;a++){let l=e[a];const u=l.endsWith("__self");u&&(l=l.slice(0,-6)),r(`const ${jS(l,t)} = ${o}(${JSON.stringify(l)}${u?", true":""})${s?"!":""}`),a<e.length-1&&n()}}function $qe(e,t){if(!e.length)return;t.pure=!0;const{push:i,newline:r,helper:n,scopeId:s,mode:o}=t;r();for(let a=0;a<e.length;a++){const l=e[a];l&&(i(`const _hoisted_${a+1} = `),wo(l,t),r())}t.pure=!1}function aj(e,t){const i=e.length>3||!1;t.push("["),i&&t.indent(),W3(e,t,i),i&&t.deindent(),t.push("]")}function W3(e,t,i=!1,r=!0){const{push:n,newline:s}=t;for(let o=0;o<e.length;o++){const a=e[o];_i(a)?n(a):Ot(a)?aj(a,t):wo(a,t),o<e.length-1&&(i?(r&&n(","),s()):r&&n(", "))}}function wo(e,t){if(_i(e)){t.push(e);return}if(wm(e)){t.push(t.helper(e));return}switch(e.type){case 1:case 9:case 11:wo(e.codegenNode,t);break;case 2:Oqe(e,t);break;case 4:Bce(e,t);break;case 5:Rqe(e,t);break;case 12:wo(e.codegenNode,t);break;case 8:zce(e,t);break;case 3:Lqe(e,t);break;case 13:Pqe(e,t);break;case 14:Fqe(e,t);break;case 15:Dqe(e,t);break;case 17:jqe(e,t);break;case 18:Uqe(e,t);break;case 19:Vqe(e,t);break;case 20:Bqe(e,t);break;case 21:W3(e.body,t,!0,!1);break}}function Oqe(e,t){t.push(JSON.stringify(e.content),e)}function Bce(e,t){const{content:i,isStatic:r}=e;t.push(r?JSON.stringify(i):i,e)}function Rqe(e,t){const{push:i,helper:r,pure:n}=t;n&&i(IC),i(`${r(xC)}(`),wo(e.content,t),i(")")}function zce(e,t){for(let i=0;i<e.children.length;i++){const r=e.children[i];_i(r)?t.push(r):wo(r,t)}}function kqe(e,t){const{push:i}=t;if(e.type===8)i("["),zce(e,t),i("]");else if(e.isStatic){const r=sj(e.content)?e.content:JSON.stringify(e.content);i(r,e)}else i(`[${e.content}]`,e)}function Lqe(e,t){const{push:i,helper:r,pure:n}=t;n&&i(IC),i(`${r(G3)}(${JSON.stringify(e.content)})`,e)}function Pqe(e,t){const{push:i,helper:r,pure:n}=t,{tag:s,props:o,children:a,patchFlag:l,dynamicProps:u,directives:c,isBlock:d,disableTracking:f,isComponent:m}=e;c&&i(r(K7)+"("),d&&i(`(${r(P0)}(${f?"true":""}), `),n&&i(IC);const g=d?Yb(t.inSSR,m):Zb(t.inSSR,m);i(r(g)+"(",e),W3(Nqe([s,o,a,l,u]),t),i(")"),d&&i(")"),c&&(i(", "),wo(c,t),i(")"))}function Nqe(e){let t=e.length;for(;t--&&e[t]==null;);return e.slice(0,t+1).map(i=>i||"null")}function Fqe(e,t){const{push:i,helper:r,pure:n}=t,s=_i(e.callee)?e.callee:r(e.callee);n&&i(IC),i(s+"(",e),W3(e.arguments,t),i(")")}function Dqe(e,t){const{push:i,indent:r,deindent:n,newline:s}=t,{properties:o}=e;if(!o.length){i("{}",e);return}const a=o.length>1||!1;i(a?"{":"{ "),a&&r();for(let l=0;l<o.length;l++){const{key:u,value:c}=o[l];kqe(u,t),i(": "),wo(c,t),l<o.length-1&&(i(","),s())}a&&n(),i(a?"}":" }")}function jqe(e,t){aj(e.elements,t)}function Uqe(e,t){const{push:i,indent:r,deindent:n}=t,{params:s,returns:o,body:a,newline:l,isSlot:u}=e;u&&i(`_${Wb[ij]}(`),i("(",e),Ot(s)?W3(s,t):s&&wo(s,t),i(") => "),(l||a)&&(i("{"),r()),o?(l&&i("return "),Ot(o)?aj(o,t):wo(o,t)):a&&wo(a,t),(l||a)&&(n(),i("}")),u&&(e.isNonScopedSlot&&i(", undefined, true"),i(")"))}function Vqe(e,t){const{test:i,consequent:r,alternate:n,newline:s}=e,{push:o,indent:a,deindent:l,newline:u}=t;if(i.type===4){const d=!sj(i.content);d&&o("("),Bce(i,t),d&&o(")")}else o("("),wo(i,t),o(")");s&&a(),t.indentLevel++,s||o(" "),o("? "),wo(r,t),t.indentLevel--,s&&u(),s||o(" "),o(": ");const c=n.type===19;c||t.indentLevel++,wo(n,t),c||t.indentLevel--,s&&l(!0)}function Bqe(e,t){const{push:i,helper:r,indent:n,deindent:s,newline:o}=t;i(`_cache[${e.index}] || (`),e.isVNode&&(n(),i(`${r(w5)}(-1),`),o()),i(`_cache[${e.index}] = `),wo(e.value,t),e.isVNode&&(i(","),o(),i(`${r(w5)}(1),`),o(),i(`_cache[${e.index}]`),s()),i(")")}new RegExp("\\b"+"arguments,await,break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,let,new,return,super,switch,throw,try,var,void,while,with,yield".split(",").join("\\b|\\b")+"\\b");const zqe=Uce(/^(if|else|else-if)$/,(e,t,i)=>Gqe(e,t,i,(r,n,s)=>{const o=i.parent.children;let a=o.indexOf(r),l=0;for(;a-->=0;){const u=o[a];u&&u.type===9&&(l+=u.branches.length)}return()=>{if(s)r.codegenNode=QW(n,l,i);else{const u=qqe(r.codegenNode);u.alternate=QW(n,l+r.branches.length-1,i)}}}));function Gqe(e,t,i,r){if(t.name!=="else"&&(!t.exp||!t.exp.content.trim())){const n=t.exp?t.exp.loc:e.loc;i.onError(Wr(28,t.loc)),t.exp=Ci("true",!1,n)}if(t.name==="if"){const n=KW(e,t),s={type:9,loc:e.loc,branches:[n]};if(i.replaceNode(s),r)return r(s,n,!0)}else{const n=i.parent.children;let s=n.indexOf(e);for(;s-->=-1;){const o=n[s];if(o&&o.type===3){i.removeNode(o);continue}if(o&&o.type===2&&!o.content.trim().length){i.removeNode(o);continue}if(o&&o.type===9){t.name==="else-if"&&o.branches[o.branches.length-1].condition===void 0&&i.onError(Wr(30,e.loc)),i.removeNode();const a=KW(e,t);o.branches.push(a);const l=r&&r(o,a,!1);MC(a,i),l&&l(),i.currentNode=null}else i.onError(Wr(30,e.loc));break}}}function KW(e,t){const i=e.tagType===3;return{type:10,loc:e.loc,condition:t.name==="else"?void 0:t.exp,children:i&&!eu(e,"for")?e.children:[e],userKey:SC(e,"key"),isTemplateIf:i}}function QW(e,t,i){return e.condition?rN(e.condition,XW(e,t,i),Vn(i.helper(G3),['""',"true"])):XW(e,t,i)}function XW(e,t,i){const{helper:r}=i,n=mn("key",Ci(`${t}`,!1,Al,2)),{children:s}=e,o=s[0];if(s.length!==1||o.type!==1)if(s.length===1&&o.type===11){const l=o.codegenNode;return M5(l,n,i),l}else{let l=64;return DS(i,r(NS),su([n]),s,l+"",void 0,void 0,!0,!1,!1,e.loc)}else{const l=o.codegenNode,u=lqe(l);return u.type===13&&nj(u,i),M5(u,n,i),l}}function qqe(e){for(;;)if(e.type===19)if(e.alternate.type===19)e=e.alternate;else return e;else e.type===20&&(e=e.value)}const Hqe=Uce("for",(e,t,i)=>{const{helper:r,removeHelper:n}=i;return Wqe(e,t,i,s=>{const o=Vn(r(Q7),[s.source]),a=S5(e),l=eu(e,"memo"),u=SC(e,"key"),c=u&&(u.type===6?Ci(u.value.content,!0):u.exp),d=u?mn("key",c):null,f=s.source.type===4&&s.source.constType>0,m=f?64:u?128:256;return s.codegenNode=DS(i,r(NS),void 0,o,m+"",void 0,void 0,!0,!f,!1,e.loc),()=>{let g;const{children:v}=s,b=v.length!==1||v[0].type!==1,x=E5(e)?e:a&&e.children.length===1&&E5(e.children[0])?e.children[0]:null;if(x?(g=x.codegenNode,a&&d&&M5(g,d,i)):b?g=DS(i,r(NS),d?su([d]):void 0,e.children,"64",void 0,void 0,!0,void 0,!1):(g=v[0].codegenNode,a&&d&&M5(g,d,i),g.isBlock!==!f&&(g.isBlock?(n(P0),n(Yb(i.inSSR,g.isComponent))):n(Zb(i.inSSR,g.isComponent))),g.isBlock=!f,g.isBlock?(r(P0),r(Yb(i.inSSR,g.isComponent))):r(Zb(i.inSSR,g.isComponent))),l){const S=Jb(oN(s.parseResult,[Ci("_cached")]));S.body=XGe([hc(["const _memo = (",l.exp,")"]),hc(["if (_cached",...c?[" && _cached.key === ",c]:[],` && ${i.helperString(Cce)}(_cached, _memo)) return _cached`]),hc(["const _item = ",g]),Ci("_item.memo = _memo"),Ci("return _item")]),o.arguments.push(S,Ci("_cache"),Ci(String(i.cached++)))}else o.arguments.push(Jb(oN(s.parseResult),g,!0))}})});function Wqe(e,t,i,r){if(!t.exp){i.onError(Wr(31,t.loc));return}const n=Gce(t.exp);if(!n){i.onError(Wr(32,t.loc));return}const{addIdentifiers:s,removeIdentifiers:o,scopes:a}=i,{source:l,value:u,key:c,index:d}=n,f={type:11,loc:t.loc,source:l,valueAlias:u,keyAlias:c,objectIndexAlias:d,parseResult:n,children:S5(e)?e.children:[e]};i.replaceNode(f),a.vFor++;const m=r&&r(f);return()=>{a.vFor--,m&&m()}}const Jqe=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,eJ=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Zqe=/^\(|\)$/g;function Gce(e,t){const i=e.loc,r=e.content,n=r.match(Jqe);if(!n)return;const[,s,o]=n,a={source:NM(i,o.trim(),r.indexOf(o,s.length)),value:void 0,key:void 0,index:void 0};let l=s.trim().replace(Zqe,"").trim();const u=s.indexOf(l),c=l.match(eJ);if(c){l=l.replace(eJ,"").trim();const d=c[1].trim();let f;if(d&&(f=r.indexOf(d,u+l.length),a.key=NM(i,d,f)),c[2]){const m=c[2].trim();m&&(a.index=NM(i,m,r.indexOf(m,a.key?f+d.length:u+l.length)))}}return l&&(a.value=NM(i,l,u)),a}function NM(e,t,i){return Ci(t,!1,Rce(e,i,t.length))}function oN({value:e,key:t,index:i},r=[]){return Yqe([e,t,i,...r])}function Yqe(e){let t=e.length;for(;t--&&!e[t];);return e.slice(0,t+1).map((i,r)=>i||Ci("_".repeat(r+1),!1))}const tJ=Ci("undefined",!1),Kqe=(e,t)=>{if(e.type===1&&(e.tagType===1||e.tagType===3)){const i=eu(e,"slot");if(i)return i.exp,t.scopes.vSlot++,()=>{t.scopes.vSlot--}}},Qqe=(e,t,i)=>Jb(e,t,!1,!0,t.length?t[0].loc:i);function Xqe(e,t,i=Qqe){t.helper(ij);const{children:r,loc:n}=e,s=[],o=[];let a=t.scopes.vSlot>0||t.scopes.vFor>0;const l=eu(e,"slot",!0);if(l){const{arg:b,exp:x}=l;b&&!va(b)&&(a=!0),s.push(mn(b||Ci("default",!0),i(x,r,n)))}let u=!1,c=!1;const d=[],f=new Set;let m=0;for(let b=0;b<r.length;b++){const x=r[b];let S;if(!S5(x)||!(S=eu(x,"slot",!0))){x.type!==3&&d.push(x);continue}if(l){t.onError(Wr(37,S.loc));break}u=!0;const{children:T,loc:_}=x,{arg:M=Ci("default",!0),exp:I,loc:$}=S;let L;va(M)?L=M?M.content:"default":a=!0;const B=i(I,T,_);let z,W,J;if(z=eu(x,"if"))a=!0,o.push(rN(z.exp,FM(M,B,m++),tJ));else if(W=eu(x,/^else(-if)?$/,!0)){let K=b,Q;for(;K--&&(Q=r[K],Q.type===3););if(Q&&S5(Q)&&eu(Q,"if")){r.splice(b,1),b--;let y=o[o.length-1];for(;y.alternate.type===19;)y=y.alternate;y.alternate=W.exp?rN(W.exp,FM(M,B,m++),tJ):FM(M,B,m++)}else t.onError(Wr(30,W.loc))}else if(J=eu(x,"for")){a=!0;const K=J.parseResult||Gce(J.exp);K?o.push(Vn(t.helper(Q7),[K.source,Jb(oN(K),FM(M,B),!0)])):t.onError(Wr(32,J.loc))}else{if(L){if(f.has(L)){t.onError(Wr(38,$));continue}f.add(L),L==="default"&&(c=!0)}s.push(mn(M,B))}}if(!l){const b=(x,S)=>{const T=i(x,S,n);return t.compatConfig&&(T.isNonScopedSlot=!0),mn("default",T)};u?d.length&&d.some(x=>qce(x))&&(c?t.onError(Wr(39,d[0].loc)):s.push(b(void 0,d))):s.push(b(void 0,r))}const g=a?2:PT(e.children)?3:1;let v=su(s.concat(mn("_",Ci(g+"",!1))),n);return o.length&&(v=Vn(t.helper(Ace),[v,H3(o)])),{slots:v,hasDynamicSlots:a}}function FM(e,t,i){const r=[mn("name",e),mn("fn",t)];return i!=null&&r.push(mn("key",Ci(String(i),!0))),su(r)}function PT(e){for(let t=0;t<e.length;t++){const i=e[t];switch(i.type){case 1:if(i.tagType===2||PT(i.children))return!0;break;case 9:if(PT(i.branches))return!0;break;case 10:case 11:if(PT(i.children))return!0;break}}return!1}function qce(e){return e.type!==2&&e.type!==12?!0:e.type===2?!!e.content.trim():qce(e.content)}const Hce=new WeakMap,eHe=(e,t)=>function(){if(e=t.currentNode,!(e.type===1&&(e.tagType===0||e.tagType===1)))return;const{tag:r,props:n}=e,s=e.tagType===1;let o=s?tHe(e,t):`"${r}"`;const a=dr(o)&&o.callee===v5;let l,u,c,d=0,f,m,g,v=a||o===Ox||o===G7||!s&&(r==="svg"||r==="foreignObject");if(n.length>0){const b=Wce(e,t,void 0,s,a);l=b.props,d=b.patchFlag,m=b.dynamicPropNames;const x=b.directives;g=x&&x.length?H3(x.map(S=>rHe(S,t))):void 0,b.shouldUseBlock&&(v=!0)}if(e.children.length>0)if(o===g5&&(v=!0,d|=1024),s&&o!==Ox&&o!==g5){const{slots:x,hasDynamicSlots:S}=Xqe(e,t);u=x,S&&(d|=1024)}else if(e.children.length===1&&o!==Ox){const x=e.children[0],S=x.type,T=S===5||S===8;T&&ou(x,t)===0&&(d|=1),T||S===2?u=x:u=e.children}else u=e.children;d!==0&&(c=String(d),m&&m.length&&(f=nHe(m))),e.codegenNode=DS(t,o,l,u,c,f,g,!!v,!1,s,e.loc)};function tHe(e,t,i=!1){let{tag:r}=e;const n=aN(r),s=SC(e,"is");if(s)if(n||a0("COMPILER_IS_ON_ELEMENT",t)){const l=s.type===6?s.value&&Ci(s.value.content,!0):s.exp;if(l)return Vn(t.helper(v5),[l])}else s.type===6&&s.value.content.startsWith("vue:")&&(r=s.value.content.slice(4));const o=!n&&eu(e,"is");if(o&&o.exp)return Vn(t.helper(v5),[o.exp]);const a=$ce(r)||t.isBuiltInComponent(r);return a?(i||t.helper(a),a):(t.helper(J7),t.components.add(r),jS(r,"component"))}function Wce(e,t,i=e.props,r,n,s=!1){const{tag:o,loc:a,children:l}=e;let u=[];const c=[],d=[],f=l.length>0;let m=!1,g=0,v=!1,b=!1,x=!1,S=!1,T=!1,_=!1;const M=[],I=B=>{u.length&&(c.push(su(iJ(u),a)),u=[]),B&&c.push(B)},$=({key:B,value:z})=>{if(va(B)){const W=B.content,J=Q0(W);if(J&&(!r||n)&&W.toLowerCase()!=="onclick"&&W!=="onUpdate:modelValue"&&!r0(W)&&(S=!0),J&&r0(W)&&(_=!0),z.type===20||(z.type===4||z.type===8)&&ou(z,t)>0)return;W==="ref"?v=!0:W==="class"?b=!0:W==="style"?x=!0:W!=="key"&&!M.includes(W)&&M.push(W),r&&(W==="class"||W==="style")&&!M.includes(W)&&M.push(W)}else T=!0};for(let B=0;B<i.length;B++){const z=i[B];if(z.type===6){const{loc:W,name:J,value:K}=z;let Q=!0;if(J==="ref"&&(v=!0,t.scopes.vFor>0&&u.push(mn(Ci("ref_for",!0),Ci("true")))),J==="is"&&(aN(o)||K&&K.content.startsWith("vue:")||a0("COMPILER_IS_ON_ELEMENT",t)))continue;u.push(mn(Ci(J,!0,Rce(W,0,J.length)),Ci(K?K.content:"",Q,K?K.loc:W)))}else{const{name:W,arg:J,exp:K,loc:Q}=z,y=W==="bind",A=W==="on";if(W==="slot"){r||t.onError(Wr(40,Q));continue}if(W==="once"||W==="memo"||W==="is"||y&&Vg(J,"is")&&(aN(o)||a0("COMPILER_IS_ON_ELEMENT",t))||A&&s)continue;if((y&&Vg(J,"key")||A&&f&&Vg(J,"vue:before-update"))&&(m=!0),y&&Vg(J,"ref")&&t.scopes.vFor>0&&u.push(mn(Ci("ref_for",!0),Ci("true"))),!J&&(y||A)){if(T=!0,K)if(y){if(I(),a0("COMPILER_V_BIND_OBJECT_ORDER",t)){c.unshift(K);continue}c.push(K)}else I({type:14,loc:Q,callee:t.helper(tj),arguments:r?[K]:[K,"true"]});else t.onError(Wr(y?34:35,Q));continue}const N=t.directiveTransforms[W];if(N){const{props:j,needRuntime:oe}=N(z,e,t);!s&&j.forEach($),A&&J&&!va(J)?I(su(j,a)):u.push(...j),oe&&(d.push(z),wm(oe)&&Hce.set(z,oe))}else EBe(W)||(d.push(z),f&&(m=!0))}}let L;if(c.length?(I(),c.length>1?L=Vn(t.helper(b5),c,a):L=c[0]):u.length&&(L=su(iJ(u),a)),T?g|=16:(b&&!r&&(g|=2),x&&!r&&(g|=4),M.length&&(g|=8),S&&(g|=32)),!m&&(g===0||g===32)&&(v||_||d.length>0)&&(g|=512),!t.inSSR&&L)switch(L.type){case 15:let B=-1,z=-1,W=!1;for(let Q=0;Q<L.properties.length;Q++){const y=L.properties[Q].key;va(y)?y.content==="class"?B=Q:y.content==="style"&&(z=Q):y.isHandlerKey||(W=!0)}const J=L.properties[B],K=L.properties[z];W?L=Vn(t.helper(FS),[L]):(J&&!va(J.value)&&(J.value=Vn(t.helper(X7),[J.value])),K&&(x||K.value.type===4&&K.value.content.trim()[0]==="["||K.value.type===17)&&(K.value=Vn(t.helper(ej),[K.value])));break;case 14:break;default:L=Vn(t.helper(FS),[Vn(t.helper(q3),[L])]);break}return{props:L,directives:d,patchFlag:g,dynamicPropNames:M,shouldUseBlock:m}}function iJ(e){const t=new Map,i=[];for(let r=0;r<e.length;r++){const n=e[r];if(n.key.type===8||!n.key.isStatic){i.push(n);continue}const s=n.key.content,o=t.get(s);o?(s==="style"||s==="class"||Q0(s))&&iHe(o,n):(t.set(s,n),i.push(n))}return i}function iHe(e,t){e.value.type===17?e.value.elements.push(t.value):e.value=H3([e.value,t.value],e.loc)}function rHe(e,t){const i=[],r=Hce.get(e);r?i.push(t.helperString(r)):(t.helper(Z7),t.directives.add(e.name),i.push(jS(e.name,"directive")));const{loc:n}=e;if(e.exp&&i.push(e.exp),e.arg&&(e.exp||i.push("void 0"),i.push(e.arg)),Object.keys(e.modifiers).length){e.arg||(e.exp||i.push("void 0"),i.push("void 0"));const s=Ci("true",!1,n);i.push(su(e.modifiers.map(o=>mn(o,s)),n))}return H3(i,e.loc)}function nHe(e){let t="[";for(let i=0,r=e.length;i<r;i++)t+=JSON.stringify(e[i]),i<r-1&&(t+=", ");return t+"]"}function aN(e){return e==="component"||e==="Component"}const sHe=(e,t)=>{if(E5(e)){const{children:i,loc:r}=e,{slotName:n,slotProps:s}=oHe(e,t),o=[t.prefixIdentifiers?"_ctx.$slots":"$slots",n,"{}","undefined","true"];let a=2;s&&(o[2]=s,a=3),i.length&&(o[3]=Jb([],i,!1,!1,r),a=4),t.scopeId&&!t.slotted&&(a=5),o.splice(a),e.codegenNode=Vn(t.helper(Tce),o,r)}};function oHe(e,t){let i='"default"',r;const n=[];for(let s=0;s<e.props.length;s++){const o=e.props[s];o.type===6?o.value&&(o.name==="name"?i=JSON.stringify(o.value.content):(o.name=Rn(o.name),n.push(o))):o.name==="bind"&&Vg(o.arg,"name")?o.exp&&(i=o.exp):(o.name==="bind"&&o.arg&&va(o.arg)&&(o.arg.content=Rn(o.arg.content)),n.push(o))}if(n.length>0){const{props:s,directives:o}=Wce(e,t,n,!1,!1);r=s,o.length&&t.onError(Wr(36,o[0].loc))}return{slotName:i,slotProps:r}}const aHe=/^\s*([\w$_]+|(async\s*)?\([^)]*?\))\s*(:[^=]+)?=>|^\s*(async\s+)?function(?:\s+[\w$]+)?\s*\(/,Jce=(e,t,i,r)=>{const{loc:n,modifiers:s,arg:o}=e;!e.exp&&!s.length&&i.onError(Wr(35,n));let a;if(o.type===4)if(o.isStatic){let d=o.content;d.startsWith("vue:")&&(d=`vnode-${d.slice(4)}`);const f=t.tagType!==0||d.startsWith("vnode")||!/[A-Z]/.test(d)?n0(Rn(d)):`on:${d}`;a=Ci(f,!0,o.loc)}else a=hc([`${i.helperString(iN)}(`,o,")"]);else a=o,a.children.unshift(`${i.helperString(iN)}(`),a.children.push(")");let l=e.exp;l&&!l.content.trim()&&(l=void 0);let u=i.cacheHandlers&&!l&&!i.inVOnce;if(l){const d=Oce(l.content),f=!(d||aHe.test(l.content)),m=l.content.includes(";");(f||u&&d)&&(l=hc([`${f?"$event":"(...args)"} => ${m?"{":"("}`,l,m?"}":")"]))}let c={props:[mn(a,l||Ci("() => {}",!1,n))]};return r&&(c=r(c)),u&&(c.props[0].value=i.cache(c.props[0].value)),c.props.forEach(d=>d.key.isHandlerKey=!0),c},lHe=(e,t,i)=>{const{exp:r,modifiers:n,loc:s}=e,o=e.arg;return o.type!==4?(o.children.unshift("("),o.children.push(') || ""')):o.isStatic||(o.content=`${o.content} || ""`),n.includes("camel")&&(o.type===4?o.isStatic?o.content=Rn(o.content):o.content=`${i.helperString(tN)}(${o.content})`:(o.children.unshift(`${i.helperString(tN)}(`),o.children.push(")"))),i.inSSR||(n.includes("prop")&&rJ(o,"."),n.includes("attr")&&rJ(o,"^")),!r||r.type===4&&!r.content.trim()?(i.onError(Wr(34,s)),{props:[mn(o,Ci("",!0,s))]}):{props:[mn(o,r)]}},rJ=(e,t)=>{e.type===4?e.isStatic?e.content=t+e.content:e.content=`\`${t}\${${e.content}}\``:(e.children.unshift(`'${t}' + (`),e.children.push(")"))},uHe=(e,t)=>{if(e.type===0||e.type===1||e.type===11||e.type===10)return()=>{const i=e.children;let r,n=!1;for(let s=0;s<i.length;s++){const o=i[s];if(pR(o)){n=!0;for(let a=s+1;a<i.length;a++){const l=i[a];if(pR(l))r||(r=i[s]=hc([o],o.loc)),r.children.push(" + ",l),i.splice(a,1),a--;else{r=void 0;break}}}}if(!(!n||i.length===1&&(e.type===0||e.type===1&&e.tagType===0&&!e.props.find(s=>s.type===7&&!t.directiveTransforms[s.name])&&e.tag!=="template")))for(let s=0;s<i.length;s++){const o=i[s];if(pR(o)||o.type===8){const a=[];(o.type!==2||o.content!==" ")&&a.push(o),!t.ssr&&ou(o,t)===0&&a.push("1"),i[s]={type:12,content:o,loc:o.loc,codegenNode:Vn(t.helper(W7),a)}}}}},nJ=new WeakSet,cHe=(e,t)=>{if(e.type===1&&eu(e,"once",!0))return nJ.has(e)||t.inVOnce||t.inSSR?void 0:(nJ.add(e),t.inVOnce=!0,t.helper(w5),()=>{t.inVOnce=!1;const i=t.currentNode;i.codegenNode&&(i.codegenNode=t.cache(i.codegenNode,!0))})},Zce=(e,t,i)=>{const{exp:r,arg:n}=e;if(!r)return i.onError(Wr(41,e.loc)),DM();const s=r.loc.source,o=r.type===4?r.content:s,a=i.bindingMetadata[s];if(a==="props"||a==="props-aliased")return i.onError(Wr(44,r.loc)),DM();const l=!1;if(!o.trim()||!Oce(o)&&!l)return i.onError(Wr(42,r.loc)),DM();const u=n||Ci("modelValue",!0),c=n?va(n)?`onUpdate:${Rn(n.content)}`:hc(['"onUpdate:" + ',n]):"onUpdate:modelValue";let d;const f=i.isTS?"($event: any)":"$event";d=hc([`${f} => ((`,r,") = $event)"]);const m=[mn(u,e.exp),mn(c,d)];if(e.modifiers.length&&t.tagType===1){const g=e.modifiers.map(b=>(sj(b)?b:JSON.stringify(b))+": true").join(", "),v=n?va(n)?`${n.content}Modifiers`:hc([n,' + "Modifiers"']):"modelModifiers";m.push(mn(v,Ci(`{ ${g} }`,!1,e.loc,2)))}return DM(m)};function DM(e=[]){return{props:e}}const hHe=/[\w).+\-_$\]]/,dHe=(e,t)=>{a0("COMPILER_FILTER",t)&&(e.type===5&&T5(e.content,t),e.type===1&&e.props.forEach(i=>{i.type===7&&i.name!=="for"&&i.exp&&T5(i.exp,t)}))};function T5(e,t){if(e.type===4)sJ(e,t);else for(let i=0;i<e.children.length;i++){const r=e.children[i];typeof r=="object"&&(r.type===4?sJ(r,t):r.type===8?T5(e,t):r.type===5&&T5(r.content,t))}}function sJ(e,t){const i=e.content;let r=!1,n=!1,s=!1,o=!1,a=0,l=0,u=0,c=0,d,f,m,g,v=[];for(m=0;m<i.length;m++)if(f=d,d=i.charCodeAt(m),r)d===39&&f!==92&&(r=!1);else if(n)d===34&&f!==92&&(n=!1);else if(s)d===96&&f!==92&&(s=!1);else if(o)d===47&&f!==92&&(o=!1);else if(d===124&&i.charCodeAt(m+1)!==124&&i.charCodeAt(m-1)!==124&&!a&&!l&&!u)g===void 0?(c=m+1,g=i.slice(0,m).trim()):b();else{switch(d){case 34:n=!0;break;case 39:r=!0;break;case 96:s=!0;break;case 40:u++;break;case 41:u--;break;case 91:l++;break;case 93:l--;break;case 123:a++;break;case 125:a--;break}if(d===47){let x=m-1,S;for(;x>=0&&(S=i.charAt(x),S===" ");x--);(!S||!hHe.test(S))&&(o=!0)}}g===void 0?g=i.slice(0,m).trim():c!==0&&b();function b(){v.push(i.slice(c,m).trim()),c=m+1}if(v.length){for(m=0;m<v.length;m++)g=pHe(g,v[m],t);e.content=g}}function pHe(e,t,i){i.helper(Y7);const r=t.indexOf("(");if(r<0)return i.filters.add(t),`${jS(t,"filter")}(${e})`;{const n=t.slice(0,r),s=t.slice(r+1);return i.filters.add(n),`${jS(n,"filter")}(${e}${s!==")"?","+s:s}`}}const oJ=new WeakSet,fHe=(e,t)=>{if(e.type===1){const i=eu(e,"memo");return!i||oJ.has(e)?void 0:(oJ.add(e),()=>{const r=e.codegenNode||t.currentNode.codegenNode;r&&r.type===13&&(e.tagType!==1&&nj(r,t),e.codegenNode=Vn(t.helper(rj),[i.exp,Jb(void 0,r),"_cache",String(t.cached++)]))})}};function mHe(e){return[[cHe,zqe,fHe,Hqe,dHe,sHe,eHe,Kqe,uHe],{on:Jce,bind:lHe,model:Zce}]}function yHe(e,t={}){const i=t.onError||z7,r=t.mode==="module";t.prefixIdentifiers===!0?i(Wr(47)):r&&i(Wr(48));const n=!1;t.cacheHandlers&&i(Wr(49)),t.scopeId&&!r&&i(Wr(50));const s=_i(e)?hqe(e,t):e,[o,a]=mHe();return Mqe(s,Ui({},t,{prefixIdentifiers:n,nodeTransforms:[...o,...t.nodeTransforms||[]],directiveTransforms:Ui({},a,t.directiveTransforms||{})})),Aqe(s,Ui({},t,{prefixIdentifiers:n}))}const gHe=()=>({props:[]}),Yce=Symbol(""),Kce=Symbol(""),Qce=Symbol(""),Xce=Symbol(""),lN=Symbol(""),ehe=Symbol(""),the=Symbol(""),ihe=Symbol(""),rhe=Symbol(""),nhe=Symbol("");YGe({[Yce]:"vModelRadio",[Kce]:"vModelCheckbox",[Qce]:"vModelText",[Xce]:"vModelSelect",[lN]:"vModelDynamic",[ehe]:"withModifiers",[the]:"withKeys",[ihe]:"vShow",[rhe]:"Transition",[nhe]:"TransitionGroup"});let k1;function vHe(e,t=!1){return k1||(k1=document.createElement("div")),t?(k1.innerHTML=`<div foo="${e.replace(/"/g,"&quot;")}">`,k1.children[0].getAttribute("foo")):(k1.innerHTML=e,k1.textContent)}const bHe=Pa("style,iframe,script,noscript",!0),wHe={isVoidTag:FBe,isNativeTag:e=>PBe(e)||NBe(e),isPreTag:e=>e==="pre",decodeEntities:vHe,isBuiltInComponent:e=>{if(Vv(e,"Transition"))return rhe;if(Vv(e,"TransitionGroup"))return nhe},getNamespace(e,t){let i=t?t.ns:0;if(t&&i===2)if(t.tag==="annotation-xml"){if(e==="svg")return 1;t.props.some(r=>r.type===6&&r.name==="encoding"&&r.value!=null&&(r.value.content==="text/html"||r.value.content==="application/xhtml+xml"))&&(i=0)}else/^m(?:[ions]|text)$/.test(t.tag)&&e!=="mglyph"&&e!=="malignmark"&&(i=0);else t&&i===1&&(t.tag==="foreignObject"||t.tag==="desc"||t.tag==="title")&&(i=0);if(i===0){if(e==="svg")return 1;if(e==="math")return 2}return i},getTextMode({tag:e,ns:t}){if(t===0){if(e==="textarea"||e==="title")return 1;if(bHe(e))return 2}return 0}},_He=e=>{e.type===1&&e.props.forEach((t,i)=>{t.type===6&&t.name==="style"&&t.value&&(e.props[i]={type:7,name:"bind",arg:Ci("style",!0,t.loc),exp:xHe(t.value.content,t.loc),modifiers:[],loc:t.loc})})},xHe=(e,t)=>{const i=Mle(e);return Ci(JSON.stringify(i),!1,t,3)};function am(e,t){return Wr(e,t)}const SHe=(e,t,i)=>{const{exp:r,loc:n}=e;return r||i.onError(am(53,n)),t.children.length&&(i.onError(am(54,n)),t.children.length=0),{props:[mn(Ci("innerHTML",!0,n),r||Ci("",!0))]}},EHe=(e,t,i)=>{const{exp:r,loc:n}=e;return r||i.onError(am(55,n)),t.children.length&&(i.onError(am(56,n)),t.children.length=0),{props:[mn(Ci("textContent",!0),r?ou(r,i)>0?r:Vn(i.helperString(xC),[r],n):Ci("",!0))]}},MHe=(e,t,i)=>{const r=Zce(e,t,i);if(!r.props.length||t.tagType===1)return r;e.arg&&i.onError(am(58,e.arg.loc));const{tag:n}=t,s=i.isCustomElement(n);if(n==="input"||n==="textarea"||n==="select"||s){let o=Qce,a=!1;if(n==="input"||s){const l=SC(t,"type");if(l){if(l.type===7)o=lN;else if(l.value)switch(l.value.content){case"radio":o=Yce;break;case"checkbox":o=Kce;break;case"file":a=!0,i.onError(am(59,e.loc));break}}else sqe(t)&&(o=lN)}else n==="select"&&(o=Xce);a||(r.needRuntime=i.helper(o))}else i.onError(am(57,e.loc));return r.props=r.props.filter(o=>!(o.key.type===4&&o.key.content==="modelValue")),r},IHe=Pa("passive,once,capture"),THe=Pa("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),AHe=Pa("left,right"),she=Pa("onkeyup,onkeydown,onkeypress",!0),CHe=(e,t,i,r)=>{const n=[],s=[],o=[];for(let a=0;a<t.length;a++){const l=t[a];l==="native"&&US("COMPILER_V_ON_NATIVE",i)||IHe(l)?o.push(l):AHe(l)?va(e)?she(e.content)?n.push(l):s.push(l):(n.push(l),s.push(l)):THe(l)?s.push(l):n.push(l)}return{keyModifiers:n,nonKeyModifiers:s,eventOptionModifiers:o}},aJ=(e,t)=>va(e)&&e.content.toLowerCase()==="onclick"?Ci(t,!0):e.type!==4?hc(["(",e,`) === "onClick" ? "${t}" : (`,e,")"]):e,$He=(e,t,i)=>Jce(e,t,i,r=>{const{modifiers:n}=e;if(!n.length)return r;let{key:s,value:o}=r.props[0];const{keyModifiers:a,nonKeyModifiers:l,eventOptionModifiers:u}=CHe(s,n,i,e.loc);if(l.includes("right")&&(s=aJ(s,"onContextmenu")),l.includes("middle")&&(s=aJ(s,"onMouseup")),l.length&&(o=Vn(i.helper(ehe),[o,JSON.stringify(l)])),a.length&&(!va(s)||she(s.content))&&(o=Vn(i.helper(the),[o,JSON.stringify(a)])),u.length){const c=u.map(Um).join("");s=va(s)?Ci(`${s.content}${c}`,!0):hc(["(",s,`) + "${c}"`])}return{props:[mn(s,o)]}}),OHe=(e,t,i)=>{const{exp:r,loc:n}=e;return r||i.onError(am(61,n)),{props:[],needRuntime:i.helper(ihe)}},RHe=(e,t)=>{e.type===1&&e.tagType===0&&(e.tag==="script"||e.tag==="style")&&t.removeNode()},kHe=[_He],LHe={cloak:gHe,html:SHe,text:EHe,model:MHe,on:$He,show:OHe};function PHe(e,t={}){return yHe(e,Ui({},wHe,t,{nodeTransforms:[RHe,...kHe,...t.nodeTransforms||[]],directiveTransforms:Ui({},LHe,t.directiveTransforms||{}),transformHoist:null}))}const lJ=Object.create(null);function ohe(e,t){if(!_i(e))if(e.nodeType)e=e.innerHTML;else return qo;const i=e,r=lJ[i];if(r)return r;if(e[0]==="#"){const a=document.querySelector(e);e=a?a.innerHTML:""}const n=Ui({hoistStatic:!0,onError:void 0,onWarn:qo},t);!n.isCustomElement&&typeof customElements<"u"&&(n.isCustomElement=a=>!!customElements.get(a));const{code:s}=PHe(e,n),o=new Function("Vue",s)(GGe);return o._rc=!0,lJ[i]=o}R7(ohe);const ydt=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:c7,BaseTransitionPropsValidators:dC,Comment:zs,EffectScope:K4,Fragment:Tr,KeepAlive:hue,ReactiveEffect:jw,Static:sm,Suspense:sue,Teleport:A7,Text:ap,Transition:B3,TransitionGroup:D7,VueElement:V3,assertNumber:Qle,callWithAsyncErrorHandling:_a,callWithErrorHandling:Mh,camelize:Rn,capitalize:Um,cloneVNode:gc,compatUtils:rce,compile:ohe,computed:$i,createApp:_C,createBlock:Ur,createCommentVNode:rn,createElementBlock:$t,createElementVNode:at,createHydrationRenderer:I7,createPropsRestProxy:$ue,createRenderer:M7,createSSRApp:bce,createSlots:fue,createStaticVNode:Hue,createTextVNode:Ih,createVNode:gi,customRef:Jle,defineAsyncComponent:h7,defineComponent:Vi,defineCustomElement:F7,defineEmits:vue,defineExpose:bue,defineModel:xue,defineOptions:wue,defineProps:gue,defineSSRCustomElement:nce,defineSlots:_ue,get devtools(){return Sg},effect:Rle,effectScope:F3,getCurrentInstance:Cs,getCurrentScope:Q4,getTransitionRawChildren:j3,guardReactiveProps:C7,h:Nh,handleError:Bm,hasInjectionContext:Lue,hydrate:B7,initCustomFormatter:Xue,initDirectivesForSSR:_ce,inject:hs,isMemoSame:P7,isProxy:nC,isReactive:uu,isReadonly:Sm,isRef:er,isRuntimeOnly:Yue,isShallow:Gb,isVNode:Ph,markRaw:wn,mergeDefaults:Aue,mergeModels:Cue,mergeProps:yC,nextTick:Bh,normalizeClass:bn,normalizeProps:Ile,normalizeStyle:Vm,onActivated:d7,onBeforeMount:fC,onBeforeUnmount:zh,onBeforeUpdate:f7,onDeactivated:p7,onErrorCaptured:v7,onMounted:Eo,onRenderTracked:g7,onRenderTriggered:y7,onScopeDispose:K9,onServerPrefetch:m7,onUnmounted:e1,onUpdated:Bw,openBlock:ht,popScopeId:Gm,provide:S7,proxyRefs:oC,pushScopeId:zm,queuePostFlushCb:lC,reactive:Hn,readonly:iC,ref:tt,registerRuntimeCompiler:R7,render:Wd,renderList:qm,renderSlot:ac,resolveComponent:Cn,resolveDirective:mr,resolveDynamicComponent:w7,resolveFilter:ice,resolveTransitionHooks:k0,setBlockTracking:m5,setDevtoolsHook:o7,setTransitionHooks:Em,shallowReactive:e7,shallowReadonly:Gle,shallowRef:r7,ssrContextKey:k7,ssrUtils:tce,stop:kle,toDisplayString:Hr,toHandlerKey:n0,toHandlers:yue,toRaw:oi,toRef:Zle,toRefs:n7,toValue:Wle,transformVNodeArgs:Gue,triggerRef:Hle,unref:si,useAttrs:Mue,useCssModule:sce,useCssVars:oce,useModel:Iue,useSSRContext:L7,useSlots:Eue,useTransitionState:hC,vModelCheckbox:vC,vModelDynamic:U7,vModelRadio:bC,vModelSelect:j7,vModelText:PS,vShow:wC,version:N7,warn:Kle,watch:Gn,watchEffect:aue,watchPostEffect:u7,watchSyncEffect:lue,withAsyncContext:Oue,withCtx:kn,withDefaults:Sue,withDirectives:sr,withKeys:V7,withMemo:ece,withModifiers:z3,withScopeId:rue},Symbol.toStringTag,{value:"Module"}));var NHe=!1;/*!
  * pinia v2.0.32
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */let ahe;const TC=e=>ahe=e,lhe=Symbol();function uN(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var kx;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(kx||(kx={}));function FHe(){const e=F3(!0),t=e.run(()=>tt({}));let i=[],r=[];const n=wn({install(s){TC(n),n._a=s,s.provide(lhe,n),s.config.globalProperties.$pinia=n,r.forEach(o=>i.push(o)),r=[]},use(s){return!this._a&&!NHe?r.push(s):i.push(s),this},_p:i,_a:null,_e:e,_s:new Map,state:t});return n}const uhe=()=>{};function uJ(e,t,i,r=uhe){e.push(t);const n=()=>{const s=e.indexOf(t);s>-1&&(e.splice(s,1),r())};return!i&&Q4()&&K9(n),n}function L1(e,...t){e.slice().forEach(i=>{i(...t)})}function cN(e,t){e instanceof Map&&t instanceof Map&&t.forEach((i,r)=>e.set(r,i)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const i in t){if(!t.hasOwnProperty(i))continue;const r=t[i],n=e[i];uN(n)&&uN(r)&&e.hasOwnProperty(i)&&!er(r)&&!uu(r)?e[i]=cN(n,r):e[i]=r}return e}const DHe=Symbol();function jHe(e){return!uN(e)||!e.hasOwnProperty(DHe)}const{assign:kf}=Object;function UHe(e){return!!(er(e)&&e.effect)}function VHe(e,t,i,r){const{state:n,actions:s,getters:o}=t,a=i.state.value[e];let l;function u(){a||(i.state.value[e]=n?n():{});const c=n7(i.state.value[e]);return kf(c,s,Object.keys(o||{}).reduce((d,f)=>(d[f]=wn($i(()=>{TC(i);const m=i._s.get(e);return o[f].call(m,m)})),d),{}))}return l=che(e,u,t,i,r,!0),l.$reset=function(){const d=n?n():{};this.$patch(f=>{kf(f,d)})},l}function che(e,t,i={},r,n,s){let o;const a=kf({actions:{}},i),l={deep:!0};let u,c,d=wn([]),f=wn([]),m;const g=r.state.value[e];!s&&!g&&(r.state.value[e]={}),tt({});let v;function b($){let L;u=c=!1,typeof $=="function"?($(r.state.value[e]),L={type:kx.patchFunction,storeId:e,events:m}):(cN(r.state.value[e],$),L={type:kx.patchObject,payload:$,storeId:e,events:m});const B=v=Symbol();Bh().then(()=>{v===B&&(u=!0)}),c=!0,L1(d,L,r.state.value[e])}const x=uhe;function S(){o.stop(),d=[],f=[],r._s.delete(e)}function T($,L){return function(){TC(r);const B=Array.from(arguments),z=[],W=[];function J(y){z.push(y)}function K(y){W.push(y)}L1(f,{args:B,name:$,store:M,after:J,onError:K});let Q;try{Q=L.apply(this&&this.$id===e?this:M,B)}catch(y){throw L1(W,y),y}return Q instanceof Promise?Q.then(y=>(L1(z,y),y)).catch(y=>(L1(W,y),Promise.reject(y))):(L1(z,Q),Q)}}const _={_p:r,$id:e,$onAction:uJ.bind(null,f),$patch:b,$reset:x,$subscribe($,L={}){const B=uJ(d,$,L.detached,()=>z()),z=o.run(()=>Gn(()=>r.state.value[e],W=>{(L.flush==="sync"?c:u)&&$({storeId:e,type:kx.direct,events:m},W)},kf({},l,L)));return B},$dispose:S},M=Hn(_);r._s.set(e,M);const I=r._e.run(()=>(o=F3(),o.run(()=>t())));for(const $ in I){const L=I[$];if(er(L)&&!UHe(L)||uu(L))s||(g&&jHe(L)&&(er(L)?L.value=g[$]:cN(L,g[$])),r.state.value[e][$]=L);else if(typeof L=="function"){const B=T($,L);I[$]=B,a.actions[$]=L}}return kf(M,I),kf(oi(M),I),Object.defineProperty(M,"$state",{get:()=>r.state.value[e],set:$=>{b(L=>{kf(L,$)})}}),r._p.forEach($=>{kf(M,o.run(()=>$({store:M,app:r._a,pinia:r,options:a})))}),g&&s&&i.hydrate&&i.hydrate(M.$state,g),u=!0,c=!0,M}function xn(e,t,i){let r,n;const s=typeof t=="function";typeof e=="string"?(r=e,n=s?i:t):(n=e,r=e.id);function o(a,l){const u=Cs();return a=a||u&&hs(lhe,null),a&&TC(a),a=ahe,a._s.has(r)||(s?che(r,t,n,a):VHe(r,n,a)),a._s.get(r)}return o.$id=r,o}const A5=xn("appbar",()=>{const e=tt({}),t=tt([]),i=tt([]),r=$i(()=>t.value.map(o=>o.map(a=>e.value[a]).filter(a=>{if(typeof a=="string"||a.componentId)return!0})).filter(o=>o.length>0));function n(o){i.value.includes(o)||i.value.push(o)}function s(o){const a=i.value.indexOf(o);a!==-1&&i.value.splice(a,1),o in e.value&&delete e.value[o],t.value.forEach(l=>{const u=l.indexOf(o);u!==-1&&l.splice(u,1)})}return{items:e,order:t,temporary:i,visible:r,addTempButton:n,removeButton:s}}),hhe=xn("grid",()=>{const e=tt({}),t=tt(),i=tt();function r(a){e.value={...e.value,[a.id]:a}}function n(a){e.value[a]!==void 0&&delete e.value[a]}function s(a){return Object.keys(e.value).find(l=>e.value[l].layerIds.includes(a))}function o(a,l){e.value[a].layerIds=e.value[a].layerIds.filter(u=>u!==l)}return{grids:e,panel:t,currentId:i,addGrid:r,removeGrid:n,getGridId:s,removeLayer:o}});function Bg(e,t,i,r){var n,s=!1,o=0;function a(){n&&clearTimeout(n)}function l(){a(),s=!0}typeof t!="boolean"&&(r=i,i=t,t=void 0);function u(){for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];var m=this,g=Date.now()-o;if(s)return;function v(){o=Date.now(),i.apply(m,d)}function b(){n=void 0}r&&!n&&v(),a(),r===void 0&&g>e?v():t!==!0&&(n=setTimeout(r?b:v,r===void 0?e-g:e))}return u.cancel=l,u}function C5(e,t,i){return i===void 0?Bg(e,t,!1):Bg(e,i,t!==!1)}const Hf=xn("map-caption",()=>{const e=tt({text:{},logo:{}}),t=tt({}),i=tt({});function r(n){n!==void 0?t.value.isImperialScale=n:t.value.isImperialScale=!t.value.isImperialScale}return{attribution:e,scale:t,coords:i,toggleScale:r}}),cJ=(e,t)=>{const i=[...e];for(;i.length>0;){const r=i.shift();if(t(r))return r;r&&i.push(...r.sublayers)}},iu=xn("layer",()=>{const e=tt([]),t=tt([]),i=tt([]),r=tt([]);function n(v){return cJ(e.value.concat(t.value).concat(i.value),b=>b?.uid===v)}function s(v){return cJ(e.value.concat(t.value).concat(i.value),b=>b?.id===v)}function o(v){r.value=[...r.value,v]}function a(v){e.value=[...e.value,v]}function l(v){t.value=[...t.value,v]}function u(v){i.value=[...i.value,v]}function c(v,b=e.value.length){const x=e.value.findIndex(S=>S.uid===v.uid);x!==-1&&x!==b&&(e.value.splice(x,1),e.value.splice(b,0,v),e.value=[...e.value])}function d(v){const b=e.value.filter(x=>x.id!==v.id||x.uid!==v.uid);e.value=b}function f(v){const b=v instanceof Gg?v.id:v,x=v instanceof Gg?v.uid:v,S=t.value.filter(T=>T.id!==b&&T.uid!==x);t.value=S}function m(v){const b=v instanceof Gg?v.id:v,x=v instanceof Gg?v.uid:v,S=i.value.filter(T=>T.id!==b&&T.uid!==x);i.value=S}function g(v){const b=r.value.filter(x=>x.id!==v);r.value=b}return{layers:e,penaltyBox:t,initiatingLayers:i,layerConfigs:r,getLayerByUid:n,getLayerById:s,addLayerConfig:o,addLayer:a,addErrorLayer:l,addInitiatingLayer:u,reorderLayer:c,removeLayer:d,removeErrorLayer:f,removeInitiatingLayer:m,removeLayerConfig:g}}),pl=xn("config",()=>{const e=tt({map:{lodSets:[],extentSets:[],tileSchemas:[],basemaps:[],initialBasemapId:""},fixtures:{},layers:[]}),t=tt([]),i=tt(),r=tt({}),n=tt({});function s(l){if(r.value[n.value[l]]===void 0)throw new Error("Unsupported language or no registered config exists for requested language");return r.value[n.value[l]]}function o(l){const u={...e.value,...l};if(e.value=u,Array.isArray(e.value.layers)){const c=iu();c.layerConfigs=[...c.layerConfigs,e.value.layers]}}function a(l){const u=l.configLangs,c=l.config,d=l.allLangs;u!==void 0&&u.length>0&&u.forEach(f=>{r.value[f]=c,n.value[f]=f}),d!==void 0&&d.length>0&&d.forEach(f=>{n.value[f]=Object.keys(r.value)[0]})}return{config:e,startingFixtures:t,activeBasemapConfig:i,registeredConfigs:r,registeredLangs:n,getActiveConfig:s,newConfig:o,registerConfig:a}}),dhe=xn("details",()=>{const e=tt([]),t=tt({}),i=tt({}),r=tt(),n=tt(!1),s=tt(0),o=tt(0),a=tt(!0);function l(u){const c=e.value.findIndex(d=>d.uid===u.uid);c!==-1&&e.value.splice(c,1)}return{payload:e,properties:t,defaultTemplates:i,currentFeatureId:r,slowLoadingFlag:n,activeGreedy:s,lastHilight:o,hilightToggle:a,removeLayer:l}});var Zt=(e=>(e.APPBAR_BUTTON_CLICK="appbar/click",e.COMPONENT="ramp/component",e.CONFIG_CHANGE="config/configchanged",e.DETAILS_TOGGLE="details/toggle",e.FILTER_CHANGE="filter/change",e.FIXTURE_ADDED="fixture/added",e.FIXTURE_REMOVED="fixture/removed",e.GRID_TOGGLE="grid/toggle",e.HELP_TOGGLE="help/toggle",e.LAYER_DRAWSTATECHANGE="layer/drawstatechange",e.LAYER_INITIATIONSTATECHANGE="layer/initiationStatechange",e.LAYER_LAYERSTATECHANGE="layer/layerstatechange",e.LAYER_OPACITYCHANGE="layer/opacitychange",e.LAYER_REGISTERED="layer/registered",e.LAYER_RELOAD_END="layer/reloadend",e.LAYER_RELOAD_START="layer/reloadstart",e.LAYER_REMOVE="layer/remove",e.LAYER_VISIBILITYCHANGE="layer/visibilitychange",e.MAP_BASEMAPCHANGE="map/basemapchanged",e.MAP_BLUR="map/blur",e.MAP_CLICK="map/click",e.MAP_CREATED="map/created",e.MAP_DESTROYED="map/destroyed",e.MAP_DOUBLECLICK="map/doubleclick",e.MAP_EXTENTCHANGE="map/extentchanged",e.MAP_FOCUS="map/focus",e.MAP_GRAPHICHIT="map/graphichit",e.MAP_IDENTIFY="map/identify",e.MAP_KEYDOWN="map/keydown",e.MAP_KEYUP="map/keyup",e.MAP_MOUSEDOWN="map/mousedown",e.MAP_MOUSELEAVE="map/mouseleave",e.MAP_MOUSEMOVE="map/mousemove",e.MAP_MOUSEMOVE_END="map/mousemoveend",e.MAP_MOUSEMOVE_START="map/mousemovestart",e.MAP_REFRESH_END="map/refreshend",e.MAP_REFRESH_START="map/refreshstart",e.MAP_REORDER="map/reorder",e.MAP_RESIZED="map/resized",e.MAP_SCALECHANGE="map/scalechanged",e.MAP_START="map/start",e.METADATA_TOGGLE="metadata/toggle",e.PANEL_CLOSED="panel/closed",e.PANEL_MINIMIZED="panel/minimized",e.PANEL_OPENED="panel/opened",e.RAMP_MOBILEVIEW_CHANGE="ramp/mobileviewchange",e.REORDER_TOGGLE="reorder/toggle",e.SETTINGS_TOGGLE="settings/toggle",e.USER_LAYER_ADDED="user/layeradded",e.WIZARD_TOGGLE="wizard/toggle",e))(Zt||{});class BHe{eventName;handlerName;handlerFunc;constructor(t,i,r){this.eventName=t,this.handlerName=i,this.handlerFunc=r}}class zHe extends Wn{_eventBus;_eventRegister;_nameRegister;_funCounter;constructor(t){super(t),this._eventBus=new bBe,this._eventRegister=[],this._funCounter=1,this._nameRegister=Object.values(Zt).filter(i=>typeof i=="string"&&i.indexOf("/")>-1)}findHandler(t){return this._eventRegister.find(i=>i.handlerName===t)}handlerNamer(t){return this._funCounter++,t.replace(/\//g,"_")+this._funCounter.toString()}registerEventName(t){(Array.isArray(t)?t:[t]).forEach(r=>{this._nameRegister.indexOf(r)===-1&&this._nameRegister.push(r)})}eventNames(){return this._nameRegister.slice()}on(t,i,r=""){if(this.findHandler(r))throw new Error("Duplicate handler name registration: "+r);r||(r=this.handlerNamer(t));const n=new BHe(t,r,i);return this._eventRegister.push(n),this._eventBus.on(t,i),r}off(t){const i=this.findHandler(t);i&&(this._eventRegister.splice(this._eventRegister.indexOf(i),1),this._eventBus.off(i.eventName,i.handlerFunc))}offAll(t=""){this.activeHandlers(t).forEach(r=>this.off(r))}emit(t,...i){this._eventBus.emit(t,...i)}once(t,i,r=""){r||(r=this.handlerNamer(t));const n=(...s)=>{i(...s),this.off(r)};return this.on(t,n,r)}activeHandlers(t=""){return t===""?this._eventRegister.map(i=>i.handlerName):this._eventRegister.filter(i=>i.eventName===t).map(i=>i.handlerName)}addDefaultEvents(t){return(!Array.isArray(t)||t.length===0)&&(t=["ramp_config_change_updates_map_attribs","ramp_layer_error_updates_legend","ramp_layer_register_binds_legend","ramp_layer_reload_end_binds_legend","ramp_layer_reload_start_updates_legend","ramp_layer_remove_updates_details","ramp_layer_remove_checks_grid","ramp_layer_remove_updates_legend","ramp_layer_useradd_updates_legend","ramp_map_basemap_checks_tile_proj","ramp_map_basemap_updates_map_attribs","ramp_map_blur_updates_key_handler","ramp_map_click_runs_identify","ramp_map_created_updates_map_attribs","ramp_map_extent_updates_maptip","ramp_map_graphichit_creates_maptip","ramp_map_identify_opens_identify_results","ramp_map_keydown_updates_coords","ramp_map_keydown_updates_key_handler","ramp_map_keyup_updates_key_handler","ramp_map_mouse_updates_coords","ramp_map_mouse_updates_maptip","ramp_map_mouseleave_removes_maptip","ramp_map_resize_updates_scalebar","ramp_map_scale_updates_scalebar","ramp_panel_close_updates_appbar","ramp_panel_open_updates_appbar","ramp_toggle_details","ramp_toggle_grid","ramp_toggle_help","ramp_toggle_metadata","ramp_toggle_reorder","ramp_toggle_settings","ramp_toggle_wizard"]),t.map(i=>this.defaultHandlerFactory(i))}defaultHandlerFactory(t){let i;switch(t){case"ramp_config_change_updates_map_attribs":i=r=>{const n=r.map.basemaps.find(s=>s.id===this.$iApi.geo.map.getCurrentBasemapId());this.$iApi.geo.map.caption.updateAttribution(n?.attribution)},this.$iApi.event.on("config/configchanged",i,t);break;case"ramp_layer_error_updates_legend":i=r=>{if(r.layer.layerState===co.ERROR){const n=this.$iApi.fixture.get("legend");n&&n.updateLegend(r.layer)}},this.$iApi.event.on("layer/layerstatechange",i,t);break;case"ramp_layer_register_binds_legend":i=r=>{const n=this.$iApi.fixture.get("legend");n&&n.updateLegend(r)},this.$iApi.event.on("layer/registered",i,t);break;case"ramp_layer_reload_end_binds_legend":i=r=>{const n=this.$iApi.fixture.get("legend");n&&n.updateLegend(r)},this.$iApi.event.on("layer/reloadend",i,t);break;case"ramp_layer_reload_start_updates_legend":i=r=>{const n=this.$iApi.fixture.get("legend");n&&n.reloadLayerItem(r.uid)},this.$iApi.event.on("layer/reloadstart",i,t);break;case"ramp_layer_remove_checks_grid":i=r=>{if(this.$iApi.fixture.get("grid")){const n=hhe(this.$vApp.$pinia),s=n.getGridId(r.id);if(s===void 0)return;if(n.removeLayer(s,r.id),n.grids[s].layerIds.length===0){n.removeGrid(s);const o=n.currentId;if(s===o){const a=this.$iApi.panel.get("grid");this.$iApi.panel.close(a),n.currentId=void 0}}}},this.$iApi.event.on("layer/remove",i,t);break;case"ramp_layer_remove_updates_details":i=r=>{const n=dhe(this.$vApp.$pinia);this.$iApi.fixture.get("details")&&n.removeLayer(r)},this.$iApi.event.on("layer/remove",i,t);break;case"ramp_layer_remove_updates_legend":i=r=>{const n=this.$iApi.fixture.get("legend");n&&(n.removeLayerItem(r),this.$iApi.updateAlert(this.$iApi.$i18n.t("legend.alert.layerRemoved",{name:r.name})))},this.$iApi.event.on("layer/remove",i,t);break;case"ramp_layer_useradd_updates_legend":i=r=>{const n=this.$iApi.fixture.get("legend");n&&n.addLayerItem(r)},this.$iApi.event.on("user/layeradded",i,t);break;case"ramp_map_basemap_checks_tile_proj":i=()=>{this.$iApi.geo.layer.allLayers().filter(r=>r.layerType===Ai.TILE).forEach(r=>{r.checkProj()})},this.$iApi.event.on("map/basemapchanged",i,t);break;case"ramp_map_basemap_updates_map_attribs":i=()=>{this.$iApi.geo.map.caption.updateAttribution(pl(this.$vApp.$pinia).activeBasemapConfig?.attribution)},this.$iApi.event.on("map/basemapchanged",i,t);break;case"ramp_map_blur_updates_key_handler":i=()=>{this.$iApi.geo.map.stopKeyPan()},this.$iApi.event.on("map/blur",i,t);break;case"ramp_map_click_runs_identify":i=r=>{r.button===0&&this.$iApi.geo.map.runIdentify(r)},this.on("map/click",i,t);break;case"ramp_map_created_updates_map_attribs":i=()=>{this.$iApi.geo.map.caption.updateAttribution(pl(this.$vApp.$pinia).activeBasemapConfig?.attribution)},this.$iApi.geo.map.created&&i(),this.$iApi.event.on("map/created",i,t);break;case"ramp_map_extent_updates_maptip":i=()=>{if(this.$iApi.geo.map.keysActive){const r=this.$iApi.geo.map.mapPointToScreenPoint(this.$iApi.geo.map.getExtent().center());this.$iApi.geo.map.maptip.checkAtCoord(r)}else this.$iApi.geo.map.maptip.clear()},this.$iApi.event.on("map/extentchanged",Bg(50,!0,()=>i()),t);break;case"ramp_map_graphichit_creates_maptip":i=r=>{this.$iApi.geo.map.maptip.generateDefaultMaptip(r)},this.$iApi.event.on("map/graphichit",i,t);break;case"ramp_map_identify_opens_identify_results":i=r=>{const n=this.$iApi.fixture.get("details");n&&n.openDetails(r.results)},this.on("map/identify",i,t);break;case"ramp_map_keydown_updates_coords":this.$iApi.event.on("map/keydown",Bg(200,()=>{const r=Hf(this.$vApp.$pinia);r.coords?.disabled||!this.$iApi.geo.map.keysActive||this.$iApi.geo.map.caption.formatPoint(this.$iApi.geo.map.getExtent().center()).then(s=>{r.coords={formattedString:s}})}),t);break;case"ramp_map_keydown_updates_key_handler":i=r=>{this.$iApi.geo.map.mapKeyDown(r)},this.$iApi.event.on("map/keydown",i,t);break;case"ramp_map_keyup_updates_key_handler":i=r=>{this.$iApi.geo.map.mapKeyUp(r)},this.$iApi.event.on("map/keyup",i,t);break;case"ramp_map_mouse_updates_coords":this.$iApi.event.on("map/mousemove",Bg(200,r=>{const n=Hf(this.$vApp.$pinia);n.coords?.disabled||this.$iApi.geo.map.caption.formatPoint(this.$iApi.geo.map.screenPointToMapPoint(r)).then(o=>{n.coords={formattedString:o}})}),t);break;case"ramp_map_mouse_updates_maptip":i=r=>{this.$iApi.geo.map.maptip.checkAtCoord({screenX:r.screenX,screenY:r.screenY})},this.$iApi.event.on("map/mousemove",Bg(200,r=>i(r)),t);break;case"ramp_map_mouseleave_removes_maptip":i=()=>{this.$iApi.geo.map.maptip.clear()},this.$iApi.event.on("map/mouseleave",i);break;case"ramp_map_resize_updates_scalebar":this.$iApi.event.on("map/resized",C5(100,()=>this.$iApi.geo.map.caption.updateScale()),t);break;case"ramp_map_scale_updates_scalebar":this.$iApi.event.on("map/scalechanged",C5(300,()=>this.$iApi.geo.map.caption.updateScale()),t);break;case"ramp_panel_close_updates_appbar":i=r=>{const n=A5(this.$vApp.$pinia);this.$iApi.fixture.get("appbar")&&!n.order.flat().find(s=>s===r.id)&&n.removeButton(r.id)},this.on("panel/closed",i,t);break;case"ramp_panel_open_updates_appbar":i=r=>{const n=A5(this.$vApp.$pinia);this.$iApi.fixture.get("appbar")&&(!r.teleport||r.teleport?.showAppbarButton)&&!n.order.flat().find(s=>s===r.id)&&n.addTempButton(r.id)},this.on("panel/opened",i,t);break;case"ramp_toggle_details":i=(r,n)=>{const s=this.$iApi.fixture.get("details");s&&s.toggleFeature(r,n)},this.$iApi.event.on("details/toggle",i,t);break;case"ramp_toggle_grid":i=(r,n)=>{const s=this.$iApi.fixture.get("grid");s&&s.toggleGrid(r.id,n)},this.$iApi.event.on("grid/toggle",i,t);break;case"ramp_toggle_help":i=r=>{const n=this.$iApi.fixture.get("help");n&&n.toggleHelp(r)},this.$iApi.event.on("help/toggle",i,t);break;case"ramp_toggle_metadata":i=(r,n)=>{const s=this.$iApi.fixture.get("metadata");s&&s.toggleMetadata(r,n)},this.$iApi.event.on("metadata/toggle",i,t);break;case"ramp_toggle_reorder":i=r=>{const n=this.$iApi.fixture.get("layer-reorder");n&&n.toggleLayerReorder(r)},this.$iApi.event.on("reorder/toggle",i,t);break;case"ramp_toggle_settings":i=(r,n)=>{const s=this.$iApi.fixture.get("settings");s&&s.toggleSettings(r,n)},this.$iApi.event.on("settings/toggle",i,t);break;case"ramp_toggle_wizard":i=r=>{const n=this.$iApi.fixture.get("wizard");n&&n.toggleWizard(r)},this.$iApi.event.on("wizard/toggle",i,t);break;default:return console.error(`Unrecognized default event handler name encountered: ${t}`),`ERROR_NOT_REGISTERED__${t}`}return t}}/*!
  * shared v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const hN=typeof window<"u",GHe=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",Hm=e=>GHe?Symbol(e):e,qHe=(e,t,i)=>HHe({l:e,k:t,s:i}),HHe=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),us=e=>typeof e=="number"&&isFinite(e),WHe=e=>uj(e)==="[object Date]",Tm=e=>uj(e)==="[object RegExp]",AC=e=>fi(e)&&Object.keys(e).length===0;function JHe(e,t){typeof console<"u"&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}const Ts=Object.assign;let hJ;const Lx=()=>hJ||(hJ=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function dJ(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const ZHe=Object.prototype.hasOwnProperty;function lj(e,t){return ZHe.call(e,t)}const Ar=Array.isArray,$n=e=>typeof e=="function",Ct=e=>typeof e=="string",ji=e=>typeof e=="boolean",Cr=e=>e!==null&&typeof e=="object",phe=Object.prototype.toString,uj=e=>phe.call(e),fi=e=>uj(e)==="[object Object]",YHe=e=>e==null?"":Ar(e)||fi(e)&&e.toString===phe?JSON.stringify(e,null,2):String(e);/*!
  * message-compiler v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const Yi={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,__EXTEND_POINT__:15};function CC(e,t,i={}){const{domain:r,messages:n,args:s}=i,o=e,a=new SyntaxError(String(o));return a.code=e,t&&(a.location=t),a.domain=r,a}function KHe(e){throw e}function QHe(e,t,i){return{line:e,column:t,offset:i}}function dN(e,t,i){const r={start:e,end:t};return i!=null&&(r.source=i),r}const id=" ",XHe="\r",Do=`
`,eWe=String.fromCharCode(8232),tWe=String.fromCharCode(8233);function iWe(e){const t=e;let i=0,r=1,n=1,s=0;const o=$=>t[$]===XHe&&t[$+1]===Do,a=$=>t[$]===Do,l=$=>t[$]===tWe,u=$=>t[$]===eWe,c=$=>o($)||a($)||l($)||u($),d=()=>i,f=()=>r,m=()=>n,g=()=>s,v=$=>o($)||l($)||u($)?Do:t[$],b=()=>v(i),x=()=>v(i+s);function S(){return s=0,c(i)&&(r++,n=0),o(i)&&i++,i++,n++,t[i]}function T(){return o(i+s)&&s++,s++,t[i+s]}function _(){i=0,r=1,n=1,s=0}function M($=0){s=$}function I(){const $=i+s;for(;$!==i;)S();s=0}return{index:d,line:f,column:m,peekOffset:g,charAt:v,currentChar:b,currentPeek:x,next:S,peek:T,reset:_,resetPeek:M,skipToPeek:I}}const Wp=void 0,pJ="'",rWe="tokenizer";function nWe(e,t={}){const i=t.location!==!1,r=iWe(e),n=()=>r.index(),s=()=>QHe(r.line(),r.column(),r.index()),o=s(),a=n(),l={currentType:14,offset:a,startLoc:o,endLoc:o,lastType:14,lastOffset:a,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},u=()=>l,{onError:c}=t;function d(V,D,ne,...ye){const ae=u();if(D.column+=ne,D.offset+=ne,c){const U=dN(ae.startLoc,D),le=CC(V,U,{domain:rWe,args:ye});c(le)}}function f(V,D,ne){V.endLoc=s(),V.currentType=D;const ye={type:D};return i&&(ye.loc=dN(V.startLoc,V.endLoc)),ne!=null&&(ye.value=ne),ye}const m=V=>f(V,14);function g(V,D){return V.currentChar()===D?(V.next(),D):(d(Yi.EXPECTED_TOKEN,s(),0,D),"")}function v(V){let D="";for(;V.currentPeek()===id||V.currentPeek()===Do;)D+=V.currentPeek(),V.peek();return D}function b(V){const D=v(V);return V.skipToPeek(),D}function x(V){if(V===Wp)return!1;const D=V.charCodeAt(0);return D>=97&&D<=122||D>=65&&D<=90||D===95}function S(V){if(V===Wp)return!1;const D=V.charCodeAt(0);return D>=48&&D<=57}function T(V,D){const{currentType:ne}=D;if(ne!==2)return!1;v(V);const ye=x(V.currentPeek());return V.resetPeek(),ye}function _(V,D){const{currentType:ne}=D;if(ne!==2)return!1;v(V);const ye=V.currentPeek()==="-"?V.peek():V.currentPeek(),ae=S(ye);return V.resetPeek(),ae}function M(V,D){const{currentType:ne}=D;if(ne!==2)return!1;v(V);const ye=V.currentPeek()===pJ;return V.resetPeek(),ye}function I(V,D){const{currentType:ne}=D;if(ne!==8)return!1;v(V);const ye=V.currentPeek()===".";return V.resetPeek(),ye}function $(V,D){const{currentType:ne}=D;if(ne!==9)return!1;v(V);const ye=x(V.currentPeek());return V.resetPeek(),ye}function L(V,D){const{currentType:ne}=D;if(!(ne===8||ne===12))return!1;v(V);const ye=V.currentPeek()===":";return V.resetPeek(),ye}function B(V,D){const{currentType:ne}=D;if(ne!==10)return!1;const ye=()=>{const U=V.currentPeek();return U==="{"?x(V.peek()):U==="@"||U==="%"||U==="|"||U===":"||U==="."||U===id||!U?!1:U===Do?(V.peek(),ye()):x(U)},ae=ye();return V.resetPeek(),ae}function z(V){v(V);const D=V.currentPeek()==="|";return V.resetPeek(),D}function W(V){const D=v(V),ne=V.currentPeek()==="%"&&V.peek()==="{";return V.resetPeek(),{isModulo:ne,hasSpace:D.length>0}}function J(V,D=!0){const ne=(ae=!1,U="",le=!1)=>{const ie=V.currentPeek();return ie==="{"?U==="%"?!1:ae:ie==="@"||!ie?U==="%"?!0:ae:ie==="%"?(V.peek(),ne(ae,"%",!0)):ie==="|"?U==="%"||le?!0:!(U===id||U===Do):ie===id?(V.peek(),ne(!0,id,le)):ie===Do?(V.peek(),ne(!0,Do,le)):!0},ye=ne();return D&&V.resetPeek(),ye}function K(V,D){const ne=V.currentChar();return ne===Wp?Wp:D(ne)?(V.next(),ne):null}function Q(V){return K(V,ne=>{const ye=ne.charCodeAt(0);return ye>=97&&ye<=122||ye>=65&&ye<=90||ye>=48&&ye<=57||ye===95||ye===36})}function y(V){return K(V,ne=>{const ye=ne.charCodeAt(0);return ye>=48&&ye<=57})}function A(V){return K(V,ne=>{const ye=ne.charCodeAt(0);return ye>=48&&ye<=57||ye>=65&&ye<=70||ye>=97&&ye<=102})}function N(V){let D="",ne="";for(;D=y(V);)ne+=D;return ne}function j(V){b(V);const D=V.currentChar();return D!=="%"&&d(Yi.EXPECTED_TOKEN,s(),0,D),V.next(),"%"}function oe(V){let D="";for(;;){const ne=V.currentChar();if(ne==="{"||ne==="}"||ne==="@"||ne==="|"||!ne)break;if(ne==="%")if(J(V))D+=ne,V.next();else break;else if(ne===id||ne===Do)if(J(V))D+=ne,V.next();else{if(z(V))break;D+=ne,V.next()}else D+=ne,V.next()}return D}function q(V){b(V);let D="",ne="";for(;D=Q(V);)ne+=D;return V.currentChar()===Wp&&d(Yi.UNTERMINATED_CLOSING_BRACE,s(),0),ne}function de(V){b(V);let D="";return V.currentChar()==="-"?(V.next(),D+=`-${N(V)}`):D+=N(V),V.currentChar()===Wp&&d(Yi.UNTERMINATED_CLOSING_BRACE,s(),0),D}function re(V){b(V),g(V,"'");let D="",ne="";const ye=U=>U!==pJ&&U!==Do;for(;D=K(V,ye);)D==="\\"?ne+=me(V):ne+=D;const ae=V.currentChar();return ae===Do||ae===Wp?(d(Yi.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,s(),0),ae===Do&&(V.next(),g(V,"'")),ne):(g(V,"'"),ne)}function me(V){const D=V.currentChar();switch(D){case"\\":case"'":return V.next(),`\\${D}`;case"u":return ve(V,D,4);case"U":return ve(V,D,6);default:return d(Yi.UNKNOWN_ESCAPE_SEQUENCE,s(),0,D),""}}function ve(V,D,ne){g(V,D);let ye="";for(let ae=0;ae<ne;ae++){const U=A(V);if(!U){d(Yi.INVALID_UNICODE_ESCAPE_SEQUENCE,s(),0,`\\${D}${ye}${V.currentChar()}`);break}ye+=U}return`\\${D}${ye}`}function _e(V){b(V);let D="",ne="";const ye=ae=>ae!=="{"&&ae!=="}"&&ae!==id&&ae!==Do;for(;D=K(V,ye);)ne+=D;return ne}function Se(V){let D="",ne="";for(;D=Q(V);)ne+=D;return ne}function Oe(V){const D=(ne=!1,ye)=>{const ae=V.currentChar();return ae==="{"||ae==="%"||ae==="@"||ae==="|"||!ae||ae===id?ye:ae===Do?(ye+=ae,V.next(),D(ne,ye)):(ye+=ae,V.next(),D(!0,ye))};return D(!1,"")}function Me(V){b(V);const D=g(V,"|");return b(V),D}function we(V,D){let ne=null;switch(V.currentChar()){case"{":return D.braceNest>=1&&d(Yi.NOT_ALLOW_NEST_PLACEHOLDER,s(),0),V.next(),ne=f(D,2,"{"),b(V),D.braceNest++,ne;case"}":return D.braceNest>0&&D.currentType===2&&d(Yi.EMPTY_PLACEHOLDER,s(),0),V.next(),ne=f(D,3,"}"),D.braceNest--,D.braceNest>0&&b(V),D.inLinked&&D.braceNest===0&&(D.inLinked=!1),ne;case"@":return D.braceNest>0&&d(Yi.UNTERMINATED_CLOSING_BRACE,s(),0),ne=Ie(V,D)||m(D),D.braceNest=0,ne;default:let ae=!0,U=!0,le=!0;if(z(V))return D.braceNest>0&&d(Yi.UNTERMINATED_CLOSING_BRACE,s(),0),ne=f(D,1,Me(V)),D.braceNest=0,D.inLinked=!1,ne;if(D.braceNest>0&&(D.currentType===5||D.currentType===6||D.currentType===7))return d(Yi.UNTERMINATED_CLOSING_BRACE,s(),0),D.braceNest=0,Ae(V,D);if(ae=T(V,D))return ne=f(D,5,q(V)),b(V),ne;if(U=_(V,D))return ne=f(D,6,de(V)),b(V),ne;if(le=M(V,D))return ne=f(D,7,re(V)),b(V),ne;if(!ae&&!U&&!le)return ne=f(D,13,_e(V)),d(Yi.INVALID_TOKEN_IN_PLACEHOLDER,s(),0,ne.value),b(V),ne;break}return ne}function Ie(V,D){const{currentType:ne}=D;let ye=null;const ae=V.currentChar();switch((ne===8||ne===9||ne===12||ne===10)&&(ae===Do||ae===id)&&d(Yi.INVALID_LINKED_FORMAT,s(),0),ae){case"@":return V.next(),ye=f(D,8,"@"),D.inLinked=!0,ye;case".":return b(V),V.next(),f(D,9,".");case":":return b(V),V.next(),f(D,10,":");default:return z(V)?(ye=f(D,1,Me(V)),D.braceNest=0,D.inLinked=!1,ye):I(V,D)||L(V,D)?(b(V),Ie(V,D)):$(V,D)?(b(V),f(D,12,Se(V))):B(V,D)?(b(V),ae==="{"?we(V,D)||ye:f(D,11,Oe(V))):(ne===8&&d(Yi.INVALID_LINKED_FORMAT,s(),0),D.braceNest=0,D.inLinked=!1,Ae(V,D))}}function Ae(V,D){let ne={type:14};if(D.braceNest>0)return we(V,D)||m(D);if(D.inLinked)return Ie(V,D)||m(D);switch(V.currentChar()){case"{":return we(V,D)||m(D);case"}":return d(Yi.UNBALANCED_CLOSING_BRACE,s(),0),V.next(),f(D,3,"}");case"@":return Ie(V,D)||m(D);default:if(z(V))return ne=f(D,1,Me(V)),D.braceNest=0,D.inLinked=!1,ne;const{isModulo:ae,hasSpace:U}=W(V);if(ae)return U?f(D,0,oe(V)):f(D,4,j(V));if(J(V))return f(D,0,oe(V));break}return ne}function H(){const{currentType:V,offset:D,startLoc:ne,endLoc:ye}=l;return l.lastType=V,l.lastOffset=D,l.lastStartLoc=ne,l.lastEndLoc=ye,l.offset=n(),l.startLoc=s(),r.currentChar()===Wp?f(l,14):Ae(r,l)}return{nextToken:H,currentOffset:n,currentPosition:s,context:u}}const sWe="parser",oWe=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function aWe(e,t,i){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const r=parseInt(t||i,16);return r<=55295||r>=57344?String.fromCodePoint(r):"�"}}}function lWe(e={}){const t=e.location!==!1,{onError:i}=e;function r(x,S,T,_,...M){const I=x.currentPosition();if(I.offset+=_,I.column+=_,i){const $=dN(T,I),L=CC(S,$,{domain:sWe,args:M});i(L)}}function n(x,S,T){const _={type:x,start:S,end:S};return t&&(_.loc={start:T,end:T}),_}function s(x,S,T,_){x.end=S,_&&(x.type=_),t&&x.loc&&(x.loc.end=T)}function o(x,S){const T=x.context(),_=n(3,T.offset,T.startLoc);return _.value=S,s(_,x.currentOffset(),x.currentPosition()),_}function a(x,S){const T=x.context(),{lastOffset:_,lastStartLoc:M}=T,I=n(5,_,M);return I.index=parseInt(S,10),x.nextToken(),s(I,x.currentOffset(),x.currentPosition()),I}function l(x,S){const T=x.context(),{lastOffset:_,lastStartLoc:M}=T,I=n(4,_,M);return I.key=S,x.nextToken(),s(I,x.currentOffset(),x.currentPosition()),I}function u(x,S){const T=x.context(),{lastOffset:_,lastStartLoc:M}=T,I=n(9,_,M);return I.value=S.replace(oWe,aWe),x.nextToken(),s(I,x.currentOffset(),x.currentPosition()),I}function c(x){const S=x.nextToken(),T=x.context(),{lastOffset:_,lastStartLoc:M}=T,I=n(8,_,M);return S.type!==12?(r(x,Yi.UNEXPECTED_EMPTY_LINKED_MODIFIER,T.lastStartLoc,0),I.value="",s(I,_,M),{nextConsumeToken:S,node:I}):(S.value==null&&r(x,Yi.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,Rc(S)),I.value=S.value||"",s(I,x.currentOffset(),x.currentPosition()),{node:I})}function d(x,S){const T=x.context(),_=n(7,T.offset,T.startLoc);return _.value=S,s(_,x.currentOffset(),x.currentPosition()),_}function f(x){const S=x.context(),T=n(6,S.offset,S.startLoc);let _=x.nextToken();if(_.type===9){const M=c(x);T.modifier=M.node,_=M.nextConsumeToken||x.nextToken()}switch(_.type!==10&&r(x,Yi.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Rc(_)),_=x.nextToken(),_.type===2&&(_=x.nextToken()),_.type){case 11:_.value==null&&r(x,Yi.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Rc(_)),T.key=d(x,_.value||"");break;case 5:_.value==null&&r(x,Yi.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Rc(_)),T.key=l(x,_.value||"");break;case 6:_.value==null&&r(x,Yi.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Rc(_)),T.key=a(x,_.value||"");break;case 7:_.value==null&&r(x,Yi.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Rc(_)),T.key=u(x,_.value||"");break;default:r(x,Yi.UNEXPECTED_EMPTY_LINKED_KEY,S.lastStartLoc,0);const M=x.context(),I=n(7,M.offset,M.startLoc);return I.value="",s(I,M.offset,M.startLoc),T.key=I,s(T,M.offset,M.startLoc),{nextConsumeToken:_,node:T}}return s(T,x.currentOffset(),x.currentPosition()),{node:T}}function m(x){const S=x.context(),T=S.currentType===1?x.currentOffset():S.offset,_=S.currentType===1?S.endLoc:S.startLoc,M=n(2,T,_);M.items=[];let I=null;do{const B=I||x.nextToken();switch(I=null,B.type){case 0:B.value==null&&r(x,Yi.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Rc(B)),M.items.push(o(x,B.value||""));break;case 6:B.value==null&&r(x,Yi.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Rc(B)),M.items.push(a(x,B.value||""));break;case 5:B.value==null&&r(x,Yi.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Rc(B)),M.items.push(l(x,B.value||""));break;case 7:B.value==null&&r(x,Yi.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Rc(B)),M.items.push(u(x,B.value||""));break;case 8:const z=f(x);M.items.push(z.node),I=z.nextConsumeToken||null;break}}while(S.currentType!==14&&S.currentType!==1);const $=S.currentType===1?S.lastOffset:x.currentOffset(),L=S.currentType===1?S.lastEndLoc:x.currentPosition();return s(M,$,L),M}function g(x,S,T,_){const M=x.context();let I=_.items.length===0;const $=n(1,S,T);$.cases=[],$.cases.push(_);do{const L=m(x);I||(I=L.items.length===0),$.cases.push(L)}while(M.currentType!==14);return I&&r(x,Yi.MUST_HAVE_MESSAGES_IN_PLURAL,T,0),s($,x.currentOffset(),x.currentPosition()),$}function v(x){const S=x.context(),{offset:T,startLoc:_}=S,M=m(x);return S.currentType===14?M:g(x,T,_,M)}function b(x){const S=nWe(x,Ts({},e)),T=S.context(),_=n(0,T.offset,T.startLoc);return t&&_.loc&&(_.loc.source=x),_.body=v(S),T.currentType!==14&&r(S,Yi.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,x[T.offset]||""),s(_,S.currentOffset(),S.currentPosition()),_}return{parse:b}}function Rc(e){if(e.type===14)return"EOF";const t=(e.value||"").replace(/\r?\n/gu,"\\n");return t.length>10?t.slice(0,9)+"…":t}function uWe(e,t={}){const i={ast:e,helpers:new Set};return{context:()=>i,helper:s=>(i.helpers.add(s),s)}}function fJ(e,t){for(let i=0;i<e.length;i++)cj(e[i],t)}function cj(e,t){switch(e.type){case 1:fJ(e.cases,t),t.helper("plural");break;case 2:fJ(e.items,t);break;case 6:cj(e.key,t),t.helper("linked"),t.helper("type");break;case 5:t.helper("interpolate"),t.helper("list");break;case 4:t.helper("interpolate"),t.helper("named");break}}function cWe(e,t={}){const i=uWe(e);i.helper("normalize"),e.body&&cj(e.body,i);const r=i.context();e.helpers=Array.from(r.helpers)}function hWe(e,t){const{sourceMap:i,filename:r,breakLineCode:n,needIndent:s}=t,o={source:e.loc.source,filename:r,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:n,needIndent:s,indentLevel:0},a=()=>o;function l(v,b){o.code+=v}function u(v,b=!0){const x=b?n:"";l(s?x+"  ".repeat(v):x)}function c(v=!0){const b=++o.indentLevel;v&&u(b)}function d(v=!0){const b=--o.indentLevel;v&&u(b)}function f(){u(o.indentLevel)}return{context:a,push:l,indent:c,deindent:d,newline:f,helper:v=>`_${v}`,needIndent:()=>o.needIndent}}function dWe(e,t){const{helper:i}=e;e.push(`${i("linked")}(`),Kb(e,t.key),t.modifier?(e.push(", "),Kb(e,t.modifier),e.push(", _type")):e.push(", undefined, _type"),e.push(")")}function pWe(e,t){const{helper:i,needIndent:r}=e;e.push(`${i("normalize")}([`),e.indent(r());const n=t.items.length;for(let s=0;s<n&&(Kb(e,t.items[s]),s!==n-1);s++)e.push(", ");e.deindent(r()),e.push("])")}function fWe(e,t){const{helper:i,needIndent:r}=e;if(t.cases.length>1){e.push(`${i("plural")}([`),e.indent(r());const n=t.cases.length;for(let s=0;s<n&&(Kb(e,t.cases[s]),s!==n-1);s++)e.push(", ");e.deindent(r()),e.push("])")}}function mWe(e,t){t.body?Kb(e,t.body):e.push("null")}function Kb(e,t){const{helper:i}=e;switch(t.type){case 0:mWe(e,t);break;case 1:fWe(e,t);break;case 2:pWe(e,t);break;case 6:dWe(e,t);break;case 8:e.push(JSON.stringify(t.value),t);break;case 7:e.push(JSON.stringify(t.value),t);break;case 5:e.push(`${i("interpolate")}(${i("list")}(${t.index}))`,t);break;case 4:e.push(`${i("interpolate")}(${i("named")}(${JSON.stringify(t.key)}))`,t);break;case 9:e.push(JSON.stringify(t.value),t);break;case 3:e.push(JSON.stringify(t.value),t);break}}const yWe=(e,t={})=>{const i=Ct(t.mode)?t.mode:"normal",r=Ct(t.filename)?t.filename:"message.intl",n=!!t.sourceMap,s=t.breakLineCode!=null?t.breakLineCode:i==="arrow"?";":`
`,o=t.needIndent?t.needIndent:i!=="arrow",a=e.helpers||[],l=hWe(e,{mode:i,filename:r,sourceMap:n,breakLineCode:s,needIndent:o});l.push(i==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(o),a.length>0&&(l.push(`const { ${a.map(d=>`${d}: _${d}`).join(", ")} } = ctx`),l.newline()),l.push("return "),Kb(l,e),l.deindent(o),l.push("}");const{code:u,map:c}=l.context();return{ast:e,code:u,map:c?c.toJSON():void 0}};function gWe(e,t={}){const i=Ts({},t),n=lWe(i).parse(e);return cWe(n,i),yWe(n,i)}/*!
  * devtools-if v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const fhe={I18nInit:"i18n:init",FunctionTranslate:"function:translate"};/*!
  * core-base v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const Wm=[];Wm[0]={w:[0],i:[3,0],["["]:[4],o:[7]};Wm[1]={w:[1],["."]:[2],["["]:[4],o:[7]};Wm[2]={w:[2],i:[3,0],[0]:[3,0]};Wm[3]={i:[3,0],[0]:[3,0],w:[1,1],["."]:[2,1],["["]:[4,1],o:[7,1]};Wm[4]={["'"]:[5,0],['"']:[6,0],["["]:[4,2],["]"]:[1,3],o:8,l:[4,0]};Wm[5]={["'"]:[4,0],o:8,l:[5,0]};Wm[6]={['"']:[4,0],o:8,l:[6,0]};const vWe=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function bWe(e){return vWe.test(e)}function wWe(e){const t=e.charCodeAt(0),i=e.charCodeAt(e.length-1);return t===i&&(t===34||t===39)?e.slice(1,-1):e}function _We(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function xWe(e){const t=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:bWe(t)?wWe(t):"*"+t}function SWe(e){const t=[];let i=-1,r=0,n=0,s,o,a,l,u,c,d;const f=[];f[0]=()=>{o===void 0?o=a:o+=a},f[1]=()=>{o!==void 0&&(t.push(o),o=void 0)},f[2]=()=>{f[0](),n++},f[3]=()=>{if(n>0)n--,r=4,f[0]();else{if(n=0,o===void 0||(o=xWe(o),o===!1))return!1;f[1]()}};function m(){const g=e[i+1];if(r===5&&g==="'"||r===6&&g==='"')return i++,a="\\"+g,f[0](),!0}for(;r!==null;)if(i++,s=e[i],!(s==="\\"&&m())){if(l=_We(s),d=Wm[r],u=d[l]||d.l||8,u===8||(r=u[0],u[1]!==void 0&&(c=f[u[1]],c&&(a=s,c()===!1))))return;if(r===7)return t}}const mJ=new Map;function EWe(e,t){return Cr(e)?e[t]:null}function MWe(e,t){if(!Cr(e))return null;let i=mJ.get(t);if(i||(i=SWe(t),i&&mJ.set(t,i)),!i)return null;const r=i.length;let n=e,s=0;for(;s<r;){const o=n[i[s]];if(o===void 0)return null;n=o,s++}return n}const IWe=e=>e,TWe=e=>"",AWe="text",CWe=e=>e.length===0?"":e.join(""),$We=YHe;function yJ(e,t){return e=Math.abs(e),t===2?e?e>1?1:0:1:e?Math.min(e,2):0}function OWe(e){const t=us(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(us(e.named.count)||us(e.named.n))?us(e.named.count)?e.named.count:us(e.named.n)?e.named.n:t:t}function RWe(e,t){t.count||(t.count=e),t.n||(t.n=e)}function kWe(e={}){const t=e.locale,i=OWe(e),r=Cr(e.pluralRules)&&Ct(t)&&$n(e.pluralRules[t])?e.pluralRules[t]:yJ,n=Cr(e.pluralRules)&&Ct(t)&&$n(e.pluralRules[t])?yJ:void 0,s=x=>x[r(i,x.length,n)],o=e.list||[],a=x=>o[x],l=e.named||{};us(e.pluralIndex)&&RWe(i,l);const u=x=>l[x];function c(x){const S=$n(e.messages)?e.messages(x):Cr(e.messages)?e.messages[x]:!1;return S||(e.parent?e.parent.message(x):TWe)}const d=x=>e.modifiers?e.modifiers[x]:IWe,f=fi(e.processor)&&$n(e.processor.normalize)?e.processor.normalize:CWe,m=fi(e.processor)&&$n(e.processor.interpolate)?e.processor.interpolate:$We,g=fi(e.processor)&&Ct(e.processor.type)?e.processor.type:AWe,b={list:a,named:u,plural:s,linked:(x,...S)=>{const[T,_]=S;let M="text",I="";S.length===1?Cr(T)?(I=T.modifier||I,M=T.type||M):Ct(T)&&(I=T||I):S.length===2&&(Ct(T)&&(I=T||I),Ct(_)&&(M=_||M));let $=c(x)(b);return M==="vnode"&&Ar($)&&I&&($=$[0]),I?d(I)($,M):$},message:c,type:g,interpolate:m,normalize:f};return b}let BS=null;function LWe(e){BS=e}function PWe(e,t,i){BS&&BS.emit(fhe.I18nInit,{timestamp:Date.now(),i18n:e,version:t,meta:i})}const NWe=FWe(fhe.FunctionTranslate);function FWe(e){return t=>BS&&BS.emit(e,t)}function DWe(e,t,i){return[...new Set([i,...Ar(t)?t:Cr(t)?Object.keys(t):Ct(t)?[t]:[i]])]}function mhe(e,t,i){const r=Ct(i)?i:J3,n=e;n.__localeChainCache||(n.__localeChainCache=new Map);let s=n.__localeChainCache.get(r);if(!s){s=[];let o=[i];for(;Ar(o);)o=gJ(s,o,t);const a=Ar(t)||!fi(t)?t:t.default?t.default:null;o=Ct(a)?[a]:a,Ar(o)&&gJ(s,o,!1),n.__localeChainCache.set(r,s)}return s}function gJ(e,t,i){let r=!0;for(let n=0;n<t.length&&ji(r);n++){const s=t[n];Ct(s)&&(r=jWe(e,t[n],i))}return r}function jWe(e,t,i){let r;const n=t.split("-");do{const s=n.join("-");r=UWe(e,s,i),n.splice(-1,1)}while(n.length&&r===!0);return r}function UWe(e,t,i){let r=!1;if(!e.includes(t)&&(r=!0,t)){r=t[t.length-1]!=="!";const n=t.replace(/!/g,"");e.push(n),(Ar(i)||fi(i))&&i[n]&&(r=i[n])}return r}const VWe="9.2.2",$C=-1,J3="en-US",vJ="",bJ=e=>`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`;function BWe(){return{upper:(e,t)=>t==="text"&&Ct(e)?e.toUpperCase():t==="vnode"&&Cr(e)&&"__v_isVNode"in e?e.children.toUpperCase():e,lower:(e,t)=>t==="text"&&Ct(e)?e.toLowerCase():t==="vnode"&&Cr(e)&&"__v_isVNode"in e?e.children.toLowerCase():e,capitalize:(e,t)=>t==="text"&&Ct(e)?bJ(e):t==="vnode"&&Cr(e)&&"__v_isVNode"in e?bJ(e.children):e}}let yhe;function zWe(e){yhe=e}let ghe;function GWe(e){ghe=e}let vhe;function qWe(e){vhe=e}let bhe=null;const wJ=e=>{bhe=e},HWe=()=>bhe;let whe=null;const _J=e=>{whe=e},WWe=()=>whe;let xJ=0;function JWe(e={}){const t=Ct(e.version)?e.version:VWe,i=Ct(e.locale)?e.locale:J3,r=Ar(e.fallbackLocale)||fi(e.fallbackLocale)||Ct(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:i,n=fi(e.messages)?e.messages:{[i]:{}},s=fi(e.datetimeFormats)?e.datetimeFormats:{[i]:{}},o=fi(e.numberFormats)?e.numberFormats:{[i]:{}},a=Ts({},e.modifiers||{},BWe()),l=e.pluralRules||{},u=$n(e.missing)?e.missing:null,c=ji(e.missingWarn)||Tm(e.missingWarn)?e.missingWarn:!0,d=ji(e.fallbackWarn)||Tm(e.fallbackWarn)?e.fallbackWarn:!0,f=!!e.fallbackFormat,m=!!e.unresolving,g=$n(e.postTranslation)?e.postTranslation:null,v=fi(e.processor)?e.processor:null,b=ji(e.warnHtmlMessage)?e.warnHtmlMessage:!0,x=!!e.escapeParameter,S=$n(e.messageCompiler)?e.messageCompiler:yhe,T=$n(e.messageResolver)?e.messageResolver:ghe||EWe,_=$n(e.localeFallbacker)?e.localeFallbacker:vhe||DWe,M=Cr(e.fallbackContext)?e.fallbackContext:void 0,I=$n(e.onWarn)?e.onWarn:JHe,$=e,L=Cr($.__datetimeFormatters)?$.__datetimeFormatters:new Map,B=Cr($.__numberFormatters)?$.__numberFormatters:new Map,z=Cr($.__meta)?$.__meta:{};xJ++;const W={version:t,cid:xJ,locale:i,fallbackLocale:r,messages:n,modifiers:a,pluralRules:l,missing:u,missingWarn:c,fallbackWarn:d,fallbackFormat:f,unresolving:m,postTranslation:g,processor:v,warnHtmlMessage:b,escapeParameter:x,messageCompiler:S,messageResolver:T,localeFallbacker:_,fallbackContext:M,onWarn:I,__meta:z};return W.datetimeFormats=s,W.numberFormats=o,W.__datetimeFormatters=L,W.__numberFormatters=B,__INTLIFY_PROD_DEVTOOLS__&&PWe(W,t,z),W}function hj(e,t,i,r,n){const{missing:s,onWarn:o}=e;if(s!==null){const a=s(e,i,t,n);return Ct(a)?a:t}else return t}function L_(e,t,i){const r=e;r.__localeChainCache=new Map,e.localeFallbacker(e,i,t)}const ZWe=e=>e;let SJ=Object.create(null);function YWe(e,t={}){{const r=(t.onCacheKey||ZWe)(e),n=SJ[r];if(n)return n;let s=!1;const o=t.onError||KHe;t.onError=u=>{s=!0,o(u)};const{code:a}=gWe(e,t),l=new Function(`return ${a}`)();return s?l:SJ[r]=l}}let _he=Yi.__EXTEND_POINT__;const mR=()=>++_he,Bv={INVALID_ARGUMENT:_he,INVALID_DATE_ARGUMENT:mR(),INVALID_ISO_DATE_ARGUMENT:mR(),__EXTEND_POINT__:mR()};function zv(e){return CC(e,null,void 0)}const EJ=()=>"",ch=e=>$n(e);function MJ(e,...t){const{fallbackFormat:i,postTranslation:r,unresolving:n,messageCompiler:s,fallbackLocale:o,messages:a}=e,[l,u]=pN(...t),c=ji(u.missingWarn)?u.missingWarn:e.missingWarn,d=ji(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn,f=ji(u.escapeParameter)?u.escapeParameter:e.escapeParameter,m=!!u.resolvedMessage,g=Ct(u.default)||ji(u.default)?ji(u.default)?s?l:()=>l:u.default:i?s?l:()=>l:"",v=i||g!=="",b=Ct(u.locale)?u.locale:e.locale;f&&KWe(u);let[x,S,T]=m?[l,b,a[b]||{}]:xhe(e,l,b,o,d,c),_=x,M=l;if(!m&&!(Ct(_)||ch(_))&&v&&(_=g,M=_),!m&&(!(Ct(_)||ch(_))||!Ct(S)))return n?$C:l;let I=!1;const $=()=>{I=!0},L=ch(_)?_:She(e,l,S,_,M,$);if(I)return _;const B=eJe(e,S,T,u),z=kWe(B),W=QWe(e,L,z),J=r?r(W,l):W;if(__INTLIFY_PROD_DEVTOOLS__){const K={timestamp:Date.now(),key:Ct(l)?l:ch(_)?_.key:"",locale:S||(ch(_)?_.locale:""),format:Ct(_)?_:ch(_)?_.source:"",message:J};K.meta=Ts({},e.__meta,HWe()||{}),NWe(K)}return J}function KWe(e){Ar(e.list)?e.list=e.list.map(t=>Ct(t)?dJ(t):t):Cr(e.named)&&Object.keys(e.named).forEach(t=>{Ct(e.named[t])&&(e.named[t]=dJ(e.named[t]))})}function xhe(e,t,i,r,n,s){const{messages:o,onWarn:a,messageResolver:l,localeFallbacker:u}=e,c=u(e,r,i);let d={},f,m=null;const g="translate";for(let v=0;v<c.length&&(f=c[v],d=o[f]||{},(m=l(d,t))===null&&(m=d[t]),!(Ct(m)||$n(m)));v++){const b=hj(e,t,f,s,g);b!==t&&(m=b)}return[m,f,d]}function She(e,t,i,r,n,s){const{messageCompiler:o,warnHtmlMessage:a}=e;if(ch(r)){const u=r;return u.locale=u.locale||i,u.key=u.key||t,u}if(o==null){const u=()=>r;return u.locale=i,u.key=t,u}const l=o(r,XWe(e,i,n,r,a,s));return l.locale=i,l.key=t,l.source=r,l}function QWe(e,t,i){return t(i)}function pN(...e){const[t,i,r]=e,n={};if(!Ct(t)&&!us(t)&&!ch(t))throw zv(Bv.INVALID_ARGUMENT);const s=us(t)?String(t):(ch(t),t);return us(i)?n.plural=i:Ct(i)?n.default=i:fi(i)&&!AC(i)?n.named=i:Ar(i)&&(n.list=i),us(r)?n.plural=r:Ct(r)?n.default=r:fi(r)&&Ts(n,r),[s,n]}function XWe(e,t,i,r,n,s){return{warnHtmlMessage:n,onError:o=>{throw s&&s(o),o},onCacheKey:o=>qHe(t,i,o)}}function eJe(e,t,i,r){const{modifiers:n,pluralRules:s,messageResolver:o,fallbackLocale:a,fallbackWarn:l,missingWarn:u,fallbackContext:c}=e,f={locale:t,modifiers:n,pluralRules:s,messages:m=>{let g=o(i,m);if(g==null&&c){const[,,v]=xhe(c,m,t,a,l,u);g=o(v,m)}if(Ct(g)){let v=!1;const x=She(e,m,t,g,m,()=>{v=!0});return v?EJ:x}else return ch(g)?g:EJ}};return e.processor&&(f.processor=e.processor),r.list&&(f.list=r.list),r.named&&(f.named=r.named),us(r.plural)&&(f.pluralIndex=r.plural),f}function IJ(e,...t){const{datetimeFormats:i,unresolving:r,fallbackLocale:n,onWarn:s,localeFallbacker:o}=e,{__datetimeFormatters:a}=e,[l,u,c,d]=fN(...t),f=ji(c.missingWarn)?c.missingWarn:e.missingWarn;ji(c.fallbackWarn)?c.fallbackWarn:e.fallbackWarn;const m=!!c.part,g=Ct(c.locale)?c.locale:e.locale,v=o(e,n,g);if(!Ct(l)||l==="")return new Intl.DateTimeFormat(g,d).format(u);let b={},x,S=null;const T="datetime format";for(let I=0;I<v.length&&(x=v[I],b=i[x]||{},S=b[l],!fi(S));I++)hj(e,l,x,f,T);if(!fi(S)||!Ct(x))return r?$C:l;let _=`${x}__${l}`;AC(d)||(_=`${_}__${JSON.stringify(d)}`);let M=a.get(_);return M||(M=new Intl.DateTimeFormat(x,Ts({},S,d)),a.set(_,M)),m?M.formatToParts(u):M.format(u)}const Ehe=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function fN(...e){const[t,i,r,n]=e,s={};let o={},a;if(Ct(t)){const l=t.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw zv(Bv.INVALID_ISO_DATE_ARGUMENT);const u=l[3]?l[3].trim().startsWith("T")?`${l[1].trim()}${l[3].trim()}`:`${l[1].trim()}T${l[3].trim()}`:l[1].trim();a=new Date(u);try{a.toISOString()}catch{throw zv(Bv.INVALID_ISO_DATE_ARGUMENT)}}else if(WHe(t)){if(isNaN(t.getTime()))throw zv(Bv.INVALID_DATE_ARGUMENT);a=t}else if(us(t))a=t;else throw zv(Bv.INVALID_ARGUMENT);return Ct(i)?s.key=i:fi(i)&&Object.keys(i).forEach(l=>{Ehe.includes(l)?o[l]=i[l]:s[l]=i[l]}),Ct(r)?s.locale=r:fi(r)&&(o=r),fi(n)&&(o=n),[s.key||"",a,s,o]}function TJ(e,t,i){const r=e;for(const n in i){const s=`${t}__${n}`;r.__datetimeFormatters.has(s)&&r.__datetimeFormatters.delete(s)}}function AJ(e,...t){const{numberFormats:i,unresolving:r,fallbackLocale:n,onWarn:s,localeFallbacker:o}=e,{__numberFormatters:a}=e,[l,u,c,d]=mN(...t),f=ji(c.missingWarn)?c.missingWarn:e.missingWarn;ji(c.fallbackWarn)?c.fallbackWarn:e.fallbackWarn;const m=!!c.part,g=Ct(c.locale)?c.locale:e.locale,v=o(e,n,g);if(!Ct(l)||l==="")return new Intl.NumberFormat(g,d).format(u);let b={},x,S=null;const T="number format";for(let I=0;I<v.length&&(x=v[I],b=i[x]||{},S=b[l],!fi(S));I++)hj(e,l,x,f,T);if(!fi(S)||!Ct(x))return r?$C:l;let _=`${x}__${l}`;AC(d)||(_=`${_}__${JSON.stringify(d)}`);let M=a.get(_);return M||(M=new Intl.NumberFormat(x,Ts({},S,d)),a.set(_,M)),m?M.formatToParts(u):M.format(u)}const Mhe=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function mN(...e){const[t,i,r,n]=e,s={};let o={};if(!us(t))throw zv(Bv.INVALID_ARGUMENT);const a=t;return Ct(i)?s.key=i:fi(i)&&Object.keys(i).forEach(l=>{Mhe.includes(l)?o[l]=i[l]:s[l]=i[l]}),Ct(r)?s.locale=r:fi(r)&&(o=r),fi(n)&&(o=n),[s.key||"",a,s,o]}function CJ(e,t,i){const r=e;for(const n in i){const s=`${t}__${n}`;r.__numberFormatters.has(s)&&r.__numberFormatters.delete(s)}}typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Lx().__INTLIFY_PROD_DEVTOOLS__=!1);/*!
  * vue-i18n v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const tJe="9.2.2";function iJe(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(Lx().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(Lx().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Lx().__INTLIFY_PROD_DEVTOOLS__=!1)}let Ihe=Yi.__EXTEND_POINT__;const Qo=()=>++Ihe,qn={UNEXPECTED_RETURN_TYPE:Ihe,INVALID_ARGUMENT:Qo(),MUST_BE_CALL_SETUP_TOP:Qo(),NOT_INSLALLED:Qo(),NOT_AVAILABLE_IN_LEGACY_MODE:Qo(),REQUIRED_VALUE:Qo(),INVALID_VALUE:Qo(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:Qo(),NOT_INSLALLED_WITH_PROVIDE:Qo(),UNEXPECTED_ERROR:Qo(),NOT_COMPATIBLE_LEGACY_VUE_I18N:Qo(),BRIDGE_SUPPORT_VUE_2_ONLY:Qo(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:Qo(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:Qo(),__EXTEND_POINT__:Qo()};function ps(e,...t){return CC(e,null,void 0)}const yN=Hm("__transrateVNode"),gN=Hm("__datetimeParts"),vN=Hm("__numberParts"),The=Hm("__setPluralRules");Hm("__intlifyMeta");const Ahe=Hm("__injectWithOption");function bN(e){if(!Cr(e))return e;for(const t in e)if(lj(e,t))if(!t.includes("."))Cr(e[t])&&bN(e[t]);else{const i=t.split("."),r=i.length-1;let n=e;for(let s=0;s<r;s++)i[s]in n||(n[i[s]]={}),n=n[i[s]];n[i[r]]=e[t],delete e[t],Cr(n[i[r]])&&bN(n[i[r]])}return e}function OC(e,t){const{messages:i,__i18n:r,messageResolver:n,flatJson:s}=t,o=fi(i)?i:Ar(r)?{}:{[e]:{}};if(Ar(r)&&r.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:l,resource:u}=a;l?(o[l]=o[l]||{},Px(u,o[l])):Px(u,o)}else Ct(a)&&Px(JSON.parse(a),o)}),n==null&&s)for(const a in o)lj(o,a)&&bN(o[a]);return o}const jM=e=>!Cr(e)||Ar(e);function Px(e,t){if(jM(e)||jM(t))throw ps(qn.INVALID_VALUE);for(const i in e)lj(e,i)&&(jM(e[i])||jM(t[i])?t[i]=e[i]:Px(e[i],t[i]))}function Che(e){return e.type}function $he(e,t,i){let r=Cr(t.messages)?t.messages:{};"__i18nGlobal"in i&&(r=OC(e.locale.value,{messages:r,__i18n:i.__i18nGlobal}));const n=Object.keys(r);n.length&&n.forEach(s=>{e.mergeLocaleMessage(s,r[s])});{if(Cr(t.datetimeFormats)){const s=Object.keys(t.datetimeFormats);s.length&&s.forEach(o=>{e.mergeDateTimeFormat(o,t.datetimeFormats[o])})}if(Cr(t.numberFormats)){const s=Object.keys(t.numberFormats);s.length&&s.forEach(o=>{e.mergeNumberFormat(o,t.numberFormats[o])})}}}function $J(e){return gi(ap,null,e,0)}const OJ="__INTLIFY_META__";let RJ=0;function kJ(e){return(t,i,r,n)=>e(i,r,Cs()||void 0,n)}const rJe=()=>{const e=Cs();let t=null;return e&&(t=Che(e)[OJ])?{[OJ]:t}:null};function dj(e={},t){const{__root:i}=e,r=i===void 0;let n=ji(e.inheritLocale)?e.inheritLocale:!0;const s=tt(i&&n?i.locale.value:Ct(e.locale)?e.locale:J3),o=tt(i&&n?i.fallbackLocale.value:Ct(e.fallbackLocale)||Ar(e.fallbackLocale)||fi(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:s.value),a=tt(OC(s.value,e)),l=tt(fi(e.datetimeFormats)?e.datetimeFormats:{[s.value]:{}}),u=tt(fi(e.numberFormats)?e.numberFormats:{[s.value]:{}});let c=i?i.missingWarn:ji(e.missingWarn)||Tm(e.missingWarn)?e.missingWarn:!0,d=i?i.fallbackWarn:ji(e.fallbackWarn)||Tm(e.fallbackWarn)?e.fallbackWarn:!0,f=i?i.fallbackRoot:ji(e.fallbackRoot)?e.fallbackRoot:!0,m=!!e.fallbackFormat,g=$n(e.missing)?e.missing:null,v=$n(e.missing)?kJ(e.missing):null,b=$n(e.postTranslation)?e.postTranslation:null,x=i?i.warnHtmlMessage:ji(e.warnHtmlMessage)?e.warnHtmlMessage:!0,S=!!e.escapeParameter;const T=i?i.modifiers:fi(e.modifiers)?e.modifiers:{};let _=e.pluralRules||i&&i.pluralRules,M;M=(()=>{r&&_J(null);const O={version:tJe,locale:s.value,fallbackLocale:o.value,messages:a.value,modifiers:T,pluralRules:_,missing:v===null?void 0:v,missingWarn:c,fallbackWarn:d,fallbackFormat:m,unresolving:!0,postTranslation:b===null?void 0:b,warnHtmlMessage:x,escapeParameter:S,messageResolver:e.messageResolver,__meta:{framework:"vue"}};O.datetimeFormats=l.value,O.numberFormats=u.value,O.__datetimeFormatters=fi(M)?M.__datetimeFormatters:void 0,O.__numberFormatters=fi(M)?M.__numberFormatters:void 0;const C=JWe(O);return r&&_J(C),C})(),L_(M,s.value,o.value);function $(){return[s.value,o.value,a.value,l.value,u.value]}const L=$i({get:()=>s.value,set:O=>{s.value=O,M.locale=s.value}}),B=$i({get:()=>o.value,set:O=>{o.value=O,M.fallbackLocale=o.value,L_(M,s.value,O)}}),z=$i(()=>a.value),W=$i(()=>l.value),J=$i(()=>u.value);function K(){return $n(b)?b:null}function Q(O){b=O,M.postTranslation=O}function y(){return g}function A(O){O!==null&&(v=kJ(O)),g=O,M.missing=v}const N=(O,C,G,Z,F,te)=>{$();let ge;if(__INTLIFY_PROD_DEVTOOLS__)try{wJ(rJe()),r||(M.fallbackContext=i?WWe():void 0),ge=O(M)}finally{wJ(null),r||(M.fallbackContext=void 0)}else ge=O(M);if(us(ge)&&ge===$C){const[xe,fe]=C();return i&&f?Z(i):F(xe)}else{if(te(ge))return ge;throw ps(qn.UNEXPECTED_RETURN_TYPE)}};function j(...O){return N(C=>Reflect.apply(MJ,null,[C,...O]),()=>pN(...O),"translate",C=>Reflect.apply(C.t,C,[...O]),C=>C,C=>Ct(C))}function oe(...O){const[C,G,Z]=O;if(Z&&!Cr(Z))throw ps(qn.INVALID_ARGUMENT);return j(C,G,Ts({resolvedMessage:!0},Z||{}))}function q(...O){return N(C=>Reflect.apply(IJ,null,[C,...O]),()=>fN(...O),"datetime format",C=>Reflect.apply(C.d,C,[...O]),()=>vJ,C=>Ct(C))}function de(...O){return N(C=>Reflect.apply(AJ,null,[C,...O]),()=>mN(...O),"number format",C=>Reflect.apply(C.n,C,[...O]),()=>vJ,C=>Ct(C))}function re(O){return O.map(C=>Ct(C)||us(C)||ji(C)?$J(String(C)):C)}const ve={normalize:re,interpolate:O=>O,type:"vnode"};function _e(...O){return N(C=>{let G;const Z=C;try{Z.processor=ve,G=Reflect.apply(MJ,null,[Z,...O])}finally{Z.processor=null}return G},()=>pN(...O),"translate",C=>C[yN](...O),C=>[$J(C)],C=>Ar(C))}function Se(...O){return N(C=>Reflect.apply(AJ,null,[C,...O]),()=>mN(...O),"number format",C=>C[vN](...O),()=>[],C=>Ct(C)||Ar(C))}function Oe(...O){return N(C=>Reflect.apply(IJ,null,[C,...O]),()=>fN(...O),"datetime format",C=>C[gN](...O),()=>[],C=>Ct(C)||Ar(C))}function Me(O){_=O,M.pluralRules=_}function we(O,C){const G=Ct(C)?C:s.value,Z=H(G);return M.messageResolver(Z,O)!==null}function Ie(O){let C=null;const G=mhe(M,o.value,s.value);for(let Z=0;Z<G.length;Z++){const F=a.value[G[Z]]||{},te=M.messageResolver(F,O);if(te!=null){C=te;break}}return C}function Ae(O){const C=Ie(O);return C??(i?i.tm(O)||{}:{})}function H(O){return a.value[O]||{}}function V(O,C){a.value[O]=C,M.messages=a.value}function D(O,C){a.value[O]=a.value[O]||{},Px(C,a.value[O]),M.messages=a.value}function ne(O){return l.value[O]||{}}function ye(O,C){l.value[O]=C,M.datetimeFormats=l.value,TJ(M,O,C)}function ae(O,C){l.value[O]=Ts(l.value[O]||{},C),M.datetimeFormats=l.value,TJ(M,O,C)}function U(O){return u.value[O]||{}}function le(O,C){u.value[O]=C,M.numberFormats=u.value,CJ(M,O,C)}function ie(O,C){u.value[O]=Ts(u.value[O]||{},C),M.numberFormats=u.value,CJ(M,O,C)}RJ++,i&&hN&&(Gn(i.locale,O=>{n&&(s.value=O,M.locale=O,L_(M,s.value,o.value))}),Gn(i.fallbackLocale,O=>{n&&(o.value=O,M.fallbackLocale=O,L_(M,s.value,o.value))}));const k={id:RJ,locale:L,fallbackLocale:B,get inheritLocale(){return n},set inheritLocale(O){n=O,O&&i&&(s.value=i.locale.value,o.value=i.fallbackLocale.value,L_(M,s.value,o.value))},get availableLocales(){return Object.keys(a.value).sort()},messages:z,get modifiers(){return T},get pluralRules(){return _||{}},get isGlobal(){return r},get missingWarn(){return c},set missingWarn(O){c=O,M.missingWarn=c},get fallbackWarn(){return d},set fallbackWarn(O){d=O,M.fallbackWarn=d},get fallbackRoot(){return f},set fallbackRoot(O){f=O},get fallbackFormat(){return m},set fallbackFormat(O){m=O,M.fallbackFormat=m},get warnHtmlMessage(){return x},set warnHtmlMessage(O){x=O,M.warnHtmlMessage=O},get escapeParameter(){return S},set escapeParameter(O){S=O,M.escapeParameter=O},t:j,getLocaleMessage:H,setLocaleMessage:V,mergeLocaleMessage:D,getPostTranslationHandler:K,setPostTranslationHandler:Q,getMissingHandler:y,setMissingHandler:A,[The]:Me};return k.datetimeFormats=W,k.numberFormats=J,k.rt=oe,k.te=we,k.tm=Ae,k.d=q,k.n=de,k.getDateTimeFormat=ne,k.setDateTimeFormat=ye,k.mergeDateTimeFormat=ae,k.getNumberFormat=U,k.setNumberFormat=le,k.mergeNumberFormat=ie,k[Ahe]=e.__injectWithOption,k[yN]=_e,k[gN]=Oe,k[vN]=Se,k}function nJe(e){const t=Ct(e.locale)?e.locale:J3,i=Ct(e.fallbackLocale)||Ar(e.fallbackLocale)||fi(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:t,r=$n(e.missing)?e.missing:void 0,n=ji(e.silentTranslationWarn)||Tm(e.silentTranslationWarn)?!e.silentTranslationWarn:!0,s=ji(e.silentFallbackWarn)||Tm(e.silentFallbackWarn)?!e.silentFallbackWarn:!0,o=ji(e.fallbackRoot)?e.fallbackRoot:!0,a=!!e.formatFallbackMessages,l=fi(e.modifiers)?e.modifiers:{},u=e.pluralizationRules,c=$n(e.postTranslation)?e.postTranslation:void 0,d=Ct(e.warnHtmlInMessage)?e.warnHtmlInMessage!=="off":!0,f=!!e.escapeParameterHtml,m=ji(e.sync)?e.sync:!0;let g=e.messages;if(fi(e.sharedMessages)){const M=e.sharedMessages;g=Object.keys(M).reduce(($,L)=>{const B=$[L]||($[L]={});return Ts(B,M[L]),$},g||{})}const{__i18n:v,__root:b,__injectWithOption:x}=e,S=e.datetimeFormats,T=e.numberFormats,_=e.flatJson;return{locale:t,fallbackLocale:i,messages:g,flatJson:_,datetimeFormats:S,numberFormats:T,missing:r,missingWarn:n,fallbackWarn:s,fallbackRoot:o,fallbackFormat:a,modifiers:l,pluralRules:u,postTranslation:c,warnHtmlMessage:d,escapeParameter:f,messageResolver:e.messageResolver,inheritLocale:m,__i18n:v,__root:b,__injectWithOption:x}}function wN(e={},t){{const i=dj(nJe(e)),r={id:i.id,get locale(){return i.locale.value},set locale(n){i.locale.value=n},get fallbackLocale(){return i.fallbackLocale.value},set fallbackLocale(n){i.fallbackLocale.value=n},get messages(){return i.messages.value},get datetimeFormats(){return i.datetimeFormats.value},get numberFormats(){return i.numberFormats.value},get availableLocales(){return i.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(n){},get missing(){return i.getMissingHandler()},set missing(n){i.setMissingHandler(n)},get silentTranslationWarn(){return ji(i.missingWarn)?!i.missingWarn:i.missingWarn},set silentTranslationWarn(n){i.missingWarn=ji(n)?!n:n},get silentFallbackWarn(){return ji(i.fallbackWarn)?!i.fallbackWarn:i.fallbackWarn},set silentFallbackWarn(n){i.fallbackWarn=ji(n)?!n:n},get modifiers(){return i.modifiers},get formatFallbackMessages(){return i.fallbackFormat},set formatFallbackMessages(n){i.fallbackFormat=n},get postTranslation(){return i.getPostTranslationHandler()},set postTranslation(n){i.setPostTranslationHandler(n)},get sync(){return i.inheritLocale},set sync(n){i.inheritLocale=n},get warnHtmlInMessage(){return i.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(n){i.warnHtmlMessage=n!=="off"},get escapeParameterHtml(){return i.escapeParameter},set escapeParameterHtml(n){i.escapeParameter=n},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(n){},get pluralizationRules(){return i.pluralRules||{}},__composer:i,t(...n){const[s,o,a]=n,l={};let u=null,c=null;if(!Ct(s))throw ps(qn.INVALID_ARGUMENT);const d=s;return Ct(o)?l.locale=o:Ar(o)?u=o:fi(o)&&(c=o),Ar(a)?u=a:fi(a)&&(c=a),Reflect.apply(i.t,i,[d,u||c||{},l])},rt(...n){return Reflect.apply(i.rt,i,[...n])},tc(...n){const[s,o,a]=n,l={plural:1};let u=null,c=null;if(!Ct(s))throw ps(qn.INVALID_ARGUMENT);const d=s;return Ct(o)?l.locale=o:us(o)?l.plural=o:Ar(o)?u=o:fi(o)&&(c=o),Ct(a)?l.locale=a:Ar(a)?u=a:fi(a)&&(c=a),Reflect.apply(i.t,i,[d,u||c||{},l])},te(n,s){return i.te(n,s)},tm(n){return i.tm(n)},getLocaleMessage(n){return i.getLocaleMessage(n)},setLocaleMessage(n,s){i.setLocaleMessage(n,s)},mergeLocaleMessage(n,s){i.mergeLocaleMessage(n,s)},d(...n){return Reflect.apply(i.d,i,[...n])},getDateTimeFormat(n){return i.getDateTimeFormat(n)},setDateTimeFormat(n,s){i.setDateTimeFormat(n,s)},mergeDateTimeFormat(n,s){i.mergeDateTimeFormat(n,s)},n(...n){return Reflect.apply(i.n,i,[...n])},getNumberFormat(n){return i.getNumberFormat(n)},setNumberFormat(n,s){i.setNumberFormat(n,s)},mergeNumberFormat(n,s){i.mergeNumberFormat(n,s)},getChoiceIndex(n,s){return-1},__onComponentInstanceCreated(n){const{componentInstanceCreatedListener:s}=e;s&&s(n,r)}};return r}}const pj={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}};function sJe({slots:e},t){return t.length===1&&t[0]==="default"?(e.default?e.default():[]).reduce((r,n)=>r=[...r,...Ar(n.children)?n.children:[n]],[]):t.reduce((i,r)=>{const n=e[r];return n&&(i[r]=n()),i},{})}function Ohe(e){return Tr}const LJ={name:"i18n-t",props:Ts({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>us(e)||!isNaN(e)}},pj),setup(e,t){const{slots:i,attrs:r}=t,n=e.i18n||Jr({useScope:e.scope,__useComponent:!0});return()=>{const s=Object.keys(i).filter(d=>d!=="_"),o={};e.locale&&(o.locale=e.locale),e.plural!==void 0&&(o.plural=Ct(e.plural)?+e.plural:e.plural);const a=sJe(t,s),l=n[yN](e.keypath,a,o),u=Ts({},r),c=Ct(e.tag)||Cr(e.tag)?e.tag:Ohe();return Nh(c,u,l)}}};function oJe(e){return Ar(e)&&!Ct(e[0])}function Rhe(e,t,i,r){const{slots:n,attrs:s}=t;return()=>{const o={part:!0};let a={};e.locale&&(o.locale=e.locale),Ct(e.format)?o.key=e.format:Cr(e.format)&&(Ct(e.format.key)&&(o.key=e.format.key),a=Object.keys(e.format).reduce((f,m)=>i.includes(m)?Ts({},f,{[m]:e.format[m]}):f,{}));const l=r(e.value,o,a);let u=[o.key];Ar(l)?u=l.map((f,m)=>{const g=n[f.type],v=g?g({[f.type]:f.value,index:m,parts:l}):[f.value];return oJe(v)&&(v[0].key=`${f.type}-${m}`),v}):Ct(l)&&(u=[l]);const c=Ts({},s),d=Ct(e.tag)||Cr(e.tag)?e.tag:Ohe();return Nh(d,c,u)}}const PJ={name:"i18n-n",props:Ts({value:{type:Number,required:!0},format:{type:[String,Object]}},pj),setup(e,t){const i=e.i18n||Jr({useScope:"parent",__useComponent:!0});return Rhe(e,t,Mhe,(...r)=>i[vN](...r))}},NJ={name:"i18n-d",props:Ts({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},pj),setup(e,t){const i=e.i18n||Jr({useScope:"parent",__useComponent:!0});return Rhe(e,t,Ehe,(...r)=>i[gN](...r))}};function aJe(e,t){const i=e;if(e.mode==="composition")return i.__getInstance(t)||e.global;{const r=i.__getInstance(t);return r!=null?r.__composer:e.global.__composer}}function lJe(e){const t=o=>{const{instance:a,modifiers:l,value:u}=o;if(!a||!a.$)throw ps(qn.UNEXPECTED_ERROR);const c=aJe(e,a.$),d=FJ(u);return[Reflect.apply(c.t,c,[...DJ(d)]),c]};return{created:(o,a)=>{const[l,u]=t(a);hN&&e.global===u&&(o.__i18nWatcher=Gn(u.locale,()=>{a.instance&&a.instance.$forceUpdate()})),o.__composer=u,o.textContent=l},unmounted:o=>{hN&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:a})=>{if(o.__composer){const l=o.__composer,u=FJ(a);o.textContent=Reflect.apply(l.t,l,[...DJ(u)])}},getSSRProps:o=>{const[a]=t(o);return{textContent:a}}}}function FJ(e){if(Ct(e))return{path:e};if(fi(e)){if(!("path"in e))throw ps(qn.REQUIRED_VALUE,"path");return e}else throw ps(qn.INVALID_VALUE)}function DJ(e){const{path:t,locale:i,args:r,choice:n,plural:s}=e,o={},a=r||{};return Ct(i)&&(o.locale=i),us(n)&&(o.plural=n),us(s)&&(o.plural=s),[t,a,o]}function uJe(e,t,...i){const r=fi(i[0])?i[0]:{},n=!!r.useI18nComponentName;(ji(r.globalInstall)?r.globalInstall:!0)&&(e.component(n?"i18n":LJ.name,LJ),e.component(PJ.name,PJ),e.component(NJ.name,NJ)),e.directive("t",lJe(t))}function cJe(e,t,i){return{beforeCreate(){const r=Cs();if(!r)throw ps(qn.UNEXPECTED_ERROR);const n=this.$options;if(n.i18n){const s=n.i18n;n.__i18n&&(s.__i18n=n.__i18n),s.__root=t,this===this.$root?this.$i18n=jJ(e,s):(s.__injectWithOption=!0,this.$i18n=wN(s))}else n.__i18n?this===this.$root?this.$i18n=jJ(e,n):this.$i18n=wN({__i18n:n.__i18n,__injectWithOption:!0,__root:t}):this.$i18n=e;n.__i18nGlobal&&$he(t,n,n),e.__onComponentInstanceCreated(this.$i18n),i.__setInstance(r,this.$i18n),this.$t=(...s)=>this.$i18n.t(...s),this.$rt=(...s)=>this.$i18n.rt(...s),this.$tc=(...s)=>this.$i18n.tc(...s),this.$te=(s,o)=>this.$i18n.te(s,o),this.$d=(...s)=>this.$i18n.d(...s),this.$n=(...s)=>this.$i18n.n(...s),this.$tm=s=>this.$i18n.tm(s)},mounted(){},unmounted(){const r=Cs();if(!r)throw ps(qn.UNEXPECTED_ERROR);delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,i.__deleteInstance(r),delete this.$i18n}}}function jJ(e,t){e.locale=t.locale||e.locale,e.fallbackLocale=t.fallbackLocale||e.fallbackLocale,e.missing=t.missing||e.missing,e.silentTranslationWarn=t.silentTranslationWarn||e.silentFallbackWarn,e.silentFallbackWarn=t.silentFallbackWarn||e.silentFallbackWarn,e.formatFallbackMessages=t.formatFallbackMessages||e.formatFallbackMessages,e.postTranslation=t.postTranslation||e.postTranslation,e.warnHtmlInMessage=t.warnHtmlInMessage||e.warnHtmlInMessage,e.escapeParameterHtml=t.escapeParameterHtml||e.escapeParameterHtml,e.sync=t.sync||e.sync,e.__composer[The](t.pluralizationRules||e.pluralizationRules);const i=OC(e.locale,{messages:t.messages,__i18n:t.__i18n});return Object.keys(i).forEach(r=>e.mergeLocaleMessage(r,i[r])),t.datetimeFormats&&Object.keys(t.datetimeFormats).forEach(r=>e.mergeDateTimeFormat(r,t.datetimeFormats[r])),t.numberFormats&&Object.keys(t.numberFormats).forEach(r=>e.mergeNumberFormat(r,t.numberFormats[r])),e}const hJe=Hm("global-vue-i18n");function dJe(e={},t){const i=__VUE_I18N_LEGACY_API__&&ji(e.legacy)?e.legacy:__VUE_I18N_LEGACY_API__,r=ji(e.globalInjection)?e.globalInjection:!0,n=__VUE_I18N_LEGACY_API__&&i?!!e.allowComposition:!0,s=new Map,[o,a]=pJe(e,i),l=Hm("");function u(f){return s.get(f)||null}function c(f,m){s.set(f,m)}function d(f){s.delete(f)}{const f={get mode(){return __VUE_I18N_LEGACY_API__&&i?"legacy":"composition"},get allowComposition(){return n},async install(m,...g){m.__VUE_I18N_SYMBOL__=l,m.provide(m.__VUE_I18N_SYMBOL__,f),!i&&r&&xJe(m,f.global),__VUE_I18N_FULL_INSTALL__&&uJe(m,f,...g),__VUE_I18N_LEGACY_API__&&i&&m.mixin(cJe(a,a.__composer,f));const v=m.unmount;m.unmount=()=>{f.dispose(),v()}},get global(){return a},dispose(){o.stop()},__instances:s,__getInstance:u,__setInstance:c,__deleteInstance:d};return f}}function Jr(e={}){const t=Cs();if(t==null)throw ps(qn.MUST_BE_CALL_SETUP_TOP);if(!t.isCE&&t.appContext.app!=null&&!t.appContext.app.__VUE_I18N_SYMBOL__)throw ps(qn.NOT_INSLALLED);const i=fJe(t),r=yJe(i),n=Che(t),s=mJe(e,n);if(__VUE_I18N_LEGACY_API__&&i.mode==="legacy"&&!e.__useComponent){if(!i.allowComposition)throw ps(qn.NOT_AVAILABLE_IN_LEGACY_MODE);return bJe(t,s,r,e)}if(s==="global")return $he(r,e,n),r;if(s==="parent"){let l=gJe(i,t,e.__useComponent);return l==null&&(l=r),l}const o=i;let a=o.__getInstance(t);if(a==null){const l=Ts({},e);"__i18n"in n&&(l.__i18n=n.__i18n),r&&(l.__root=r),a=dj(l),vJe(o,t),o.__setInstance(t,a)}return a}function pJe(e,t,i){const r=F3();{const n=__VUE_I18N_LEGACY_API__&&t?r.run(()=>wN(e)):r.run(()=>dj(e));if(n==null)throw ps(qn.UNEXPECTED_ERROR);return[r,n]}}function fJe(e){{const t=hs(e.isCE?hJe:e.appContext.app.__VUE_I18N_SYMBOL__);if(!t)throw ps(e.isCE?qn.NOT_INSLALLED_WITH_PROVIDE:qn.UNEXPECTED_ERROR);return t}}function mJe(e,t){return AC(e)?"__i18n"in t?"local":"global":e.useScope?e.useScope:"local"}function yJe(e){return e.mode==="composition"?e.global:e.global.__composer}function gJe(e,t,i=!1){let r=null;const n=t.root;let s=t.parent;for(;s!=null;){const o=e;if(e.mode==="composition")r=o.__getInstance(s);else if(__VUE_I18N_LEGACY_API__){const a=o.__getInstance(s);a!=null&&(r=a.__composer,i&&r&&!r[Ahe]&&(r=null))}if(r!=null||n===s)break;s=s.parent}return r}function vJe(e,t,i){Eo(()=>{},t),e1(()=>{e.__deleteInstance(t)},t)}function bJe(e,t,i,r={}){const n=t==="local",s=r7(null);if(n&&e.proxy&&!(e.proxy.$options.i18n||e.proxy.$options.__i18n))throw ps(qn.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const o=ji(r.inheritLocale)?r.inheritLocale:!0,a=tt(n&&o?i.locale.value:Ct(r.locale)?r.locale:J3),l=tt(n&&o?i.fallbackLocale.value:Ct(r.fallbackLocale)||Ar(r.fallbackLocale)||fi(r.fallbackLocale)||r.fallbackLocale===!1?r.fallbackLocale:a.value),u=tt(OC(a.value,r)),c=tt(fi(r.datetimeFormats)?r.datetimeFormats:{[a.value]:{}}),d=tt(fi(r.numberFormats)?r.numberFormats:{[a.value]:{}}),f=n?i.missingWarn:ji(r.missingWarn)||Tm(r.missingWarn)?r.missingWarn:!0,m=n?i.fallbackWarn:ji(r.fallbackWarn)||Tm(r.fallbackWarn)?r.fallbackWarn:!0,g=n?i.fallbackRoot:ji(r.fallbackRoot)?r.fallbackRoot:!0,v=!!r.fallbackFormat,b=$n(r.missing)?r.missing:null,x=$n(r.postTranslation)?r.postTranslation:null,S=n?i.warnHtmlMessage:ji(r.warnHtmlMessage)?r.warnHtmlMessage:!0,T=!!r.escapeParameter,_=n?i.modifiers:fi(r.modifiers)?r.modifiers:{},M=r.pluralRules||n&&i.pluralRules;function I(){return[a.value,l.value,u.value,c.value,d.value]}const $=$i({get:()=>s.value?s.value.locale.value:a.value,set:D=>{s.value&&(s.value.locale.value=D),a.value=D}}),L=$i({get:()=>s.value?s.value.fallbackLocale.value:l.value,set:D=>{s.value&&(s.value.fallbackLocale.value=D),l.value=D}}),B=$i(()=>s.value?s.value.messages.value:u.value),z=$i(()=>c.value),W=$i(()=>d.value);function J(){return s.value?s.value.getPostTranslationHandler():x}function K(D){s.value&&s.value.setPostTranslationHandler(D)}function Q(){return s.value?s.value.getMissingHandler():b}function y(D){s.value&&s.value.setMissingHandler(D)}function A(D){return I(),D()}function N(...D){return s.value?A(()=>Reflect.apply(s.value.t,null,[...D])):A(()=>"")}function j(...D){return s.value?Reflect.apply(s.value.rt,null,[...D]):""}function oe(...D){return s.value?A(()=>Reflect.apply(s.value.d,null,[...D])):A(()=>"")}function q(...D){return s.value?A(()=>Reflect.apply(s.value.n,null,[...D])):A(()=>"")}function de(D){return s.value?s.value.tm(D):{}}function re(D,ne){return s.value?s.value.te(D,ne):!1}function me(D){return s.value?s.value.getLocaleMessage(D):{}}function ve(D,ne){s.value&&(s.value.setLocaleMessage(D,ne),u.value[D]=ne)}function _e(D,ne){s.value&&s.value.mergeLocaleMessage(D,ne)}function Se(D){return s.value?s.value.getDateTimeFormat(D):{}}function Oe(D,ne){s.value&&(s.value.setDateTimeFormat(D,ne),c.value[D]=ne)}function Me(D,ne){s.value&&s.value.mergeDateTimeFormat(D,ne)}function we(D){return s.value?s.value.getNumberFormat(D):{}}function Ie(D,ne){s.value&&(s.value.setNumberFormat(D,ne),d.value[D]=ne)}function Ae(D,ne){s.value&&s.value.mergeNumberFormat(D,ne)}const H={get id(){return s.value?s.value.id:-1},locale:$,fallbackLocale:L,messages:B,datetimeFormats:z,numberFormats:W,get inheritLocale(){return s.value?s.value.inheritLocale:o},set inheritLocale(D){s.value&&(s.value.inheritLocale=D)},get availableLocales(){return s.value?s.value.availableLocales:Object.keys(u.value)},get modifiers(){return s.value?s.value.modifiers:_},get pluralRules(){return s.value?s.value.pluralRules:M},get isGlobal(){return s.value?s.value.isGlobal:!1},get missingWarn(){return s.value?s.value.missingWarn:f},set missingWarn(D){s.value&&(s.value.missingWarn=D)},get fallbackWarn(){return s.value?s.value.fallbackWarn:m},set fallbackWarn(D){s.value&&(s.value.missingWarn=D)},get fallbackRoot(){return s.value?s.value.fallbackRoot:g},set fallbackRoot(D){s.value&&(s.value.fallbackRoot=D)},get fallbackFormat(){return s.value?s.value.fallbackFormat:v},set fallbackFormat(D){s.value&&(s.value.fallbackFormat=D)},get warnHtmlMessage(){return s.value?s.value.warnHtmlMessage:S},set warnHtmlMessage(D){s.value&&(s.value.warnHtmlMessage=D)},get escapeParameter(){return s.value?s.value.escapeParameter:T},set escapeParameter(D){s.value&&(s.value.escapeParameter=D)},t:N,getPostTranslationHandler:J,setPostTranslationHandler:K,getMissingHandler:Q,setMissingHandler:y,rt:j,d:oe,n:q,tm:de,te:re,getLocaleMessage:me,setLocaleMessage:ve,mergeLocaleMessage:_e,getDateTimeFormat:Se,setDateTimeFormat:Oe,mergeDateTimeFormat:Me,getNumberFormat:we,setNumberFormat:Ie,mergeNumberFormat:Ae};function V(D){D.locale.value=a.value,D.fallbackLocale.value=l.value,Object.keys(u.value).forEach(ne=>{D.mergeLocaleMessage(ne,u.value[ne])}),Object.keys(c.value).forEach(ne=>{D.mergeDateTimeFormat(ne,c.value[ne])}),Object.keys(d.value).forEach(ne=>{D.mergeNumberFormat(ne,d.value[ne])}),D.escapeParameter=T,D.fallbackFormat=v,D.fallbackRoot=g,D.fallbackWarn=m,D.missingWarn=f,D.warnHtmlMessage=S}return fC(()=>{if(e.proxy==null||e.proxy.$i18n==null)throw ps(qn.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const D=s.value=e.proxy.$i18n.__composer;t==="global"?(a.value=D.locale.value,l.value=D.fallbackLocale.value,u.value=D.messages.value,c.value=D.datetimeFormats.value,d.value=D.numberFormats.value):n&&V(D)}),H}const wJe=["locale","fallbackLocale","availableLocales"],_Je=["t","rt","d","n","tm"];function xJe(e,t){const i=Object.create(null);wJe.forEach(r=>{const n=Object.getOwnPropertyDescriptor(t,r);if(!n)throw ps(qn.UNEXPECTED_ERROR);const s=er(n.value)?{get(){return n.value.value},set(o){n.value.value=o}}:{get(){return n.get&&n.get()}};Object.defineProperty(i,r,s)}),e.config.globalProperties.$i18n=i,_Je.forEach(r=>{const n=Object.getOwnPropertyDescriptor(t,r);if(!n||!n.value)throw ps(qn.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,`$${r}`,n)})}zWe(YWe);GWe(MWe);qWe(mhe);iJe();if(__INTLIFY_PROD_DEVTOOLS__){const e=Lx();e.__INTLIFY__=!0,LWe(e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const SJe={en:{"lang-code":"en","lang-dir":"ltr","lang-en":"English","lang-fr":"anglais","lang-native":"English","ramp.about.open":"Open About RAMP","ramp.about":"About RAMP","keyboardInstructions.title":"Keyboard Instructions","keyboardInstructions.open":"Open keyboard instructions","keyboardInstructions.app":"Use 'Tab' to navigate between sections of the application.","keyboardInstructions.lists":"Use the arrow keys to move between items in lists. With a list item selected you can press 'Space' or 'Enter' to click the item. You can also navigate within the list item using 'Tab'.","keyboardInstructions.map":"When the map is selected, use the arrow keys to move around and 'Enter' to select a point.","keyboardInstructions.OK":"OK","map.toggleScaleUnits":"Toggle between imperial and metric map scale","map.coordinates.east":"E","map.coordinates.west":"W","map.coordinates.north":"N","map.coordinates.south":"S","map.changeLanguage":"Change Language","map.language.short":"EN-CA","map.language.en":"English","map.language.fr":"Français","map.language.curr":"current","map.export":"export map","notifications.open":"Open Notifications Panel","notifications.title":"Notifications","notifications.empty":"No new notifications.","notifications.controls.dismiss":"Dismiss","notifications.controls.expand":"Expand","notifications.controls.collapse":"Collapse","notifications.controls.clearAll":"Clear All","panels.access":"Press enter or space to access the panel","panels.controls.close":"Close","panels.controls.pin":"Pin","panels.controls.unpin":"Unpin","panels.controls.back":"Back","panels.controls.optionsMenu":"More","panels.controls.minimize":"Minimize","panels.controls.expand":"Expand","panels.controls.collapse":"Collapse","panels.controls.moveRight":"Move Right","panels.controls.moveLeft":"Move Left","panels.alert.open":"{name} panel opened","panels.alert.close":"{name} panel closed","panels.alert.minimize":"{name} panel minimized","layer.error":"{id} failed to load","layer.longload":"{id} is taking longer than expected to load","layer.longdraw":"{id} is taking longer than expected to draw","layer.mismatch":"{name} cannot be displayed in the current projection","layer.filtersdisabled":"Filters have been disabled for {name}","layer.filterwarning":"You are attempting to use a merge grid that contains unmodifiable layers. Filtering will be partially disabled"},fr:{"lang-code":"fr","lang-dir":"ltr","lang-en":"French","lang-fr":"français","lang-native":"Français","ramp.about.open":"Ouvrir À propos de PCAR","ramp.about":"À propos de PCAR","keyboardInstructions.title":"Instructions clavier","keyboardInstructions.open":"Instructions clavier ouvert","keyboardInstructions.app":"Utilisez la touche Tab pour vous déplacer entre les sections de l'application.","keyboardInstructions.lists":"Lorsqu'un élément de la liste est sélectionné, vous pouvez appuyer sur « Espace » ou « Entrée » pour cliquer sur l'élément. Vous pouvez également vous déplacer au sein de l'élément de la liste au moyen de la touche « Tab ».","keyboardInstructions.map":"Lorsque la carte est sélectionnée, utilisez le pavé curseur pour vous déplacer et appuyez sur « Entrée »  pour sélectionner un point.","keyboardInstructions.OK":"OK","map.toggleScaleUnits":"Basculer entre les échelles métriques et impériales pour la carte","map.coordinates.east":"E","map.coordinates.west":"O","map.coordinates.north":"N","map.coordinates.south":"S","map.changeLanguage":"Changer de langue","map.language.short":"FR-CA","map.language.en":"English","map.language.fr":"Français","map.language.curr":"actuel","map.export":"exporter la carte","notifications.open":"Ouvrir la fenêtre des notifications","notifications.title":"Notifications","notifications.empty":"Aucune nouvelle notification.","notifications.controls.dismiss":"Rejeter","notifications.controls.expand":"Développer","notifications.controls.collapse":"Réduire","notifications.controls.clearAll":"Effacer tout","panels.access":"Appuyez sur Entrée ou Espace pour accéder au panneau","panels.controls.close":"Fermer","panels.controls.pin":"Épingler","panels.controls.unpin":"Désépingler","panels.controls.back":"Retour","panels.controls.optionsMenu":"Plus","panels.controls.minimize":"Réduire","panels.controls.expand":"Développer","panels.controls.collapse":"Réduire","panels.controls.moveRight":"Aller à droite","panels.controls.moveLeft":"Aller à gauche","panels.alert.open":"Fenêtre {name} ouverte","panels.alert.close":"Fenêtre {name} fermée","panels.alert.minimize":"Fenêtre {name} réduite","layer.error":"Échec du chargement de {id}","layer.longload":"Le chargement de {id} met plus de temps que prévu","layer.longdraw":"{id} prend plus de temps que prévu à extraire","layer.mismatch":"{name} ne peut pas être affiché dans la projection actuelle","layer.filtersdisabled":"Les filtres ont été désactivés par {name}","layer.filterwarning":"Vous tentez d'utiliser une grille de fusion contenant des calques non modifiables. Le filtrage sera partiellement désactivé"}},UJ="en",EJe={en:{number:{style:"decimal",useGrouping:!1,maximumFractionDigits:20}},fr:{number:{style:"decimal",useGrouping:!1,maximumFractionDigits:20}}};function MJe(){return dJe({legacy:!1,locale:document.documentElement.getAttribute("lang")||UJ,fallbackLocale:UJ,globalInjection:!0,messages:SJe,numberFormats:EJe})}var khe={exports:{}};/*!
* screenfull
* v5.0.2 - 2020-02-13
* (c) Sindre Sorhus; MIT License
*/(function(e){(function(){var t=typeof window<"u"&&typeof window.document<"u"?window.document:{},i=e.exports,r=function(){for(var o,a=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],l=0,u=a.length,c={};l<u;l++)if(o=a[l],o&&o[1]in t){for(l=0;l<o.length;l++)c[a[0][l]]=o[l];return c}return!1}(),n={change:r.fullscreenchange,error:r.fullscreenerror},s={request:function(o){return new Promise(function(a,l){var u=function(){this.off("change",u),a()}.bind(this);this.on("change",u),o=o||t.documentElement;var c=o[r.requestFullscreen]();c instanceof Promise&&c.then(u).catch(l)}.bind(this))},exit:function(){return new Promise(function(o,a){if(!this.isFullscreen){o();return}var l=function(){this.off("change",l),o()}.bind(this);this.on("change",l);var u=t[r.exitFullscreen]();u instanceof Promise&&u.then(l).catch(a)}.bind(this))},toggle:function(o){return this.isFullscreen?this.exit():this.request(o)},onchange:function(o){this.on("change",o)},onerror:function(o){this.on("error",o)},on:function(o,a){var l=n[o];l&&t.addEventListener(l,a,!1)},off:function(o,a){var l=n[o];l&&t.removeEventListener(l,a,!1)},raw:r};if(!r){i?e.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};return}Object.defineProperties(s,{isFullscreen:{get:function(){return!!t[r.fullscreenElement]}},element:{enumerable:!0,get:function(){return t[r.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!t[r.fullscreenEnabled]}}}),i?e.exports=s:window.screenfull=s})()})(khe);var IJe=khe.exports;const kc=Nw(IJe);var $5={exports:{}};$5.exports;(function(e,t){var i=200,r="__lodash_hash_undefined__",n=9007199254740991,s="[object Arguments]",o="[object Array]",a="[object Boolean]",l="[object Date]",u="[object Error]",c="[object Function]",d="[object GeneratorFunction]",f="[object Map]",m="[object Number]",g="[object Object]",v="[object Promise]",b="[object RegExp]",x="[object Set]",S="[object String]",T="[object Symbol]",_="[object WeakMap]",M="[object ArrayBuffer]",I="[object DataView]",$="[object Float32Array]",L="[object Float64Array]",B="[object Int8Array]",z="[object Int16Array]",W="[object Int32Array]",J="[object Uint8Array]",K="[object Uint8ClampedArray]",Q="[object Uint16Array]",y="[object Uint32Array]",A=/[\\^$.*+?()[\]{}|]/g,N=/\w*$/,j=/^\[object .+?Constructor\]$/,oe=/^(?:0|[1-9]\d*)$/,q={};q[s]=q[o]=q[M]=q[I]=q[a]=q[l]=q[$]=q[L]=q[B]=q[z]=q[W]=q[f]=q[m]=q[g]=q[b]=q[x]=q[S]=q[T]=q[J]=q[K]=q[Q]=q[y]=!0,q[u]=q[c]=q[_]=!1;var de=typeof Bs=="object"&&Bs&&Bs.Object===Object&&Bs,re=typeof self=="object"&&self&&self.Object===Object&&self,me=de||re||Function("return this")(),ve=t&&!t.nodeType&&t,_e=ve&&!0&&e&&!e.nodeType&&e,Se=_e&&_e.exports===ve;function Oe(Te,qe){return Te.set(qe[0],qe[1]),Te}function Me(Te,qe){return Te.add(qe),Te}function we(Te,qe){for(var rt=-1,Ut=Te?Te.length:0;++rt<Ut&&qe(Te[rt],rt,Te)!==!1;);return Te}function Ie(Te,qe){for(var rt=-1,Ut=qe.length,an=Te.length;++rt<Ut;)Te[an+rt]=qe[rt];return Te}function Ae(Te,qe,rt,Ut){var an=-1,Jn=Te?Te.length:0;for(Ut&&Jn&&(rt=Te[++an]);++an<Jn;)rt=qe(rt,Te[an],an,Te);return rt}function H(Te,qe){for(var rt=-1,Ut=Array(Te);++rt<Te;)Ut[rt]=qe(rt);return Ut}function V(Te,qe){return Te?.[qe]}function D(Te){var qe=!1;if(Te!=null&&typeof Te.toString!="function")try{qe=!!(Te+"")}catch{}return qe}function ne(Te){var qe=-1,rt=Array(Te.size);return Te.forEach(function(Ut,an){rt[++qe]=[an,Ut]}),rt}function ye(Te,qe){return function(rt){return Te(qe(rt))}}function ae(Te){var qe=-1,rt=Array(Te.size);return Te.forEach(function(Ut){rt[++qe]=Ut}),rt}var U=Array.prototype,le=Function.prototype,ie=Object.prototype,k=me["__core-js_shared__"],O=function(){var Te=/[^.]+$/.exec(k&&k.keys&&k.keys.IE_PROTO||"");return Te?"Symbol(src)_1."+Te:""}(),C=le.toString,G=ie.hasOwnProperty,Z=ie.toString,F=RegExp("^"+C.call(G).replace(A,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=Se?me.Buffer:void 0,ge=me.Symbol,xe=me.Uint8Array,fe=ye(Object.getPrototypeOf,Object),ze=Object.create,He=ie.propertyIsEnumerable,Xe=U.splice,Ve=Object.getOwnPropertySymbols,be=te?te.isBuffer:void 0,ke=ye(Object.keys,Object),Ge=xu(me,"DataView"),ut=xu(me,"Map"),pt=xu(me,"Promise"),gt=xu(me,"Set"),Rt=xu(me,"WeakMap"),dt=xu(Object,"create"),qt=Ic(Ge),zt=Ic(ut),xi=Ic(pt),Or=Ic(gt),gs=Ic(Rt),Na=ge?ge.prototype:void 0,Fa=Na?Na.valueOf:void 0;function Da(Te){var qe=-1,rt=Te?Te.length:0;for(this.clear();++qe<rt;){var Ut=Te[qe];this.set(Ut[0],Ut[1])}}function Cl(){this.__data__=dt?dt(null):{}}function _p(Te){return this.has(Te)&&delete this.__data__[Te]}function Be(Te){var qe=this.__data__;if(dt){var rt=qe[Te];return rt===r?void 0:rt}return G.call(qe,Te)?qe[Te]:void 0}function Gi(Te){var qe=this.__data__;return dt?qe[Te]!==void 0:G.call(qe,Te)}function Jo(Te,qe){var rt=this.__data__;return rt[Te]=dt&&qe===void 0?r:qe,this}Da.prototype.clear=Cl,Da.prototype.delete=_p,Da.prototype.get=Be,Da.prototype.has=Gi,Da.prototype.set=Jo;function ki(Te){var qe=-1,rt=Te?Te.length:0;for(this.clear();++qe<rt;){var Ut=Te[qe];this.set(Ut[0],Ut[1])}}function vs(){this.__data__=[]}function yt(Te){var qe=this.__data__,rt=Ec(qe,Te);if(rt<0)return!1;var Ut=qe.length-1;return rt==Ut?qe.pop():Xe.call(qe,rt,1),!0}function Mo(Te){var qe=this.__data__,rt=Ec(qe,Te);return rt<0?void 0:qe[rt][1]}function yr(Te){return Ec(this.__data__,Te)>-1}function Sc(Te,qe){var rt=this.__data__,Ut=Ec(rt,Te);return Ut<0?rt.push([Te,qe]):rt[Ut][1]=qe,this}ki.prototype.clear=vs,ki.prototype.delete=yt,ki.prototype.get=Mo,ki.prototype.has=yr,ki.prototype.set=Sc;function _u(Te){var qe=-1,rt=Te?Te.length:0;for(this.clear();++qe<rt;){var Ut=Te[qe];this.set(Ut[0],Ut[1])}}function Rs(){this.__data__={hash:new Da,map:new(ut||ki),string:new Da}}function lt(Te){return o1(this,Te).delete(Te)}function t1(Te){return o1(this,Te).get(Te)}function ii(Te){return o1(this,Te).has(Te)}function Gw(Te,qe){return o1(this,Te).set(Te,qe),this}_u.prototype.clear=Rs,_u.prototype.delete=lt,_u.prototype.get=t1,_u.prototype.has=ii,_u.prototype.set=Gw;function bt(Te){this.__data__=new ki(Te)}function Sn(){this.__data__=new ki}function Zo(Te){return this.__data__.delete(Te)}function Li(Te){return this.__data__.get(Te)}function Gh(Te){return this.__data__.has(Te)}function gr(Te,qe){var rt=this.__data__;if(rt instanceof ki){var Ut=rt.__data__;if(!ut||Ut.length<i-1)return Ut.push([Te,qe]),this;rt=this.__data__=new _u(Ut)}return rt.set(Te,qe),this}bt.prototype.clear=Sn,bt.prototype.delete=Zo,bt.prototype.get=Li,bt.prototype.has=Gh,bt.prototype.set=gr;function Ni(Te,qe){var rt=a1(Te)||sE(Te)?H(Te.length,String):[],Ut=rt.length,an=!!Ut;for(var Jn in Te)(qe||G.call(Te,Jn))&&!(an&&(Jn=="length"||JC(Jn,Ut)))&&rt.push(Jn);return rt}function i1(Te,qe,rt){var Ut=Te[qe];(!(G.call(Te,qe)&&qw(Ut,rt))||rt===void 0&&!(qe in Te))&&(Te[qe]=rt)}function Ec(Te,qe){for(var rt=Te.length;rt--;)if(qw(Te[rt][0],qe))return rt;return-1}function Ym(Te,qe){return Te&&kt(qe,ey(qe),Te)}function Mc(Te,qe,rt,Ut,an,Jn,Yo){var Ws;if(Ut&&(Ws=Jn?Ut(Te,an,Jn,Yo):Ut(Te)),Ws!==void 0)return Ws;if(!c1(Te))return Te;var aE=a1(Te);if(aE){if(Ws=HC(Te),!qe)return $l(Te,Ws)}else{var Ua=Qt(Te),lE=Ua==c||Ua==d;if(l1(Te))return Sp(Te,qe);if(Ua==g||Ua==s||lE&&!Jn){if(D(Te))return Jn?Te:{};if(Ws=WC(lE?{}:Te),!qe)return ja(Te,Ym(Ws,Te))}else{if(!q[Ua])return Jn?Te:{};Ws=eE(Te,Ua,Mc,qe)}}Yo||(Yo=new bt);var uE=Yo.get(Te);if(uE)return uE;if(Yo.set(Te,Ws),!aE)var cE=rt?Km(Te):ey(Te);return we(cE||Te,function(Zn,Tc){cE&&(Tc=Zn,Zn=Te[Tc]),i1(Ws,Tc,Mc(Zn,qe,rt,Ut,Tc,Te,Yo))}),Ws}function r1(Te){return c1(Te)?ze(Te):{}}function n1(Te,qe,rt){var Ut=qe(Te);return a1(Te)?Ut:Ie(Ut,rt(Te))}function xp(Te){return Z.call(Te)}function ks(Te){if(!c1(Te)||iE(Te))return!1;var qe=Hw(Te)||D(Te)?F:j;return qe.test(Ic(Te))}function s1(Te){if(!rE(Te))return ke(Te);var qe=[];for(var rt in Object(Te))G.call(Te,rt)&&rt!="constructor"&&qe.push(rt);return qe}function Sp(Te,qe){if(qe)return Te.slice();var rt=new Te.constructor(Te.length);return Te.copy(rt),rt}function $e(Te){var qe=new Te.constructor(Te.byteLength);return new xe(qe).set(new xe(Te)),qe}function Qe(Te,qe){var rt=qe?$e(Te.buffer):Te.buffer;return new Te.constructor(rt,Te.byteOffset,Te.byteLength)}function ot(Te,qe,rt){var Ut=qe?rt(ne(Te),!0):ne(Te);return Ae(Ut,Oe,new Te.constructor)}function hi(Te){var qe=new Te.constructor(Te.source,N.exec(Te));return qe.lastIndex=Te.lastIndex,qe}function En(Te,qe,rt){var Ut=qe?rt(ae(Te),!0):ae(Te);return Ae(Ut,Me,new Te.constructor)}function pr(Te){return Fa?Object(Fa.call(Te)):{}}function Rr(Te,qe){var rt=qe?$e(Te.buffer):Te.buffer;return new Te.constructor(rt,Te.byteOffset,Te.length)}function $l(Te,qe){var rt=-1,Ut=Te.length;for(qe||(qe=Array(Ut));++rt<Ut;)qe[rt]=Te[rt];return qe}function kt(Te,qe,rt,Ut){rt||(rt={});for(var an=-1,Jn=qe.length;++an<Jn;){var Yo=qe[an],Ws=Ut?Ut(rt[Yo],Te[Yo],Yo,rt,Te):void 0;i1(rt,Yo,Ws===void 0?Te[Yo]:Ws)}return rt}function ja(Te,qe){return kt(Te,Qm(Te),qe)}function Km(Te){return n1(Te,ey,Qm)}function o1(Te,qe){var rt=Te.__data__;return tE(qe)?rt[typeof qe=="string"?"string":"hash"]:rt.map}function xu(Te,qe){var rt=V(Te,qe);return ks(rt)?rt:void 0}var Qm=Ve?ye(Ve,Object):YC,Qt=xp;(Ge&&Qt(new Ge(new ArrayBuffer(1)))!=I||ut&&Qt(new ut)!=f||pt&&Qt(pt.resolve())!=v||gt&&Qt(new gt)!=x||Rt&&Qt(new Rt)!=_)&&(Qt=function(Te){var qe=Z.call(Te),rt=qe==g?Te.constructor:void 0,Ut=rt?Ic(rt):void 0;if(Ut)switch(Ut){case qt:return I;case zt:return f;case xi:return v;case Or:return x;case gs:return _}return qe});function HC(Te){var qe=Te.length,rt=Te.constructor(qe);return qe&&typeof Te[0]=="string"&&G.call(Te,"index")&&(rt.index=Te.index,rt.input=Te.input),rt}function WC(Te){return typeof Te.constructor=="function"&&!rE(Te)?r1(fe(Te)):{}}function eE(Te,qe,rt,Ut){var an=Te.constructor;switch(qe){case M:return $e(Te);case a:case l:return new an(+Te);case I:return Qe(Te,Ut);case $:case L:case B:case z:case W:case J:case K:case Q:case y:return Rr(Te,Ut);case f:return ot(Te,Ut,rt);case m:case S:return new an(Te);case b:return hi(Te);case x:return En(Te,Ut,rt);case T:return pr(Te)}}function JC(Te,qe){return qe=qe??n,!!qe&&(typeof Te=="number"||oe.test(Te))&&Te>-1&&Te%1==0&&Te<qe}function tE(Te){var qe=typeof Te;return qe=="string"||qe=="number"||qe=="symbol"||qe=="boolean"?Te!=="__proto__":Te===null}function iE(Te){return!!O&&O in Te}function rE(Te){var qe=Te&&Te.constructor,rt=typeof qe=="function"&&qe.prototype||ie;return Te===rt}function Ic(Te){if(Te!=null){try{return C.call(Te)}catch{}try{return Te+""}catch{}}return""}function nE(Te){return Mc(Te,!0,!0)}function qw(Te,qe){return Te===qe||Te!==Te&&qe!==qe}function sE(Te){return oE(Te)&&G.call(Te,"callee")&&(!He.call(Te,"callee")||Z.call(Te)==s)}var a1=Array.isArray;function Xm(Te){return Te!=null&&u1(Te.length)&&!Hw(Te)}function oE(Te){return ZC(Te)&&Xm(Te)}var l1=be||KC;function Hw(Te){var qe=c1(Te)?Z.call(Te):"";return qe==c||qe==d}function u1(Te){return typeof Te=="number"&&Te>-1&&Te%1==0&&Te<=n}function c1(Te){var qe=typeof Te;return!!Te&&(qe=="object"||qe=="function")}function ZC(Te){return!!Te&&typeof Te=="object"}function ey(Te){return Xm(Te)?Ni(Te):s1(Te)}function YC(){return[]}function KC(){return!1}e.exports=nE})($5,$5.exports);var TJe=$5.exports;const VJ=Nw(TJe);const O5=xn("maptip",()=>{const e=tt(void 0),t=tt(void 0),i=tt("");function r(o){e.value=o}function n(o){t.value=o}function s(o){i.value=o}return{maptipInstance:e,maptipPoint:t,content:i,setMaptipInstance:r,setMaptipPoint:n,setMaptipContent:s}}),AJe=Vi({__name:"esri-map",setup(e){const t=O5(),i=hs("iApi"),r=$i(()=>t.maptipPoint),n=$i(()=>t.maptipInstance),s=$i(()=>t.content),o=Hn([]);o.push(Gn(r,()=>{if(r.value){let l,u;const c=i.geo.map.getPixelWidth()/2,d=0,f=i.geo.map.mapPointToScreenPoint(r.value);l=f.screenX-c,u=d-f.screenY,n.value.setProps({offset:[l,u]}),s.value&&s.value!==""&&n.value.show()}else n.value.hide()})),o.push(Gn(s,l=>{l&&l!==""&&r?(n.value.setContent(l),n.value.show()):n.value.hide()})),zh(()=>{o.forEach(l=>l())});const a=()=>{i.geo.map.setMouseFocus()};return(l,u)=>{const c=mr("tippy");return sr((ht(),$t("div",{name:"esriMap",id:"esriMap",class:"h-full overflow-hidden",onMousedown:a,onKeydown:u[0]||(u[0]=V7(z3(()=>{},["prevent"]),["up","down","left","right"]))},null,544)),[[c,{allowHTML:!0,zIndex:150,theme:"ramp4",trigger:"manual",appendTo:"parent",arrow:!1,delay:200,duration:[200,200]}]])}}});var Lhe={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},fj={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},CJe=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],R5={CSS:{},springs:{}};function vh(e,t,i){return Math.min(Math.max(e,t),i)}function Nx(e,t){return e.indexOf(t)>-1}function yR(e,t){return e.apply(null,t)}var Yt={arr:function(e){return Array.isArray(e)},obj:function(e){return Nx(Object.prototype.toString.call(e),"Object")},pth:function(e){return Yt.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||Yt.svg(e)},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},nil:function(e){return Yt.und(e)||e===null},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return Yt.hex(e)||Yt.rgb(e)||Yt.hsl(e)},key:function(e){return!Lhe.hasOwnProperty(e)&&!fj.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function Phe(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(i){return parseFloat(i)}):[]}function Nhe(e,t){var i=Phe(e),r=vh(Yt.und(i[0])?1:i[0],.1,100),n=vh(Yt.und(i[1])?100:i[1],.1,100),s=vh(Yt.und(i[2])?10:i[2],.1,100),o=vh(Yt.und(i[3])?0:i[3],.1,100),a=Math.sqrt(n/r),l=s/(2*Math.sqrt(n*r)),u=l<1?a*Math.sqrt(1-l*l):0,c=1,d=l<1?(l*a+-o)/u:-o+a;function f(g){var v=t?t*g/1e3:g;return l<1?v=Math.exp(-v*l*a)*(c*Math.cos(u*v)+d*Math.sin(u*v)):v=(c+d*v)*Math.exp(-v*a),g===0||g===1?g:1-v}function m(){var g=R5.springs[e];if(g)return g;for(var v=1/6,b=0,x=0;;)if(b+=v,f(b)===1){if(x++,x>=16)break}else x=0;var S=b*v*1e3;return R5.springs[e]=S,S}return t?f:m}function $Je(e){return e===void 0&&(e=10),function(t){return Math.ceil(vh(t,1e-6,1)*e)*(1/e)}}var OJe=function(){var e=11,t=1/(e-1);function i(c,d){return 1-3*d+3*c}function r(c,d){return 3*d-6*c}function n(c){return 3*c}function s(c,d,f){return((i(d,f)*c+r(d,f))*c+n(d))*c}function o(c,d,f){return 3*i(d,f)*c*c+2*r(d,f)*c+n(d)}function a(c,d,f,m,g){var v,b,x=0;do b=d+(f-d)/2,v=s(b,m,g)-c,v>0?f=b:d=b;while(Math.abs(v)>1e-7&&++x<10);return b}function l(c,d,f,m){for(var g=0;g<4;++g){var v=o(d,f,m);if(v===0)return d;var b=s(d,f,m)-c;d-=b/v}return d}function u(c,d,f,m){if(!(0<=c&&c<=1&&0<=f&&f<=1))return;var g=new Float32Array(e);if(c!==d||f!==m)for(var v=0;v<e;++v)g[v]=s(v*t,c,f);function b(x){for(var S=0,T=1,_=e-1;T!==_&&g[T]<=x;++T)S+=t;--T;var M=(x-g[T])/(g[T+1]-g[T]),I=S+M*t,$=o(I,c,f);return $>=.001?l(x,I,c,f):$===0?I:a(x,S,S+t,c,f)}return function(x){return c===d&&f===m||x===0||x===1?x:s(b(x),d,m)}}return u}(),Fhe=function(){var e={linear:function(){return function(r){return r}}},t={Sine:function(){return function(r){return 1-Math.cos(r*Math.PI/2)}},Circ:function(){return function(r){return 1-Math.sqrt(1-r*r)}},Back:function(){return function(r){return r*r*(3*r-2)}},Bounce:function(){return function(r){for(var n,s=4;r<((n=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((n*3-2)/22-r,2)}},Elastic:function(r,n){r===void 0&&(r=1),n===void 0&&(n=.5);var s=vh(r,1,10),o=vh(n,.1,2);return function(a){return a===0||a===1?a:-s*Math.pow(2,10*(a-1))*Math.sin((a-1-o/(Math.PI*2)*Math.asin(1/s))*(Math.PI*2)/o)}}},i=["Quad","Cubic","Quart","Quint","Expo"];return i.forEach(function(r,n){t[r]=function(){return function(s){return Math.pow(s,n+2)}}}),Object.keys(t).forEach(function(r){var n=t[r];e["easeIn"+r]=n,e["easeOut"+r]=function(s,o){return function(a){return 1-n(s,o)(1-a)}},e["easeInOut"+r]=function(s,o){return function(a){return a<.5?n(s,o)(a*2)/2:1-n(s,o)(a*-2+2)/2}},e["easeOutIn"+r]=function(s,o){return function(a){return a<.5?(1-n(s,o)(1-a*2))/2:(n(s,o)(a*2-1)+1)/2}}}),e}();function mj(e,t){if(Yt.fnc(e))return e;var i=e.split("(")[0],r=Fhe[i],n=Phe(e);switch(i){case"spring":return Nhe(e,t);case"cubicBezier":return yR(OJe,n);case"steps":return yR($Je,n);default:return yR(r,n)}}function Dhe(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function RC(e,t){for(var i=e.length,r=arguments.length>=2?arguments[1]:void 0,n=[],s=0;s<i;s++)if(s in e){var o=e[s];t.call(r,o,s,e)&&n.push(o)}return n}function kC(e){return e.reduce(function(t,i){return t.concat(Yt.arr(i)?kC(i):i)},[])}function BJ(e){return Yt.arr(e)?e:(Yt.str(e)&&(e=Dhe(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function yj(e,t){return e.some(function(i){return i===t})}function gj(e){var t={};for(var i in e)t[i]=e[i];return t}function _N(e,t){var i=gj(e);for(var r in e)i[r]=t.hasOwnProperty(r)?t[r]:e[r];return i}function LC(e,t){var i=gj(e);for(var r in t)i[r]=Yt.und(e[r])?t[r]:e[r];return i}function RJe(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function kJe(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,i=e.replace(t,function(a,l,u,c){return l+l+u+u+c+c}),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i),n=parseInt(r[1],16),s=parseInt(r[2],16),o=parseInt(r[3],16);return"rgba("+n+","+s+","+o+",1)"}function LJe(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),i=parseInt(t[1],10)/360,r=parseInt(t[2],10)/100,n=parseInt(t[3],10)/100,s=t[4]||1;function o(f,m,g){return g<0&&(g+=1),g>1&&(g-=1),g<1/6?f+(m-f)*6*g:g<1/2?m:g<2/3?f+(m-f)*(2/3-g)*6:f}var a,l,u;if(r==0)a=l=u=n;else{var c=n<.5?n*(1+r):n+r-n*r,d=2*n-c;a=o(d,c,i+1/3),l=o(d,c,i),u=o(d,c,i-1/3)}return"rgba("+a*255+","+l*255+","+u*255+","+s+")"}function PJe(e){if(Yt.rgb(e))return RJe(e);if(Yt.hex(e))return kJe(e);if(Yt.hsl(e))return LJe(e)}function Jd(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function NJe(e){if(Nx(e,"translate")||e==="perspective")return"px";if(Nx(e,"rotate")||Nx(e,"skew"))return"deg"}function xN(e,t){return Yt.fnc(e)?e(t.target,t.id,t.total):e}function bh(e,t){return e.getAttribute(t)}function vj(e,t,i){var r=Jd(t);if(yj([i,"deg","rad","turn"],r))return t;var n=R5.CSS[t+i];if(!Yt.und(n))return n;var s=100,o=document.createElement(e.tagName),a=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;a.appendChild(o),o.style.position="absolute",o.style.width=s+i;var l=s/o.offsetWidth;a.removeChild(o);var u=l*parseFloat(t);return R5.CSS[t+i]=u,u}function jhe(e,t,i){if(t in e.style){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),n=e.style[t]||getComputedStyle(e).getPropertyValue(r)||"0";return i?vj(e,n,i):n}}function bj(e,t){if(Yt.dom(e)&&!Yt.inp(e)&&(!Yt.nil(bh(e,t))||Yt.svg(e)&&e[t]))return"attribute";if(Yt.dom(e)&&yj(CJe,t))return"transform";if(Yt.dom(e)&&t!=="transform"&&jhe(e,t))return"css";if(e[t]!=null)return"object"}function Uhe(e){if(Yt.dom(e)){for(var t=e.style.transform||"",i=/(\w+)\(([^)]*)\)/g,r=new Map,n;n=i.exec(t);)r.set(n[1],n[2]);return r}}function FJe(e,t,i,r){var n=Nx(t,"scale")?1:0+NJe(t),s=Uhe(e).get(t)||n;return i&&(i.transforms.list.set(t,s),i.transforms.last=t),r?vj(e,s,r):s}function wj(e,t,i,r){switch(bj(e,t)){case"transform":return FJe(e,t,r,i);case"css":return jhe(e,t,i);case"attribute":return bh(e,t);default:return e[t]||0}}function _j(e,t){var i=/^(\*=|\+=|-=)/.exec(e);if(!i)return e;var r=Jd(e)||0,n=parseFloat(t),s=parseFloat(e.replace(i[0],""));switch(i[0][0]){case"+":return n+s+r;case"-":return n-s+r;case"*":return n*s+r}}function Vhe(e,t){if(Yt.col(e))return PJe(e);if(/\s/g.test(e))return e;var i=Jd(e),r=i?e.substr(0,e.length-i.length):e;return t?r+t:r}function xj(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function DJe(e){return Math.PI*2*bh(e,"r")}function jJe(e){return bh(e,"width")*2+bh(e,"height")*2}function UJe(e){return xj({x:bh(e,"x1"),y:bh(e,"y1")},{x:bh(e,"x2"),y:bh(e,"y2")})}function Bhe(e){for(var t=e.points,i=0,r,n=0;n<t.numberOfItems;n++){var s=t.getItem(n);n>0&&(i+=xj(r,s)),r=s}return i}function VJe(e){var t=e.points;return Bhe(e)+xj(t.getItem(t.numberOfItems-1),t.getItem(0))}function zhe(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return DJe(e);case"rect":return jJe(e);case"line":return UJe(e);case"polyline":return Bhe(e);case"polygon":return VJe(e)}}function BJe(e){var t=zhe(e);return e.setAttribute("stroke-dasharray",t),t}function zJe(e){for(var t=e.parentNode;Yt.svg(t)&&Yt.svg(t.parentNode);)t=t.parentNode;return t}function Ghe(e,t){var i=t||{},r=i.el||zJe(e),n=r.getBoundingClientRect(),s=bh(r,"viewBox"),o=n.width,a=n.height,l=i.viewBox||(s?s.split(" "):[0,0,o,a]);return{el:r,viewBox:l,x:l[0]/1,y:l[1]/1,w:o,h:a,vW:l[2],vH:l[3]}}function GJe(e,t){var i=Yt.str(e)?Dhe(e)[0]:e,r=t||100;return function(n){return{property:n,el:i,svg:Ghe(i),totalLength:zhe(i)*(r/100)}}}function qJe(e,t,i){function r(c){c===void 0&&(c=0);var d=t+c>=1?t+c:0;return e.el.getPointAtLength(d)}var n=Ghe(e.el,e.svg),s=r(),o=r(-1),a=r(1),l=i?1:n.w/n.vW,u=i?1:n.h/n.vH;switch(e.property){case"x":return(s.x-n.x)*l;case"y":return(s.y-n.y)*u;case"angle":return Math.atan2(a.y-o.y,a.x-o.x)*180/Math.PI}}function zJ(e,t){var i=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=Vhe(Yt.pth(e)?e.totalLength:e,t)+"";return{original:r,numbers:r.match(i)?r.match(i).map(Number):[0],strings:Yt.str(e)||t?r.split(i):[]}}function Sj(e){var t=e?kC(Yt.arr(e)?e.map(BJ):BJ(e)):[];return RC(t,function(i,r,n){return n.indexOf(i)===r})}function qhe(e){var t=Sj(e);return t.map(function(i,r){return{target:i,id:r,total:t.length,transforms:{list:Uhe(i)}}})}function HJe(e,t){var i=gj(t);if(/^spring/.test(i.easing)&&(i.duration=Nhe(i.easing)),Yt.arr(e)){var r=e.length,n=r===2&&!Yt.obj(e[0]);n?e={value:e}:Yt.fnc(t.duration)||(i.duration=t.duration/r)}var s=Yt.arr(e)?e:[e];return s.map(function(o,a){var l=Yt.obj(o)&&!Yt.pth(o)?o:{value:o};return Yt.und(l.delay)&&(l.delay=a?0:t.delay),Yt.und(l.endDelay)&&(l.endDelay=a===s.length-1?t.endDelay:0),l}).map(function(o){return LC(o,i)})}function WJe(e){for(var t=RC(kC(e.map(function(s){return Object.keys(s)})),function(s){return Yt.key(s)}).reduce(function(s,o){return s.indexOf(o)<0&&s.push(o),s},[]),i={},r=function(s){var o=t[s];i[o]=e.map(function(a){var l={};for(var u in a)Yt.key(u)?u==o&&(l.value=a[u]):l[u]=a[u];return l})},n=0;n<t.length;n++)r(n);return i}function JJe(e,t){var i=[],r=t.keyframes;r&&(t=LC(WJe(r),t));for(var n in t)Yt.key(n)&&i.push({name:n,tweens:HJe(t[n],e)});return i}function ZJe(e,t){var i={};for(var r in e){var n=xN(e[r],t);Yt.arr(n)&&(n=n.map(function(s){return xN(s,t)}),n.length===1&&(n=n[0])),i[r]=n}return i.duration=parseFloat(i.duration),i.delay=parseFloat(i.delay),i}function YJe(e,t){var i;return e.tweens.map(function(r){var n=ZJe(r,t),s=n.value,o=Yt.arr(s)?s[1]:s,a=Jd(o),l=wj(t.target,e.name,a,t),u=i?i.to.original:l,c=Yt.arr(s)?s[0]:u,d=Jd(c)||Jd(l),f=a||d;return Yt.und(o)&&(o=u),n.from=zJ(c,f),n.to=zJ(_j(o,c),f),n.start=i?i.end:0,n.end=n.start+n.delay+n.duration+n.endDelay,n.easing=mj(n.easing,n.duration),n.isPath=Yt.pth(s),n.isPathTargetInsideSVG=n.isPath&&Yt.svg(t.target),n.isColor=Yt.col(n.from.original),n.isColor&&(n.round=1),i=n,n})}var Hhe={css:function(e,t,i){return e.style[t]=i},attribute:function(e,t,i){return e.setAttribute(t,i)},object:function(e,t,i){return e[t]=i},transform:function(e,t,i,r,n){if(r.list.set(t,i),t===r.last||n){var s="";r.list.forEach(function(o,a){s+=a+"("+o+") "}),e.style.transform=s}}};function Whe(e,t){var i=qhe(e);i.forEach(function(r){for(var n in t){var s=xN(t[n],r),o=r.target,a=Jd(s),l=wj(o,n,a,r),u=a||Jd(l),c=_j(Vhe(s,u),l),d=bj(o,n);Hhe[d](o,n,c,r.transforms,!0)}})}function KJe(e,t){var i=bj(e.target,t.name);if(i){var r=YJe(t,e),n=r[r.length-1];return{type:i,property:t.name,animatable:e,tweens:r,duration:n.end,delay:r[0].delay,endDelay:n.endDelay}}}function QJe(e,t){return RC(kC(e.map(function(i){return t.map(function(r){return KJe(i,r)})})),function(i){return!Yt.und(i)})}function Jhe(e,t){var i=e.length,r=function(s){return s.timelineOffset?s.timelineOffset:0},n={};return n.duration=i?Math.max.apply(Math,e.map(function(s){return r(s)+s.duration})):t.duration,n.delay=i?Math.min.apply(Math,e.map(function(s){return r(s)+s.delay})):t.delay,n.endDelay=i?n.duration-Math.max.apply(Math,e.map(function(s){return r(s)+s.duration-s.endDelay})):t.endDelay,n}var GJ=0;function XJe(e){var t=_N(Lhe,e),i=_N(fj,e),r=JJe(i,e),n=qhe(e.targets),s=QJe(n,r),o=Jhe(s,i),a=GJ;return GJ++,LC(t,{id:a,children:[],animatables:n,animations:s,duration:o.duration,delay:o.delay,endDelay:o.endDelay})}var nc=[],Zhe=function(){var e;function t(){!e&&(!qJ()||!sn.suspendWhenDocumentHidden)&&nc.length>0&&(e=requestAnimationFrame(i))}function i(n){for(var s=nc.length,o=0;o<s;){var a=nc[o];a.paused?(nc.splice(o,1),s--):(a.tick(n),o++)}e=o>0?requestAnimationFrame(i):void 0}function r(){sn.suspendWhenDocumentHidden&&(qJ()?e=cancelAnimationFrame(e):(nc.forEach(function(n){return n._onDocumentVisibility()}),Zhe()))}return typeof document<"u"&&document.addEventListener("visibilitychange",r),t}();function qJ(){return!!document&&document.hidden}function sn(e){e===void 0&&(e={});var t=0,i=0,r=0,n,s=0,o=null;function a(S){var T=window.Promise&&new Promise(function(_){return o=_});return S.finished=T,T}var l=XJe(e);a(l);function u(){var S=l.direction;S!=="alternate"&&(l.direction=S!=="normal"?"normal":"reverse"),l.reversed=!l.reversed,n.forEach(function(T){return T.reversed=l.reversed})}function c(S){return l.reversed?l.duration-S:S}function d(){t=0,i=c(l.currentTime)*(1/sn.speed)}function f(S,T){T&&T.seek(S-T.timelineOffset)}function m(S){if(l.reversePlayback)for(var _=s;_--;)f(S,n[_]);else for(var T=0;T<s;T++)f(S,n[T])}function g(S){for(var T=0,_=l.animations,M=_.length;T<M;){var I=_[T],$=I.animatable,L=I.tweens,B=L.length-1,z=L[B];B&&(z=RC(L,function(Se){return S<Se.end})[0]||z);for(var W=vh(S-z.start-z.delay,0,z.duration)/z.duration,J=isNaN(W)?1:z.easing(W),K=z.to.strings,Q=z.round,y=[],A=z.to.numbers.length,N=void 0,j=0;j<A;j++){var oe=void 0,q=z.to.numbers[j],de=z.from.numbers[j]||0;z.isPath?oe=qJe(z.value,J*q,z.isPathTargetInsideSVG):oe=de+J*(q-de),Q&&(z.isColor&&j>2||(oe=Math.round(oe*Q)/Q)),y.push(oe)}var re=K.length;if(!re)N=y[0];else{N=K[0];for(var me=0;me<re;me++){K[me];var ve=K[me+1],_e=y[me];isNaN(_e)||(ve?N+=_e+ve:N+=_e+" ")}}Hhe[I.type]($.target,I.property,N,$.transforms),I.currentValue=N,T++}}function v(S){l[S]&&!l.passThrough&&l[S](l)}function b(){l.remaining&&l.remaining!==!0&&l.remaining--}function x(S){var T=l.duration,_=l.delay,M=T-l.endDelay,I=c(S);l.progress=vh(I/T*100,0,100),l.reversePlayback=I<l.currentTime,n&&m(I),!l.began&&l.currentTime>0&&(l.began=!0,v("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,v("loopBegin")),I<=_&&l.currentTime!==0&&g(0),(I>=M&&l.currentTime!==T||!T)&&g(T),I>_&&I<M?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,v("changeBegin")),v("change"),g(I)):l.changeBegan&&(l.changeCompleted=!0,l.changeBegan=!1,v("changeComplete")),l.currentTime=vh(I,0,T),l.began&&v("update"),S>=T&&(i=0,b(),l.remaining?(t=r,v("loopComplete"),l.loopBegan=!1,l.direction==="alternate"&&u()):(l.paused=!0,l.completed||(l.completed=!0,v("loopComplete"),v("complete"),!l.passThrough&&"Promise"in window&&(o(),a(l)))))}return l.reset=function(){var S=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed=S==="reverse",l.remaining=l.loop,n=l.children,s=n.length;for(var T=s;T--;)l.children[T].reset();(l.reversed&&l.loop!==!0||S==="alternate"&&l.loop===1)&&l.remaining++,g(l.reversed?l.duration:0)},l._onDocumentVisibility=d,l.set=function(S,T){return Whe(S,T),l},l.tick=function(S){r=S,t||(t=r),x((r+(i-t))*sn.speed)},l.seek=function(S){x(c(S))},l.pause=function(){l.paused=!0,d()},l.play=function(){l.paused&&(l.completed&&l.reset(),l.paused=!1,nc.push(l),d(),Zhe())},l.reverse=function(){u(),l.completed=!l.reversed,d()},l.restart=function(){l.reset(),l.play()},l.remove=function(S){var T=Sj(S);Yhe(T,l)},l.reset(),l.autoplay&&l.play(),l}function HJ(e,t){for(var i=t.length;i--;)yj(e,t[i].animatable.target)&&t.splice(i,1)}function Yhe(e,t){var i=t.animations,r=t.children;HJ(e,i);for(var n=r.length;n--;){var s=r[n],o=s.animations;HJ(e,o),!o.length&&!s.children.length&&r.splice(n,1)}!i.length&&!r.length&&t.pause()}function eZe(e){for(var t=Sj(e),i=nc.length;i--;){var r=nc[i];Yhe(t,r)}}function tZe(e,t){t===void 0&&(t={});var i=t.direction||"normal",r=t.easing?mj(t.easing):null,n=t.grid,s=t.axis,o=t.from||0,a=o==="first",l=o==="center",u=o==="last",c=Yt.arr(e),d=parseFloat(c?e[0]:e),f=c?parseFloat(e[1]):0,m=Jd(c?e[1]:e)||0,g=t.start||0+(c?d:0),v=[],b=0;return function(x,S,T){if(a&&(o=0),l&&(o=(T-1)/2),u&&(o=T-1),!v.length){for(var _=0;_<T;_++){if(!n)v.push(Math.abs(o-_));else{var M=l?(n[0]-1)/2:o%n[0],I=l?(n[1]-1)/2:Math.floor(o/n[0]),$=_%n[0],L=Math.floor(_/n[0]),B=M-$,z=I-L,W=Math.sqrt(B*B+z*z);s==="x"&&(W=-B),s==="y"&&(W=-z),v.push(W)}b=Math.max.apply(Math,v)}r&&(v=v.map(function(K){return r(K/b)*b})),i==="reverse"&&(v=v.map(function(K){return s?K<0?K*-1:-K:Math.abs(b-K)}))}var J=c?(f-d)/b:d;return g+J*(Math.round(v[S]*100)/100)+m}}function iZe(e){e===void 0&&(e={});var t=sn(e);return t.duration=0,t.add=function(i,r){var n=nc.indexOf(t),s=t.children;n>-1&&nc.splice(n,1);function o(f){f.passThrough=!0}for(var a=0;a<s.length;a++)o(s[a]);var l=LC(i,_N(fj,e));l.targets=l.targets||e.targets;var u=t.duration;l.autoplay=!1,l.direction=t.direction,l.timelineOffset=Yt.und(r)?u:_j(r,u),o(t),t.seek(l.timelineOffset);var c=sn(l);o(c),s.push(c);var d=Jhe(s,e);return t.delay=d.delay,t.endDelay=d.endDelay,t.duration=d.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}sn.version="3.2.1";sn.speed=1;sn.suspendWhenDocumentHidden=!0;sn.running=nc;sn.remove=eZe;sn.get=wj;sn.set=Whe;sn.convertPx=vj;sn.path=GJe;sn.setDashoffset=BJe;sn.stagger=tZe;sn.timeline=iZe;sn.easing=mj;sn.penner=Fhe;sn.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};class Khe{resizeObserver;constructor(t){this.resizeObserver="ResizeObserver"in self?new ResizeObserver(function(i){const r={xs:200,sm:576,md:768,lg:960};i.forEach(function(n){const s=n.target.dataset.breakpoints?JSON.parse(n.target.dataset.breakpoints):t??r;Object.keys(s).forEach(function(o){const a=s[o];n.contentRect.width>=a?n.target.classList.add(o):n.target.classList.remove(o)})})}):void 0}observe(t){this.resizeObserver?.observe(t)}}const rZe=["data-cy"],Qhe=Vi({__name:"panel-container",props:{panel:{type:Object,required:!0}},setup(e){const t=e,i=tt(null),r=tt(!1);Eo(()=>{t.panel.teleport&&new Khe({xs:0,sm:461,...t.panel.teleport.breakpoints}).observe(i.value)});const n=(l,u,c)=>{if(r.value)return u();sn({targets:l,opacity:{value:c,duration:400,easing:"cubicBezier(.5, .05, .1, .3)"},complete:u})},s=(l,u)=>{n(l,u,[0,1])},o=l=>{l.classList.contains("screen-spinner")||(r.value=t.panel.isScreenLoaded(t.panel.route.screen),i.value.querySelectorAll("[focus-item").forEach(u=>u.classList.remove("default-focus-style")))},a=(l,u)=>{n(l,u,[0,1])};return(l,u)=>{const c=mr("focus-container");return ht(),$t("div",{class:bn(["shadow-tm bg-white h-full xs:mr-0 sm:mr-12 last:mr-0 pointer-events-auto min-w-0 shrink-0",e.panel.expanded?"flex-grow max-w-full":""]),style:Vm(e.panel.style),"data-cy":e.panel.id,ref_key:"componentEl",ref:i},[gi(B3,{onBeforeLeave:o,onLeave:a,onEnter:s},{default:kn(()=>[sr((ht(),Ur(w7(e.panel.route.screen),yC(e.panel.route.props,{panel:e.panel}),null,16,["panel"])),[[c]])]),_:1})],14,rZe)}}}),N0=xn("panel",()=>{const e=tt(void 0),t=tt(void 0),i=tt(0),r=tt(0),n=tt(!1),s=tt(!0),o=tt({}),a=tt({}),l=tt([]),u=tt([]),c=tt([]),d=$i(()=>r.value);function f(W){return W==="xs"&&c.value.length>0?[c.value.slice().pop()]:c.value}function m(W){const J=[];return W.forEach(K=>{K in a.value&&J.push(a.value[K].getPromise())}),J}function g(W){I(W),_(),t.value=void 0}function v(W){$(W),_()}function b(W,J){L(W,J),_()}function x(W){B(W),_()}function S(W){i.value=W,_()}function T(W){n.value=W}function _(){let W=i.value;const J=[];for(let K=l.value.length-1;K>=0;K--){let Q=l.value[K].width||350;n.value?Q=W:Q+=12,(W>=Q&&!n.value||J.length===0)&&(W-=Q,J.unshift(l.value[K]))}if(e.value&&!J.includes(e.value)&&!n.value){let K;for(let N=0;N<J.length-1&&W<(e.value.width||350);N++)K=J.shift(),W+=K.width||350;W>=(e.value.width||350)?J.unshift(e.value):t.value||(K=J.shift(),J.unshift(e.value));const Q=l.value.indexOf(e.value),y=l.value.indexOf(K),A=l.value.slice();y>-1&&(A.splice(Q,1),A.splice(y,0,e.value)),l.value=A}r.value=W,c.value=J}function M(W){if(o.value={...o.value,[W.id]:W},W.id in a.value)a.value[W.id].resolveMe();else{const J=new ls;J.resolveMe(),a.value={...a.value,[W.id]:J}}}function I(W){W.teleport?u.value=[...u.value,W]:(l.value=[...l.value,W],t.value=W)}function $(W){if(W.teleport){const J=u.value.indexOf(W);J!==-1&&(u.value=[...u.value.slice(0,J),...u.value.slice(J+1)])}else{const J=l.value.indexOf(W);J!==-1&&(l.value=[...l.value.slice(0,J),...l.value.slice(J+1)])}}function L(W,J){const K=l.value.indexOf(W),Q=J==="right"?1:-1;c.value.includes(l.value[K+Q])&&([l.value[K],l.value[K+Q]]=[l.value[K+Q],l.value[K]])}function B(W){o.value[W.id]!==void 0&&delete o.value[W.id],a.value[W.id]!==void 0&&delete a.value[W.id];const J=c.value.indexOf(W);J!==-1&&(c.value=[...c.value.slice(0,J),...c.value.slice(J+1)]),e.value&&e.value.id==W.id&&(e.value=void 0)}function z(W){a.value={...a.value,[W]:new ls}}return{items:o,regPromises:a,orderedItems:l,pinned:e,priority:t,visible:c,stackWidth:i,remWidth:r,mobileView:n,reorderable:s,teleported:u,getRemainingWidth:d,getVisible:f,getRegPromises:m,openPanel:g,closePanel:v,movePanel:b,removePanel:x,setStackWidth:S,setMobileView:T,updateVisible:_,registerPanel:M,addRegPromise:z}}),nZe=Vi({__name:"panel-stack",setup(e){const t=N0(),i=hs("iApi"),r=tt(),n=$i(()=>t.mobileView);Eo(()=>{new ResizeObserver(c=>{const d=!(i?.$vApp.$root?.$refs["app-size"]).classList.contains("sm");n.value!==d&&(t.mobileView=d,i?.event.emit(Zt.RAMP_MOBILEVIEW_CHANGE,d)),t.setStackWidth(c[0].contentRect.width)}).observe(r.value?.$el)});const s=u=>t.getVisible(u),o=(u,c)=>{l(u,c,[[6,0],[0,1]])},a=(u,c)=>{const[d,f]=[u.children[0].getBoundingClientRect(),u.parentElement.getBoundingClientRect()];u.style.width=`${d.width}px`,u.style.height=`${d.height}px`,u.style.left=`${d.left-f.left}px`,u.style.position="absolute",l(u,c,[[0,-6],[1,0]])},l=(u,c,d)=>{sn({targets:u,duration:300,translateY:{value:d[0],easing:"cubicBezier(.5, .05, .1, .3)"},opacity:{value:d[1],duration:250,easing:"cubicBezier(.5, .05, .1, .3)"},complete:c})};return(u,c)=>(ht(),Ur(D7,{onEnter:o,onLeave:a,name:"panel-container",tag:"div",ref_key:"el",ref:r},{default:kn(()=>[(ht(!0),$t(Tr,null,qm(s(si(i).screenSize),d=>(ht(),Ur(Qhe,{key:`${d.id}`,panel:d},null,8,["panel"]))),128))]),_:1},512))}});const wp=(e,t)=>{const i=e.__vccOpts||e;for(const[r,n]of t)i[r]=n;return i},sZe=wp(nZe,[["__scopeId","data-v-c70e1757"]]);var xa="top",mu="bottom",yu="right",Sa="left",Ej="auto",Z3=[xa,mu,yu,Sa],Qb="start",zS="end",oZe="clippingParents",Xhe="viewport",P_="popper",aZe="reference",WJ=Z3.reduce(function(e,t){return e.concat([t+"-"+Qb,t+"-"+zS])},[]),ede=[].concat(Z3,[Ej]).reduce(function(e,t){return e.concat([t,t+"-"+Qb,t+"-"+zS])},[]),lZe="beforeRead",uZe="read",cZe="afterRead",hZe="beforeMain",dZe="main",pZe="afterMain",fZe="beforeWrite",mZe="write",yZe="afterWrite",gZe=[lZe,uZe,cZe,hZe,dZe,pZe,fZe,mZe,yZe];function Fh(e){return e?(e.nodeName||"").toLowerCase():null}function wu(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function F0(e){var t=wu(e).Element;return e instanceof t||e instanceof Element}function cu(e){var t=wu(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Mj(e){if(typeof ShadowRoot>"u")return!1;var t=wu(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function vZe(e){var t=e.state;Object.keys(t.elements).forEach(function(i){var r=t.styles[i]||{},n=t.attributes[i]||{},s=t.elements[i];!cu(s)||!Fh(s)||(Object.assign(s.style,r),Object.keys(n).forEach(function(o){var a=n[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function bZe(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach(function(r){var n=t.elements[r],s=t.attributes[r]||{},o=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:i[r]),a=o.reduce(function(l,u){return l[u]="",l},{});!cu(n)||!Fh(n)||(Object.assign(n.style,a),Object.keys(s).forEach(function(l){n.removeAttribute(l)}))})}}const wZe={name:"applyStyles",enabled:!0,phase:"write",fn:vZe,effect:bZe,requires:["computeStyles"]};function Th(e){return e.split("-")[0]}var l0=Math.max,k5=Math.min,Xb=Math.round;function SN(){var e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function tde(){return!/^((?!chrome|android).)*safari/i.test(SN())}function ew(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!1);var r=e.getBoundingClientRect(),n=1,s=1;t&&cu(e)&&(n=e.offsetWidth>0&&Xb(r.width)/e.offsetWidth||1,s=e.offsetHeight>0&&Xb(r.height)/e.offsetHeight||1);var o=F0(e)?wu(e):window,a=o.visualViewport,l=!tde()&&i,u=(r.left+(l&&a?a.offsetLeft:0))/n,c=(r.top+(l&&a?a.offsetTop:0))/s,d=r.width/n,f=r.height/s;return{width:d,height:f,top:c,right:u+d,bottom:c+f,left:u,x:u,y:c}}function Ij(e){var t=ew(e),i=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:r}}function ide(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&Mj(i)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function lp(e){return wu(e).getComputedStyle(e)}function _Ze(e){return["table","td","th"].indexOf(Fh(e))>=0}function Jm(e){return((F0(e)?e.ownerDocument:e.document)||window.document).documentElement}function PC(e){return Fh(e)==="html"?e:e.assignedSlot||e.parentNode||(Mj(e)?e.host:null)||Jm(e)}function JJ(e){return!cu(e)||lp(e).position==="fixed"?null:e.offsetParent}function xZe(e){var t=/firefox/i.test(SN()),i=/Trident/i.test(SN());if(i&&cu(e)){var r=lp(e);if(r.position==="fixed")return null}var n=PC(e);for(Mj(n)&&(n=n.host);cu(n)&&["html","body"].indexOf(Fh(n))<0;){var s=lp(n);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return n;n=n.parentNode}return null}function Y3(e){for(var t=wu(e),i=JJ(e);i&&_Ze(i)&&lp(i).position==="static";)i=JJ(i);return i&&(Fh(i)==="html"||Fh(i)==="body"&&lp(i).position==="static")?t:i||xZe(e)||t}function Tj(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Fx(e,t,i){return l0(e,k5(t,i))}function SZe(e,t,i){var r=Fx(e,t,i);return r>i?i:r}function rde(){return{top:0,right:0,bottom:0,left:0}}function nde(e){return Object.assign({},rde(),e)}function sde(e,t){return t.reduce(function(i,r){return i[r]=e,i},{})}var EZe=function(t,i){return t=typeof t=="function"?t(Object.assign({},i.rects,{placement:i.placement})):t,nde(typeof t!="number"?t:sde(t,Z3))};function MZe(e){var t,i=e.state,r=e.name,n=e.options,s=i.elements.arrow,o=i.modifiersData.popperOffsets,a=Th(i.placement),l=Tj(a),u=[Sa,yu].indexOf(a)>=0,c=u?"height":"width";if(!(!s||!o)){var d=EZe(n.padding,i),f=Ij(s),m=l==="y"?xa:Sa,g=l==="y"?mu:yu,v=i.rects.reference[c]+i.rects.reference[l]-o[l]-i.rects.popper[c],b=o[l]-i.rects.reference[l],x=Y3(s),S=x?l==="y"?x.clientHeight||0:x.clientWidth||0:0,T=v/2-b/2,_=d[m],M=S-f[c]-d[g],I=S/2-f[c]/2+T,$=Fx(_,I,M),L=l;i.modifiersData[r]=(t={},t[L]=$,t.centerOffset=$-I,t)}}function IZe(e){var t=e.state,i=e.options,r=i.element,n=r===void 0?"[data-popper-arrow]":r;n!=null&&(typeof n=="string"&&(n=t.elements.popper.querySelector(n),!n)||ide(t.elements.popper,n)&&(t.elements.arrow=n))}const TZe={name:"arrow",enabled:!0,phase:"main",fn:MZe,effect:IZe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function tw(e){return e.split("-")[1]}var AZe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function CZe(e){var t=e.x,i=e.y,r=window,n=r.devicePixelRatio||1;return{x:Xb(t*n)/n||0,y:Xb(i*n)/n||0}}function ZJ(e){var t,i=e.popper,r=e.popperRect,n=e.placement,s=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,d=e.isFixed,f=o.x,m=f===void 0?0:f,g=o.y,v=g===void 0?0:g,b=typeof c=="function"?c({x:m,y:v}):{x:m,y:v};m=b.x,v=b.y;var x=o.hasOwnProperty("x"),S=o.hasOwnProperty("y"),T=Sa,_=xa,M=window;if(u){var I=Y3(i),$="clientHeight",L="clientWidth";if(I===wu(i)&&(I=Jm(i),lp(I).position!=="static"&&a==="absolute"&&($="scrollHeight",L="scrollWidth")),I=I,n===xa||(n===Sa||n===yu)&&s===zS){_=mu;var B=d&&I===M&&M.visualViewport?M.visualViewport.height:I[$];v-=B-r.height,v*=l?1:-1}if(n===Sa||(n===xa||n===mu)&&s===zS){T=yu;var z=d&&I===M&&M.visualViewport?M.visualViewport.width:I[L];m-=z-r.width,m*=l?1:-1}}var W=Object.assign({position:a},u&&AZe),J=c===!0?CZe({x:m,y:v}):{x:m,y:v};if(m=J.x,v=J.y,l){var K;return Object.assign({},W,(K={},K[_]=S?"0":"",K[T]=x?"0":"",K.transform=(M.devicePixelRatio||1)<=1?"translate("+m+"px, "+v+"px)":"translate3d("+m+"px, "+v+"px, 0)",K))}return Object.assign({},W,(t={},t[_]=S?v+"px":"",t[T]=x?m+"px":"",t.transform="",t))}function $Ze(e){var t=e.state,i=e.options,r=i.gpuAcceleration,n=r===void 0?!0:r,s=i.adaptive,o=s===void 0?!0:s,a=i.roundOffsets,l=a===void 0?!0:a,u={placement:Th(t.placement),variation:tw(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,ZJ(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,ZJ(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const OZe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:$Ze,data:{}};var UM={passive:!0};function RZe(e){var t=e.state,i=e.instance,r=e.options,n=r.scroll,s=n===void 0?!0:n,o=r.resize,a=o===void 0?!0:o,l=wu(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&u.forEach(function(c){c.addEventListener("scroll",i.update,UM)}),a&&l.addEventListener("resize",i.update,UM),function(){s&&u.forEach(function(c){c.removeEventListener("scroll",i.update,UM)}),a&&l.removeEventListener("resize",i.update,UM)}}const kZe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:RZe,data:{}};var LZe={left:"right",right:"left",bottom:"top",top:"bottom"};function NT(e){return e.replace(/left|right|bottom|top/g,function(t){return LZe[t]})}var PZe={start:"end",end:"start"};function YJ(e){return e.replace(/start|end/g,function(t){return PZe[t]})}function Aj(e){var t=wu(e),i=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:i,scrollTop:r}}function Cj(e){return ew(Jm(e)).left+Aj(e).scrollLeft}function NZe(e,t){var i=wu(e),r=Jm(e),n=i.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(n){s=n.width,o=n.height;var u=tde();(u||!u&&t==="fixed")&&(a=n.offsetLeft,l=n.offsetTop)}return{width:s,height:o,x:a+Cj(e),y:l}}function FZe(e){var t,i=Jm(e),r=Aj(e),n=(t=e.ownerDocument)==null?void 0:t.body,s=l0(i.scrollWidth,i.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),o=l0(i.scrollHeight,i.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),a=-r.scrollLeft+Cj(e),l=-r.scrollTop;return lp(n||i).direction==="rtl"&&(a+=l0(i.clientWidth,n?n.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function $j(e){var t=lp(e),i=t.overflow,r=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+n+r)}function ode(e){return["html","body","#document"].indexOf(Fh(e))>=0?e.ownerDocument.body:cu(e)&&$j(e)?e:ode(PC(e))}function Dx(e,t){var i;t===void 0&&(t=[]);var r=ode(e),n=r===((i=e.ownerDocument)==null?void 0:i.body),s=wu(r),o=n?[s].concat(s.visualViewport||[],$j(r)?r:[]):r,a=t.concat(o);return n?a:a.concat(Dx(PC(o)))}function EN(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function DZe(e,t){var i=ew(e,!1,t==="fixed");return i.top=i.top+e.clientTop,i.left=i.left+e.clientLeft,i.bottom=i.top+e.clientHeight,i.right=i.left+e.clientWidth,i.width=e.clientWidth,i.height=e.clientHeight,i.x=i.left,i.y=i.top,i}function KJ(e,t,i){return t===Xhe?EN(NZe(e,i)):F0(t)?DZe(t,i):EN(FZe(Jm(e)))}function jZe(e){var t=Dx(PC(e)),i=["absolute","fixed"].indexOf(lp(e).position)>=0,r=i&&cu(e)?Y3(e):e;return F0(r)?t.filter(function(n){return F0(n)&&ide(n,r)&&Fh(n)!=="body"}):[]}function UZe(e,t,i,r){var n=t==="clippingParents"?jZe(e):[].concat(t),s=[].concat(n,[i]),o=s[0],a=s.reduce(function(l,u){var c=KJ(e,u,r);return l.top=l0(c.top,l.top),l.right=k5(c.right,l.right),l.bottom=k5(c.bottom,l.bottom),l.left=l0(c.left,l.left),l},KJ(e,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function ade(e){var t=e.reference,i=e.element,r=e.placement,n=r?Th(r):null,s=r?tw(r):null,o=t.x+t.width/2-i.width/2,a=t.y+t.height/2-i.height/2,l;switch(n){case xa:l={x:o,y:t.y-i.height};break;case mu:l={x:o,y:t.y+t.height};break;case yu:l={x:t.x+t.width,y:a};break;case Sa:l={x:t.x-i.width,y:a};break;default:l={x:t.x,y:t.y}}var u=n?Tj(n):null;if(u!=null){var c=u==="y"?"height":"width";switch(s){case Qb:l[u]=l[u]-(t[c]/2-i[c]/2);break;case zS:l[u]=l[u]+(t[c]/2-i[c]/2);break}}return l}function iw(e,t){t===void 0&&(t={});var i=t,r=i.placement,n=r===void 0?e.placement:r,s=i.strategy,o=s===void 0?e.strategy:s,a=i.boundary,l=a===void 0?oZe:a,u=i.rootBoundary,c=u===void 0?Xhe:u,d=i.elementContext,f=d===void 0?P_:d,m=i.altBoundary,g=m===void 0?!1:m,v=i.padding,b=v===void 0?0:v,x=nde(typeof b!="number"?b:sde(b,Z3)),S=f===P_?aZe:P_,T=e.rects.popper,_=e.elements[g?S:f],M=UZe(F0(_)?_:_.contextElement||Jm(e.elements.popper),l,c,o),I=ew(e.elements.reference),$=ade({reference:I,element:T,strategy:"absolute",placement:n}),L=EN(Object.assign({},T,$)),B=f===P_?L:I,z={top:M.top-B.top+x.top,bottom:B.bottom-M.bottom+x.bottom,left:M.left-B.left+x.left,right:B.right-M.right+x.right},W=e.modifiersData.offset;if(f===P_&&W){var J=W[n];Object.keys(z).forEach(function(K){var Q=[yu,mu].indexOf(K)>=0?1:-1,y=[xa,mu].indexOf(K)>=0?"y":"x";z[K]+=J[y]*Q})}return z}function VZe(e,t){t===void 0&&(t={});var i=t,r=i.placement,n=i.boundary,s=i.rootBoundary,o=i.padding,a=i.flipVariations,l=i.allowedAutoPlacements,u=l===void 0?ede:l,c=tw(r),d=c?a?WJ:WJ.filter(function(g){return tw(g)===c}):Z3,f=d.filter(function(g){return u.indexOf(g)>=0});f.length===0&&(f=d);var m=f.reduce(function(g,v){return g[v]=iw(e,{placement:v,boundary:n,rootBoundary:s,padding:o})[Th(v)],g},{});return Object.keys(m).sort(function(g,v){return m[g]-m[v]})}function BZe(e){if(Th(e)===Ej)return[];var t=NT(e);return[YJ(e),t,YJ(t)]}function zZe(e){var t=e.state,i=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var n=i.mainAxis,s=n===void 0?!0:n,o=i.altAxis,a=o===void 0?!0:o,l=i.fallbackPlacements,u=i.padding,c=i.boundary,d=i.rootBoundary,f=i.altBoundary,m=i.flipVariations,g=m===void 0?!0:m,v=i.allowedAutoPlacements,b=t.options.placement,x=Th(b),S=x===b,T=l||(S||!g?[NT(b)]:BZe(b)),_=[b].concat(T).reduce(function(ve,_e){return ve.concat(Th(_e)===Ej?VZe(t,{placement:_e,boundary:c,rootBoundary:d,padding:u,flipVariations:g,allowedAutoPlacements:v}):_e)},[]),M=t.rects.reference,I=t.rects.popper,$=new Map,L=!0,B=_[0],z=0;z<_.length;z++){var W=_[z],J=Th(W),K=tw(W)===Qb,Q=[xa,mu].indexOf(J)>=0,y=Q?"width":"height",A=iw(t,{placement:W,boundary:c,rootBoundary:d,altBoundary:f,padding:u}),N=Q?K?yu:Sa:K?mu:xa;M[y]>I[y]&&(N=NT(N));var j=NT(N),oe=[];if(s&&oe.push(A[J]<=0),a&&oe.push(A[N]<=0,A[j]<=0),oe.every(function(ve){return ve})){B=W,L=!1;break}$.set(W,oe)}if(L)for(var q=g?3:1,de=function(_e){var Se=_.find(function(Oe){var Me=$.get(Oe);if(Me)return Me.slice(0,_e).every(function(we){return we})});if(Se)return B=Se,"break"},re=q;re>0;re--){var me=de(re);if(me==="break")break}t.placement!==B&&(t.modifiersData[r]._skip=!0,t.placement=B,t.reset=!0)}}const GZe={name:"flip",enabled:!0,phase:"main",fn:zZe,requiresIfExists:["offset"],data:{_skip:!1}};function QJ(e,t,i){return i===void 0&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function XJ(e){return[xa,yu,mu,Sa].some(function(t){return e[t]>=0})}function qZe(e){var t=e.state,i=e.name,r=t.rects.reference,n=t.rects.popper,s=t.modifiersData.preventOverflow,o=iw(t,{elementContext:"reference"}),a=iw(t,{altBoundary:!0}),l=QJ(o,r),u=QJ(a,n,s),c=XJ(l),d=XJ(u);t.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}const HZe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:qZe};function WZe(e,t,i){var r=Th(e),n=[Sa,xa].indexOf(r)>=0?-1:1,s=typeof i=="function"?i(Object.assign({},t,{placement:e})):i,o=s[0],a=s[1];return o=o||0,a=(a||0)*n,[Sa,yu].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function JZe(e){var t=e.state,i=e.options,r=e.name,n=i.offset,s=n===void 0?[0,0]:n,o=ede.reduce(function(c,d){return c[d]=WZe(d,t.rects,s),c},{}),a=o[t.placement],l=a.x,u=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[r]=o}const ZZe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:JZe};function YZe(e){var t=e.state,i=e.name;t.modifiersData[i]=ade({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const KZe={name:"popperOffsets",enabled:!0,phase:"read",fn:YZe,data:{}};function QZe(e){return e==="x"?"y":"x"}function XZe(e){var t=e.state,i=e.options,r=e.name,n=i.mainAxis,s=n===void 0?!0:n,o=i.altAxis,a=o===void 0?!1:o,l=i.boundary,u=i.rootBoundary,c=i.altBoundary,d=i.padding,f=i.tether,m=f===void 0?!0:f,g=i.tetherOffset,v=g===void 0?0:g,b=iw(t,{boundary:l,rootBoundary:u,padding:d,altBoundary:c}),x=Th(t.placement),S=tw(t.placement),T=!S,_=Tj(x),M=QZe(_),I=t.modifiersData.popperOffsets,$=t.rects.reference,L=t.rects.popper,B=typeof v=="function"?v(Object.assign({},t.rects,{placement:t.placement})):v,z=typeof B=="number"?{mainAxis:B,altAxis:B}:Object.assign({mainAxis:0,altAxis:0},B),W=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,J={x:0,y:0};if(I){if(s){var K,Q=_==="y"?xa:Sa,y=_==="y"?mu:yu,A=_==="y"?"height":"width",N=I[_],j=N+b[Q],oe=N-b[y],q=m?-L[A]/2:0,de=S===Qb?$[A]:L[A],re=S===Qb?-L[A]:-$[A],me=t.elements.arrow,ve=m&&me?Ij(me):{width:0,height:0},_e=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:rde(),Se=_e[Q],Oe=_e[y],Me=Fx(0,$[A],ve[A]),we=T?$[A]/2-q-Me-Se-z.mainAxis:de-Me-Se-z.mainAxis,Ie=T?-$[A]/2+q+Me+Oe+z.mainAxis:re+Me+Oe+z.mainAxis,Ae=t.elements.arrow&&Y3(t.elements.arrow),H=Ae?_==="y"?Ae.clientTop||0:Ae.clientLeft||0:0,V=(K=W?.[_])!=null?K:0,D=N+we-V-H,ne=N+Ie-V,ye=Fx(m?k5(j,D):j,N,m?l0(oe,ne):oe);I[_]=ye,J[_]=ye-N}if(a){var ae,U=_==="x"?xa:Sa,le=_==="x"?mu:yu,ie=I[M],k=M==="y"?"height":"width",O=ie+b[U],C=ie-b[le],G=[xa,Sa].indexOf(x)!==-1,Z=(ae=W?.[M])!=null?ae:0,F=G?O:ie-$[k]-L[k]-Z+z.altAxis,te=G?ie+$[k]+L[k]-Z-z.altAxis:C,ge=m&&G?SZe(F,ie,te):Fx(m?F:O,ie,m?te:C);I[M]=ge,J[M]=ge-ie}t.modifiersData[r]=J}}const eYe={name:"preventOverflow",enabled:!0,phase:"main",fn:XZe,requiresIfExists:["offset"]};function tYe(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function iYe(e){return e===wu(e)||!cu(e)?Aj(e):tYe(e)}function rYe(e){var t=e.getBoundingClientRect(),i=Xb(t.width)/e.offsetWidth||1,r=Xb(t.height)/e.offsetHeight||1;return i!==1||r!==1}function nYe(e,t,i){i===void 0&&(i=!1);var r=cu(t),n=cu(t)&&rYe(t),s=Jm(t),o=ew(e,n,i),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!i)&&((Fh(t)!=="body"||$j(s))&&(a=iYe(t)),cu(t)?(l=ew(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=Cj(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function sYe(e){var t=new Map,i=new Set,r=[];e.forEach(function(s){t.set(s.name,s)});function n(s){i.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!i.has(a)){var l=t.get(a);l&&n(l)}}),r.push(s)}return e.forEach(function(s){i.has(s.name)||n(s)}),r}function oYe(e){var t=sYe(e);return gZe.reduce(function(i,r){return i.concat(t.filter(function(n){return n.phase===r}))},[])}function aYe(e){var t;return function(){return t||(t=new Promise(function(i){Promise.resolve().then(function(){t=void 0,i(e())})})),t}}function lYe(e){var t=e.reduce(function(i,r){var n=i[r.name];return i[r.name]=n?Object.assign({},n,r,{options:Object.assign({},n.options,r.options),data:Object.assign({},n.data,r.data)}):r,i},{});return Object.keys(t).map(function(i){return t[i]})}var eZ={placement:"bottom",modifiers:[],strategy:"absolute"};function tZ(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function uYe(e){e===void 0&&(e={});var t=e,i=t.defaultModifiers,r=i===void 0?[]:i,n=t.defaultOptions,s=n===void 0?eZ:n;return function(a,l,u){u===void 0&&(u=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},eZ,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,m={state:c,setOptions:function(x){var S=typeof x=="function"?x(c.options):x;v(),c.options=Object.assign({},s,c.options,S),c.scrollParents={reference:F0(a)?Dx(a):a.contextElement?Dx(a.contextElement):[],popper:Dx(l)};var T=oYe(lYe([].concat(r,c.options.modifiers)));return c.orderedModifiers=T.filter(function(_){return _.enabled}),g(),m.update()},forceUpdate:function(){if(!f){var x=c.elements,S=x.reference,T=x.popper;if(tZ(S,T)){c.rects={reference:nYe(S,Y3(T),c.options.strategy==="fixed"),popper:Ij(T)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(z){return c.modifiersData[z.name]=Object.assign({},z.data)});for(var _=0;_<c.orderedModifiers.length;_++){if(c.reset===!0){c.reset=!1,_=-1;continue}var M=c.orderedModifiers[_],I=M.fn,$=M.options,L=$===void 0?{}:$,B=M.name;typeof I=="function"&&(c=I({state:c,options:L,name:B,instance:m})||c)}}}},update:aYe(function(){return new Promise(function(b){m.forceUpdate(),b(c)})}),destroy:function(){v(),f=!0}};if(!tZ(a,l))return m;m.setOptions(u).then(function(b){!f&&u.onFirstUpdate&&u.onFirstUpdate(b)});function g(){c.orderedModifiers.forEach(function(b){var x=b.name,S=b.options,T=S===void 0?{}:S,_=b.effect;if(typeof _=="function"){var M=_({state:c,name:x,instance:m,options:T}),I=function(){};d.push(M||I)}})}function v(){d.forEach(function(b){return b()}),d=[]}return m}}var cYe=[kZe,KZe,OZe,wZe,ZZe,GZe,eYe,TZe,HZe],hYe=uYe({defaultModifiers:cYe});const dYe=["content"],Oj=Vi({__name:"dropdown-menu",props:{position:{type:String,default:"bottom"},popperOptions:{type:Object,default(){return{}}},tooltip:{type:String},tooltipPlacement:{type:String,default:"bottom"},tooltipTheme:{type:String,default:"ramp4"},tooltipAnimation:{type:String,default:"scale"},centered:{type:Boolean,default:!0}},setup(e){const t=e,i=tt(!1),r=tt(null),n=Hn([]),s=tt(),o=tt(),a=tt();return n.push(Gn(i,()=>{r.value.update()})),Eo(()=>{window.addEventListener("click",l=>{(!s.value||!s.value.contains(l.target))&&(i.value=!1)},{capture:!0}),window.addEventListener("blur",()=>{i.value=!1}),window.addEventListener("focusin",l=>{(!s.value||!s.value.contains(l.target))&&(i.value=!1)}),Bh(()=>{const l={name:"overflowScroll",enabled:!0,phase:"main",fn({state:u}){const{bottom:c}=iw(u);c>0?(u.styles.popper.overflowY=c>100?"auto":void 0,u.styles.popper.overflowX="hidden",u.styles.popper.height=`${u.rects.popper.height-c-8}px`):u.styles.popper.height="auto"}};a.value&&o.value&&(r.value=hYe(a.value,o.value,{placement:t.position||"bottom",modifiers:[l,{name:"offset",options:{offset:[0,5]}}],...t.popperOptions}))})}),zh(()=>{n.forEach(l=>l()),window.removeEventListener("click",l=>{(!s.value||!s.value.contains(l.target))&&(i.value=!1)},{capture:!0}),window.removeEventListener("blur",()=>{i.value=!1}),window.removeEventListener("focusin",l=>{(!s.value||!s.value.contains(l.target))&&(i.value=!1)}),i.value=!1}),(l,u)=>{const c=mr("tippy");return ht(),$t("div",{ref_key:"el",ref:s},[sr((ht(),$t("button",{type:"button",class:"text-gray-500 hover:text-black dropdown-button",onClick:u[0]||(u[0]=d=>i.value=!i.value),content:e.tooltip,ref_key:"dropdownTrigger",ref:a},[ac(l.$slots,"header")],8,dYe)),[[c,{placement:e.tooltipPlacement,theme:e.tooltipTheme,animation:e.tooltipAnimation,appendTo:"parent"}]]),sr(at("div",{onClick:u[1]||(u[1]=d=>r.value.update()),class:bn(["rv-dropdown shadow-md border border-gray:200 py-8 bg-white rounded z-10",{"text-center":e.centered}]),ref_key:"dropdown",ref:o},[ac(l.$slots,"default",{close:()=>i.value=!i.value})],2),[[wC,i.value]])],512)}}});const up=xn("notification",()=>{const e=tt([]),t=tt({}),i=$i(()=>e.value.length>=99?99:e.value.length);function r(u){e.value=[u,...e.value]}function n(u){if(e.value.includes(u)){const c=e.value.indexOf(u);u instanceof lde&&l(u),c>-1&&e.value.splice(c,1)}}function s(u){t.value[u.id]=u}function o(u,c){t.value[u]&&(t.value[u].messageList.push(c),e.value.includes(t.value[u])||(e.value=[t.value[u],...e.value]))}function a(){Object.values(t.value).forEach(u=>l(u)),e.value=[]}function l(u){const c=e.value.indexOf(u);c>-1&&e.value.splice(c,1),u.messageList=[]}return{notificationStack:e,groups:t,notificationNumber:i,showNotification:r,removeNotification:n,registerGroup:s,addToGroup:o,clearAll:a}}),pYe={class:"h-full flex flex-col"},fYe={class:"w-full flex mb-6"},mYe=["content"],yYe=at("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current h-24 w-24"},[at("path",{d:"M0 0h24v24H0z",fill:"none"}),at("path",{d:"M5 13h14v-2H5v2zm-2 4h14v-2H3v2zM7 7v2h14V7H7z"})],-1),gYe=[yYe],vYe=Vi({__name:"screen",props:{panel:{type:Object,required:!0}},setup(e){const t=up(),{t:i}=Jr(),r=$i(()=>t.notificationNumber),n=()=>t.clearAll();return(s,o)=>{const a=Cn("panel-screen"),l=mr("tippy");return ht(),Ur(a,{panel:e.panel},{header:kn(()=>[Ih(Hr(si(i)("notifications.title")),1)]),content:kn(()=>[at("div",pYe,[at("div",fYe,[sr((ht(),$t("button",{type:"button",onClick:n,class:bn(["p-4 ml-auto",[r.value?"text-gray-500 hover:text-black":"text-gray-300 cursor-default pointer-events-none"]]),content:si(i)("notifications.controls.clearAll")},gYe,10,mYe)),[[l,{placement:"bottom",theme:"ramp4",animation:"scale"}]])]),gi(ude,{class:"overflow-y-auto"})])]),_:1},8,["panel"])}}});var Ah=(e=>(e.ERROR="error",e.INFO="info",e.WARNING="warning",e))(Ah||{});class bYe extends Wn{notificationStore;constructor(t){super(t),this.$iApi.panel.register({id:"notifications",config:{screens:{"notifications-screen":wn(vYe)},alertName:"notifications.title"}}),this.notificationStore=up(this.$vApp.$pinia)}show(t,i){this.notificationStore.showNotification({type:t,message:i})}addGroup(t,i,r){if(this.getGroup(t))throw new Error("Duplicate notification group id registration: "+t);const n=new lde(this.$iApi,t,i,r);return this.notificationStore.registerGroup(n),n}getGroup(t){return this.notificationStore.groups[t]}}class lde extends Wn{notificationStore=up(this.$vApp.$pinia);id;message;type;messageList=[];constructor(t,i,r,n){super(t),this.id=i,this.type=r,this.message=n}show(t){this.notificationStore.addToGroup(this.id,t)}}const wYe=["content"],_Ye={class:"flex items-center text-left"},xYe={class:"select-text cursor-text"},SYe=at("span",{class:"flex-grow"},null,-1),EYe=at("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},[at("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1),MYe=[EYe],IYe=["content"],TYe=at("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 352 512"},[at("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"})],-1),AYe=[TYe],CYe={key:0,class:"text-left"},$Ye=Vi({__name:"notification-item",props:{notification:{type:Object,required:!0}},setup(e){const t=e,i=up(),{t:r}=Jr(),n=tt(!1),s=Hn({[Ah.WARNING]:"⚠",[Ah.INFO]:"☑",[Ah.ERROR]:"❌"}),o=l=>{i.removeNotification(l)},a=()=>{if(!t.notification.messageList)return!1};return(l,u)=>{const c=mr("tippy");return sr((ht(),$t("li",{class:bn(["flex-col default-focus-style p-4",e.notification.messageList?"cursor-pointer":""]),content:si(r)(n.value?"notifications.controls.collapse":"notifications.controls.expand"),onClick:u[1]||(u[1]=d=>n.value=!n.value)},[at("div",_Ye,[at("span",null,[Ih(Hr(s[e.notification.type])+" ",1),at("span",xYe,Hr(e.notification.message),1)]),SYe,e.notification.messageList?(ht(),$t("div",{key:0,class:bn(["dropdown-icon p-4 pointer-events-none",{"transform -rotate-180":n.value}])},MYe,2)):rn("",!0),sr((ht(),$t("button",{type:"button",onClick:u[0]||(u[0]=z3(d=>o(e.notification),["stop"])),class:"mx-4 p-4",content:si(r)("notifications.controls.dismiss")},AYe,8,IYe)),[[c,{theme:"ramp4",animation:"scale"}]])]),e.notification.messageList&&n.value?(ht(),$t("div",CYe,[(ht(!0),$t(Tr,null,qm(e.notification.messageList,(d,f)=>(ht(),$t("p",{key:e.notification.id+d+f},Hr(d),1))),128))])):rn("",!0)],10,wYe)),[[c,{onShow:a,theme:"ramp4",animation:"scale"}]])}}});const OYe={key:0},RYe={key:0,class:"w-full border-b border-black"},kYe={key:1,class:"flex flex-col items-center h-full"},LYe=at("span",{class:"flex-grow"},null,-1),PYe=at("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"h-48 w-48 fill-current"},[at("path",{d:"M0 0h24v24H0z",fill:"none"}),at("path",{d:"M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"})],-1),NYe=at("span",{style:{"flex-grow":"6"}},null,-1),ude=Vi({__name:"notification-list",setup(e){const t=up(),{t:i}=Jr(),r=$i(()=>t.notificationStack);return(n,s)=>{const o=mr("focus-item"),a=mr("focus-list");return ht(),$t("div",null,[r.value.length>0?sr((ht(),$t("ul",OYe,[(ht(!0),$t(Tr,null,qm(r.value,(l,u)=>(ht(),$t(Tr,{key:l.message+u},[u>0?(ht(),$t("div",RYe)):rn("",!0),sr(gi($Ye,{class:bn([l.type]),notification:l},null,8,["class","notification"]),[[o]])],64))),128))])),[[a]]):(ht(),$t("div",kYe,[LYe,PYe,at("span",null,Hr(si(i)("notifications.empty")),1),NYe]))])}}}),cde=e=>(zm("data-v-dedb03e0"),e=e(),Gm(),e),FYe={class:"flex items-center hover:text-white"},DYe=["aria-label"],jYe=cde(()=>at("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"},null,-1)),UYe=[jYe],VYe={key:0,class:"number rounded-full w-18 text-white"},BYe={class:"notification-dropdown pointer-events-auto bg-white rounded text-center text-black w-500 h-256 flex flex-col p-0"},zYe={class:"pb-8 border-b border-gray-600"},GYe={class:"absolute flex right-3 top-3"},qYe=["content"],HYe=cde(()=>at("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current h-24 w-24"},[at("path",{d:"M0 0h24v24H0z",fill:"none"}),at("path",{d:"M5 13h14v-2H5v2zm-2 4h14v-2H3v2zM7 7v2h14V7H7z"})],-1)),WYe=[HYe],JYe=Vi({__name:"caption-button",setup(e){const t=up(),{t:i}=Jr(),r=$i(()=>t.notificationNumber),n=()=>t.clearAll();return(s,o)=>{const a=Cn("close"),l=mr("tippy");return ht(),Ur(Oj,{position:"top-start",tooltip:si(i)("notifications.title"),tooltipPlacement:"top",class:"pointer-events-auto sm:flex ml-4 mr-8"},{header:kn(()=>[at("div",FYe,[(ht(),$t("svg",{class:"fill-current w-24 h-24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-label":si(i)("notifications.open")},UYe,8,DYe)),r.value&&r.value>0?(ht(),$t("span",VYe,Hr(r.value),1)):rn("",!0)])]),default:kn(u=>[at("div",BYe,[at("div",null,[at("h4",zYe,Hr(si(i)("notifications.title")),1),at("div",GYe,[sr((ht(),$t("button",{type:"button",onClick:n,class:bn(["p-4 mr-6",[r.value?"text-gray-500 hover:text-black":"text-gray-300 cursor-default pointer-events-none"]]),content:si(i)("notifications.controls.clearAll")},WYe,10,qYe)),[[l,{placement:"bottom",theme:"ramp4",animation:"scale",appendTo:"parent"}]]),gi(a,{onClick:u.close},null,8,["onClick"])])]),gi(ude,{class:"overflow-y-auto h-230"})])]),_:1},8,["tooltip"])}}});const ZYe=wp(JYe,[["__scopeId","data-v-dedb03e0"]]),hde=e=>(zm("data-v-b443a06b"),e=e(),Gm(),e),YYe={class:"flex hover:text-white"},KYe=["aria-label"],QYe=hde(()=>at("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"},null,-1)),XYe=[QYe],eKe={class:"about-ramp-dropdown pointer-events-auto bg-white rounded w-256 h-50"},tKe={class:"pb-8 border-b border-gray-600 mb-10"},iKe={class:"absolute right-5 top-5"},rKe={class:"select-text"},nKe={class:"font-bold cursor-text"},sKe={class:"text-sm cursor-text"},oKe={class:"text-sm cursor-text"},aKe=hde(()=>at("div",{class:"mt-5"},[at("a",{class:"text-sm underline text-blue-600",href:"https://github.com/ramp4-pcar4/ramp4-pcar4",target:"_blank"},[at("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"inline-block fill-black w-16 h-16"},[at("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})]),Ih(" ramp4-pcar4 ")])],-1)),lKe=Vi({__name:"about-ramp-dropdown",props:{position:{type:String,default:"top-start"}},setup(e){const{t}=Jr(),i=$i(()=>`${D_.major}.${D_.minor}.${D_.patch}`),r=$i(()=>D_.hash.slice(0,9)),n=$i(()=>{let s=new Date(D_.timestamp);if(isNaN(s))return"dev mode, no date";{const o=a=>a<10?"0"+a.toString():a.toString();return`${s.getFullYear()}-${s.getMonth()+1}-${s.getDate()} ${s.getHours()}:${o(s.getMinutes())}:${o(s.getSeconds())}`}});return(s,o)=>{const a=Cn("close"),l=Cn("dropdown-menu"),u=mr("focus-item");return sr((ht(),Ur(l,{class:"pointer-events-auto sm:flex",position:e.position,tooltip:si(t)("ramp.about"),tooltipPlacement:e.position},{header:kn(()=>[at("div",YYe,[(ht(),$t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-20 h-20","aria-label":si(t)("ramp.about.open")},XYe,8,KYe))])]),default:kn(c=>[at("div",eKe,[at("div",null,[at("h4",tKe,Hr(si(t)("ramp.about")),1),at("div",iKe,[gi(a,{onClick:c.close},null,8,["onClick"])]),at("div",rKe,[at("div",null,[at("span",nKe,Hr(i.value),1),at("span",sKe," ["+Hr(r.value)+"] ",1)]),at("div",null,[at("span",oKe,Hr(n.value),1)]),aKe])])])]),_:1},8,["position","tooltip","tooltipPlacement"])),[[u]])}}});const uKe=wp(lKe,[["__scopeId","data-v-b443a06b"]]),cKe={class:"map-caption absolute bottom-0 flex justify-end pointer-events-auto cursor-default select-none text-gray-400 bg-black-75 left-0 right-0 py-2 sm:py-6"},hKe={key:0,class:"relative top-2 sm:top-1 ml-4 sm:ml-0 shrink-0"},dKe=["href","aria-label"],pKe=["src","alt"],fKe={key:1,class:"relative ml-10 top-2 text-sm sm:text-base"},mKe=at("span",{class:"flex-grow w-15"},null,-1),yKe={class:"flex min-w-fit justify-end"},gKe={key:0,class:"pl-8 px-14 sm:block display-none relative top-2"},vKe=["aria-pressed","aria-label","content"],bKe={class:"relative top-1 text-sm sm:text-base"},wKe={class:"text-gray-400 hover:text-white text-sm sm:text-base pb-5"},_Ke=["onClick"],xKe={key:0,class:"sr-only"},SKe=Vi({__name:"map-caption",setup(e){const t=Hf(),i=pl(),{t:r}=Jr(),n=hs("iApi"),s=$i(()=>t.scale),o=$i(()=>t.attribution),a=$i(()=>t.coords),l=$i(()=>i.config.map),u=tt([]),c=Hn([]);c.push(Gn(l,m=>{m&&n.geo.map.caption.createCaption(l.value?.caption)})),zh(()=>{c.forEach(m=>m())}),Bw(()=>{Bh(()=>{n.$i18n.locale.value&&u.value.length==0&&(u.value=n.$i18n.availableLocales)})});const d=m=>{n.$i18n.locale.value!=m&&n.setLanguage(m)},f=()=>{t.toggleScale(),n.geo.map.caption.updateScale()};return(m,g)=>{const v=Cn("dropdown-menu"),b=mr("truncate"),x=mr("tippy");return ht(),$t("div",cKe,[gi(uKe,{class:"sm:block display-none ml-8 mr-4",position:"top-end"}),gi(ZYe,{class:"sm:block display-none"}),o.value?.logo.disabled?rn("",!0):(ht(),$t("span",hKe,[at("a",{class:"pointer-events-auto cursor-pointer",href:o.value?.logo.link,target:"_blank","aria-label":o.value?.logo.altText},[at("img",{class:"object-contain h-18 sm:h-26",src:o.value?.logo.value,alt:o.value?.logo.altText},null,8,pKe)],8,dKe)])),o.value?.text.disabled?rn("",!0):sr((ht(),$t("span",fKe,[Ih(Hr(o.value?.text.value),1)])),[[b,{options:{placement:"top",hideOnClick:!1,theme:"ramp4",animation:"scale"}}]]),mKe,at("div",yKe,[a.value?.disabled?rn("",!0):sr((ht(),$t("div",gKe,[Ih(Hr(a.value?.formattedString),1)])),[[b,{options:{hideOnClick:!1,theme:"ramp4",animation:"scale"}}]]),s.value?.disabled?rn("",!0):sr((ht(),$t("button",{key:1,type:"button",class:"flex-shrink-0 mx-2 sm:mx-10 px-4 pointer-events-auto cursor-pointer border-none",onClick:f,"aria-pressed":s.value?.isImperialScale,"aria-label":si(r)("map.toggleScaleUnits"),content:si(r)("map.toggleScaleUnits")},[at("span",{class:"border-solid border-2 border-white border-t-0 h-5 mr-4 inline-block",style:Vm({width:s.value?.width})},null,4),at("span",bKe,Hr(s.value?.label),1)],8,vKe)),[[x,{delay:[300,0],placement:"top",hideOnClick:!1,theme:"ramp4",animation:"scale",touch:["hold",200]}]]),sr((ht(),Ur(v,{class:"flex-shrink-0 pointer-events-auto focus:outline-none px-4 mr-4 relative top-2",position:"top-end",content:si(r)("map.changeLanguage")},{header:kn(()=>[at("span",wKe,Hr(si(r)("map.language.short")),1)]),default:kn(()=>[(ht(!0),$t(Tr,null,qm(u.value,(S,T)=>(ht(),$t("a",{key:`${S}-${T}`,class:bn(["flex-auto items-center text-sm sm:text-base cursor-pointer",{"font-bold":S===si(n).$i18n.locale.value}]),href:"javascript:;",onClick:_=>d(S)},[Ih(Hr(si(r)("map.language."+S))+" ",1),S===si(n).$i18n.locale.value?(ht(),$t("span",xKe,Hr(si(r)("map.language.curr")),1)):rn("",!0)],10,_Ke))),128))]),_:1},8,["content"])),[[x,{delay:[300,0],placement:"top-end",theme:"ramp4",animation:"scale",touch:["hold",200]}]])])])}}});const EKe=e=>(zm("data-v-61852e43"),e=e(),Gm(),e),MKe=["content"],IKe=EKe(()=>at("svg",{class:"fill-current w-24 h-24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[at("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"})],-1)),TKe={key:0,class:"number absolute -top-2 -right-2 text-white w-18 rounded-full"},AKe=Vi({__name:"floating-button",setup(e){const t=up(),i=hs("iApi"),{t:r}=Jr(),n=$i(()=>t.notificationNumber);return(s,o)=>{const a=mr("tippy");return sr((ht(),$t("button",{type:"button",onClick:o[0]||(o[0]=l=>si(i).panel.get("notifications").open()),class:"pointer-events-auto items-center absolute left-8 bottom-36 p-6 block sm:display-none bg-black-75 rounded-full text-gray-400 hover:text-white",content:si(r)("notifications.title")},[IKe,n.value&&n.value>0?(ht(),$t("span",TKe,Hr(n.value),1)):rn("",!0)],8,MKe)),[[a]])}}});const CKe=wp(AKe,[["__scopeId","data-v-61852e43"]]),$Ke={class:"flex items-center mb-20"},OKe={class:"text-xl"},RKe=Vi({__name:"keyboard-instructions",setup(e){const t=hs("iApi"),{t:i}=Jr(),r=tt(!1),n=tt(["app","lists","map"]),s=tt([]),o=tt(null),a=tt(null);Eo(()=>{s.value.push(t.event.on("openKeyboardInstructions",()=>{r.value=!0,Bh(()=>{o.value.focus()})}))}),zh(()=>{s.value.forEach(u=>t?.event.off(u))});const l=u=>{u.key==="Tab"?u.shiftKey&&u.target===o.value?(u.preventDefault(),a.value.focus()):!u.shiftKey&&u.target===a.value&&(u.preventDefault(),o.value.focus()):u.key==="Escape"&&(u.preventDefault(),r.value=!1)};return(u,c)=>{const d=Cn("close");return r.value?(ht(),$t("div",{key:0,class:"absolute inset-0 flex justify-center items-center bg-opacity-30 bg-black z-50 pointer-events-auto",onClick:c[3]||(c[3]=f=>r.value=!1),onKeydown:l},[at("div",{class:"bg-white w-500 pointer-events-auto shadow-2xl p-20 flex flex-col",onClick:c[2]||(c[2]=z3(()=>{},["stop","prevent"])),tabindex:"0",ref_key:"firstEl",ref:o},[at("div",$Ke,[at("h2",OKe,Hr(si(i)("keyboardInstructions.title")),1),gi(d,{class:"ml-auto",onClick:c[0]||(c[0]=f=>r.value=!1)})]),(ht(!0),$t(Tr,null,qm(n.value,f=>(ht(),$t("p",{class:"whitespace-pre-line pb-10",key:f},Hr(si(i)(`keyboardInstructions.${f}`)),1))),128)),at("button",{type:"button",class:"mt-auto self-end mr-10 mb-10 px-20 py-10",onClick:c[1]||(c[1]=f=>r.value=!1),ref_key:"lastEl",ref:a},Hr(si(i)("keyboardInstructions.OK")),513)],512)],32)):rn("",!0)}}}),Nd=xn("fixture",()=>{const e=tt({}),t=tt({});function i(o){return o.map(a=>t.value[a].getPromise())}function r(o){if(e.value={...e.value,[o.id]:wn(o)},o.id in t.value)t.value[o.id].resolveMe();else{const a=new ls;a.resolveMe(),t.value={...t.value,[o.id]:a}}typeof o.added=="function"&&o.added()}function n(o){delete e.value[o.id],e.value={...e.value},delete t.value[o.id],t.value={...t.value},typeof o.removed=="function"&&o.removed()}function s(o){t.value={...t.value,[o]:new ls}}return{items:e,loadPromises:t,getLoadPromises:i,addFixture:r,removeFixture:n,addLoadPromise:s}}),Mv=xn("instance",()=>({started:tt(!1)})),dde=e=>(zm("data-v-123961ea"),e=e(),Gm(),e),kKe={class:"h-full relative"},LKe={class:"inner-shell absolute top-0 left-0 h-full w-full pointer-events-none"},PKe=dde(()=>at("div",{class:"sr-only screen-reader-alert"},null,-1)),NKe={class:"absolute top-8 w-full flex justify-center"},FKe={key:1,class:"w-full h-full"},DKe=dde(()=>at("div",{class:"spinner relative inset-x-1/2 inset-y-9/20"},null,-1)),jKe=[DKe],UKe=Vi({__name:"shell",setup(e){const t=hs("iApi"),i=Mv(),r=Nd(),n=N0(),{t:s}=Jr(),o=$i(()=>r.items.appbar),a=()=>{t?.event.emit("openKeyboardInstructions")},l=()=>n.teleported;return(u,c)=>(ht(),$t("div",kKe,[at("div",LKe,[PKe,at("div",NKe,[at("button",{type:"button",class:"bg-white opacity-0 focus:opacity-100 z-50 shadow-md px-10",onClick:a},Hr(si(s)("keyboardInstructions.open")),1)]),gi(RKe),gi(sZe,{class:"panel-stack sm:flex absolute inset-0 overflow-hidden sm:p-12 z-10 sm:pl-80 xs:pl-40 sm:pb-48 xs:pb-28 xs:pr-0 sm:pr-40"}),o.value?rn("",!0):(ht(),Ur(CKe,{key:0})),gi(SKe,{class:"z-30"})]),si(i).started?(ht(),Ur(AJe,{key:0})):(ht(),$t("div",FKe,jKe)),(ht(!0),$t(Tr,null,qm(l(),d=>(ht(),Ur(A7,{to:d.teleport?.target,key:d.id},[(ht(),Ur(Qhe,{key:`${d.id}`,panel:d},null,8,["panel"]))],8,["to"]))),128))]))}});const VKe=wp(UKe,[["__scopeId","data-v-123961ea"]]);/*!
  * vue-tippy v6.0.0
  * (c) 2022 
  * @license MIT
  */var Ea="top",gu="bottom",vu="right",Ma="left",Rj="auto",K3=[Ea,gu,vu,Ma],rw="start",GS="end",BKe="clippingParents",pde="viewport",N_="popper",zKe="reference",iZ=K3.reduce(function(e,t){return e.concat([t+"-"+rw,t+"-"+GS])},[]),fde=[].concat(K3,[Rj]).reduce(function(e,t){return e.concat([t,t+"-"+rw,t+"-"+GS])},[]),GKe="beforeRead",qKe="read",HKe="afterRead",WKe="beforeMain",JKe="main",ZKe="afterMain",YKe="beforeWrite",KKe="write",QKe="afterWrite",XKe=[GKe,qKe,HKe,WKe,JKe,ZKe,YKe,KKe,QKe];function Dh(e){return e?(e.nodeName||"").toLowerCase():null}function xc(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function nw(e){var t=xc(e).Element;return e instanceof t||e instanceof Element}function hu(e){var t=xc(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function mde(e){if(typeof ShadowRoot>"u")return!1;var t=xc(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function eQe(e){var t=e.state;Object.keys(t.elements).forEach(function(i){var r=t.styles[i]||{},n=t.attributes[i]||{},s=t.elements[i];!hu(s)||!Dh(s)||(Object.assign(s.style,r),Object.keys(n).forEach(function(o){var a=n[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function tQe(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach(function(r){var n=t.elements[r],s=t.attributes[r]||{},o=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:i[r]),a=o.reduce(function(l,u){return l[u]="",l},{});!hu(n)||!Dh(n)||(Object.assign(n.style,a),Object.keys(s).forEach(function(l){n.removeAttribute(l)}))})}}var yde={name:"applyStyles",enabled:!0,phase:"write",fn:eQe,effect:tQe,requires:["computeStyles"]};function Ch(e){return e.split("-")[0]}var u0=Math.max,L5=Math.min,sw=Math.round;function ow(e,t){t===void 0&&(t=!1);var i=e.getBoundingClientRect(),r=1,n=1;if(hu(e)&&t){var s=e.offsetHeight,o=e.offsetWidth;o>0&&(r=sw(i.width)/o||1),s>0&&(n=sw(i.height)/s||1)}return{width:i.width/r,height:i.height/n,top:i.top/n,right:i.right/r,bottom:i.bottom/n,left:i.left/r,x:i.left/r,y:i.top/n}}function kj(e){var t=ow(e),i=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:r}}function gde(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&mde(i)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function jh(e){return xc(e).getComputedStyle(e)}function iQe(e){return["table","td","th"].indexOf(Dh(e))>=0}function Zm(e){return((nw(e)?e.ownerDocument:e.document)||window.document).documentElement}function NC(e){return Dh(e)==="html"?e:e.assignedSlot||e.parentNode||(mde(e)?e.host:null)||Zm(e)}function rZ(e){return!hu(e)||jh(e).position==="fixed"?null:e.offsetParent}function rQe(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,i=navigator.userAgent.indexOf("Trident")!==-1;if(i&&hu(e)){var r=jh(e);if(r.position==="fixed")return null}for(var n=NC(e);hu(n)&&["html","body"].indexOf(Dh(n))<0;){var s=jh(n);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return n;n=n.parentNode}return null}function Q3(e){for(var t=xc(e),i=rZ(e);i&&iQe(i)&&jh(i).position==="static";)i=rZ(i);return i&&(Dh(i)==="html"||Dh(i)==="body"&&jh(i).position==="static")?t:i||rQe(e)||t}function Lj(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function jx(e,t,i){return u0(e,L5(t,i))}function nQe(e,t,i){var r=jx(e,t,i);return r>i?i:r}function vde(){return{top:0,right:0,bottom:0,left:0}}function bde(e){return Object.assign({},vde(),e)}function wde(e,t){return t.reduce(function(i,r){return i[r]=e,i},{})}var sQe=function(t,i){return t=typeof t=="function"?t(Object.assign({},i.rects,{placement:i.placement})):t,bde(typeof t!="number"?t:wde(t,K3))};function oQe(e){var t,i=e.state,r=e.name,n=e.options,s=i.elements.arrow,o=i.modifiersData.popperOffsets,a=Ch(i.placement),l=Lj(a),u=[Ma,vu].indexOf(a)>=0,c=u?"height":"width";if(!(!s||!o)){var d=sQe(n.padding,i),f=kj(s),m=l==="y"?Ea:Ma,g=l==="y"?gu:vu,v=i.rects.reference[c]+i.rects.reference[l]-o[l]-i.rects.popper[c],b=o[l]-i.rects.reference[l],x=Q3(s),S=x?l==="y"?x.clientHeight||0:x.clientWidth||0:0,T=v/2-b/2,_=d[m],M=S-f[c]-d[g],I=S/2-f[c]/2+T,$=jx(_,I,M),L=l;i.modifiersData[r]=(t={},t[L]=$,t.centerOffset=$-I,t)}}function aQe(e){var t=e.state,i=e.options,r=i.element,n=r===void 0?"[data-popper-arrow]":r;n!=null&&(typeof n=="string"&&(n=t.elements.popper.querySelector(n),!n)||gde(t.elements.popper,n)&&(t.elements.arrow=n))}var lQe={name:"arrow",enabled:!0,phase:"main",fn:oQe,effect:aQe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function aw(e){return e.split("-")[1]}var uQe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function cQe(e){var t=e.x,i=e.y,r=window,n=r.devicePixelRatio||1;return{x:sw(t*n)/n||0,y:sw(i*n)/n||0}}function nZ(e){var t,i=e.popper,r=e.popperRect,n=e.placement,s=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,d=e.isFixed,f=c===!0?cQe(o):typeof c=="function"?c(o):o,m=f.x,g=m===void 0?0:m,v=f.y,b=v===void 0?0:v,x=o.hasOwnProperty("x"),S=o.hasOwnProperty("y"),T=Ma,_=Ea,M=window;if(u){var I=Q3(i),$="clientHeight",L="clientWidth";if(I===xc(i)&&(I=Zm(i),jh(I).position!=="static"&&a==="absolute"&&($="scrollHeight",L="scrollWidth")),I=I,n===Ea||(n===Ma||n===vu)&&s===GS){_=gu;var B=d&&M.visualViewport?M.visualViewport.height:I[$];b-=B-r.height,b*=l?1:-1}if(n===Ma||(n===Ea||n===gu)&&s===GS){T=vu;var z=d&&M.visualViewport?M.visualViewport.width:I[L];g-=z-r.width,g*=l?1:-1}}var W=Object.assign({position:a},u&&uQe);if(l){var J;return Object.assign({},W,(J={},J[_]=S?"0":"",J[T]=x?"0":"",J.transform=(M.devicePixelRatio||1)<=1?"translate("+g+"px, "+b+"px)":"translate3d("+g+"px, "+b+"px, 0)",J))}return Object.assign({},W,(t={},t[_]=S?b+"px":"",t[T]=x?g+"px":"",t.transform="",t))}function hQe(e){var t=e.state,i=e.options,r=i.gpuAcceleration,n=r===void 0?!0:r,s=i.adaptive,o=s===void 0?!0:s,a=i.roundOffsets,l=a===void 0?!0:a,u={placement:Ch(t.placement),variation:aw(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,nZ(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,nZ(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var dQe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:hQe,data:{}},VM={passive:!0};function pQe(e){var t=e.state,i=e.instance,r=e.options,n=r.scroll,s=n===void 0?!0:n,o=r.resize,a=o===void 0?!0:o,l=xc(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&u.forEach(function(c){c.addEventListener("scroll",i.update,VM)}),a&&l.addEventListener("resize",i.update,VM),function(){s&&u.forEach(function(c){c.removeEventListener("scroll",i.update,VM)}),a&&l.removeEventListener("resize",i.update,VM)}}var fQe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:pQe,data:{}},mQe={left:"right",right:"left",bottom:"top",top:"bottom"};function FT(e){return e.replace(/left|right|bottom|top/g,function(t){return mQe[t]})}var yQe={start:"end",end:"start"};function sZ(e){return e.replace(/start|end/g,function(t){return yQe[t]})}function Pj(e){var t=xc(e),i=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:i,scrollTop:r}}function Nj(e){return ow(Zm(e)).left+Pj(e).scrollLeft}function gQe(e){var t=xc(e),i=Zm(e),r=t.visualViewport,n=i.clientWidth,s=i.clientHeight,o=0,a=0;return r&&(n=r.width,s=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=r.offsetLeft,a=r.offsetTop)),{width:n,height:s,x:o+Nj(e),y:a}}function vQe(e){var t,i=Zm(e),r=Pj(e),n=(t=e.ownerDocument)==null?void 0:t.body,s=u0(i.scrollWidth,i.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),o=u0(i.scrollHeight,i.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),a=-r.scrollLeft+Nj(e),l=-r.scrollTop;return jh(n||i).direction==="rtl"&&(a+=u0(i.clientWidth,n?n.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function Fj(e){var t=jh(e),i=t.overflow,r=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+n+r)}function _de(e){return["html","body","#document"].indexOf(Dh(e))>=0?e.ownerDocument.body:hu(e)&&Fj(e)?e:_de(NC(e))}function Ux(e,t){var i;t===void 0&&(t=[]);var r=_de(e),n=r===((i=e.ownerDocument)==null?void 0:i.body),s=xc(r),o=n?[s].concat(s.visualViewport||[],Fj(r)?r:[]):r,a=t.concat(o);return n?a:a.concat(Ux(NC(o)))}function MN(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function bQe(e){var t=ow(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function oZ(e,t){return t===pde?MN(gQe(e)):nw(t)?bQe(t):MN(vQe(Zm(e)))}function wQe(e){var t=Ux(NC(e)),i=["absolute","fixed"].indexOf(jh(e).position)>=0,r=i&&hu(e)?Q3(e):e;return nw(r)?t.filter(function(n){return nw(n)&&gde(n,r)&&Dh(n)!=="body"&&(i?jh(n).position!=="static":!0)}):[]}function _Qe(e,t,i){var r=t==="clippingParents"?wQe(e):[].concat(t),n=[].concat(r,[i]),s=n[0],o=n.reduce(function(a,l){var u=oZ(e,l);return a.top=u0(u.top,a.top),a.right=L5(u.right,a.right),a.bottom=L5(u.bottom,a.bottom),a.left=u0(u.left,a.left),a},oZ(e,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function xde(e){var t=e.reference,i=e.element,r=e.placement,n=r?Ch(r):null,s=r?aw(r):null,o=t.x+t.width/2-i.width/2,a=t.y+t.height/2-i.height/2,l;switch(n){case Ea:l={x:o,y:t.y-i.height};break;case gu:l={x:o,y:t.y+t.height};break;case vu:l={x:t.x+t.width,y:a};break;case Ma:l={x:t.x-i.width,y:a};break;default:l={x:t.x,y:t.y}}var u=n?Lj(n):null;if(u!=null){var c=u==="y"?"height":"width";switch(s){case rw:l[u]=l[u]-(t[c]/2-i[c]/2);break;case GS:l[u]=l[u]+(t[c]/2-i[c]/2);break}}return l}function qS(e,t){t===void 0&&(t={});var i=t,r=i.placement,n=r===void 0?e.placement:r,s=i.boundary,o=s===void 0?BKe:s,a=i.rootBoundary,l=a===void 0?pde:a,u=i.elementContext,c=u===void 0?N_:u,d=i.altBoundary,f=d===void 0?!1:d,m=i.padding,g=m===void 0?0:m,v=bde(typeof g!="number"?g:wde(g,K3)),b=c===N_?zKe:N_,x=e.rects.popper,S=e.elements[f?b:c],T=_Qe(nw(S)?S:S.contextElement||Zm(e.elements.popper),o,l),_=ow(e.elements.reference),M=xde({reference:_,element:x,strategy:"absolute",placement:n}),I=MN(Object.assign({},x,M)),$=c===N_?I:_,L={top:T.top-$.top+v.top,bottom:$.bottom-T.bottom+v.bottom,left:T.left-$.left+v.left,right:$.right-T.right+v.right},B=e.modifiersData.offset;if(c===N_&&B){var z=B[n];Object.keys(L).forEach(function(W){var J=[vu,gu].indexOf(W)>=0?1:-1,K=[Ea,gu].indexOf(W)>=0?"y":"x";L[W]+=z[K]*J})}return L}function xQe(e,t){t===void 0&&(t={});var i=t,r=i.placement,n=i.boundary,s=i.rootBoundary,o=i.padding,a=i.flipVariations,l=i.allowedAutoPlacements,u=l===void 0?fde:l,c=aw(r),d=c?a?iZ:iZ.filter(function(g){return aw(g)===c}):K3,f=d.filter(function(g){return u.indexOf(g)>=0});f.length===0&&(f=d);var m=f.reduce(function(g,v){return g[v]=qS(e,{placement:v,boundary:n,rootBoundary:s,padding:o})[Ch(v)],g},{});return Object.keys(m).sort(function(g,v){return m[g]-m[v]})}function SQe(e){if(Ch(e)===Rj)return[];var t=FT(e);return[sZ(e),t,sZ(t)]}function EQe(e){var t=e.state,i=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var n=i.mainAxis,s=n===void 0?!0:n,o=i.altAxis,a=o===void 0?!0:o,l=i.fallbackPlacements,u=i.padding,c=i.boundary,d=i.rootBoundary,f=i.altBoundary,m=i.flipVariations,g=m===void 0?!0:m,v=i.allowedAutoPlacements,b=t.options.placement,x=Ch(b),S=x===b,T=l||(S||!g?[FT(b)]:SQe(b)),_=[b].concat(T).reduce(function(ve,_e){return ve.concat(Ch(_e)===Rj?xQe(t,{placement:_e,boundary:c,rootBoundary:d,padding:u,flipVariations:g,allowedAutoPlacements:v}):_e)},[]),M=t.rects.reference,I=t.rects.popper,$=new Map,L=!0,B=_[0],z=0;z<_.length;z++){var W=_[z],J=Ch(W),K=aw(W)===rw,Q=[Ea,gu].indexOf(J)>=0,y=Q?"width":"height",A=qS(t,{placement:W,boundary:c,rootBoundary:d,altBoundary:f,padding:u}),N=Q?K?vu:Ma:K?gu:Ea;M[y]>I[y]&&(N=FT(N));var j=FT(N),oe=[];if(s&&oe.push(A[J]<=0),a&&oe.push(A[N]<=0,A[j]<=0),oe.every(function(ve){return ve})){B=W,L=!1;break}$.set(W,oe)}if(L)for(var q=g?3:1,de=function(_e){var Se=_.find(function(Oe){var Me=$.get(Oe);if(Me)return Me.slice(0,_e).every(function(we){return we})});if(Se)return B=Se,"break"},re=q;re>0;re--){var me=de(re);if(me==="break")break}t.placement!==B&&(t.modifiersData[r]._skip=!0,t.placement=B,t.reset=!0)}}var MQe={name:"flip",enabled:!0,phase:"main",fn:EQe,requiresIfExists:["offset"],data:{_skip:!1}};function aZ(e,t,i){return i===void 0&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function lZ(e){return[Ea,vu,gu,Ma].some(function(t){return e[t]>=0})}function IQe(e){var t=e.state,i=e.name,r=t.rects.reference,n=t.rects.popper,s=t.modifiersData.preventOverflow,o=qS(t,{elementContext:"reference"}),a=qS(t,{altBoundary:!0}),l=aZ(o,r),u=aZ(a,n,s),c=lZ(l),d=lZ(u);t.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}var TQe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:IQe};function AQe(e,t,i){var r=Ch(e),n=[Ma,Ea].indexOf(r)>=0?-1:1,s=typeof i=="function"?i(Object.assign({},t,{placement:e})):i,o=s[0],a=s[1];return o=o||0,a=(a||0)*n,[Ma,vu].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function CQe(e){var t=e.state,i=e.options,r=e.name,n=i.offset,s=n===void 0?[0,0]:n,o=fde.reduce(function(c,d){return c[d]=AQe(d,t.rects,s),c},{}),a=o[t.placement],l=a.x,u=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[r]=o}var $Qe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:CQe};function OQe(e){var t=e.state,i=e.name;t.modifiersData[i]=xde({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var RQe={name:"popperOffsets",enabled:!0,phase:"read",fn:OQe,data:{}};function kQe(e){return e==="x"?"y":"x"}function LQe(e){var t=e.state,i=e.options,r=e.name,n=i.mainAxis,s=n===void 0?!0:n,o=i.altAxis,a=o===void 0?!1:o,l=i.boundary,u=i.rootBoundary,c=i.altBoundary,d=i.padding,f=i.tether,m=f===void 0?!0:f,g=i.tetherOffset,v=g===void 0?0:g,b=qS(t,{boundary:l,rootBoundary:u,padding:d,altBoundary:c}),x=Ch(t.placement),S=aw(t.placement),T=!S,_=Lj(x),M=kQe(_),I=t.modifiersData.popperOffsets,$=t.rects.reference,L=t.rects.popper,B=typeof v=="function"?v(Object.assign({},t.rects,{placement:t.placement})):v,z=typeof B=="number"?{mainAxis:B,altAxis:B}:Object.assign({mainAxis:0,altAxis:0},B),W=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,J={x:0,y:0};if(I){if(s){var K,Q=_==="y"?Ea:Ma,y=_==="y"?gu:vu,A=_==="y"?"height":"width",N=I[_],j=N+b[Q],oe=N-b[y],q=m?-L[A]/2:0,de=S===rw?$[A]:L[A],re=S===rw?-L[A]:-$[A],me=t.elements.arrow,ve=m&&me?kj(me):{width:0,height:0},_e=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:vde(),Se=_e[Q],Oe=_e[y],Me=jx(0,$[A],ve[A]),we=T?$[A]/2-q-Me-Se-z.mainAxis:de-Me-Se-z.mainAxis,Ie=T?-$[A]/2+q+Me+Oe+z.mainAxis:re+Me+Oe+z.mainAxis,Ae=t.elements.arrow&&Q3(t.elements.arrow),H=Ae?_==="y"?Ae.clientTop||0:Ae.clientLeft||0:0,V=(K=W?.[_])!=null?K:0,D=N+we-V-H,ne=N+Ie-V,ye=jx(m?L5(j,D):j,N,m?u0(oe,ne):oe);I[_]=ye,J[_]=ye-N}if(a){var ae,U=_==="x"?Ea:Ma,le=_==="x"?gu:vu,ie=I[M],k=M==="y"?"height":"width",O=ie+b[U],C=ie-b[le],G=[Ea,Ma].indexOf(x)!==-1,Z=(ae=W?.[M])!=null?ae:0,F=G?O:ie-$[k]-L[k]-Z+z.altAxis,te=G?ie+$[k]+L[k]-Z-z.altAxis:C,ge=m&&G?nQe(F,ie,te):jx(m?F:O,ie,m?te:C);I[M]=ge,J[M]=ge-ie}t.modifiersData[r]=J}}var PQe={name:"preventOverflow",enabled:!0,phase:"main",fn:LQe,requiresIfExists:["offset"]};function NQe(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function FQe(e){return e===xc(e)||!hu(e)?Pj(e):NQe(e)}function DQe(e){var t=e.getBoundingClientRect(),i=sw(t.width)/e.offsetWidth||1,r=sw(t.height)/e.offsetHeight||1;return i!==1||r!==1}function jQe(e,t,i){i===void 0&&(i=!1);var r=hu(t),n=hu(t)&&DQe(t),s=Zm(t),o=ow(e,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!i)&&((Dh(t)!=="body"||Fj(s))&&(a=FQe(t)),hu(t)?(l=ow(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=Nj(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function UQe(e){var t=new Map,i=new Set,r=[];e.forEach(function(s){t.set(s.name,s)});function n(s){i.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!i.has(a)){var l=t.get(a);l&&n(l)}}),r.push(s)}return e.forEach(function(s){i.has(s.name)||n(s)}),r}function VQe(e){var t=UQe(e);return XKe.reduce(function(i,r){return i.concat(t.filter(function(n){return n.phase===r}))},[])}function BQe(e){var t;return function(){return t||(t=new Promise(function(i){Promise.resolve().then(function(){t=void 0,i(e())})})),t}}function zQe(e){var t=e.reduce(function(i,r){var n=i[r.name];return i[r.name]=n?Object.assign({},n,r,{options:Object.assign({},n.options,r.options),data:Object.assign({},n.data,r.data)}):r,i},{});return Object.keys(t).map(function(i){return t[i]})}var uZ={placement:"bottom",modifiers:[],strategy:"absolute"};function cZ(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function GQe(e){e===void 0&&(e={});var t=e,i=t.defaultModifiers,r=i===void 0?[]:i,n=t.defaultOptions,s=n===void 0?uZ:n;return function(a,l,u){u===void 0&&(u=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},uZ,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,m={state:c,setOptions:function(x){var S=typeof x=="function"?x(c.options):x;v(),c.options=Object.assign({},s,c.options,S),c.scrollParents={reference:nw(a)?Ux(a):a.contextElement?Ux(a.contextElement):[],popper:Ux(l)};var T=VQe(zQe([].concat(r,c.options.modifiers)));return c.orderedModifiers=T.filter(function(_){return _.enabled}),g(),m.update()},forceUpdate:function(){if(!f){var x=c.elements,S=x.reference,T=x.popper;if(cZ(S,T)){c.rects={reference:jQe(S,Q3(T),c.options.strategy==="fixed"),popper:kj(T)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(z){return c.modifiersData[z.name]=Object.assign({},z.data)});for(var _=0;_<c.orderedModifiers.length;_++){if(c.reset===!0){c.reset=!1,_=-1;continue}var M=c.orderedModifiers[_],I=M.fn,$=M.options,L=$===void 0?{}:$,B=M.name;typeof I=="function"&&(c=I({state:c,options:L,name:B,instance:m})||c)}}}},update:BQe(function(){return new Promise(function(b){m.forceUpdate(),b(c)})}),destroy:function(){v(),f=!0}};if(!cZ(a,l))return m;m.setOptions(u).then(function(b){!f&&u.onFirstUpdate&&u.onFirstUpdate(b)});function g(){c.orderedModifiers.forEach(function(b){var x=b.name,S=b.options,T=S===void 0?{}:S,_=b.effect;if(typeof _=="function"){var M=_({state:c,name:x,instance:m,options:T}),I=function(){};d.push(M||I)}})}function v(){d.forEach(function(b){return b()}),d=[]}return m}}var qQe=[fQe,RQe,dQe,yde,$Qe,MQe,PQe,lQe,TQe],HQe=GQe({defaultModifiers:qQe}),WQe="tippy-box",Sde="tippy-content",Ede="tippy-backdrop",Mde="tippy-arrow",Ide="tippy-svg-arrow",cg={passive:!0,capture:!0},Tde=function(){return document.body};function gR(e,t,i){if(Array.isArray(e)){var r=e[t];return r??(Array.isArray(i)?i[t]:i)}return e}function Dj(e,t){var i={}.toString.call(e);return i.indexOf("[object")===0&&i.indexOf(t+"]")>-1}function Ade(e,t){return typeof e=="function"?e.apply(void 0,t):e}function hZ(e,t){if(t===0)return e;var i;return function(r){clearTimeout(i),i=setTimeout(function(){e(r)},t)}}function JQe(e,t){var i=Object.assign({},e);return t.forEach(function(r){delete i[r]}),i}function ZQe(e){return e.split(/\s+/).filter(Boolean)}function Mg(e){return[].concat(e)}function dZ(e,t){e.indexOf(t)===-1&&e.push(t)}function YQe(e){return e.filter(function(t,i){return e.indexOf(t)===i})}function Cde(e){return e.split("-")[0]}function lw(e){return[].slice.call(e)}function pZ(e){return Object.keys(e).reduce(function(t,i){return e[i]!==void 0&&(t[i]=e[i]),t},{})}function c0(){return document.createElement("div")}function FC(e){return["Element","Fragment"].some(function(t){return Dj(e,t)})}function KQe(e){return Dj(e,"NodeList")}function jj(e){return Dj(e,"MouseEvent")}function QQe(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function XQe(e){return FC(e)?[e]:KQe(e)?lw(e):Array.isArray(e)?e:lw(document.querySelectorAll(e))}function vR(e,t){e.forEach(function(i){i&&(i.style.transitionDuration=t+"ms")})}function HS(e,t){e.forEach(function(i){i&&i.setAttribute("data-state",t)})}function $de(e){var t,i=Mg(e),r=i[0];return r!=null&&(t=r.ownerDocument)!=null&&t.body?r.ownerDocument:document}function eXe(e,t){var i=t.clientX,r=t.clientY;return e.every(function(n){var s=n.popperRect,o=n.popperState,a=n.props,l=a.interactiveBorder,u=Cde(o.placement),c=o.modifiersData.offset;if(!c)return!0;var d=u==="bottom"?c.top.y:0,f=u==="top"?c.bottom.y:0,m=u==="right"?c.left.x:0,g=u==="left"?c.right.x:0,v=s.top-r+d>l,b=r-s.bottom-f>l,x=s.left-i+m>l,S=i-s.right-g>l;return v||b||x||S})}function bR(e,t,i){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(n){e[r](n,i)})}function fZ(e,t){for(var i=t;i;){var r;if(e.contains(i))return!0;i=i.getRootNode==null||(r=i.getRootNode())==null?void 0:r.host}return!1}var hh={isTouch:!1},mZ=0;function tXe(){hh.isTouch||(hh.isTouch=!0,window.performance&&document.addEventListener("mousemove",Ode))}function Ode(){var e=performance.now();e-mZ<20&&(hh.isTouch=!1,document.removeEventListener("mousemove",Ode)),mZ=e}function iXe(){var e=document.activeElement;if(QQe(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function rXe(){document.addEventListener("touchstart",tXe,cg),window.addEventListener("blur",iXe)}var nXe=typeof window<"u"&&typeof document<"u",sXe=nXe?!!window.msCrypto:!1,oXe={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},aXe={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},lc=Object.assign({appendTo:Tde,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},oXe,aXe),lXe=Object.keys(lc),uXe=function(t){var i=Object.keys(t);i.forEach(function(r){lc[r]=t[r]})};function Rde(e){var t=e.plugins||[],i=t.reduce(function(r,n){var s=n.name,o=n.defaultValue;if(s){var a;r[s]=e[s]!==void 0?e[s]:(a=lc[s])!=null?a:o}return r},{});return Object.assign({},e,i)}function cXe(e,t){var i=t?Object.keys(Rde(Object.assign({},lc,{plugins:t}))):lXe,r=i.reduce(function(n,s){var o=(e.getAttribute("data-tippy-"+s)||"").trim();if(!o)return n;if(s==="content")n[s]=o;else try{n[s]=JSON.parse(o)}catch{n[s]=o}return n},{});return r}function yZ(e,t){var i=Object.assign({},t,{content:Ade(t.content,[e])},t.ignoreAttributes?{}:cXe(e,t.plugins));return i.aria=Object.assign({},lc.aria,i.aria),i.aria={expanded:i.aria.expanded==="auto"?t.interactive:i.aria.expanded,content:i.aria.content==="auto"?t.interactive?null:"describedby":i.aria.content},i}var hXe=function(){return"innerHTML"};function IN(e,t){e[hXe()]=t}function gZ(e){var t=c0();return e===!0?t.className=Mde:(t.className=Ide,FC(e)?t.appendChild(e):IN(t,e)),t}function vZ(e,t){FC(t.content)?(IN(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?IN(e,t.content):e.textContent=t.content)}function P5(e){var t=e.firstElementChild,i=lw(t.children);return{box:t,content:i.find(function(r){return r.classList.contains(Sde)}),arrow:i.find(function(r){return r.classList.contains(Mde)||r.classList.contains(Ide)}),backdrop:i.find(function(r){return r.classList.contains(Ede)})}}function kde(e){var t=c0(),i=c0();i.className=WQe,i.setAttribute("data-state","hidden"),i.setAttribute("tabindex","-1");var r=c0();r.className=Sde,r.setAttribute("data-state","hidden"),vZ(r,e.props),t.appendChild(i),i.appendChild(r),n(e.props,e.props);function n(s,o){var a=P5(t),l=a.box,u=a.content,c=a.arrow;o.theme?l.setAttribute("data-theme",o.theme):l.removeAttribute("data-theme"),typeof o.animation=="string"?l.setAttribute("data-animation",o.animation):l.removeAttribute("data-animation"),o.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?l.setAttribute("role",o.role):l.removeAttribute("role"),(s.content!==o.content||s.allowHTML!==o.allowHTML)&&vZ(u,e.props),o.arrow?c?s.arrow!==o.arrow&&(l.removeChild(c),l.appendChild(gZ(o.arrow))):l.appendChild(gZ(o.arrow)):c&&l.removeChild(c)}return{popper:t,onUpdate:n}}kde.$$tippy=!0;var dXe=1,BM=[],wR=[];function pXe(e,t){var i=yZ(e,Object.assign({},lc,Rde(pZ(t)))),r,n,s,o=!1,a=!1,l=!1,u=!1,c,d,f,m=[],g=hZ(D,i.interactiveDebounce),v,b=dXe++,x=null,S=YQe(i.plugins),T={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},_={id:b,reference:e,popper:c0(),popperInstance:x,props:i,state:T,plugins:S,clearDelayTimeouts:F,setProps:te,setContent:ge,show:xe,hide:fe,hideWithInteractivity:ze,enable:G,disable:Z,unmount:He,destroy:Xe};if(!i.render)return _;var M=i.render(_),I=M.popper,$=M.onUpdate;I.setAttribute("data-tippy-root",""),I.id="tippy-"+_.id,_.popper=I,e._tippy=_,I._tippy=_;var L=S.map(function(Ve){return Ve.fn(_)}),B=e.hasAttribute("aria-expanded");return Ae(),q(),N(),j("onCreate",[_]),i.showOnCreate&&O(),I.addEventListener("mouseenter",function(){_.props.interactive&&_.state.isVisible&&_.clearDelayTimeouts()}),I.addEventListener("mouseleave",function(){_.props.interactive&&_.props.trigger.indexOf("mouseenter")>=0&&Q().addEventListener("mousemove",g)}),_;function z(){var Ve=_.props.touch;return Array.isArray(Ve)?Ve:[Ve,0]}function W(){return z()[0]==="hold"}function J(){var Ve;return!!((Ve=_.props.render)!=null&&Ve.$$tippy)}function K(){return v||e}function Q(){var Ve=K().parentNode;return Ve?$de(Ve):document}function y(){return P5(I)}function A(Ve){return _.state.isMounted&&!_.state.isVisible||hh.isTouch||c&&c.type==="focus"?0:gR(_.props.delay,Ve?0:1,lc.delay)}function N(Ve){Ve===void 0&&(Ve=!1),I.style.pointerEvents=_.props.interactive&&!Ve?"":"none",I.style.zIndex=""+_.props.zIndex}function j(Ve,be,ke){if(ke===void 0&&(ke=!0),L.forEach(function(ut){ut[Ve]&&ut[Ve].apply(ut,be)}),ke){var Ge;(Ge=_.props)[Ve].apply(Ge,be)}}function oe(){var Ve=_.props.aria;if(Ve.content){var be="aria-"+Ve.content,ke=I.id,Ge=Mg(_.props.triggerTarget||e);Ge.forEach(function(ut){var pt=ut.getAttribute(be);if(_.state.isVisible)ut.setAttribute(be,pt?pt+" "+ke:ke);else{var gt=pt&&pt.replace(ke,"").trim();gt?ut.setAttribute(be,gt):ut.removeAttribute(be)}})}}function q(){if(!(B||!_.props.aria.expanded)){var Ve=Mg(_.props.triggerTarget||e);Ve.forEach(function(be){_.props.interactive?be.setAttribute("aria-expanded",_.state.isVisible&&be===K()?"true":"false"):be.removeAttribute("aria-expanded")})}}function de(){Q().removeEventListener("mousemove",g),BM=BM.filter(function(Ve){return Ve!==g})}function re(Ve){if(!(hh.isTouch&&(l||Ve.type==="mousedown"))){var be=Ve.composedPath&&Ve.composedPath()[0]||Ve.target;if(!(_.props.interactive&&fZ(I,be))){if(Mg(_.props.triggerTarget||e).some(function(ke){return fZ(ke,be)})){if(hh.isTouch||_.state.isVisible&&_.props.trigger.indexOf("click")>=0)return}else j("onClickOutside",[_,Ve]);_.props.hideOnClick===!0&&(_.clearDelayTimeouts(),_.hide(),a=!0,setTimeout(function(){a=!1}),_.state.isMounted||Se())}}}function me(){l=!0}function ve(){l=!1}function _e(){var Ve=Q();Ve.addEventListener("mousedown",re,!0),Ve.addEventListener("touchend",re,cg),Ve.addEventListener("touchstart",ve,cg),Ve.addEventListener("touchmove",me,cg)}function Se(){var Ve=Q();Ve.removeEventListener("mousedown",re,!0),Ve.removeEventListener("touchend",re,cg),Ve.removeEventListener("touchstart",ve,cg),Ve.removeEventListener("touchmove",me,cg)}function Oe(Ve,be){we(Ve,function(){!_.state.isVisible&&I.parentNode&&I.parentNode.contains(I)&&be()})}function Me(Ve,be){we(Ve,be)}function we(Ve,be){var ke=y().box;function Ge(ut){ut.target===ke&&(bR(ke,"remove",Ge),be())}if(Ve===0)return be();bR(ke,"remove",d),bR(ke,"add",Ge),d=Ge}function Ie(Ve,be,ke){ke===void 0&&(ke=!1);var Ge=Mg(_.props.triggerTarget||e);Ge.forEach(function(ut){ut.addEventListener(Ve,be,ke),m.push({node:ut,eventType:Ve,handler:be,options:ke})})}function Ae(){W()&&(Ie("touchstart",V,{passive:!0}),Ie("touchend",ne,{passive:!0})),ZQe(_.props.trigger).forEach(function(Ve){if(Ve!=="manual")switch(Ie(Ve,V),Ve){case"mouseenter":Ie("mouseleave",ne);break;case"focus":Ie(sXe?"focusout":"blur",ye);break;case"focusin":Ie("focusout",ye);break}})}function H(){m.forEach(function(Ve){var be=Ve.node,ke=Ve.eventType,Ge=Ve.handler,ut=Ve.options;be.removeEventListener(ke,Ge,ut)}),m=[]}function V(Ve){var be,ke=!1;if(!(!_.state.isEnabled||ae(Ve)||a)){var Ge=((be=c)==null?void 0:be.type)==="focus";c=Ve,v=Ve.currentTarget,q(),!_.state.isVisible&&jj(Ve)&&BM.forEach(function(ut){return ut(Ve)}),Ve.type==="click"&&(_.props.trigger.indexOf("mouseenter")<0||o)&&_.props.hideOnClick!==!1&&_.state.isVisible?ke=!0:O(Ve),Ve.type==="click"&&(o=!ke),ke&&!Ge&&C(Ve)}}function D(Ve){var be=Ve.target,ke=K().contains(be)||I.contains(be);if(!(Ve.type==="mousemove"&&ke)){var Ge=k().concat(I).map(function(ut){var pt,gt=ut._tippy,Rt=(pt=gt.popperInstance)==null?void 0:pt.state;return Rt?{popperRect:ut.getBoundingClientRect(),popperState:Rt,props:i}:null}).filter(Boolean);eXe(Ge,Ve)&&(de(),C(Ve))}}function ne(Ve){var be=ae(Ve)||_.props.trigger.indexOf("click")>=0&&o;if(!be){if(_.props.interactive){_.hideWithInteractivity(Ve);return}C(Ve)}}function ye(Ve){_.props.trigger.indexOf("focusin")<0&&Ve.target!==K()||_.props.interactive&&Ve.relatedTarget&&I.contains(Ve.relatedTarget)||C(Ve)}function ae(Ve){return hh.isTouch?W()!==Ve.type.indexOf("touch")>=0:!1}function U(){le();var Ve=_.props,be=Ve.popperOptions,ke=Ve.placement,Ge=Ve.offset,ut=Ve.getReferenceClientRect,pt=Ve.moveTransition,gt=J()?P5(I).arrow:null,Rt=ut?{getBoundingClientRect:ut,contextElement:ut.contextElement||K()}:e,dt={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(xi){var Or=xi.state;if(J()){var gs=y(),Na=gs.box;["placement","reference-hidden","escaped"].forEach(function(Fa){Fa==="placement"?Na.setAttribute("data-placement",Or.placement):Or.attributes.popper["data-popper-"+Fa]?Na.setAttribute("data-"+Fa,""):Na.removeAttribute("data-"+Fa)}),Or.attributes.popper={}}}},qt=[{name:"offset",options:{offset:Ge}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!pt}},dt];J()&&gt&&qt.push({name:"arrow",options:{element:gt,padding:3}}),qt.push.apply(qt,be?.modifiers||[]),_.popperInstance=HQe(Rt,I,Object.assign({},be,{placement:ke,onFirstUpdate:f,modifiers:qt}))}function le(){_.popperInstance&&(_.popperInstance.destroy(),_.popperInstance=null)}function ie(){var Ve=_.props.appendTo,be,ke=K();_.props.interactive&&Ve===Tde||Ve==="parent"?be=ke.parentNode:be=Ade(Ve,[ke]),be.contains(I)||be.appendChild(I),_.state.isMounted=!0,U()}function k(){return lw(I.querySelectorAll("[data-tippy-root]"))}function O(Ve){_.clearDelayTimeouts(),Ve&&j("onTrigger",[_,Ve]),_e();var be=A(!0),ke=z(),Ge=ke[0],ut=ke[1];hh.isTouch&&Ge==="hold"&&ut&&(be=ut),be?r=setTimeout(function(){_.show()},be):_.show()}function C(Ve){if(_.clearDelayTimeouts(),j("onUntrigger",[_,Ve]),!_.state.isVisible){Se();return}if(!(_.props.trigger.indexOf("mouseenter")>=0&&_.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(Ve.type)>=0&&o)){var be=A(!1);be?n=setTimeout(function(){_.state.isVisible&&_.hide()},be):s=requestAnimationFrame(function(){_.hide()})}}function G(){_.state.isEnabled=!0}function Z(){_.hide(),_.state.isEnabled=!1}function F(){clearTimeout(r),clearTimeout(n),cancelAnimationFrame(s)}function te(Ve){if(!_.state.isDestroyed){j("onBeforeUpdate",[_,Ve]),H();var be=_.props,ke=yZ(e,Object.assign({},be,pZ(Ve),{ignoreAttributes:!0}));_.props=ke,Ae(),be.interactiveDebounce!==ke.interactiveDebounce&&(de(),g=hZ(D,ke.interactiveDebounce)),be.triggerTarget&&!ke.triggerTarget?Mg(be.triggerTarget).forEach(function(Ge){Ge.removeAttribute("aria-expanded")}):ke.triggerTarget&&e.removeAttribute("aria-expanded"),q(),N(),$&&$(be,ke),_.popperInstance&&(U(),k().forEach(function(Ge){requestAnimationFrame(Ge._tippy.popperInstance.forceUpdate)})),j("onAfterUpdate",[_,Ve])}}function ge(Ve){_.setProps({content:Ve})}function xe(){var Ve=_.state.isVisible,be=_.state.isDestroyed,ke=!_.state.isEnabled,Ge=hh.isTouch&&!_.props.touch,ut=gR(_.props.duration,0,lc.duration);if(!(Ve||be||ke||Ge)&&!K().hasAttribute("disabled")&&(j("onShow",[_],!1),_.props.onShow(_)!==!1)){if(_.state.isVisible=!0,J()&&(I.style.visibility="visible"),N(),_e(),_.state.isMounted||(I.style.transition="none"),J()){var pt=y(),gt=pt.box,Rt=pt.content;vR([gt,Rt],0)}f=function(){var qt;if(!(!_.state.isVisible||u)){if(u=!0,I.offsetHeight,I.style.transition=_.props.moveTransition,J()&&_.props.animation){var zt=y(),xi=zt.box,Or=zt.content;vR([xi,Or],ut),HS([xi,Or],"visible")}oe(),q(),dZ(wR,_),(qt=_.popperInstance)==null||qt.forceUpdate(),j("onMount",[_]),_.props.animation&&J()&&Me(ut,function(){_.state.isShown=!0,j("onShown",[_])})}},ie()}}function fe(){var Ve=!_.state.isVisible,be=_.state.isDestroyed,ke=!_.state.isEnabled,Ge=gR(_.props.duration,1,lc.duration);if(!(Ve||be||ke)&&(j("onHide",[_],!1),_.props.onHide(_)!==!1)){if(_.state.isVisible=!1,_.state.isShown=!1,u=!1,o=!1,J()&&(I.style.visibility="hidden"),de(),Se(),N(!0),J()){var ut=y(),pt=ut.box,gt=ut.content;_.props.animation&&(vR([pt,gt],Ge),HS([pt,gt],"hidden"))}oe(),q(),_.props.animation?J()&&Oe(Ge,_.unmount):_.unmount()}}function ze(Ve){Q().addEventListener("mousemove",g),dZ(BM,g),g(Ve)}function He(){_.state.isVisible&&_.hide(),_.state.isMounted&&(le(),k().forEach(function(Ve){Ve._tippy.unmount()}),I.parentNode&&I.parentNode.removeChild(I),wR=wR.filter(function(Ve){return Ve!==_}),_.state.isMounted=!1,j("onHidden",[_]))}function Xe(){_.state.isDestroyed||(_.clearDelayTimeouts(),_.unmount(),H(),delete e._tippy,_.state.isDestroyed=!0,j("onDestroy",[_]))}}function Gt(e,t){t===void 0&&(t={});var i=lc.plugins.concat(t.plugins||[]);rXe();var r=Object.assign({},t,{plugins:i}),n=XQe(e),s=n.reduce(function(o,a){var l=a&&pXe(a,r);return l&&o.push(l),o},[]);return FC(e)?s[0]:s}Gt.defaultProps=lc;Gt.setDefaultProps=uXe;Gt.currentInput=hh;var fXe=Object.assign({},yde,{effect:function(t){var i=t.state,r={popper:{position:i.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(i.elements.popper.style,r.popper),i.styles=r,i.elements.arrow&&Object.assign(i.elements.arrow.style,r.arrow)}}),mXe=function(t,i){var r;i===void 0&&(i={});var n=t,s=[],o=[],a,l=i.overrides,u=[],c=!1;function d(){o=n.map(function(_){return Mg(_.props.triggerTarget||_.reference)}).reduce(function(_,M){return _.concat(M)},[])}function f(){s=n.map(function(_){return _.reference})}function m(_){n.forEach(function(M){_?M.enable():M.disable()})}function g(_){return n.map(function(M){var I=M.setProps;return M.setProps=function($){I($),M.reference===a&&_.setProps($)},function(){M.setProps=I}})}function v(_,M){var I=o.indexOf(M);if(M!==a){a=M;var $=(l||[]).concat("content").reduce(function(L,B){return L[B]=n[I].props[B],L},{});_.setProps(Object.assign({},$,{getReferenceClientRect:typeof $.getReferenceClientRect=="function"?$.getReferenceClientRect:function(){var L;return(L=s[I])==null?void 0:L.getBoundingClientRect()}}))}}m(!1),f(),d();var b={fn:function(){return{onDestroy:function(){m(!0)},onHidden:function(){a=null},onClickOutside:function(I){I.props.showOnCreate&&!c&&(c=!0,a=null)},onShow:function(I){I.props.showOnCreate&&!c&&(c=!0,v(I,s[0]))},onTrigger:function(I,$){v(I,$.currentTarget)}}}},x=Gt(c0(),Object.assign({},JQe(i,["overrides"]),{plugins:[b].concat(i.plugins||[]),triggerTarget:o,popperOptions:Object.assign({},i.popperOptions,{modifiers:[].concat(((r=i.popperOptions)==null?void 0:r.modifiers)||[],[fXe])})})),S=x.show;x.show=function(_){if(S(),!a&&_==null)return v(x,s[0]);if(!(a&&_==null)){if(typeof _=="number")return s[_]&&v(x,s[_]);if(n.indexOf(_)>=0){var M=_.reference;return v(x,M)}if(s.indexOf(_)>=0)return v(x,_)}},x.showNext=function(){var _=s[0];if(!a)return x.show(0);var M=s.indexOf(a);x.show(s[M+1]||_)},x.showPrevious=function(){var _=s[s.length-1];if(!a)return x.show(_);var M=s.indexOf(a),I=s[M-1]||_;x.show(I)};var T=x.setProps;return x.setProps=function(_){l=_.overrides||l,T(_)},x.setInstances=function(_){m(!0),u.forEach(function(M){return M()}),n=_,m(!1),f(),d(),u=g(x),x.setProps({triggerTarget:o})},u=g(x),x},yXe={name:"animateFill",defaultValue:!1,fn:function(t){var i;if(!((i=t.props.render)!=null&&i.$$tippy))return{};var r=P5(t.popper),n=r.box,s=r.content,o=t.props.animateFill?gXe():null;return{onCreate:function(){o&&(n.insertBefore(o,n.firstElementChild),n.setAttribute("data-animatefill",""),n.style.overflow="hidden",t.setProps({arrow:!1,animation:"shift-away"}))},onMount:function(){if(o){var l=n.style.transitionDuration,u=Number(l.replace("ms",""));s.style.transitionDelay=Math.round(u/10)+"ms",o.style.transitionDuration=l,HS([o],"visible")}},onShow:function(){o&&(o.style.transitionDuration="0ms")},onHide:function(){o&&HS([o],"hidden")}}}};function gXe(){var e=c0();return e.className=Ede,HS([e],"hidden"),e}var TN={clientX:0,clientY:0},zM=[];function Lde(e){var t=e.clientX,i=e.clientY;TN={clientX:t,clientY:i}}function vXe(e){e.addEventListener("mousemove",Lde)}function bXe(e){e.removeEventListener("mousemove",Lde)}var wXe={name:"followCursor",defaultValue:!1,fn:function(t){var i=t.reference,r=$de(t.props.triggerTarget||i),n=!1,s=!1,o=!0,a=t.props;function l(){return t.props.followCursor==="initial"&&t.state.isVisible}function u(){r.addEventListener("mousemove",f)}function c(){r.removeEventListener("mousemove",f)}function d(){n=!0,t.setProps({getReferenceClientRect:null}),n=!1}function f(v){var b=v.target?i.contains(v.target):!0,x=t.props.followCursor,S=v.clientX,T=v.clientY,_=i.getBoundingClientRect(),M=S-_.left,I=T-_.top;(b||!t.props.interactive)&&t.setProps({getReferenceClientRect:function(){var L=i.getBoundingClientRect(),B=S,z=T;x==="initial"&&(B=L.left+M,z=L.top+I);var W=x==="horizontal"?L.top:z,J=x==="vertical"?L.right:B,K=x==="horizontal"?L.bottom:z,Q=x==="vertical"?L.left:B;return{width:J-Q,height:K-W,top:W,right:J,bottom:K,left:Q}}})}function m(){t.props.followCursor&&(zM.push({instance:t,doc:r}),vXe(r))}function g(){zM=zM.filter(function(v){return v.instance!==t}),zM.filter(function(v){return v.doc===r}).length===0&&bXe(r)}return{onCreate:m,onDestroy:g,onBeforeUpdate:function(){a=t.props},onAfterUpdate:function(b,x){var S=x.followCursor;n||S!==void 0&&a.followCursor!==S&&(g(),S?(m(),t.state.isMounted&&!s&&!l()&&u()):(c(),d()))},onMount:function(){t.props.followCursor&&!s&&(o&&(f(TN),o=!1),l()||u())},onTrigger:function(b,x){jj(x)&&(TN={clientX:x.clientX,clientY:x.clientY}),s=x.type==="focus"},onHidden:function(){t.props.followCursor&&(d(),c(),o=!0)}}}};function _Xe(e,t){var i;return{popperOptions:Object.assign({},e.popperOptions,{modifiers:[].concat((((i=e.popperOptions)==null?void 0:i.modifiers)||[]).filter(function(r){var n=r.name;return n!==t.name}),[t])})}}var xXe={name:"inlinePositioning",defaultValue:!1,fn:function(t){var i=t.reference;function r(){return!!t.props.inlinePositioning}var n,s=-1,o=!1,a=[],l={name:"tippyInlinePositioning",enabled:!0,phase:"afterWrite",fn:function(m){var g=m.state;r()&&(a.indexOf(g.placement)!==-1&&(a=[]),n!==g.placement&&a.indexOf(g.placement)===-1&&(a.push(g.placement),t.setProps({getReferenceClientRect:function(){return u(g.placement)}})),n=g.placement)}};function u(f){return SXe(Cde(f),i.getBoundingClientRect(),lw(i.getClientRects()),s)}function c(f){o=!0,t.setProps(f),o=!1}function d(){o||c(_Xe(t.props,l))}return{onCreate:d,onAfterUpdate:d,onTrigger:function(m,g){if(jj(g)){var v=lw(t.reference.getClientRects()),b=v.find(function(S){return S.left-2<=g.clientX&&S.right+2>=g.clientX&&S.top-2<=g.clientY&&S.bottom+2>=g.clientY}),x=v.indexOf(b);s=x>-1?x:s}},onHidden:function(){s=-1}}}};function SXe(e,t,i,r){if(i.length<2||e===null)return t;if(i.length===2&&r>=0&&i[0].left>i[1].right)return i[r]||t;switch(e){case"top":case"bottom":{var n=i[0],s=i[i.length-1],o=e==="top",a=n.top,l=s.bottom,u=o?n.left:s.left,c=o?n.right:s.right,d=c-u,f=l-a;return{top:a,bottom:l,left:u,right:c,width:d,height:f}}case"left":case"right":{var m=Math.min.apply(Math,i.map(function(I){return I.left})),g=Math.max.apply(Math,i.map(function(I){return I.right})),v=i.filter(function(I){return e==="left"?I.left===m:I.right===g}),b=v[0].top,x=v[v.length-1].bottom,S=m,T=g,_=T-S,M=x-b;return{top:b,bottom:x,left:S,right:T,width:_,height:M}}default:return t}}var EXe={name:"sticky",defaultValue:!1,fn:function(t){var i=t.reference,r=t.popper;function n(){return t.popperInstance?t.popperInstance.state.elements.reference:i}function s(u){return t.props.sticky===!0||t.props.sticky===u}var o=null,a=null;function l(){var u=s("reference")?n().getBoundingClientRect():null,c=s("popper")?r.getBoundingClientRect():null;(u&&bZ(o,u)||c&&bZ(a,c))&&t.popperInstance&&t.popperInstance.update(),o=u,a=c,t.state.isMounted&&requestAnimationFrame(l)}return{onMount:function(){t.props.sticky&&l()}}}};function bZ(e,t){return e&&t?e.top!==t.top||e.right!==t.right||e.bottom!==t.bottom||e.left!==t.left:!0}Gt.setDefaultProps({render:kde});Gt.setDefaultProps({onShow:e=>{if(!e.props.content)return!1}});function Uj(e,t={},i={mount:!0}){const r=Cs(),n=tt(),s=tt({isEnabled:!1,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1});let o=null;const a=()=>o||(o=document.createDocumentFragment(),o),l=I=>{let $,L=er(I)?I.value:I;if(Ph(L))r&&(L.appContext=r.appContext),Wd(L,a()),$=()=>a();else if(typeof L=="object"){let B=Nh(L);r&&(B.appContext=r.appContext),Wd(B,a()),$=()=>a()}else $=L;return $},u=I=>{let $={};return er(I)?$=I.value||{}:uu(I)?$={...I}:$={...I},$.content&&($.content=l($.content)),$.triggerTarget&&($.triggerTarget=er($.triggerTarget)?$.triggerTarget.value:$.triggerTarget),(!$.plugins||!Array.isArray($.plugins))&&($.plugins=[]),$.plugins=$.plugins.filter(L=>L.name!=="vueTippyReactiveState"),$.plugins.push({name:"vueTippyReactiveState",fn:()=>({onCreate(){s.value.isEnabled=!0},onMount(){s.value.isMounted=!0},onShow(){s.value.isMounted=!0,s.value.isVisible=!0},onShown(){s.value.isShown=!0},onHide(){s.value.isMounted=!1,s.value.isVisible=!1},onHidden(){s.value.isShown=!1},onUnmounted(){s.value.isMounted=!1},onDestroy(){s.value.isDestroyed=!0}})}),$},c=()=>{n.value&&n.value.setProps(u(t))},d=()=>{!n.value||!t.content||n.value.setContent(l(t.content))},f=I=>{var $;($=n.value)===null||$===void 0||$.setContent(l(I))},m=I=>{var $;($=n.value)===null||$===void 0||$.setProps(u(I))},g=()=>{n.value&&(n.value.destroy(),n.value=void 0),o=null},v=()=>{var I;(I=n.value)===null||I===void 0||I.show()},b=()=>{var I;(I=n.value)===null||I===void 0||I.hide()},x=()=>{var I;(I=n.value)===null||I===void 0||I.disable(),s.value.isEnabled=!1},S=()=>{var I;(I=n.value)===null||I===void 0||I.enable(),s.value.isEnabled=!0},T=()=>{var I;(I=n.value)===null||I===void 0||I.unmount()},_=()=>{if(!e)return;let I=er(e)?e.value:e;typeof I=="function"&&(I=I()),I&&(n.value=Gt(I,u(t)),I.$tippy=M)},M={tippy:n,refresh:c,refreshContent:d,setContent:f,setProps:m,destroy:g,hide:b,show:v,disable:x,enable:S,unmount:T,mount:_,state:s};return i.mount&&(r?(r.isMounted?_():Eo(_),e1(()=>{g()})):_()),er(t)||uu(t)?Gn(t,c,{immediate:!1}):er(t.content)&&Gn(t.content,d,{immediate:!1}),M}function MXe(e,t){const i=tt();return Eo(()=>{const n=(Array.isArray(e)?e.map(s=>s.value):typeof e=="function"?e():e.value).map(s=>s instanceof Element?s._tippy:s).filter(Boolean);i.value=mXe(n,t?{allowHTML:!0,...t}:{allowHTML:!0})}),{singleton:i}}const IXe=Vi({props:{to:{type:[String,Function]},tag:{type:String,default:"span"},contentTag:{type:String,default:"span"},contentClass:{type:String,default:null},appendTo:{default:()=>Gt.defaultProps.appendTo},aria:{default:()=>Gt.defaultProps.aria},delay:{default:()=>Gt.defaultProps.delay},duration:{default:()=>Gt.defaultProps.duration},getReferenceClientRect:{default:()=>Gt.defaultProps.getReferenceClientRect},hideOnClick:{type:[Boolean,String],default:()=>Gt.defaultProps.hideOnClick},ignoreAttributes:{type:Boolean,default:()=>Gt.defaultProps.ignoreAttributes},interactive:{type:Boolean,default:()=>Gt.defaultProps.interactive},interactiveBorder:{default:()=>Gt.defaultProps.interactiveBorder},interactiveDebounce:{default:()=>Gt.defaultProps.interactiveDebounce},moveTransition:{default:()=>Gt.defaultProps.moveTransition},offset:{default:()=>Gt.defaultProps.offset},onAfterUpdate:{default:()=>Gt.defaultProps.onAfterUpdate},onBeforeUpdate:{default:()=>Gt.defaultProps.onBeforeUpdate},onCreate:{default:()=>Gt.defaultProps.onCreate},onDestroy:{default:()=>Gt.defaultProps.onDestroy},onHidden:{default:()=>Gt.defaultProps.onHidden},onHide:{default:()=>Gt.defaultProps.onHide},onMount:{default:()=>Gt.defaultProps.onMount},onShow:{default:()=>Gt.defaultProps.onShow},onShown:{default:()=>Gt.defaultProps.onShown},onTrigger:{default:()=>Gt.defaultProps.onTrigger},onUntrigger:{default:()=>Gt.defaultProps.onUntrigger},onClickOutside:{default:()=>Gt.defaultProps.onClickOutside},placement:{default:()=>Gt.defaultProps.placement},plugins:{default:()=>Gt.defaultProps.plugins},popperOptions:{default:()=>Gt.defaultProps.popperOptions},render:{default:()=>Gt.defaultProps.render},showOnCreate:{type:Boolean,default:()=>Gt.defaultProps.showOnCreate},touch:{type:[Boolean,String,Array],default:()=>Gt.defaultProps.touch},trigger:{default:()=>Gt.defaultProps.trigger},triggerTarget:{default:()=>Gt.defaultProps.triggerTarget},animateFill:{type:Boolean,default:()=>Gt.defaultProps.animateFill},followCursor:{type:[Boolean,String],default:()=>Gt.defaultProps.followCursor},inlinePositioning:{type:Boolean,default:()=>Gt.defaultProps.inlinePositioning},sticky:{type:[Boolean,String],default:()=>Gt.defaultProps.sticky},allowHTML:{type:Boolean,default:()=>Gt.defaultProps.allowHTML},animation:{default:()=>Gt.defaultProps.animation},arrow:{default:()=>Gt.defaultProps.arrow},content:{default:()=>Gt.defaultProps.content},inertia:{default:()=>Gt.defaultProps.inertia},maxWidth:{default:()=>Gt.defaultProps.maxWidth},role:{default:()=>Gt.defaultProps.role},theme:{default:()=>Gt.defaultProps.theme},zIndex:{default:()=>Gt.defaultProps.zIndex}},emits:["state"],setup(e,{slots:t,emit:i,expose:r}){const n=tt(),s=tt(),o=tt(!1),a=()=>{let d={...e};for(const f of["to","tag","contentTag","contentClass"])d.hasOwnProperty(f)&&delete d[f];return d};let l=n;e.to&&(typeof Element<"u"&&e.to instanceof Element?l=()=>e.to:(typeof e.to=="string"||e.to instanceof String)&&(l=()=>document.querySelector(e.to)));const u=Uj(l,a());Eo(()=>{o.value=!0,Bh(()=>{t.content&&u.setContent(()=>s.value)})}),Gn(u.state,()=>{i("state",si(u.state))},{immediate:!0,deep:!0}),Gn(()=>e,()=>{u.setProps(a()),t.content&&u.setContent(()=>s.value)},{deep:!0});let c=Hn({elem:n,contentElem:s,mounted:o,...u});return r(c),()=>{const d=t.default?t.default(c):[];return Nh(e.tag,{ref:n,"data-v-tippy":""},t.content?[d,Nh(e.contentTag,{ref:s,style:{display:o.value?"inherit":"none"},class:e.contentClass},t.content(c))]:d)}}}),TXe=["a11y","allowHTML","arrow","flip","flipOnUpdate","hideOnClick","ignoreAttributes","inertia","interactive","lazy","multiple","showOnInit","touch","touchHold"];let AN={};Object.keys(Gt.defaultProps).forEach(e=>{TXe.includes(e)?AN[e]={type:Boolean,default:function(){return Gt.defaultProps[e]}}:AN[e]={default:function(){return Gt.defaultProps[e]}}});const AXe=Vi({props:AN,setup(e){const t=tt([]),{singleton:i}=MXe(t,e);return{instances:t,singleton:i}},mounted(){var e;const i=this.$el.parentElement.querySelectorAll("[data-v-tippy]");this.instances=Array.from(i).map(r=>r._tippy).filter(Boolean),(e=this.singleton)===null||e===void 0||e.setInstances(this.instances)},render(){let e=this.$slots.default?this.$slots.default():[];return Nh(()=>e)}}),CXe={mounted(e,t,i){const r=typeof t.value=="string"?{content:t.value}:t.value||{},n=Object.keys(t.modifiers||{}),s=n.find(a=>a!=="arrow"),o=n.findIndex(a=>a==="arrow")!==-1;s&&(r.placement=r.placement||s),o&&(r.arrow=r.arrow!==void 0?r.arrow:!0),i.props&&i.props.onTippyShow&&(r.onShow=function(...a){var l;return(l=i.props)===null||l===void 0?void 0:l.onTippyShow(...a)}),i.props&&i.props.onTippyShown&&(r.onShown=function(...a){var l;return(l=i.props)===null||l===void 0?void 0:l.onTippyShown(...a)}),i.props&&i.props.onTippyHidden&&(r.onHidden=function(...a){var l;return(l=i.props)===null||l===void 0?void 0:l.onTippyHidden(...a)}),i.props&&i.props.onTippyHide&&(r.onHide=function(...a){var l;return(l=i.props)===null||l===void 0?void 0:l.onTippyHide(...a)}),i.props&&i.props.onTippyMount&&(r.onMount=function(...a){var l;return(l=i.props)===null||l===void 0?void 0:l.onTippyMount(...a)}),e.getAttribute("title")&&!r.content&&(r.content=e.getAttribute("title"),e.removeAttribute("title")),e.getAttribute("content")&&!r.content&&(r.content=e.getAttribute("content")),Uj(e,r)},unmounted(e){e.$tippy?e.$tippy.destroy():e._tippy&&e._tippy.destroy()},updated(e,t){const i=typeof t.value=="string"?{content:t.value}:t.value||{};e.getAttribute("title")&&!i.content&&(i.content=e.getAttribute("title"),e.removeAttribute("title")),e.getAttribute("content")&&!i.content&&(i.content=e.getAttribute("content")),e.$tippy?e.$tippy.setProps(i||{}):e._tippy&&e._tippy.setProps(i||{})}},$Xe={install(e,t={}){Gt.setDefaultProps(t.defaultProps||{}),e.directive(t.directive||"tippy",CXe),e.component(t.component||"tippy",IXe),e.component(t.componentSingleton||"tippy-singleton",AXe)}},Pde=Gt.setDefaultProps;Pde({ignoreAttributes:!0,plugins:[EXe,xXe,wXe,yXe]});const OXe=$Xe,RXe=Vi({name:"App",components:{Shell:VKe},setup(){const e=Cs();Eo(()=>{new Khe().observe(e?.proxy?.$refs["app-size"]),Pde({aria:{content:"labelledby"},theme:"ramp4",animation:"scale",inertia:!0,trigger:"mouseenter manual focus",touch:["hold",200],delay:[300,0],appendTo:e?.proxy?.$el})})}});const kXe=["lang"],LXe={class:"h-full",ref:"app-size"};function PXe(e,t,i,r,n,s){const o=Cn("shell");return ht(),$t("div",{class:"ramp-app ramp-styles animation-enabled",lang:e.$i18n.locale},[at("div",LXe,[gi(o)],512)],8,kXe)}const NXe=wp(RXe,[["render",PXe]]),dh="focus-list",fy="focus-item",FXe="focus-container",yb=`[${dh}],[${FXe}]`,GM="truncate-text",qM="show-truncate",Gv="focused",Nde=`button,input,select,a,textarea,[contenteditable],[${dh}]`,DXe={mounted(e,t){+e.getAttribute("tabindex")<=0&&e.setAttribute("tabindex","0"),e.toggleAttribute(dh,!0),new jXe(e,t.value)},updated(e){Fde(e)}};function Fde(e){e.querySelectorAll(Nde).forEach(i=>{if(i.closest(yb)===e||i.closest(yb)===i&&i.parentElement.closest(yb)===e)if(i.closest(`[${dh}],.${Gv}`).classList.contains(Gv))i.setAttribute("tabindex","0");else{i.setAttribute("tabindex","-1");return}})}class jXe{element;highlightedItem;isHorizontal;isClicked;isTapped;constructor(t,i){this.element=t,this.highlightedItem=this.element,this.isHorizontal=i==="horizontal",this.isClicked=!1,this.isTapped=!1,this.setTabIndex(-1),this.element.setAttribute("role","group");const r=this;t.addEventListener("keydown",function(n){r.onKeydown(n)}),t.addEventListener("click",function(n){r.onClick(n)}),t.addEventListener("focus",function(){r.onFocus()}),t.addEventListener("blur",function(){r.onBlur()}),t.addEventListener("mousedown",function(){r.onMousedown()}),t.addEventListener("touchstart",function(){r.onTouchstart()})}setTabIndex(t,i=this.element){i.querySelectorAll(Nde).forEach(n=>{(t===-1||n.closest(yb)===this.element||n.closest(yb)===n&&n.parentElement.closest(yb)===this.element||n.closest(`[${dh}],.${Gv}`).classList.contains(Gv))&&n.setAttribute("tabindex",t.toString())})}defocusItem(t){t.classList.remove(Gv),this.setTabIndex(-1,t),t._tippy&&t._tippy.hide(),t.getAttribute(fy)===qM&&t.querySelector(`[${GM}]`)?._tippy?.hide()}focusItem(t){t.classList.add(Gv),this.setAriaActiveDescendant(t),this.setTabIndex(0,t),t.scrollIntoView({block:"nearest"}),t._tippy&&!this.isTapped&&t._tippy.show(),t.getAttribute(fy)===qM&&t.querySelector(`[${GM}]`)?._tippy?.show(),this.isTapped=!1}setAriaActiveDescendant(t){this.element.setAttribute("aria-activedescendant",t.getAttribute("id"))}shiftHighlight(t,i=!1){if(this.defocusItem(this.highlightedItem),i)if(this.highlightedItem===this.element)this.highlightedItem=t[t.length-1];else{const r=Array.prototype.indexOf.call(t,this.highlightedItem);this.highlightedItem=t[r-1]||t[t.length-1]}else if(this.highlightedItem===this.element)this.highlightedItem=t[0];else{const r=Array.prototype.indexOf.call(t,this.highlightedItem);this.highlightedItem=t[r+1]||t[0]}this.element.focus(),this.focusItem(this.highlightedItem)}onKeydown(t){const i=this,r=Array.prototype.filter.call(this.element.querySelectorAll(`[${fy}]`),n=>n.closest(`[${dh}]`)===i.element&&!!n.offsetParent);if(r.length!==0)switch(t.key){case"Up":case"ArrowUp":if(this.isHorizontal)break;t.preventDefault(),t.stopPropagation(),this.shiftHighlight(r,!0);break;case"Down":case"ArrowDown":if(this.isHorizontal)break;t.preventDefault(),t.stopPropagation(),this.shiftHighlight(r);break;case"Left":case"ArrowLeft":if(!this.isHorizontal)break;t.preventDefault(),t.stopPropagation(),this.shiftHighlight(r,!0);break;case"Right":case"ArrowRight":if(!this.isHorizontal)break;t.preventDefault(),t.stopPropagation(),this.shiftHighlight(r);break;case"Esc":case"Escape":this.highlightedItem!==this.element&&(t.preventDefault(),t.stopPropagation(),this.defocusItem(this.highlightedItem),this.highlightedItem=this.element,this.element.removeAttribute("aria-activedescendant"),this.element.focus());break;case"Enter":case" ":t.target===this.element&&this.highlightedItem!==this.element&&(t.preventDefault(),t.stopPropagation(),this.highlightedItem.click());break}}onClick(t){this.defocusItem(this.highlightedItem);let i=t.target;if(!i.hasAttribute(dh))for(;i.parentElement.closest(`[${dh}]`)!==this.element;)i=i.parentElement.closest(`[${dh}]`);this.highlightedItem=i.closest(`[${fy}]`)||i.closest(`[${dh}]`)||this.highlightedItem,i.hasAttribute(`${fy}`)&&this.element.focus(),this.highlightedItem!==this.element?this.focusItem(this.highlightedItem):this.element.removeAttribute("aria-activedescendant")}onFocus(){this.highlightedItem&&!this.isClicked&&(this.highlightedItem._tippy&&this.highlightedItem._tippy.show(),this.highlightedItem.getAttribute(fy)===qM&&this.highlightedItem.querySelector(`[${GM}]`)?._tippy?.show()),this.isClicked=!1,this.element.hasAttribute("aria-activedescendant")||this.highlightedItem===this.element||this.setAriaActiveDescendant(this.highlightedItem),Fde(this.element)}onBlur(){this.highlightedItem&&(this.highlightedItem._tippy&&this.highlightedItem._tippy.hide(),this.highlightedItem.getAttribute(fy)===qM&&this.highlightedItem.querySelector(`[${GM}]`)?._tippy?.hide())}onMousedown(){this.isClicked=!0}onTouchstart(){this.isTapped=!0}}const wZ="focus-item",UXe={beforeMount(e,t){e.hasAttribute("id")||e.setAttribute("id",VXe()),t.value?e.setAttribute(wZ,t.value):e.toggleAttribute(wZ,!0)}};function VXe(){let e;do e="focus-item-"+Math.random().toString(36).substring(2,9);while(document.getElementById(e)!==null);return e}const Vj="focus-container",Dde="focus-list",_R=`[${Dde}],[${Vj}]`,_Z=`button,input,select,a,textarea,[contenteditable],.ag-tab-guard,[${Dde}],[${Vj}]`;let xR=[];const BXe={mounted(e){[...document.querySelectorAll(".inner-shell")].some(i=>i.contains(e))&&xR.push(new zXe(e))},beforeUnmount(e){xR=xR.filter(t=>t.element===e?(t.removeEventListeners(),!1):!0)}};class zXe{element;constructor(t){this.element=t,this.element.toggleAttribute(Vj,!0),this.element.tabIndex=0,this.disableTabbing();const i=this;this.element.addEventListener("keypress",function(r){i.onKeypress(r)}),this.element.addEventListener("click",function(){i.onClick()}),this.element.addEventListener("focusout",function(r){i.onFocusOut(r)}),this.element.addEventListener("focus",function(){i.onFocus()})}removeEventListeners(){const t=this;this.element.removeEventListener("keypress",function(i){t.onKeypress(i)}),this.element.removeEventListener("click",function(){t.onClick()}),this.element.removeEventListener("focusout",function(i){t.onFocusOut(i)}),this.element.removeEventListener("focus",function(){t.onFocus()})}onKeypress(t){t.target===this.element&&(t.key==="Enter"||t.key===" ")&&this.enableTabbing().focus()}onClick(){this.enableTabbing()}onFocusOut(t){this.element.contains(t.relatedTarget)||this.disableTabbing()}onFocus(){this.disableTabbing()}disableTabbing(){Array.prototype.filter.call(this.element.querySelectorAll(_Z),()=>!0).forEach(i=>{i.tabIndex=-1})}enableTabbing(){let t;return Array.prototype.map.call(this.element.querySelectorAll(_Z),i=>{(i.closest(_R)===this.element||i.closest(_R)===i&&i.parentElement.closest(_R)===this.element)&&i.offsetParent&&(i.tabIndex=0,t===void 0&&(t=i))}),t}}const GXe="truncate-text",qXe="truncate-trigger",HXe={beforeMount(e){e.classList.contains("truncate")||e.classList.add("truncate"),e.toggleAttribute(GXe,!0)},mounted(e,t){let i;t.value&&t.value.externalTrigger&&(i=e.closest(`[${qXe}]`)),Uj(e,{content:e.textContent,onShow:WXe,placement:"bottom-start",triggerTarget:i,...t.value?.options||{}})},updated(e,t){e._tippy&&(e._tippy.setContent(e.textContent),t.value&&t.value.options&&e._tippy.setProps(t.value.options))},unmounted(e){e._tippy&&e._tippy.destroy()}};function WXe(e){if(e.reference.clientWidth>=e.reference.scrollWidth)return!1}const JXe=["content"],ZXe={key:0,class:"flex flex-shrink-0 items-center border-b border-solid border-gray-600 px-8 h-48 overflow-hidden",tabindex:"-1"},YXe={class:"flex-grow text-lg py-16 pl-8 min-w-0"},KXe={key:0,class:"flex"},QXe={key:1,class:"p-8 flex-grow overflow-y-auto"},XXe={key:2,class:"px-16 py-16 border-t border-gray-400 default-focus-style"},eet=Vi({__name:"panel-screen",props:{header:{type:Boolean,default:!0},content:{type:Boolean,default:!0},footer:{type:Boolean,default:!1},panel:{type:Object,required:!0}},setup(e){const t=e,{t:i}=Jr(),r=N0(),n=A5(),s=hs("iApi"),o=tt(),a=$i(()=>s?.fixture.get("appbar")?n.temporary:[]),l=$i(()=>r.mobileView),u=$i(()=>r.reorderable),c=()=>!l.value&&!t.panel.teleport,d=f=>{t.panel.move(f),f==="left"&&Bh(()=>{(o.value?.querySelector(".move-left")).focus()})};return Eo(()=>{o.value?.addEventListener("blur",()=>{o.value._tippy.hide()}),o.value?.addEventListener("keyup",f=>{f.key==="Tab"&&o.value?.matches(":focus")&&o.value._tippy.show()})}),zh(()=>{o.value?.removeEventListener("blur",()=>{o.value._tippy.hide()}),o.value?.removeEventListener("keyup",f=>{f.key==="Tab"&&o.value?.matches(":focus")&&o.value._tippy.show()})}),(f,m)=>{const g=Cn("back"),v=Cn("panel-options-menu"),b=Cn("left"),x=Cn("right"),S=Cn("pin"),T=Cn("expand"),_=Cn("minimize"),M=Cn("close"),I=mr("truncate"),$=mr("focus-item"),L=mr("tippy");return sr((ht(),$t("div",{class:"h-full flex flex-col items-stretch",content:si(i)("panels.access"),ref_key:"el",ref:o},[e.header?(ht(),$t("header",ZXe,[gi(g,{class:bn(e.panel.teleport?"display-none":"block sm:display-none"),onClick:m[0]||(m[0]=B=>e.panel.close())},null,8,["class"]),sr((ht(),$t("h2",YXe,[ac(f.$slots,"header")])),[[I]]),f.$slots.controls?(ht(),Ur(v,{key:0},{default:kn(()=>[ac(f.$slots,"controls")]),_:3})):rn("",!0),at("div",{class:bn(e.panel.teleport?"flex":"display-none sm:flex")},[e.panel.teleport?rn("",!0):(ht(),$t("div",KXe,[u.value?(ht(),Ur(b,{key:0,onClick:m[1]||(m[1]=B=>d("left")),active:!e.panel.isLeftMostPanel},null,8,["active"])):rn("",!0),u.value?(ht(),Ur(x,{key:1,onClick:m[2]||(m[2]=B=>d("right")),active:!e.panel.isRightMostPanel},null,8,["active"])):rn("",!0),gi(S,{onClick:m[3]||(m[3]=B=>e.panel.pin()),active:e.panel.isPinned},null,8,["active"]),e.panel.controls&&e.panel.controls.expand?(ht(),Ur(T,{key:2,onClick:m[4]||(m[4]=B=>e.panel.expand()),active:e.panel.expanded},null,8,["active"])):rn("",!0)])),e.panel.button&&a.value?.includes(e.panel.id)?(ht(),Ur(_,{key:1,onClick:m[5]||(m[5]=B=>e.panel.minimize())})):rn("",!0),gi(M,{onClick:m[6]||(m[6]=B=>e.panel.close())})],2)])):rn("",!0),e.content?(ht(),$t("div",QXe,[ac(f.$slots,"content")])):rn("",!0),e.footer?sr((ht(),$t("div",XXe,[ac(f.$slots,"footer")])),[[$]]):rn("",!0)],8,JXe)),[[L,{trigger:"manual",onShow:c,popperOptions:{placement:"top",modifiers:[{name:"preventOverflow",options:{altAxis:!0}},{name:"flip",options:{fallbackPlacements:["top"]}}]}}]])}}}),tet={class:"relative",tabindex:"-1"},iet=["content"],ret=["transform"],net=at("path",{d:"M298.028 214.267L285.793 96H328c13.255 0 24-10.745 24-24V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v48c0 13.255 10.745 24 24 24h42.207L85.972 214.267C37.465 236.82 0 277.261 0 328c0 13.255 10.745 24 24 24h136v104.007c0 1.242.289 2.467.845 3.578l24 48c2.941 5.882 11.364 5.893 14.311 0l24-48a8.008 8.008 0 0 0 .845-3.578V352h136c13.255 0 24-10.745 24-24-.001-51.183-37.983-91.42-85.973-113.733z"},null,-1),set=[net],oet=Vi({__name:"pin",props:{active:Boolean},setup(e){const{t}=Jr();return(i,r)=>{const n=mr("tippy");return ht(),$t("div",tet,[sr((ht(),$t("button",{type:"button",class:bn(["text-gray-500 hover:text-black focus:text-black p-8",{"text-gray-700":e.active}]),content:si(t)(e.active?"panels.controls.unpin":"panels.controls.pin")},[(ht(),$t("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",transform:`rotate(${e.active?30:0})`},set,8,ret))],10,iet)),[[n,{placement:"bottom",hideOnClick:!1}]])])}}}),aet={class:"relative",tabindex:"-1"},uet=["content"],cet=at("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 352 512"},[at("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"})],-1),het=[cet],det=Vi({__name:"close",props:{active:Boolean},setup(e){const{t}=Jr();return(i,r)=>{const n=mr("tippy");return ht(),$t("div",aet,[sr((ht(),$t("button",{type:"button",class:bn(["text-gray-500 hover:text-black focus:text-black p-8",{"text-gray-700":e.active}]),content:si(t)("panels.controls.close")},het,10,uet)),[[n,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}}}),pet={class:"relative",tabindex:"-1"},fet=["content"],met=at("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-16 h-16",viewBox:"0 0 16 16"},[at("path",{d:"M20.485784919653916,7.578491965389372h-14.170000000000005l3.5800000000000054,-3.589999999999997l-1.409999999999993,-1.4099999999999984l-6.000000000000008,6.0000000000000275l6.000000000000008,6l1.409999999999993,-1.4100000000000001l-3.58,-3.59h14.170000000000007Z",transform:"matrix(0.865803 0 0 0.865803 -1.99071 0.638058)"})],-1),yet=[met],get=Vi({__name:"back",props:{active:Boolean},setup(e){const{t}=Jr();return(i,r)=>{const n=mr("tippy");return ht(),$t("div",pet,[sr((ht(),$t("button",{type:"button",class:bn(["text-gray-500 hover:text-black focus:text-black p-8",{"text-gray-700":e.active}]),content:si(t)("panels.controls.back")},yet,10,fet)),[[n,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}}}),vet={class:"w-32 h-32"},bet=["content"],wet={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"h-24 w-24 fill-current transform rotate-90"},_et=at("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),xet=at("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),Eet=at("path",{d:"M4 20h16v2H4zM4 2h16v2H4zm9 7h3l-4-4-4 4h3v6H8l4 4 4-4h-3z"},null,-1),Met=[_et,xet,Eet],Iet={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"h-24 w-24 fill-current transform rotate-90"},Tet=at("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),Aet=at("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),Cet=at("path",{d:"M8 19h3v3h2v-3h3l-4-4-4 4zm8-15h-3V1h-2v3H8l4 4 4-4zM4 9v2h16V9H4z"},null,-1),$et=at("path",{d:"M4 12h16v2H4z"},null,-1),Oet=[Tet,Aet,Cet,$et],Ret=Vi({__name:"expand",props:{active:Boolean},setup(e){const{t}=Jr();return(i,r)=>{const n=mr("tippy");return ht(),$t("div",vet,[sr((ht(),$t("button",{type:"button",class:"text-gray-500 hover:text-black focus:text-black w-full h-full flex justify-center items-center",content:si(t)(`panels.controls.${e.active?"collapse":"expand"}`)},[e.active?(ht(),$t("svg",Iet,Oet)):(ht(),$t("svg",wet,Met))],8,bet)),[[n,{placement:"bottom",theme:"ramp4",animation:"scale",hideOnClick:!1}]])])}}}),ket={class:"relative",tabindex:"-1"},Let=["content"],Pet=at("svg",{class:"fill-current w-20 h-20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[at("path",{d:"M0 0h24v24H0V0z",fill:"none"}),at("path",{d:"M6 19h12v2H6z"})],-1),Net=[Pet],Fet=Vi({__name:"minimize",props:{active:Boolean},setup(e){const{t}=Jr();return(i,r)=>{const n=mr("tippy");return ht(),$t("div",ket,[sr((ht(),$t("button",{type:"button",class:bn(["text-gray-500 hover:text-black focus:text-black p-6",{"text-gray-700":e.active}]),content:si(t)("panels.controls.minimize")},Net,10,Let)),[[n,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}}}),Det={class:"relative",tabindex:"-1"},jet=["content"],Uet=["aria-label"],Vet=at("path",{d:"M 8.59 16.34 L 13.17 11.75 L 8.59 7.16 L 10 5.75 L 16 11.75 L 10 17.75 Z"},null,-1),Bet=[Vet],zet=Vi({__name:"right",props:{active:Boolean},setup(e){const{t}=Jr();return(i,r)=>{const n=mr("tippy");return ht(),$t("div",Det,[sr((ht(),$t("button",{type:"button",class:bn(["p-8",{"text-gray-500 hover:text-black focus:text-black":e.active,"text-gray-300":!e.active}]),content:si(t)("panels.controls.moveRight")},[(ht(),$t("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"4 4 16 16","aria-label":si(t)("panels.controls.moveRight")},Bet,8,Uet))],10,jet)),[[n,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}}}),Get={class:"relative",tabindex:"-1"},qet=["content"],Het=["aria-label"],Wet=at("path",{d:"M 15.41 16.09 L 10.83 11.5 L 15.41 6.91 L 14 5.5 L 8 11.5 L 14 17.5 Z"},null,-1),Jet=[Wet],Zet=Vi({__name:"left",props:{active:Boolean},setup(e){const{t}=Jr();return(i,r)=>{const n=mr("tippy");return ht(),$t("div",Get,[sr((ht(),$t("button",{type:"button",class:bn(["p-8 move-left",{"text-gray-500 hover:text-black focus:text-black":e.active,"text-gray-300":!e.active}]),content:si(t)("panels.controls.moveLeft")},[(ht(),$t("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"4 4 16 16","aria-label":si(t)("panels.controls.moveLeft")},Jet,8,Het))],10,qet)),[[n,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}}}),Yet=e=>(zm("data-v-a89be5c5"),e=e(),Gm(),e),Ket=Yet(()=>at("div",{class:"p-6"},[at("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-20 h-20"},[at("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})])],-1)),Qet=Vi({__name:"panel-options-menu",setup(e){const{t}=Jr();return(i,r)=>(ht(),Ur(Oj,{class:"flex",tooltip:si(t)("panels.controls.optionsMenu"),popperOptions:{strategy:"fixed"},position:"bottom-end"},{header:kn(()=>[Ket]),default:kn(()=>[ac(i.$slots,"default",{},void 0,!0)]),_:3},8,["tooltip"]))}});const Xet=wp(Qet,[["__scopeId","data-v-a89be5c5"]]),ett={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},ttt=at("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),itt=at("path",{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},null,-1),rtt=[ttt,itt],ntt={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},stt=at("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),ott=at("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},null,-1),att=[stt,ott],ltt=Vi({__name:"fullscreen-nav",setup(e){const{t}=Jr(),i=hs("iApi"),r=()=>{i.toggleFullscreen()};return(n,s)=>{const o=Cn("mapnav-button");return ht(),Ur(o,{onClickFunction:r,tooltip:si(t)("mapnav.fullscreen")},{default:kn(()=>[si(i).isFullscreen?(ht(),$t("svg",ett,rtt)):(ht(),$t("svg",ntt,att))]),_:1},8,["tooltip"])}}}),utt=at("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},[at("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"})],-1),ctt=Vi({__name:"geolocator-nav",setup(e){const{t}=Jr(),i=hs("iApi");let r=Hn([]);const n=async()=>{if(r.length)s(r);else{const a=await o({maximumAge:1/0,timeout:5e3}).catch(l=>{l.code===GeolocationPositionError.PERMISSION_DENIED?i.notify.show(Ah.ERROR,t("mapnav.geolocator.error.permission")):i.notify.show(Ah.ERROR,t("mapnav.geolocator.error.internal"))});a&&(r=[a.coords.longitude,a.coords.latitude],s(r))}},s=a=>{let l=new zo("geolocation",a,Si.latLongSR(),!0);i.geo.map.zoomMapTo(l)},o=a=>new Promise((l,u)=>navigator.geolocation.getCurrentPosition(l,u,a));return(a,l)=>{const u=Cn("mapnav-button");return ht(),Ur(u,{onClickFunction:n,tooltip:si(t)("mapnav.geolocator")},{default:kn(()=>[utt]),_:1},8,["tooltip"])}}}),htt=at("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},[at("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),at("path",{d:"M0 0h24v24H0z",fill:"none"})],-1),dtt=Vi({__name:"home-nav",setup(e){const{t}=Jr(),i=hs("iApi"),r=()=>{const n=i.geo.map.getExtentSet();i.geo.map.zoomMapTo(n.fullExtent)};return(n,s)=>{const o=Cn("mapnav-button");return ht(),Ur(o,{onClickFunction:r,tooltip:si(t)("mapnav.home")},{default:kn(()=>[htt]),_:1},8,["tooltip"])}}}),ptt={class:"relative w-32 h-32 text-gray-600 hover:text-black",tabindex:"-1"},ftt=["content"],mtt=Vi({__name:"button",props:{onClickFunction:{type:Function,required:!0},tooltip:{type:[String,Boolean],default:!1}},setup(e){return(t,i)=>{const r=mr("focus-item"),n=mr("tippy");return ht(),$t("div",ptt,[sr((ht(),$t("button",{type:"button",class:"w-full h-full default-focus-style focus:outline-none",onClick:i[0]||(i[0]=s=>e.onClickFunction()),content:e.tooltip},[ac(t.$slots,"default")],8,ftt)),[[r],[n,{placement:"left"}]])])}}}),ytt={class:"relative",tabindex:"-1"},gtt=["content"],vtt=Vi({__name:"button",props:{onClickFunction:{type:Function,required:!0},id:{type:String,required:!0},tooltip:{type:[String,Boolean],default:!1}},setup(e){const t=e,i=hs("iApi"),r=()=>i?.event.emit(Zt.APPBAR_BUTTON_CLICK,t.id);return(n,s)=>{const o=mr("focus-item"),a=mr("tippy");return ht(),$t("div",ytt,[sr((ht(),$t("button",{type:"button",class:"py-6 w-full h-full",onClick:s[0]||(s[0]=()=>{e.onClickFunction(),r()}),content:e.tooltip},[ac(n.$slots,"default",{},void 0,!0)],8,gtt)),[[o],[a,{placement:"right"}]])])}}});const btt=wp(vtt,[["__scopeId","data-v-51ef00b7"]]),wtt=xn("areas-of-interest",()=>({areas:tt([])})),_tt=xn("export",()=>{const e=tt({title:!0,map:!0,mapElements:!0,legend:!0,footnote:!0,timestamp:!0}),t=tt("");function i(r){if(e.value[r.name]!==void 0){const n=e.value[r.name];e.value[r.name]=r.selected!==void 0?r.selected:!n}}return{componentSelectedState:e,fileName:t,toggleSelected:i}}),DC=function e(t){function i(n,s,o){var a,l={};if(Array.isArray(n))return n.concat(s);for(a in n)l[o?a.toLowerCase():a]=n[a];for(a in s){var u=o?a.toLowerCase():a,c=s[a];l[u]=u in l&&typeof c=="object"?i(l[u],c,u=="headers"):c}return l}function r(n,s,o,a,l){var u=typeof n!="string"?(s=n).url:n,c={config:s},d=i(t,s),f={};a=a||d.data,(d.transformRequest||[]).map(function(m){a=m(a,d.headers)||a}),d.auth&&(f.authorization=d.auth),a&&typeof a=="object"&&typeof a.append!="function"&&typeof a.text!="function"&&(a=JSON.stringify(a),f["content-type"]="application/json");try{f[d.xsrfHeaderName]=decodeURIComponent(document.cookie.match(RegExp("(^|; )"+d.xsrfCookieName+"=([^;]*)"))[2])}catch{}return d.baseURL&&(u=u.replace(/^(?!.*\/\/)\/?/,d.baseURL+"/")),d.params&&(u+=(~u.indexOf("?")?"&":"?")+(d.paramsSerializer?d.paramsSerializer(d.params):new URLSearchParams(d.params))),(d.fetch||fetch)(u,{method:(o||d.method||"get").toUpperCase(),body:a,headers:i(d.headers,f,!0),credentials:d.withCredentials?"include":l}).then(function(m){for(var g in m)typeof m[g]!="function"&&(c[g]=m[g]);return d.responseType=="stream"?(c.data=m.body,c):m[d.responseType||"text"]().then(function(v){c.data=v,c.data=JSON.parse(v)}).catch(Object).then(function(){return(d.validateStatus?d.validateStatus(m.status):m.ok)?c:Promise.reject(c)})})}return t=t||{},r.request=r,r.get=function(n,s){return r(n,s,"get")},r.delete=function(n,s){return r(n,s,"delete")},r.head=function(n,s){return r(n,s,"head")},r.options=function(n,s){return r(n,s,"options")},r.post=function(n,s,o){return r(n,o,"post",s)},r.put=function(n,s,o){return r(n,o,"put",s)},r.patch=function(n,s,o){return r(n,o,"patch",s)},r.all=Promise.all.bind(Promise),r.spread=function(n){return n.apply.bind(n,n)},r.CancelToken=typeof AbortController=="function"?AbortController:Object,r.defaults=t,r.create=e,r}(),xtt={A:10,B:12,C:11,E:13,G:24,H:24,J:24,K:35,L:35,M:35,N:35,P:35,R:46,S:47,T:48,V:59,X:[62,61],Y:60},SR={en:{},fr:{}};class Stt{list={};listFetched=!1;constructor(t,i){DC.get(i).then(r=>{r.data.definitions.forEach(n=>SR[t][n.code]=n.description),Object.keys(SR[t]).forEach(n=>{this.list[n]=SR[t][n]}),this.listFetched=!0})}fsaToProvinces(t){const i={};let r=xtt[t.substring(0,1).toUpperCase()];return typeof r=="number"&&(r=[r]),r.forEach(n=>{i[n]=this.list[n]}),i}}function Ett(e,t){return new Stt(e,t)}const HM={en:{ADDRESS:"Street Address",FSA:"Forward Sortation Area",NTS:"National Topographic System",COORD:"Latitude/Longitude",SCALE:"Scale"},fr:{ADDRESS:"Adresse Municipale",FSA:"Région De Tri D'Acheminement",NTS:"Système National De Référence Cartographique",COORD:"Latitude/Longitude",SCALE:"Échelle"}};class Mtt{allTypes={};validTypes={};filterComplete=!1;typesFetched=!1;constructor(t,i){DC.get(i).then(r=>{r.data.definitions.forEach(n=>{HM[t][n.code]=n.term.split(`${n.code}-`)[1]}),Object.keys(HM[t]).forEach(n=>{this.allTypes[n]=HM[t][n],this.validTypes[n]=HM[t][n]}),this.typesFetched=!0})}filterValidTypes(t){if(this.filterComplete)return this.validTypes;if(t=typeof t=="string"?[t]:t,t&&t.length>0)for(const i of t)delete this.validTypes[i];return this.filterComplete=!0,this.validTypes}}function Itt(e,t){return new Mtt(e,t)}function Ttt(e,t){const i=/^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?)(\s*[,|;\s]\s*)[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)[*]$/,r=/^\d{2,3}[A-P]/,n=/^[ABCEGHJKLMNPRSTVXY]\d[A-Z]/;if(i.test(t)&&!e.disabledSearchTypes.includes("LAT/LNG")){const s=t.slice(0,-1);return new Att(e,s)}else return n.test(t)&&!e.disabledSearchTypes.includes("FSA")?new Ctt(e,t):r.test(t)&&!e.disabledSearchTypes.includes("NTS")?new $tt(e,t.substring(0,6).toUpperCase()):new Ott(e,t)}class jC{config;query;failedServs=[];results=[];onComplete;latLongResult;featureResults=[];resultType="geoname";constructor(t,i){this.query=i,this.config=t}search(){return this.jsonRequest(this.getUrl()).then(t=>this.normalizeNameItems(t.items)).catch(()=>(console.error("Geoname service failed"),this.failedServs.push("geoname"),this.normalizeNameItems([])))}getUrl(t,i,r,n){let s="";return t?s=this.config.geoLocateUrl+"?q="+this.query:(r&&n?s=`${this.config.geoNameUrl}?lat=${r}&lon=${n}&num=${this.config.maxResults}`:s=`${this.config.geoNameUrl}?q=${this.query}&num=${this.config.maxResults}`,this.config.categories.length>0&&(s+=`&concise=${this.config.categories.join(",")}`),this.config.officialOnly&&(s+="&category=O")),s}normalizeNameItems(t){return t.filter(i=>this.config.types.validTypes[i.concise.code]).map(i=>({name:i.name,location:i.location,province:this.config.provinces.list[i.province.code],type:this.config.types.allTypes[i.concise.code],LatLon:{lat:i.latitude,lon:i.longitude},bbox:i.bbox,order:this.config.sortOrder.indexOf(i.concise.code)>=0?this.config.sortOrder.indexOf(i.concise.code):this.config.sortOrder.length}))}jsonRequest(t){return new Promise((i,r)=>{const n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="json",n.onload=()=>{if(n.status===200){const s=typeof n.response=="string"?JSON.parse(n.response):n.response;i(s)}else r("Could not load results from remote service.")},n.send()})}locateByQuery(){return this.jsonRequest(this.getUrl(!0,void 0))}nameByLatLon(t,i,r){return this.jsonRequest(this.getUrl(!1,r,t,i)).then(n=>this.normalizeNameItems(n.items)).catch(()=>(console.error("LatLon service failed"),this.failedServs.push("geoname"),this.normalizeNameItems([])))}}class Att extends jC{constructor(t,i){super(t,i),this.resultType="latlong";const n=i.split(/[\s|,|;|]/).filter(a=>!isNaN(a)&&a!=="").map(a=>parseFloat(a)),s=.015,o=[n[1]-s,n[0]-s,n[1]+s,n[0]+s];this.latLongResult={name:`${n[0]},${n[1]}`,location:{latitude:n[0],longitude:n[1]},type:"Latitude/Longitude",position:[n[1],n[0]],bbox:o},this.onComplete=new Promise((a,l)=>{this.nameByLatLon(n[0],n[1]).then(u=>{u?(this.results=u,a(this)):l("Given lat lon coordinates cannot be found")})})}}class Ctt extends jC{constructor(t,i){i=i.substring(0,3).toUpperCase(),super(t,i),this.resultType="fsa",this.onComplete=new Promise(r=>{this.formatLocationResult().then(n=>{n?(this.featureResults.push(n),this.nameByLatLon(n.LatLon.lat,n.LatLon.lon,Object.keys(n._provinces).map(s=>parseInt(s))).then(s=>{this.results=s,r(this)})):(console.log("FSA code given cannot be found."),r(this))})})}formatLocationResult(){return this.locateByQuery().then(t=>{if(t.length===1&&this.query){const i=this.config.provinces.fsaToProvinces(this.query);return{fsa:this.query,code:"FSA",desc:this.config.types.allTypes.FSA,province:Object.keys(i).map(r=>i[r]).join(","),_provinces:i,LatLon:{lat:t[0].geometry.coordinates[1],lon:t[0].geometry.coordinates[0]}}}}).catch(()=>{console.error("FSA service failed"),this.failedServs.push("geolocation")})}}class $tt extends jC{unitName;unit;mapSheets=[];constructor(t,i){super(t,i),this.resultType="nts",i=isNaN(parseInt(i[2]))?"0"+i:i,this.unitName=i,this.onComplete=new Promise(r=>{this.locateByQuery().then(n=>{if(n.length>0&&this.query){const s=this.locateToResult(n);this.unit=s[0],this.mapSheets=s,this.featureResults.push(this.unit),this.nameByLatLon(this.unit.LatLon.lat,this.unit.LatLon.lon).then(o=>{this.results=o,r(this)})}else console.log("Given NTS code not found"),r(this)}).catch(()=>{console.error("NTS service failed"),this.failedServs.push("geolocation"),r(this)})})}locateToResult(t){return t.map(r=>{const n=r.title.split(" ");return{nts:n.shift()||"",location:n.join(" "),code:"NTS",desc:this.config.types.allTypes.NTS,LatLon:{lat:r.geometry.coordinates[1],lon:r.geometry.coordinates[0]},bbox:r.bbox}})}equals(t){return this.unitName===t.unitName}}class Ott extends jC{constructor(t,i){i=encodeURIComponent(i.trim()),super(t,i),this.resultType="address",this.onComplete=new Promise(r=>{this.locateByQuery().then(n=>{this.featureResults=this.locateToResult(n),this.search().then(s=>{this.results=s,r(this)})}).catch(()=>{this.failedServs.push("geolocation"),console.error("Address service failed"),this.search().then(n=>{this.results=n,r(this)})})})}locateToResult(t){return this.config.categories.length>0&&!this.config.categories.includes("ADDR")?[]:t.filter(r=>r.type?.includes("Street")).map(r=>{const[n,s,o]=r.title.split(", ");return{name:n,city:s.split(" Of ").pop(),province:o,desc:this.config.types.allTypes.ADDRESS,LatLon:{lat:r.geometry.coordinates[1],lon:r.geometry.coordinates[0]}}})}}const xZ="https://geogratis.gc.ca/services/geolocation/@{language}/locate",SZ="https://geogratis.gc.ca/services/geoname/@{language}/geonames.json",EZ="https://geogratis.gc.ca/services/geoname/@{language}/codes/province.json",MZ="https://geogratis.gc.ca/services/geoname/@{language}/codes/concise.json",Rtt={10:"NL",11:"PE",12:"NS",13:"NB",24:"QC",35:"ON",46:"MB",47:"SK",48:"AB",59:"BC",60:"YU",61:"NT",62:"NU",72:"UF",73:"IW"};class IZ{config;constructor(t,i){let r,n,s,o;const a=i?.serviceUrls;a?(r=a.geoLocation?a.geoLocation:xZ,n=a.geoNames?a.geoNames:SZ,s=a.geoProvince?a.geoProvince:EZ,o=a.geoTypes?a.geoTypes:MZ):(r=xZ,n=SZ,s=EZ,o=MZ),r=r.replace("@{language}",t),n=n.replace("@{language}",t),s=s.replace("@{language}",t),o=o.replace("@{language}",t);const l=i?.settings;let u,c,d,f,m;l?(u=l.categories?l.categories:[],c=l.sortOrder?l.sortOrder:[],d=l.disabledSearchTypes?l.disabledSearchTypes:[],f=l.maxResults>0?l.maxResults:100,m=!!l.officialOnly):(u=[],c=[],d=[],f=100,m=!1),this.config={language:t,geoNameUrl:n,geoLocateUrl:r,types:Itt(t,o),provinces:Ett(t,s),categories:u,sortOrder:c,disabledSearchTypes:d,maxResults:f,officialOnly:m},this.config.types.filterValidTypes(i?.excludeTypes),this._provinceList=[],this._typeList=[],this._excludedTypes=i?.excludeTypes||[]}get provinceList(){return this._provinceList}get typeList(){return this._typeList}set provinceList(t){this._provinceList=t}set typeList(t){this._typeList=t}levenshteinDistance(t,i){i=i.toLowerCase().trim();const r=decodeURI(t.query.toLowerCase().replace("*","")),n=[];for(let s=0;s<=i.length;s++){n[s]=[s];for(let o=1;o<=r.length;o++)n[s][o]=s===0?o:Math.min(n[s][o-1]+1,n[s-1][o]+.2,n[s-1][o-1]+(r[o-1]===i[s-1]?0:1))}return n[i.length][r.length]}findProvinceObj(t){return this.provinceList.find(i=>i.name===t)}query(t){return Ttt(this.config,t.toUpperCase()).onComplete.then(i=>{let r=[];i.featureResults.length>0?i.resultType==="fsa"?r=i.featureResults.map(s=>({name:s.fsa,bbox:[s.LatLon.lon+.02,s.LatLon.lat-.02,s.LatLon.lon-.02,s.LatLon.lat+.02],type:s.desc,position:[s.LatLon.lon,s.LatLon.lat],location:{latitude:s.LatLon.lat,longitude:s.LatLon.lon,province:this.findProvinceObj(s.province)},order:-1})):i.resultType==="nts"?r=i.featureResults.map(s=>({name:s.nts,bbox:s.bbox??[s.LatLon.lon+.02,s.LatLon.lat-.02,s.LatLon.lon-.02,s.LatLon.lat+.02],type:s.desc,position:[s.LatLon.lon,s.LatLon.lat],location:{city:s.location,latitude:s.LatLon.lat,longitude:s.LatLon.lon},order:-1})):i.resultType==="address"&&(r=i.featureResults.map(s=>({name:s.name,bbox:[s.LatLon.lon+.002,s.LatLon.lat-.002,s.LatLon.lon-.002,s.LatLon.lat+.002],type:s.desc,position:[s.LatLon.lon,s.LatLon.lat],location:{city:s.city,latitude:s.LatLon.lat,longitude:s.LatLon.lon,province:this.findProvinceObj(s.province)},order:this.config.sortOrder.indexOf("ADDR")>=0?this.config.sortOrder.indexOf("ADDR"):this.config.sortOrder.length})),this.config.sortOrder.length>0&&(r=r.sort((s,o)=>this.levenshteinDistance(i,s.name)>this.levenshteinDistance(i,o.name)?1:-1))):i.resultType==="latlong"&&(r=[i.latLongResult],r[0].order=-1);const n=i.results.map(s=>({name:s.name,bbox:s.bbox,type:s.type,position:[s.LatLon.lon,s.LatLon.lat],location:{city:s.location,latitude:s.LatLon.lat,longitude:s.LatLon.lon,province:this.findProvinceObj(s.province)},order:s.order}));return{results:r.concat(n).slice(0,this.config.maxResults).sort((s,o)=>this.config.sortOrder.length>0?s.order>o.order?1:-1:this.levenshteinDistance(i,s.name)>this.levenshteinDistance(i,o.name)?1:-1),failedServs:i.failedServs}})}fetchProvinces(){return new Promise(t=>{const i=setInterval(()=>{if(this.config.provinces.listFetched){clearInterval(i);const r=[],n={code:-1,abbr:"...",name:"..."};r.push(n);const s=this.config.provinces.list;for(const o in s)r.push({code:o,abbr:Rtt[o],name:s[o]});this.provinceList=r,t(this.provinceList)}})})}fetchTypes(){return new Promise(t=>{const i=setInterval(()=>{if(this.config.types.typesFetched){clearInterval(i);const r=[],n={code:-1,name:"..."};r.push(n);const s=this.config.types.allTypes;for(const o in s)this._excludedTypes.includes(o)||r.push({code:o,name:s[o]});this.typeList=r,t(this.typeList)}},250)})}}function TZ(e,t,i){return e&&t.extent&&(i=i.filter(r=>r.bbox[0]<=t.extent.xmax&&r.bbox[1]<=t.extent.ymax&&r.bbox[2]>=t.extent.xmin&&r.bbox[3]>=t.extent.ymin)),t.province&&t.province!=="..."&&(i=i.filter(r=>r.location.province?.name&&r.location.province.name===t.province)),t.type&&t.type!=="..."&&(i=i.filter(r=>r.type===t.type)),i}const ktt=xn("geosearch",()=>{const e=tt(new IZ("en",void 0)),t=tt({type:"",province:"",extent:void 0}),i=tt(!1),r=tt(""),n=tt(""),s=tt([]),o=tt([]),a=tt(!1),l=tt([]),u=$i(()=>new Promise(x=>{e.value.fetchProvinces().then(S=>{S.sort((T,_)=>T.name>_.name?1:-1),x(S)})})),c=$i(()=>new Promise(x=>{e.value.fetchTypes().then(S=>{S.sort((T,_)=>T.name>_.name?1:-1),x(S)})}));function d(x,S){e.value=new IZ(x,S)}function f(x){if(a.value=!0,!r.value)s.value=[],o.value=[],a.value=!1;else if(r.value&&r.value!==n.value||x){const S=setInterval(()=>{e.value.config.provinces.listFetched&&e.value.config.types.typesFetched&&(clearInterval(S),e.value.query(`${r.value}*`).then(T=>{l.value=T.failedServs,n.value=r.value,o.value=T.results;const _=TZ(i.value,t.value,o.value);s.value=_||[],a.value=!1}))},250)}else{const S=TZ(i.value,t.value,o.value);s.value=S||[],a.value=!1}}function m(x){t.value.province=typeof x.province>"u"?"":x.province,f(x.forceReRun)}function g(x){t.value.type=typeof x.type>"u"?"":x.type,f(x.forceReRun)}function v(x){n.value=r.value,r.value=x,f()}function b(x){if(x.visible!==void 0&&(i.value=x.visible),x.extent.sr.wkid!==4326)throw new Error("an extent that was not projected to wkid 4326 was passed to the geosearch store");t.value.extent=x.extent,f()}return{GSservice:e,queryParams:t,resultsVisible:i,searchVal:r,lastSearchVal:n,searchResults:s,savedResults:o,loadingResults:a,failedServices:l,getProvinces:u,getTypes:c,initService:d,runQuery:f,setProvince:m,setType:g,setSearchTerm:v,setMapExtent:b}}),Ltt=xn("help",()=>({location:tt("./help/")}));var jde=(e=>(e.Visibility="visibilityButton",e.Expand="expandButton",e))(jde||{}),CN=(e=>(e.Item="item",e.Placeholder="placeholder",e.Error="error",e))(CN||{});class Ude extends Wn{_uid;_name;_type;_children=[];_parent=void 0;_loadPromise;_hidden;_expanded;_visibility;_exclusive;_controls;_disabledControls;_lastVisible;_visibleChildren;constructor(t,i,r){super(t),this._uid=vb.sharedUtils.generateUUID(),this._name=i.name,this._type=i.type??"placeholder",this._parent=r,this._children=[],this._loadPromise=new ls,this._hidden=i.hidden??!1,this._expanded=i.expanded??!0,this._visibility=!0,this._exclusive=i.exclusive??!1,this._controls=i.controls?.slice()??["visibilityButton","expandButton"],this._disabledControls=i.disabledControls?.slice(),this._lastVisible,this._visibleChildren=[]}get uid(){return this._uid}get name(){return this._name}set name(t){this._name=t}get type(){return this._type}get children(){return this._children}set children(t){this._children=t}get parent(){return this._parent}set parent(t){this._parent=t}get loadPromise(){return this._loadPromise.getPromise()}get hidden(){return this._hidden}get expanded(){return this._expanded}get visibility(){return this._visibility}get exclusive(){return this._exclusive}controlAvailable(t){return this._disabledControls?.includes(t)?!1:this._controls?.includes(t)}setControl(t,i){i&&this._disabledControls?.includes(t)?(this._disabledControls=this._disabledControls.filter(r=>r!==t),this._controls?.push(t)):!i&&this._controls?.includes(t)&&(this._controls=this._controls.filter(r=>r!==t),this._disabledControls?.push(t))}toggleHidden(t){this._hidden=t??!this.hidden}toggleExpanded(t){this._expanded=t??!this.expanded}toggleVisibility(t,i=!0){if(this.visibility!==t){if(this._visibility=t??!this.visibility,!this.exclusive)this.visibility?this._visibleChildren.length>0?this._visibleChildren.forEach(r=>r.toggleVisibility(!0,!1)):this.children.forEach(r=>r.toggleVisibility(!0,!1)):this.children.forEach(r=>r.toggleVisibility(!1,!1));else if(this.visibility)if(this._lastVisible&&(!(this._lastVisible instanceof Sf)||this._lastVisible.layerControlAvailable(ss.Visibility)))this._lastVisible.toggleVisibility(!0);else{const r=this.children.find(n=>!(n instanceof Sf)||n.layerControlAvailable(ss.Visibility));r&&r.toggleVisibility(!0)}else this._lastVisible=this.children.find(r=>r.visibility),this._lastVisible?.toggleVisibility(!1);this.parent&&i&&this.parent.checkVisibility(this)}}checkVisibilityRules(){this.parent&&!this.parent.visibility?this.toggleVisibility(!1,!1):this.parent?.exclusive&&this.parent.children.some(i=>i.visibility&&i!==this&&i.type==="item")&&this.toggleVisibility(!1,!1)}checkVisibility(t){this instanceof Sf&&!this.layerControlAvailable(ss.Visibility)||(this.exclusive?t.visibility?(this.children.forEach(i=>{i.uid!==t.uid&&i.toggleVisibility(!1,!1)}),this._lastVisible=t,this._visibility=!0,this instanceof Sf&&this.layer&&this.layer.layerExists&&(this.layer.visibility=!0)):(this._visibility=!1,this instanceof Sf&&this.layer&&this.layer.layerExists&&(this.layer.visibility=!1),this._lastVisible=t):this.children.some(i=>i.visibility)?(this._visibility=!0,this._visibleChildren=this.children.filter(i=>i.visibility),this instanceof Sf&&this.layer&&this.layer.layerExists&&(this.layer.visibility=!0)):(this._visibility=!1,this._visibleChildren=[],this instanceof Sf&&this.layer&&this.layer.layerExists&&(this.layer.visibility=!1)),this.parent&&this.parent.checkVisibility(this))}getConfig(){const t={name:this._name,hidden:this._hidden,expanded:this._expanded,exclusive:this._exclusive,controls:this._controls,disabledControls:this._disabledControls},i=[];return this.children.forEach(r=>{i.push(r.getConfig())}),this.exclusive?t.exclusiveVisibility=i:t.children=i,t}onAdded(){}onRemoved(){this.toggleVisibility(!1)}load(){this._type="item",this._loadPromise.resolveMe(),this.checkVisibilityRules()}reload(){this._type="placeholder",this._loadPromise=new ls}error(){this._type="error",this._loadPromise.rejectMe(),this.checkVisibilityRules()}}class Sf extends Ude{_layerId;_layerIdx;_layerUid="";_layer;_layerInitVis;_layerRedrawing=!1;_layerOffscale=!1;_loadCancelled=!1;_treeGrown=!1;_coverIcon;_description;_symbologyExpanded;_origLayerControls;_origLayerDisabledControls;_layerControls;_layerDisabledControls;_symbologyRenderStyle;_symbologyStack;handlers=[];constructor(t,i,r){super(t,i,r),this._type=CN.Placeholder,this._layerId=i.layerId,this._layerIdx=i.sublayerIndex,this._layerControls=i.layerControls??[],this._origLayerControls=i.layerControls,this._layerDisabledControls=i.disabledLayerControls??[],this._origLayerDisabledControls=i.disabledLayerControls,this._layerRedrawing=!1,this._symbologyExpanded=i.symbologyExpanded||!1,i.coverIcon&&(this._coverIcon=i.coverIcon),i.description&&(this._description=i.description),this._symbologyRenderStyle=i.symbologyRenderStyle??"icons",this._symbologyStack=i.symbologyStack?.map(n=>({uid:this.$iApi.geo.shared.generateUUID(),label:n.text,definitionClause:n.sqlQuery,imgUrl:n.image??"",drawPromise:Promise.resolve(),visibility:!0,lastVisibility:!0}))}get parentLayerId(){return this._layerIdx?this._layerId.slice(0,this._layerId.length-`-${this._layerIdx}`.length):void 0}get layerId(){return this._layerId}get layerIdx(){return this._layerIdx}get layerUid(){return this._layerUid}get layer(){return this._layer}set layer(t){this._layer=t,this._layerId=t.id,this._layerIdx=t.layerIdx,this._layerUid=t.uid,this._symbologyStack=this._symbologyStack??t.legend,this.updateLayerControls()}get layerOffscale(){return this._layerOffscale}set layerOffscale(t){this._layerOffscale=t}get layerRedrawing(){return this._layerRedrawing}set layerRedrawing(t){this._layerRedrawing=t}get coverIcon(){return this._coverIcon}set coverIcon(t){this._coverIcon=t}get description(){return this._description}set description(t){this._description=t}get symbologyExpanded(){return this._symbologyExpanded}get treeGrown(){return this._treeGrown}set treeGrown(t){this._treeGrown=t}get loadCancelled(){return this._loadCancelled}set loadCancelled(t){this._loadCancelled=t}get origLayerControls(){return this._origLayerControls}get origDisabledLayerControls(){return this._origLayerDisabledControls}set symbologyRenderStyle(t){this._symbologyRenderStyle=t}get symbologyRenderStyle(){return this._symbologyRenderStyle}set symbologyStack(t){this._symbologyStack=t}get symbologyStack(){return this._symbologyStack}getConfig(){const t={layerId:this._layerId,sublayerIndex:this._layerIdx,layerControls:this._layerControls,disabledLayerControls:this._layerDisabledControls,symbologyExpanded:this._symbologyExpanded,coverIcon:this._coverIcon,description:this._description};return{...super.getConfig(),...t}}toggleVisibility(t,i=!0,r=!1){if(!((!this.layerControlAvailable(ss.Visibility)||this._loadCancelled)&&!r)&&(super.toggleVisibility(t,i),this.layer&&this.layer.layerExists)){this.layer.visibility=this.visibility;const n=this._symbologyStack.some(s=>s.lastVisbility);this._symbologyStack.forEach(s=>{n||(s.lastVisbility=!0),s.visibility=this.visibility?s.lastVisbility:!1})}}toggleSymbology(t){return this._symbologyExpanded=t??!this._symbologyExpanded,this._symbologyExpanded}setSymbologyVisibility(t,i){this._symbologyStack.some(r=>((t===void 0||r.uid===t)&&(r.visibility=i,r.lastVisbility=i),t!==void 0&&r.uid===t))}load(t){if(t){if(this._layer=t instanceof Gg?t:this.$iApi.geo.layer.getLayer(this._layerId??this._layerUid),this.layer=t,this._layerRedrawing=t.drawState!==sl.UP_TO_DATE,this._loadCancelled){this.toggleVisibility(!1,!0,!0);return}this._layer?.loadPromise().then(()=>{this._layer?.layerType===Ai.MAPIMAGE&&!this._layerIdx?(this.error(),console.error(`MapImageLayer has no sublayerIndex defined for layer: ${this._layerId}.`)):(this._layerInitVis=typeof this._layerInitVis<"u"?this._visibility:t.visibility,super.load(),this.toggleVisibility(this._layerInitVis,!0,!0),t.visibility||this.setSymbologyVisibility(void 0,!1)),this.handlers.push(this.$iApi.event.on(Zt.LAYER_VISIBILITYCHANGE,i=>{i.layer.uid===this.layer.uid&&this._type===CN.Item&&this.toggleVisibility(i.visibility,!0,!0)})),this.handlers.push(this.$iApi.event.on(Zt.LAYER_DRAWSTATECHANGE,i=>{this.layer.uid===i.layer.uid&&(i.layer.drawState===sl.REFRESH?this.layerRedrawing=!0:setTimeout(()=>{this.layerRedrawing=i.layer.drawState===sl.REFRESH},500))})),this._layerOffscale=this.$iApi.geo.map.created?this.layer?.isOffscale():!1,this.handlers.push(this.$iApi.event.on(Zt.MAP_SCALECHANGE,()=>{this.$iApi.geo.map.created&&(this._layerOffscale=this.layer?.isOffscale())}))}).catch(()=>{this.error()})}}error(){this.updateLayerControls(),super.error(),this.toggleVisibility(!1,!0,!0)}layerControlAvailable(t){return this._layerDisabledControls?.includes(t)?!1:!!this._layerControls?.includes(t)}updateLayerControls(){const t=this.$iApi.geo.layer.getLayerControls(this.layerId)??this.$iApi.geo.layer.getLayerControls(this.parentLayerId??"");this._origLayerControls||(this._layerControls=t?.controls??[]),this._origLayerDisabledControls||(this._layerDisabledControls=t?.disabledControls??[])}}var Ptt=(e=>(e.Title="title",e.Text="text",e.Image="image",e.Markdown="markdown",e.Template="template",e))(Ptt||{});class AZ extends Ude{_infoType;_content;constructor(t,i,r){super(t,i,r),this._infoType=i.infoType??"title",this._content=i.content??"",i.infoType==="template"&&this.$element.component(`${this._uid}-info-section`,{template:this._content}),(i.infoType||i.content)&&(this._controls=i.controls?.slice()??[jde.Expand]),super.load()}get infoType(){return this._infoType}get content(){return this._content}set content(t){this._content=t}getConfig(){const t={infoType:this._infoType,content:this._content};return{...super.getConfig(),...t}}}const Ntt=xn("legend",()=>{const e=tt(),t=tt([]),i=tt([]);function r(o){if(o.parent===void 0)t.value.push(o.item);else{if(!(o.item instanceof AZ)&&!(o.item instanceof Sf)){console.error("attempted to add an unsupported legend item type");return}o.parent.children.push(o.item)}}function n(o){const a=l=>(l=l.filter(u=>(u===o&&!u.children.length&&u.onRemoved(),u!==o)),l.forEach(u=>{u.children=a(u.children)}),l=l.filter(u=>!(u instanceof AZ&&!u.children.length&&u.content==="")),l);t.value=a(t.value)}function s(o){if(o.oldItem.parent===void 0){const a=t.value,l=a.indexOf(o.oldItem);l>-1&&(t.value[l]=o.newItem),t.value=a}else{const a=o.oldItem.parent.children,l=a.indexOf(o.oldItem);l>-1&&(a[l]=o.newItem),o.oldItem.parent.children=a}}return{legendConfig:e,children:t,headerControls:i,addItem:r,removeItem:n,replaceItem:s}}),Ftt=xn("mapnav",()=>{const e=tt({}),t=tt([]);function i(r){r in e.value&&delete e.value[r];const n=t.value.indexOf(r);n!==-1&&t.value.splice(n,1)}return{items:e,order:t,removeItem:i}}),Dtt=xn("metadata",()=>{const e=tt(""),t=tt({type:"LineString",coordinates:[]});return{status:e,response:t}}),jtt=xn("northarrow",()=>{const e=tt(""),t=tt("");return{arrowIcon:e,poleIcon:t}}),Utt=xn("overviewmap",()=>{const e=tt({lodSets:[],extentSets:[],basemaps:[],tileSchemas:[],initialBasemapId:""}),t=tt({}),i=tt(!0),r=tt(1.5),n=tt("#FF0000"),s=tt(1),o=tt("#000000"),a=tt(.25);function l(u){e.value.initialBasemapId=u}return{mapConfig:e,basemaps:t,startMinimized:i,expandFactor:r,borderColour:n,borderWidth:s,areaColour:o,areaOpacity:a,updateInitialBasemap:l}}),Vtt=xn("scrollguard",()=>{const e=tt(!1);function t(i){e.value=i}return{enabled:e,setEnabled:t}});var uo=(e=>(e[e.UPLOAD=0]="UPLOAD",e[e.FORMAT=1]="FORMAT",e[e.CONFIGURE=2]="CONFIGURE",e))(uo||{});const Btt=xn("wizard",()=>{const e={id:"Placeholder",layerType:Ai.UNKNOWN,url:""},t=tt(),i=tt(""),r=tt(""),n=tt(null),s=tt({config:e,configOptions:[]}),o=tt(uo.UPLOAD);function a(l){switch(o.value){case uo.UPLOAD:l===uo.UPLOAD?i.value="":l===uo.FORMAT&&(o.value=uo.FORMAT);break;case uo.FORMAT:l===uo.UPLOAD?(n.value&&(i.value="",n.value=null),r.value="",o.value=uo.UPLOAD):l===uo.CONFIGURE&&(o.value=uo.CONFIGURE);break;case uo.CONFIGURE:l===uo.UPLOAD?(i.value="",r.value="",n.value=null,s.value={config:e,configOptions:[]},o.value=uo.UPLOAD):l===uo.FORMAT&&(s.value={config:e,configOptions:[]},o.value=uo.FORMAT);break}}return{layerSource:t,url:i,typeSelection:r,fileData:n,layerInfo:s,currStep:o,goToStep:a}});class ztt{fixture;panel;event;geo;notify;ui;startRequired=!1;$vApp;$element;$i18n;_isFullscreen;constructor(t,i,r){this.event=new zHe(this);const n=Gtt(t,this);this.$vApp=n.app,this.$element=n.element,this.$i18n=n.i18n,this.fixture=new Mrt(this),this.panel=new Irt(this),this.geo=new Srt(this),this.ui={maptip:this.geo.map.maptip,exposeOids:!1},this.notify=new bYe(this),this._isFullscreen=kc.isEnabled&&!!this.$vApp.$root&&kc.isFullscreen&&kc.element===this.$vApp.$root.$el,kc.isEnabled&&kc.onchange(()=>{this._isFullscreen=kc.isEnabled&&!!this.$vApp.$root&&kc.isFullscreen&&kc.element===this.$vApp.$root.$el}),this.initialize(i,r)}initialize(t,i){const r=pl(this.$vApp.$pinia),n=N0(this.$vApp.$pinia),s=O5(this.$vApp.$pinia);if(t?.configs!==void 0){const a=t.configs,l=a[this.$i18n.locale.value]??a[Object.keys(a)[0]];r.newConfig(l),r.registerConfig({config:l,configLangs:Object.keys(a),allLangs:Object.keys(this.$i18n.messages.value)});for(const c in a)r.registerConfig({config:a[c],configLangs:[c]});r.activeBasemapConfig=l.map.basemaps.find(c=>c.id===l.map.initialBasemapId);const u=setInterval(()=>{const c=this.$vApp.$el.querySelector("#esriMap");c&&(clearInterval(u),this.geo.map.createMap(l.map,c),c._tippy.hide(0),s.setMaptipInstance(c._tippy),l.layers&&l.layers.length>0&&l.layers.map(d=>{const f=this.geo.layer.createLayer(d);return this.geo.map.addLayer(f),f}).filter(Boolean).forEach((d,f)=>{d?.loadPromise().then(()=>{d?.isLoaded&&this.geo.map.reorder(d,f)}).catch(()=>console.error(`Failed to add/reorder layer: ${d.id}.`))}))},100);if(l.panels){if(l.panels.open&&l.panels.open.length>0){const c=l.panels.open.map(d=>d.id);this.panel.isRegistered(c).then(()=>{l.panels?.open?.forEach(d=>{this.panel.open({id:d.id,screen:d.screen}),d.pin&&this.panel.pin(d.id)})})}n.reorderable=l.panels.reorderable??!0}!l.system?.animate&&this.$element._container&&this.$element._container.children[0]&&this.$element._container.children[0].classList.remove("animation-enabled"),l.system?.proxyUrl&&(this.geo.proxy=l.system.proxyUrl),l.system?.exposeOid&&(this.ui.exposeOids=l.system.exposeOid)}i||(i={});const o=Mv(this.$vApp.$pinia);i?.startRequired?(this.startRequired=!0,o.started=!1):(this.startRequired=!1,o.started=!0,this.event.emit(Zt.MAP_START)),(i.loadDefaultFixtures!==!1||t?.startingFixtures!==void 0)&&this.fixture.addDefaultFixtures(t?.startingFixtures),i.loadDefaultEvents!==!1&&this.event.addDefaultEvents()}reload(t,i){const r=Mv(this.$vApp.$pinia),n=up(this.$vApp.$pinia),s=pl(this.$vApp.$pinia),o=Nd(this.$vApp.$pinia);Object.keys(o.items).forEach(l=>{this.fixture.get(l)!==void 0&&this.fixture.remove(l)}),r.started=!1,this.geo.map.destroyMap(),this.event.offAll(),t===void 0&&(t=JSON.parse(JSON.stringify({startingFixtures:s.startingFixtures,configs:s.registeredConfigs}))),n.clearAll(),this.geo.map.maptip.clear(),this.initialize(t,i)}component(t,i){if(i){const r=this.$element.component(t,i);return this.event.emit(Zt.COMPONENT,t),r}return this.$element.component(t)}get screenSize(){if(!this.$vApp?.$root||!this.$vApp.$root.$refs["app-size"])return null;const t=this.$vApp.$root.$refs["app-size"].classList;return t.contains("lg")?"lg":t.contains("md")?"md":t.contains("sm")?"sm":"xs"}getConfig(){const t=pl(this.$vApp.$pinia);return JSON.parse(JSON.stringify(t.getActiveConfig(this.language)))}useStore(t){if(!(["appbar","areas-of-interest","details","export","geosearch","grid","help","legend","mapnav","metadata","northarrow","overviewmap","scrollguard","wizard"].includes(t)&&!this.fixture.get(t)))switch(t){case"appbar":return A5(this.$vApp.$pinia);case"areas-of-interest":return wtt(this.$vApp.$pinia);case"details":return dhe(this.$vApp.$pinia);case"export":return _tt(this.$vApp.$pinia);case"geosearch":return ktt(this.$vApp.$pinia);case"grid":return hhe(this.$vApp.$pinia);case"help":return Ltt(this.$vApp.$pinia);case"legend":return Ntt(this.$vApp.$pinia);case"mapnav":return Ftt(this.$vApp.$pinia);case"metadata":return Dtt(this.$vApp.$pinia);case"northarrow":return jtt(this.$vApp.$pinia);case"overviewmap":return Utt(this.$vApp.$pinia);case"scrollguard":return Vtt(this.$vApp.$pinia);case"wizard":return Btt(this.$vApp.$pinia);case"config":return pl(this.$vApp.$pinia);case"fixture":return Nd(this.$vApp.$pinia);case"instance":return Mv(this.$vApp.$pinia);case"layer":return iu(this.$vApp.$pinia);case"map-caption":return Hf(this.$vApp.$pinia);case"maptip":return O5(this.$vApp.$pinia);case"notification":return up(this.$vApp.$pinia);case"panel":return N0(this.$vApp.$pinia);default:console.error(`The store ${t} does not exist.`);return}}setLanguage(t){if(this.$i18n.locale.value===t)return;const r=pl(this.$vApp.$pinia).registeredLangs;if(r[t]===r[this.$i18n.locale.value]){this.$i18n.locale.value=t;return}this.$i18n.locale.value=t;const n=this.getConfig();this.event.emit(Zt.CONFIG_CHANGE,n),this.reload()}get language(){return this.$vApp.$i18n.locale}get animate(){return!!(this.$element._container&&this.$element._container.children[0]&&this.$element._container.children[0].classList.contains("animation-enabled"))}toggleFullscreen(){kc.isEnabled&&kc.toggle(this.$element._container||void 0)}get isFullscreen(){return this._isFullscreen}get started(){return Mv(this.$vApp.$pinia).started}updateAlert(t){const i=this.$vApp.$el.querySelector(".screen-reader-alert");i.childNodes.length>0&&(i.innerHTML="");const r=document.createElement("span");r.setAttribute("role","alert");const n=document.createTextNode(t);r.appendChild(n),i.insertBefore(r,null)}start(){const t=Mv(this.$vApp.$pinia);!t.started&&this.startRequired?(this.event.emit(Zt.MAP_START),t.started=!0):t.started&&console.warn("start has already been called")}}function Gtt(e,t){const i=FHe();i.use(({store:o})=>{const a=VJ(o.$state);o.$reset=()=>o.$patch(VJ(a))});const r=MJe(),n=_C(NXe).use(r).use(OXe,{directive:"tippy",component:"tippy"}).use(i);n.directive("focus-container",BXe),n.directive("focus-list",DXe),n.directive("focus-item",UXe),n.directive("truncate",HXe),n.component("panel-screen",eet),n.component("pin",oet),n.component("close",det),n.component("back",get),n.component("expand",Ret),n.component("panel-options-menu",Xet),n.component("dropdown-menu",Oj),n.component("minimize",Fet),n.component("right",zet),n.component("left",Zet),n.component("fullscreen-nav-button",ltt),n.component("geolocator-nav-button",ctt),n.component("home-nav-button",dtt),n.component("mapnav-button",mtt),n.component("appbar-button",btt),n.config.globalProperties.$iApi=t,n.config.globalProperties.$pinia=i,n.provide("iApi",t);const s=n.mount(e);return{element:n,app:s,i18n:r.global}}class qtt{esriBasemap;config;constructor(t){this.config=t,this.esriBasemap=new cm({baseLayers:t.layers.map(i=>{if(i.layerType===Ai.TILE)return new o9({url:i.url,opacity:i.opacity});if(i.layerType===Ai.MAPIMAGE)return new n9({url:i.url,opacity:i.opacity});if(i.layerType===Ai.OSM)return new s9({opacity:i.opacity});throw new Error(`Unsupported layer type provided to basemap config: ${i.layerType}`)}),title:t.name||"",id:t.id})}get tileSchemaId(){return this.config.tileSchemaId}get id(){return this.config.id}get name(){return this.config.name}set name(t){this.config.name=t||""}get description(){return this.config.description}set description(t){this.config.description=t||""}get altText(){return this.config.altText}set altText(t){this.config.altText=t||""}get attribution(){return this.config.attribution}set attribution(t){this.config.attribution=t}get backgroundColour(){return this.config.backgroundColour??"#FFFFFF"}}class Htt extends Wn{esriMap;_basemapStore;created=!1;esriView;_viewPromise;get viewPromise(){return this._viewPromise.getPromise()}_rampSR;_rampExtentSet;_targetDiv;handlers;pointZoomScale;constructor(t){super(t),this.esriMap=void 0,this._basemapStore=[],this._viewPromise=new ls,this.handlers=[],this.pointZoomScale=5e4}noMapErr(){console.error("Attempted to manipulate the map before calling createMap()")}abstractError(){throw new Error("Attempted to call an abstract method in the parent CommonMapAPI")}createMap(t,i){this._basemapStore=t.basemaps.map(n=>new qtt(n));const r={};t.initialBasemapId&&(r.basemap=oi(this.findBasemap(t.initialBasemapId).esriBasemap)),this.esriMap=wn(new Bne(r)),this.pointZoomScale=t.pointZoomScale&&t.pointZoomScale>0?t.pointZoomScale:5e4,this._targetDiv=i,this.createMapView(t.initialBasemapId)}destroyMap(){if(!this.esriMap||!this.esriView){this.noMapErr();return}this.destroyMapView(),this.esriMap.destroy(),delete this.esriMap,this._basemapStore.forEach(t=>t.esriBasemap.destroy()),this._basemapStore=[]}reloadMap(t,i){if(!this.esriMap||!this.esriView){this.noMapErr();return}this.destroyMap(),this.createMap(t,i)}createMapView(t){this.abstractError()}destroyMapView(){if(!this.esriView){this.noMapErr();return}this._viewPromise=new ls,this.created=!1,this.handlers.forEach(t=>t.handler.remove()),this.handlers=[],this.esriView.map=null,this.esriView.container=null,this.esriView.spatialReference=null,this.esriView.extent=null,this.esriView.navigation=null,this.esriView.destroy(),delete this.esriView}findBasemap(t){const i=this._basemapStore.find(r=>r.id===t);if(i)return i;throw new Error(`Invalid basemap id requested: ${t}`)}applyBasemap(t){if(!this.esriMap){this.noMapErr();return}const i=typeof t=="string"?this.findBasemap(t):t;this.esriMap.basemap=oi(i.esriBasemap)}setBasemap(t){return this.abstractError(),!1}getCurrentBasemapId(){if(this.esriMap)return this.esriMap.basemap.id;this.noMapErr()}geomToMapSR(t){if(!this._rampSR)throw new Error("call to map.geomToMapSR before the map spatial ref was created");return this._rampSR.isEqual(t.sr)?Promise.resolve(t):this.$iApi.geo.proj.projectGeometry(this._rampSR,t)}async zoomMapTo(t,i,r=!0){if(this.esriView){if(t.invalid())throw new Error("attempt to zoom to invalid geometry");const n=await this.geomToMapSR(t),s={target:this.$iApi.geo.geom.geomRampToEsri(n)};n.type===Ti.POINT&&(s.scale=i||this.pointZoomScale);const o={animate:r};return this.viewPromise.then(()=>this.esriView.goTo(s,o))}else this.noMapErr()}getZoomLevel(){return this.esriView?this.esriView.zoom:(this.noMapErr(),1)}getScale(){return this.esriView?this.esriView.scale:(this.noMapErr(),1)}getResolution(){return this.esriView?this.esriView.resolution:(this.noMapErr(),1)}getExtent(){return this.esriView?Gr.fromESRI(this.esriView.extent):(this.noMapErr(),Gr.fromParams("i_am_error",0,1,0,1))}getExtentSet(){return this._rampExtentSet?this._rampExtentSet:(this.noMapErr(),SS.fromConfig({id:"i_am_error_extent_set",default:{xmin:0,xmax:1,ymin:0,ymax:1,spatialReference:{wkid:4326}}}))}getSR(){return this._rampSR?this._rampSR.clone():(this.noMapErr(),Si.latLongSR())}getPixelHeight(){return this.esriView?this.esriView.height:(this.noMapErr(),1)}getPixelWidth(){return this.esriView?this.esriView.width:(this.noMapErr(),1)}setPointZoomScale(t){return t>0?(this.pointZoomScale=t,!0):(console.error(`Cannot set pointZoomScale to non-positive number: ${t}.`),!1)}}class Wtt extends Wn{maptipStore;constructor(t){super(t),this.maptipStore=O5(this.$vApp.$pinia)}#e=void 0;#t=void 0;async checkAtCoord(t){this.#t=t;const i=await this.$iApi.geo.map.getGraphicAtCoord(t);if(this.#t!==t)return;if(!i){this.clear();return}if(this.#e&&this.#e.layerId===i.layerId&&this.#e.oid===i.oid&&this.#e.layerIdx===i.layerIdx)return;this.clear(),this.#e=i;const r=this.$iApi.geo.layer.getLayer(i.layerId);if(!r){console.error(`graphic hit test returned non-existent layer id: ${i.layerId}`);return}if(!r.hovertips)return;const n=await r.getIcon(i.oid),s=await r.getGraphic(i.oid,{getAttribs:!0});this.setPoint(this.$iApi.geo.map.screenPointToMapPoint(t)),this.$iApi.event.emit(Zt.MAP_GRAPHICHIT,{layer:r,graphicHit:i,attributes:s.attributes,icon:n,screenPoint:t})}generateDefaultMaptip(t){this.setContent(`<div class="flex items-center space-x-5"><span>${t.icon}</span><span class="truncate">${t.attributes[t.layer.config.tooltipField||t.layer.nameField]}</span></div>`)}clear(){this.#e=void 0,this.maptipStore.setMaptipPoint(void 0),this.maptipStore.setMaptipContent("")}getInstance(){return this.maptipStore.maptipInstance}getPoint(){return this.maptipStore.maptipPoint}setPoint(t){this.maptipStore.setMaptipPoint(t)}setContent(t){this.maptipStore.setMaptipContent(t)}}class Jtt extends Wn{DEFAULT_POINT_FORMATTERS={LAT_LONG_DMS:this.formatLatLongDMS,LAT_LONG_DD:this.formatLatLongDD,LAT_LONG_DDM:this.formatLatLongDDM,WEB_MERCATOR:this.formatMercator,CANADA_ATLAS_LAMBERT:this.formatLambert,UTM:this.formatUTM,BASEMAP:this.formatBasemap};pointFormatter;constructor(t){super(t),this.pointFormatter=this.DEFAULT_POINT_FORMATTERS.LAT_LONG_DMS}createCaption(t){if(!t)return;const i=Hf(this.$vApp.$pinia);if(t.mapCoords.disabled)i.coords={disabled:!0};else{const r=t.mapCoords.formatter;r!==void 0&&this.setPointFormatter(r)}if(t.scaleBar.disabled)i.scale={disabled:!0};else{const r=t.scaleBar.imperialScale;r!==void 0&&(i.toggleScale(r),this.$iApi.geo.map.viewPromise.then(()=>{this.updateScale()}))}}updateAttribution(t){const i={text:{value:"Powered by ESRI"},logo:{altText:"ESRI logo",link:"https://www.esri.com/",value:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAAAkCAYAAADWzlesAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAADO9JREFUeNq0Wgl0jlca/pfvzyo6qNBSmhLLKE1kKEUtB9NTat+OYnBacwwJY19DZRC7sR41th60lWaizFSqRTOEw0lsrQSJGFIESSxJ/uRfv3nef+7Vt9f3p2E695z3fMt97/3ufe+7PO+9n9n0UzELsjKyiHdUdMZnVHTl2VyFe9nO7Kc/Io+4epUxmpWxeVkbr3hvUebgFf15GL9XUwZHndtAAYI09jGvIghOuoEwLOLeYiBoXrwGfZjYYOWAvWyMGlsk2YebXeV3NUEW1qcT5BBX4jUbCYEmHwwKEfdW1gEXgoWtiIlNRFeezcrkrQaTNSuraRYDdImrR1ylAALZBPnkXIJ0wRskeG2Cj3jsoFI2HhcfDDFWA9UBNdZZyc/PP4Z3HZYsWTLGbrffond0Xb9+/Qy6P3jw4F+HDx8+mu7XrVs3c+7cuX+i+3nz5o3n/Rw4cGAdf/7hhx9SZ8yYEcffHT9+/G/8uaSkJGvDhg3D8P3moNdXrlw5UtYVFxfnXL9+/V8PHz68grr2N2/eTC4tLb2E+9+Cotq1a/dOenr6njt37nxPdOrUqd0dO3bsjromoHBQKBPkEyFUB71MH6SPbNy4cRqfkMvlenzixImtqO/x3XffbXc6nSW5ubnpOTk5J1NTU/cQH91//fXXu3/88ccLy5cvj6d34B8gaBA9JyQk/OWjjz5aIu8Fz2DiWbZs2QLx/A4m0Qf9f/n48eNsPEeDfrdly5Y/U31UVNT7dJ04ceIsGseNGzfS6DkuLq4v8YE6Y/G+93g8XKZ6QUHBRVHfAPQC0xJfCRAv65EkeUP6gFx11JEkfw/qTc8ff/zxKofDUXrv3r08rOIBeU9CWbx48SLej5y4LGlpaf9YuHDhUv5OtqH+6Vty0riPAbWjheH8n3322VYpuG+//Xa5mGB7CGM8hKN7vV5dLfHx8WNI20E1aN4WP97YZyc7d+6MM5vNHRs2bDg3NjY23e12l5w8eZJWzIUJ9IdmlI4bNy4tICAgtHbt2hGdOnXaSe3oftu2bWmBgYFOn3MwmwcQLViwIJOeYVYJGGAZVuW2zWZzCZ6hoIGapnmknUMTQnr16vUeTOKydHqyHrx9t27dunro0KEfzJw5M4Pe3bp166Z0pHXr1g0Fj2EYCw8PD+N+SjNwUuSAKnxexOkswOWxZN63b9/MAQMGzIUwx5WXl99eunTpFLx+hJU/K9o/yM7OPhgZGdk5KSkpp0WLFv+Vrq7/na5nz57dR1dM6t7hw4e3DRkyJG7WrFlxgudzukIw58TzV3SF3Z+ByUzFbTk5O9j8fVH/JV3PnTv3uRijSdSR5/empKRkT5kypQxCC+UTxMKVQXuyWBT5WbiS4VFjIZLHWQsLN1ZFgFbm0U1KSNWUUMlDp9kAh0iNdCkRwiva2FjUsjJeJ5sYRYQwCGIYNGk8tC1UCuDQoUOb+vbtuxuPRUJ4FVwIFhZ7pUD45OXEbUpo9DIz8hgAFk0BORblWypm8BiQzkKnpoRnM+PxsEWhiYfFxMTUHTx4cDOYhg7tzM7IyLhNCiYEUEbCMxsAGYuCGjl4ClKE4GY+xCnIw95zBKqxvmyCOJqT7dws5ntZzLcoaJEjQiPUahMaESzudWEqhBEeiSuZvUvzA1+lxIMEhbD7QGYKUl0rBAgxC9vlq6IzNZZ9BYt+rMw8pBDLmSZZFBPQmBC8imaofo1roa5oKH82aQaaIH0CDTZM0sCBAxvBKbZ+7bXXGr3yyisN4ZjMDx48uAeAkofQdHbt2rUXhIpJKevMJwSLfqq3bt365enTp3eFh365SZMmBGpMFRUVZcAV1wFmzs2ZMyddtCkXk9ESExOjq1Wr9iLCbwAilA9xwrnlwimS4G2ffvppj1atWrWoWbNmbWCKAtj9V5MnT84cMWJEvTfeeKM+wqSFzCEoKMgJ3HEVgO6SkTlKMwgUgImwArn2DpMmTYrDALP0XyjEA9sbjTZtQZGij7qghqBWoK4AWPswkbLK+qHIsWPHjoXgfwvUhsZAAEflg+dfg0kuBlosUuvoO2jXl65qXWZm5g7UNRPIOIQLQqpcmECMJIAuRp1UVmiCACmTxAReFx+LhnPqV1hY+O9n6evIkSObSXCEHI0WASDtMMJ0uVHb7du3E6p9HxpxQK0DjN4r0Gc9kSZYeZiSNkuaUOv06dPTO3fuPNj0DAWgKWTFihVL+vfvT0J8kfohAsobV6tWrYbP0hf460pnLE2AF2jB21DvIKO2gO6FNB+ERJtaB+xjY37NN3+LogmkHi9s2rTp3bZt277LG8NuK5AopXbv3n0O7Gtsjx49ZmNye6GOD1RBwD9MFUKoSQSc30UdzJUrV26uWrVqP7D/lt27d+9/9OhRMas7gjYbhROzkv9R2wcHBwdWshjkYL1G7SBQTXGwTwQQLLIqWsGeGFAhVyFSO6C7Naj7ADRUJENDQGMjIiLmQl0LVLUbNWrUItSPhBNcodYhFyFklwAiYf0RNKZZs2YfFhUVXYcAvhFm0FFc++fl5eX4Mxto7JnRo0cvID4yHWSz70dHRw+khAxZ6yGVH8ndftS9DWokciWNx15fTN2zZ0+f6tWr1+LS279/fwYgcz4LPzJvdyGVLUFidFiVOIRAqx8KlQysZCdKboJUXL58uRAmMLFp06aLRbh1cGhrVEiD3nzzzTXIcU5R6gC6vXfv3kuIGgSIyq1Wq6cqpmdhiNAXFtu0adNeZVq9enUWA0xywyVECC4AicwttQ2SrvpkYnfv3i1X6xo0aPAiJv2H+fPnt27UqFEN4YsCDBCk33Lt2rW8kSNHJuP2LqUc4kq+4KFAgg6LxeKtSl+a4hMC6tSp85QD27VrVy9I1U2SJaKYS/ZG8Rf5uhVXq91ud4aEhATINo0bN46glUQMv4aQV46MMpj3iRVvsGjRohFEENQtygCRmZ5B6DsqNNPFANJT5cyZM5RoPRBE/qREaJYEYm4aZ1WFwDG9ppoClebNm9czPV/xYXOo6J4xY8Z84I8Jgq9HBCDVfsKECR+mpqZ+gSQnRVQHGTm4CxcuXBP9l4qrneUNPtheVSFYKtkF/jUKqWbx2LFjUxBJViA82asSZvv06TPq+PHjE/D4GzI70jiVT+xDyBzDo8DhZyoWNXsD4Cn/FYVQLKgIofCfMIkhgKyr4bhO8pBoVGgvsEuXLq+SEIw0Qayyl5H+vIPUmJf2ZYOwz5twXE05U/369TfBZu+wvMBpkH7L3dwyYZ+l4uoRPL50FzCcQuAJstvIyMjacG5Rw4YN64b7V9XBxcbGdgJq/cZIE4TT0/2ceTyzJsiMj0JSxfnz50+rTECBUUq2aGd2WC7Izib+WFwdLJs0sczT1w+Q3d34+PhTSKQ2w4GeVL9LTtefY1Q2YEz/qxC8LIe3f/LJJ2kqU79+/WIGDRpUj+0L8N0lG7B6N+QGiS1btgxR9ha8gi949uzZ0UiENgBSR4iQyFNiL0zkrh+V/78XfjJDq1aWnJx85dixY8kqRE1KSopNSUkZ0K1btwjhsGpMmzatbVZW1nTy/JQbQHUXA26HMRul/gOQHkcBUK1BBGiJFHgtcMV7YqeXeEM7dOhQB4lXh6dCS1kZaZbDSBjinV6ZhsBkdAMz0o00SO4hhIrUl7K/7vfv37+hP0eBw8tBftFRpNNNExMThyMqlKp8SEXsADy5t1GM+qF6CHwe+hifm5t7Ta1PSEiYj7rWIhsMZaCPEkDyL+2PHj36hdqO3lGd4KkuYbN0jC5h22TPRT179pwCZ5j9rKqF0FWtd+/eL0kBA9Y2kRudvBB4og2al1CM+iFsgQFfJTCkaZrboL2DhUfd4NjAadROvHPyvUsLayxNghxaMWw0D1EhFiguqSrxXWZ/EN7IyZMnX5QHn127dk0Gxo+nnd6q9EHf2rx58zJgC1oxSrQKgR1cKl9YWJhdOFg329TlC1oBM3YYZJ8OubcozVZTJPjkzEEwOBGr1yIr+xz23xX23i48PPxVjiqRQV6GRuetXLkSbiPpCsPuTulzEAYPAh+cnzp1ao+YmJi31D5gevkwo3sZGRmn0M+RzMzMAhFtaGG0ixcvfpmfn39WbpNBC1zILK8KHqdykCsXszQ7O/sE8WMBNKGlbrxLF1HsSeQyV5JQBSrJUghLdDQmKB46ywTJFTKzfqqxftScwM1OjGXY/Vl0UU7IHcq3XMrutkz0QsX3bOwEWo5TfsNj9hMxjP5VCFR2fPl/AS4xMH7u71X6CWR92JQjer5t72AHLrpyKGRRhKbCZrNybhJg8HvBU+385Qv8DMKi/BjBEaKuHJK42YDU/x789cFhu1s5cFH/hTAp3/UqhzMm5cTM6G8br/qnyi8lTWYDoZiUP1TUEyc1Ble1D5OSA+gG7U0GR3b+fhUy+kVIN0Kb/xFgANrk0XIqRaL0AAAAAElFTkSuQmCC"}};if(t){t.logo.disabled||(i.logo.altText=t.logo.altText||i.logo.altText,i.logo.link=t.logo.link||i.logo.link,i.logo.value=t.logo.value||i.logo.value),t.text.disabled||(i.text.value=t.text.value||i.text.value);const r=Hf(this.$vApp.$pinia);r.attribution=i}if(!t||t.text.disabled){if(!this.$iApi.geo.map.esriMap){console.warn("Attempted to fetch map attribution with undefined map");return}let r="";const n=5e3,s=20,o=this.$iApi.geo.map.esriMap.basemap.baseLayers.map(a=>new Promise(l=>{let u=0;const c=n/s,d=setInterval(function(){a.loaded&&!a.loadError?(clearInterval(d),l(a)):u>c&&(clearInterval(d),l(null)),u++},s)})).toArray();Promise.all(o).then(a=>{r=a.filter(u=>u?.copyright).map(u=>u.copyright).join(" | "),i.text.value=r||i.text.value;const l=Hf(this.$vApp.$pinia);l.attribution=i})}}updateScale(){const t=Hf(this.$vApp.$pinia),i=t.scale;if(i?.disabled)return;const r=i?.isImperialScale||!1,n=this.scaleHelper().find(s=>s.isImperialScale===r)??{isImperialScale:!1,units:"error",pixels:1,distance:1};t.scale={width:`${n.pixels}px`,label:`${this.$iApi.$i18n.n(n.distance,"number")}${n.units}`,isImperialScale:r}}async formatPoint(t){return t?await this.pointFormatter(t):""}setPointFormatter(t){if(typeof t=="string"){if(!(t in this.DEFAULT_POINT_FORMATTERS)){console.warn(`Could not find point formatter with id: ${t}`);return}this.pointFormatter=this.DEFAULT_POINT_FORMATTERS[t]}else this.pointFormatter=t}scaleHelper(){const t=window.innerWidth>600?70:35,i=this.$iApi.geo.map.getResolution(),r=[],n=i*t,s=1609.34,o=3.28084,a=n>1e3?["km","mi"]:["m","ft"];for(let l=0;l<2;l++){const u=l===1;if(r.push({isImperialScale:u,units:a[l],pixels:0,distance:0}),n>1e3){const c=i*t/(u?s:1e3),d=Math.round(c).toString().length,f=Math.pow(10,d-1);r[l].distance=Math.ceil(c/f)*f,r[l].pixels=r[l].distance*(u?s:1e3)/i}else r[l].distance=Math.ceil(u?n*o:n),r[l].pixels=n/i}return r}wrapValue(t,i,r){return((t-i)%(r-i)+(r-i))%(r-i)+i}async formatLatLongDMS(t){const i=await this.$iApi.geo.proj.projectGeometry(4326,t),r=this.wrapValue(i.y,-90,90),n=this.wrapValue(i.x,-180,180),s=String.fromCharCode(176),o=Math.floor(Math.abs(r))*(r<0?-1:1),a=Math.floor(Math.abs((r-o)*60)),l=Math.floor((Math.abs(r)-Math.abs(o)-a/60)*3600),u=Math.floor(Math.abs(n))*(n<0?-1:1),c=Math.floor(Math.abs((n-u)*60)),d=Math.floor((Math.abs(n)-Math.abs(u)-c/60)*3600);return`${this.$iApi.$i18n.n(Math.abs(o),"number")}${s} ${this.$iApi.$i18n.n(a,"number",{minimumIntegerDigits:2})}' ${this.$iApi.$i18n.n(l,"number",{minimumIntegerDigits:2})}" ${this.$iApi.$i18n.t("map.coordinates."+(r>0?"north":"south"))} | ${this.$iApi.$i18n.n(Math.abs(u),"number")}${s} ${this.$iApi.$i18n.n(c,"number",{minimumIntegerDigits:2})}' ${this.$iApi.$i18n.n(d,"number",{minimumIntegerDigits:2})}" ${this.$iApi.$i18n.t("map.coordinates."+(0>n?"west":"east"))}`}async formatLatLongDDM(t){const i=await this.$iApi.geo.proj.projectGeometry(4326,t),r=this.wrapValue(i.y,-90,90),n=this.wrapValue(i.x,-180,180),s=String.fromCharCode(176),o=Math.floor(Math.abs(r))*(r<0?-1:1),a=Math.abs((r-o)*60),l=Math.floor(Math.abs(n))*(n<0?-1:1),u=Math.abs((n-l)*60);return`${this.$iApi.$i18n.n(Math.abs(o),"number")}${s} ${this.$iApi.$i18n.n(a,"number",{minimumIntegerDigits:2,minimumFractionDigits:5,maximumFractionDigits:5})} ${this.$iApi.$i18n.t("map.coordinates."+(r>0?"north":"south"))} | ${this.$iApi.$i18n.n(Math.abs(l),"number")}${s} ${this.$iApi.$i18n.n(u,"number",{minimumIntegerDigits:2,minimumFractionDigits:5,maximumFractionDigits:5})} ${this.$iApi.$i18n.t("map.coordinates."+(0>n?"west":"east"))}`}async formatLatLongDD(t){const i=await this.$iApi.geo.proj.projectGeometry(4326,t),r=this.wrapValue(i.y,-90,90),n=this.wrapValue(i.x,-180,180),s=String.fromCharCode(176),o=Math.abs(r),a=Math.abs(n);return`${this.$iApi.$i18n.n(o,"number",{minimumIntegerDigits:2,minimumFractionDigits:5,maximumFractionDigits:5})}${s} ${this.$iApi.$i18n.t("map.coordinates."+(r>0?"north":"south"))} | ${this.$iApi.$i18n.n(a,"number",{minimumIntegerDigits:2,minimumFractionDigits:5,maximumFractionDigits:5})}${s} ${this.$iApi.$i18n.t("map.coordinates."+(0>n?"west":"east"))}`}async formatMercator(t){const i=await this.$iApi.geo.proj.projectGeometry(102100,t);return`${this.$iApi.$i18n.n(Math.floor(i.x),"number")} m | ${this.$iApi.$i18n.n(Math.floor(i.y),"number")} m`}async formatLambert(t){const i=await this.$iApi.geo.proj.projectGeometry(3978,t);return`${this.$iApi.$i18n.n(Math.abs(Math.floor(i.x)),"number")} m ${this.$iApi.$i18n.t("map.coordinates."+(0>i.x?"west":"east"))} | ${this.$iApi.$i18n.n(Math.abs(Math.floor(i.y)),"number")} m ${this.$iApi.$i18n.t("map.coordinates."+(i.y>0?"north":"south"))}`}async formatUTM(t){const i=await this.$iApi.geo.proj.projectGeometry(4326,t),r=this.wrapValue(i.y,-90,90),n=this.wrapValue(i.x,-180,180),s=Math.ceil((n+180)/6),o=await this.$iApi.geo.proj.projectGeometry(parseInt("326"+s),t);return`${this.$iApi.$i18n.n(s,"number",{minimumIntegerDigits:2})} ${this.$iApi.$i18n.t("map.coordinates."+(r>0?"north":"south"))} ${this.$iApi.$i18n.n(Math.floor(o.x),"number")} m${this.$iApi.$i18n.t("map.coordinates.east")} | ${this.$iApi.$i18n.n(Math.abs(Math.floor(o.y)),"number")} m${this.$iApi.$i18n.t("map.coordinates.north")}`}async formatBasemap(t){const i=await this.$iApi.geo.proj.projectGeometry(this.$iApi.geo.map.getSR(),t);return`${this.$iApi.$i18n.n(i.x,"number")} | ${this.$iApi.$i18n.n(i.y,"number")}`}}class Ztt extends Htt{maptip;caption;mapMouseThrottle;constructor(t){super(t),this.maptip=new Wtt(t),this.caption=new Jtt(t),this.mapMouseThrottle=0}createMap(t,i){this.setMapMouseThrottle(t.mapMouseThrottle??0),super.createMap(t,i),this.viewPromise.then(()=>{this.$iApi.event.emit(Zt.MAP_CREATED)})}destroyMap(){if(!this.esriMap||!this.esriView){this.noMapErr();return}this.$iApi.geo.layer.allLayers().map(t=>t.uid).forEach(t=>this.removeLayer(t)),super.destroyMap(),this.$iApi.event.emit(Zt.MAP_DESTROYED)}createMapView(t){const r=pl(this.$vApp.$pinia).config.map;if(!r)throw new Error("Attempted to create map view without a map config");const n=(typeof t=="string"?this.findBasemap(t):t)||this.findBasemap(r.initialBasemapId);this.applyBasemap(n);const s=r.tileSchemas.find(l=>l.id===n.tileSchemaId);if(!s)throw new Error(`Could not find tile schema for the given basemap id: ${n.id}`);const o=r.extentSets.find(l=>l.id===s.extentSetId);if(!o)throw new Error(`Could not find extent set with the given id: ${s.extentSetId}`);this._rampExtentSet=SS.fromConfig(o),this._rampSR=this._rampExtentSet.sr.clone();const a=r.lodSets.find(l=>l.id===s.lodSetId);if(!a)throw new Error(`Could not find lod set with the given id: ${s.lodSetId}`);this.esriView=wn(new ADe({map:this.esriMap,container:this._targetDiv,constraints:{lods:a.lods,rotationEnabled:!1},spatialReference:this._rampSR.toESRI(),extent:this._rampExtentSet.defaultExtent.toESRI(),navigation:{browserTouchPanEnabled:!1},background:{color:n.backgroundColour}})),this.esriView.ui.components=[],this.handlers.push({type:"extent",handler:this.esriView.watch("extent",l=>{const u=this.$iApi.geo.geom.geomEsriToRamp(l,"map_extent_event");this.$iApi.event.emit(Zt.MAP_EXTENTCHANGE,u),this.$iApi.event.emit(Zt.FILTER_CHANGE,{extent:u,filterKey:Ju.EXTENT})})}),this.handlers.push({type:"scale",handler:this.esriView.watch("scale",l=>{this.$iApi.event.emit(Zt.MAP_SCALECHANGE,l)})}),this.handlers.push({type:"resize",handler:this.esriView.on("resize",l=>{this.$iApi.event.emit(Zt.MAP_RESIZED,{height:l.height,width:l.width})})}),this.handlers.push({type:"click",handler:this.esriView.on("click",l=>{this.$iApi.event.emit(Zt.MAP_CLICK,this.$iApi.geo.geom.esriMapClickToRamp(l,"map_click_point"))})}),this.handlers.push({type:"double-click",handler:this.esriView.on("double-click",l=>{this.$iApi.event.emit(Zt.MAP_DOUBLECLICK,this.$iApi.geo.geom.esriMapClickToRamp(l,"map_doubleclick_point"))})}),this.handlers.push({type:"pointer-move",handler:this.esriView.on("pointer-move",this.createMouseMoveHandler())}),this.handlers.push({type:"pointer-move-start",handler:this.esriView.on("pointer-move",C5(100,!0,l=>{this.$iApi.event.emit(Zt.MAP_MOUSEMOVE_START,this.$iApi.geo.geom.esriMapMouseToRamp(l))}))}),this.handlers.push({type:"pointer-move-end",handler:this.esriView.on("pointer-move",C5(100,l=>{this.$iApi.event.emit(Zt.MAP_MOUSEMOVE_END,this.$iApi.geo.geom.esriMapMouseToRamp(l))}))}),this.handlers.push({type:"pointer-leave",handler:this.esriView.on("pointer-leave",l=>{setTimeout(()=>{this.$iApi.event.emit(Zt.MAP_MOUSELEAVE,l.native)},Math.max(this.mapMouseThrottle,100)+1)})}),this.handlers.push({type:"pointer-down",handler:this.esriView.on("pointer-down",l=>{this.$iApi.event.emit(Zt.MAP_MOUSEDOWN,l.native)})}),this.handlers.push({type:"key-down",handler:this.esriView.on("key-down",l=>{this.$iApi.event.emit(Zt.MAP_KEYDOWN,l.native),l.stopPropagation()})}),this.handlers.push({type:"key-up",handler:this.esriView.on("key-up",l=>{this.$iApi.event.emit(Zt.MAP_KEYUP,l.native),l.stopPropagation()})}),this.handlers.push({type:"focus",handler:this.esriView.on("focus",l=>{this.$iApi.event.emit(Zt.MAP_FOCUS,l.native)})}),this.handlers.push({type:"blur",handler:this.esriView.on("blur",l=>{this.$iApi.event.emit(Zt.MAP_BLUR,l.native)})}),this.esriView.container.addEventListener("touchmove",l=>{l.preventDefault()}),this.esriView.when(()=>{this._viewPromise.resolveMe(),this.created=!0})}destroyMapView(){this.esriView?.container.removeEventListener("touchmove",t=>{t.preventDefault()}),super.destroyMapView()}applyBasemap(t){if(!this.esriMap){this.noMapErr();return}const i=typeof t=="string"?this.findBasemap(t):t;this.esriMap.basemap=oi(i.esriBasemap);const r=pl(this.$vApp.$pinia);r.activeBasemapConfig=i.config}setBasemap(t){if(!this.esriView||!this.esriMap)return this.noMapErr(),!1;const i=pl(this.$vApp.$pinia),r=this.findBasemap(t),s=i.activeBasemapConfig.tileSchemaId!==r.tileSchemaId;if(s){const o=this.getExtent();this._viewPromise=new ls,this.created=!1,this.$iApi.event.emit(Zt.MAP_REFRESH_START),this.destroyMapView(),this.createMapView(r),this.viewPromise.then(()=>{this.$iApi.event.emit(Zt.MAP_REFRESH_END),this.$iApi.geo.proj.projectExtent(this._rampSR,o).then(a=>this.zoomMapTo(a))})}else this.applyBasemap(r),this.esriView.set("background.color",new sp(r.backgroundColour).toESRI());return this.$iApi.event.emit(Zt.MAP_BASEMAPCHANGE,{basemapId:t,schemaChanged:s}),s}addLayer(t,i=void 0){return new Promise((r,n)=>{this.esriMap||(this.noMapErr(),n()),t.initiationState!==nl.INITIATING&&t.initiationState!==nl.INITIATED&&t.layerState!==co.ERROR&&t.initiate();const s=iu(this.$vApp.$pinia);s.addInitiatingLayer(t);let o=0;const a=setInterval(()=>{o+=250,o>=2e4||t.layerState===co.ERROR?(clearInterval(a),s.removeInitiatingLayer(t),s.addErrorLayer(t),t.onError(),n()):t.initiationState===nl.INITIATED&&t.esriLayer&&(clearInterval(a),this.esriMap?.add(t.esriLayer),s.removeInitiatingLayer(t),s.addLayer(t),i!==void 0&&this.reorder(t,i),this.$iApi.event.emit(Zt.LAYER_REGISTERED,t),r())},250)})}reorder(t,i,r=!1){if(!this.esriMap){this.noMapErr();return}if(t.esriLayer){if(r&&t.isCosmetic)return;const n=iu(this.$vApp.$pinia),s=n.layers,o=s.slice(0,i+1).filter(l=>!this.esriMap.layers.find(u=>u.id===l.id)).length,a=this.esriMap.layers.indexOf(this.esriMap.layers.filter(l=>{const u=s.find(c=>c.id===l.id);return!!u&&!(r&&u.isCosmetic)}).slice(0,i+1-o).pop());this.esriMap.reorder(t.esriLayer,a),n.reorderLayer(t,i),this.$iApi.event.emit(Zt.MAP_REORDER,{layer:t,newIndex:i})}else console.error("Attempted reorder without an esri layer. Likely layer.initiate() was not called or had not finished.")}removeSublayer(t){let i,r;if(typeof t=="string")i=t,r=this.$iApi.geo.layer.getLayer(i);else{if(!t.isSublayer)throw new Error(`Attempted to call removeSublayer on a non-sublayer object: ${t}`);i=t.uid,r=t}if(!r)throw new Error("Sublayer could not be found for removal.");this.$iApi.event.emit(Zt.LAYER_REMOVE,t),r.visibility=!1,r.isRemoved=!0,r.parentLayer?.sublayers.every(n=>n.isRemoved)&&this.removeLayer(r.parentLayer)}removeLayer(t){if(!this.esriMap){this.noMapErr();return}let i;if(t instanceof Gg?i=t:i=this.$iApi.geo.layer.getLayer(t),!i)throw new Error("Layer could not be found for removal.");if(i.isSublayer){this.removeSublayer(i);return}if(!i.esriLayer)throw new Error("Attempted to remove layer from the map without an esri layer. Likely layer.initiate() was not called or had not finished.");i.supportsSublayers&&i.sublayers.some(n=>!n.isRemoved)&&i.sublayers.forEach(n=>this.removeSublayer(n)),i.terminate();const r=iu(this.$vApp.$pinia);r.removeLayer(i),r.removeLayerConfig(i.id),this.esriMap.remove(i.esriLayer),i.isRemoved=!0,this.$iApi.event.emit(Zt.LAYER_REMOVE,i)}setMapMouseThrottle(t){if(t<0)return console.error("Cannot set map mouse throttle to value that is less than 0."),!1;this.mapMouseThrottle=t;const i=this.handlers.findIndex(r=>r.type==="pointer-move");if(i!==-1){const r=this.handlers[i];this.handlers.splice(i,1),r.handler.remove()}return i!==-1&&this.esriView&&this.handlers.push({type:"pointer-move",handler:this.esriView.on("pointer-move",this.createMouseMoveHandler())}),!0}createMouseMoveHandler(){if(!this.esriView){this.noMapErr();return}return Bg(this.mapMouseThrottle,t=>{this.$iApi.event.emit(Zt.MAP_MOUSEMOVE,this.$iApi.geo.geom.esriMapMouseToRamp(t))})}async zoomToLevel(t){if(this.esriView)return this.esriView.goTo({zoom:t});this.noMapErr()}async zoomIn(){if(this.esriView)return this.zoomToLevel(this.esriView.zoom+1);this.noMapErr()}async zoomOut(){if(this.esriView)return this.zoomToLevel(this.esriView.zoom-1);this.noMapErr()}async zoomToVisibleScale(t){if(!this.esriView){this.noMapErr();return}const i=t.isOffScale(this.getScale());if(!i.offScale)return;const r=this.esriView.constraints.lods;if(!r)return this.zoomMapTo(this.getExtent().center(),(i.zoomIn,t.minScale));const n=i.zoomIn?r:[...r].reverse(),s=n.find(o=>i.zoomIn?o.scale<t.minScale:o.scale>t.maxScale)||n[n.length-1];return this.zoomToLevel(s.level)}async takeScreenshot(t){if(this.esriView)return t.quality||(t.quality=1),t.format||(t.format="png"),this.esriView.takeScreenshot(t);throw new Error("Export attempted without a map view available")}screenPointToMapPoint(t){return this.esriView?zo.fromESRI(this.esriView.toMap({x:t.screenX,y:t.screenY}),"mappoint"):(this.noMapErr(),new zo("i_am_error",[0,0],void 0,!0))}mapPointToScreenPoint(t){if(this.esriView){const i=this.esriView.toScreen(t.toESRI());return{screenX:i.x,screenY:i.y}}else return this.noMapErr(),{screenX:1,screenY:1}}runIdentify(t){const i=iu(this.$vApp.$pinia).layers;let r;if(t instanceof zo){const u=this.mapPointToScreenPoint(t);r={mapPoint:t,screenX:u.screenX,screenY:u.screenY,button:0,input:"mouse",clickTime:Date.now()}}else r=t;if(i===void 0)return{click:r,results:[]};let n=Promise.resolve([]);i.some(u=>u.canIdentify()&&(u.identifyMode===as.HYBRID||u.identifyMode===as.SYMBOLIC))&&(n=this.esriView.hitTest({x:r.screenX,y:r.screenY}).then(u=>u.results.map(c=>({layerId:c.layer.id,layerIdx:0,oid:c.graphic.getObjectId()}))));const s={geometry:r.mapPoint,hitTest:n},o=i.filter(u=>u.supportsIdentify).map(u=>(s.tolerance=r.input=="touch"?u.touchTolerance:u.mouseTolerance,u.runIdentify(s))).flat(),a=Date.now();o.forEach(u=>{u.requestTime=a});const l={results:o,click:r};return this.$iApi.event.emit(Zt.MAP_IDENTIFY,l),l}async getGraphicAtCoord(t){if(!this.esriView){this.noMapErr();return}const i=iu(this.$vApp.$pinia).layers?.slice(0);if(i===void 0)return;i.reverse();const r=await this.esriView.hitTest({x:t.screenX,y:t.screenY}),n=r.results;if(r.results.length===0)return;let s;if(i.some(o=>{const a=n.find(l=>l.graphic.layer.id===o.id);if(a){if(o.isCosmetic)return!0;s=o}return a!==void 0}),s){s.sublayers.length>1&&console.warn("Found layer with sublayers during hitTest"),s.drawOrder.length===0&&console.warn("Found layer with no draw order during hitTest");let o=n.filter(d=>d.graphic.layer.id===s.id);const a=(d,f)=>d===f?0:d>f?1:-1;let l=[],u;if(s.drawOrder.some((d,f)=>(l=[o.pop()],u=l[0].graphic.attributes[d.field],o.forEach(m=>{const g=m.graphic.attributes[d.field],v=a(u,g);v===0?l.push(m):(d.ascending&&v>0||!d.ascending&&v<0)&&(l=[m],u=g)}),l.length===1||f===s.drawOrder.length-1?!0:(o=l,!1))),l.length===0){console.error("Hit test failed to find topmost item using draw order");return}return{oid:l[0].graphic.getObjectId(),layerId:s.id,layerIdx:s.getLayerTree().layerIdx}}}_activeKeys=[];_panInterval;_mouseFocus=!1;mapKeyDown(t){const i=["=","-"];["Shift","Control","ArrowDown","ArrowLeft","ArrowRight","ArrowUp"].includes(t.key)&&!this._activeKeys.includes(t.key)?(this._activeKeys.push(t.key),this._activeKeys.some(n=>i.includes(n))||this.keyPan()):i.includes(t.key)&&!this._activeKeys.includes(t.key)?(this._activeKeys.push(t.key),this.keyZoom(t)):t.key==="Enter"?this.runIdentify(this.getExtent().center()):t.key==="Tab"&&this._activeKeys.push(t.key)}mapKeyUp(t){const i=["=","-"];this._activeKeys.includes(t.key)&&!i.includes(t.key)&&(this._activeKeys.splice(this._activeKeys.indexOf(t.key),1),this._activeKeys.some(r=>i.includes(r))||this.keyPan())}setMouseFocus(){this._mouseFocus=!0}stopKeyPan(){this._activeKeys.includes("Tab")&&(this._mouseFocus=!1),this._activeKeys=[],clearInterval(this._panInterval)}get keysActive(){return this._activeKeys.filter(t=>!["Control","Shift"].includes(t)).length!==0}get mouseFocus(){return this._mouseFocus}async keyZoom(t){clearInterval(this._panInterval),t.key==="="?await this.zoomIn():t.key==="-"&&await this.zoomOut(),this._activeKeys.splice(this._activeKeys.indexOf(t.key),1),this.keyPan()}keyPan(){if(clearInterval(this._panInterval),!this.keysActive)return;const t=this.getExtent().center(),i=this.mapPointToScreenPoint(t),r=this.screenPointToMapPoint({screenX:i.screenX+5,screenY:i.screenY+5}),n=Math.abs(r.x-t.x),s=Math.abs(r.y-t.y);let o=0,a=0,l=1;for(let c=0;c<this._activeKeys.length;++c)switch(this._activeKeys[c]){case"ArrowLeft":o-=n;break;case"ArrowRight":o+=n;break;case"ArrowUp":a+=s;break;case"ArrowDown":a-=s;break;case"Shift":l=2;break;case"Control":l=.25;break}const u=this.getScale();this._panInterval=setInterval(()=>{t.x+=l*o,t.y+=l*a,this.zoomMapTo(t,u,!1)},25)}}const Ytt={geometryType:"point",renderer:{type:"simple",symbol:{type:"esriSMS",style:"esriSMSCircle",color:[67,100,255,200],size:7,outline:{color:[0,0,0,255],width:1}}}},Ktt={geometryType:"polyline",renderer:{type:"simple",symbol:{type:"esriSLS",style:"esriSLSSolid",color:[90,90,90,200],width:2}}},Qtt={geometryType:"polygon",renderer:{type:"simple",symbol:{type:"esriSFS",style:"esriSFSSolid",color:[76,76,125,200],outline:{type:"esriSLS",style:"esriSLSSolid",color:[110,110,110,255],width:1}}}},Xtt={geometryType:"polygon",renderer:{type:"simple",symbol:{type:"esriSFS",style:"esriSFSSolid",color:[255,0,0,64],outline:{type:"esriSLS",style:"esriSLSSolid",color:[240,128,128,255],width:1}}}},eit={circlePoint:Ytt,solidLine:Ktt,outlinedPoly:Qtt,boundingBoxPoly:Xtt};var Vde={exports:{}};(function(e,t){(function(i,r){if(e.exports=r(Qae()),typeof i.navigator=="object"){if(!i.Terraformer)throw new Error("Terraformer.ArcGIS requires the core Terraformer library. https://github.com/esri/Terraformer");i.Terraformer.ArcGIS=r(i.Terraformer)}})(Bs,function(i){var r={};function n(b){var x=0,S=0,T=[],_,M,I,$;I=b.match(/((\+|\-)[^\+\-]+)/g),$=parseInt(I[0],32);for(var L=1;L<I.length;L+=2)_=parseInt(I[L],32)+x,x=_,M=parseInt(I[L+1],32)+S,S=M,T.push([_/$,M/$]);return T}function s(b){return o(b[0],b[b.length-1])||b.push(b[0]),b}function o(b,x){for(var S=0;S<b.length;S++)if(b[S]!==x[S])return!1;return!0}function a(b){var x={};for(var S in b)b.hasOwnProperty(S)&&(x[S]=b[S]);return x}function l(b){var x=0,S=0,T=b.length,_=b[S],M;for(S;S<T-1;S++)M=b[S+1],x+=(M[0]-_[0])*(M[1]+_[1]),_=M;return x>=0}function u(b){var x=[],S=b.slice(0),T=s(S.shift().slice(0));if(T.length>=4){l(T)||T.reverse(),x.push(T);for(var _=0;_<S.length;_++){var M=s(S[_].slice(0));M.length>=4&&(l(M)&&M.reverse(),x.push(M))}}return x}function c(b){for(var x=[],S=0;S<b.length;S++)for(var T=u(b[S]),_=T.length-1;_>=0;_--){var M=T[_].slice(0);x.push(M)}return x}function d(b,x){var S=i.Tools.arraysIntersectArrays(b,x),T=i.Tools.coordinatesContainPoint(b,x[0]);return!!(!S&&T)}function f(b){for(var x=[],S=[],T,_,M,I=0;I<b.length;I++){var $=s(b[I].slice(0));if(!($.length<4))if(l($)){var L=[$.slice().reverse()];x.push(L)}else S.push($.slice().reverse())}for(var B=[];S.length;){M=S.pop();var z=!1;for(T=x.length-1;T>=0;T--)if(_=x[T][0],d(_,M)){x[T].push(M),z=!0;break}z||B.push(M)}for(;B.length;){M=B.pop();var W=!1;for(T=x.length-1;T>=0;T--)if(_=x[T][0],i.Tools.arraysIntersectArrays(_,M)){x[T].push(M),W=!0;break}W||x.push([M.reverse()])}return x.length===1?{type:"Polygon",coordinates:x[0]}:{type:"MultiPolygon",coordinates:x}}function m(b,x){var S={};return x=x||{},x.idAttribute=x.idAttribute||void 0,b.spatialReference&&(b.spatialReference.wkid===3857||b.spatialReference.wkid===102100)&&(S.crs=i.MercatorCRS),typeof b.x=="number"&&typeof b.y=="number"&&(S.type="Point",S.coordinates=[b.x,b.y],(b.z||b.m)&&S.coordinates.push(b.z),b.m&&S.coordinates.push(b.m)),b.points&&(S.type="MultiPoint",S.coordinates=b.points.slice(0)),b.paths&&(b.paths.length===1?(S.type="LineString",S.coordinates=b.paths[0].slice(0)):(S.type="MultiLineString",S.coordinates=b.paths.slice(0))),b.rings&&(S=f(b.rings.slice(0))),typeof b.xmin=="number"&&typeof b.ymin=="number"&&typeof b.xmax=="number"&&typeof b.ymax=="number"&&(S.type="Polygon",S.coordinates=[[[b.xmax,b.ymax],[b.xmin,b.ymax],[b.xmin,b.ymin],[b.xmax,b.ymin],[b.xmax,b.ymax]]]),(b.compressedGeometry||b.geometry||b.attributes)&&(S.type="Feature",b.compressedGeometry&&(b.geometry={paths:[n(b.compressedGeometry)]}),S.geometry=b.geometry?m(b.geometry):null,S.properties=b.attributes?a(b.attributes):null,b.attributes&&(S.id=b.attributes[x.idAttribute]||b.attributes.OBJECTID||b.attributes.FID)),new i.Primitive(S)}function g(b,x){var S;x=x||{};var T=x.idAttribute||"OBJECTID";x.sr?S={wkid:x.sr}:b&&b.crs&&b.crs.properties.name!="urn:ogc:def:crs:OGC:1.3:CRS84"?S=null:S={wkid:4326};var _={},M;switch(b.type){case"Point":_.x=b.coordinates[0],_.y=b.coordinates[1],b.coordinates[2]&&(_.z=b.coordinates[2]),b.coordinates[3]&&(_.m=b.coordinates[3]),_.spatialReference=S;break;case"MultiPoint":_.points=b.coordinates.slice(0),_.spatialReference=S;break;case"LineString":_.paths=[b.coordinates.slice(0)],_.spatialReference=S;break;case"MultiLineString":_.paths=b.coordinates.slice(0),_.spatialReference=S;break;case"Polygon":_.rings=u(b.coordinates.slice(0)),_.spatialReference=S;break;case"MultiPolygon":_.rings=c(b.coordinates.slice(0)),_.spatialReference=S;break;case"Feature":b.geometry&&(_.geometry=g(b.geometry,x)),_.attributes=b.properties?a(b.properties):{},b.id&&(_.attributes[T]=b.id);break;case"FeatureCollection":for(_=[],M=0;M<b.features.length;M++)_.push(g(b.features[M],x));break;case"GeometryCollection":for(_=[],M=0;M<b.geometries.length;M++)_.push(g(b.geometries[M],x));break}return _}function v(b){return new i.LineString(n(b))}return r.parse=m,r.convert=g,r.toGeoJSON=m,r.fromGeoJSON=g,r.parseCompressedGeometry=v,r})})(Vde);var tit=Vde.exports;const iit=Nw(tit);function Bde(e){return new Function("d","return {"+e.map(function(t,i){return JSON.stringify(t)+": d["+i+"]"}).join(",")+"}")}function rit(e,t){var i=Bde(e);return function(r,n){return t(i(r),n,e)}}function nit(e){var t=Object.create(null),i=[];return e.forEach(function(r){for(var n in r)n in t||i.push(t[n]=n)}),i}function Bj(e){var t=new RegExp('["'+e+`
]`),i=e.charCodeAt(0);function r(u,c){var d,f,m=n(u,function(g,v){if(d)return d(g,v-1);f=g,d=c?rit(g,c):Bde(g)});return m.columns=f,m}function n(u,c){var d={},f={},m=[],g=u.length,v=0,b=0,x,S;function T(){if(v>=g)return f;if(S)return S=!1,d;var M=v,I;if(u.charCodeAt(M)===34){for(var $=M;$++<g;)if(u.charCodeAt($)===34){if(u.charCodeAt($+1)!==34)break;++$}return v=$+2,I=u.charCodeAt($+1),I===13?(S=!0,u.charCodeAt($+2)===10&&++v):I===10&&(S=!0),u.slice(M+1,$).replace(/""/g,'"')}for(;v<g;){var L=1;if(I=u.charCodeAt(v++),I===10)S=!0;else if(I===13)S=!0,u.charCodeAt(v)===10&&(++v,++L);else if(I!==i)continue;return u.slice(M,v-L)}return u.slice(M)}for(;(x=T())!==f;){for(var _=[];x!==d&&x!==f;)_.push(x),x=T();c&&(_=c(_,b++))==null||m.push(_)}return m}function s(u,c){return c==null&&(c=nit(u)),[c.map(l).join(e)].concat(u.map(function(d){return c.map(function(f){return l(d[f])}).join(e)})).join(`
`)}function o(u){return u.map(a).join(`
`)}function a(u){return u.map(l).join(e)}function l(u){return u==null?"":t.test(u+="")?'"'+u.replace(/\"/g,'""')+'"':u}return{parse:r,parseRows:n,format:s,formatRows:o}}var UC=Bj(","),sit=UC.parse,oit=UC.parseRows,ait=UC.format,lit=UC.formatRows,VC=Bj("	"),uit=VC.parse,cit=VC.parseRows,hit=VC.format,dit=VC.formatRows;const pit=Object.freeze(Object.defineProperty({__proto__:null,csvFormat:ait,csvFormatRows:lit,csvParse:sit,csvParseRows:oit,dsvFormat:Bj,tsvFormat:hit,tsvFormatRows:dit,tsvParse:uit,tsvParseRows:cit},Symbol.toStringTag,{value:"Module"})),fit=b9e(pit);var zw={exports:{}};zw.exports=mit;zw.exports.pair=git;zw.exports.format=$N;zw.exports.formatPair=yit;zw.exports.coordToDMS=zde;function mit(e,t){var i=ON(e,t);return i===null?null:i.val}function yit(e){return $N(e.lat,"lat")+" "+$N(e.lon,"lon")}function $N(e,t){var i=zde(e,t);return i.whole+"° "+(i.minutes?i.minutes+"' ":"")+(i.seconds?i.seconds+'" ':"")+i.dir}function zde(e,t){var i={lat:["N","S"],lon:["E","W"]}[t]||"",r=i[e>=0?0:1],n=Math.abs(e),s=Math.floor(n),o=n-s,a=o*60,l=Math.floor(a),u=Math.floor((a-l)*60);return{whole:s,minutes:l,seconds:u,dir:r}}function ON(e,t){if(t||(t="NSEW"),typeof e!="string")return null;e=e.toUpperCase();var i=/^[\s\,]*([NSEW])?\s*([\-|\—|\―]?[0-9.]+)[°º˚]?\s*(?:([0-9.]+)['’′‘]\s*)?(?:([0-9.]+)(?:''|"|”|″)\s*)?([NSEW])?/,r=e.match(i);if(!r)return null;var n=r[0],s;if(r[1]&&r[5]?(s=r[1],n=n.slice(0,-1)):s=r[1]||r[5],s&&t.indexOf(s)===-1)return null;var o=r[2]?parseFloat(r[2]):0,a=r[3]?parseFloat(r[3])/60:0,l=r[4]?parseFloat(r[4])/3600:0,u=o<0?-1:1;return(s==="S"||s==="W")&&(u*=-1),{val:(Math.abs(o)+a+l)*u,dim:s,matched:n,remain:e.slice(n.length)}}function git(e,t){e=e.trim();var i=ON(e,t);if(!i)return null;e=i.remain.trim();var r=ON(e,t);return!r||r.remain?null:i.dim?vit(i.val,r.val,i.dim):[i.val,r.val]}function vit(e,t,i){if(i==="N"||i==="S")return[e,t];if(i==="W"||i==="E")return[t,e]}var bit=zw.exports,gb=fit,CZ=bit,Gde=/(Lat)(itude)?/gi,qde=/(L)(on|ng)(gitude)?/i;function Hde(e,t){var i,r,n;for(var s in e)r=s.match(t),r&&(!i||r[0].length/s.length>n)&&(n=r[0].length/s.length,i=s);return i}function Wde(e){return Hde(e,Gde)}function Jde(e){return Hde(e,qde)}function wit(e){return!!e.match(Gde)}function _it(e){return!!e.match(qde)}function $Z(e){return typeof e=="object"?Object.keys(e).length:0}function Zde(e){var t=[",",";","	","|"],i=[];return t.forEach(function(r){var n=gb.dsvFormat(r).parse(e);if(n.length>=1){for(var s=$Z(n[0]),o=0;o<n.length;o++)if($Z(n[o])!==s)return;i.push({delimiter:r,arity:Object.keys(n[0]).length})}}),i.length?i.sort(function(r,n){return n.arity-r.arity})[0].delimiter:null}function xit(e){return delete e.columns,e}function Sit(e){var t=Zde(e);return t?xit(gb.dsvFormat(t).parse(e)):null}function Eit(e,t,i){i||(i=t,t={}),t.delimiter=t.delimiter||",";var r=t.latfield||"",n=t.lonfield||"",s=t.crs||"",o=[],a={type:"FeatureCollection",features:o};if(s!==""&&(a.crs={type:"name",properties:{name:s}}),t.delimiter==="auto"&&typeof e=="string"&&(t.delimiter=Zde(e),!t.delimiter)){i({type:"Error",message:"Could not autodetect delimiter"});return}var l=t.numericFields?t.numericFields.split(","):null,u=typeof e=="string"?gb.dsvFormat(t.delimiter).parse(e,function(S){if(l)for(var T in S)l.includes(T)&&(S[T]=+S[T]);return S}):e;if(!u.length){i(null,a);return}var c=[],d;r||(r=Wde(u[0])),n||(n=Jde(u[0]));var f=!r||!n;if(f){for(d=0;d<u.length;d++)o.push({type:"Feature",properties:u[d],geometry:null});i(c.length?c:null,a);return}for(d=0;d<u.length;d++)if(u[d][n]!==void 0&&u[d][r]!==void 0){var m=u[d][n],g=u[d][r],v,b,x;x=CZ(m,"EW"),x&&(m=x),x=CZ(g,"NS"),x&&(g=x),v=parseFloat(m),b=parseFloat(g),isNaN(v)||isNaN(b)?c.push({message:"A row contained an invalid value for latitude or longitude",row:u[d],index:d}):(t.includeLatLon||(delete u[d][n],delete u[d][r]),o.push({type:"Feature",properties:u[d],geometry:{type:"Point",coordinates:[parseFloat(v),parseFloat(b)]}}))}i(c.length?c:null,a)}function Mit(e){for(var t=e.features,i={type:"Feature",geometry:{type:"LineString",coordinates:[]}},r=0;r<t.length;r++)i.geometry.coordinates.push(t[r].geometry.coordinates);return i.properties=t.reduce(function(n,s){for(var o in s.properties)n[o]||(n[o]=[]),n[o].push(s.properties[o]);return n},{}),{type:"FeatureCollection",features:[i]}}function Iit(e){for(var t=e.features,i={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},r=0;r<t.length;r++)i.geometry.coordinates[0].push(t[r].geometry.coordinates);return i.properties=t.reduce(function(n,s){for(var o in s.properties)n[o]||(n[o]=[]),n[o].push(s.properties[o]);return n},{}),{type:"FeatureCollection",features:[i]}}var ER={isLon:_it,isLat:wit,guessLatHeader:Wde,guessLonHeader:Jde,csv:gb.csvParse,tsv:gb.tsvParse,dsv:gb,auto:Sit,csv2geojson:Eit,toLine:Mit,toPolygon:Iit};function WM(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Yde={exports:{}};(function(e,t){(function(i){e.exports=i()})(function(){var i=Math.floor,r=Math.log,n=Math.abs,s=Math.pow,o=String.fromCharCode,a=Math.min;return function(){function l(u,c,d){function f(v,b){if(!c[v]){if(!u[v]){var x=typeof WM=="function"&&WM;if(!b&&x)return x(v,!0);if(m)return m(v,!0);var S=new Error("Cannot find module '"+v+"'");throw S.code="MODULE_NOT_FOUND",S}var T=c[v]={exports:{}};u[v][0].call(T.exports,function(_){var M=u[v][1][_];return f(M||_)},T,T.exports,l,u,c,d)}return c[v].exports}for(var m=typeof WM=="function"&&WM,g=0;g<d.length;g++)f(d[g]);return f}return l}()({1:[function(l,u){const c=l("lie"),d=l("./combine"),f=l("buffer").Buffer;u.exports=function(m,g){return new c(function(v,b){const x=d(m,g),S=new XMLHttpRequest;S.open("GET",x,!0),g!=="prj"&&g!=="cpg"&&(S.responseType="arraybuffer"),S.addEventListener("load",function(){return 399<S.status?g==="prj"||g==="cpg"?v(!1):b(new Error(S.status)):v(g!=="prj"&&g!=="cpg"?f.from(S.response):S.response)},!1),S.send()})}},{"./combine":3,buffer:8,lie:12}],2:[function(l,u){(function(c){(function(){const d=l("./binaryajax-browser"),f=l("./combine"),m=l("buffer").Buffer;u.exports=async function(g,v){if(!c.fetch)return d(g,v);const b=f(g,v),x=v==="prj"||v==="cpg";try{const S=await fetch(b);if(399<S.status)throw new Error(S.statusText);if(x)return S.text();const T=await S.arrayBuffer();return m.from(T)}catch(S){if(console.log("ERROR",S,v),x||v==="dbf")return!1;throw S}}}).call(this)}).call(this,typeof Bs>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Bs)},{"./binaryajax-browser":1,"./combine":3,buffer:8}],3:[function(l,u){(function(c){(function(){const d=c.URL;u.exports=(f,m)=>{if(!m)return f;const g=new d(f);return g.pathname=`${g.pathname}.${m}`,g.href}}).call(this)}).call(this,typeof Bs>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Bs)},{}],4:[function(l,u){function c(v){let b=0,x=1;const S=v.length;for(let T,_;x<S;)T=_||v[0],_=v[x],b+=(_[0]-T[0])*(_[1]+T[1]),x++;return 0<b}function d(v,b){return c(b)||!v.length?v.push([b]):v[v.length-1].push(b),v}function f(v){return v?function(b,x){const S=[b.readDoubleLE(x),b.readDoubleLE(x+8)];return v.inverse(S)}:function(b,x){return[b.readDoubleLE(x),b.readDoubleLE(x+8)]}}function m(v,b){return this instanceof m?(this.buffer=v,this.headers=this.parseHeader(),this.headers.length<this.buffer.byteLength&&(this.buffer=this.buffer.slice(0,this.headers.length)),this.shpFuncs(b),void(this.rows=this.getRows())):new m(v,b)}m.prototype.parsePoint=function(v){return{type:"Point",coordinates:this.parseCoord(v,0)}},m.prototype.parseZPoint=function(v){const b=this.parsePoint(v);return b.coordinates.push(v.readDoubleLE(16)),b},m.prototype.parsePointArray=function(v,b,x){const S=[];for(let T=0;T<x;)S.push(this.parseCoord(v,b)),b+=16,T++;return S},m.prototype.parseZPointArray=function(v,b,x,S){for(let T=0;T<x;)S[T].push(v.readDoubleLE(b)),T++,b+=8;return S},m.prototype.parseArrayGroup=function(v,b,x,S,T){const _=[];let M=0,I=0,$,L;for(;M<S;)M++,x+=4,$=I,I=M===S?T:v.readInt32LE(x),L=I-$,L&&(_.push(this.parsePointArray(v,b,L)),b+=L<<4);return _},m.prototype.parseZArrayGroup=function(v,b,x,S){for(let T=0;T<x;)S[T]=this.parseZPointArray(v,b,S[T].length,S[T]),b+=S[T].length<<3,T++;return S},m.prototype.parseMultiPoint=function(v){const b={},x=v.readInt32LE(32,!0);if(!x)return null;const S=this.parseCoord(v,0),T=this.parseCoord(v,16);return b.bbox=[S[0],S[1],T[0],T[1]],x===1?(b.type="Point",b.coordinates=this.parseCoord(v,36)):(b.type="MultiPoint",b.coordinates=this.parsePointArray(v,36,x)),b},m.prototype.parseZMultiPoint=function(v){const b=this.parseMultiPoint(v);if(!b)return null;let x;if(b.type==="Point")return b.coordinates.push(v.readDoubleLE(72)),b;x=b.coordinates.length;const S=52+(x<<4);return b.coordinates=this.parseZPointArray(v,S,x,b.coordinates),b},m.prototype.parsePolyline=function(v){const b={},x=v.readInt32LE(32);if(!x)return null;const S=this.parseCoord(v,0),T=this.parseCoord(v,16);b.bbox=[S[0],S[1],T[0],T[1]];const _=v.readInt32LE(36);let M,I;return x===1?(b.type="LineString",M=44,b.coordinates=this.parsePointArray(v,M,_)):(b.type="MultiLineString",M=40+(x<<2),I=40,b.coordinates=this.parseArrayGroup(v,M,I,x,_)),b},m.prototype.parseZPolyline=function(v){const b=this.parsePolyline(v);if(!b)return null;const x=b.coordinates.length;let S;return b.type==="LineString"?(S=60+(x<<4),b.coordinates=this.parseZPointArray(v,S,x,b.coordinates),b):(S=56+(b.coordinates.reduce(function(_,M){return _+M.length},0)<<4)+(x<<2),b.coordinates=this.parseZArrayGroup(v,S,x,b.coordinates),b)},m.prototype.polyFuncs=function(v){return v&&(v.type==="LineString"?(v.type="Polygon",v.coordinates=[v.coordinates],v):(v.coordinates=v.coordinates.reduce(d,[]),v.coordinates.length===1?(v.type="Polygon",v.coordinates=v.coordinates[0],v):(v.type="MultiPolygon",v)))},m.prototype.parsePolygon=function(v){return this.polyFuncs(this.parsePolyline(v))},m.prototype.parseZPolygon=function(v){return this.polyFuncs(this.parseZPolyline(v))};const g={1:"parsePoint",3:"parsePolyline",5:"parsePolygon",8:"parseMultiPoint",11:"parseZPoint",13:"parseZPolyline",15:"parseZPolygon",18:"parseZMultiPoint"};m.prototype.shpFuncs=function(v){let b=this.headers.shpCode;if(20<b&&(b-=20),!(b in g))throw new Error("I don't know that shp type");this.parseFunc=this[g[b]],this.parseCoord=f(v)},m.prototype.getShpCode=function(){return this.parseHeader().shpCode},m.prototype.parseHeader=function(){const v=this.buffer.slice(0,100);return{length:v.readInt32BE(24)<<1,version:v.readInt32LE(28),shpCode:v.readInt32LE(32),bbox:[v.readDoubleLE(36),v.readDoubleLE(44),v.readDoubleLE(52),v.readDoubleLE(52)]}},m.prototype.getRows=function(){let v=100;const b=this.buffer.byteLength,x=[];for(let S;v<b&&(S=this.getRow(v),!!S);)v+=8,v+=S.len,S.type?x.push(this.parseFunc(S.data)):x.push(null);return x},m.prototype.getRow=function(v){const b=this.buffer.slice(v,v+12),x=b.readInt32BE(4)<<1,S=b.readInt32BE(0);return x===0?{id:S,len:x,type:0}:{id:S,len:x,data:this.buffer.slice(v+12,v+x+8),type:b.readInt32LE(8)}},u.exports=function(v,b){return new m(v,b).rows}},{}],5:[function(l,u){const c=l("jszip");u.exports=async d=>{const f=new c;await f.loadAsync(d);const m=f.file(/.+/),g={};return await Promise.all(m.map(async v=>{let b;b=v.name.slice(-3).toLowerCase()==="shp"||v.name.slice(-3).toLowerCase()==="dbf"?await v.async("nodebuffer"):await v.async("text"),g[v.name]=b})),g}},{jszip:11}],6:[function(l,u,c){function d($){var L=$.length;if(0<L%4)throw new Error("Invalid string. Length must be a multiple of 4");var B=$.indexOf("=");B===-1&&(B=L);var z=B===L?0:4-B%4;return[B,z]}function f($,L,B){return 3*(L+B)/4-B}function m($){var L=d($),B=L[0],z=L[1],W=new T(f($,B,z)),J=0,K=0<z?B-4:B,Q,y;for(y=0;y<K;y+=4)Q=S[$.charCodeAt(y)]<<18|S[$.charCodeAt(y+1)]<<12|S[$.charCodeAt(y+2)]<<6|S[$.charCodeAt(y+3)],W[J++]=255&Q>>16,W[J++]=255&Q>>8,W[J++]=255&Q;return z===2&&(Q=S[$.charCodeAt(y)]<<2|S[$.charCodeAt(y+1)]>>4,W[J++]=255&Q),z===1&&(Q=S[$.charCodeAt(y)]<<10|S[$.charCodeAt(y+1)]<<4|S[$.charCodeAt(y+2)]>>2,W[J++]=255&Q>>8,W[J++]=255&Q),W}function g($){return x[63&$>>18]+x[63&$>>12]+x[63&$>>6]+x[63&$]}function v($,L,B){for(var z=[],W=L,J;W<B;W+=3)J=(16711680&$[W]<<16)+(65280&$[W+1]<<8)+(255&$[W+2]),z.push(g(J));return z.join("")}function b($){for(var L=$.length,B=L%3,z=[],W=16383,J=0,K=L-B,Q;J<K;J+=W)z.push(v($,J,J+W>K?K:J+W));return B===1?(Q=$[L-1],z.push(x[Q>>2]+x[63&Q<<4]+"==")):B===2&&(Q=($[L-2]<<8)+$[L-1],z.push(x[Q>>10]+x[63&Q>>4]+x[63&Q<<2]+"=")),z.join("")}c.byteLength=function($){var L=d($),B=L[0],z=L[1];return 3*(B+z)/4-z},c.toByteArray=m,c.fromByteArray=b;for(var x=[],S=[],T=typeof Uint8Array>"u"?Array:Uint8Array,_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M=0,I=_.length;M<I;++M)x[M]=_[M],S[_.charCodeAt(M)]=M;S[45]=62,S[95]=63},{}],7:[function(){},{}],8:[function(l,u,c){(function(){(function(){function d(k){if(2147483647<k)throw new RangeError('The value "'+k+'" is invalid for option "size"');var O=new Uint8Array(k);return O.__proto__=f.prototype,O}function f(k,O,C){if(typeof k=="number"){if(typeof O=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(k)}return m(k,O,C)}function m(k,O,C){if(typeof k=="string")return x(k,O);if(ArrayBuffer.isView(k))return S(k);if(k==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k);if(ye(k,ArrayBuffer)||k&&ye(k.buffer,ArrayBuffer))return T(k,O,C);if(typeof k=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var G=k.valueOf&&k.valueOf();if(G!=null&&G!==k)return f.from(G,O,C);var Z=_(k);if(Z)return Z;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof k[Symbol.toPrimitive]=="function")return f.from(k[Symbol.toPrimitive]("string"),O,C);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k)}function g(k){if(typeof k!="number")throw new TypeError('"size" argument must be of type number');if(0>k)throw new RangeError('The value "'+k+'" is invalid for option "size"')}function v(k,O,C){return g(k),0>=k||O===void 0?d(k):typeof C=="string"?d(k).fill(O,C):d(k).fill(O)}function b(k){return g(k),d(0>k?0:0|M(k))}function x(k,O){if((typeof O!="string"||O==="")&&(O="utf8"),!f.isEncoding(O))throw new TypeError("Unknown encoding: "+O);var C=0|I(k,O),G=d(C),Z=G.write(k,O);return Z!==C&&(G=G.slice(0,Z)),G}function S(k){for(var O=0>k.length?0:0|M(k.length),C=d(O),G=0;G<O;G+=1)C[G]=255&k[G];return C}function T(k,O,C){if(0>O||k.byteLength<O)throw new RangeError('"offset" is outside of buffer bounds');if(k.byteLength<O+(C||0))throw new RangeError('"length" is outside of buffer bounds');var G;return G=O===void 0&&C===void 0?new Uint8Array(k):C===void 0?new Uint8Array(k,O):new Uint8Array(k,O,C),G.__proto__=f.prototype,G}function _(k){if(f.isBuffer(k)){var O=0|M(k.length),C=d(O);return C.length===0||k.copy(C,0,0,O),C}return k.length===void 0?k.type==="Buffer"&&Array.isArray(k.data)?S(k.data):void 0:typeof k.length!="number"||ae(k.length)?d(0):S(k)}function M(k){if(k>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647 .toString(16)+" bytes");return 0|k}function I(k,O){if(f.isBuffer(k))return k.length;if(ArrayBuffer.isView(k)||ye(k,ArrayBuffer))return k.byteLength;if(typeof k!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof k);var C=k.length,G=2<arguments.length&&arguments[2]===!0;if(!G&&C===0)return 0;for(var Z=!1;;)switch(O){case"ascii":case"latin1":case"binary":return C;case"utf8":case"utf-8":return Ae(k).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*C;case"hex":return C>>>1;case"base64":return D(k).length;default:if(Z)return G?-1:Ae(k).length;O=(""+O).toLowerCase(),Z=!0}}function $(k,O,C){var G=!1;if((O===void 0||0>O)&&(O=0),O>this.length||((C===void 0||C>this.length)&&(C=this.length),0>=C)||(C>>>=0,O>>>=0,C<=O))return"";for(k||(k="utf8");;)switch(k){case"hex":return re(this,O,C);case"utf8":case"utf-8":return j(this,O,C);case"ascii":return q(this,O,C);case"latin1":case"binary":return de(this,O,C);case"base64":return N(this,O,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me(this,O,C);default:if(G)throw new TypeError("Unknown encoding: "+k);k=(k+"").toLowerCase(),G=!0}}function L(k,O,C){var G=k[O];k[O]=k[C],k[C]=G}function B(k,O,C,G,Z){if(k.length===0)return-1;if(typeof C=="string"?(G=C,C=0):2147483647<C?C=2147483647:-2147483648>C&&(C=-2147483648),C=+C,ae(C)&&(C=Z?0:k.length-1),0>C&&(C=k.length+C),C>=k.length){if(Z)return-1;C=k.length-1}else if(0>C)if(Z)C=0;else return-1;if(typeof O=="string"&&(O=f.from(O,G)),f.isBuffer(O))return O.length===0?-1:z(k,O,C,G,Z);if(typeof O=="number")return O&=255,typeof Uint8Array.prototype.indexOf=="function"?Z?Uint8Array.prototype.indexOf.call(k,O,C):Uint8Array.prototype.lastIndexOf.call(k,O,C):z(k,[O],C,G,Z);throw new TypeError("val must be string, number or Buffer")}function z(k,O,C,G,Z){function F(Ve,be){return te===1?Ve[be]:Ve.readUInt16BE(be*te)}var te=1,ge=k.length,xe=O.length;if(G!==void 0&&(G=(G+"").toLowerCase(),G==="ucs2"||G==="ucs-2"||G==="utf16le"||G==="utf-16le")){if(2>k.length||2>O.length)return-1;te=2,ge/=2,xe/=2,C/=2}var fe;if(Z){var ze=-1;for(fe=C;fe<ge;fe++)if(F(k,fe)!==F(O,ze===-1?0:fe-ze))ze!==-1&&(fe-=fe-ze),ze=-1;else if(ze===-1&&(ze=fe),fe-ze+1===xe)return ze*te}else for(C+xe>ge&&(C=ge-xe),fe=C;0<=fe;fe--){for(var He=!0,Xe=0;Xe<xe;Xe++)if(F(k,fe+Xe)!==F(O,Xe)){He=!1;break}if(He)return fe}return-1}function W(k,O,C,G){C=+C||0;var Z=k.length-C;G?(G=+G,G>Z&&(G=Z)):G=Z;var F=O.length;G>F/2&&(G=F/2);for(var te=0,ge;te<G;++te){if(ge=parseInt(O.substr(2*te,2),16),ae(ge))return te;k[C+te]=ge}return te}function J(k,O,C,G){return ne(Ae(O,k.length-C),k,C,G)}function K(k,O,C,G){return ne(H(O),k,C,G)}function Q(k,O,C,G){return K(k,O,C,G)}function y(k,O,C,G){return ne(D(O),k,C,G)}function A(k,O,C,G){return ne(V(O,k.length-C),k,C,G)}function N(k,O,C){return O===0&&C===k.length?U.fromByteArray(k):U.fromByteArray(k.slice(O,C))}function j(k,O,C){C=a(k.length,C);for(var G=[],Z=O;Z<C;){var F=k[Z],te=null,ge=239<F?4:223<F?3:191<F?2:1;if(Z+ge<=C){var xe,fe,ze,He;ge===1?128>F&&(te=F):ge===2?(xe=k[Z+1],(192&xe)==128&&(He=(31&F)<<6|63&xe,127<He&&(te=He))):ge===3?(xe=k[Z+1],fe=k[Z+2],(192&xe)==128&&(192&fe)==128&&(He=(15&F)<<12|(63&xe)<<6|63&fe,2047<He&&(55296>He||57343<He)&&(te=He))):ge===4&&(xe=k[Z+1],fe=k[Z+2],ze=k[Z+3],(192&xe)==128&&(192&fe)==128&&(192&ze)==128&&(He=(15&F)<<18|(63&xe)<<12|(63&fe)<<6|63&ze,65535<He&&1114112>He&&(te=He)))}te===null?(te=65533,ge=1):65535<te&&(te-=65536,G.push(55296|1023&te>>>10),te=56320|1023&te),G.push(te),Z+=ge}return oe(G)}function oe(k){var O=k.length;if(O<=4096)return o.apply(String,k);for(var C="",G=0;G<O;)C+=o.apply(String,k.slice(G,G+=4096));return C}function q(k,O,C){var G="";C=a(k.length,C);for(var Z=O;Z<C;++Z)G+=o(127&k[Z]);return G}function de(k,O,C){var G="";C=a(k.length,C);for(var Z=O;Z<C;++Z)G+=o(k[Z]);return G}function re(k,O,C){var G=k.length;(!O||0>O)&&(O=0),(!C||0>C||C>G)&&(C=G);for(var Z="",F=O;F<C;++F)Z+=Ie(k[F]);return Z}function me(k,O,C){for(var G=k.slice(O,C),Z="",F=0;F<G.length;F+=2)Z+=o(G[F]+256*G[F+1]);return Z}function ve(k,O,C){if(k%1!=0||0>k)throw new RangeError("offset is not uint");if(k+O>C)throw new RangeError("Trying to access beyond buffer length")}function _e(k,O,C,G,Z,F){if(!f.isBuffer(k))throw new TypeError('"buffer" argument must be a Buffer instance');if(O>Z||O<F)throw new RangeError('"value" argument is out of bounds');if(C+G>k.length)throw new RangeError("Index out of range")}function Se(k,O,C,G){if(C+G>k.length)throw new RangeError("Index out of range");if(0>C)throw new RangeError("Index out of range")}function Oe(k,O,C,G,Z){return O=+O,C>>>=0,Z||Se(k,O,C,4),le.write(k,O,C,G,23,4),C+4}function Me(k,O,C,G,Z){return O=+O,C>>>=0,Z||Se(k,O,C,8),le.write(k,O,C,G,52,8),C+8}function we(k){if(k=k.split("=")[0],k=k.trim().replace(ie,""),2>k.length)return"";for(;k.length%4!=0;)k+="=";return k}function Ie(k){return 16>k?"0"+k.toString(16):k.toString(16)}function Ae(k,O){O=O||1/0;for(var C=k.length,G=null,Z=[],F=0,te;F<C;++F){if(te=k.charCodeAt(F),55295<te&&57344>te){if(!G){if(56319<te){-1<(O-=3)&&Z.push(239,191,189);continue}else if(F+1===C){-1<(O-=3)&&Z.push(239,191,189);continue}G=te;continue}if(56320>te){-1<(O-=3)&&Z.push(239,191,189),G=te;continue}te=(G-55296<<10|te-56320)+65536}else G&&-1<(O-=3)&&Z.push(239,191,189);if(G=null,128>te){if(0>(O-=1))break;Z.push(te)}else if(2048>te){if(0>(O-=2))break;Z.push(192|te>>6,128|63&te)}else if(65536>te){if(0>(O-=3))break;Z.push(224|te>>12,128|63&te>>6,128|63&te)}else if(1114112>te){if(0>(O-=4))break;Z.push(240|te>>18,128|63&te>>12,128|63&te>>6,128|63&te)}else throw new Error("Invalid code point")}return Z}function H(k){for(var O=[],C=0;C<k.length;++C)O.push(255&k.charCodeAt(C));return O}function V(k,O){for(var C=[],G=0,Z,F,te;G<k.length&&!(0>(O-=2));++G)Z=k.charCodeAt(G),F=Z>>8,te=Z%256,C.push(te),C.push(F);return C}function D(k){return U.toByteArray(we(k))}function ne(k,O,C,G){for(var Z=0;Z<G&&!(Z+C>=O.length||Z>=k.length);++Z)O[Z+C]=k[Z];return Z}function ye(k,O){return k instanceof O||k!=null&&k.constructor!=null&&k.constructor.name!=null&&k.constructor.name===O.name}function ae(k){return k!==k}var U=l("base64-js"),le=l("ieee754");c.Buffer=f,c.SlowBuffer=function(k){return+k!=k&&(k=0),f.alloc(+k)},c.INSPECT_MAX_BYTES=50,c.kMaxLength=2147483647,f.TYPED_ARRAY_SUPPORT=function(){try{var k=new Uint8Array(1);return k.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},k.foo()===42}catch{return!1}}(),f.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){return f.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){return f.isBuffer(this)?this.byteOffset:void 0}}),typeof Symbol<"u"&&Symbol.species!=null&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),f.poolSize=8192,f.from=function(k,O,C){return m(k,O,C)},f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,f.alloc=function(k,O,C){return v(k,O,C)},f.allocUnsafe=function(k){return b(k)},f.allocUnsafeSlow=function(k){return b(k)},f.isBuffer=function(k){return k!=null&&k._isBuffer===!0&&k!==f.prototype},f.compare=function(k,O){if(ye(k,Uint8Array)&&(k=f.from(k,k.offset,k.byteLength)),ye(O,Uint8Array)&&(O=f.from(O,O.offset,O.byteLength)),!f.isBuffer(k)||!f.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(k===O)return 0;for(var C=k.length,G=O.length,Z=0,F=a(C,G);Z<F;++Z)if(k[Z]!==O[Z]){C=k[Z],G=O[Z];break}return C<G?-1:G<C?1:0},f.isEncoding=function(k){switch((k+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(k,O){if(!Array.isArray(k))throw new TypeError('"list" argument must be an Array of Buffers');if(k.length===0)return f.alloc(0);var C;if(O===void 0)for(O=0,C=0;C<k.length;++C)O+=k[C].length;var G=f.allocUnsafe(O),Z=0;for(C=0;C<k.length;++C){var F=k[C];if(ye(F,Uint8Array)&&(F=f.from(F)),!f.isBuffer(F))throw new TypeError('"list" argument must be an Array of Buffers');F.copy(G,Z),Z+=F.length}return G},f.byteLength=I,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var k=this.length;if(k%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var O=0;O<k;O+=2)L(this,O,O+1);return this},f.prototype.swap32=function(){var k=this.length;if(k%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var O=0;O<k;O+=4)L(this,O,O+3),L(this,O+1,O+2);return this},f.prototype.swap64=function(){var k=this.length;if(k%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var O=0;O<k;O+=8)L(this,O,O+7),L(this,O+1,O+6),L(this,O+2,O+5),L(this,O+3,O+4);return this},f.prototype.toString=function(){var k=this.length;return k===0?"":arguments.length===0?j(this,0,k):$.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(k){if(!f.isBuffer(k))throw new TypeError("Argument must be a Buffer");return this===k||f.compare(this,k)===0},f.prototype.inspect=function(){var k="",O=c.INSPECT_MAX_BYTES;return k=this.toString("hex",0,O).replace(/(.{2})/g,"$1 ").trim(),this.length>O&&(k+=" ... "),"<Buffer "+k+">"},f.prototype.compare=function(k,O,C,G,Z){if(ye(k,Uint8Array)&&(k=f.from(k,k.offset,k.byteLength)),!f.isBuffer(k))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof k);if(O===void 0&&(O=0),C===void 0&&(C=k?k.length:0),G===void 0&&(G=0),Z===void 0&&(Z=this.length),0>O||C>k.length||0>G||Z>this.length)throw new RangeError("out of range index");if(G>=Z&&O>=C)return 0;if(G>=Z)return-1;if(O>=C)return 1;if(O>>>=0,C>>>=0,G>>>=0,Z>>>=0,this===k)return 0;for(var F=Z-G,te=C-O,ge=a(F,te),xe=this.slice(G,Z),fe=k.slice(O,C),ze=0;ze<ge;++ze)if(xe[ze]!==fe[ze]){F=xe[ze],te=fe[ze];break}return F<te?-1:te<F?1:0},f.prototype.includes=function(k,O,C){return this.indexOf(k,O,C)!==-1},f.prototype.indexOf=function(k,O,C){return B(this,k,O,C,!0)},f.prototype.lastIndexOf=function(k,O,C){return B(this,k,O,C,!1)},f.prototype.write=function(k,O,C,G){if(O===void 0)G="utf8",C=this.length,O=0;else if(C===void 0&&typeof O=="string")G=O,C=this.length,O=0;else if(isFinite(O))O>>>=0,isFinite(C)?(C>>>=0,G===void 0&&(G="utf8")):(G=C,C=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Z=this.length-O;if((C===void 0||C>Z)&&(C=Z),0<k.length&&(0>C||0>O)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");G||(G="utf8");for(var F=!1;;)switch(G){case"hex":return W(this,k,O,C);case"utf8":case"utf-8":return J(this,k,O,C);case"ascii":return K(this,k,O,C);case"latin1":case"binary":return Q(this,k,O,C);case"base64":return y(this,k,O,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,k,O,C);default:if(F)throw new TypeError("Unknown encoding: "+G);G=(""+G).toLowerCase(),F=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},f.prototype.slice=function(k,O){var C=this.length;k=~~k,O=O===void 0?C:~~O,0>k?(k+=C,0>k&&(k=0)):k>C&&(k=C),0>O?(O+=C,0>O&&(O=0)):O>C&&(O=C),O<k&&(O=k);var G=this.subarray(k,O);return G.__proto__=f.prototype,G},f.prototype.readUIntLE=function(k,O,C){k>>>=0,O>>>=0,C||ve(k,O,this.length);for(var G=this[k],Z=1,F=0;++F<O&&(Z*=256);)G+=this[k+F]*Z;return G},f.prototype.readUIntBE=function(k,O,C){k>>>=0,O>>>=0,C||ve(k,O,this.length);for(var G=this[k+--O],Z=1;0<O&&(Z*=256);)G+=this[k+--O]*Z;return G},f.prototype.readUInt8=function(k,O){return k>>>=0,O||ve(k,1,this.length),this[k]},f.prototype.readUInt16LE=function(k,O){return k>>>=0,O||ve(k,2,this.length),this[k]|this[k+1]<<8},f.prototype.readUInt16BE=function(k,O){return k>>>=0,O||ve(k,2,this.length),this[k]<<8|this[k+1]},f.prototype.readUInt32LE=function(k,O){return k>>>=0,O||ve(k,4,this.length),(this[k]|this[k+1]<<8|this[k+2]<<16)+16777216*this[k+3]},f.prototype.readUInt32BE=function(k,O){return k>>>=0,O||ve(k,4,this.length),16777216*this[k]+(this[k+1]<<16|this[k+2]<<8|this[k+3])},f.prototype.readIntLE=function(k,O,C){k>>>=0,O>>>=0,C||ve(k,O,this.length);for(var G=this[k],Z=1,F=0;++F<O&&(Z*=256);)G+=this[k+F]*Z;return Z*=128,G>=Z&&(G-=s(2,8*O)),G},f.prototype.readIntBE=function(k,O,C){k>>>=0,O>>>=0,C||ve(k,O,this.length);for(var G=O,Z=1,F=this[k+--G];0<G&&(Z*=256);)F+=this[k+--G]*Z;return Z*=128,F>=Z&&(F-=s(2,8*O)),F},f.prototype.readInt8=function(k,O){return k>>>=0,O||ve(k,1,this.length),128&this[k]?-1*(255-this[k]+1):this[k]},f.prototype.readInt16LE=function(k,O){k>>>=0,O||ve(k,2,this.length);var C=this[k]|this[k+1]<<8;return 32768&C?4294901760|C:C},f.prototype.readInt16BE=function(k,O){k>>>=0,O||ve(k,2,this.length);var C=this[k+1]|this[k]<<8;return 32768&C?4294901760|C:C},f.prototype.readInt32LE=function(k,O){return k>>>=0,O||ve(k,4,this.length),this[k]|this[k+1]<<8|this[k+2]<<16|this[k+3]<<24},f.prototype.readInt32BE=function(k,O){return k>>>=0,O||ve(k,4,this.length),this[k]<<24|this[k+1]<<16|this[k+2]<<8|this[k+3]},f.prototype.readFloatLE=function(k,O){return k>>>=0,O||ve(k,4,this.length),le.read(this,k,!0,23,4)},f.prototype.readFloatBE=function(k,O){return k>>>=0,O||ve(k,4,this.length),le.read(this,k,!1,23,4)},f.prototype.readDoubleLE=function(k,O){return k>>>=0,O||ve(k,8,this.length),le.read(this,k,!0,52,8)},f.prototype.readDoubleBE=function(k,O){return k>>>=0,O||ve(k,8,this.length),le.read(this,k,!1,52,8)},f.prototype.writeUIntLE=function(k,O,C,G){if(k=+k,O>>>=0,C>>>=0,!G){var Z=s(2,8*C)-1;_e(this,k,O,C,Z,0)}var F=1,te=0;for(this[O]=255&k;++te<C&&(F*=256);)this[O+te]=255&k/F;return O+C},f.prototype.writeUIntBE=function(k,O,C,G){if(k=+k,O>>>=0,C>>>=0,!G){var Z=s(2,8*C)-1;_e(this,k,O,C,Z,0)}var F=C-1,te=1;for(this[O+F]=255&k;0<=--F&&(te*=256);)this[O+F]=255&k/te;return O+C},f.prototype.writeUInt8=function(k,O,C){return k=+k,O>>>=0,C||_e(this,k,O,1,255,0),this[O]=255&k,O+1},f.prototype.writeUInt16LE=function(k,O,C){return k=+k,O>>>=0,C||_e(this,k,O,2,65535,0),this[O]=255&k,this[O+1]=k>>>8,O+2},f.prototype.writeUInt16BE=function(k,O,C){return k=+k,O>>>=0,C||_e(this,k,O,2,65535,0),this[O]=k>>>8,this[O+1]=255&k,O+2},f.prototype.writeUInt32LE=function(k,O,C){return k=+k,O>>>=0,C||_e(this,k,O,4,4294967295,0),this[O+3]=k>>>24,this[O+2]=k>>>16,this[O+1]=k>>>8,this[O]=255&k,O+4},f.prototype.writeUInt32BE=function(k,O,C){return k=+k,O>>>=0,C||_e(this,k,O,4,4294967295,0),this[O]=k>>>24,this[O+1]=k>>>16,this[O+2]=k>>>8,this[O+3]=255&k,O+4},f.prototype.writeIntLE=function(k,O,C,G){if(k=+k,O>>>=0,!G){var Z=s(2,8*C-1);_e(this,k,O,C,Z-1,-Z)}var F=0,te=1,ge=0;for(this[O]=255&k;++F<C&&(te*=256);)0>k&&ge===0&&this[O+F-1]!==0&&(ge=1),this[O+F]=255&(k/te>>0)-ge;return O+C},f.prototype.writeIntBE=function(k,O,C,G){if(k=+k,O>>>=0,!G){var Z=s(2,8*C-1);_e(this,k,O,C,Z-1,-Z)}var F=C-1,te=1,ge=0;for(this[O+F]=255&k;0<=--F&&(te*=256);)0>k&&ge===0&&this[O+F+1]!==0&&(ge=1),this[O+F]=255&(k/te>>0)-ge;return O+C},f.prototype.writeInt8=function(k,O,C){return k=+k,O>>>=0,C||_e(this,k,O,1,127,-128),0>k&&(k=255+k+1),this[O]=255&k,O+1},f.prototype.writeInt16LE=function(k,O,C){return k=+k,O>>>=0,C||_e(this,k,O,2,32767,-32768),this[O]=255&k,this[O+1]=k>>>8,O+2},f.prototype.writeInt16BE=function(k,O,C){return k=+k,O>>>=0,C||_e(this,k,O,2,32767,-32768),this[O]=k>>>8,this[O+1]=255&k,O+2},f.prototype.writeInt32LE=function(k,O,C){return k=+k,O>>>=0,C||_e(this,k,O,4,2147483647,-2147483648),this[O]=255&k,this[O+1]=k>>>8,this[O+2]=k>>>16,this[O+3]=k>>>24,O+4},f.prototype.writeInt32BE=function(k,O,C){return k=+k,O>>>=0,C||_e(this,k,O,4,2147483647,-2147483648),0>k&&(k=4294967295+k+1),this[O]=k>>>24,this[O+1]=k>>>16,this[O+2]=k>>>8,this[O+3]=255&k,O+4},f.prototype.writeFloatLE=function(k,O,C){return Oe(this,k,O,!0,C)},f.prototype.writeFloatBE=function(k,O,C){return Oe(this,k,O,!1,C)},f.prototype.writeDoubleLE=function(k,O,C){return Me(this,k,O,!0,C)},f.prototype.writeDoubleBE=function(k,O,C){return Me(this,k,O,!1,C)},f.prototype.copy=function(k,O,C,G){if(!f.isBuffer(k))throw new TypeError("argument should be a Buffer");if(C||(C=0),G||G===0||(G=this.length),O>=k.length&&(O=k.length),O||(O=0),0<G&&G<C&&(G=C),G===C||k.length===0||this.length===0)return 0;if(0>O)throw new RangeError("targetStart out of bounds");if(0>C||C>=this.length)throw new RangeError("Index out of range");if(0>G)throw new RangeError("sourceEnd out of bounds");G>this.length&&(G=this.length),k.length-O<G-C&&(G=k.length-O+C);var Z=G-C;if(this===k&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(O,C,G);else if(this===k&&C<O&&O<G)for(var F=Z-1;0<=F;--F)k[F+O]=this[F+C];else Uint8Array.prototype.set.call(k,this.subarray(C,G),O);return Z},f.prototype.fill=function(k,O,C,G){if(typeof k=="string"){if(typeof O=="string"?(G=O,O=0,C=this.length):typeof C=="string"&&(G=C,C=this.length),G!==void 0&&typeof G!="string")throw new TypeError("encoding must be a string");if(typeof G=="string"&&!f.isEncoding(G))throw new TypeError("Unknown encoding: "+G);if(k.length===1){var Z=k.charCodeAt(0);(G==="utf8"&&128>Z||G==="latin1")&&(k=Z)}}else typeof k=="number"&&(k&=255);if(0>O||this.length<O||this.length<C)throw new RangeError("Out of range index");if(C<=O)return this;O>>>=0,C=C===void 0?this.length:C>>>0,k||(k=0);var F;if(typeof k=="number")for(F=O;F<C;++F)this[F]=k;else{var te=f.isBuffer(k)?k:f.from(k,G),ge=te.length;if(ge===0)throw new TypeError('The value "'+k+'" is invalid for argument "value"');for(F=0;F<C-O;++F)this[F+O]=te[F%ge]}return this};var ie=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,l("buffer").Buffer)},{"base64-js":6,buffer:8,ieee754:9}],9:[function(l,u,c){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */c.read=function(d,f,m,g,v){var b=8*v-g-1,x=(1<<b)-1,S=x>>1,T=-7,_=m?v-1:0,M=m?-1:1,I=d[f+_],$,L;for(_+=M,$=I&(1<<-T)-1,I>>=-T,T+=b;0<T;$=256*$+d[f+_],_+=M,T-=8);for(L=$&(1<<-T)-1,$>>=-T,T+=g;0<T;L=256*L+d[f+_],_+=M,T-=8);if($===0)$=1-S;else{if($===x)return L?NaN:(I?-1:1)*(1/0);L+=s(2,g),$-=S}return(I?-1:1)*L*s(2,$-g)},c.write=function(d,f,m,g,v,b){var x=Math.LN2,S=8*b-v-1,T=(1<<S)-1,_=T>>1,M=v===23?s(2,-24)-s(2,-77):0,I=g?0:b-1,$=g?1:-1,L=0>f||f===0&&0>1/f?1:0,B,z,W;for(f=n(f),isNaN(f)||f===1/0?(z=isNaN(f)?1:0,B=T):(B=i(r(f)/x),1>f*(W=s(2,-B))&&(B--,W*=2),f+=1<=B+_?M/W:M*s(2,1-_),2<=f*W&&(B++,W/=2),B+_>=T?(z=0,B=T):1<=B+_?(z=(f*W-1)*s(2,v),B+=_):(z=f*s(2,_-1)*s(2,v),B=0));8<=v;d[m+I]=255&z,I+=$,z/=256,v-=8);for(B=B<<v|z,S+=v;0<S;d[m+I]=255&B,I+=$,B/=256,S-=8);d[m+I-$]|=128*L}},{}],10:[function(l,u){(function(c){(function(){function d(){_=!0;for(var M=T.length,I,$;M;){for($=T,T=[],I=-1;++I<M;)$[I]();M=T.length}_=!1}function f(M){T.push(M)!==1||_||g()}var m=c.MutationObserver||c.WebKitMutationObserver,g;if(m){var v=0,b=new m(d),x=c.document.createTextNode("");b.observe(x,{characterData:!0}),g=function(){x.data=v=++v%2}}else if(!c.setImmediate&&typeof c.MessageChannel<"u"){var S=new c.MessageChannel;S.port1.onmessage=d,g=function(){S.port2.postMessage(0)}}else g="document"in c&&"onreadystatechange"in c.document.createElement("script")?function(){var M=c.document.createElement("script");M.onreadystatechange=function(){d(),M.onreadystatechange=null,M.parentNode.removeChild(M),M=null},c.document.documentElement.appendChild(M)}:function(){setTimeout(d,0)};var T=[],_;u.exports=f}).call(this)}).call(this,typeof Bs>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Bs)},{}],11:[function(l,u,c){(function(d,f,m){(function(){/*!

	JSZip v3.6.0 - A JavaScript class for generating and reading zip files
	<http://stuartk.com/jszip>

	(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
	Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.

	JSZip uses the library pako released under the MIT license :
	https://github.com/nodeca/pako/blob/master/LICENSE
	*/(function(g){typeof c=="object"&&typeof u<"u"?u.exports=g():(typeof window>"u"?typeof d>"u"?typeof self>"u"?this:self:d:window).JSZip=g()})(function(){return function g(v,b,x){function S(M,I){if(!b[M]){if(!v[M]){var $=typeof l=="function"&&l;if(!I&&$)return $(M,!0);if(T)return T(M,!0);var L=new Error("Cannot find module '"+M+"'");throw L.code="MODULE_NOT_FOUND",L}var B=b[M]={exports:{}};v[M][0].call(B.exports,function(z){var W=v[M][1][z];return S(W||z)},B,B.exports,g,v,b,x)}return b[M].exports}for(var T=typeof l=="function"&&l,_=0;_<x.length;_++)S(x[_]);return S}({1:[function(g,v,b){(function(x){(function(S){typeof b=="object"&&v!==void 0?v.exports=S():(typeof window>"u"?x===void 0?typeof self>"u"?this:self:x:window).JSZip=S()})(function(){return function S(T,_,M){function I(B,z){if(!_[B]){if(!T[B]){var W=typeof g=="function"&&g;if(!z&&W)return W(B,!0);if($)return $(B,!0);var J=new Error("Cannot find module '"+B+"'");throw J.code="MODULE_NOT_FOUND",J}var K=_[B]={exports:{}};T[B][0].call(K.exports,function(Q){return I(T[B][1][Q]||Q)},K,K.exports,S,T,_,M)}return _[B].exports}for(var $=typeof g=="function"&&g,L=0;L<M.length;L++)I(M[L]);return I}({1:[function(S,T,_){(function(M){(function(I){typeof _=="object"&&T!==void 0?T.exports=I():(typeof window>"u"?M===void 0?typeof self>"u"?this:self:M:window).JSZip=I()})(function(){return function I($,L,B){function z(K,Q){if(!L[K]){if(!$[K]){var y=typeof S=="function"&&S;if(!Q&&y)return y(K,!0);if(W)return W(K,!0);var A=new Error("Cannot find module '"+K+"'");throw A.code="MODULE_NOT_FOUND",A}var N=L[K]={exports:{}};$[K][0].call(N.exports,function(j){return z($[K][1][j]||j)},N,N.exports,I,$,L,B)}return L[K].exports}for(var W=typeof S=="function"&&S,J=0;J<B.length;J++)z(B[J]);return z}({1:[function(I,$,L){(function(B){(function(z){typeof L=="object"&&$!==void 0?$.exports=z():(typeof window>"u"?B===void 0?typeof self>"u"?this:self:B:window).JSZip=z()})(function(){return function z(W,J,K){function Q(N,j){if(!J[N]){if(!W[N]){var oe=typeof I=="function"&&I;if(!j&&oe)return oe(N,!0);if(y)return y(N,!0);var q=new Error("Cannot find module '"+N+"'");throw q.code="MODULE_NOT_FOUND",q}var de=J[N]={exports:{}};W[N][0].call(de.exports,function(re){return Q(W[N][1][re]||re)},de,de.exports,z,W,J,K)}return J[N].exports}for(var y=typeof I=="function"&&I,A=0;A<K.length;A++)Q(K[A]);return Q}({1:[function(z,W,J){(function(K){(function(Q){typeof J=="object"&&W!==void 0?W.exports=Q():(typeof window>"u"?K===void 0?typeof self>"u"?this:self:K:window).JSZip=Q()})(function(){return function Q(y,A,N){function j(de,re){if(!A[de]){if(!y[de]){var me=typeof z=="function"&&z;if(!re&&me)return me(de,!0);if(oe)return oe(de,!0);var ve=new Error("Cannot find module '"+de+"'");throw ve.code="MODULE_NOT_FOUND",ve}var _e=A[de]={exports:{}};y[de][0].call(_e.exports,function(Se){return j(y[de][1][Se]||Se)},_e,_e.exports,Q,y,A,N)}return A[de].exports}for(var oe=typeof z=="function"&&z,q=0;q<N.length;q++)j(N[q]);return j}({1:[function(Q,y,A){(function(N){(function(j){typeof A=="object"&&y!==void 0?y.exports=j():(typeof window>"u"?N===void 0?typeof self>"u"?this:self:N:window).JSZip=j()})(function(){return function j(oe,q,de){function re(_e,Se){if(!q[_e]){if(!oe[_e]){var Oe=typeof Q=="function"&&Q;if(!Se&&Oe)return Oe(_e,!0);if(me)return me(_e,!0);var Me=new Error("Cannot find module '"+_e+"'");throw Me.code="MODULE_NOT_FOUND",Me}var we=q[_e]={exports:{}};oe[_e][0].call(we.exports,function(Ie){return re(oe[_e][1][Ie]||Ie)},we,we.exports,j,oe,q,de)}return q[_e].exports}for(var me=typeof Q=="function"&&Q,ve=0;ve<de.length;ve++)re(de[ve]);return re}({1:[function(j,oe,q){var de=j("./utils"),re=j("./support");q.encode=function(me){for(var ve=[],_e=0,Se=me.length,Oe=Se,Me=de.getTypeOf(me)!=="string",we,Ie,Ae,H,V,D,ne;_e<me.length;)Oe=Se-_e,Ae=Me?(we=me[_e++],Ie=_e<Se?me[_e++]:0,_e<Se?me[_e++]:0):(we=me.charCodeAt(_e++),Ie=_e<Se?me.charCodeAt(_e++):0,_e<Se?me.charCodeAt(_e++):0),H=we>>2,V=(3&we)<<4|Ie>>4,D=1<Oe?(15&Ie)<<2|Ae>>6:64,ne=2<Oe?63&Ae:64,ve.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(H)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(V)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(D)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(ne));return ve.join("")},q.decode=function(me){var ve=0,_e=0,Se,Oe,Me,we,Ie,Ae;if(me.substr(0,5)==="data:")throw new Error("Invalid base64 input, it looks like a data url.");var H=3*(me=me.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4,V;if(me.charAt(me.length-1)==="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(64)&&H--,me.charAt(me.length-2)==="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(64)&&H--,H%1!=0)throw new Error("Invalid base64 input, bad content length.");for(V=re.uint8array?new Uint8Array(0|H):Array(0|H);ve<me.length;)Se="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(me.charAt(ve++))<<2|(we="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(me.charAt(ve++)))>>4,Oe=(15&we)<<4|(Ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(me.charAt(ve++)))>>2,Me=(3&Ie)<<6|(Ae="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(me.charAt(ve++))),V[_e++]=Se,Ie!==64&&(V[_e++]=Oe),Ae!==64&&(V[_e++]=Me);return V}},{"./support":30,"./utils":32}],2:[function(j,oe){function q(_e,Se,Oe,Me,we){this.compressedSize=_e,this.uncompressedSize=Se,this.crc32=Oe,this.compression=Me,this.compressedContent=we}var de=j("./external"),re=j("./stream/DataWorker"),me=j("./stream/Crc32Probe"),ve=j("./stream/DataLengthProbe");q.prototype={getContentWorker:function(){var _e=new re(de.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new ve("data_length")),Se=this;return _e.on("end",function(){if(this.streamInfo.data_length!==Se.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),_e},getCompressedWorker:function(){return new re(de.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},q.createWorkerFrom=function(_e,Se,Oe){return _e.pipe(new me).pipe(new ve("uncompressedSize")).pipe(Se.compressWorker(Oe)).pipe(new ve("compressedSize")).withStreamInfo("compression",Se)},oe.exports=q},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(j,oe,q){var de=j("./stream/GenericWorker");q.STORE={magic:"\0\0",compressWorker:function(){return new de("STORE compression")},uncompressWorker:function(){return new de("STORE decompression")}},q.DEFLATE=j("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(j,oe){var q=j("./utils"),de=function(){for(var re=[],me=0,ve;256>me;me++){ve=me;for(var _e=0;8>_e;_e++)ve=1&ve?3988292384^ve>>>1:ve>>>1;re[me]=ve}return re}();oe.exports=function(re,me){return re!==void 0&&re.length?q.getTypeOf(re)==="string"?function(ve,_e,Se){ve^=-1;for(var Oe=0;Oe<0+Se;Oe++)ve=ve>>>8^de[255&(ve^_e.charCodeAt(Oe))];return-1^ve}(0|me,re,re.length):function(ve,_e,Se){ve^=-1;for(var Oe=0;Oe<0+Se;Oe++)ve=ve>>>8^de[255&(ve^_e[Oe])];return-1^ve}(0|me,re,re.length):0}},{"./utils":32}],5:[function(j,oe,q){q.base64=!1,q.binary=!1,q.dir=!1,q.createFolders=!0,q.date=null,q.compression=null,q.compressionOptions=null,q.comment=null,q.unixPermissions=null,q.dosPermissions=null},{}],6:[function(j,oe){var q;q=typeof Promise>"u"?j("lie"):Promise,oe.exports={Promise:q}},{lie:37}],7:[function(j,oe,q){function de(Oe,Me){_e.call(this,"FlateWorker/"+Oe),this._pako=null,this._pakoAction=Oe,this._pakoOptions=Me,this.meta={}}var re=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",me=j("pako"),ve=j("./utils"),_e=j("./stream/GenericWorker"),Se=re?"uint8array":"array";q.magic="\b\0",ve.inherits(de,_e),de.prototype.processChunk=function(Oe){this.meta=Oe.meta,this._pako===null&&this._createPako(),this._pako.push(ve.transformTo(Se,Oe.data),!1)},de.prototype.flush=function(){_e.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},de.prototype.cleanUp=function(){_e.prototype.cleanUp.call(this),this._pako=null},de.prototype._createPako=function(){this._pako=new me[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var Oe=this;this._pako.onData=function(Me){Oe.push({data:Me,meta:Oe.meta})}},q.compressWorker=function(Oe){return new de("Deflate",Oe)},q.uncompressWorker=function(){return new de("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(j,oe){function q(Me,we){var Ie="",Ae;for(Ae=0;Ae<we;Ae++)Ie+=o(255&Me),Me>>>=8;return Ie}function de(Me,we,Ie,Ae,H,V){var D=Me.file,ne=Me.compression,ye=V!==_e.utf8encode,ae=me.transformTo("string",V(D.name)),U=me.transformTo("string",_e.utf8encode(D.name)),le=D.comment,ie=me.transformTo("string",V(le)),k=me.transformTo("string",_e.utf8encode(le)),O=U.length!==D.name.length,C=k.length!==le.length,G="",Z="",F="",te=D.dir,ge=D.date,xe={crc32:0,compressedSize:0,uncompressedSize:0},fe,ze;we&&!Ie||(xe.crc32=Me.crc32,xe.compressedSize=Me.compressedSize,xe.uncompressedSize=Me.uncompressedSize);var He=0;we&&(He|=8),!ye&&(O||C)&&(He|=2048);var Xe=0,Ve=0,be;te&&(Xe|=16),H==="UNIX"?(Ve=798,Xe|=((be=D.unixPermissions)||(be=te?16893:33204),(65535&be)<<16)):(Ve=20,Xe|=63&(D.dosPermissions||0)),fe=ge.getUTCHours(),fe<<=6,fe|=ge.getUTCMinutes(),fe<<=5,fe|=ge.getUTCSeconds()/2,ze=ge.getUTCFullYear()-1980,ze<<=4,ze|=ge.getUTCMonth()+1,ze<<=5,ze|=ge.getUTCDate(),O&&(G+="up"+q((Z=q(1,1)+q(Se(ae),4)+U).length,2)+Z),C&&(G+="uc"+q((F=q(1,1)+q(Se(ie),4)+k).length,2)+F);var ke="";return ke+=`
\0`,ke+=q(He,2),ke+=ne.magic,ke+=q(fe,2),ke+=q(ze,2),ke+=q(xe.crc32,4),ke+=q(xe.compressedSize,4),ke+=q(xe.uncompressedSize,4),ke+=q(ae.length,2),ke+=q(G.length,2),{fileRecord:Oe.LOCAL_FILE_HEADER+ke+ae+G,dirRecord:Oe.CENTRAL_FILE_HEADER+q(Ve,2)+ke+q(ie.length,2)+"\0\0\0\0"+q(Xe,4)+q(Ae,4)+ae+G+ie}}function re(Me,we,Ie,Ae){ve.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=we,this.zipPlatform=Ie,this.encodeFileName=Ae,this.streamFiles=Me,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}var me=j("../utils"),ve=j("../stream/GenericWorker"),_e=j("../utf8"),Se=j("../crc32"),Oe=j("../signature");me.inherits(re,ve),re.prototype.push=function(Me){var we=Me.meta.percent||0,Ie=this.entriesCount,Ae=this._sources.length;this.accumulate?this.contentBuffer.push(Me):(this.bytesWritten+=Me.data.length,ve.prototype.push.call(this,{data:Me.data,meta:{currentFile:this.currentFile,percent:Ie?(we+100*(Ie-Ae-1))/Ie:100}}))},re.prototype.openedSource=function(Me){this.currentSourceOffset=this.bytesWritten,this.currentFile=Me.file.name;var we=this.streamFiles&&!Me.file.dir;if(we){var Ie=de(Me,we,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:Ie.fileRecord,meta:{percent:0}})}else this.accumulate=!0},re.prototype.closedSource=function(Me){this.accumulate=!1;var we=this.streamFiles&&!Me.file.dir,Ie=de(Me,we,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName),Ae;if(this.dirRecords.push(Ie.dirRecord),we)this.push({data:(Ae=Me,Oe.DATA_DESCRIPTOR+q(Ae.crc32,4)+q(Ae.compressedSize,4)+q(Ae.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:Ie.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},re.prototype.flush=function(){for(var Me=this.bytesWritten,we=0;we<this.dirRecords.length;we++)this.push({data:this.dirRecords[we],meta:{percent:100}});var Ie=this.bytesWritten-Me,Ae=(H=this.dirRecords.length,V=Ie,D=Me,ne=this.zipComment,ye=this.encodeFileName,ae=me.transformTo("string",ye(ne)),Oe.CENTRAL_DIRECTORY_END+"\0\0\0\0"+q(H,2)+q(H,2)+q(V,4)+q(D,4)+q(ae.length,2)+ae),H,V,D,ne,ye,ae;this.push({data:Ae,meta:{percent:100}})},re.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},re.prototype.registerPrevious=function(Me){this._sources.push(Me);var we=this;return Me.on("data",function(Ie){we.processChunk(Ie)}),Me.on("end",function(){we.closedSource(we.previous.streamInfo),we._sources.length?we.prepareNextSource():we.end()}),Me.on("error",function(Ie){we.error(Ie)}),this},re.prototype.resume=function(){return!!ve.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},re.prototype.error=function(Me){var we=this._sources;if(!ve.prototype.error.call(this,Me))return!1;for(var Ie=0;Ie<we.length;Ie++)try{we[Ie].error(Me)}catch{}return!0},re.prototype.lock=function(){ve.prototype.lock.call(this);for(var Me=this._sources,we=0;we<Me.length;we++)Me[we].lock()},oe.exports=re},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(j,oe,q){var de=j("../compressions"),re=j("./ZipFileWorker");q.generateWorker=function(me,ve,_e){var Se=new re(ve.streamFiles,_e,ve.platform,ve.encodeFileName),Oe=0;try{me.forEach(function(Me,we){Oe++;var Ie=function(D,ne){var ye=D||ne,ae=de[ye];if(!ae)throw new Error(ye+" is not a valid compression method !");return ae}(we.options.compression,ve.compression),Ae=we.options.compressionOptions||ve.compressionOptions||{},H=we.dir,V=we.date;we._compressWorker(Ie,Ae).withStreamInfo("file",{name:Me,dir:H,date:V,comment:we.comment||"",unixPermissions:we.unixPermissions,dosPermissions:we.dosPermissions}).pipe(Se)}),Se.entriesCount=Oe}catch(Me){Se.error(Me)}return Se}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(j,oe){function q(){if(!(this instanceof q))return new q;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var de=new q;for(var re in this)typeof this[re]!="function"&&(de[re]=this[re]);return de}}(q.prototype=j("./object")).loadAsync=j("./load"),q.support=j("./support"),q.defaults=j("./defaults"),q.version="3.5.0",q.loadAsync=function(de,re){return new q().loadAsync(de,re)},q.external=j("./external"),oe.exports=q},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(j,oe){function q(Oe){return new re.Promise(function(Me,we){var Ie=Oe.decompressed.getContentWorker().pipe(new _e);Ie.on("error",function(Ae){we(Ae)}).on("end",function(){Ie.streamInfo.crc32===Oe.decompressed.crc32?Me():we(new Error("Corrupted zip : CRC32 mismatch"))}).resume()})}var de=j("./utils"),re=j("./external"),me=j("./utf8"),ve=j("./zipEntries"),_e=j("./stream/Crc32Probe"),Se=j("./nodejsUtils");oe.exports=function(Oe,Me){var we=this;return Me=de.extend(Me||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:me.utf8decode}),Se.isNode&&Se.isStream(Oe)?re.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):de.prepareContent("the loaded zip file",Oe,!0,Me.optimizedBinaryString,Me.base64).then(function(Ie){var Ae=new ve(Me);return Ae.load(Ie),Ae}).then(function(Ie){var Ae=[re.Promise.resolve(Ie)],H=Ie.files;if(Me.checkCRC32)for(var V=0;V<H.length;V++)Ae.push(q(H[V]));return re.Promise.all(Ae)}).then(function(Ie){for(var Ae=Ie.shift(),H=Ae.files,V=0,D;V<H.length;V++)D=H[V],we.file(D.fileNameStr,D.decompressed,{binary:!0,optimizedBinaryString:!0,date:D.date,dir:D.dir,comment:D.fileCommentStr.length?D.fileCommentStr:null,unixPermissions:D.unixPermissions,dosPermissions:D.dosPermissions,createFolders:Me.createFolders});return Ae.zipComment.length&&(we.comment=Ae.zipComment),we})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(j,oe){function q(me,ve){re.call(this,"Nodejs stream input adapter for "+me),this._upstreamEnded=!1,this._bindStream(ve)}var de=j("../utils"),re=j("../stream/GenericWorker");de.inherits(q,re),q.prototype._bindStream=function(me){var ve=this;(this._stream=me).pause(),me.on("data",function(_e){ve.push({data:_e,meta:{percent:0}})}).on("error",function(_e){ve.isPaused?this.generatedError=_e:ve.error(_e)}).on("end",function(){ve.isPaused?ve._upstreamEnded=!0:ve.end()})},q.prototype.pause=function(){return!!re.prototype.pause.call(this)&&(this._stream.pause(),!0)},q.prototype.resume=function(){return!!re.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},oe.exports=q},{"../stream/GenericWorker":28,"../utils":32}],13:[function(j,oe){function q(re,me,ve){de.call(this,me),this._helper=re;var _e=this;re.on("data",function(Se,Oe){_e.push(Se)||_e._helper.pause(),ve&&ve(Oe)}).on("error",function(Se){_e.emit("error",Se)}).on("end",function(){_e.push(null)})}var de=j("readable-stream").Readable;j("../utils").inherits(q,de),q.prototype._read=function(){this._helper.resume()},oe.exports=q},{"../utils":32,"readable-stream":16}],14:[function(j,oe){oe.exports={isNode:typeof f<"u",newBufferFrom:function(q,de){if(f.from&&f.from!==Uint8Array.from)return f.from(q,de);if(typeof q=="number")throw new Error('The "data" argument must not be a number');return new f(q,de)},allocBuffer:function(q){if(f.alloc)return f.alloc(q);var de=new f(q);return de.fill(0),de},isBuffer:function(q){return f.isBuffer(q)},isStream:function(q){return q&&typeof q.on=="function"&&typeof q.pause=="function"&&typeof q.resume=="function"}}},{}],15:[function(j,oe){function q(D,ne,ye){var ae=ve.getTypeOf(ne),U=ve.extend(ye||{},Oe),le;U.date=U.date||new Date,U.compression!==null&&(U.compression=U.compression.toUpperCase()),typeof U.unixPermissions=="string"&&(U.unixPermissions=parseInt(U.unixPermissions,8)),U.unixPermissions&&16384&U.unixPermissions&&(U.dir=!0),U.dosPermissions&&16&U.dosPermissions&&(U.dir=!0),U.dir&&(D=de(D)),U.createFolders&&(le=function(C){C.slice(-1)==="/"&&(C=C.substring(0,C.length-1));var G=C.lastIndexOf("/");return 0<G?C.substring(0,G):""}(D))&&V.call(this,le,!0);var ie=ae==="string"&&U.binary===!1&&U.base64===!1,k;ye&&ye.binary!==void 0||(U.binary=!ie),(ne instanceof Me&&ne.uncompressedSize===0||U.dir||!ne||ne.length===0)&&(U.base64=!1,U.binary=!0,ne="",U.compression="STORE",ae="string"),k=ne instanceof Me||ne instanceof _e?ne:Ae.isNode&&Ae.isStream(ne)?new H(D,ne):ve.prepareContent(D,ne,U.binary,U.optimizedBinaryString,U.base64);var O=new we(D,k,U);this.files[D]=O}function de(D){return D.slice(-1)!=="/"&&(D+="/"),D}function re(D){return Object.prototype.toString.call(D)==="[object RegExp]"}var me=j("./utf8"),ve=j("./utils"),_e=j("./stream/GenericWorker"),Se=j("./stream/StreamHelper"),Oe=j("./defaults"),Me=j("./compressedObject"),we=j("./zipObject"),Ie=j("./generate"),Ae=j("./nodejsUtils"),H=j("./nodejs/NodejsStreamInputAdapter"),V=function(D,ne){return ne=ne===void 0?Oe.createFolders:ne,D=de(D),this.files[D]||q.call(this,D,null,{dir:!0,createFolders:ne}),this.files[D]};oe.exports={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(D){var ne,ye,ae;for(ne in this.files)this.files.hasOwnProperty(ne)&&(ae=this.files[ne],(ye=ne.slice(this.root.length,ne.length))&&ne.slice(0,this.root.length)===this.root&&D(ye,ae))},filter:function(D){var ne=[];return this.forEach(function(ye,ae){D(ye,ae)&&ne.push(ae)}),ne},file:function(D,ne,ye){if(arguments.length!==1)return D=this.root+D,q.call(this,D,ne,ye),this;if(re(D)){var ae=D;return this.filter(function(le,ie){return!ie.dir&&ae.test(le)})}var U=this.files[this.root+D];return U&&!U.dir?U:null},folder:function(D){if(!D)return this;if(re(D))return this.filter(function(U,le){return le.dir&&D.test(U)});var ne=this.root+D,ye=V.call(this,ne),ae=this.clone();return ae.root=ye.name,ae},remove:function(D){D=this.root+D;var ne=this.files[D];if(ne||(D.slice(-1)!=="/"&&(D+="/"),ne=this.files[D]),ne&&!ne.dir)delete this.files[D];else for(var ye=this.filter(function(U,le){return le.name.slice(0,D.length)===D}),ae=0;ae<ye.length;ae++)delete this.files[ye[ae].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(D){var ne={},ye;try{if((ne=ve.extend(D||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:me.utf8encode})).type=ne.type.toLowerCase(),ne.compression=ne.compression.toUpperCase(),ne.type==="binarystring"&&(ne.type="string"),!ne.type)throw new Error("No output type specified.");ve.checkSupport(ne.type),ne.platform!=="darwin"&&ne.platform!=="freebsd"&&ne.platform!=="linux"&&ne.platform!=="sunos"||(ne.platform="UNIX"),ne.platform==="win32"&&(ne.platform="DOS");var ae=ne.comment||this.comment||"";ye=Ie.generateWorker(this,ne,ae)}catch(U){(ye=new _e("error")).error(U)}return new Se(ye,ne.type||"string",ne.mimeType)},generateAsync:function(D,ne){return this.generateInternalStream(D).accumulate(ne)},generateNodeStream:function(D,ne){return(D=D||{}).type||(D.type="nodebuffer"),this.generateInternalStream(D).toNodejsStream(ne)}}},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(j,oe){oe.exports=j("stream")},{stream:void 0}],17:[function(j,oe){function q(re){de.call(this,re);for(var me=0;me<this.data.length;me++)re[me]=255&re[me]}var de=j("./DataReader");j("../utils").inherits(q,de),q.prototype.byteAt=function(re){return this.data[this.zero+re]},q.prototype.lastIndexOfSignature=function(re){for(var me=re.charCodeAt(0),ve=re.charCodeAt(1),_e=re.charCodeAt(2),Se=re.charCodeAt(3),Oe=this.length-4;0<=Oe;--Oe)if(this.data[Oe]===me&&this.data[Oe+1]===ve&&this.data[Oe+2]===_e&&this.data[Oe+3]===Se)return Oe-this.zero;return-1},q.prototype.readAndCheckSignature=function(re){var me=re.charCodeAt(0),ve=re.charCodeAt(1),_e=re.charCodeAt(2),Se=re.charCodeAt(3),Oe=this.readData(4);return me===Oe[0]&&ve===Oe[1]&&_e===Oe[2]&&Se===Oe[3]},q.prototype.readData=function(re){if(this.checkOffset(re),re===0)return[];var me=this.data.slice(this.zero+this.index,this.zero+this.index+re);return this.index+=re,me},oe.exports=q},{"../utils":32,"./DataReader":18}],18:[function(j,oe){function q(re){this.data=re,this.length=re.length,this.index=0,this.zero=0}var de=j("../utils");q.prototype={checkOffset:function(re){this.checkIndex(this.index+re)},checkIndex:function(re){if(this.length<this.zero+re||0>re)throw new Error("End of data reached (data length = "+this.length+", asked index = "+re+"). Corrupted zip ?")},setIndex:function(re){this.checkIndex(re),this.index=re},skip:function(re){this.setIndex(this.index+re)},byteAt:function(){},readInt:function(re){var me=0,ve;for(this.checkOffset(re),ve=this.index+re-1;ve>=this.index;ve--)me=(me<<8)+this.byteAt(ve);return this.index+=re,me},readString:function(re){return de.transformTo("string",this.readData(re))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var re=this.readInt(4);return new Date(Date.UTC(1980+(127&re>>25),(15&re>>21)-1,31&re>>16,31&re>>11,63&re>>5,(31&re)<<1))}},oe.exports=q},{"../utils":32}],19:[function(j,oe){function q(re){de.call(this,re)}var de=j("./Uint8ArrayReader");j("../utils").inherits(q,de),q.prototype.readData=function(re){this.checkOffset(re);var me=this.data.slice(this.zero+this.index,this.zero+this.index+re);return this.index+=re,me},oe.exports=q},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(j,oe){function q(re){de.call(this,re)}var de=j("./DataReader");j("../utils").inherits(q,de),q.prototype.byteAt=function(re){return this.data.charCodeAt(this.zero+re)},q.prototype.lastIndexOfSignature=function(re){return this.data.lastIndexOf(re)-this.zero},q.prototype.readAndCheckSignature=function(re){return re===this.readData(4)},q.prototype.readData=function(re){this.checkOffset(re);var me=this.data.slice(this.zero+this.index,this.zero+this.index+re);return this.index+=re,me},oe.exports=q},{"../utils":32,"./DataReader":18}],21:[function(j,oe){function q(re){de.call(this,re)}var de=j("./ArrayReader");j("../utils").inherits(q,de),q.prototype.readData=function(re){if(this.checkOffset(re),re===0)return new Uint8Array(0);var me=this.data.subarray(this.zero+this.index,this.zero+this.index+re);return this.index+=re,me},oe.exports=q},{"../utils":32,"./ArrayReader":17}],22:[function(j,oe){var q=j("../utils"),de=j("../support"),re=j("./ArrayReader"),me=j("./StringReader"),ve=j("./NodeBufferReader"),_e=j("./Uint8ArrayReader");oe.exports=function(Se){var Oe=q.getTypeOf(Se);return q.checkSupport(Oe),Oe!=="string"||de.uint8array?Oe==="nodebuffer"?new ve(Se):de.uint8array?new _e(q.transformTo("uint8array",Se)):new re(q.transformTo("array",Se)):new me(Se)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(j,oe,q){q.LOCAL_FILE_HEADER="PK",q.CENTRAL_FILE_HEADER="PK",q.CENTRAL_DIRECTORY_END="PK",q.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",q.ZIP64_CENTRAL_DIRECTORY_END="PK",q.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(j,oe){function q(me){de.call(this,"ConvertWorker to "+me),this.destType=me}var de=j("./GenericWorker"),re=j("../utils");re.inherits(q,de),q.prototype.processChunk=function(me){this.push({data:re.transformTo(this.destType,me.data),meta:me.meta})},oe.exports=q},{"../utils":32,"./GenericWorker":28}],25:[function(j,oe){function q(){de.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}var de=j("./GenericWorker"),re=j("../crc32");j("../utils").inherits(q,de),q.prototype.processChunk=function(me){this.streamInfo.crc32=re(me.data,this.streamInfo.crc32||0),this.push(me)},oe.exports=q},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(j,oe){function q(me){re.call(this,"DataLengthProbe for "+me),this.propName=me,this.withStreamInfo(me,0)}var de=j("../utils"),re=j("./GenericWorker");de.inherits(q,re),q.prototype.processChunk=function(me){if(me){var ve=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=ve+me.data.length}re.prototype.processChunk.call(this,me)},oe.exports=q},{"../utils":32,"./GenericWorker":28}],27:[function(j,oe){function q(me){re.call(this,"DataWorker");var ve=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,me.then(function(_e){ve.dataIsReady=!0,ve.data=_e,ve.max=_e&&_e.length||0,ve.type=de.getTypeOf(_e),ve.isPaused||ve._tickAndRepeat()},function(_e){ve.error(_e)})}var de=j("../utils"),re=j("./GenericWorker");de.inherits(q,re),q.prototype.cleanUp=function(){re.prototype.cleanUp.call(this),this.data=null},q.prototype.resume=function(){return!!re.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,de.delay(this._tickAndRepeat,[],this)),!0)},q.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(de.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},q.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var me=null,ve=a(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":me=this.data.substring(this.index,ve);break;case"uint8array":me=this.data.subarray(this.index,ve);break;case"array":case"nodebuffer":me=this.data.slice(this.index,ve)}return this.index=ve,this.push({data:me,meta:{percent:this.max?100*(this.index/this.max):0}})},oe.exports=q},{"../utils":32,"./GenericWorker":28}],28:[function(j,oe){function q(de){this.name=de||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}q.prototype={push:function(de){this.emit("data",de)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(de){this.emit("error",de)}return!0},error:function(de){return!this.isFinished&&(this.isPaused?this.generatedError=de:(this.isFinished=!0,this.emit("error",de),this.previous&&this.previous.error(de),this.cleanUp()),!0)},on:function(de,re){return this._listeners[de].push(re),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(de,re){if(this._listeners[de])for(var me=0;me<this._listeners[de].length;me++)this._listeners[de][me].call(this,re)},pipe:function(de){return de.registerPrevious(this)},registerPrevious:function(de){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=de.streamInfo,this.mergeStreamInfo(),this.previous=de;var re=this;return de.on("data",function(me){re.processChunk(me)}),de.on("end",function(){re.end()}),de.on("error",function(me){re.error(me)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var de=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),de=!0),this.previous&&this.previous.resume(),!de},flush:function(){},processChunk:function(de){this.push(de)},withStreamInfo:function(de,re){return this.extraStreamInfo[de]=re,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var de in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(de)&&(this.streamInfo[de]=this.extraStreamInfo[de])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var de="Worker "+this.name;return this.previous?this.previous+" -> "+de:de}},oe.exports=q},{}],29:[function(j,oe){function q(Me,we,Ie){var Ae=we;we==="blob"||we==="arraybuffer"?Ae="uint8array":we==="base64"&&(Ae="string");try{this._internalType=Ae,this._outputType=we,this._mimeType=Ie,de.checkSupport(Ae),this._worker=Me.pipe(new re(Ae)),Me.lock()}catch(H){this._worker=new me("error"),this._worker.error(H)}}var de=j("../utils"),re=j("./ConvertWorker"),me=j("./GenericWorker"),ve=j("../base64"),_e=j("../support"),Se=j("../external"),Oe=null;if(_e.nodestream)try{Oe=j("../nodejs/NodejsStreamOutputAdapter")}catch{}q.prototype={accumulate:function(Me){return we=this,Ie=Me,new Se.Promise(function(Ae,H){var V=[],D=we._internalType,ne=we._outputType,ye=we._mimeType;we.on("data",function(ae,U){V.push(ae),Ie&&Ie(U)}).on("error",function(ae){V=[],H(ae)}).on("end",function(){try{var ae=function(U,le,ie){return U==="blob"?de.newBlob(de.transformTo("arraybuffer",le),ie):U==="base64"?ve.encode(le):de.transformTo(U,le)}(ne,function(U,le){var ie=0,k=null,O=0,C;for(C=0;C<le.length;C++)O+=le[C].length;switch(U){case"string":return le.join("");case"array":return Array.prototype.concat.apply([],le);case"uint8array":for(k=new Uint8Array(O),C=0;C<le.length;C++)k.set(le[C],ie),ie+=le[C].length;return k;case"nodebuffer":return f.concat(le);default:throw new Error("concat : unsupported type '"+U+"'")}}(D,V),ye);Ae(ae)}catch(U){H(U)}V=[]}).resume()});var we,Ie},on:function(Me,we){var Ie=this;return Me==="data"?this._worker.on(Me,function(Ae){we.call(Ie,Ae.data,Ae.meta)}):this._worker.on(Me,function(){de.delay(we,arguments,Ie)}),this},resume:function(){return de.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(Me){if(de.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new Oe(this,{objectMode:this._outputType!=="nodebuffer"},Me)}},oe.exports=q},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(j,oe,q){if(q.base64=!0,q.array=!0,q.string=!0,q.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",q.nodebuffer=typeof f<"u",q.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")q.blob=!1;else{var de=new ArrayBuffer(0);try{q.blob=new Blob([de],{type:"application/zip"}).size===0}catch{try{var re=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);re.append(de),q.blob=re.getBlob("application/zip").size===0}catch{q.blob=!1}}}try{q.nodestream=!!j("readable-stream").Readable}catch{q.nodestream=!1}},{"readable-stream":16}],31:[function(j,oe,q){function de(){Se.call(this,"utf-8 decode"),this.leftOver=null}function re(){Se.call(this,"utf-8 encode")}for(var me=j("./utils"),ve=j("./support"),_e=j("./nodejsUtils"),Se=j("./stream/GenericWorker"),Oe=Array(256),Me=0;256>Me;Me++)Oe[Me]=252<=Me?6:248<=Me?5:240<=Me?4:224<=Me?3:192<=Me?2:1;Oe[254]=Oe[254]=1,q.utf8encode=function(we){return ve.nodebuffer?_e.newBufferFrom(we,"utf-8"):function(Ie){var Ae=Ie.length,H=0,V,D,ne,ye,ae;for(ye=0;ye<Ae;ye++)(64512&(D=Ie.charCodeAt(ye)))==55296&&ye+1<Ae&&(64512&(ne=Ie.charCodeAt(ye+1)))==56320&&(D=65536+(D-55296<<10)+(ne-56320),ye++),H+=128>D?1:2048>D?2:65536>D?3:4;for(V=ve.uint8array?new Uint8Array(H):Array(H),ye=ae=0;ae<H;ye++)(64512&(D=Ie.charCodeAt(ye)))==55296&&ye+1<Ae&&(64512&(ne=Ie.charCodeAt(ye+1)))==56320&&(D=65536+(D-55296<<10)+(ne-56320),ye++),128>D?V[ae++]=D:(2048>D?V[ae++]=192|D>>>6:(65536>D?V[ae++]=224|D>>>12:(V[ae++]=240|D>>>18,V[ae++]=128|63&D>>>12),V[ae++]=128|63&D>>>6),V[ae++]=128|63&D);return V}(we)},q.utf8decode=function(we){return ve.nodebuffer?me.transformTo("nodebuffer",we).toString("utf-8"):function(Ie){var Ae=Ie.length,H=Array(2*Ae),V,D,ne,ye;for(V=D=0;V<Ae;)if(128>(ne=Ie[V++]))H[D++]=ne;else if(4<(ye=Oe[ne]))H[D++]=65533,V+=ye-1;else{for(ne&=ye===2?31:ye===3?15:7;1<ye&&V<Ae;)ne=ne<<6|63&Ie[V++],ye--;1<ye?H[D++]=65533:65536>ne?H[D++]=ne:(ne-=65536,H[D++]=55296|1023&ne>>10,H[D++]=56320|1023&ne)}return H.length!==D&&(H.subarray?H=H.subarray(0,D):H.length=D),me.applyFromCharCode(H)}(we=me.transformTo(ve.uint8array?"uint8array":"array",we))},me.inherits(de,Se),de.prototype.processChunk=function(we){var Ie=me.transformTo(ve.uint8array?"uint8array":"array",we.data);if(this.leftOver&&this.leftOver.length){if(ve.uint8array){var Ae=Ie;(Ie=new Uint8Array(Ae.length+this.leftOver.length)).set(this.leftOver,0),Ie.set(Ae,this.leftOver.length)}else Ie=this.leftOver.concat(Ie);this.leftOver=null}var H=function(D,ne){var ye;for((ne=ne||D.length)>D.length&&(ne=D.length),ye=ne-1;0<=ye&&(192&D[ye])==128;)ye--;return 0>ye||ye===0?ne:ye+Oe[D[ye]]>ne?ye:ne}(Ie),V=Ie;H!==Ie.length&&(ve.uint8array?(V=Ie.subarray(0,H),this.leftOver=Ie.subarray(H,Ie.length)):(V=Ie.slice(0,H),this.leftOver=Ie.slice(H,Ie.length))),this.push({data:q.utf8decode(V),meta:we.meta})},de.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:q.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},q.Utf8DecodeWorker=de,me.inherits(re,Se),re.prototype.processChunk=function(we){this.push({data:q.utf8encode(we.data),meta:we.meta})},q.Utf8EncodeWorker=re},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(j,oe,q){function de(H){return H}function re(H,V){for(var D=0;D<H.length;++D)V[D]=255&H.charCodeAt(D);return V}function me(H){var V=65536,D=q.getTypeOf(H),ne=!0;if(D==="uint8array"?ne=Ie.applyCanBeUsed.uint8array:D==="nodebuffer"&&(ne=Ie.applyCanBeUsed.nodebuffer),ne)for(;1<V;)try{return Ie.stringifyByChunk(H,D,V)}catch{V=i(V/2)}return Ie.stringifyByChar(H)}function ve(H,V){for(var D=0;D<H.length;D++)V[D]=H[D];return V}var _e=j("./support"),Se=j("./base64"),Oe=j("./nodejsUtils"),Me=j("set-immediate-shim"),we=j("./external");q.newBlob=function(H,V){q.checkSupport("blob");try{return new Blob([H],{type:V})}catch{try{var D=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return D.append(H),D.getBlob(V)}catch{throw new Error("Bug : can't construct the Blob.")}}};var Ie={stringifyByChunk:function(H,V,D){var ne=[],ye=0,ae=H.length;if(ae<=D)return o.apply(null,H);for(;ye<ae;)V==="array"||V==="nodebuffer"?ne.push(o.apply(null,H.slice(ye,a(ye+D,ae)))):ne.push(o.apply(null,H.subarray(ye,a(ye+D,ae)))),ye+=D;return ne.join("")},stringifyByChar:function(H){for(var V="",D=0;D<H.length;D++)V+=o(H[D]);return V},applyCanBeUsed:{uint8array:function(){try{return _e.uint8array&&o.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return _e.nodebuffer&&o.apply(null,Oe.allocBuffer(1)).length===1}catch{return!1}}()}};q.applyFromCharCode=me;var Ae={};Ae.string={string:de,array:function(H){return re(H,Array(H.length))},arraybuffer:function(H){return Ae.string.uint8array(H).buffer},uint8array:function(H){return re(H,new Uint8Array(H.length))},nodebuffer:function(H){return re(H,Oe.allocBuffer(H.length))}},Ae.array={string:me,array:de,arraybuffer:function(H){return new Uint8Array(H).buffer},uint8array:function(H){return new Uint8Array(H)},nodebuffer:function(H){return Oe.newBufferFrom(H)}},Ae.arraybuffer={string:function(H){return me(new Uint8Array(H))},array:function(H){return ve(new Uint8Array(H),Array(H.byteLength))},arraybuffer:de,uint8array:function(H){return new Uint8Array(H)},nodebuffer:function(H){return Oe.newBufferFrom(new Uint8Array(H))}},Ae.uint8array={string:me,array:function(H){return ve(H,Array(H.length))},arraybuffer:function(H){return H.buffer},uint8array:de,nodebuffer:function(H){return Oe.newBufferFrom(H)}},Ae.nodebuffer={string:me,array:function(H){return ve(H,Array(H.length))},arraybuffer:function(H){return Ae.nodebuffer.uint8array(H).buffer},uint8array:function(H){return ve(H,new Uint8Array(H.length))},nodebuffer:de},q.transformTo=function(H,V){if(V=V||"",!H)return V;q.checkSupport(H);var D=q.getTypeOf(V);return Ae[D][H](V)},q.getTypeOf=function(H){return typeof H=="string"?"string":Object.prototype.toString.call(H)==="[object Array]"?"array":_e.nodebuffer&&Oe.isBuffer(H)?"nodebuffer":_e.uint8array&&H instanceof Uint8Array?"uint8array":_e.arraybuffer&&H instanceof ArrayBuffer?"arraybuffer":void 0},q.checkSupport=function(H){if(!_e[H.toLowerCase()])throw new Error(H+" is not supported by this platform")},q.MAX_VALUE_16BITS=65535,q.MAX_VALUE_32BITS=-1,q.pretty=function(H){var V="",D,ne;for(ne=0;ne<(H||"").length;ne++)V+="\\x"+(16>(D=H.charCodeAt(ne))?"0":"")+D.toString(16).toUpperCase();return V},q.delay=function(H,V,D){Me(function(){H.apply(D||null,V||[])})},q.inherits=function(H,V){function D(){}D.prototype=V.prototype,H.prototype=new D},q.extend=function(){var H={},V,D;for(V=0;V<arguments.length;V++)for(D in arguments[V])arguments[V].hasOwnProperty(D)&&H[D]===void 0&&(H[D]=arguments[V][D]);return H},q.prepareContent=function(H,V,D,ne,ye){return we.Promise.resolve(V).then(function(ae){return _e.blob&&(ae instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(ae))!==-1)&&typeof FileReader<"u"?new we.Promise(function(U,le){var ie=new FileReader;ie.onload=function(k){U(k.target.result)},ie.onerror=function(k){le(k.target.error)},ie.readAsArrayBuffer(ae)}):ae}).then(function(ae){var U=q.getTypeOf(ae),le;return U?(U==="arraybuffer"?ae=q.transformTo("uint8array",ae):U==="string"&&(ye?ae=Se.decode(ae):D&&ne!==!0&&(ae=re(le=ae,_e.uint8array?new Uint8Array(le.length):Array(le.length)))),ae):we.Promise.reject(new Error("Can't read the data of '"+H+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(j,oe){function q(Se){this.files=[],this.loadOptions=Se}var de=j("./reader/readerFor"),re=j("./utils"),me=j("./signature"),ve=j("./zipEntry"),_e=(j("./utf8"),j("./support"));q.prototype={checkSignature:function(Se){if(!this.reader.readAndCheckSignature(Se)){this.reader.index-=4;var Oe=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+re.pretty(Oe)+", expected "+re.pretty(Se)+")")}},isSignature:function(Se,Oe){var Me=this.reader.index;this.reader.setIndex(Se);var we=this.reader.readString(4)===Oe;return this.reader.setIndex(Me),we},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var Se=this.reader.readData(this.zipCommentLength),Oe=_e.uint8array?"uint8array":"array",Me=re.transformTo(Oe,Se);this.zipComment=this.loadOptions.decodeFileName(Me)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var Se=this.zip64EndOfCentralSize-44,Oe,Me,we;0<Se;)Oe=this.reader.readInt(2),Me=this.reader.readInt(4),we=this.reader.readData(Me),this.zip64ExtensibleData[Oe]={id:Oe,length:Me,value:we}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var Se,Oe;for(Se=0;Se<this.files.length;Se++)Oe=this.files[Se],this.reader.setIndex(Oe.localHeaderOffset),this.checkSignature(me.LOCAL_FILE_HEADER),Oe.readLocalPart(this.reader),Oe.handleUTF8(),Oe.processAttributes()},readCentralDir:function(){var Se;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(me.CENTRAL_FILE_HEADER);)(Se=new ve({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(Se);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var Se=this.reader.lastIndexOfSignature(me.CENTRAL_DIRECTORY_END);if(0>Se)throw this.isSignature(0,me.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(Se);var Oe=Se;if(this.checkSignature(me.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===re.MAX_VALUE_16BITS||this.diskWithCentralDirStart===re.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===re.MAX_VALUE_16BITS||this.centralDirRecords===re.MAX_VALUE_16BITS||this.centralDirSize===re.MAX_VALUE_32BITS||this.centralDirOffset===re.MAX_VALUE_32BITS){if(this.zip64=!0,0>(Se=this.reader.lastIndexOfSignature(me.ZIP64_CENTRAL_DIRECTORY_LOCATOR)))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(Se),this.checkSignature(me.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,me.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(me.ZIP64_CENTRAL_DIRECTORY_END),0>this.relativeOffsetEndOfZip64CentralDir))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(me.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var Me=this.centralDirOffset+this.centralDirSize;this.zip64&&(Me+=20,Me+=12+this.zip64EndOfCentralSize);var we=Oe-Me;if(0<we)this.isSignature(Oe,me.CENTRAL_FILE_HEADER)||(this.reader.zero=we);else if(0>we)throw new Error("Corrupted zip: missing "+n(we)+" bytes.")},prepareReader:function(Se){this.reader=de(Se)},load:function(Se){this.prepareReader(Se),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},oe.exports=q},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(j,oe){function q(Me,we){this.options=Me,this.loadOptions=we}var de=j("./reader/readerFor"),re=j("./utils"),me=j("./compressedObject"),ve=j("./crc32"),_e=j("./utf8"),Se=j("./compressions"),Oe=j("./support");q.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(Me){var we,Ie;if(Me.skip(22),this.fileNameLength=Me.readInt(2),Ie=Me.readInt(2),this.fileName=Me.readData(this.fileNameLength),Me.skip(Ie),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((we=function(Ae){for(var H in Se)if(Se.hasOwnProperty(H)&&Se[H].magic===Ae)return Se[H];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+re.pretty(this.compressionMethod)+" unknown (inner file : "+re.transformTo("string",this.fileName)+")");this.decompressed=new me(this.compressedSize,this.uncompressedSize,this.crc32,we,Me.readData(this.compressedSize))},readCentralPart:function(Me){this.versionMadeBy=Me.readInt(2),Me.skip(2),this.bitFlag=Me.readInt(2),this.compressionMethod=Me.readString(2),this.date=Me.readDate(),this.crc32=Me.readInt(4),this.compressedSize=Me.readInt(4),this.uncompressedSize=Me.readInt(4);var we=Me.readInt(2);if(this.extraFieldsLength=Me.readInt(2),this.fileCommentLength=Me.readInt(2),this.diskNumberStart=Me.readInt(2),this.internalFileAttributes=Me.readInt(2),this.externalFileAttributes=Me.readInt(4),this.localHeaderOffset=Me.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");Me.skip(we),this.readExtraFields(Me),this.parseZIP64ExtraField(Me),this.fileComment=Me.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var Me=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),Me==0&&(this.dosPermissions=63&this.externalFileAttributes),Me==3&&(this.unixPermissions=65535&this.externalFileAttributes>>16),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var Me=de(this.extraFields[1].value);this.uncompressedSize===re.MAX_VALUE_32BITS&&(this.uncompressedSize=Me.readInt(8)),this.compressedSize===re.MAX_VALUE_32BITS&&(this.compressedSize=Me.readInt(8)),this.localHeaderOffset===re.MAX_VALUE_32BITS&&(this.localHeaderOffset=Me.readInt(8)),this.diskNumberStart===re.MAX_VALUE_32BITS&&(this.diskNumberStart=Me.readInt(4))}},readExtraFields:function(Me){var we=Me.index+this.extraFieldsLength,Ie,Ae,H;for(this.extraFields||(this.extraFields={});Me.index+4<we;)Ie=Me.readInt(2),Ae=Me.readInt(2),H=Me.readData(Ae),this.extraFields[Ie]={id:Ie,length:Ae,value:H};Me.setIndex(we)},handleUTF8:function(){var Me=Oe.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=_e.utf8decode(this.fileName),this.fileCommentStr=_e.utf8decode(this.fileComment);else{var we=this.findExtraFieldUnicodePath();if(we!==null)this.fileNameStr=we;else{var Ie=re.transformTo(Me,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(Ie)}var Ae=this.findExtraFieldUnicodeComment();if(Ae!==null)this.fileCommentStr=Ae;else{var H=re.transformTo(Me,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(H)}}},findExtraFieldUnicodePath:function(){var Me=this.extraFields[28789];if(Me){var we=de(Me.value);return we.readInt(1)===1&&ve(this.fileName)===we.readInt(4)?_e.utf8decode(we.readData(Me.length-5)):null}return null},findExtraFieldUnicodeComment:function(){var Me=this.extraFields[25461];if(Me){var we=de(Me.value);return we.readInt(1)===1&&ve(this.fileComment)===we.readInt(4)?_e.utf8decode(we.readData(Me.length-5)):null}return null}},oe.exports=q},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(j,oe){function q(we,Ie,Ae){this.name=we,this.dir=Ae.dir,this.date=Ae.date,this.comment=Ae.comment,this.unixPermissions=Ae.unixPermissions,this.dosPermissions=Ae.dosPermissions,this._data=Ie,this._dataBinary=Ae.binary,this.options={compression:Ae.compression,compressionOptions:Ae.compressionOptions}}var de=j("./stream/StreamHelper"),re=j("./stream/DataWorker"),me=j("./utf8"),ve=j("./compressedObject"),_e=j("./stream/GenericWorker");q.prototype={internalStream:function(we){var Ie=null,Ae="string";try{if(!we)throw new Error("No output type specified.");var H=(Ae=we.toLowerCase())==="string"||Ae==="text";Ae!=="binarystring"&&Ae!=="text"||(Ae="string"),Ie=this._decompressWorker();var V=!this._dataBinary;V&&!H&&(Ie=Ie.pipe(new me.Utf8EncodeWorker)),!V&&H&&(Ie=Ie.pipe(new me.Utf8DecodeWorker))}catch(D){(Ie=new _e("error")).error(D)}return new de(Ie,Ae,"")},async:function(we,Ie){return this.internalStream(we).accumulate(Ie)},nodeStream:function(we,Ie){return this.internalStream(we||"nodebuffer").toNodejsStream(Ie)},_compressWorker:function(we,Ie){if(this._data instanceof ve&&this._data.compression.magic===we.magic)return this._data.getCompressedWorker();var Ae=this._decompressWorker();return this._dataBinary||(Ae=Ae.pipe(new me.Utf8EncodeWorker)),ve.createWorkerFrom(Ae,we,Ie)},_decompressWorker:function(){return this._data instanceof ve?this._data.getContentWorker():this._data instanceof _e?this._data:new re(this._data)}};for(var Se=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],Oe=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},Me=0;Me<Se.length;Me++)q.prototype[Se[Me]]=Oe;oe.exports=q},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(j,oe){(function(q){function de(){var Ie,Ae;ve=!0;for(var H=we.length;H;){for(Ae=we,we=[],Ie=-1;++Ie<H;)Ae[Ie]();H=we.length}ve=!1}var re=q.MutationObserver||q.WebKitMutationObserver,me,ve;if(re){var _e=0,Se=new re(de),Oe=q.document.createTextNode("");Se.observe(Oe,{characterData:!0}),me=function(){Oe.data=_e=++_e%2}}else if(q.setImmediate||q.MessageChannel===void 0)me="document"in q&&"onreadystatechange"in q.document.createElement("script")?function(){var Ie=q.document.createElement("script");Ie.onreadystatechange=function(){de(),Ie.onreadystatechange=null,Ie.parentNode.removeChild(Ie),Ie=null},q.document.documentElement.appendChild(Ie)}:function(){setTimeout(de,0)};else{var Me=new q.MessageChannel;Me.port1.onmessage=de,me=function(){Me.port2.postMessage(0)}}var we=[];oe.exports=function(Ie){we.push(Ie)!==1||ve||me()}}).call(this,N===void 0?typeof self>"u"?typeof window>"u"?{}:window:self:N)},{}],37:[function(j,oe){function q(){}function de(H){if(typeof H!="function")throw new TypeError("resolver must be a function");this.state=Ae,this.queue=[],this.outcome=void 0,H!==q&&_e(this,H)}function re(H,V,D){this.promise=H,typeof V=="function"&&(this.onFulfilled=V,this.callFulfilled=this.otherCallFulfilled),typeof D=="function"&&(this.onRejected=D,this.callRejected=this.otherCallRejected)}function me(H,V,D){Oe(function(){var ne;try{ne=V(D)}catch(ye){return Me.reject(H,ye)}ne===H?Me.reject(H,new TypeError("Cannot resolve promise with itself")):Me.resolve(H,ne)})}function ve(H){var V=H&&H.then;if(H&&(typeof H=="object"||typeof H=="function")&&typeof V=="function")return function(){V.apply(H,arguments)}}function _e(H,V){function D(U){ye||(ye=!0,Me.reject(H,U))}function ne(U){ye||(ye=!0,Me.resolve(H,U))}var ye=!1,ae=Se(function(){V(ne,D)});ae.status==="error"&&D(ae.value)}function Se(H,V){var D={};try{D.value=H(V),D.status="success"}catch(ne){D.status="error",D.value=ne}return D}var Oe=j("immediate"),Me={},we=["REJECTED"],Ie=["FULFILLED"],Ae=["PENDING"];(oe.exports=de).prototype.finally=function(H){if(typeof H!="function")return this;var V=this.constructor;return this.then(function(D){return V.resolve(H()).then(function(){return D})},function(D){return V.resolve(H()).then(function(){throw D})})},de.prototype.catch=function(H){return this.then(null,H)},de.prototype.then=function(H,V){if(typeof H!="function"&&this.state===Ie||typeof V!="function"&&this.state===we)return this;var D=new this.constructor(q);return this.state===Ae?this.queue.push(new re(D,H,V)):me(D,this.state===Ie?H:V,this.outcome),D},re.prototype.callFulfilled=function(H){Me.resolve(this.promise,H)},re.prototype.otherCallFulfilled=function(H){me(this.promise,this.onFulfilled,H)},re.prototype.callRejected=function(H){Me.reject(this.promise,H)},re.prototype.otherCallRejected=function(H){me(this.promise,this.onRejected,H)},Me.resolve=function(H,V){var D=Se(ve,V);if(D.status==="error")return Me.reject(H,D.value);var ne=D.value;if(ne)_e(H,ne);else{H.state=Ie,H.outcome=V;for(var ye=-1,ae=H.queue.length;++ye<ae;)H.queue[ye].callFulfilled(V)}return H},Me.reject=function(H,V){H.state=we,H.outcome=V;for(var D=-1,ne=H.queue.length;++D<ne;)H.queue[D].callRejected(V);return H},de.resolve=function(H){return H instanceof this?H:Me.resolve(new this(q),H)},de.reject=function(H){var V=new this(q);return Me.reject(V,H)},de.all=function(H){function V(k,O){D.resolve(k).then(function(C){ae[O]=C,++U!==ne||ye||(ye=!0,Me.resolve(ie,ae))},function(C){ye||(ye=!0,Me.reject(ie,C))})}var D=this;if(Object.prototype.toString.call(H)!=="[object Array]")return this.reject(new TypeError("must be an array"));var ne=H.length,ye=!1;if(!ne)return this.resolve([]);for(var ae=Array(ne),U=0,le=-1,ie=new this(q);++le<ne;)V(H[le],le);return ie},de.race=function(H){if(Object.prototype.toString.call(H)!=="[object Array]")return this.reject(new TypeError("must be an array"));var V=H.length,D=!1;if(!V)return this.resolve([]);for(var ne=-1,ye=new this(q),ae;++ne<V;)ae=H[ne],this.resolve(ae).then(function(U){D||(D=!0,Me.resolve(ye,U))},function(U){D||(D=!0,Me.reject(ye,U))});return ye}},{immediate:36}],38:[function(j,oe){var q={};(0,j("./lib/utils/common").assign)(q,j("./lib/deflate"),j("./lib/inflate"),j("./lib/zlib/constants")),oe.exports=q},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(j,oe,q){function de(we){if(!(this instanceof de))return new de(we);this.options=ve.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},we||{});var Ie=this.options;Ie.raw&&0<Ie.windowBits?Ie.windowBits=-Ie.windowBits:Ie.gzip&&0<Ie.windowBits&&16>Ie.windowBits&&(Ie.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Oe,this.strm.avail_out=0;var Ae=me.deflateInit2(this.strm,Ie.level,Ie.method,Ie.windowBits,Ie.memLevel,Ie.strategy);if(Ae!==0)throw new Error(Se[Ae]);if(Ie.header&&me.deflateSetHeader(this.strm,Ie.header),Ie.dictionary){var H;if(H=typeof Ie.dictionary=="string"?_e.string2buf(Ie.dictionary):Me.call(Ie.dictionary)==="[object ArrayBuffer]"?new Uint8Array(Ie.dictionary):Ie.dictionary,(Ae=me.deflateSetDictionary(this.strm,H))!==0)throw new Error(Se[Ae]);this._dict_set=!0}}function re(we,Ie){var Ae=new de(Ie);if(Ae.push(we,!0),Ae.err)throw Ae.msg||Se[Ae.err];return Ae.result}var me=j("./zlib/deflate"),ve=j("./utils/common"),_e=j("./utils/strings"),Se=j("./zlib/messages"),Oe=j("./zlib/zstream"),Me=Object.prototype.toString;de.prototype.push=function(we,Ie){var Ae=this.strm,H=this.options.chunkSize,V,D;if(this.ended)return!1;D=Ie===~~Ie?Ie:Ie===!0?4:0,Ae.input=typeof we=="string"?_e.string2buf(we):Me.call(we)==="[object ArrayBuffer]"?new Uint8Array(we):we,Ae.next_in=0,Ae.avail_in=Ae.input.length;do{if(Ae.avail_out===0&&(Ae.output=new ve.Buf8(H),Ae.next_out=0,Ae.avail_out=H),(V=me.deflate(Ae,D))!==1&&V!==0)return this.onEnd(V),!(this.ended=!0);Ae.avail_out!==0&&(Ae.avail_in!==0||D!==4&&D!==2)||(this.options.to==="string"?this.onData(_e.buf2binstring(ve.shrinkBuf(Ae.output,Ae.next_out))):this.onData(ve.shrinkBuf(Ae.output,Ae.next_out)))}while((0<Ae.avail_in||Ae.avail_out===0)&&V!==1);return D===4?(V=me.deflateEnd(this.strm),this.onEnd(V),this.ended=!0,V===0):D!=2||(this.onEnd(0),!(Ae.avail_out=0))},de.prototype.onData=function(we){this.chunks.push(we)},de.prototype.onEnd=function(we){we===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=ve.flattenChunks(this.chunks)),this.chunks=[],this.err=we,this.msg=this.strm.msg},q.Deflate=de,q.deflate=re,q.deflateRaw=function(we,Ie){return(Ie=Ie||{}).raw=!0,re(we,Ie)},q.gzip=function(we,Ie){return(Ie=Ie||{}).gzip=!0,re(we,Ie)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(j,oe,q){function de(Ae){if(!(this instanceof de))return new de(Ae);this.options=ve.assign({chunkSize:16384,windowBits:0,to:""},Ae||{});var H=this.options;H.raw&&0<=H.windowBits&&16>H.windowBits&&(H.windowBits=-H.windowBits,H.windowBits===0&&(H.windowBits=-15)),!(0<=H.windowBits&&16>H.windowBits)||Ae&&Ae.windowBits||(H.windowBits+=32),15<H.windowBits&&48>H.windowBits&&!(15&H.windowBits)&&(H.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Me,this.strm.avail_out=0;var V=me.inflateInit2(this.strm,H.windowBits);if(V!==Se.Z_OK)throw new Error(Oe[V]);this.header=new we,me.inflateGetHeader(this.strm,this.header)}function re(Ae,H){var V=new de(H);if(V.push(Ae,!0),V.err)throw V.msg||Oe[V.err];return V.result}var me=j("./zlib/inflate"),ve=j("./utils/common"),_e=j("./utils/strings"),Se=j("./zlib/constants"),Oe=j("./zlib/messages"),Me=j("./zlib/zstream"),we=j("./zlib/gzheader"),Ie=Object.prototype.toString;de.prototype.push=function(Ae,H){var V=this.strm,D=this.options.chunkSize,ne=this.options.dictionary,ye=!1,ae,U,le,ie,k,O;if(this.ended)return!1;U=H===~~H?H:H===!0?Se.Z_FINISH:Se.Z_NO_FLUSH,V.input=typeof Ae=="string"?_e.binstring2buf(Ae):Ie.call(Ae)==="[object ArrayBuffer]"?new Uint8Array(Ae):Ae,V.next_in=0,V.avail_in=V.input.length;do{if(V.avail_out===0&&(V.output=new ve.Buf8(D),V.next_out=0,V.avail_out=D),(ae=me.inflate(V,Se.Z_NO_FLUSH))===Se.Z_NEED_DICT&&ne&&(O=typeof ne=="string"?_e.string2buf(ne):Ie.call(ne)==="[object ArrayBuffer]"?new Uint8Array(ne):ne,ae=me.inflateSetDictionary(this.strm,O)),ae===Se.Z_BUF_ERROR&&ye===!0&&(ae=Se.Z_OK,ye=!1),ae!==Se.Z_STREAM_END&&ae!==Se.Z_OK)return this.onEnd(ae),!(this.ended=!0);V.next_out&&(V.avail_out!==0&&ae!==Se.Z_STREAM_END&&(V.avail_in!==0||U!==Se.Z_FINISH&&U!==Se.Z_SYNC_FLUSH)||(this.options.to==="string"?(le=_e.utf8border(V.output,V.next_out),ie=V.next_out-le,k=_e.buf2string(V.output,le),V.next_out=ie,V.avail_out=D-ie,ie&&ve.arraySet(V.output,V.output,le,ie,0),this.onData(k)):this.onData(ve.shrinkBuf(V.output,V.next_out)))),V.avail_in===0&&V.avail_out===0&&(ye=!0)}while((0<V.avail_in||V.avail_out===0)&&ae!==Se.Z_STREAM_END);return ae===Se.Z_STREAM_END&&(U=Se.Z_FINISH),U===Se.Z_FINISH?(ae=me.inflateEnd(this.strm),this.onEnd(ae),this.ended=!0,ae===Se.Z_OK):U!==Se.Z_SYNC_FLUSH||(this.onEnd(Se.Z_OK),!(V.avail_out=0))},de.prototype.onData=function(Ae){this.chunks.push(Ae)},de.prototype.onEnd=function(Ae){Ae===Se.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=ve.flattenChunks(this.chunks)),this.chunks=[],this.err=Ae,this.msg=this.strm.msg},q.Inflate=de,q.inflate=re,q.inflateRaw=function(Ae,H){return(H=H||{}).raw=!0,re(Ae,H)},q.ungzip=re},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(j,oe,q){var de=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";q.assign=function(ve){for(var _e=Array.prototype.slice.call(arguments,1),Se;_e.length;)if(Se=_e.shift(),Se){if(typeof Se!="object")throw new TypeError(Se+"must be non-object");for(var Oe in Se)Se.hasOwnProperty(Oe)&&(ve[Oe]=Se[Oe])}return ve},q.shrinkBuf=function(ve,_e){return ve.length===_e?ve:ve.subarray?ve.subarray(0,_e):(ve.length=_e,ve)};var re={arraySet:function(ve,_e,Se,Oe,Me){if(_e.subarray&&ve.subarray)ve.set(_e.subarray(Se,Se+Oe),Me);else for(var we=0;we<Oe;we++)ve[Me+we]=_e[Se+we]},flattenChunks:function(ve){var _e,Se,Oe,Me,we,Ie;for(_e=Oe=0,Se=ve.length;_e<Se;_e++)Oe+=ve[_e].length;for(Ie=new Uint8Array(Oe),_e=Me=0,Se=ve.length;_e<Se;_e++)we=ve[_e],Ie.set(we,Me),Me+=we.length;return Ie}},me={arraySet:function(ve,_e,Se,Oe,Me){for(var we=0;we<Oe;we++)ve[Me+we]=_e[Se+we]},flattenChunks:function(ve){return[].concat.apply([],ve)}};q.setTyped=function(ve){ve?(q.Buf8=Uint8Array,q.Buf16=Uint16Array,q.Buf32=Int32Array,q.assign(q,re)):(q.Buf8=Array,q.Buf16=Array,q.Buf32=Array,q.assign(q,me))},q.setTyped(de)},{}],42:[function(j,oe,q){function de(Oe,Me){if(65537>Me&&(Oe.subarray&&ve||!Oe.subarray&&me))return o.apply(null,re.shrinkBuf(Oe,Me));for(var we="",Ie=0;Ie<Me;Ie++)we+=o(Oe[Ie]);return we}var re=j("./common"),me=!0,ve=!0;try{o.apply(null,[0])}catch{me=!1}try{o.apply(null,new Uint8Array(1))}catch{ve=!1}for(var _e=new re.Buf8(256),Se=0;256>Se;Se++)_e[Se]=252<=Se?6:248<=Se?5:240<=Se?4:224<=Se?3:192<=Se?2:1;_e[254]=_e[254]=1,q.string2buf=function(Oe){var Me=Oe.length,we=0,Ie,Ae,H,V,D;for(V=0;V<Me;V++)(64512&(Ae=Oe.charCodeAt(V)))==55296&&V+1<Me&&(64512&(H=Oe.charCodeAt(V+1)))==56320&&(Ae=65536+(Ae-55296<<10)+(H-56320),V++),we+=128>Ae?1:2048>Ae?2:65536>Ae?3:4;for(Ie=new re.Buf8(we),V=D=0;D<we;V++)(64512&(Ae=Oe.charCodeAt(V)))==55296&&V+1<Me&&(64512&(H=Oe.charCodeAt(V+1)))==56320&&(Ae=65536+(Ae-55296<<10)+(H-56320),V++),128>Ae?Ie[D++]=Ae:(2048>Ae?Ie[D++]=192|Ae>>>6:(65536>Ae?Ie[D++]=224|Ae>>>12:(Ie[D++]=240|Ae>>>18,Ie[D++]=128|63&Ae>>>12),Ie[D++]=128|63&Ae>>>6),Ie[D++]=128|63&Ae);return Ie},q.buf2binstring=function(Oe){return de(Oe,Oe.length)},q.binstring2buf=function(Oe){for(var Me=new re.Buf8(Oe.length),we=0,Ie=Me.length;we<Ie;we++)Me[we]=Oe.charCodeAt(we);return Me},q.buf2string=function(Oe,Me){var we=Me||Oe.length,Ie=Array(2*we),Ae,H,V,D;for(Ae=H=0;Ae<we;)if(128>(V=Oe[Ae++]))Ie[H++]=V;else if(4<(D=_e[V]))Ie[H++]=65533,Ae+=D-1;else{for(V&=D===2?31:D===3?15:7;1<D&&Ae<we;)V=V<<6|63&Oe[Ae++],D--;1<D?Ie[H++]=65533:65536>V?Ie[H++]=V:(V-=65536,Ie[H++]=55296|1023&V>>10,Ie[H++]=56320|1023&V)}return de(Ie,H)},q.utf8border=function(Oe,Me){var we;for((Me=Me||Oe.length)>Oe.length&&(Me=Oe.length),we=Me-1;0<=we&&(192&Oe[we])==128;)we--;return 0>we||we===0?Me:we+_e[Oe[we]]>Me?we:Me}},{"./common":41}],43:[function(j,oe){oe.exports=function(q,de,re,me){for(var ve=0|65535&q,_e=0|65535&q>>>16,Se=0;re!==0;){for(re-=Se=2e3<re?2e3:re;_e=0|_e+(ve=0|ve+de[me++]),--Se;);ve%=65521,_e%=65521}return 0|(ve|_e<<16)}},{}],44:[function(j,oe){oe.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(j,oe){var q=function(){for(var de=[],re=0,me;256>re;re++){me=re;for(var ve=0;8>ve;ve++)me=1&me?3988292384^me>>>1:me>>>1;de[re]=me}return de}();oe.exports=function(de,re,me,ve){de^=-1;for(var _e=ve;_e<ve+me;_e++)de=de>>>8^q[255&(de^re[_e])];return-1^de}},{}],46:[function(j,oe,q){function de(C,G){return C.msg=k[G],G}function re(C){return(C<<1)-(4<C?9:0)}function me(C){for(var G=C.length;0<=--G;)C[G]=0}function ve(C){var G=C.state,Z=G.pending;Z>C.avail_out&&(Z=C.avail_out),Z!==0&&(ae.arraySet(C.output,G.pending_buf,G.pending_out,Z,C.next_out),C.next_out+=Z,G.pending_out+=Z,C.total_out+=Z,C.avail_out-=Z,G.pending-=Z,G.pending===0&&(G.pending_out=0))}function _e(C,G){U._tr_flush_block(C,0<=C.block_start?C.block_start:-1,C.strstart-C.block_start,G),C.block_start=C.strstart,ve(C.strm)}function Se(C,G){C.pending_buf[C.pending++]=G}function Oe(C,G){C.pending_buf[C.pending++]=255&G>>>8,C.pending_buf[C.pending++]=255&G}function Me(C,G){var Z=C.max_chain_length,F=C.strstart,te=C.prev_length,ge=C.nice_match,xe=C.strstart>C.w_size-262?C.strstart-(C.w_size-262):0,fe=C.window,ze=C.w_mask,He=C.prev,Xe=C.strstart+258,Ve=fe[F+te-1],be=fe[F+te],ke,Ge;C.prev_length>=C.good_match&&(Z>>=2),ge>C.lookahead&&(ge=C.lookahead);do if(fe[(ke=G)+te]===be&&fe[ke+te-1]===Ve&&fe[ke]===fe[F]&&fe[++ke]===fe[F+1]){F+=2,ke++;do;while(fe[++F]===fe[++ke]&&fe[++F]===fe[++ke]&&fe[++F]===fe[++ke]&&fe[++F]===fe[++ke]&&fe[++F]===fe[++ke]&&fe[++F]===fe[++ke]&&fe[++F]===fe[++ke]&&fe[++F]===fe[++ke]&&F<Xe);if(Ge=258-(Xe-F),F=Xe-258,te<Ge){if(C.match_start=G,ge<=(te=Ge))break;Ve=fe[F+te-1],be=fe[F+te]}}while((G=He[G&ze])>xe&&--Z!=0);return te<=C.lookahead?te:C.lookahead}function we(C){var G=C.w_size,Z,F,te,ge,xe,fe,ze,He,Xe,Ve;do{if(ge=C.window_size-C.lookahead-C.strstart,C.strstart>=G+(G-262)){for(ae.arraySet(C.window,C.window,G,G,0),C.match_start-=G,C.strstart-=G,C.block_start-=G,Z=F=C.hash_size;te=C.head[--Z],C.head[Z]=G<=te?te-G:0,--F;);for(Z=F=G;te=C.prev[--Z],C.prev[Z]=G<=te?te-G:0,--F;);ge+=G}if(C.strm.avail_in===0)break;if(fe=C.strm,ze=C.window,He=C.strstart+C.lookahead,Ve=void 0,(Xe=ge)<(Ve=fe.avail_in)&&(Ve=Xe),F=Ve===0?0:(fe.avail_in-=Ve,ae.arraySet(ze,fe.input,fe.next_in,Ve,He),fe.state.wrap===1?fe.adler=le(fe.adler,ze,Ve,He):fe.state.wrap===2&&(fe.adler=ie(fe.adler,ze,Ve,He)),fe.next_in+=Ve,fe.total_in+=Ve,Ve),C.lookahead+=F,3<=C.lookahead+C.insert)for(xe=C.strstart-C.insert,C.ins_h=C.window[xe],C.ins_h=(C.ins_h<<C.hash_shift^C.window[xe+1])&C.hash_mask;C.insert&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[xe+3-1])&C.hash_mask,C.prev[xe&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=xe,xe++,C.insert--,!(3>C.lookahead+C.insert)););}while(C.lookahead<262&&C.strm.avail_in!==0)}function Ie(C,G){for(var Z,F;;){if(C.lookahead<262){if(we(C),C.lookahead<262&&G===0)return 1;if(C.lookahead===0)break}if(Z=0,3<=C.lookahead&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+3-1])&C.hash_mask,Z=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),Z!==0&&C.strstart-Z<=C.w_size-262&&(C.match_length=Me(C,Z)),!(3<=C.match_length))F=U._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++;else if(F=U._tr_tally(C,C.strstart-C.match_start,C.match_length-3),C.lookahead-=C.match_length,C.match_length<=C.max_lazy_match&&3<=C.lookahead){for(C.match_length--;C.strstart++,C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+3-1])&C.hash_mask,Z=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart,--C.match_length!=0;);C.strstart++}else C.strstart+=C.match_length,C.match_length=0,C.ins_h=C.window[C.strstart],C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+1])&C.hash_mask;if(F&&(_e(C,!1),C.strm.avail_out===0))return 1}return C.insert=C.strstart<2?C.strstart:2,G===4?(_e(C,!0),C.strm.avail_out===0?3:4):C.last_lit&&(_e(C,!1),C.strm.avail_out===0)?1:2}function Ae(C,G){for(var Z,F,te;;){if(C.lookahead<262){if(we(C),C.lookahead<262&&G===0)return 1;if(C.lookahead===0)break}if(Z=0,3<=C.lookahead&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+3-1])&C.hash_mask,Z=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),C.prev_length=C.match_length,C.prev_match=C.match_start,C.match_length=2,Z!==0&&C.prev_length<C.max_lazy_match&&C.strstart-Z<=C.w_size-262&&(C.match_length=Me(C,Z),5>=C.match_length&&(C.strategy===1||C.match_length===3&&4096<C.strstart-C.match_start)&&(C.match_length=2)),3<=C.prev_length&&C.match_length<=C.prev_length){for(te=C.strstart+C.lookahead-3,F=U._tr_tally(C,C.strstart-1-C.prev_match,C.prev_length-3),C.lookahead-=C.prev_length-1,C.prev_length-=2;++C.strstart<=te&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+3-1])&C.hash_mask,Z=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),--C.prev_length!=0;);if(C.match_available=0,C.match_length=2,C.strstart++,F&&(_e(C,!1),C.strm.avail_out===0))return 1}else if(!C.match_available)C.match_available=1,C.strstart++,C.lookahead--;else if((F=U._tr_tally(C,0,C.window[C.strstart-1]))&&_e(C,!1),C.strstart++,C.lookahead--,C.strm.avail_out===0)return 1}return C.match_available&&(F=U._tr_tally(C,0,C.window[C.strstart-1]),C.match_available=0),C.insert=C.strstart<2?C.strstart:2,G===4?(_e(C,!0),C.strm.avail_out===0?3:4):C.last_lit&&(_e(C,!1),C.strm.avail_out===0)?1:2}function H(C,G,Z,F,te){this.good_length=C,this.max_lazy=G,this.nice_length=Z,this.max_chain=F,this.func=te}function V(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new ae.Buf16(1146),this.dyn_dtree=new ae.Buf16(122),this.bl_tree=new ae.Buf16(78),me(this.dyn_ltree),me(this.dyn_dtree),me(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new ae.Buf16(16),this.heap=new ae.Buf16(573),me(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new ae.Buf16(573),me(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function D(C){var G;return C&&C.state?(C.total_in=C.total_out=0,C.data_type=2,(G=C.state).pending=0,G.pending_out=0,0>G.wrap&&(G.wrap=-G.wrap),G.status=G.wrap?42:113,C.adler=G.wrap===2?0:1,G.last_flush=0,U._tr_init(G),0):de(C,-2)}function ne(C){var G=D(C),Z;return G===0&&((Z=C.state).window_size=2*Z.w_size,me(Z.head),Z.max_lazy_match=O[Z.level].max_lazy,Z.good_match=O[Z.level].good_length,Z.nice_match=O[Z.level].nice_length,Z.max_chain_length=O[Z.level].max_chain,Z.strstart=0,Z.block_start=0,Z.lookahead=0,Z.insert=0,Z.match_length=Z.prev_length=2,Z.match_available=0,Z.ins_h=0),G}function ye(C,G,Z,F,te,ge){if(!C)return-2;var xe=1;if(G===-1&&(G=6),0>F?(xe=0,F=-F):15<F&&(xe=2,F-=16),1>te||9<te||Z!==8||8>F||15<F||0>G||9<G||0>ge||4<ge)return de(C,-2);F===8&&(F=9);var fe=new V;return(C.state=fe).strm=C,fe.wrap=xe,fe.gzhead=null,fe.w_bits=F,fe.w_size=1<<fe.w_bits,fe.w_mask=fe.w_size-1,fe.hash_bits=te+7,fe.hash_size=1<<fe.hash_bits,fe.hash_mask=fe.hash_size-1,fe.hash_shift=~~((fe.hash_bits+3-1)/3),fe.window=new ae.Buf8(2*fe.w_size),fe.head=new ae.Buf16(fe.hash_size),fe.prev=new ae.Buf16(fe.w_size),fe.lit_bufsize=1<<te+6,fe.pending_buf_size=4*fe.lit_bufsize,fe.pending_buf=new ae.Buf8(fe.pending_buf_size),fe.d_buf=1*fe.lit_bufsize,fe.l_buf=3*fe.lit_bufsize,fe.level=G,fe.strategy=ge,fe.method=Z,ne(C)}var ae=j("../utils/common"),U=j("./trees"),le=j("./adler32"),ie=j("./crc32"),k=j("./messages"),O;O=[new H(0,0,0,0,function(C,G){var Z=65535;for(Z>C.pending_buf_size-5&&(Z=C.pending_buf_size-5);;){if(1>=C.lookahead){if(we(C),C.lookahead===0&&G===0)return 1;if(C.lookahead===0)break}C.strstart+=C.lookahead,C.lookahead=0;var F=C.block_start+Z;if((C.strstart===0||C.strstart>=F)&&(C.lookahead=C.strstart-F,C.strstart=F,_e(C,!1),C.strm.avail_out===0)||C.strstart-C.block_start>=C.w_size-262&&(_e(C,!1),C.strm.avail_out===0))return 1}return C.insert=0,G===4?(_e(C,!0),C.strm.avail_out===0?3:4):(C.strstart>C.block_start&&(_e(C,!1),C.strm.avail_out),1)}),new H(4,4,8,4,Ie),new H(4,5,16,8,Ie),new H(4,6,32,32,Ie),new H(4,4,16,16,Ae),new H(8,16,32,32,Ae),new H(8,16,128,128,Ae),new H(8,32,128,256,Ae),new H(32,128,258,1024,Ae),new H(32,258,258,4096,Ae)],q.deflateInit=function(C,G){return ye(C,G,8,15,8,0)},q.deflateInit2=ye,q.deflateReset=ne,q.deflateResetKeep=D,q.deflateSetHeader=function(C,G){return C&&C.state&&C.state.wrap===2?(C.state.gzhead=G,0):-2},q.deflate=function(C,G){var Z,F,te,ge;if(!C||!C.state||5<G||0>G)return C?de(C,-2):-2;if(F=C.state,!C.output||!C.input&&C.avail_in!==0||F.status===666&&G!==4)return de(C,C.avail_out===0?-5:-2);if(F.strm=C,Z=F.last_flush,F.last_flush=G,F.status===42)if(F.wrap===2)C.adler=0,Se(F,31),Se(F,139),Se(F,8),F.gzhead?(Se(F,(F.gzhead.text?1:0)+(F.gzhead.hcrc?2:0)+(F.gzhead.extra?4:0)+(F.gzhead.name?8:0)+(F.gzhead.comment?16:0)),Se(F,255&F.gzhead.time),Se(F,255&F.gzhead.time>>8),Se(F,255&F.gzhead.time>>16),Se(F,255&F.gzhead.time>>24),Se(F,F.level===9?2:2<=F.strategy||2>F.level?4:0),Se(F,255&F.gzhead.os),F.gzhead.extra&&F.gzhead.extra.length&&(Se(F,255&F.gzhead.extra.length),Se(F,255&F.gzhead.extra.length>>8)),F.gzhead.hcrc&&(C.adler=ie(C.adler,F.pending_buf,F.pending,0)),F.gzindex=0,F.status=69):(Se(F,0),Se(F,0),Se(F,0),Se(F,0),Se(F,0),Se(F,F.level===9?2:2<=F.strategy||2>F.level?4:0),Se(F,3),F.status=113);else{var xe=8+(F.w_bits-8<<4)<<8;xe|=(2<=F.strategy||2>F.level?0:6>F.level?1:F.level===6?2:3)<<6,F.strstart!==0&&(xe|=32),xe+=31-xe%31,F.status=113,Oe(F,xe),F.strstart!==0&&(Oe(F,C.adler>>>16),Oe(F,65535&C.adler)),C.adler=1}if(F.status===69)if(F.gzhead.extra){for(te=F.pending;F.gzindex<(65535&F.gzhead.extra.length)&&(F.pending!==F.pending_buf_size||(F.gzhead.hcrc&&F.pending>te&&(C.adler=ie(C.adler,F.pending_buf,F.pending-te,te)),ve(C),te=F.pending,F.pending!==F.pending_buf_size));)Se(F,255&F.gzhead.extra[F.gzindex]),F.gzindex++;F.gzhead.hcrc&&F.pending>te&&(C.adler=ie(C.adler,F.pending_buf,F.pending-te,te)),F.gzindex===F.gzhead.extra.length&&(F.gzindex=0,F.status=73)}else F.status=73;if(F.status===73)if(F.gzhead.name){te=F.pending;do{if(F.pending===F.pending_buf_size&&(F.gzhead.hcrc&&F.pending>te&&(C.adler=ie(C.adler,F.pending_buf,F.pending-te,te)),ve(C),te=F.pending,F.pending===F.pending_buf_size)){ge=1;break}ge=F.gzindex<F.gzhead.name.length?255&F.gzhead.name.charCodeAt(F.gzindex++):0,Se(F,ge)}while(ge!==0);F.gzhead.hcrc&&F.pending>te&&(C.adler=ie(C.adler,F.pending_buf,F.pending-te,te)),ge===0&&(F.gzindex=0,F.status=91)}else F.status=91;if(F.status===91)if(F.gzhead.comment){te=F.pending;do{if(F.pending===F.pending_buf_size&&(F.gzhead.hcrc&&F.pending>te&&(C.adler=ie(C.adler,F.pending_buf,F.pending-te,te)),ve(C),te=F.pending,F.pending===F.pending_buf_size)){ge=1;break}ge=F.gzindex<F.gzhead.comment.length?255&F.gzhead.comment.charCodeAt(F.gzindex++):0,Se(F,ge)}while(ge!==0);F.gzhead.hcrc&&F.pending>te&&(C.adler=ie(C.adler,F.pending_buf,F.pending-te,te)),ge===0&&(F.status=103)}else F.status=103;if(F.status===103&&(F.gzhead.hcrc?(F.pending+2>F.pending_buf_size&&ve(C),F.pending+2<=F.pending_buf_size&&(Se(F,255&C.adler),Se(F,255&C.adler>>8),C.adler=0,F.status=113)):F.status=113),F.pending!==0){if(ve(C),C.avail_out===0)return F.last_flush=-1,0}else if(C.avail_in===0&&re(G)<=re(Z)&&G!==4)return de(C,-5);if(F.status===666&&C.avail_in!==0)return de(C,-5);if(C.avail_in!==0||F.lookahead!==0||G!==0&&F.status!==666){var fe=F.strategy===2?function(ze,He){for(var Xe;;){if(ze.lookahead===0&&(we(ze),ze.lookahead===0)){if(He===0)return 1;break}if(ze.match_length=0,Xe=U._tr_tally(ze,0,ze.window[ze.strstart]),ze.lookahead--,ze.strstart++,Xe&&(_e(ze,!1),ze.strm.avail_out===0))return 1}return ze.insert=0,He===4?(_e(ze,!0),ze.strm.avail_out===0?3:4):ze.last_lit&&(_e(ze,!1),ze.strm.avail_out===0)?1:2}(F,G):F.strategy===3?function(ze,He){for(var Xe=ze.window,Ve,be,ke,Ge;;){if(258>=ze.lookahead){if(we(ze),258>=ze.lookahead&&He===0)return 1;if(ze.lookahead===0)break}if(ze.match_length=0,3<=ze.lookahead&&0<ze.strstart&&(be=Xe[ke=ze.strstart-1])===Xe[++ke]&&be===Xe[++ke]&&be===Xe[++ke]){Ge=ze.strstart+258;do;while(be===Xe[++ke]&&be===Xe[++ke]&&be===Xe[++ke]&&be===Xe[++ke]&&be===Xe[++ke]&&be===Xe[++ke]&&be===Xe[++ke]&&be===Xe[++ke]&&ke<Ge);ze.match_length=258-(Ge-ke),ze.match_length>ze.lookahead&&(ze.match_length=ze.lookahead)}if(3<=ze.match_length?(Ve=U._tr_tally(ze,1,ze.match_length-3),ze.lookahead-=ze.match_length,ze.strstart+=ze.match_length,ze.match_length=0):(Ve=U._tr_tally(ze,0,ze.window[ze.strstart]),ze.lookahead--,ze.strstart++),Ve&&(_e(ze,!1),ze.strm.avail_out===0))return 1}return ze.insert=0,He===4?(_e(ze,!0),ze.strm.avail_out===0?3:4):ze.last_lit&&(_e(ze,!1),ze.strm.avail_out===0)?1:2}(F,G):O[F.level].func(F,G);if(fe!==3&&fe!==4||(F.status=666),fe===1||fe===3)return C.avail_out===0&&(F.last_flush=-1),0;if(fe===2&&(G===1?U._tr_align(F):G!=5&&(U._tr_stored_block(F,0,0,!1),G==3&&(me(F.head),F.lookahead===0&&(F.strstart=0,F.block_start=0,F.insert=0))),ve(C),C.avail_out===0))return F.last_flush=-1,0}return G===4?0>=F.wrap?1:(F.wrap===2?(Se(F,255&C.adler),Se(F,255&C.adler>>8),Se(F,255&C.adler>>16),Se(F,255&C.adler>>24),Se(F,255&C.total_in),Se(F,255&C.total_in>>8),Se(F,255&C.total_in>>16),Se(F,255&C.total_in>>24)):(Oe(F,C.adler>>>16),Oe(F,65535&C.adler)),ve(C),0<F.wrap&&(F.wrap=-F.wrap),F.pending===0?1:0):0},q.deflateEnd=function(C){var G;return C&&C.state?(G=C.state.status)!==42&&G!==69&&G!==73&&G!==91&&G!==103&&G!==113&&G!==666?de(C,-2):(C.state=null,G===113?de(C,-3):0):-2},q.deflateSetDictionary=function(C,G){var Z=G.length,F,te,ge,xe,fe,ze,He,Xe;if(!C||!C.state||(xe=(F=C.state).wrap)===2||xe===1&&F.status!==42||F.lookahead)return-2;for(xe===1&&(C.adler=le(C.adler,G,Z,0)),F.wrap=0,Z>=F.w_size&&(xe===0&&(me(F.head),F.strstart=0,F.block_start=0,F.insert=0),Xe=new ae.Buf8(F.w_size),ae.arraySet(Xe,G,Z-F.w_size,F.w_size,0),G=Xe,Z=F.w_size),fe=C.avail_in,ze=C.next_in,He=C.input,C.avail_in=Z,C.next_in=0,C.input=G,we(F);F.lookahead>=3;){for(te=F.strstart,ge=F.lookahead-2;F.ins_h=(F.ins_h<<F.hash_shift^F.window[te+3-1])&F.hash_mask,F.prev[te&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=te,te++,--ge;);F.strstart=te,F.lookahead=2,we(F)}return F.strstart+=F.lookahead,F.block_start=F.strstart,F.insert=F.lookahead,F.lookahead=0,F.match_length=F.prev_length=2,F.match_available=0,C.next_in=ze,C.input=He,C.avail_in=fe,F.wrap=xe,0},q.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(j,oe){oe.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(j,oe){oe.exports=function(q,de){var re,me,ve,_e,Se,Oe,Me,we,Ie,Ae,H,V,D,ne,ye,ae,U,le,ie,k,O,C,G,Z,F;re=q.state,me=q.next_in,Z=q.input,ve=me+(q.avail_in-5),_e=q.next_out,F=q.output,Se=_e-(de-q.avail_out),Oe=_e+(q.avail_out-257),Me=re.dmax,we=re.wsize,Ie=re.whave,Ae=re.wnext,H=re.window,V=re.hold,D=re.bits,ne=re.lencode,ye=re.distcode,ae=(1<<re.lenbits)-1,U=(1<<re.distbits)-1;e:do{15>D&&(V+=Z[me++]<<D,D+=8,V+=Z[me++]<<D,D+=8),le=ne[V&ae];t:for(;;){if(V>>>=ie=le>>>24,D-=ie,(ie=255&le>>>16)==0)F[_e++]=65535&le;else{if(!(16&ie)){if(!(64&ie)){le=ne[(65535&le)+(V&(1<<ie)-1)];continue t}if(32&ie){re.mode=12;break e}q.msg="invalid literal/length code",re.mode=30;break e}k=65535&le,(ie&=15)&&(D<ie&&(V+=Z[me++]<<D,D+=8),k+=V&(1<<ie)-1,V>>>=ie,D-=ie),15>D&&(V+=Z[me++]<<D,D+=8,V+=Z[me++]<<D,D+=8),le=ye[V&U];i:for(;;){if(V>>>=ie=le>>>24,D-=ie,!(16&(ie=255&le>>>16))){if(!(64&ie)){le=ye[(65535&le)+(V&(1<<ie)-1)];continue i}q.msg="invalid distance code",re.mode=30;break e}if(O=65535&le,D<(ie&=15)&&(V+=Z[me++]<<D,(D+=8)<ie&&(V+=Z[me++]<<D,D+=8)),Me<(O+=V&(1<<ie)-1)){q.msg="invalid distance too far back",re.mode=30;break e}if(V>>>=ie,D-=ie,(ie=_e-Se)<O){if(Ie<(ie=O-ie)&&re.sane){q.msg="invalid distance too far back",re.mode=30;break e}if(G=H,(C=0)===Ae){if(C+=we-ie,ie<k){for(k-=ie;F[_e++]=H[C++],--ie;);C=_e-O,G=F}}else if(Ae<ie){if(C+=we+Ae-ie,(ie-=Ae)<k){for(k-=ie;F[_e++]=H[C++],--ie;);if(C=0,Ae<k){for(k-=ie=Ae;F[_e++]=H[C++],--ie;);C=_e-O,G=F}}}else if(C+=Ae-ie,ie<k){for(k-=ie;F[_e++]=H[C++],--ie;);C=_e-O,G=F}for(;2<k;)F[_e++]=G[C++],F[_e++]=G[C++],F[_e++]=G[C++],k-=3;k&&(F[_e++]=G[C++],1<k&&(F[_e++]=G[C++]))}else{for(C=_e-O;F[_e++]=F[C++],F[_e++]=F[C++],F[_e++]=F[C++],2<(k-=3););k&&(F[_e++]=F[C++],1<k&&(F[_e++]=F[C++]))}break}}break}}while(me<ve&&_e<Oe);me-=k=D>>3,V&=(1<<(D-=k<<3))-1,q.next_in=me,q.next_out=_e,q.avail_in=me<ve?ve-me+5:5-(me-ve),q.avail_out=_e<Oe?Oe-_e+257:257-(_e-Oe),re.hold=V,re.bits=D}},{}],49:[function(j,oe,q){function de(ae){return(255&ae>>>24)+(65280&ae>>>8)+((65280&ae)<<8)+((255&ae)<<24)}function re(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new we.Buf16(320),this.work=new we.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function me(ae){var U;return ae&&ae.state?(U=ae.state,ae.total_in=ae.total_out=U.total=0,ae.msg="",U.wrap&&(ae.adler=1&U.wrap),U.mode=1,U.last=0,U.havedict=0,U.dmax=32768,U.head=null,U.hold=0,U.bits=0,U.lencode=U.lendyn=new we.Buf32(852),U.distcode=U.distdyn=new we.Buf32(592),U.sane=1,U.back=-1,0):-2}function ve(ae){var U;return ae&&ae.state?((U=ae.state).wsize=0,U.whave=0,U.wnext=0,me(ae)):-2}function _e(ae,U){var le,ie;return ae&&ae.state?(ie=ae.state,0>U?(le=0,U=-U):(le=1+(U>>4),48>U&&(U&=15)),U&&(8>U||15<U)?-2:(ie.window!==null&&ie.wbits!==U&&(ie.window=null),ie.wrap=le,ie.wbits=U,ve(ae))):-2}function Se(ae,U){var le,ie;return ae?(ie=new re,(ae.state=ie).window=null,(le=_e(ae,U))!==0&&(ae.state=null),le):-2}function Oe(ae){if(D){var U;for(ne=new we.Buf32(512),ye=new we.Buf32(32),U=0;144>U;)ae.lens[U++]=8;for(;256>U;)ae.lens[U++]=9;for(;280>U;)ae.lens[U++]=7;for(;288>U;)ae.lens[U++]=8;for(V(1,ae.lens,0,288,ne,0,ae.work,{bits:9}),U=0;32>U;)ae.lens[U++]=5;V(2,ae.lens,0,32,ye,0,ae.work,{bits:5}),D=!1}ae.lencode=ne,ae.lenbits=9,ae.distcode=ye,ae.distbits=5}function Me(ae,U,le,ie){var k=ae.state,O;return k.window===null&&(k.wsize=1<<k.wbits,k.wnext=0,k.whave=0,k.window=new we.Buf8(k.wsize)),ie>=k.wsize?(we.arraySet(k.window,U,le-k.wsize,k.wsize,0),k.wnext=0,k.whave=k.wsize):(ie<(O=k.wsize-k.wnext)&&(O=ie),we.arraySet(k.window,U,le-ie,O,k.wnext),(ie-=O)?(we.arraySet(k.window,U,le-ie,ie,0),k.wnext=ie,k.whave=k.wsize):(k.wnext+=O,k.wnext===k.wsize&&(k.wnext=0),k.whave<k.wsize&&(k.whave+=O))),0}var we=j("../utils/common"),Ie=j("./adler32"),Ae=j("./crc32"),H=j("./inffast"),V=j("./inftrees"),D=!0,ne,ye;q.inflateReset=ve,q.inflateReset2=_e,q.inflateResetKeep=me,q.inflateInit=function(ae){return Se(ae,15)},q.inflateInit2=Se,q.inflate=function(ae,U){var le=0,ie=new we.Buf8(4),k=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],O,C,G,Z,F,te,ge,xe,fe,ze,He,Xe,Ve,be,ke,Ge,ut,pt,gt,Rt,dt,qt,zt,xi;if(!ae||!ae.state||!ae.output||!ae.input&&ae.avail_in!==0)return-2;(O=ae.state).mode===12&&(O.mode=13),F=ae.next_out,G=ae.output,ge=ae.avail_out,Z=ae.next_in,C=ae.input,te=ae.avail_in,xe=O.hold,fe=O.bits,ze=te,He=ge,qt=0;e:for(;;)switch(O.mode){case 1:if(O.wrap===0){O.mode=13;break}for(;16>fe;){if(te===0)break e;te--,xe+=C[Z++]<<fe,fe+=8}if(2&O.wrap&&xe===35615){ie[O.check=0]=255&xe,ie[1]=255&xe>>>8,O.check=Ae(O.check,ie,2,0),fe=xe=0,O.mode=2;break}if(O.flags=0,O.head&&(O.head.done=!1),!(1&O.wrap)||(((255&xe)<<8)+(xe>>8))%31){ae.msg="incorrect header check",O.mode=30;break}if((15&xe)!=8){ae.msg="unknown compression method",O.mode=30;break}if(fe-=4,dt=8+(15&(xe>>>=4)),O.wbits===0)O.wbits=dt;else if(dt>O.wbits){ae.msg="invalid window size",O.mode=30;break}O.dmax=1<<dt,ae.adler=O.check=1,O.mode=512&xe?10:12,fe=xe=0;break;case 2:for(;16>fe;){if(te===0)break e;te--,xe+=C[Z++]<<fe,fe+=8}if(O.flags=xe,(255&O.flags)!=8){ae.msg="unknown compression method",O.mode=30;break}if(57344&O.flags){ae.msg="unknown header flags set",O.mode=30;break}O.head&&(O.head.text=1&xe>>8),512&O.flags&&(ie[0]=255&xe,ie[1]=255&xe>>>8,O.check=Ae(O.check,ie,2,0)),fe=xe=0,O.mode=3;case 3:for(;32>fe;){if(te===0)break e;te--,xe+=C[Z++]<<fe,fe+=8}O.head&&(O.head.time=xe),512&O.flags&&(ie[0]=255&xe,ie[1]=255&xe>>>8,ie[2]=255&xe>>>16,ie[3]=255&xe>>>24,O.check=Ae(O.check,ie,4,0)),fe=xe=0,O.mode=4;case 4:for(;16>fe;){if(te===0)break e;te--,xe+=C[Z++]<<fe,fe+=8}O.head&&(O.head.xflags=255&xe,O.head.os=xe>>8),512&O.flags&&(ie[0]=255&xe,ie[1]=255&xe>>>8,O.check=Ae(O.check,ie,2,0)),fe=xe=0,O.mode=5;case 5:if(1024&O.flags){for(;16>fe;){if(te===0)break e;te--,xe+=C[Z++]<<fe,fe+=8}O.length=xe,O.head&&(O.head.extra_len=xe),512&O.flags&&(ie[0]=255&xe,ie[1]=255&xe>>>8,O.check=Ae(O.check,ie,2,0)),fe=xe=0}else O.head&&(O.head.extra=null);O.mode=6;case 6:if(1024&O.flags&&(te<(Xe=O.length)&&(Xe=te),Xe&&(O.head&&(dt=O.head.extra_len-O.length,O.head.extra||(O.head.extra=Array(O.head.extra_len)),we.arraySet(O.head.extra,C,Z,Xe,dt)),512&O.flags&&(O.check=Ae(O.check,C,Xe,Z)),te-=Xe,Z+=Xe,O.length-=Xe),O.length))break e;O.length=0,O.mode=7;case 7:if(2048&O.flags){if(te===0)break e;for(Xe=0;dt=C[Z+Xe++],O.head&&dt&&65536>O.length&&(O.head.name+=o(dt)),dt&&Xe<te;);if(512&O.flags&&(O.check=Ae(O.check,C,Xe,Z)),te-=Xe,Z+=Xe,dt)break e}else O.head&&(O.head.name=null);O.length=0,O.mode=8;case 8:if(4096&O.flags){if(te===0)break e;for(Xe=0;dt=C[Z+Xe++],O.head&&dt&&65536>O.length&&(O.head.comment+=o(dt)),dt&&Xe<te;);if(512&O.flags&&(O.check=Ae(O.check,C,Xe,Z)),te-=Xe,Z+=Xe,dt)break e}else O.head&&(O.head.comment=null);O.mode=9;case 9:if(512&O.flags){for(;16>fe;){if(te===0)break e;te--,xe+=C[Z++]<<fe,fe+=8}if(xe!==(65535&O.check)){ae.msg="header crc mismatch",O.mode=30;break}fe=xe=0}O.head&&(O.head.hcrc=1&O.flags>>9,O.head.done=!0),ae.adler=O.check=0,O.mode=12;break;case 10:for(;32>fe;){if(te===0)break e;te--,xe+=C[Z++]<<fe,fe+=8}ae.adler=O.check=de(xe),fe=xe=0,O.mode=11;case 11:if(O.havedict===0)return ae.next_out=F,ae.avail_out=ge,ae.next_in=Z,ae.avail_in=te,O.hold=xe,O.bits=fe,2;ae.adler=O.check=1,O.mode=12;case 12:if(U===5||U===6)break e;case 13:if(O.last){xe>>>=7&fe,fe-=7&fe,O.mode=27;break}for(;3>fe;){if(te===0)break e;te--,xe+=C[Z++]<<fe,fe+=8}switch(O.last=1&xe,fe-=1,3&(xe>>>=1)){case 0:O.mode=14;break;case 1:if(Oe(O),O.mode=20,U!==6)break;xe>>>=2,fe-=2;break e;case 2:O.mode=17;break;case 3:ae.msg="invalid block type",O.mode=30}xe>>>=2,fe-=2;break;case 14:for(xe>>>=7&fe,fe-=7&fe;32>fe;){if(te===0)break e;te--,xe+=C[Z++]<<fe,fe+=8}if((65535&xe)!=(65535^xe>>>16)){ae.msg="invalid stored block lengths",O.mode=30;break}if(O.length=65535&xe,fe=xe=0,O.mode=15,U===6)break e;case 15:O.mode=16;case 16:if(Xe=O.length){if(te<Xe&&(Xe=te),ge<Xe&&(Xe=ge),Xe===0)break e;we.arraySet(G,C,Z,Xe,F),te-=Xe,Z+=Xe,ge-=Xe,F+=Xe,O.length-=Xe;break}O.mode=12;break;case 17:for(;14>fe;){if(te===0)break e;te--,xe+=C[Z++]<<fe,fe+=8}if(O.nlen=257+(31&xe),xe>>>=5,fe-=5,O.ndist=1+(31&xe),xe>>>=5,fe-=5,O.ncode=4+(15&xe),xe>>>=4,fe-=4,286<O.nlen||30<O.ndist){ae.msg="too many length or distance symbols",O.mode=30;break}O.have=0,O.mode=18;case 18:for(;O.have<O.ncode;){for(;3>fe;){if(te===0)break e;te--,xe+=C[Z++]<<fe,fe+=8}O.lens[k[O.have++]]=7&xe,xe>>>=3,fe-=3}for(;19>O.have;)O.lens[k[O.have++]]=0;if(O.lencode=O.lendyn,O.lenbits=7,zt={bits:O.lenbits},qt=V(0,O.lens,0,19,O.lencode,0,O.work,zt),O.lenbits=zt.bits,qt){ae.msg="invalid code lengths set",O.mode=30;break}O.have=0,O.mode=19;case 19:for(;O.have<O.nlen+O.ndist;){for(;Ge=255&(le=O.lencode[xe&(1<<O.lenbits)-1])>>>16,ut=65535&le,!((ke=le>>>24)<=fe);){if(te===0)break e;te--,xe+=C[Z++]<<fe,fe+=8}if(16>ut)xe>>>=ke,fe-=ke,O.lens[O.have++]=ut;else{if(ut===16){for(xi=ke+2;fe<xi;){if(te===0)break e;te--,xe+=C[Z++]<<fe,fe+=8}if(xe>>>=ke,fe-=ke,O.have===0){ae.msg="invalid bit length repeat",O.mode=30;break}dt=O.lens[O.have-1],Xe=3+(3&xe),xe>>>=2,fe-=2}else if(ut===17){for(xi=ke+3;fe<xi;){if(te===0)break e;te--,xe+=C[Z++]<<fe,fe+=8}fe-=ke,dt=0,Xe=3+(7&(xe>>>=ke)),xe>>>=3,fe-=3}else{for(xi=ke+7;fe<xi;){if(te===0)break e;te--,xe+=C[Z++]<<fe,fe+=8}fe-=ke,dt=0,Xe=11+(127&(xe>>>=ke)),xe>>>=7,fe-=7}if(O.have+Xe>O.nlen+O.ndist){ae.msg="invalid bit length repeat",O.mode=30;break}for(;Xe--;)O.lens[O.have++]=dt}}if(O.mode===30)break;if(O.lens[256]===0){ae.msg="invalid code -- missing end-of-block",O.mode=30;break}if(O.lenbits=9,zt={bits:O.lenbits},qt=V(1,O.lens,0,O.nlen,O.lencode,0,O.work,zt),O.lenbits=zt.bits,qt){ae.msg="invalid literal/lengths set",O.mode=30;break}if(O.distbits=6,O.distcode=O.distdyn,zt={bits:O.distbits},qt=V(2,O.lens,O.nlen,O.ndist,O.distcode,0,O.work,zt),O.distbits=zt.bits,qt){ae.msg="invalid distances set",O.mode=30;break}if(O.mode=20,U===6)break e;case 20:O.mode=21;case 21:if(6<=te&&258<=ge){ae.next_out=F,ae.avail_out=ge,ae.next_in=Z,ae.avail_in=te,O.hold=xe,O.bits=fe,H(ae,He),F=ae.next_out,G=ae.output,ge=ae.avail_out,Z=ae.next_in,C=ae.input,te=ae.avail_in,xe=O.hold,fe=O.bits,O.mode===12&&(O.back=-1);break}for(O.back=0;Ge=255&(le=O.lencode[xe&(1<<O.lenbits)-1])>>>16,ut=65535&le,!((ke=le>>>24)<=fe);){if(te===0)break e;te--,xe+=C[Z++]<<fe,fe+=8}if(Ge&&!(240&Ge)){for(pt=ke,gt=Ge,Rt=ut;Ge=255&(le=O.lencode[Rt+((xe&(1<<pt+gt)-1)>>pt)])>>>16,ut=65535&le,!(pt+(ke=le>>>24)<=fe);){if(te===0)break e;te--,xe+=C[Z++]<<fe,fe+=8}xe>>>=pt,fe-=pt,O.back+=pt}if(xe>>>=ke,fe-=ke,O.back+=ke,O.length=ut,Ge===0){O.mode=26;break}if(32&Ge){O.back=-1,O.mode=12;break}if(64&Ge){ae.msg="invalid literal/length code",O.mode=30;break}O.extra=15&Ge,O.mode=22;case 22:if(O.extra){for(xi=O.extra;fe<xi;){if(te===0)break e;te--,xe+=C[Z++]<<fe,fe+=8}O.length+=xe&(1<<O.extra)-1,xe>>>=O.extra,fe-=O.extra,O.back+=O.extra}O.was=O.length,O.mode=23;case 23:for(;Ge=255&(le=O.distcode[xe&(1<<O.distbits)-1])>>>16,ut=65535&le,!((ke=le>>>24)<=fe);){if(te===0)break e;te--,xe+=C[Z++]<<fe,fe+=8}if(!(240&Ge)){for(pt=ke,gt=Ge,Rt=ut;Ge=255&(le=O.distcode[Rt+((xe&(1<<pt+gt)-1)>>pt)])>>>16,ut=65535&le,!(pt+(ke=le>>>24)<=fe);){if(te===0)break e;te--,xe+=C[Z++]<<fe,fe+=8}xe>>>=pt,fe-=pt,O.back+=pt}if(xe>>>=ke,fe-=ke,O.back+=ke,64&Ge){ae.msg="invalid distance code",O.mode=30;break}O.offset=ut,O.extra=15&Ge,O.mode=24;case 24:if(O.extra){for(xi=O.extra;fe<xi;){if(te===0)break e;te--,xe+=C[Z++]<<fe,fe+=8}O.offset+=xe&(1<<O.extra)-1,xe>>>=O.extra,fe-=O.extra,O.back+=O.extra}if(O.offset>O.dmax){ae.msg="invalid distance too far back",O.mode=30;break}O.mode=25;case 25:if(ge===0)break e;if(Xe=He-ge,O.offset>Xe){if((Xe=O.offset-Xe)>O.whave&&O.sane){ae.msg="invalid distance too far back",O.mode=30;break}Ve=Xe>O.wnext?(Xe-=O.wnext,O.wsize-Xe):O.wnext-Xe,Xe>O.length&&(Xe=O.length),be=O.window}else be=G,Ve=F-O.offset,Xe=O.length;for(ge<Xe&&(Xe=ge),ge-=Xe,O.length-=Xe;G[F++]=be[Ve++],--Xe;);O.length===0&&(O.mode=21);break;case 26:if(ge===0)break e;G[F++]=O.length,ge--,O.mode=21;break;case 27:if(O.wrap){for(;32>fe;){if(te===0)break e;te--,xe|=C[Z++]<<fe,fe+=8}if(He-=ge,ae.total_out+=He,O.total+=He,He&&(ae.adler=O.check=O.flags?Ae(O.check,G,He,F-He):Ie(O.check,G,He,F-He)),He=ge,(O.flags?xe:de(xe))!==O.check){ae.msg="incorrect data check",O.mode=30;break}fe=xe=0}O.mode=28;case 28:if(O.wrap&&O.flags){for(;32>fe;){if(te===0)break e;te--,xe+=C[Z++]<<fe,fe+=8}if(xe!==(4294967295&O.total)){ae.msg="incorrect length check",O.mode=30;break}fe=xe=0}O.mode=29;case 29:qt=1;break e;case 30:qt=-3;break e;case 31:return-4;case 32:default:return-2}return ae.next_out=F,ae.avail_out=ge,ae.next_in=Z,ae.avail_in=te,O.hold=xe,O.bits=fe,(O.wsize||He!==ae.avail_out&&30>O.mode&&(27>O.mode||U!==4))&&Me(ae,ae.output,ae.next_out,He-ae.avail_out)?(O.mode=31,-4):(ze-=ae.avail_in,He-=ae.avail_out,ae.total_in+=ze,ae.total_out+=He,O.total+=He,O.wrap&&He&&(ae.adler=O.check=O.flags?Ae(O.check,G,He,ae.next_out-He):Ie(O.check,G,He,ae.next_out-He)),ae.data_type=O.bits+(O.last?64:0)+(O.mode===12?128:0)+(O.mode===20||O.mode===15?256:0),(ze==0&&He===0||U===4)&&qt===0&&(qt=-5),qt)},q.inflateEnd=function(ae){if(!ae||!ae.state)return-2;var U=ae.state;return U.window&&(U.window=null),ae.state=null,0},q.inflateGetHeader=function(ae,U){var le;return ae&&ae.state&&2&(le=ae.state).wrap?((le.head=U).done=!1,0):-2},q.inflateSetDictionary=function(ae,U){var le=U.length,ie;return ae&&ae.state?(ie=ae.state).wrap!==0&&ie.mode!==11?-2:ie.mode===11&&Ie(1,U,le,0)!==ie.check?-3:Me(ae,U,le,le)?(ie.mode=31,-4):(ie.havedict=1,0):-2},q.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(j,oe){var q=j("../utils/common"),de=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],re=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],me=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],ve=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];oe.exports=function(_e,Se,Oe,Me,we,Ie,Ae,H){var V=H.bits,D=0,ne=0,ye=0,ae=0,U=0,le=0,ie=0,k=0,O=0,C=0,G=null,Z=0,F=new q.Buf16(16),te=new q.Buf16(16),ge=null,xe=0,fe,ze,He,Xe,Ve,be,ke,Ge,ut;for(D=0;15>=D;D++)F[D]=0;for(ne=0;ne<Me;ne++)F[Se[Oe+ne]]++;for(U=V,ae=15;1<=ae&&F[ae]===0;ae--);if(ae<U&&(U=ae),ae==0)return we[Ie++]=20971520,we[Ie++]=20971520,H.bits=1,0;for(ye=1;ye<ae&&F[ye]===0;ye++);for(U<ye&&(U=ye),D=k=1;15>=D;D++)if(k<<=1,0>(k-=F[D]))return-1;if(0<k&&(_e===0||ae!==1))return-1;for(te[1]=0,D=1;15>D;D++)te[D+1]=te[D]+F[D];for(ne=0;ne<Me;ne++)Se[Oe+ne]!==0&&(Ae[te[Se[Oe+ne]]++]=ne);if(be=_e===0?(G=ge=Ae,19):_e===1?(G=de,Z-=257,ge=re,xe-=257,256):(G=me,ge=ve,-1),D=ye,Ve=Ie,ie=ne=C=0,He=-1,Xe=(O=1<<(le=U))-1,_e===1&&852<O||_e===2&&592<O)return 1;for(;;){for(ke=D-ie,ut=Ae[ne]<be?(Ge=0,Ae[ne]):Ae[ne]>be?(Ge=ge[xe+Ae[ne]],G[Z+Ae[ne]]):(Ge=96,0),fe=1<<D-ie,ye=ze=1<<le;we[Ve+(C>>ie)+(ze-=fe)]=0|(ke<<24|Ge<<16|ut),ze!==0;);for(fe=1<<D-1;C&fe;)fe>>=1;if(fe===0?C=0:(C&=fe-1,C+=fe),ne++,--F[D]==0){if(D===ae)break;D=Se[Oe+Ae[ne]]}if(U<D&&(C&Xe)!==He){for(ie===0&&(ie=U),Ve+=ye,k=1<<(le=D-ie);le+ie<ae&&!(0>=(k-=F[le+ie]));)le++,k<<=1;if(O+=1<<le,_e===1&&852<O||_e===2&&592<O)return 1;we[He=C&Xe]=0|(U<<24|le<<16|Ve-Ie)}}return C!=0&&(we[Ve+C]=0|(D-ie<<24|4194304)),H.bits=U,0}},{"../utils/common":41}],51:[function(j,oe){oe.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(j,oe,q){function de(be){for(var ke=be.length;0<=--ke;)be[ke]=0}function re(be,ke,Ge,ut,pt){this.static_tree=be,this.extra_bits=ke,this.extra_base=Ge,this.elems=ut,this.max_length=pt,this.has_stree=be&&be.length}function me(be,ke){this.dyn_tree=be,this.max_code=0,this.stat_desc=ke}function ve(be){return 256>be?te[be]:te[256+(be>>>7)]}function _e(be,ke){be.pending_buf[be.pending++]=255&ke,be.pending_buf[be.pending++]=255&ke>>>8}function Se(be,ke,Ge){be.bi_valid>16-Ge?(be.bi_buf|=65535&ke<<be.bi_valid,_e(be,be.bi_buf),be.bi_buf=ke>>16-be.bi_valid,be.bi_valid+=Ge-16):(be.bi_buf|=65535&ke<<be.bi_valid,be.bi_valid+=Ge)}function Oe(be,ke,Ge){Se(be,Ge[2*ke],Ge[2*ke+1])}function Me(be,ke){for(var Ge=0;Ge|=1&be,be>>>=1,Ge<<=1,0<--ke;);return Ge>>>1}function we(be,ke,Ge){var ut=Array(16),pt=0,gt,Rt;for(gt=1;gt<=15;gt++)ut[gt]=pt=pt+Ge[gt-1]<<1;for(Rt=0;Rt<=ke;Rt++){var dt=be[2*Rt+1];dt!==0&&(be[2*Rt]=Me(ut[dt]++,dt))}}function Ie(be){var ke;for(ke=0;286>ke;ke++)be.dyn_ltree[2*ke]=0;for(ke=0;30>ke;ke++)be.dyn_dtree[2*ke]=0;for(ke=0;19>ke;ke++)be.bl_tree[2*ke]=0;be.dyn_ltree[512]=1,be.opt_len=be.static_len=0,be.last_lit=be.matches=0}function Ae(be){8<be.bi_valid?_e(be,be.bi_buf):0<be.bi_valid&&(be.pending_buf[be.pending++]=be.bi_buf),be.bi_buf=0,be.bi_valid=0}function H(be,ke,Ge,ut){var pt=2*ke,gt=2*Ge;return be[pt]<be[gt]||be[pt]===be[gt]&&ut[ke]<=ut[Ge]}function V(be,ke,Ge){for(var ut=be.heap[Ge],pt=Ge<<1;pt<=be.heap_len&&(pt<be.heap_len&&H(ke,be.heap[pt+1],be.heap[pt],be.depth)&&pt++,!H(ke,ut,be.heap[pt],be.depth));)be.heap[Ge]=be.heap[pt],Ge=pt,pt<<=1;be.heap[Ge]=ut}function D(be,ke,Ge){var ut=0,pt,gt,Rt,dt;if(be.last_lit!==0)for(;pt=be.pending_buf[be.d_buf+2*ut]<<8|be.pending_buf[be.d_buf+2*ut+1],gt=be.pending_buf[be.l_buf+ut],ut++,pt===0?Oe(be,gt,ke):(Oe(be,(Rt=ge[gt])+256+1,ke),(dt=k[Rt])!==0&&Se(be,gt-=xe[Rt],dt),Oe(be,Rt=ve(--pt),Ge),(dt=O[Rt])!==0&&Se(be,pt-=fe[Rt],dt)),ut<be.last_lit;);Oe(be,256,ke)}function ne(be,ke){var Ge=ke.dyn_tree,ut=ke.stat_desc.static_tree,pt=ke.stat_desc.has_stree,gt=ke.stat_desc.elems,Rt=-1,dt,qt,zt;for(be.heap_len=0,be.heap_max=573,dt=0;dt<gt;dt++)Ge[2*dt]===0?Ge[2*dt+1]=0:(be.heap[++be.heap_len]=Rt=dt,be.depth[dt]=0);for(;2>be.heap_len;)Ge[2*(zt=be.heap[++be.heap_len]=2>Rt?++Rt:0)]=1,be.depth[zt]=0,be.opt_len--,pt&&(be.static_len-=ut[2*zt+1]);for(ke.max_code=Rt,dt=be.heap_len>>1;1<=dt;dt--)V(be,Ge,dt);for(zt=gt;dt=be.heap[1],be.heap[1]=be.heap[be.heap_len--],V(be,Ge,1),qt=be.heap[1],be.heap[--be.heap_max]=dt,be.heap[--be.heap_max]=qt,Ge[2*zt]=Ge[2*dt]+Ge[2*qt],be.depth[zt]=(be.depth[dt]>=be.depth[qt]?be.depth[dt]:be.depth[qt])+1,Ge[2*dt+1]=Ge[2*qt+1]=zt,be.heap[1]=zt++,V(be,Ge,1),2<=be.heap_len;);be.heap[--be.heap_max]=be.heap[1],function(xi,Or){var gs=Or.dyn_tree,Na=Or.max_code,Fa=Or.stat_desc.static_tree,Da=Or.stat_desc.has_stree,Cl=Or.stat_desc.extra_bits,_p=Or.stat_desc.extra_base,Be=Or.stat_desc.max_length,Gi=0,Jo,ki,vs,yt,Mo,yr;for(yt=0;yt<=15;yt++)xi.bl_count[yt]=0;for(gs[2*xi.heap[xi.heap_max]+1]=0,Jo=xi.heap_max+1;573>Jo;Jo++)Be<(yt=gs[2*gs[2*(ki=xi.heap[Jo])+1]+1]+1)&&(yt=Be,Gi++),gs[2*ki+1]=yt,Na<ki||(xi.bl_count[yt]++,Mo=0,_p<=ki&&(Mo=Cl[ki-_p]),yr=gs[2*ki],xi.opt_len+=yr*(yt+Mo),Da&&(xi.static_len+=yr*(Fa[2*ki+1]+Mo)));if(Gi!=0){do{for(yt=Be-1;xi.bl_count[yt]===0;)yt--;xi.bl_count[yt]--,xi.bl_count[yt+1]+=2,xi.bl_count[Be]--,Gi-=2}while(0<Gi);for(yt=Be;yt!==0;yt--)for(ki=xi.bl_count[yt];ki!==0;)Na<(vs=xi.heap[--Jo])||(gs[2*vs+1]!==yt&&(xi.opt_len+=(yt-gs[2*vs+1])*gs[2*vs],gs[2*vs+1]=yt),ki--)}}(be,ke),we(Ge,Rt,be.bl_count)}function ye(be,ke,Ge){var ut=-1,pt=ke[1],gt=0,Rt=7,dt=4,qt,zt;for(pt===0&&(Rt=138,dt=3),ke[2*(Ge+1)+1]=65535,qt=0;qt<=Ge;qt++)zt=pt,pt=ke[2*(qt+1)+1],++gt<Rt&&zt===pt||(gt<dt?be.bl_tree[2*zt]+=gt:zt===0?10>=gt?be.bl_tree[34]++:be.bl_tree[36]++:(zt!==ut&&be.bl_tree[2*zt]++,be.bl_tree[32]++),ut=zt,dt=(gt=0)===pt?(Rt=138,3):zt===pt?(Rt=6,3):(Rt=7,4))}function ae(be,ke,Ge){var ut=-1,pt=ke[1],gt=0,Rt=7,dt=4,qt,zt;for(pt===0&&(Rt=138,dt=3),qt=0;qt<=Ge;qt++)if(zt=pt,pt=ke[2*(qt+1)+1],!(++gt<Rt&&zt===pt)){if(gt<dt)for(;Oe(be,zt,be.bl_tree),--gt!=0;);else zt===0?10>=gt?(Oe(be,17,be.bl_tree),Se(be,gt-3,3)):(Oe(be,18,be.bl_tree),Se(be,gt-11,7)):(zt!==ut&&(Oe(be,zt,be.bl_tree),gt--),Oe(be,16,be.bl_tree),Se(be,gt-3,2));ut=zt,dt=(gt=0)===pt?(Rt=138,3):zt===pt?(Rt=6,3):(Rt=7,4)}}function U(be,ke,Ge,ut){var pt,gt,Rt;Se(be,0+(ut?1:0),3),gt=ke,Rt=Ge,Ae(pt=be),_e(pt,Rt),_e(pt,~Rt),le.arraySet(pt.pending_buf,pt.window,gt,Rt,pt.pending),pt.pending+=Rt}var le=j("../utils/common"),ie=15,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],O=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Z=Array(576);de(Z);var F=Array(60);de(F);var te=Array(512);de(te);var ge=Array(256);de(ge);var xe=Array(29);de(xe);var fe=Array(30),ze,He,Xe;de(fe);var Ve=!1;q._tr_init=function(be){Ve||(function(){var ke=Array(ie+1),Ge,ut,pt,gt,Rt;for(gt=pt=0;28>gt;gt++)for(xe[gt]=pt,Ge=0;Ge<1<<k[gt];Ge++)ge[pt++]=gt;for(ge[pt-1]=gt,gt=Rt=0;16>gt;gt++)for(fe[gt]=Rt,Ge=0;Ge<1<<O[gt];Ge++)te[Rt++]=gt;for(Rt>>=7;30>gt;gt++)for(fe[gt]=Rt<<7,Ge=0;Ge<1<<O[gt]-7;Ge++)te[256+Rt++]=gt;for(ut=0;ut<=ie;ut++)ke[ut]=0;for(Ge=0;143>=Ge;)Z[2*Ge+1]=8,Ge++,ke[8]++;for(;255>=Ge;)Z[2*Ge+1]=9,Ge++,ke[9]++;for(;279>=Ge;)Z[2*Ge+1]=7,Ge++,ke[7]++;for(;287>=Ge;)Z[2*Ge+1]=8,Ge++,ke[8]++;for(we(Z,287,ke),Ge=0;30>Ge;Ge++)F[2*Ge+1]=5,F[2*Ge]=Me(Ge,5);ze=new re(Z,k,257,286,ie),He=new re(F,O,0,30,ie),Xe=new re([],C,0,19,7)}(),Ve=!0),be.l_desc=new me(be.dyn_ltree,ze),be.d_desc=new me(be.dyn_dtree,He),be.bl_desc=new me(be.bl_tree,Xe),be.bi_buf=0,be.bi_valid=0,Ie(be)},q._tr_stored_block=U,q._tr_flush_block=function(be,ke,Ge,ut){var pt=0,gt,Rt;0<be.level?(be.strm.data_type===2&&(be.strm.data_type=function(dt){var qt=4093624447,zt;for(zt=0;31>=zt;zt++,qt>>>=1)if(1&qt&&dt.dyn_ltree[2*zt]!==0)return 0;if(dt.dyn_ltree[18]!==0||dt.dyn_ltree[20]!==0||dt.dyn_ltree[26]!==0)return 1;for(zt=32;256>zt;zt++)if(dt.dyn_ltree[2*zt]!==0)return 1;return 0}(be)),ne(be,be.l_desc),ne(be,be.d_desc),pt=function(dt){var qt;for(ye(dt,dt.dyn_ltree,dt.l_desc.max_code),ye(dt,dt.dyn_dtree,dt.d_desc.max_code),ne(dt,dt.bl_desc),qt=18;3<=qt&&dt.bl_tree[2*G[qt]+1]===0;qt--);return dt.opt_len+=3*(qt+1)+5+5+4,qt}(be),gt=be.opt_len+3+7>>>3,(Rt=be.static_len+3+7>>>3)<=gt&&(gt=Rt)):gt=Rt=Ge+5,Ge+4<=gt&&ke!==-1?U(be,ke,Ge,ut):be.strategy===4||Rt===gt?(Se(be,2+(ut?1:0),3),D(be,Z,F)):(Se(be,4+(ut?1:0),3),function(dt,qt,zt,xi){var Or;for(Se(dt,qt-257,5),Se(dt,zt-1,5),Se(dt,xi-4,4),Or=0;Or<xi;Or++)Se(dt,dt.bl_tree[2*G[Or]+1],3);ae(dt,dt.dyn_ltree,qt-1),ae(dt,dt.dyn_dtree,zt-1)}(be,be.l_desc.max_code+1,be.d_desc.max_code+1,pt+1),D(be,be.dyn_ltree,be.dyn_dtree)),Ie(be),ut&&Ae(be)},q._tr_tally=function(be,ke,Ge){return be.pending_buf[be.d_buf+2*be.last_lit]=255&ke>>>8,be.pending_buf[be.d_buf+2*be.last_lit+1]=255&ke,be.pending_buf[be.l_buf+be.last_lit]=255&Ge,be.last_lit++,ke===0?be.dyn_ltree[2*Ge]++:(be.matches++,ke--,be.dyn_ltree[2*(ge[Ge]+256+1)]++,be.dyn_dtree[2*ve(ke)]++),be.last_lit===be.lit_bufsize-1},q._tr_align=function(be){var ke;Se(be,2,3),Oe(be,256,Z),(ke=be).bi_valid===16?(_e(ke,ke.bi_buf),ke.bi_buf=0,ke.bi_valid=0):8<=ke.bi_valid&&(ke.pending_buf[ke.pending++]=255&ke.bi_buf,ke.bi_buf>>=8,ke.bi_valid-=8)}},{"../utils/common":41}],53:[function(j,oe){oe.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(j,oe){oe.exports=typeof m=="function"?m:function(){var q=[].slice.apply(arguments);q.splice(1,0,0),setTimeout.apply(null,q)}},{}]},{},[10])(10)})}).call(this,K===void 0?typeof self>"u"?typeof window>"u"?{}:window:self:K)},{}]},{},[1])(1)})}).call(this,B===void 0?typeof self>"u"?typeof window>"u"?{}:window:self:B)},{}]},{},[1])(1)})}).call(this,M===void 0?typeof self>"u"?typeof window>"u"?{}:window:self:M)},{}]},{},[1])(1)})}).call(this,x===void 0?typeof self>"u"?typeof window>"u"?{}:window:self:x)},{}]},{},[1])(1)})}).call(this,typeof d>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:d)},{}]},{},[1])(1)})}).call(this)}).call(this,typeof Bs>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Bs,l("buffer").Buffer,l("timers").setImmediate)},{buffer:8,timers:22}],12:[function(l,u){function c(){}function d(I){if(typeof I!="function")throw new TypeError("resolver must be a function");this.state=M,this.queue=[],this.outcome=void 0,I!==c&&v(this,I)}function f(I,$,L){this.promise=I,typeof $=="function"&&(this.onFulfilled=$,this.callFulfilled=this.otherCallFulfilled),typeof L=="function"&&(this.onRejected=L,this.callRejected=this.otherCallRejected)}function m(I,$,L){x(function(){var B;try{B=$(L)}catch(z){return S.reject(I,z)}B===I?S.reject(I,new TypeError("Cannot resolve promise with itself")):S.resolve(I,B)})}function g(I){var $=I&&I.then;if(I&&(typeof I=="object"||typeof I=="function")&&typeof $=="function")return function(){$.apply(I,arguments)}}function v(I,$){function L(J){z||(z=!0,S.reject(I,J))}function B(J){z||(z=!0,S.resolve(I,J))}var z=!1,W=b(function(){$(B,L)});W.status==="error"&&L(W.value)}function b(I,$){var L={};try{L.value=I($),L.status="success"}catch(B){L.status="error",L.value=B}return L}var x=l("immediate"),S={},T=["REJECTED"],_=["FULFILLED"],M=["PENDING"];u.exports=d,d.prototype.finally=function(I){if(typeof I!="function")return this;var $=this.constructor;return this.then(function(L){return $.resolve(I()).then(function(){return L})},function(L){return $.resolve(I()).then(function(){throw L})})},d.prototype.catch=function(I){return this.then(null,I)},d.prototype.then=function(I,$){if(typeof I!="function"&&this.state===_||typeof $!="function"&&this.state===T)return this;var L=new this.constructor(c);if(this.state!==M){var B=this.state===_?I:$;m(L,B,this.outcome)}else this.queue.push(new f(L,I,$));return L},f.prototype.callFulfilled=function(I){S.resolve(this.promise,I)},f.prototype.otherCallFulfilled=function(I){m(this.promise,this.onFulfilled,I)},f.prototype.callRejected=function(I){S.reject(this.promise,I)},f.prototype.otherCallRejected=function(I){m(this.promise,this.onRejected,I)},S.resolve=function(I,$){var L=b(g,$);if(L.status==="error")return S.reject(I,L.value);var B=L.value;if(B)v(I,B);else{I.state=_,I.outcome=$;for(var z=-1,W=I.queue.length;++z<W;)I.queue[z].callFulfilled($)}return I},S.reject=function(I,$){I.state=T,I.outcome=$;for(var L=-1,B=I.queue.length;++L<B;)I.queue[L].callRejected($);return I},d.resolve=function(I){return I instanceof this?I:S.resolve(new this(c),I)},d.reject=function(I){var $=new this(c);return S.reject($,I)},d.all=function(I){function $(y,A){function N(j){W[A]=j,++J!==B||z||(z=!0,S.resolve(Q,W))}L.resolve(y).then(N,function(j){z||(z=!0,S.reject(Q,j))})}var L=this;if(Object.prototype.toString.call(I)!=="[object Array]")return this.reject(new TypeError("must be an array"));var B=I.length,z=!1;if(!B)return this.resolve([]);for(var W=Array(B),J=0,K=-1,Q=new this(c);++K<B;)$(I[K],K);return Q},d.race=function(I){function $(K){L.resolve(K).then(function(Q){z||(z=!0,S.resolve(J,Q))},function(Q){z||(z=!0,S.reject(J,Q))})}var L=this;if(Object.prototype.toString.call(I)!=="[object Array]")return this.reject(new TypeError("must be an array"));var B=I.length,z=!1;if(!B)return this.resolve([]);for(var W=-1,J=new this(c);++W<B;)$(I[W]);return J}},{immediate:10}],13:[function(l,u){(function(){function c(I,$){return Object.prototype.hasOwnProperty.call(I,$)}function d(){return 1}function f(I){M||typeof I=="string"||typeof I=="number"||(M=!0,console.error(new TypeError("LRU: key must be a string or number. Almost certainly a bug! "+typeof I).stack))}function m(I){return this instanceof m?(typeof I=="number"&&(I={max:I}),!I&&(I={}),this._max=I.max,(!this._max||typeof this._max!="number"||0>=this._max)&&(this._max=1/0),this._lengthCalculator=I.length||d,typeof this._lengthCalculator!="function"&&(this._lengthCalculator=d),this._allowStale=I.stale||!1,this._maxAge=I.maxAge||null,this._dispose=I.dispose,void this.reset()):new m(I)}function g(I,$,L){f($);var B=I._cache[$];return B&&(v(I,B)?(T(I,B),!I._allowStale&&(B=void 0)):L&&b(I,B),B&&(B=B.value)),B}function v(I,$){if(!$||!$.maxAge&&!I._maxAge)return!1;var L=!1,B=Date.now()-$.now;return L=$.maxAge?B>$.maxAge:I._maxAge&&B>I._maxAge,L}function b(I,$){S(I,$),$.lu=I._mru++,I._lruList[$.lu]=$}function x(I){for(;I._lru<I._mru&&I._length>I._max;)T(I,I._lruList[I._lru])}function S(I,$){for(delete I._lruList[$.lu];I._lru<I._mru&&!I._lruList[I._lru];)I._lru++}function T(I,$){$&&(I._dispose&&I._dispose($.key,$.value),I._length-=$.length,I._itemCount--,delete I._cache[$.key],S(I,$))}function _(I,$,L,B,z,W){this.key=I,this.value=$,this.lu=L,this.length=B,this.now=z,W&&(this.maxAge=W)}typeof u=="object"&&u.exports?u.exports=m:this.LRUCache=m;var M=!1;Object.defineProperty(m.prototype,"max",{set:function(I){I&&typeof I=="number"&&!(0>=I)||(I=1/0),this._max=I,this._length>this._max&&x(this)},get:function(){return this._max},enumerable:!0}),Object.defineProperty(m.prototype,"lengthCalculator",{set:function(I){if(typeof I!="function")for(var $ in this._lengthCalculator=d,this._length=this._itemCount,this._cache)this._cache[$].length=1;else for(var $ in this._lengthCalculator=I,this._length=0,this._cache)this._cache[$].length=this._lengthCalculator(this._cache[$].value),this._length+=this._cache[$].length;this._length>this._max&&x(this)},get:function(){return this._lengthCalculator},enumerable:!0}),Object.defineProperty(m.prototype,"length",{get:function(){return this._length},enumerable:!0}),Object.defineProperty(m.prototype,"itemCount",{get:function(){return this._itemCount},enumerable:!0}),m.prototype.forEach=function(I,$){$=$||this;for(var L=0,B=this._itemCount,z=this._mru-1;0<=z&&L<B;z--)if(this._lruList[z]){L++;var W=this._lruList[z];v(this,W)&&(T(this,W),!this._allowStale&&(W=void 0)),W&&I.call($,W.value,W.key,this)}},m.prototype.keys=function(){for(var I=Array(this._itemCount),$=0,L=this._mru-1;0<=L&&$<this._itemCount;L--)if(this._lruList[L]){var B=this._lruList[L];I[$++]=B.key}return I},m.prototype.values=function(){for(var I=Array(this._itemCount),$=0,L=this._mru-1;0<=L&&$<this._itemCount;L--)if(this._lruList[L]){var B=this._lruList[L];I[$++]=B.value}return I},m.prototype.reset=function(){if(this._dispose&&this._cache)for(var I in this._cache)this._dispose(I,this._cache[I].value);this._cache=Object.create(null),this._lruList=Object.create(null),this._mru=0,this._lru=0,this._length=0,this._itemCount=0},m.prototype.dump=function(){for(var I=[],$=0,L=this._mru-1;0<=L&&$<this._itemCount;L--)if(this._lruList[L]){var B=this._lruList[L];v(this,B)||(++$,I.push({k:B.key,v:B.value,e:B.now+(B.maxAge||0)}))}return I},m.prototype.dumpLru=function(){return this._lruList},m.prototype.set=function(I,$,L){L=L||this._maxAge,f(I);var B=L?Date.now():0,z=this._lengthCalculator($);if(c(this._cache,I))return z>this._max?(T(this,this._cache[I]),!1):(this._dispose&&this._dispose(I,this._cache[I].value),this._cache[I].now=B,this._cache[I].maxAge=L,this._cache[I].value=$,this._length+=z-this._cache[I].length,this._cache[I].length=z,this.get(I),this._length>this._max&&x(this),!0);var W=new _(I,$,this._mru++,z,B,L);return W.length>this._max?(this._dispose&&this._dispose(I,$),!1):(this._length+=W.length,this._lruList[W.lu]=this._cache[I]=W,this._itemCount++,this._length>this._max&&x(this),!0)},m.prototype.has=function(I){if(f(I),!c(this._cache,I))return!1;var $=this._cache[I];return!v(this,$)},m.prototype.get=function(I){return f(I),g(this,I,!0)},m.prototype.peek=function(I){return f(I),g(this,I,!1)},m.prototype.pop=function(){var I=this._lruList[this._lru];return T(this,I),I||null},m.prototype.del=function(I){f(I),T(this,this._cache[I])},m.prototype.load=function(I){this.reset();for(var $=Date.now(),L=I.length-1,B;0<=L;L--){B=I[L],f(B.k);var z=B.e||0;if(z===0)this.set(B.k,B.v);else{var W=z-$;0<W&&this.set(B.k,B.v,W)}}}})()},{}],14:[function(l,u){function c(g){var v=new f,b=v.write(g)+v.end();return b.replace(/\0/g,"").trim()}function d(g,v){if(!g)return c;try{new TextDecoder(g.trim())}catch{var b=m.exec(g);return b&&!v?d("windows-"+b[1],!0):c}return function(x){var S=new TextDecoder(g),T=S.decode(x,{stream:!0})+S.decode();return T.replace(/\0/g,"").trim()}}l("text-encoding-polyfill");var f=l("string_decoder").StringDecoder;u.exports=d;var m=/^(?:ANSI\s)?(\d+)$/m},{string_decoder:19,"text-encoding-polyfill":20}],15:[function(l,u){function c(v){var b={lastUpdated:new Date(v.readUInt8(1)+1900,v.readUInt8(2),v.readUInt8(3)),records:v.readUInt32LE(4),headerLen:v.readUInt16LE(8),recLen:v.readUInt16LE(10)};return b}function d(v,b,x){for(var S=[],T=32;T<b&&(S.push({name:x(v.slice(T,T+11)),dataType:o(v.readUInt8(T+11)),len:v.readUInt8(T+16),decimal:v.readUInt8(T+17)}),v.readUInt8(T+32)!==13);)T+=32;return S}function f(v,b,x,S,T){var _=v.slice(b,b+x),M=T(_);return S==="N"||S==="F"||S==="O"?parseFloat(M,10):S==="D"?new Date(M.slice(0,4),parseInt(M.slice(4,6),10)-1,M.slice(6,8)):S==="L"?M.toLowerCase()==="y"||M.toLowerCase()==="t":M}function m(v,b,x,S){for(var T={},_=0,M=x.length,I,$;_<M;)$=x[_],I=f(v,b,$.len,$.dataType,S),b+=$.len,typeof I<"u"&&(T[$.name]=I),_++;return T}var g=l("./decoder");u.exports=function(v,b){for(var x=g(b),S=c(v),T=d(v,S.headerLen-1,x),_=(T.length+1<<5)+2,M=S.recLen,I=S.records,$=[];I;)$.push(m(v,_,T,x)),_+=M,I--;return $}},{"./decoder":14}],16:[function(l,u){function c(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function f(B){if(T===setTimeout)return setTimeout(B,0);if((T===c||!T)&&setTimeout)return T=setTimeout,setTimeout(B,0);try{return T(B,0)}catch{try{return T.call(null,B,0)}catch{return T.call(this,B,0)}}}function m(B){if(_===clearTimeout)return clearTimeout(B);if((_===d||!_)&&clearTimeout)return _=clearTimeout,clearTimeout(B);try{return _(B)}catch{try{return _.call(null,B)}catch{return _.call(this,B)}}}function g(){I&&L&&(I=!1,L.length?M=L.concat(M):$=-1,M.length&&v())}function v(){if(!I){var B=f(g);I=!0;for(var z=M.length;z;){for(L=M,M=[];++$<z;)L&&L[$].run();$=-1,z=M.length}L=null,I=!1,m(B)}}function b(B,z){this.fun=B,this.array=z}function x(){}var S=u.exports={},T,_;(function(){try{T=typeof setTimeout=="function"?setTimeout:c}catch{T=c}try{_=typeof clearTimeout=="function"?clearTimeout:d}catch{_=d}})();var M=[],I=!1,$=-1,L;S.nextTick=function(B){var z=Array(arguments.length-1);if(1<arguments.length)for(var W=1;W<arguments.length;W++)z[W-1]=arguments[W];M.push(new b(B,z)),M.length!==1||I||f(v)},b.prototype.run=function(){this.fun.apply(null,this.array)},S.title="browser",S.browser=!0,S.env={},S.argv=[],S.version="",S.versions={},S.on=x,S.addListener=x,S.once=x,S.off=x,S.removeListener=x,S.removeAllListeners=x,S.emit=x,S.prependListener=x,S.prependOnceListener=x,S.listeners=function(){return[]},S.binding=function(){throw new Error("process.binding is not supported")},S.cwd=function(){return"/"},S.chdir=function(){throw new Error("process.chdir is not supported")},S.umask=function(){return 0}},{}],17:[function(l,u,c){(function(d,f){typeof c=="object"&&typeof u<"u"?u.exports=f():d.proj4=f()})(this,function(){var d=Math.asin,f=Math.acos,m=Number.NaN,g=Math.atan2,v=Math.round,b=Math.PI,x=Math.atan,S=Math.exp,T=Math.tan,_=Math.sin,M=Math.cos,I=Math.sqrt;function $(E,R){if(E[R])return E[R];for(var P=Object.keys(E),X=R.toLowerCase().replace(Ec,""),Y=-1,se,pe;++Y<P.length;)if(se=P[Y],pe=se.toLowerCase().replace(Ec,""),pe===X)return E[se]}function L(E){if(typeof E!="string")throw new Error("not a string");this.text=E.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function B(E){var R=new L(E);return R.output()}function z(E,R,P){Array.isArray(R)&&(P.unshift(R),R=null);var X=R?{}:E,Y=P.reduce(function(se,pe){return W(pe,se),se},X);R&&(E[R]=Y)}function W(E,R){if(!Array.isArray(E))return void(R[E]=!0);var P=E.shift();if(P==="PARAMETER"&&(P=E.shift()),E.length===1)return Array.isArray(E[0])?(R[P]={},void W(E[0],R[P])):void(R[P]=E[0]);if(!E.length)return void(R[P]=!0);if(P==="TOWGS84")return void(R[P]=E);if(P==="AXIS")return P in R||(R[P]=[]),void R[P].push(E);Array.isArray(P)||(R[P]={});var X;switch(P){case"UNIT":case"PRIMEM":case"VERT_DATUM":return R[P]={name:E[0].toLowerCase(),convert:E[1]},void(E.length===3&&W(E[2],R[P]));case"SPHEROID":case"ELLIPSOID":return R[P]={name:E[0],a:E[1],rf:E[2]},void(E.length===4&&W(E[3],R[P]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return E[0]=["name",E[0]],void z(R,P,E);default:for(X=-1;++X<E.length;)if(!Array.isArray(E[X]))return W(E,R[P]);return z(R,P,E)}}function J(E,R){var P=R[0],X=R[1];!(P in E)&&X in E&&(E[P]=E[X],R.length===3&&(E[P]=R[2](E[P])))}function K(E){return E*Qe}function Q(E){function R(he){var Ee=E.to_meter||1;return he*Ee}if(E.type==="GEOGCS"?E.projName="longlat":E.type==="LOCAL_CS"?(E.projName="identity",E.local=!0):typeof E.PROJECTION=="object"?E.projName=Object.keys(E.PROJECTION)[0]:E.projName=E.PROJECTION,E.AXIS){for(var P="",X=0,Y=E.AXIS.length,se;X<Y;++X)se=[E.AXIS[X][0].toLowerCase(),E.AXIS[X][1].toLowerCase()],se[0].indexOf("north")!==-1||(se[0]==="y"||se[0]==="lat")&&se[1]==="north"?P+="n":se[0].indexOf("south")!==-1||(se[0]==="y"||se[0]==="lat")&&se[1]==="south"?P+="s":se[0].indexOf("east")!==-1||(se[0]==="x"||se[0]==="lon")&&se[1]==="east"?P+="e":(se[0].indexOf("west")!==-1||(se[0]==="x"||se[0]==="lon")&&se[1]==="west")&&(P+="w");P.length===2&&(P+="u"),P.length===3&&(E.axis=P)}E.UNIT&&(E.units=E.UNIT.name.toLowerCase(),E.units==="metre"&&(E.units="meter"),E.UNIT.convert&&(E.type==="GEOGCS"?E.DATUM&&E.DATUM.SPHEROID&&(E.to_meter=E.UNIT.convert*E.DATUM.SPHEROID.a):E.to_meter=E.UNIT.convert));var pe=E.GEOGCS;E.type==="GEOGCS"&&(pe=E),pe&&(E.datumCode=pe.DATUM?pe.DATUM.name.toLowerCase():pe.name.toLowerCase(),E.datumCode.slice(0,2)==="d_"&&(E.datumCode=E.datumCode.slice(2)),(E.datumCode==="new_zealand_geodetic_datum_1949"||E.datumCode==="new_zealand_1949")&&(E.datumCode="nzgd49"),(E.datumCode==="wgs_1984"||E.datumCode==="world_geodetic_system_1984")&&(E.PROJECTION==="Mercator_Auxiliary_Sphere"&&(E.sphere=!0),E.datumCode="wgs84"),E.datumCode.slice(-6)==="_ferro"&&(E.datumCode=E.datumCode.slice(0,-6)),E.datumCode.slice(-8)==="_jakarta"&&(E.datumCode=E.datumCode.slice(0,-8)),~E.datumCode.indexOf("belge")&&(E.datumCode="rnb72"),pe.DATUM&&pe.DATUM.SPHEROID&&(E.ellps=pe.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),E.ellps.toLowerCase().slice(0,13)==="international"&&(E.ellps="intl"),E.a=pe.DATUM.SPHEROID.a,E.rf=parseFloat(pe.DATUM.SPHEROID.rf,10)),pe.DATUM&&pe.DATUM.TOWGS84&&(E.datum_params=pe.DATUM.TOWGS84),~E.datumCode.indexOf("osgb_1936")&&(E.datumCode="osgb36"),~E.datumCode.indexOf("osni_1952")&&(E.datumCode="osni52"),(~E.datumCode.indexOf("tm65")||~E.datumCode.indexOf("geodetic_datum_of_1965"))&&(E.datumCode="ire65"),E.datumCode==="ch1903+"&&(E.datumCode="ch1903"),~E.datumCode.indexOf("israel")&&(E.datumCode="isr93")),E.b&&!isFinite(E.b)&&(E.b=E.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",K],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",K],["x0","false_easting",R],["y0","false_northing",R],["long0","central_meridian",K],["lat0","latitude_of_origin",K],["lat0","standard_parallel_1",K],["lat1","standard_parallel_1",K],["lat2","standard_parallel_2",K],["azimuth","Azimuth"],["alpha","azimuth",K],["srsCode","name"]].forEach(function(he){return J(E,he)}),!E.long0&&E.longc&&(E.projName==="Albers_Conic_Equal_Area"||E.projName==="Lambert_Azimuthal_Equal_Area")&&(E.long0=E.longc),!E.lat_ts&&E.lat1&&(E.projName==="Stereographic_South_Pole"||E.projName==="Polar Stereographic (variant B)")&&(E.lat0=K(0<E.lat1?90:-90),E.lat_ts=E.lat1)}function y(E){var R=this;if(arguments.length===2){var P=arguments[1];y[E]=typeof P=="string"?P.charAt(0)==="+"?Ym(arguments[1]):ot(arguments[1]):P}else if(arguments.length===1){if(Array.isArray(E))return E.map(function(X){Array.isArray(X)?y.apply(R,X):y(X)});if(typeof E!="string")"EPSG"in E?y["EPSG:"+E.EPSG]=E:"ESRI"in E?y["ESRI:"+E.ESRI]=E:"IAU2000"in E?y["IAU2000:"+E.IAU2000]=E:console.log(E);else if(E in y)return y[E]}}function A(E){return typeof E=="string"}function N(E){return E in y}function j(E){return hi.some(function(R){return-1<E.indexOf(R)})}function oe(E){var R=$(E,"authority");if(R){var P=$(R,"epsg");return P&&-1<En.indexOf(P)}}function q(E){var R=$(E,"extension");return R?$(R,"proj4"):void 0}function de(E){return E[0]==="+"}function re(E){if(A(E)){if(N(E))return y[E];if(j(E)){var R=ot(E);if(oe(R))return y["EPSG:3857"];var P=q(R);return P?Ym(P):R}if(de(E))return Ym(E)}else return E}function me(){var E=this.b/this.a;this.es=1-E*E,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=I(this.es),this.lat_ts?this.sphere?this.k0=M(this.lat_ts):this.k0=Rr(this.e,_(this.lat_ts),M(this.lat_ts)):!this.k0&&(this.k?this.k0=this.k:this.k0=1)}function ve(E){return E}function _e(E,R){var P=Qm.length;return E.names?(Qm[P]=E,E.names.forEach(function(X){xu[X.toLowerCase()]=P}),this):(console.log(R),!0)}function Se(E,R,P,X){var Y=E*E,se=R*R,pe=(Y-se)/Y,he=0;X?(E*=1-pe*(t1+pe*(ii+pe*Gw)),Y=E*E,pe=0):he=I(pe);var Ee=(Y-se)/se;return{es:pe,e:he,ep2:Ee}}function Oe(E,R,P,X,Y){if(!E){var se=$(Qt,X);se||(se=HC),E=se.a,R=se.b,P=se.rf}return P&&!R&&(R=(1-1/P)*E),(P===0||n(E-R)<bt)&&(Y=!0,R=E),{a:E,b:R,rf:P,sphere:Y}}function Me(E,R,P,X,Y,se,pe){var he={};return he.datum_type=E===void 0||E==="none"?5:4,R&&(he.datum_params=R.map(parseFloat),(he.datum_params[0]!==0||he.datum_params[1]!==0||he.datum_params[2]!==0)&&(he.datum_type=1),3<he.datum_params.length&&(he.datum_params[3]!==0||he.datum_params[4]!==0||he.datum_params[5]!==0||he.datum_params[6]!==0)&&(he.datum_type=2,he.datum_params[3]*=Rs,he.datum_params[4]*=Rs,he.datum_params[5]*=Rs,he.datum_params[6]=he.datum_params[6]/1e6+1)),pe&&(he.datum_type=3,he.grids=pe),he.a=P,he.b=X,he.es=Y,he.ep2=se,he}function we(E,R){var P=new DataView(R),X=V(P),Y=D(P,X);1<Y.nSubgrids&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var se=ye(P,Y,X),pe={header:Y,subgrids:se};return eE[E]=pe,pe}function Ie(E){if(E===void 0)return null;var R=E.split(",");return R.map(Ae)}function Ae(E){if(E.length===0)return null;var R=E[0]==="@";return R&&(E=E.slice(1)),E==="null"?{name:"null",mandatory:!R,grid:null,isNull:!0}:{name:E,mandatory:!R,grid:eE[E]||null,isNull:!1}}function H(E){return E/3600*b/180}function V(E){var R=E.getInt32(8,!1);return R!==11&&(R=E.getInt32(8,!0),R!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function D(E,R){return{nFields:E.getInt32(8,R),nSubgridFields:E.getInt32(24,R),nSubgrids:E.getInt32(40,R),shiftType:ne(E,56,64).trim(),fromSemiMajorAxis:E.getFloat64(120,R),fromSemiMinorAxis:E.getFloat64(136,R),toSemiMajorAxis:E.getFloat64(152,R),toSemiMinorAxis:E.getFloat64(168,R)}}function ne(E,R,P){return o.apply(null,new Uint8Array(E.buffer.slice(R,P)))}function ye(E,R,P){for(var X=176,Y=[],se=0;se<R.nSubgrids;se++){var pe=U(E,X,P),he=le(E,X,pe,P),Ee=v(1+(pe.upperLongitude-pe.lowerLongitude)/pe.longitudeInterval),Fe=v(1+(pe.upperLatitude-pe.lowerLatitude)/pe.latitudeInterval);Y.push({ll:[H(pe.lowerLongitude),H(pe.lowerLatitude)],del:[H(pe.longitudeInterval),H(pe.latitudeInterval)],lim:[Ee,Fe],count:pe.gridNodeCount,cvs:ae(he)})}return Y}function ae(E){return E.map(function(R){return[H(R.longitudeShift),H(R.latitudeShift)]})}function U(E,R,P){return{name:ne(E,R+8,R+16).trim(),parent:ne(E,R+24,R+24+8).trim(),lowerLatitude:E.getFloat64(R+72,P),upperLatitude:E.getFloat64(R+88,P),lowerLongitude:E.getFloat64(R+104,P),upperLongitude:E.getFloat64(R+120,P),latitudeInterval:E.getFloat64(R+136,P),longitudeInterval:E.getFloat64(R+152,P),gridNodeCount:E.getInt32(R+168,P)}}function le(E,R,P,X){for(var Y=R+176,se=16,pe=[],he=0,Ee;he<P.gridNodeCount;he++)Ee={latitudeShift:E.getFloat32(Y+he*se,X),longitudeShift:E.getFloat32(Y+he*se+4,X),latitudeAccuracy:E.getFloat32(Y+he*se+8,X),longitudeAccuracy:E.getFloat32(Y+he*se+12,X)},pe.push(Ee);return pe}function ie(E,R){if(!(this instanceof ie))return new ie(E);R=R||function(Fe){if(Fe)throw Fe};var P=re(E);if(typeof P!="object")return void R(E);var X=ie.projections.get(P.projName);if(!X)return void R(E);if(P.datumCode&&P.datumCode!=="none"){var Y=$(WC,P.datumCode);Y&&(P.datum_params=P.datum_params||(Y.towgs84?Y.towgs84.split(","):null),P.ellps=Y.ellipse,P.datumName=Y.datumName?Y.datumName:P.datumCode)}P.k0=P.k0||1,P.axis=P.axis||"enu",P.ellps=P.ellps||"wgs84",P.lat1=P.lat1||P.lat0;var se=Oe(P.a,P.b,P.rf,P.ellps,P.sphere),pe=Se(se.a,se.b,se.rf,P.R_A),he=Ie(P.nadgrids),Ee=P.datum||Me(P.datumCode,P.datum_params,se.a,se.b,pe.es,pe.ep2,he);pr(this,P),pr(this,X),this.a=se.a,this.b=se.b,this.rf=se.rf,this.sphere=se.sphere,this.es=pe.es,this.e=pe.e,this.ep2=pe.ep2,this.datum=Ee,this.init(),R(null,this)}function k(E,R){return E.datum_type===R.datum_type&&!(E.a!==R.a||5e-11<n(E.es-R.es))&&(E.datum_type===1?E.datum_params[0]===R.datum_params[0]&&E.datum_params[1]===R.datum_params[1]&&E.datum_params[2]===R.datum_params[2]:E.datum_type!==2||E.datum_params[0]===R.datum_params[0]&&E.datum_params[1]===R.datum_params[1]&&E.datum_params[2]===R.datum_params[2]&&E.datum_params[3]===R.datum_params[3]&&E.datum_params[4]===R.datum_params[4]&&E.datum_params[5]===R.datum_params[5]&&E.datum_params[6]===R.datum_params[6])}function O(E,R,P){var X=E.x,Y=E.y,se=E.z?E.z:0,pe,he,Ee,Fe;if(Y<-lt&&Y>-1.001*lt)Y=-lt;else if(Y>lt&&Y<1.001*lt)Y=lt;else{if(Y<-lt)return{x:-1/0,y:-1/0,z:E.z};if(Y>lt)return{x:1/0,y:1/0,z:E.z}}return X>b&&(X-=2*b),he=_(Y),Fe=M(Y),Ee=he*he,pe=P/I(1-R*Ee),{x:(pe+se)*Fe*M(X),y:(pe+se)*Fe*_(X),z:(pe*(1-R)+se)*he}}function C(E,R,P,X){var Y=1e-12,se=E.x,pe=E.y,he=E.z?E.z:0,Ee,Fe,We,je,Ke,ft,_t,ct,Dt,pi,Ei,ri,ir,Ki,vr,Zs;if(Ee=I(se*se+pe*pe),Fe=I(se*se+pe*pe+he*he),!(Ee/P<Y))Ki=g(pe,se);else if(Ki=0,Fe/P<Y)return vr=lt,Zs=-X,{x:E.x,y:E.y,z:E.z};We=he/Fe,je=Ee/Fe,Ke=1/I(1-R*(2-R)*je*je),ct=je*(1-R)*Ke,Dt=We*Ke,ir=0;do ir++,_t=P/I(1-R*Dt*Dt),Zs=Ee*ct+he*Dt-_t*(1-R*Dt*Dt),ft=R*_t/(_t+Zs),Ke=1/I(1-ft*(2-ft)*je*je),pi=je*(1-ft)*Ke,Ei=We*Ke,ri=Ei*ct-pi*Dt,ct=pi,Dt=Ei;while(ri*ri>Y*Y&&ir<30);return vr=x(Ei/n(pi)),{x:Ki,y:vr,z:Zs}}function G(E,R,P){if(R===1)return{x:E.x+P[0],y:E.y+P[1],z:E.z+P[2]};if(R===2){var X=P[0],Y=P[1],se=P[2],pe=P[3],he=P[4],Ee=P[5],Fe=P[6];return{x:Fe*(E.x-Ee*E.y+he*E.z)+X,y:Fe*(Ee*E.x+E.y-pe*E.z)+Y,z:Fe*(-he*E.x+pe*E.y+E.z)+se}}}function Z(E,R,P){if(R===1)return{x:E.x-P[0],y:E.y-P[1],z:E.z-P[2]};if(R===2){var X=P[0],Y=P[1],se=P[2],pe=P[3],he=P[4],Ee=P[5],Fe=P[6],We=(E.x-X)/Fe,je=(E.y-Y)/Fe,Ke=(E.z-se)/Fe;return{x:We+Ee*je-he*Ke,y:-Ee*We+je+pe*Ke,z:he*We-pe*je+Ke}}}function F(E){return E===1||E===2}function te(E,R,P){if(E.grids===null||E.grids.length===0)return console.log("Grid shift grids not found"),-1;for(var X={x:-P.x,y:P.y},Y={x:m,y:m},se=[],pe=0,he;pe<E.grids.length;pe++){if(he=E.grids[pe],se.push(he.name),he.isNull){Y=X;break}if(he.grid===null){if(he.mandatory)return console.log("Unable to find mandatory grid '"+he.name+"'"),-1;continue}var Ee=he.grid.subgrids[0],Fe=(n(Ee.del[1])+n(Ee.del[0]))/1e4,We=Ee.ll[0]-Fe,je=Ee.ll[1]-Fe,Ke=Ee.ll[0]+(Ee.lim[0]-1)*Ee.del[0]+Fe,ft=Ee.ll[1]+(Ee.lim[1]-1)*Ee.del[1]+Fe;if(!(je>X.y||We>X.x||ft<X.y||Ke<X.x)&&(Y=ge(X,R,Ee),!isNaN(Y.x)))break}return isNaN(Y.x)?(console.log("Failed to find a grid shift table for location '"+-X.x*Zo+" "+X.y*Zo+" tried: '"+se+"'"),-1):(P.x=-Y.x,P.y=Y.y,0)}function ge(E,R,P){var X={x:m,y:m};if(isNaN(E.x))return X;var Y={x:E.x,y:E.y};Y.x-=P.ll[0],Y.y-=P.ll[1],Y.x=kt(Y.x-b)+b;var se=xe(Y,P);if(R){if(isNaN(se.x))return X;se.x=Y.x-se.x,se.y=Y.y-se.y;var pe=9,he=1e-12,Ee,Fe;do{if(Fe=xe(se,P),isNaN(Fe.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}Ee={x:Y.x-(Fe.x+se.x),y:Y.y-(Fe.y+se.y)},se.x+=Ee.x,se.y+=Ee.y}while(pe--&&n(Ee.x)>he&&n(Ee.y)>he);if(0>pe)return console.log("Inverse grid shift iterator failed to converge."),X;X.x=kt(se.x+P.ll[0]),X.y=se.y+P.ll[1]}else isNaN(se.x)||(X.x=E.x+se.x,X.y=E.y+se.y);return X}function xe(E,R){var P={x:E.x/R.del[0],y:E.y/R.del[1]},X={x:i(P.x),y:i(P.y)},Y={x:P.x-1*X.x,y:P.y-1*X.y},se={x:m,y:m},pe;if(0>X.x||X.x>=R.lim[0]||0>X.y||X.y>=R.lim[1])return se;pe=X.y*R.lim[0]+X.x;var he={x:R.cvs[pe][0],y:R.cvs[pe][1]};pe++;var Ee={x:R.cvs[pe][0],y:R.cvs[pe][1]};pe+=R.lim[0];var Fe={x:R.cvs[pe][0],y:R.cvs[pe][1]};pe--;var We={x:R.cvs[pe][0],y:R.cvs[pe][1]},je=Y.x*Y.y,Ke=Y.x*(1-Y.y),ft=(1-Y.x)*(1-Y.y),_t=(1-Y.x)*Y.y;return se.x=ft*he.x+Ke*Ee.x+_t*We.x+je*Fe.x,se.y=ft*he.y+Ke*Ee.y+_t*We.y+je*Fe.y,se}function fe(E){var R=Number.isFinite;if(typeof R=="function"){if(R(E))return;throw new TypeError("coordinates must be finite numbers")}if(typeof E!="number"||E!==E||!isFinite(E))throw new TypeError("coordinates must be finite numbers")}function ze(E,R){return(E.datum.datum_type===1||E.datum.datum_type===2)&&R.datumCode!=="WGS84"||(R.datum.datum_type===1||R.datum.datum_type===2)&&E.datumCode!=="WGS84"}function He(E,R,P){var X;if(Array.isArray(P)&&(P=iE(P)),rE(P),E.datum&&R.datum&&ze(E,R)&&(X=new ie("WGS84"),P=He(E,X,P),E=X),E.axis!=="enu"&&(P=tE(E,!1,P)),E.projName==="longlat")P={x:P.x*Sn,y:P.y*Sn,z:P.z||0};else if(E.to_meter&&(P={x:P.x*E.to_meter,y:P.y*E.to_meter,z:P.z||0}),P=E.inverse(P),!P)return;return E.from_greenwich&&(P.x+=E.from_greenwich),P=JC(E.datum,R.datum,P),!P?void 0:(R.from_greenwich&&(P={x:P.x-R.from_greenwich,y:P.y,z:P.z||0}),R.projName==="longlat"?P={x:P.x*Zo,y:P.y*Zo,z:P.z||0}:(P=R.forward(P),R.to_meter&&(P={x:P.x/R.to_meter,y:P.y/R.to_meter,z:P.z||0})),R.axis==="enu"?P:tE(R,!0,P))}function Xe(E,R,P){var X,Y,se;return Array.isArray(P)?(X=He(E,R,P)||{x:NaN,y:NaN},2<P.length?typeof E.name<"u"&&E.name==="geocent"||typeof R.name<"u"&&R.name==="geocent"?typeof X.z=="number"?[X.x,X.y,X.z].concat(P.splice(3)):[X.x,X.y,P[2]].concat(P.splice(3)):[X.x,X.y].concat(P.splice(2)):[X.x,X.y]):(Y=He(E,R,P),se=Object.keys(P),se.length===2||se.forEach(function(pe){if(typeof E.name<"u"&&E.name==="geocent"||typeof R.name<"u"&&R.name==="geocent"){if(pe==="x"||pe==="y"||pe==="z")return}else if(pe==="x"||pe==="y")return;Y[pe]=P[pe]}),Y)}function Ve(E){return E instanceof ie?E:E.oProj?E.oProj:ie(E)}function be(E,R,P){E=Ve(E);var X=!1,Y;return typeof R>"u"?(R=E,E=Ic,X=!0):(typeof R.x<"u"||Array.isArray(R))&&(P=R,R=E,E=Ic,X=!0),R=Ve(R),P?Xe(E,R,P):(Y={forward:function(se){return Xe(E,R,se)},inverse:function(se){return Xe(R,E,se)}},X&&(Y.oProj=R),Y)}function ke(E,R){return R=R||5,qt(gt({lat:E[1],lon:E[0]}),R)}function Ge(E){var R=Rt(gs(E.toUpperCase()));return R.lat&&R.lon?[R.lon,R.lat]:[(R.left+R.right)/2,(R.top+R.bottom)/2]}function ut(E){return E*(b/180)}function pt(E){return 180*(E/b)}function gt(E){var R=E.lat,P=E.lon,X=6378137,Y=.00669438,se=.9996,pe=ut(R),he,Ee,Fe,We,je,Ke;Ke=i((P+180)/6)+1,P===180&&(Ke=60),56<=R&&64>R&&3<=P&&12>P&&(Ke=32),72<=R&&84>R&&(0<=P&&9>P?Ke=31:9<=P&&21>P?Ke=33:21<=P&&33>P?Ke=35:33<=P&&42>P&&(Ke=37)),he=Y/(1-Y),Ee=X/I(1-Y*_(pe)*_(pe)),Fe=T(pe)*T(pe),We=he*M(pe)*M(pe),je=X*((1-Y/4-3*Y*Y/64-5*Y*Y*Y/256)*pe-(3*Y/8+3*Y*Y/32+45*Y*Y*Y/1024)*_(2*pe)+(15*Y*Y/256+45*Y*Y*Y/1024)*_(4*pe)-35*Y*Y*Y/3072*_(6*pe));var ft=se*Ee*(65+65*(65*(65*(1-Fe+We)))/6+65*(65*(65*(65*(65*(5-18*Fe+Fe*Fe+72*We-58*he)))))/120)+5e5,_t=se*(je+Ee*T(pe)*(4225/2+65*(65*(65*(65*(5-Fe+9*We+4*We*We))))/24+65*(65*(65*(65*(65*(65*(61-58*Fe+Fe*Fe+600*We-330*he))))))/720));return 0>R&&(_t+=1e7),{northing:v(_t),easting:v(ft),zoneNumber:Ke,zoneLetter:dt(R)}}function Rt(E){var R=E.northing,P=E.easting,X=E.zoneLetter,Y=E.zoneNumber;if(0>Y||60<Y)return null;var se=.9996,pe=6378137,he=.00669438,Ee=(1-I(1-he))/(1+I(1-he)),Fe=R,We,je,Ke,ft,_t,ct,Dt,pi,Ei,ri;"N">X&&(Fe-=1e7),pi=6*(Y-1)-180+3,We=he/(1-he),Dt=Fe/se,Ei=Dt/(pe*(1-he/4-3*he*he/64-5*he*he*he/256)),ri=Ei+(3*Ee/2-27*Ee*Ee*Ee/32)*_(2*Ei)+(21*Ee*Ee/16-55*Ee*Ee*Ee*Ee/32)*_(4*Ei)+151*Ee*Ee*Ee/96*_(6*Ei),je=pe/I(1-he*_(ri)*_(ri)),Ke=T(ri)*T(ri),ft=We*M(ri)*M(ri),_t=pe*(1-he)/s(1-he*_(ri)*_(ri),1.5),ct=(P-5e5)/(je*se);var ir=ri-je*T(ri)/_t*(ct*ct/2-(5+3*Ke+10*ft-4*ft*ft-9*We)*ct*ct*ct*ct/24+(61+90*Ke+298*ft+45*Ke*Ke-252*We-3*ft*ft)*ct*ct*ct*ct*ct*ct/720);ir=pt(ir);var Ki=(ct-(1+2*Ke+ft)*ct*ct*ct/6+(5-2*ft+28*Ke-3*ft*ft+8*We+24*Ke*Ke)*ct*ct*ct*ct*ct/120)/M(ri);Ki=pi+pt(Ki);var vr;if(E.accuracy){var Zs=Rt({northing:E.northing+E.accuracy,easting:E.easting+E.accuracy,zoneLetter:E.zoneLetter,zoneNumber:E.zoneNumber});vr={top:Zs.lat,right:Zs.lon,bottom:ir,left:Ki}}else vr={lat:ir,lon:Ki};return vr}function dt(E){var R="Z";return 84>=E&&72<=E?R="X":72>E&&64<=E?R="W":64>E&&56<=E?R="V":56>E&&48<=E?R="U":48>E&&40<=E?R="T":40>E&&32<=E?R="S":32>E&&24<=E?R="R":24>E&&16<=E?R="Q":16>E&&8<=E?R="P":8>E&&0<=E?R="N":0>E&&-8<=E?R="M":-8>E&&-16<=E?R="L":-16>E&&-24<=E?R="K":-24>E&&-32<=E?R="J":-32>E&&-40<=E?R="H":-40>E&&-48<=E?R="G":-48>E&&-56<=E?R="F":-56>E&&-64<=E?R="E":-64>E&&-72<=E?R="D":-72>E&&-80<=E&&(R="C"),R}function qt(E,R){var P="00000"+E.easting,X="00000"+E.northing;return E.zoneNumber+E.zoneLetter+zt(E.easting,E.northing,E.zoneNumber)+P.substr(P.length-5,R)+X.substr(X.length-5,R)}function zt(E,R,P){var X=xi(P),Y=i(E/1e5),se=i(R/1e5)%20;return Or(Y,se,X)}function xi(E){var R=E%6;return R===0&&(R=6),R}function Or(E,R,P){var X=P-1,Y="AJSAJS".charCodeAt(X),se="AFAFAF".charCodeAt(X),pe=Y+E-1,he=se+R,Ee=!1;90<pe&&(pe=pe-90+65-1,Ee=!0),(pe===73||73>Y&&73<pe||(73<pe||73>Y)&&Ee)&&pe++,(pe===79||79>Y&&79<pe||(79<pe||79>Y)&&Ee)&&(pe++,pe===73&&pe++),90<pe&&(pe=pe-90+65-1),86<he?(he=he-86+65-1,Ee=!0):Ee=!1,(he===73||73>se&&73<he||(73<he||73>se)&&Ee)&&he++,(he===79||79>se&&79<he||(79<he||79>se)&&Ee)&&(he++,he===73&&he++),86<he&&(he=he-86+65-1);var Fe=o(pe)+o(he);return Fe}function gs(E){if(E&&E.length===0)throw"MGRSPoint coverting from nothing";for(var R=E.length,P=null,X="",Y=0,se;!/[A-Z]/.test(se=E.charAt(Y));){if(2<=Y)throw"MGRSPoint bad conversion from: "+E;X+=se,Y++}var pe=parseInt(X,10);if(Y===0||Y+3>R)throw"MGRSPoint bad conversion from: "+E;var he=E.charAt(Y++);if("A">=he||he==="B"||he==="Y"||"Z"<=he||he==="I"||he==="O")throw"MGRSPoint zone letter "+he+" not handled: "+E;P=E.substring(Y,Y+=2);for(var Ee=xi(pe),Fe=Na(P.charAt(0),Ee),We=Fa(P.charAt(1),Ee);We<Da(he);)We+=2e6;var je=R-Y;if(je%2!=0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+E;var Ke=je/2,ft=0,_t=0,ct,Dt,pi,Ei,ri;return 0<Ke&&(ct=1e5/s(10,Ke),Dt=E.substring(Y,Y+Ke),ft=parseFloat(Dt)*ct,pi=E.substring(Y+Ke),_t=parseFloat(pi)*ct),Ei=ft+Fe,ri=_t+We,{easting:Ei,northing:ri,zoneLetter:he,zoneNumber:pe,accuracy:ct}}function Na(E,R){for(var P="AJSAJS".charCodeAt(R-1),X=1e5,Y=!1;P!==E.charCodeAt(0);){if(P++,P===73&&P++,P===79&&P++,90<P){if(Y)throw"Bad character: "+E;P=65,Y=!0}X+=1e5}return X}function Fa(E,R){if("V"<E)throw"MGRSPoint given invalid Northing "+E;for(var P="AFAFAF".charCodeAt(R-1),X=0,Y=!1;P!==E.charCodeAt(0);){if(P++,P===73&&P++,P===79&&P++,86<P){if(Y)throw"Bad character: "+E;P=65,Y=!0}X+=1e5}return X}function Da(E){var R;if(R=E==="C"?11e5:E==="D"?2e6:E==="E"?28e5:E==="F"?37e5:E==="G"?46e5:E==="H"?55e5:E==="J"?64e5:E==="K"?73e5:E==="L"?82e5:E==="M"?91e5:E==="N"?0:E==="P"?8e5:E==="Q"?17e5:E==="R"?26e5:E==="S"?35e5:E==="T"?44e5:E==="U"?53e5:E==="V"?62e5:E==="W"?7e6:E==="X"?79e5:-1,0<=R)return R;throw"Invalid zone letter: "+E}function Cl(E,R,P){if(!(this instanceof Cl))return new Cl(E,R,P);if(Array.isArray(E))this.x=E[0],this.y=E[1],this.z=E[2]||0;else if(typeof E=="object")this.x=E.x,this.y=E.y,this.z=E.z||0;else if(typeof E=="string"&&typeof R>"u"){var X=E.split(",");this.x=parseFloat(X[0],10),this.y=parseFloat(X[1],10),this.z=parseFloat(X[2],10)||0}else this.x=E,this.y=R,this.z=P||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}function _p(E){var R=typeof E.PROJECTION=="object"?Object.keys(E.PROJECTION)[0]:E.PROJECTION;return"no_uoff"in E||"no_off"in E||["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(R)!==-1}function Be(){var E=Math.pi,R=0,P=0,X=0,Y=0,se=0,pe=0,he=0,Ee,Fe,We,je,Ke,ft,_t,ct,Dt,pi,Ei;this.no_off=_p(this),this.no_rot="no_rot"in this;var ri=!1;"alpha"in this&&(ri=!0);var ir=!1;if("rectified_grid_angle"in this&&(ir=!0),ri&&(he=this.alpha),ir&&(R=this.rectified_grid_angle*Sn),ri||ir)P=this.longc;else if(X=this.long1,se=this.lat1,Y=this.long2,pe=this.lat2,n(se-pe)<=Ua||(Ee=n(se))<=Ua||n(Ee-lt)<=Ua||n(n(this.lat0)-lt)<=Ua||n(n(pe)-lt)<=Ua)throw new Error;var Ki=1-this.es;Fe=I(Ki),n(this.lat0)>bt?(ct=_(this.lat0),We=M(this.lat0),Ee=1-this.es*ct*ct,this.B=We*We,this.B=I(1+this.es*this.B*this.B/Ki),this.A=this.B*this.k0*Fe/Ee,je=this.B*Fe/(We*I(Ee)),Ke=je*je-1,0>=Ke?Ke=0:(Ke=I(Ke),0>this.lat0&&(Ke=-Ke)),this.E=Ke+=je,this.E*=s(ja(this.e,this.lat0,ct),this.B)):(this.B=1/Fe,this.A=this.k0,this.E=je=Ke=1),ri||ir?(ri?(Ei=d(_(he)/je),!ir&&(R=he)):(Ei=R,he=d(je*_(Ei))),this.lam0=P-d(.5*(Ke-1/Ke)*T(Ei))/this.B):(ft=s(ja(this.e,se,_(se)),this.B),_t=s(ja(this.e,pe,_(pe)),this.B),Ke=this.E/ft,Dt=(_t-ft)/(_t+ft),pi=this.E*this.E,pi=(pi-_t*ft)/(pi+_t*ft),Ee=X-Y,Ee<-E?Y-=Gh:Ee>E&&(Y+=Gh),this.lam0=kt(.5*(X+Y)-x(pi*T(.5*this.B*(X-Y))/Dt)/this.B),Ei=x(2*_(this.B*kt(X-this.lam0))/(Ke-1/Ke)),R=he=d(je*_(Ei))),this.singam=_(Ei),this.cosgam=M(Ei),this.sinrot=_(R),this.cosrot=M(R),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=n(this.ArB*x(I(je*je-1)/M(he))),0>this.lat0&&(this.u_0=-this.u_0)),Ke=.5*Ei,this.v_pole_n=this.ArB*r(T(Li-Ke)),this.v_pole_s=this.ArB*r(T(Li+Ke))}function Gi(E){var R=[],P;return R[0]=E*ape,P=E*E,R[0]+=P*lpe,R[1]=P*cpe,P*=E,R[0]+=P*upe,R[1]+=P*hpe,R[2]=P*dpe,R}function Jo(E,R){var P=E+E;return E+R[0]*_(P)+R[1]*_(P+P)+R[2]*_(P+P+P)}function ki(E,R,P,X){var Y;return E<bt?(X.value=tr.AREA_0,Y=0):(Y=g(R,P),n(Y)<=Li?X.value=tr.AREA_0:Y>Li&&Y<=lt+Li?(X.value=tr.AREA_1,Y-=lt):Y>lt+Li||Y<=-(lt+Li)?(X.value=tr.AREA_2,Y=0<=Y?Y-gr:Y+gr):(X.value=tr.AREA_3,Y+=lt)),Y}function vs(E,R){var P=E+R;return P<-gr?P+=Gh:P>+gr&&(P-=Gh),P}function yt(E,R,P,X){for(var Y=R,se;X&&(se=E(Y),Y-=se,!(n(se)<P));--X);return Y}var Mo=3,yr=5,Sc=6378137,_u=.0066943799901413165,Rs=484813681109536e-20,lt=b/2,t1=.16666666666666666,ii=.04722222222222222,Gw=.022156084656084655,bt=1e-10,Sn=.017453292519943295,Zo=57.29577951308232,Li=b/4,Gh=2*b,gr=3.14159265359,Ni={};Ni.greenwich=0,Ni.lisbon=-9.131906111111,Ni.paris=2.337229166667,Ni.bogota=-74.080916666667,Ni.madrid=-3.687938888889,Ni.rome=12.452333333333,Ni.bern=7.439583333333,Ni.jakarta=106.807719444444,Ni.ferro=-17.666666666667,Ni.brussels=4.367975,Ni.stockholm=18.058277777778,Ni.athens=23.7163375,Ni.oslo=10.722916666667;var i1={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},Ec=/[\s_\-\/\(\)]/g,Ym=function(E){var R={},P=E.split("+").map(function(he){return he.trim()}).filter(function(he){return he}).reduce(function(he,Ee){var Fe=Ee.split("=");return Fe.push(!0),he[Fe[0].toLowerCase()]=Fe[1],he},{}),X={proj:"projName",datum:"datumCode",rf:function(he){R.rf=parseFloat(he)},lat_0:function(he){R.lat0=he*Sn},lat_1:function(he){R.lat1=he*Sn},lat_2:function(he){R.lat2=he*Sn},lat_ts:function(he){R.lat_ts=he*Sn},lon_0:function(he){R.long0=he*Sn},lon_1:function(he){R.long1=he*Sn},lon_2:function(he){R.long2=he*Sn},alpha:function(he){R.alpha=parseFloat(he)*Sn},gamma:function(he){R.rectified_grid_angle=parseFloat(he)},lonc:function(he){R.longc=he*Sn},x_0:function(he){R.x0=parseFloat(he)},y_0:function(he){R.y0=parseFloat(he)},k_0:function(he){R.k0=parseFloat(he)},k:function(he){R.k0=parseFloat(he)},a:function(he){R.a=parseFloat(he)},b:function(he){R.b=parseFloat(he)},r_a:function(){R.R_A=!0},zone:function(he){R.zone=parseInt(he,10)},south:function(){R.utmSouth=!0},towgs84:function(he){R.datum_params=he.split(",").map(function(Ee){return parseFloat(Ee)})},to_meter:function(he){R.to_meter=parseFloat(he)},units:function(he){R.units=he;var Ee=$(i1,he);Ee&&(R.to_meter=Ee.to_meter)},from_greenwich:function(he){R.from_greenwich=he*Sn},pm:function(he){var Ee=$(Ni,he);R.from_greenwich=(Ee||parseFloat(he))*Sn},nadgrids:function(he){he==="@null"?R.datumCode="none":R.nadgrids=he},axis:function(he){he.length===3&&"ewnsud".indexOf(he.substr(0,1))!==-1&&"ewnsud".indexOf(he.substr(1,1))!==-1&&"ewnsud".indexOf(he.substr(2,1))!==-1&&(R.axis=he)},approx:function(){R.approx=!0}},Y,se,pe;for(Y in P)se=P[Y],Y in X?(pe=X[Y],typeof pe=="function"?pe(se):R[pe]=se):R[Y]=se;return typeof R.datumCode=="string"&&R.datumCode!=="WGS84"&&(R.datumCode=R.datumCode.toLowerCase()),R},Mc=1,r1=2,n1=3,xp=4,ks=5,s1=-1,Sp=/[,\]]/,$e=/[\d\.E\-\+]/;L.prototype.readCharicter=function(){var E=this.text[this.place++];if(this.state!==xp)for(;/\s/.test(E);){if(this.place>=this.text.length)return;E=this.text[this.place++]}switch(this.state){case Mc:return this.neutral(E);case r1:return this.keyword(E);case xp:return this.quoted(E);case ks:return this.afterquote(E);case n1:return this.number(E)}},L.prototype.afterquote=function(E){if(E==='"')return this.word+='"',void(this.state=xp);if(Sp.test(E))return this.word=this.word.trim(),void this.afterItem(E);throw new Error(`havn't handled "`+E+'" in afterquote yet, index '+this.place)},L.prototype.afterItem=function(E){return E===","?(this.word!==null&&this.currentObject.push(this.word),this.word=null,void(this.state=Mc)):E==="]"?(this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Mc,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=s1))):void 0},L.prototype.number=function(E){if($e.test(E))return void(this.word+=E);if(Sp.test(E))return this.word=parseFloat(this.word),void this.afterItem(E);throw new Error(`havn't handled "`+E+'" in number yet, index '+this.place)},L.prototype.quoted=function(E){return E==='"'?void(this.state=ks):void(this.word+=E)},L.prototype.keyword=function(E){if(/[A-Za-z84]/.test(E))return void(this.word+=E);if(E==="["){var R=[];return R.push(this.word),this.level++,this.root===null?this.root=R:this.currentObject.push(R),this.stack.push(this.currentObject),this.currentObject=R,void(this.state=Mc)}if(Sp.test(E))return void this.afterItem(E);throw new Error(`havn't handled "`+E+'" in keyword yet, index '+this.place)},L.prototype.neutral=function(E){if(/[A-Za-z]/.test(E))return this.word=E,void(this.state=r1);if(E==='"')return this.word="",void(this.state=xp);if($e.test(E))return this.word=E,void(this.state=n1);if(Sp.test(E))return void this.afterItem(E);throw new Error(`havn't handled "`+E+'" in neutral yet, index '+this.place)},L.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===s1)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var Qe=.017453292519943295,ot=function(E){var R=B(E),P=R.shift(),X=R.shift();R.unshift(["name",X]),R.unshift(["type",P]);var Y={};return W(R,Y),Q(Y),Y};(function(E){E("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),E("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),E("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),E.WGS84=E["EPSG:4326"],E["EPSG:3785"]=E["EPSG:3857"],E.GOOGLE=E["EPSG:3857"],E["EPSG:900913"]=E["EPSG:3857"],E["EPSG:102113"]=E["EPSG:3857"]})(y);var hi=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],En=["3857","900913","3785","102113"],pr=function(E,R){E=E||{};var P,X;if(!R)return E;for(X in R)P=R[X],P!==void 0&&(E[X]=P);return E},Rr=function(E,R,P){var X=E*R;return P/I(1-X*X)},$l=function(E){return 0>E?-1:1},kt=function(E){return n(E)<=gr?E:E-$l(E)*Gh},ja=function(E,R,P){var X=E*P;return X=s((1-X)/(1+X),.5*E),T(.5*(lt-R))/X},Km=function(E,R){for(var P=lt-2*x(R),X=0,Y,se;15>=X;X++)if(Y=E*_(P),se=lt-2*x(R*s((1-Y)/(1+Y),.5*E))-P,P+=se,1e-10>=n(se))return P;return-9999},o1=[{init:me,forward:function(E){var R=E.x,P=E.y;if(90<P*Zo&&-90>P*Zo&&180<R*Zo&&-180>R*Zo)return null;var X,Y;if(n(n(P)-lt)<=bt)return null;if(this.sphere)X=this.x0+this.a*this.k0*kt(R-this.long0),Y=this.y0+this.a*this.k0*r(T(Li+.5*P));else{var se=_(P),pe=ja(this.e,P,se);X=this.x0+this.a*this.k0*kt(R-this.long0),Y=this.y0-this.a*this.k0*r(pe)}return E.x=X,E.y=Y,E},inverse:function(E){var R=E.x-this.x0,P=E.y-this.y0,X,Y;if(this.sphere)Y=lt-2*x(S(-P/(this.a*this.k0)));else{var se=S(-P/(this.a*this.k0));if(Y=Km(this.e,se),Y===-9999)return null}return X=kt(this.long0+R/(this.a*this.k0)),E.x=X,E.y=Y,E},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:ve,inverse:ve,names:["longlat","identity"]}],xu={},Qm=[],Qt={};Qt.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},Qt.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},Qt.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},Qt.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},Qt.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},Qt.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},Qt.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},Qt.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},Qt.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},Qt.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},Qt.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},Qt.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},Qt.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},Qt.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},Qt.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},Qt.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},Qt.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},Qt.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},Qt.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},Qt.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},Qt.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},Qt.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},Qt.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},Qt.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},Qt.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},Qt.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},Qt.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},Qt.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},Qt.hough={a:6378270,rf:297,ellipseName:"Hough"},Qt.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},Qt.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},Qt.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},Qt.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},Qt.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},Qt.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},Qt.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},Qt.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},Qt.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},Qt.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},Qt.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},Qt.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var HC=Qt.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Qt.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var WC={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},eE={};ie.projections={start:function(){o1.forEach(_e)},add:_e,get:function(E){if(!E)return!1;var R=E.toLowerCase();if(typeof xu[R]<"u"&&Qm[xu[R]])return Qm[xu[R]]}},ie.projections.start();var JC=function(E,R,P){if(k(E,R)||E.datum_type===yr||R.datum_type===yr)return P;var X=E.a,Y=E.es;if(E.datum_type===Mo){var se=te(E,!1,P);if(se!==0)return;X=Sc,Y=_u}var pe=R.a,he=R.b,Ee=R.es;if(R.datum_type===Mo&&(pe=Sc,he=6356752314e-3,Ee=_u),Y===Ee&&X===pe&&!F(E.datum_type)&&!F(R.datum_type))return P;if(P=O(P,Y,X),F(E.datum_type)&&(P=G(P,E.datum_type,E.datum_params)),F(R.datum_type)&&(P=Z(P,R.datum_type,R.datum_params)),P=C(P,Ee,pe,he),R.datum_type===Mo){var Fe=te(R,!0,P);if(Fe!==0)return}return P},tE=function(E,R,P){var X=P.x,Y=P.y,se=P.z||0,pe={},he,Ee,Fe;for(Fe=0;3>Fe;Fe++)if(!(R&&Fe===2&&P.z===void 0))switch(Fe===0?(he=X,Ee="ew".indexOf(E.axis[Fe])===-1?"y":"x"):Fe===1?(he=Y,Ee="ns".indexOf(E.axis[Fe])===-1?"x":"y"):(he=se,Ee="z"),E.axis[Fe]){case"e":pe[Ee]=he;break;case"w":pe[Ee]=-he;break;case"n":pe[Ee]=he;break;case"s":pe[Ee]=-he;break;case"u":P[Ee]!==void 0&&(pe.z=he);break;case"d":P[Ee]!==void 0&&(pe.z=-he);break;default:return null}return pe},iE=function(E){var R={x:E[0],y:E[1]};return 2<E.length&&(R.z=E[2]),3<E.length&&(R.m=E[3]),R},rE=function(E){fe(E.x),fe(E.y)},Ic=ie("WGS84");Cl.fromMGRS=function(E){return new Cl(Ge(E))},Cl.prototype.toMGRS=function(E){return ke([this.x,this.y],E)};var nE=.046875,qw=.01953125,sE=.01068115234375,a1=function(E){var R=[];R[0]=1-E*(.25+E*(nE+E*(qw+E*sE))),R[1]=E*(.75-E*(nE+E*(qw+E*sE)));var P=E*E;return R[2]=P*(.46875-E*(.013020833333333334+E*.007120768229166667)),P*=E,R[3]=P*(.3645833333333333-E*.005696614583333333),R[4]=P*E*.3076171875,R},Xm=function(E,R,P,X){return P*=R,R*=R,X[0]*E-P*(X[1]+R*(X[2]+R*(X[3]+R*X[4])))},oE=function(E,R,P){for(var X=E,Y=20;Y;--Y){var se=_(X),pe=1-R*se*se;if(pe=(Xm(X,se,M(X),P)-E)*(pe*I(pe))*(1/(1-R)),X-=pe,n(pe)<bt)return X}return X},l1={init:function(){this.x0=this.x0===void 0?0:this.x0,this.y0=this.y0===void 0?0:this.y0,this.long0=this.long0===void 0?0:this.long0,this.lat0=this.lat0===void 0?0:this.lat0,this.es&&(this.en=a1(this.es),this.ml0=Xm(this.lat0,_(this.lat0),M(this.lat0),this.en))},forward:function(E){var R=E.x,P=E.y,X=kt(R-this.long0),Y=_(P),se=M(P),pe,he,Ee;if(this.es){var We=se*X,je=s(We,2),Ke=this.ep2*s(se,2),ft=s(Ke,2),_t=n(se)>bt?T(P):0,ct=s(_t,2),Dt=s(ct,2);pe=1-this.es*s(Y,2),We/=I(pe);var pi=Xm(P,Y,se,this.en);he=this.a*(this.k0*We*(1+je/6*(1-ct+Ke+je/20*(5-18*ct+Dt+14*Ke-58*ct*Ke+je/42*(61+179*Dt-Dt*ct-479*ct)))))+this.x0,Ee=this.a*(this.k0*(pi-this.ml0+Y*X*We/2*(1+je/12*(5-ct+9*Ke+4*ft+je/30*(61+Dt-58*ct+270*Ke-330*ct*Ke+je/56*(1385+543*Dt-Dt*ct-3111*ct))))))+this.y0}else{var Fe=se*_(X);if(n(n(Fe)-1)<bt)return 93;if(he=.5*this.a*this.k0*r((1+Fe)/(1-Fe))+this.x0,Ee=se*M(X)/I(1-s(Fe,2)),Fe=n(Ee),1<=Fe){if(Fe-1>bt)return 93;Ee=0}else Ee=f(Ee);0>P&&(Ee=-Ee),Ee=this.a*this.k0*(Ee-this.lat0)+this.y0}return E.x=he,E.y=Ee,E},inverse:function(E){var R=(E.x-this.x0)*(1/this.a),P=(E.y-this.y0)*(1/this.a),X,Y,se,pe;if(this.es)if(X=this.ml0+P/this.k0,Y=oE(X,this.es,this.en),n(Y)<lt){var je=_(Y),Ke=M(Y),ft=n(Ke)>bt?T(Y):0,_t=this.ep2*s(Ke,2),ct=s(_t,2),Dt=s(ft,2),pi=s(Dt,2);X=1-this.es*s(je,2);var Ei=R*I(X)/this.k0,ri=s(Ei,2);X*=ft,se=Y-.5*(X*ri/(1-this.es))*(1-ri/12*(5+3*Dt-9*_t*Dt+_t-4*ct-ri/30*(61+90*Dt-252*_t*Dt+45*pi+46*_t-ri/56*(1385+3633*Dt+4095*pi+1574*pi*Dt)))),pe=kt(this.long0+Ei*(1-ri/6*(1+2*Dt+_t-ri/20*(5+28*Dt+24*pi+8*_t*Dt+6*_t-ri/42*(61+662*Dt+1320*pi+720*pi*Dt))))/Ke)}else se=lt*$l(P),pe=0;else{var he=S(R/this.k0),Ee=.5*(he-1/he),Fe=this.lat0+P/this.k0,We=M(Fe);X=I((1-s(We,2))/(1+s(Ee,2))),se=d(X),0>P&&(se=-se),pe=Ee===0&&We===0?0:kt(g(Ee,We)+this.long0)}return E.x=pe,E.y=se,E},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]},Hw=function(E){var R=S(E);return R=(R-1/R)/2,R},u1=function(E,R){var P=Math.max;E=n(E),R=n(R);var X=P(E,R),Y=a(E,R)/(X||1);return X*I(1+s(Y,2))},c1=function(E){var R=1+E,P=R-1;return P===0?E:E*r(R)/P},ZC=function(E){var R=n(E);return R=c1(R*(1+R/(u1(1,R)+1))),0>E?-R:R},ey=function(E,R){for(var P=2*M(2*R),X=E.length-1,Y=E[X],se=0,pe;0<=--X;)pe=-se+P*Y+E[X],se=Y,Y=pe;return R+pe*_(2*R)},YC=function(E,R){for(var P=2*M(R),X=E.length-1,Y=E[X],se=0,pe;0<=--X;)pe=-se+P*Y+E[X],se=Y,Y=pe;return _(R)*pe},KC=function(E){var R=S(E);return R=(R+1/R)/2,R},Te=function(E,R,P){for(var X=_(R),Y=M(R),se=Hw(P),pe=KC(P),he=2*Y*pe,Ee=-2*X*se,Fe=E.length-1,We=E[Fe],je=0,Ke=0,ft=0,_t,ct;0<=--Fe;)_t=Ke,ct=je,Ke=We,je=ft,We=-_t+he*Ke-Ee*je+E[Fe],ft=-ct+Ee*Ke+he*je;return he=X*pe,Ee=Y*se,[he*We-Ee*ft,he*ft+Ee*We]},qe={init:function(){if(!this.approx&&(isNaN(this.es)||0>=this.es))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(l1.init.apply(this),this.forward=l1.forward,this.inverse=l1.inverse),this.x0=this.x0===void 0?0:this.x0,this.y0=this.y0===void 0?0:this.y0,this.long0=this.long0===void 0?0:this.long0,this.lat0=this.lat0===void 0?0:this.lat0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var E=this.es/(1+I(1-this.es)),R=E/(2-E),P=R;this.cgb[0]=R*(2+R*(-2/3+R*(-2+R*(116/45+R*(26/45+R*(-2854/675)))))),this.cbg[0]=R*(-2+R*(2/3+R*(4/3+R*(-82/45+R*(32/45+R*(4642/4725)))))),P*=R,this.cgb[1]=P*(7/3+R*(-8/5+R*(-227/45+R*(2704/315+R*(2323/945))))),this.cbg[1]=P*(5/3+R*(-16/15+R*(-13/9+R*(904/315+R*(-1522/945))))),P*=R,this.cgb[2]=P*(56/15+R*(-136/35+R*(-1262/105+R*(73814/2835)))),this.cbg[2]=P*(-26/15+R*(34/21+R*(8/5+R*(-12686/2835)))),P*=R,this.cgb[3]=P*(4279/630+R*(-332/35+R*(-399572/14175))),this.cbg[3]=P*(1237/630+R*(-12/5+R*(-24832/14175))),P*=R,this.cgb[4]=P*(4174/315+R*(-144838/6237)),this.cbg[4]=P*(-734/315+R*(109598/31185)),P*=R,this.cgb[5]=P*(601676/22275),this.cbg[5]=P*(444337/155925),P=s(R,2),this.Qn=this.k0/(1+R)*(1+P*(1/4+P*(1/64+P/256))),this.utg[0]=R*(-.5+R*(2/3+R*(-37/96+R*(1/360+R*(81/512+R*(-96199/604800)))))),this.gtu[0]=R*(.5+R*(-2/3+R*(5/16+R*(41/180+R*(-127/288+R*(7891/37800)))))),this.utg[1]=P*(-1/48+R*(-1/15+R*(437/1440+R*(-46/105+R*(1118711/3870720))))),this.gtu[1]=P*(13/48+R*(-3/5+R*(557/1440+R*(281/630+R*(-1983433/1935360))))),P*=R,this.utg[2]=P*(-17/480+R*(37/840+R*(209/4480+R*(-5569/90720)))),this.gtu[2]=P*(61/240+R*(-103/140+R*(15061/26880+R*(167603/181440)))),P*=R,this.utg[3]=P*(-4397/161280+R*(11/504+R*(830251/7257600))),this.gtu[3]=P*(49561/161280+R*(-179/168+R*(6601661/7257600))),P*=R,this.utg[4]=P*(-4583/161280+R*(108847/3991680)),this.gtu[4]=P*(34729/80640+R*(-3418889/1995840)),P*=R,this.utg[5]=P*(-20648693/638668800),this.gtu[5]=P*(212378941/319334400);var X=ey(this.cbg,this.lat0);this.Zb=-this.Qn*(X+YC(this.gtu,2*X))},forward:function(E){var R=kt(E.x-this.long0),P=E.y;P=ey(this.cbg,P);var X=_(P),Y=M(P),se=_(R),pe=M(R);P=g(X,pe*Y),R=g(se*Y,u1(X,Y*pe)),R=ZC(T(R));var he=Te(this.gtu,2*P,2*R);P+=he[0],R+=he[1];var Ee,Fe;return 2.623395162778>=n(R)?(Ee=this.a*(this.Qn*R)+this.x0,Fe=this.a*(this.Qn*P+this.Zb)+this.y0):(Ee=1/0,Fe=1/0),E.x=Ee,E.y=Fe,E},inverse:function(E){var R=(E.x-this.x0)*(1/this.a),P=(E.y-this.y0)*(1/this.a);P=(P-this.Zb)/this.Qn,R/=this.Qn;var X,Y;if(2.623395162778>=n(R)){var se=Te(this.utg,2*P,2*R);P+=se[0],R+=se[1],R=x(Hw(R));var pe=_(P),he=M(P),Ee=_(R),Fe=M(R);P=g(pe*Fe,u1(Ee,Fe*he)),R=g(Ee,Fe*he),X=kt(R+this.long0),Y=ey(this.cgb,P)}else X=1/0,Y=1/0;return E.x=X,E.y=Y,E},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},rt=function(E,R){if(E===void 0){if(E=i(30*(kt(R)+b)/b)+1,0>E)return 0;if(60<E)return 60}return E},Ut={init:function(){var E=rt(this.zone,this.long0);if(E===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*n(E)-183)*Sn,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,qe.init.apply(this),this.forward=qe.forward,this.inverse=qe.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},an=function(E,R){return s((1-E)/(1+E),R)},Jn={init:function(){var E=_(this.lat0),R=M(this.lat0);R*=R,this.rc=I(1-this.es)/(1-this.es*E*E),this.C=I(1+this.es*R*R/(1-this.es)),this.phic0=d(E/this.C),this.ratexp=.5*this.C*this.e,this.K=T(.5*this.phic0+Li)/(s(T(.5*this.lat0+Li),this.C)*an(this.e*E,this.ratexp))},forward:function(E){var R=E.x,P=E.y;return E.y=2*x(this.K*s(T(.5*P+Li),this.C)*an(this.e*_(P),this.ratexp))-lt,E.x=this.C*R,E},inverse:function(E){for(var R=E.x/this.C,P=E.y,X=s(T(.5*P+Li)/this.K,1/this.C),Y=20;0<Y&&(P=2*x(X*an(this.e*_(E.y),-.5*this.e))-lt,!(n(P-E.y)<1e-14));--Y)E.y=P;return Y?(E.x=R,E.y=P,E):null},names:["gauss"]},Yo={init:function(){Jn.init.apply(this),this.rc&&(this.sinc0=_(this.phic0),this.cosc0=M(this.phic0),this.R2=2*this.rc,!this.title&&(this.title="Oblique Stereographic Alternative"))},forward:function(E){var R,P,X,Y;return E.x=kt(E.x-this.long0),Jn.forward.apply(this,[E]),R=_(E.y),P=M(E.y),X=M(E.x),Y=this.k0*this.R2/(1+this.sinc0*R+this.cosc0*P*X),E.x=Y*P*_(E.x),E.y=Y*(this.cosc0*R-this.sinc0*P*X),E.x=this.a*E.x+this.x0,E.y=this.a*E.y+this.y0,E},inverse:function(E){var R,P,X,Y,se;if(E.x=(E.x-this.x0)/this.a,E.y=(E.y-this.y0)/this.a,E.x/=this.k0,E.y/=this.k0,se=I(E.x*E.x+E.y*E.y)){var pe=2*g(se,this.R2);R=_(pe),P=M(pe),Y=d(P*this.sinc0+E.y*R*this.cosc0/se),X=g(E.x*R,se*this.cosc0*P-E.y*this.sinc0*R)}else Y=this.phic0,X=0;return E.x=X,E.y=Y,Jn.inverse.apply(this,[E]),E.x=kt(E.x+this.long0),E},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},Ws={init:function(){this.coslat0=M(this.lat0),this.sinlat0=_(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&n(this.coslat0)<=bt&&(this.k0=.5*(1+$l(this.lat0)*_(this.lat_ts))):(n(this.coslat0)<=bt&&(0<this.lat0?this.con=1:this.con=-1),this.cons=I(s(1+this.e,1+this.e)*s(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&n(this.coslat0)<=bt&&(this.k0=.5*this.cons*Rr(this.e,_(this.lat_ts),M(this.lat_ts))/ja(this.e,this.con*this.lat_ts,this.con*_(this.lat_ts))),this.ms1=Rr(this.e,this.sinlat0,this.coslat0),this.X0=2*x(this.ssfn_(this.lat0,this.sinlat0,this.e))-lt,this.cosX0=M(this.X0),this.sinX0=_(this.X0))},forward:function(E){var R=E.x,P=E.y,X=_(P),Y=M(P),se=kt(R-this.long0),pe,he,Ee,Fe,We;return n(n(R-this.long0)-b)<=bt&&n(P+this.lat0)<=bt?(E.x=NaN,E.y=NaN,E):this.sphere?(2*this.k0/(1+this.sinlat0*X+this.coslat0*Y*M(se)),E.x=65*this.a*Y*_(se)+this.x0,E.y=65*this.a*(this.coslat0*X-this.sinlat0*Y*M(se))+this.y0,E):(pe=2*x(this.ssfn_(P,X,this.e))-lt,Ee=M(pe),he=_(pe),n(this.coslat0)<=bt?(Fe=ja(this.e,P*this.con,this.con*X),We=2*this.a*this.k0*Fe/this.cons,E.x=this.x0+We*_(R-this.long0),E.y=this.y0-this.con*We*M(R-this.long0),E):(n(this.sinlat0)<bt?(2*this.a*this.k0/(1+Ee*M(se)),E.y=65*he):(2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*he+this.cosX0*Ee*M(se))),E.y=65*(this.cosX0*he-this.sinX0*Ee*M(se))+this.y0),E.x=65*Ee*_(se)+this.x0,E))},inverse:function(E){E.x-=this.x0,E.y-=this.y0;var R=I(E.x*E.x+E.y*E.y),P,X,Y,se,pe;if(this.sphere){var he=2*x(R/(2*this.a*this.k0));return P=this.long0,X=this.lat0,R<=bt?(E.x=P,E.y=X,E):(X=d(M(he)*this.sinlat0+E.y*_(he)*this.coslat0/R),P=n(this.coslat0)<bt?0<this.lat0?kt(this.long0+g(E.x,-1*E.y)):kt(this.long0+g(E.x,E.y)):kt(this.long0+g(E.x*_(he),R*this.coslat0*M(he)-E.y*this.sinlat0*_(he))),E.x=P,E.y=X,E)}if(n(this.coslat0)<=bt){if(R<=bt)return X=this.lat0,P=this.long0,E.x=P,E.y=X,E;E.x*=this.con,E.y*=this.con,Y=R*this.cons/(2*this.a*this.k0),X=this.con*Km(this.e,Y),P=this.con*kt(this.con*this.long0+g(E.x,-1*E.y))}else se=2*x(R*this.cosX0/(2*this.a*this.k0*this.ms1)),P=this.long0,R<=bt?pe=this.X0:(pe=d(M(se)*this.sinX0+E.y*_(se)*this.cosX0/R),P=kt(this.long0+g(E.x*_(se),R*this.cosX0*M(se)-E.y*this.sinX0*_(se)))),X=-1*Km(this.e,T(.5*(lt+pe)));return E.x=P,E.y=X,E},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(E,R,P){return R*=P,T(.5*(lt+E))*s((1-R)/(1+R),.5*P)}},aE={init:function(){var E=this.lat0;this.lambda0=this.long0;var R=_(E),P=this.a,X=this.rf,Y=1/X,se=2*Y-s(Y,2),pe=this.e=I(se);this.R=this.k0*P*I(1-se)/(1-se*s(R,2)),this.alpha=I(1+se/(1-se)*s(M(E),4)),this.b0=d(R/this.alpha);var he=r(T(b/4+this.b0/2)),Ee=r(T(b/4+E/2)),Fe=r((1+pe*R)/(1-pe*R));this.K=he-this.alpha*Ee+this.alpha*pe/2*Fe},forward:function(E){var R=r(T(b/4-E.y/2)),P=this.e/2*r((1+this.e*_(E.y))/(1-this.e*_(E.y))),X=-this.alpha*(R+P)+this.K,Y=2*(x(S(X))-b/4);this.alpha*(E.x-this.lambda0);var se=x(_(73)/(_(this.b0)*T(Y)+M(this.b0)*M(73))),pe=d(M(this.b0)*_(Y)-_(this.b0)*M(Y)*M(73));return E.y=this.R/2*r((1+_(pe))/(1-_(pe)))+this.y0,E.x=this.R*se+this.x0,E},inverse:function(E){for(var R=E.x-this.x0,P=E.y-this.y0,X=R/this.R,Y=2*(x(S(P/this.R))-b/4),se=d(M(this.b0)*_(Y)+_(this.b0)*M(Y)*M(X)),pe=x(_(X)/(M(this.b0)*M(X)-_(this.b0)*T(Y))),he=this.lambda0+73/this.alpha,Ee=0,Fe=se,We=-1e3,je=0;1e-7<n(Fe-We);){if(20<++je)return;Ee=1/this.alpha*(r(T(b/4+se/2))-this.K)+this.e*r(T(b/4+d(this.e*_(Fe))/2)),We=Fe,Fe=2*x(S(Ee))-b/2}return E.x=he,E.y=Fe,E},names:["somerc"]},Ua=1e-7,lE={init:Be,forward:function(E){var R={},P,X,Y,se,pe,he,Ee;if(E.x-=this.lam0,n(n(E.y)-lt)>bt){if(se=this.E/s(ja(this.e,E.y,_(E.y)),this.B),pe=1/se,P=.5*(se-pe),X=.5*(se+pe),_(this.B*E.x),Y=(P*this.singam-86*this.cosgam)/X,n(n(Y)-1)<bt)throw new Error;Ee=.5*this.ArB*r((1-Y)/(1+Y)),pe=M(this.B*E.x),he=n(pe)<Ua?this.A*E.x:this.ArB*g(P*this.cosgam+86*this.singam,pe)}else Ee=0<E.y?this.v_pole_n:this.v_pole_s,he=this.ArB*E.y;return this.no_rot?(R.x=he,R.y=Ee):(he-=this.u_0,R.x=Ee*this.cosrot+he*this.sinrot,R.y=he*this.cosrot-Ee*this.sinrot),R.x=this.a*R.x+this.x0,R.y=this.a*R.y+this.y0,R},inverse:function(E){var R={},P,X,Y,se,pe,he,Ee;if(E.x=(E.x-this.x0)*(1/this.a),E.y=(E.y-this.y0)*(1/this.a),this.no_rot?(X=E.y,P=E.x):(X=E.x*this.cosrot-E.y*this.sinrot,P=E.y*this.cosrot+E.x*this.sinrot+this.u_0),Y=S(-this.BrA*X),se=.5*(Y-1/Y),pe=.5*(Y+1/Y),he=_(this.BrA*P),Ee=(he*this.cosgam+se*this.singam)/pe,n(n(Ee)-1)<bt)R.x=0,R.y=0>Ee?-lt:lt;else{if(R.y=this.E/I((1+Ee)/(1-Ee)),R.y=Km(this.e,s(R.y,1/this.B)),R.y===1/0)throw new Error;R.x=-this.rB*g(se*this.cosgam-he*this.singam,M(this.BrA*P))}return R.x+=this.lam0,R},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},uE={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(n(this.lat1+this.lat2)<bt)){var E=this.b/this.a;this.e=I(1-E*E);var R=_(this.lat1),P=M(this.lat1),X=Rr(this.e,R,P),Y=ja(this.e,this.lat1,R),se=_(this.lat2),pe=M(this.lat2),he=Rr(this.e,se,pe),Ee=ja(this.e,this.lat2,se),Fe=ja(this.e,this.lat0,_(this.lat0));this.ns=n(this.lat1-this.lat2)>bt?r(X/he)/r(Y/Ee):R,isNaN(this.ns)&&(this.ns=R),this.f0=X/(this.ns*s(Y,this.ns)),this.rh=this.a*this.f0*s(Fe,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(E){var R=E.x,P=E.y;n(2*n(P)-b)<=bt&&(P=$l(P)*(lt-2*bt));var X=n(n(P)-lt),Y,se;if(X>bt)Y=ja(this.e,P,_(P)),se=this.a*this.f0*s(Y,this.ns);else{if(X=P*this.ns,0>=X)return null;se=0}var pe=this.ns*kt(R-this.long0);return E.x=this.k0*(se*_(pe))+this.x0,E.y=this.k0*(this.rh-se*M(pe))+this.y0,E},inverse:function(E){var R=(E.x-this.x0)/this.k0,P=this.rh-(E.y-this.y0)/this.k0,X,Y,se,pe,he;0<this.ns?(X=I(R*R+P*P),Y=1):(X=-I(R*R+P*P),Y=-1);var Ee=0;if(X!==0&&(Ee=g(Y*R,Y*P)),!(X!==0||0<this.ns))pe=-lt;else if(Y=1/this.ns,se=s(X/(this.a*this.f0),Y),pe=Km(this.e,se),pe===-9999)return null;return he=kt(Ee/this.ns+this.long0),E.x=he,E.y=pe,E},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc"]},cE={init:function(){this.a=6377397155e-3,this.es=.006674372230614,this.e=I(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=I(this.e2),this.alfa=I(1+this.e2*s(M(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=d(_(this.fi0)/this.alfa),this.g=s((1+this.e*_(this.fi0))/(1-this.e*_(this.fi0)),this.alfa*this.e/2),this.k=T(this.u0/2+this.s45)/s(T(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*I(1-this.e2)/(1-this.e2*s(_(this.fi0),2)),this.s0=1.37008346281555,this.n=_(this.s0),this.ro0=this.k1*this.n0/T(this.s0),this.ad=this.s90-this.uq},forward:function(E){var R=E.x,P=E.y,X=kt(R-this.long0),Y,se,pe,he,Ee,Fe,We;return Y=s((1+this.e*_(P))/(1-this.e*_(P)),this.alfa*this.e/2),se=2*(x(this.k*s(T(P/2+this.s45),this.alfa)/Y)-this.s45),pe=-X*this.alfa,he=d(M(this.ad)*_(se)+_(this.ad)*M(se)*M(pe)),Ee=d(M(se)*_(pe)/M(he)),Fe=this.n*Ee,We=this.ro0*s(T(this.s0/2+this.s45),this.n)/s(T(he/2+this.s45),this.n),E.y=We*M(Fe)/1,E.x=We*_(Fe)/1,this.czech||(E.y*=-1,E.x*=-1),E},inverse:function(E){var R=E.x,P,X,Y,se,pe,he,Ee,Fe;E.x=E.y,E.y=R,this.czech||(E.y*=-1,E.x*=-1),he=I(E.x*E.x+E.y*E.y),pe=g(E.y,E.x),se=pe/_(this.s0),Y=2*(x(s(this.ro0/he,1/this.n)*T(this.s0/2+this.s45))-this.s45),P=d(M(this.ad)*_(Y)-_(this.ad)*M(Y)*M(se)),X=d(M(Y)*_(se)/M(P)),E.x=this.long0-X/this.alfa,Ee=P,Fe=0;var We=0;do E.y=2*(x(s(this.k,-1/this.alfa)*s(T(P/2+this.s45),1/this.alfa)*s((1+this.e*_(Ee))/(1-this.e*_(Ee)),this.e/2))-this.s45),1e-10>n(Ee-E.y)&&(Fe=1),Ee=E.y,We+=1;while(Fe===0&&15>We);return 15<=We?null:E},names:["Krovak","krovak"]},Zn=function(E,R,P,X,Y){return E*Y-R*_(2*Y)+P*_(4*Y)-X*_(6*Y)},Tc=function(E){return 1-.25*E*(1+E/16*(3+1.25*E))},Ww=function(E){return .375*E*(1+.25*E*(1+.46875*E))},Jw=function(E){return .05859375*E*E*(1+.75*E)},Zw=function(E){return E*E*E*(35/3072)},h1=function(E,R,P){var X=R*P;return E/I(1-X*X)},d1=function(E){return n(E)<lt?E:E-$l(E)*b},hE=function(E,R,P,X,Y){var se,pe;se=E/R;for(var he=0;15>he;he++)if(pe=(E-(R*se-P*_(2*se)+X*_(4*se)-Y*_(6*se)))/(R-2*P*M(2*se)+4*X*M(4*se)-6*Y*M(6*se)),se+=pe,1e-10>=n(pe))return se;return NaN},ope={init:function(){this.sphere||(this.e0=Tc(this.es),this.e1=Ww(this.es),this.e2=Jw(this.es),this.e3=Zw(this.es),this.ml0=this.a*Zn(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(E){var R=E.x,P=E.y,X,Y;if(R=kt(R-this.long0),this.sphere)X=this.a*d(M(P)*_(R)),Y=this.a*(g(T(P),M(R))-this.lat0);else{var se=_(P),pe=M(P),he=h1(this.a,this.e,se),Ee=T(P)*T(P),Fe=R*M(P),We=Fe*Fe,je=this.es*pe*pe/(1-this.es),Ke=this.a*Zn(this.e0,this.e1,this.e2,this.e3,P);X=he*Fe*(1-We*Ee*(1/6-(8-Ee+8*je)*We/120)),Y=Ke-this.ml0+he*se/pe*We*(.5+(5-Ee+6*je)*We/24)}return E.x=X+this.x0,E.y=Y+this.y0,E},inverse:function(E){E.x-=this.x0,E.y-=this.y0;var R=E.x/this.a,P=E.y/this.a,X,Y;if(this.sphere){var se=P+this.lat0;X=d(_(se)*M(R)),Y=g(T(R),M(se))}else{var pe=this.ml0/this.a+P,he=hE(pe,this.e0,this.e1,this.e2,this.e3);if(n(n(he)-lt)<=bt)return E.x=this.long0,E.y=lt,0>P&&(E.y*=-1),E;var Ee=h1(this.a,this.e,_(he)),Fe=Ee*Ee*Ee/this.a/this.a*(1-this.es),We=s(T(he),2),je=R*this.a/Ee,Ke=je*je;X=he-Ee*T(he)/Fe*je*je*(.5-(1+3*We)*je*je/24),Y=je*(1-Ke*(We/3+(1+3*We)*We*Ke/15))/M(he)}return E.x=kt(Y+this.long0),E.y=d1(X),E},names:["Cassini","Cassini_Soldner","cass"]},Ep=function(E,R){var P;return 1e-7<E?(P=E*R,(1-E*E)*(R/(1-P*P)-.5/E*r((1-P)/(1+P)))):2*R},ape=.3333333333333333,lpe=.17222222222222222,upe=.10257936507936508,cpe=.06388888888888888,hpe=.0664021164021164,dpe=.016415012942191543,ppe={init:function(){var E=n(this.lat0);if(this.mode=n(E-lt)<bt?0>this.lat0?this.S_POLE:this.N_POLE:n(E)<bt?this.EQUIT:this.OBLIQ,0<this.es){var R;switch(this.qp=Ep(this.e,1),this.mmf=.5/(1-this.es),this.apa=Gi(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=I(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=I(.5*this.qp),R=_(this.lat0),this.sinb1=Ep(this.e,R)/this.qp,this.cosb1=I(1-this.sinb1*this.sinb1),this.dd=M(this.lat0)/(I(1-this.es*R*R)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=_(this.lat0),this.cosph0=M(this.lat0))},forward:function(E){var R=E.x,P=E.y,X,Y,se,pe,he,Ee,Fe,We,je,Ke;if(R=kt(R-this.long0),!this.sphere){switch(Fe=0,We=0,je=0,se=M(R),pe=_(R),he=_(P),Ee=Ep(this.e,he),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(Fe=Ee/this.qp,We=I(1-Fe*Fe)),this.mode){case this.OBLIQ:je=1+this.sinb1*Fe+this.cosb1*We*se;break;case this.EQUIT:je=1+We*se;break;case this.N_POLE:je=lt+P,Ee=this.qp-Ee;break;case this.S_POLE:je=P-lt,Ee=this.qp+Ee}if(n(je)<bt)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:je=I(2/je),Y=this.mode===this.OBLIQ?this.ymf*je*(this.cosb1*Fe-this.sinb1*We*se):(je=I(2/(1+We*se)))*Fe*this.ymf,X=this.xmf*je*We*pe;break;case this.N_POLE:case this.S_POLE:0<=Ee?(X=(je=I(Ee))*pe,Y=se*(this.mode===this.S_POLE?je:-je)):X=Y=0}}else if(he=_(P),Ke=M(P),se=M(R),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(Y=this.mode===this.EQUIT?1+Ke*se:1+this.sinph0*he+this.cosph0*Ke*se,Y<=bt)return null;Y=I(2/Y),X=Y*Ke*_(R),Y*=this.mode===this.EQUIT?he:this.cosph0*he-this.sinph0*Ke*se}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(se=-se),n(P+this.lat0)<bt)return null;Y=Li-.5*P,Y=2*(this.mode===this.S_POLE?M(Y):_(Y)),X=Y*_(R),Y*=se}return E.x=this.a*X+this.x0,E.y=this.a*Y+this.y0,E},inverse:function(E){E.x-=this.x0,E.y-=this.y0;var R=E.x/this.a,P=E.y/this.a,X,Y,se,pe,he,Ee,Fe;if(this.sphere){var We=0,je=0,Ke;if(Ke=I(R*R+P*P),Y=.5*Ke,1<Y)return null;switch(Y=2*d(Y),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(je=_(Y),We=M(Y)),this.mode){case this.EQUIT:Y=n(Ke)<=bt?0:d(P*je/Ke),R*=je,P=We*Ke;break;case this.OBLIQ:Y=n(Ke)<=bt?this.lat0:d(We*this.sinph0+P*je*this.cosph0/Ke),R*=je*this.cosph0,P=(We-_(Y)*this.sinph0)*Ke;break;case this.N_POLE:P=-P,Y=lt-Y;break;case this.S_POLE:Y-=lt}X=P===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:g(R,P)}else{if(Fe=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(R/=this.dd,P*=this.dd,Ee=I(R*R+P*P),Ee<bt)return E.x=this.long0,E.y=this.lat0,E;pe=2*d(.5*Ee/this.rq),se=M(pe),R*=pe=_(pe),this.mode===this.OBLIQ?(Fe=se*this.sinb1+P*pe*this.cosb1/Ee,he=this.qp*Fe,P=Ee*this.cosb1*se-P*this.sinb1*pe):(Fe=P*pe/Ee,he=this.qp*Fe,P=Ee*se)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(P=-P),he=R*R+P*P,!he)return E.x=this.long0,E.y=this.lat0,E;Fe=1-he/this.qp,this.mode===this.S_POLE&&(Fe=-Fe)}X=g(R,P),Y=Jo(d(Fe),this.apa)}return E.x=kt(this.long0+X),E.y=Y,E},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},Mp=function(E){return 1<n(E)&&(E=1<E?1:-1),d(E)},fpe={init:function(){n(this.lat1+this.lat2)<bt||(this.temp=this.b/this.a,this.es=1-s(this.temp,2),this.e3=I(this.es),this.sin_po=_(this.lat1),this.cos_po=M(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Rr(this.e3,this.sin_po,this.cos_po),this.qs1=Ep(this.e3,this.sin_po,this.cos_po),this.sin_po=_(this.lat2),this.cos_po=M(this.lat2),this.t2=this.sin_po,this.ms2=Rr(this.e3,this.sin_po,this.cos_po),this.qs2=Ep(this.e3,this.sin_po,this.cos_po),this.sin_po=_(this.lat0),this.cos_po=M(this.lat0),this.t3=this.sin_po,this.qs0=Ep(this.e3,this.sin_po,this.cos_po),this.ns0=n(this.lat1-this.lat2)>bt?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*I(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(E){var R=E.x,P=E.y;this.sin_phi=_(P),this.cos_phi=M(P);var X=Ep(this.e3,this.sin_phi,this.cos_phi),Y=this.a*I(this.c-this.ns0*X)/this.ns0,se=this.ns0*kt(R-this.long0),pe=Y*_(se)+this.x0,he=this.rh-Y*M(se)+this.y0;return E.x=pe,E.y=he,E},inverse:function(E){var R,P,X,Y,se,pe;return E.x-=this.x0,E.y=this.rh-E.y+this.y0,0<=this.ns0?(R=I(E.x*E.x+E.y*E.y),X=1):(R=-I(E.x*E.x+E.y*E.y),X=-1),Y=0,R!==0&&(Y=g(X*E.x,X*E.y)),X=R*this.ns0/this.a,this.sphere?pe=d((this.c-X*X)/(2*this.ns0)):(P=(this.c-X*X)/this.ns0,pe=this.phi1z(this.e3,P)),se=kt(Y/this.ns0+this.long0),E.x=se,E.y=pe,E},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(E,R){var P=Mp(.5*R),X,Y,se,pe,he;if(E<bt)return P;for(var Ee=1;25>=Ee;Ee++)if(X=_(P),Y=M(P),se=E*X,pe=1-se*se,he=.5*pe*pe/Y*(R/(1-E*E)-X/pe+.5/E*r((1-se)/(1+se))),P+=he,1e-7>=n(he))return P;return null}},mpe={init:function(){this.sin_p14=_(this.lat0),this.cos_p14=M(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(E){var R=E.x,P=E.y,X,Y,se,pe,he,Ee,Fe,We;return se=kt(R-this.long0),X=_(P),Y=M(P),pe=M(se),Ee=this.sin_p14*X+this.cos_p14*Y*pe,he=1,0<Ee||n(Ee)<=bt?(Fe=this.x0+this.a*he*Y*_(se)/Ee,We=this.y0+this.a*he*(this.cos_p14*X-this.sin_p14*Y*pe)/Ee):(Fe=this.x0+this.infinity_dist*Y*_(se),We=this.y0+this.infinity_dist*(this.cos_p14*X-this.sin_p14*Y*pe)),E.x=Fe,E.y=We,E},inverse:function(E){var R,P,X,Y,se,pe;return E.x=(E.x-this.x0)/this.a,E.y=(E.y-this.y0)/this.a,E.x/=this.k0,E.y/=this.k0,(R=I(E.x*E.x+E.y*E.y))?(Y=g(R,this.rc),P=_(Y),X=M(Y),pe=Mp(X*this.sin_p14+E.y*P*this.cos_p14/R),se=g(E.x*P,R*this.cos_p14*X-E.y*this.sin_p14*P),se=kt(this.long0+se)):(pe=this.phic0,se=0),E.x=se,E.y=pe,E},names:["gnom"]},ype=function(E,R){var P=1-(1-E*E)/(2*E)*r((1-E)/(1+E));if(1e-6>n(n(R)-P))return 0>R?-1*lt:lt;for(var X=d(.5*R),Y=0,se,pe,he,Ee;30>Y;Y++)if(pe=_(X),he=M(X),Ee=E*pe,se=s(1-Ee*Ee,2)/(2*he)*(R/(1-E*E)-pe/(1-Ee*Ee)+.5/E*r((1-Ee)/(1+Ee))),X+=se,1e-10>=n(se))return X;return NaN},gpe={init:function(){this.sphere||(this.k0=Rr(this.e,_(this.lat_ts),M(this.lat_ts)))},forward:function(E){var R=E.x,P=E.y,X=kt(R-this.long0),Y,se;if(this.sphere)Y=this.x0+this.a*X*M(this.lat_ts),se=this.y0+this.a*_(P)/M(this.lat_ts);else{var pe=Ep(this.e,_(P));Y=this.x0+this.a*this.k0*X,se=this.y0+.5*(this.a*pe)/this.k0}return E.x=Y,E.y=se,E},inverse:function(E){E.x-=this.x0,E.y-=this.y0;var R,P;return this.sphere?(R=kt(this.long0+E.x/this.a/M(this.lat_ts)),P=d(E.y/this.a*M(this.lat_ts))):(P=ype(this.e,2*E.y*this.k0/this.a),R=kt(this.long0+E.x/(this.a*this.k0))),E.x=R,E.y=P,E},names:["cea"]},vpe={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=M(this.lat_ts)},forward:function(E){var R=E.x,P=E.y,X=kt(R-this.long0),Y=d1(P-this.lat0);return E.x=this.x0+this.a*X*this.rc,E.y=this.y0+this.a*Y,E},inverse:function(E){var R=E.x,P=E.y;return E.x=kt(this.long0+(R-this.x0)/(this.a*this.rc)),E.y=d1(this.lat0+(P-this.y0)/this.a),E},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},bpe={init:function(){this.temp=this.b/this.a,this.es=1-s(this.temp,2),this.e=I(this.es),this.e0=Tc(this.es),this.e1=Ww(this.es),this.e2=Jw(this.es),this.e3=Zw(this.es),this.ml0=this.a*Zn(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(E){var R=E.x,P=E.y,X=kt(R-this.long0),Y,se,pe;if(pe=X*_(P),this.sphere)n(P)<=bt?(Y=this.a*X,se=-1*this.a*this.lat0):(Y=this.a*_(pe)/T(P),se=this.a*(d1(P-this.lat0)+(1-M(pe))/T(P)));else if(n(P)<=bt)Y=this.a*X,se=-1*this.ml0;else{var he=h1(this.a,this.e,_(P))/T(P);Y=he*_(pe),se=this.a*Zn(this.e0,this.e1,this.e2,this.e3,P)-this.ml0+he*(1-M(pe))}return E.x=Y+this.x0,E.y=se+this.y0,E},inverse:function(E){var R,P,X,Y,se,pe,he,Ee,Fe;if(X=E.x-this.x0,Y=E.y-this.y0,this.sphere)if(n(Y+this.a*this.lat0)<=bt)R=kt(X/this.a+this.long0),P=0;else{pe=this.lat0+Y/this.a,he=X*X/this.a/this.a+pe*pe,Ee=pe;var We;for(se=20;se;--se)if(We=T(Ee),Fe=-1*(pe*(Ee*We+1)-Ee-.5*(Ee*Ee+he)*We)/((Ee-pe)/We-1),Ee+=Fe,n(Fe)<=bt){P=Ee;break}R=kt(this.long0+d(X*T(Ee)/this.a)/_(P))}else if(n(Y+this.ml0)<=bt)P=0,R=kt(this.long0+X/this.a);else{pe=(this.ml0+Y)/this.a,he=X*X/this.a/this.a+pe*pe,Ee=pe;var je,Ke,ft,_t,ct;for(se=20;se;--se)if(ct=this.e*_(Ee),je=I(1-ct*ct)*T(Ee),Ke=this.a*Zn(this.e0,this.e1,this.e2,this.e3,Ee),ft=this.e0-2*this.e1*M(2*Ee)+4*this.e2*M(4*Ee)-6*this.e3*M(6*Ee),_t=Ke/this.a,Fe=(pe*(je*_t+1)-_t-.5*je*(_t*_t+he))/(this.es*_(2*Ee)*(_t*_t+he-2*pe*_t)/(4*je)+(pe-_t)*(je*ft-2/_(2*Ee))-ft),Ee-=Fe,n(Fe)<=bt){P=Ee;break}je=I(1-this.es*s(_(P),2))*T(P),R=kt(this.long0+d(X*je/this.a)/_(P))}return E.x=R,E.y=P,E},names:["Polyconic","poly"]},wpe={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(E){var R=E.x,P=E.y,X=P-this.lat0,Y=R-this.long0,se=1,pe=0,he;for(he=1;10>=he;he++)se*=1e-5*(X/Rs),pe+=this.A[he]*se;var Ee=pe,Fe=Y,We=1,je=0,Ke=0,ft=0,_t,ct;for(he=1;6>=he;he++)_t=We*Ee-je*Fe,ct=je*Ee+We*Fe,We=_t,je=ct,Ke=Ke+this.B_re[he]*We-this.B_im[he]*je,ft=ft+this.B_im[he]*We+this.B_re[he]*je;return E.x=ft*this.a+this.x0,E.y=Ke*this.a+this.y0,E},inverse:function(E){var R=E.x,P=E.y,X=R-this.x0,Y=P-this.y0,se=Y/this.a,pe=X/this.a,he=1,Ee=0,Fe=0,We=0,je,Ke,ft;for(je=1;6>=je;je++)Ke=he*se-Ee*pe,ft=Ee*se+he*pe,he=Ke,Ee=ft,Fe=Fe+this.C_re[je]*he-this.C_im[je]*Ee,We=We+this.C_im[je]*he+this.C_re[je]*Ee;for(var _t=0;_t<this.iterations;_t++){var ct=Fe,Dt=We,pi=se,Ei=pe,ri,ir;for(je=2;6>=je;je++)ri=ct*Fe-Dt*We,ir=Dt*Fe+ct*We,ct=ri,Dt=ir,pi+=(je-1)*(this.B_re[je]*ct-this.B_im[je]*Dt),Ei+=(je-1)*(this.B_im[je]*ct+this.B_re[je]*Dt);ct=1,Dt=0;var Ki=this.B_re[1],vr=this.B_im[1];for(je=2;6>=je;je++)ri=ct*Fe-Dt*We,ir=Dt*Fe+ct*We,ct=ri,Dt=ir,Ki+=je*(this.B_re[je]*ct-this.B_im[je]*Dt),vr+=je*(this.B_im[je]*ct+this.B_re[je]*Dt);var Zs=Ki*Ki+vr*vr;Fe=(pi*Ki+Ei*vr)/Zs,We=(Ei*Ki-pi*vr)/Zs}var Va=Fe,Qw=We,p1=1,f1=0;for(je=1;9>=je;je++)p1*=Va,f1+=this.D[je]*p1;var pE=this.lat0+1e5*(f1*Rs),kpe=this.long0+Qw;return E.x=kpe,E.y=pE,E},names:["New_Zealand_Map_Grid","nzmg"]},_pe={init:function(){},forward:function(E){var R=E.x,P=E.y,X=kt(R-this.long0),Y=this.x0+this.a*X,se=this.y0+1.25*(this.a*r(T(b/4+P/2.5)));return E.x=Y,E.y=se,E},inverse:function(E){E.x-=this.x0,E.y-=this.y0;var R=kt(this.long0+E.x/this.a),P=2.5*(x(S(.8*E.y/this.a))-b/4);return E.x=R,E.y=P,E},names:["Miller_Cylindrical","mill"]},xpe={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=I((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=a1(this.es)},forward:function(E){var R=E.x,P=E.y,X,Y;if(R=kt(R-this.long0),this.sphere){if(!this.m)P=this.n===1?P:d(this.n*_(P));else for(var se=this.n*_(P),pe=20,he;pe&&(he=(this.m*P+_(P)-se)/(this.m+M(P)),P-=he,!(n(he)<bt));--pe);X=this.a*this.C_x*R*(this.m+M(P)),Y=this.a*this.C_y*P}else{var Ee=_(P),Fe=M(P);Y=this.a*Xm(P,Ee,Fe,this.en),X=this.a*R*Fe/I(1-this.es*Ee*Ee)}return E.x=X,E.y=Y,E},inverse:function(E){var R,P,X,Y;return E.x-=this.x0,X=E.x/this.a,E.y-=this.y0,R=E.y/this.a,this.sphere?(R/=this.C_y,X/=this.C_x*(this.m+M(R)),this.m?R=Mp((this.m*R+_(R))/this.n):this.n!==1&&(R=Mp(_(R)/this.n)),X=kt(X+this.long0),R=d1(R)):(R=oE(E.y/this.a,this.es,this.en),Y=n(R),Y<lt?(Y=_(R),P=this.long0+E.x*I(1-this.es*Y*Y)/(this.a*M(R)),X=kt(P)):Y-bt<lt&&(X=this.long0)),E.x=X,E.y=R,E},names:["Sinusoidal","sinu"]},Spe={init:function(){},forward:function(E){for(var R=E.x,P=E.y,X=kt(R-this.long0),Y=P,se=b*_(P),pe;pe=-(Y+_(Y)-se)/(1+M(Y)),Y+=pe,!(n(pe)<bt););Y/=2,b/2-n(P)<bt&&(X=0);var he=.900316316158*this.a*X*M(Y)+this.x0,Ee=1.4142135623731*this.a*_(Y)+this.y0;return E.x=he,E.y=Ee,E},inverse:function(E){var R,P;E.x-=this.x0,E.y-=this.y0,P=E.y/(1.4142135623731*this.a),.999999999999<n(P)&&(P=.999999999999),R=d(P);var X=kt(this.long0+E.x/(.900316316158*this.a*M(R)));X<-b&&(X=-b),X>b&&(X=b),P=(2*R+_(2*R))/b,1<n(P)&&(P=1);var Y=d(P);return E.x=X,E.y=Y,E},names:["Mollweide","moll"]},Epe={init:function(){n(this.lat1+this.lat2)<bt||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-s(this.temp,2),this.e=I(this.es),this.e0=Tc(this.es),this.e1=Ww(this.es),this.e2=Jw(this.es),this.e3=Zw(this.es),this.sinphi=_(this.lat1),this.cosphi=M(this.lat1),this.ms1=Rr(this.e,this.sinphi,this.cosphi),this.ml1=Zn(this.e0,this.e1,this.e2,this.e3,this.lat1),n(this.lat1-this.lat2)<bt?this.ns=this.sinphi:(this.sinphi=_(this.lat2),this.cosphi=M(this.lat2),this.ms2=Rr(this.e,this.sinphi,this.cosphi),this.ml2=Zn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Zn(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(E){var R=E.x,P=E.y,X;if(this.sphere)X=this.a*(this.g-P);else{var Y=Zn(this.e0,this.e1,this.e2,this.e3,P);X=this.a*(this.g-Y)}var se=this.ns*kt(R-this.long0),pe=this.x0+X*_(se),he=this.y0+this.rh-X*M(se);return E.x=pe,E.y=he,E},inverse:function(E){E.x-=this.x0,E.y=this.rh-E.y+this.y0;var R,P,X,Y;0<=this.ns?(P=I(E.x*E.x+E.y*E.y),R=1):(P=-I(E.x*E.x+E.y*E.y),R=-1);var se=0;if(P!==0&&(se=g(R*E.x,R*E.y)),this.sphere)return Y=kt(this.long0+se/this.ns),X=d1(this.g-P/this.a),E.x=Y,E.y=X,E;var pe=this.g-P/this.a;return X=hE(pe,this.e0,this.e1,this.e2,this.e3),Y=kt(this.long0+se/this.ns),E.x=Y,E.y=X,E},names:["Equidistant_Conic","eqdc"]},Mpe={init:function(){this.R=this.a},forward:function(E){var R=E.x,P=E.y,X=kt(R-this.long0),Y,se;n(P)<=bt&&(Y=this.x0+this.R*X,se=this.y0);var pe=Mp(2*n(P/b));(n(X)<=bt||n(n(P)-lt)<=bt)&&(Y=this.x0,se=0<=P?this.y0+b*this.R*T(.5*pe):this.y0+b*this.R*-T(.5*pe));var he=.5*n(b/X-X/b),Ee=he*he,Fe=_(pe),We=M(pe),je=We/(Fe+We-1),Ke=je*(2/Fe-1),ft=Ke*Ke,_t=b*this.R*(he*(je-ft)+I(Ee*(je-ft)*(je-ft)-(ft+Ee)*(je*je-ft)))/(ft+Ee);0>X&&(_t=-_t),Y=this.x0+_t;var ct=Ee+je;return _t=b*this.R*(Ke*ct-he*I((ft+Ee)*(Ee+1)-ct*ct))/(ft+Ee),se=0<=P?this.y0+_t:this.y0-_t,E.x=Y,E.y=se,E},inverse:function(E){var R,P,X,Y,se,pe,he,Ee,Fe,We,je,Ke,ft;return E.x-=this.x0,E.y-=this.y0,je=b*this.R,X=E.x/je,Y=E.y/je,se=X*X+Y*Y,pe=-n(Y)*(1+se),he=pe-2*Y*Y+X*X,Ee=-2*pe+1+2*Y*Y+se*se,ft=Y*Y/Ee+(2*he*he*he/Ee/Ee/Ee-9*pe*he/Ee/Ee)/27,Fe=(pe-he*he/3/Ee)/Ee,We=2*I(-Fe/3),je=3*ft/Fe/We,1<n(je)&&(0<=je?je=1:je=-1),Ke=f(je)/3,P=0<=E.y?(-We*M(Ke+b/3)-he/3/Ee)*b:-(-We*M(Ke+b/3)-he/3/Ee)*b,R=n(X)<bt?this.long0:kt(this.long0+b*(se-1+I(1+2*(X*X-Y*Y)+se*se))/2/X),E.x=R,E.y=P,E},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},Ipe={init:function(){this.sin_p12=_(this.lat0),this.cos_p12=M(this.lat0)},forward:function(E){var R=E.x,P=E.y,X=_(E.y),Y=M(E.y),se=kt(R-this.long0),pe,he,Ee,Fe,We,je,Ke,ft,_t,ct,Dt,pi,Ei,ri,ir,Ki,vr,Zs,Va,Qw,p1,f1,pE;return this.sphere?n(this.sin_p12-1)<=bt?(E.x=this.x0+this.a*(lt-P)*_(se),E.y=this.y0-this.a*(lt-P)*M(se),E):n(this.sin_p12+1)<=bt?(E.x=this.x0+this.a*(lt+P)*_(se),E.y=this.y0+this.a*(lt+P)*M(se),E):(Zs=this.sin_p12*X+this.cos_p12*Y*M(se),Ki=f(Zs),vr=Ki?Ki/_(Ki):1,E.x=this.x0+this.a*vr*Y*_(se),E.y=this.y0+this.a*vr*(this.cos_p12*X-this.sin_p12*Y*M(se)),E):(pe=Tc(this.es),he=Ww(this.es),Ee=Jw(this.es),Fe=Zw(this.es),n(this.sin_p12-1)<=bt?(We=this.a*Zn(pe,he,Ee,Fe,lt),je=this.a*Zn(pe,he,Ee,Fe,P),E.x=this.x0+(We-je)*_(se),E.y=this.y0-(We-je)*M(se),E):n(this.sin_p12+1)<=bt?(We=this.a*Zn(pe,he,Ee,Fe,lt),je=this.a*Zn(pe,he,Ee,Fe,P),E.x=this.x0+(We+je)*_(se),E.y=this.y0+(We+je)*M(se),E):(Ke=X/Y,ft=h1(this.a,this.e,this.sin_p12),_t=h1(this.a,this.e,X),ct=x((1-this.es)*Ke+this.es*ft*this.sin_p12/(_t*Y)),Dt=g(_(se),this.cos_p12*T(ct)-this.sin_p12*M(se)),Va=Dt===0?d(this.cos_p12*_(ct)-this.sin_p12*M(ct)):n(n(Dt)-b)<=bt?-d(this.cos_p12*_(ct)-this.sin_p12*M(ct)):d(_(se)*M(ct)/_(Dt)),pi=this.e*this.sin_p12/I(1-this.es),Ei=this.e*this.cos_p12*M(Dt)/I(1-this.es),ri=pi*Ei,ir=Ei*Ei,Qw=Va*Va,p1=Qw*Va,f1=p1*Va,pE=f1*Va,Ki=ft*Va*(1-Qw*ir*(1-ir)/6+p1/8*ri*(1-2*ir)+f1/120*(ir*(4-7*ir)-3*pi*pi*(1-7*ir))-pE/48*ri),E.x=this.x0+Ki*_(Dt),E.y=this.y0+Ki*M(Dt),E))},inverse:function(E){E.x-=this.x0,E.y-=this.y0;var R,P,X,Y,se,pe,he,Ee,Fe,We,je,Ke,ft,_t,ct,Dt,pi,Ei,ri,ir,Ki,vr,Zs,Va;return this.sphere?(R=I(E.x*E.x+E.y*E.y),R>2*lt*this.a?void 0:(P=R/this.a,X=_(P),Y=M(P),se=this.long0,n(R)<=bt?pe=this.lat0:(pe=Mp(Y*this.sin_p12+E.y*X*this.cos_p12/R),he=n(this.lat0)-lt,se=n(he)<=bt?0<=this.lat0?kt(this.long0+g(E.x,-E.y)):kt(this.long0-g(-E.x,E.y)):kt(this.long0+g(E.x*X,R*this.cos_p12*Y-E.y*this.sin_p12*X))),E.x=se,E.y=pe,E)):(Ee=Tc(this.es),Fe=Ww(this.es),We=Jw(this.es),je=Zw(this.es),n(this.sin_p12-1)<=bt?(Ke=this.a*Zn(Ee,Fe,We,je,lt),R=I(E.x*E.x+E.y*E.y),ft=Ke-R,pe=hE(ft/this.a,Ee,Fe,We,je),se=kt(this.long0+g(E.x,-1*E.y)),E.x=se,E.y=pe,E):n(this.sin_p12+1)<=bt?(Ke=this.a*Zn(Ee,Fe,We,je,lt),R=I(E.x*E.x+E.y*E.y),ft=R-Ke,pe=hE(ft/this.a,Ee,Fe,We,je),se=kt(this.long0+g(E.x,E.y)),E.x=se,E.y=pe,E):(R=I(E.x*E.x+E.y*E.y),Dt=g(E.x,E.y),_t=h1(this.a,this.e,this.sin_p12),pi=M(Dt),Ei=this.e*this.cos_p12*pi,ri=-Ei*Ei/(1-this.es),ir=3*this.es*(1-ri)*this.sin_p12*this.cos_p12*pi/(1-this.es),Ki=R/_t,vr=Ki-ri*(1+ri)*s(Ki,3)/6-ir*(1+3*ri)*s(Ki,4)/24,Zs=1-ri*vr*vr/2-Ki*vr*vr*vr/6,ct=d(this.sin_p12*M(vr)+this.cos_p12*_(vr)*pi),se=kt(this.long0+d(_(Dt)*_(vr)/M(ct))),Va=_(ct),pe=g((Va-this.es*Zs*this.sin_p12)*T(ct),Va*(1-this.es)),E.x=se,E.y=pe,E))},names:["Azimuthal_Equidistant","aeqd"]},Tpe={init:function(){this.sin_p14=_(this.lat0),this.cos_p14=M(this.lat0)},forward:function(E){var R=E.x,P=E.y,X,Y,se,pe,he,Ee,Fe,We;return se=kt(R-this.long0),X=_(P),Y=M(P),pe=M(se),Ee=this.sin_p14*X+this.cos_p14*Y*pe,he=1,(0<Ee||n(Ee)<=bt)&&(Fe=this.a*he*Y*_(se),We=this.y0+this.a*he*(this.cos_p14*X-this.sin_p14*Y*pe)),E.x=Fe,E.y=We,E},inverse:function(E){var R,P,X,Y,se,pe,he;return E.x-=this.x0,E.y-=this.y0,R=I(E.x*E.x+E.y*E.y),P=Mp(R/this.a),X=_(P),Y=M(P),pe=this.long0,n(R)<=bt?(he=this.lat0,E.x=pe,E.y=he,E):(he=Mp(Y*this.sin_p14+E.y*X*this.cos_p14/R),se=n(this.lat0)-lt,n(se)<=bt?(pe=0<=this.lat0?kt(this.long0+g(E.x,-E.y)):kt(this.long0-g(-E.x,E.y)),E.x=pe,E.y=he,E):(pe=kt(this.long0+g(E.x*X,R*this.cos_p14*Y-E.y*this.sin_p14*X)),E.x=pe,E.y=he,E))},names:["ortho"]},Zr={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},tr={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4},Ape={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.face=this.lat0>=lt-Li/2?Zr.TOP:this.lat0<=-(lt-Li/2)?Zr.BOTTOM:n(this.long0)<=Li?Zr.FRONT:n(this.long0)<=lt+Li?0<this.long0?Zr.RIGHT:Zr.LEFT:Zr.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(E){var R={x:0,y:0},P={value:0},X,Y,se,pe,he,Ee;if(E.x-=this.long0,X=this.es===0?E.y:x(this.one_minus_f_squared*T(E.y)),Y=E.x,this.face===Zr.TOP)pe=lt-X,Y>=Li&&Y<=lt+Li?(P.value=tr.AREA_0,se=Y-lt):Y>lt+Li||Y<=-(lt+Li)?(P.value=tr.AREA_1,se=0<Y?Y-gr:Y+gr):Y>-(lt+Li)&&Y<=-Li?(P.value=tr.AREA_2,se=Y+lt):(P.value=tr.AREA_3,se=Y);else if(this.face===Zr.BOTTOM)pe=lt+X,Y>=Li&&Y<=lt+Li?(P.value=tr.AREA_0,se=-Y+lt):Y<Li&&Y>=-Li?(P.value=tr.AREA_1,se=-Y):Y<-Li&&Y>=-(lt+Li)?(P.value=tr.AREA_2,se=-Y-lt):(P.value=tr.AREA_3,se=0<Y?-Y+gr:-Y-gr);else{var Fe,We,je,Ke,ft,_t,ct;this.face===Zr.RIGHT?Y=vs(Y,+lt):this.face===Zr.BACK?Y=vs(Y,+gr):this.face===Zr.LEFT&&(Y=vs(Y,-lt)),Ke=_(X),ft=M(X),_t=_(Y),ct=M(Y),Fe=ft*ct,We=ft*_t,je=Ke,this.face===Zr.FRONT?(pe=f(Fe),se=ki(pe,je,We,P)):this.face===Zr.RIGHT?(pe=f(We),se=ki(pe,je,-Fe,P)):this.face===Zr.BACK?(pe=f(-Fe),se=ki(pe,je,-We,P)):this.face===Zr.LEFT?(pe=f(-We),se=ki(pe,je,Fe,P)):(pe=se=0,P.value=tr.AREA_0)}return Ee=x(12/gr*(se+f(_(se)*M(Li))-lt)),he=I((1-M(pe))/(M(Ee)*M(Ee))/(1-M(x(1/M(se))))),P.value===tr.AREA_1?Ee+=lt:P.value===tr.AREA_2?Ee+=gr:P.value===tr.AREA_3&&(Ee+=1.5*gr),R.x=he*M(Ee),R.y=he*_(Ee),R.x=R.x*this.a+this.x0,R.y=R.y*this.a+this.y0,E.x=R.x,E.y=R.y,E},inverse:function(E){var R={lam:0,phi:0},P={value:0},X,Y,se,pe,he,Ee,Fe,We,je;if(E.x=(E.x-this.x0)/this.a,E.y=(E.y-this.y0)/this.a,Y=x(I(E.x*E.x+E.y*E.y)),X=g(E.y,E.x),0<=E.x&&E.x>=n(E.y)?P.value=tr.AREA_0:0<=E.y&&E.y>=n(E.x)?(P.value=tr.AREA_1,X-=lt):0>E.x&&-E.x>=n(E.y)?(P.value=tr.AREA_2,X=0>X?X+gr:X-gr):(P.value=tr.AREA_3,X+=lt),je=gr/12*T(X),he=_(je)/(M(je)-1/I(2)),Ee=x(he),se=M(X),pe=T(Y),Fe=1-se*se*pe*pe*(1-M(x(1/M(Ee)))),-1>Fe?Fe=-1:1<Fe&&(Fe=1),this.face===Zr.TOP)We=f(Fe),R.phi=lt-We,R.lam=P.value===tr.AREA_0?Ee+lt:P.value===tr.AREA_1?0>Ee?Ee+gr:Ee-gr:P.value===tr.AREA_2?Ee-lt:Ee;else if(this.face===Zr.BOTTOM)We=f(Fe),R.phi=We-lt,R.lam=P.value===tr.AREA_0?-Ee+lt:P.value===tr.AREA_1?-Ee:P.value===tr.AREA_2?-Ee-lt:0>Ee?-Ee-gr:-Ee+gr;else{var Ke,ft,_t;Ke=Fe,je=Ke*Ke,_t=1<=je?0:I(1-je)*_(Ee),je+=_t*_t,ft=1<=je?0:I(1-je),P.value===tr.AREA_1?(je=ft,ft=-_t,_t=je):P.value===tr.AREA_2?(ft=-ft,_t=-_t):P.value===tr.AREA_3&&(je=ft,ft=_t,_t=-je),this.face===Zr.RIGHT?(je=Ke,Ke=-ft,ft=je):this.face===Zr.BACK?(Ke=-Ke,ft=-ft):this.face===Zr.LEFT&&(je=Ke,Ke=ft,ft=-je),R.phi=f(-_t)-lt,R.lam=g(ft,Ke),this.face===Zr.RIGHT?R.lam=vs(R.lam,-lt):this.face===Zr.BACK?R.lam=vs(R.lam,-gr):this.face===Zr.LEFT&&(R.lam=vs(R.lam,+lt))}if(this.es!==0){var ct,Dt,pi;ct=0>R.phi?1:0,Dt=T(R.phi),pi=this.b/I(Dt*Dt+this.one_minus_f_squared),R.phi=x(I(this.a*this.a-pi*pi)/(this.one_minus_f*pi)),ct&&(R.phi=-R.phi)}return R.lam+=this.long0,E.x=R.lam,E.y=R.phi,E},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},QC=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Yw=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],qj=.8487,Hj=1.3523,Wj=Zo/5,dE=function(E,R){return E[0]+R*(E[1]+R*(E[2]+R*E[3]))},Cpe=function(E,R){return E[1]+R*(2*E[2]+3*R*E[3])},$pe={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(E){var R=kt(E.x-this.long0),P=n(E.y),X=i(P*Wj);0>X?X=0:18<=X&&(X=17),P=Zo*(P-1/Wj*X);var Y={x:dE(QC[X],P)*R,y:dE(Yw[X],P)};return 0>E.y&&(Y.y=-Y.y),Y.x=Y.x*this.a*qj+this.x0,Y.y=Y.y*this.a*Hj+this.y0,Y},inverse:function(E){var R={x:(E.x-this.x0)/(this.a*qj),y:n(E.y-this.y0)/(this.a*Hj)};if(1<=R.y)R.x/=QC[18][0],R.y=0>E.y?-lt:lt;else{var P=i(18*R.y);for(0>P?P=0:18<=P&&(P=17);;)if(Yw[P][0]>R.y)--P;else if(Yw[P+1][0]<=R.y)++P;else break;var X=Yw[P],Y=5*(R.y-X[0])/(Yw[P+1][0]-X[0]);Y=yt(function(se){return(dE(X,se)-R.y)/Cpe(X,se)},Y,bt,100),R.x/=dE(QC[P],Y),R.y=(5*P+Y)*Sn,0>E.y&&(R.y=-R.y)}return R.x=kt(R.x+this.long0),R},names:["Robinson","robin"]},Ope={init:function(){this.name="geocent"},forward:function(E){var R=O(E,this.es,this.a);return R},inverse:function(E){var R=C(E,this.es,this.a,this.b);return R},names:["Geocentric","geocentric","geocent","Geocent"]},Js={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Kw={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}},Rpe={init:function(){if(Object.keys(Kw).forEach(function(P){if(typeof this[P]>"u")this[P]=Kw[P].def;else{if(Kw[P].num&&isNaN(this[P]))throw new Error("Invalid parameter value, must be numeric "+P+" = "+this[P]);Kw[P].num&&(this[P]=parseFloat(this[P]))}Kw[P].degrees&&(this[P]*=Sn)}.bind(this)),n(n(this.lat0)-lt)<bt?this.mode=0>this.lat0?Js.S_POLE:Js.N_POLE:n(this.lat0)<bt?this.mode=Js.EQUIT:(this.mode=Js.OBLIQ,this.sinph0=_(this.lat0),this.cosph0=M(this.lat0)),this.pn1=this.h/this.a,0>=this.pn1||1e10<this.pn1)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var E=this.tilt,R=this.azi;this.cg=M(R),this.sg=_(R),this.cw=M(E),this.sw=_(E)},forward:function(E){E.x-=this.long0;var R=_(E.y),P=M(E.y),X=M(E.x),Y,se;switch(this.mode){case Js.OBLIQ:se=this.sinph0*R+this.cosph0*P*X;break;case Js.EQUIT:se=P*X;break;case Js.S_POLE:se=-R;break;case Js.N_POLE:se=R}switch(se=this.pn1/(this.p-se),Y=se*P*_(E.x),this.mode){case Js.OBLIQ:se*=this.cosph0*R-this.sinph0*P*X;break;case Js.EQUIT:se*=R;break;case Js.N_POLE:se*=-(P*X);break;case Js.S_POLE:se*=P*X}var pe,he;return pe=se*this.cg+Y*this.sg,he=1/(pe*this.sw*this.h1+this.cw),Y=(Y*this.cg-se*this.sg)*this.cw*he,se=pe*he,E.x=Y*this.a,E.y=se*this.a,E},inverse:function(E){E.x/=this.a,E.y/=this.a;var R={x:E.x,y:E.y},P,X,Y;Y=1/(this.pn1-E.y*this.sw),P=this.pn1*E.x*Y,X=this.pn1*E.y*this.cw*Y,E.x=P*this.cg+X*this.sg,E.y=X*this.cg-P*this.sg;var se=u1(E.x,E.y);if(n(se)<bt)R.x=0,R.y=E.y;else{var pe,he;switch(he=1-se*se*this.pfact,he=(this.p-I(he))/(this.pn1/se+se/this.pn1),pe=I(1-he*he),this.mode){case Js.OBLIQ:R.y=d(pe*this.sinph0+E.y*he*this.cosph0/se),E.y=(pe-this.sinph0*_(R.y))*se,E.x*=he*this.cosph0;break;case Js.EQUIT:R.y=d(E.y*he/se),E.y=pe*se,E.x*=he;break;case Js.N_POLE:R.y=d(pe),E.y=-E.y;break;case Js.S_POLE:R.y=-d(pe)}R.x=g(E.x,E.y)}return E.x=R.x+this.long0,E.y=R.y,E},names:["Tilted_Perspective","tpers"]};return be.defaultDatum="WGS84",be.Proj=ie,be.WGS84=new be.Proj("WGS84"),be.Point=Cl,be.toPoint=iE,be.defs=y,be.nadgrid=we,be.transform=He,be.mgrs={forward:ke,inverse:function(E){var R=Rt(gs(E.toUpperCase()));return R.lat&&R.lon?[R.lon,R.lat,R.lon,R.lat]:[R.left,R.bottom,R.right,R.top]},toPoint:Ge},be.version="2.7.4",function(E){E.Proj.projections.add(l1),E.Proj.projections.add(qe),E.Proj.projections.add(Ut),E.Proj.projections.add(Yo),E.Proj.projections.add(Ws),E.Proj.projections.add(aE),E.Proj.projections.add(lE),E.Proj.projections.add(uE),E.Proj.projections.add(cE),E.Proj.projections.add(ope),E.Proj.projections.add(ppe),E.Proj.projections.add(fpe),E.Proj.projections.add(mpe),E.Proj.projections.add(gpe),E.Proj.projections.add(vpe),E.Proj.projections.add(bpe),E.Proj.projections.add(wpe),E.Proj.projections.add(_pe),E.Proj.projections.add(xpe),E.Proj.projections.add(Spe),E.Proj.projections.add(Epe),E.Proj.projections.add(Mpe),E.Proj.projections.add(Ipe),E.Proj.projections.add(Tpe),E.Proj.projections.add(Ape),E.Proj.projections.add($pe),E.Proj.projections.add(Ope),E.Proj.projections.add(Rpe)}(be),be})},{}],18:[function(l,u,c){function d(v,b){for(var x in v)b[x]=v[x]}function f(v,b,x){return g(v,b,x)}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var m=l("buffer"),g=m.Buffer;g.from&&g.alloc&&g.allocUnsafe&&g.allocUnsafeSlow?u.exports=m:(d(m,c),c.Buffer=f),f.prototype=Object.create(g.prototype),d(g,f),f.from=function(v,b,x){if(typeof v=="number")throw new TypeError("Argument must not be a number");return g(v,b,x)},f.alloc=function(v,b,x){if(typeof v!="number")throw new TypeError("Argument must be a number");var S=g(v);return b===void 0?S.fill(0):typeof x=="string"?S.fill(b,x):S.fill(b),S},f.allocUnsafe=function(v){if(typeof v!="number")throw new TypeError("Argument must be a number");return g(v)},f.allocUnsafeSlow=function(v){if(typeof v!="number")throw new TypeError("Argument must be a number");return m.SlowBuffer(v)}},{buffer:8}],19:[function(l,u,c){function d(z){if(!z)return"utf8";for(var W;;)switch(z){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return z;default:if(W)return;z=(""+z).toLowerCase(),W=!0}}function f(z){var W=d(z);if(typeof W!="string"&&(L.isEncoding===B||!B(z)))throw new Error("Unknown encoding: "+z);return W||z}function m(z){this.encoding=f(z);var W;switch(this.encoding){case"utf16le":this.text=S,this.end=T,W=4;break;case"utf8":this.fillLast=x,W=4;break;case"base64":this.text=_,this.end=M,W=3;break;default:return this.write=I,void(this.end=$)}this.lastNeed=0,this.lastTotal=0,this.lastChar=L.allocUnsafe(W)}function g(z){return 127>=z?0:z>>5==6?2:z>>4==14?3:z>>3==30?4:z>>6==2?-1:-2}function v(z,W,J){var K=W.length-1;if(K<J)return 0;var Q=g(W[K]);return 0<=Q?(0<Q&&(z.lastNeed=Q-1),Q):--K<J||Q===-2?0:(Q=g(W[K]),0<=Q?(0<Q&&(z.lastNeed=Q-2),Q):--K<J||Q===-2?0:(Q=g(W[K]),0<=Q?(0<Q&&(Q===2?Q=0:z.lastNeed=Q-3),Q):0))}function b(z,W){if((192&W[0])!=128)return z.lastNeed=0,"�";if(1<z.lastNeed&&1<W.length){if((192&W[1])!=128)return z.lastNeed=1,"�";if(2<z.lastNeed&&2<W.length&&(192&W[2])!=128)return z.lastNeed=2,"�"}}function x(z){var W=this.lastTotal-this.lastNeed,J=b(this,z);return J===void 0?this.lastNeed<=z.length?(z.copy(this.lastChar,W,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(z.copy(this.lastChar,W,0,z.length),void(this.lastNeed-=z.length)):J}function S(z,W){if((z.length-W)%2==0){var J=z.toString("utf16le",W);if(J){var K=J.charCodeAt(J.length-1);if(55296<=K&&56319>=K)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=z[z.length-2],this.lastChar[1]=z[z.length-1],J.slice(0,-1)}return J}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=z[z.length-1],z.toString("utf16le",W,z.length-1)}function T(z){var W=z&&z.length?this.write(z):"";if(this.lastNeed){var J=this.lastTotal-this.lastNeed;return W+this.lastChar.toString("utf16le",0,J)}return W}function _(z,W){var J=(z.length-W)%3;return J==0?z.toString("base64",W):(this.lastNeed=3-J,this.lastTotal=3,J==1?this.lastChar[0]=z[z.length-1]:(this.lastChar[0]=z[z.length-2],this.lastChar[1]=z[z.length-1]),z.toString("base64",W,z.length-J))}function M(z){var W=z&&z.length?this.write(z):"";return this.lastNeed?W+this.lastChar.toString("base64",0,3-this.lastNeed):W}function I(z){return z.toString(this.encoding)}function $(z){return z&&z.length?this.write(z):""}var L=l("safe-buffer").Buffer,B=L.isEncoding||function(z){switch(z=""+z,z&&z.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};c.StringDecoder=m,m.prototype.write=function(z){if(z.length===0)return"";var W,J;if(this.lastNeed){if(W=this.fillLast(z),W===void 0)return"";J=this.lastNeed,this.lastNeed=0}else J=0;return J<z.length?W?W+this.text(z,J):this.text(z,J):W||""},m.prototype.end=function(z){var W=z&&z.length?this.write(z):"";return this.lastNeed?W+"�":W},m.prototype.text=function(z,W){var J=v(this,z,W);if(!this.lastNeed)return z.toString("utf8",W);this.lastTotal=J;var K=z.length-(J-this.lastNeed);return z.copy(this.lastChar,0,K),z.toString("utf8",W,K)},m.prototype.fillLast=function(z){return this.lastNeed<=z.length?(z.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(z.copy(this.lastChar,this.lastTotal-this.lastNeed,0,z.length),void(this.lastNeed-=z.length))}},{"safe-buffer":18}],20:[function(l,u){u.exports=l("./lib/encoding.js")},{"./lib/encoding.js":21}],21:[function(l,u){(function(c){function d(G,Z,F){return Z<=G&&G<=F}function f(G,Z){return G.indexOf(Z)!==-1}function m(G){if(G===void 0)return{};if(G===Object(G))return G;throw TypeError("Could not convert argument to dictionary")}function g(G){for(var Z=G+"",F=Z.length,te=0,ge=[];te<F;){var xe=Z.charCodeAt(te);if(55296>xe||57343<xe)ge.push(xe);else if(56320<=xe&&57343>=xe)ge.push(65533);else if(55296<=xe&&56319>=xe)if(te===F-1)ge.push(65533);else{var fe=Z.charCodeAt(te+1);56320<=fe&&57343>=fe?(ge.push(65536+((1023&xe)<<10)+(1023&fe)),te+=1):ge.push(65533)}te+=1}return ge}function v(G){for(var Z="",F=0,te;F<G.length;++F)te=G[F],65535>=te?Z+=o(te):(te-=65536,Z+=o((te>>10)+55296,(1023&te)+56320));return Z}function b(G){return 0<=G&&127>=G}function x(G){this.tokens=[].slice.call(G),this.tokens.reverse()}function S(G,Z){if(G)throw TypeError("Decoder error");return Z||65533}function T(G){throw TypeError("The code point "+G+" could not be encoded.")}function _(G){return G=(G+"").trim().toLowerCase(),Object.prototype.hasOwnProperty.call(le,G)?le[G]:null}function M(G,Z){return Z&&Z[G]||null}function I(G,Z){var F=Z.indexOf(G);return F===-1?null:F}function $(G){if(!("encoding-indexes"in c))throw Error("Indexes missing. Did you forget to include encoding-indexes.js first?");return c["encoding-indexes"][G]}function L(G){if(39419<G&&189e3>G||1237575<G)return null;if(G===7457)return 59335;var Z=0,F=0,te=$("gb18030-ranges"),ge;for(ge=0;ge<te.length;++ge){var xe=te[ge];if(xe[0]<=G)Z=xe[0],F=xe[1];else break}return F+G-Z}function B(G){if(G===59335)return 7457;var Z=0,F=0,te=$("gb18030-ranges"),ge;for(ge=0;ge<te.length;++ge){var xe=te[ge];if(xe[1]<=G)Z=xe[1],F=xe[0];else break}return F+G-Z}function z(G){O=O||$("jis0208").map(function(F,te){return d(te,8272,8835)?null:F});var Z=O;return Z.indexOf(G)}function W(G){C=C||$("big5").map(function(F,te){return te<5024?null:F});var Z=C;return G===9552||G===9566||G===9569||G===9578||G===21313||G===21317?Z.lastIndexOf(G):I(G,Z)}function J(G,Z){if(!(this instanceof J))throw TypeError("Called as a function. Did you forget 'new'?");G=G===void 0?"utf-8":G+"",Z=m(Z),this._encoding=null,this._decoder=null,this._ignoreBOM=!1,this._BOMseen=!1,this._error_mode="replacement",this._do_not_flush=!1;var F=_(G);if(F===null||F.name==="replacement")throw RangeError("Unknown encoding: "+G);if(!k[F.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js first?");var te=this;return te._encoding=F,Z.fatal&&(te._error_mode="fatal"),Z.ignoreBOM&&(te._ignoreBOM=!0),Object.defineProperty||(this.encoding=te._encoding.name.toLowerCase(),this.fatal=te._error_mode==="fatal",this.ignoreBOM=te._ignoreBOM),te}function K(G,Z){if(!(this instanceof K))throw TypeError("Called as a function. Did you forget 'new'?");Z=m(Z),this._encoding=null,this._encoder=null,this._do_not_flush=!1,this._fatal=Z.fatal?"fatal":"replacement";var F=this;if(Z.NONSTANDARD_allowLegacyEncoding){G=G===void 0?"utf-8":G+"";var te=_(G);if(te===null||te.name==="replacement")throw RangeError("Unknown encoding: "+G);if(!ie[te.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js first?");F._encoding=te}else F._encoding=_("utf-8"),G!==void 0&&"console"in c&&console.warn("TextEncoder constructor called with encoding label, which is ignored.");return Object.defineProperty||(this.encoding=F._encoding.name.toLowerCase()),F}function Q(G){var Z=G.fatal,F=0,te=0,ge=0,xe=128,fe=191;this.handler=function(ze,He){if(He===-1&&ge!==0)return ge=0,S(Z);if(He===-1)return-1;if(ge===0){if(d(He,0,127))return He;if(d(He,194,223))ge=1,F=31&He;else if(d(He,224,239))He===224&&(xe=160),He===237&&(fe=159),ge=2,F=15&He;else if(d(He,240,244))He===240&&(xe=144),He===244&&(fe=143),ge=3,F=7&He;else return S(Z);return null}if(!d(He,xe,fe))return F=ge=te=0,xe=128,fe=191,ze.prepend(He),S(Z);if(xe=128,fe=191,F=F<<6|63&He,te+=1,te!==ge)return null;var Xe=F;return F=ge=te=0,Xe}}function y(G){G.fatal,this.handler=function(Z,F){if(F===-1)return-1;if(ye(F))return F;var te,ge;d(F,128,2047)?(te=1,ge=192):d(F,2048,65535)?(te=2,ge=224):d(F,65536,1114111)&&(te=3,ge=240);for(var xe=[(F>>6*te)+ge];0<te;){var fe=F>>6*(te-1);xe.push(128|63&fe),te-=1}return xe}}function A(G,Z){var F=Z.fatal;this.handler=function(te,ge){if(ge===-1)return-1;if(b(ge))return ge;var xe=G[ge-128];return xe===null?S(F):xe}}function N(G,Z){Z.fatal,this.handler=function(F,te){if(te===-1)return-1;if(ye(te))return te;var ge=I(te,G);return ge===null&&T(te),ge+128}}function j(G){var Z=G.fatal,F=0,te=0,ge=0;this.handler=function(xe,fe){if(fe===-1&&F===0&&te===0&&ge===0)return-1;fe===-1&&(F!==0||te!==0||ge!==0)&&(F=0,te=0,ge=0,S(Z));var ze;if(ge!==0){ze=null,d(fe,48,57)&&(ze=L(10*(126*(10*(F-129)+te-48)+ge-129)+fe-48));var He=[te,ge,fe];return F=0,te=0,ge=0,ze===null?(xe.prepend(He),S(Z)):ze}if(te!==0)return d(fe,129,254)?(ge=fe,null):(xe.prepend([te,fe]),F=0,te=0,S(Z));if(F!==0){if(d(fe,48,57))return te=fe,null;var Xe=F,Ve=null;F=0;var be=127>fe?64:65;return(d(fe,64,126)||d(fe,128,254))&&(Ve=190*(Xe-129)+(fe-be)),ze=Ve===null?null:M(Ve,$("gb18030")),ze===null&&b(fe)&&xe.prepend(fe),ze===null?S(Z):ze}return b(fe)?fe:fe===128?8364:d(fe,129,254)?(F=fe,null):S(Z)}}function oe(G,Z){G.fatal,this.handler=function(F,te){if(te===-1)return-1;if(ye(te))return te;if(te===58853)return T(te);if(Z&&te===8364)return 128;var ge=I(te,$("gb18030"));if(ge!==null){var xe=ne(ge/190)+129,fe=ge%190,ze=63>fe?64:65;return[xe,fe+ze]}if(Z)return T(te);ge=B(te);var He=ne(ge/10/126/10);ge-=10*(126*(10*He));var Xe=ne(ge/10/126);ge-=126*(10*Xe);var Ve=ne(ge/10),be=ge-10*Ve;return[He+129,Xe+48,Ve+129,be+48]}}function q(G){var Z=G.fatal,F=0;this.handler=function(te,ge){if(ge===-1&&F!==0)return F=0,S(Z);if(ge===-1&&F===0)return-1;if(F!==0){var xe=F,fe=null;F=0;var ze=127>ge?64:98;switch((d(ge,64,126)||d(ge,161,254))&&(fe=157*(xe-129)+(ge-ze)),fe){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}var He=fe===null?null:M(fe,$("big5"));return He===null&&b(ge)&&te.prepend(ge),He===null?S(Z):He}return b(ge)?ge:d(ge,129,254)?(F=ge,null):S(Z)}}function de(G){G.fatal,this.handler=function(Z,F){if(F===-1)return-1;if(ye(F))return F;var te=W(F);if(te===null)return T(F);var ge=ne(te/157)+129;if(161>ge)return T(F);var xe=te%157,fe=63>xe?64:98;return[ge,xe+fe]}}function re(G){var Z=G.fatal,F=!1,te=0;this.handler=function(ge,xe){if(xe===-1&&te!==0)return te=0,S(Z);if(xe===-1&&te===0)return-1;if(te===142&&d(xe,161,223))return te=0,65216+xe;if(te===143&&d(xe,161,254))return F=!0,te=xe,null;if(te!==0){var fe=te;te=0;var ze=null;return d(fe,161,254)&&d(xe,161,254)&&(ze=M(94*(fe-161)+(xe-161),$(F?"jis0212":"jis0208"))),F=!1,d(xe,161,254)||ge.prepend(xe),ze===null?S(Z):ze}return b(xe)?xe:xe===142||xe===143||d(xe,161,254)?(te=xe,null):S(Z)}}function me(G){G.fatal,this.handler=function(Z,F){if(F===-1)return-1;if(ye(F))return F;if(F===165)return 92;if(F===8254)return 126;if(d(F,65377,65439))return[142,F-65377+161];F===8722&&(F=65293);var te=I(F,$("jis0208"));if(te===null)return T(F);var ge=ne(te/94)+161;return[ge,te%94+161]}}function ve(G){var Z=G.fatal,F={ASCII:0,Roman:1,Katakana:2,LeadByte:3,TrailByte:4,EscapeStart:5,Escape:6},te=F.ASCII,ge=F.ASCII,xe=0,fe=!1;this.handler=function(ze,He){switch(te){default:case F.ASCII:return He===27?(te=F.EscapeStart,null):d(He,0,127)&&He!==14&&He!==15&&He!==27?(fe=!1,He):He===-1?-1:(fe=!1,S(Z));case F.Roman:return He===27?(te=F.EscapeStart,null):He===92?(fe=!1,165):He===126?(fe=!1,8254):d(He,0,127)&&He!==14&&He!==15&&He!==27&&He!==92&&He!==126?(fe=!1,He):He===-1?-1:(fe=!1,S(Z));case F.Katakana:return He===27?(te=F.EscapeStart,null):d(He,33,95)?(fe=!1,65344+He):He===-1?-1:(fe=!1,S(Z));case F.LeadByte:return He===27?(te=F.EscapeStart,null):d(He,33,126)?(fe=!1,xe=He,te=F.TrailByte,null):He===-1?-1:(fe=!1,S(Z));case F.TrailByte:if(He===27)return te=F.EscapeStart,S(Z);if(d(He,33,126)){te=F.LeadByte;var Xe=94*(xe-33)+He-33,Ve=M(Xe,$("jis0208"));return Ve===null?S(Z):Ve}return He===-1?(te=F.LeadByte,ze.prepend(He),S(Z)):(te=F.LeadByte,S(Z));case F.EscapeStart:return He===36||He===40?(xe=He,te=F.Escape,null):(ze.prepend(He),fe=!1,te=ge,S(Z));case F.Escape:var be=xe;xe=0;var ke=null;if(be===40&&He===66&&(ke=F.ASCII),be===40&&He===74&&(ke=F.Roman),be===40&&He===73&&(ke=F.Katakana),be===36&&(He===64||He===66)&&(ke=F.LeadByte),ke!==null){te=te=ke;var Ge=fe;return fe=!0,Ge?S(Z):null}return ze.prepend([be,He]),fe=!1,te=ge,S(Z)}}}function _e(G){G.fatal;var Z={ASCII:0,Roman:1,jis0208:2},F=Z.ASCII;this.handler=function(te,ge){if(ge===-1&&F!==Z.ASCII)return te.prepend(ge),F=Z.ASCII,[27,40,66];if(ge===-1&&F===Z.ASCII)return-1;if((F===Z.ASCII||F===Z.Roman)&&(ge===14||ge===15||ge===27))return T(65533);if(F===Z.ASCII&&ye(ge))return ge;if(F===Z.Roman&&(ye(ge)&&ge!==92&&ge!==126||ge==165||ge==8254)){if(ye(ge))return ge;if(ge===165)return 92;if(ge===8254)return 126}if(ye(ge)&&F!==Z.ASCII)return te.prepend(ge),F=Z.ASCII,[27,40,66];if((ge===165||ge===8254)&&F!==Z.Roman)return te.prepend(ge),F=Z.Roman,[27,40,74];ge===8722&&(ge=65293);var xe=I(ge,$("jis0208"));if(xe===null)return T(ge);if(F!==Z.jis0208)return te.prepend(ge),F=Z.jis0208,[27,36,66];var fe=ne(xe/94)+33;return[fe,xe%94+33]}}function Se(G){var Z=G.fatal,F=0;this.handler=function(te,ge){if(ge===-1&&F!==0)return F=0,S(Z);if(ge===-1&&F===0)return-1;if(F!==0){var xe=F,fe=null;F=0;var ze=127>ge?64:65,He=160>xe?129:193;if((d(ge,64,126)||d(ge,128,252))&&(fe=188*(xe-He)+ge-ze),d(fe,8836,10715))return 48508+fe;var Xe=fe===null?null:M(fe,$("jis0208"));return Xe===null&&b(ge)&&te.prepend(ge),Xe===null?S(Z):Xe}return b(ge)||ge===128?ge:d(ge,161,223)?65216+ge:d(ge,129,159)||d(ge,224,252)?(F=ge,null):S(Z)}}function Oe(G){G.fatal,this.handler=function(Z,F){if(F===-1)return-1;if(ye(F)||F===128)return F;if(F===165)return 92;if(F===8254)return 126;if(d(F,65377,65439))return F-65377+161;F===8722&&(F=65293);var te=z(F);if(te===null)return T(F);var ge=ne(te/188),xe=31>ge?129:193,fe=te%188,ze=63>fe?64:65;return[ge+xe,fe+ze]}}function Me(G){var Z=G.fatal,F=0;this.handler=function(te,ge){if(ge===-1&&F!==0)return F=0,S(Z);if(ge===-1&&F===0)return-1;if(F!==0){var xe=F,fe=null;F=0,d(ge,65,254)&&(fe=190*(xe-129)+(ge-65));var ze=fe===null?null:M(fe,$("euc-kr"));return fe===null&&b(ge)&&te.prepend(ge),ze===null?S(Z):ze}return b(ge)?ge:d(ge,129,254)?(F=ge,null):S(Z)}}function we(G){G.fatal,this.handler=function(Z,F){if(F===-1)return-1;if(ye(F))return F;var te=I(F,$("euc-kr"));if(te===null)return T(F);var ge=ne(te/190)+129;return[ge,te%190+65]}}function Ie(G,Z){var F=G>>8,te=255&G;return Z?[F,te]:[te,F]}function Ae(G,Z){var F=Z.fatal,te=null,ge=null;this.handler=function(xe,fe){if(fe===-1&&(te!==null||ge!==null))return S(F);if(fe===-1&&te===null&&ge===null)return-1;if(te===null)return te=fe,null;var ze;if(ze=G?(te<<8)+fe:(fe<<8)+te,te=null,ge!==null){var He=ge;return ge=null,d(ze,56320,57343)?65536+1024*(He-55296)+(ze-56320):(xe.prepend(Ie(ze,G)),S(F))}return d(ze,55296,56319)?(ge=ze,null):d(ze,56320,57343)?S(F):ze}}function H(G,Z){Z.fatal,this.handler=function(F,te){if(te===-1)return-1;if(d(te,0,65535))return Ie(te,G);var ge=Ie((te-65536>>10)+55296,G),xe=Ie((1023&te-65536)+56320,G);return ge.concat(xe)}}function V(G){G.fatal,this.handler=function(Z,F){return F===-1?-1:b(F)?F:63360+F-128}}function D(G){G.fatal,this.handler=function(Z,F){return F===-1?-1:ye(F)?F:d(F,63360,63487)?F-63360+128:T(F)}}typeof u<"u"&&u.exports&&!c["encoding-indexes"]&&l("./encoding-indexes.js");var ne=i,ye=b,ae=-1;x.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():ae},prepend:function(G){if(Array.isArray(G))for(var Z=G;Z.length;)this.tokens.push(Z.pop());else this.tokens.push(G)},push:function(G){if(Array.isArray(G))for(var Z=G;Z.length;)this.tokens.unshift(Z.shift());else this.tokens.unshift(G)}};var U=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"IBM866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"ISO-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"ISO-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"ISO-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"ISO-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"ISO-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"ISO-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:["csshiftjis","ms932","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],le={};U.forEach(function(G){G.encodings.forEach(function(Z){Z.labels.forEach(function(F){le[F]=Z})})});var ie={},k={},O,C;Object.defineProperty&&(Object.defineProperty(J.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(J.prototype,"fatal",{get:function(){return this._error_mode==="fatal"}}),Object.defineProperty(J.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}})),J.prototype.decode=function(G,Z){var F;F=typeof G=="object"&&G instanceof ArrayBuffer?new Uint8Array(G):typeof G=="object"&&"buffer"in G&&G.buffer instanceof ArrayBuffer?new Uint8Array(G.buffer,G.byteOffset,G.byteLength):new Uint8Array(0),Z=m(Z),this._do_not_flush||(this._decoder=k[this._encoding.name]({fatal:this._error_mode==="fatal"}),this._BOMseen=!1),this._do_not_flush=!!Z.stream;for(var te=new x(F),ge=[],xe,fe;fe=te.read(),fe!==ae&&(xe=this._decoder.handler(te,fe),xe!==-1);)xe!==null&&(Array.isArray(xe)?ge.push.apply(ge,xe):ge.push(xe));if(!this._do_not_flush){do{if(xe=this._decoder.handler(te,te.read()),xe===-1)break;xe!==null&&(Array.isArray(xe)?ge.push.apply(ge,xe):ge.push(xe))}while(!te.endOfStream());this._decoder=null}return function(ze){return!f(["UTF-8","UTF-16LE","UTF-16BE"],this._encoding.name)||this._ignoreBOM||this._BOMseen||(0<ze.length&&ze[0]===65279?(this._BOMseen=!0,ze.shift()):0<ze.length&&(this._BOMseen=!0)),v(ze)}.call(this,ge)},Object.defineProperty&&Object.defineProperty(K.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),K.prototype.encode=function(G,Z){G=G===void 0?"":G+"",Z=m(Z),this._do_not_flush||(this._encoder=ie[this._encoding.name]({fatal:this._fatal==="fatal"})),this._do_not_flush=!!Z.stream;for(var F=new x(g(G)),te=[],ge,xe;xe=F.read(),xe!==ae&&(ge=this._encoder.handler(F,xe),ge!==-1);)Array.isArray(ge)?te.push.apply(te,ge):te.push(ge);if(!this._do_not_flush){for(;ge=this._encoder.handler(F,F.read()),ge!==-1;)Array.isArray(ge)?te.push.apply(te,ge):te.push(ge);this._encoder=null}return new Uint8Array(te)},ie["UTF-8"]=function(G){return new y(G)},k["UTF-8"]=function(G){return new Q(G)},function(){"encoding-indexes"in c&&U.forEach(function(G){G.heading!=="Legacy single-byte encodings"||G.encodings.forEach(function(Z){var F=Z.name,te=$(F.toLowerCase());k[F]=function(ge){return new A(te,ge)},ie[F]=function(ge){return new N(te,ge)}})})}(),k.GBK=function(G){return new j(G)},ie.GBK=function(G){return new oe(G,!0)},ie.gb18030=function(G){return new oe(G)},k.gb18030=function(G){return new j(G)},ie.Big5=function(G){return new de(G)},k.Big5=function(G){return new q(G)},ie["EUC-JP"]=function(G){return new me(G)},k["EUC-JP"]=function(G){return new re(G)},ie["ISO-2022-JP"]=function(G){return new _e(G)},k["ISO-2022-JP"]=function(G){return new ve(G)},ie.Shift_JIS=function(G){return new Oe(G)},k.Shift_JIS=function(G){return new Se(G)},ie["EUC-KR"]=function(G){return new we(G)},k["EUC-KR"]=function(G){return new Me(G)},ie["UTF-16BE"]=function(G){return new H(!0,G)},k["UTF-16BE"]=function(G){return new Ae(!0,G)},ie["UTF-16LE"]=function(G){return new H(!1,G)},k["UTF-16LE"]=function(G){return new Ae(!1,G)},ie["x-user-defined"]=function(G){return new D(G)},k["x-user-defined"]=function(G){return new V(G)},c.TextEncoder||(c.TextEncoder=K),c.TextDecoder||(c.TextDecoder=J),typeof u<"u"&&u.exports&&(u.exports={TextEncoder:c.TextEncoder,TextDecoder:c.TextDecoder,EncodingIndexes:c["encoding-indexes"]})})(this||{})},{"./encoding-indexes.js":7}],22:[function(l,u,c){(function(d,f){(function(){function m(T,_){this._id=T,this._clearFn=_}var g=l("process/browser.js").nextTick,v=Function.prototype.apply,b=Array.prototype.slice,x={},S=0;c.setTimeout=function(){return new m(v.call(setTimeout,window,arguments),clearTimeout)},c.setInterval=function(){return new m(v.call(setInterval,window,arguments),clearInterval)},c.clearTimeout=c.clearInterval=function(T){T.close()},m.prototype.unref=m.prototype.ref=function(){},m.prototype.close=function(){this._clearFn.call(window,this._id)},c.enroll=function(T,_){clearTimeout(T._idleTimeoutId),T._idleTimeout=_},c.unenroll=function(T){clearTimeout(T._idleTimeoutId),T._idleTimeout=-1},c._unrefActive=c.active=function(T){clearTimeout(T._idleTimeoutId);var _=T._idleTimeout;0<=_&&(T._idleTimeoutId=setTimeout(function(){T._onTimeout&&T._onTimeout()},_))},c.setImmediate=typeof d=="function"?d:function(T){var _=S++,M=!(2>arguments.length)&&b.call(arguments,1);return x[_]=!0,g(function(){x[_]&&(M?T.apply(null,M):T.call(null),c.clearImmediate(_))}),_},c.clearImmediate=typeof f=="function"?f:function(T){delete x[T]}}).call(this)}).call(this,l("timers").setImmediate,l("timers").clearImmediate)},{"process/browser.js":16,timers:22}],23:[function(l,u){(function(c){(function(){function d(J){if(!J)throw new Error("forgot to pass buffer");return I.isBuffer(J)?J:f(J)?I.from(J):f(J.buffer)?J.BYTES_PER_ELEMENT===1?I.from(J):I.from(J.buffer):void 0}function f(J){return J instanceof c.ArrayBuffer||Object.prototype.toString.call(J)==="[object ArrayBuffer]"}function m(J,K){return typeof J=="string"&&L.has(J)?_.resolve(L.get(J)):m.getShapefile(J,K).then(function(Q){return typeof J=="string"&&L.set(J,Q),Q})}async function g(J,K){const Q=await x(J);return m.parseZip(Q,K)}let v=l("proj4");v.default&&(v=v.default);const b=l("./unzip"),x=l("./binaryajax"),S=l("./parseShp"),T=l("parsedbf"),_=l("lie"),M=l("lru-cache"),I=l("buffer").Buffer,$=c.URL,L=new M({max:20});m.combine=function([J,K]){const Q={type:"FeatureCollection",features:[]};let y=0;const A=J.length;for(K||(K=[]);y<A;)Q.features.push({type:"Feature",geometry:J[y],properties:K[y]||{}}),y++;return Q},m.parseZip=async function(J,K){J=d(J);const Q=await b(J),y=[];for(var A in K=K||[],Q)A.indexOf("__MACOSX")===-1&&(A.slice(-3).toLowerCase()==="shp"?(y.push(A.slice(0,-4)),Q[A.slice(0,-3)+A.slice(-3).toLowerCase()]=Q[A]):A.slice(-3).toLowerCase()==="prj"?Q[A.slice(0,-3)+A.slice(-3).toLowerCase()]=v(Q[A]):A.slice(-4).toLowerCase()==="json"||-1<K.indexOf(A.split(".").pop())?y.push(A.slice(0,-3)+A.slice(-3).toLowerCase()):(A.slice(-3).toLowerCase()==="dbf"||A.slice(-3).toLowerCase()==="cpg")&&(Q[A.slice(0,-3)+A.slice(-3).toLowerCase()]=Q[A]));if(!y.length)throw new Error("no layers founds");const N=y.map(function(j){let oe,q;const de=j.lastIndexOf(".");return-1<de&&-1<j.slice(de).indexOf("json")?(oe=JSON.parse(Q[j]),oe.fileName=j.slice(0,de)):-1<K.indexOf(j.slice(de+1))?(oe=Q[j],oe.fileName=j):(Q[j+".dbf"]&&(q=T(Q[j+".dbf"],Q[j+".cpg"])),oe=m.combine([S(Q[j+".shp"],Q[j+".prj"]),q]),oe.fileName=j),oe});return N.length===1?N[0]:N};const B=async J=>{const K=await _.all([x(J,"shp"),x(J,"prj")]);let Q=!1;try{K[1]&&(Q=v(K[1]))}catch{Q=!1}return S(K[0],Q)},z=async J=>{const[K,Q]=await _.all([x(J,"dbf"),x(J,"cpg")]);return K?T(K,Q):void 0},W=(J,K)=>new $(J).pathname.slice(-4).toLowerCase()===K;m.getShapefile=async function(J,K){if(typeof J!="string")return m.parseZip(J);if(W(J,".zip"))return g(J,K);const Q=await _.all([B(J),z(J)]);return m.combine(Q)},m.parseShp=function(J,K){if(J=d(J),I.isBuffer(K)&&(K=K.toString()),typeof K=="string")try{K=v(K)}catch{K=!1}return S(J,K)},m.parseDbf=function(J,K){return J=d(J),T(J,K)},u.exports=m}).call(this)}).call(this,typeof Bs>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Bs)},{"./binaryajax":2,"./parseShp":4,"./unzip":5,buffer:8,lie:12,"lru-cache":13,parsedbf:15,proj4:17}]},{},[23])(23)})})(Yde);var Tit=Yde.exports;const Ait=Nw(Tit),Cit={Point:"circlePoint",MultiPoint:"circlePoint",LineString:"solidLine",MultiLineString:"solidLine",Polygon:"outlinedPoly",MultiPolygon:"outlinedPoly"};function $it(e){if(e.type!=="FeatureCollection")throw new Error("GeoJSON is not in FeatureCollection format");let t=!0,i=!0;e.features.forEach((r,n)=>{Object.assign(r.properties,{ID_FILE:"",OBJECTID_FILE:""}),"id"in r&&typeof r.id<"u"&&(r.properties.ID_FILE=r.id,t=!1),"OBJECTID"in r.properties&&(r.properties.OBJECTID_FILE=r.properties.OBJECTID,delete r.properties.OBJECTID,i=!1),r.id=n+1}),t&&e.features.forEach(function(r){delete r.properties.ID_FILE}),i&&e.features.forEach(function(r){delete r.properties.OBJECTID_FILE})}function Oit(e,t){const i=r=>r.indexOf(" ")>-1;t.fields?.forEach(r=>{if(r.name&&i(r.name)){const n=r.name;let s,o="_",a;do s=n.replace(/ /g,o),a=t.fields?.find(l=>l.name===s),a&&(o+="_");while(a);r.alias=n,r.name=s,e.features.forEach(l=>{l.properties[s]=l.properties[n],delete l.properties[n]})}})}function Rit(e,t){const i=e.features[t].geometry.geometries;if(i.length===1)e.features[t].geometry={type:i[0].type,coordinates:i[0].coordinates};else{const r=i.map(n=>n.coordinates);e.features[t].geometry={type:`Multi${i[0].type}`,coordinates:r}}}class kit extends Wn{async fetchFileData(t,i){const r=await DC.get(t,{responseType:"arrayBuffer"});switch(i){case Ai.GEOJSON:return JSON.parse(new TextDecoder("utf-8").decode(new Uint8Array(r.data)));case Ai.SHAPEFILE:return r.data;case Ai.CSV:return new TextDecoder("utf-8").decode(new Uint8Array(r.data));default:console.error(`Unsupported file type passed to fetchFileData- '${i}'`)}}extractGeoJsonFields(t){if(t.features.length<1)throw new Error("GeoJSON field extraction requires at least one feature");let i=t.features[0].geometry.type;if(t.features.forEach((o,a)=>{if(o.geometry.type==="GeometryCollection"){const u=o.geometry.geometries;if(u===void 0||u.length===0)return Promise.reject(new Error("GeoJSON file has geometry collection with missing/incomplete geometries"));i=u[0].type,u.forEach(c=>{if(c.type!==i)return Promise.reject(new Error("GeoJSON file has geometry collection containing multiple geometry types"))}),Rit(t,a)}}),[...new Set(t.features.map(o=>o.geometry.type==="MultiLineString"?"LineString":o.geometry.type==="MultiPolygon"?"Polygon":o.geometry.type))].length!==1)throw new Error("GeoJSON file contains multiple geometry types");const r=Object.keys(t.features[0].properties).map(o=>({name:o,type:"string"}));let n=0;const s=Object.keys(t.features[0].properties);for(;n<t.features.length;){const o=t.features[n];if(o.properties&&Object.keys(o.properties).filter(a=>s.includes(a)).forEach(a=>{const l=o.properties[a];if(l!=null){const u=r.findIndex(c=>c.name===a);r[u]={name:a,type:this.inferType(l)},s.splice(s.indexOf(a),1)}}),s.length===0)break;n++}return r}extractCsvFields(t,i=","){return ER.dsv.dsvFormat(i).parseRows(t)[0].map(n=>({name:n,type:yy.STRING}))}filterCsvLatLonFields(t,i=","){const r=ER.dsv.dsvFormat(i).parseRows(t),n=r[0],s={lat:JSON.parse(JSON.stringify(n)),lon:JSON.parse(JSON.stringify(n))};for(let o=0;o<n.length;o++)for(let a=1;a<r.length;a++){const l=Number(r[a][o]),u=s.lat.indexOf(n[o]),c=s.lon.indexOf(n[o]);if((isNaN(l)||l<-90||l>90)&&u!==-1&&s.lat.splice(u,1),(isNaN(l)||l<-180||l>180)&&c!==-1&&s.lon.splice(c,1),u===-1&&c===-1)break}return s}async geoJsonToEsriJson(t,i){let r,n="EPSG:4326",s;const o={objectIdField:"OBJECTID",fields:[{name:"OBJECTID",type:yy.OID}]};$it(t);const a=t.features[0].geometry.type,l=Cit[a],u=JSON.parse(JSON.stringify(eit[l]));if(t.crs&&t.crs.type==="name"&&(n=t.crs.properties.name),i){if(i.sourceProjection&&(n=i.sourceProjection),i.targetSR)r=i.targetSR;else throw new Error("geoJsonToEsriJson - missing opts.targetSR arguement");i.layerId?s=i.layerId:s=this.$iApi.geo.shared.generateUUID(),i.colour&&(u.renderer.symbol.color=new sp(i.colour).toArcServer())}else throw new Error("geoJsonToEsriJson - missing opts arguement");o.renderer=_0.fromJSON(u.renderer),o.fields=(o.fields||[]).concat(i.fieldMetadata?.exclusiveFields?this.extractGeoJsonFields(t).filter(m=>i.fieldMetadata?.fieldInfo?.find(g=>g.name===m.name)):this.extractGeoJsonFields(t)),Oit(t,o);const c=this.$iApi.geo.proj.normalizeProj(r);if(i){if(i.latField){const m=o.fields.find(g=>g.name===i.latField||g.alias===i.latField);m&&(m.type=yy.DOUBLE)}if(i.lonField){const m=o.fields.find(g=>g.name===i.lonField||g.alias===i.lonField);m&&(m.type=yy.DOUBLE)}}await this.$iApi.geo.proj.checkProjBomber([n,r]);const d=new Et(r);await this.$iApi.geo.proj.projectGeoJson(t,n,c);const f=iit.convert(t,{sr:8888});return o.geometryType=this.$iApi.geo.geom.geoJsonGeomTypeToEsriGeomType(a),f.forEach(m=>{m.geometry.spatialReference=d,m.geometry.type=o.geometryType,Object.keys(m.attributes).forEach(g=>{(Array.isArray(m.attributes[g])||typeof m.attributes[g]=="object")&&m.attributes[g]!=null&&(m.attributes[g]=JSON.stringify(m.attributes[g]))})}),o.source=f,o.spatialReference=d,o.id=s,o}async csvToGeoJson(t,i){const r={latfield:"Lat",lonfield:"Long",delimiter:","};return i&&(i.latfield&&(r.latfield=i.latfield),i.lonfield&&(r.lonfield=i.lonfield),i.delimiter&&(r.delimiter=i.delimiter)),new Promise((n,s)=>{ER.csv2geojson(t,r,(o,a)=>{o?(console.error("csv conversion error"),console.error(o),s(o)):(a.features.map(l=>{l.properties[r.lonfield]=l.geometry.coordinates[0],l.properties[r.latfield]=l.geometry.coordinates[1]}),n(a))})})}async shapefileToGeoJson(t){return Ait(t)}inferType(t){return typeof t=="number"?yy.DOUBLE:yy.STRING}}const Lit=[4326,4269,4258,31467,31468,31469,2166,2167,2168,2036,2044,2045,2065,2081,2082,2083,2085,2086,2091,2092,2093,2096,2097,2098,2105,2106,2107,2108,2109,2110,2111,2112,2113,2114,2115,2116,2117,2118,2119,2120,2121,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,2169,2170,2171,2172,2173,2174,2175,2176,2177,2178,2179,2180,2193,2199,2200,2206,2207,2208,2209,2210,2211,2212,2319,2320,2321,2322,2323,2324,2325,2326,2327,2328,2329,2330,2331,2332,2333,2334,2335,2336,2337,2338,2339,2340,2341,2342,2343,2344,2345,2346,2347,2348,2349,2350,2351,2352,2353,2354,2355,2356,2357,2358,2359,2360,2361,2362,2363,2364,2365,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2384,2385,2386,2387,2388,2389,2390,2391,2392,2393,2394,2395,2396,2397,2398,2399,2400,2401,2402,2403,2404,2405,2406,2407,2408,2409,2410,2411,2412,2413,2414,2415,2416,2417,2418,2419,2420,2421,2422,2423,2424,2425,2426,2427,2428,2429,2430,2431,2432,2433,2434,2435,2436,2437,2438,2439,2440,2441,2442,2443,2444,2445,2446,2447,2448,2449,2450,2451,2452,2453,2454,2455,2456,2457,2458,2459,2460,2461,2462,2463,2464,2465,2466,2467,2468,2469,2470,2471,2472,2473,2474,2475,2476,2477,2478,2479,2480,2481,2482,2483,2484,2485,2486,2487,2488,2489,2490,2491,2492,2493,2494,2495,2496,2497,2498,2499,2500,2501,2502,2503,2504,2505,2506,2507,2508,2509,2510,2511,2512,2513,2514,2515,2516,2517,2518,2519,2520,2521,2522,2523,2524,2525,2526,2527,2528,2529,2530,2531,2532,2533,2534,2535,2536,2537,2538,2539,2540,2541,2542,2543,2544,2545,2546,2547,2548,2549,2551,2552,2553,2554,2555,2556,2557,2558,2559,2560,2561,2562,2563,2564,2565,2566,2567,2568,2569,2570,2571,2572,2573,2574,2575,2576,2577,2578,2579,2580,2581,2582,2583,2584,2585,2586,2587,2588,2589,2590,2591,2592,2593,2594,2595,2596,2597,2598,2599,2600,2601,2602,2603,2604,2605,2606,2607,2608,2609,2610,2611,2612,2613,2614,2615,2616,2617,2618,2619,2620,2621,2622,2623,2624,2625,2626,2627,2628,2629,2630,2631,2632,2633,2634,2635,2636,2637,2638,2639,2640,2641,2642,2643,2644,2645,2646,2647,2648,2649,2650,2651,2652,2653,2654,2655,2656,2657,2658,2659,2660,2661,2662,2663,2664,2665,2666,2667,2668,2669,2670,2671,2672,2673,2674,2675,2676,2677,2678,2679,2680,2681,2682,2683,2684,2685,2686,2687,2688,2689,2690,2691,2692,2693,2694,2695,2696,2697,2698,2699,2700,2701,2702,2703,2704,2705,2706,2707,2708,2709,2710,2711,2712,2713,2714,2715,2716,2717,2718,2719,2720,2721,2722,2723,2724,2725,2726,2727,2728,2729,2730,2731,2732,2733,2734,2735,2738,2739,2740,2741,2742,2743,2744,2745,2746,2747,2748,2749,2750,2751,2752,2753,2754,2755,2756,2757,2758,2935,2936,2937,2938,2939,2940,2941,2953,2963,3006,3007,3008,3009,3010,3011,3012,3013,3014,3015,3016,3017,3018,3019,3020,3021,3022,3023,3024,3025,3026,3027,3028,3029,3030,3034,3035,3038,3039,3040,3041,3042,3043,3044,3045,3046,3047,3048,3049,3050,3051,3058,3059,3068,3114,3115,3116,3117,3118,3120,3126,3127,3128,3129,3130,3131,3132,3133,3134,3135,3136,3137,3138,3139,3140,3146,3147,3150,3151,3152,3300,3301,3328,3329,3330,3331,3332,3333,3334,3335,3346,3350,3351,3352,3366,3386,3387,3388,3389,3390,3396,3397,3398,3399,3407,3414,3416,3764,3788,3789,3790,3791,3793,3795,3796,3819,3821,3823,3824,3833,3834,3835,3836,3837,3838,3839,3840,3841,3842,3843,3844,3845,3846,3847,3848,3849,3850,3851,3852,3854,3873,3874,3875,3876,3877,3878,3879,3880,3881,3882,3883,3884,3885,3888,3889,3906,3907,3908,3909,3910,3911,4001,4002,4003,4004,4005,4006,4007,4008,4009,4010,4011,4012,4013,4014,4015,4016,4017,4018,4019,4020,4021,4022,4023,4024,4025,4026,4027,4028,4029,4030,4031,4032,4033,4034,4035,4036,4037,4038,4040,4041,4042,4043,4044,4045,4046,4047,4052,4053,4054,4055,4074,4075,4080,4081,4120,4121,4122,4123,4124,4125,4126,4127,4128,4129,4130,4131,4132,4133,4134,4135,4136,4137,4138,4139,4140,4141,4142,4143,4144,4145,4146,4147,4148,4149,4150,4151,4152,4153,4154,4155,4156,4157,4158,4159,4160,4161,4162,4163,4164,4165,4166,4167,4168,4169,4170,4171,4172,4173,4174,4175,4176,4178,4179,4180,4181,4182,4183,4184,4185,4188,4189,4190,4191,4192,4193,4194,4195,4196,4197,4198,4199,4200,4201,4202,4203,4204,4205,4206,4207,4208,4209,4210,4211,4212,4213,4214,4215,4216,4218,4219,4220,4221,4222,4223,4224,4225,4226,4227,4228,4229,4230,4231,4232,4233,4234,4235,4236,4237,4238,4239,4240,4241,4242,4243,4244,4245,4246,4247,4248,4249,4250,4251,4252,4253,4254,4255,4256,4257,4259,4260,4261,4262,4263,4264,4265,4266,4267,4268,4270,4271,4272,4273,4274,4275,4276,4277,4278,4279,4280,4281,4282,4283,4284,4285,4286,4287,4288,4289,4291,4292,4293,4294,4295,4296,4297,4298,4299,4300,4301,4302,4303,4304,4306,4307,4308,4309,4310,4311,4312,4313,4314,4315,4316,4317,4318,4319,4322,4324,4327,4329,4339,4341,4343,4345,4347,4349,4351,4353,4355,4357,4359,4361,4363,4365,4367,4369,4371,4373,4375,4377,4379,4381,4383,4386,4388,4417,4434,4463,4466,4469,4470,4472,4475,4480,4482,4483,4490,4491,4492,4493,4494,4495,4496,4497,4498,4499,4500,4501,4502,4503,4504,4505,4506,4507,4508,4509,4510,4511,4512,4513,4514,4515,4516,4517,4518,4519,4520,4521,4522,4523,4524,4525,4526,4527,4528,4529,4530,4531,4532,4533,4534,4535,4536,4537,4538,4539,4540,4541,4542,4543,4544,4545,4546,4547,4548,4549,4550,4551,4552,4553,4554,4555,4557,4558,4568,4569,4570,4571,4572,4573,4574,4575,4576,4577,4578,4579,4580,4581,4582,4583,4584,4585,4586,4587,4588,4589,4600,4601,4602,4603,4604,4605,4606,4607,4608,4609,4610,4611,4612,4613,4614,4615,4616,4617,4618,4619,4620,4621,4622,4623,4624,4625,4626,4627,4628,4629,4630,4631,4632,4633,4634,4635,4636,4637,4638,4639,4640,4641,4642,4643,4644,4645,4646,4652,4653,4654,4655,4656,4657,4658,4659,4660,4661,4662,4663,4664,4665,4666,4667,4668,4669,4670,4671,4672,4673,4674,4675,4676,4677,4678,4679,4680,4681,4682,4683,4684,4685,4686,4687,4688,4689,4690,4691,4692,4693,4694,4695,4696,4697,4698,4699,4700,4701,4702,4703,4704,4705,4706,4707,4708,4709,4710,4711,4712,4713,4714,4715,4716,4717,4718,4719,4720,4721,4722,4723,4724,4725,4726,4727,4728,4729,4730,4731,4732,4733,4734,4735,4736,4737,4738,4739,4740,4741,4742,4743,4744,4745,4746,4747,4748,4749,4750,4751,4752,4753,4754,4755,4756,4757,4758,4759,4760,4761,4762,4763,4764,4765,4766,4767,4768,4769,4770,4771,4772,4773,4774,4775,4776,4777,4778,4779,4780,4781,4782,4783,4784,4785,4786,4787,4788,4789,4790,4791,4792,4793,4794,4795,4796,4797,4798,4799,4800,4801,4802,4803,4804,4805,4806,4807,4808,4809,4810,4811,4812,4813,4814,4815,4816,4817,4818,4819,4820,4821,4822,4823,4824,4839,4855,4856,4857,4858,4859,4860,4861,4862,4863,4864,4865,4866,4867,4868,4869,4870,4871,4872,4873,4874,4875,4876,4877,4878,4879,4880,4883,4885,4887,4889,4891,4893,4895,4898,4900,4901,4902,4903,4904,4907,4909,4921,4923,4925,4927,4929,4931,4933,4935,4937,4939,4941,4943,4945,4947,4949,4951,4953,4955,4957,4959,4961,4963,4965,4967,4969,4971,4973,4975,4977,4979,4981,4983,4985,4987,4989,4991,4993,4995,4997,4999,5012,5013,5017,5048,5105,5106,5107,5108,5109,5110,5111,5112,5113,5114,5115,5116,5117,5118,5119,5120,5121,5122,5123,5124,5125,5126,5127,5128,5129,5130,5132,5167,5168,5169,5170,5171,5172,5173,5174,5175,5176,5177,5178,5179,5180,5181,5182,5183,5184,5185,5186,5187,5188,5224,5228,5229,5233,5245,5246,5251,5252,5253,5254,5255,5256,5257,5258,5259,5263,5264,5269,5270,5271,5272,5273,5274,5275,5801,5802,5803,5804,5808,5809,5810,5811,5812,5813,5814,5815,5816,20004,20005,20006,20007,20008,20009,20010,20011,20012,20013,20014,20015,20016,20017,20018,20019,20020,20021,20022,20023,20024,20025,20026,20027,20028,20029,20030,20031,20032,20064,20065,20066,20067,20068,20069,20070,20071,20072,20073,20074,20075,20076,20077,20078,20079,20080,20081,20082,20083,20084,20085,20086,20087,20088,20089,20090,20091,20092,21413,21414,21415,21416,21417,21418,21419,21420,21421,21422,21423,21453,21454,21455,21456,21457,21458,21459,21460,21461,21462,21463,21473,21474,21475,21476,21477,21478,21479,21480,21481,21482,21483,21896,21897,21898,21899,22171,22172,22173,22174,22175,22176,22177,22181,22182,22183,22184,22185,22186,22187,22191,22192,22193,22194,22195,22196,22197,25884,27205,27206,27207,27208,27209,27210,27211,27212,27213,27214,27215,27216,27217,27218,27219,27220,27221,27222,27223,27224,27225,27226,27227,27228,27229,27230,27231,27232,27391,27392,27393,27394,27395,27396,27397,27398,27492,28402,28403,28404,28405,28406,28407,28408,28409,28410,28411,28412,28413,28414,28415,28416,28417,28418,28419,28420,28421,28422,28423,28424,28425,28426,28427,28428,28429,28430,28431,28432,28462,28463,28464,28465,28466,28467,28468,28469,28470,28471,28472,28473,28474,28475,28476,28477,28478,28479,28480,28481,28482,28483,28484,28485,28486,28487,28488,28489,28490,28491,28492,29701,29702,30161,30162,30163,30164,30165,30166,30167,30168,30169,30170,30171,30172,30173,30174,30175,30176,30177,30178,30179,30800,31251,31252,31253,31254,31255,31256,31257,31258,31259,31275,31276,31277,31278,31279,31281,31282,31283,31284,31285,31286,31287,31288,31289,31290,31466,31700];function D0(e,t){return e.then(function(i){return[null,i]}).catch(function(i){return t&&Object.assign(i,t),[i,void 0]})}var Kde={},Qde={},Uh={};(function(e){const t=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",i=t+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",r="["+t+"]["+i+"]*",n=new RegExp("^"+r+"$"),s=function(a,l){const u=[];let c=l.exec(a);for(;c;){const d=[],f=c.length;for(let m=0;m<f;m++)d.push(c[m]);u.push(d),c=l.exec(a)}return u},o=function(a){const l=n.exec(a);return!(l===null||typeof l>"u")};e.isExist=function(a){return typeof a<"u"},e.isEmptyObject=function(a){return Object.keys(a).length===0},e.merge=function(a,l,u){if(l){const c=Object.keys(l),d=c.length;for(let f=0;f<d;f++)u==="strict"?a[c[f]]=[l[c[f]]]:a[c[f]]=l[c[f]]}},e.getValue=function(a){return e.isExist(a)?a:""},e.buildOptions=function(a,l,u){var c={};if(!a)return l;for(let d=0;d<u.length;d++)a[u[d]]!==void 0?c[u[d]]=a[u[d]]:c[u[d]]=l[u[d]];return c},e.isTagNameInArrayMode=function(a,l,u){return l===!1?!1:l instanceof RegExp?l.test(a):typeof l=="function"?!!l(a,u):l==="strict"},e.isName=o,e.getAllMatches=s,e.nameRegexp=r})(Uh);const my=Uh,RN=function(e,t,i){const r={};if((!e.child||my.isEmptyObject(e.child))&&(!e.attrsMap||my.isEmptyObject(e.attrsMap)))return my.isExist(e.val)?e.val:"";if(my.isExist(e.val)&&!(typeof e.val=="string"&&(e.val===""||e.val===t.cdataPositionChar))){const s=my.isTagNameInArrayMode(e.tagname,t.arrayMode,i);r[t.textNodeName]=s?[e.val]:e.val}my.merge(r,e.attrsMap,t.arrayMode);const n=Object.keys(e.child);for(let s=0;s<n.length;s++){const o=n[s];if(e.child[o]&&e.child[o].length>1){r[o]=[];for(let a in e.child[o])e.child[o].hasOwnProperty(a)&&r[o].push(RN(e.child[o][a],t,o))}else{const a=RN(e.child[o][0],t,o),l=t.arrayMode===!0&&typeof a=="object"||my.isTagNameInArrayMode(o,t.arrayMode,i);r[o]=l?[a]:a}}return r};Qde.convertToJson=RN;var j0={},Pit=function(e,t,i){this.tagname=e,this.parent=t,this.child={},this.attrsMap={},this.val=i,this.addChild=function(r){Array.isArray(this.child[r.tagname])?this.child[r.tagname].push(r):this.child[r.tagname]=[r]}};const zg=Uh,Nit=Uh.buildOptions,JM=Pit;"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,zg.nameRegexp);!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const Xde={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",tagValueProcessor:function(e,t){return e},attrValueProcessor:function(e,t){return e},stopNodes:[]};j0.defaultOptions=Xde;const epe=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];j0.props=epe;function ZM(e,t,i){return t&&(i.trimValues&&(t=t.trim()),t=i.tagValueProcessor(t,e),t=tpe(t,i.parseNodeValue,i.parseTrueNumberOnly)),t}function Fit(e,t){if(t.ignoreNameSpace){const i=e.split(":"),r=e.charAt(0)==="/"?"/":"";if(i[0]==="xmlns")return"";i.length===2&&(e=r+i[1])}return e}function tpe(e,t,i){if(t&&typeof e=="string"){let r;return e.trim()===""||isNaN(e)?r=e==="true"?!0:e==="false"?!1:e:(e.indexOf("0x")!==-1?r=Number.parseInt(e,16):e.indexOf(".")!==-1?(r=Number.parseFloat(e),e=e.replace(/\.?0+$/,"")):r=Number.parseInt(e,10),i&&(r=String(r)===e?r:e)),r}else return zg.isExist(e)?e:""}const Dit=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])(.*?)\\3)?`,"g");function OZ(e,t){if(!t.ignoreAttributes&&typeof e=="string"){e=e.replace(/\r?\n/g," ");const i=zg.getAllMatches(e,Dit),r=i.length,n={};for(let s=0;s<r;s++){const o=Fit(i[s][1],t);o.length&&(i[s][4]!==void 0?(t.trimValues&&(i[s][4]=i[s][4].trim()),i[s][4]=t.attrValueProcessor(i[s][4],o),n[t.attributeNamePrefix+o]=tpe(i[s][4],t.parseAttributeValue,t.parseTrueNumberOnly)):t.allowBooleanAttributes&&(n[t.attributeNamePrefix+o]=!0))}if(!Object.keys(n).length)return;if(t.attrNodeName){const s={};return s[t.attrNodeName]=n,s}return n}}const jit=function(e,t){e=e.replace(/\r\n?/g,`
`),t=Nit(t,Xde,epe);const i=new JM("!xml");let r=i,n="";for(let s=0;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="/"){const a=F_(e,">",s,"Closing Tag is not closed.");let l=e.substring(s+2,a).trim();if(t.ignoreNameSpace){const u=l.indexOf(":");u!==-1&&(l=l.substr(u+1))}r&&(r.val?r.val=zg.getValue(r.val)+""+ZM(l,n,t):r.val=ZM(l,n,t)),t.stopNodes.length&&t.stopNodes.includes(r.tagname)&&(r.child=[],r.attrsMap==null&&(r.attrsMap={}),r.val=e.substr(r.startIndex+1,s-r.startIndex-1)),r=r.parent,n="",s=a}else if(e[s+1]==="?")s=F_(e,"?>",s,"Pi Tag is not closed.");else if(e.substr(s+1,3)==="!--")s=F_(e,"-->",s,"Comment is not closed.");else if(e.substr(s+1,2)==="!D"){const a=F_(e,">",s,"DOCTYPE is not closed.");e.substring(s,a).indexOf("[")>=0?s=e.indexOf("]>",s)+1:s=a}else if(e.substr(s+1,2)==="!["){const a=F_(e,"]]>",s,"CDATA is not closed.")-2,l=e.substring(s+9,a);if(n&&(r.val=zg.getValue(r.val)+""+ZM(r.tagname,n,t),n=""),t.cdataTagName){const u=new JM(t.cdataTagName,r,l);r.addChild(u),r.val=zg.getValue(r.val)+t.cdataPositionChar,l&&(u.val=l)}else r.val=(r.val||"")+(l||"");s=a+2}else{const a=Uit(e,s+1);let l=a.data;const u=a.index,c=l.indexOf(" ");let d=l,f=!0;if(c!==-1&&(d=l.substr(0,c).replace(/\s\s*$/,""),l=l.substr(c+1)),t.ignoreNameSpace){const m=d.indexOf(":");m!==-1&&(d=d.substr(m+1),f=d!==a.data.substr(m+1))}if(r&&n&&r.tagname!=="!xml"&&(r.val=zg.getValue(r.val)+""+ZM(r.tagname,n,t)),l.length>0&&l.lastIndexOf("/")===l.length-1){d[d.length-1]==="/"?(d=d.substr(0,d.length-1),l=d):l=l.substr(0,l.length-1);const m=new JM(d,r,"");d!==l&&(m.attrsMap=OZ(l,t)),r.addChild(m)}else{const m=new JM(d,r);t.stopNodes.length&&t.stopNodes.includes(m.tagname)&&(m.startIndex=u),d!==l&&f&&(m.attrsMap=OZ(l,t)),r.addChild(m),r=m}n="",s=u}else n+=e[s];return i};function Uit(e,t){let i,r="";for(let n=t;n<e.length;n++){let s=e[n];if(i)s===i&&(i="");else if(s==='"'||s==="'")i=s;else{if(s===">")return{data:r,index:n};s==="	"&&(s=" ")}r+=s}}function F_(e,t,i,r){const n=e.indexOf(t,i);if(n===-1)throw new Error(r);return n+t.length-1}j0.getTraversalObj=jit;var ipe={};const BC=Uh,Vit={allowBooleanAttributes:!1},Bit=["allowBooleanAttributes"];ipe.validate=function(e,t){t=BC.buildOptions(t,Vit,Bit);const i=[];let r=!1,n=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let s=0;s<e.length;s++)if(e[s]==="<"&&e[s+1]==="?"){if(s+=2,s=RZ(e,s),s.err)return s}else if(e[s]==="<")if(s++,e[s]==="!"){s=kZ(e,s);continue}else{let o=!1;e[s]==="/"&&(o=!0,s++);let a="";for(;s<e.length&&e[s]!==">"&&e[s]!==" "&&e[s]!=="	"&&e[s]!==`
`&&e[s]!=="\r";s++)a+=e[s];if(a=a.trim(),a[a.length-1]==="/"&&(a=a.substring(0,a.length-1),s--),!Yit(a)){let c;return a.trim().length===0?c="There is an unnecessary space between tag name and backward slash '</ ..'.":c="Tag '"+a+"' is an invalid name.",Ds("InvalidTag",c,Wu(e,s))}const l=qit(e,s);if(l===!1)return Ds("InvalidAttr","Attributes for '"+a+"' have open quote.",Wu(e,s));let u=l.value;if(s=l.index,u[u.length-1]==="/"){u=u.substring(0,u.length-1);const c=LZ(u,t);if(c===!0)r=!0;else return Ds(c.err.code,c.err.msg,Wu(e,s-u.length+c.err.line))}else if(o)if(l.tagClosed){if(u.trim().length>0)return Ds("InvalidTag","Closing tag '"+a+"' can't have attributes or invalid starting.",Wu(e,s));{const c=i.pop();if(a!==c)return Ds("InvalidTag","Closing tag '"+c+"' is expected inplace of '"+a+"'.",Wu(e,s));i.length==0&&(n=!0)}}else return Ds("InvalidTag","Closing tag '"+a+"' doesn't have proper closing.",Wu(e,s));else{const c=LZ(u,t);if(c!==!0)return Ds(c.err.code,c.err.msg,Wu(e,s-u.length+c.err.line));if(n===!0)return Ds("InvalidXml","Multiple possible root nodes found.",Wu(e,s));i.push(a),r=!0}for(s++;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="!"){s++,s=kZ(e,s);continue}else if(e[s+1]==="?"){if(s=RZ(e,++s),s.err)return s}else break;else if(e[s]==="&"){const c=Jit(e,s);if(c==-1)return Ds("InvalidChar","char '&' is not expected.",Wu(e,s));s=c}e[s]==="<"&&s--}else{if(e[s]===" "||e[s]==="	"||e[s]===`
`||e[s]==="\r")continue;return Ds("InvalidChar","char '"+e[s]+"' is not expected.",Wu(e,s))}if(r){if(i.length>0)return Ds("InvalidXml","Invalid '"+JSON.stringify(i,null,4).replace(/\r?\n/g,"")+"' found.",1)}else return Ds("InvalidXml","Start tag expected.",1);return!0};function RZ(e,t){for(var i=t;t<e.length;t++)if(e[t]=="?"||e[t]==" "){var r=e.substr(i,t-i);if(t>5&&r==="xml")return Ds("InvalidXml","XML declaration allowed only at the start of the document.",Wu(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function kZ(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let i=1;for(t+=8;t<e.length;t++)if(e[t]==="<")i++;else if(e[t]===">"&&(i--,i===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}var zit='"',Git="'";function qit(e,t){let i="",r="",n=!1;for(;t<e.length;t++){if(e[t]===zit||e[t]===Git)if(r==="")r=e[t];else{if(r!==e[t])continue;r=""}else if(e[t]===">"&&r===""){n=!0;break}i+=e[t]}return r!==""?!1:{value:i,index:t,tagClosed:n}}const Hit=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function LZ(e,t){const i=BC.getAllMatches(e,Hit),r={};for(let n=0;n<i.length;n++){if(i[n][1].length===0)return Ds("InvalidAttr","Attribute '"+i[n][2]+"' has no space in starting.",YM(e,i[n][0]));if(i[n][3]===void 0&&!t.allowBooleanAttributes)return Ds("InvalidAttr","boolean attribute '"+i[n][2]+"' is not allowed.",YM(e,i[n][0]));const s=i[n][2];if(!Zit(s))return Ds("InvalidAttr","Attribute '"+s+"' is an invalid name.",YM(e,i[n][0]));if(!r.hasOwnProperty(s))r[s]=1;else return Ds("InvalidAttr","Attribute '"+s+"' is repeated.",YM(e,i[n][0]))}return!0}function Wit(e,t){let i=/\d/;for(e[t]==="x"&&(t++,i=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(i))break}return-1}function Jit(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,Wit(e,t);let i=0;for(;t<e.length;t++,i++)if(!(e[t].match(/\w/)&&i<20)){if(e[t]===";")break;return-1}return t}function Ds(e,t,i){return{err:{code:e,msg:t,line:i}}}function Zit(e){return BC.isName(e)}function Yit(e){return BC.isName(e)}function Wu(e,t){var i=e.substring(0,t).split(/\r?\n/);return i.length}function YM(e,t){return e.indexOf(t)+t.length}var MR={},PZ;function Kit(){if(PZ)return MR;PZ=1;const e=function(d){return String.fromCharCode(d)},t={nilChar:e(176),missingChar:e(201),nilPremitive:e(175),missingPremitive:e(200),emptyChar:e(178),emptyValue:e(177),boundryChar:e(179),objStart:e(198),arrStart:e(204),arrayEnd:e(185)},i=[t.nilChar,t.nilPremitive,t.missingChar,t.missingPremitive,t.boundryChar,t.emptyChar,t.emptyValue,t.arrayEnd,t.objStart,t.arrStart],r=function(d,f,m){if(typeof f=="string")return d&&d[0]&&d[0].val!==void 0?n(d[0].val):n(d);{const g=a(d);if(g===!0){let v="";if(Array.isArray(f)){v+=t.arrStart;const b=f[0],x=d.length;if(typeof b=="string")for(let S=0;S<x;S++){const T=n(d[S].val);v=s(v,T)}else for(let S=0;S<x;S++){const T=r(d[S],b,m);v=s(v,T)}v+=t.arrayEnd}else{v+=t.objStart;const b=Object.keys(f);Array.isArray(d)&&(d=d[0]);for(let x in b){const S=b[x];let T;!m.ignoreAttributes&&d.attrsMap&&d.attrsMap[S]?T=r(d.attrsMap[S],f[S],m):S===m.textNodeName?T=r(d.val,f[S],m):T=r(d.child[S],f[S],m),v=s(v,T)}}return v}else return g}},n=function(d){switch(d){case void 0:return t.missingPremitive;case null:return t.nilPremitive;case"":return t.emptyValue;default:return d}},s=function(d,f){return!o(f[0])&&!o(d[d.length-1])&&(d+=t.boundryChar),d+f},o=function(d){return i.indexOf(d)!==-1};function a(d){return d===void 0?t.missingChar:d===null?t.nilChar:d.child&&Object.keys(d.child).length===0&&(!d.attrsMap||Object.keys(d.attrsMap).length===0)?t.emptyChar:!0}const l=j0,u=Uh.buildOptions,c=function(d,f,m){return m=u(m,l.defaultOptions,l.props),r(d,f,m)};return MR.convert2nimn=c,MR}var IR={},NZ;function Qit(){if(NZ)return IR;NZ=1;const e=Uh,t=Uh.buildOptions,i=j0,r=function(o,a){return a=t(a,i.defaultOptions,i.props),a.indentBy=a.indentBy||"",n(o,a)},n=function(o,a,l){let u="{";const c=Object.keys(o.child);for(let m=0;m<c.length;m++){var d=c[m];if(o.child[d]&&o.child[d].length>1){u+='"'+d+'" : [ ';for(var f in o.child[d])u+=n(o.child[d][f],a)+" , ";u=u.substr(0,u.length-1)+" ] "}else u+='"'+d+'" : '+n(o.child[d][0],a)+" ,"}return e.merge(u,o.attrsMap),e.isEmptyObject(u)?e.isExist(o.val)?o.val:"":(e.isExist(o.val)&&(typeof o.val=="string"&&(o.val===""||o.val===a.cdataPositionChar)||(u+='"'+a.textNodeName+'" : '+s(o.val))),u[u.length-1]===","&&(u=u.substr(0,u.length-2)),u+"}")};function s(o){return o===!0||o===!1||!isNaN(o)?o:'"'+o+'"'}return IR.convertToJsonString=r,IR}var TR,FZ;function Xit(){if(FZ)return TR;FZ=1;const e=Uh.buildOptions,t={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(m){return m},attrValueProcessor:function(m){return m}},i=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function r(m){this.options=e(m,t,i),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=d),this.options.cdataTagName?this.isCDATA=f:this.isCDATA=function(){return!1},this.replaceCDATAstr=n,this.replaceCDATAarr=s,this.options.format?(this.indentate=c,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=u,this.buildObjNode=a):(this.buildTextNode=l,this.buildObjNode=o),this.buildTextValNode=l,this.buildObjectNode=o}r.prototype.parse=function(m){return this.j2x(m,0).val},r.prototype.j2x=function(m,g){let v="",b="";const x=Object.keys(m),S=x.length;for(let T=0;T<S;T++){const _=x[T];if(!(typeof m[_]>"u"))if(m[_]===null)b+=this.indentate(g)+"<"+_+"/"+this.tagEndChar;else if(m[_]instanceof Date)b+=this.buildTextNode(m[_],_,"",g);else if(typeof m[_]!="object"){const M=this.isAttribute(_);M?v+=" "+M+'="'+this.options.attrValueProcessor(""+m[_])+'"':this.isCDATA(_)?m[this.options.textNodeName]?b+=this.replaceCDATAstr(m[this.options.textNodeName],m[_]):b+=this.replaceCDATAstr("",m[_]):_===this.options.textNodeName?m[this.options.cdataTagName]||(b+=this.options.tagValueProcessor(""+m[_])):b+=this.buildTextNode(m[_],_,"",g)}else if(Array.isArray(m[_]))if(this.isCDATA(_))b+=this.indentate(g),m[this.options.textNodeName]?b+=this.replaceCDATAarr(m[this.options.textNodeName],m[_]):b+=this.replaceCDATAarr("",m[_]);else{const M=m[_].length;for(let I=0;I<M;I++){const $=m[_][I];if(!(typeof $>"u"))if($===null)b+=this.indentate(g)+"<"+_+"/"+this.tagEndChar;else if(typeof $=="object"){const L=this.j2x($,g+1);b+=this.buildObjNode(L.val,_,L.attrStr,g)}else b+=this.buildTextNode($,_,"",g)}}else if(this.options.attrNodeName&&_===this.options.attrNodeName){const M=Object.keys(m[_]),I=M.length;for(let $=0;$<I;$++)v+=" "+M[$]+'="'+this.options.attrValueProcessor(""+m[_][M[$]])+'"'}else{const M=this.j2x(m[_],g+1);b+=this.buildObjNode(M.val,_,M.attrStr,g)}}return{attrStr:v,val:b}};function n(m,g){return m=this.options.tagValueProcessor(""+m),this.options.cdataPositionChar===""||m===""?m+"<![CDATA["+g+"]]"+this.tagEndChar:m.replace(this.options.cdataPositionChar,"<![CDATA["+g+"]]"+this.tagEndChar)}function s(m,g){if(m=this.options.tagValueProcessor(""+m),this.options.cdataPositionChar===""||m==="")return m+"<![CDATA["+g.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let v in g)m=m.replace(this.options.cdataPositionChar,"<![CDATA["+g[v]+"]]>");return m+this.newLine}function o(m,g,v,b){return v&&!m.includes("<")?this.indentate(b)+"<"+g+v+">"+m+"</"+g+this.tagEndChar:this.indentate(b)+"<"+g+v+this.tagEndChar+m+this.indentate(b)+"</"+g+this.tagEndChar}function a(m,g,v,b){return m!==""?this.buildObjectNode(m,g,v,b):this.indentate(b)+"<"+g+v+"/"+this.tagEndChar}function l(m,g,v,b){return this.indentate(b)+"<"+g+v+">"+this.options.tagValueProcessor(m)+"</"+g+this.tagEndChar}function u(m,g,v,b){return m!==""?this.buildTextValNode(m,g,v,b):this.indentate(b)+"<"+g+v+"/"+this.tagEndChar}function c(m){return this.options.indentBy.repeat(m)}function d(m){return m.startsWith(this.options.attributeNamePrefix)?m.substr(this.attrPrefixLen):!1}function f(m){return m===this.options.cdataTagName}return TR=r,TR}(function(e){const t=Qde,i=j0,r=j0,n=Uh.buildOptions,s=ipe;e.parse=function(o,a,l){if(l){l===!0&&(l={});const c=s.validate(o,l);if(c!==!0)throw Error(c.err.msg)}a=n(a,r.defaultOptions,r.props);const u=i.getTraversalObj(o,a);return t.convertToJson(u,a)},e.convertTonimn=Kit().convert2nimn,e.getTraversalObj=i.getTraversalObj,e.convertToJson=t.convertToJson,e.convertToJsonString=Qit().convertToJsonString,e.validate=s.validate,e.j2xParser=Xit(),e.parseToNimn=function(o,a,l){return e.convertTonimn(e.getTraversalObj(o,l),a,l)}})(Kde);class ert extends Wn{async loadWfsData(t,i=-1,r=0,n=1e3,s={type:"FeatureCollection",features:[]},o=!1){let a={startindex:r.toString(),limit:n.toString()};i===-1&&(a={resulttype:"hits"});const u=new i5(t).updateQuery(a),[c,d]=await D0(DC.get(u));if(!d)return console.error(`WFS data failed to load for ${t}`,c),Promise.reject(c);const f=d.data;if(i===-1)return i=d.data.numberMatched,this.loadWfsData(t,i,r,n,s,o);if(s.features=s.features.concat(f.features),f.features.length<i-r){const m=Math.min(n,i-r-f.features.length);return this.loadWfsData(u,i,f.features.length+r,m,s,o)}else return o&&s.features.length>0&&s.features[0].geometry.type===fn.POINT&&s.features.forEach(m=>{const g=m.geometry.coordinates;m.properties.rvInternalCoordX=g[0],m.properties.rvInternalCoordY=g[1]}),s}reversedAxisWKIDs(){return Lit}parseCapabilities(t){const i=()=>{let o=t;if(t.indexOf("?")===-1)o+="?service=WMS&request=GetCapabilities";else{const a=new i5(t.toUpperCase());"SERVICE"in a.queryMap||(o+="&service=WMS"),"REQUEST"in a.queryMap||(o+="&request=GetCapabilities")}return St(o,{responseType:"xml"}).then(a=>a.data)},r=new Promise(o=>{i().then(a=>o(a)).catch(()=>{console.error("Get capabilities failed; trying the second time;"),o(i())})}),n=o=>{let a=o.Layer;return a?(Array.isArray(a)||(a=[a]),a.map(l=>{const u=l.Name,c=l.Title;let d=l.Style;const f=[],m={};return d&&(Array.isArray(d)||(d=[d]),d.forEach(g=>{const v=g.Name;if(f.push(v),g.LegendURL){const x=g.LegendURL.OnlineResource["@_xlink:href"];m[v]=x.replaceAll("&amp;","&")}})),{name:u?.toString()??null,title:c,queryable:l["@_queryable"]==="1",layers:n(l),allStyles:f,styleToURL:m,currentStyle:f[0]}})):[]},s=o=>{let a=o.Format;return Array.isArray(a)||(a=[a]),a};return r.then(o=>{if(!o)return[];const a=new XMLSerializer().serializeToString(o),l={ignoreAttributes:!1},u=Kde.parse(a,l);if("ServiceExceptionReport"in u)return console.error(u.ServiceExceptionReport.ServiceException),[];const c=u.WMS_Capabilities.Capability;return{layers:n(c),queryTypes:s(c.Request.GetFeatureInfo)}})}}class trt extends Wn{files;ogc;constructor(t){super(t),this.files=new kit(t),this.ogc=new ert(t)}createLayer(t){let i;switch(t.layerType){case Ai.FEATURE:i=art;break;case Ai.MAPIMAGE:i=lrt;break;case Ai.GRAPHIC:i=rrt;break;case Ai.TILE:i=hrt;break;case Ai.WFS:i=prt;break;case Ai.WMS:i=drt;break;case Ai.GEOJSON:i=nrt;break;case Ai.CSV:i=ort;break;case Ai.SHAPEFILE:i=srt;break;case Ai.OSM:i=crt;break;default:throw new Error("Unsupported Layer Type "+t.layerType)}return new i(t,this.$iApi)}getLayer(t){let i;const r=iu(this.$vApp.$pinia);return i=r.getLayerById(t),i||(i=r.getLayerByUid(t)),i}allLayers(){return this.allActiveLayers().concat(this.allErrorLayers()).concat(this.allInitiatingLayers())}allActiveLayers(){return this.allLayersOnMap().filter(t=>t.layerState!==co.ERROR)}allLayersOnMap(){return iu(this.$vApp.$pinia).layers||[]}allErrorLayers(){return iu(this.$vApp.$pinia).penaltyBox.concat(this.allLayersOnMap().filter(t=>t.layerState===co.ERROR))||[]}allInitiatingLayers(){return iu(this.$vApp.$pinia).initiatingLayers||[]}getLayerControls(t){const i=this.getLayer(t)??this.allErrorLayers().find(o=>o.id===t||o.uid===t);if(!i)return;const r=i.config.controls?.slice()??[ss.BoundaryZoom,ss.Datatable,ss.Identify,ss.Metadata,ss.Opacity,ss.Refresh,ss.Reload,ss.Remove,ss.Settings,ss.Symbology,ss.Visibility],n=[];return i.supportsFeatures||n.push(ss.Datatable),i.extent===void 0&&n.push(ss.BoundaryZoom),(i.config?.metadata||(i.isSublayer?i.parentLayer?.config?.metadata:{})||{}).url||n.push(ss.Metadata),n.forEach(o=>{const a=r?.indexOf(o)??-1;a!==-1&&r?.splice(a,1)}),{controls:r,disabledControls:i.config.disabledControls??[]}}}class Gg extends Wn{config={};id;uid;name;layerState;initiationState;drawState;layerIdx;layerType;layerFormat;dataFormat;supportsIdentify;supportsFeatures;featureCount;fields;nameField;oidField;expectedTime;supportsSublayers;isSublayer;isRemoved;isFile;isCosmetic;userAdded;identify;identifyMode;hovertips;geomType;legend;maxLoadTime;esriLayer;esriSubLayer;esriView;extent;canModifyLayer;_parentLayer;_sublayers;constructor(t,i){super(i),this.config=t,this.id="",this.uid="",this.name="error",this.layerState=co.NEW,this.drawState=sl.NOT_LOADED,this.initiationState=nl.NEW,this.layerIdx=-1,this.layerFormat=vc.UNKNOWN,this.layerType=Ai.UNKNOWN,this.dataFormat=fl.UNKNOWN,this.supportsIdentify=!1,this.identifyMode=as.NONE,this.supportsFeatures=!1,this.featureCount=-1,this.fields=[],this.nameField="",this.oidField="",this.supportsSublayers=!1,this.isSublayer=!1,this.isRemoved=!1,this.isFile=!1,this.isCosmetic=t.cosmetic||!1,this.userAdded=!1,this.identify=!1,this.hovertips=t.state?.hovertips??!0,this.geomType=Ti.UNKNOWN,this.legend=[],this._sublayers=[],this.expectedTime={draw:0,load:0},this.maxLoadTime=0,this.canModifyLayer=!0}async initiate(){return Promise.resolve()}async terminate(){return Promise.resolve()}async reload(){return Promise.resolve()}loadPromise(){return Promise.resolve()}get isLoaded(){return!1}get layerExists(){return!1}getLayerTree(){return new xS(0,"Fake tree","getLayerTree() was not implemented in layer")}getSR(){return Si.latLongSR()}get visibility(){return!1}set visibility(t){}get opacity(){return 0}set opacity(t){}get scaleSet(){return new Zae}set scaleSet(t){}isOffscale(t=void 0){return!1}zoomToVisibleScale(){return Promise.resolve()}zoomToLayerBoundary(){return Promise.resolve()}get mouseTolerance(){return 0}set mouseTolerance(t){}get touchTolerance(){return 0}set touchTolerance(t){}get drawOrder(){return[]}canIdentify(){return!1}runIdentify(t){return[]}getAttributes(t=void 0){return Promise.resolve({features:[],oidIndex:{}})}abortAttributeLoad(){}clearFeatureCache(){}getTabularAttributes(){return Promise.resolve({columns:[],rows:[],fields:[],oidField:"error"})}getGraphic(t,i){return Promise.resolve(new Zd(new Pw))}getIcon(t){return Promise.resolve("")}getSqlFilter(t){return""}setSqlFilter(t,i){}applySqlFilter(t=[]){}getFilterOIDs(t=[],i=void 0){return Promise.resolve(void 0)}getGraphicExtent(t){return Promise.resolve(Gr.fromParams("fake",0,0,0,0))}get parentLayer(){if(this.isSublayer)return this._parentLayer;throw new Error("Attempted to get parent layer of a non-sublayer object")}set parentLayer(t){if(!this.isSublayer&&t)throw new Error("Attempted to set parent layer for a non-sublayer object");this._parentLayer=t}get sublayers(){return this._sublayers}onLoad(){}onError(){}updateLayerState(t){}updateDrawState(t){}updateInitiationState(t){}uidToIdx(t){if(t===this.uid)return-1;{const i=this._sublayers.findIndex(r=>r?.uid===t);if(i===-1)throw new Error(`Attempt to access non-existing unique id [layerid ${this.id}, uid ${t}]`);return i}}getSublayer(t){if(!this.supportsSublayers){console.warn(`Attempted to call getSublayer on a layer (layer id: ${this.id}) that does not support FCs`);return}let i;if(typeof t=="string"?i=this.uidToIdx(t):i=t,this._sublayers[i]===void 0)throw new Error(`Attempt to access non-existing layer index [layerid ${this.id}, lookup value ${t}]`);return this._sublayers[i]}controlAvailable(t){const i=this.$iApi.geo.layer.getLayerControls(this.id);return i?.disabledControls?.includes(t)?!1:i?.controls.includes(t)??!1}}class X3 extends Gg{timers;_serverVisibility;_scaleSet;_mouseTolerance;_touchTolerance;_drawOrder;_lastFilterUpdate="";origRampConfig;loadDefProm;viewDefProm;loadPromFulfilled;layerTree;esriWatches;constructor(t,i){super(t,i),this.name=t.name||"",this._scaleSet=new Zae,this._mouseTolerance=t.mouseTolerance!=null?t.mouseTolerance:5,this._touchTolerance=t.touchTolerance!=null?t.touchTolerance:15,this.geomType=Ti.NONE,this.dataFormat=fl.UNKNOWN,this.layerType=Ai.UNKNOWN,this.layerFormat=vc.UNKNOWN,this._drawOrder=[],this.expectedTime.draw=t.expectedDrawTime??1e4,this.expectedTime.load=t.expectedLoadTime??4e3,this.timers={draw:void 0,load:void 0},this.origRampConfig=t,this.id=t.id||"",this.uid=this.$iApi.geo.shared.generateUUID(),this.isRemoved=!1,this.isSublayer=!1,this.supportsIdentify=!1,this.identifyMode=as.NONE,this.supportsFeatures=!1,this.supportsSublayers=!1,this._serverVisibility=void 0,this.isFile=!1,this.extent=t.extent?Gr.fromConfig(`${this.id}_extent`,t.extent):void 0,this.layerState=co.NEW,this.initiationState=nl.NEW,this.drawState=sl.NOT_LOADED,this.loadDefProm=new ls,this.viewDefProm=new ls,this.loadPromFulfilled=!1,this.esriWatches=[],this.layerTree=new xS(0,this.uid,this.name,!0),this.maxLoadTime=t.maxLoadTime??2e4}noLayerErr(){console.error("Attempted to manipulate the layer but no layer found. Likely .initiate() was not finished or failed."),console.trace()}updateInitiationState(t){this.initiationState=t,this.$iApi.event.emit(Zt.LAYER_INITIATIONSTATECHANGE,{state:t,layer:this})}updateLayerState(t){this.layerState=t,this.$iApi.event.emit(Zt.LAYER_LAYERSTATECHANGE,{state:t,layer:this})}updateDrawState(t){this.drawState=t,t===sl.REFRESH?this.startTimer("draw"):t===sl.UP_TO_DATE&&this.stopTimer("draw"),this.$iApi.event.emit(Zt.LAYER_DRAWSTATECHANGE,{state:t,layer:this})}async initiate(){this.updateInitiationState(nl.INITIATING),this.startTimer("load");const[t]=await D0(this.onInitiate());this.drawState!==sl.UP_TO_DATE&&this.startTimer("draw"),t&&(console.error(t.message),this.onError()),this.updateInitiationState(nl.INITIATED)}async onInitiate(){if(this.isSublayer)return console.warn("Attempted to initiate a sublayer as a CommonLayer"),Promise.resolve();if(!this.esriLayer){this.noLayerErr();return}this.initiationState===nl.INITIATED&&console.error(`Encountered layer initialize while already initiated, layer id ${this.id}`),this.esriWatches.push(this.esriLayer.watch("visible",t=>{this.$iApi.event.emit(Zt.LAYER_VISIBILITYCHANGE,{visibility:t,layer:this})})),this.esriWatches.push(this.esriLayer.watch("opacity",t=>{this.$iApi.event.emit(Zt.LAYER_OPACITYCHANGE,{opacity:t,layer:this})})),this.esriWatches.push(this.esriLayer.watch("loadStatus",t=>{const i={"not-loaded":co.LOADING,loading:co.LOADING,loaded:co.LOADED,failed:co.ERROR};t==="loaded"?this.onLoad():t==="failed"?this.onError():this.updateLayerState(i[t])})),this.esriLayer.on("layerview-create",t=>{this.esriView=t.layerView,this.esriWatches.push(t.layerView.watch("updating",i=>{this.updateDrawState(i?sl.REFRESH:sl.UP_TO_DATE)})),this.viewDefProm.resolveMe()}),this.sublayers.forEach(t=>t.initiate())}async terminate(){this.updateInitiationState(nl.TERMINATING),this.sublayers.forEach(t=>t.terminate()),this.loadDefProm=new ls,this.loadPromFulfilled=!1,this.viewDefProm=new ls,this.esriWatches.forEach(t=>t.remove()),this.esriWatches=[],this.updateLayerState(co.NEW),this.updateDrawState(sl.NOT_LOADED),this.updateInitiationState(nl.TERMINATED)}async reload(){if(!this.$iApi.geo.map.esriMap){console.error("Attempted layer reload when no map exists");return}let t=0;if(this.initiationState===nl.INITIATED){if(this.esriLayer){const i=this.$iApi.geo.map.esriMap.layers.findIndex(r=>r.id===this.id);i>-1&&(t=i,this.$iApi.geo.map.esriMap.layers.remove(this.esriLayer))}this.$iApi.event.emit(Zt.LAYER_RELOAD_START,this),this.sublayers.forEach(i=>this.$iApi.event.emit(Zt.LAYER_RELOAD_START,i)),await this.terminate()}if(await this.initiate(),!this.esriLayer){console.error("ESRI layer failed to re-create during reload.");return}this.$iApi.geo.map.esriMap.layers.add(this.esriLayer,t),this.$iApi.event.emit(Zt.LAYER_RELOAD_END,this),this.sublayers.forEach(i=>this.$iApi.event.emit(Zt.LAYER_RELOAD_END,i))}makeEsriLayerConfig(t){return{id:t.id,url:t.url,opacity:t?.state?.opacity??1,visible:t?.state?.visibility??!0}}onLoad(){let t=!1;const i=setTimeout(()=>{this.maxLoadTime&&(t=!0,this.onError())},this.maxLoadTime),r=this.onLoadActions();Promise.all(r).then(()=>{clearTimeout(i),t?this.visibility=!1:(this.loadPromFulfilled&&(this.loadDefProm=new ls),this.loadDefProm.resolveMe(),this.loadPromFulfilled=!0,this.stopTimer("load"),this.sublayers.forEach(n=>n.onLoad()),this.updateLayerState(co.LOADED))}).catch(()=>{clearTimeout(i),this.onError()})}onError(){this.loadPromFulfilled&&(this.loadDefProm=new ls),this.loadDefProm.rejectMe(),this.loadPromFulfilled=!0,this.sublayers.forEach(t=>t.onError()),this.$iApi.notify.show(Ah.ERROR,this.$iApi.$i18n.t("layer.error",{id:this.id})),this.stopTimer("draw"),this.stopTimer("load"),this.updateLayerState(co.ERROR)}onLoadActions(){return this.name||(this.name=this.esriLayer?.title||this.id),this.isCosmetic||(this.identify=this.config.state?.identify??this.supportsIdentify),[this.$iApi.geo.proj.checkProj(this.getSR()).then(i=>i?Promise.resolve():Promise.reject())]}loadPromise(){return this.loadDefProm.getPromise()}get isLoaded(){return this.layerState===co.LOADED}get layerExists(){return!!this.esriLayer}mapCheck(){return this.$iApi.geo.map.created?!0:(console.error("Attempting to use map-dependent logic before the layer has been added to the map"),console.trace(),!1)}get scaleSet(){return this._scaleSet}set scaleSet(t){this._scaleSet=t}isOffscale(t=void 0){let i;if(typeof t>"u")if(this.mapCheck())i=this.$iApi.geo.map.getScale();else return!1;else i=t;return this.scaleSet.isOffScale(i).offScale}canIdentify(){return this.supportsIdentify&&this.isLoaded&&this.visibility&&this.identify&&!this.scaleSet.isOffScale(this.$iApi.geo.map.getScale()).offScale}zoomToVisibleScale(){return this.mapCheck()?this.$iApi.geo.map.zoomToVisibleScale(this.scaleSet):Promise.resolve()}zoomToLayerBoundary(){return this.extent?this.mapCheck()?this.$iApi.geo.map.zoomMapTo(this.extent):Promise.resolve():(console.error(`Attempted to zoom to boundary of a layer with no extent (Layer Id: ${this.id})`),Promise.resolve())}get mouseTolerance(){return this._mouseTolerance}set mouseTolerance(t){if(!this.supportsIdentify){console.warn("Attempted to set click tolerance on a layer that doesn't support identify");return}if(t<0){console.error("Attempted to set a negative click tolerance");return}this._mouseTolerance=t}get touchTolerance(){return this._touchTolerance}set touchTolerance(t){if(!this.supportsIdentify){console.warn("Attempted to set touch tolerance on a layer that doesn't support identify");return}if(t<0){console.error("Attempted to set a negative touch tolerance");return}this._touchTolerance=t}get drawOrder(){return this._drawOrder}getLayerTree(){return this.layerTree?this.layerTree:(this.noLayerErr(),new xS(0,"YOU DID AN ERROR","Error, check your console pls"))}get visibility(){return this.esriLayer?this.esriLayer.visible:(this.noLayerErr(),!1)}set visibility(t){this.esriLayer?this.esriLayer.visible=t:this.noLayerErr()}checkVisibility(){this.supportsSublayers&&(this.visibility=this.sublayers.some(t=>t.visibility))}get opacity(){return this.esriLayer?this.esriLayer.opacity:(this.noLayerErr(),0)}set opacity(t){this.esriLayer?this.esriLayer.opacity=t:this.noLayerErr()}stubError(){throw new Error(`Attempted to use a method not valid for ${this.layerType}`)}getAttributes(){return this.stubError(),Promise.resolve({features:[],oidIndex:{}})}abortAttributeLoad(){this.stubError()}clearFeatureCache(){this.stubError()}getTabularAttributes(){return this.stubError(),Promise.resolve({columns:[],rows:[],fields:[],oidField:"error"})}getGraphic(t,i){return this.stubError(),Promise.resolve(new Zd(new Pw))}getIcon(t){return this.stubError(),Promise.resolve("")}getSqlFilter(t){return this.stubError(),""}setSqlFilter(t,i){this.stubError()}getFilterOIDs(t=[],i=void 0){return this.stubError(),Promise.resolve(void 0)}getGraphicExtent(t){return this.stubError(),Promise.resolve(Gr.fromParams("fake",0,0,0,0))}applySqlFilter(t=[]){this.stubError()}setCustomParameter(t,i,r=!0){this.stubError()}getSR(){return this.esriLayer?Si.fromESRI(this.esriLayer.spatialReference):(this.noLayerErr(),Si.latLongSR())}startTimer(t){this.stopTimer(t),this.expectedTime[t]>0&&(this.timers[t]=setTimeout(()=>this.$iApi.notify.show(Ah.WARNING,this.$iApi.$i18n.t(`layer.long${t}`,{id:this.name||this.id})),this.expectedTime[t]))}stopTimer(t){this.timers[t]&&clearTimeout(this.timers[t])}}class zC extends X3{geomType;esriFields;fieldList;attLoader;renderer;serviceUrl;canModifyLayer;quickCache;filter;constructor(t,i){super(t,i),this.supportsIdentify=!0,this.geomType=Ti.UNKNOWN,this.serviceUrl="",this.fieldList="",this.esriFields=[],this.canModifyLayer=!0,this.filter=new v9e(t.permanentFilteredQuery||"",t.initialFilteredQuery||"")}notLoadedErr(){console.error("Attempted to manipulate the layer before it was loaded"),console.trace()}makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}async loadLayerMetadata(t={}){if(!this.serviceUrl)return;const[i,r]=await D0(St(this.serviceUrl,{query:{f:"json"}}));if(!r)return console.error(`Service metadata load error: ${this.serviceUrl}`,i),Promise.reject(new Error(`Service metadata load error: ${this.serviceUrl}`));if(!r.data)return console.error(`Service metadata load error: ${this.serviceUrl}`),Promise.reject(new Error(`Service metadata load error: ${this.serviceUrl}`));const n=r.data;if(this.geomType=this.$iApi.geo.geom.serverGeomTypeToRampGeomType(n.geometryType),this.quickCache=new npe(this.geomType),this.scaleSet.minScale=n.effectiveMinScale||n.minScale,this.scaleSet.maxScale=n.effectiveMaxScale||n.maxScale,this.supportsFeatures=!1,this.canModifyLayer=this.layerType===Ai.SUBLAYER?n.canModifyLayer:!0,this.extent=this.extent??(n.extent?Gr.fromArcServer(n.extent,this.id+"_extent"):void 0),this._serverVisibility=n.defaultVisibility,n.type==="Feature Layer"){this.supportsFeatures=!0,this.dataFormat=fl.ESRI_FEATURE,this.esriFields=wn(n.fields.map(l=>ol.fromJSON(l))),this.fields=this.esriFields.map(l=>({name:l.name,alias:l.alias,type:l.type,length:l.length})),this.nameField=n.displayField,this.esriFields.every(l=>l.type==="oid"?(this.oidField=l.name,!1):!0)&&(this.oidField=n.objectIdField||(()=>(console.error(`Encountered service with no OID defined: ${this.serviceUrl}`),""))()),this.drawOrder.forEach(l=>{this.esriFields.findIndex(u=>u.name===l.field)===-1&&console.error(`Draw order for layer ${this.id} references invalid field ${l.field}`)});const o=t&&t.customRenderer&&t.customRenderer.type?t.customRenderer:Cb(n.drawingInfo.renderer);this.renderer=this.$iApi.geo.symbology.makeRenderer(o,this.esriFields),this.legend=this.$iApi.geo.symbology.rendererToLegend(this.renderer);const a={supportsLimit:(n.currentVersion||1)>=10.1,serviceUrl:this.serviceUrl,oidField:this.oidField,batchSize:-1,attribs:"*",permanentFilter:this.getSqlFilter(Ju.PERMANENT)};this.attLoader=new mrt(this.$iApi,a),this.origRampConfig.name||(this.name=n.name??this.id)}else this.dataFormat=fl.ESRI_RASTER,this.esriFields=[]}processFieldMetadata(t=void 0){if(!t){this.fieldList="*";return}if(!t.fieldInfo)throw new Error("processFieldMetadata called before fieldInfo was set on config metadata");if(t.exclusiveFields){t.fieldInfo.find(r=>r.name===this.oidField)||t.fieldInfo.push({name:this.oidField}),this.fieldList=t.fieldInfo.map(r=>r.name).join(",");const i=t.fieldInfo;this.esriFields=this.esriFields.filter(r=>i.find(n=>n.name===r.name))}else this.fieldList="*";t.fieldInfo.forEach(i=>{if(i.alias){const r=this.esriFields.find(n=>n.name===i.name);r&&(r.alias=i.alias)}})}getAttributes(){return this.attLoader?this.attLoader.getAttribs():(this.noLayerErr(),Promise.resolve({oidIndex:{},features:[]}))}abortAttributeLoad(){this.attLoader?this.attLoader.abortAttribLoad():this.noLayerErr()}clearFeatureCache(){this.attLoader?this.attLoader.destroyAttribs():this.noLayerErr(),this.quickCache&&this.quickCache.clearAll()}getTabularAttributes(){if(!this.attLoader)throw new Error("getTabularAttributes call with missing attribute loader");return this.attLoader.tabularAttributesCache||(this.attLoader.tabularAttributesCache=this.getTabularAttributesGuts()),this.attLoader.tabularAttributesCache}async getTabularAttributesGuts(){if(!this.attLoader)throw new Error("getTabularAttributesGuts call with missing attribute loader");if(this.dataFormat===fl.ESRI_RASTER)throw new Error("Attempting to get attributes on a raster layer.");const t=await this.attLoader.getAttribs();if(!t.features||t.features.length===0)return{columns:[],rows:[],fields:[],oidField:""};const i=this.esriFields.filter(n=>Object.prototype.hasOwnProperty.call(t.features[0],oi(n).name)).map(n=>({data:oi(n).name,title:oi(n).alias||oi(n).name})),r=t.features.map(n=>{const s=Kae({},n);return s.rvInteractive="",s.rvSymbol=this.renderer?.getGraphicIcon(n),s.rvUid=iu(this.$vApp.$pinia).getLayerById(this.id).uid,s});return i.forEach(n=>{if(n.data.slice(-2)==="()"){const s=function(){return this[n.data]},o=n.data.slice(0,-2);r.forEach(a=>{a[o]=s})}}),{columns:i,rows:r,fields:this.fields,oidField:this.oidField}}async getGraphic(t,i){let r={},n=new Pw;const s=this.$iApi.geo.map;if(!this.quickCache)throw new Error("getGraphic call with missing quickCache");if(!this.attLoader)throw new Error("getGraphic call with missing attribute loader");let o=!1,a=!1,l=0;if(i.getAttribs||i.getStyle){const c=this.quickCache.getAttribs(t);if(c)r=c;else if(this.attLoader.isLoaded()||this.isFile){const d=await this.attLoader.getAttribs();r=d.features[d.oidIndex[t]]}else o=!0}if(i.getGeom){l=s.getScale();const c=this.quickCache.getGeom(t,l);c?n=c:a=!0}if(o||a){const c={oid:t,serviceUrl:this.serviceUrl,includeGeometry:a,attribs:this.fieldList};a&&(c.mapSR=s.getSR().wkid?.toString(),this.quickCache.isPoint||(c.maxOffset=s.esriView?.resolution));const d=await this.$iApi.geo.attributes.loadSingleFeature(c);a&&(this.quickCache.setGeom(t,d.geometry,l),n=d.geometry),(o||typeof this.quickCache.getAttribs(t)>"u")&&(this.quickCache.setAttribs(t,d.attributes),o&&(r=d.attributes))}const u=new Zd(n,"",i.getAttribs?r:void 0);if(i.getStyle){const c=oi(this.renderer.getGraphicSymbol(r));u.style=this.$iApi.geo.geom.styleEsriToRamp(c)}return u}async getIcon(t){if(!this.renderer)throw new Error("getIcon called before renderer is defined");const i=await this.getGraphic(t,{getAttribs:!0});return this.$iApi.geo.symbology.getGraphicIcon(i.attributes||{},this.renderer)}setSqlFilter(t,i){const r=this.filter.getSql(t);if(i===r)return;this.filter.setSql(t,i),this.$iApi.event.emit(Zt.FILTER_CHANGE,{uid:this.uid,filterKey:t});const n=`${this.uid}-${t}-${i}`;this._lastFilterUpdate=n,setTimeout(()=>{this._lastFilterUpdate===n&&this.applySqlFilter()},100)}applySqlFilter(t=[]){throw new Error(`attempted to apply sql filter ${t} to a layer not equipped for it. likely a new subclass of AttribLayer did not override applySqlFilter`)}getSqlFilter(t){return this.filter.getSql(t)}getCombinedSqlFilter(t){return this.filter.getCombinedSql(t)}async getFilterOIDs(t=[],i=void 0){const r=this.filter.getCombinedSql(t),n=!!i;if(!(r||n))return;i&&this.filter.setExtent(i);const s=this.filter.sqlActiveFilters(t);let o=this.filter.getCache(s,n);if(!o){const a={filterGeometry:i,filterSql:r,includeGeometry:!1};o=this.queryOIDs(a),this.filter.setCache(o,s,n)}return o}async loadFeatureCount(){if(!this.serviceUrl){console.warn("A layer without a url attempted to run the server based feature count routine.");return}const t={query:{f:"json",where:"1=1",returnCountOnly:!0,returnGeometry:!1}},[i,r]=await D0(St(`${this.serviceUrl}/query`,t));if(!r){console.warn(`Feature count request unsuccessful: ${this.serviceUrl}`,i);return}if(!r.data){console.warn(`Unable to load feature count: ${this.serviceUrl}`);return}this.featureCount=r.data.count}queryOIDs(t){this.isFile&&(console.error("a file layer called a server based query function"),console.trace());const i={url:this.serviceUrl,...t};return this.$iApi.geo.query.arcGisServerQueryIds(i)}async queryFeaturesDiscrete(t){const i=await this.queryOIDs(t),r={getGeom:!!t.includeGeometry,getAttribs:!0};return i.map(n=>({oid:n,graphic:this.getGraphic(n,r)}))}async queryFeatures(t){const i=await this.queryFeaturesDiscrete(t);return Promise.all(i.map(r=>r.graphic))}}class irt extends X3{constructor(t,i){super(t,i),this.dataFormat=fl.ESRI_FEATURE,this.layerFormat=vc.GRAPHIC,this.hovertips=!1}_graphics=[];makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}getGraphicCount(){return this._graphics.length}getLocalGraphic(t){return this._graphics.find(i=>i.id===t)}getEsriGraphic(t){return this.esriLayer?.graphics.find(i=>i.id===t)}notLoadedErr(){console.error("Attempted to manipulate the layer before it was loaded"),console.trace()}get graphics(){return this._graphics.slice()}async addGraphic(t){if(!this.esriLayer){this.noLayerErr();return}let i;t instanceof Array?i=t:i=[t];const r=i.filter(l=>this._graphics.findIndex(c=>c.id===l.id)===-1?(this._graphics.push(l),!0):(console.error(`Attempting to add graphic with id '${l.id}' that has already been added.`),!1)),n=this.$iApi.geo.map.getSR(),s=r.map(l=>this.$iApi.geo.proj.projectGeometry(n,l.geometry)),o=await Promise.all(s),a=r.map((l,u)=>{const c=new Zd(o[u],l.id,l.attributes);return c.style=l.style,this.$iApi.geo.geom.graphicRampToEsri(c)});this.esriLayer.addMany(a)}removeGraphic(t){if(!this.esriLayer){this.noLayerErr();return}if(typeof t>"u"){this.esriLayer.removeAll(),this._graphics=[];return}let i;Array.isArray(t)?i=t:i=[t];const r=i.map(s=>typeof s=="string"?s:s.id),n=[];r.forEach(s=>{const o=this.esriLayer?.graphics.find(a=>a.id===s);if(o){n.push(o);const a=this._graphics.findIndex(l=>l.id===s);a!=-1&&this._graphics.splice(a,1)}}),this.esriLayer.removeMany(n),this._graphics=this._graphics.filter(s=>r.includes(s.id))}}class rrt extends irt{constructor(t,i){super(t,i),this.layerType=Ai.GRAPHIC}async onInitiate(){this.esriLayer=wn(new sTe(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}onLoadActions(){const t=super.onLoadActions();return this.layerTree.name=this.name,this.updateDrawState(sl.UP_TO_DATE),t}}function DZ(e,t){if(e.findIndex(i=>i.name===t)===-1){const i=e.find(r=>r.alias===t);return i?i.name:(console.warn(`Cannot find name field in layer field list: ${t}`),"OBJECTID")}else return t}class GC extends zC{esriJson;sourceGeoJson;tooltipField;constructor(t,i){super(t,i),this.supportsIdentify=!0,this.isFile=!0,this.dataFormat=fl.ESRI_FEATURE,this.layerFormat=vc.FEATURE,this.tooltipField="",t.identifyMode&&t.identifyMode!==as.NONE?this.identifyMode=t.identifyMode:this.identifyMode=as.HYBRID}async reload(){if(this.origRampConfig.caching!==!0&&!this.origRampConfig.url){console.error("Attempted to reload file layer from non server source without caching enabled.");return}await super.reload()}async onInitiate(){if(!this.sourceGeoJson)throw new Error("File Layer is missing raw data.");const t=typeof this.sourceGeoJson=="string"?JSON.parse(this.sourceGeoJson):JSON.parse(JSON.stringify(this.sourceGeoJson)),i={layerId:this.origRampConfig.id||"",targetSR:this.$iApi.geo.map.getSR(),...this.origRampConfig.latField&&{latField:this.origRampConfig.latField},...this.origRampConfig.longField&&{lonField:this.origRampConfig.longField},colour:this.origRampConfig.colour,fieldMetadata:this.origRampConfig.fieldMetadata};this.esriJson=await this.$iApi.geo.layer.files.geoJsonToEsriJson(t,i),this.esriLayer=wn(new A4(this.makeEsriLayerConfig(this.origRampConfig))),this.esriJson=void 0,this.origRampConfig.caching!==!0&&delete this.origRampConfig.rawData,delete this.sourceGeoJson,await super.onInitiate()}makeEsriLayerConfig(t){const i=super.makeEsriLayerConfig(t),r="OBJECTID";return["source","objectIdField","id","fields","renderer","spatialReference","geometryType"].forEach(s=>{i[s]=this.esriJson[s]}),this.origRampConfig.nameField?i.displayField=DZ(i.fields,this.origRampConfig.nameField)||r:i.displayField=r,i.outFields=["*"],delete i.url,Array.isArray(t.drawOrder)&&t.drawOrder.length>0?(i.orderBy=t.drawOrder.map(s=>({field:s.field,order:s.ascending?"ascending":"descending"})),this._drawOrder=t.drawOrder.slice()):(i.orderBy=[{field:r,order:"descending"}],this._drawOrder=[{field:r,ascending:!1}]),i}onLoadActions(){const t=super.onLoadActions();if(this.esriLayer&&this.origRampConfig.customRenderer?.type&&(this.esriLayer.renderer=Cb(this.config.customRenderer)),this.layerTree.name=this.name,this.extractLayerMetadata(),this.origRampConfig.tooltipField?this.tooltipField=DZ(this.esriFields,this.origRampConfig.tooltipField):this.tooltipField=this.nameField,this.processFieldMetadata(this.origRampConfig.fieldMetadata),!this.attLoader)throw new Error("file layer did not have attribute loader object");return this.attLoader.updateFieldList(this.fieldList),this.featureCount=this.esriLayer?.source.length||0,t.push(this.viewDefProm.getPromise()),this.filter.getCombinedSql()&&Promise.all(t).then(()=>{this.applySqlFilter()}),t}runIdentify(t){if(!this.canIdentify())return[];const i=new ls,r=Hn({items:[],loading:i.getPromise(),loaded:!1,errored:!1,uid:this.uid,requestTime:Date.now()});let n=Promise.resolve(),s=Promise.resolve(),o=[];if(this.identifyMode===as.HYBRID||this.identifyMode===as.GEOMETRIC){const a={includeGeometry:!1};this.geomType!==Ti.POLYGON&&t.geometry.type===Ti.POINT?a.filterGeometry=this.$iApi.geo.query.makeClickBuffer(t.geometry,t.tolerance):a.filterGeometry=t.geometry,a.filterSql=this.getCombinedSqlFilter(),s=this.queryFeatures(a).then(l=>{o=l})}return t.hitTest&&(this.identifyMode===as.HYBRID||this.identifyMode===as.SYMBOLIC)&&(n=s.then(async()=>{const a=await t.hitTest,l=await Promise.all(a.filter(u=>u.layerId===this.id&&o.findIndex(c=>u.oid===c.attributes[this.oidField])===-1).map(u=>this.getGraphic(u.oid,{getAttribs:!0})));o=o.concat(l)})),Promise.all([n,s]).then(()=>{o.forEach(a=>{const l=Hn({data:a.attributes,format:qg.ESRI,loaded:!0,loading:Promise.resolve()});r.items.push(l)}),r.loaded=!0,i.resolveMe()}).catch(()=>{r.errored=!0,i.resolveMe()}),[r]}extractLayerMetadata(){const t=this.esriLayer;if(!t)throw new Error("file layer attempted to extract data from esri layer, esri layer did not exist");this.supportsFeatures=!0,this.geomType=this.$iApi.geo.geom.clientGeomTypeToRampGeomType(t.geometryType),this.quickCache=new npe(this.geomType),this.scaleSet.minScale=t.minScale||0,this.scaleSet.maxScale=t.maxScale||0,this.extent=this.extent??Gr.fromESRI(t.fullExtent,this.id+"_extent"),this.esriFields=wn(t.fields.slice()),this.fields=this.esriFields.map(r=>({name:r.name,alias:r.alias,type:r.type,length:r.length})),this.nameField=t.displayField,this.oidField=t.objectIdField,this.renderer=this.$iApi.geo.symbology.makeRenderer(t.renderer,this.esriFields),this.legend=this.$iApi.geo.symbology.rendererToLegend(this.renderer);const i={sourceGraphics:t.source,oidField:this.oidField,attribs:"*",batchSize:-1};this.attLoader=new yrt(this.$iApi,i)}async getGraphic(t,i){const r={filterSql:`${this.oidField}=${t}`,includeGeometry:!!i.getGeom},n=await this.queryFeatures(r);if(n.length===0)throw new Error(`Could not find object id ${t}`);n.length!==1&&console.warn("did not get a single result on a query for a specific object id");const s=n[0];if(i.getStyle){const o=oi(this.renderer.getGraphicSymbol(s.attributes));s.style=this.$iApi.geo.geom.styleEsriToRamp(o)}return s}async queryFeatures(t){const i={layer:this,...t};return this.$iApi.geo.query.geoJsonQuery(i)}async queryOIDs(t){const i={layer:this,...t};return(await this.$iApi.geo.query.geoJsonQuery(i)).map(n=>n.attributes?n.attributes[this.oidField]:-1)}applySqlFilter(t=[]){if(!this.esriView){this.noLayerErr();return}const i=this.filter.getCombinedSql(t);oi(this.esriView).filter=new lte({where:i})}}class nrt extends GC{constructor(t,i){super(t,i),this.layerType=Ai.GEOJSON}async onInitiate(){if(this.origRampConfig.rawData&&(typeof this.origRampConfig.rawData=="string"||this.origRampConfig.rawData instanceof Object))this.sourceGeoJson=this.origRampConfig.rawData;else if(this.origRampConfig.url)this.sourceGeoJson=await this.$iApi.geo.layer.files.fetchFileData(this.origRampConfig.url,this.layerType);else throw new Error("GeoJson layer config contains no raw data or url");await super.onInitiate()}}class srt extends GC{constructor(t,i){super(t,i),this.layerType=Ai.SHAPEFILE}async onInitiate(){let t;if(this.origRampConfig.rawData&&typeof this.origRampConfig.rawData=="string")t=this.origRampConfig.rawData;else if(this.origRampConfig.url)t=await this.$iApi.geo.layer.files.fetchFileData(this.origRampConfig.url,this.layerType);else throw new Error("shapefile file config contains no raw data or url");this.sourceGeoJson=await this.$iApi.geo.layer.files.shapefileToGeoJson(t),await super.onInitiate()}}class ort extends GC{constructor(t,i){super(t,i),this.layerType=Ai.CSV}async onInitiate(){if(!this.origRampConfig.latField||!this.origRampConfig.longField)throw new Error("csv file config missing lat or long field names");let t;if(this.origRampConfig.rawData&&typeof this.origRampConfig.rawData=="string")t=this.origRampConfig.rawData;else if(this.origRampConfig.url)t=await this.$iApi.geo.layer.files.fetchFileData(this.origRampConfig.url,this.layerType);else throw new Error("Csv file config contains no raw data or url");this.sourceGeoJson=await this.$iApi.geo.layer.files.csvToGeoJson(t,{latfield:this.origRampConfig.latField,lonfield:this.origRampConfig.longField}),await super.onInitiate()}}class art extends zC{tooltipField;constructor(t,i){super(t,i),this.dataFormat=fl.ESRI_FEATURE,this.tooltipField="",this.supportsIdentify=!0,this.layerType=Ai.FEATURE,this.layerFormat=vc.FEATURE,t.identifyMode&&t.identifyMode!==as.NONE?this.identifyMode=t.identifyMode:this.identifyMode=as.HYBRID}async onInitiate(){wn(this.esriLayer=new A4(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){const i=super.makeEsriLayerConfig(t);return(t.initialFilteredQuery||t.permanentFilteredQuery)&&(i.definitionExpression=this.filter.getCombinedSql()),Array.isArray(t.drawOrder)&&t.drawOrder.length>0&&(i.orderBy=t.drawOrder.map(r=>({field:r.field,order:r.ascending?"ascending":"descending"})),this._drawOrder=t.drawOrder.slice()),i}onLoadActions(){const t=super.onLoadActions(),i=this.esriLayer&&this.origRampConfig.customRenderer?.type;i&&(this.esriLayer.renderer=Cb(this.config.customRenderer));const r=this.esriLayer.parsedUrl.path,s=this.$iApi.geo.shared.parseUrlIndex(r).index||0;this.serviceUrl=r;const o=this.loadLayerMetadata(i?{customRenderer:this.esriLayer?.renderer}:{}).then(()=>{if(!this.attLoader)throw new Error("layer metadata loader did not create attribute loader");this.visibility=this.origRampConfig?.state?.visibility??this._serverVisibility??!0,this.nameField=this.origRampConfig.nameField||this.nameField||"",this.tooltipField=this.origRampConfig.tooltipField||this.nameField,this.processFieldMetadata(this.origRampConfig.fieldMetadata),this.attLoader.updateFieldList(this.fieldList),this.esriLayer?.orderBy||(this.esriLayer.orderBy=[{field:this.oidField,order:"descending"}],this._drawOrder=[{field:this.oidField,ascending:!1}])}),a=this.loadFeatureCount();return this.layerTree.name=this.name,this.layerTree.layerIdx=s,t.push(o,a),t}runIdentify(t){if(!this.canIdentify())return[];const i=new ls,r=Hn({items:[],loading:i.getPromise(),loaded:!1,errored:!1,uid:this.uid,requestTime:Date.now()});let n=Promise.resolve(),s=Promise.resolve(),o=[];if(this.identifyMode===as.HYBRID||this.identifyMode===as.GEOMETRIC){const a={includeGeometry:!1};this.geomType!==Ti.POLYGON&&t.geometry.type===Ti.POINT?a.filterGeometry=this.$iApi.geo.query.makeClickBuffer(t.geometry,t.tolerance):a.filterGeometry=t.geometry,a.filterSql=this.getCombinedSqlFilter(),s=this.queryFeaturesDiscrete(a).then(l=>{o=l})}return t.hitTest&&(this.identifyMode===as.HYBRID||this.identifyMode===as.SYMBOLIC)&&(n=s.then(async()=>{(await t.hitTest).filter(l=>l.layerId===this.id&&o.findIndex(u=>l.oid===u.oid)===-1).forEach(l=>{o.push({oid:l.oid,graphic:this.getGraphic(l.oid,{getAttribs:!0})})})})),Promise.all([n,s]).then(()=>{o.forEach(a=>{const l=Hn({data:void 0,format:qg.ESRI,loaded:!1,loading:new Promise(u=>{a.graphic.then(c=>{l.data=c.attributes,l.loaded=!0,u()})})});r.items.push(l)}),r.loaded=!0,i.resolveMe()}).catch(()=>{r.errored=!0,i.resolveMe()}),[r]}applySqlFilter(t=[]){if(!this.esriLayer){this.noLayerErr();return}const i=this.filter.getCombinedSql(t);this.esriLayer.definitionExpression=i}getGraphicExtent(t){return new Promise((i,r)=>{this.esriLayer?["multipoint","polyline","polygon"].includes(this.esriLayer.geometryType)?this.quickCache?.getExtent(t)?i(this.quickCache.getExtent(t)):this.esriLayer.queryExtent({objectIds:[t],outSpatialReference:this.$iApi.geo.map.getSR().toESRI()}).then(n=>{const s=Gr.fromESRI(n.extent);this.quickCache?.setExtent(t,s),i(s)}).catch(()=>{console.error(`Extent querying failed for ${t}.`),r()}):(console.error(`Attempted to query extent for invalid geometry type ${this.esriLayer.geometryType}.`),r()):(this.noLayerErr(),r())})}}class lrt extends zC{isDynamic;origState;constructor(t,i){super(t,i),this.supportsIdentify=!0,this.supportsSublayers=!0,this.layerType=Ai.MAPIMAGE,this.layerFormat=vc.MAPIMAGE,this.isDynamic=!1,this.hovertips=!1,this.layerTree.layerIdx=-1,this.identifyMode=as.GEOMETRIC}async onInitiate(){this.esriLayer=wn(new n9(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){const i=super.makeEsriLayerConfig(t);return this.origState={visibility:i.visible,opacity:i.opacity},i.visible=!1,t.imageFormat&&(i.imageFormat=t.imageFormat),i}onLoadActions(){const t=super.onLoadActions();if(!this.esriLayer)return this.noLayerErr(),t;this.layerTree.name=this.name,this.isDynamic=this.esriLayer.capabilities.exportMap.supportsDynamicLayers,this.extent=this.extent??Gr.fromESRI(this.esriLayer.fullExtent,this.id+"_extent");const i=o=>{const a=this.esriLayer?.allSublayers.find(l=>l.id===o);if(!a)throw new Error("attempt to find map image sublayer failed");return a},r={};this.origRampConfig.sublayers.forEach(o=>{r[o.index||0]=o});const n=[],s=(o,a)=>{const l=o.id,u=r[l];if(o.sublayers&&o.sublayers.length>0){const c=(u?u.name:"")||o.title||"",d=new xS(l,"",c,!1);a.findChildByIdx(l)||a.children.push(d),o.sublayers.reverse().forEach(f=>{s(f,d)})}else{this._sublayers[l]||(this._sublayers[l]=new urt({id:`${this.id}-${l}`,layerType:Ai.SUBLAYER,name:r[l]?.name,state:r[l]?.state??{opacity:this.opacity,visibility:this.visibility,hovertips:this.hovertips,identify:this.identify},extent:r[l]?.extent,controls:r[l]?.controls,disabledControls:r[l]?.disabledControls,initialFilteredQuery:r[l]?.initialFilteredQuery,permanentFilteredQuery:r[l]?.permanentFilteredQuery},this.$iApi,this,l));const c=this._sublayers[l];if(c.isRemoved)return;const d=(u?u.name:"")||o.title||"";if(c.name=d,n.push(c),!a.children.map(f=>f.layerIdx).includes(l)){const f=new xS(l,c.uid,c.name,!1);a.children.push(f)}c.esriWatches.push(o.watch("visible",()=>{this.$iApi.event.emit(Zt.LAYER_VISIBILITYCHANGE,{visibility:c.visibility,layer:c}),c.parentLayer?.checkVisibility()}),o.watch("opacity",f=>{this.$iApi.event.emit(Zt.LAYER_OPACITYCHANGE,{opacity:f,layer:c})}))}};return this.origRampConfig.sublayers.forEach(o=>{if(!o.cosmetic){const a=i(o.index||0);s(a,this.layerTree)}}),n.forEach(o=>{const a=i(o.layerIdx),l=r[o.layerIdx];o.serviceUrl=a.url,o.fetchEsriSublayer(this),o.initiate();const u=o.esriSubLayer&&l?.customRenderer?.type;u&&(o.esriSubLayer.renderer=Cb(l.customRenderer));const c=o.loadLayerMetadata(u?{customRenderer:o.esriSubLayer?.renderer}:{}).then(()=>{const d=r[o.layerIdx];if(d?(o.visibility=o.isRemoved?!1:d.state?.visibility??(this.origState.visibility?o._serverVisibility??this.origState.visibility:this.origState.visibility??o._serverVisibility)??!0,o.opacity=d.state?.opacity??this.origState.opacity??1,o.nameField=d.nameField||o.nameField||"",o.processFieldMetadata(d.fieldMetadata),o.canModifyLayer||this.$iApi.notify.show(Ah.WARNING,this.$iApi.$i18n.t("layer.filtersdisabled",{name:o.name||o.id}))):o.processFieldMetadata(),o.supportsFeatures){if(!o.attLoader)throw new Error("Map Image Sublayer - expected attLoader to exist");return o.attLoader.updateFieldList(o.fieldList),o.loadFeatureCount()}else return Promise.resolve()});t.push(c)}),this.esriLayer.allSublayers.forEach(o=>{!o.sublayers&&!n.find(a=>a.layerIdx===o.id)&&(o.visible=!1,o.opacity=0)}),this.visibility=this.origState.visibility??!0,t}updateLayerState(t){super.updateLayerState(t),this.sublayers.forEach(i=>i.updateLayerState(t))}updateDrawState(t){super.updateDrawState(t),this.sublayers.forEach(i=>i.updateDrawState(t))}runIdentify(t){if(!this.canIdentify())return[];t.sublayerIds&&(t.sublayerIds=t.sublayerIds.map(n=>typeof n=="number"?this.layerTree?.findChildByIdx(n)?.uid:n));const i=t.sublayerIds?this._sublayers.filter(n=>t.sublayerIds?.includes(n.uid)):this._sublayers.filter(n=>n.canIdentify());if(i.length===0)return[];let r;return t.geometry.type===Ti.POINT&&(r=this.$iApi.geo.query.makeClickBuffer(t.geometry,t.tolerance)),i.map(n=>{const s=new ls,o={},a=Hn({items:[],loading:s.getPromise(),loaded:!1,errored:!1,uid:n.uid,requestTime:Date.now()});return n.geomType!==Ti.POLYGON&&r?o.filterGeometry=r:o.filterGeometry=t.geometry,o.filterSql=n.getCombinedSqlFilter(),n.queryFeaturesDiscrete(o).then(l=>{l.forEach(u=>{const c=Hn({data:void 0,format:qg.ESRI,loaded:!1,loading:new Promise(d=>{u.graphic.then(f=>{c.data=f.attributes,c.loaded=!0,d()})})});a.items.push(c)}),a.loaded=!0,s.resolveMe()}).catch(()=>{a.errored=!0,s.resolveMe()}),a})}noFeaturesErr(){console.error("This method targets features and must be called on a Sublayer."),console.trace()}getAttributes(){return this.noFeaturesErr(),Promise.resolve({features:[],oidIndex:{}})}abortAttributeLoad(){this.noFeaturesErr()}clearFeatureCache(){this.noFeaturesErr()}getTabularAttributes(){return this.noFeaturesErr(),Promise.resolve({columns:[],rows:[],fields:[],oidField:"error"})}getGraphic(t,i){return this.noFeaturesErr(),Promise.resolve(new Zd(new Pw))}getIcon(t){return this.noFeaturesErr(),Promise.resolve("")}getSqlFilter(t){return this.noFeaturesErr(),""}applySqlFilter(t=[]){this.noFeaturesErr()}getFilterOIDs(t=[],i=void 0){return this.noFeaturesErr(),Promise.resolve(void 0)}}class urt extends zC{tooltipField;constructor(t,i,r,n=0){if(super(t,i),this.layerType=Ai.SUBLAYER,this.layerFormat=vc.MAPIMAGE,this.isSublayer=!0,this.layerIdx=n,this.parentLayer=r,this.dataFormat=fl.ESRI_FEATURE,this.tooltipField="",this.hovertips=!1,!r.esriLayer)throw new Error("Map Image Layer with no internal esri layer encountered in sublayer creation");this.fetchEsriSublayer(r),(t.initialFilteredQuery||t.permanentFilteredQuery)&&this.applySqlFilter()}fetchEsriSublayer(t){if(!t.esriLayer){console.error("Attempted to fetch the ESRI sublayer when parent has no ESRI layer");return}this.esriSubLayer=wn(t.esriLayer.allSublayers.find(i=>i.id===this.layerIdx))}onLoadActions(){return this.layerTree=this.parentLayer.getLayerTree().findChildByUid(this.uid),this.layerTree.name=this.name,this.layerTree.layerIdx=this.layerIdx,this.identify=this.config.state.identify!=null?this.config.state.identify:this.supportsIdentify,[]}async onInitiate(){this.initiationState=nl.INITIATED}async reload(){if(!this.$iApi.geo.map.esriMap){console.error("Attempted layer reload when no map exists");return}this.parentLayer?.reload()}get layerExists(){return!!(this.parentLayer?.esriLayer&&this.esriSubLayer)}get visibility(){return!this.parentLayer?.esriLayer||!this.esriSubLayer?(this.noLayerErr(),!1):this.esriSubLayer.visible}set visibility(t){if(!this.parentLayer?.esriLayer||!this.esriSubLayer){this.noLayerErr();return}this.esriSubLayer.visible=t}get opacity(){return!this.parentLayer?.esriLayer||!this.esriSubLayer?(this.noLayerErr(),0):this.esriSubLayer.opacity}set opacity(t){if(!this.parentLayer?.esriLayer||!this.esriSubLayer){this.noLayerErr();return}this.parentLayer.isDynamic||console.warn(`Opacity of a Map Image Sublayer was set. The service does not support sublayer opacity. LayerId ${this.id}`),this.esriSubLayer.opacity=t}get mouseTolerance(){return!this.parentLayer?.esriLayer||!this.esriSubLayer?(this.noLayerErr(),0):this.parentLayer.mouseTolerance}set mouseTolerance(t){if(!this.parentLayer?.esriLayer||!this.esriSubLayer){this.noLayerErr();return}this.parentLayer.mouseTolerance=t}get touchTolerance(){return!this.parentLayer?.esriLayer||!this.esriSubLayer?(this.noLayerErr(),0):this.parentLayer.touchTolerance}set touchTolerance(t){if(!this.parentLayer?.esriLayer||!this.esriSubLayer){this.noLayerErr();return}this.parentLayer.touchTolerance=t}applySqlFilter(t=[]){if(!this.parentLayer?.esriLayer||!this.esriSubLayer){this.noLayerErr();return}const i=this.filter.getCombinedSql(t);this.esriSubLayer.definitionExpression=i}getSR(){return this.parentLayer?.esriLayer?Si.fromESRI(this._parentLayer?.esriLayer?.spatialReference):(this.noLayerErr(),Si.latLongSR())}}class crt extends X3{constructor(t,i){super(t,i),this.supportsIdentify=!1,this.layerType=Ai.OSM,this.layerFormat=vc.OSM,this.dataFormat=fl.OSM_TILE,this.supportsFeatures=!1,this.hovertips=!1}async onInitiate(){this.esriLayer=wn(new s9(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}onLoadActions(){const t=super.onLoadActions();this.layerTree.name=this.name;const i=this.$iApi.geo.symbology.generatePlaceholderSymbology("O","#03fc4e"),r={uid:this.$iApi.geo.shared.generateUUID(),label:"OpenStreetMap",svgcode:i.svgcode,esriStandard:!0,drawPromise:Promise.resolve()};return this.legend.push(r),t}}class hrt extends X3{constructor(t,i){super(t,i),this.supportsIdentify=!1,this.hovertips=!1,this.layerType=Ai.TILE,this.layerFormat=vc.TILE,this.dataFormat=fl.ESRI_TILE}async onInitiate(){this.esriLayer=wn(new o9(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}onLoadActions(){const t=super.onLoadActions();this.layerTree.name=this.name;const i=this.$iApi.geo.symbology.mapServerToLocalLegend(this.origRampConfig.url).then(r=>{this.legend=r});return t.push(i),this.checkProj(),t}checkProj(){const t=this.getSR();this.$iApi.geo.map.getSR().isEqual(t)||this.$iApi.notify.show(Ah.WARNING,this.$iApi.$i18n.t("layer.mismatch",{name:this.name||this.id}))}}class drt extends X3{sublayerNames;mimeType;constructor(t,i){super(t,i),this.supportsIdentify=!0,this.hovertips=!1,this.layerType=Ai.WMS,this.layerFormat=vc.WMS,this.mimeType=t.featureInfoMimeType||"",this.sublayerNames=[],this.dataFormat=fl.OGC_RASTER,this.identifyMode=as.GEOMETRIC}async onInitiate(){this.esriLayer=wn(new Une(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){const i=super.makeEsriLayerConfig(t),r=t.sublayers;this.sublayerNames=r.map(s=>s.id||"error_no_wms_id");const n=r.map(s=>s.currentStyle).join();return i.customParameters={styles:n},t.url.indexOf("/geomet")!==-1&&(i.customParameters.layers=r[0].id),i}onLoadActions(){const t=super.onLoadActions();this.layerTree.name=this.name;const i=r=>{let n=!1;return r.forEach(s=>{this.sublayerNames.indexOf(s.name)>-1||s.sublayers&&s.sublayers.length>0&&i(s.sublayers)?n=!0:s.visible=!1}),n};return this.esriLayer?i(this.esriLayer.sublayers):this.noLayerErr(),this.loadSymbology(),t}canIdentify(){return super.canIdentify()}runIdentify(t){if(t.geometry.type!==Ti.POINT)throw new Error("a point must be used for WMS Identify");if(!this.canIdentify())return[];const i=new ls,r=Hn({items:[],loading:i.getPromise(),loaded:!1,errored:!1,uid:this.uid,requestTime:Date.now()});return this.getFeatureInfo(this.sublayerNames,t.geometry,this.mimeType).then(n=>{if(n){const s=Hn({data:n,format:qg.UNKNOWN,loaded:!0,loading:Promise.resolve()});typeof n!="string"?(s.format=qg.JSON,r.items.push(s)):n.indexOf("Search returned no results")===-1&&n!==""&&(s.format=qg.TEXT,r.items.push(s))}r.loaded=!0,i.resolveMe()}).catch(()=>{r.errored=!0,i.resolveMe()}),[r]}setCustomParameter(t,i,r=!0){this.esriLayer?(this.esriLayer.customLayerParameters[t]=i,r&&this.esriLayer.refresh()):this.noLayerErr()}getFeatureInfo(t,i,r){const n=this.$iApi.geo.map,s=this.esriLayer;if(!n.esriView)throw new Error("WMS get feature, no map view exists. Cannot derive click coords");if(!s)throw this.noLayerErr(),new Error("wms get feature failed, no layer");let o,a;const l=n.getExtent(),u=s.spatialReferences,c=t.join(","),d=n.esriView.toScreen(i.toESRI()),f=Math.floor(d.x),m=Math.floor(d.y),v={"application/json":"json","text/html":"text","text/plain":"text"}[r]||"text",b=n.getSR();b.wkid?o=b.wkid:(o=4326,console.error("Map is likely in a WKT projection. WMS Identify request will likely fail.")),u&&u.length>1?u.indexOf(o)===-1&&(b.latestWkid&&u.indexOf(b.latestWkid)>-1?o=b.latestWkid:console.error("WMS service does not support the maps projection. Identify request will likely fail.")):console.error("No supported wkid/epsg code found for WMS service. Identify request will likely fail."),s.version==="1.3"||s.version==="1.3.0"?(a={CRS:"EPSG:"+o,I:f,J:m,STYLES:"",FORMAT:s.imageFormat},this.$iApi.geo.layer.ogc.reversedAxisWKIDs().indexOf(o)>-1&&(a.BBOX=`${l.ymin},${l.xmin},${l.ymax},${l.xmax}`)):a={SRS:"EPSG:"+o,X:f,Y:m},Object.prototype.hasOwnProperty.call(a,"BBOX")||(a.BBOX=`${l.xmin},${l.ymin},${l.xmax},${l.ymax}`);const x={SERVICE:"WMS",REQUEST:"GetFeatureInfo",VERSION:s.version,WIDTH:n.getPixelWidth(),HEIGHT:n.getPixelHeight(),QUERY_LAYERS:c,LAYERS:c,INFO_FORMAT:r},S=s.customLayerParameters;return S&&Object.keys(S).forEach(T=>{T.toLowerCase()!=="styles"&&(x[T]=S[T])}),Object.keys(x).forEach(T=>a[T]=x[T]),St(s.url.split("?")[0],{query:a,responseType:v})}getLegendUrls(t){if(!this.esriLayer)return this.noLayerErr(),[];const i=new Map;this.esriLayer.allSublayers.forEach(n=>{n.visible&&(n.legendUrl&&this.origRampConfig.sublayers?.forEach(s=>{if(s.id&&s.currentStyle&&s.id===n.name){const o=new i5(n.legendUrl);"STYLE"in o.queryMap&&o.queryMap.STYLE!==s.currentStyle&&(n.legendUrl=o.updateQuery({STYLE:s.currentStyle}))}}),i.set(n.name,n.legendUrl))});const r=t.map(n=>n.styleLegends&&n.currentStyle?n.styleLegends.find(s=>s.name===n.currentStyle).url:void 0);return r.forEach((n,s)=>{n||(r[s]=i.get(t[s].id))}),r}getWMSLayerTitle(t){if(!this.esriLayer)return"";let i;return this.esriLayer.allSublayers.some(r=>{if(r.name===t)return i=r.title,!0}),i||""}loadSymbology(){const t=this.config.sublayers,i=this.getLegendUrls(t.map(r=>({id:r.id,styleLegends:r.styleLegends,currentStyle:r.currentStyle}))).map((r,n)=>{const s=t[n].name||this.getWMSLayerTitle(t[n].id)||t[n].id,o={uid:this.$iApi.geo.shared.generateUUID(),label:s,svgcode:"",esriStandard:!1,drawPromise:this.$iApi.geo.symbology.generateWMSSymbology(r).then(a=>{o.svgcode=a.svgcode,o.imgHeight=a.imgHeight,o.imgWidth=a.imgWidth})};return o});this.legend=i}}class prt extends GC{constructor(t,i){super(t,i),this.layerType=Ai.WFS}async onInitiate(){const t=new i5(this.config.url),{startindex:i,limit:r}=t.queryMap;this.sourceGeoJson||(this.sourceGeoJson=await this.$iApi.geo.layer.ogc.loadWfsData(this.config.url,-1,parseInt(i)||0,parseInt(r)||1e3,void 0,this.config.xyInAttribs)),await super.onInitiate()}}class frt extends Wn{constructor(t){super(t)}oidIndexer(t,i){t.features.forEach((r,n)=>{t.oidIndex[r[i]]=n})}async arcGisBatchLoad(t,i){if(i.loadAbortFlag)return[];const r=t.permanentFilter?` AND ${t.permanentFilter}`:"",n={query:{where:`${t.oidField}>${t.maxId}${r}`,outFields:t.attribs,orderByFields:t.oidField,returnGeometry:"false",f:"json"}},[s,o]=await D0(St(t.serviceUrl+"/query",n));if(!o)return console.error(`ArcGIS batch load error: ${t.serviceUrl}`,s),Promise.reject(new Error(`ArcGIS batch load error: ${t.serviceUrl}`));if(!o.data||!o.data.features)return console.error(`ArcGIS batch load gave no data/features: ${t.serviceUrl}`),Promise.reject(new Error(`ArcGIS batch load gave no data/features: ${t.serviceUrl}`));const a=o.data.features,l=a.length;if(l>0){i.loadedCount+=l;let u;if(t.supportsLimit?u=o.data.exceededTransferLimit:(t.batchSize===-1&&(t.batchSize=l),u=l>=t.batchSize),u){t.maxId=a[l-1].attributes[t.oidField];const c=await this.arcGisBatchLoad(t,i);return i.loadAbortFlag?[]:a.concat(c)}else return i.loadAbortFlag?[]:a}else return[]}async loadArcGisServerAttributes(t,i){t.maxId=-1,t.batchSize=-1;const n={features:(await this.arcGisBatchLoad(t,i)).map(s=>s.attributes),oidIndex:{}};return this.oidIndexer(n,t.oidField),i.loadIsDone=!0,n}async loadGraphicsAttributes(t,i){if(!t.sourceGraphics)throw new Error("No .sourceGraphics provided to file layer attribute loader");const n={features:t.sourceGraphics.map(s=>oi(s).attributes).toArray(),oidIndex:{}};return this.oidIndexer(n,t.oidField),i.loadIsDone=!0,i.loadedCount=n.features.length,n}async loadSingleFeature(t){const i={query:{f:"json",objectIds:t.oid,returnGeometry:t.includeGeometry,outFields:t.attribs}};typeof t.maxOffset<"u"&&(i.query.maxAllowableOffset=t.maxOffset),typeof t.mapSR<"u"&&(i.query.outSR=t.mapSR);const[r,n]=await D0(St(t.serviceUrl+"/query",i));if(!n)return console.error(`ArcGIS single feature load error: ${t.serviceUrl}`,r),Promise.reject(new Error(`ArcGIS single feature load error: ${t.serviceUrl}`));if(!n.data||!n.data.features)return console.error(`Could not locate feature ${t.oid} for layer ${t.serviceUrl}`),Promise.reject(new Error(`Could not locate feature ${t.oid} for layer ${t.serviceUrl}`));const s=n.data.features;if(s.length>0){const o=s[0];let a;if(t.includeGeometry){o.geometry.spatialReference=n.data.spatialReference;const l=Il(o.geometry);a=this.$iApi.geo.geom.geomEsriToRamp(l)}else a=new Pw;return new Zd(a,"",o.attributes)}return Promise.reject(new Error(`Could not locate feature ${t.oid} for layer ${t.serviceUrl}`))}}class jZ{loadedCount;loadAbortFlag;loadIsDone;constructor(){this.loadedCount=0,this.loadAbortFlag=!1,this.loadIsDone=!1}}class rpe extends Wn{aac;loadPromise;details;tabularAttributesCache;constructor(t,i){super(t),this.aac=new jZ,this.details=i}updateFieldList(t){this.details.attribs=t}getAttribs(){return this.loadPromise||(this.aac=new jZ,this.loadPromise=this.loadPromiseGenerator()),this.loadPromise}abortAttribLoad(){this.aac.loadAbortFlag=!0}destroyAttribs(){this.loadPromise=void 0,this.tabularAttributesCache=void 0,this.aac.loadIsDone=!1,this.aac.loadedCount=0}loadCount(){return this.aac.loadedCount}isLoaded(){return this.aac.loadIsDone}isLoadAborted(){return this.aac.loadAbortFlag}loadPromiseGenerator(){return Promise.reject(new Error("Subclass of AttributeLoaderBase did not implement loadPromiseGenerator"))}}class mrt extends rpe{constructor(t,i){super(t,i)}loadPromiseGenerator(){return this.$iApi.geo.attributes.loadArcGisServerAttributes(this.details,this.aac)}}class yrt extends rpe{constructor(t,i){super(t,i)}loadPromiseGenerator(){return this.$iApi.geo.attributes.loadGraphicsAttributes(this.details,this.aac)}}class npe{attribs;geoms;extents;isPoint;constructor(t){this.attribs={},this.geoms={},this.extents={},this.isPoint=t==="point"}getScaleStore(t){return this.geoms[t]||(this.geoms[t]={}),this.geoms[t]}getGeomStore(t=void 0){if(this.isPoint)return this.geoms;if(typeof t>"u")throw new Error("Attempted to access geometry store for non-point layer without providing a map scale");return this.getScaleStore(t)}getAttribs(t){return this.attribs[t]}setAttribs(t,i){this.attribs[t]=i}getGeom(t,i=void 0){return this.getGeomStore(i)[t]}setGeom(t,i,r=void 0){const n=this.getGeomStore(r);n[t]=i}getExtent(t){return this.extents[t]}setExtent(t,i){this.extents[t]=i}clearAll(){this.attribs={},this.geoms={},this.extents={}}}class zj{innerRenderer;symbolUnits;defaultUnit;type;falseRenderer;constructor(t,i,r=!1){this.innerRenderer=t,this.symbolUnits=[],this.falseRenderer=r,this.type=N5.Unknown}makeSearchParams(t){return t}searchRenderer(t){const i=this.makeSearchParams(t),r=this.symbolUnits.find(s=>s.match(i));if(r)return r;if(this.defaultUnit)return this.defaultUnit;console.error(`renderer search could not find match for ${i}`);const n=new qC(this);return n.svgCode="",n}getGraphicIcon(t){return this.searchRenderer(t).svgCode}getGraphicSymbol(t){return this.searchRenderer(t).symbol}rendererToLegend(){throw new Error("rendererToLegend not implemented in subclass")}getFieldDelimiter(t,i){let r="'";if(!i||i.length===0)return r;const n=i.find(s=>s.name===t);return n&&n.type&&n.type!=="string"&&(r=""),r}cleanFieldName(t,i){if(!t)return t;let r=i.find(n=>n.name===t);if(r)return t;{const n=t.toLowerCase();return r=i.find(s=>s.name.toLowerCase()===n),r?r.name:t}}makeElseClause(){return this.falseRenderer?"":`(NOT (${this.symbolUnits.map(i=>i.definitionClause).join(" OR ")}))`}}class qC{isDefault=!1;svgCode="";symbol;definitionClause="";label="";parent;constructor(t){this.parent=t,this.symbol=new pu}match(t){return!!t}}class grt extends zj{constructor(t,i){super(t,i),this.type=N5.Simple;const r=new qC(this);r.label=t.label||"",r.symbol=t.symbol,r.definitionClause="1=1",this.symbolUnits.push(r)}}class vrt extends zj{delim;keyFields;constructor(t,i,r=!1){super(t,i,r),this.type=N5.Unique,this.delim=t.fieldDelimiter||", ";const n=o=>o.replace(/'/g,"''");this.keyFields=[t.field,t.field2,t.field3].filter(o=>o).map(o=>this.cleanFieldName(o,i));const s=this.keyFields.map(o=>this.getFieldDelimiter(o,i));if(t.uniqueValueInfos.forEach(o=>{const a=new UZ(this,o.value);if(a.label=o.label||"",a.symbol=o.symbol,!this.falseRenderer){const l=a.matchValue.split(this.delim),u=this.keyFields.map((c,d)=>l[d]==="<Null>"?`${c} IS NULL`:`${c} = ${s[d]}${n(l[d])}${s[d]}`).join(" AND ");a.definitionClause=`(${u})`,a.matchValue=a.matchValue.replace(/<Null>/g,"")}this.symbolUnits.push(a)}),t.defaultSymbol){const o=new UZ(this,"");o.isDefault=!0,o.label=t.defaultLabel||"",o.symbol=t.defaultSymbol,o.definitionClause=this.makeElseClause(),this.defaultUnit=o}}makeSearchParams(t){return this.keyFields.map(i=>{let r=t[i]===null?"":t[i];return typeof r!="string"&&(r=r.toString()),r}).join(this.delim)}}class UZ extends qC{matchValue;constructor(t,i){super(t),typeof i=="number"?this.matchValue=i.toString():this.matchValue=i}match(t){return this.matchValue===t}}class brt extends zj{valField;constructor(t,i,r=!1){if(super(t,i,r),this.valField=this.cleanFieldName(t.field,i),t.classBreakInfos.forEach(n=>{const s=new VZ(this,n.minValue,n.maxValue);s.label=n.label||"",s.symbol=n.symbol,this.falseRenderer||(s.definitionClause=`(${this.valField} > ${n.minValue} AND ${this.valField} <= ${n.maxValue})`),this.symbolUnits.push(s)}),t.defaultSymbol){const n=new VZ(this,0,0);n.isDefault=!0,n.label=t.defaultLabel||"",n.symbol=t.defaultSymbol,n.definitionClause=this.makeElseClause(),this.defaultUnit=n}}makeSearchParams(t){return parseFloat(t[this.valField])}}class VZ extends qC{minValue;maxValue;constructor(t,i,r){super(t),this.minValue=i,this.maxValue=r}match(t){return this.minValue===this.maxValue?this.maxValue===t:this.minValue<t&&this.maxValue>=t}}var spe={exports:{}};/*!
* svg.js - A lightweight library for manipulating and animating SVG.
* @version 2.7.1
* https://svgdotjs.github.io/
*
* @copyright Wout Fierens <wout@mick-wout.com>
* @license MIT
*
* BUILT: Fri Nov 30 2018 10:01:55 GMT+0100 (GMT+01:00)
*/(function(e,t){(function(i,r){e.exports=i.document?r(i,i.document):function(n){return r(n,n.document)}})(typeof window<"u"?window:Bs,function(i,r){var n=typeof this<"u"?this:i,s=n.SVG=function(y){if(s.supported)return y=new s.Doc(y),s.parser.draw||s.prepare(),y};if(s.ns="http://www.w3.org/2000/svg",s.xmlns="http://www.w3.org/2000/xmlns/",s.xlink="http://www.w3.org/1999/xlink",s.svgjs="http://svgjs.com/svgjs",s.supported=function(){return!!r.createElementNS&&!!r.createElementNS(s.ns,"svg").createSVGRect}(),!s.supported)return!1;s.did=1e3,s.eid=function(y){return"Svgjs"+b(y)+s.did++},s.create=function(y){var A=r.createElementNS(this.ns,y);return A.setAttribute("id",this.eid(y)),A},s.extend=function(){var y,A,N,j;for(y=[].slice.call(arguments),A=y.pop(),j=y.length-1;j>=0;j--)if(y[j])for(N in A)y[j].prototype[N]=A[N];s.Set&&s.Set.inherit&&s.Set.inherit()},s.invent=function(y){var A=typeof y.create=="function"?y.create:function(){this.constructor.call(this,s.create(y.create))};return y.inherit&&(A.prototype=new y.inherit),y.extend&&s.extend(A,y.extend),y.construct&&s.extend(y.parent||s.Container,y.construct),A},s.adopt=function(y){if(!y)return null;if(y.instance)return y.instance;var A;return y.nodeName=="svg"?A=y.parentNode instanceof i.SVGElement?new s.Nested:new s.Doc:y.nodeName=="linearGradient"?A=new s.Gradient("linear"):y.nodeName=="radialGradient"?A=new s.Gradient("radial"):s[b(y.nodeName)]?A=new s[b(y.nodeName)]:A=new s.Element(y),A.type=y.nodeName,A.node=y,y.instance=A,A instanceof s.Doc&&A.namespace().defs(),A.setData(JSON.parse(y.getAttribute("svgjs:data"))||{}),A},s.prepare=function(){var y=r.getElementsByTagName("body")[0],A=(y?new s.Doc(y):s.adopt(r.documentElement).nested()).size(2,0);s.parser={body:y||r.documentElement,draw:A.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").attr("focusable","false").node,poly:A.polyline().node,path:A.path().node,native:s.create("svg")}},s.parser={native:s.create("svg")},r.addEventListener("DOMContentLoaded",function(){s.parser.draw||s.prepare()},!1),s.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},s.utils={map:function(y,A){var N,j=y.length,oe=[];for(N=0;N<j;N++)oe.push(A(y[N]));return oe},filter:function(y,A){var N,j=y.length,oe=[];for(N=0;N<j;N++)A(y[N])&&oe.push(y[N]);return oe},radians:function(y){return y%360*Math.PI/180},degrees:function(y){return y*180/Math.PI%360},filterSVGElements:function(y){return this.filter(y,function(A){return A instanceof i.SVGElement})}},s.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},s.Color=function(y){var A;this.r=0,this.g=0,this.b=0,y&&(typeof y=="string"?s.regex.isRgb.test(y)?(A=s.regex.rgb.exec(y.replace(s.regex.whitespace,"")),this.r=parseInt(A[1]),this.g=parseInt(A[2]),this.b=parseInt(A[3])):s.regex.isHex.test(y)&&(A=s.regex.hex.exec(x(y)),this.r=parseInt(A[1],16),this.g=parseInt(A[2],16),this.b=parseInt(A[3],16)):typeof y=="object"&&(this.r=y.r,this.g=y.g,this.b=y.b))},s.extend(s.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+S(this.r)+S(this.g)+S(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(y){return this.destination=new s.Color(y),this},at:function(y){return this.destination?(y=y<0?0:y>1?1:y,new s.Color({r:~~(this.r+(this.destination.r-this.r)*y),g:~~(this.g+(this.destination.g-this.g)*y),b:~~(this.b+(this.destination.b-this.b)*y)})):this}}),s.Color.test=function(y){return y+="",s.regex.isHex.test(y)||s.regex.isRgb.test(y)},s.Color.isRgb=function(y){return y&&typeof y.r=="number"&&typeof y.g=="number"&&typeof y.b=="number"},s.Color.isColor=function(y){return s.Color.isRgb(y)||s.Color.test(y)},s.Array=function(y,A){y=(y||[]).valueOf(),y.length==0&&A&&(y=A.valueOf()),this.value=this.parse(y)},s.extend(s.Array,{morph:function(y){if(this.destination=this.parse(y),this.value.length!=this.destination.length){for(var A=this.value[this.value.length-1],N=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(N);for(;this.value.length<this.destination.length;)this.value.push(A)}return this},settle:function(){for(var y=0,A=this.value.length,N=[];y<A;y++)N.indexOf(this.value[y])==-1&&N.push(this.value[y]);return this.value=N},at:function(y){if(!this.destination)return this;for(var A=0,N=this.value.length,j=[];A<N;A++)j.push(this.value[A]+(this.destination[A]-this.value[A])*y);return new s.Array(j)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(y){return y=y.valueOf(),Array.isArray(y)?y:this.split(y)},split:function(y){return y.trim().split(s.regex.delimiter).map(parseFloat)},reverse:function(){return this.value.reverse(),this},clone:function(){var y=new this.constructor;return y.value=f(this.value),y}}),s.PointArray=function(y,A){s.Array.call(this,y,A||[[0,0]])},s.PointArray.prototype=new s.Array,s.PointArray.prototype.constructor=s.PointArray,s.extend(s.PointArray,{toString:function(){for(var y=0,A=this.value.length,N=[];y<A;y++)N.push(this.value[y].join(","));return N.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(y){if(!this.destination)return this;for(var A=0,N=this.value.length,j=[];A<N;A++)j.push([this.value[A][0]+(this.destination[A][0]-this.value[A][0])*y,this.value[A][1]+(this.destination[A][1]-this.value[A][1])*y]);return new s.PointArray(j)},parse:function(y){var A=[];if(y=y.valueOf(),Array.isArray(y)){if(Array.isArray(y[0]))return y.map(function(oe){return oe.slice()});if(y[0].x!=null)return y.map(function(oe){return[oe.x,oe.y]})}else y=y.trim().split(s.regex.delimiter).map(parseFloat);y.length%2!==0&&y.pop();for(var N=0,j=y.length;N<j;N=N+2)A.push([y[N],y[N+1]]);return A},move:function(y,A){var N=this.bbox();if(y-=N.x,A-=N.y,!isNaN(y)&&!isNaN(A))for(var j=this.value.length-1;j>=0;j--)this.value[j]=[this.value[j][0]+y,this.value[j][1]+A];return this},size:function(y,A){var N,j=this.bbox();for(N=this.value.length-1;N>=0;N--)j.width&&(this.value[N][0]=(this.value[N][0]-j.x)*y/j.width+j.x),j.height&&(this.value[N][1]=(this.value[N][1]-j.y)*A/j.height+j.y);return this},bbox:function(){return s.parser.poly.setAttribute("points",this.toString()),s.parser.poly.getBBox()}});for(var o={M:function(y,A,N){return A.x=N.x=y[0],A.y=N.y=y[1],["M",A.x,A.y]},L:function(y,A){return A.x=y[0],A.y=y[1],["L",y[0],y[1]]},H:function(y,A){return A.x=y[0],["H",y[0]]},V:function(y,A){return A.y=y[0],["V",y[0]]},C:function(y,A){return A.x=y[4],A.y=y[5],["C",y[0],y[1],y[2],y[3],y[4],y[5]]},S:function(y,A){return A.x=y[2],A.y=y[3],["S",y[0],y[1],y[2],y[3]]},Q:function(y,A){return A.x=y[2],A.y=y[3],["Q",y[0],y[1],y[2],y[3]]},T:function(y,A){return A.x=y[0],A.y=y[1],["T",y[0],y[1]]},Z:function(y,A,N){return A.x=N.x,A.y=N.y,["Z"]},A:function(y,A){return A.x=y[5],A.y=y[6],["A",y[0],y[1],y[2],y[3],y[4],y[5],y[6]]}},a="mlhvqtcsaz".split(""),l=0,u=a.length;l<u;++l)o[a[l]]=function(y){return function(A,N,j){if(y=="H")A[0]=A[0]+N.x;else if(y=="V")A[0]=A[0]+N.y;else if(y=="A")A[5]=A[5]+N.x,A[6]=A[6]+N.y;else for(var oe=0,q=A.length;oe<q;++oe)A[oe]=A[oe]+(oe%2?N.y:N.x);return o[y](A,N,j)}}(a[l].toUpperCase());s.PathArray=function(y,A){s.Array.call(this,y,A||[["M",0,0]])},s.PathArray.prototype=new s.Array,s.PathArray.prototype.constructor=s.PathArray,s.extend(s.PathArray,{toString:function(){return L(this.value)},move:function(y,A){var N=this.bbox();if(y-=N.x,A-=N.y,!isNaN(y)&&!isNaN(A))for(var j,oe=this.value.length-1;oe>=0;oe--)j=this.value[oe][0],j=="M"||j=="L"||j=="T"?(this.value[oe][1]+=y,this.value[oe][2]+=A):j=="H"?this.value[oe][1]+=y:j=="V"?this.value[oe][1]+=A:j=="C"||j=="S"||j=="Q"?(this.value[oe][1]+=y,this.value[oe][2]+=A,this.value[oe][3]+=y,this.value[oe][4]+=A,j=="C"&&(this.value[oe][5]+=y,this.value[oe][6]+=A)):j=="A"&&(this.value[oe][6]+=y,this.value[oe][7]+=A);return this},size:function(y,A){var N,j,oe=this.bbox();for(N=this.value.length-1;N>=0;N--)j=this.value[N][0],j=="M"||j=="L"||j=="T"?(this.value[N][1]=(this.value[N][1]-oe.x)*y/oe.width+oe.x,this.value[N][2]=(this.value[N][2]-oe.y)*A/oe.height+oe.y):j=="H"?this.value[N][1]=(this.value[N][1]-oe.x)*y/oe.width+oe.x:j=="V"?this.value[N][1]=(this.value[N][1]-oe.y)*A/oe.height+oe.y:j=="C"||j=="S"||j=="Q"?(this.value[N][1]=(this.value[N][1]-oe.x)*y/oe.width+oe.x,this.value[N][2]=(this.value[N][2]-oe.y)*A/oe.height+oe.y,this.value[N][3]=(this.value[N][3]-oe.x)*y/oe.width+oe.x,this.value[N][4]=(this.value[N][4]-oe.y)*A/oe.height+oe.y,j=="C"&&(this.value[N][5]=(this.value[N][5]-oe.x)*y/oe.width+oe.x,this.value[N][6]=(this.value[N][6]-oe.y)*A/oe.height+oe.y)):j=="A"&&(this.value[N][1]=this.value[N][1]*y/oe.width,this.value[N][2]=this.value[N][2]*A/oe.height,this.value[N][6]=(this.value[N][6]-oe.x)*y/oe.width+oe.x,this.value[N][7]=(this.value[N][7]-oe.y)*A/oe.height+oe.y);return this},equalCommands:function(y){var A,N,j;for(y=new s.PathArray(y),j=this.value.length===y.value.length,A=0,N=this.value.length;j&&A<N;A++)j=this.value[A][0]===y.value[A][0];return j},morph:function(y){return y=new s.PathArray(y),this.equalCommands(y)?this.destination=y:this.destination=null,this},at:function(y){if(!this.destination)return this;var A=this.value,N=this.destination.value,j=[],oe=new s.PathArray,q,de,re,me;for(q=0,de=A.length;q<de;q++){for(j[q]=[A[q][0]],re=1,me=A[q].length;re<me;re++)j[q][re]=A[q][re]+(N[q][re]-A[q][re])*y;j[q][0]==="A"&&(j[q][4]=+(j[q][4]!=0),j[q][5]=+(j[q][5]!=0))}return oe.value=j,oe},parse:function(y){if(y instanceof s.PathArray)return y.valueOf();var A,j,N={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};typeof y=="string"?y=y.replace(s.regex.numbersWithDots,d).replace(s.regex.pathLetters," $& ").replace(s.regex.hyphen,"$1 -").trim().split(s.regex.delimiter):y=y.reduce(function(me,ve){return[].concat.call(me,ve)},[]);var j=[],oe=new s.Point,q=new s.Point,de=0,re=y.length;do s.regex.isPathLetter.test(y[de])?(A=y[de],++de):A=="M"?A="L":A=="m"&&(A="l"),j.push(o[A].call(null,y.slice(de,de=de+N[A.toUpperCase()]).map(parseFloat),oe,q));while(re>de);return j},bbox:function(){return s.parser.path.setAttribute("d",this.toString()),s.parser.path.getBBox()}}),s.Number=s.invent({create:function(y,A){this.value=0,this.unit=A||"",typeof y=="number"?this.value=isNaN(y)?0:isFinite(y)?y:y<0?-34e37:34e37:typeof y=="string"?(A=y.match(s.regex.numberAndUnit),A&&(this.value=parseFloat(A[1]),A[5]=="%"?this.value/=100:A[5]=="s"&&(this.value*=1e3),this.unit=A[5])):y instanceof s.Number&&(this.value=y.valueOf(),this.unit=y.unit)},extend:{toString:function(){return(this.unit=="%"?~~(this.value*1e8)/1e6:this.unit=="s"?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(y){return y=new s.Number(y),new s.Number(this+y,this.unit||y.unit)},minus:function(y){return y=new s.Number(y),new s.Number(this-y,this.unit||y.unit)},times:function(y){return y=new s.Number(y),new s.Number(this*y,this.unit||y.unit)},divide:function(y){return y=new s.Number(y),new s.Number(this/y,this.unit||y.unit)},to:function(y){var A=new s.Number(this);return typeof y=="string"&&(A.unit=y),A},morph:function(y){return this.destination=new s.Number(y),y.relative&&(this.destination.value+=this.value),this},at:function(y){return this.destination?new s.Number(this.destination).minus(this).times(y).plus(this):this}}}),s.Element=s.invent({create:function(y){this._stroke=s.defaults.attrs.stroke,this._event=null,this._events={},this.dom={},(this.node=y)&&(this.type=y.nodeName,this.node.instance=this,this._events=y._events||{},this._stroke=y.getAttribute("stroke")||this._stroke)},extend:{x:function(y){return this.attr("x",y)},y:function(y){return this.attr("y",y)},cx:function(y){return y==null?this.x()+this.width()/2:this.x(y-this.width()/2)},cy:function(y){return y==null?this.y()+this.height()/2:this.y(y-this.height()/2)},move:function(y,A){return this.x(y).y(A)},center:function(y,A){return this.cx(y).cy(A)},width:function(y){return this.attr("width",y)},height:function(y){return this.attr("height",y)},size:function(y,A){var N=T(this,y,A);return this.width(new s.Number(N.width)).height(new s.Number(N.height))},clone:function(y){this.writeDataToDom();var A=B(this.node.cloneNode(!0));return y?y.add(A):this.after(A),A},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(y){return this.after(y).remove(),y},addTo:function(y){return y.put(this)},putIn:function(y){return y.add(this)},id:function(y){return this.attr("id",y)},inside:function(y,A){var N=this.bbox();return y>N.x&&A>N.y&&y<N.x+N.width&&A<N.y+N.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return this.style("display")!="none"},toString:function(){return this.attr("id")},classes:function(){var y=this.attr("class");return y==null?[]:y.trim().split(s.regex.delimiter)},hasClass:function(y){return this.classes().indexOf(y)!=-1},addClass:function(y){if(!this.hasClass(y)){var A=this.classes();A.push(y),this.attr("class",A.join(" "))}return this},removeClass:function(y){return this.hasClass(y)&&this.attr("class",this.classes().filter(function(A){return A!=y}).join(" ")),this},toggleClass:function(y){return this.hasClass(y)?this.removeClass(y):this.addClass(y)},reference:function(y){return s.get(this.attr(y))},parent:function(y){var A=this;if(!A.node.parentNode)return null;if(A=s.adopt(A.node.parentNode),!y)return A;for(;A&&A.node instanceof i.SVGElement;){if(typeof y=="string"?A.matches(y):A instanceof y)return A;if(!A.node.parentNode||A.node.parentNode.nodeName=="#document"||A.node.parentNode.nodeName=="#document-fragment")return null;A=s.adopt(A.node.parentNode)}},doc:function(){return this instanceof s.Doc?this:this.parent(s.Doc)},parents:function(y){var A=[],N=this;do{if(N=N.parent(y),!N||!N.node)break;A.push(N)}while(N.parent);return A},matches:function(y){return g(this.node,y)},native:function(){return this.node},svg:function(y){var A=r.createElement("svg");if(y&&this instanceof s.Parent){A.innerHTML="<svg>"+y.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var N=0,j=A.firstChild.childNodes.length;N<j;N++)this.node.appendChild(A.firstChild.firstChild)}else return A.appendChild(y=r.createElement("svg")),this.writeDataToDom(),y.appendChild(this.node.cloneNode(!0)),A.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");return this},writeDataToDom:function(){if(this.each||this.lines){var y=this.each?this:this.lines();y.each(function(){this.writeDataToDom()})}return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(y){return this.dom=y,this},is:function(y){return m(this,y)}}}),s.easing={"-":function(y){return y},"<>":function(y){return-Math.cos(y*Math.PI)/2+.5},">":function(y){return Math.sin(y*Math.PI/2)},"<":function(y){return-Math.cos(y*Math.PI/2)+1}},s.morph=function(y){return function(A,N){return new s.MorphObj(A,N).at(y)}},s.Situation=s.invent({create:function(y){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new s.Number(y.duration).valueOf(),this.delay=new s.Number(y.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=y.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),s.FX=s.invent({create:function(y){this._target=y,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(y,A,N){typeof y=="object"&&(A=y.ease,N=y.delay,y=y.duration);var j=new s.Situation({duration:y||1e3,delay:N||0,ease:s.easing[A||"-"]||A});return this.queue(j),this},delay:function(y){var A=new s.Situation({duration:y,delay:0,ease:s.easing["-"]});return this.queue(A)},target:function(y){return y&&y instanceof s.Element?(this._target=y,this):this._target},timeToAbsPos:function(y){return(y-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(y){return this.situation.duration/this._speed*y+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=i.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){i.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(y){return(typeof y=="function"||y instanceof s.Situation)&&this.situations.push(y),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof s.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var y,A,N,j=this.situation;if(j.init)return this;for(y in j.animations)for(N=this.target()[y](),Array.isArray(N)||(N=[N]),Array.isArray(j.animations[y])||(j.animations[y]=[j.animations[y]]),A=N.length;A--;)j.animations[y][A]instanceof s.Number&&(N[A]=new s.Number(N[A])),j.animations[y][A]=N[A].morph(j.animations[y][A]);for(y in j.attrs)j.attrs[y]=new s.MorphObj(this.target().attr(y),j.attrs[y]);for(y in j.styles)j.styles[y]=new s.MorphObj(this.target().style(y),j.styles[y]);return j.initialTransformation=this.target().matrixify(),j.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(y,A){var N=this.active;return this.active=!1,A&&this.clearQueue(),y&&this.situation&&(!N&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var y=this.situation;this.stop(),this.situation=y,this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return this.situation.loops===!0&&(this.situation.loops=this.situation.loop+1),typeof this.situation.loops=="number"?this.at(this.situation.loops,!0):this.at(1,!0)},at:function(y,A){var N=this.situation.duration/this._speed;return this.absPos=y,A||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+new Date-this.absPos*N,this.situation.finish=this.situation.start+N,this.step(!0)},speed:function(y){return y===0?this.pause():y?(this._speed=y,this.at(this.absPos,!0)):this._speed},loop:function(y,A){var N=this.last();return N.loops=y??!0,N.loop=0,A&&(N.reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(y){var A=this.last();return typeof y>"u"?A.reversed=!A.reversed:A.reversed=y,this},progress:function(y){return y?this.situation.ease(this.pos):this.pos},after:function(y){var A=this.last(),N=function j(oe){oe.detail.situation==A&&(y.call(this,A),this.off("finished.fx",j))};return this.target().on("finished.fx",N),this._callStart()},during:function(y){var A=this.last(),N=function(j){j.detail.situation==A&&y.call(this,j.detail.pos,s.morph(j.detail.pos),j.detail.eased,A)};return this.target().off("during.fx",N).on("during.fx",N),this.after(function(){this.off("during.fx",N)}),this._callStart()},afterAll:function(y){var A=function N(j){y.call(this),this.off("allfinished.fx",N)};return this.target().off("allfinished.fx",A).on("allfinished.fx",A),this._callStart()},duringAll:function(y){var A=function(N){y.call(this,N.detail.pos,s.morph(N.detail.pos),N.detail.eased,N.detail.situation)};return this.target().off("during.fx",A).on("during.fx",A),this.afterAll(function(){this.off("during.fx",A)}),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(y,A,N){return this.last()[N||"animations"][y]=A,this._callStart()},step:function(y){if(y||(this.absPos=this.timeToAbsPos(+new Date)),this.situation.loops!==!1){var A,N,j;A=Math.max(this.absPos,0),N=Math.floor(A),this.situation.loops===!0||N<this.situation.loops?(this.pos=A-N,j=this.situation.loop,this.situation.loop=N):(this.absPos=this.situation.loops,this.pos=1,j=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=!!((this.situation.loop-j)%2))}else this.absPos=Math.min(this.absPos,1),this.pos=this.absPos;this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var oe=this.situation.ease(this.pos);for(var q in this.situation.once)q>this.lastPos&&q<=oe&&(this.situation.once[q].call(this.target(),this.pos,oe),delete this.situation.once[q]);return this.active&&this.target().fire("during",{pos:this.pos,eased:oe,fx:this,situation:this.situation}),this.situation?(this.eachAt(),this.pos==1&&!this.situation.reversed||this.situation.reversed&&this.pos==0?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=oe,this):this},eachAt:function(){var y,A,N,j=this,oe=this.target(),q=this.situation;for(y in q.animations)N=[].concat(q.animations[y]).map(function(re){return typeof re!="string"&&re.at?re.at(q.ease(j.pos),j.pos):re}),oe[y].apply(oe,N);for(y in q.attrs)N=[y].concat(q.attrs[y]).map(function(re){return typeof re!="string"&&re.at?re.at(q.ease(j.pos),j.pos):re}),oe.attr.apply(oe,N);for(y in q.styles)N=[y].concat(q.styles[y]).map(function(re){return typeof re!="string"&&re.at?re.at(q.ease(j.pos),j.pos):re}),oe.style.apply(oe,N);if(q.transforms.length){for(N=q.initialTransformation,y=0,A=q.transforms.length;y<A;y++){var de=q.transforms[y];if(de instanceof s.Matrix){de.relative?N=N.multiply(new s.Matrix().morph(de).at(q.ease(this.pos))):N=N.morph(de).at(q.ease(this.pos));continue}de.relative||de.undo(N.extract()),N=N.multiply(de.at(q.ease(this.pos)))}oe.matrix(N)}return this},once:function(y,A,N){var j=this.last();return N||(y=j.ease(y)),j.once[y]=A,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:s.Element,construct:{animate:function(y,A,N){return(this.fx||(this.fx=new s.FX(this))).animate(y,A,N)},delay:function(y){return(this.fx||(this.fx=new s.FX(this))).delay(y)},stop:function(y,A){return this.fx&&this.fx.stop(y,A),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this},speed:function(y){if(this.fx){if(y==null)return this.fx.speed();this.fx.speed(y)}return this}}}),s.MorphObj=s.invent({create:function(y,A){if(s.Color.isColor(A))return new s.Color(y).morph(A);if(s.regex.delimiter.test(y))return s.regex.pathLetters.test(y)?new s.PathArray(y).morph(A):new s.Array(y).morph(A);if(s.regex.numberAndUnit.test(A))return new s.Number(y).morph(A);this.value=y,this.destination=A},extend:{at:function(y,A){return A<1?this.value:this.destination},valueOf:function(){return this.value}}}),s.extend(s.FX,{attr:function(y,A,N){if(typeof y=="object")for(var j in y)this.attr(j,y[j]);else this.add(y,A,"attrs");return this},style:function(y,A){if(typeof y=="object")for(var N in y)this.style(N,y[N]);else this.add(y,A,"styles");return this},x:function(y,A){if(this.target()instanceof s.G)return this.transform({x:y},A),this;var N=new s.Number(y);return N.relative=A,this.add("x",N)},y:function(y,A){if(this.target()instanceof s.G)return this.transform({y},A),this;var N=new s.Number(y);return N.relative=A,this.add("y",N)},cx:function(y){return this.add("cx",new s.Number(y))},cy:function(y){return this.add("cy",new s.Number(y))},move:function(y,A){return this.x(y).y(A)},center:function(y,A){return this.cx(y).cy(A)},size:function(y,A){if(this.target()instanceof s.Text)this.attr("font-size",y);else{var N;(!y||!A)&&(N=this.target().bbox()),y||(y=N.width/N.height*A),A||(A=N.height/N.width*y),this.add("width",new s.Number(y)).add("height",new s.Number(A))}return this},width:function(y){return this.add("width",new s.Number(y))},height:function(y){return this.add("height",new s.Number(y))},plot:function(y,A,N,j){return arguments.length==4?this.plot([y,A,N,j]):this.add("plot",new(this.target()).morphArray(y))},leading:function(y){return this.target().leading?this.add("leading",new s.Number(y)):this},viewbox:function(y,A,N,j){return this.target()instanceof s.Container&&this.add("viewbox",new s.ViewBox(y,A,N,j)),this},update:function(y){if(this.target()instanceof s.Stop){if(typeof y=="number"||y instanceof s.Number)return this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]});y.opacity!=null&&this.attr("stop-opacity",y.opacity),y.color!=null&&this.attr("stop-color",y.color),y.offset!=null&&this.attr("offset",y.offset)}return this}}),s.Box=s.invent({create:function(y,A,N,j){if(typeof y=="object"&&!(y instanceof s.Element))return s.Box.call(this,y.left!=null?y.left:y.x,y.top!=null?y.top:y.y,y.width,y.height);arguments.length==4&&(this.x=y,this.y=A,this.width=N,this.height=j),z(this)},extend:{merge:function(y){var A=new this.constructor;return A.x=Math.min(this.x,y.x),A.y=Math.min(this.y,y.y),A.width=Math.max(this.x+this.width,y.x+y.width)-A.x,A.height=Math.max(this.y+this.height,y.y+y.height)-A.y,z(A)},transform:function(y){var A=1/0,N=-1/0,j=1/0,oe=-1/0,q,de=[new s.Point(this.x,this.y),new s.Point(this.x2,this.y),new s.Point(this.x,this.y2),new s.Point(this.x2,this.y2)];return de.forEach(function(re){re=re.transform(y),A=Math.min(A,re.x),N=Math.max(N,re.x),j=Math.min(j,re.y),oe=Math.max(oe,re.y)}),q=new this.constructor,q.x=A,q.width=N-A,q.y=j,q.height=oe-j,z(q),q}}}),s.BBox=s.invent({create:function(y){if(s.Box.apply(this,[].slice.call(arguments)),y instanceof s.Element){var A;try{if(r.documentElement.contains){if(!r.documentElement.contains(y.node))throw new Exception("Element not in the dom")}else{for(var N=y.node;N.parentNode;)N=N.parentNode;if(N!=r)throw new Exception("Element not in the dom")}A=y.node.getBBox()}catch{if(y instanceof s.Shape){var j=y.clone(s.parser.draw.instance).show();A=j.node.getBBox(),j.remove()}else A={x:y.node.clientLeft,y:y.node.clientTop,width:y.node.clientWidth,height:y.node.clientHeight}}s.Box.call(this,A)}},inherit:s.Box,parent:s.Element,construct:{bbox:function(){return new s.BBox(this)}}}),s.BBox.prototype.constructor=s.BBox,s.extend(s.Element,{tbox:function(){return console.warn("Use of TBox is deprecated and mapped to RBox. Use .rbox() instead."),this.rbox(this.doc())}}),s.RBox=s.invent({create:function(y){s.Box.apply(this,[].slice.call(arguments)),y instanceof s.Element&&s.Box.call(this,y.node.getBoundingClientRect())},inherit:s.Box,parent:s.Element,extend:{addOffset:function(){return this.x+=i.pageXOffset,this.y+=i.pageYOffset,this}},construct:{rbox:function(y){return y?new s.RBox(this).transform(y.screenCTM().inverse()):new s.RBox(this).addOffset()}}}),s.RBox.prototype.constructor=s.RBox,s.Matrix=s.invent({create:function(y){var A,N=M([1,0,0,1,0,0]);for(y=y instanceof s.Element?y.matrixify():typeof y=="string"?M(y.split(s.regex.delimiter).map(parseFloat)):arguments.length==6?M([].slice.call(arguments)):Array.isArray(y)?M(y):typeof y=="object"?y:N,A=K.length-1;A>=0;--A)this[K[A]]=y[K[A]]!=null?y[K[A]]:N[K[A]]},extend:{extract:function(){var y=_(this,0,1),A=_(this,1,0),N=180/Math.PI*Math.atan2(y.y,y.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(N*Math.PI/180)+this.f*Math.sin(N*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(N*Math.PI/180)+this.e*Math.sin(-N*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-N,skewY:180/Math.PI*Math.atan2(A.y,A.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:N,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new s.Matrix(this)}},clone:function(){return new s.Matrix(this)},morph:function(y){return this.destination=new s.Matrix(y),this},at:function(y){if(!this.destination)return this;var A=new s.Matrix({a:this.a+(this.destination.a-this.a)*y,b:this.b+(this.destination.b-this.b)*y,c:this.c+(this.destination.c-this.c)*y,d:this.d+(this.destination.d-this.d)*y,e:this.e+(this.destination.e-this.e)*y,f:this.f+(this.destination.f-this.f)*y});return A},multiply:function(y){return new s.Matrix(this.native().multiply(I(y).native()))},inverse:function(){return new s.Matrix(this.native().inverse())},translate:function(y,A){return new s.Matrix(this.native().translate(y||0,A||0))},scale:function(y,A,N,j){return arguments.length==1?A=y:arguments.length==3&&(j=N,N=A,A=y),this.around(N,j,new s.Matrix(y,0,0,A,0,0))},rotate:function(y,A,N){return y=s.utils.radians(y),this.around(A,N,new s.Matrix(Math.cos(y),Math.sin(y),-Math.sin(y),Math.cos(y),0,0))},flip:function(y,A){return y=="x"?this.scale(-1,1,A,0):y=="y"?this.scale(1,-1,0,A):this.scale(-1,-1,y,A??y)},skew:function(y,A,N,j){return arguments.length==1?A=y:arguments.length==3&&(j=N,N=A,A=y),y=s.utils.radians(y),A=s.utils.radians(A),this.around(N,j,new s.Matrix(1,Math.tan(A),Math.tan(y),1,0,0))},skewX:function(y,A,N){return this.skew(y,0,A,N)},skewY:function(y,A,N){return this.skew(0,y,A,N)},around:function(y,A,N){return this.multiply(new s.Matrix(1,0,0,1,y||0,A||0)).multiply(N).multiply(new s.Matrix(1,0,0,1,-y||0,-A||0))},native:function(){for(var y=s.parser.native.createSVGMatrix(),A=K.length-1;A>=0;A--)y[K[A]]=this[K[A]];return y},toString:function(){return"matrix("+J(this.a)+","+J(this.b)+","+J(this.c)+","+J(this.d)+","+J(this.e)+","+J(this.f)+")"}},parent:s.Element,construct:{ctm:function(){return new s.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof s.Nested){var y=this.rect(1,1),A=y.node.getScreenCTM();return y.remove(),new s.Matrix(A)}return new s.Matrix(this.node.getScreenCTM())}}}),s.Point=s.invent({create:function(y,A){var N,j={x:0,y:0};N=Array.isArray(y)?{x:y[0],y:y[1]}:typeof y=="object"?{x:y.x,y:y.y}:y!=null?{x:y,y:A??y}:j,this.x=N.x,this.y=N.y},extend:{clone:function(){return new s.Point(this)},morph:function(y,A){return this.destination=new s.Point(y,A),this},at:function(y){if(!this.destination)return this;var A=new s.Point({x:this.x+(this.destination.x-this.x)*y,y:this.y+(this.destination.y-this.y)*y});return A},native:function(){var y=s.parser.native.createSVGPoint();return y.x=this.x,y.y=this.y,y},transform:function(y){return new s.Point(this.native().matrixTransform(y.native()))}}}),s.extend(s.Element,{point:function(y,A){return new s.Point(y,A).transform(this.screenCTM().inverse())}}),s.extend(s.Element,{attr:function(y,A,N){if(y==null){for(y={},A=this.node.attributes,N=A.length-1;N>=0;N--)y[A[N].nodeName]=s.regex.isNumber.test(A[N].nodeValue)?parseFloat(A[N].nodeValue):A[N].nodeValue;return y}else if(typeof y=="object")for(A in y)this.attr(A,y[A]);else if(A===null)this.node.removeAttribute(y);else{if(A==null)return A=this.node.getAttribute(y),A==null?s.defaults.attrs[y]:s.regex.isNumber.test(A)?parseFloat(A):A;y=="stroke-width"?this.attr("stroke",parseFloat(A)>0?this._stroke:null):y=="stroke"&&(this._stroke=A),(y=="fill"||y=="stroke")&&(s.regex.isImage.test(A)&&(A=this.doc().defs().image(A,0,0)),A instanceof s.Image&&(A=this.doc().defs().pattern(0,0,function(){this.add(A)}))),typeof A=="number"?A=new s.Number(A):s.Color.isColor(A)?A=new s.Color(A):Array.isArray(A)&&(A=new s.Array(A)),y=="leading"?this.leading&&this.leading(A):typeof N=="string"?this.node.setAttributeNS(N,y,A.toString()):this.node.setAttribute(y,A.toString()),this.rebuild&&(y=="font-size"||y=="x")&&this.rebuild(y,A)}return this}}),s.extend(s.Element,{transform:function(y,A){var N=this,j,oe;if(typeof y!="object")return j=new s.Matrix(N).extract(),typeof y=="string"?j[y]:j;if(j=new s.Matrix(N),A=!!A||!!y.relative,y.a!=null)j=A?j.multiply(new s.Matrix(y)):new s.Matrix(y);else if(y.rotation!=null)$(y,N),j=A?j.rotate(y.rotation,y.cx,y.cy):j.rotate(y.rotation-j.extract().rotation,y.cx,y.cy);else if(y.scale!=null||y.scaleX!=null||y.scaleY!=null){if($(y,N),y.scaleX=y.scale!=null?y.scale:y.scaleX!=null?y.scaleX:1,y.scaleY=y.scale!=null?y.scale:y.scaleY!=null?y.scaleY:1,!A){var q=j.extract();y.scaleX=y.scaleX*1/q.scaleX,y.scaleY=y.scaleY*1/q.scaleY}j=j.scale(y.scaleX,y.scaleY,y.cx,y.cy)}else if(y.skew!=null||y.skewX!=null||y.skewY!=null){if($(y,N),y.skewX=y.skew!=null?y.skew:y.skewX!=null?y.skewX:0,y.skewY=y.skew!=null?y.skew:y.skewY!=null?y.skewY:0,!A){var q=j.extract();j=j.multiply(new s.Matrix().skew(q.skewX,q.skewY,y.cx,y.cy).inverse())}j=j.skew(y.skewX,y.skewY,y.cx,y.cy)}else y.flip?(y.flip=="x"||y.flip=="y"?y.offset=y.offset==null?N.bbox()["c"+y.flip]:y.offset:y.offset==null?(oe=N.bbox(),y.flip=oe.cx,y.offset=oe.cy):y.flip=y.offset,j=new s.Matrix().flip(y.flip,y.offset)):(y.x!=null||y.y!=null)&&(A?j=j.translate(y.x,y.y):(y.x!=null&&(j.e=y.x),y.y!=null&&(j.f=y.y)));return this.attr("transform",j)}}),s.extend(s.FX,{transform:function(y,A){var N=this.target(),j,oe;return typeof y!="object"?(j=new s.Matrix(N).extract(),typeof y=="string"?j[y]:j):(A=!!A||!!y.relative,y.a!=null?j=new s.Matrix(y):y.rotation!=null?($(y,N),j=new s.Rotate(y.rotation,y.cx,y.cy)):y.scale!=null||y.scaleX!=null||y.scaleY!=null?($(y,N),y.scaleX=y.scale!=null?y.scale:y.scaleX!=null?y.scaleX:1,y.scaleY=y.scale!=null?y.scale:y.scaleY!=null?y.scaleY:1,j=new s.Scale(y.scaleX,y.scaleY,y.cx,y.cy)):y.skewX!=null||y.skewY!=null?($(y,N),y.skewX=y.skewX!=null?y.skewX:0,y.skewY=y.skewY!=null?y.skewY:0,j=new s.Skew(y.skewX,y.skewY,y.cx,y.cy)):y.flip?(y.flip=="x"||y.flip=="y"?y.offset=y.offset==null?N.bbox()["c"+y.flip]:y.offset:y.offset==null?(oe=N.bbox(),y.flip=oe.cx,y.offset=oe.cy):y.flip=y.offset,j=new s.Matrix().flip(y.flip,y.offset)):(y.x!=null||y.y!=null)&&(j=new s.Translate(y.x,y.y)),j?(j.relative=A,this.last().transforms.push(j),this._callStart()):this)}}),s.extend(s.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){var y=(this.attr("transform")||"").split(s.regex.transforms).slice(0,-1).map(function(A){var N=A.trim().split("(");return[N[0],N[1].split(s.regex.delimiter).map(function(j){return parseFloat(j)})]}).reduce(function(A,N){return N[0]=="matrix"?A.multiply(M(N[1])):A[N[0]].apply(A,N[1])},new s.Matrix);return y},toParent:function(y){if(this==y)return this;var A=this.screenCTM(),N=y.screenCTM().inverse();return this.addTo(y).untransform().transform(N.multiply(A)),this},toDoc:function(){return this.toParent(this.doc())}}),s.Transformation=s.invent({create:function(y,A){if(arguments.length>1&&typeof A!="boolean")return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(y))for(var N=0,j=this.arguments.length;N<j;++N)this[this.arguments[N]]=y[N];else if(typeof y=="object")for(var N=0,j=this.arguments.length;N<j;++N)this[this.arguments[N]]=y[this.arguments[N]];this.inversed=!1,A===!0&&(this.inversed=!0)},extend:{arguments:[],method:"",at:function(y){for(var A=[],N=0,j=this.arguments.length;N<j;++N)A.push(this[this.arguments[N]]);var oe=this._undo||new s.Matrix;return oe=new s.Matrix().morph(s.Matrix.prototype[this.method].apply(oe,A)).at(y),this.inversed?oe.inverse():oe},undo:function(y){for(var A=0,N=this.arguments.length;A<N;++A)y[this.arguments[A]]=typeof this[this.arguments[A]]>"u"?0:y[this.arguments[A]];return y.cx=this.cx,y.cy=this.cy,this._undo=new s[b(this.method)](y,!0).at(1),this}}}),s.Translate=s.invent({parent:s.Matrix,inherit:s.Transformation,create:function(y,A){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),s.Rotate=s.invent({parent:s.Matrix,inherit:s.Transformation,create:function(y,A){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(y){var A=new s.Matrix().rotate(new s.Number().morph(this.rotation-(this._undo?this._undo.rotation:0)).at(y),this.cx,this.cy);return this.inversed?A.inverse():A},undo:function(y){return this._undo=y,this}}}),s.Scale=s.invent({parent:s.Matrix,inherit:s.Transformation,create:function(y,A){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}}),s.Skew=s.invent({parent:s.Matrix,inherit:s.Transformation,create:function(y,A){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}}),s.extend(s.Element,{style:function(y,A){if(arguments.length==0)return this.node.style.cssText||"";if(arguments.length<2)if(typeof y=="object")for(A in y)this.style(A,y[A]);else if(s.regex.isCss.test(y))for(y=y.split(/\s*;\s*/).filter(function(N){return!!N}).map(function(N){return N.split(/\s*:\s*/)});A=y.pop();)this.style(A[0],A[1]);else return this.node.style[v(y)];else this.node.style[v(y)]=A===null||s.regex.isBlank.test(A)?"":A;return this}}),s.Parent=s.invent({create:function(y){this.constructor.call(this,y)},inherit:s.Element,extend:{children:function(){return s.utils.map(s.utils.filterSVGElements(this.node.childNodes),function(y){return s.adopt(y)})},add:function(y,A){return A==null?this.node.appendChild(y.node):y.node!=this.node.childNodes[A]&&this.node.insertBefore(y.node,this.node.childNodes[A]),this},put:function(y,A){return this.add(y,A),y},has:function(y){return this.index(y)>=0},index:function(y){return[].slice.call(this.node.childNodes).indexOf(y.node)},get:function(y){return s.adopt(this.node.childNodes[y])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(y,A){var N,j,oe=this.children();for(N=0,j=oe.length;N<j;N++)oe[N]instanceof s.Element&&y.apply(oe[N],[N,oe]),A&&oe[N]instanceof s.Container&&oe[N].each(y,A);return this},removeElement:function(y){return this.node.removeChild(y.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),s.extend(s.Parent,{ungroup:function(y,A){return A===0||this instanceof s.Defs||this.node==s.parser.draw?this:(y=y||(this instanceof s.Doc?this:this.parent(s.Parent)),A=A||1/0,this.each(function(){return this instanceof s.Defs?this:this instanceof s.Parent?this.ungroup(y,A-1):this.toParent(y)}),this.node.firstChild||this.remove(),this)},flatten:function(y,A){return this.ungroup(y,A)}}),s.Container=s.invent({create:function(y){this.constructor.call(this,y)},inherit:s.Parent}),s.ViewBox=s.invent({create:function(y){var A=[0,0,0,0],N,j,oe,q,de,re,me,ve=1,_e=1,Se=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(y instanceof s.Element){for(re=y,me=y,de=(y.attr("viewBox")||"").match(Se),y.bbox,oe=new s.Number(y.width()),q=new s.Number(y.height());oe.unit=="%";)ve*=oe.value,oe=new s.Number(re instanceof s.Doc?re.parent().offsetWidth:re.parent().width()),re=re.parent();for(;q.unit=="%";)_e*=q.value,q=new s.Number(me instanceof s.Doc?me.parent().offsetHeight:me.parent().height()),me=me.parent();this.x=0,this.y=0,this.width=oe*ve,this.height=q*_e,this.zoom=1,de&&(N=parseFloat(de[0]),j=parseFloat(de[1]),oe=parseFloat(de[2]),q=parseFloat(de[3]),this.zoom=this.width/this.height>oe/q?this.height/q:this.width/oe,this.x=N,this.y=j,this.width=oe,this.height=q)}else y=typeof y=="string"?y.match(Se).map(function(Oe){return parseFloat(Oe)}):Array.isArray(y)?y:typeof y=="object"?[y.x,y.y,y.width,y.height]:arguments.length==4?[].slice.call(arguments):A,this.x=y[0],this.y=y[1],this.width=y[2],this.height=y[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(y,A,N,j){return this.destination=new s.ViewBox(y,A,N,j),this},at:function(y){return this.destination?new s.ViewBox([this.x+(this.destination.x-this.x)*y,this.y+(this.destination.y-this.y)*y,this.width+(this.destination.width-this.width)*y,this.height+(this.destination.height-this.height)*y]):this}},parent:s.Container,construct:{viewbox:function(y,A,N,j){return arguments.length==0?new s.ViewBox(this):this.attr("viewBox",new s.ViewBox(y,A,N,j))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(y){s.Element.prototype[y]=function(A){return A==null?s.off(this,y):s.on(this,y,A),this}}),s.listenerId=0,s.on=function(y,A,N,j,oe){var q=N.bind(j||y),de=y instanceof s.Element?y.node:y;de.instance=de.instance||{_events:{}};var re=de.instance._events;N._svgjsListenerId||(N._svgjsListenerId=++s.listenerId),A.split(s.regex.delimiter).forEach(function(me){var ve=me.split(".")[0],_e=me.split(".")[1]||"*";re[ve]=re[ve]||{},re[ve][_e]=re[ve][_e]||{},re[ve][_e][N._svgjsListenerId]=q,de.addEventListener(ve,q,oe||!1)})},s.off=function(y,A,N,j){var oe=y instanceof s.Element?y.node:y;if(oe.instance&&!(typeof N=="function"&&(N=N._svgjsListenerId,!N))){var q=oe.instance._events;(A||"").split(s.regex.delimiter).forEach(function(de){var re=de&&de.split(".")[0],me=de&&de.split(".")[1],ve,_e;if(N)q[re]&&q[re][me||"*"]&&(oe.removeEventListener(re,q[re][me||"*"][N],j||!1),delete q[re][me||"*"][N]);else if(re&&me){if(q[re]&&q[re][me]){for(_e in q[re][me])s.off(oe,[re,me].join("."),_e);delete q[re][me]}}else if(me)for(de in q)for(ve in q[de])me===ve&&s.off(oe,[de,me].join("."));else if(re){if(q[re]){for(ve in q[re])s.off(oe,[re,ve].join("."));delete q[re]}}else{for(de in q)s.off(oe,de);oe.instance._events={}}})}},s.extend(s.Element,{on:function(y,A,N,j){return s.on(this,y,A,N,j),this},off:function(y,A){return s.off(this.node,y,A),this},fire:function(y,A){return y instanceof i.Event?this.node.dispatchEvent(y):this.node.dispatchEvent(y=new s.CustomEvent(y,{detail:A,cancelable:!0})),this._event=y,this},event:function(){return this._event}}),s.Defs=s.invent({create:"defs",inherit:s.Container}),s.G=s.invent({create:"g",inherit:s.Container,extend:{x:function(y){return y==null?this.transform("x"):this.transform({x:y-this.x()},!0)},y:function(y){return y==null?this.transform("y"):this.transform({y:y-this.y()},!0)},cx:function(y){return y==null?this.gbox().cx:this.x(y-this.gbox().width/2)},cy:function(y){return y==null?this.gbox().cy:this.y(y-this.gbox().height/2)},gbox:function(){var y=this.bbox(),A=this.transform();return y.x+=A.x,y.x2+=A.x,y.cx+=A.x,y.y+=A.y,y.y2+=A.y,y.cy+=A.y,y}},construct:{group:function(){return this.put(new s.G)}}}),s.Doc=s.invent({create:function(y){y&&(y=typeof y=="string"?r.getElementById(y):y,y.nodeName=="svg"?this.constructor.call(this,y):(this.constructor.call(this,s.create("svg")),y.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:s.Container,extend:{namespace:function(){return this.attr({xmlns:s.ns,version:"1.1"}).attr("xmlns:xlink",s.xlink,s.xmlns).attr("xmlns:svgjs",s.svgjs,s.xmlns)},defs:function(){if(!this._defs){var y;(y=this.node.getElementsByTagName("defs")[0])?this._defs=s.adopt(y):this._defs=new s.Defs,this.node.appendChild(this._defs.node)}return this._defs},parent:function(){return!this.node.parentNode||this.node.parentNode.nodeName=="#document"||this.node.parentNode.nodeName=="#document-fragment"?null:this.node.parentNode},spof:function(){var y=this.node.getScreenCTM();return y&&this.style("left",-y.e%1+"px").style("top",-y.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,s.parser.draw.parentNode||this.node.appendChild(s.parser.draw),this},clone:function(y){this.writeDataToDom();var A=this.node,N=B(A.cloneNode(!0));return y?(y.node||y).appendChild(N.node):A.parentNode.insertBefore(N.node,A.nextSibling),N}}}),s.extend(s.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var y=this.position()+1,A=this.parent();return A.removeElement(this).add(this,y),A instanceof s.Doc&&A.node.appendChild(A.defs().node),this},backward:function(){var y=this.position();return y>0&&this.parent().removeElement(this).add(this,y-1),this},front:function(){var y=this.parent();return y.node.appendChild(this.node),y instanceof s.Doc&&y.node.appendChild(y.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(y){y.remove();var A=this.position();return this.parent().add(y,A),this},after:function(y){y.remove();var A=this.position();return this.parent().add(y,A+1),this}}),s.Mask=s.invent({create:function(){this.constructor.call(this,s.create("mask")),this.targets=[]},inherit:s.Container,extend:{remove:function(){for(var y=this.targets.length-1;y>=0;y--)this.targets[y]&&this.targets[y].unmask();return this.targets=[],s.Element.prototype.remove.call(this),this}},construct:{mask:function(){return this.defs().put(new s.Mask)}}}),s.extend(s.Element,{maskWith:function(y){return this.masker=y instanceof s.Mask?y:this.parent().mask().add(y),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),s.ClipPath=s.invent({create:function(){this.constructor.call(this,s.create("clipPath")),this.targets=[]},inherit:s.Container,extend:{remove:function(){for(var y=this.targets.length-1;y>=0;y--)this.targets[y]&&this.targets[y].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new s.ClipPath)}}}),s.extend(s.Element,{clipWith:function(y){return this.clipper=y instanceof s.ClipPath?y:this.parent().clip().add(y),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),s.Gradient=s.invent({create:function(y){this.constructor.call(this,s.create(y+"Gradient")),this.type=y},inherit:s.Container,extend:{at:function(y,A,N){return this.put(new s.Stop).update(y,A,N)},update:function(y){return this.clear(),typeof y=="function"&&y.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(y,A,N){return y=="transform"&&(y="gradientTransform"),s.Container.prototype.attr.call(this,y,A,N)}},construct:{gradient:function(y,A){return this.defs().gradient(y,A)}}}),s.extend(s.Gradient,s.FX,{from:function(y,A){return(this._target||this).type=="radial"?this.attr({fx:new s.Number(y),fy:new s.Number(A)}):this.attr({x1:new s.Number(y),y1:new s.Number(A)})},to:function(y,A){return(this._target||this).type=="radial"?this.attr({cx:new s.Number(y),cy:new s.Number(A)}):this.attr({x2:new s.Number(y),y2:new s.Number(A)})}}),s.extend(s.Defs,{gradient:function(y,A){return this.put(new s.Gradient(y)).update(A)}}),s.Stop=s.invent({create:"stop",inherit:s.Element,extend:{update:function(y){return(typeof y=="number"||y instanceof s.Number)&&(y={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),y.opacity!=null&&this.attr("stop-opacity",y.opacity),y.color!=null&&this.attr("stop-color",y.color),y.offset!=null&&this.attr("offset",new s.Number(y.offset)),this}}}),s.Pattern=s.invent({create:"pattern",inherit:s.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(y){return this.clear(),typeof y=="function"&&y.call(this,this),this},toString:function(){return this.fill()},attr:function(y,A,N){return y=="transform"&&(y="patternTransform"),s.Container.prototype.attr.call(this,y,A,N)}},construct:{pattern:function(y,A,N){return this.defs().pattern(y,A,N)}}}),s.extend(s.Defs,{pattern:function(y,A,N){return this.put(new s.Pattern).update(N).attr({x:0,y:0,width:y,height:A,patternUnits:"userSpaceOnUse"})}}),s.Shape=s.invent({create:function(y){this.constructor.call(this,y)},inherit:s.Element}),s.Bare=s.invent({create:function(y,A){if(this.constructor.call(this,s.create(y)),A)for(var N in A.prototype)typeof A.prototype[N]=="function"&&(this[N]=A.prototype[N])},inherit:s.Element,extend:{words:function(y){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(r.createTextNode(y)),this}}}),s.extend(s.Parent,{element:function(y,A){return this.put(new s.Bare(y,A))}}),s.Symbol=s.invent({create:"symbol",inherit:s.Container,construct:{symbol:function(){return this.put(new s.Symbol)}}}),s.Use=s.invent({create:"use",inherit:s.Shape,extend:{element:function(y,A){return this.attr("href",(A||"")+"#"+y,s.xlink)}},construct:{use:function(y,A){return this.put(new s.Use).element(y,A)}}}),s.Rect=s.invent({create:"rect",inherit:s.Shape,construct:{rect:function(y,A){return this.put(new s.Rect).size(y,A)}}}),s.Circle=s.invent({create:"circle",inherit:s.Shape,construct:{circle:function(y){return this.put(new s.Circle).rx(new s.Number(y).divide(2)).move(0,0)}}}),s.extend(s.Circle,s.FX,{rx:function(y){return this.attr("r",y)},ry:function(y){return this.rx(y)}}),s.Ellipse=s.invent({create:"ellipse",inherit:s.Shape,construct:{ellipse:function(y,A){return this.put(new s.Ellipse).size(y,A).move(0,0)}}}),s.extend(s.Ellipse,s.Rect,s.FX,{rx:function(y){return this.attr("rx",y)},ry:function(y){return this.attr("ry",y)}}),s.extend(s.Circle,s.Ellipse,{x:function(y){return y==null?this.cx()-this.rx():this.cx(y+this.rx())},y:function(y){return y==null?this.cy()-this.ry():this.cy(y+this.ry())},cx:function(y){return y==null?this.attr("cx"):this.attr("cx",y)},cy:function(y){return y==null?this.attr("cy"):this.attr("cy",y)},width:function(y){return y==null?this.rx()*2:this.rx(new s.Number(y).divide(2))},height:function(y){return y==null?this.ry()*2:this.ry(new s.Number(y).divide(2))},size:function(y,A){var N=T(this,y,A);return this.rx(new s.Number(N.width).divide(2)).ry(new s.Number(N.height).divide(2))}}),s.Line=s.invent({create:"line",inherit:s.Shape,extend:{array:function(){return new s.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(y,A,N,j){return y==null?this.array():(typeof A<"u"?y={x1:y,y1:A,x2:N,y2:j}:y=new s.PointArray(y).toLine(),this.attr(y))},move:function(y,A){return this.attr(this.array().move(y,A).toLine())},size:function(y,A){var N=T(this,y,A);return this.attr(this.array().size(N.width,N.height).toLine())}},construct:{line:function(y,A,N,j){return s.Line.prototype.plot.apply(this.put(new s.Line),y!=null?[y,A,N,j]:[0,0,0,0])}}}),s.Polyline=s.invent({create:"polyline",inherit:s.Shape,construct:{polyline:function(y){return this.put(new s.Polyline).plot(y||new s.PointArray)}}}),s.Polygon=s.invent({create:"polygon",inherit:s.Shape,construct:{polygon:function(y){return this.put(new s.Polygon).plot(y||new s.PointArray)}}}),s.extend(s.Polyline,s.Polygon,{array:function(){return this._array||(this._array=new s.PointArray(this.attr("points")))},plot:function(y){return y==null?this.array():this.clear().attr("points",typeof y=="string"?y:this._array=new s.PointArray(y))},clear:function(){return delete this._array,this},move:function(y,A){return this.attr("points",this.array().move(y,A))},size:function(y,A){var N=T(this,y,A);return this.attr("points",this.array().size(N.width,N.height))}}),s.extend(s.Line,s.Polyline,s.Polygon,{morphArray:s.PointArray,x:function(y){return y==null?this.bbox().x:this.move(y,this.bbox().y)},y:function(y){return y==null?this.bbox().y:this.move(this.bbox().x,y)},width:function(y){var A=this.bbox();return y==null?A.width:this.size(y,A.height)},height:function(y){var A=this.bbox();return y==null?A.height:this.size(A.width,y)}}),s.Path=s.invent({create:"path",inherit:s.Shape,extend:{morphArray:s.PathArray,array:function(){return this._array||(this._array=new s.PathArray(this.attr("d")))},plot:function(y){return y==null?this.array():this.clear().attr("d",typeof y=="string"?y:this._array=new s.PathArray(y))},clear:function(){return delete this._array,this},move:function(y,A){return this.attr("d",this.array().move(y,A))},x:function(y){return y==null?this.bbox().x:this.move(y,this.bbox().y)},y:function(y){return y==null?this.bbox().y:this.move(this.bbox().x,y)},size:function(y,A){var N=T(this,y,A);return this.attr("d",this.array().size(N.width,N.height))},width:function(y){return y==null?this.bbox().width:this.size(y,this.bbox().height)},height:function(y){return y==null?this.bbox().height:this.size(this.bbox().width,y)}},construct:{path:function(y){return this.put(new s.Path).plot(y||new s.PathArray)}}}),s.Image=s.invent({create:"image",inherit:s.Shape,extend:{load:function(y){if(!y)return this;var A=this,N=new i.Image;return s.on(N,"load",function(){s.off(N);var j=A.parent(s.Pattern);j!==null&&(A.width()==0&&A.height()==0&&A.size(N.width,N.height),j&&j.width()==0&&j.height()==0&&j.size(A.width(),A.height()),typeof A._loaded=="function"&&A._loaded.call(A,{width:N.width,height:N.height,ratio:N.width/N.height,url:y}))}),s.on(N,"error",function(j){s.off(N),typeof A._error=="function"&&A._error.call(A,j)}),this.attr("href",N.src=this.src=y,s.xlink)},loaded:function(y){return this._loaded=y,this},error:function(y){return this._error=y,this}},construct:{image:function(y,A,N){return this.put(new s.Image).load(y).size(A||0,N||A||0)}}}),s.Text=s.invent({create:function(){this.constructor.call(this,s.create("text")),this.dom.leading=new s.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",s.defaults.attrs["font-family"])},inherit:s.Shape,extend:{x:function(y){return y==null?this.attr("x"):this.attr("x",y)},y:function(y){var A=this.attr("y"),N=typeof A=="number"?A-this.bbox().y:0;return y==null?typeof A=="number"?A-N:A:this.attr("y",typeof y.valueOf()=="number"?y+N:y)},cx:function(y){return y==null?this.bbox().cx:this.x(y-this.bbox().width/2)},cy:function(y){return y==null?this.bbox().cy:this.y(y-this.bbox().height/2)},text:function(y){if(typeof y>"u"){for(var y="",A=this.node.childNodes,N=0,j=A.length;N<j;++N)N!=0&&A[N].nodeType!=3&&s.adopt(A[N]).dom.newLined==!0&&(y+=`
`),y+=A[N].textContent;return y}if(this.clear().build(!0),typeof y=="function")y.call(this,this);else{y=y.split(`
`);for(var N=0,oe=y.length;N<oe;N++)this.tspan(y[N]).newLine()}return this.build(!1).rebuild()},size:function(y){return this.attr("font-size",y).rebuild()},leading:function(y){return y==null?this.dom.leading:(this.dom.leading=new s.Number(y),this.rebuild())},lines:function(){var y=(this.textPath&&this.textPath()||this).node,A=s.utils.map(s.utils.filterSVGElements(y.childNodes),function(N){return s.adopt(N)});return new s.Set(A)},rebuild:function(y){if(typeof y=="boolean"&&(this._rebuild=y),this._rebuild){var A=this,N=0,j=this.dom.leading*new s.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(A.textPath()||this.attr("x",A.attr("x")),this.text()==`
`?N+=j:(this.attr("dy",j+N),N=0))}),this.fire("rebuild")}return this},build:function(y){return this._build=!!y,this},setData:function(y){return this.dom=y,this.dom.leading=new s.Number(y.leading||1.3),this}},construct:{text:function(y){return this.put(new s.Text).text(y)},plain:function(y){return this.put(new s.Text).plain(y)}}}),s.Tspan=s.invent({create:"tspan",inherit:s.Shape,extend:{text:function(y){return y==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof y=="function"?y.call(this,this):this.plain(y),this)},dx:function(y){return this.attr("dx",y)},dy:function(y){return this.attr("dy",y)},newLine:function(){var y=this.parent(s.Text);return this.dom.newLined=!0,this.dy(y.dom.leading*y.attr("font-size")).attr("x",y.x())}}}),s.extend(s.Text,s.Tspan,{plain:function(y){return this._build===!1&&this.clear(),this.node.appendChild(r.createTextNode(y)),this},tspan:function(y){var A=(this.textPath&&this.textPath()||this).node,N=new s.Tspan;return this._build===!1&&this.clear(),A.appendChild(N.node),N.text(y)},clear:function(){for(var y=(this.textPath&&this.textPath()||this).node;y.hasChildNodes();)y.removeChild(y.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),s.TextPath=s.invent({create:"textPath",inherit:s.Parent,parent:s.Text,construct:{morphArray:s.PathArray,path:function(y){for(var A=new s.TextPath,N=this.doc().defs().path(y);this.node.hasChildNodes();)A.node.appendChild(this.node.firstChild);return this.node.appendChild(A.node),A.attr("href","#"+N,s.xlink),this},array:function(){var y=this.track();return y?y.array():null},plot:function(y){var A=this.track(),N=null;return A&&(N=A.plot(y)),y==null?N:this},track:function(){var y=this.textPath();if(y)return y.reference("href")},textPath:function(){if(this.node.firstChild&&this.node.firstChild.nodeName=="textPath")return s.adopt(this.node.firstChild)}}}),s.Nested=s.invent({create:function(){this.constructor.call(this,s.create("svg")),this.style("overflow","visible")},inherit:s.Container,construct:{nested:function(){return this.put(new s.Nested)}}}),s.A=s.invent({create:"a",inherit:s.Container,extend:{to:function(y){return this.attr("href",y,s.xlink)},show:function(y){return this.attr("show",y,s.xlink)},target:function(y){return this.attr("target",y)}},construct:{link:function(y){return this.put(new s.A).to(y)}}}),s.extend(s.Element,{linkTo:function(y){var A=new s.A;return typeof y=="function"?y.call(A,A):A.to(y),this.parent().put(A).put(this)}}),s.Marker=s.invent({create:"marker",inherit:s.Container,extend:{width:function(y){return this.attr("markerWidth",y)},height:function(y){return this.attr("markerHeight",y)},ref:function(y,A){return this.attr("refX",y).attr("refY",A)},update:function(y){return this.clear(),typeof y=="function"&&y.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(y,A,N){return this.defs().marker(y,A,N)}}}),s.extend(s.Defs,{marker:function(y,A,N){return this.put(new s.Marker).size(y,A).ref(y/2,A/2).viewbox(0,0,y,A).attr("orient","auto").update(N)}}),s.extend(s.Line,s.Polyline,s.Polygon,s.Path,{marker:function(y,A,N,j){var oe=["marker"];return y!="all"&&oe.push(y),oe=oe.join("-"),y=arguments[1]instanceof s.Marker?arguments[1]:this.doc().marker(A,N,j),this.attr(oe,y)}});var c={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(y,A){return A=="color"?y:y+"-"+A}};["fill","stroke"].forEach(function(y){var A,N={};N[y]=function(j){if(typeof j>"u")return this;if(typeof j=="string"||s.Color.isRgb(j)||j&&typeof j.fill=="function")this.attr(y,j);else for(A=c[y].length-1;A>=0;A--)j[c[y][A]]!=null&&this.attr(c.prefix(y,c[y][A]),j[c[y][A]]);return this},s.extend(s.Element,s.FX,N)}),s.extend(s.Element,s.FX,{rotate:function(y,A,N){return this.transform({rotation:y,cx:A,cy:N})},skew:function(y,A,N,j){return arguments.length==1||arguments.length==3?this.transform({skew:y,cx:A,cy:N}):this.transform({skewX:y,skewY:A,cx:N,cy:j})},scale:function(y,A,N,j){return arguments.length==1||arguments.length==3?this.transform({scale:y,cx:A,cy:N}):this.transform({scaleX:y,scaleY:A,cx:N,cy:j})},translate:function(y,A){return this.transform({x:y,y:A})},flip:function(y,A){return A=typeof y=="number"?y:A,this.transform({flip:y||"both",offset:A})},matrix:function(y){return this.attr("transform",new s.Matrix(arguments.length==6?[].slice.call(arguments):y))},opacity:function(y){return this.attr("opacity",y)},dx:function(y){return this.x(new s.Number(y).plus(this instanceof s.FX?0:this.x()),!0)},dy:function(y){return this.y(new s.Number(y).plus(this instanceof s.FX?0:this.y()),!0)},dmove:function(y,A){return this.dx(y).dy(A)}}),s.extend(s.Rect,s.Ellipse,s.Circle,s.Gradient,s.FX,{radius:function(y,A){var N=(this._target||this).type;return N=="radial"||N=="circle"?this.attr("r",new s.Number(y)):this.rx(y).ry(A??y)}}),s.extend(s.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(y){return this.node.getPointAtLength(y)}}),s.extend(s.Parent,s.Text,s.Tspan,s.FX,{font:function(y,A){if(typeof y=="object")for(A in y)this.font(A,y[A]);return y=="leading"?this.leading(A):y=="anchor"?this.attr("text-anchor",A):y=="size"||y=="family"||y=="weight"||y=="stretch"||y=="variant"||y=="style"?this.attr("font-"+y,A):this.attr(y,A)}}),s.Set=s.invent({create:function(y){y instanceof s.Set?this.members=y.members.slice():Array.isArray(y)?this.members=y:this.clear()},extend:{add:function(){var y,A,N=[].slice.call(arguments);for(y=0,A=N.length;y<A;y++)this.members.push(N[y]);return this},remove:function(y){var A=this.index(y);return A>-1&&this.members.splice(A,1),this},each:function(y){for(var A=0,N=this.members.length;A<N;A++)y.apply(this.members[A],[A,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(y){return this.index(y)>=0},index:function(y){return this.members.indexOf(y)},get:function(y){return this.members[y]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){if(this.members.length==0)return new s.RBox;var y=this.members[0].rbox(this.members[0].doc());return this.each(function(){y=y.merge(this.rbox(this.doc()))}),y}},construct:{set:function(y){return new s.Set(y)}}}),s.FX.Set=s.invent({create:function(y){this.set=y}}),s.Set.inherit=function(){var y,A=[];for(var y in s.Shape.prototype)typeof s.Shape.prototype[y]=="function"&&typeof s.Set.prototype[y]!="function"&&A.push(y);A.forEach(function(N){s.Set.prototype[N]=function(){for(var j=0,oe=this.members.length;j<oe;j++)this.members[j]&&typeof this.members[j][N]=="function"&&this.members[j][N].apply(this.members[j],arguments);return N=="animate"?this.fx||(this.fx=new s.FX.Set(this)):this}}),A=[];for(var y in s.FX.prototype)typeof s.FX.prototype[y]=="function"&&typeof s.FX.Set.prototype[y]!="function"&&A.push(y);A.forEach(function(N){s.FX.Set.prototype[N]=function(){for(var j=0,oe=this.set.members.length;j<oe;j++)this.set.members[j].fx[N].apply(this.set.members[j].fx,arguments);return this}})},s.extend(s.Element,{data:function(y,A,N){if(typeof y=="object")for(A in y)this.data(A,y[A]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+y))}catch{return this.attr("data-"+y)}else this.attr("data-"+y,A===null?null:N===!0||typeof A=="string"||typeof A=="number"?A:JSON.stringify(A));return this}}),s.extend(s.Element,{remember:function(y,A){if(typeof arguments[0]=="object")for(var A in y)this.remember(A,y[A]);else{if(arguments.length==1)return this.memory()[y];this.memory()[y]=A}return this},forget:function(){if(arguments.length==0)this._memory={};else for(var y=arguments.length-1;y>=0;y--)delete this.memory()[arguments[y]];return this},memory:function(){return this._memory||(this._memory={})}}),s.get=function(y){var A=r.getElementById(W(y)||y);return s.adopt(A)},s.select=function(y,A){return new s.Set(s.utils.map((A||r).querySelectorAll(y),function(N){return s.adopt(N)}))},s.extend(s.Parent,{select:function(y){return s.select(y,this.node)}});function d(y,A,N,j){return N+j.replace(s.regex.dots," .")}function f(y){for(var A=y.slice(0),N=A.length;N--;)Array.isArray(A[N])&&(A[N]=f(A[N]));return A}function m(y,A){return y instanceof A}function g(y,A){return(y.matches||y.matchesSelector||y.msMatchesSelector||y.mozMatchesSelector||y.webkitMatchesSelector||y.oMatchesSelector).call(y,A)}function v(y){return y.toLowerCase().replace(/-(.)/g,function(A,N){return N.toUpperCase()})}function b(y){return y.charAt(0).toUpperCase()+y.slice(1)}function x(y){return y.length==4?["#",y.substring(1,2),y.substring(1,2),y.substring(2,3),y.substring(2,3),y.substring(3,4),y.substring(3,4)].join(""):y}function S(y){var A=y.toString(16);return A.length==1?"0"+A:A}function T(y,A,N){if(A==null||N==null){var j=y.bbox();A==null?A=j.width/j.height*N:N==null&&(N=j.height/j.width*A)}return{width:A,height:N}}function _(y,A,N){return{x:A*y.a+N*y.c+0,y:A*y.b+N*y.d+0}}function M(y){return{a:y[0],b:y[1],c:y[2],d:y[3],e:y[4],f:y[5]}}function I(y){return y instanceof s.Matrix||(y=new s.Matrix(y)),y}function $(y,A){y.cx=y.cx==null?A.bbox().cx:y.cx,y.cy=y.cy==null?A.bbox().cy:y.cy}function L(y){for(var A=0,N=y.length,j="";A<N;A++)j+=y[A][0],y[A][1]!=null&&(j+=y[A][1],y[A][2]!=null&&(j+=" ",j+=y[A][2],y[A][3]!=null&&(j+=" ",j+=y[A][3],j+=" ",j+=y[A][4],y[A][5]!=null&&(j+=" ",j+=y[A][5],j+=" ",j+=y[A][6],y[A][7]!=null&&(j+=" ",j+=y[A][7])))));return j+" "}function B(y){for(var A=y.childNodes.length-1;A>=0;A--)y.childNodes[A]instanceof i.SVGElement&&B(y.childNodes[A]);return s.adopt(y).id(s.eid(y.nodeName))}function z(y){return y.x==null&&(y.x=0,y.y=0,y.width=0,y.height=0),y.w=y.width,y.h=y.height,y.x2=y.x+y.width,y.y2=y.y+y.height,y.cx=y.x+y.width/2,y.cy=y.y+y.height/2,y}function W(y){var A=(y||"").toString().match(s.regex.reference);if(A)return A[1]}function J(y){return Math.abs(y)>1e-37?y:0}var K="abcdef".split("");if(typeof i.CustomEvent!="function"){var Q=function(y,A){A=A||{bubbles:!1,cancelable:!1,detail:void 0};var N=r.createEvent("CustomEvent");return N.initCustomEvent(y,A.bubbles,A.cancelable,A.detail),N};Q.prototype=i.Event.prototype,s.CustomEvent=Q}else s.CustomEvent=i.CustomEvent;return function(y){for(var A=0,N=["moz","webkit"],j=0;j<N.length&&!i.requestAnimationFrame;++j)y.requestAnimationFrame=y[N[j]+"RequestAnimationFrame"],y.cancelAnimationFrame=y[N[j]+"CancelAnimationFrame"]||y[N[j]+"CancelRequestAnimationFrame"];y.requestAnimationFrame=y.requestAnimationFrame||function(oe){var q=new Date().getTime(),de=Math.max(0,16-(q-A)),re=y.setTimeout(function(){oe(q+de)},de);return A=q+de,re},y.cancelAnimationFrame=y.cancelAnimationFrame||y.clearTimeout}(i),s})})(spe);var wrt=spe.exports;const P1=Nw(wrt);class _rt extends Wn{constructor(t){super(t)}SIMPLE="simple";UNIQUE_VALUE="unique-value";CLASS_BREAKS="class-breaks";NONE="none";CONTAINER_SIZE=32;CONTENT_SIZE=24;CONTENT_IMAGE_SIZE=28;CONTAINER_CENTER=this.CONTAINER_SIZE/2;CONTENT_PADDING=(this.CONTAINER_SIZE-this.CONTENT_SIZE)/2;getGraphicIcon(t,i){return i.getGraphicIcon(t)}getGraphicSymbol(t,i){return i.getGraphicSymbol(t)}makeRenderer(t,i,r=!1){switch(t.type){case this.SIMPLE:return new grt(t,i);case this.CLASS_BREAKS:return new brt(t,i,r);case this.UNIQUE_VALUE:return new vrt(t,i,r);default:throw new Error(`Unknown renderer type encountered - ${t.type}`)}}async generateWMSSymbology(t){const i=P1(window.document.createElement("div")).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,0,0),r={svgcode:"",imgHeight:"",imgWidth:""};if(t){const n=await this.renderSymbologyImage(t);if(n){r.svgcode=n;const s=document.createElement("span");s.innerHTML=n;const o=s.firstElementChild?.lastElementChild;r.imgHeight=o?.getAttribute("height")||"",r.imgWidth=o?.getAttribute("width")||""}else r.svgcode=i.svg()}else r.svgcode=i.svg();return r}listToSymbology(t,i){return i.map(({text:n,image:s})=>{const o={name:n,image:s,svgcode:""};return t(s).then(a=>{o.svgcode=a}),o})}listToIconSymbology(t){return this.listToSymbology(this.renderSymbologyIcon,t)}listToImageSymbology(t){return this.listToSymbology(this.renderSymbologyImage,t)}async renderSymbologyImage(t,i=null){i===null&&(i=P1(window.document.createElement("div")).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,0,0));const r=await this.$iApi.geo.shared.convertImagetoDataURL(t);if(r===t)return"";const{loader:n}=await this.svgDrawImage(i,r);return i.viewbox(0,0,n.width,n.height),i.svg()}async renderSymbologyIcon(t,i=null){if(i===null){const s=window.document.createElement("div");s.setAttribute("style","opacity:0;position:fixed;left:100%;top:100%;overflow:hidden"),window.document.body.appendChild(s),i=P1(s).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,this.CONTAINER_SIZE,this.CONTAINER_SIZE)}const r=await this.$iApi.geo.shared.convertImagetoDataURL(t),{image:n}=await this.svgDrawImage(i,r);return n.center(this.CONTAINER_CENTER,this.CONTAINER_CENTER),this.fitInto(n,this.CONTENT_IMAGE_SIZE),i.svg()}generatePlaceholderSymbology(t,i="#000"){const r=P1(window.document.createElement("div")).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,this.CONTAINER_SIZE,this.CONTAINER_SIZE);return r.rect(this.CONTENT_IMAGE_SIZE,this.CONTENT_IMAGE_SIZE).center(this.CONTAINER_CENTER,this.CONTAINER_CENTER).fill(i),r.text(t[0].toUpperCase()).size(23).fill("#fff").attr({"font-weight":"bold","font-family":"Roboto"}).center(this.CONTAINER_CENTER,this.CONTAINER_CENTER),{name:t,svgcode:r.svg()}}async generateBlankSymbology(){return P1(window.document.createElement("div")).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).svg()}async symbolToSvg(t){const i=this,r=1.33333,n=window.document.createElement("div");n.setAttribute("style","opacity:0;position:fixed;left:100%;top:100%;overflow:hidden"),window.document.body.appendChild(n);const s=P1(n).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,this.CONTAINER_SIZE,this.CONTAINER_SIZE),o={path({size:g,path:v}){return s.path(v).size(g*r)},circle({size:g}){return s.circle(g*r)},cross({size:g}){return s.path("M 0,10 L 20,10 M 10,0 L 10,20").size(g*r)},x({size:g}){return s.path("M 0,0 L 20,20 M 20,0 L 0,20").size(g*r)},triangle({size:g}){return s.path("M 20,20 L 10,0 0,20 Z").size(g*r)},diamond({size:g}){return s.path("M 20,10 L 10,0 0,10 10,20 Z").size(g*r)},square({size:g}){return s.path("M 0,0 20,0 20,20 0,20 Z").size(g*r)}},a={[aa.SOLID]:"none",[aa.NONE]:"none",[aa.DASH]:"5.333,4",[aa.DOT]:"1.333,4",[aa.DASHDOT]:"5.333,4,1.333,4",[aa.LONGDASH]:"10.666,4",[aa.LONGDASHDOT]:"10.666,4,1.333,4",[aa.LONGDASHDOTDOT]:"10.666,4,1.333,4,1.333,4",[aa.SHORTDOT]:"1.333,1.333",[aa.SHORTDASH]:"5.333,1.333",[aa.SHORTDASHDOT]:"5.333,1.333,1.333,1.333",[aa.SHORTDASHDOTDOT]:"5.333,1.333,1.333,1.333,1.333,1.333"},l={color:"#000",opacity:1,width:1,linecap:"square",linejoin:"miter",miterlimit:4},u={color:[0,0,0,0],width:0,style:a.none},c={solid:g=>({color:g.colour,opacity:g.opacity}),none:()=>"transparent",horizontal:(g,v)=>s.pattern(5,5,x=>x.line(0,5/2,5,5/2)).stroke(v),vertical:(g,v)=>s.pattern(5,5,x=>x.line(5/2,0,5/2,5)).stroke(v),"forward-diagonal":(g,v)=>s.pattern(5,5,x=>{x.line(0,0,5,5).stroke(v),x.line(0,0,5,5).move(0,5).stroke(v),x.line(0,0,5,5).move(5,0).stroke(v)}),"backward-diagonal":(g,v)=>s.pattern(5,5,x=>{x.line(5,0,0,5).stroke(v),x.line(5,0,0,5).move(5/2,5/2).stroke(v),x.line(5,0,0,5).move(-5/2,-5/2).stroke(v)}),cross:(g,v)=>s.pattern(5,5,x=>{x.line(5/2,0,5/2,5).stroke(v),x.line(0,5/2,5,5/2).stroke(v)}),"diagonal-cross":(g,v)=>s.pattern(7,7,x=>{x.line(0,0,7,7).stroke(v),x.line(7,0,0,7).stroke(v)})},d={"simple-marker"(){const g=m(t.color);t.outline=t.outline||u;const v=m(t.outline.color),b=f({color:v.colour,opacity:v.opacity,width:t.outline.width,dasharray:a[t.outline.style]}),x=o[t.style](t).fill({color:g.colour,opacity:g.opacity}).stroke(b).center(i.CONTAINER_CENTER,i.CONTAINER_CENTER).rotate(t.angle||0);i.fitInto(x,i.CONTENT_SIZE)},"simple-line"(){const g=m(t.color),v=f({color:g.colour,opacity:g.opacity,width:t.width,linecap:"butt",dasharray:a[t.style]}),b=i.CONTENT_PADDING,x=i.CONTAINER_SIZE-i.CONTENT_PADDING;s.line(b,b,x,x).stroke(v)},esriCLS(){this["simple-line"]()},"simple-fill"(){const g=m(t.color),v=f({color:g.colour,opacity:g.opacity}),b=c[t.style](g,v);t.outline=t.outline||u;const x=m(t.outline.color),S=f({color:x.colour,opacity:x.opacity,width:t.outline.width,linecap:"butt",dasharray:a[t.outline.style]});s.rect(i.CONTENT_SIZE,i.CONTENT_SIZE).center(i.CONTAINER_CENTER,i.CONTAINER_CENTER).fill(b).stroke(S)},text(){console.error("no support for feature service legend of text symbols")},"picture-fill"(){const g=t.imageData?`data:${t.contentType};base64,${t.imageData}`:t.url,v=t.width*t.xscale,b=t.height*t.yscale;t.outline=t.outline||u;const x=m(t.outline.color),S=f({color:x.colour,opacity:x.opacity,width:t.outline.width,dasharray:a[t.outline.style]});return i.$iApi.geo.shared.convertImagetoDataURL(g).then(_=>{const M=s.pattern(v,b,I=>I.image(_,v,b));s.rect(i.CONTENT_SIZE,i.CONTENT_SIZE).center(i.CONTAINER_CENTER,i.CONTAINER_CENTER).fill(M).stroke(S)})},"picture-marker"(){const g=t.source,v=g&&g.imageData?`data:${g.contentType};base64,${g.imageData}`:t.url;return i.$iApi.geo.shared.convertImagetoDataURL(v).then(x=>i.svgDrawImage(s,x)).then(({image:x})=>{x.center(i.CONTAINER_CENTER,i.CONTAINER_CENTER).rotate(t.angle||0),i.fitInto(x,i.CONTENT_IMAGE_SIZE)})}};try{return await Promise.resolve(d[t.type]()),window.document.body.removeChild(n),s.svg()}catch(g){return console.error(g),this.generateBlankSymbology()}function f(g){return Object.assign({},l,g)}function m(g){return g?{colour:`rgb(${g.r},${g.g},${g.b})`,opacity:g.a}:{colour:"rgb(0, 0, 0)",opacity:0}}}async svgDrawImage(t,i,r=0,n=0,s=!0){return new Promise((o,a)=>{const l=t.image(i,r,n,s).loaded(u=>o({image:l,loader:u})).error(u=>{a(u),console.error(u)})})}fitInto(t,i){const r=t.node.getBoundingClientRect(),n=i/Math.max(r.width,r.height);n<1&&t.scale(n)}rendererToLegend(t){let i;const r=t.symbolUnits.slice(0);if(t.defaultUnit&&r.push(t.defaultUnit),t.falseRenderer)i=r.map(n=>[n]);else{const n=new Map;r.forEach(s=>{const o=n.get(s.label);o?o.push(s):n.set(s.label,[s])}),i=[],n.forEach(s=>i.push(s))}return i.map(n=>{const s=n[0],o={uid:this.$iApi.geo.shared.generateUUID(),label:s.label||"",definitionClause:n.length===1?s.definitionClause:`(${n.map(a=>a.definitionClause).join(" OR ")})`,svgcode:"",esriStandard:!0,visibility:!0,lastVisbility:!0,drawPromise:this.symbolToSvg(s.symbol).then(a=>{o.svgcode=a,n.forEach(l=>{l.svgCode=a})})};return o})}async getMapServerLegend(t){if(!t)throw new Error("Legend server request is missing the required url.");const i={query:{f:"json"}},r={layers:[]},[n,s]=await D0(St(`${t}/legend`,i));return s?s.data?s.data:(console.error(`Error loading legend data for ${t}`),r):(console.error(`Error loading legend for ${t}`,n),r)}mapServerLegendToRenderer(t,i){const r=t.layers.find(s=>s.layerId===i);let n;if(typeof r<"u")return n={type:"uniqueValue",field:"fakefield",uniqueValueInfos:r.legend.map(s=>({label:s.label,value:s.label,symbol:{type:"esriPMS",imageData:s.imageData,contentType:s.contentType}}))},this.makeRenderer(Cb(n),[],!0);throw new Error("attempted to make renderer from non-existing legend data")}mapServerLegendToRendererAll(t){const i=t.layers.map(n=>n.legend.map(s=>({label:s.label,value:s.label,symbol:{type:"esriPMS",imageData:s.imageData,contentType:s.contentType}}))),r={type:"uniqueValue",field1:"fakefield",uniqueValueInfos:[].concat(...i)};return this.makeRenderer(Cb(r),[],!0)}async mapServerToLocalLegend(t,i=void 0){const r=await this.getMapServerLegend(t);let n,s;return typeof i>"u"?(s=0,n=this.mapServerLegendToRendererAll(r)):(s=parseInt(i),n=this.mapServerLegendToRenderer(r,s)),this.rendererToLegend(n)}}class xrt extends Wn{constructor(t){super(t)}async arcGisServerQueryIds(t){const i=new On;i.returnGeometry=!1,t.filterSql&&(i.where=t.filterSql),t.filterGeometry&&(i.geometry=this.queryGeometryHelper(t.filterGeometry,!1,this.$iApi.geo.map.getScale(),t.sourceSR),i.spatialRelationship="intersects");const r=await i9(t.url,i);return Array.isArray(r)?r:[]}async geoJsonQuery(t){const i=new On;if(i.returnGeometry=!!t.includeGeometry,i.outFields=["*"],t.filterGeometry&&(i.geometry=this.queryGeometryHelper(t.filterGeometry,!0),i.spatialRelationship="intersects"),t.filterSql&&(i.where=t.filterSql),await t.layer.loadPromise(),!t.layer.esriLayer)throw new Error("file layer being queried contains no ESRI layer");return(await t.layer.esriLayer.queryFeatures(i)).features.map((n,s)=>{let o;return i.returnGeometry?o=this.$iApi.geo.geom.geomEsriToRamp(n.geometry,`queryResult${s}`):o=new Pw,new Zd(o,"",n.attributes)})}queryGeometryHelper(t,i,r,n){let s;return!i&&t.type===Ti.EXTENT?r&&n&&r>2e7&&t.sr.wkid===3978&&n.wkid===4326?s=t.toESRI():s=t.toPolygon().toESRI():s=t.toESRI(),s}makeClickBuffer(t,i=5){const r=this.$iApi.geo.map,n=r.getExtent(),s=i*(n.xmax-n.xmin)/r.getPixelWidth();return new Gr("ze_buffer",[t.x-s,t.y-s],[t.x+s,t.y+s],t.sr)}}class Srt extends Wn{attributes;geom;layer;map;proj;query;shared;symbology;constructor(t){super(t),this.geom=vb.geom,this.proj=vb.proj,this.shared=vb.sharedUtils,this.map=new Ztt(t),this.layer=new trt(t),this.attributes=new frt(t),this.query=new xrt(t),this.symbology=new _rt(t)}set proxy(t){Ri.request.proxyUrl=t}get proxy(){return Ri.request.proxyUrl||""}}const Ert=Object.assign({"../fixtures/appbar/index.ts":()=>De(()=>import("./index-da6454ec.js"),["./index-da6454ec.js","./preload-helper-388ac9d5.js","./index-dfd099cf.css"],import.meta.url),"../fixtures/areas-of-interest/index.ts":()=>De(()=>import("./index-c8cbc2a5.js"),["./index-c8cbc2a5.js","./screen.vue_vue_type_script_setup_true_lang-dfdf1641.js","./screen-44f42014.css","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/basemap/index.ts":()=>De(()=>import("./index-41a26dac.js"),["./index-41a26dac.js","./screen.vue_vue_type_script_setup_true_lang-d1df56b2.js","./screen-d07515d8.css","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/crosshairs/index.ts":()=>De(()=>import("./index-58c96d72.js"),["./index-58c96d72.js","./preload-helper-388ac9d5.js","./index-b1dca86a.css"],import.meta.url),"../fixtures/details/index.ts":()=>De(()=>import("./index-551cdd89.js"),["./index-551cdd89.js","./hilight-defs-1101779f.js","./toggle-switch-control-27d44b5c.js","./toggle-switch-control-930168f6.css","./linkify-html.es-e51a510f.js","./preload-helper-388ac9d5.js","./index-e972fcd3.css"],import.meta.url),"../fixtures/export-legend/index.ts":()=>De(()=>import("./index-7ebb738e.js"),["./index-7ebb738e.js","./fabric-c71ed925.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/export-map/index.ts":()=>De(()=>import("./index-822db72a.js"),["./index-822db72a.js","./fabric-c71ed925.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/export-northarrow/index.ts":()=>De(()=>import("./index-0bedbb23.js"),["./index-0bedbb23.js","./fabric-c71ed925.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/export-scalebar/index.ts":()=>De(()=>import("./index-5e72636d.js"),["./index-5e72636d.js","./fabric-c71ed925.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/export-title/index.ts":()=>De(()=>import("./index-7e7f193e.js"),["./index-7e7f193e.js","./fabric-c71ed925.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/export/index.ts":()=>De(()=>import("./index-af856715.js"),["./index-af856715.js","./fabric-c71ed925.js","./screen.vue_vue_type_script_setup_true_lang-229f09be.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/gazebo/index.ts":()=>De(()=>import("./index-0392497e.js"),["./index-0392497e.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/geosearch/index.ts":()=>De(()=>import("./index-1e959588.js"),["./index-1e959588.js","./screen.vue_vue_type_script_setup_true_lang-aa0e5e1e.js","./screen-98a95490.css","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/grid/index.ts":()=>De(()=>import("./index-f7485c64.js"),["./index-f7485c64.js","./screen-bc3e6962.js","./linkify-html.es-e51a510f.js","./screen-2c42e8f5.css","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/help/index.ts":()=>De(()=>import("./index-bd1a9046.js"),["./index-bd1a9046.js","./screen.vue_vue_type_script_setup_true_lang-5c229047.js","./marked.esm-cdc2cd67.js","./screen-be3a60b9.css","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/hilight/index.ts":()=>De(()=>import("./index-9ce1c997.js"),["./index-9ce1c997.js","./hilight-defs-1101779f.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/layer-reorder/index.ts":()=>De(()=>import("./index-1226361c.js"),["./index-1226361c.js","./screen.vue_vue_type_script_setup_true_lang-16c899b3.js","./vue.esm-bundler-4ca40ff6.js","./screen-2715acef.css","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/legend/index.ts":()=>De(()=>import("./index-32cd233a.js"),["./index-32cd233a.js","./screen.vue_vue_type_script_setup_true_lang-d34d7317.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/mapnav/index.ts":()=>De(()=>import("./index-3d2441a7.js"),["./index-3d2441a7.js","./preload-helper-388ac9d5.js","./index-fb35802e.css"],import.meta.url),"../fixtures/metadata/index.ts":()=>De(()=>import("./index-c4f85c41.js"),["./index-c4f85c41.js","./screen.vue_vue_type_script_setup_true_lang-16cc7125.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/northarrow/index.ts":()=>De(()=>import("./index-539fb8be.js"),["./index-539fb8be.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/overviewmap/index.ts":()=>De(()=>import("./index-15bc6be3.js"),["./index-15bc6be3.js","./preload-helper-388ac9d5.js","./index-0c7a09de.css"],import.meta.url),"../fixtures/panguard/index.ts":()=>De(()=>import("./index-81d9a42a.js"),["./index-81d9a42a.js","./preload-helper-388ac9d5.js","./index-81bb715d.css"],import.meta.url),"../fixtures/scrollguard/index.ts":()=>De(()=>import("./index-d4ff97ec.js"),["./index-d4ff97ec.js","./preload-helper-388ac9d5.js","./index-dd460faf.css"],import.meta.url),"../fixtures/settings/index.ts":()=>De(()=>import("./index-362f8719.js"),["./index-362f8719.js","./screen-105d6f8a.js","./vue.esm-bundler-4ca40ff6.js","./toggle-switch-control-27d44b5c.js","./toggle-switch-control-930168f6.css","./preload-helper-388ac9d5.js","./screen-de0230cf.css"],import.meta.url),"../fixtures/snowman/index.ts":()=>De(()=>import("./index-9be16e12.js"),["./index-9be16e12.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/wizard/index.ts":()=>De(()=>import("./index-16488c1f.js"),["./index-16488c1f.js","./screen-681d5dab.js","./preload-helper-388ac9d5.js","./screen-64afac94.css"],import.meta.url)});class Mrt extends Wn{constructor(t){super(t);const i=()=>{const r=Nd(this.$vApp.$pinia).items;Object.keys(r).forEach(n=>{r[n].initialized?.()})};this.$iApi.event.on(Zt.MAP_CREATED,i)}async add(t,i){let r;if(t in Nd(this.$vApp.$pinia).items)return this.get(t);if(i){if(typeof i!="function")throw new Error("malformed fixture constructor");r=Gj.updateBaseToInstance(new i,t,this.$iApi)}else{const n=(await Ert[`../fixtures/${t}/index.ts`]()).default;r=new n(t,this.$iApi)}return Nd(this.$vApp.$pinia).addFixture(r),this.$iApi.event.emit(Zt.FIXTURE_ADDED,r),this.$iApi.geo.map.created&&r.initialized?.(),r}remove(t){const i=this.get(t);if(!i)throw new Error(`Could not find fixture ${t} for removal`);return Nd(this.$vApp.$pinia).removeFixture(i),this.$iApi.event.emit(Zt.FIXTURE_REMOVED,i),i}get(t){const i=[];typeof t=="string"?i.push(t):Array.isArray(t)?i.push(...t):i.push(t.id);const r=i.map(n=>{const s=Nd(this.$vApp.$pinia).items[n];if(s)return s});return r.length===1?r[0]:r}isLoaded(t){const i=Nd(this.$vApp.$pinia),r=Array.isArray(t)?t:[t];return r.forEach(n=>{i.loadPromises[n]===void 0&&i.addLoadPromise(n)}),Promise.all(i.getLoadPromises(r))}addDefaultFixtures(t){(!Array.isArray(t)||t.length===0)&&(t=["appbar","basemap","crosshairs","details","geosearch","grid","help","hilight","layer-reorder","legend","mapnav","northarrow","overviewmap","scrollguard","panguard","settings","wizard"]);const i=pl(this.$vApp.$pinia);return i.startingFixtures=t,Promise.all(t.map(r=>this.add(r)))}}class Gj extends Wn{static updateBaseToInstance(t,i,r){const n=new Gj(i,r);return Object.defineProperties(t,{id:{value:i},$iApi:{value:r},$vApp:{get(){return n.$vApp}},remove:{value:n.remove},extend:{value:n.extend},config:{get(){return n.config}},mount:{value:n.mount}}),t}id;constructor(t,i){super(i),this.id=t}remove(){return this.$iApi.fixture.remove(this),this}extend(t,i={}){const r=Vi({extends:t,iApi:this.$iApi,data(){return{...i}}}),n=_C(r),{el:s}=this.mount(r,{props:{...i.propsData},app:n});return s}mount(t,{props:i,children:r,element:n,app:s}={}){let o=n,a=Nh(t,i,r);return s&&s._context&&(a.appContext=s._context),o?Wd(a,o):Wd(a,o=document.createElement("div")),{vNode:a,destroy:()=>{o&&Wd(null,o),o=null,a=null},el:o}}get config(){return pl(this.$vApp.$pinia).config.fixtures[this.id]}getLayerFixtureConfig(t){return this.getLayerFixtureConfigs()[t]}getLayerFixtureConfigs(){const t=this.$iApi.getConfig(),i={},r=(n,s=void 0)=>{if(n.fixtures&&n.fixtures[this.id]!==void 0){let o=n.id;s!==void 0&&(o=`${s.id}-${n.index}`),i[o]=n.fixtures[this.id]}n.sublayers&&n.sublayers.forEach(o=>r(o,n))};return t.layers?.forEach(n=>r(n)),i}handlePanelWidths(t){if(this.config?.panelWidth){const i={};typeof this.config?.panelWidth=="number"&&(this.config.panelWidth={default:this.config?.panelWidth}),this.config.panelWidth.default&&t.forEach(r=>{i[r]=this.config.panelWidth.default});for(const r in this.config.panelWidth)r!="default"&&(i[r]=this.config.panelWidth[r]);for(const r in i){const n=this.$iApi.panel.get(r);this.$iApi.panel.setStyle(n,{"flex-basis":`${i[r]}px`})}}}handlePanelTeleports(t){if(this.config?.panelTeleport){const i=N0(this.$vApp.$pinia),r=!!this.config.panelTeleport.target;t.forEach(n=>{i.items[n].teleport=r?this.config.panelTeleport:this.config.panelTeleport[n],i.items[n].style.width="100%"})}}}class Irt extends Wn{panelStore=N0(this.$vApp.$pinia);register(t,i){const r=Trt(t)?{[t.id]:t.config}:t;if(i){const s=i.i18n||{},o=this.$iApi.$i18n;Object.entries(s.messages||{}).forEach(a=>o.mergeLocaleMessage(...a)),Object.entries(s.dateTimeFormats||{}).forEach(a=>o.mergeDateTimeFormat(...a)),Object.entries(s.numberFormats||{}).forEach(a=>o.mergeNumberFormat(...a))}const n=Object.entries(r).reduce((s,[o,a])=>(s.push(new KM(this.$iApi,o,a)),s),[]);return n.forEach(s=>this.panelStore.registerPanel(s)),n.length===1?n[0]:n.reduce((s,o)=>(s[o.id]=o,s),{})}isRegistered(t){const i=Array.isArray(t)?t:[t];return i.forEach(r=>{this.panelStore.regPromises[r]===void 0&&this.panelStore.addRegPromise(r)}),Promise.all(this.panelStore.getRegPromises(i))}remove(t){const i=this.get(t);i.isOpen&&this.close(i),this.panelStore.removePanel(i)}get(t){const i=typeof t=="string"?t:t.id;return this.panelStore.items[i]}open(t){let i,r,n;if(typeof t=="string"||t instanceof KM?i=this.get(t):(i=this.get(t.id),{screen:r,props:n}=t),i.isOpen&&!i.isVisible)i.minimize();else if(i.isOpen)return i;return r||(i.route&&!n?{screen:r,props:n}=i.route:r=Object.keys(i.screens).pop()),this.show(i,{screen:r,props:n})?(this.panelStore.openPanel(i),this.$iApi.updateAlert(this.$iApi.$i18n.t("panels.alert.open",{name:i.alertName?this.$iApi.$i18n.t(i.alertName):i.id})),this.$iApi.event.emit(Zt.PANEL_OPENED,i)):console.error(`Failed to open ${i.id} panel.`),i}get opened(){return this.panelStore.orderedItems.concat(this.panelStore.teleported)}get visible(){return this.panelStore.visible.concat(this.panelStore.teleported)}close(t){const i=this.get(t);return i.isPinned&&i.pin(!1),this.panelStore.closePanel(i),this.$iApi.updateAlert(this.$iApi.$i18n.t("panels.alert.close",{name:i.alertName?this.$iApi.$i18n.t(i.alertName):i.id})),this.$iApi.event.emit(Zt.PANEL_CLOSED,i),i}minimize(t){const i=this.get(t);return i.isPinned&&i.pin(!1),this.panelStore.closePanel(i),this.$iApi.updateAlert(this.$iApi.$i18n.t("panels.alert.minimize",{name:i.alertName?this.$iApi.$i18n.t(i.alertName):i.id})),this.$iApi.event.emit(Zt.PANEL_MINIMIZED,i),i}move(t,i){const r=this.get(t);return this.panelStore.movePanel(r,i),r}toggle(t,i){let r;return typeof t=="string"||t instanceof KM?r=this.get(t):r=this.get(t.id),i=typeof i<"u"?i:!r.isVisible,i!==r.isVisible&&(i?this.open(t):this.close(r)),r}toggleMinimize(t,i){let r;return typeof t=="string"||t instanceof KM?r=this.get(t):r=this.get(t.id),i=typeof i<"u"?i:!r.isVisible,i!==r.isVisible&&(i?this.open(r):this.minimize(r)),r}pin(t,i){const r=this.get(t);return i=typeof i<"u"?i:!r.isPinned,!r.isPinned&&!i||(this.panelStore.pinned=i?r:void 0),r}get pinned(){return this.panelStore.pinned||void 0}show(t,i){const r=this.get(t);if(r.screens[i.screen]){if(r.screens[i.screen]?.props){const n=Object.keys(r.screens[i.screen]?.props).filter(o=>o!=="panel"),s=i.props?Object.keys(i.props):[];for(let o=0;o<n.length;o++)if(!s.includes(n[o])&&r.screens[i.screen].props[n[o]].required)return}return i.screen in this.$element._context.components||r.registerScreen(i.screen),r.teleport&&(i.props={header:!!r.teleport?.showHeader,...i.props}),this.panelStore.items[r.id].route=i,r}}setStyle(t,i,r=!1){const n=this.get(t);return this.panelStore.items[n.id].style=r?i:{...n.style,...i},n}expand(t,i){const r=this.get(t);return this.panelStore.items[r.id].expanded=i!==void 0?i:!r.expanded,r}}function Trt(e){return e.id!==void 0&&typeof e.id=="string"&&e.config!==void 0}const Art={},Crt=e=>(zm("data-v-d6b3771a"),e=e(),Gm(),e),$rt=Crt(()=>at("div",{class:"loader"},null,-1));function Ort(e,t){const i=Cn("panel-screen");return ht(),Ur(i,{header:!1,class:"screen-spinner"},{content:kn(()=>[$rt]),_:1})}const Rrt=wp(Art,[["render",Ort],["__scopeId","data-v-d6b3771a"]]),krt=Object.assign({"../fixtures/areas-of-interest/screen.vue":()=>De(()=>import("./screen-340267fd.js"),["./screen-340267fd.js","./screen.vue_vue_type_script_setup_true_lang-dfdf1641.js","./screen-44f42014.css","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/basemap/screen.vue":()=>De(()=>import("./screen-6e0e61d0.js"),["./screen-6e0e61d0.js","./screen.vue_vue_type_script_setup_true_lang-d1df56b2.js","./screen-d07515d8.css","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/export/screen.vue":()=>De(()=>import("./screen-c63bbd57.js"),["./screen-c63bbd57.js","./screen.vue_vue_type_script_setup_true_lang-229f09be.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/geosearch/screen.vue":()=>De(()=>import("./screen-0c5f01a9.js"),["./screen-0c5f01a9.js","./screen.vue_vue_type_script_setup_true_lang-aa0e5e1e.js","./screen-98a95490.css","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/grid/screen.vue":()=>De(()=>import("./screen-bc3e6962.js").then(e=>e.s),["./screen-bc3e6962.js","./linkify-html.es-e51a510f.js","./screen-2c42e8f5.css"],import.meta.url),"../fixtures/help/screen.vue":()=>De(()=>import("./screen-39c43108.js"),["./screen-39c43108.js","./screen.vue_vue_type_script_setup_true_lang-5c229047.js","./marked.esm-cdc2cd67.js","./screen-be3a60b9.css","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/layer-reorder/screen.vue":()=>De(()=>import("./screen-70f9d0fe.js"),["./screen-70f9d0fe.js","./screen.vue_vue_type_script_setup_true_lang-16c899b3.js","./vue.esm-bundler-4ca40ff6.js","./screen-2715acef.css","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/legend/screen.vue":()=>De(()=>import("./screen-f50678b8.js"),["./screen-f50678b8.js","./screen.vue_vue_type_script_setup_true_lang-d34d7317.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/metadata/screen.vue":()=>De(()=>import("./screen-84ac74c2.js"),["./screen-84ac74c2.js","./screen.vue_vue_type_script_setup_true_lang-16cc7125.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/settings/screen.vue":()=>De(()=>import("./screen-105d6f8a.js"),["./screen-105d6f8a.js","./vue.esm-bundler-4ca40ff6.js","./toggle-switch-control-27d44b5c.js","./toggle-switch-control-930168f6.css","./preload-helper-388ac9d5.js","./screen-de0230cf.css"],import.meta.url),"../fixtures/wizard/screen.vue":()=>De(()=>import("./screen-681d5dab.js"),["./screen-681d5dab.js","./preload-helper-388ac9d5.js","./screen-64afac94.css"],import.meta.url)});class KM extends Wn{id;screens;loadedScreens=[];alertName;teleport;controls;button;isScreenLoaded(t){return this.loadedScreens.indexOf(t)!==-1}registerScreen(t){const i=this.screens[t];let r;if(gBe(i)||yBe(i))r=i,this.loadedScreens.push(t);else{let n;typeof i=="string"?n=krt[`../fixtures/${i}`]():n=i();const s=new Promise((o,a)=>{n.then(l=>{this.loadedScreens.push(t),o(vBe(l)?l.default:l)}),n.catch(l=>a(l))});r=h7({loader:()=>s,loadingComponent:Rrt,delay:200})}this.$iApi.$element.component(t,r)}style;expanded;get width(){if(!(!this.style.width||this.style.width.slice(-2)!=="px"))return parseInt(this.style.width)}route;constructor(t,i,r){if(super(t),{id:this.id,screens:this.screens,style:this.style,expanded:this.expanded,alertName:this.alertName,button:this.button,controls:this.controls}={id:i,style:{},expanded:!1,controls:{expand:!1,...r.controls},...r},Object.keys(this.screens).length===0)throw new Error("panel must have at least a single screen");this.route={screen:Object.keys(this.screens).pop()},this.style["flex-basis"]||(this.style["flex-basis"]=this.style.width||"350px"),this.style.width="80%"}open(t){return typeof t>"u"?this.$iApi.panel.open(this):this.$iApi.panel.open({id:this.id,...typeof t=="string"?{screen:t}:t}),this}get isOpen(){return this.$iApi.panel.opened.indexOf(this)!==-1}get isVisible(){return this.$iApi.panel.visible.indexOf(this)!==-1}close(){return this.$iApi.panel.close(this),this}minimize(){return this.$iApi.panel.minimize(this),this}move(t){return this.$iApi.panel.move(this,t),this}get isLeftMostPanel(){return this.$iApi.panel.visible.length>0?this.id===this.$iApi.panel.visible[0].id:!1}get isRightMostPanel(){return this.$iApi.panel.visible.length>0?this.id===this.$iApi.panel.visible.slice(-1)[0].id:!1}remove(){return this.$iApi.panel.remove(this),this}toggle(t){return typeof t>"u"?this.$iApi.panel.toggle(this,!this.isOpen):typeof t=="boolean"?t!==this.isOpen&&this.$iApi.panel.toggle(this,t):this.$iApi.panel.toggle({id:this.id,screen:t.screen,props:t.props},typeof t.toggle<"u"?t.toggle:!this.isOpen),this}toggleMinimize(t){return typeof t>"u"||typeof t=="boolean"?this.$iApi.panel.toggleMinimize(this,t):this.$iApi.panel.toggleMinimize({id:this.id,screen:t.screen,props:t.props},typeof t.toggle<"u"?t.toggle:!this.isOpen),this}pin(t){return t=typeof t<"u"?t:!this.isPinned,this.$iApi.panel.pin(this,t),this}get isPinned(){return!!this.$iApi.panel.pinned&&this.$iApi.panel.pinned.id===this.id}show(t){const i=typeof t=="string"?{screen:t}:t;return this.route=i,this.$iApi.panel.show(this,i),this}setStyles(t,i=!1){return this.$iApi.panel.setStyle(this,t,i),this}expand(t){return this.$iApi.panel.expand(this,t),this}}function Lrt(e){const t={};(Array.isArray(e)?e:[e]).forEach(o=>{o.language||(console.warn("RAMP2 config with no language supplied. Defaulting to English"),o.language="en");const a=Prt(o);t[o.language]=a});const r=Object.entries(t).map(o=>{const a=o[1].fixturesEnabled;return delete o[1].fixturesEnabled,a});let n=!1;const s=r.reduce((o,a)=>o.filter(l=>{const u=a.includes(l);return n=n||!u,u}));return n&&console.warn("Configs attempted to load different sets of fixtures. Only common fixtures will be loaded (all configs must load the same fixtures)."),s.push("crosshairs","scrollguard","panguard","wizard","layer-reorder","details"),{startingFixtures:s,configs:t}}function Prt(e){const t={version:"4.0",fixtures:{},layers:[],map:{},panels:{open:[]},system:{animate:!0,exposeOid:!1},fixturesEnabled:[]};return Drt(e.services,t),Nrt(e.map,t),jrt(e.ui,t),e.plugins&&Urt(e.plugins,t),t}function Nrt(e,t){if(e.layers&&e.layers.forEach(i=>{t.layers.push(Frt(i))}),e.initialBasemapId&&(t.map.initialBasemapId=e.initialBasemapId),e.components){if(e.components.geoSearch&&(e.components.geoSearch.enabled&&t.fixturesEnabled.push("geosearch"),typeof e.components.geoSearch.showGraphic<"u"&&console.warn("showGraphic property provided in geoSearch map component cannot be mapped and will be skipped."),typeof e.components.geoSearch.showInfo<"u"&&console.warn("showInfo property provided in geoSearch map component cannot be mapped and will be skipped.")),e.components.overviewMap&&e.components.overviewMap.enabled&&(t.fixtures.overviewmap||(t.fixtures.overviewmap={basemaps:{}},t.fixturesEnabled.push("overviewmap")),t.fixtures.overviewmap.startMinimized=!e.components.overviewMap.initiallyExpanded,t.fixtures.overviewmap.expandFactor=e.components.overviewMap.expandFactor??1.5),e.components.northArrow&&e.components.northArrow.enabled){const i={};e.components.northArrow.arrowIcon&&(i.arrowIcon=e.components.northArrow.arrowIcon),e.components.northArrow.poleIcon&&(i.poleIcon=e.components.northArrow.poleIcon),i&&(t.fixtures.northarrow=i,t.fixturesEnabled.push("northarrow"))}if(e.components.scaleBar&&e.components.scaleBar.enabled){switch(t.map.caption={mapCoords:{disabled:!1},scaleBar:{disabled:!1,imperialScale:e?.components?.scaleBar?.scalebarUnit==="english"||e?.components?.scaleBar?.scalebarUnit==="dual"&&Math.floor(Math.random()*2)===0}},e.components?.mouseInfo?.spatialReference?.wkid){case 4326:t.map.caption.mapCoords.formatter="LAT_LONG_DMS";break;case 3978:t.map.caption.mapCoords.formatter="CANADA_ATLAS_LAMBERT";break;case 102100:t.map.caption.mapCoords.formatter="WEB_MERCATOR";break;default:t.map.caption.mapCoords.formatter="LAT_LONG_DMS";break}e.components.scaleBar.attachTo&&console.warn("attachTo property provided in scaleBar map component cannot be mapped and will be skipped.")}e.components.basemap&&e.components.basemap.enabled&&t.fixturesEnabled.push("basemap")}e.extentSets&&(t.map.extentSets=[],e.extentSets.forEach(i=>{const r={id:i.id,default:{xmin:i.default.xmin,xmax:i.default.xmax,ymin:i.default.ymin,ymax:i.default.ymax,spatialReference:i.spatialReference}};i.full&&(r.full={xmin:i.full.xmin,xmax:i.full.xmax,ymin:i.full.ymin,ymax:i.full.ymax,spatialReference:i.spatialReference}),i.maximum&&(r.maximum={xmin:i.maximum.xmin,xmax:i.maximum.xmax,ymin:i.maximum.ymin,ymax:i.maximum.ymax,spatialReference:i.spatialReference}),t.map.extentSets.push(r)})),e.lodSets&&(t.map.lodSets=e.lodSets),e.tileSchemas&&(t.map.tileSchemas=[],e.tileSchemas.forEach(i=>{const r={id:i.id,name:i.name,extentSetId:i.extentSetId,lodSetId:i.lodSetId,thumbnailTileUrls:[],hasNorthPole:i.hasNorthPole||!1};i.overviewUrl&&(t.fixtures.overviewmap||(t.fixtures.overviewmap={basemaps:{}},t.fixturesEnabled.push("overviewmap")),t.fixtures.overviewmap.basemaps[i.id]={id:i.overviewUrl.id||`overviewmap-basemap-${i.id}`,tileSchemaId:i.id,layers:[{id:i.overviewUrl.id||`overviewmap-basemap-${i.id}-0`,layerType:i.overviewUrl.layerType==="esriDynamic"?Ai.MAPIMAGE:Ai.TILE,url:i.overviewUrl.url,opacity:i.overviewUrl.opacity??1}]}),t.map.tileSchemas.push(r)})),e.baseMaps&&(t.map.basemaps=[],e.baseMaps.forEach(i=>{const r={id:i.id,tileSchemaId:i.tileSchemaId,name:i.name,description:i.description,altText:i.altText,thumbnailUrl:i.thumbnailUrl,layers:[]};i.attribution&&(r.attribution={text:{},logo:{}},i.attribution.text&&(r.attribution.text.disabled=!i.attribution.text.enabled,r.attribution.text.value=i.attribution.text.value),i.attribution.logo&&(r.attribution.logo.disabled=!i.attribution.logo.enabled,r.attribution.logo.altText=i.attribution.logo.altText,r.attribution.logo.value=i.attribution.logo.value,r.attribution.logo.link=i.attribution.logo.link)),i.layers.forEach((n,s)=>{const o={id:n.id||`${i.id}-${s}`,layerType:n.layerType==="esriDynamic"?Ai.MAPIMAGE:Ai.TILE,url:n.url,opacity:n.opacity??1};r.layers.push(o)}),t.map.basemaps.push(r)})),e.legend&&(t.fixturesEnabled.push("legend"),e.legend.type==="autopopulate"?(t.fixtures.legend={root:{name:"I'm root",children:[]}},t.layers&&t.layers.forEach(i=>{if(i.type==="esri-map-image"||i.type==="ogc-wms"){const r={name:i.name??`${i.id} Group`,children:[]};i.sublayers.forEach(n=>{const s={layerId:i.id};n.name&&(s.name=n.name),n.controls&&(s.controls=n.controls),n.disabledControls&&(s.disabledControls=n.disabledControls),i.type==="esri-map-image"?s.sublayerIndex=n.index:(s.sublayerId=n.id,console.warn(`sublayerId property defined in legend entry ${s.layerId} is currently not supported.`)),r.children.push(s)}),t.fixtures.legend.root.children.push(r)}else{const r={layerId:i.id};i.controls&&(r.controls=i.controls),i.disabledControls&&(r.disabledControls=i.disabledControls),t.fixtures.legend.root.children.push(r)}})):t.fixtures.legend={root:kN(e.legend.root)})}function kN(e){const t={name:e.name,children:[]};typeof e.hidden<"u"&&(t.hidden=e.hidden),typeof e.expanded<"u"&&(t.expanded=e.expanded);const i=["identify","opacity","reload","remove","settings","symbology","visibility"];return e.controls&&e.controls.length>0&&(t.controls=uw(e.controls,i),e.controls.includes("visibility")&&t.controls.push("visibilityButton"),(e.controls.length!==1||e.controls[0]!=="visibility")&&console.warn("Legend entry groups currently support only the visibility control. All other controls are currently not supported."),t.controls.push("expandButton")),e.disabledControls&&e.disabledControls.length>0&&(t.disabledControls=uw(e.disabledControls,i),e.disabledControls.includes("visibility")&&t.disabledControls.push("visibilityButton"),(e.disabledControls.length!==1||e.disabledControls[0]!=="visibility")&&console.warn("Legend entry groups currently support only the visibility control. All other controls are currently not supported.")),e.children.forEach(r=>{if(r.layerId)t.children.push(BZ(r));else if(r.infoType)r.infoType==="unboundLayer"?console.warn(`unboundLayer infoType in infoSection in children list of legend entry group ${t.name} cannot be mapped and will be skipped.`):(t.children.push({infoType:r.infoType,content:r.content}),typeof r.export<"u"&&console.warn(`export property in infoSection in children list of legend entry group ${t.name} cannot be mapped and will be skipped.`));else if(r.exclusiveVisibility){const n={name:"Visibility Set",children:[],exclusive:!0};typeof r.collapse<"u"&&console.warn(`collapse property in visibilitySet in children list of legend entry group ${t.name} cannot be mapped and will be skipped.`),r.exclusiveVisibility.forEach(s=>{s.layerId?n.children.push(BZ(s)):n.children.push(kN(s))}),t.children.push(n)}else t.children.push(kN(r))}),t}function BZ(e){const t=e,i=["boundaryZoom","datatable","identify","metadata","opacity","refresh","reload","remove","settings","symbology","visibility"];return e.controls&&e.controls.length>0&&(t.layerControls=uw(e.controls,i)),e.disabledControls&&e.disabledControls.length>0&&(t.disabledLayerControls=uw(e.disabledControls,i)),e.controlledIds&&(console.warn(`controlledIds property defined in legend entry ${e.layerId} cannot be mapped and will be skipped.`),delete t.controlledIds),e.entryIndex&&(t.sublayerIndex=e.entryIndex,delete e.entryIndex),e.entryId&&console.warn(`entryId property defined in legend entry ${e.layerId} cannot be mapped and will be skipped.`),t}function Frt(e){const t=AR(e);switch(t.id=e.id,t.url=e.url,e.refreshInterval&&(t.refreshInterval=e.refreshInterval,console.warn("Property refreshInterval in layer is currently not supported.")),e.expectedResponseTime&&(t.expectedLoadTime=e.expectedResponseTime),e.metadataUrl&&(t.metadata={url:e.metadataUrl}),e.catalogueUrl&&(t.catalogueUrl=e.catalogueUrl),typeof e.enableStructuredDelete<"u"&&console.warn(`enableStructuredDelete property provided in layer ${e.id} cannot be mapped and will be skipped.`),e.tooltipField&&(t.tooltipField=e.tooltipField),e.tolerance&&(t.mouseTolerance=e.tolerance,e.layerType==="esriDynamic"&&(t.touchTolerance=e.tolerance+10)),e.customRenderer&&(t.customRenderer=e.customRenderer),e.layerType){case"esriDynamic":t.layerType="esri-map-image",typeof e.singleEntryCollapse<"u"&&(t.singleEntryCollapse=e.singleEntryCollapse),e.imageFormat&&(t.imageFormat=e.imageFormat),e.layerEntries&&(t.sublayers=[],e.layerEntries.forEach(i=>{const r=AR(i);r.index=i.index,t.sublayers.push(r)}));break;case"esriFeature":t.layerType="esri-feature",e.fileType&&(t.layerType=e.fileType==="shapefile"?"file-shape":`file-${e.fileType}`,e.colour&&(t.colour=e.colour),e.latField&&(t.latField=e.latField),e.longField&&(t.longField=e.longField));break;case"ogcWfs":t.layerType="ogc-wfs",e.colour&&(t.colour=e.colour),typeof e.xyInAttribs<"u"&&(t.xyInAttribs=e.xyInAttribs);break;case"ogcWms":t.layerType="ogc-wms",e.suppressGetCapabilities&&console.warn(`suppressGetCapabilities property provided in layer ${e.id} cannot be mapped and will be skipped.`),e.featureInfoMimeType&&(e.featureInfoMimeType==="text/html;fgpv=summary"?t.featureInfoMimeType="text/html":t.featureInfoMimeType=e.featureInfoMimeType),e.legendMimeType&&console.warn(`legendMimeType property provided in layer ${e.id} cannot be mapped and will be skipped.`),e.layerEntries&&(t.sublayers=[],e.layerEntries.forEach(i=>{const r=AR(i);r.id=i.id,i.currentStyle&&(r.currentStyle=i.currentStyle,console.warn(`currentStyle property provided in layer entry ${i.id} of layer ${e.id} is currently not supported.`)),i.allStyles&&console.warn(`allStyles property provided in layer entry ${i.id} of layer ${e.id} cannot be mapped and will be skipped.`),t.sublayers.push(r)}));break;case"esriImage":t.layerType="esri-imagery";break;case"esriTile":t.layerType="esri-tile";break;default:console.warn(`Unhandled layer type in ramp 2 config ${e.layerType}`)}return e.details&&console.warn(`Details config provided in layer ${e.id} cannot be mapped and will be skipped.`),t}function AR(e){const t={};e.name&&(t.name=e.name),e.nameField&&(t.nameField=e.nameField),e.extent&&(t.extent=e.extent);const i=["boundaryZoom","datatable","identify","metadata","opacity","refresh","reload","remove","settings","symbology","visibility"];return e.controls&&e.controls.length>0&&(t.controls=uw(e.controls,i)),e.disabledControls&&e.disabledControls.length>0&&(t.disabledControls=uw(e.disabledControls,i)),e.state&&(t.state={opacity:e.state.opacity??1,visibility:e.state.visibility??!0,identify:e.state.query??!0,hovertips:e.state.hovertips??!0},typeof e.state.snapshot<"u"&&console.warn(`snapshot property provided in initialLayer settings in layer ${e.id} cannot be mapped and will be skipped.`),typeof e.state.boundingBox<"u"&&console.warn(`boundingBox property provided in initialLayer settings in layer ${e.id} cannot be mapped and will be skipped.`)),typeof e.stateOnly<"u"&&(t.cosmetic=e.stateOnly),e.initialFilteredQuery&&(t.initialFilteredQuery=e.initialFilteredQuery),Vrt(e,t),(typeof e.toggleSymbology<"u"||e.table)&&(t.fixtures={},typeof e.toggleSymbology<"u"&&(t.fixtures.legend={toggleSymbology:e.toggleSymbology}),e.table&&(t.fixtures.grid={},e.table.title&&(t.fixtures.grid.title=e.table.title),e.table.description&&console.warn(`description property provided in table property in layer ${e.id} cannot be mapped and will be skipped.`),typeof e.table.maximize<"u"&&console.warn(`maximize property provided in table property in layer ${e.id} cannot be mapped and will be skipped.`),e.table.search&&(e.table.search.enabled&&(t.fixtures.grid.search=e.table.search.enabled),e.table.search.value&&(t.fixtures.grid.searchFilter=e.table.search.value)),typeof e.table.lazyFilter<"u"&&console.warn(`lazyFilter property provided in table property in layer ${e.id} cannot be mapped and will be skipped.`),typeof e.table.applyMap<"u"&&(t.fixtures.grid.applyMap=e.table.applyMap),typeof e.table.showFilter<"u"&&(t.fixtures.grid.showFilter=e.table.showFilter),typeof e.table.filterByExtent<"u"&&(t.fixtures.grid.filterByExtent=e.table.filterByExtent),typeof e.table.searchStrictMatch<"u"&&console.warn(`searchStrictMatch property provided in table property in layer ${e.id} cannot be mapped and will be skipped.`),typeof e.table.printEnabled<"u"&&console.warn(`printEnabled property provided in table property in layer ${e.id} cannot be mapped and will be skipped.`),e.table.columns&&(t.fixtures.grid.columns=[],e.table.columns.forEach(r=>{const n={name:r.data};r.title&&(n.title=r.title),r.description&&console.warn(`description property provided in column property in table property in layer ${e.id} cannot be mapped and will be skipped.`),typeof r.visible<"u"&&(n.visible=r.visible),r.width&&(n.width=r.width),r.sort&&(n.sort=r.sort),typeof r.searchable<"u"&&(n.searchable=r.searchable),r.filter&&(n.filter=r.filter),t.fixtures.grid.columns.push(n)})))),t}function uw(e,t){const i=[];return e.forEach(r=>{t.includes("identify")&&r==="query"?i.push("identify"):t.includes(r)?i.push(r):console.warn(`Ignored invalid control: ${r}`)}),i}function Drt(e,t){if(!e)return;e.search&&(t.fixtures.geosearch={},t.fixtures.geosearch.serviceUrls={geoNames:e.search.serviceUrls.geoNames,geoLocation:e.search.serviceUrls.geoLocation,geoProvince:e.search.serviceUrls.provinces,geoTypes:e.search.serviceUrls.types},e.search.serviceUrls.geoSuggest&&console.warn("geoSuggest property provided in serviceUrls of search service cannot be mapped and will be skipped."),e.search.settings&&(t.fixtures.geosearch.settings=e.search.settings),e.search.disabledSearches&&(t.fixtures.geosearch.settings.disabledSearchTypes=e.search.disabledSearches.filter(r=>r!=="SCALE"))),e.export&&(t.fixtures.export||(t.fixtures.export={},t.fixturesEnabled.push("export")),e.export.title&&(t.fixtures.export.title={selected:e.export.title.isSelected??!0,selectable:e.export.title.isSelectable??!0,value:e.export.title.value??"RAMP-Map / PCAR-Carte"}),e.export.map&&(t.fixtures.export.map={selected:e.export.map.isSelected??!0,selectable:e.export.map.isSelectable??!0},e.export.map.value&&console.warn("value property provided in map export component cannot be mapped and will be skipped.")),e.export.mapElements&&(t.fixtures.export.mapElements={selected:e.export.mapElements.isSelected??!0,selectable:e.export.mapElements.isSelectable??!0},e.export.mapElements.value&&console.warn("value property provided in mapElements export component cannot be mapped and will be skipped.")),e.export.legend&&(t.fixtures.export.legend={selected:e.export.legend.isSelected??!0,selectable:e.export.legend.isSelectable??!0},e.export.legend.columnWidth&&(t.fixtures.export.legend.columnWidth=e.export.legend.columnWidth),e.export.legend.value&&console.warn("value property provided in legend export component cannot be mapped and will be skipped."),typeof e.export.legend.showInfoSymbology<"u"&&console.warn("showInfoSymbology property provided in legend export component cannot be mapped and will be skipped."),typeof e.export.legend.showControlledSymbology<"u"&&console.warn("showControlledSymbology property provided in legend export component cannot be mapped and will be skipped.")),e.export.footnote&&(t.fixtures.export.footnote={selected:e.export.footnote.isSelected??!0,selectable:e.export.footnote.isSelectable??!0,value:e.export.footnote.value??""}),e.export.timestamp&&(t.fixtures.export.timestamp={selected:e.export.timestamp.isSelected??!0,selectable:e.export.timestamp.isSelectable??!0},e.export.timestamp.value&&console.warn("value property provided in timestamp export component cannot be mapped and will be skipped.")),e.export.timeout&&console.warn("timeout property provided in export property of services config cannot be mapped and will be skipped."),typeof e.cleanCanvas<"u"&&console.warn("cleanCanvas property provided in export property of services config cannot be mapped and will be skipped.")),e.proxyUrl&&(t.system.proxyUrl=e.proxyUrl),["corsEverywhere","exportMapUrl","geometryUrl","googleAPIKey","esriLibUrl","geolocation","coordInfo","print"].forEach(r=>{typeof e[r]<"u"&&console.warn(`${r} property provided in services config cannot be mapped and will be skipped.`)})}function jrt(e,t){if(e.navBar){t.fixtures.mapnav={zoomOption:e.navBar.zoom||"buttons",items:[]};const n=["geolocator","zoom","home","basemap","help","fullscreen","geosearch","legend"];e.navBar.extra.forEach(s=>{const o=s.toLowerCase();n.includes(o)?t.fixtures.mapnav.items.push(o):console.warn(`Ignored invalid mapnav item: ${s}`)}),t.fixturesEnabled.push("mapnav")}if(e.help&&(t.fixtures.help={location:e.help.folderName&&e.help.folderName!=="default"?`./${e.help.folderName}`:"./help",panelWidth:350},t.fixturesEnabled.push("help")),e.legend){const n=["groupToggle","visibilityToggle"];e.legend.reorderable&&n.push("layerReorder"),e.legend.allowImport&&n.push("wizard"),t.fixtures.legend?t.fixtures.legend.headerControls=n:(t.fixturesEnabled.push("legend"),t.fixtures.legend={headerControls:n,root:{}}),e.legend.isOpen&&e.legend.isOpen.large&&t.panels.open.push({id:"legend"})}t.fixtures.appbar={items:[]},t.fixturesEnabled.push("appbar");const i=["layers","basemap","export","help","geoSearch"];e.appBar?(e.appBar.layers!==!1&&(t.fixtures.appbar.items.push("legend"),t.fixturesEnabled.includes("legend")||t.fixturesEnabled.push("legend")),e.appBar.geoSearch!==!1&&t.fixturesEnabled.includes("geosearch")&&t.fixtures.appbar.items.push("geosearch"),e.appBar.basemap!==!1&&t.fixtures.appbar.items.push("basemap")):(t.fixtures.appbar.items.push("legend"),t.fixturesEnabled.includes("legend")||t.fixturesEnabled.push("legend"),t.fixtures.appbar.items.push("geosearch"),t.fixtures.appbar.items.push("basemap")),e.sideMenu&&e.sideMenu.items&&e.sideMenu.items.length>0&&e.sideMenu.items.forEach(n=>{n.forEach(s=>{s==="layers"&&!t.fixtures.appbar.items.includes("legend")?(t.fixtures.appbar.items.push("legend"),t.fixturesEnabled.includes("legend")||t.fixturesEnabled.push("legend")):s!=="layers"&&i.includes(s)&&!t.fixtures.appbar.items.includes(s.toLowerCase())&&(t.fixtures.appbar.items.push(s.toLowerCase()),(s.toLowerCase()==="help"||s.toLowerCase()==="export"&&!t.fixturesEnabled.includes(s.toLowerCase()))&&t.fixturesEnabled.push(s.toLowerCase()))})}),e.tableIsOpen&&e.tableIsOpen.large,["fullscreen","theme","logoUrl","failureFeedback","title","restrictNavigation","about"].forEach(n=>{typeof e[n]<"u"&&console.warn(`${n} property provided in services config cannot be mapped and will be skipped.`)})}function Urt(e,t){e.areasOfInterest&&(t.fixturesEnabled.includes("areas-of-interest")||t.fixturesEnabled.push("areas-of-interest"),t.fixtures["areas-of-interest"]={areas:e.areasOfInterest.areas.map(i=>({title:`${i["title-en-CA"]} / ${i["title-fr-CA"]}`,thumbnail:i.thumbnailUrl,altText:i.altText??"",description:i.description??"",extent:{xmin:i.xmin,xmax:i.xmax,ymin:i.ymin,ymax:i.ymax,spatialReference:{wkid:i.wkid}}}))})}function Vrt(e,t){const i=e.outfields&&e.outfields!=="*";if(!i&&!e.fieldMetadata)return;const r={fieldInfo:[],exclusiveFields:!1};e.fieldMetadata?(r.fieldInfo=e.fieldMetadata.map(n=>{const s={name:n.data};return n.alias&&(s.alias=n.alias),s}),i&&(e.outfields.split(",").map(s=>s.trim()).forEach(s=>{r.fieldInfo.findIndex(o=>o.name===s)===-1&&r.fieldInfo.push({name:s})}),r.exclusiveFields=!0)):i&&(r.fieldInfo=e.outfields.split(",").map(n=>({name:n.trim()})),r.exclusiveFields=!0),t.fieldMetadata=r}console.log(`RAMP v4.2.0 [${"0e957d90426bf59bfc42d6257163a0e9d4a1858d".slice(0,9)}] (Built on ${new Date("Thu Aug 3 13:12:20 2023 -0400".toString()).toLocaleString()})`);const D_={major:"4",minor:"2",patch:"0",timestamp:"Thu Aug 3 13:12:20 2023 -0400",hash:"0e957d90426bf59bfc42d6257163a0e9d4a1858d"};function gdt(e){return Lrt(e)}const vdt=(e,t,i)=>new ztt(e,t,i),vb=new mBe;export{tst as $,Jv as A,xo as B,G0 as C,Oat as D,Ia as E,$at as F,Rat as G,A4 as H,ist as I,v_e as J,Uo as K,Ln as L,yw as M,Bot as N,Iye as O,b_e as P,Vot as Q,HF as R,w0 as S,ka as T,St as U,p0 as V,ax as W,cL as X,zot as Y,C2e as Z,jnt as _,r$e as a,_K as a$,vb as a0,vdt as a1,AIe as a2,zIe as a3,Rh as a4,A2e as a5,wMe as a6,_Me as a7,xMe as a8,Le as a9,Nut as aA,Dut as aB,gse as aC,_Re as aD,HZ as aE,Vnt as aF,bu as aG,h1e as aH,d1e as aI,p1e as aJ,b1e as aK,E1e as aL,gQ as aM,mQ as aN,yQ as aO,S1e as aP,C1e as aQ,$1e as aR,lA as aS,B0e as aT,u1e as aU,lk as aV,$a as aW,pw as aX,e4 as aY,Uye as aZ,wK as a_,du as aa,gl as ab,f0 as ac,XE as ad,vF as ae,gF as af,FQ as ag,Wg as ah,bF as ai,fst as aj,lre as ak,Y1e as al,Ng as am,Iv as an,ex as ao,nIe as ap,Es as aq,vn as ar,sI as as,DB as at,U0 as au,$0 as av,oae as aw,F9 as ax,sst as ay,Ta as az,qrt as b,zo as b$,Vye as b0,e3 as b1,t3 as b2,rst as b3,snt as b4,pye as b5,Wnt as b6,MCe as b7,Xre as b8,Hs as b9,mm as bA,ym as bB,W0 as bC,dp as bD,rp as bE,t8 as bF,Dr as bG,e8 as bH,r8 as bI,AA as bJ,iIe as bK,Tn as bL,$6e as bM,nI as bN,Ri as bO,OF as bP,QU as bQ,mst as bR,eot as bS,aot as bT,d0 as bU,QY as bV,M0 as bW,F5 as bX,lte as bY,Gj as bZ,iu as b_,ZE as ba,z0 as bb,yP as bc,Z0 as bd,bc as be,au as bf,ont as bg,At as bh,Aa as bi,fa as bj,fw as bk,Xg as bl,ZNe as bm,pht as bn,mht as bo,nt as bp,fs as bq,ms as br,Mst as bs,UQ as bt,Pi as bu,Pt as bv,Rm as bw,Cb as bx,_0 as by,qr as bz,Ce as c,Tst as c$,Kae as c0,b9e as c1,ydt as c2,Vi as c3,Jr as c4,hs as c5,$i as c6,Cn as c7,mr as c8,ht as c9,yst as cA,TK as cB,tF as cC,Fye as cD,Xlt as cE,Qz as cF,tut as cG,mc as cH,zlt as cI,hne as cJ,fne as cK,lne as cL,Jf as cM,Krt as cN,RFe as cO,x2e as cP,$ve as cQ,aK as cR,vne as cS,gne as cT,Wlt as cU,qlt as cV,_ve as cW,xF as cX,gm as cY,Cst as cZ,$st as c_,Ur as ca,kn as cb,Ih as cc,Hr as cd,si as ce,gi as cf,sr as cg,$t as ch,Tr as ci,qm as cj,h7 as ck,blt as cl,vlt as cm,iee as cn,xot as co,RD as cp,yn as cq,hr as cr,kbe as cs,Toe as ct,$R as cu,Jlt as cv,_be as cw,Xd as cx,JZ as cy,Kst as cz,_o as d,Z5 as d$,Ast as d0,B1e as d1,Zlt as d2,LN as d3,Q5 as d4,tne as d5,ai as d6,y8 as d7,kz as d8,f4e as d9,Ft as dA,Je as dB,QS as dC,xr as dD,Om as dE,Lt as dF,q0 as dG,Ow as dH,Cw as dI,$w as dJ,J0 as dK,Nm as dL,da as dM,Hx as dN,Ye as dO,dte as dP,hD as dQ,f3 as dR,Oa as dS,Ra as dT,Yf as dU,pu as dV,fp as dW,q$e as dX,G$e as dY,B$e as dZ,UU as d_,a4e as da,tlt as db,jTe as dc,rlt as dd,ilt as de,nlt as df,FCe as dg,l8 as dh,w0e as di,aA as dj,rx as dk,uQ as dl,pF as dm,nQ as dn,Put as dp,Kut as dq,zut as dr,kut as ds,XTe as dt,iot as du,lot as dv,uot as dw,Lut as dx,Qut as dy,gdt as dz,h as e,ip as e$,zn as e0,it as e1,wl as e2,FY as e3,j5 as e4,LF as e5,s3 as e6,tS as e7,pa as e8,yl as e9,p_e as eA,$ot as eB,ED as eC,vst as eD,ep as eE,hm as eF,yie as eG,MF as eH,oat as eI,rSe as eJ,u0e as eK,WK as eL,nst as eM,_T as eN,Hrt as eO,qat as eP,aae as eQ,I6 as eR,Db as eS,hNe as eT,lae as eU,Di as eV,tDe as eW,lX as eX,BF as eY,yA as eZ,xY as e_,Hbe as ea,K5 as eb,Wbe as ec,cRe as ed,cot as ee,ol as ef,bw as eg,Jst as eh,Mat as ei,Qst as ej,Hst as ek,El as el,sTe as em,KU as en,hw as eo,OY as ep,Mt as eq,Ff as er,bNe as es,ust as et,xw as eu,pp as ev,RK as ew,Lee as ex,cp as ey,mA as ez,Et as f,p3 as f$,bi as f0,m3 as f1,go as f2,IEe as f3,Rb as f4,DN as f5,dNe as f6,PR as f7,ma as f8,Vx as f9,nnt as fA,_3 as fB,Z0e as fC,Grt as fD,_ye as fE,wb as fF,XN as fG,Fpe as fH,cA as fI,Pb as fJ,Cne as fK,Wt as fL,b0 as fM,On as fN,ZMe as fO,w4 as fP,qMe as fQ,mSe as fR,T4 as fS,HU as fT,jQ as fU,LD as fV,xSe as fW,cD as fX,w3 as fY,ez as fZ,vA as f_,cK as fa,lm as fb,ESe as fc,Za as fd,xbe as fe,rQ as ff,J0e as fg,aNe as fh,xs as fi,uNe as fj,$d as fk,N0 as fl,_tt as fm,bn as fn,at as fo,tt as fp,C5 as fq,Eo as fr,zh as fs,Cs as ft,Nye as fu,Rot as fv,s_e as fw,hp as fx,oot as fy,eut as fz,nD as g,QF as g$,c3 as g0,bee as g1,_Se as g2,$D as g3,OD as g4,FIe as g5,m4 as g6,nn as g7,ant as g8,GU as g9,V5 as gA,cs as gB,H6e as gC,FK as gD,Nge as gE,wtt as gF,wn as gG,A5 as gH,Ftt as gI,hhe as gJ,Dtt as gK,Hn as gL,Zt as gM,Gn as gN,tD as gO,P8 as gP,wot as gQ,Q2 as gR,Q4e as gS,qut as gT,Xut as gU,Yut as gV,Zut as gW,jm as gX,ATe as gY,Iat as gZ,So as g_,iD as ga,g4 as gb,rS as gc,Pm as gd,cte as ge,wi as gf,ISe as gg,MSe as gh,Cm as gi,c4 as gj,Wo as gk,SSe as gl,Oot as gm,Cot as gn,d_e as go,goe as gp,JPe as gq,boe as gr,Jrt as gs,Zrt as gt,j_ as gu,Oi as gv,Hut as gw,_ke as gx,gn as gy,Tl as gz,Ze as h,rd as h$,BEe as h0,YF as h1,xt as h2,j_e as h3,mp as h4,_w as h5,wat as h6,bat as h7,vat as h8,oMe as h9,m$e as hA,Wrt as hB,_4 as hC,Ibe as hD,Wf as hE,J5 as hF,Abe as hG,rn as hH,z3 as hI,V7 as hJ,Gr as hK,pl as hL,n7 as hM,ac as hN,yC as hO,Zle as hP,ktt as hQ,Ltt as hR,B3 as hS,fC as hT,DC as hU,AZ as hV,Sf as hW,Ude as hX,Ai as hY,Gg as hZ,jtt as h_,nSe as ha,qEe as hb,HEe as hc,$2e as hd,$Ee as he,OEe as hf,REe as hg,ih as hh,kEe as hi,LEe as hj,PEe as hk,NEe as hl,FEe as hm,DEe as hn,jEe as ho,UEe as hp,kD as hq,VEe as hr,zie as hs,Ntt as ht,wC as hu,zm as hv,Gm as hw,wp as hx,cw as hy,qpe as hz,m2e as i,j0e as i$,Zd as i0,qf as i1,Vm as i2,Wn as i3,i5 as i4,Btt as i5,kge as i6,Uge as i7,yne as i8,X5 as i9,Tv as iA,sxe as iB,Uee as iC,W0e as iD,Aat as iE,Vee as iF,wxe as iG,t1e as iH,bxe as iI,sNe as iJ,RU as iK,Gnt as iL,ANe as iM,G2e as iN,_b as iO,Qa as iP,Bs as iQ,Nw as iR,PQ as iS,K1e as iT,dst as iU,z5 as iV,tCe as iW,Am as iX,lQ as iY,sdt as iZ,z0e as i_,Znt as ia,bst as ib,e5 as ic,Lbe as id,rD as ie,R2e as ig,k2e as ih,Uot as ii,wst as ij,Kf as ik,NB as il,mie as im,eS as io,Upe as ip,Ype as iq,Qpe as ir,tnt as is,ite as it,kxe as iu,Lxe as iv,VIe as iw,Eat as ix,VMe as iy,vQ as iz,As as j,vke as j$,aQ as j0,tp as j1,qU as j2,di as j3,H$e as j4,ul as j5,Tf as j6,tIe as j7,Xrt as j8,Ylt as j9,qnt as jA,ZS as jB,df as jC,$ne as jD,H8 as jE,s$e as jF,sG as jG,wc as jH,Fs as jI,gp as jJ,lut as jK,Htt as jL,Utt as jM,ADe as jN,_S as jO,qtt as jP,zT as jQ,dS as jR,C6e as jS,x0e as jT,Jwe as jU,dF as jV,f4 as jW,Y2e as jX,lst as jY,Wut as jZ,wke as j_,P4e as ja,iut as jb,xae as jc,XS as jd,Xat as je,slt as jf,po as jg,Si as jh,irt as ji,hrt as jj,rrt as jk,Vtt as jl,int as jm,ast as jn,r1e as jo,Z2 as jp,xn as jq,Zpe as jr,Kpe as js,jpe as jt,RF as ju,tot as jv,Xst as jw,aU as jx,K8 as jy,ue as jz,ce as k,m6e as k$,Uut as k0,Vut as k1,But as k2,Jut as k3,Fut as k4,Nh as k5,Bg as k6,w7 as k7,Gut as k8,jut as k9,xst as kA,Est as kB,Zx as kC,vl as kD,Bve as kE,Mie as kF,Iie as kG,zMe as kH,oi as kI,co as kJ,ree as kK,lat as kL,NN as kM,Rnt as kN,Yst as kO,D5 as kP,oCe as kQ,iCe as kR,Vlt as kS,Klt as kT,sCe as kU,_ut as kV,xut as kW,Zst as kX,Kd as kY,Qv as kZ,lNe as k_,nX as ka,Is as kb,$s as kc,Ne as kd,nh as ke,NA as kf,ooe as kg,KZ as kh,ba as ki,Sl as kj,wh as kk,Nnt as kl,tye as km,ml as kn,Y5 as ko,hl as kp,Hnt as kq,mae as kr,XT as ks,qv as kt,jb as ku,fSe as kv,put as kw,Ist as kx,_st as ky,Sst as kz,KN as l,zi as l$,c6e as l0,O3 as l1,hF as l2,AF as l3,Fnt as l4,Jpe as l5,h$e as l6,qu as l7,uc as l8,pc as l9,ate as lA,sT as lB,wne as lC,i9 as lD,pNe as lE,sut as lF,olt as lG,QTe as lH,oz as lI,C4 as lJ,sz as lK,wg as lL,PS as lM,j7 as lN,S7 as lO,v7 as lP,uo as lQ,O2e as lR,plt as lS,flt as lT,Mre as lU,VD as lV,hlt as lW,dlt as lX,jD as lY,Lb as lZ,RAe as l_,mK as la,Pnt as lb,vU as lc,SX as ld,dhe as le,KM as lf,P7 as lg,f7 as lh,Ti as li,Ju as lj,ss as lk,CN as ll,jde as lm,Ptt as ln,Bh as lo,D0 as lp,Hue as lq,_n as lr,Jg as ls,Zg as lt,vwe as lu,S0e as lv,iQ as lw,Dnt as lx,Eie as ly,g1 as lz,Ml as m,Yrt as m$,v8 as m0,FAe as m1,$re as m2,NAe as m3,t4e as m4,z5e as m5,DAe as m6,wlt as m7,zre as m8,U5e as m9,uKe as mA,uat as mB,YL as mC,Kme as mD,uX as mE,cat as mF,Bo as mG,k8 as mH,gye as mI,K2e as mJ,z2e as mK,q2e as mL,W8 as mM,Wpe as mN,gnt as mO,ONe as mP,H4e as mQ,Wz as mR,rCe as mS,Qlt as mT,Z_e as mU,Not as mV,cO as mW,hO as mX,Glt as mY,_r as mZ,jlt as m_,kAe as ma,YAe as mb,x3 as mc,_lt as md,C5e as me,fr as mf,elt as mg,ICe as mh,qD as mi,h5e as mj,Fre as mk,Dre as ml,WD as mm,rb as mn,d5e as mo,l5e as mp,JD as mq,mAe as mr,Xf as ms,b8 as mt,_Q as mu,Tat as mv,YN as mw,$fe as mx,up as my,Bw as mz,wr as n,Jat as n$,FFe as n0,Jj as n1,$0e as n2,ost as n3,oQ as n4,_0e as n5,sQ as n6,Hlt as n7,Tbe as n8,pne as n9,_h as nA,q4 as nB,jst as nC,Xoe as nD,Doe as nE,eae as nF,F6e as nG,eht as nH,J6e as nI,bS as nJ,tht as nK,Wd as nL,qg as nM,yy as nN,Ah as nO,ik as nP,dK as nQ,Vf as nR,Slt as nS,$r as nT,UF as nU,vTe as nV,zat as nW,VF as nX,ETe as nY,S0 as nZ,Gat as n_,qst as na,Sbe as nb,Ebe as nc,hst as nd,xat as ne,Sat as nf,_at as ng,Sae as nh,bb as ni,jht as nj,Unt as nk,fz as nl,alt as nm,rut as nn,woe as no,$9 as np,z4 as nq,uh as nr,cae as ns,EMe as nt,MMe as nu,IMe as nv,gCe as nw,os as nx,ob as ny,em as nz,Uht as o,Rw as o0,pz as o1,dz as o2,Qat as o3,Wat as o4,Yat as o5,uk as o6,Kat as o7,mz as o8,hre as o9,_xe as oA,v4 as oB,np as oC,d$e as oD,sot as oE,wge as oF,qF as oG,Tot as oH,nTe as oI,aut as oJ,yut as oK,vut as oL,wut as oM,Eut as oN,Tut as oO,Zat as oa,xlt as ob,g_ as oc,jz as od,uO as oe,Jre as of,xQ as og,fF as oh,Q1e as oi,H1e as oj,SQ as ok,cst as ol,pst as om,qPe as on,gS as oo,Wst as op,wF as oq,NNe as or,FNe as os,RNe as ot,Vae as ou,a1e as ov,sge as ow,rot as ox,not as oy,xxe as oz,et as p,lF as q,ee as r,ti as s,Re as t,Cat as u,Il as v,Kt as w,_Y as x,p as y,ent as z};
