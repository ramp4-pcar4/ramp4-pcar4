import{_ as De}from"./preload-helper-388ac9d5.js";var zd=(t=>(t.BLOB="blob",t.DATE="date",t.DOUBLE="double",t.GEOMETRY="geometry",t.GLOBAL_ID="global-id",t.GUID="guid",t.INTEGER="integer",t.LONG="long",t.OID="oid",t.RASTER="raster",t.SINGLE="single",t.SMALL_INTEGER="small-integer",t.STRING="string",t.XML="xml",t))(zd||{}),dd=(t=>(t.CIRCLE="circle",t.CROSS="cross",t.DIAMOND="diamond",t.ICON="icon",t.PATH="path",t.SQUARE="square",t.TRIANGLE="triangle",t.X="x",t))(dd||{}),ma=(t=>(t.DASH="dash",t.DASHDOT="dash-dot",t.DASHDOTDOT="short-dash-dot-dot",t.DOT="dot",t.LONGDASH="long-dash",t.LONGDASHDOT="long-dash-dot",t.LONGDASHDOTDOT="long-dash-dot-dot",t.NONE="none",t.NULL="none",t.SHORTDASH="short-dash",t.SHORTDASHDOT="short-dash-dot",t.SHORTDASHDOTDOT="short-dash-dot-dot",t.SHORTDOT="short-dot",t.SOLID="solid",t))(ma||{}),fK=(t=>(t.BEVEL="bevel",t.MITER="miter",t.ROUND="round",t))(fK||{}),mK=(t=>(t.ROUND="round",t.BUTT="butt",t.SQUARE="square",t))(mK||{}),yK=(t=>(t.BDIAG="backward-diagonal",t.CROSS="cross",t.DIAG_CROSS="diagonal-cross",t.FDIAG="forward-diagonal",t.HORIZONTAL="horizontal",t.NONE="none",t.NULL="none",t.SOLID="solid",t.VERTICAL="vertical",t))(yK||{}),Mi=(t=>(t.POINT="Point",t.MULTIPOINT="MultiPoint",t.LINESTRING="LineString",t.MULTILINESTRING="MultiLineString",t.POLYGON="Polygon",t.MULTIPOLYGON="MultiPolygon",t.LINEARRING="LinearRing",t.EXTENT="Extent",t.NONE="None",t.UNKNOWN="Unknown",t))(Mi||{}),$4=(t=>(t.Simple="simple",t.Unique="uniqueValue",t.ClassBreaks="classBreaks",t.Unknown="unknown",t))($4||{}),li=(t=>(t.FEATURE="esri-feature",t.MAPIMAGE="esri-map-image",t.TILE="esri-tile",t.IMAGERY="esri-imagery",t.GRAPHIC="esri-graphic",t.WMS="ogc-wms",t.WFS="ogc-wfs",t.GEOJSON="file-geojson",t.CSV="file-csv",t.SHAPEFILE="file-shape",t.OSM="osm-tile",t.DATACSV="data-csv",t.DATAJSON="data-json",t.DATATABLE="data-esri-table",t.UNKNOWN="unknown",t.SUBLAYER="sublayer",t))(li||{}),Fl=(t=>(t.FEATURE="feature",t.GRAPHIC="graphic",t.IMAGERY="imagery",t.MAPIMAGE="map-image",t.NOLAYER="no-layer",t.OSM="osm-tile",t.TILE="tile",t.UNKNOWN="unknown",t.WMS="wms",t))(Fl||{}),Wn=(t=>(t.ESRI_FEATURE="esriFeature",t.ESRI_RASTER="esriRaster",t.ESRI_TILE="esriTile",t.OSM_TILE="osmTile",t.OGC_RASTER="ogcRaster",t.UNKNOWN="unknown",t))(Wn||{}),ms=(t=>(t.POINT="Point",t.MULTIPOINT="MultiPoint",t.LINESTRING="LineString",t.MULTILINESTRING="MultiLineString",t.POLYGON="Polygon",t.MULTIPOLYGON="MultiPolygon",t))(ms||{}),hn=(t=>(t.GEOMETRIC="geometric",t.SYMBOLIC="symbolic",t.HYBRID="hybrid",t.NONE="none",t))(hn||{}),wa=(t=>(t.NEW="new",t.INITIATING="initiating",t.INITIATED="initiated",t.TERMINATING="terminating",t.TERMINATED="terminated",t))(wa||{}),ks=(t=>(t.NEW="new",t.LOADING="loading",t.LOADED="loaded",t.ERROR="error",t))(ks||{}),xa=(t=>(t.NOT_LOADED="not-loaded",t.NOT_VISUAL="not-visual",t.REFRESH="refresh",t.UP_TO_DATE="up-to-date",t))(xa||{}),l0=(t=>(t.ESRI="esri",t.TEXT="text",t.IMAGE="image",t.HTML="html",t.XML="xml",t.JSON="json",t.UNKNOWN="unknown",t))(l0||{}),Ho=(t=>(t.SYMBOL="symbol",t.GRID="grid",t.EXTENT="extent",t.INITIAL="initial",t.API="api",t.PERMANENT="permanent",t))(Ho||{}),As=(t=>(t.BoundaryZoom="boundaryZoom",t.Datatable="datatable",t.Identify="identify",t.Metadata="metadata",t.Opacity="opacity",t.Refresh="refresh",t.Reload="reload",t.Remove="remove",t.Settings="settings",t.Symbology="symbology",t.Visibility="visibility",t))(As||{});class jh{attributes;geometry;style;id;constructor(e,i,r){this.geometry=e,i?this.id=i:this.id=Vb.sharedUtils.generateUUID(),r?this.attributes=r:this.attributes={}}_hover;get hover(){return this._hover}set hover(e){e&&this._hover&&this._hover.id!==e.id&&this.removeHover(),this._hover=e}removeHover(){this._hover&&(this._hover=void 0)}}function h(t,e,i,r){var s,n=arguments.length,o=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(n<3?s(o):n>3?s(e,i,o):s(e,i))||o);return n>3&&o&&Object.defineProperty(e,i,o),o}function yme(t){return t&&t.release&&typeof t.release=="function"}function gme(t){return t&&t.acquire&&typeof t.acquire=="function"}let Bm=class Tk{constructor(e,i,r,s=1,n=0){if(this._ctor=e,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=s,this._pool=new Array(n),this._initialSize=n,this._ctor)for(let o=0;o<n;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...e){let i;if(Tk.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let s=0;s<r;s++)this._pool[s]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...e):gme(i)&&i.acquire(...e),i}release(e){e&&!Tk.test.disabled&&(this._releaseFunction?this._releaseFunction(e):yme(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let i=e;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}};Bm.test={disabled:!1};function vme(t){t.length=0}let Zo=class{constructor(e=50,i=50){this._pool=new Bm(Array,void 0,vme,i,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return J$.acquire()}static release(e){return J$.release(e)}static prune(){J$.prune()}};const J$=new Zo(100);function aat(t){const e=[];return function*(){yield*e;for(const i of t)e.push(i),yield i}}function bme(t,e){for(const i of t)if(i!=null&&e(i))return i}function fA(t){return t!=null&&typeof t[Symbol.iterator]=="function"}const wme=null;function ee(t){return t!=null}function Re(t){return t==null}function Kf(t,e){return ee(t)?e(t):wme}function lat(t){return t}function Wo(t,e){return am(t,e),t}function am(t,e){if(Re(t))throw new Error(e??"value is None")}function VF(t,e){return ee(t)?t:typeof e=="function"?e():e}function dV(t,e){return ee(t)?t:e}function Jr(t){return ee(t)&&t.destroy(),null}function uat(t){return ee(t)&&t.dispose(),null}function gs(t){return ee(t)&&t.remove(),null}function yS(t){return ee(t)&&t.abort(),null}function cat(t){return ee(t)&&t.release(),null}function _me(t,e,i){return ee(t)&&ee(e)?ee(i)?i(t,e):t.equals(e):t===e}function xme(t){return null}function hat(t,e){const i=new Array;for(const r of t)i.push(c2(r,null,e));return i}function dat(t,e){for(const i of t)Kf(i,e)}function c2(t,e,i){return ee(t)?i(t):e}function pat(t){return t.filter(e=>ee(e))}function gK(t,...e){let i=t;for(let r=0;r<e.length&&i;++r)i=i[e[r]];return i}function fat(t){return t}let Ao=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(i=>{e+=i.length}),e}add(e,i){if(fA(e)){const r=this._getOrCreateGroup(i);for(const s of e)this._isHandle(s)&&r.push(s)}else this._isHandle(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&i&&r.forEach(i)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(typeof e!="string"&&fA(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(this._removeAllFromGroup(this._getGroup(e)),this._groups.delete(this._ensureGroupKey(e)),this):this}removeAll(){return this._groups.forEach(e=>this._removeAllFromGroup(e)),this._groups.clear(),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(this._ensureGroupKey(e),i),i}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}_removeAllFromGroup(e){e.forEach(i=>i.remove())}};const vK=Symbol("Accessor-beforeDestroy");function O4(t){return Lw(()=>t.forEach(e=>ee(e)&&e.remove()))}function Lw(t){return{remove:()=>{t&&(t(),t=void 0)}}}let wx=class Oy{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*Oy._m}getInt(){return this._seed=(Oy._a*this._seed+Oy._c)%Oy._m,this._seed}getFloat(){return this.getInt()/(Oy._m-1)}getIntRange(e,i){return Math.round(this.getFloatRange(e,i))}getFloatRange(e,i){const r=i-e;return e+this.getInt()/Oy._m*r}};wx._m=2147483647,wx._a=48271,wx._c=0;function Sme(t,e){return e?t.filter((i,r,s)=>s.findIndex(e.bind(null,i))===r):t.filter((i,r,s)=>s.indexOf(i)===r)}function R4(t,e,i){if(Re(t)&&Re(e))return!0;if(Re(t)||Re(e)||t.length!==e.length)return!1;if(i){for(let r=0;r<t.length;r++)if(!i(t[r],e[r]))return!1}else for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function yat(t,e){let i=t.length!==e.length;i&&(t.length=e.length);for(let r=0;r<e.length;++r)t[r]!==e[r]&&(t[r]=e[r],i=!0);return i}function gat(t,e,i){let r,s;return i?(r=e.filter(n=>!t.some(o=>i(o,n))),s=t.filter(n=>!e.some(o=>i(o,n)))):(r=e.filter(n=>!t.includes(n)),s=t.filter(n=>!e.includes(n))),{added:r,removed:s}}function vat(t){return t&&typeof t.length=="number"}const Eme=!!Array.prototype.fill;function Tme(t,e){if(Eme)return new Array(t).fill(e);const i=new Array(t);for(let r=0;r<t;r++)i[r]=e;return i}function bat(t,e){e===void 0&&(e=t,t=0);const i=new Array(e-t);for(let r=t;r<e;r++)i[r-t]=r;return i}let bK=class{constructor(){this.last=0}};const wK=new bK;function Ik(t,e,i,r){r=r||wK;const s=Math.max(0,r.last-10);for(let o=s;o<i;++o)if(t[o]===e)return r.last=o,o;const n=Math.min(s,i);for(let o=0;o<n;++o)if(t[o]===e)return r.last=o,o;return-1}function _K(t,e,i,r){const s=i??t.length,n=Ik(t,e,s,r);if(n!==-1)return t[n]=t[s-1],i==null&&t.pop(),e}const Lu=new Set;function Ime(t,e,i=t.length,r=e.length,s,n){if(r===0||i===0)return i;Lu.clear();for(let a=0;a<r;++a)Lu.add(e[a]);s=s||wK;const o=Math.max(0,s.last-10);for(let a=o;a<i;++a)if(Lu.has(t[a])&&(n&&n.push(t[a]),Lu.delete(t[a]),t[a]=t[i-1],--i,--a,Lu.size===0||i===0))return Lu.clear(),i;for(let a=0;a<o;++a)if(Lu.has(t[a])&&(n&&n.push(t[a]),Lu.delete(t[a]),t[a]=t[i-1],--i,--a,Lu.size===0||i===0))return Lu.clear(),i;return Lu.clear(),i}function Mme(t,e){const i=t.indexOf(e);return i!==-1?(t.splice(i,1),e):null}function _at(t){return t instanceof ArrayBuffer}function Ame(t){return t&&t.constructor&&t.constructor.name==="Int8Array"}function Cme(t){return t&&t.constructor&&t.constructor.name==="Uint8Array"}function $me(t){return t&&t.constructor&&t.constructor.name==="Uint8ClampedArray"}function Ome(t){return t&&t.constructor&&t.constructor.name==="Int16Array"}function Rme(t){return t&&t.constructor&&t.constructor.name==="Uint16Array"}function kme(t){return t&&t.constructor&&t.constructor.name==="Int32Array"}function Lme(t){return t&&t.constructor&&t.constructor.name==="Uint32Array"}function Pme(t){return t&&t.constructor&&t.constructor.name==="Float32Array"}function Nme(t){return t&&t.constructor&&t.constructor.name==="Float64Array"}const xat=1024;function xK(t,e){let i;if(e)for(i in t)t.hasOwnProperty(i)&&(t[i]===void 0?delete t[i]:t[i]instanceof Object&&xK(t[i],!0));else for(i in t)t.hasOwnProperty(i)&&t[i]===void 0&&delete t[i];return t}function Le(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=IK(t);if(ee(e))return e;if(SK(t))return t.clone();if(EK(t))return t.map(Le);if(TK(t))return t.clone();const i={};for(const r of Object.getOwnPropertyNames(t))i[r]=Le(t[r]);return i}function Mk(t){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const e=IK(t);if(ee(e))return e;if(EK(t)){let i=!0;const r=t.map(s=>{const n=Mk(s);return s!=null&&n==null&&(i=!1),n});return i?r:null}if(SK(t))return t.clone();if(!TK(t)){const i=new(Object.getPrototypeOf(t)).constructor;for(const r of Object.getOwnPropertyNames(t)){const s=t[r],n=Mk(s);if(s!=null&&n==null)return null;i[r]=n}return i}return null}function SK(t){return typeof t.clone=="function"}function EK(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function TK(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function pV(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function IK(t){if(Ame(t)||Cme(t)||$me(t)||Ome(t)||Rme(t)||kme(t)||Lme(t)||Pme(t)||Nme(t))return t.slice();if(t instanceof Date)return new Date(t.getTime());if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[i,r]of t)e.set(i,Le(r));return e}if(t instanceof Set){const e=new Set;for(const i of t)e.add(Le(i));return e}return null}function BF(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof(t||{}).getTime=="function"&&typeof(e||{}).getTime=="function"&&t.getTime()===e.getTime()||!1}function Fme(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&R4(t,e):t instanceof Set?e instanceof Set&&jme(t,e):t instanceof Map?e instanceof Map&&Ume(t,e):!!pV(t)&&pV(e)&&Dme(t,e))}function Dme(t,e){if(t===null||e===null)return!1;const i=Object.keys(t);if(e===null||Object.keys(e).length!==i.length)return!1;for(const r of i)if(t[r]!==e[r]||!Object.prototype.hasOwnProperty.call(e,r))return!1;return!0}function jme(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function Ume(t,e){if(t.size!==e.size)return!1;for(const[i,r]of t){const s=e.get(i);if(s!==r||s===void 0&&!e.has(i))return!1}return!0}function Ws(t){return t?t.__accessor__?t.__accessor__:t.propertyInvalidated?t:null:null}function Vme(t,e){return t!=null&&t.metadatas&&t.metadatas[e]!=null}function II(t,e,i){return i?mA(t,e,{policy:i,path:""}):mA(t,e,null)}function mA(t,e,i){return e?Object.keys(e).reduce((r,s)=>{let n=null,o="merge";if(i&&(n=i.path?`${i.path}.${s}`:s,o=i.policy(n)),o==="replace"||o==="replace-arrays"&&Array.isArray(r[s]))return r[s]=e[s],r;if(r[s]===void 0)return r[s]=Le(e[s]),r;let a=r[s],l=e[s];if(a===l)return r;if(Array.isArray(l)||Array.isArray(r))a=a?Array.isArray(a)?r[s]=a.concat():r[s]=[a]:r[s]=[],l&&(Array.isArray(l)||(l=[l]),l.forEach(u=>{a.includes(u)||a.push(u)}));else if(l&&typeof l=="object")if(i){const u=i.path;i.path=n,r[s]=mA(a,l,i),i.path=u}else r[s]=mA(a,l,null);else r.hasOwnProperty(s)&&!e.hasOwnProperty(s)||(r[s]=l);return r},t||{}):t}function MK(t){return Array.isArray(t)?t:t.split(".")}function fV(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function Bme(t){if(Array.isArray(t)){const e=[];for(const i of t)e.push(...fV(i));return e}return fV(t)}function AK(t,e,i,r){const s=Bme(e);if(s.length!==1){const n=s.map(o=>r(t,o,i));return O4(n)}return r(t,s[0],i)}function CK(t){let e=!1;return()=>{e||(e=!0,t())}}function $K(t,e){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const s=parseInt(i,10);if(!isNaN(s))return Array.isArray(e)?e[s]:e.getItemAt(s)}const r=Ws(e);return Vme(r,i)?r.get(i):e[i]}function OK(t,e,i){if(t==null)return t;const r=$K(e[i],t);return!r&&i<e.length-1?void 0:i===e.length-1?r:OK(r,e,i+1)}function S3(t,e,i=0){return typeof e!="string"||e.includes(".")?OK(t,MK(e),i):$K(e,t)}function yA(t,e){return S3(t,e)}function mV(t,e){return S3(e,t)!==void 0}function E3(t){let e=t.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!i){e=Object.create(e);for(const r in e)e[r]=Le(e[r]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function k4(t,e){const i=E3(t);let r=i[e];return r||(r=i[e]={}),r}function zme(t,e){return II(t,e,qme)}const Gme=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function qme(t){return Gme.test(t)?"replace":"merge"}let Qf;function Ze(t){return typeof Qf[t]=="function"?Qf[t]=Qf[t](globalThis):Qf[t]}Qf=globalThis.dojoConfig?.has||globalThis.esriConfig?.has?{...globalThis.dojoConfig?.has,...globalThis.esriConfig?.has}:{},Ze.add=(t,e,i,r)=>((r||Qf[t]===void 0)&&(Qf[t]=e),i&&Ze(t)),Ze.cache=Qf,Ze.add("esri-deprecation-warnings",!0),(()=>{Ze.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(Ze.add("host-browser",t),Ze.add("host-node",typeof globalThis.process=="object"&&globalThis.process.versions?.node&&globalThis.process.versions.v8),Ze.add("dom",t),Ze("host-browser")){const e=navigator,i=e.userAgent,r=e.appVersion,s=parseFloat(r);if(Ze.add("wp",parseFloat(i.split("Windows Phone")[1])||void 0),Ze.add("msapp",parseFloat(i.split("MSAppHost/")[1])||void 0),Ze.add("khtml",r.includes("Konqueror")?s:void 0),Ze.add("edge",parseFloat(i.split("Edge/")[1])||void 0),Ze.add("opr",parseFloat(i.split("OPR/")[1])||void 0),Ze.add("webkit",!Ze("wp")&&!Ze("edge")&&parseFloat(i.split("WebKit/")[1])||void 0),Ze.add("chrome",!Ze("edge")&&!Ze("opr")&&parseFloat(i.split("Chrome/")[1])||void 0),Ze.add("android",!Ze("wp")&&parseFloat(i.split("Android ")[1])||void 0),Ze.add("safari",!r.includes("Safari")||Ze("wp")||Ze("chrome")||Ze("android")||Ze("edge")||Ze("opr")?void 0:parseFloat(r.split("Version/")[1])),Ze.add("mac",r.includes("Macintosh")),!Ze("wp")&&i.match(/(iPhone|iPod|iPad)/)){const n=RegExp.$1.replace(/P/,"p"),o=i.match(/OS ([\d_]+)/)?RegExp.$1:"1",a=parseFloat(o.replace(/_/,".").replace(/_/g,""));Ze.add(n,a),Ze.add("ios",a)}Ze("webkit")||(!i.includes("Gecko")||Ze("wp")||Ze("khtml")||Ze("edge")||Ze.add("mozilla",s),Ze("mozilla")&&Ze.add("ff",parseFloat(i.split("Firefox/")[1]||i.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);e&&Ze.add("esri-mobile",e),i&&Ze.add("esri-iPhone",i),Ze.add("esri-geolocation",!!navigator.geolocation)}Ze.add("esri-wasm","WebAssembly"in globalThis),Ze.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in globalThis,e=globalThis.crossOriginIsolated===!1;return t&&!e}),Ze.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),Ze.add("esri-atomics","Atomics"in globalThis),Ze.add("esri-workers","Worker"in globalThis),Ze.add("web-feat:cache","caches"in globalThis),Ze.add("esri-workers-arraybuffer-transfer",!Ze("safari")||Number(Ze("safari"))>=12),Ze.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),Ze.add("featurelayer-simplify-payload-size-factors",[1,1,4]),Ze.add("featurelayer-snapshot-enabled",!0),Ze.add("featurelayer-snapshot-point-min-threshold",8e4),Ze.add("featurelayer-snapshot-point-max-threshold",4e5),Ze.add("featurelayer-snapshot-point-coverage",.1),Ze.add("featurelayer-advanced-symbols",!1),Ze.add("featurelayer-pbf",!0),Ze.add("featurelayer-pbf-statistics",!1),Ze.add("feature-layers-workers",!0),Ze.add("feature-polyline-generalization-factor",1),Ze.add("mapview-transitions-duration",200),Ze.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),Ze.add("mapserver-pbf-version-support",10.81),Ze.add("mapservice-popup-identify-max-tolerance",20),Ze.add("heatmap-allow-raster-fallback",!0),Ze.add("heatmap-force-raster",!1),Ze("host-webworker")||Ze("host-browser")&&(Ze.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),Ze.add("esri-image-decode",()=>{if("decode"in new Image){const t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void t.decode().then(()=>{Ze.add("esri-image-decode",!0,!0,!0)}).catch(()=>{Ze.add("esri-image-decode",!1,!0,!0)})}return!1}),Ze.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();function RK(t,e,i=!1){return LK(t,e,i)}function T3(t,e){if(e!=null)return e[t]||kK(t.split("."),!1,e)}function Io(t,e,i){const r=t.split("."),s=r.pop(),n=kK(r,!0,i);n&&s&&(n[s]=e)}function kK(t,e,i){let r=i;for(const s of t){if(r==null)return;if(!(s in r)){if(!e)return;r[s]={}}r=r[s]}return r}function LK(t,e,i){return e?Object.keys(e).reduce((r,s)=>{let n=r[s],o=e[s];return n===o?r:n===void 0?(r[s]=Le(o),r):(Array.isArray(o)||Array.isArray(r)?(n=n?Array.isArray(n)?r[s]=n.concat():r[s]=[n]:r[s]=[],o&&(Array.isArray(o)||(o=[o]),i?o.forEach(a=>{n.includes(a)||n.push(a)}):r[s]=o.concat())):o&&typeof o=="object"?r[s]=LK(n,o,i):r.hasOwnProperty(s)&&!e.hasOwnProperty(s)||(r[s]=o),r)},t||{}):t}const Li={analysisTheme:{accentColor:[255,128,0],textColor:"white"},apiKey:void 0,applicationUrl:globalThis.location?.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!1,portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(RK(Li,globalThis.esriConfig,!0),delete Li.has),!Li.assetsPath){{const t="4.26.5";Li.assetsPath=`https://js.arcgis.com/${t.slice(0,-2)}/@arcgis/core/assets`}Li.defaultAssetsPath=Li.assetsPath}const Hme=/\{([^\}]+)\}/g;function yV(t){return t??""}function _c(t,e){return t.replace(Hme,typeof e=="object"?(i,r)=>yV(T3(r,e)):(i,r)=>yV(e(r)))}function Sat(t,e){return t.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,i=>e&&e.includes(i)?i:`\\${i}`)}function zF(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}function Eat(t){return new DOMParser().parseFromString(t||"","text/html").body.innerText||""}const gV={info:0,warn:1,error:2,none:3};let tt=class oo{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,oo._loggers[this.module]=this;const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=oo.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){const e=this;return{loggedMessages:e._loggedMessages,clearLoggedWarnings:()=>e._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(e={}){const i=oo._loggers;return oo._loggers=e,i},set throttlingDisabled(e){oo._throttlingDisabled=e}}}static getLogger(e){let i=oo._loggers[e];return i||(i=new oo({module:e})),i}_log(e,i,...r){if(this._matchLevel(e)){if(i!=="always"&&!oo._throttlingDisabled){const s=this._argsToKey(r),n=this._loggedMessages[e].get(s);if(i==="once"&&n!=null||i==="oncePerTick"&&n&&n>=oo._tickCounter)return;this._loggedMessages[e].set(s,oo._tickCounter),oo._scheduleTickCounterIncrement()}for(const s of Li.log.interceptors)if(s(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,i){let r=this;for(;ee(r);){const s=r[e];if(ee(s))return s;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(e,i,...r){console[e](`[${i}]`,...r)}_matchLevel(e){const i=Li.log.level?Li.log.level:"warn";return gV[this._parentWithMember("level",i)]<=gV[e]}_argsToKey(...e){return zF(JSON.stringify(e,(r,s)=>typeof s!="object"||Array.isArray(s)?s:"[Object]"))}static _scheduleTickCounterIncrement(){oo._tickCounterScheduled||(oo._tickCounterScheduled=!0,Promise.resolve().then(()=>{oo._tickCounter++,oo._tickCounterScheduled=!1}))}};tt._loggers={},tt._tickCounter=0,tt._tickCounterScheduled=!1,tt._throttlingDisabled=!1;var Jd;(function(t){t[t.INITIALIZING=0]="INITIALIZING",t[t.CONSTRUCTING=1]="CONSTRUCTING",t[t.CONSTRUCTED=2]="CONSTRUCTED"})(Jd||(Jd={}));let Wme=class{constructor(e,i){this._observers=e,this._observer=i}remove(){Mme(this._observers,this._observer)}},PK=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return Jme;this._observers==null&&(this._observers=[]);const i=this._observers;let r=!1,s=!1;const n=i.length;for(let o=0;o<n;++o){const a=i[o];if(a.destroyed)s=!0;else if(a===e){r=!0;break}}return r||(i.push(e),s&&this._removeDestroyedObservers()),new Wme(i,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const i=e.length;let r=0;for(let s=0;s<i;++s){for(;s+r<i&&e[s+r].destroyed;)++r;if(r>0){if(!(s+r<i))break;e[s]=e[s+r]}}e.length=i-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const i of e)i.onCommitted();this._observers=null}}};const Jme={remove:()=>{}};var St;(function(t){t[t.DEFAULTS=0]="DEFAULTS",t[t.COMPUTED=1]="COMPUTED",t[t.SERVICE=2]="SERVICE",t[t.PORTAL_ITEM=3]="PORTAL_ITEM",t[t.WEB_SCENE=4]="WEB_SCENE",t[t.WEB_MAP=5]="WEB_MAP",t[t.USER=6]="USER"})(St||(St={}));const Ak=St.USER+1;function Ea(t){switch(t){case"defaults":return St.DEFAULTS;case"service":return St.SERVICE;case"portal-item":return St.PORTAL_ITEM;case"web-scene":return St.WEB_SCENE;case"web-map":return St.WEB_MAP;case"user":return St.USER;default:return null}}function gS(t){switch(t){case St.DEFAULTS:return"defaults";case St.SERVICE:return"service";case St.PORTAL_ITEM:return"portal-item";case St.WEB_SCENE:return"web-scene";case St.WEB_MAP:return"web-map";case St.USER:return"user"}return void 0}function Zme(t){return gS(t)}var tr;(function(t){t[t.Dirty=1]="Dirty",t[t.Overriden=2]="Overriden",t[t.Computing=4]="Computing",t[t.NonNullable=8]="NonNullable",t[t.HasDefaultValue=16]="HasDefaultValue",t[t.DepTrackingInitialized=32]="DepTrackingInitialized",t[t.AutoTracked=64]="AutoTracked",t[t.ExplicitlyTracking=128]="ExplicitlyTracking"})(tr||(tr={}));const gA={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},h2=[];let _x=gA;function pi(t){_x.onObservableAccessed(t)}let MI=!1,AI=!1;function ap(t,e,i){if(MI)return GF(t,e,i);NK(t);const r=e.call(i);return FK(),r}function Yme(t,e){return ap(gA,t,e)}function GF(t,e,i){const r=MI;MI=!0,NK(t);let s=null;try{s=e.call(i)}catch(n){AI&&tt.getLogger("esri.core.accessorSupport.tracking").error(n)}return FK(),MI=r,s}function NK(t){_x=t,h2.push(t)}function FK(){const t=h2.length;if(t>1){const e=h2.pop();_x=h2[t-2],e.onTrackingEnd()}else if(t===1){const e=h2.pop();_x=gA,e.onTrackingEnd()}else _x=gA}function DK(t,e){const i=e.observerObject;if(i.flags&tr.DepTrackingInitialized)return;const r=AI;AI=!1,i.flags&tr.AutoTracked?GF(e,e.metadata.get,t):jK(t,e),AI=r}const Kme=[];function jK(t,e){const i=e.observerObject;i.flags&tr.ExplicitlyTracking||(i.flags|=tr.ExplicitlyTracking,GF(e,()=>{const r=e.metadata.dependsOn||Kme;for(const s of r)if(typeof s!="string"||s.includes(".")){const n=MK(s);for(let o=0,a=t;o<n.length&&a!=null&&typeof a=="object";++o)a=vV(a,n[o],o!==n.length-1)}else vV(t,s,!1)}),i.flags&=~tr.ExplicitlyTracking)}function vV(t,e,i){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const n=parseInt(r,10);if(!isNaN(n))return Array.isArray(t)?t[n]:t.getItemAt(n)}const s=Ws(t)?.properties.get(r);return s&&(pi(s.observerObject),DK(t,s)),i?t[r]:void 0}let bV=class{constructor(e,i,r){this.properties=e,this.propertyName=i,this.metadata=r,this.observerObject=new Qme,this._accessed=null,this._handles=null,this.observerObject.flags=tr.Dirty|(r.nonNullable?tr.NonNullable:0)|(r.hasOwnProperty("value")?tr.HasDefaultValue:0)|(r.get===void 0?tr.DepTrackingInitialized:0)|(r.dependsOn===void 0?tr.AutoTracked:0),wV.register(this,this.observerObject)}destroy(){this.observerObject.destroy(),this._accessed=null,this._clearObservationHandles(),wV.unregister(this)}getComputed(){const e=this.observerObject;pi(e);const i=this.properties.store,r=this.propertyName,s=e.flags,n=i.get(r);if(s&tr.Computing||~s&tr.Dirty&&i.has(r))return n;e.flags|=tr.Computing;const o=this.properties.host;let a;s&tr.AutoTracked?a=ap(this,this.metadata.get,o):(jK(o,this),a=this.metadata.get.call(o)),i.set(r,a,St.COMPUTED);const l=i.get(r);return l===n?e.flags&=~tr.Dirty:Yme(this.commit,this),e.flags&=~tr.Computing,l}onObservableAccessed(e){e!==this.observerObject&&(this._accessed===null&&(this._accessed=[]),this._accessed.includes(e)||this._accessed.push(e))}onTrackingEnd(){this._clearObservationHandles();const e=this.observerObject;e.flags|=tr.DepTrackingInitialized;const i=this._accessed;if(i===null)return;let r=this._handles;r===null&&(r=this._handles=[]);for(let s=0;s<i.length;++s)r.push(i[s].observe(e));i.length=0}notifyChange(){const e=this.observerObject;e.onInvalidated(),e.onCommitted()}invalidate(){this.observerObject.onInvalidated()}commit(){const e=this.observerObject;e.flags&=~tr.Dirty,e.onCommitted()}_clearObservationHandles(){const e=this._handles;if(e!==null){for(let i=0;i<e.length;++i)e[i].remove();e.length=0}}},Qme=class extends PK{constructor(){super(...arguments),this.flags=0}onInvalidated(){~this.flags&tr.Overriden&&(this.flags|=tr.Dirty);const e=this._observers;if(e&&e.length>0)for(const i of e)i.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onCommitted()}}destroy(){this.flags&tr.Dirty&&this.onCommitted(),super.destroy()}};const wV=new FinalizationRegistry(t=>{t.destroy()});let Xme=class UK{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new UK;return this._values.forEach((r,s)=>{e&&e.has(s)||i.set(s,Le(r))}),i}get(e){return this._values.get(e)}originOf(){return St.USER}keys(){return[...this._values.keys()]}set(e,i){this._values.set(e,i)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}};function BE(t,e,i){return t!==void 0}function _V(t,e,i,r){return t!==void 0&&(!(i==null&&t.observerObject.flags&tr.NonNullable)||(r.lifecycle,Jd.INITIALIZING,!1))}function eye(t){return t&&typeof t.destroy=="function"}tt.getLogger("esri.core.accessorSupport.Properties");let tye=class{constructor(e){this.host=e,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=Jd.INITIALIZING,this.store=new Xme,this._origin=St.USER;const i=this.host.constructor.__accessorMetadata__;for(const r in i){const s=new bV(this,r,i[r]);this.properties.set(r,s)}this.metadatas=i}initialize(){this.lifecycle=Jd.CONSTRUCTING}constructed(){this.lifecycle=Jd.CONSTRUCTED}destroy(){this.destroyed=!0;for(const[e,i]of this.properties){if(i.metadata.autoDestroy){const r=this.internalGet(e);r&&eye(r)&&(r.destroy(),~i.observerObject.flags&tr.NonNullable&&this._internalSet(i,null))}i.destroy()}}get initialized(){return this.lifecycle!==Jd.INITIALIZING}get(e){const i=this.properties.get(e);if(i.metadata.get)return i.getComputed();pi(i.observerObject);const r=this.store;return r.has(e)?r.get(e):i.metadata.value}originOf(e){const i=this.store.originOf(e);if(i===void 0){const r=this.properties.get(e);if(r!==void 0&&r.observerObject.flags&tr.HasDefaultValue)return"defaults"}return gS(i)}has(e){return!!this.properties.has(e)&&this.store.has(e)}keys(){return[...this.properties.keys()]}internalGet(e){const i=this.properties.get(e);if(BE(i))return this.store.has(e)?this.store.get(e):i.metadata.value}internalSet(e,i){const r=this.properties.get(e);BE(r)&&this._internalSet(r,i)}getDependsInfo(e,i,r){const s=this.properties.get(i);if(!BE(s))return"";const n=new Set,o=ap({onObservableAccessed:l=>n.add(l),onTrackingEnd:()=>{}},()=>s.metadata.get?.call(e));let a=`${r}${e.declaredClass.split(".").pop()}.${i}: ${o}
`;if(n.size===0)return a;r+="  ";for(const l of n){if(!(l instanceof bV))continue;const u=l.properties.host,c=l.propertyName,d=Ws(u);a+=d?d.getDependsInfo(u,c,r):`${r}${c}: undefined
`}return a}setAtOrigin(e,i,r){const s=this.properties.get(e);if(BE(s))return this._setAtOrigin(s,i,r)}isOverridden(e){const i=this.properties.get(e);return i!==void 0&&!!(i.observerObject.flags&tr.Overriden)}clearOverride(e){const i=this.properties.get(e),r=i?.observerObject;r&&r.flags&tr.Overriden&&(r.flags&=~tr.Overriden,i.notifyChange())}override(e,i){const r=this.properties.get(e);if(!_V(r,e,i,this))return;const s=r.metadata.cast;if(s){const n=this._cast(s,i),{valid:o,value:a}=n;if(Z$.release(n),!o)return;i=a}r.observerObject.flags|=tr.Overriden,this._internalSet(r,i)}set(e,i){const r=this.properties.get(e);if(!_V(r,e,i,this))return;const s=r.metadata.cast;if(s){const o=this._cast(s,i),{valid:a,value:l}=o;if(Z$.release(o),!a)return;i=l}const n=r.metadata.set;n?n.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(e){this._origin=Ea(e)}getDefaultOrigin(){return gS(this._origin)}notifyChange(e){const i=this.properties.get(e);i!==void 0&&i.notifyChange()}invalidate(e){const i=this.properties.get(e);i!==void 0&&i.invalidate()}commit(e){const i=this.properties.get(e);i!==void 0&&i.commit()}_internalSet(e,i){const r=this.lifecycle!==Jd.INITIALIZING?this._origin:St.DEFAULTS;this._setAtOrigin(e,i,r)}_setAtOrigin(e,i,r){const s=this.store,n=e.propertyName;s.has(n,r)&&BF(i,s.get(n))&&~e.observerObject.flags&tr.Overriden&&r===s.originOf(n)||(e.invalidate(),s.set(n,i,r),e.commit(),DK(this.host,e))}_cast(e,i){const r=Z$.acquire();return r.valid=!0,r.value=i,e&&(r.value=e.call(this.host,i,r)),r}},iye=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const Z$=new Bm(iye);function rye(t,e){return t.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(i,r)=>{if(r==="")return"$";const s=T3(r,e),n=s??"";if(n===void 0)throw new Error(`could not find key "${r}" in template`);return n.toString()})}let VK=class BK{constructor(e,i,r){this.name=e,this.details=r,this instanceof BK&&(this.message=(i&&rye(i,r))??"")}toString(){return"["+this.name+"]: "+this.message}},Ce=class CI extends VK{constructor(e,i,r){if(super(e,i,r),!(this instanceof CI))return new CI(e,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return Le(i)}catch{return"[object]"}}))}}catch(e){throw tt.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new CI(e.name,e.message,e.details)}};Ce.prototype.type="error";function vA(t,e,i){if(t&&e)if(typeof e=="object")for(const r of Object.getOwnPropertyNames(e))vA(t,r,e[r]);else{if(e.includes(".")){const s=e.split("."),n=s.splice(s.length-1,1)[0];return void vA(yA(t,s),n,i)}const r=t.__accessor__;r!=null&&sye(e,r),t[e]=i}}function sye(t,e){if(Ze("esri-unknown-property-errors")&&!nye(t,e))throw new Ce("set:unknown-property",oye(t,e))}function nye(t,e){return e.metadatas[t]!=null}function oye(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}let zK=class extends Bm{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=xme(this._set)}acquire(...e){const i=super.acquire(...e);return this._set.delete(i),i}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const zE=[];function bA(t){zE.push(t),zE.length===1&&queueMicrotask(()=>{const e=zE.slice();zE.length=0;for(const i of e)i()})}let xx=class{constructor(e,i=30){this.name=e,this._counter=0,this._samples=new Array(i)}record(e){ee(e)&&(this._samples[++this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,i)=>e-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,i)=>e+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var Ck;(function(t){const e=(n,o,a,l)=>{let u=o,c=o;const d=a>>>1,f=n[u-1];for(;c<=d;){c=u<<1,c<a&&l(n[c-1],n[c])<0&&++c;const m=n[c-1];if(l(m,f)<=0)break;n[u-1]=m,u=c}n[u-1]=f},i=(n,o)=>n<o?-1:n>o?1:0;function r(n,o,a,l){o===void 0&&(o=0),a===void 0&&(a=n.length),l===void 0&&(l=i);for(let c=a>>>1;c>o;c--)e(n,c,a,l);const u=o+1;for(let c=a-1;c>o;c--){const d=n[o];n[o]=n[c],n[c]=d,e(n,u,c,l)}}function*s(n,o,a,l){o===void 0&&(o=0),a===void 0&&(a=n.length),l===void 0&&(l=i);for(let c=a>>>1;c>o;c--)e(n,c,a,l),yield;const u=o+1;for(let c=a-1;c>o;c--){const d=n[o];n[o]=n[c],n[c]=d,e(n,u,c,l),yield}}t.sort=r,t.iterableSort=s})(Ck||(Ck={}));const xV=Ck,aye=1.5,lye=1.1;let lm=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new bK,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>SV(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const i=new Array;for(let r=0;r<this._length;r++){const s=this.data[r];e(s)&&i.push(s)}return i}getItemAt(e){if(!(e<0||e>=this._length))return this.data[e]}includes(e,i){const r=this.data.indexOf(e,i);return r!==-1&&r<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let i=e;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,i=e.length){for(let r=0;r<i;r++)this.data[this._length++]=e[r]}fill(e,i){for(let r=0;r<i;r++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,SV(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const i=Ik(this.data,e,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(Ik(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,i=e.length,r){this.length=Ime(this.data,e,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,i){if(e>=this.length||i>=this.length||e===i)return;const r=this.data[e];this.data[e]=this.data[i],this.data[i]=r}sort(e){xV.sort(this.data,0,this.length,e)}iterableSort(e){return xV.iterableSort(this.data,0,this.length,e)}some(e,i){for(let r=0;r<this.length;++r)if(e.call(i,this.data[r],r,this.data))return!0;return!1}find(e,i){for(let r=0;r<this.length;++r){const s=this.data[r];if(e.call(i,s,r))return s}}filterInPlace(e,i){let r=0;for(let s=0;s<this._length;++s){const n=this.data[s];e.call(i,n,s,this.data)&&(this.data[s]=this.data[r],this.data[r]=n,r++)}if(this._deallocator)for(let s=r;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=r,this._shrink(),this}forAll(e,i){const r=this.length,s=this.data;for(let n=0;n<r;++n)e.call(i,s[n],n,s)}forEach(e,i){for(let r=0;r<this.length;++r)e.call(i,this.data[r],r,this.data)}map(e,i){const r=new Array(this.length);for(let s=0;s<this.length;++s)r[s]=e.call(i,this.data[s],s,this.data);return r}reduce(e,i){let r=i;for(let s=0;s<this.length;++s)r=e(r,this.data[s],s,this.data);return r}has(e){const i=this.length,r=this.data;for(let s=0;s<i;++s)if(r[s]===e)return!0;return!1}};function SV(t){t.data.length>aye*t.length&&(t.data.length=Math.floor(t.length*lye))}function uye(t){return{setTimeout:(e,i)=>{const r=t.setTimeout(e,i);return{remove:()=>t.clearTimeout(r)}}}}const I3=uye(globalThis),EV=new Set;function cye(t,e,i=!1){i&&EV.has(e)||(i&&EV.add(e),t.warn(`🛑 DEPRECATED - ${e}`))}function $k(t,e,i={}){if(Ze("esri-deprecation-warnings")){const{moduleName:r}=i;GK(t,`Property: ${(r?r+"::":"")+e}`,i)}}function GK(t,e,i={}){if(Ze("esri-deprecation-warnings")){const{replacement:r,version:s,see:n,warnOnce:o}=i;let a=e;r&&(a+=`
	🛠️ Replacement: ${r}`),s&&(a+=`
	⚙️ Version: ${s}`),n&&(a+=`
	🔗 See ${n} for more details.`),cye(t,a,o)}}function L4(t){return t&&(typeof t.on=="function"||typeof t.addEventListener=="function")}function P4(t,e,i){if(!L4(t))throw new TypeError("target is not a Evented or EventTarget object");if("on"in t)return t.on(e,i);if(Array.isArray(e)){const r=e.slice();for(const s of r)t.addEventListener(s,i);return{remove(){for(const s of r)t.removeEventListener(s,i)}}}return t.addEventListener(e,i),{remove(){t.removeEventListener(e,i)}}}function qK(t,e,i){if(!L4(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,i);const r=P4(t,e,s=>{r.remove(),i.call(t,s)});return{remove(){r.remove()}}}const hye={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function Tg({key:t}){return hye[t]||t}function yr(t="Aborted"){return new Ce("AbortError",t)}function pr(t,e="Aborted"){if(Rl(t))throw yr(e)}function N4(t){return ee(t)?"aborted"in t?t:t.signal:t}function Rl(t){const e=N4(t);return ee(e)&&e.aborted}function _a(t){if(vn(t))throw t}function Ok(t){if(!vn(t))throw t}function $a(t,e){const i=N4(t);if(!Re(i)){if(!i.aborted)return qK(i,"abort",()=>e());e()}}function qF(t,e){const i=N4(t);if(!Re(i))return pr(i),qK(i,"abort",()=>e(yr()))}function ch(t,e){const i=N4(e);return Re(i)?t:new Promise((r,s)=>{let n=$a(e,()=>s(yr()));const o=()=>n=gs(n);t.then(o,o),t.then(r,s)})}function vn(t){return t?.name==="AbortError"}async function fb(t){try{return await t}catch(e){if(!vn(e))throw e;return}}function lp(){let t=null;const e=new Promise((i,r)=>{t={promise:void 0,resolve:i,reject:r}});return t.promise=e,t}async function Fa(t){if(!t)return;if(typeof t.forEach!="function"){const i=Object.keys(t),r=i.map(o=>t[o]),s=await Fa(r),n={};return i.map((o,a)=>n[o]=s[a]),n}const e=t;return new Promise(i=>{const r=[];let s=e.length;s===0&&i(r),e.forEach(n=>{const o={promise:n||Promise.resolve(n)};r.push(o),o.promise.then(a=>{o.value=a}).catch(a=>{o.error=a}).then(()=>{--s,s===0&&i(r)})})})}async function dye(t){return(await Fa(t)).filter(e=>!!e.value).map(e=>e.value)}function F4(t,e,i){const r=new AbortController;return $a(i,()=>r.abort()),new Promise((s,n)=>{let o=setTimeout(()=>{o=0,s(e)},t);$a(r,()=>{o&&(clearTimeout(o),n(yr()))})})}function _p(t){return t&&typeof t.then=="function"}function Rk(t){return _p(t)?t:Promise.resolve(t)}function HK(t,e=-1){let i,r,s,n,o=null;const a=(...l)=>{if(i){r=l,n&&n.reject(yr()),n=lp();const f=n.promise;if(o){const m=o;o=null,m.abort()}return f}if(s=n||lp(),n=null,e>0){const f=new AbortController;i=Rk(t(...l,f.signal));const m=i;F4(e).then(()=>{i===m&&(n?f.abort():o=f)})}else i=1,i=Rk(t(...l));const u=()=>{const f=r;r=s=i=o=null,f!=null&&a(...f)},c=i,d=s;return c.then(u,u),c.then(d.resolve,d.reject),d.promise};return a}function WK(){let t,e;const i=new Promise((s,n)=>{t=s,e=n}),r=s=>{t(s)};return r.resolve=s=>t(s),r.reject=s=>e(s),r.timeout=(s,n)=>I3.setTimeout(()=>r.reject(n),s),r.promise=i,r}async function TV(t){await Promise.resolve(),pr(t)}function Lat(t){return t}let pye=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},fye=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},kk=0;const S_={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},Lk=["prepare","preRender","render","postRender","update","finish"],Pk=[],A0=new lm;let mye=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};const wA={frameTasks:A0,willDispatch:!1,clearFrameTasks:yye,dispatch:YK,executeFrameTasks:gye};function Pw(t){const e=new fye(t);return Pk.push(e),wA.willDispatch||(wA.willDispatch=!0,bA(YK)),e}function Bb(t){const e=new pye(t);return A0.push(e),_A==null&&(kk=performance.now(),_A=requestAnimationFrame(JK)),new mye(e)}let _A=null;function yye(t=!1){A0.forAll(e=>{e.removed=!0}),t&&ZK()}function JK(){const t=performance.now();_A=null,_A=A0.length>0?requestAnimationFrame(JK):null,wA.executeFrameTasks(t)}function gye(t){const e=t-kk;kk=t;const i=1e3/60,r=Math.max(0,e-i);S_.time=t,S_.frameDuration=i-r;for(let s=0;s<Lk.length;s++){const n=performance.now(),o=Lk[s];A0.forAll(a=>{a.paused||a.removed||(s===0&&a.ticks++,a.phases[o]&&(S_.elapsedFrameTime=performance.now()-t,S_.deltaTime=a.ticks===0?0:e,a.phases[o]?.call(a,S_)))}),bye[s].record(performance.now()-n)}ZK(),wye.record(performance.now()-t)}const GE=new lm;function ZK(){A0.forAll(t=>{t.removed&&GE.push(t)}),A0.removeUnorderedMany(GE.data,GE.length),GE.clear()}function YK(){for(;Pk.length;){const t=Pk.shift();t.isActive&&t.callback()}wA.willDispatch=!1}function vye(t=1,e){const i=WK(),r=()=>{Rl(e)?i.reject(yr()):t===0?i():(--t,bA(()=>r()))};return r(),i.promise}const bye=Lk.map(t=>new xx(t)),wye=new xx("total");function _ye(t,e){for(const i of t.entries())if(e(i[0]))return!0;return!1}let xye=0;function Sx(){return++xye}let D4=class{constructor(e){this._notify=e,this._accessed=[],this._handles=[],this._observerObject=new Sye(this._notify),IV.register(this,this._observerObject)}destroy(){this._accessed.length=0,this._observerObject?.destroy(),this.clear(),IV.unregister(this)}onObservableAccessed(e){const i=this._accessed;i.includes(e)||i.push(e)}onTrackingEnd(){const e=this._handles,i=this._accessed,r=this._observerObject;for(let s=0;s<i.length;++s)e.push(i[s].observe(r));i.length=0}clear(){const e=this._handles;for(let i=0;i<e.length;++i)e[i].remove();e.length=0}},Sye=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=Eye}};const IV=new FinalizationRegistry(t=>{t.destroy()});function Eye(){}let mb=!1;const xA=[];function KK(t,e){let i=new D4(n),r=null,s=!1;function n(){if(!i||s)return;if(mb)return void eQ(n);const a=r;i.clear(),mb=!0,s=!0,r=ap(i,t),s=!1,mb=!1,e(r,a),tQ()}function o(){i&&(i.destroy(),i=null,r=null)}return s=!0,r=ap(i,t),s=!1,{remove:o}}function QK(t,e){let i=new D4(s),r=null;function s(){e(r,o)}function n(){i&&(i.destroy(),i=null),r=null}function o(){return i?(i.clear(),r=ap(i,t),r):null}return o(),{remove:n}}function XK(t){let e=new D4(r),i=!1;function r(){e&&!i&&(mb?eQ(r):(e.clear(),mb=!0,i=!0,ap(e,t),i=!1,mb=!1,tQ()))}function s(){e&&(e.destroy(),e=null)}return i=!0,ap(e,t),i=!1,{remove:s}}function eQ(t){xA.includes(t)||xA.unshift(t)}function tQ(){for(;xA.length;)xA.pop()()}var Ex;(function(t){t[t.Untracked=0]="Untracked",t[t.Tracked=1]="Tracked"})(Ex||(Ex={}));let vS=class{constructor(){this.uid=Sx(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,i,r,s,n){return this.pool.acquire(Ex.Untracked,e,i,r,s,n,BF)}static acquireTracked(e,i,r,s){return this.pool.acquire(Ex.Tracked,e,i,r,null,null,s)}notify(e,i){this.type===Ex.Untracked?this.callback.call(this.target,e,i,this.path,this.target):this.callback.call(null,e,i)}acquire(e,i,r,s,n,o,a){this.uid=Sx(),this.removed=!1,this.type=e,this.oldValue=i,this.callback=r,this.getValue=s,this.target=n,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=Sx(),this.removed=!0}};vS.pool=new zK(vS);const $I=new Zo,tp=new Set;let SA;function EA(t){tp.delete(t),tp.add(t),SA||(SA=Pw(Mye))}function Tye(t){if(t.removed)return;const e=t.oldValue,i=t.getValue();t.equals(e,i)||(t.oldValue=i,t.notify(i,e))}function Iye(t){for(const e of tp.values())e.target===t&&(e.removed=!0)}function Mye(){let t=10;for(;SA&&t--;){SA=null;const e=Aye(),i=$I.acquire();for(const r of e){const s=r.uid;Tye(r),s===r.uid&&r.removed&&i.push(r)}for(const r of tp)r.removed&&(i.push(r),tp.delete(r));for(const r of i)vS.pool.release(r);$I.release(i),$I.release(e),Nk.forEach(r=>r())}}function Aye(){const t=$I.acquire();t.length=tp.size;let e=0;for(const i of tp)t[e]=i,++e;return tp.clear(),t}const Nk=new Set;function Cye(t){return Nk.add(t),{remove(){Nk.delete(t)}}}function $ye(t,e,i){let r=AK(t,e,i,(s,n,o)=>{let a,l,u=QK(()=>S3(s,n),(c,d)=>{s.__accessor__.destroyed||a&&a.uid!==l?r.remove():(a||(a=vS.acquireUntracked(c,o,d,s,n),l=a.uid),EA(a))});return{remove:CK(()=>{u.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,EA(a)),a=null),r=u=null})}});return r}function Oye(t,e,i){const r=AK(t,e,i,(s,n,o)=>{let a=!1;return KK(()=>S3(s,n),(l,u)=>{s.__accessor__.destroyed?r.remove():a||(a=!0,BF(u,l)||o.call(s,l,u,n,s),a=!1)})});return r}function Rye(t,e,i,r=!1){return!t.__accessor__||t.__accessor__.destroyed?{remove(){}}:r?Oye(t,e,i):$ye(t,e,i)}function kye(t,e,i){let r,s,n=QK(t,(o,a)=>{r&&r.uid!==s?n.remove():(r||(r=vS.acquireTracked(o,e,a,i),s=r.uid),EA(r))});return{remove:CK(()=>{n.remove(),r&&(r.uid!==s||r.removed||(r.removed=!0,EA(r)),r=null),n=null})}}function Lye(t,e,i){let r=!1;return KK(t,(s,n)=>{r||(r=!0,i(n,s)||e(s,n),r=!1)})}function Pye(t,e,i=!1,r=Fme){return i?Lye(t,e,r):kye(t,e,r)}function MV(t){return _ye(tp,e=>e.oldValue===t)}function j4(t,e){for(const[i,r]of t)if(e(r,i))return!0;return!1}function iQ(t,e,i){const r=t.get(e);if(r!==void 0)return r;const s=i();return t.set(e,s),s}const yb=tt.getLogger("esri.core.accessorSupport.ensureTypes");function Nye(t){return t==null?t:new Date(t)}function Fye(t){return t==null?t:!!t}function M3(t){return t==null?t:t.toString()}function vl(t){return t==null?t:(t=parseFloat(t),isNaN(t)?0:t)}function U4(t){return t==null?t:Math.round(parseFloat(t))}function rQ(t){return t&&t.constructor&&t.constructor.__accessorMetadata__!==void 0}function TA(t,e){return e!=null&&t&&!(e instanceof t)}function sQ(t){return t&&"isCollection"in t}function AV(t){return t&&t.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function Dye(t,e){if(!e||!e.constructor||!sQ(e.constructor))return Fk(t,e)?e:new t(e);const i=AV(t.prototype.itemType),r=AV(e.constructor.prototype.itemType);return i?r?i===r?e:i.prototype.isPrototypeOf(r.prototype)?new t(e):(Fk(t,e),e):new t(e):e}function Fk(t,e){return!!rQ(e)&&(yb.error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+V4(t)+"'"),!0)}function Bn(t,e){return e==null?e:sQ(t)?Dye(t,e):TA(t,e)?Fk(t,e)?e:new t(e):e}function V4(t){return t&&t.prototype&&t.prototype.declaredClass||"unknown"}const jye=new WeakMap;function Uye(t){switch(t){case Number:return vl;case Si:return U4;case Boolean:return Fye;case String:return M3;case Date:return Nye;default:return iQ(jye,t,()=>Bn.bind(null,t))}}function ns(t,e){const i=Uye(t);return arguments.length===1?i:i(e)}function bS(t,e,i){return arguments.length===1?bS.bind(null,t):e&&(Array.isArray(e)?e.map(r=>t(r,i)):[t(e,i)])}function Vye(t,e){return arguments.length===1?bS(ns.bind(null,t)):bS(ns.bind(null,t),e)}function nQ(t,e,i){return e!==0&&Array.isArray(i)?i.map(r=>nQ(t,e-1,r)):t(i)}function IA(t,e,i){if(arguments.length===2)return IA.bind(null,t,e);if(!i)return i;let r=e,s=i=nQ(t,e,i);for(;r>0&&Array.isArray(s);)r--,s=s[0];if(s!==void 0)for(let n=0;n<r;n++)i=[i];return i}function Bye(t,e,i){return arguments.length===2?IA(ns.bind(null,t),e):IA(ns.bind(null,t),e,i)}function oQ(t){return!!Array.isArray(t)&&!t.some(e=>{const i=typeof e;return!(i==="string"||i==="number"||i==="function"&&t.length>1)})}function Dk(t,e){if(arguments.length===2)return Dk(t).call(null,e);const i=new Set,r=t.filter(a=>typeof a!="function"),s=t.filter(a=>typeof a=="function");for(const a of t)typeof a!="string"&&typeof a!="number"||i.add(a);let n=null,o=null;return(a,l)=>{if(a==null)return a;const u=typeof a,c=u==="string"||u==="number";return c&&(i.has(a)||s.some(d=>u==="string"&&d===String||u==="number"&&d===Number))||u==="object"&&s.some(d=>!TA(a,d))?a:(c&&r.length?(n||(n=r.map(d=>typeof d=="string"?`'${d}'`:`${d}`).join(", ")),yb.error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${n}`)):typeof a=="object"&&s.length?(o||(o=s.map(d=>V4(d)).join(", ")),yb.error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):yb.error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function Uh(t,e){if(arguments.length===2)return Uh(t).call(null,e);const i={},r=[],s=[];for(const l in t.typeMap){const u=t.typeMap[l];i[l]=ns(u),r.push(V4(u)),s.push(l)}const n=()=>`'${r.join("', '")}'`,o=()=>`'${s.join("', '")}'`,a=typeof t.key=="string"?l=>l[t.key]:t.key;return l=>{if(t.base&&!TA(t.base,l)||l==null)return l;const u=a(l)||t.defaultKeyValue,c=i[u];if(!c)return yb.error("Accessor#set",`Invalid property value, value needs to be one of ${n()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!TA(t.typeMap[u],l))return l;if(typeof t.key=="string"&&!rQ(l)){const d={};for(const f in l)f!==t.key&&(d[f]=l[f]);return c(d)}return c(l)}}let Si=class{};const E_={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function zye(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function aQ(t){switch(t.type){case"native":return ns(t.value);case"array":return bS(aQ(t.value));case"one-of":return Gye(t);default:return null}}function Gye(t){let e=null;return(i,r)=>Uk(i,t)?i:(e==null&&(e=jk(t)),yb.error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),r&&(r.valid=!1),null)}function jk(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Si:return"integer";case Date:return"date";default:return V4(t.value)}case"array":return`array of ${jk(t.value)}`;case"one-of":{const e=t.values.map(i=>jk(i));return`one of ${e.slice(0,e.length-1)} or ${e[e.length-1]}`}}return"unknown"}function Uk(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case Si:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string"}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(i=>!Uk(i,e.value));case"one-of":return e.values.some(i=>Uk(t,i))}}function p(t={}){return(e,i)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(e,i),s=k4(e,i);r&&(r.get||r.set?(s.get=r.get||s.get,s.set=r.set||s.set):"value"in r&&("value"in t&&tt.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${e.constructor.name}" already defined in the metadata`,t),s.value=t.value=r.value)),t.readOnly!=null&&(s.readOnly=t.readOnly);const n=t.aliasOf;if(n){const l=typeof n=="string"?n:n.source,u=typeof n=="string"?null:n.overridable===!0;let c;s.dependsOn=[l],s.get=function(){let d=yA(this,l);if(typeof d=="function"){c||(c=l.split(".").slice(0,-1).join("."));const f=yA(this,c);f&&(d=d.bind(f))}return d},s.readOnly||(s.set=u?function(d){this._override(i,d)}:function(d){vA(this,l,d)})}const o=t.type,a=t.types;s.cast||(o?s.cast=qye(o):a&&(Array.isArray(a)?s.cast=bS(Uh(a[0])):s.cast=Uh(a))),zme(s,t),t.range&&(s.cast=uQ(s.cast,t.range))}}function lQ(t,e,i){const r=k4(t,i);r.json||(r.json={});let s=r.json;return e!==void 0&&(s.origins||(s.origins={}),s.origins[e]||(s.origins[e]={}),s=s.origins[e]),s}function qye(t){let e=0,i=t;if(zye(t))return aQ(t);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],e++;const r=i;if(oQ(r))return e===0?Dk(r):IA(Dk(r),e);if(e===1)return Vye(r);if(e>1)return Bye(r,e);const s=t;return s.from?s.from:ns(s)}function uQ(t,e){return i=>{let r=+t(i);return e.step!=null&&(r=Math.round(r/e.step)*e.step),e.min!=null&&(r=Math.max(e.min,r)),e.max!=null&&(r=Math.min(e.max,r)),r}}function Hye(t){if(t.json&&t.json.origins){const e=t.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(e[r]){const s=e[r];i[r].forEach(n=>{e[n]=s}),delete e[r]}}}let kl=class Vk extends VK{constructor(e,i,r){if(super(e,i,r),!(this instanceof Vk))return new Vk(e,i,r)}};kl.prototype.type="warning";function cQ(t){return!!t&&t.prototype&&t.prototype.declaredClass&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}const Bk=tt.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function CV(t,e,i){t&&(!i&&!e.read||e.read?.reader||e.read?.enabled===!1||Zye(t)&&Io("read.reader",zm(t),e))}function zm(t){const e=t.ndimArray??0;if(e>1)return Jye(t);if(e===1)return $V(t);if("type"in t&&dQ(t.type)){const i=t.type.prototype?.itemType?.Type,r=$V(typeof i=="function"?{type:i}:{types:i});return(s,n,o)=>{const a=r(s,n,o);return a&&new t.type(a)}}return HF(t)}function HF(t){return"type"in t?Wye(t.type):Yye(t.types)}function Wye(t){return t.prototype.read?(e,i,r)=>{if(e==null)return e;const s=typeof e;if(s!=="object")return void Bk.error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${s}'`);const n=new t;return n.read(e,r),n}:t.fromJSON}function hQ(t,e,i,r){return r!==0&&Array.isArray(e)?e.map(s=>hQ(t,s,i,r-1)):t(e,void 0,i)}function Jye(t){const e=HF(t),i=hQ.bind(null,e),r=t.ndimArray??0;return(s,n,o)=>{if(s==null)return s;s=i(s,o,r);let a=r,l=s;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let u=0;u<a;u++)s=[s];return s}}function $V(t){const e=HF(t);return(i,r,s)=>{if(i==null)return i;if(Array.isArray(i)){const o=[];for(const a of i){const l=e(a,void 0,s);l!==void 0&&o.push(l)}return o}const n=e(i,void 0,s);return n!==void 0?[n]:void 0}}function dQ(t){if(!cQ(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?WF(e.Type):pQ(e.Type))}function Zye(t){return"types"in t?pQ(t.types):WF(t.type)}function WF(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||dQ(t))}function pQ(t){for(const e in t.typeMap)if(!WF(t.typeMap[e]))return!1;return!0}function Yye(t){let e=null;const i=t.errorContext??"type";return(r,s,n)=>{if(r==null)return r;const o=typeof r;if(o!=="object")return void Bk.error(`Expected JSON value of type 'object' to deserialize, but got '${o}'`);e||(e=Kye(t));const a=t.key;if(typeof a!="string")return;const l=r[a],u=l?e[l]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!u){const d=`Type '${l||"unknown"}' is not supported`;return n&&n.messages&&r&&n.messages.push(new kl(`${i}:unsupported`,d,{definition:r,context:n})),void Bk.error(d)}const c=new u;return c.read(r,n),c}}function Kye(t){const e={};for(const i in t.typeMap){const r=t.typeMap[i],s=E3(r.prototype);if(typeof t.key=="function")continue;const n=s[t.key];if(!n)continue;n.json?.type&&Array.isArray(n.json.type)&&n.json.type.length===1&&typeof n.json.type[0]=="string"&&(e[n.json.type[0]]=r);const o=n.json?.write;if(!o||!o.writer){e[i]=r;continue}const a=o.target,l=typeof a=="string"?a:t.key,u={};o.writer(i,u,l),u[l]&&(e[u[l]]=r)}return e}function Qye(t){if(t.json||(t.json={}),RV(t.json),kV(t.json),OV(t.json),t.json.origins)for(const e in t.json.origins)RV(t.json.origins[e]),kV(t.json.origins[e]),OV(t.json.origins[e]);return!0}function OV(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function RV(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function kV(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function LV(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const i=t?.ndimArray??0;t&&(i===1||"type"in t&&cQ(t.type))?e.write.writer=tge:i>1?e.write.writer=ige(i):e.types?Array.isArray(e.types)?e.write.writer=ege(e.types[0]):e.write.writer=Xye(e.types):e.write.writer=wS}function Xye(t){return(e,i,r,s)=>e?fQ(e,t,s)?wS(e,i,r,s):void 0:wS(e,i,r,s)}function fQ(t,e,i){for(const r in e.typeMap)if(t instanceof e.typeMap[r])return!0;if(i?.messages){const r=e.errorContext??"type",s=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new Ce(`${r}:unsupported`,s,{definition:t,context:i})),tt.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(s)}return!1}function ege(t){return(e,i,r,s)=>!e||!Array.isArray(e)?wS(e,i,r,s):wS(e.filter(n=>fQ(n,t,s)),i,r,s)}function wS(t,e,i,r){Io(i,MA(t,r),e)}function MA(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?AA(t):t}function AA(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function tge(t,e,i,r){let s;t===null?s=null:t&&typeof t.map=="function"?(s=t.map(n=>MA(n,r)),typeof s.toArray=="function"&&(s=s.toArray())):s=[MA(t,r)],Io(i,s,e)}function mQ(t,e,i){return i!==0&&Array.isArray(t)?t.map(r=>mQ(r,e,i-1)):MA(t,e)}function ige(t){return(e,i,r,s)=>{let n;if(e===null)n=null;else{n=mQ(e,s,t);let o=t,a=n;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)n=[n]}Io(r,n,i)}}function zk(t,e){return JF(t,"read",e)}function yQ(t,e){return JF(t,"write",e)}function JF(t,e,i){let r=t&&t.json;if(t&&t.json&&t.json.origins&&i){const s=i.origin&&t.json.origins[i.origin];s&&(e==="any"||e in s)&&(r=s)}return r}function rge(t){const e=sge(t);if(t.json.origins)for(const i in t.json.origins){const r=t.json.origins[i],s=r.types?nge(r):e;CV(s,r,!1),r.types&&!r.write&&t.json.write&&t.json.write.enabled&&(r.write={...t.json.write}),LV(s,r)}CV(e,t.json,!0),LV(e,t.json)}function sge(t){return t.json.types?Gk(t.json):t.type?gQ(t):Gk(t)}function nge(t){return t.type?gQ(t):Gk(t)}function gQ(t){if(!t.type)return;let e=0,i=t.type;for(;Array.isArray(i)&&!oQ(i);)i=i[0],e++;return{type:i,ndimArray:e}}function Gk(t){if(!t.types)return;let e=0,i=t.types;for(;Array.isArray(i);)i=i[0],e++;return{types:i,ndimArray:e}}function oge(t){Qye(t)&&(Hye(t),rge(t))}const Y$=new Set,K$=new Set;function ce(t){return e=>{e.prototype.declaredClass=t,lge(e);const i=[],r=[];let s=e.prototype;for(;s;)s.hasOwnProperty("initialize")&&!Y$.has(s.initialize)&&(Y$.add(s.initialize),i.push(s.initialize)),s.hasOwnProperty("destroy")&&!K$.has(s.destroy)&&(K$.add(s.destroy),r.push(s.destroy)),s=Object.getPrototypeOf(s);Y$.clear(),K$.clear();class n extends e{constructor(...a){if(super(...a),this.constructor===n&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=i.length-1;l>=0;l--)i[l].call(this)}}),r.length){let l=!1;const u=this[vK];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){l=!0,u.call(this);for(let c=0;c<r.length;c++)r[c].call(this)}}})}this.postscript(...a)}}}return n.__accessorMetadata__=E3(e.prototype),n.prototype.declaredClass=t,n}}function age(t,e){return e.get==null?function(){const i=this.__accessor__.properties.get(t);if(i===void 0)return;pi(i.observerObject);const r=this.__accessor__.store;return r.has(t)?r.get(t):i.metadata.value}:function(){const i=this.__accessor__.properties.get(t);if(i!==void 0)return i.getComputed()}}function lge(t){const e=t.prototype,i=E3(e),r={};for(const s of Object.getOwnPropertyNames(i)){const n=i[s];oge(n),r[s]={enumerable:!0,configurable:!0,get:age(s,n),set(o){const a=this.__accessor__;if(a!==void 0){if(!Object.isFrozen(this)){if(a.initialized&&n.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${s}' of ${this.declaredClass}`);if(a.lifecycle===Jd.CONSTRUCTED&&n.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${s}' of ${this.declaredClass}`);a.set(s,o)}}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(t.prototype,r)}var vQ,bQ;function uge(t){if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return t.constructor?.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const Ry=Symbol("Accessor-Handles"),qk=Symbol("Accessor-Initialized");let Pt=class wQ{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:s}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const n=this;class o extends n{constructor(...l){super(...l),this.inherited=null,s&&s.apply(this,l)}}E3(o.prototype);for(const a in e){const l=e[a];o.prototype[a]=typeof l=="function"?function(...u){const c=this.inherited;let d;this.inherited=function(...f){if(n.prototype[a])return n.prototype[a].apply(this,f)};try{d=l.apply(this,u)}catch(f){throw this.inherited=c,f}return this.inherited=c,d}:e[a]}for(const a in i){const l=uge(i[a]);p(l)(o.prototype,a)}return ce(r)(o)}constructor(...e){if(this[vQ]=null,this[bQ]=!1,this.constructor===wQ)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new tye(this)}),e.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,e))}postscript(e){const i=this.__accessor__,r=i.ctorArgs||e;i.initialize(),r&&(this.set(r),i.ctorArgs=null),i.constructed(),this.initialize(),this[qk]=!0}initialize(){}[vK](){this[Ry]=Jr(this[Ry])}destroy(){this.destroyed||(Iye(this),this.__accessor__.destroy())}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[qk]}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(e){this.get(e)}get(e){return yA(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,i){return vA(this,e,i),this}watch(e,i,r){return Rye(this,e,i,r)}own(e){this.addHandles(e)}addHandles(e,i){let r=this[Ry];Re(r)&&(r=this[Ry]=new Ao),r.add(e,i)}removeHandles(e){const i=this[Ry];Re(i)||i.remove(e)}hasHandles(e){const i=this[Ry];return!!ee(i)&&i.has(e)}_override(e,i){i===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,i){i==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,i){return this.__accessor__.internalSet(e,i),this}};vQ=Ry,bQ=qk;let OI=class _Q{constructor(){this._emitter=new _Q.EventEmitter(this)}emit(e,i){return this._emitter.emit(e,i)}on(e,i){return this._emitter.on(e,i)}once(e,i){return this._emitter.once(e,i)}hasEventListener(e){return this._emitter.hasEventListener(e)}};(function(t){class e{constructor(s=null){this._target=s,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null}emit(s,n){const o=this._listenersMap&&this._listenersMap.get(s);if(!o)return!1;const a=this._target||this;return[...o].forEach(l=>{l.call(a,n)}),o.length>0}on(s,n){if(Array.isArray(s)){const a=s.map(l=>this.on(l,n));return O4(a)}if(s.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const o=this._listenersMap.get(s)||[];return o.push(n),this._listenersMap.set(s,o),{remove:()=>{const a=this._listenersMap&&this._listenersMap.get(s)||[],l=a.indexOf(n);l>=0&&a.splice(l,1)}}}once(s,n){const o=this.on(s,a=>{o.remove(),n.call(null,a)});return o}hasEventListener(s){const n=this._listenersMap&&this._listenersMap.get(s);return n!=null&&n.length>0}}t.EventEmitter=e,t.EventedMixin=r=>{let s=class extends r{constructor(){super(...arguments),this._emitter=new e}destroy(){this._emitter.clear()}emit(n,o){return this._emitter.emit(n,o)}on(n,o){return this._emitter.on(n,o)}once(n,o){return this._emitter.once(n,o)}hasEventListener(n){return this._emitter.hasEventListener(n)}};return s=h([ce("esri.core.Evented")],s),s};let i=class extends Pt{constructor(){super(...arguments),this._emitter=new OI.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,s){return this._emitter.emit(r,s)}on(r,s){return this._emitter.on(r,s)}once(r,s){return this._emitter.once(r,s)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=h([ce("esri.core.Evented")],i),t.EventedAccessor=i})(OI||(OI={}));const xp=OI;var Ki;(function(t){t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE",t[t.MOVE=4]="MOVE"})(Ki||(Ki={}));function ZF(t){return(e,i)=>{e[i]=t}}let YF=class extends PK{notify(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onInvalidated(),r.onCommitted()}}};var Gd;let cge=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}};const Vl=new Bm(cge,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1}),hge=()=>{};function Q$(t){return t?t instanceof Ig?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function X$(t){if(t&&t.length)return t[0]}function dge(t,e,i,r){const s=Math.min(t.length-i,e.length-r);let n=0;for(;n<s&&t[i+n]===e[r+n];)n++;return n}function xQ(t,e,i,r){e&&e.forEach((s,n,o)=>{t.push(s),xQ(t,i.call(r,s,n,o),i,r)})}const Fp=new Set,Dp=new Set,jp=new Set,eO=new Map;let pge=0,Ig=Gd=class extends xp.EventedAccessor{static isCollection(t){return t!=null&&t instanceof Gd}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new YF,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:pge++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof Gd?{items:t}:t:{}}destroy(){this.removeAll()}*[Symbol.iterator](){yield*this.items}get items(){return pi(this._observable),this._items}set items(t){this._emitBeforeChanges(Ki.ADD)||(this._splice(0,this.length,Q$(t)),this._emitAfterChanges(Ki.ADD))}hasEventListener(t){return t==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(t)}on(t,e){if(t==="change"){const i=this._chgListeners,r={removed:!1,callback:e};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=hge,r.removed=!0,i.splice(i.indexOf(r),1)}}}return this._emitter.on(t,e)}once(t,e){const i=this.on(t,e);return{remove(){i.remove()}}}add(t,e){if(pi(this._observable),this._emitBeforeChanges(Ki.ADD))return this;const i=this.getNextIndex(e??null);return this._splice(i,0,[t]),this._emitAfterChanges(Ki.ADD),this}addMany(t,e=this._items.length){if(pi(this._observable),!t||!t.length)return this;if(this._emitBeforeChanges(Ki.ADD))return this;const i=this.getNextIndex(e);return this._splice(i,0,Q$(t)),this._emitAfterChanges(Ki.ADD),this}at(t){if(pi(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(pi(this._observable),!this.length||this._emitBeforeChanges(Ki.REMOVE))return[];const t=this._splice(0,this.length)||[];return this._emitAfterChanges(Ki.REMOVE),t}clone(){return pi(this._observable),this._createNewInstance({items:this._items.map(Le)})}concat(...t){pi(this._observable);const e=t.map(Q$);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(pi(this._observable),!this.length||this._emitBeforeChanges(Ki.REMOVE))return;const i=this._splice(0,this.length),r=i.length;for(let s=0;s<r;s++)t.call(e,i[s],s,i);this._emitAfterChanges(Ki.REMOVE)}every(t,e){return pi(this._observable),this._items.every(t,e)}filter(t,e){let i;return pi(this._observable),i=arguments.length===2?this._items.filter(t,e):this._items.filter(t),this._createNewInstance({items:i})}find(t,e){return pi(this._observable),this._items.find(t,e)}findIndex(t,e){return pi(this._observable),this._items.findIndex(t,e)}flatten(t,e){pi(this._observable);const i=[];return xQ(i,this,t,e),new Gd(i)}forEach(t,e){return pi(this._observable),this._items.forEach(t,e)}getItemAt(t){return pi(this._observable),this._items[t]}getNextIndex(t){pi(this._observable);const e=this.length;return(t=t??e)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return pi(this._observable),this._items.includes(t,e)}indexOf(t,e=0){return pi(this._observable),this._items.indexOf(t,e)}join(t=","){return pi(this._observable),this._items.join(t)}lastIndexOf(t,e=this.length-1){return pi(this._observable),this._items.lastIndexOf(t,e)}map(t,e){pi(this._observable);const i=this._items.map(t,e);return new Gd({items:i})}reorder(t,e=this.length-1){pi(this._observable);const i=this.indexOf(t);if(i!==-1){if(e<0?e=0:e>=this.length&&(e=this.length-1),i!==e){if(this._emitBeforeChanges(Ki.MOVE))return t;this._splice(i,1),this._splice(e,0,[t]),this._emitAfterChanges(Ki.MOVE)}return t}}pop(){if(pi(this._observable),!this.length||this._emitBeforeChanges(Ki.REMOVE))return;const t=X$(this._splice(this.length-1,1));return this._emitAfterChanges(Ki.REMOVE),t}push(...t){return pi(this._observable),this._emitBeforeChanges(Ki.ADD)||(this._splice(this.length,0,t),this._emitAfterChanges(Ki.ADD)),this.length}reduce(t,e){pi(this._observable);const i=this._items;return arguments.length===2?i.reduce(t,e):i.reduce(t)}reduceRight(t,e){pi(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(t,e):i.reduceRight(t)}remove(t){return pi(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(pi(this._observable),t<0||t>=this.length||this._emitBeforeChanges(Ki.REMOVE))return;const e=X$(this._splice(t,1));return this._emitAfterChanges(Ki.REMOVE),e}removeMany(t){if(pi(this._observable),!t||!t.length||this._emitBeforeChanges(Ki.REMOVE))return[];const e=t instanceof Gd?t.toArray():t,i=this._items,r=[],s=e.length;for(let n=0;n<s;n++){const o=e[n],a=i.indexOf(o);if(a>-1){const l=1+dge(e,i,n+1,a+1),u=this._splice(a,l);u&&u.length>0&&r.push.apply(r,u),n+=l-1}}return this._emitAfterChanges(Ki.REMOVE),r}reverse(){if(pi(this._observable),this._emitBeforeChanges(Ki.MOVE))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(Ki.MOVE),this}shift(){if(pi(this._observable),!this.length||this._emitBeforeChanges(Ki.REMOVE))return;const t=X$(this._splice(0,1));return this._emitAfterChanges(Ki.REMOVE),t}slice(t=0,e=this.length){return pi(this._observable),this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return pi(this._observable),this._items.some(t,e)}sort(t){if(pi(this._observable),!this.length||this._emitBeforeChanges(Ki.MOVE))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,e),this._emitAfterChanges(Ki.MOVE),this}splice(t,e,...i){pi(this._observable);const r=(e?Ki.REMOVE:0)|(i.length?Ki.ADD:0);if(this._emitBeforeChanges(r))return[];const s=this._splice(t,e,i)||[];return this._emitAfterChanges(r),s}toArray(){return pi(this._observable),this._items.slice()}toJSON(){return pi(this._observable),this.toArray()}toLocaleString(){return pi(this._observable),this._items.toLocaleString()}toString(){return pi(this._observable),this._items.toString()}unshift(...t){return pi(this._observable),!t.length||this._emitBeforeChanges(Ki.ADD)||(this._splice(0,0,t),this._emitAfterChanges(Ki.ADD)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,i){const r=this._items,s=this.itemType;let n,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=Pw(()=>this._dispatchChange())),e){if(o=r.splice(t,e),this.hasEventListener("before-remove")){const a=Vl.acquire();a.target=this,a.cancellable=!0;for(let l=0,u=o.length;l<u;l++)n=o[l],a.reset(n),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(l,1),r.splice(t,0,n),t+=1,l-=1,u-=1);Vl.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=Vl.acquire();a.target=this,a.cancellable=!1;const l=o.length;for(let u=0;u<l;u++)a.reset(o[u]),this.emit("after-remove",a);Vl.release(a)}}if(i&&i.length){if(s){const c=[];for(const d of i){const f=s.ensureType(d);f==null&&d!=null||c.push(f)}i=c}const a=this.hasEventListener("before-add"),l=this.hasEventListener("after-add"),u=t===this.length;if(a||l){const c=Vl.acquire();c.target=this,c.cancellable=!0;const d=Vl.acquire();d.target=this,d.cancellable=!1;for(const f of i)a?(c.reset(f),this.emit("before-add",c),c.defaultPrevented||(u?r.push(f):r.splice(t++,0,f),this._set("length",r.length),l&&(d.reset(f),this.emit("after-add",d)))):(u?r.push(f):r.splice(t++,0,f),this._set("length",r.length),d.reset(f),this.emit("after-add",d));Vl.release(d),Vl.release(c)}else{if(u)for(const c of i)r.push(c);else r.splice(t,0,...i);this._set("length",r.length)}}return(i&&i.length||o&&o.length)&&this._notifyChangeEvent(i,o),o}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const i=Vl.acquire();i.target=this,i.cancellable=!0,i.type=t,this.emit("before-changes",i),e=i.defaultPrevented,Vl.release(i)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=Vl.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),Vl.release(e)}this._observable.notify()}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const i=e.changes;Fp.clear(),Dp.clear(),jp.clear();for(const{added:l,removed:u}of i){if(l)if(jp.size===0&&Dp.size===0)for(const c of l)Fp.add(c);else for(const c of l)Dp.has(c)?(jp.add(c),Dp.delete(c)):jp.has(c)||Fp.add(c);if(u)if(jp.size===0&&Fp.size===0)for(const c of u)Dp.add(c);else for(const c of u)Fp.has(c)?Fp.delete(c):(jp.delete(c),Dp.add(c))}const r=Zo.acquire();Fp.forEach(l=>{r.push(l)});const s=Zo.acquire();Dp.forEach(l=>{s.push(l)});const n=this._items,o=e.items,a=Zo.acquire();if(jp.forEach(l=>{o.indexOf(l)!==n.indexOf(l)&&a.push(l)}),e.listeners&&(r.length||s.length||a.length)){const l={target:this,added:r,removed:s,moved:a},u=e.listeners.length;for(let c=0;c<u;c++){const d=e.listeners[c];d.removed||d.callback.call(this,l)}}Zo.release(r),Zo.release(s),Zo.release(a)}Fp.clear(),Dp.clear(),jp.clear()}};Ig.ofType=t=>{if(!t)return Gd;if(eO.has(t))return eO.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const r in t.typeMap){const s=t.typeMap[r].prototype.declaredClass;e?e+=` | ${s}`:e=s}let i=class extends Gd{};return h([ZF({Type:t,ensureType:typeof t=="function"?ns(t):Uh(t)})],i.prototype,"itemType",void 0),i=h([ce(`esri.core.Collection<${e}>`)],i),eO.set(t,i),i},h([p()],Ig.prototype,"length",void 0),h([p()],Ig.prototype,"items",null),Ig=Gd=h([ce("esri.core.Collection")],Ig);const Nt=Ig;function C0(t,e,i=Nt){return e||(e=new i),e===t||(e.removeAll(),fge(t)?e.addMany(t):t&&e.add(t)),e}function SQ(t){return t}function fge(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}let mge=class EQ{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new EQ;return this._values.forEach((r,s)=>{e&&e.has(s)||i.set(s,Le(r.value),r.origin)}),i}get(e,i){i=this._normalizeOrigin(i);const r=this._values.get(e);return i==null||r?.origin===i?r?.value:void 0}originOf(e){return this._values.get(e)?.origin??St.USER}keys(e){e=this._normalizeOrigin(e);const i=[...this._values.keys()];return e==null?i:i.filter(r=>this._values.get(r)?.origin===e)}set(e,i,r){if((r=this._normalizeOrigin(r))===St.DEFAULTS){const s=this._values.get(e);if(s&&s.origin!=null&&s.origin>r)return}this._values.set(e,new yge(i,r))}delete(e,i){(i=this._normalizeOrigin(i))!=null&&this._values.get(e)?.origin!==i||this._values.delete(e)}has(e,i){return(i=this._normalizeOrigin(i))!=null?this._values.get(e)?.origin===i:this._values.has(e)}forEach(e){this._values.forEach(({value:i},r)=>e(i,r))}_normalizeOrigin(e){if(e!=null)return e===St.DEFAULTS?e:St.USER}},yge=class{constructor(e,i){this.value=e,this.origin=i}};function TQ(t,e,i){e.keys().forEach(s=>{i.set(s,e.get(s),St.DEFAULTS)});const r=t.metadatas;Object.keys(r).forEach(s=>{t.internalGet(s)&&i.set(s,t.internalGet(s),St.DEFAULTS)})}function gge(t,e,i){if(!t||!t.read||t.read.enabled===!1||!t.read.source)return!1;const r=t.read.source;if(typeof r=="string"){if(r===e||r.includes(".")&&r.indexOf(e)===0&&mV(r,i))return!0}else for(const s of r)if(s===e||s.includes(".")&&s.indexOf(e)===0&&mV(s,i))return!0;return!1}function vge(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function bge(t,e,i,r,s){let n=zk(e[i],s);vge(n)&&(t[i]=!0);for(const o of Object.getOwnPropertyNames(e))n=zk(e[o],s),gge(n,i,r)&&(t[o]=!0)}function wge(t,e,i,r){const s=i.metadatas,n=JF(s[e],"any",r),o=n&&n.default;if(o===void 0)return;const a=typeof o=="function"?o.call(t,e,r):o;a!==void 0&&i.set(e,a)}const IQ={origin:"service"};function MQ(t,e,i=IQ){if(!e||typeof e!="object")return;const r=Ws(t),s=r.metadatas,n={};for(const o of Object.getOwnPropertyNames(e))bge(n,s,o,e,i);r.setDefaultOrigin(i.origin);for(const o of Object.getOwnPropertyNames(n)){const a=zk(s[o],i).read,l=a&&a.source;let u;u=l&&typeof l=="string"?S3(e,l):e[o],a&&a.reader&&(u=a.reader.call(t,u,e,i)),u!==void 0&&r.set(o,u)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(s))n[o]||wge(t,o,r,i)}r.setDefaultOrigin("user")}function _ge(t,e,i,r=IQ){const s={...r,messages:[]};i(s),s.messages?.forEach(n=>{n.type!=="warning"||t.loaded?r&&r.messages&&r.messages.push(n):t.loadWarnings.push(n)})}function xge(t,e,i,r,s){const n={};return e.write?.writer?.call(t,r,n,i,s),n}function AQ(t,e,i,r,s,n){if(!r||!r.write)return!1;const o=t.get(i);if(!s&&r.write.overridePolicy){const a=r.write.overridePolicy.call(t,o,i,n);a!==void 0&&(s=a)}if(s||(s=r.write),!s||s.enabled===!1)return!1;if((o===null&&!s.allowNull&&!s.writerEnsuresNonNull||o===void 0)&&s.isRequired){const a=new Ce("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return a&&n&&n.messages?n.messages.push(a):a&&!n&&tt.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!s.allowNull&&!s.writerEnsuresNonNull||(!e.store.multipleOriginsSupported||e.store.originOf(i)===St.DEFAULTS)&&Sge(t,i,n,r,o)||!s.ignoreOrigin&&n&&n.origin&&e.store.multipleOriginsSupported&&e.store.originOf(i)<Ea(n.origin))}function Sge(t,e,i,r,s){const n=r.default;if(n===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(s);if(typeof n=="function"){if(Array.isArray(s)){const o=n.call(t,e,i);return R4(o,s)}return!1}return n===s}function CQ(t,e,i,r){const s=Ws(t),n=s.metadatas,o=yQ(n[e],r);return!!o&&AQ(t,s,e,o,i,r)}function $Q(t,e,i){if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return II(e,t.toJSON(i));const r=Ws(t),s=r.metadatas;for(const n in s){const o=yQ(s[n],i);if(!AQ(t,r,n,o,void 0,i))continue;const a=t.get(n),l=xge(t,o,o.write&&typeof o.write.target=="string"?o.write.target:n,a,i);Object.keys(l).length>0&&(e=II(e,l),i?.resources?.pendingOperations?.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>II(e,l,()=>"replace-arrays"))),i&&i.writtenProperties&&i.writtenProperties.push({target:t,propName:n,oldOrigin:Zme(r.store.originOf(n)),newOrigin:i.origin}))}return e}const A3=t=>{let e=class extends t{constructor(...i){super(...i);const r=Ws(this),s=r.store,n=new mge;r.store=n,TQ(r,s,n)}read(i,r){MQ(this,i,r)}write(i={},r){return $Q(this,i,r)}toJSON(i){return this.write({},i)}static fromJSON(i,r){return Ege.call(this,i,r)}};return e=h([ce("esri.core.JSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function Ege(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(t,e),i}let Je=class extends A3(Pt){};Je=h([ce("esri.core.JSONSupport")],Je);var Nf;(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(Nf||(Nf={}));let Tge=class{constructor(e){this.instance=e,this._resolver=lp(),this._status=Nf.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=Nf.RESOLVED,this._cleanUp()},()=>{this._status=Nf.REJECTED,this._cleanUp()})}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===Nf.RESOLVED}isRejected(){return this._status===Nf.REJECTED}isFulfilled(){return this._status!==Nf.PENDING}abort(){this._resolver.reject(yr())}when(e,i){return this._resolver.promise.then(e,i)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;const e=lp(),i=[...this._resolvingPromises,e.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve(this.instance)},s=>{this.isFulfilled()||this._allPromise!==r||vn(s)||this._resolver.reject(s)}),e.resolve()}};const C3=t=>{let e=class extends t{constructor(...i){super(...i),this._promiseProps=new Tge(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,r){return new Promise((s,n)=>{this._promiseProps.when(s,n)}).then(i,r)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return e=h([ce("esri.core.Promise")],e),e};let CA=class extends C3(Pt){};CA=h([ce("esri.core.Promise")],CA);const Ige="not-loaded",Mge="loading",Age="failed",PV="loaded",OQ=t=>{let e=class extends t{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(r=>{const s=this.load.bind(this);this.load=n=>{const o=new Promise((a,l)=>{const u=qF(n,l);this.destroyed&&l(new Ce("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(a,l).finally(()=>{u&&u.remove()})});if(this.loadStatus===Ige){this._set("loadStatus",Mge);const a=this._loadController=new AbortController;s({signal:a.signal}),$a(a.signal,()=>{this._promiseProps.abort()})}return r(),o}})),this.when(()=>{this._set("loadStatus",PV),this._loadController=null},r=>{this._set("loadStatus",Age),this._set("loadError",r),this._loadController=null})}get loaded(){return this.loadStatus===PV}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){return this.isFulfilled()||(this._set("loadError",new Ce("load:cancelled","Cancelled")),this._loadController?.abort()),this}};return h([p({readOnly:!0})],e.prototype,"loaded",null),h([p({readOnly:!0})],e.prototype,"loadError",void 0),h([p({clonable:!1})],e.prototype,"loadStatus",void 0),h([p({type:[kl],readOnly:!0})],e.prototype,"loadWarnings",null),e=h([ce("esri.core.Loadable")],e),e};let d2=class extends OQ(CA){};d2=h([ce("esri.core.Loadable")],d2),function(t){function e(i){return!(!i||!i.load)}t.LoadableMixin=OQ,t.isLoadable=e}(d2||(d2={}));const Ll=d2;function Cge(t,e,i){return Fa(t.map((r,s)=>e.apply(i,[r,s])))}async function $ge(t,e,i){return(await Fa(t.map((r,s)=>e.apply(i,[r,s])))).map(r=>r.value)}function KF(t){return{ok:!0,value:t}}function QF(t){return{ok:!1,error:t}}function Oge(t){return ee(t)&&t.ok===!0?t.value:null}function Rge(t){return ee(t)&&t.ok===!1?t.error:null}async function B4(t){if(Re(t))return{ok:!1,error:new Error("no promise provided")};try{return KF(await t)}catch(e){return QF(e)}}async function Zat(t){try{return KF(await t)}catch(e){return _a(e),QF(e)}}function RQ(t,e){return new af(t,e)}let af=class extends Pt{get value(){return Oge(this._result)}get error(){return Rge(this._result)}get finished(){return ee(this._result)}constructor(e,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=yS(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=e(r),this.promise.then(s=>{this._result=KF(s),this._cleanup()},s=>{this._result=QF(s),this._cleanup()}),this._abortHandle=$a(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=gs(this._abortHandle),this._abortController=null}};h([p()],af.prototype,"value",null),h([p()],af.prototype,"error",null),h([p()],af.prototype,"finished",null),h([p()],af.prototype,"promise",void 0),h([p()],af.prototype,"_result",void 0),af=h([ce("esri.core.asyncUtils.ReactiveTask")],af);async function z4(t,e){return await t.load(),kge(t,e)}async function kge(t,e){const i=[],r=(...n)=>{for(const o of n)Re(o)||(Array.isArray(o)?r(...o):Nt.isCollection(o)?o.forEach(a=>r(a)):Ll.isLoadable(o)&&i.push(o))};e(r);let s=null;if(await $ge(i,async n=>{const o=await B4(Lge(n)?n.loadAll():n.load());o.ok!==!1||s||(s=o)}),s)throw s.error;return t}function Lge(t){return"loadAll"in t&&typeof t.loadAll=="function"}const Pge=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,Nge={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function NV(t){const e=t?.match(Pge);if(!e)return null;const[,i,r,s]=e;if(!i)return null;let n=null,o=null,a=null;const{devext:l,qaext:u,www:c}=Nge;if(r)if(n=i,s)switch(s.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qa":({customBaseUrl:o,portalHostname:a}=u);break;default:return null}else({customBaseUrl:o,portalHostname:a}=c);else switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qaext":({customBaseUrl:o,portalHostname:a}=u);break;case"www":({customBaseUrl:o,portalHostname:a}=c);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:n}}function Fge(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}const Dge=tt.getLogger("esri.core.urlUtils"),Nw=Li.request,FV="esri/config: esriConfig.request.proxyUrl is not set.",kQ=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,LQ=/^\s*http:/i,jge=/^\s*https:/i,Uge=/^\s*file:/i,Vge=/:\d+$/,Bge=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,zge=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),Gge=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");let $h=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(zge);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(Gge),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const qE={},qge=new $h(Li.applicationUrl);let bo=qge;const Hge=Wge();let XF=Hge;const e9=()=>bo,Qat=()=>XF;function Wge(){const t=bo.path,e=t.substring(0,t.lastIndexOf(t.split("/")[t.split("/").length-1]));return`${`${bo.scheme}://${bo.host}${bo.port!=null?`:${bo.port}`:""}`}${e}`}function Fs(t){if(!t)return null;const e={path:null,query:null},i=new $h(t),r=t.indexOf("?");return i.query===null?e.path=t:(e.path=t.substring(0,r),e.query=PQ(i.query)),i.fragment&&(e.hash=i.fragment,i.query===null&&(e.path=e.path.substring(0,e.path.length-(i.fragment.length+1)))),e}function PQ(t){const e=t.split("&"),i={};for(const r of e){if(!r)continue;const s=r.indexOf("=");let n,o;s<0?(n=decodeURIComponent(r),o=""):(n=decodeURIComponent(r.slice(0,s)),o=decodeURIComponent(r.slice(s+1)));let a=i[n];typeof a=="string"&&(a=i[n]=[a]),Array.isArray(a)?a.push(o):i[n]=o}return i}function DV(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}function xm(t,e){return t?e&&typeof e=="function"?Object.keys(t).map(i=>encodeURIComponent(i)+"="+encodeURIComponent(e(i,t[i]))).join("&"):Object.keys(t).map(i=>{const r=t[i];if(r==null)return"";const s=encodeURIComponent(i)+"=",n=e&&e[i];return n?s+encodeURIComponent(n(r)):Array.isArray(r)?r.map(o=>DV(o)?s+encodeURIComponent(JSON.stringify(o)):s+encodeURIComponent(o)).join("&"):DV(r)?s+encodeURIComponent(JSON.stringify(r)):s+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function Jge(t=!1){let e,i=Nw.proxyUrl;if(typeof t=="string"){e=r0e(t);const r=G4(t);r&&(i=r.proxyUrl)}else e=!!t;if(!i)throw Dge.warn(FV),new Ce("urlutils:proxy-not-set",FV);return e&&Hk()&&(i=o9(i)),Fs(i)}function Zge(t){const e=G4(t);let i,r;if(e){const s=t9(e.proxyUrl);i=s.path,r=s.query?PQ(s.query):null}if(i){const s=Fs(t);t=i+"?"+s.path;const n=xm({...r,...s.query});n&&(t=`${t}?${n}`)}return t}const T_={path:"",query:""};function t9(t){const e=t.indexOf("?");return e!==-1?(T_.path=t.slice(0,e),T_.query=t.slice(e+1)):(T_.path=t,T_.query=null),T_}function NQ(t){return t=(t=OA(t=u0e(t=t9(t).path),!0)).toLowerCase()}function Yge(t){const e={proxyUrl:t.proxyUrl,urlPrefix:NQ(t.urlPrefix)},i=Nw.proxyRules,r=e.urlPrefix;let s=i.length;for(let n=0;n<i.length;n++){const o=i[n].urlPrefix;if(r.indexOf(o)===0){if(r.length===o.length)return-1;s=n;break}o.indexOf(r)===0&&(s=n+1)}return i.splice(s,0,e),s}function G4(t){const e=Nw.proxyRules,i=NQ(t);for(let r=0;r<e.length;r++)if(i.indexOf(e[r].urlPrefix)===0)return e[r]}function Kge(t,e){if(!t||!e)return!1;t=$A(t),e=$A(e);const i=NV(t),r=NV(e);return ee(i)&&ee(r)?i.portalHostname===r.portalHostname:!ee(i)&&!ee(r)&&zb(t,e,!0)}function FQ(t,e){return t=$A(t),e=$A(e),OA(t)===OA(e)}function $A(t){const e=(t=El(t)).indexOf("/sharing");return e>0?t.substring(0,e):t.replace(/\/+$/,"")}function DQ(t){const e=r=>r==null||r instanceof RegExp&&r.test(t)||typeof r=="string"&&t.startsWith(r),i=Nw.interceptors;if(i){for(const r of i)if(Array.isArray(r.urls)){if(r.urls.some(e))return r}else if(e(r.urls))return r}return null}function zb(t,e,i=!1){if(!t||!e)return!1;const r=Jk(t),s=Jk(e);return!(!i&&r.scheme!==s.scheme)&&r.host!=null&&s.host!=null&&r.host.toLowerCase()===s.host.toLowerCase()&&r.port===s.port}function i9(t){if(typeof t=="string"){if(!Tl(t))return!0;t=Jk(t)}if(zb(t,bo))return!0;const e=Nw.trustedServers||[];for(let i=0;i<e.length;i++){const r=Qge(e[i]);for(let s=0;s<r.length;s++)if(zb(t,r[s]))return!0}return!1}function Qge(t){return qE[t]||(n9(t)||xc(t)?qE[t]=[new $h(_l(t))]:qE[t]=[new $h(`http://${t}`),new $h(`https://${t}`)]),qE[t]}function _l(t,e=XF,i){return xc(t)?i&&i.preserveProtocolRelative?t:bo.scheme==="http"&&bo.authority===vc(t).slice(2)?`http:${t}`:`https:${t}`:n9(t)?t:$0(t[0]==="/"?a0e(e):e,t)}function r9(t,e=XF,i){if(t==null||!Tl(t))return t;const r=El(t),s=r.toLowerCase(),n=El(e).toLowerCase().replace(/\/+$/,""),o=i?El(i).toLowerCase().replace(/\/+$/,""):null;if(o&&n.indexOf(o)!==0)return t;const a=(d,f,m)=>(m=d.indexOf(f,m))===-1?d.length:m;let l=a(s,"/",s.indexOf("//")+2),u=-1;for(;s.slice(0,l+1)===n.slice(0,l)+"/"&&(u=l+1,l!==s.length);)l=a(s,"/",l+1);if(u===-1||o&&u<o.length)return t;t=r.slice(u);const c=n.slice(u-1).replace(/[^/]+/g,"").length;if(c>0)for(let d=0;d<c;d++)t=`../${t}`;else t=`./${t}`;return t}function El(t){return t=d0e(t=h0e(t=c0e(t=_l(t=t.trim()))))}function $0(...t){const e=t.filter(ee);if(!e||!e.length)return;const i=[];if(Tl(e[0])){const s=e[0],n=s.indexOf("//");n!==-1&&(i.push(s.slice(0,n+1)),n0e(e[0])&&(i[0]+="/"),e[0]=s.slice(n+2))}else e[0][0]==="/"&&i.push("");const r=e.reduce((s,n)=>n?s.concat(n.split("/")):s,[]);for(let s=0;s<r.length;s++){const n=r[s];n===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!n&&s===r.length-1||n&&(n!=="."||i.length===0))&&i.push(n)}return i.join("/")}function vc(t,e=!1){if(t==null||q4(t)||i1(t))return null;let i=t.indexOf("://");if(i===-1&&xc(t))i=2;else{if(i===-1)return null;i+=3}const r=t.indexOf("/",i);return r!==-1&&(t=t.slice(0,r)),e&&(t=OA(t,!0)),t}function Tl(t){return xc(t)||n9(t)}function q4(t){return t!=null&&t.slice(0,5)==="blob:"}function i1(t){return t!=null&&t.slice(0,5)==="data:"}function Xge(t){const e=s9(t);if(!e||!e.isBase64)return null;const i=atob(e.data),r=new Uint8Array(i.length);for(let s=0;s<i.length;s++)r[s]=i.charCodeAt(s);return r.buffer}function Xat(t){return btoa(String.fromCharCode.apply(null,t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const e0e=/^data:(.*?)(;base64)?,(.*)$/;function s9(t){const e=t.match(e0e);if(!e)return null;const[,i,r,s]=e;return{mediaType:i,isBase64:!!r,data:s}}function jQ(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}function elt(t){const e=Xge(t);if(!e)return null;const i=s9(t);return new Blob([e],{type:i.mediaType})}function tlt(t,e){t0e(t,e)||i0e(t,e)}function t0e(t,e){if(!t)return!1;const i=document.createElement("a");if(!("download"in i))return!1;const r=URL.createObjectURL(t);return i.download=e,i.href=r,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),!0}function i0e(t,e){return!!window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(t,e)}function xc(t){return t!=null&&t[0]==="/"&&t[1]==="/"}function n9(t){return t!=null&&kQ.test(t)}function r0e(t){return t!=null&&jge.test(t)||bo.scheme==="https"&&xc(t)}function s0e(t){return t!=null&&LQ.test(t)||bo.scheme==="http"&&xc(t)}function n0e(t){return t!=null&&Uge.test(t)}function o9(t){return xc(t)?`https:${t}`:t.replace(LQ,"https:")}function o0e(){return bo.scheme==="http"}function Hk(){return bo.scheme==="https"}function OA(t,e=!1){return xc(t)?t.slice(2):(t=t.replace(kQ,""),e&&t.length>1&&t[0]==="/"&&t[1]==="/"&&(t=t.slice(2)),t)}function a0e(t){const e=t.indexOf("//"),i=t.indexOf("/",e+2);return i===-1?t:t.slice(0,i)}function l0e(t){let e=0;if(Tl(t)){const r=t.indexOf("//");r!==-1&&(e=r+2)}const i=t.lastIndexOf("/");return i<e?t:t.slice(0,i+1)}function ilt(t,e){if(!t)return"";const i=Fs(t).path.replace(/\/+$/,""),r=i.substring(i.lastIndexOf("/")+1);if(!e?.length)return r;const s=new RegExp(`.(${e.join("|")})$`,"ig");return r.replace(s,"")}function u0e(t){return t&&t[t.length-1]==="/"?t:`${t}/`}function UQ(t){return t.replace(/\/+$/,"")}function c0e(t){if(/^https?:\/\//i.test(t)){const e=t9(t);t=(t=e.path.replace(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function h0e(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function d0e(t){const e=Nw.httpsDomains;if(!s0e(t))return t;const i=t.indexOf("/",7);let r;if(r=i===-1?t:t.slice(0,i),r=r.toLowerCase().slice(7),Vge.test(r)){if(!r.endsWith(":80"))return t;r=r.slice(0,-3),t=t.replace(":80","")}return o0e()&&r===bo.authority&&!Bge.test(t)||(Hk()&&r===bo.authority||e&&e.some(s=>r===s||r.endsWith(`.${s}`))||Hk()&&!G4(t))&&(t=o9(t)),t}function Wk(t,e,i){if(!(e&&i&&t&&Tl(t)))return t;const r=t.indexOf("//"),s=t.indexOf("/",r+2),n=t.indexOf(":",r+2),o=Math.min(s<0?t.length:s,n<0?t.length:n);return t.slice(r+2,o).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,r+2)}${i}${t.slice(o)}`}function Jk(t){return typeof t=="string"?new $h(_l(t)):(t.scheme||(t.scheme=bo.scheme),t)}function rlt(t){return p0e.test(t)}function VQ(t,e){const i=Fs(t),r=Object.keys(i.query||{});return r.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function BQ(t,e,i){const r=Fs(t),s=r.query||{};return s[e]=String(i),`${r.path}?${xm(s)}`}function RI(t,e){const i=Fs(t),r=i.query||{};for(const n in e)r[n]=e[n];const s=xm(r);return s?`${i.path}?${s}`:i.path}function slt(t){if(Re(t))return null;const e=t.match(zQ);return e?e[2]:null}function jV(t){if(Re(t))return null;const e=t.match(zQ);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}const zQ=/([^.]*)\.([^\/]*)$/,p0e=/(^data:image\/svg|\.svg$)/i;function it(t,e,i){let r,s;return e===void 0?(s=t,r=[void 0]):typeof e!="string"?(s=t,r=[void 0],i=e):(s=e,r=Array.isArray(t)?t:[t]),(n,o)=>{const a=n.constructor.prototype;for(const l of r){const u=lQ(n,l,s);u.write&&typeof u.write=="object"||(u.write={}),i&&(u.write.target=i),u.write.writer=a[o]}}}let si=class{constructor(e,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=this._invertMap(e),this.apiValues=this._getKeysSorted(this._apiToJSON),this.jsonValues=this._getKeysSorted(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,s,n)=>{const o=this.toJSON(r);o!==void 0&&Io(n,o,s)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const i=this._apiToJSON[e];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?void 0:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}_invertMap(e){const i={};for(const r in e)i[e[r]]=r;return i}_getKeysSorted(e){const i=[];for(const r in e)i.push(r);return i.sort(),i}};function xs(){return function(t,e){return new si(t,{ignoreUnknown:!0,...e})}}let a9=class{constructor(e,i,r,s){this.semiMajorAxis=e,this.flattening=i,this.outerAtmosphereRimWidth=r;const n=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*n,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=s||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const Sr=new a9(6378137,1/298.257223563,3e5,.006694379990137799),ip=new a9(3396190,1/169.8944472236118,23e4),Sm=new a9(1737400,0,0);var du;(function(t){t[t.CGCS2000=4490]="CGCS2000",t[t.GCSMARS2000=104971]="GCSMARS2000",t[t.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",t[t.GCSMOON2000=104903]="GCSMOON2000"})(du||(du={}));let w;const ue={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(w=2e3;w<=2045;w++)ue[w]=0;for(w=2056;w<=2065;w++)ue[w]=0;for(w=2067;w<=2135;w++)ue[w]=0;for(w=2137;w<=2154;w++)ue[w]=0;for(w=2161;w<=2170;w++)ue[w]=0;for(w=2172;w<=2193;w++)ue[w]=0;for(w=2195;w<=2198;w++)ue[w]=0;for(w=2200;w<=2203;w++)ue[w]=0;for(w=2205;w<=2217;w++)ue[w]=0;for(w=2222;w<=2224;w++)ue[w]=1;for(w=2225;w<=2250;w++)ue[w]=2;for(w=2251;w<=2253;w++)ue[w]=1;for(w=2257;w<=2264;w++)ue[w]=2;for(w=2274;w<=2279;w++)ue[w]=2;for(w=2280;w<=2282;w++)ue[w]=1;for(w=2283;w<=2289;w++)ue[w]=2;for(w=2290;w<=2292;w++)ue[w]=0;for(w=2308;w<=2313;w++)ue[w]=0;for(w=2315;w<=2491;w++)ue[w]=0;for(w=2494;w<=2866;w++)ue[w]=0;for(w=2867;w<=2869;w++)ue[w]=1;for(w=2870;w<=2888;w++)ue[w]=2;for(w=2891;w<=2895;w++)ue[w]=2;for(w=2896;w<=2898;w++)ue[w]=1;for(w=2902;w<=2908;w++)ue[w]=2;for(w=2915;w<=2920;w++)ue[w]=2;for(w=2921;w<=2923;w++)ue[w]=1;for(w=2924;w<=2930;w++)ue[w]=2;for(w=2931;w<=2962;w++)ue[w]=0;for(w=2964;w<=2968;w++)ue[w]=2;for(w=2969;w<=2973;w++)ue[w]=0;for(w=2975;w<=2991;w++)ue[w]=0;for(w=2995;w<=3051;w++)ue[w]=0;for(w=3054;w<=3079;w++)ue[w]=0;for(w=3081;w<=3088;w++)ue[w]=0;for(w=3092;w<=3101;w++)ue[w]=0;for(w=3106;w<=3138;w++)ue[w]=0;for(w=3146;w<=3151;w++)ue[w]=0;for(w=3153;w<=3166;w++)ue[w]=0;for(w=3168;w<=3172;w++)ue[w]=0;for(w=3174;w<=3203;w++)ue[w]=0;for(w=3294;w<=3358;w++)ue[w]=0;for(w=3367;w<=3403;w++)ue[w]=0;for(w=3408;w<=3416;w++)ue[w]=0;for(w=3417;w<=3438;w++)ue[w]=2;for(w=3441;w<=3446;w++)ue[w]=2;for(w=3447;w<=3450;w++)ue[w]=0;for(w=3451;w<=3459;w++)ue[w]=2;for(w=3460;w<=3478;w++)ue[w]=0;for(w=3554;w<=3559;w++)ue[w]=0;for(w=3560;w<=3570;w++)ue[w]=2;for(w=3571;w<=3581;w++)ue[w]=0;for(w=3594;w<=3597;w++)ue[w]=0;for(w=3601;w<=3604;w++)ue[w]=0;for(w=3637;w<=3639;w++)ue[w]=0;for(w=3665;w<=3667;w++)ue[w]=0;for(w=3693;w<=3695;w++)ue[w]=0;for(w=3701;w<=3727;w++)ue[w]=0;for(w=3728;w<=3739;w++)ue[w]=2;for(w=3740;w<=3751;w++)ue[w]=0;for(w=3753;w<=3760;w++)ue[w]=2;for(w=3761;w<=3773;w++)ue[w]=0;for(w=3775;w<=3777;w++)ue[w]=0;for(w=3779;w<=3781;w++)ue[w]=0;for(w=3783;w<=3785;w++)ue[w]=0;for(w=3788;w<=3791;w++)ue[w]=0;for(w=3797;w<=3802;w++)ue[w]=0;for(w=3814;w<=3816;w++)ue[w]=0;for(w=3825;w<=3829;w++)ue[w]=0;for(w=3832;w<=3841;w++)ue[w]=0;for(w=3844;w<=3852;w++)ue[w]=0;for(w=3873;w<=3885;w++)ue[w]=0;for(w=3890;w<=3893;w++)ue[w]=0;for(w=3907;w<=3912;w++)ue[w]=0;for(w=3942;w<=3950;w++)ue[w]=0;for(w=3968;w<=3970;w++)ue[w]=0;for(w=3973;w<=3976;w++)ue[w]=0;for(w=3986;w<=3989;w++)ue[w]=0;for(w=3994;w<=3997;w++)ue[w]=0;for(w=4048;w<=4051;w++)ue[w]=0;for(w=4056;w<=4063;w++)ue[w]=0;for(w=4093;w<=4096;w++)ue[w]=0;for(w=4390;w<=4398;w++)ue[w]=0;for(w=4399;w<=4413;w++)ue[w]=2;for(w=4418;w<=4433;w++)ue[w]=2;for(w=4455;w<=4457;w++)ue[w]=2;for(w=4484;w<=4489;w++)ue[w]=0;for(w=4491;w<=4554;w++)ue[w]=0;for(w=4568;w<=4589;w++)ue[w]=0;for(w=4652;w<=4656;w++)ue[w]=0;for(w=4766;w<=4800;w++)ue[w]=0;for(w=5014;w<=5016;w++)ue[w]=0;for(w=5069;w<=5072;w++)ue[w]=0;for(w=5105;w<=5130;w++)ue[w]=0;for(w=5173;w<=5188;w++)ue[w]=0;for(w=5253;w<=5259;w++)ue[w]=0;for(w=5269;w<=5275;w++)ue[w]=0;for(w=5292;w<=5311;w++)ue[w]=0;for(w=5329;w<=5331;w++)ue[w]=0;for(w=5343;w<=5349;w++)ue[w]=0;for(w=5355;w<=5357;w++)ue[w]=0;for(w=5387;w<=5389;w++)ue[w]=0;for(w=5459;w<=5463;w++)ue[w]=0;for(w=5479;w<=5482;w++)ue[w]=0;for(w=5518;w<=5520;w++)ue[w]=0;for(w=5530;w<=5539;w++)ue[w]=0;for(w=5550;w<=5552;w++)ue[w]=0;for(w=5562;w<=5583;w++)ue[w]=0;for(w=5623;w<=5625;w++)ue[w]=2;for(w=5631;w<=5639;w++)ue[w]=0;for(w=5649;w<=5653;w++)ue[w]=0;for(w=5663;w<=5680;w++)ue[w]=0;for(w=5682;w<=5685;w++)ue[w]=0;for(w=5875;w<=5877;w++)ue[w]=0;for(w=5896;w<=5899;w++)ue[w]=0;for(w=5921;w<=5940;w++)ue[w]=0;for(w=6050;w<=6125;w++)ue[w]=0;for(w=6244;w<=6275;w++)ue[w]=0;for(w=6328;w<=6348;w++)ue[w]=0;for(w=6350;w<=6356;w++)ue[w]=0;for(w=6366;w<=6372;w++)ue[w]=0;for(w=6381;w<=6387;w++)ue[w]=0;for(w=6393;w<=6404;w++)ue[w]=0;for(w=6480;w<=6483;w++)ue[w]=0;for(w=6511;w<=6514;w++)ue[w]=0;for(w=6579;w<=6581;w++)ue[w]=0;for(w=6619;w<=6624;w++)ue[w]=0;for(w=6625;w<=6627;w++)ue[w]=2;for(w=6628;w<=6632;w++)ue[w]=0;for(w=6634;w<=6637;w++)ue[w]=0;for(w=6669;w<=6692;w++)ue[w]=0;for(w=6707;w<=6709;w++)ue[w]=0;for(w=6720;w<=6723;w++)ue[w]=0;for(w=6732;w<=6738;w++)ue[w]=0;for(w=6931;w<=6933;w++)ue[w]=0;for(w=6956;w<=6959;w++)ue[w]=0;for(w=7005;w<=7007;w++)ue[w]=0;for(w=7057;w<=7070;w++)ue[w]=2;for(w=7074;w<=7082;w++)ue[w]=0;for(w=7109;w<=7118;w++)ue[w]=0;for(w=7119;w<=7127;w++)ue[w]=1;for(w=7374;w<=7376;w++)ue[w]=0;for(w=7528;w<=7586;w++)ue[w]=0;for(w=7587;w<=7645;w++)ue[w]=2;for(w=7692;w<=7696;w++)ue[w]=0;for(w=7755;w<=7787;w++)ue[w]=0;for(w=7791;w<=7795;w++)ue[w]=0;for(w=7799;w<=7801;w++)ue[w]=0;for(w=7803;w<=7805;w++)ue[w]=0;for(w=7825;w<=7831;w++)ue[w]=0;for(w=7845;w<=7859;w++)ue[w]=0;for(w=8013;w<=8032;w++)ue[w]=0;for(w=8065;w<=8068;w++)ue[w]=1;for(w=8518;w<=8529;w++)ue[w]=2;for(w=8533;w<=8536;w++)ue[w]=2;for(w=8538;w<=8540;w++)ue[w]=2;for(w=8677;w<=8679;w++)ue[w]=0;for(w=8836;w<=8840;w++)ue[w]=0;for(w=8857;w<=8859;w++)ue[w]=0;for(w=8908;w<=8910;w++)ue[w]=0;for(w=9154;w<=9159;w++)ue[w]=0;for(w=9205;w<=9218;w++)ue[w]=0;for(w=9271;w<=9273;w++)ue[w]=0;for(w=9295;w<=9297;w++)ue[w]=0;for(w=9356;w<=9360;w++)ue[w]=0;for(w=9404;w<=9407;w++)ue[w]=0;for(w=9476;w<=9482;w++)ue[w]=0;for(w=9487;w<=9494;w++)ue[w]=0;for(w=9697;w<=9699;w++)ue[w]=0;for(w=9821;w<=9865;w++)ue[w]=0;for(w=20002;w<=20032;w++)ue[w]=0;for(w=20047;w<=20049;w++)ue[w]=0;for(w=20062;w<=20092;w++)ue[w]=0;for(w=20135;w<=20138;w++)ue[w]=0;for(w=20248;w<=20258;w++)ue[w]=0;for(w=20348;w<=20358;w++)ue[w]=0;for(w=20436;w<=20440;w++)ue[w]=0;for(w=20822;w<=20824;w++)ue[w]=0;for(w=20904;w<=20932;w++)ue[w]=0;for(w=20934;w<=20936;w++)ue[w]=0;for(w=21004;w<=21032;w++)ue[w]=0;for(w=21035;w<=21037;w++)ue[w]=0;for(w=21095;w<=21097;w++)ue[w]=0;for(w=21148;w<=21150;w++)ue[w]=0;for(w=21207;w<=21264;w++)ue[w]=0;for(w=21307;w<=21364;w++)ue[w]=0;for(w=21413;w<=21423;w++)ue[w]=0;for(w=21453;w<=21463;w++)ue[w]=0;for(w=21473;w<=21483;w++)ue[w]=0;for(w=21780;w<=21782;w++)ue[w]=0;for(w=21891;w<=21894;w++)ue[w]=0;for(w=21896;w<=21899;w++)ue[w]=0;for(w=22171;w<=22177;w++)ue[w]=0;for(w=22181;w<=22187;w++)ue[w]=0;for(w=22191;w<=22197;w++)ue[w]=0;for(w=22207;w<=22222;w++)ue[w]=0;for(w=22234;w<=22236;w++)ue[w]=0;for(w=22243;w<=22250;w++)ue[w]=0;for(w=22262;w<=22265;w++)ue[w]=0;for(w=22307;w<=22322;w++)ue[w]=0;for(w=22348;w<=22357;w++)ue[w]=0;for(w=22407;w<=22422;w++)ue[w]=0;for(w=22462;w<=22465;w++)ue[w]=0;for(w=22521;w<=22525;w++)ue[w]=0;for(w=22607;w<=22622;w++)ue[w]=0;for(w=22641;w<=22646;w++)ue[w]=0;for(w=22648;w<=22657;w++)ue[w]=0;for(w=22707;w<=22722;w++)ue[w]=0;for(w=22762;w<=22765;w++)ue[w]=0;for(w=22991;w<=22994;w++)ue[w]=0;for(w=23028;w<=23038;w++)ue[w]=0;for(w=23830;w<=23853;w++)ue[w]=0;for(w=23866;w<=23872;w++)ue[w]=0;for(w=23877;w<=23884;w++)ue[w]=0;for(w=23886;w<=23894;w++)ue[w]=0;for(w=23946;w<=23948;w++)ue[w]=0;for(w=24311;w<=24313;w++)ue[w]=0;for(w=24342;w<=24347;w++)ue[w]=0;for(w=24370;w<=24374;w++)ue[w]=10;for(w=24375;w<=24381;w++)ue[w]=0;for(w=24718;w<=24721;w++)ue[w]=0;for(w=24817;w<=24821;w++)ue[w]=0;for(w=24877;w<=24882;w++)ue[w]=0;for(w=24891;w<=24893;w++)ue[w]=0;for(w=25391;w<=25395;w++)ue[w]=0;for(w=25828;w<=25838;w++)ue[w]=0;for(w=26191;w<=26195;w++)ue[w]=0;for(w=26391;w<=26393;w++)ue[w]=0;for(w=26701;w<=26722;w++)ue[w]=0;for(w=26729;w<=26799;w++)ue[w]=2;for(w=26801;w<=26803;w++)ue[w]=2;for(w=26811;w<=26813;w++)ue[w]=2;for(w=26847;w<=26870;w++)ue[w]=2;for(w=26891;w<=26899;w++)ue[w]=0;for(w=26901;w<=26923;w++)ue[w]=0;for(w=26929;w<=26946;w++)ue[w]=0;for(w=26948;w<=26998;w++)ue[w]=0;for(w=27037;w<=27040;w++)ue[w]=0;for(w=27205;w<=27232;w++)ue[w]=0;for(w=27258;w<=27260;w++)ue[w]=0;for(w=27391;w<=27398;w++)ue[w]=0;for(w=27561;w<=27564;w++)ue[w]=0;for(w=27571;w<=27574;w++)ue[w]=0;for(w=27581;w<=27584;w++)ue[w]=0;for(w=27591;w<=27594;w++)ue[w]=0;for(w=28191;w<=28193;w++)ue[w]=0;for(w=28348;w<=28358;w++)ue[w]=0;for(w=28402;w<=28432;w++)ue[w]=0;for(w=28462;w<=28492;w++)ue[w]=0;for(w=29118;w<=29122;w++)ue[w]=0;for(w=29168;w<=29172;w++)ue[w]=0;for(w=29177;w<=29185;w++)ue[w]=0;for(w=29187;w<=29195;w++)ue[w]=0;for(w=29900;w<=29903;w++)ue[w]=0;for(w=30161;w<=30179;w++)ue[w]=0;for(w=30491;w<=30494;w++)ue[w]=0;for(w=30729;w<=30732;w++)ue[w]=0;for(w=31251;w<=31259;w++)ue[w]=0;for(w=31265;w<=31268;w++)ue[w]=0;for(w=31275;w<=31279;w++)ue[w]=0;for(w=31281;w<=31297;w++)ue[w]=0;for(w=31461;w<=31469;w++)ue[w]=0;for(w=31491;w<=31495;w++)ue[w]=0;for(w=31917;w<=31922;w++)ue[w]=0;for(w=31965;w<=32e3;w++)ue[w]=0;for(w=32001;w<=32003;w++)ue[w]=2;for(w=32005;w<=32031;w++)ue[w]=2;for(w=32033;w<=32060;w++)ue[w]=2;for(w=32064;w<=32067;w++)ue[w]=2;for(w=32074;w<=32077;w++)ue[w]=2;for(w=32081;w<=32086;w++)ue[w]=0;for(w=32107;w<=32130;w++)ue[w]=0;for(w=32133;w<=32159;w++)ue[w]=0;for(w=32164;w<=32167;w++)ue[w]=2;for(w=32180;w<=32199;w++)ue[w]=0;for(w=32201;w<=32260;w++)ue[w]=0;for(w=32301;w<=32360;w++)ue[w]=0;for(w=32601;w<=32662;w++)ue[w]=0;for(w=32664;w<=32667;w++)ue[w]=2;for(w=32701;w<=32761;w++)ue[w]=0;for(w=53001;w<=53004;w++)ue[w]=0;for(w=53008;w<=53019;w++)ue[w]=0;for(w=53021;w<=53032;w++)ue[w]=0;for(w=53034;w<=53037;w++)ue[w]=0;for(w=53042;w<=53046;w++)ue[w]=0;for(w=53074;w<=53080;w++)ue[w]=0;for(w=54001;w<=54004;w++)ue[w]=0;for(w=54008;w<=54019;w++)ue[w]=0;for(w=54021;w<=54032;w++)ue[w]=0;for(w=54034;w<=54037;w++)ue[w]=0;for(w=54042;w<=54046;w++)ue[w]=0;for(w=54048;w<=54053;w++)ue[w]=0;for(w=54074;w<=54080;w++)ue[w]=0;for(w=54098;w<=54101;w++)ue[w]=0;for(w=102001;w<=102040;w++)ue[w]=0;for(w=102042;w<=102063;w++)ue[w]=0;for(w=102065;w<=102067;w++)ue[w]=0;for(w=102070;w<=102117;w++)ue[w]=0;for(w=102122;w<=102216;w++)ue[w]=0;for(w=102221;w<=102377;w++)ue[w]=0;for(w=102382;w<=102388;w++)ue[w]=0;for(w=102389;w<=102398;w++)ue[w]=2;for(w=102399;w<=102444;w++)ue[w]=0;for(w=102445;w<=102447;w++)ue[w]=2;for(w=102448;w<=102458;w++)ue[w]=0;for(w=102459;w<=102468;w++)ue[w]=2;for(w=102469;w<=102499;w++)ue[w]=0;for(w=102500;w<=102519;w++)ue[w]=1;for(w=102520;w<=102524;w++)ue[w]=0;for(w=102525;w<=102529;w++)ue[w]=2;for(w=102530;w<=102588;w++)ue[w]=0;for(w=102590;w<=102598;w++)ue[w]=0;for(w=102601;w<=102603;w++)ue[w]=0;for(w=102605;w<=102628;w++)ue[w]=0;for(w=102629;w<=102646;w++)ue[w]=2;for(w=102648;w<=102700;w++)ue[w]=2;for(w=102701;w<=102703;w++)ue[w]=0;for(w=102707;w<=102730;w++)ue[w]=2;for(w=102733;w<=102758;w++)ue[w]=2;for(w=102767;w<=102900;w++)ue[w]=0;for(w=102901;w<=102933;w++)ue[w]=2;for(w=102934;w<=102950;w++)ue[w]=13;for(w=102951;w<=102955;w++)ue[w]=0;for(w=102961;w<=102963;w++)ue[w]=0;for(w=102965;w<=102969;w++)ue[w]=0;for(w=102971;w<=102973;w++)ue[w]=0;for(w=102975;w<=102989;w++)ue[w]=0;for(w=102990;w<=102992;w++)ue[w]=1;for(w=102997;w<=103002;w++)ue[w]=0;for(w=103003;w<=103008;w++)ue[w]=2;for(w=103009;w<=103011;w++)ue[w]=0;for(w=103012;w<=103014;w++)ue[w]=2;for(w=103019;w<=103021;w++)ue[w]=0;for(w=103022;w<=103024;w++)ue[w]=2;for(w=103029;w<=103031;w++)ue[w]=0;for(w=103032;w<=103034;w++)ue[w]=2;for(w=103065;w<=103068;w++)ue[w]=0;for(w=103074;w<=103076;w++)ue[w]=0;for(w=103077;w<=103079;w++)ue[w]=1;for(w=103080;w<=103082;w++)ue[w]=0;for(w=103083;w<=103085;w++)ue[w]=2;for(w=103090;w<=103093;w++)ue[w]=0;for(w=103097;w<=103099;w++)ue[w]=0;for(w=103100;w<=103102;w++)ue[w]=2;for(w=103107;w<=103109;w++)ue[w]=0;for(w=103110;w<=103112;w++)ue[w]=2;for(w=103113;w<=103116;w++)ue[w]=0;for(w=103117;w<=103120;w++)ue[w]=2;for(w=103153;w<=103157;w++)ue[w]=0;for(w=103158;w<=103162;w++)ue[w]=2;for(w=103163;w<=103165;w++)ue[w]=0;for(w=103166;w<=103168;w++)ue[w]=1;for(w=103169;w<=103171;w++)ue[w]=2;for(w=103186;w<=103188;w++)ue[w]=0;for(w=103189;w<=103191;w++)ue[w]=2;for(w=103192;w<=103195;w++)ue[w]=0;for(w=103196;w<=103199;w++)ue[w]=2;for(w=103200;w<=103224;w++)ue[w]=0;for(w=103225;w<=103227;w++)ue[w]=1;for(w=103232;w<=103237;w++)ue[w]=0;for(w=103238;w<=103243;w++)ue[w]=2;for(w=103244;w<=103246;w++)ue[w]=0;for(w=103247;w<=103249;w++)ue[w]=2;for(w=103254;w<=103256;w++)ue[w]=0;for(w=103257;w<=103259;w++)ue[w]=2;for(w=103264;w<=103266;w++)ue[w]=0;for(w=103267;w<=103269;w++)ue[w]=2;for(w=103300;w<=103375;w++)ue[w]=0;for(w=103381;w<=103383;w++)ue[w]=0;for(w=103384;w<=103386;w++)ue[w]=1;for(w=103387;w<=103389;w++)ue[w]=0;for(w=103390;w<=103392;w++)ue[w]=2;for(w=103397;w<=103399;w++)ue[w]=0;for(w=103400;w<=103471;w++)ue[w]=2;for(w=103476;w<=103478;w++)ue[w]=0;for(w=103479;w<=103481;w++)ue[w]=2;for(w=103486;w<=103488;w++)ue[w]=0;for(w=103489;w<=103491;w++)ue[w]=2;for(w=103492;w<=103495;w++)ue[w]=0;for(w=103496;w<=103499;w++)ue[w]=2;for(w=103528;w<=103543;w++)ue[w]=0;for(w=103544;w<=103548;w++)ue[w]=2;for(w=103549;w<=103551;w++)ue[w]=0;for(w=103552;w<=103554;w++)ue[w]=1;for(w=103555;w<=103557;w++)ue[w]=2;for(w=103558;w<=103560;w++)ue[w]=0;for(w=103571;w<=103573;w++)ue[w]=0;for(w=103574;w<=103576;w++)ue[w]=2;for(w=103577;w<=103580;w++)ue[w]=0;for(w=103581;w<=103583;w++)ue[w]=2;for(w=103595;w<=103694;w++)ue[w]=0;for(w=103696;w<=103699;w++)ue[w]=0;for(w=103700;w<=103793;w++)ue[w]=2;for(w=103794;w<=103890;w++)ue[w]=0;for(w=103891;w<=103896;w++)ue[w]=2;for(w=103900;w<=103971;w++)ue[w]=2;for(w=103972;w<=103977;w++)ue[w]=0;for(w=112e3;w<=112101;w++)ue[w]=0;const f0e={102113:!0,102100:!0,3857:!0,3785:!0},m0e={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},UV='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',HE=[-20037508342788905e-9,20037508342788905e-9],WE=[-20037508342787e-6,20037508342787e-6],GQ={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:HE,origin:WE,dx:1e-5},102100:{wkTemplate:UV,valid:HE,origin:WE,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:HE,origin:WE,dx:1e-5},3857:{wkTemplate:UV,valid:HE,origin:WE,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function bs(t,e){return t===e||!Re(t)&&!Re(e)&&(t.wkid!=null||e.wkid!=null?t.wkid===e.wkid||O0(t)&&O0(e)||e.latestWkid!=null&&t.wkid===e.latestWkid||t.latestWkid!=null&&e.wkid===t.latestWkid:!(!t.wkt||!e.wkt)&&t.wkt.toUpperCase()===e.wkt.toUpperCase())}function Il(t){return Cn(t)&&t.wkid&&GQ[t.wkid]||null}function l9(t){return!!Cn(t)&&(t.wkid?ue[t.wkid]==null:!!t.wkt&&!!/^\s*GEOGCS/i.test(t.wkt))}function y0e(t){return!($3(t)||O3(t))}function _S(t){return Cn(t)&&t.wkid===4326}function alt(t){return Cn(t)&&t.wkid===du.CGCS2000}function O0(t){return Cn(t)&&t.wkid!=null&&f0e[t.wkid]===!0}function g0e(t){return Cn(t)&&t.wkid===32662}function u9(t){return t===du.GCSMARS2000||t===du.GCSMARS2000_SPHERE}function $3(t){return Cn(t)&&t.wkid!=null&&u9(t.wkid)}function c9(t){return t===du.GCSMOON2000}function O3(t){return Cn(t)&&t.wkid!=null&&c9(t.wkid)}function v0e(t){return Cn(t)&&t.wkid!=null&&m0e[t.wkid]===!0}function Cn(t){return ee(t)&&(t.wkid!=null&&t.wkid>=2e3||t.wkt!=null)}const b0e={wkid:4326,wkt:_c(GQ[4326].wkTemplate,{Central_Meridian:"0.0"})},w0e={wkid:102100,latestWkid:3857},_0e={wkid:32662};function h9(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const x0e=h9(Sr),qQ=h9(ip),HQ=h9(Sm),S0e={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Sr.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`};function E0e(t){return ee(t)&&($3(t)||bs(t,qQ))?ip:ee(t)&&(O3(t)||bs(t,HQ))?Sm:Sr}function llt(t){return u9(t)?ip:c9(t)?Sm:Sr}const WQ=39.37,T0e=Sr.radius*Math.PI/200,JQ=/UNIT\[([^\]]+)\]\]$/i,u0=ue,ZQ=/UNIT\[([^\]]+)\]/i,I0e=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),M0e=xs()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),Nc=t=>t*t,Up=t=>t*t*t,xS={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Nc(.001)},"square-centimeters":{inBaseUnits:Nc(.01)},"square-decimeters":{inBaseUnits:Nc(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Nc(1e3)},"square-inches":{inBaseUnits:Nc(.0254)},"square-feet":{inBaseUnits:Nc(.3048)},"square-yards":{inBaseUnits:Nc(.9144)},"square-miles":{inBaseUnits:Nc(1609.344)},"square-us-feet":{inBaseUnits:Nc(1200/3937)},acres:{inBaseUnits:.0015625*Nc(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Up(.001)},"cubic-centimeters":{inBaseUnits:1e3*Up(.01)},"cubic-decimeters":{inBaseUnits:1e3*Up(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Up(1e3)},"cubic-inches":{inBaseUnits:1e3*Up(.0254)},"cubic-feet":{inBaseUnits:1e3*Up(.3048)},"cubic-yards":{inBaseUnits:1e3*Up(.9144)},"cubic-miles":{inBaseUnits:1e3*Up(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},A0e=(()=>{const t={};for(const e in xS)for(const i in xS[e].units)t[i]=e;return t})();function C0e(t,e,i){return t*xS[i].units[e].inBaseUnits}function $0e(t,e,i){return t/xS[i].units[e].inBaseUnits}function Zk(t){const e=A0e[t];if(!e)throw new Error("unknown type");return e}function VV(t,e=null){return e=e||Zk(t),xS[e].baseUnit===t}function ul(t,e,i){if(e===i)return t;const r=Zk(e);if(r!==Zk(i))throw new Error("incompatible units");const s=VV(e,r)?t:C0e(t,e,r);return VV(i,r)?s:$0e(s,i,r)}function O0e(t,e,i){return ul(t,e,"meters")/(i*Math.PI/180)}function YQ(t){return M0e.fromJSON(t.toLowerCase())||null}function Gb(t){if(ee(t)&&!y0e(t))return 1;const e=Sp(t);return e>1e5?1:e}function R0e(t){return Sp(t)>=E0e(t).metersPerDegree?"meters":QQ(t)}function Sp(t,e=Sr.metersPerDegree){return VF(k0e(t,!0),e)}function k0e(t,e=!1){const i=ee(t)?t.wkid:null,r=ee(t)?t.wkt:null;let s=null;if(i){if(u9(i))return ip.metersPerDegree;if(c9(i))return Sm.metersPerDegree;s=u0.values[u0[i]],!s&&e&&I0e.has(i)&&(s=T0e)}else r&&(eX(r)?s=BV(JQ.exec(r),s):XQ(r)&&(s=BV(ZQ.exec(r),s)));return s}function BV(t,e){return t&&t[1]?KQ(t[1]):e}function KQ(t){return parseFloat(t.split(",")[1])}function QQ(t){const e=ee(t)?t.wkid:null,i=ee(t)?t.wkt:null;let r=null;if(e)r=u0.units[u0[e]];else if(i){const s=eX(i)?JQ:XQ(i)?ZQ:null;if(s){const n=s.exec(i);n&&n[1]&&(r=P0e(n[1]))}}return ee(r)?YQ(r):null}function XQ(t){return/^GEOCCS/i.test(t)}function eX(t){return/^PROJCS/i.test(t)}const L0e=1e-7;function P0e(t){const e=/[\\"\\']{1}([^\\"\\']+)/.exec(t);let i=e&&e[1];if(!i||!u0.units.includes(i)){const r=KQ(t);i=null;const s=u0.values;for(let n=0;n<s.length;++n)if(Math.abs(r-s[n])<L0e){i=u0.units[n];break}}return i}const N0e={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},F0e={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},D0e={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},SS=xs()(N0e),up=xs()(F0e),RA=xs()(D0e);var Bc;let Yi=Bc=class extends Je{static fromJSON(t){if(!t)return null;if(t.wkid){if(t.wkid===102100)return Bc.WebMercator;if(t.wkid===4326)return Bc.WGS84}const e=new Bc;return e.read(t),e}constructor(t){super(t),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(t){return t&&typeof t=="object"?t:{[typeof t=="string"?"wkt":"wkid"]:t}}get isWGS84(){return _S(this)}get isWebMercator(){return O0(this)}get isGeographic(){return l9(this)}get isWrappable(){return v0e(this)}get metersPerUnit(){return Sp(this)}get unit(){return QQ(this)||(this.isGeographic?"degrees":null)}writeWkt(t,e){this.wkid||(e.wkt=t)}clone(){if(this===Bc.WGS84)return Bc.WGS84;if(this===Bc.WebMercator)return Bc.WebMercator;const t=new Bc;return this.wkid!=null?(t.wkid=this.wkid,this.latestWkid!=null&&(t.latestWkid=this.latestWkid),this.vcsWkid!=null&&(t.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(t.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(t.wkt=this.wkt),this.imageCoordinateSystem&&(t.imageCoordinateSystem=Le(this.imageCoordinateSystem)),t}equals(t){if(t==null)return!1;if(this.imageCoordinateSystem||t.imageCoordinateSystem){if(this.imageCoordinateSystem==null||t.imageCoordinateSystem==null)return!1;const{id:e,referenceServiceName:i}=t.imageCoordinateSystem,{geodataXform:r}=t.imageCoordinateSystem,s=this.imageCoordinateSystem;return e==null||r?JSON.stringify(s)===JSON.stringify(t.imageCoordinateSystem):i?s.id===e&&s.referenceServiceName===i:s.id===e}return bs(this,t)}toJSON(t){return this.write(void 0,t)}};Yi.GCS_NAD_1927=null,Yi.WGS84=null,Yi.WebMercator=null,Yi.PlateCarree=null,h([p({readOnly:!0})],Yi.prototype,"isWGS84",null),h([p({readOnly:!0})],Yi.prototype,"isWebMercator",null),h([p({readOnly:!0})],Yi.prototype,"isGeographic",null),h([p({readOnly:!0})],Yi.prototype,"isWrappable",null),h([p({type:Si,json:{write:!0}})],Yi.prototype,"latestWkid",void 0),h([p({readOnly:!0})],Yi.prototype,"metersPerUnit",null),h([p({readOnly:!0})],Yi.prototype,"unit",null),h([p({type:Si,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt===null}}}}}}})],Yi.prototype,"wkid",void 0),h([p({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid===null}}}}}}})],Yi.prototype,"wkt",void 0),h([it("wkt"),it("web-scene","wkt")],Yi.prototype,"writeWkt",null),h([p({type:Si,json:{write:!0}})],Yi.prototype,"vcsWkid",void 0),h([p({type:Si,json:{write:!0}})],Yi.prototype,"latestVcsWkid",void 0),h([p()],Yi.prototype,"imageCoordinateSystem",void 0),Yi=Bc=h([ce("esri.geometry.SpatialReference")],Yi),Yi.prototype.toJSON.isDefaultToJSON=!0,Yi.GCS_NAD_1927=new Yi({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),Yi.WGS84=new Yi(b0e),Yi.WebMercator=new Yi(w0e),Yi.PlateCarree=new Yi(_0e),Object.freeze&&(Object.freeze(Yi.GCS_NAD_1927),Object.freeze(Yi.WGS84),Object.freeze(Yi.WebMercator));const Tt=Yi,tX="20230301",iX="2657e728c1857e6d94c324181c0788310bb0958a",rX="4.26",j0e={async request(t,e){const{default:i}=await De(()=>Promise.resolve().then(()=>i1e),void 0,import.meta.url),r=t.options,s=r.responseType;r.signal=e?.signal,r.responseType=s==="native"||s==="native-request-init"?"native-request-init":s&&["blob","json","text"].includes(s)&&DQ(t.url)?.after?s:"array-buffer";const n=await i(t.url,r),o={data:n.data,httpStatus:n.httpStatus,ssl:n.ssl};switch(n.requestOptions?.responseType){case"native-request-init":return delete o.data.signal,o;case"blob":o.data=await o.data.arrayBuffer();break;case"json":o.data=new TextEncoder().encode(JSON.stringify(o.data)).buffer;break;case"text":o.data=new TextEncoder().encode(o.data).buffer}return{result:o,transferList:[o.data]}}};let xr;function ult(t){xr=t}function clt(t){const e=xr&&xr.findCredential(t);return e&&e.token?BQ(t,"token",e.token):t}Ze("host-webworker");const U0e=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function sX(t){const e=vc(t,!0);return!!e&&e.endsWith(".arcgis.com")&&!U0e.includes(e)&&!t.endsWith("/sharing/rest/generateToken")}function V0e(t,e,i=!1,r){return new Promise((s,n)=>{if(Rl(r))return void n(zV());let o=()=>{u(),n(new Error(`Unable to load ${e}`))},a=()=>{const c=t;u(),s(c)},l=()=>{if(!t)return;const c=t;u(),c.src="",n(zV())};const u=()=>{Ze("esri-image-decode")||(t.removeEventListener("error",o),t.removeEventListener("load",a)),o=null,a=null,t=null,ee(r)&&r.removeEventListener("abort",l),l=null,i&&URL.revokeObjectURL(e)};ee(r)&&r.addEventListener("abort",l),Ze("esri-image-decode")?t.decode().then(a,o):(t.addEventListener("error",o),t.addEventListener("load",a))})}function zV(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}function B0e(t){Li.request.crossOriginNoCorsDomains||(Li.request.crossOriginNoCorsDomains={});const e=Li.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?e[vc(i)??""]=0:(e[vc("http://"+i)??""]=0,e[vc("https://"+i)??""]=0)}function z0e(t){const e=Li.request.crossOriginNoCorsDomains;if(e){let i=vc(t);if(i)return i=i.toLowerCase(),!zb(i,e9())&&e[i]<Date.now()-36e5}return!1}async function G0e(t){const e=Li.request.crossOriginNoCorsDomains,i=vc(t);e&&i&&(e[i.toLowerCase()]=Date.now());const r=Fs(t);t=r.path,r.query?.f==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}}async function Et(t,e){const i=i1(t),r=q4(t);r||i||(t=El(t));const s={url:t,requestOptions:{...e}};let n=DQ(t);if(n){const u=await Q0e(n,s);if(u!=null)return{data:u,getHeader:d9,httpStatus:200,requestOptions:s.requestOptions,url:s.url};n.after||n.error||(n=null)}if(t=s.url,(e=s.requestOptions).responseType==="image"){if(Ze("host-webworker")||Ze("host-node"))throw fc("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),s)}else if(i)throw fc("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+e.responseType),s);if(e.method==="head"){if(e.body)throw fc("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),s);if(i||r)throw fc("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),s)}if(await Z0e(),kA)return kA.execute(t,e);const o=new AbortController;$a(e,()=>o.abort());const a={controller:o,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:n,params:s,redoRequest:!1,useIdentity:nc.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},l=await e1e(a);return n?.after?.(l),l}let kA;const nc=Li.request,nX="FormData"in globalThis,q0e=[499,498,403,401],H0e=["COM_0056","COM_0057","SB_0008"],W0e=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],d9=()=>null,LA=Symbol();function J0e(t){const e=vc(t);e&&!Et._corsServers.includes(e)&&Et._corsServers.push(e)}function GV(t){const e=vc(t);return!e||e.endsWith(".arcgis.com")||Et._corsServers.includes(e)||i9(e)}function fc(t,e,i,r){let s="Error";const n={url:i.url,requestOptions:i.requestOptions,getHeader:d9,ssl:!1};if(e instanceof Ce)return e.details?(e.details=Le(e.details),e.details.url=i.url,e.details.requestOptions=i.requestOptions):e.details=n,e;if(e){const o=r&&(u=>r.headers.get(u)),a=r&&r.status,l=e.message;l&&(s=l),o&&(n.getHeader=o),n.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||a||0,n.subCode=e.subcode,n.messageCode=e.messageCode,typeof e.details=="string"?n.messages=[e.details]:n.messages=e.details,n.raw=LA in e?e[LA]:e}return vn(e)?yr():new Ce(t,s,n)}async function Z0e(){Ze("host-webworker")?kA||(kA=await De(()=>import("./request-fa3a09c4.js"),["./request-fa3a09c4.js","./preload-helper-388ac9d5.js"],import.meta.url)):Et._abortableFetch||(Et._abortableFetch=globalThis.fetch.bind(globalThis))}async function Yk(){xr||await De(()=>import("./IdentityManager-ca7f15d4.js"),["./IdentityManager-ca7f15d4.js","./preload-helper-388ac9d5.js"],import.meta.url)}async function Y0e(t){const e=t.params.url,i=t.params.requestOptions,r=t.controller.signal,s=i.body;let n=null,o=null;if(nX&&"HTMLFormElement"in globalThis&&(s instanceof FormData?n=s:s instanceof HTMLFormElement&&(n=new FormData(s))),typeof s=="string"&&(o=s),t.fetchOptions={cache:i.cacheBust&&!Et._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:nc.priority,redirect:"follow",signal:r},(n||o)&&(t.fetchOptions.body=n||o),i.authMode==="anonymous"&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||i.query?.token||n?.get("token")),!t.hasToken&&Li.apiKey&&sX(e)&&(i.query||(i.query={}),i.query.token=Li.apiKey,t.hasToken=!0),t.useIdentity&&!t.hasToken&&!t.credentialToken&&!oX(e)&&!Rl(r)){let a;i.authMode==="immediate"?(await Yk(),a=await xr.getCredential(e,{signal:r}),t.credential=a):i.authMode==="no-prompt"?(await Yk(),a=await xr.getCredential(e,{prompt:!1,signal:r}).catch(()=>{}),t.credential=a):xr&&(a=xr.findCredential(e)),a&&(t.credentialToken=a.token,t.useSSL=!!a.ssl)}}function oX(t){return W0e.some(e=>e.test(t))}async function K0e(t){let e=t.params.url;const i=t.params.requestOptions,r=t.fetchOptions??{},s=q4(e)||i1(e),n=i.responseType||"json",o=s?0:i.timeout!=null?i.timeout:nc.timeout;let a=!1;if(!s){t.useSSL&&(e=o9(e)),i.cacheBust&&r.cache==="default"&&(e=BQ(e,"request.preventCache",Date.now()));let f={...i.query};t.credentialToken&&(f.token=t.credentialToken);let m=xm(f);Ze("esri-url-encodes-apostrophe")&&(m=m.replace(/'/g,"%27"));const g=e.length+1+m.length;let v;a=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||g>nc.maxUrlLength;const b=i.useProxy||!!G4(e);if(b){const _=Jge(e);v=_.path,!a&&v.length+1+g>nc.maxUrlLength&&(a=!0),_.query&&(f={..._.query,...f})}if(r.method==="HEAD"&&(a||b)){if(a)throw g>nc.maxUrlLength?fc("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):fc("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(b)throw fc("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}if(a?(r.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?e=RI(e,f):(r.body=xm(f),r.headers||(r.headers={}),r.headers["Content-Type"]="application/x-www-form-urlencoded")):e=RI(e,f),b&&(t.useProxy=!0,e=`${v}?${e}`),f.token&&nX&&r.body instanceof FormData&&!Fge(e)&&r.body.set("token",f.token),i.hasOwnProperty("withCredentials"))t.withCredentials=i.withCredentials;else if(!zb(e,e9())){if(i9(e))t.withCredentials=!0;else if(xr){const _=xr.findServerInfo(e);_&&_.webTierAuth&&(t.withCredentials=!0)}}t.withCredentials&&(r.credentials="include",z0e(e)&&await G0e(a?RI(e,f):e))}let l,u,c=0,d=!1;o>0&&(c=setTimeout(()=>{d=!0,t.controller.abort()},o));try{if(i.responseType==="native-request-init")u=r,u.url=e;else if(i.responseType!=="image"||r.cache!=="default"||r.method!=="GET"||a||X0e(i.headers)||!s&&!t.useProxy&&nc.proxyUrl&&!GV(e)){if(l=await Et._abortableFetch(e,r),t.useProxy||J0e(e),i.responseType==="native")u=l;else if(r.method!=="HEAD")if(l.ok){switch(n){case"array-buffer":u=await l.arrayBuffer();break;case"blob":case"image":u=await l.blob();break;default:u=await l.text()}if(c&&(clearTimeout(c),c=0),n==="json"||n==="xml"||n==="document")if(u)switch(n){case"json":u=JSON.parse(u);break;case"xml":u=qV(u,"application/xml");break;case"document":u=qV(u,"text/html")}else u=null;if(u){if(n==="array-buffer"||n==="blob"){const f=l.headers.get("Content-Type");if(f&&/application\/json|text\/plain/i.test(f)&&u[n==="blob"?"size":"byteLength"]<=750)try{const m=await new Response(u).json();m.error&&(u=m)}catch{}}n==="image"&&u instanceof Blob&&(u=await HV(URL.createObjectURL(u),t,!0))}}else u=await l.text()}else u=await HV(e,t)}catch(f){if(f.name==="AbortError")throw d?new Error("Timeout exceeded"):yr("Request canceled");if(!(!l&&f instanceof TypeError&&nc.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||t.useProxy||GV(e))throw f;t.redoRequest=!0,Yge({proxyUrl:nc.proxyUrl,urlPrefix:vc(e)??""})}finally{c&&clearTimeout(c)}return[l,u]}async function Q0e(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let i,r;try{r=await t.before(e)}catch(s){i=fc("request:interceptor",s,e)}if((r instanceof Error||r instanceof Ce)&&(i=fc("request:interceptor",r,e)),i)throw t.error&&t.error(i),i;return r}}function X0e(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function qV(t,e){let i;try{i=new DOMParser().parseFromString(t,e)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function e1e(t){let e,i;await Y0e(t);try{do[e,i]=await K0e(t);while(!await t1e(t,e,i))}catch(n){const o=fc("request:server",n,t.params,e);throw o.details.ssl=t.useSSL,t.interceptor&&t.interceptor.error&&t.interceptor.error(o),o}const r=t.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!t.hasToken&&!t.credentialToken&&i.user?.username&&!i9(r)){const n=vc(r,!0);n&&nc.trustedServers.push(n)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&B0e(i.authorizedCrossOriginNoCorsDomains)}const s=t.credential;if(s&&xr){const n=xr.findServerInfo(s.server);let o=n&&n.owningSystemUrl;if(o){o=o.replace(/\/?$/,"/sharing");const a=xr.findCredential(o,s.userId);a&&xr._getIdenticalSvcIdx(o,a)===-1&&a.resources.unshift(o)}}return{data:i,getHeader:e?n=>e?.headers.get(n):d9,httpStatus:e?.status??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function t1e(t,e,i){if(t.redoRequest)return t.redoRequest=!1,!1;const r=t.params.requestOptions;if(!e||r.responseType==="native"||r.responseType==="native-request-init")return!0;let s,n;if(!e.ok)throw s=new Error(`Unable to load ${e.url} status: ${e.status}`),s[LA]=i,s;i&&(i.error?s=i.error:i.status==="error"&&Array.isArray(i.messages)&&(s={...i},s[LA]=i,s.details=i.messages));let o,a=null;s&&(n=Number(s.code),a=s.hasOwnProperty("subcode")?Number(s.subcode):null,o=s.messageCode,o=o&&o.toUpperCase());const l=r.authMode;if(n===403&&(a===4||s.message&&s.message.toLowerCase().includes("ssl")&&!s.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(l!=="no-prompt"||n===498)&&n!==void 0&&q0e.includes(n)&&!oX(t.params.url)&&(n!==403||o&&!H0e.includes(o)&&(a==null||a===2&&t.credentialToken))){await Yk();try{const u=await xr.getCredential(t.params.url,{error:fc("request:server",s,t.params),prompt:l!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=u,t.credentialToken=u.token,t.useSSL=t.useSSL||u.ssl,!1}catch(u){if(l==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;s=u}}if(s)throw s;return!0}function HV(t,e,i=!1){const r=e.controller.signal,s=new Image;return e.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.fetchPriority=nc.priority,s.src=t,V0e(s,t,i,r)}Et._abortableFetch=null,Et._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];const i1e=Object.freeze(Object.defineProperty({__proto__:null,default:Et},Symbol.toStringTag,{value:"Module"}));function Ye(t,e,i){let r,s;return e===void 0||Array.isArray(e)?(s=t,i=e,r=[void 0]):(s=e,r=Array.isArray(t)?t:[t]),(n,o)=>{const a=n.constructor.prototype;r.forEach(l=>{const u=lQ(n,l,s);u.read&&typeof u.read=="object"||(u.read={}),u.read.reader=a[o],i&&(u.read.source=(u.read.source||[]).concat(i))})}}let zc=class extends Je{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Tt.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,i){if(e instanceof Tt)return e;if(e!=null){const r=new Tt;return r.read(e,i),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,i){this.cache[e]=i}};h([p()],zc.prototype,"type",void 0),h([p({readOnly:!0})],zc.prototype,"cache",null),h([p({readOnly:!0})],zc.prototype,"extent",null),h([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],zc.prototype,"hasM",void 0),h([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],zc.prototype,"hasZ",void 0),h([p({type:Tt,json:{write:!0},value:Tt.WGS84})],zc.prototype,"spatialReference",void 0),h([Ye("spatialReference")],zc.prototype,"readSpatialReference",null),zc=h([ce("esri.geometry.Geometry")],zc);const Ep=zc,r1e=Object.prototype.toString;function s1e(t){const e="__accessorMetadata__"in t?ns(t):t;return function(...i){if(i.push(e),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return n1e.apply(this,i)}}function n1e(t,e,i,r){k4(t,e).cast=r}function o1e(t){return(e,i)=>{k4(e,t).cast=e[i]}}function mi(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&r1e.call(t[0])==="[object Function]"?s1e(t[0]):t.length===1&&typeof t[0]=="string"?o1e(t[0]):void 0}function a1e(t,e){const i=t.x-e.x,r=t.y-e.y,s=t.hasZ&&e.hasZ?t.z-e.z:0;return Math.sqrt(i*i+r*r+s*s)}const l1e=57.29577951308232,u1e=.017453292519943;function WV(t){return t*l1e}function JV(t){return t*u1e}function ZV(t){return t/Sr.radius}function YV(t){return Math.PI/2-2*Math.atan(Math.exp(-t/Sr.radius))}function Kk(t){return t.wkid!=null||t.wkt!=null}const tO=[0,0];function PA(t,e,i,r,s){const n=t,o=s;if(o.spatialReference=i,"x"in n&&"x"in o)[o.x,o.y]=e(n.x,n.y,tO,r);else if("xmin"in n&&"xmin"in o)[o.xmin,o.ymin]=e(n.xmin,n.ymin,tO,r),[o.xmax,o.ymax]=e(n.xmax,n.ymax,tO,r);else if("paths"in n&&"paths"in o||"rings"in n&&"rings"in o){const a="paths"in n?n.paths:n.rings,l=[];let u;for(let c=0;c<a.length;c++){const d=a[c];u=[],l.push(u);for(let f=0;f<d.length;f++)u.push(e(d[f][0],d[f][1],[0,0],r)),d[f].length>2&&u[f].push(d[f][2]),d[f].length>3&&u[f].push(d[f][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in n&&"points"in o){const a=n.points,l=[];for(let u=0;u<a.length;u++)l[u]=e(a[u][0],a[u][1],[0,0],r),a[u].length>2&&l[u].push(a[u][2]),a[u].length>3&&l[u].push(a[u][3]);o.points=l}return s}function kI(t,e){const i=t&&(Kk(t)?t:t.spatialReference),r=e&&(Kk(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!i||!r)&&(!!bs(r,i)||O0(r)&&_S(i)||O0(i)&&_S(r))}function H4(t,e){if(Re(t))return null;const i=t.spatialReference,r=e&&(Kk(e)?e:e.spatialReference);return kI(i,r)?bs(i,r)?Le(t):O0(r)?PA(t,Hv,Tt.WebMercator,!1,Le(t)):_S(r)?PA(t,Tx,Tt.WGS84,!1,Le(t)):null:null}function Hv(t,e,i=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const r=JV(e);return i[0]=JV(t)*Sr.radius,i[1]=Sr.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function Tx(t,e,i=[0,0],r=!1){const s=WV(t/Sr.radius);return i[0]=r?s:s-360*Math.floor((s+180)/360),i[1]=WV(Math.PI/2-2*Math.atan(Math.exp(-e/Sr.radius))),i}function um(t,e=!1,i=Le(t)){return PA(t,Hv,Tt.WebMercator,e,i)}function Bg(t,e=!1,i=Le(t)){return PA(t,Tx,Tt.WGS84,e,i)}var LI;const I_=[0,0];function KV(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let Po=LI=class extends Ep{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const i=t._get("spatialReference");e._set("spatialReference",Object.isFrozen(i)?i:i.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,i,r,s){let n;if(Array.isArray(t))n=t,s=e,t=n[0],e=n[1],i=n[2],r=n[3];else if(t&&typeof t=="object"){if(n=t,t=n.x!=null?n.x:n.longitude,e=n.y!=null?n.y:n.latitude,i=n.z,r=n.m,(s=n.spatialReference)&&s.declaredClass!=="esri.geometry.SpatialReference"&&(s=new Tt(s)),n.longitude!=null||n.latitude!=null){if(n.longitude==null)tt.getLogger(this.declaredClass).warn(".longitude=","Latitude was defined without longitude");else if(n.latitude==null)tt.getLogger(this.declaredClass).warn(".latitude=","Longitude was defined without latitude");else if(!n.declaredClass&&s&&s.isWebMercator){const a=Hv(n.longitude,n.latitude,I_);t=a[0],e=a[1]}}}else KV(i)?(s=i,i=null):KV(r)&&(s=r,r=null);const o={x:t,y:e};return o.x==null&&o.y!=null?tt.getLogger(this.declaredClass).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&tt.getLogger(this.declaredClass).warn(".x=","X coordinate was defined without a Y coordinate"),s!=null&&(o.spatialReference=s),i!=null&&(o.z=i),r!=null&&(o.m=r),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){const{spatialReference:t,x:e,y:i}=this;if(t){if(t.isWebMercator)return Tx(e,i,I_)[1];if(t.isGeographic)return i}return null}set latitude(t){const{spatialReference:e,x:i}=this;t!=null&&e&&(e.isWebMercator?this._set("y",Hv(i,t,I_)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){const{x:t,y:e,spatialReference:i}=this;if(i){if(i.isWebMercator)return Tx(t,e,I_)[0];if(i.isGeographic)return t}return null}set longitude(t){const{y:e,spatialReference:i}=this;t!=null&&i&&(i.isWebMercator?this._set("x",Hv(t,e,I_)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,i){e[i]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new LI;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return LI.copy(t,this),this}equals(t){if(Re(t))return!1;const{x:e,y:i,z:r,m:s,spatialReference:n}=this,{z:o,m:a}=t;let{x:l,y:u,spatialReference:c}=t;if(!n.equals(c))if(n.isWebMercator&&c.isWGS84)[l,u]=Hv(l,u),c=n;else{if(!n.isWGS84||!c.isWebMercator)return!1;[l,u]=Tx(l,u),c=n}return e===l&&i===u&&r===o&&s===a&&n.wkid===c.wkid}offset(t,e,i){return this.x+=t,this.y+=e,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const t=Il(this.spatialReference);if(!t)return this;let e=this.x;const[i,r]=t.valid,s=2*r;let n;return e>r?(n=Math.ceil(Math.abs(e-r)/s),e-=n*s):e<i&&(n=Math.ceil(Math.abs(e-i)/s),e+=n*s),this._set("x",e),this}distance(t){return a1e(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};h([p({readOnly:!0})],Po.prototype,"cache",null),h([p({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Po.prototype,"hasM",null),h([p({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Po.prototype,"hasZ",null),h([p({type:Number})],Po.prototype,"latitude",null),h([p({type:Number})],Po.prototype,"longitude",null),h([p({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),mi(t=>isNaN(t)?t:vl(t))],Po.prototype,"x",void 0),h([it("x")],Po.prototype,"writeX",null),h([Ye("x")],Po.prototype,"readX",null),h([p({type:Number,json:{write:!0}})],Po.prototype,"y",void 0),h([p({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Po.prototype,"z",void 0),h([p({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Po.prototype,"m",void 0),Po=LI=h([ce("esri.geometry.Point")],Po),Po.prototype.toJSON.isDefaultToJSON=!0;const Ct=Po,iO=[0,0];function W4(t,e){return!!ee(e)&&Bo(t,e.x,e.y,e.z)}function dlt(t,e){if(!e.points||e.points.length)return!1;for(const i of e.points)if(!qb(t,i))return!1;return!0}function c1e(t,e){const{xmin:i,ymin:r,zmin:s,xmax:n,ymax:o,zmax:a}=e;return t.hasZ&&e.hasZ?Bo(t,i,r,s)&&Bo(t,i,o,s)&&Bo(t,n,o,s)&&Bo(t,n,r,s)&&Bo(t,i,r,a)&&Bo(t,i,o,a)&&Bo(t,n,o,a)&&Bo(t,n,r,a):Bo(t,i,r)&&Bo(t,i,o)&&Bo(t,n,o)&&Bo(t,n,r)}function qb(t,e){return Bo(t,e[0],e[1])}function h1e(t,e){return Bo(t,e[0],e[1],e[2])}function Bo(t,e,i,r){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(r==null||!t.hasZ||r>=t.zmin&&r<=t.zmax)}function aX(t,e){return iO[1]=e.y,iO[0]=e.x,d1e(t,iO)}function d1e(t,e){return lX(t.rings,e)}function lX(t,e){if(!t)return!1;if(p1e(t))return QV(!1,t,e);let i=!1;for(let r=0,s=t.length;r<s;r++)i=QV(i,t[r],e);return i}function p1e(t){return!Array.isArray(t[0][0])}function QV(t,e,i){const[r,s]=i;let n=t,o=0;for(let a=0,l=e.length;a<l;a++){o++,o===l&&(o=0);const[u,c]=e[a],[d,f]=e[o];(c<s&&f>=s||f<s&&c>=s)&&u+(s-c)/(f-c)*(d-u)<r&&(n=!n)}return n}function f1e(t,e){return W4(t,e)}function m1e(t,e){const i=t.hasZ&&e.hasZ;let r,s,n;if(t.xmin<=e.xmin){if(r=e.xmin,t.xmax<r)return!1}else if(r=t.xmin,e.xmax<r)return!1;if(t.ymin<=e.ymin){if(s=e.ymin,t.ymax<s)return!1}else if(s=t.ymin,e.ymax<s)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(n=e.zmin,t.zmax<n)return!1}else if(n=t.zmin,e.zmax<n)return!1}return!0}function y1e(t,e){const{points:i,hasZ:r}=e,s=r?h1e:qb;for(const n of i)if(s(t,n))return!0;return!1}const R0=[0,0],k0=[0,0],L0=[0,0],P0=[0,0],g1e=[R0,k0,L0,P0],uX=[[L0,R0],[R0,k0],[k0,P0],[P0,L0]];function v1e(t,e){return b1e(t,e.rings)}function b1e(t,e){R0[0]=t.xmin,R0[1]=t.ymax,k0[0]=t.xmax,k0[1]=t.ymax,L0[0]=t.xmin,L0[1]=t.ymin,P0[0]=t.xmax,P0[1]=t.ymin;for(const i of g1e)if(lX(e,i))return!0;for(const i of e){if(!i.length)continue;let r=i[0];if(qb(t,r))return!0;for(let s=1;s<i.length;s++){const n=i[s];if(qb(t,n)||cX(r,n,uX))return!0;r=n}}return!1}function w1e(t,e){R0[0]=t.xmin,R0[1]=t.ymax,k0[0]=t.xmax,k0[1]=t.ymax,L0[0]=t.xmin,L0[1]=t.ymin,P0[0]=t.xmax,P0[1]=t.ymin;const i=e.paths;for(const r of i){if(!i.length)continue;let s=r[0];if(qb(t,s))return!0;for(let n=1;n<r.length;n++){const o=r[n];if(qb(t,o)||cX(s,o,uX))return!0;s=o}}return!1}const Sn=[0,0];function _1e(t){for(let e=0;e<t.length;e++){const i=t[e];for(let s=0;s<i.length-1;s++){const n=i[s],o=i[s+1];for(let a=e+1;a<t.length;a++)for(let l=0;l<t[a].length-1;l++){const u=t[a][l],c=t[a][l+1];if(Qk(n,o,u,c,Sn)&&!(Sn[0]===n[0]&&Sn[1]===n[1]||Sn[0]===u[0]&&Sn[1]===u[1]||Sn[0]===o[0]&&Sn[1]===o[1]||Sn[0]===c[0]&&Sn[1]===c[1]))return!0}}const r=i.length;if(!(r<=4))for(let s=0;s<r-3;s++){let n=r-1;s===0&&(n=r-2);const o=i[s],a=i[s+1];for(let l=s+2;l<n;l++){const u=i[l],c=i[l+1];if(Qk(o,a,u,c,Sn)&&!(Sn[0]===o[0]&&Sn[1]===o[1]||Sn[0]===u[0]&&Sn[1]===u[1]||Sn[0]===a[0]&&Sn[1]===a[1]||Sn[0]===c[0]&&Sn[1]===c[1]))return!0}}}return!1}function cX(t,e,i){for(let r=0;r<i.length;r++)if(Qk(t,e,i[r][0],i[r][1]))return!0;return!1}function Qk(t,e,i,r,s){const[n,o]=t,[a,l]=e,[u,c]=i,[d,f]=r,m=d-u,g=n-u,v=a-n,b=f-c,_=o-c,S=l-o,M=b*v-m*S;if(M===0)return!1;const x=(m*_-b*g)/M,T=(v*_-S*g)/M;return x>=0&&x<=1&&T>=0&&T<=1&&(s&&(s[0]=n+x*(a-n),s[1]=o+x*(l-o)),!0)}function x1e(t){switch(t){case"esriGeometryEnvelope":case"extent":return m1e;case"esriGeometryMultipoint":case"multipoint":return y1e;case"esriGeometryPoint":case"point":return f1e;case"esriGeometryPolygon":case"polygon":return v1e;case"esriGeometryPolyline":case"polyline":return w1e}}var Zl;function S1e(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function Vp(t,e,i){return e==null?i:i==null?e:t(e,i)}let en=Zl=class extends Ep{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,r,s){return S1e(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?Tt.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:r,spatialReference:s??Tt.WGS84}}static fromBounds(t,e){return new Zl({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}static fromPoint(t){return new Zl({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new Ct({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new Zl;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&kI(e,i)&&(t=e.isWebMercator?um(t):Bg(t,!0)),t.type==="point"?W4(this,t):t.type==="extent"&&c1e(this,t)}equals(t){if(this===t)return!0;if(Re(t))return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&kI(e,i)&&(t=e.isWebMercator?um(t):Bg(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),i=this.width*e,r=this.height*e;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const s=(this.zmax-this.zmin)*e;this.zmin+=s,this.zmax-=s}if(this.hasM){const s=(this.mmax-this.mmin)*e;this.mmin+=s,this.mmax-=s}return this}intersects(t){if(Re(t))return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,i=t.spatialReference;return e&&i&&!bs(e,i)&&kI(e,i)&&(t=e.isWebMercator?um(t):Bg(t,!0)),x1e(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Vp(Math.min,this.zmin,t.zmin),this.zmax=Vp(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Vp(Math.min,this.mmin,t.mmin),this.mmax=Vp(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:Re(t)||!this.intersects(t)?null:(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Vp(Math.max,this.zmin,t.zmin),this.zmax=Vp(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Vp(Math.max,this.mmin,t.mmin),this.mmax=Vp(Math.min,this.mmax,t.mmax)),this)}toJSON(t){return this.write({},t)}_shiftCM(t=Il(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,i=this._getCM(t);if(i){const r=e.isWebMercator?Bg(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(r.x=this._normalizeX(r.x,t).x),this.spatialReference=new Tt(_c((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(t){let e=null;const[i,r]=t.valid,s=this.xmin,n=this.xmax;return s>=i&&s<=r&&n>=i&&n<=r||(e=this.center),e}_normalize(t,e,i){const r=this.spatialReference;if(!r)return this;const s=i??Il(r);if(s==null)return this;const n=this._getParts(s).map(l=>l.extent);if(n.length<2)return n[0]||this;if(n.length>2)return t?this._shiftCM(s):this.set({xmin:s.valid[0],xmax:s.valid[1]});if(t)return this._shiftCM(s);if(e)return n;let o=!0,a=!0;return n.forEach(l=>{l.hasZ||(o=!1),l.hasM||(a=!1)}),{rings:n.map(l=>{const u=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(o){const c=(l.zmax-l.zmin)/2;for(let d=0;d<u.length;d++)u[d].push(c)}if(a){const c=(l.mmax-l.mmin)/2;for(let d=0;d<u.length;d++)u[d].push(c)}return u}),hasZ:o,hasM:a,spatialReference:r}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:s,ymax:n,spatialReference:o}=this,a=this.width,l=this.xmin,u=this.xmax;let c;t=t||Il(o);const[d,f]=t.valid;c=this._normalizeX(this.xmin,t);const m=c.x,g=c.frameId;c=this._normalizeX(this.xmax,t);const v=c.x,b=c.frameId,_=m===v&&a>0;if(a>2*f){const S=new Zl(l<u?m:v,s,f,n,o),M=new Zl(d,s,l<u?v:m,n,o),x=new Zl(0,s,f,n,o),T=new Zl(d,s,0,n,o),I=[],$=[];S.contains(x)&&I.push(g),S.contains(T)&&$.push(g),M.contains(x)&&I.push(b),M.contains(T)&&$.push(b);for(let L=g+1;L<b;L++)I.push(L),$.push(L);e.push({extent:S,frameIds:[g]},{extent:M,frameIds:[b]},{extent:x,frameIds:I},{extent:T,frameIds:$})}else m>v||_?e.push({extent:new Zl(m,s,f,n,o),frameIds:[g]},{extent:new Zl(d,s,v,n,o),frameIds:[b]}):e.push({extent:new Zl(m,s,v,n,o),frameIds:[g]});this.cache._parts=e}const i=this.hasZ,r=this.hasM;if(i||r){const s={};i&&(s.zmin=this.zmin,s.zmax=this.zmax),r&&(s.mmin=this.mmin,s.mmax=this.mmax);for(let n=0;n<e.length;n++)e[n].extent.set(s)}return e}_normalizeX(t,e){const[i,r]=e.valid,s=2*r;let n,o=0;return t>r?(n=Math.ceil(Math.abs(t-r)/s),t-=n*s,o=n):t<i&&(n=Math.ceil(Math.abs(t-i)/s),t+=n*s,o=-n),{x:t,frameId:o}}};h([p({readOnly:!0})],en.prototype,"cache",null),h([p({readOnly:!0})],en.prototype,"center",null),h([p({readOnly:!0})],en.prototype,"extent",null),h([p({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],en.prototype,"hasM",null),h([p({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],en.prototype,"hasZ",null),h([p({readOnly:!0})],en.prototype,"height",null),h([p({readOnly:!0})],en.prototype,"width",null),h([p({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],en.prototype,"xmin",void 0),h([p({type:Number,json:{write:!0}})],en.prototype,"ymin",void 0),h([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],en.prototype,"mmin",void 0),h([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],en.prototype,"zmin",void 0),h([p({type:Number,json:{write:!0}})],en.prototype,"xmax",void 0),h([p({type:Number,json:{write:!0}})],en.prototype,"ymax",void 0),h([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],en.prototype,"mmax",void 0),h([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],en.prototype,"zmax",void 0),en=Zl=h([ce("esri.geometry.Extent")],en),en.prototype.toJSON.isDefaultToJSON=!0;const Xt=en;let Ix;const E1e=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale;function hX(){return E1e??globalThis.navigator?.language??"en"}function gu(){return Ix===void 0&&(Ix=hX()),Ix}const Mx=[];function dX(t){return Mx.push(t),{remove(){Mx.splice(Mx.indexOf(t),1)}}}const Xk=[];function p9(t){return Xk.push(t),{remove(){Mx.splice(Xk.indexOf(t),1)}}}function T1e(){const t=hX();Ix!==t&&(Ix=t,[...Xk].forEach(e=>{e.call(null,t)}),[...Mx].forEach(e=>{e.call(null,t)}))}globalThis.addEventListener?.("languagechange",T1e);var eL;const I1e=new si({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Yl=eL=class extends Pt{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new eL({categories:this.categories?Le(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let i=[];this.categories&&(i=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let r="";if(this.extent){const o=H4(this.extent,Tt.WGS84);ee(o)&&(r=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let s=this.query;!this.disableExtraQuery&&t.extraQuery&&(s="("+s+")"+t.extraQuery);const n={categories:i,bbox:r,q:s,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(n.sortField=this.sortField.split(",").map(o=>I1e.toJSON(o.trim())).join(","),n.sortOrder=this.sortOrder),{query:{...e,...n}}}};h([p()],Yl.prototype,"categories",void 0),h([p()],Yl.prototype,"disableExtraQuery",void 0),h([p({type:Xt})],Yl.prototype,"extent",void 0),h([p()],Yl.prototype,"filter",void 0),h([p()],Yl.prototype,"num",void 0),h([p()],Yl.prototype,"query",void 0),h([p()],Yl.prototype,"sortField",void 0),h([p()],Yl.prototype,"sortOrder",null),h([p()],Yl.prototype,"start",void 0),Yl=eL=h([ce("esri.portal.PortalQueryParams")],Yl);const Zd=Yl;let ky=class extends Pt{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};h([p()],ky.prototype,"nextQueryParams",void 0),h([p()],ky.prototype,"queryParams",void 0),h([p()],ky.prototype,"results",void 0),h([p()],ky.prototype,"total",void 0),ky=h([ce("esri.portal.PortalQueryResult")],ky);const M1e=ky;let pd=class extends Je{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new Ce("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};h([p({type:Date})],pd.prototype,"created",void 0),h([p()],pd.prototype,"id",void 0),h([p()],pd.prototype,"portal",void 0),h([p()],pd.prototype,"title",void 0),h([p({readOnly:!0})],pd.prototype,"url",null),h([p()],pd.prototype,"username",void 0),pd=h([ce("esri.portal.PortalFolder")],pd);const A1e=pd;let tn=class extends Je{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){const e=this.url,i=this.thumbnail;return e&&i&&this.portal?this.portal?.normalizeUrl(`${e}/info/${i}?f=json`):null}get url(){const e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return Wo(this.portal).request(this.url+"/categorySchema",e).then(i=>{const r=i.categorySchema||[];return r.some(s=>s.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):r})}fetchMembers(e){return Wo(this.portal).request(this.url+"/users",e)}getThumbnailUrl(e){let i=this.thumbnailUrl;return i&&e&&(i+=`&w=${e}`),i}toJSON(){throw new Ce("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(e,i){let r=ns(Zd,e);const s=Wo(this.portal);return parseFloat(s.currentVersion)>5?(r=r||new Zd,s.queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",i)):(r=r?r.clone():new Zd,r.query="group:"+this.id+(r.query?" "+r.query:""),s.queryItems(r,i))}_fetchCategorySchemaSet(e,i){const r=Wo(this.portal);return r.fetchSelf(r.authMode,!0,i).then(s=>{const n=s.contentCategorySetsGroupQuery;if(n){const o=new Zd;return o.disableExtraQuery=!0,o.num=1,o.query=n,r.queryGroups(o,i)}throw new Ce("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(s=>{if(s.total){const n=s.results[0],o=new Zd;return o.num=1,o.query=`typekeywords:"${e}"`,n.queryItems(o,i)}throw new Ce("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(s=>s.total?s.results[0].fetchData("json",i).then(n=>{const o=n&&n.categorySchema;return o&&o.length?o:[]}):[])}};h([p()],tn.prototype,"access",void 0),h([p({type:Date})],tn.prototype,"created",void 0),h([p()],tn.prototype,"description",void 0),h([p()],tn.prototype,"id",void 0),h([p()],tn.prototype,"isInvitationOnly",void 0),h([p({type:Date})],tn.prototype,"modified",void 0),h([p()],tn.prototype,"owner",void 0),h([p()],tn.prototype,"portal",void 0),h([p()],tn.prototype,"snippet",void 0),h([p()],tn.prototype,"sortField",void 0),h([p()],tn.prototype,"sortOrder",void 0),h([p()],tn.prototype,"tags",void 0),h([p()],tn.prototype,"thumbnail",void 0),h([p({readOnly:!0})],tn.prototype,"thumbnailUrl",null),h([p()],tn.prototype,"title",void 0),h([p({readOnly:!0})],tn.prototype,"url",null),tn=h([ce("esri.portal.PortalGroup")],tn);const tL=tn,C1e=Object.freeze(Object.defineProperty({__proto__:null,default:tL},Symbol.toStringTag,{value:"Module"}));var iL;let Tr=iL=class extends Je{constructor(...t){super(...t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){const t=this.get("portal.restUrl");return t?`${t}/content/users/${this.username}`:null}get url(){const t=this.get("portal.restUrl");return t?`${t}/community/users/${this.username}`:null}addItem(t){const e=t&&t.item,i=t&&t.data,r=t&&t.folder,s={method:"post"};e&&(s.query=e.createPostQuery(),i!=null&&(typeof i=="string"?s.query.text=i:typeof i=="object"&&(s.query.text=JSON.stringify(i))));let n=this.userContentUrl;return r&&(n+="/"+(typeof r=="string"?r:r.id)),this.portal.request(n+"/addItem",s).then(o=>(e.id=o.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}deleteItem(t){let e=this.userContentUrl;return t.ownerFolder&&(e+="/"+t.ownerFolder),this.portal.request(e+`/items/${t.id}/delete`,{method:"post"}).then(()=>{t.id=null,t.portal=null})}deleteItems(t){const e=this.userContentUrl+"/deleteItems",i=t.map(r=>r.id);if(i.length){const r={method:"post",query:{items:i.join(",")}};return this.portal.request(e,r).then(()=>{t.forEach(s=>{s.id=null,s.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let i;return i=e&&e.folders?e.folders.map(r=>{const s=A1e.fromJSON(r);return s.portal=this.portal,s}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(i=>{const r=tL.fromJSON(i);return r.portal=this.portal,r}):[],e})}fetchItems(t){const e=t??{};let i,r=this.userContentUrl??"";return e.folder&&(r+="/"+e.folder.id),De(()=>Promise.resolve().then(()=>pX),void 0,import.meta.url).then(({default:s})=>{i=s;const n={folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"};return this.portal.request(r,{query:n})}).then(s=>{let n;return s&&s.items?(n=s.items.map(o=>{const a=i.fromJSON(o);return a.portal=this.portal,a}),Promise.all(n.map(o=>o.load())).catch(o=>o).then(()=>({items:n,nextStart:s.nextStart,total:s.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new tL({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new Ce("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new Ce("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new iL;return e.sourceJSON=t,e.read(t),e}};h([p()],Tr.prototype,"access",void 0),h([p({type:Date})],Tr.prototype,"created",void 0),h([p()],Tr.prototype,"culture",void 0),h([p()],Tr.prototype,"description",void 0),h([p()],Tr.prototype,"email",void 0),h([p()],Tr.prototype,"favGroupId",void 0),h([p()],Tr.prototype,"fullName",void 0),h([p({type:Date})],Tr.prototype,"modified",void 0),h([p()],Tr.prototype,"orgId",void 0),h([p()],Tr.prototype,"portal",void 0),h([p()],Tr.prototype,"preferredView",void 0),h([p()],Tr.prototype,"privileges",void 0),h([p()],Tr.prototype,"region",void 0),h([p()],Tr.prototype,"role",void 0),h([p()],Tr.prototype,"roleId",void 0),h([p()],Tr.prototype,"sourceJSON",void 0),h([p()],Tr.prototype,"thumbnail",void 0),h([p({readOnly:!0})],Tr.prototype,"thumbnailUrl",null),h([p()],Tr.prototype,"units",void 0),h([p({readOnly:!0})],Tr.prototype,"userContentUrl",null),h([p({readOnly:!0})],Tr.prototype,"url",null),h([p()],Tr.prototype,"username",void 0),h([p()],Tr.prototype,"userType",void 0),Tr=iL=h([ce("esri.portal.PortalUser")],Tr);const f9=Tr,$1e=Object.freeze(Object.defineProperty({__proto__:null,default:f9},Symbol.toStringTag,{value:"Module"}));var il;let rO;const XV={PortalGroup:()=>De(()=>Promise.resolve().then(()=>C1e),void 0,import.meta.url),PortalItem:()=>De(()=>Promise.resolve().then(()=>pX),void 0,import.meta.url),PortalUser:()=>De(()=>Promise.resolve().then(()=>$1e),void 0,import.meta.url)};let bt=il=class extends A3(Ll){constructor(t){super(t),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Li.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(t){return typeof t=="string"?{url:t}:t}destroy(){this._esriIdCredentialCreateHandle=gs(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(t){if(t)for(const e of t)Li.request.trustedServers.includes(e)||Li.request.trustedServers.push(e);return t}readDefaultBasemap(t){return this._readBasemap(t)}readDefaultDevBasemap(t){return this._readBasemap(t)}readDefaultVectorBasemap(t){return this._readBasemap(t)}get extraQuery(){const t=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let t=this.url;if(t){const e=t.indexOf("/sharing");t=e>0?t.substring(0,e):this.url.replace(/\/+$/,""),t+="/sharing/rest"}return t}get thumbnailUrl(){const t=this.restUrl,e=this.thumbnail;return t&&e?this._normalizeSSL(t+"/portals/self/resources/"+e):null}readUrlKey(t){return t&&t.toLowerCase()}readUser(t){let e=null;return t&&(e=f9.fromJSON(t),e.portal=this),e}load(t){const e=De(()=>Promise.resolve().then(()=>X1e),void 0,import.meta.url).then(({default:i})=>{pr(t),rO=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,t)).then(i=>{if(xr){const r=xr;this.credential=r.findCredential(this.restUrl),this.credential||this.authMode!==il.AUTH_MODE_AUTO||(this._esriIdCredentialCreateHandle=r.on("credential-create",()=>{r.findCredential(this.restUrl)&&this.signIn().catch(()=>{})}))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(e),Promise.resolve(this)}async createElevationLayers(){await this.load();const t=this._getHelperService("defaultElevationLayers"),e=(await De(()=>import("./ElevationLayer-a64895fa.js"),["./ElevationLayer-a64895fa.js","./preload-helper-388ac9d5.js"],import.meta.url)).default;return t?t.map(i=>new e({id:i.id,url:i.url})):[]}fetchBasemaps(t,e){const i=new Zd;return i.query=t||(Li.apiKey&&sX(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0,this.queryGroups(i,e).then(r=>{if(i.num=100,i.query='type:"Web Map" -type:"Web Application"',r.total){const s=r.results[0];return i.sortField=s.sortField||"name",i.sortOrder=s.sortOrder||"desc",s.queryItems(i,e)}return null}).then(r=>{let s;return s=r&&r.total?r.results.filter(n=>n.type==="Web Map").map(n=>new rO({portalItem:n})):[],s})}fetchCategorySchema(t){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",t).then(e=>e.categorySchema):Rl(t)?Promise.reject(yr()):Promise.resolve([])}fetchFeaturedGroups(t){const e=this.featuredGroups,i=new Zd;if(i.num=100,i.sortField="title",e&&e.length){const r=[];for(const s of e)r.push(`(title:"${s.title}" AND owner:${s.owner})`);return i.query=r.join(" OR "),this.queryGroups(i,t).then(s=>s.results)}return Rl(t)?Promise.reject(yr()):Promise.resolve([])}fetchRegions(t){const e=this.user?.culture||this.culture||gu();return this.request(this.restUrl+"/portals/regions",{...t,query:{culture:e}})}fetchSettings(t){const e=this.user?.culture||this.culture||gu();return this.request(this.restUrl+"/portals/self/settings",{...t,query:{culture:e}})}static getDefault(){return il._default&&!il._default.destroyed||(il._default=new il),il._default}queryGroups(t,e){return this.queryPortal("/community/groups",t,"PortalGroup",e)}queryItems(t,e){return this.queryPortal("/search",t,"PortalItem",e)}queryUsers(t,e){return t.sortField||(t.sortField="username"),this.queryPortal("/community/users",t,"PortalUser",e)}fetchSelf(t=this.authMode,e=!1,i){const r=this.restUrl+"/portals/self",s={authMode:t,query:{culture:gu().toLowerCase()},...i};return s.authMode==="auto"&&(s.authMode="no-prompt"),e&&(s.query.default=!0),this.request(r,s)}queryPortal(t,e,i,r){const s=ns(Zd,e),n=o=>this.request(this.restUrl+t,{...s.toRequestOptions(this),...r}).then(a=>{const l=s.clone();return l.start=a.nextStart,new M1e({nextQueryParams:l,queryParams:s,total:a.total,results:il._resultsToTypedArray(o,{portal:this},a,r)})}).then(a=>Promise.all(a.results.map(l=>typeof l.when=="function"?l.when():a)).then(()=>a,l=>(_a(l),a)));return i&&XV[i]?XV[i]().then(({default:o})=>(pr(r),n(o))):n()}signIn(){if(this.authMode===il.AUTH_MODE_ANONYMOUS)return Promise.reject(new Ce("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const t=e=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(e||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=e,this.fetchSelf("immediate"))):this.user&&this.credential===e?null:(this.credential=e,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return xr?xr.getCredential(this.restUrl).then(e=>t(e)):t(this.credential)}normalizeUrl(t){const e=this.credential&&this.credential.token;return this._normalizeSSL(e?t+(t.includes("?")?"&":"?")+"token="+e:t)}requestToTypedArray(t,e,i){return this.request(t,e).then(r=>{const s=il._resultsToTypedArray(i,{portal:this},r);return Promise.all(s.map(n=>typeof n.when=="function"?n.when():r)).then(()=>s,()=>s)})}request(t,e={}){const i={f:"json",...e.query},{authMode:r=this.authMode===il.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:s=null,cacheBust:n=!1,method:o="auto",responseType:a="json",signal:l}=e,u={authMode:r,body:s,cacheBust:n,method:o,query:i,responseType:a,timeout:0,signal:l};return Et(this._normalizeSSL(t),u).then(c=>c.data)}toJSON(){throw new Ce("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new il({sourceJSON:t})}_getHelperService(t){const e=this.helperServices&&this.helperServices[t];if(!e)throw new Ce("portal:service-not-found",`The \`helperServices\` do not include an entry named "${t}"`);return e}_normalizeSSL(t){return t.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(t){if(t){const e=rO.fromJSON(t);return e.portalItem={portal:this},e}return null}static _resultsToTypedArray(t,e,i,r){let s=[];if(i){const n=ee(r)?r.signal:null;s=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(t||e)&&(s=s.map(o=>{const a=Object.assign(t?t.fromJSON(o):o,e);return typeof a.load=="function"&&a.load(n),a}))}else s=[];return s}};bt.AUTH_MODE_ANONYMOUS="anonymous",bt.AUTH_MODE_AUTO="auto",bt.AUTH_MODE_IMMEDIATE="immediate",h([p()],bt.prototype,"access",void 0),h([p()],bt.prototype,"allSSL",void 0),h([p()],bt.prototype,"authMode",void 0),h([p()],bt.prototype,"authorizedCrossOriginDomains",void 0),h([Ye("authorizedCrossOriginDomains")],bt.prototype,"readAuthorizedCrossOriginDomains",null),h([p()],bt.prototype,"basemapGalleryGroupQuery",void 0),h([p()],bt.prototype,"bingKey",void 0),h([p()],bt.prototype,"canListApps",void 0),h([p()],bt.prototype,"canListData",void 0),h([p()],bt.prototype,"canListPreProvisionedItems",void 0),h([p()],bt.prototype,"canProvisionDirectPurchase",void 0),h([p()],bt.prototype,"canSearchPublic",void 0),h([p()],bt.prototype,"canShareBingPublic",void 0),h([p()],bt.prototype,"canSharePublic",void 0),h([p()],bt.prototype,"canSignInArcGIS",void 0),h([p()],bt.prototype,"canSignInIDP",void 0),h([p()],bt.prototype,"colorSetsGroupQuery",void 0),h([p()],bt.prototype,"commentsEnabled",void 0),h([p({type:Date})],bt.prototype,"created",void 0),h([p()],bt.prototype,"credential",void 0),h([p()],bt.prototype,"culture",void 0),h([p()],bt.prototype,"currentVersion",void 0),h([p()],bt.prototype,"customBaseUrl",void 0),h([p()],bt.prototype,"defaultBasemap",void 0),h([Ye("defaultBasemap")],bt.prototype,"readDefaultBasemap",null),h([p()],bt.prototype,"defaultDevBasemap",void 0),h([Ye("defaultDevBasemap")],bt.prototype,"readDefaultDevBasemap",null),h([p({type:Xt})],bt.prototype,"defaultExtent",void 0),h([p()],bt.prototype,"defaultVectorBasemap",void 0),h([Ye("defaultVectorBasemap")],bt.prototype,"readDefaultVectorBasemap",null),h([p()],bt.prototype,"description",void 0),h([p()],bt.prototype,"devBasemapGalleryGroupQuery",void 0),h([p()],bt.prototype,"eueiEnabled",void 0),h([p({readOnly:!0})],bt.prototype,"extraQuery",null),h([p()],bt.prototype,"featuredGroups",void 0),h([p()],bt.prototype,"featuredItemsGroupQuery",void 0),h([p()],bt.prototype,"galleryTemplatesGroupQuery",void 0),h([p()],bt.prototype,"livingAtlasGroupQuery",void 0),h([p()],bt.prototype,"hasCategorySchema",void 0),h([p()],bt.prototype,"helpBase",void 0),h([p()],bt.prototype,"helperServices",void 0),h([p()],bt.prototype,"helpMap",void 0),h([p()],bt.prototype,"homePageFeaturedContent",void 0),h([p()],bt.prototype,"homePageFeaturedContentCount",void 0),h([p()],bt.prototype,"httpPort",void 0),h([p()],bt.prototype,"httpsPort",void 0),h([p()],bt.prototype,"id",void 0),h([p()],bt.prototype,"ipCntryCode",void 0),h([p({readOnly:!0})],bt.prototype,"isOrganization",null),h([p()],bt.prototype,"isPortal",void 0),h([p()],bt.prototype,"isReadOnly",void 0),h([p({readOnly:!0})],bt.prototype,"itemPageUrl",null),h([p()],bt.prototype,"layerTemplatesGroupQuery",void 0),h([p()],bt.prototype,"maxTokenExpirationMinutes",void 0),h([p({type:Date})],bt.prototype,"modified",void 0),h([p()],bt.prototype,"name",void 0),h([p()],bt.prototype,"portalHostname",void 0),h([p()],bt.prototype,"portalMode",void 0),h([p()],bt.prototype,"portalProperties",void 0),h([p()],bt.prototype,"region",void 0),h([p({readOnly:!0})],bt.prototype,"restUrl",null),h([p()],bt.prototype,"rotatorPanels",void 0),h([p()],bt.prototype,"showHomePageDescription",void 0),h([p()],bt.prototype,"sourceJSON",void 0),h([p()],bt.prototype,"staticImagesUrl",void 0),h([p({json:{name:"2DStylesGroupQuery"}})],bt.prototype,"stylesGroupQuery2d",void 0),h([p({json:{name:"stylesGroupQuery"}})],bt.prototype,"stylesGroupQuery3d",void 0),h([p()],bt.prototype,"supportsHostedServices",void 0),h([p()],bt.prototype,"symbolSetsGroupQuery",void 0),h([p()],bt.prototype,"templatesGroupQuery",void 0),h([p()],bt.prototype,"thumbnail",void 0),h([p({readOnly:!0})],bt.prototype,"thumbnailUrl",null),h([p()],bt.prototype,"units",void 0),h([p()],bt.prototype,"url",void 0),h([p()],bt.prototype,"urlKey",void 0),h([Ye("urlKey")],bt.prototype,"readUrlKey",null),h([p()],bt.prototype,"user",void 0),h([Ye("user")],bt.prototype,"readUser",null),h([p()],bt.prototype,"useStandardizedQuery",void 0),h([p()],bt.prototype,"useVectorBasemaps",void 0),h([p()],bt.prototype,"vectorBasemapGalleryGroupQuery",void 0),bt=il=h([ce("esri.portal.Portal")],bt);const Mo=bt,O1e=tt.getLogger("esri.assets");function Ui(t){if(!Li.assetsPath)throw O1e.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new Ce("assets:path-not-set","config.assetsPath is not set");return $0(Li.assetsPath,t)}let lf=class extends Pt{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this._normalizePath(e.path,e.portalItem)}:e}set path(e){ee(e)&&Tl(e)?tt.getLogger(this.declaredClass).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",i){const r=this.url;if(Re(r))throw new Ce("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:e,query:{token:this.portalItem.apiKey},signal:gK(i,"signal")})}async update(e,i){return(await De(()=>import("./resourceUtils-810dc5ab.js"),["./resourceUtils-810dc5ab.js","./preload-helper-388ac9d5.js"],import.meta.url)).addOrUpdateResource(this,"update",e,i)}hasPath(){return ee(this.path)}_normalizePath(e,i){return Re(e)?e:(e=e.replace(/^\/+/,""),ee(i)&&Tl(e)&&(e=r9(e,i.itemUrl)),e?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};h([p()],lf.prototype,"portalItem",void 0),h([p({type:String,value:null})],lf.prototype,"path",null),h([mi("path")],lf.prototype,"_castPath",null),h([p({type:String,readOnly:!0})],lf.prototype,"url",null),h([p({type:String,readOnly:!0})],lf.prototype,"itemRelativeUrl",null),lf=h([ce("esri.portal.PortalItemResource")],lf);const R1e=lf;let p2=class extends Pt{constructor(e){super(e),this.created=null,this.rating=null}};h([p()],p2.prototype,"created",void 0),h([p()],p2.prototype,"rating",void 0),p2=h([ce("esri.portal.PortalRating")],p2);const sO=p2;var Ly;const k1e=new Set(["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","GeoJson","CSV","KML","WFS","WMTS","WMS","Feed"]),L1e=new Set(["KML","GeoJson","CSV"]);let di=Ly=class extends A3(Ll){static from(t){return Bn(Ly,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let i=t;return t==="Feature Service"||t==="Feature Collection"?i=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?i=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?i="Scene Layer":t==="Video Service"?i="Video Layer":t==="Scene Package"?i="Scene Layer Package":t==="Stream Service"?i="Feature Layer":t==="Geoprocessing Service"&&this.portal&&this.portal.isPortal?i=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geocoding Service"?i="Locator":t==="Geoenrichment Service"?i="GeoEnrichment Service":t==="Microsoft Powerpoint"?i="Microsoft PowerPoint":t==="GeoJson"?i="GeoJSON":t==="Globe Service"?i="Globe Layer":t==="Vector Tile Service"?i="Tile Layer":t==="netCDF"?i="NetCDF":t==="Map Service"?i=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t&&t.toLowerCase().includes("add in")?i=t.replace(/(add in)/gi,"Add-In"):t==="datastore catalog service"?i="Big Data File Share":t==="Compact Tile Package"?i="Tile Package (tpkx)":t==="OGCFeatureServer"?i="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?i="Instant App":t==="Insights Page"&&(i="Insights Report"),i}readExtent(t){return t&&t.length?new Xt(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){const t=this.type&&this.type.toLowerCase()||"",e=this.typeKeywords||[],i="esri/images/portal/",r="16";let s,n=!1,o=!1,a=!1,l=!1,u=!1,c=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(n=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(o=e.includes("Table"),a=e.includes("Route Layer"),l=e.includes("Markup"),u=e.includes("Spatiotemporal"),c=e.includes("UtilityNetwork"),s=u&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":u?"spatiotemporal":n?"featureshosted":c?"utilitynetwork":"features"):s=t==="map service"||t==="wms"||t==="wmts"?n||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages":t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="video service"?"mediaservice":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="geoprocessing service"?e.includes("Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":t==="geodata service"?"geodataservice":"layers"):s=t==="web map"||t==="cityengine web scene"?"maps":t==="web scene"?e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?"instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?"apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?"mapsgray":t==="service definition"||t==="csv"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="360 vr experience"||t==="netcdf"||t==="administrative report"?"datafiles":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?"appsgray":t==="arcgis pro add in"||t==="arcgis pro configuration"?"addindesktop":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="form"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="image"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?"datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?"toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?"layersgray":t==="scene package"?"scenepackage":t==="mobile scene package"?"mobilescenepackage":t==="tile package"||t==="compact tile package"?"tilepackage":t==="task file"?"taskfile":t==="report template"?"report-template":t==="statistical data collection"?"statisticaldatacollection":t==="insights workbook"?"workbook":t==="insights model"?"insightsmodel":t==="insights page"?"insightspage":t==="insights theme"?"insightstheme":t==="hub initiative"?"hubinitiative":t==="hubpage"?"hubpage":t==="hub event"?"hubevent":t==="hub site application"?"hubsite":t==="hub project"?"hubproject":t==="relational database connection"?"relationaldatabaseconnection":t==="big data file share"?"datastorecollection":t==="image collection"?"imagecollection":t==="style"?"style":t==="desktop style"?"desktopstyle":t==="dashboard"?"dashboard":t==="raster function template"?"rasterprocessingtemplate":t==="vector tile package"?"vectortilepackage":t==="ortho mapping project"?"orthomappingproject":t==="ortho mapping template"?"orthomappingtemplate":t==="solution"?"solutions":t==="geopackage"?"geopackage":t==="deep learning package"?"deeplearningpackage":t==="real time analytic"?"realtimeanalytics":t==="big data analytic"?"bigdataanalytics":t==="feed"?"feed":t==="excalibur imagery project"?"excaliburimageryproject":t==="notebook"?"notebook":t==="storymap"?"storymap":t==="survey123 add in"?"survey123addin":t==="mission"?"mission":t==="mission report"?"missionreport":t==="quickcapture project"?"quickcaptureproject":t==="pro report"?"proreport":t==="pro report template"?"proreporttemplate":t==="urban model"?"urbanmodel":t==="web experience"?"experiencebuilder":t==="web experience template"?"webexperiencetemplate":t==="experience builder widget"?"experiencebuilderwidget":t==="experience builder widget package"?"experiencebuilderwidgetpackage":t==="workflow"?"workflow":t==="insights script"?"insightsscript":t==="kernel gateway connection"?"kernelgatewayconnection":t==="hub initiative template"?"hubinitiativetemplate":t==="storymap theme"?"storymaptheme":t==="knowledge graph"?"knowledgegraph":t==="native application"?"nativeapp":t==="native application installer"?"nativeappinstaller":t==="link chart"?"linkchart":t==="investigation"?"investigation":t==="ogcfeatureserver"?"features":t==="pro project"?"proproject":t==="insights workbook package"?"insightsworkbookpackage":t==="apache parquet"?"apacheparquet":t==="notebook code snippets"||t==="notebook code snippet library"?"notebookcodesnippets":t==="suitability model"?"suitabilitymodel":t==="esri classifier definition"?"classifierdefinition":t==="esri classification schema"?"classificationschema":t==="insights data engineering workbook"?"dataengineeringworkbook":t==="insights data engineering model"?"dataengineeringmodel":t==="deep learning studio project"?"deeplearningproject":t==="discussion"?"discussion":t==="allsource project"?"allsourceproject":t==="api key"?"apikey":"maps",s?Ui(i+s+r+".png"):null}get isLayer(){return this.type!=null&&k1e.has(this.type)}get itemPageUrl(){const t=this.portal?.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){const t=this.portal?.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get thumbnailUrl(){const t=this.itemUrl,e=this.thumbnail;return t&&e?this.portal?.normalizeUrl(`${t}/info/${e}?f=json`)??null:null}get userItemUrl(){const t=this.get("portal.restUrl");if(!t)return null;const e=this.owner||this.get("portal.user.username");return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=Mo.getDefault()),i=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:ee(t)?t.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}};return t instanceof sO&&(t=t.rating),t==null||isNaN(t)||typeof t!="number"||(e.query.rating=t),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new sO({rating:t,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:Le(this.applicationProxies),avgRating:this.avgRating,categories:Le(this.categories),created:Le(this.created),culture:this.culture,description:this.description,extent:Le(this.extent),groupCategories:Le(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:Le(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:Le(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:Le(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Le(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new Ly({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){const t=this.toJSON();for(const i of["tags","typeKeywords","categories"])t[i]&&(t[i]=t[i].join(", "));const{extent:e}=t;return e&&(t.extent=JSON.stringify(e)),t}async deleteRating(){await Wo(this.portal).request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return Wo(this.portal).request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await Wo(this.portal).request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new sO(e)):null}fetchRelatedItems(t,e){return Wo(this.portal).requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},Ly)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return Wo(this.portal).request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>Wo(this.portal).signIn()).then(()=>{const e=t&&t.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?i.query.text=e:typeof e=="object"&&(i.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new Ce("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new Ce("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:i}=this;await Wo(e).signIn();const{copyResources:r,folder:s,tags:n,title:o}=t||{},a={method:"post",query:{copyPrivateResources:r==="all",folder:typeof s=="string"?s:s?.id,includeResources:!!r,tags:n?.join(","),title:o}},{itemId:l}=await e.request(`${i}/copy`,a);return new Ly({id:l,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,i=t.filename,r={method:"post"};if(typeof e=="string")i1(e)?r.query={data:e}:r.query={url:_l(e)},ee(i)&&(r.query.filename=i);else{const s=new FormData;ee(i)?s.append("file",e,i):s.append("file",e),r.body=s}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new Ce("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){return(await De(()=>import("./resourceUtils-810dc5ab.js"),["./resourceUtils-810dc5ab.js","./preload-helper-388ac9d5.js"],import.meta.url)).fetchResources(this,t,e)}async addResource(t,e,i){const r=await De(()=>import("./resourceUtils-810dc5ab.js"),["./resourceUtils-810dc5ab.js","./preload-helper-388ac9d5.js"],import.meta.url);return t.portalItem=this,r.addOrUpdateResource(t,"add",e,i)}async removeResource(t,e){const i=await De(()=>import("./resourceUtils-810dc5ab.js"),["./resourceUtils-810dc5ab.js","./preload-helper-388ac9d5.js"],import.meta.url);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new Ce("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i.removeResource(this,t,e)}async removeAllResources(t){return(await De(()=>import("./resourceUtils-810dc5ab.js"),["./resourceUtils-810dc5ab.js","./preload-helper-388ac9d5.js"],import.meta.url)).removeAllResources(this,t)}resourceFromPath(t){return new R1e({portalItem:this,path:t})}toJSON(){const t=this.extent,e={accessInformation:this.accessInformation,categories:Le(this.categories),created:this.created&&this.created.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:Le(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Le(this.typeKeywords),url:this.url};return xK(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new Ly({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};h([p({type:["private","shared","org","public"]})],di.prototype,"access",void 0),h([p()],di.prototype,"accessInformation",void 0),h([p({type:String})],di.prototype,"apiKey",void 0),h([p({json:{read:{source:"appProxies"}}})],di.prototype,"applicationProxies",void 0),h([p()],di.prototype,"avgRating",void 0),h([p()],di.prototype,"categories",void 0),h([p({type:Date})],di.prototype,"created",void 0),h([p()],di.prototype,"culture",void 0),h([p()],di.prototype,"description",void 0),h([p({readOnly:!0})],di.prototype,"displayName",null),h([p({type:Xt})],di.prototype,"extent",void 0),h([Ye("extent")],di.prototype,"readExtent",null),h([p()],di.prototype,"groupCategories",void 0),h([p({readOnly:!0})],di.prototype,"iconUrl",null),h([p()],di.prototype,"id",void 0),h([p({readOnly:!0})],di.prototype,"isLayer",null),h([p({type:Boolean,readOnly:!0})],di.prototype,"isOrgItem",void 0),h([p()],di.prototype,"itemControl",void 0),h([p({readOnly:!0})],di.prototype,"itemPageUrl",null),h([p({readOnly:!0})],di.prototype,"itemUrl",null),h([p()],di.prototype,"licenseInfo",void 0),h([p({type:Date})],di.prototype,"modified",void 0),h([p()],di.prototype,"name",void 0),h([p()],di.prototype,"numComments",void 0),h([p()],di.prototype,"numRatings",void 0),h([p()],di.prototype,"numViews",void 0),h([p()],di.prototype,"owner",void 0),h([p()],di.prototype,"ownerFolder",void 0),h([p({type:Mo})],di.prototype,"portal",void 0),h([p()],di.prototype,"screenshots",void 0),h([p()],di.prototype,"size",void 0),h([p()],di.prototype,"snippet",void 0),h([p()],di.prototype,"sourceJSON",void 0),h([p({type:String})],di.prototype,"sourceUrl",void 0),h([p({type:String})],di.prototype,"spatialReference",void 0),h([p()],di.prototype,"tags",void 0),h([p()],di.prototype,"thumbnail",void 0),h([p({readOnly:!0})],di.prototype,"thumbnailUrl",null),h([p()],di.prototype,"title",void 0),h([p()],di.prototype,"type",void 0),h([p()],di.prototype,"typeKeywords",void 0),h([p({type:String,json:{read(t,e){if(L1e.has(e.type)){const i=this.portal?.restUrl;t||(t=i&&this.id?`${i}/content/items/${this.id}/data`:null)}return t}}})],di.prototype,"url",void 0),h([p({readOnly:!0})],di.prototype,"userItemUrl",null),di=Ly=h([ce("esri.portal.PortalItem")],di);const gb=di,pX=Object.freeze(Object.defineProperty({__proto__:null,default:gb},Symbol.toStringTag,{value:"Module"})),eB=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,P1e={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function tB(t){return P1e[t]??!1}const f2=[],vb=new Map;function iB(t){for(const e of vb.keys())mX(t.pattern,e)&&vb.delete(e)}function N1e(t){return f2.includes(t)||(iB(t),f2.unshift(t)),{remove(){const e=f2.indexOf(t);e>-1&&(f2.splice(e,1),iB(t))}}}async function fX(t){const e=gu();vb.has(t)||vb.set(t,D1e(t,e));const i=vb.get(t);return i&&await j1e.add(i),i}function F1e(t){if(!eB.test(t))return null;const e=eB.exec(t);if(e===null)return null;const[,i,r]=e,s=i+(r?"-"+r.toUpperCase():"");return tB(s)?s:tB(i)?i:null}async function D1e(t,e){const i=[];for(const r of f2)if(mX(r.pattern,t))try{return await r.fetchMessageBundle(t,e)}catch(s){i.push(s)}throw i.length?new Ce("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i}):new Ce("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function mX(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}p9(()=>{vb.clear()});const j1e=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=lp())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function U1e(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t,i=await fX("esri/t9n/basemaps");return i[t]||i[e]}const rL={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return Ui("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Ui("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Ui("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Ui("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return Ui("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return Ui("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return Ui("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Ui("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return Ui("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Ui("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Ui("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Ui("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Ui("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Ui("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Ui("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Ui("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Ui("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return Ui("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return Ui("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return Ui("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return Ui("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return Ui("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return Ui("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return Ui("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return Ui("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return Ui("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return Ui("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}};function rB(t){const e=t?.type;return e==="imagery-tile"||e==="tile"||e==="open-street-map"||e==="vector-tile"||e==="web-tile"||e==="wmts"}function V1e(t){const e=t?.type;return e==="base-tile"||e==="tile"||e==="elevation"||e==="imagery-tile"||e==="base-elevation"||e==="open-street-map"||e==="wcs"||e==="web-tile"||e==="wmts"||e==="vector-tile"}const vlt={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function yX(t){const e=t?.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function m9(t){return t?.type==="feature"&&!t.url&&t.source?.type==="memory"}function blt(t){return t?.type==="feature"&&t.source?.type==="feature-layer"}function B1e(t){if(t.activeLayer){const e=t.activeLayer.tileMatrixSet;if(e)return e;const i=t.activeLayer.tileMatrixSets;if(i)return i}return null}async function gX(t,e){const i=xr?.findServerInfo(t);if(i?.currentVersion!=null)return i.owningSystemUrl||null;const r=t.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const s=`${t.substring(0,r)}/rest/info`,n=ee(e)?e.signal:null,{data:o}=await Et(s,{query:{f:"json"},responseType:"json",signal:n});return o?.owningSystemUrl||null}function z1e(t){if(!("capabilities"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function vX(t){return z1e(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function G1e(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function q1e(t){return!!G1e(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}const H1e=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),W1e=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","media","ogc-feature","route","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function J1e(t){return t.layerContainerType==="basemap"?H1e:t.layerContainerType==="operational-layers"?W1e:null}function Z1e(t,e){if(e.restrictedWebMapWriting){const i=J1e(e);return!ee(i)||i.has(t.type)&&!m9(t)}return!0}function Y1e(t,e){if(e)if(m9(t)){const i=T3("featureCollection.layers",e),r=i&&i[0]&&i[0].layerDefinition;r&&nO(t,r)}else t.type==="stream"?nO(t,e.layerDefinition=e.layerDefinition||{}):t.type!=="group"&&nO(t,e)}function nO(t,e){"maxScale"in t&&(e.maxScale=AA(t.maxScale)??void 0),"minScale"in t&&(e.minScale=AA(t.minScale)??void 0)}function K1e(t,e){if(Y1e(t,e),e&&("blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=AA(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(m9(t)){const i=e.featureCollection;i&&(i.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function sB(t,e,i){if(!("write"in t)||!t.write)return i&&i.messages&&i.messages.push(new Ce("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(Z1e(t,i)){const r={};return t.write(r,i)?r:null}return ee(e)&&K1e(t,e=Le(e)),e}var PI;let Q1e=0;const bX="esri.Basemap";let Kl=PI=class extends A3(Ll){constructor(t){super(t),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+Q1e++,this.baseLayers=new Nt,this.referenceLayers=new Nt;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&tt.getLogger(this.declaredClass).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.baseLayers.on("after-add",r=>e(r.item)),this.referenceLayers.on("after-add",r=>e(r.item)),this.baseLayers.on("after-remove",r=>i(r.item)),this.referenceLayers.on("after-remove",r=>i(r.item))}initialize(){this.when().catch(t=>{tt.getLogger(this.declaredClass).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.baseLayers.removeAll();for(const i of t)i.destroy();const e=this.referenceLayers.removeAll();for(const i of e)i.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem?.destroy(),this.portalItem=null}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set baseLayers(t){this._set("baseLayers",C0(t,this._get("baseLayers")))}_writeBaseLayers(t,e,i){const r=[];t&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(s=>{const n=sB(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);ee(n)&&r.push(n)}),this.referenceLayers.forEach(s=>{const n=sB(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);ee(n)&&(s.type!=="scene"&&(n.isReference=!0),r.push(n))})),e.baseMapLayers=r}set referenceLayers(t){this._set("referenceLayers",C0(t,this._get("referenceLayers")))}writeTitle(t,e){e.title=t||"Basemap"}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return z4(this,t=>{t(this.baseLayers,this.referenceLayers)})}clone(){const t={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(t.loadStatus="loaded"),new PI({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}write(t,e){return t=t||{},e&&e.origin||(e={origin:"web-map",...e}),super.write(t,e),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(t.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const r=Le(i);return r.url&&xc(r.url)&&(r.url=`https:${r.url}`),r.templateUrl&&xc(r.templateUrl)&&(r.templateUrl=`https:${r.templateUrl}`),r})),t}async _loadFromSource(t){const{resourceInfo:e,portalItem:i}=this;pr(t);const r=[];if(e){const s=e.context?e.context.url:null;if(r.push(this._loadLayersFromJSON(e.data,s,t)),e.data.id&&!e.data.title){const n=e.data.id;r.push(U1e(n).then(o=>{o&&this.read({title:o},e.context)}))}}else i&&r.push(this._loadFromItem(i,t));await Promise.all(r)}async _loadLayersFromJSON(t,e,i){const r=this.resourceInfo&&this.resourceInfo.context,s=this.portalItem&&this.portalItem.portal||r&&r.portal||null,n=r&&r.origin==="web-scene"?"web-scene":"web-map",{populateOperationalLayers:o}=await De(()=>import("./layersCreator-74554c12.js"),["./layersCreator-74554c12.js","./lazyLayerLoader-0f3d1a0f.js","./preload-helper-388ac9d5.js","./portalLayers-33cf0e40.js","./layersLoader-456658d2.js","./fetchService-d05ae315.js","./jsonContext-48257512.js"],import.meta.url),a=[];if(pr(i),t.baseMapLayers&&Array.isArray(t.baseMapLayers)){const l={context:{origin:n,url:e,portal:s,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},u=f=>n==="web-scene"&&f.layerType==="ArcGISSceneServiceLayer"||f.isReference,c=o(this.baseLayers,t.baseMapLayers.filter(f=>!u(f)),l);a.push(c);const d=o(this.referenceLayers,t.baseMapLayers.filter(u),l);a.push(d)}await Fa(a)}async _loadFromItem(t,e){const i=await t.load(e),r=await i.fetchData("json",e),s=Fs(t.itemUrl??"");return this._set("resourceInfo",{data:r.baseMap??{},context:{origin:t.type==="Web Scene"?"web-scene":"web-map",portal:t.portal||Mo.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:t.title,thumbnailUrl:t.thumbnailUrl},{origin:"portal-item",portal:t.portal||Mo.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,e)}static fromId(t){const e=rL[t];if(e){if(e.deprecated){let i=null;t==="dark-gray"?i="dark-gray-vector":t==="gray"?i="gray-vector":t==="streets"?i="streets-vector":t==="topo"&&(i="topo-vector"),GK(tt.getLogger(bX),`The ${t} basemap has entered mature support and is no longer being updated.`,{replacement:i,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return PI.fromJSON(e)}return null}};h([p({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,i,r){this._writeBaseLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Nt}},writer(t,e,i,r){this._writeBaseLayers(t,e,r)}}}}}})],Kl.prototype,"baseLayers",null),h([p({type:String,json:{origins:{"web-scene":{write:!0}}}})],Kl.prototype,"id",void 0),h([p({type:gb})],Kl.prototype,"portalItem",void 0),h([p()],Kl.prototype,"referenceLayers",null),h([p({readOnly:!0})],Kl.prototype,"resourceInfo",void 0),h([p({type:Tt})],Kl.prototype,"spatialReference",void 0),h([p()],Kl.prototype,"thumbnailUrl",void 0),h([p({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Kl.prototype,"title",void 0),h([it("title")],Kl.prototype,"writeTitle",null),Kl=PI=h([ce(bX)],Kl);const Em=Kl,X1e=Object.freeze(Object.defineProperty({__proto__:null,default:Em},Symbol.toStringTag,{value:"Module"})),NA={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function wX(t){return NA[t]||NA[t.toLowerCase()]}function y9(t){return NA[t]??NA[t.toLowerCase()]}function eve(t){return[...y9(t)]}function oO(t,e,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?t+(e-t)*r:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function _X(t,e,i,r=1){const s=(t%360+360)%360/360,n=i<=.5?i*(e+1):i+e-i*e,o=2*i-n;return[Math.round(255*oO(o,n,s+1/3)),Math.round(255*oO(o,n,s)),Math.round(255*oO(o,n,s-1/3)),r]}function tve(t){const e=t.length>5,i=e?8:4,r=(1<<i)-1,s=e?1:17,n=e?t.length===9:t.length===5;let o=+("0x"+t.substr(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return n&&(l=o&r,o>>=i,a[3]=s*l/255),l=o&r,o>>=i,a[2]=s*l,l=o&r,o>>=i,a[1]=s*l,l=o&r,o>>=i,a[0]=s*l,a}function Va(){return[0,0,0]}function ive(t){return[t[0],t[1],t[2]]}function Fw(t,e,i){return[t,e,i]}function rve(t){const e=Va(),i=Math.min(3,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function sve(t,e){return new Float64Array(t,e,3)}function xX(){return Va()}function SX(){return Fw(1,1,1)}function EX(){return Fw(1,0,0)}function TX(){return Fw(0,1,0)}function IX(){return Fw(0,0,1)}const nve=xX(),MX=SX(),ove=EX(),ave=TX(),lve=IX();Object.freeze(Object.defineProperty({__proto__:null,ONES:MX,UNIT_X:ove,UNIT_Y:ave,UNIT_Z:lve,ZEROS:nve,clone:ive,create:Va,createView:sve,fromArray:rve,fromValues:Fw,ones:SX,unitX:EX,unitY:TX,unitZ:IX,zeros:xX},Symbol.toStringTag,{value:"Module"}));let g9=1e-6;function $u(){return g9}function uve(t){g9=t}const J4=Math.random,cve=Math.PI/180,hve=180/Math.PI;function v9(t){return t*cve}function dve(t){return t*hve}function pve(t,e){return Math.abs(t-e)<=g9*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:J4,equals:pve,getEpsilon:$u,setEpsilon:uve,toDegree:dve,toRadian:v9},Symbol.toStringTag,{value:"Module"}));function b9(t){const e=t[0],i=t[1],r=t[2];return Math.sqrt(e*e+i*i+r*r)}function FA(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function AX(t,e,i,r){return t[0]=e,t[1]=i,t[2]=r,t}function CX(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function Ax(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function $X(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function OX(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function fve(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function mve(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function yve(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function gve(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function vve(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function bve(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function wve(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function w9(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function _ve(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t}function RX(t,e){const i=e[0]-t[0],r=e[1]-t[1],s=e[2]-t[2];return Math.sqrt(i*i+r*r+s*s)}function kX(t,e){const i=e[0]-t[0],r=e[1]-t[1],s=e[2]-t[2];return i*i+r*r+s*s}function LX(t){const e=t[0],i=t[1],r=t[2];return e*e+i*i+r*r}function xve(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function Sve(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function sL(t,e){const i=e[0],r=e[1],s=e[2];let n=i*i+r*r+s*s;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n),t}function DA(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Eve(t,e,i){const r=e[0],s=e[1],n=e[2],o=i[0],a=i[1],l=i[2];return t[0]=s*l-n*a,t[1]=n*o-r*l,t[2]=r*a-s*o,t}function Tve(t,e,i,r){const s=e[0],n=e[1],o=e[2];return t[0]=s+r*(i[0]-s),t[1]=n+r*(i[1]-n),t[2]=o+r*(i[2]-o),t}function Ive(t,e,i,r,s,n){const o=n*n,a=o*(2*n-3)+1,l=o*(n-2)+n,u=o*(n-1),c=o*(3-2*n);return t[0]=e[0]*a+i[0]*l+r[0]*u+s[0]*c,t[1]=e[1]*a+i[1]*l+r[1]*u+s[1]*c,t[2]=e[2]*a+i[2]*l+r[2]*u+s[2]*c,t}function Mve(t,e,i,r,s,n){const o=1-n,a=o*o,l=n*n,u=a*o,c=3*n*a,d=3*l*o,f=l*n;return t[0]=e[0]*u+i[0]*c+r[0]*d+s[0]*f,t[1]=e[1]*u+i[1]*c+r[1]*d+s[1]*f,t[2]=e[2]*u+i[2]*c+r[2]*d+s[2]*f,t}function Ave(t,e){e=e||1;const i=J4,r=2*i()*Math.PI,s=2*i()-1,n=Math.sqrt(1-s*s)*e;return t[0]=Math.cos(r)*n,t[1]=Math.sin(r)*n,t[2]=s*e,t}function Cve(t,e,i){const r=e[0],s=e[1],n=e[2];return t[0]=i[0]*r+i[4]*s+i[8]*n+i[12],t[1]=i[1]*r+i[5]*s+i[9]*n+i[13],t[2]=i[2]*r+i[6]*s+i[10]*n+i[14],t}function $ve(t,e,i){const r=e[0],s=e[1],n=e[2];return t[0]=r*i[0]+s*i[3]+n*i[6],t[1]=r*i[1]+s*i[4]+n*i[7],t[2]=r*i[2]+s*i[5]+n*i[8],t}function Ove(t,e,i){const r=i[0],s=i[1],n=i[2],o=i[3],a=e[0],l=e[1],u=e[2];let c=s*u-n*l,d=n*a-r*u,f=r*l-s*a,m=s*f-n*d,g=n*c-r*f,v=r*d-s*c;const b=2*o;return c*=b,d*=b,f*=b,m*=2,g*=2,v*=2,t[0]=a+c+m,t[1]=l+d+g,t[2]=u+f+v,t}function Rve(t,e,i,r){const s=[],n=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],n[0]=s[0],n[1]=s[1]*Math.cos(r)-s[2]*Math.sin(r),n[2]=s[1]*Math.sin(r)+s[2]*Math.cos(r),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t}function kve(t,e,i,r){const s=[],n=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],n[0]=s[2]*Math.sin(r)+s[0]*Math.cos(r),n[1]=s[1],n[2]=s[2]*Math.cos(r)-s[0]*Math.sin(r),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t}function Lve(t,e,i,r){const s=[],n=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],n[0]=s[0]*Math.cos(r)-s[1]*Math.sin(r),n[1]=s[0]*Math.sin(r)+s[1]*Math.cos(r),n[2]=s[2],t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t}function Pve(t,e){FA(JE,t),FA(ZE,e),sL(JE,JE),sL(ZE,ZE);const i=DA(JE,ZE);return i>1?0:i<-1?Math.PI:Math.acos(i)}const JE=Va(),ZE=Va();function Nve(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Fve(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Dve(t,e){if(t===e)return!0;const i=t[0],r=t[1],s=t[2],n=e[0],o=e[1],a=e[2],l=$u();return Math.abs(i-n)<=l*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-o)<=l*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(s-a)<=l*Math.max(1,Math.abs(s),Math.abs(a))}function jve(t,e,i){const r=i[0]-e[0],s=i[1]-e[1],n=i[2]-e[2];let o=r*r+s*s+n*n;return o>0?(o=1/Math.sqrt(o),t[0]=r*o,t[1]=s*o,t[2]=n*o,t):(t[0]=0,t[1]=0,t[2]=0,t)}const Uve=Ax,Vve=$X,Bve=OX,zve=RX,Gve=kX,qve=b9,Hve=LX;Object.freeze(Object.defineProperty({__proto__:null,abs:yve,add:CX,angle:Pve,bezier:Mve,ceil:fve,copy:FA,cross:Eve,direction:jve,dist:zve,distance:RX,div:Bve,divide:OX,dot:DA,equals:Dve,exactEquals:Fve,floor:mve,hermite:Ive,inverse:Sve,len:qve,length:b9,lerp:Tve,max:bve,min:vve,mul:Vve,multiply:$X,negate:xve,normalize:sL,random:Ave,rotateX:Rve,rotateY:kve,rotateZ:Lve,round:wve,scale:w9,scaleAndAdd:_ve,set:AX,sign:gve,sqrDist:Gve,sqrLen:Hve,squaredDistance:kX,squaredLength:LX,str:Nve,sub:Uve,subtract:Ax,transformMat3:$ve,transformMat4:Cve,transformQuat:Ove},Symbol.toStringTag,{value:"Module"}));function Wve(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Jve(t,e,i,r,s){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t}function Zve(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function PX(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function NX(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function FX(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function Yve(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Kve(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Qve(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function Xve(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function ebe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function tbe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function ibe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t}function DX(t,e){const i=e[0]-t[0],r=e[1]-t[1],s=e[2]-t[2],n=e[3]-t[3];return Math.sqrt(i*i+r*r+s*s+n*n)}function jX(t,e){const i=e[0]-t[0],r=e[1]-t[1],s=e[2]-t[2],n=e[3]-t[3];return i*i+r*r+s*s+n*n}function UX(t){const e=t[0],i=t[1],r=t[2],s=t[3];return Math.sqrt(e*e+i*i+r*r+s*s)}function VX(t){const e=t[0],i=t[1],r=t[2],s=t[3];return e*e+i*i+r*r+s*s}function rbe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function sbe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function nbe(t,e){const i=e[0],r=e[1],s=e[2],n=e[3];let o=i*i+r*r+s*s+n*n;return o>0&&(o=1/Math.sqrt(o),t[0]=i*o,t[1]=r*o,t[2]=s*o,t[3]=n*o),t}function obe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function BX(t,e,i,r){const s=e[0],n=e[1],o=e[2],a=e[3];return t[0]=s+r*(i[0]-s),t[1]=n+r*(i[1]-n),t[2]=o+r*(i[2]-o),t[3]=a+r*(i[3]-a),t}function abe(t,e){const i=J4;let r,s,n,o,a,l;e=e||1;do r=2*i()-1,s=2*i()-1,a=r*r+s*s;while(a>=1);do n=2*i()-1,o=2*i()-1,l=n*n+o*o;while(l>=1);const u=Math.sqrt((1-a)/l);return t[0]=e*r,t[1]=e*s,t[2]=e*n*u,t[3]=e*o*u,t}function lbe(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3];return t[0]=i[0]*r+i[4]*s+i[8]*n+i[12]*o,t[1]=i[1]*r+i[5]*s+i[9]*n+i[13]*o,t[2]=i[2]*r+i[6]*s+i[10]*n+i[14]*o,t[3]=i[3]*r+i[7]*s+i[11]*n+i[15]*o,t}function ube(t,e,i){const r=e[0],s=e[1],n=e[2],o=i[0],a=i[1],l=i[2],u=i[3],c=u*r+a*n-l*s,d=u*s+l*r-o*n,f=u*n+o*s-a*r,m=-o*r-a*s-l*n;return t[0]=c*u+m*-o+d*-l-f*-a,t[1]=d*u+m*-a+f*-o-c*-l,t[2]=f*u+m*-l+c*-a-d*-o,t[3]=e[3],t}function cbe(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function hbe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function dbe(t,e){const i=t[0],r=t[1],s=t[2],n=t[3],o=e[0],a=e[1],l=e[2],u=e[3],c=$u();return Math.abs(i-o)<=c*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=c*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(s-l)<=c*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(n-u)<=c*Math.max(1,Math.abs(n),Math.abs(u))}const pbe=PX,fbe=NX,mbe=FX,ybe=DX,gbe=jX,vbe=UX,bbe=VX;Object.freeze(Object.defineProperty({__proto__:null,add:Zve,ceil:Yve,copy:Wve,dist:ybe,distance:DX,div:mbe,divide:FX,dot:obe,equals:dbe,exactEquals:hbe,floor:Kve,inverse:sbe,len:vbe,length:UX,lerp:BX,max:Xve,min:Qve,mul:fbe,multiply:NX,negate:rbe,normalize:nbe,random:abe,round:ebe,scale:tbe,scaleAndAdd:ibe,set:Jve,sqrDist:gbe,sqrLen:bbe,squaredDistance:jX,squaredLength:VX,str:cbe,sub:pbe,subtract:PX,transformMat4:lbe,transformQuat:ube},Symbol.toStringTag,{value:"Module"}));const nB=new Float32Array(1);function wlt(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function Da(t,e,i){return Math.min(Math.max(t,e),i)}function _lt(t){return(t&t-1)==0}function xlt(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function Slt(t,e,i){return t+(e-t)*i}function Wv(t){return t*Math.PI/180}function zX(t){return 180*t/Math.PI}function Elt(t){return Math.acos(Da(t,-1,1))}function GX(t){return Math.asin(Da(t,-1,1))}function bb(t,e,i=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=i}const jA=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function wbe(t){return jA.setFloat64(0,t),jA.getBigInt64(0)}function _be(t){return jA.setBigInt64(0,t),jA.getFloat64(0)}const aO=BigInt("1000000");xbe(1);function xbe(t){const e=wbe(t=Math.abs(t)),i=_be(e<=aO?aO:e-aO);return Math.abs(t-i)}function Sbe(t,e,i=1e-6){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;const r=Math.abs(t-e),s=Math.abs(t),n=Math.abs(e);if(t===0||e===0||s<1e-12&&n<1e-12){if(r>.01*i)return!1}else if(r/(s+n)>i)return!1;return!0}function Ebe(t){return qX(Math.max(-nL,Math.min(t,nL)))}function qX(t){return nB[0]=t,nB[0]}function Tlt(t,e){const i=b9(t),r=GX(t[2]/i),s=Math.atan2(t[1]/i,t[0]/i);return AX(e,i,r,s),e}function Ilt(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],r=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(bb(e,1)&&bb(i,1)&&bb(r,1))}const nL=qX(34028234663852886e22);function YE(t){return Da(U4(t),0,255)}function KE(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t}let NI=class Un{static blendColors(e,i,r,s=new Un){return s.r=Math.round(e.r+(i.r-e.r)*r),s.g=Math.round(e.g+(i.g-e.g)*r),s.b=Math.round(e.b+(i.b-e.b)*r),s.a=e.a+(i.a-e.a)*r,s._sanitize()}static fromRgb(e,i){const r=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(r){const s=r[2].split(/\s*,\s*/),n=r[1];if(n==="rgb"&&s.length===3||n==="rgba"&&s.length===4){const o=s[0];if(o.charAt(o.length-1)==="%"){const a=s.map(l=>2.56*parseFloat(l));return s.length===4&&(a[3]=parseFloat(s[3])),Un.fromArray(a,i)}return Un.fromArray(s.map(a=>parseFloat(a)),i)}if(n==="hsl"&&s.length===3||n==="hsla"&&s.length===4)return Un.fromArray(_X(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100,parseFloat(s[3])),i)}return null}static fromHex(e,i=new Un){if(e.length!==4&&e.length!==7||e[0]!=="#")return null;const r=e.length===4?4:8,s=(1<<r)-1;let n=+("0x"+e.substr(1));return isNaN(n)?null:(["b","g","r"].forEach(o=>{const a=n&s;n>>=r,i[o]=r===4?17*a:a}),i.a=1,i)}static fromArray(e,i=new Un){return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(e,i){const r=wX(e)?y9(e):null;return r&&Un.fromArray(r,i)||Un.fromRgb(e,i)||Un.fromHex(e,i)}static fromJSON(e){return e&&new Un([e[0],e[1],e[2],e[3]/255])}static toUnitRGB(e){return ee(e)?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return ee(e)?[e.r/255,e.g/255,e.b/255,e.a!=null?e.a:1]:null}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?Un.fromString(e,this):Array.isArray(e)?Un.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof Un||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const e=this.r.toString(16),i=this.g.toString(16),r=this.b.toString(16);return`#${e.length<2?"0"+e:e}${i.length<2?"0"+i:i}${r.length<2?"0"+r:r}`}toCss(e=!1){const i=this.r+", "+this.g+", "+this.b;return e?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=Un.AlphaMode.ALWAYS){const i=YE(this.r),r=YE(this.g),s=YE(this.b);return e===Un.AlphaMode.ALWAYS||this.a!==1?[i,r,s,YE(255*this.a)]:[i,r,s]}clone(){return new Un(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return ee(e)&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Math.round(KE(this.r,0,255)),this.g=Math.round(KE(this.g,0,255)),this.b=Math.round(KE(this.b,0,255)),this.a=KE(this.a,0,1),this}_set(e,i,r,s){this.r=e,this.g=i,this.b=r,this.a=s}};NI.prototype.declaredClass="esri.Color",function(t){var e;(e=t.AlphaMode||(t.AlphaMode={}))[e.ALWAYS=0]="ALWAYS",e[e.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(NI||(NI={}));const It=NI;function Hb(t,e,i=!1){let{hasM:r,hasZ:s}=t;Array.isArray(e)?e.length!==4||r||s?e.length===3&&i&&!r?(s=!0,r=!1):e.length===3&&r&&s&&(r=!1,s=!1):(r=!0,s=!0):(s=!s&&e.hasZ&&(!r||e.hasM),r=!r&&e.hasM&&(!s||e.hasZ)),t.hasZ=s,t.hasM=r}var oL;function oB(t){return(e,i)=>e==null?i:i==null?e:t(e,i)}function Tbe(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let uf=oL=class extends Ep{constructor(...t){super(...t),this.points=[],this.type="multipoint"}normalizeCtorArgs(t,e){if(!t&&!e)return{};const i={};Array.isArray(t)?(i.points=t,i.spatialReference=e):Tbe(t)?i.spatialReference=t:(t.points&&(i.points=t.points),t.spatialReference&&(i.spatialReference=t.spatialReference),t.hasZ&&(i.hasZ=t.hasZ),t.hasM&&(i.hasM=t.hasM));const r=i.points&&i.points[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=this.points;if(!t.length)return null;const e=new Xt,i=this.hasZ,r=this.hasM,s=i?3:2,n=t[0],o=oB(Math.min),a=oB(Math.max);let l,u,c,d,[f,m]=n,[g,v]=n;for(let b=0,_=t.length;b<_;b++){const S=t[b],[M,x]=S;if(f=o(f,M),m=o(m,x),g=a(g,M),v=a(v,x),i&&S.length>2){const T=S[2];l=o(l,T),c=a(c,T)}if(r&&S.length>s){const T=S[s];u=o(u,T),d=a(d,T)}}return e.xmin=f,e.ymin=m,e.xmax=g,e.ymax=v,e.spatialReference=this.spatialReference,i?(e.zmin=l,e.zmax=c):(e.zmin=void 0,e.zmax=void 0),r?(e.mmin=u,e.mmax=d):(e.mmin=void 0,e.mmax=void 0),e}writePoints(t,e){e.points=Le(this.points)}addPoint(t){return Hb(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}clone(){const t={points:Le(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new oL(t)}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],i={x:e[0],y:e[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=e[2],r=3),this.hasM&&(i.m=e[r]),new Ct(i)}removePoint(t){if(!this._validateInputs(t))return null;const e=new Ct(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(Hb(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};h([p({readOnly:!0})],uf.prototype,"cache",null),h([p()],uf.prototype,"extent",null),h([p({type:[[Number]],json:{write:{isRequired:!0}}})],uf.prototype,"points",void 0),h([it("points")],uf.prototype,"writePoints",null),uf=oL=h([ce("esri.geometry.Multipoint")],uf),uf.prototype.toJSON.isDefaultToJSON=!0;const Dw=uf;function Ibe(t,e){const i=e[0]-t[0],r=e[1]-t[1];if(t.length>2&&e.length>2){const s=t[2]-e[2];return Math.sqrt(i*i+r*r+s*s)}return Math.sqrt(i*i+r*r)}function Mbe(t,e,i){const r=t[0]+i*(e[0]-t[0]),s=t[1]+i*(e[1]-t[1]);return t.length>2&&e.length>2?[r,s,t[2]+i*(e[2]-t[2])]:[r,s]}function Abe(t,e,i,r){const[s,n]=e,[o,a]=i[r],[l,u]=i[r+1],c=l-o,d=u-a,f=c*c+d*d,m=(s-o)*c+(n-a)*d,g=Math.min(1,Math.max(0,m/f));return t[0]=o+c*g,t[1]=a+d*g,t}function Mlt(t,e,i){const r=i.rings;let s,n,o=!1,a=1/0;for(let l=0;l<r.length;l++){const u=r[l];for(let c=0,d=u.length-1;c<u.length;d=c++)s=u[c],n=u[d],s[1]>e!=n[1]>e&&t<(n[0]-s[0])*(e-s[1])/(n[1]-s[1])+s[0]&&(o=!o),a=Math.min(a,Cbe(t,e,s,n))}return a===0?0:(o?1:-1)*Math.sqrt(a)}function Cbe(t,e,i,r){let s=i[0],n=i[1],o=r[0]-s,a=r[1]-n;if(o!==0||a!==0){const l=((t-s)*o+(e-n)*a)/(o*o+a*a);l>1?(s=r[0],n=r[1]):l>0&&(s+=o*l,n+=a*l)}return o=t-s,a=e-n,o*o+a*a}function $be(t,e){return Mbe(t,e,.5)}function HX(t,e,i){const r=t.length;let s=0,n=0,o=0;for(let a=0;a<r;a++){const l=t[a],u=t[(a+1)%r];let c=2;s+=l[0]*u[1]-u[0]*l[1],l.length>2&&u.length>2&&i&&(n+=l[0]*u[2]-u[0]*l[2],c=3),l.length>c&&u.length>c&&e&&(o+=l[0]*u[c]-u[0]*l[c])}return s<=0&&n<=0&&o<=0}function Obe(t){const e=t.length;return e>2&&R4(t[0],t[e-1])}function Alt(t){if("rings"in t&&(Rbe(t),t.rings.length>0&&!HX(t.rings[0],t.hasM??!1,t.hasZ??!1)))for(const e of t.rings)e.reverse()}function Rbe(t){if("rings"in t)for(const e of t.rings)Obe(e)||e.push(e[0].slice())}function WX(t){if(!t||t.length<3)return 0;let e=0;const i=t.length-1;for(let r=0;r<i;r++)e+=(t[r][0]-t[r+1][0])*(t[r][1]+t[r+1][1]);return e+=(t[i][0]-t[0][0])*(t[i][1]+t[0][1]),-.5*e}function Clt(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function kbe(t){return t?JX(t.rings,t.hasZ??!1):null}function JX(t,e){if(!t||!t.length)return null;const i=[],r=[],s=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let n=0,o=t.length;n<o;n++){const a=Lbe(t[n],e,s);a&&r.push(a)}if(r.sort((n,o)=>{let a=n[2]-o[2];return a===0&&e&&(a=n[4]-o[4]),a}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],e&&(i[2]=r[0][3]),(i[0]<s[0]||i[0]>s[1]||i[1]<s[2]||i[1]>s[3]||e&&(i[2]<s[4]||i[2]>s[5]))&&(i.length=0)),!i.length){const n=t[0]&&t[0].length?Pbe(t[0],e):null;if(!n)return null;i[0]=n[0],i[1]=n[1],e&&n.length>2&&(i[2]=n[2])}return i}function Lbe(t,e,i){let r=0,s=0,n=0,o=0,a=0;const l=t.length?t[0][0]:0,u=t.length?t[0][1]:0,c=t.length&&e?t[0][2]:0;for(let f=0;f<t.length;f++){const m=t[f],g=t[(f+1)%t.length],[v,b,_]=m,S=v-l,M=b-u,[x,T,I]=g,$=x-l,L=T-u,B=S*L-$*M;if(o+=B,r+=(S+$)*B,s+=(M+L)*B,e&&m.length>2&&g.length>2){const z=_-c,H=I-c,J=S*H-$*z;n+=(z+H)*J,a+=J}v<i[0]&&(i[0]=v),v>i[1]&&(i[1]=v),b<i[2]&&(i[2]=b),b>i[3]&&(i[3]=b),e&&(_<i[4]&&(i[4]=_),_>i[5]&&(i[5]=_))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const d=[r/(6*o)+l,s/(6*o)+u,o];return e&&(i[4]===i[5]||a===0?(d[3]=(i[4]+i[5])/2,d[4]=0):(d[3]=n/(6*a)+c,d[4]=a)),d}function Pbe(t,e){const i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let s=0,n=0,o=0,a=0;for(let l=0,u=t.length;l<u-1;l++){const c=t[l],d=t[l+1];if(c&&d){i[0]=c[0],i[1]=c[1],r[0]=d[0],r[1]=d[1],e&&c.length>2&&d.length>2&&(i[2]=c[2],r[2]=d[2]);const f=Ibe(i,r);if(f){s+=f;const m=$be(c,d);n+=f*m[0],o+=f*m[1],e&&m.length>2&&(a+=f*m[2])}}}return s>0?e?[n/s,o/s,a/s]:[n/s,o/s]:t.length?t[0]:null}const Nbe=1e-6;function $lt(t){if(!t||!t.rings)return null;const{rings:e}=t;let i=0;for(let n=0;n<e.length;n++)i+=WX(e[n]);if(i<Nbe)return JX(e,!1);const r=[0,0],s=e[0][0];for(let n=0;n<e.length;n++)Dbe(r,s,e[n]);return r[0]*=1/i,r[1]*=1/i,r[0]+=s[0],r[1]+=s[1],r}const Fbe=1/3;function Dbe(t,e,i){if(!t||!i||i.length<3)return null;const r=i[0],s=[0,0],n=[i[1][0]-r[0],i[1][1]-r[1]];let o;for(let u=2;u<i.length;u++)s[0]=i[u][0]-r[0],s[1]=i[u][1]-r[1],o=.5*Fbe*(s[0]*n[1]-s[1]*n[0]),t[0]+=o*(n[0]+s[0]),t[1]+=o*(n[1]+s[1]),n[0]=s[0],n[1]=s[1];const a=WX(i),l=[r[0],r[1]];return l[0]-=e[0],l[1]-=e[1],l[0]*=a,l[1]*=a,t[0]+=l[0],t[1]+=l[1],t}function ZX(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function YX(t){return t.points!==void 0}function KX(t){return t.x!==void 0&&t.y!==void 0}function QX(t){return t.paths!==void 0}function XX(t){return t.rings!==void 0}function eee(t){function e(i,r){return i==null?r:r==null?i:t(i,r)}return e}const Xf=eee(Math.min),em=eee(Math.max);function Olt(t,e){return QX(e)?Wb(t,e.paths,!1,!1):XX(e)?Wb(t,e.rings,!1,!1):YX(e)?_9(t,e.points,!1,!1,!1,!1):ZX(e)?tee(t,e):(KX(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function Rlt(t,e){return QX(e)?Wb(t,e.paths,!0,!1):XX(e)?Wb(t,e.rings,!0,!1):YX(e)?_9(t,e.points,!0,!1,!0,!1):ZX(e)?tee(t,e,!0,!1,!0,!1):(KX(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function Wb(t,e,i,r){const s=i?3:2;if(!e.length||!e[0].length)return null;let n,o,a,l,[u,c]=e[0][0],[d,f]=e[0][0];for(let m=0;m<e.length;m++){const g=e[m];for(let v=0;v<g.length;v++){const b=g[v],[_,S]=b;if(u=Xf(u,_),c=Xf(c,S),d=em(d,_),f=em(f,S),i&&b.length>2){const M=b[2];n=Xf(n,M),o=em(o,M)}if(r&&b.length>s){const M=b[s];a=Xf(n,M),l=em(o,M)}}}return i?r?(t[0]=u,t[1]=c,t[2]=n,t[3]=a,t[4]=d,t[5]=f,t[6]=o,t[7]=l,t.length=8,t):(t[0]=u,t[1]=c,t[2]=n,t[3]=d,t[4]=f,t[5]=o,t.length=6,t):r?(t[0]=u,t[1]=c,t[2]=a,t[3]=d,t[4]=f,t[5]=l,t.length=6,t):(t[0]=u,t[1]=c,t[2]=d,t[3]=f,t.length=4,t)}function tee(t,e,i,r,s,n){const o=e.xmin,a=e.xmax,l=e.ymin,u=e.ymax;let c=e.zmin,d=e.zmax,f=e.mmin,m=e.mmax;return s?(c=c||0,d=d||0,n?(f=f||0,m=m||0,t[0]=o,t[1]=l,t[2]=c,t[3]=f,t[4]=a,t[5]=u,t[6]=d,t[7]=m,t):(t[0]=o,t[1]=l,t[2]=c,t[3]=a,t[4]=u,t[5]=d,t)):n?(f=f||0,m=m||0,t[0]=o,t[1]=l,t[2]=f,t[3]=a,t[4]=u,t[5]=m,t):(t[0]=o,t[1]=l,t[2]=a,t[3]=u,t)}function _9(t,e,i,r,s,n){const o=i?3:2,a=r&&n,l=i&&s;if(!e.length||!e[0].length)return null;let u,c,d,f,[m,g]=e[0],[v,b]=e[0];for(let _=0;_<e.length;_++){const S=e[_],[M,x]=S;if(m=Xf(m,M),g=Xf(g,x),v=em(v,M),b=em(b,x),l&&S.length>2){const T=S[2];u=Xf(u,T),c=em(c,T)}if(a&&S.length>o){const T=S[o];d=Xf(u,T),f=em(c,T)}}return s?(u=u||0,c=c||0,n?(d=d||0,f=f||0,t[0]=m,t[1]=g,t[2]=u,t[3]=d,t[4]=v,t[5]=b,t[6]=c,t[7]=f,t):(t[0]=m,t[1]=g,t[2]=u,t[3]=v,t[4]=b,t[5]=c,t)):n?(d=d||0,f=f||0,t[0]=m,t[1]=g,t[2]=d,t[3]=v,t[4]=b,t[5]=f,t):(t[0]=m,t[1]=g,t[2]=v,t[3]=b,t)}function jbe(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function Ube(t){return t.points!==void 0}function Vbe(t){return t.x!==void 0&&t.y!==void 0}function Bbe(t){return t.paths!==void 0}function zbe(t){return t.rings!==void 0}const x9=[];function iee(t,e,i,r){return{xmin:t,ymin:e,xmax:i,ymax:r}}function ree(t,e,i,r,s,n){return{xmin:t,ymin:e,zmin:i,xmax:r,ymax:s,zmax:n}}function see(t,e,i,r,s,n){return{xmin:t,ymin:e,mmin:i,xmax:r,ymax:s,mmax:n}}function nee(t,e,i,r,s,n,o,a){return{xmin:t,ymin:e,zmin:i,mmin:r,xmax:s,ymax:n,zmax:o,mmax:a}}function S9(t,e=!1,i=!1){return e?i?nee(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):ree(t[0],t[1],t[2],t[3],t[4],t[5]):i?see(t[0],t[1],t[2],t[3],t[4],t[5]):iee(t[0],t[1],t[2],t[3])}function klt(t){return t?jbe(t)?t:Vbe(t)?qbe(t):zbe(t)?oee(t):Bbe(t)?aee(t):Ube(t)?Gbe(t):null:null}function Gbe(t){const{hasZ:e,hasM:i,points:r}=t;return S9(_9(x9,r,e??!1,i??!1),e,i)}function qbe(t){const{x:e,y:i,z:r,m:s}=t,n=s!=null;return r!=null?n?nee(e,i,r,s,e,i,r,s):ree(e,i,r,e,i,r):n?see(e,i,s,e,i,s):iee(e,i,e,i)}function oee(t){const{hasZ:e,hasM:i,rings:r}=t,s=Wb(x9,r,e??!1,i??!1);return s?S9(s,e,i):null}function aee(t){const{hasZ:e,hasM:i,paths:r}=t,s=Wb(x9,r,e??!1,i??!1);return s?S9(s,e,i):null}var FI;function aB(t){return!Array.isArray(t[0])}let Gc=FI=class extends Ep{static fromExtent(t){const e=t.clone().normalize(),i=t.spatialReference;let r=!1,s=!1;for(const o of e)o.hasZ&&(r=!0),o.hasM&&(s=!0);const n={rings:e.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(r&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let u=0;u<a.length;u++)a[u].push(l)}if(s&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let u=0;u<a.length;u++)a[u].push(l)}return a}),spatialReference:i};return r&&(n.hasZ=!0),s&&(n.hasM=!0),new FI(n)}constructor(...t){super(...t),this.rings=[],this.type="polygon"}normalizeCtorArgs(t,e){let i,r,s=null,n=null;return t&&!Array.isArray(t)?(s=t.rings?t.rings:null,e||(t.spatialReference?e=t.spatialReference:t.rings||(e=t)),i=t.hasZ,r=t.hasM):s=t,s=s||[],e=e||Tt.WGS84,s.length&&s[0]&&s[0][0]!=null&&typeof s[0][0]=="number"&&(s=[s]),n=s[0]&&s[0][0],n&&(i===void 0&&r===void 0?(i=n.length>2,r=n.length>3):i===void 0?i=r?n.length>3:n.length>2:r===void 0&&(r=i?n.length>3:n.length>2)),{rings:s,spatialReference:e,hasZ:i,hasM:r}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const t=kbe(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;const e=new Ct;return e.x=t[0],e.y=t[1],e.spatialReference=this.spatialReference,this.hasZ&&(e.z=t[2]),e}get extent(){const{spatialReference:t}=this,e=oee(this);if(!e)return null;const i=new Xt(e);return i.spatialReference=t,i}get isSelfIntersecting(){return _1e(this.rings)}writeRings(t,e){e.rings=Le(this.rings)}addRing(t){if(!t)return;const e=this.rings,i=e.length;if(aB(t)){const r=[];for(let s=0,n=t.length;s<n;s++)r[s]=t[s].toArray();e[i]=r}else e[i]=t.concat();return this.notifyChange("rings"),this}clone(){const t=new FI;return t.spatialReference=this.spatialReference,t.rings=Le(this.rings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(Re(t))return!1;const e=this.spatialReference,i=t.spatialReference;if(ee(e)!==ee(i)||ee(e)&&ee(i)&&!e.equals(i)||this.rings.length!==t.rings.length)return!1;const r=([s,n,o,a],[l,u,c,d])=>s===l&&n===u&&(o==null&&c==null||o===c)&&(a==null&&d==null||a===d);for(let s=0;s<this.rings.length;s++){const n=this.rings[s],o=t.rings[s];if(!R4(n,o,r))return!1}return!0}contains(t){if(!t)return!1;const e=H4(t,this.spatialReference);return aX(this,ee(e)?e:t)}isClockwise(t){let e;return e=aB(t)?t.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):t,HX(e,this.hasM,this.hasZ)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.rings[t][e],r=this.hasZ,s=this.hasM;return r&&!s?new Ct(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new Ct(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new Ct(i[0],i[1],i[2],i[3],this.spatialReference):new Ct(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(Hb(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(e,0,i),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new Ct(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],i=this.spatialReference,r=e.map(s=>new Ct(s,i));return this.notifyChange("rings"),r}setPoint(t,e,i){return this._validateInputs(t,e)?(Hb(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][e]=i,this.notifyChange("rings"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const r=this.rings[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};h([p({readOnly:!0})],Gc.prototype,"cache",null),h([p({readOnly:!0})],Gc.prototype,"centroid",null),h([p({readOnly:!0})],Gc.prototype,"extent",null),h([p({readOnly:!0})],Gc.prototype,"isSelfIntersecting",null),h([p({type:[[[Number]]],json:{write:{isRequired:!0}}})],Gc.prototype,"rings",void 0),h([it("rings")],Gc.prototype,"writeRings",null),Gc=FI=h([ce("esri.geometry.Polygon")],Gc),Gc.prototype.toJSON.isDefaultToJSON=!0;const ja=Gc;var aL;function Hbe(t){return!Array.isArray(t[0])}let cf=aL=class extends Ep{constructor(...t){super(...t),this.paths=[],this.type="polyline"}normalizeCtorArgs(t,e){let i,r,s=null,n=null;return t&&!Array.isArray(t)?(s=t.paths?t.paths:null,e||(t.spatialReference?e=t.spatialReference:t.paths||(e=t)),i=t.hasZ,r=t.hasM):s=t,s=s||[],e=e||Tt.WGS84,s.length&&s[0]&&s[0][0]!=null&&typeof s[0][0]=="number"&&(s=[s]),n=s[0]&&s[0][0],n&&(i===void 0&&r===void 0?(i=n.length>2,r=!1):i===void 0?i=!r&&n.length>3:r===void 0&&(r=!i&&n.length>3)),{paths:s,spatialReference:e,hasZ:i,hasM:r}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:t}=this,e=aee(this);if(!e)return null;const i=new Xt(e);return i.spatialReference=t,i}writePaths(t,e){e.paths=Le(this.paths)}addPath(t){if(!t)return;const e=this.paths,i=e.length;if(Hbe(t)){const r=[];for(let s=0,n=t.length;s<n;s++)r[s]=t[s].toArray();e[i]=r}else e[i]=t.concat();return this.notifyChange("paths"),this}clone(){const t=new aL;return t.spatialReference=this.spatialReference,t.paths=Le(this.paths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.paths[t][e],r=this.hasZ,s=this.hasM;return r&&!s?new Ct(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new Ct(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new Ct(i[0],i[1],i[2],i[3],this.spatialReference):new Ct(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(Hb(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(e,0,i),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],i=this.spatialReference,r=e.map(s=>new Ct(s,i));return this.notifyChange("paths"),r}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new Ct(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,e,i){return this._validateInputs(t,e)?(Hb(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][e]=i,this.notifyChange("paths"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const r=this.paths[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};h([p({readOnly:!0})],cf.prototype,"cache",null),h([p({readOnly:!0})],cf.prototype,"extent",null),h([p({type:[[[Number]]],json:{write:{isRequired:!0}}})],cf.prototype,"paths",void 0),h([it("paths")],cf.prototype,"writePaths",null),cf=aL=h([ce("esri.geometry.Polyline")],cf),cf.prototype.toJSON.isDefaultToJSON=!0;const Ta=cf;function lee(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function E9(t){return t.points!==void 0}function T9(t){return t.x!==void 0&&t.y!==void 0}function I9(t){return t.paths!==void 0}function c0(t){return t.rings!==void 0}function Pl(t){return Re(t)?null:t instanceof Ep?t:T9(t)?Ct.fromJSON(t):I9(t)?Ta.fromJSON(t):c0(t)?ja.fromJSON(t):E9(t)?Dw.fromJSON(t):lee(t)?Xt.fromJSON(t):null}function Mc(t){return t?T9(t)?"esriGeometryPoint":I9(t)?"esriGeometryPolyline":c0(t)?"esriGeometryPolygon":lee(t)?"esriGeometryEnvelope":E9(t)?"esriGeometryMultipoint":null:null}const Wbe={esriGeometryPoint:Ct,esriGeometryPolyline:Ta,esriGeometryPolygon:ja,esriGeometryEnvelope:Xt,esriGeometryMultipoint:Dw};function Jbe(t){return t&&Wbe[t]||null}const UA=xs()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),lB=xs()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),Ac={base:Ep,key:"type",typeMap:{extent:Xt,multipoint:Dw,point:Ct,polyline:Ta,polygon:ja}};Uh(Ac);const Er=t=>{let e=class extends t{clone(){const i=Wo(Ws(this),"unable to clone instance of non-accessor class"),r=i.metadatas,s=i.store,n={},o=new Map;for(const l in r){const u=r[l],c=s?.originOf(l),d=u.clonable;if(u.readOnly||d===!1||c!==St.USER&&c!==St.DEFAULTS&&c!==St.WEB_MAP&&c!==St.WEB_SCENE)continue;const f=this[l];let m=null;m=typeof d=="function"?d(f):d==="reference"?f:Mk(f),f!=null&&m==null||(c===St.DEFAULTS?o.set(l,m):n[l]=m)}const a=new(Object.getPrototypeOf(this)).constructor(n);if(o.size){const l=Ws(a)?.store;if(l)for(const[u,c]of o)l.set(u,c,St.DEFAULTS)}return a}};return e=h([ce("esri.core.Clonable")],e),e};let uB=class extends Er(Pt){};uB=h([ce("esri.core.Clonable")],uB);var Jb;function Zbe(t,e){switch(t.type){case"range":{const i="range"in t?t.range[0]:t.minValue,r="range"in t?t.range[1]:t.maxValue;if(i!=null&&+e<i||r!=null&&+e>r)return Jb.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(t.codedValues==null||t.codedValues.every(i=>i==null||i.code!==e))return Jb.INVALID_CODED_VALUE}return null}(function(t){t.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",t.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(Jb||(Jb={}));const Ybe=tt.getLogger("esri.support.arcadeOnDemand");let lO;function cp(){return lO||(lO=(async()=>{const t=await De(()=>import("./arcadeUtils-eee1ed7b.js").then(e=>e.ax),["./arcadeUtils-eee1ed7b.js","./preload-helper-388ac9d5.js","./arcadeTimeUtils-d6b8096e.js","./executionError-c1d13a98.js","./number-3b0ee09c.js"],import.meta.url);return{arcade:t.arcade,arcadeUtils:t,Dictionary:t.Dictionary,Feature:t.arcadeFeature}})()),lO}const Plt=(t,e,i)=>M9.create(t,e,i,null,["$feature"]),Nlt=(t,e,i)=>M9.create(t,e,i,null,["$feature","$view"]),Kbe=(t,e,i,r)=>M9.create(t,e,i,r,["$feature","$view"]);let M9=class uee{constructor(e,i,r,s,n,o,a){this.script=e,this.evaluate=s;const l=Array.isArray(o)?o:o.fields;this.fields=l,this._syntaxTree=r,this._arcade=i,this._arcadeFeature=n,this._spatialReference=a,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,i,r,s,n,o){const{arcade:a,Feature:l,Dictionary:u}=await cp(),c=Tt.fromJSON(i);let d;try{d=a.parseScript(e,o)}catch(L){return Ybe.error(new Ce("arcade-bad-expression","Failed to parse arcade script",{script:e,error:L})),null}const f=n.reduce((L,B)=>({...L,[B]:null}),{});let m=null;ee(s)&&(m=new u(s),m.immutable=!0,f.$config=null);const g=a.scriptUsesGeometryEngine(d),v=g&&a.enableGeometrySupport(),b=a.scriptUsesFeatureSet(d)&&a.enableFeatureSetSupport(),_=a.scriptIsAsync(d),S=_&&a.enableAsyncSupport(),M={vars:f,spatialReference:c,useAsync:!!S};await Promise.all([v,b,S]);const x=new Set;await a.loadDependentModules(x,d,null,_,g);const T=new u;T.immutable=!1,T.setField("scale",0);const I=a.compileScript(d,M),$=L=>("$view"in L&&L.$view&&(T.setField("scale",typeof L.$view=="object"?L.$view.scale:void 0),L.$view=T),m&&(L.$config=m),I({vars:L,spatialReference:c}));return new uee(e,a,d,$,new l,r,c)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const Qbe=/^([0-9])/,Xbe=/[^a-z0-9_\u0080-\uffff]/gi,ewe=/_{2,}/g,twe=/^_/,iwe=/_$/;function rwe(t){return t==null?null:t.trim().replace(Xbe,"_").replace(ewe,"_").replace(twe,"").replace(iwe,"").replace(Qbe,"F$1")||null}const swe=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],nwe=["field","normalizationField"];function cB(t,e){if(t!=null&&e!=null){for(const i of Array.isArray(t)?t:[t])if(hB(swe,i,e),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)hB(nwe,r,e)}}function hB(t,e,i){if(t)for(const r of t){const s=T3(r,e),n=s&&typeof s!="function"&&i.get(s);n&&Io(r,n.name,e)}}function cee(t,e){if(t!=null&&e?.fields?.length)if("startField"in t){const i=e.get(t.startField),r=e.get(t.endField);t.startField=i?.name??null,t.endField=r?.name??null}else{const i=e.get(t.startTimeField),r=e.get(t.endTimeField);t.startTimeField=i?.name??null,t.endTimeField=r?.name??null}}const uO=new Set;function hee(t,e){return t&&e?(uO.clear(),ES(uO,t,e),Array.from(uO).sort()):[]}function ES(t,e,i){if(i)if(e?.fields?.length)if(i.includes("*"))for(const{name:r}of e.fields)t.add(r);else for(const r of i)Ml(t,e,r);else{if(i.includes("*"))return t.clear(),void t.add("*");for(const r of i)r!=null&&t.add(r)}}function Ml(t,e,i){if(typeof i=="string")if(e){const r=e.get(i);r&&t.add(r.name)}else t.add(i)}function Flt(t,e){return Re(e)||Re(t)?[]:e.includes("*")?(t.fields??[]).map(i=>i.name):e}async function Xo(t,e,i){if(!i)return;const{arcadeUtils:r}=await cp(),s=r.extractFieldNames(i,e?.fields?.map(n=>n.name));for(const n of s)Ml(t,e,n)}async function dee(t,e,i){if(i&&i!=="1=1"){const r=(await De(()=>import("./WhereClause-aa8eb708.js").then(s=>s.W),["./WhereClause-aa8eb708.js","./executionError-c1d13a98.js"],import.meta.url)).WhereClause.create(i,e);if(!r.isStandardized)throw new Ce("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});ES(t,e,r.fieldNames)}}function owe({displayField:t,fields:e}){return t||(e&&e.length?cO(e,"name-or-title")||cO(e,"unique-identifier")||cO(e,"type-or-category")||awe(e):null)}function awe(t){for(const e of t){if(!e||!e.name)continue;const i=e.name.toLowerCase();if(i.includes("name")||i.includes("title"))return e.name}return null}function cO(t,e){for(const i of t)if(i&&i.valueType&&i.valueType===e)return i.name;return null}async function Dlt(t,e){if(!e)return;const i=e.elevationInfo?.featureExpressionInfo;return i?i.collectRequiredFields(t,e.fieldsIndex):void 0}function lwe(t,e,i){i.onStatisticExpression?Xo(t,e,i.onStatisticExpression.expression):t.add(i.onStatisticField)}async function jlt(t,e,i){if(!e||!i||!("fields"in i))return;const r=[],s=i.popupTemplate;r.push(uwe(t,e,s)),i.fields&&r.push(...i.fields.map(async n=>lwe(t,e.fieldsIndex,n))),await Promise.all(r)}async function uwe(t,e,i){const r=[];i?.expressionInfos&&r.push(...i.expressionInfos.map(n=>Xo(t,e.fieldsIndex,n.expression)));const s=i?.content;if(Array.isArray(s))for(const n of s)n.type==="expression"&&n.expressionInfo&&r.push(Xo(t,e.fieldsIndex,n.expressionInfo.expression));await Promise.all(r)}async function Ult(t,e,i){e&&(e.timeInfo&&ee(i)&&i.timeExtent&&ES(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&ES(t,e.fieldsIndex,[e.floorInfo.floorField]),ee(i)&&ee(i.where)&&await dee(t,e.fieldsIndex,i.where))}async function Vlt(t,e,i){e&&i&&await Promise.all(i.map(r=>cwe(t,e,r)))}async function cwe(t,e,i){e&&i&&(i.valueExpression?await Xo(t,e.fieldsIndex,i.valueExpression):i.field&&Ml(t,e.fieldsIndex,i.field))}function Blt(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;return e?hee(t.fieldsIndex,[e&&e.creatorField,e&&e.creationDateField,e&&e.editorField,e&&e.editDateField]):[]}async function zlt(t,e){const{labelingInfo:i,fieldsIndex:r}=e;i&&i.length&&await Promise.all(i.map(s=>hwe(t,r,s)))}async function hwe(t,e,i){if(!i)return;const r=i.getLabelExpression(),s=i.where;if(r.type==="arcade")await Xo(t,e,r.expression);else{const n=r.expression.match(/{[^}]*}/g);n&&n.forEach(o=>{Ml(t,e,o.slice(1,-1))})}await dee(t,e,s)}function dwe(t){const e=t.defaultValue;return e!==void 0&&mee(t,e)?e:t.nullable?null:void 0}function pee(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function pwe(t){return t===null||pee(t)}const A9="isInteger"in Number?Number.isInteger:t=>typeof t=="number"&&isFinite(t)&&Math.floor(t)===t;function fwe(t){return t===null||A9(t)}function fee(t){return t!=null&&typeof t=="string"}function mwe(t){return t===null||fee(t)}function ywe(){return!0}function mee(t,e){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=t.nullable?fwe:A9;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?pwe:pee;break;case"string":case"esriFieldTypeString":i=t.nullable?mwe:fee;break;default:i=ywe}return arguments.length===1?i:i(e)}const gwe=["integer","small-integer","single","double"],vwe=new Set([...gwe,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function C9(t){return t!=null&&vwe.has(t.type)}function Glt(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}var VA,BA;function qlt(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function Hlt(t,e){return t==null||t.nullable&&e===null?null:C9(t)&&!bwe(t.type,Number(e))?VA.OUT_OF_RANGE:mee(t,e)?t.domain?Zbe(t.domain,e):null:BA.INVALID_TYPE}function bwe(t,e){const i=typeof t=="string"?yee(t):t;if(!i)return!1;const r=i.min,s=i.max;return i.isInteger?A9(e)&&e>=r&&e<=s:e>=r&&e<=s}function yee(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return wwe;case"esriFieldTypeInteger":case"integer":return _we;case"esriFieldTypeSingle":case"single":return xwe;case"esriFieldTypeDouble":case"double":return Swe}}(function(t){t.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(VA||(VA={})),function(t){t.INVALID_TYPE="type-validation-error::invalid-type"}(BA||(BA={}));const wwe={min:-32768,max:32767,isInteger:!0},_we={min:-2147483648,max:2147483647,isInteger:!0},xwe={min:-34e37,max:12e37,isInteger:!1},Swe={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function Wlt(t,e,i){switch(t){case Jb.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case Jb.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case BA.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case VA.OUT_OF_RANGE:{const{min:r,max:s}=yee(e.type);return`Value ${i} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${r} to ${s}`}}}function Ewe(t,e){return!Twe(t,e,null)}function Twe(t,e,i){if(!e||!e.attributes||!t){if(ee(i))for(const n of t??[])i.add(n);return!0}const r=e.attributes;let s=!1;for(const n of t)if(!(n in r)){if(s=!0,!ee(i))break;i.add(n)}return s}function gee(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}let DI=class extends Je{constructor(e){super(e),this.type=null}};h([p({type:["attachments","custom","fields","media","text","expression","relationship"],readOnly:!0,json:{read:!1,write:!0}})],DI.prototype,"type",void 0),DI=h([ce("esri.popup.content.Content")],DI);const Gm=DI;var lL;let Py=lL=class extends Gm{constructor(t){super(t),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new lL({description:this.description,displayType:this.displayType,title:this.title})}};h([p({type:String,json:{write:!0}})],Py.prototype,"description",void 0),h([p({type:["auto","preview","list"],json:{write:!0}})],Py.prototype,"displayType",void 0),h([p({type:String,json:{write:!0}})],Py.prototype,"title",void 0),h([p({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],Py.prototype,"type",void 0),Py=lL=h([ce("esri.popup.content.AttachmentsContent")],Py);const TS=Py;var uL;let Ny=uL=class extends Gm{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new uL({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?Le(this.outFields):null})}};h([p()],Ny.prototype,"creator",void 0),h([p()],Ny.prototype,"destroyer",void 0),h([p()],Ny.prototype,"outFields",void 0),h([p({type:["custom"],readOnly:!0})],Ny.prototype,"type",void 0),Ny=uL=h([ce("esri.popup.content.CustomContent")],Ny);const Iwe=Ny;var cL;let tv=cL=class extends Je{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new cL({title:this.title,expression:this.expression})}};h([p({type:String,json:{write:!0}})],tv.prototype,"title",void 0),h([p({type:String,json:{write:!0}})],tv.prototype,"expression",void 0),h([p({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],tv.prototype,"returnType",void 0),tv=cL=h([ce("esri.popup.ElementExpressionInfo")],tv);const vee=tv;var hL;let m2=hL=class extends Gm{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){return new hL({expressionInfo:this.expressionInfo?.clone()})}};h([p({type:vee,json:{write:!0}})],m2.prototype,"expressionInfo",void 0),h([p({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],m2.prototype,"type",void 0),m2=hL=h([ce("esri.popup.content.ExpressionContent")],m2);const $9=m2;function Dt(t,e={}){const i=t instanceof si?t:new si(t,e),r={type:e?.ignoreUnknown??1?i.apiValues:String,json:{type:i.jsonValues,read:!e?.readOnly&&{reader:i.read},write:{writer:i.write}}};return e?.readOnly!==void 0&&(r.readOnly=!!e.readOnly),e?.default!==void 0&&(r.json.default=e.default),e?.name!==void 0&&(r.json.name=e.name),e?.nonNullable!==void 0&&(r.nonNullable=e.nonNullable),p(r)}const IS=xs()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});IS.toJSON.bind(IS);IS.fromJSON.bind(IS);const Fc={year:"numeric",month:"numeric",day:"numeric"},M_={year:"numeric",month:"long",day:"numeric"},A_={year:"numeric",month:"short",day:"numeric"},C_={year:"numeric",month:"long",weekday:"long",day:"numeric"},Ql={hour:"numeric",minute:"numeric"},Pu={...Ql,second:"numeric"},O9={"short-date":Fc,"short-date-short-time":{...Fc,...Ql},"short-date-short-time-24":{...Fc,...Ql,hour12:!1},"short-date-long-time":{...Fc,...Pu},"short-date-long-time-24":{...Fc,...Pu,hour12:!1},"short-date-le":Fc,"short-date-le-short-time":{...Fc,...Ql},"short-date-le-short-time-24":{...Fc,...Ql,hour12:!1},"short-date-le-long-time":{...Fc,...Pu},"short-date-le-long-time-24":{...Fc,...Pu,hour12:!1},"long-month-day-year":M_,"long-month-day-year-short-time":{...M_,...Ql},"long-month-day-year-short-time-24":{...M_,...Ql,hour12:!1},"long-month-day-year-long-time":{...M_,...Pu},"long-month-day-year-long-time-24":{...M_,...Pu,hour12:!1},"day-short-month-year":A_,"day-short-month-year-short-time":{...A_,...Ql},"day-short-month-year-short-time-24":{...A_,...Ql,hour12:!1},"day-short-month-year-long-time":{...A_,...Pu},"day-short-month-year-long-time-24":{...A_,...Pu,hour12:!1},"long-date":C_,"long-date-short-time":{...C_,...Ql},"long-date-short-time-24":{...C_,...Ql,hour12:!1},"long-date-long-time":{...C_,...Pu},"long-date-long-time-24":{...C_,...Pu,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Ql,"long-time":Pu},MS=xs()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});MS.apiValues;MS.toJSON.bind(MS);MS.fromJSON.bind(MS);const Mwe={ar:"ar-u-nu-latn-ca-gregory"};let dL=new WeakMap,bee=O9["short-date-short-time"];function Awe(t){const e=t||bee;let i=dL.get(e);if(!i){const r=gu(),s=Mwe[gu()]||r;i=new Intl.DateTimeFormat(s,e),dL.set(e,i)}return i}function R9(t){return t?O9[t]:null}function hp(t,e){return Awe(e).format(t)}p9(()=>{dL=new WeakMap,bee=O9["short-date-short-time"]});const Cwe={ar:"ar-u-nu-latn"};let jI=new WeakMap,wee={};function $we(t){const e=t||wee;if(!jI.has(e)){const i=gu(),r=Cwe[gu()]||i;jI.set(e,new Intl.NumberFormat(r,t))}return jI.get(e)}function _ee(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function Tm(t,e){return t===-0&&(t=0),$we(e).format(t)}p9(()=>{jI=new WeakMap,wee={}});var pL;let Fy=pL=class extends Je{constructor(t){super(t),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null}clone(){return new pL({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(t){return this.dateFormat?hp(t,{...R9(this.dateFormat),...this.dateTimeFormatOptions}):Tm(t,_ee(this))}formatRasterPixelValue(t){if(t.includes("-"))return t;let e,i;return t.trim().includes(",")?(e=",",i=e+" ",this._formatDelimitedString(t,e,i,this)):t.trim().includes(";")?(e=";",i=e+" ",this._formatDelimitedString(t,e,i,this)):t.trim().includes(" ")?(e=i=" ",this._formatDelimitedString(t,e,i,this)):this.format(Number(t))}_formatDelimitedString(t,e,i,r){return t&&e&&i&&r?t.trim().split(e).map(s=>this.format(Number(s))).join(i):t}};h([Dt(IS)],Fy.prototype,"dateFormat",void 0),h([p({type:Object,json:{read:!1}})],Fy.prototype,"dateTimeFormatOptions",void 0),h([p({type:Boolean,json:{write:!0}})],Fy.prototype,"digitSeparator",void 0),h([p({type:Si,json:{write:!0}})],Fy.prototype,"places",void 0),Fy=pL=h([ce("esri.popup.support.FieldInfoFormat")],Fy);const Jv=Fy;var fL;let Vu=fL=class extends Je{constructor(t){super(t),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new fL({fieldName:this.fieldName,format:this.format?Le(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};h([p({type:String,json:{write:!0}})],Vu.prototype,"fieldName",void 0),h([p({type:Jv,json:{write:!0}})],Vu.prototype,"format",void 0),h([p({type:Boolean,json:{write:!0,default:!1}})],Vu.prototype,"isEditable",void 0),h([p({type:String,json:{write:!0}})],Vu.prototype,"label",void 0),h([Dt(new si({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Vu.prototype,"stringFieldOption",void 0),h([p({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Vu.prototype,"statisticType",void 0),h([p({type:String,json:{write:!0}})],Vu.prototype,"tooltip",void 0),h([p({type:Boolean,json:{write:!0}})],Vu.prototype,"visible",void 0),Vu=fL=h([ce("esri.popup.FieldInfo")],Vu);const R3=Vu;var mL;let fd=mL=class extends Gm{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(t,e){e.fieldInfos=t&&t.map(i=>i.toJSON())}clone(){return new mL(Le({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};h([p({type:Object,json:{write:!0}})],fd.prototype,"attributes",void 0),h([p({type:String,json:{write:!0}})],fd.prototype,"description",void 0),h([p({type:[R3]})],fd.prototype,"fieldInfos",void 0),h([it("fieldInfos")],fd.prototype,"writeFieldInfos",null),h([p({type:String,json:{write:!0}})],fd.prototype,"title",void 0),h([p({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],fd.prototype,"type",void 0),fd=mL=h([ce("esri.popup.content.FieldsContent")],fd);const Zb=fd;let Dy=class extends Je{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};h([p({type:String,json:{write:!0}})],Dy.prototype,"altText",void 0),h([p({type:String,json:{write:!0}})],Dy.prototype,"caption",void 0),h([p({type:String,json:{write:!0}})],Dy.prototype,"title",void 0),h([p({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Dy.prototype,"type",void 0),Dy=h([ce("esri.popup.content.mixins.MediaInfo")],Dy);const k9=Dy;var yL;let iv=yL=class extends Pt{constructor(t){super(t),this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new yL({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};h([p()],iv.prototype,"fieldName",void 0),h([p()],iv.prototype,"tooltip",void 0),h([p()],iv.prototype,"value",void 0),iv=yL=h([ce("esri.popup.content.support.ChartMediaInfoValueSeries")],iv);const xee=iv;var gL;let jy=gL=class extends Je{constructor(t){super(t),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new gL({fields:Le(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};h([p({type:[String],json:{write:!0}})],jy.prototype,"fields",void 0),h([p({type:String,json:{write:!0}})],jy.prototype,"normalizeField",void 0),h([p({type:[xee],json:{read:!1}})],jy.prototype,"series",void 0),h([p({type:String,json:{write:!0}})],jy.prototype,"tooltipField",void 0),jy=gL=h([ce("esri.popup.content.support.ChartMediaInfoValue")],jy);const Owe=jy;let y2=class extends k9{constructor(e){super(e),this.type=null,this.value=null}};h([p({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],y2.prototype,"type",void 0),h([p({type:Owe,json:{write:!0}})],y2.prototype,"value",void 0),y2=h([ce("esri.popup.content.mixins.ChartMediaInfo")],y2);const Z4=y2,Y4=xs()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var vL;let UI=vL=class extends Z4{constructor(t){super(t),this.type="bar-chart"}clone(){return new vL({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};h([p({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:Y4.write}})],UI.prototype,"type",void 0),UI=vL=h([ce("esri.popup.content.BarChartMediaInfo")],UI);const See=UI;var bL;let VI=bL=class extends Z4{constructor(t){super(t),this.type="column-chart"}clone(){return new bL({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};h([p({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:Y4.write}})],VI.prototype,"type",void 0),VI=bL=h([ce("esri.popup.content.ColumnChartMediaInfo")],VI);const Eee=VI;var wL;let g2=wL=class extends Je{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new wL({linkURL:this.linkURL,sourceURL:this.sourceURL})}};h([p({type:String,json:{write:!0}})],g2.prototype,"linkURL",void 0),h([p({type:String,json:{write:!0}})],g2.prototype,"sourceURL",void 0),g2=wL=h([ce("esri.popup.content.support.ImageMediaInfoValue")],g2);const Rwe=g2;var _L;let rv=_L=class extends k9{constructor(t){super(t),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new _L({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};h([p({type:Number,json:{write:!0}})],rv.prototype,"refreshInterval",void 0),h([p({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],rv.prototype,"type",void 0),h([p({type:Rwe,json:{write:!0}})],rv.prototype,"value",void 0),rv=_L=h([ce("esri.popup.content.ImageMediaInfo")],rv);const Tee=rv;var xL;let BI=xL=class extends Z4{constructor(t){super(t),this.type="line-chart"}clone(){return new xL({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};h([p({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:Y4.write}})],BI.prototype,"type",void 0),BI=xL=h([ce("esri.popup.content.LineChartMediaInfo")],BI);const Iee=BI;var SL;let zI=SL=class extends Z4{constructor(t){super(t),this.type="pie-chart"}clone(){return new SL({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};h([p({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:Y4.write}})],zI.prototype,"type",void 0),zI=SL=h([ce("esri.popup.content.PieChartMediaInfo")],zI);const Mee=zI,Aee={base:k9,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":See,"column-chart":Eee,"line-chart":Iee,"pie-chart":Mee,image:Tee}};var EL;let Bu=EL=class extends Gm{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?Tee.fromJSON(e):e.type==="barchart"?See.fromJSON(e):e.type==="columnchart"?Eee.fromJSON(e):e.type==="linechart"?Iee.fromJSON(e):e.type==="piechart"?Mee.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(i=>i.toJSON())}clone(){return new EL(Le({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};h([p()],Bu.prototype,"activeMediaInfoIndex",void 0),h([p({type:Object,json:{write:!0}})],Bu.prototype,"attributes",void 0),h([p({type:String,json:{write:!0}})],Bu.prototype,"description",void 0),h([p({types:[Aee]})],Bu.prototype,"mediaInfos",void 0),h([Ye("mediaInfos")],Bu.prototype,"readMediaInfos",null),h([it("mediaInfos")],Bu.prototype,"writeMediaInfos",null),h([p({type:String,json:{write:!0}})],Bu.prototype,"title",void 0),h([p({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],Bu.prototype,"type",void 0),Bu=EL=h([ce("esri.popup.content.MediaContent")],Bu);const AS=Bu;var TL;let v2=TL=class extends Je{constructor(t){super(t),this.field=null,this.order=null}clone(){return new TL({field:this.field,order:this.order})}};h([p({type:String,json:{write:!0}})],v2.prototype,"field",void 0),h([p({type:["asc","desc"],json:{write:!0}})],v2.prototype,"order",void 0),v2=TL=h([ce("esri.popup.support.RelatedRecordsInfoFieldOrder")],v2);const L9=v2;let qc=class extends Er(Gm){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};h([p({type:String,json:{write:!0}})],qc.prototype,"description",void 0),h([p({type:Number,json:{type:Si,write:!0}})],qc.prototype,"displayCount",void 0),h([p({type:["list"],json:{write:!0}})],qc.prototype,"displayType",void 0),h([p({type:[L9],json:{write:!0}})],qc.prototype,"orderByFields",void 0),h([p({type:Number,json:{type:Si,write:!0}})],qc.prototype,"relationshipId",void 0),h([p({type:String,json:{write:!0}})],qc.prototype,"title",void 0),h([p({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],qc.prototype,"type",void 0),qc=h([ce("esri.popup.content.RelationshipContent")],qc);const zA=qc;var IL;let b2=IL=class extends Gm{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new IL({text:this.text})}};h([p({type:String,json:{write:!0}})],b2.prototype,"text",void 0),h([p({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],b2.prototype,"type",void 0),b2=IL=h([ce("esri.popup.content.TextContent")],b2);const Yb=b2,kwe={base:null,key:"type",typeMap:{attachment:TS,media:AS,text:Yb,expression:$9,field:Zb,relationship:zA}};var ML;let Uy=ML=class extends Je{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new ML({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};h([p({type:String,json:{write:!0}})],Uy.prototype,"name",void 0),h([p({type:String,json:{write:!0}})],Uy.prototype,"title",void 0),h([p({type:String,json:{write:!0}})],Uy.prototype,"expression",void 0),h([p({type:["string","number"],json:{write:!0}})],Uy.prototype,"returnType",void 0),Uy=ML=h([ce("esri.popup.ExpressionInfo")],Uy);const Cee=Uy;var AL;let w2=AL=class extends Je{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new AL({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};h([p({type:Boolean,json:{write:!0}})],w2.prototype,"returnTopmostRaster",void 0),h([p({type:Boolean,json:{write:!0}})],w2.prototype,"showNoDataRecords",void 0),w2=AL=h([ce("esri.popup.LayerOptions")],w2);const Lwe=w2;var CL;let _2=CL=class extends Je{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new CL({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?Le(this.orderByFields):null})}};h([p({type:Boolean,json:{write:!0}})],_2.prototype,"showRelatedRecords",void 0),h([p({type:[L9],json:{write:!0}})],_2.prototype,"orderByFields",void 0),_2=CL=h([ce("esri.popup.RelatedRecordsInfo")],_2);const Pwe=_2;let $ee=0;const qm=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+$ee++})}};return e=h([ce("esri.core.Identifiable")],e),e},P9=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:$ee++})}};return e=h([ce("esri.core.NumericIdentifiable")],e),e};let dB=class extends qm(class{}){};dB=h([ce("esri.core.Identifiable")],dB);var $L;let zu=$L=class extends qm(Pt){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new $L({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};h([p()],zu.prototype,"active",void 0),h([p()],zu.prototype,"className",void 0),h([p()],zu.prototype,"disabled",void 0),h([p()],zu.prototype,"id",void 0),h([p()],zu.prototype,"indicator",void 0),h([p()],zu.prototype,"title",void 0),h([p()],zu.prototype,"type",void 0),h([p()],zu.prototype,"visible",void 0),zu=$L=h([ce("esri.support.actions.ActionBase")],zu);const K4=zu;var OL;let GI=OL=class extends K4{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new OL({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};h([p()],GI.prototype,"image",void 0),GI=OL=h([ce("esri.support.Action.ActionButton")],GI);const jw=GI;var RL;let x2=RL=class extends K4{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new RL({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};h([p()],x2.prototype,"image",void 0),h([p()],x2.prototype,"value",void 0),x2=RL=h([ce("esri.support.Action.ActionToggle")],x2);const Oee=x2,Nwe="esri.PopupTemplate",Fwe=tt.getLogger(Nwe),$_="relationships/",pB="expression/",Dwe=Nt.ofType({key:"type",defaultKeyValue:"button",base:K4,typeMap:{button:jw,toggle:Oee}}),jwe={base:Gm,key:"type",typeMap:{media:AS,custom:Iwe,text:Yb,attachments:TS,fields:Zb,expression:$9,relationship:zA}},Uwe=["attachments","fields","media","text","expression","relationship"];let rn=class extends Er(Je){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(i=>Uh(jwe,i)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||_p(e)?e:(Fwe.error("content error","unsupported content value",{value:e}),null)}readContent(e,i){const{popupElements:r}=i;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,r):this._readPopupInfo(i)}writeContent(e,i,r,s){typeof e!="string"?Array.isArray(e)&&(i.popupElements=e.filter(n=>Uwe.includes(n.type)).map(n=>n&&n.toJSON(s)),i.popupElements.forEach(n=>{n.type==="attachments"?this._writeAttachmentContent(i):n.type==="media"?this._writeMediaContent(n,i):n.type==="text"?this._writeTextContent(n,i):n.type==="relationship"&&this._writeRelationshipContent(n,i)})):i.description=e}writeFieldInfos(e,i,r,s){const{content:n}=this,o=Array.isArray(n)?n:null;if(e){const a=o?o.filter(u=>u.type==="fields"):[],l=a.length&&a.every(u=>u.fieldInfos?.length);i.fieldInfos=e.filter(Boolean).map(u=>{const c=u.toJSON(s);return l&&(c.visible=!1),c})}if(o)for(const a of o)a.type==="fields"&&this._writeFieldsContent(a,i)}writeLayerOptions(e,i,r,s){i[r]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(s)}writeTitle(e,i){i.title=e||""}async collectRequiredFields(e,i){const r=this.expressionInfos||[];await this._collectExpressionInfoFields(e,i,[...r,...this._getContentExpressionInfos(this.content,r)]),ES(e,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const i=new Set;return await this.collectRequiredFields(i,e),[...i].sort()}_writeFieldsContent(e,i){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const r=Le(e.fieldInfos);Array.isArray(i.fieldInfos)?r.forEach(s=>{const n=i.fieldInfos.find(o=>o.fieldName.toLowerCase()===s.fieldName.toLowerCase());n?n.visible=!0:i.fieldInfos.push(s)}):i.fieldInfos=r}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,i){const r=e.orderByFields?.map(n=>this._toFieldOrderJSON(n,e.relationshipId))||[],s=[...i.relatedRecordsInfo?.orderByFields||[],...r];i.relatedRecordsInfo={showRelatedRecords:!0,...s?.length&&{orderByFields:s}}}_writeTextContent(e,i){!i.description&&e.text&&(i.description=e.text)}_writeMediaContent(e,i){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=Le(e.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...r]:i.mediaInfos=r}_readPopupInfoElements(e,i,r){const s={description:!1,mediaInfos:!1};return r.map(n=>n.type==="media"?(n.mediaInfos||!i||s.mediaInfos||(n.mediaInfos=i,s.mediaInfos=!0),AS.fromJSON(n)):n.type==="text"?(n.text||!e||s.description||(n.text=e,s.description=!0),Yb.fromJSON(n)):n.type==="attachments"?TS.fromJSON(n):n.type==="fields"?Zb.fromJSON(n):n.type==="expression"?$9.fromJSON(n):n.type==="relationship"?zA.fromJSON(n):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:i,order:r}=e;if(!i?.startsWith($_))return null;const s=i.replace($_,"").split("/");if(s.length!==2)return null;const n=parseInt(s[0],10),o=s[1];return typeof n=="number"&&o?zA.fromJSON({relationshipId:n,orderByFields:[{field:o,order:r}]}):null}_toFieldOrderJSON(e,i){const{order:r,field:s}=e;return{field:`${$_}${i}/${s}`,order:r}}_readPopupInfo({description:e,mediaInfos:i,showAttachments:r,relatedRecordsInfo:s={showRelatedRecords:!1}}){const n=[];e?n.push(new Yb({text:e})):n.push(new Zb),Array.isArray(i)&&i.length&&n.push(AS.fromJSON({mediaInfos:i})),r&&n.push(TS.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=s;return o&&a?.length&&a.forEach(l=>{const u=this._toRelationshipContent(l);u&&n.push(u)}),n.length?n:e}_getContentElementFields(e){const i=e?.type;if(i==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(i==="custom")return e.outFields||[];if(i==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(i==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce((s,n)=>[...s,...this._getMediaInfoFields(n)],[])]}return i==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:i,title:r,value:s}=e,n=s||{},{fields:o,normalizeField:a,tooltipField:l,sourceURL:u,linkURL:c}=n,d=[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(u),...this._extractFieldNames(c),...o??[]];return a&&d.push(a),l&&d.push(l),d}_getContentExpressionInfos(e,i){return Array.isArray(e)?e.reduce((r,s)=>[...r,...s.type==="expression"&&s.expressionInfo?[s.expressionInfo]:[]],i):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((i,r)=>[...i,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(e,i,r){r&&await Promise.all(r.map(s=>Xo(e,i,s.expression)))}_getFieldInfoFields(e){return e?e.filter(i=>i.visible===void 0||!!i.visible).map(i=>i.fieldName).filter(i=>!i.startsWith($_)&&!i.startsWith(pB)):[]}_getActionsFields(e){return e?e.toArray().reduce((i,r)=>[...i,...this._getActionFields(r)],[]):[]}_getActionFields(e){const{className:i,title:r,type:s}=e,n=s==="button"||s==="toggle"?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(n)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||typeof e!="string")return[];const i=/{[^}]*}/g,r=e.match(i);if(!r)return[];const s=/\{(\w+):.+\}/,n=r.filter(o=>!(o.indexOf(`{${$_}`)===0||o.indexOf(`{${pB}`)===0)).map(o=>o.replace(s,"{$1}"));return n?n.map(o=>o.slice(1,-1)):[]}};h([p({type:Dwe})],rn.prototype,"actions",void 0),h([p()],rn.prototype,"content",void 0),h([mi("content")],rn.prototype,"castContent",null),h([Ye("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],rn.prototype,"readContent",null),h([it("content",{popupElements:{type:Nt.ofType(kwe)},showAttachments:{type:Boolean},mediaInfos:{type:Nt.ofType(Aee)},description:{type:String},relatedRecordsInfo:{type:Pwe}})],rn.prototype,"writeContent",null),h([p({type:[Cee],json:{write:!0}})],rn.prototype,"expressionInfos",void 0),h([p({type:[R3]})],rn.prototype,"fieldInfos",void 0),h([it("fieldInfos")],rn.prototype,"writeFieldInfos",null),h([p({type:Lwe})],rn.prototype,"layerOptions",void 0),h([it("layerOptions")],rn.prototype,"writeLayerOptions",null),h([p({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],rn.prototype,"lastEditInfoEnabled",void 0),h([p()],rn.prototype,"outFields",void 0),h([p()],rn.prototype,"overwriteActions",void 0),h([p()],rn.prototype,"returnGeometry",void 0),h([p({json:{type:String}})],rn.prototype,"title",void 0),h([it("title")],rn.prototype,"writeTitle",null),rn=h([ce("esri.PopupTemplate")],rn);const Hm=rn,fB=new si({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let Vwe=0,sv=class extends Je{constructor(e){super(e),this.id="sym"+Vwe++,this.type=null,this.color=new It([0,0,0,1])}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};h([p({type:fB.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:fB.write}}})],sv.prototype,"type",void 0),h([p({type:It,json:{write:{allowNull:!0}}})],sv.prototype,"color",void 0),h([Ye("color")],sv.prototype,"readColor",null),sv=h([ce("esri.symbols.Symbol")],sv);const Ba=sv;var kL;let hf=kL=class extends Ba{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){if(t)for(const i in t)e[i]=t[i]}async collectRequiredFields(t,e){if(this.data?.type==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const r=i.map(s=>{const n=s.valueExpressionInfo;return Xo(t,e,n.expression)});await Promise.all(r)}}}clone(){return new kL({data:Le(this.data)})}hash(){return zF(JSON.stringify(this.data)).toString()}};h([p({json:{write:!1}})],hf.prototype,"color",void 0),h([p({json:{write:!0}})],hf.prototype,"data",void 0),h([Ye("data",["symbol"])],hf.prototype,"readData",null),h([it("data",{})],hf.prototype,"writeData",null),h([Dt({CIMSymbolReference:"cim"},{readOnly:!0})],hf.prototype,"type",void 0),hf=kL=h([ce("esri.symbols.CIMSymbol")],hf);const k3=hf;let nv=class extends Je{constructor(e){super(e),this.enabled=!0,this.type=null}writeEnabled(e,i,r){e||(i[r]=e)}};h([p({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],nv.prototype,"enabled",void 0),h([it("enabled")],nv.prototype,"writeEnabled",null),h([p({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],nv.prototype,"type",void 0),nv=h([ce("esri.symbols.Symbol3DLayer")],nv);const Yh=nv,Bwe=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,zwe="screenUtils.toPt: input not recognized!",Ree=96;function kee(t){return t?t/72*Ree:0}function dp(t){return t?72*t/Ree:0}function ki(t){if(typeof t=="string"){const e=t.match(Bwe);if(e){const i=Number(e[1]),r=e[3]&&e[3].toLowerCase(),s=t.charAt(0)==="-",n=r==="px"?dp(i):i;return s?-n:n}return console.warn(zwe),null}return t}function pn(t=0,e=0){return{x:t,y:e}}function iut(t=0,e=0){return[t,e]}function Q4(t){const e=U4(100*(1-t));return Math.max(0,Math.min(e,100))}function CS(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}function Gwe(t,e){const i=e.transparency!=null?CS(e.transparency):1,r=e.color;return r&&Array.isArray(r)?new It([r[0]||0,r[1]||0,r[2]||0,i]):null}function qwe(t,e){e.color=t.toJSON().slice(0,3);const i=Q4(t.a);i!==0&&(e.transparency=i)}const Wm={type:It,json:{type:[Si],default:null,read:{source:["color","transparency"],reader:Gwe},write:{target:{color:{type:[Si]},transparency:{type:Si}},writer:qwe}}},Vh={type:Number,cast:ki,json:{write:!0}};let Vy=class extends Je{constructor(e){super(e),this.color=new It([0,0,0,1]),this.extensionLength=0,this.size=dp(1)}clone(){}cloneProperties(){return{color:Le(this.color),size:this.size,extensionLength:this.extensionLength}}};h([p({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Vy.prototype,"type",void 0),h([p(Wm)],Vy.prototype,"color",void 0),h([p({...Vh,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],Vy.prototype,"extensionLength",void 0),h([p(Vh)],Vy.prototype,"size",void 0),Vy=h([ce("esri.symbols.edges.Edges3D")],Vy);const N9=Vy;var LL;let qI=LL=class extends N9{constructor(t){super(t),this.type="sketch"}clone(){return new LL(this.cloneProperties())}};h([Dt({sketch:"sketch"},{readOnly:!0})],qI.prototype,"type",void 0),qI=LL=h([ce("esri.symbols.edges.SketchEdges3D")],qI);const Hwe=qI;var PL;let HI=PL=class extends N9{constructor(t){super(t),this.type="solid"}clone(){return new PL(this.cloneProperties())}};h([Dt({solid:"solid"},{readOnly:!0})],HI.prototype,"type",void 0),HI=PL=h([ce("esri.symbols.support.SolidEdges3D")],HI);const Wwe=HI,Lee={types:{key:"type",base:N9,typeMap:{solid:Wwe,sketch:Hwe}},json:{write:!0}};var NL;let Al=NL=class extends Je{constructor(t){super(t),this.color=null}clone(){const t={color:ee(this.color)?this.color.clone():null};return new NL(t)}};h([p(Wm)],Al.prototype,"color",void 0),Al=NL=h([ce("esri.symbols.support.Symbol3DMaterial")],Al);var FL;let df=FL=class extends Yh{constructor(t){super(t),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new FL({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:ee(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};h([Dt({Extrude:"extrude"},{readOnly:!0})],df.prototype,"type",void 0),h([p({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],df.prototype,"size",void 0),h([p({type:Al,json:{write:!0}})],df.prototype,"material",void 0),h([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],df.prototype,"castShadows",void 0),h([p(Lee)],df.prototype,"edges",void 0),df=FL=h([ce("esri.symbols.ExtrudeSymbol3DLayer")],df);const Pee=df;let S2=class extends Ba{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};h([Dt({esriSLS:"simple-line"},{readOnly:!0})],S2.prototype,"type",void 0),h([p({type:Number,cast:ki,json:{write:!0}})],S2.prototype,"width",void 0),S2=h([ce("esri.symbols.LineSymbol")],S2);const Jwe=S2,Zwe=["begin","end","begin-end"],Nee=["arrow","circle","square","diamond","cross","x"];var DL;let Hc=DL=class extends Je{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,i,r){e[i]=r?.origin==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return t&&t[0]!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,i,r){r?.origin==="web-map"||(e[i]=t)}clone(){return new DL({color:Le(this.color),placement:this.placement,style:this.style})}hash(){return`${this.placement}.${this.color?.hash()}.${this.style}`}};h([p({type:["begin","end","begin-end"],json:{write:!0}})],Hc.prototype,"placement",void 0),h([Dt({"line-marker":"line-marker"},{readOnly:!0}),p({json:{origins:{"web-map":{write:!1}}}})],Hc.prototype,"type",void 0),h([p({type:Nee})],Hc.prototype,"style",void 0),h([it("style")],Hc.prototype,"writeStyle",null),h([p({type:It,value:null,json:{write:{allowNull:!0}}})],Hc.prototype,"color",null),h([Ye("color")],Hc.prototype,"readColor",null),h([it("color")],Hc.prototype,"writeColor",null),Hc=DL=h([ce("esri.symbols.LineSymbolMarker")],Hc);const Ywe=Hc;var jL;const hO=new si({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let md=jL=class extends Jwe{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,i,r,s,n){if(t&&typeof t!="string")return t;const o={};return t!=null&&(o.style=t),e!=null&&(o.color=e),i!=null&&(o.width=ki(i)),r!=null&&(o.cap=r),s!=null&&(o.join=s),n!=null&&(o.miterLimit=ki(n)),o}clone(){return new jL({color:Le(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:this.marker?.clone()})}hash(){return`${super.hash()}.${this.color?.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${this.marker?.hash()}`}};h([Dt({esriSLS:"simple-line"},{readOnly:!0})],md.prototype,"type",void 0),h([p({type:hO.apiValues,json:{read:hO.read,write:hO.write}})],md.prototype,"style",void 0),h([p({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null||i.origin==null)})}}})],md.prototype,"cap",void 0),h([p({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null||i.origin==null)})}}})],md.prototype,"join",void 0),h([p({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":Ywe}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],md.prototype,"marker",void 0),h([p({type:Number,json:{read:!1,write:!1}})],md.prototype,"miterLimit",void 0),md=jL=h([ce("esri.symbols.SimpleLineSymbol")],md);const za=md;let E2=class extends Ba{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};h([p({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":za}},json:{default:null,write:!0}})],E2.prototype,"outline",void 0),h([p({type:["simple-fill","picture-fill"],readOnly:!0})],E2.prototype,"type",void 0),E2=h([ce("esri.symbols.FillSymbol")],E2);const Fee=E2;let WI=class extends Je{constructor(e){super(e)}clone(){}};h([p({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],WI.prototype,"type",void 0),WI=h([ce("esri.symbols.patterns.LinePattern3D")],WI);const Dee=WI,Kwe=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var UL;const Qwe=xs()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let T2=UL=class extends Dee{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new UL(t)}};h([p({type:["style"]})],T2.prototype,"type",void 0),h([Dt(Qwe),p({type:Kwe})],T2.prototype,"style",void 0),T2=UL=h([ce("esri.symbols.patterns.LineStylePattern3D")],T2);const F9=T2;let JI=class extends Je{constructor(e){super(e)}clone(){}};h([p({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],JI.prototype,"type",void 0),JI=h([ce("esri.symbols.patterns.Pattern3D")],JI);const jee=JI,Xwe=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var VL;let I2=VL=class extends jee{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new VL(t)}};h([p({type:["style"]})],I2.prototype,"type",void 0),h([p({type:Xwe,json:{read:!0,write:!0}})],I2.prototype,"style",void 0),I2=VL=h([ce("esri.symbols.patterns.StylePattern3D")],I2);const Uee=I2,e_e={types:{key:"type",base:jee,typeMap:{style:Uee}},json:{write:!0}},Vee={types:{key:"type",base:Dee,typeMap:{style:F9}},json:{write:!0}},Cx=new It("white");new It("black");const t_e=new It([255,255,255,0]);function i_e(t){return t.r===0&&t.g===0&&t.b===0}var BL;let $x=BL=class extends Al{constructor(t){super(t),this.colorMixMode=null}clone(){const t={color:ee(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode};return new BL(t)}};h([Dt({multiply:"multiply",replace:"replace",tint:"tint"})],$x.prototype,"colorMixMode",void 0),$x=BL=h([ce("esri.symbols.support.Symbol3DFillMaterial")],$x);function Su(t=h_e){return[t[0],t[1],t[2],t[3]]}function lut(t){return[t[0],t[1],t[2],t[3]]}function Bee(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function r_e(t,e,i,r,s=Su()){return s[0]=t,s[1]=e,s[2]=i,s[3]=r,s}function s_e(t,e=Su()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function uut(t,e){return new Xt({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}function cut(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function hut(t,e,i){if(Re(e))Bee(i,t);else if("length"in e)zL(e)?(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[2]),i[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[0]),i[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":i[0]=Math.min(t[0],e.xmin),i[1]=Math.min(t[1],e.ymin),i[2]=Math.max(t[2],e.xmax),i[3]=Math.max(t[3],e.ymax);break;case"point":i[0]=Math.min(t[0],e.x),i[1]=Math.min(t[1],e.y),i[2]=Math.max(t[2],e.x),i[3]=Math.max(t[3],e.y)}}function n_e(t){return Re(t)||t[0]>=t[2]?0:t[2]-t[0]}function o_e(t){return t[1]>=t[3]?0:t[3]-t[1]}function dut(t){return n_e(t)*o_e(t)}function a_e(t,e){return l_e(t,e[0],e[1])}function l_e(t,e,i){return e>=t[0]&&i>=t[1]&&e<=t[2]&&i<=t[3]}function u_e(t,e,i){return e[0]>=t[0]-i&&e[1]>=t[1]-i&&e[0]<=t[2]+i&&e[1]<=t[3]+i}function put(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function c_e(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function fut(t){return t?Bee(t,mB):Su(mB)}function zL(t){return t!=null&&t.length===4}function mut(t,e){return zL(t)&&zL(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const mB=[1/0,1/0,-1/0,-1/0],h_e=[0,0,0,0];function D9(t=g_e){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function j9(t,e,i,r,s,n,o=D9()){return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o[4]=s,o[5]=n,o}function yut(t,e){const i=isFinite(t[2])||isFinite(t[5]);return new Xt(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function gut(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function vut(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function d_e(t){return t[0]>=t[3]?0:t[3]-t[0]}function p_e(t){return t[1]>=t[4]?0:t[4]-t[1]}function f_e(t){return t[2]>=t[5]?0:t[5]-t[2]}function but(t,e=[0,0,0]){return e[0]=d_e(t),e[1]=p_e(t),e[2]=f_e(t),e}function wut(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function _ut(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function m_e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function xut(t){return t?m_e(t,yB):D9(yB)}function Sut(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function y_e(t,e,i,r,s){return t[0]=e,t[1]=i,t[2]=Number.NEGATIVE_INFINITY,t[3]=r,t[4]=s,t[5]=Number.POSITIVE_INFINITY,t}function GL(t){return t.length===6}function Eut(t,e,i){if(Re(t)||Re(e))return t===e;if(!GL(t)||!GL(e))return!1;if(i){for(let r=0;r<t.length;r++)if(!i(t[r],e[r]))return!1}else for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}const yB=[1/0,1/0,1/0,-1/0,-1/0,-1/0],g_e=[0,0,0,0,0,0];D9();function Tut(t,{isPrimitive:e,width:i,depth:r,height:s}){const n=e?10:1;if(i==null&&s==null&&r==null)return[n*t[0],n*t[1],n*t[2]];const o=Fw(i,r,s);let a;for(let l=0;l<3;l++){const u=o[l];if(u!=null){a=u/t[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=t[l]*a);return o}const v_e=j9(-.5,-.5,-.5,.5,.5,.5),b_e=j9(-.5,-.5,0,.5,.5,1),w_e=j9(-.5,-.5,0,.5,.5,.5);function Iut(t){switch(t){case"sphere":case"cube":case"diamond":return v_e;case"cylinder":case"cone":case"inverted-cone":return b_e;case"tetrahedron":return w_e;default:return}}const U9=["butt","square","round"],__e=[...U9,"none"],zee=["miter","bevel","round"];var qL;let By=qL=class extends Je{constructor(t){super(t),this.color=new It([0,0,0,1]),this.size=dp(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:ee(this.color)?this.color.clone():null,size:this.size,pattern:ee(this.pattern)?this.pattern.clone():null,patternCap:this.patternCap};return new qL(t)}};h([p(Wm)],By.prototype,"color",void 0),h([p(Vh)],By.prototype,"size",void 0),h([p(Vee)],By.prototype,"pattern",void 0),h([p({type:U9,json:{default:"butt",write:{overridePolicy(){return{enabled:ee(this.pattern)}}}}})],By.prototype,"patternCap",void 0),By=qL=h([ce("esri.symbols.support.Symbol3DOutline")],By);var ZI;let yd=ZI=class extends Yh{constructor(t){super(t),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const t={edges:ee(this.edges)?this.edges.clone():null,enabled:this.enabled,material:ee(this.material)?this.material.clone():null,pattern:ee(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:ee(this.outline)?this.outline.clone():null};return new ZI(t)}static fromSimpleFillSymbol(t){const e=t.outline&&t.outline.style&&t.outline.style!=="inside-frame"&&t.outline.style!=="solid"?new F9({style:t.outline.style}):null,i={size:t.outline?.width??0,color:(t.outline?.color??Cx).clone(),pattern:e};return e&&t.outline?.cap&&(i.patternCap=t.outline.cap),new ZI({material:new $x({color:(t.color??t_e).clone()}),pattern:t.style&&t.style!=="solid"?new Uee({style:t.style}):null,outline:i})}};h([Dt({Fill:"fill"},{readOnly:!0})],yd.prototype,"type",void 0),h([p({type:$x,json:{write:!0}})],yd.prototype,"material",void 0),h([p(e_e)],yd.prototype,"pattern",void 0),h([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],yd.prototype,"castShadows",void 0),h([p({type:By,json:{write:!0}})],yd.prototype,"outline",void 0),h([p(Lee)],yd.prototype,"edges",void 0),yd=ZI=h([ce("esri.symbols.FillSymbol3DLayer")],yd);const L3=yd,x_e=["none","underline","line-through"],S_e=["normal","italic","oblique"],E_e=["normal","lighter","bold","bolder"],Gee={type:Number,cast:t=>{const e=vl(t);return e===0?1:Da(e,.1,4)},nonNullable:!0},T_e=["left","right","center"],I_e=["baseline","top","middle","bottom"],qee={type:T_e,nonNullable:!0},Hee={type:I_e,nonNullable:!0};var HL;let gd=HL=class extends Je{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return ki(t)}clone(){return new HL({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};h([p({type:x_e,json:{default:"none",write:!0}})],gd.prototype,"decoration",void 0),h([p({type:String,json:{write:!0}})],gd.prototype,"family",void 0),h([p({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:!i||!i.textSymbol3D})}}})],gd.prototype,"size",void 0),h([mi("size")],gd.prototype,"castSize",null),h([p({type:S_e,json:{default:"normal",write:!0}})],gd.prototype,"style",void 0),h([p({type:E_e,json:{default:"normal",write:!0}})],gd.prototype,"weight",void 0),gd=HL=h([ce("esri.symbols.Font")],gd);const X4=gd;function Uw(t,e){const i=e&&e.url&&e.url.path;if(t&&i&&(t=_l(t,i,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const r=r9(t,e.portalItem.itemUrl);r!=null&&M_e.test(r)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(r).path)}return WL(t,e&&e.portal)}function P3(t,e,i=$S.YES){if(t==null)return t;!Tl(t)&&e&&e.blockedRelativeUrls&&e.blockedRelativeUrls.push(t);let r=_l(t);if(e){const s=e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.rootPath||e.url&&e.url.path;if(s){const n=WL(s,e.portal),o=WL(r,e.portal);r=r9(o,n,n),r!=null&&r!==o&&r!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=Jee(r,e?.portal),Tl(r)&&(r=El(r)),e?.resources&&e?.portalItem&&!Tl(r)&&!i1(r)&&i===$S.YES&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(r),compress:!1}),r}function V9(t,e,i){return Uw(t,i)}function N0(t,e,i,r){const s=P3(t,r);s!==void 0&&(e[i]=s)}const Wee=/\/items\/([^\/]+)\/resources\/(.*)/,M_e=/^\.\/resources\//;function A_e(t){return(t?.match(Wee)??null)?.[1]??null}function C_e(t){const e=t?.match(Wee)??null;if(e==null)return null;const i=e[2],r=i.lastIndexOf("/");if(r===-1){const{path:o,extension:a}=jV(i);return{prefix:null,filename:o,extension:a}}const{path:s,extension:n}=jV(i.slice(r+1));return{prefix:i.slice(0,r),filename:s,extension:n}}function Jee(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?Wk(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function WL(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const i=`${e.urlKey}.${e.customBaseUrl}`,r=e9();return zb(r,`${r.scheme}://${i}`)?Wk(t,e.portalHostname,i):Wk(t,i,e.portalHostname)}var $S;(function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"})($S||($S={}));const Mut=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return $S},ensureMainOnlineDomain:Jee,fromJSON:Uw,itemIdFromResourceUrl:A_e,prefixAndFilenameFromResourceUrl:C_e,read:V9,toJSON:P3,write:N0},Symbol.toStringTag,{value:"Module"}));var JL;const $_e=xs()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let zy=JL=class extends Je{constructor(t){super(t)}readHref(t,e,i){return t?Uw(t,i):e.dataURI}writeHref(t,e,i,r){t&&(i1(t)?e.dataURI=t:(e.href=P3(t,r),Tl(e.href)&&(e.href=El(e.href))))}clone(){return new JL({href:this.href,primitive:this.primitive})}};h([p({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],zy.prototype,"href",void 0),h([Ye("href")],zy.prototype,"readHref",null),h([it("href",{href:{type:String},dataURI:{type:String}})],zy.prototype,"writeHref",null),h([Dt($_e)],zy.prototype,"primitive",void 0),zy=JL=h([ce("esri.symbols.support.IconSymbol3DLayerResource")],zy);var ZL;let Zv=ZL=class extends Pt{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new ZL({x:this.x,y:this.y})}};h([p({type:Number})],Zv.prototype,"x",void 0),h([p({type:Number})],Zv.prototype,"y",void 0),Zv=ZL=h([ce("esri.symbols.support.Symbol3DAnchorPosition2D")],Zv);var YL;let M2=YL=class extends Je{constructor(t){super(t),this.color=new It([0,0,0,1]),this.size=dp(1)}clone(){const t={color:ee(this.color)?this.color.clone():null,size:this.size};return new YL(t)}};h([p(Wm)],M2.prototype,"color",void 0),h([p(Vh)],M2.prototype,"size",void 0),M2=YL=h([ce("esri.symbols.support.Symbol3DIconOutline")],M2);var ov;const Zee="esri.symbols.IconSymbol3DLayer";let Wc=ov=class extends Yh{constructor(t){super(t),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null}clone(){return new ov({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:ee(this.material)?this.material.clone():null,outline:ee(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(t){const e=t.color||Cx,i=gB(t),r=t.outline&&t.outline.width>0?{size:t.outline.width,color:(t.outline.color||Cx).clone()}:null;return new ov({size:t.size,resource:{primitive:R_e(t.style)},material:{color:e},outline:r,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(t){const e=!t.color||i_e(t.color)?Cx:t.color,i=gB(t);return new ov({size:t.width<=t.height?t.height:t.width,resource:{href:t.url},material:{color:e.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(t){return new ov({resource:{href:jQ({mediaType:"application/json",data:JSON.stringify(t.data)})}})}};function gB(t){const e="width"in t?t.width:t.size,i="height"in t?t.height:t.size,r=vB(t.xoffset),s=vB(t.yoffset);return(r||s)&&e&&i?{x:-r/e,y:s/i}:null}function vB(t){return isFinite(t)?t:0}h([p({type:Al,json:{write:!0}})],Wc.prototype,"material",void 0),h([p({type:zy,json:{write:!0}})],Wc.prototype,"resource",void 0),h([Dt({Icon:"icon"},{readOnly:!0})],Wc.prototype,"type",void 0),h([p(Vh)],Wc.prototype,"size",void 0),h([Dt({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),p({json:{default:"center"}})],Wc.prototype,"anchor",void 0),h([p({type:Zv,json:{type:[Number],read:{reader:t=>new Zv({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Wc.prototype,"anchorPosition",void 0),h([p({type:M2,json:{write:!0}})],Wc.prototype,"outline",void 0),Wc=ov=h([ce(Zee)],Wc);const O_e={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function R_e(t){return O_e[t]||(tt.getLogger(Zee).warn(`${t} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const zg=Wc;let Gy=class extends Er(Je){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return ee(e)&&e.placement===this.placement&&e.style===this.style&&(Re(this.color)&&Re(e.color)||ee(this.color)&&ee(e.color)&&this.color.toJSON()===e.color.toJSON())}};h([p({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Gy.prototype,"type",void 0),h([p({type:Zwe,json:{default:"begin-end",write:!0}})],Gy.prototype,"placement",void 0),h([p({type:Nee,json:{default:"arrow",write:!0}})],Gy.prototype,"style",void 0),h([p({type:It,json:{type:[Si],default:null,write:!0}})],Gy.prototype,"color",void 0),Gy=h([ce("esri.symbols.LineStyleMarker3D")],Gy);const KL=Gy;var YI;let Jc=YI=class extends Yh{constructor(t){super(t),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=dp(1),this.pattern=null,this.marker=null}clone(){const t={enabled:this.enabled,material:ee(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:ee(this.pattern)?this.pattern.clone():null,marker:ee(this.marker)?this.marker.clone():null};return new YI(t)}static fromSimpleLineSymbol(t){const e={enabled:!0,size:t.width??dp(1),cap:t.cap||"butt",join:t.join||"miter",pattern:t.style&&t.style!=="inside-frame"?new F9({style:t.style}):null,material:new Al({color:(t.color||Cx).clone()}),marker:t.marker?new KL({placement:t.marker.placement,style:t.marker.style,color:t.marker.color?.clone()??null}):null};return new YI(e)}};h([p({type:Al,json:{write:!0}})],Jc.prototype,"material",void 0),h([Dt({Line:"line"},{readOnly:!0})],Jc.prototype,"type",void 0),h([p({type:zee,json:{write:!0,default:"miter"}})],Jc.prototype,"join",void 0),h([p({type:U9,json:{write:!0,default:"butt"}})],Jc.prototype,"cap",void 0),h([p(Vh)],Jc.prototype,"size",void 0),h([p(Vee)],Jc.prototype,"pattern",void 0),h([p({types:{key:"type",base:KL,typeMap:{style:KL}},json:{write:!0}})],Jc.prototype,"marker",void 0),Jc=YI=h([ce("esri.symbols.LineSymbol3DLayer")],Jc);const N3=Jc;var QL;const k_e=xs()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let A2=QL=class extends Je{clone(){return new QL({href:this.href,primitive:this.primitive})}};h([p({type:String,json:{read:V9,write:N0}})],A2.prototype,"href",void 0),h([Dt(k_e)],A2.prototype,"primitive",void 0),A2=QL=h([ce("esri.symbols.support.ObjectSymbol3DLayerResource")],A2);var XL;let Mg=XL=class extends Pt{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new XL({x:this.x,y:this.y,z:this.z})}};h([p({type:Number})],Mg.prototype,"x",void 0),h([p({type:Number})],Mg.prototype,"y",void 0),h([p({type:Number})],Mg.prototype,"z",void 0),Mg=XL=h([ce("esri.symbols.support.Symbol3DAnchorPosition3D")],Mg);var eP;let ao=eP=class extends Yh{constructor(t){super(t),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new eP({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:ee(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};h([p({type:Al,json:{write:!0}})],ao.prototype,"material",void 0),h([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ao.prototype,"castShadows",void 0),h([p({type:A2,json:{write:!0}})],ao.prototype,"resource",void 0),h([Dt({Object:"object"},{readOnly:!0})],ao.prototype,"type",void 0),h([p({type:Number,json:{write:!0}})],ao.prototype,"width",void 0),h([p({type:Number,json:{write:!0}})],ao.prototype,"height",void 0),h([p({type:Number,json:{write:!0}})],ao.prototype,"depth",void 0),h([Dt({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),p({json:{default:"origin"}})],ao.prototype,"anchor",void 0),h([p({type:Mg,json:{type:[Number],read:{reader:t=>new Mg({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],ao.prototype,"anchorPosition",void 0),h([p({type:Number,json:{write:!0}})],ao.prototype,"heading",void 0),h([p({type:Number,json:{write:!0}})],ao.prototype,"tilt",void 0),h([p({type:Number,json:{write:!0}})],ao.prototype,"roll",void 0),h([p({readOnly:!0})],ao.prototype,"isPrimitive",null),ao=eP=h([ce("esri.symbols.ObjectSymbol3DLayer")],ao);const B9=ao;var tP;let No=tP=class extends Yh{constructor(t){super(t),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(t,e){return t??(e.height==null&&e.size!=null?e.size:void 0)}readHeight(t,e){return t??(e.width==null&&e.size!=null?e.size:void 0)}clone(){return new tP({enabled:this.enabled,material:ee(this.material)?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};h([p({type:Al,json:{write:!0}})],No.prototype,"material",void 0),h([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],No.prototype,"castShadows",void 0),h([Dt({Path:"path"},{readOnly:!0})],No.prototype,"type",void 0),h([p({type:["circle","quad"],json:{write:!0,default:"circle"}})],No.prototype,"profile",void 0),h([p({type:zee,json:{write:!0,default:"miter"}})],No.prototype,"join",void 0),h([p({type:__e,json:{write:!0,default:"butt"}})],No.prototype,"cap",void 0),h([p({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],No.prototype,"width",void 0),h([Ye("width",["width","size","height"])],No.prototype,"readWidth",null),h([p({type:Number,json:{write:!0}})],No.prototype,"height",void 0),h([Ye("height",["height","size","width"])],No.prototype,"readHeight",null),h([p({type:["center","bottom","top"],json:{write:!0,default:"center"}})],No.prototype,"anchor",void 0),h([p({type:["heading","all"],json:{write:!0,default:"all"}})],No.prototype,"profileRotation",void 0),No=tP=h([ce("esri.symbols.PathSymbol3DLayer")],No);const z9=No;var iP;let Yv=iP=class extends Je{constructor(){super(...arguments),this.color=new It([0,0,0,1]),this.size=0}clone(){const t={color:Le(this.color),size:this.size};return new iP(t)}};h([p(Wm)],Yv.prototype,"color",void 0),h([p(Vh)],Yv.prototype,"size",void 0),Yv=iP=h([ce("esri.symbols.support.Symbol3DHalo")],Yv);let Ox=class extends Er(Je){constructor(e){super(e),this.color=null}};h([p(Wm)],Ox.prototype,"color",void 0),Ox=h([ce("esri.symbols.support.Symbol3DTextBackground")],Ox);var KI;let oa=KI=class extends Yh{constructor(t){super(t),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(t){ee(t)&&ee(this._userSize)&&(t.size=this._userSize),this._set("font",t)}writeFont(t,e,i,r){const s={...r,textSymbol3D:!0};e.font=t.write({},s),delete e.font.size}get size(){return ee(this._userSize)?this._userSize:ee(this.font)&&this.font.size!=null?this.font.size:9}set size(t){this._userSize=t,ee(this.font)&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const t=new KI({enabled:this.enabled,font:this.font&&Le(this.font),halo:this.halo&&Le(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:ee(this.material)?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:Le(this.background)});return t._userSize=this._userSize,t}static fromTextSymbol(t){return new KI({font:ee(t.font)?t.font.clone():new X4,halo:L_e(t.haloColor,t.haloSize),horizontalAlignment:t.horizontalAlignment,lineHeight:t.lineHeight,material:t.color?new Al({color:t.color.clone()}):null,text:t.text,verticalAlignment:t.verticalAlignment,background:t.backgroundColor?new Ox({color:t.backgroundColor.clone()}):null})}};function L_e(t,e){return t&&e!=null&&e>0?new Yv({color:Le(t),size:e}):null}h([p({type:X4,json:{write:!0}})],oa.prototype,"font",null),h([it("font")],oa.prototype,"writeFont",null),h([p({type:Yv,json:{write:!0}})],oa.prototype,"halo",void 0),h([p({...qee,json:{default:"center",write:!0}})],oa.prototype,"horizontalAlignment",void 0),h([p({...Gee,json:{default:1,write:!0}})],oa.prototype,"lineHeight",void 0),h([p({type:Al,json:{write:!0}})],oa.prototype,"material",void 0),h([p({type:Ox,json:{write:!0}})],oa.prototype,"background",void 0),h([p(Vh)],oa.prototype,"size",null),h([p({type:String,json:{write:!0}})],oa.prototype,"text",void 0),h([Dt({Text:"text"},{readOnly:!0})],oa.prototype,"type",void 0),h([p({...Hee,json:{default:"baseline",write:!0}})],oa.prototype,"verticalAlignment",void 0),oa=KI=h([ce("esri.symbols.TextSymbol3DLayer")],oa);const Vw=oa;var rP;let pf=rP=class extends Yh{constructor(t){super(t),this.color=sP.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new rP({color:Le(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};h([p({type:It,nonNullable:!0,json:{type:[Si],write:(t,e,i)=>e[i]=t.toArray(It.AlphaMode.UNLESS_OPAQUE),default:()=>sP.clone(),defaultEquals:t=>t.toCss(!0)===sP.toCss(!0)}})],pf.prototype,"color",void 0),h([Dt({Water:"water"},{readOnly:!0})],pf.prototype,"type",void 0),h([p({type:["small","medium","large"],json:{write:!0,default:"medium"}})],pf.prototype,"waterbodySize",void 0),h([p({type:Number,json:{write:!0,default:null}})],pf.prototype,"waveDirection",void 0),h([p({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],pf.prototype,"waveStrength",void 0),pf=rP=h([ce("esri.symbols.WaterSymbol3DLayer")],pf);const sP=new It([0,119,190]),Yee=pf;var nP;let qy=nP=class extends Pt{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new nP({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};h([p({type:String})],qy.prototype,"name",void 0),h([p({type:String})],qy.prototype,"styleUrl",void 0),h([p({type:String})],qy.prototype,"styleName",void 0),h([p({type:Mo})],qy.prototype,"portal",void 0),qy=nP=h([ce("esri.symbols.support.StyleOrigin")],qy);const oP=qy;var aP;let Rx=aP=class extends Pt{constructor(){super(...arguments),this.url=""}clone(){return new aP({url:this.url})}};h([p({type:String})],Rx.prototype,"url",void 0),Rx=aP=h([ce("esri.symbols.support.Thumbnail")],Rx);const Kee={icon:zg,object:B9,line:N3,path:z9,fill:L3,extrude:Pee,text:Vw,water:Yee},P_e=Nt.ofType({base:Yh,key:"type",typeMap:Kee,errorContext:"symbol-layer"});let Zc=class extends Ba{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,r=i&&i.type||Nt;this._set("symbolLayers",new r)}get color(){return null}set color(e){this.constructed&&tt.getLogger(this.declaredClass).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){C0(e,this._get("symbolLayers"))}readStyleOrigin(e,i,r){if(e.styleUrl&&e.name){const s=Uw(e.styleUrl,r);return new oP({styleUrl:s,name:e.name})}if(e.styleName&&e.name)return new oP({portal:r&&r.portal||Mo.getDefault(),styleName:e.styleName,name:e.name});r&&r.messages&&r.messages.push(new kl("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,i,r,s){if(e.styleUrl&&e.name){let n=P3(e.styleUrl,s);Tl(n)&&(n=El(n)),i.styleOrigin={styleUrl:n,name:e.name}}else e.styleName&&e.name&&(e.portal&&s&&s.portal&&!FQ(e.portal.restUrl,s.portal.restUrl)?s&&s.messages&&s.messages.push(new kl("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof Yh||e&&Kee[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};h([p({json:{read:!1,write:!1}})],Zc.prototype,"color",null),h([p({type:P_e,nonNullable:!0,json:{write:!0}}),mi(SQ)],Zc.prototype,"symbolLayers",null),h([p({type:oP})],Zc.prototype,"styleOrigin",void 0),h([Ye("styleOrigin")],Zc.prototype,"readStyleOrigin",null),h([it("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Zc.prototype,"writeStyleOrigin",null),h([p({type:Rx,json:{read:!1}})],Zc.prototype,"thumbnail",void 0),h([p({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Zc.prototype,"type",void 0),Zc=h([ce("esri.symbols.Symbol3D")],Zc);const Bw=Zc;let C2=class extends Je{constructor(e){super(e),this.visible=!0}clone(){}};h([p({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],C2.prototype,"type",void 0),h([p({readOnly:!0})],C2.prototype,"visible",void 0),C2=h([ce("esri.symbols.callouts.Callout3D")],C2);const Qee=C2;var lP;let QI=lP=class extends Je{constructor(){super(...arguments),this.color=new It("white")}clone(){return new lP({color:Le(this.color)})}};h([p(Wm)],QI.prototype,"color",void 0),QI=lP=h([ce("esri.symbols.callouts.LineCallout3DBorder")],QI);const Xee=QI;Object.freeze(Object.defineProperty({__proto__:null,default:Xee},Symbol.toStringTag,{value:"Module"}));var uP;let ff=uP=class extends Qee{constructor(t){super(t),this.type="line",this.color=new It([0,0,0,1]),this.size=dp(1),this.border=null}get visible(){return this.size>0&&ee(this.color)&&this.color.a>0}clone(){return new uP({color:Le(this.color),size:this.size,border:Le(this.border)})}};h([Dt({line:"line"},{readOnly:!0})],ff.prototype,"type",void 0),h([p(Wm)],ff.prototype,"color",void 0),h([p(Vh)],ff.prototype,"size",void 0),h([p({type:Xee,json:{write:!0}})],ff.prototype,"border",void 0),h([p({readOnly:!0})],ff.prototype,"visible",null),ff=uP=h([ce("esri.symbols.callouts.LineCallout3D")],ff);const N_e=ff;function G9(t){if(!t)return!1;const e=t.verticalOffset;return!!e&&!(e.screenLength<=0||ee(e.maxWorldLength)&&e.maxWorldLength<=0)}function ete(t){if(!t||!t.supportsCallout||!t.supportsCallout())return!1;const e=t.callout;return!!e&&!!e.visible&&!!G9(t)}const tte={types:{key:"type",base:Qee,typeMap:{line:N_e}},json:{write:!0}};var cP;let av=cP=class extends Je{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new cP({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};h([p(Vh)],av.prototype,"screenLength",void 0),h([p({type:Number,nonNullable:!0,json:{write:!0,default:0}})],av.prototype,"minWorldLength",void 0),h([p({type:Number,json:{write:!0}})],av.prototype,"maxWorldLength",void 0),av=cP=h([ce("esri.symbols.support.Symbol3DVerticalOffset")],av);const ite=av;var XI;const rte=Nt.ofType({base:null,key:"type",typeMap:{text:Vw}});let mf=XI=class extends Bw{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new rte,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return ete(this)}hasVisibleVerticalOffset(){return G9(this)}clone(){return new XI({styleOrigin:Le(this.styleOrigin),symbolLayers:Le(this.symbolLayers),thumbnail:Le(this.thumbnail),callout:Le(this.callout),verticalOffset:Le(this.verticalOffset)})}static fromTextSymbol(t){return new XI({symbolLayers:[Vw.fromTextSymbol(t)]})}};h([p({type:ite,json:{write:!0}})],mf.prototype,"verticalOffset",void 0),h([p(tte)],mf.prototype,"callout",void 0),h([p({json:{read:!1,write:!1}})],mf.prototype,"styleOrigin",void 0),h([p({type:rte})],mf.prototype,"symbolLayers",void 0),h([Dt({LabelSymbol3D:"label-3d"},{readOnly:!0})],mf.prototype,"type",void 0),mf=XI=h([ce("esri.symbols.LabelSymbol3D")],mf);const eC=mf;var eM;const ste=Nt.ofType({base:null,key:"type",typeMap:{line:N3,path:z9}}),F_e=Nt.ofType({base:null,key:"type",typeMap:{line:N3,path:z9}});let $2=eM=class extends Bw{constructor(t){super(t),this.symbolLayers=new ste,this.type="line-3d"}clone(){return new eM({styleOrigin:Le(this.styleOrigin),symbolLayers:Le(this.symbolLayers),thumbnail:Le(this.thumbnail)})}static fromSimpleLineSymbol(t){return new eM({symbolLayers:[N3.fromSimpleLineSymbol(t)]})}};h([p({type:ste,json:{type:F_e}})],$2.prototype,"symbolLayers",void 0),h([Dt({LineSymbol3D:"line-3d"},{readOnly:!0})],$2.prototype,"type",void 0),$2=eM=h([ce("esri.symbols.LineSymbol3D")],$2);const tC=$2;let yf=class extends Ba{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};h([p({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],yf.prototype,"angle",void 0),h([p({type:["simple-marker","picture-marker"],readOnly:!0})],yf.prototype,"type",void 0),h([p({type:Number,cast:ki,json:{write:!0}})],yf.prototype,"xoffset",void 0),h([p({type:Number,cast:ki,json:{write:!0}})],yf.prototype,"yoffset",void 0),h([p({type:Number,cast:t=>t==="auto"?t:ki(t),json:{write:!0}})],yf.prototype,"size",void 0),yf=h([ce("esri.symbols.MarkerSymbol")],yf);const nte=yf;var tM;const ote=Nt.ofType({base:null,key:"type",typeMap:{fill:L3}});let O2=tM=class extends Bw{constructor(t){super(t),this.symbolLayers=new ote,this.type="mesh-3d"}clone(){return new tM({styleOrigin:Le(this.styleOrigin),symbolLayers:Le(this.symbolLayers),thumbnail:Le(this.thumbnail)})}static fromSimpleFillSymbol(t){return new tM({symbolLayers:[L3.fromSimpleFillSymbol(t)]})}};h([p({type:ote})],O2.prototype,"symbolLayers",void 0),h([Dt({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],O2.prototype,"type",void 0),O2=tM=h([ce("esri.symbols.MeshSymbol3D")],O2);const iC=O2;function D_e(t,e,i){return e.imageData?jQ({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):ate(e.url,i)}function ate(t,e){return U_e(e)&&!Tl(t)&&e?.layer?.parsedUrl?$0(e.layer.parsedUrl.path,"images",t):Uw(t,e)}function j_e(t,e,i,r){if(i1(t)){const s=s9(t);if(!s)return;e.contentType=s.mediaType,e.imageData=s.data,i&&i.imageData===e.imageData&&i.url&&N0(i.url,e,"url",r)}else N0(t,e,"url",r)}const lte={json:{read:{source:["imageData","url"],reader:D_e},write:{writer(t,e,i,r){j_e(t,e,this.source,r)}}}},ute={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,i){const r={};return e.imageData&&(r.imageData=e.imageData),e.contentType&&(r.contentType=e.contentType),e.url&&(r.url=ate(e.url,i)),r}}}};function U_e(t){return!(t==null||t.origin!=="service"&&t.origin!=="portal-item"||t.layer?.type!=="feature"&&t.layer?.type!=="stream")}var hP;let Xl=hP=class extends Fee{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string"&&t.imageData==null)return t;const s={};return t&&(s.url=t),e&&(s.outline=e),i!=null&&(s.width=ki(i)),r!=null&&(s.height=ki(r)),s}clone(){const t=new hP({color:Le(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",Le(this.source)),t}hash(){return`${super.hash()}.${this.color?.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};h([Dt({esriPFS:"picture-fill"},{readOnly:!0})],Xl.prototype,"type",void 0),h([p(lte)],Xl.prototype,"url",void 0),h([p({type:Number,json:{write:!0}})],Xl.prototype,"xscale",void 0),h([p({type:Number,json:{write:!0}})],Xl.prototype,"yscale",void 0),h([p({type:Number,cast:ki,json:{write:!0}})],Xl.prototype,"width",void 0),h([p({type:Number,cast:ki,json:{write:!0}})],Xl.prototype,"height",void 0),h([p({type:Number,cast:ki,json:{write:!0}})],Xl.prototype,"xoffset",void 0),h([p({type:Number,cast:ki,json:{write:!0}})],Xl.prototype,"yoffset",void 0),h([p(ute)],Xl.prototype,"source",void 0),Xl=hP=h([ce("esri.symbols.PictureFillSymbol")],Xl);const cte=Xl;var dP;let Gu=dP=class extends nte{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const r={};return t&&(r.url=t),e!=null&&(r.width=ki(e)),i!=null&&(r.height=ki(i)),r}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new dP({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",Le(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};h([p({json:{write:!1}})],Gu.prototype,"color",void 0),h([Dt({esriPMS:"picture-marker"},{readOnly:!0})],Gu.prototype,"type",void 0),h([p(lte)],Gu.prototype,"url",void 0),h([p(ute)],Gu.prototype,"source",void 0),h([p({type:Number,cast:ki,json:{write:!0}})],Gu.prototype,"height",void 0),h([Ye("height",["height","size"])],Gu.prototype,"readHeight",null),h([p({type:Number,cast:ki,json:{write:!0}})],Gu.prototype,"width",void 0),h([p({json:{write:!1}})],Gu.prototype,"size",void 0),Gu=dP=h([ce("esri.symbols.PictureMarkerSymbol")],Gu);const cm=Gu;var Hy;const hte=Nt.ofType({base:null,key:"type",typeMap:{icon:zg,object:B9,text:Vw}});let Wy=Hy=class extends Bw{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new hte,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return ete(this)}hasVisibleVerticalOffset(){return G9(this)}clone(){return new Hy({verticalOffset:Le(this.verticalOffset),callout:Le(this.callout),styleOrigin:Le(this.styleOrigin),symbolLayers:Le(this.symbolLayers),thumbnail:Le(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new Hy({symbolLayers:[zg.fromSimpleMarkerSymbol(t)]})}static fromPictureMarkerSymbol(t){return new Hy({symbolLayers:[zg.fromPictureMarkerSymbol(t)]})}static fromCIMSymbol(t){if(t.data?.symbol?.type!=="CIMPointSymbol")return null;const i=t.data.symbol;return new Hy(i?.callout?{symbolLayers:[zg.fromCIMSymbol(t)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}:{symbolLayers:[zg.fromCIMSymbol(t)]})}static fromTextSymbol(t){return new Hy({symbolLayers:[Vw.fromTextSymbol(t)]})}};h([p({type:ite,json:{write:!0}})],Wy.prototype,"verticalOffset",void 0),h([p(tte)],Wy.prototype,"callout",void 0),h([p({type:hte,json:{origins:{"web-scene":{write:!0}}}})],Wy.prototype,"symbolLayers",void 0),h([Dt({PointSymbol3D:"point-3d"},{readOnly:!0})],Wy.prototype,"type",void 0),Wy=Hy=h([ce("esri.symbols.PointSymbol3D")],Wy);const Gg=Wy;var R2;const dte=Nt.ofType({base:null,key:"type",typeMap:{extrude:Pee,fill:L3,icon:zg,line:N3,object:B9,text:Vw,water:Yee}});let k2=R2=class extends Bw{constructor(t){super(t),this.symbolLayers=new dte,this.type="polygon-3d"}clone(){return new R2({styleOrigin:Le(this.styleOrigin),symbolLayers:Le(this.symbolLayers),thumbnail:Le(this.thumbnail)})}static fromJSON(t){const e=new R2;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.getItemAt(0).type==="fill"&&e.symbolLayers.getItemAt(1).type==="line"){const i=e.symbolLayers.getItemAt(0),r=e.symbolLayers.getItemAt(1);!r.enabled||t.symbolLayers&&t.symbolLayers[1]&&t.symbolLayers[1].enable===!1||(i.outline={size:r.size,color:ee(r.material)?r.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new R2({symbolLayers:[L3.fromSimpleFillSymbol(t)]})}};h([p({type:dte,json:{write:!0}})],k2.prototype,"symbolLayers",void 0),h([Dt({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],k2.prototype,"type",void 0),k2=R2=h([ce("esri.symbols.PolygonSymbol3D")],k2);const F3=k2;var pP;const dO=new si({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Jy=pP=class extends Fee{constructor(...t){super(...t),this.color=new It([0,0,0,.25]),this.outline=new za,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.style=t),e&&(r.outline=e),i&&(r.color=i),r}clone(){return new pP({color:Le(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};h([p()],Jy.prototype,"color",void 0),h([p()],Jy.prototype,"outline",void 0),h([Dt({esriSFS:"simple-fill"},{readOnly:!0})],Jy.prototype,"type",void 0),h([p({type:dO.apiValues,json:{read:dO.read,write:dO.write}})],Jy.prototype,"style",void 0),Jy=pP=h([ce("esri.symbols.SimpleFillSymbol")],Jy);const Tp=Jy;var fP;const pO=new si({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Yc=fP=class extends nte{constructor(...t){super(...t),this.color=new It([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new za}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string")return t;const s={};return t&&(s.style=t),e!=null&&(s.size=ki(e)),i&&(s.outline=i),r&&(s.color=r),s}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new fP({angle:this.angle,color:Le(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`}};h([p()],Yc.prototype,"color",void 0),h([it("color")],Yc.prototype,"writeColor",null),h([Dt({esriSMS:"simple-marker"},{readOnly:!0})],Yc.prototype,"type",void 0),h([p()],Yc.prototype,"size",void 0),h([p({type:pO.apiValues,json:{read:pO.read,write:pO.write}})],Yc.prototype,"style",void 0),h([p({type:String,json:{write:!0}})],Yc.prototype,"path",null),h([p({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":za}},json:{default:null,write:!0}})],Yc.prototype,"outline",void 0),Yc=fP=h([ce("esri.symbols.SimpleMarkerSymbol")],Yc);const Eu=Yc;var mP;let Nr=mP=class extends Ba{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new X4,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.text=t),e&&(r.font=e),i&&(r.color=i),r}writeLineWidth(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}castLineWidth(t){return ki(t)}writeLineHeight(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}clone(){return new mP({angle:this.angle,backgroundColor:Le(this.backgroundColor),borderLineColor:Le(this.borderLineColor),borderLineSize:this.borderLineSize,color:Le(this.color),font:this.font&&this.font.clone(),haloColor:Le(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color?.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};h([p({type:It,json:{write:!0}})],Nr.prototype,"backgroundColor",void 0),h([p({type:It,json:{write:!0}})],Nr.prototype,"borderLineColor",void 0),h([p({type:Number,json:{write:!0},cast:ki})],Nr.prototype,"borderLineSize",void 0),h([p({type:X4,json:{write:!0}})],Nr.prototype,"font",void 0),h([p({...qee,json:{write:!0}})],Nr.prototype,"horizontalAlignment",void 0),h([p({type:Boolean,json:{write:!0}})],Nr.prototype,"kerning",void 0),h([p({type:It,json:{write:!0}})],Nr.prototype,"haloColor",void 0),h([p({type:Number,cast:ki,json:{write:!0}})],Nr.prototype,"haloSize",void 0),h([p({type:Boolean,json:{write:!0}})],Nr.prototype,"rightToLeft",void 0),h([p({type:Boolean,json:{write:!0}})],Nr.prototype,"rotated",void 0),h([p({type:String,json:{write:!0}})],Nr.prototype,"text",void 0),h([Dt({esriTS:"text"},{readOnly:!0})],Nr.prototype,"type",void 0),h([p({...Hee,json:{write:!0}})],Nr.prototype,"verticalAlignment",void 0),h([p({type:Number,cast:ki,json:{write:!0}})],Nr.prototype,"xoffset",void 0),h([p({type:Number,cast:ki,json:{write:!0}})],Nr.prototype,"yoffset",void 0),h([p({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Nr.prototype,"angle",void 0),h([p({type:Number,json:{write:!0}})],Nr.prototype,"width",void 0),h([p({type:Number})],Nr.prototype,"lineWidth",void 0),h([it("lineWidth")],Nr.prototype,"writeLineWidth",null),h([mi("lineWidth")],Nr.prototype,"castLineWidth",null),h([p(Gee)],Nr.prototype,"lineHeight",void 0),h([it("lineHeight")],Nr.prototype,"writeLineHeight",null),Nr=mP=h([ce("esri.symbols.TextSymbol")],Nr);const zw=Nr;var yP;let qu=yP=class extends Ba{constructor(t){super(t),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=ee(this.portal)?this.portal:Mo.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e?.portal,super.read(t,e)}clone(){return new yP({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol("webRef",t)}fetchCIMSymbol(t){return this._fetchSymbol("cimRef",t)}async _fetchSymbol(t,e){const i=ee(e)?e.cache:null,r=i?this._fetchCacheKey:null;if(ee(i)){const a=r&&i.get(r);if(a)return a.clone()}const s=await V_e();pr(e);const n=s.resolveWebStyleSymbol(this,{portal:this.portal},t,e);n.catch(a=>{tt.getLogger(this.declaredClass).error("#fetchSymbol()","Failed to create symbol from style",a)});const o=await n;return t==="webRef"&&o.type==="point-3d"||t==="cimRef"&&o.type==="cim"?(ee(i)&&i.set(r,o.clone()),o):null}};function V_e(){return De(()=>import("./webStyleSymbolUtils-1da51026.js"),["./webStyleSymbolUtils-1da51026.js","./devEnvironmentUtils-f2a1f21e.js","./preload-helper-388ac9d5.js"],import.meta.url)}h([p({json:{write:!1}})],qu.prototype,"color",void 0),h([p({type:String,json:{write:!0}})],qu.prototype,"styleName",void 0),h([p({type:Mo,json:{write:!1}})],qu.prototype,"portal",void 0),h([p({type:String,json:{read:V9,write:N0}})],qu.prototype,"styleUrl",void 0),h([p({type:Rx,json:{read:!1}})],qu.prototype,"thumbnail",void 0),h([p({type:String,json:{write:!0}})],qu.prototype,"name",void 0),h([Dt({styleSymbolReference:"web-style"},{readOnly:!0})],qu.prototype,"type",void 0),h([p()],qu.prototype,"_fetchCacheKey",null),qu=yP=h([ce("esri.symbols.WebStyleSymbol")],qu);const r1=qu;function rC(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function F0(t){if(!t)return!1;switch(t.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const h0={base:Ba,key:"type",typeMap:{"simple-fill":Tp,"picture-fill":cte,"picture-marker":cm,"simple-line":za,"simple-marker":Eu,text:zw,"label-3d":eC,"line-3d":tC,"mesh-3d":iC,"point-3d":Gg,"polygon-3d":F3,"web-style":r1,cim:k3},errorContext:"symbol"},B_e={base:Ba,key:"type",typeMap:{"picture-marker":cm,"simple-marker":Eu,text:zw,"web-style":r1,cim:k3},errorContext:"symbol"},z_e=zm({types:h0}),sC={base:Ba,key:"type",typeMap:{"simple-fill":Tp,"picture-fill":cte,"picture-marker":cm,"simple-line":za,"simple-marker":Eu,text:zw,"line-3d":tC,"mesh-3d":iC,"point-3d":Gg,"polygon-3d":F3,"web-style":r1,cim:k3},errorContext:"symbol"},G_e={base:Ba,key:"type",typeMap:{text:zw,"label-3d":eC},errorContext:"symbol"},bB={base:Ba,key:"type",typeMap:{"line-3d":tC,"mesh-3d":iC,"point-3d":Gg,"polygon-3d":F3,"web-style":r1,cim:k3},errorContext:"symbol"},q_e={base:Ba,key:"type",typeMap:{"label-3d":eC},errorContext:"symbol"},pte=Uh(h0);function H_e(t){if(!t)return null;const e={};for(const i in t){const r=Pl(t[i]);r&&(e[i]=r)}return Object.keys(e).length!==0?e:null}function W_e(t){if(!ee(t))return null;const e={};for(const i in t){const r=t[i];r&&(e[i]=r.toJSON())}return Object.keys(e).length!==0?e:null}let aa=class extends Er(Je){constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:Sx(),configurable:!0})}normalizeCtorArgs(e,i,r,s){return e&&!e.declaredClass?e:{geometry:e,symbol:i,attributes:r,popupTemplate:s}}set aggregateGeometries(e){const i=this._get("aggregateGeometries");JSON.stringify(i)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const i=this._get("attributes");i!==e&&(this._set("attributes",e),this._notifyLayer("attributes",i,e))}set geometry(e){const i=this._get("geometry");i!==e&&(this._set("geometry",e),this._notifyLayer("geometry",i,e))}set symbol(e){const i=this._get("symbol");i!==e&&(this._set("symbol",e),this._notifyLayer("symbol",i,e))}set visible(e){const i=this._get("visible");i!==e&&(this._set("visible",e),this._notifyLayer("visible",i,e))}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;for(const i of[this.sourceLayer,this.layer])if(i){if("popupTemplate"in i&&i.popupTemplate)return i.popupTemplate;if(e&&"defaultPopupTemplate"in i&&ee(i.defaultPopupTemplate))return i.defaultPopupTemplate}return null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,i){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=i,this._notifyLayer("attributes",r,i,e)}else this.attributes={[e]:i},this._notifyLayer("attributes",void 0,i,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:W_e(this.aggregateGeometries),geometry:ee(this.geometry)?this.geometry.toJSON():null,symbol:ee(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(){ee(this.geometry)&&this.geometry.type==="mesh"&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}_notifyLayer(e,i,r,s){if(!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:e,oldValue:i,newValue:r};e==="attributes"&&(n.attributeName=s),this.layer.graphicChanged(n)}};h([p({value:null,json:{read:H_e}})],aa.prototype,"aggregateGeometries",null),h([p({value:null})],aa.prototype,"attributes",null),h([p({value:null,types:Ac,json:{read:Pl}})],aa.prototype,"geometry",null),h([p({type:Boolean})],aa.prototype,"isAggregate",void 0),h([p({clonable:"reference"})],aa.prototype,"layer",void 0),h([p({type:Hm})],aa.prototype,"popupTemplate",void 0),h([p({clonable:"reference"})],aa.prototype,"sourceLayer",void 0),h([p({value:null,types:h0})],aa.prototype,"symbol",null),h([p({type:Boolean,value:!0})],aa.prototype,"visible",null),aa=h([ce("esri.Graphic")],aa),function(t){t.generateUID=Sx}(aa||(aa={}));const kn=aa;var gP;let L2=gP=class extends Je{constructor(t){super(t),this.minValue=0,this.maxValue=0}clone(){return new gP({minValue:this.minValue,maxValue:this.maxValue})}};h([p({type:Number,json:{write:!0}})],L2.prototype,"minValue",void 0),h([p({type:Number,json:{write:!0}})],L2.prototype,"maxValue",void 0),L2=gP=h([ce("esri.renderer.support.AuthoringInfoClassBreakInfo")],L2);var vP;let Ff=vP=class extends Je{constructor(t){super(t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new vP({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:Le(this.classBreakInfos)})}};h([p({type:String,json:{write:!0}})],Ff.prototype,"field",void 0),h([p({type:String,json:{write:!0}})],Ff.prototype,"normalizationField",void 0),h([p({type:String,json:{write:!0}})],Ff.prototype,"label",void 0),h([p({type:[L2],json:{write:!0}})],Ff.prototype,"classBreakInfos",void 0),Ff=vP=h([ce("esri.renderers.support.AuthoringInfoFieldInfo")],Ff);var bP;const QE=new si({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),XE=new si({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),wB={key:t=>typeof t=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},_B=["high-to-low","above-and-below","centered-on","extremes"],xB=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],SB=["seconds","minutes","hours","days","months","years"];let la=bP=class extends Je{constructor(t){super(t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(t){return typeof t=="string"||typeof t=="number"?t:null}castStartTime(t){return typeof t=="string"||typeof t=="number"?t:null}get style(){return this.type==="color"?this._get("style"):null}set style(t){this._set("style",t)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(t){this._set("theme",t)}clone(){return new bP({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};h([p({types:wB,json:{write:!0}})],la.prototype,"endTime",void 0),h([mi("endTime")],la.prototype,"castEndTime",null),h([p({type:String,json:{write:!0}})],la.prototype,"field",void 0),h([p({type:Number,json:{write:!0}})],la.prototype,"maxSliderValue",void 0),h([p({type:Number,json:{write:!0}})],la.prototype,"minSliderValue",void 0),h([p({types:wB,json:{write:!0}})],la.prototype,"startTime",void 0),h([mi("startTime")],la.prototype,"castStartTime",null),h([p({type:QE.apiValues,value:null,json:{type:QE.jsonValues,read:QE.read,write:QE.write}})],la.prototype,"style",null),h([p({type:xB,value:null,json:{type:xB,origins:{"web-scene":{type:_B,write:{writer:(t,e)=>{_B.includes(t)&&(e.theme=t)}}}},write:!0}})],la.prototype,"theme",null),h([p({type:XE.apiValues,json:{type:XE.jsonValues,read:XE.read,write:XE.write}})],la.prototype,"type",void 0),h([p({type:SB,json:{type:SB,write:!0}})],la.prototype,"units",void 0),la=bP=h([ce("esri.renderers.support.AuthoringInfoVisualVariable")],la);const J_e=la;let iM=class extends Je{constructor(e){super(e),this.type=null}};h([p({readOnly:!0,json:{read:!1,write:!0}})],iM.prototype,"type",void 0),iM=h([ce("esri.rest.support.ColorRamp")],iM);const q9=iM;var wP;let Zy=wP=class extends q9{constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new wP({fromColor:Le(this.fromColor),toColor:Le(this.toColor),algorithm:this.algorithm})}};h([Dt({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],Zy.prototype,"algorithm",void 0),h([p({type:It,json:{type:[Si],write:!0}})],Zy.prototype,"fromColor",void 0),h([p({type:It,json:{type:[Si],write:!0}})],Zy.prototype,"toColor",void 0),h([p({type:["algorithmic"]})],Zy.prototype,"type",void 0),Zy=wP=h([ce("esri.rest.support.AlgorithmicColorRamp")],Zy);const H9=Zy;var _P;let P2=_P=class extends q9{constructor(t){super(t),this.colorRamps=null,this.type="multipart"}clone(){return new _P({colorRamps:Le(this.colorRamps)})}};h([p({type:[H9],json:{write:!0}})],P2.prototype,"colorRamps",void 0),h([p({type:["multipart"]})],P2.prototype,"type",void 0),P2=_P=h([ce("esri.rest.support.MultipartColorRamp")],P2);const nC=P2,W9={key:"type",base:q9,typeMap:{algorithmic:H9,multipart:nC}};function J9(t){return t&&t.type?t.type==="algorithmic"?H9.fromJSON(t):t.type==="multipart"?nC.fromJSON(t):null:null}var xP;const yy=new si({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),eT=new si({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),EB=new si({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),TB=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],Z_e=["high-to-low","above-and-below","above","below","90-10"],Y_e=["flow-line","wave-front"],K_e=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let ts=xP=class extends Je{constructor(t){super(t),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const t=this._get("classificationMethod"),e=this.type;return e&&e!=="relationship"?e==="class-breaks-size"||e==="class-breaks-color"?t||"manual":null:t}set classificationMethod(t){this._set("classificationMethod",t)}readColorRamp(t){return t?J9(t):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(t){this._set("fields",t)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(t){this._set("field1",t)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(t){this._set("field2",t)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(t){this._set("flowTheme",t)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(t){this._set("focus",t)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(t){this._set("numClasses",t)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(t){this._set("statistics",t)}get standardDeviationInterval(){const t=this.type;return t&&t!=="relationship"&&t!=="class-breaks-size"&&t!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(t){this._set("standardDeviationInterval",t)}get type(){return this._get("type")}set type(t){let e=t;t==="classed-size"?e="class-breaks-size":t==="classed-color"&&(e="class-breaks-color"),this._set("type",e)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(t){this._set("univariateSymbolStyle",t)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(t){this._set("univariateTheme",t)}clone(){return new xP({classificationMethod:this.classificationMethod,colorRamp:Le(this.colorRamp),fadeRatio:Le(this.fadeRatio),fields:this.fields&&this.fields.slice(0),field1:Le(this.field1),field2:Le(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};h([p({type:yy.apiValues,value:null,json:{type:yy.jsonValues,read:yy.read,write:yy.write,origins:{"web-document":{default:"manual",type:yy.jsonValues,read:yy.read,write:yy.write}}}})],ts.prototype,"classificationMethod",null),h([p({types:W9,json:{write:!0}})],ts.prototype,"colorRamp",void 0),h([Ye("colorRamp")],ts.prototype,"readColorRamp",null),h([p({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ts.prototype,"fadeRatio",void 0),h([p({type:[String],value:null,json:{write:!0}})],ts.prototype,"fields",null),h([p({type:Ff,value:null,json:{write:!0}})],ts.prototype,"field1",null),h([p({type:Ff,value:null,json:{write:!0}})],ts.prototype,"field2",null),h([p({type:Y_e,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ts.prototype,"flowTheme",null),h([p({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],ts.prototype,"focus",null),h([p({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],ts.prototype,"isAutoGenerated",void 0),h([p({type:Number,value:null,json:{type:Si,write:!0}})],ts.prototype,"numClasses",null),h([p({type:TB,json:{type:TB,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],ts.prototype,"lengthUnit",void 0),h([p({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ts.prototype,"maxSliderValue",void 0),h([p({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ts.prototype,"minSliderValue",void 0),h([p({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ts.prototype,"statistics",null),h([p({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],ts.prototype,"standardDeviationInterval",null),h([p({type:eT.apiValues,value:null,json:{type:eT.jsonValues,read:eT.read,write:eT.write,origins:{"web-scene":{type:EB.jsonValues,write:{writer:EB.write,overridePolicy:t=>({enabled:t!=="flow"})}}}}})],ts.prototype,"type",null),h([p({type:[J_e],json:{write:!0}})],ts.prototype,"visualVariables",void 0),h([p({type:K_e,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ts.prototype,"univariateSymbolStyle",null),h([p({type:Z_e,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ts.prototype,"univariateTheme",null),ts=xP=h([ce("esri.renderers.support.AuthoringInfo")],ts);const D3=ts,fO=new si({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let N2=class extends Je{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,e),Array.from(i).sort()}getSymbol(e,i){}async getSymbolAsync(e,i){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};h([p({type:D3,json:{write:!0}})],N2.prototype,"authoringInfo",void 0),h([p({type:fO.apiValues,readOnly:!0,json:{type:fO.jsonValues,read:!1,write:{writer:fO.write,ignoreOrigin:!0}}})],N2.prototype,"type",void 0),N2=h([ce("esri.renderers.Renderer")],N2);const Ip=N2;function Q_e(t){return t.match(X_e)?.[1]?.replace(/\\'/g,"'")??null}const X_e=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;var SP;let d0=SP=class extends Je{constructor(){super(...arguments),this.title=null}clone(){return new SP({title:this.title})}};h([p({type:String,json:{write:!0}})],d0.prototype,"title",void 0),d0=SP=h([ce("esri.renderers.support.LegendOptions")],d0);var EP;let rM=EP=class extends d0{constructor(){super(...arguments),this.showLegend=null}clone(){return new EP({title:this.title,showLegend:this.showLegend})}};h([p({type:Boolean,json:{write:!0}})],rM.prototype,"showLegend",void 0),rM=EP=h([ce("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],rM);const fte=rM,mO=new si({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Hu=class extends Je{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(tt.getLogger(this.declaredClass).error(".field: field must be a string value"),null):M3(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};h([p()],Hu.prototype,"index",void 0),h([p({type:mO.apiValues,readOnly:!0,json:{read:mO.read,write:mO.write}})],Hu.prototype,"type",void 0),h([p({type:String,json:{write:!0}})],Hu.prototype,"field",void 0),h([mi("field")],Hu.prototype,"castField",null),h([p({type:String,json:{write:!0}})],Hu.prototype,"valueExpression",void 0),h([p({type:String,json:{write:!0}})],Hu.prototype,"valueExpressionTitle",void 0),h([p({readOnly:!0})],Hu.prototype,"arcadeRequired",null),h([p({type:fte,json:{write:!0}})],Hu.prototype,"legendOptions",void 0),Hu=h([ce("esri.renderers.visualVariables.VisualVariable")],Hu);const j3=Hu;var TP;let Yy=TP=class extends Je{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,i){e[i]=t??0}clone(){return new TP({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};h([p({type:It,json:{type:[Si],write:!0}})],Yy.prototype,"color",void 0),h([p({type:String,json:{write:!0}})],Yy.prototype,"label",void 0),h([p({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Yy.prototype,"value",void 0),h([it("value")],Yy.prototype,"writeValue",null),Yy=TP=h([ce("esri.renderers.visualVariables.support.ColorStop")],Yy);const e2e=Yy;var IP;let Ky=IP=class extends j3{constructor(t){super(t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){return new IP({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};h([p({readOnly:!0})],Ky.prototype,"cache",null),h([p({type:["color"],json:{type:["colorInfo"]}})],Ky.prototype,"type",void 0),h([p({type:String,json:{write:!0}})],Ky.prototype,"normalizationField",void 0),h([p({type:[e2e],json:{write:!0}})],Ky.prototype,"stops",null),Ky=IP=h([ce("esri.renderers.visualVariables.ColorVariable")],Ky);const mte=Ky;var MP;let gf=MP=class extends Je{constructor(t){super(t),this.label=null,this.opacity=null,this.value=null}readOpacity(t,e){return CS(e.transparency)}writeOpacity(t,e,i){e[i]=Q4(t)}clone(){return new MP({label:this.label,opacity:this.opacity,value:this.value})}};h([p({type:String,json:{write:!0}})],gf.prototype,"label",void 0),h([p({type:Number,json:{type:Si,write:{target:"transparency"}}})],gf.prototype,"opacity",void 0),h([Ye("opacity",["transparency"])],gf.prototype,"readOpacity",null),h([it("opacity")],gf.prototype,"writeOpacity",null),h([p({type:Number,json:{write:!0}})],gf.prototype,"value",void 0),gf=MP=h([ce("esri.renderers.visualVariables.support.OpacityStop")],gf);const t2e=gf;var AP;let Qy=AP=class extends j3{constructor(t){super(t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){return new AP({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};h([p({readOnly:!0})],Qy.prototype,"cache",null),h([p({type:["opacity"],json:{type:["transparencyInfo"]}})],Qy.prototype,"type",void 0),h([p({type:String,json:{write:!0}})],Qy.prototype,"normalizationField",void 0),h([p({type:[t2e],json:{write:!0}})],Qy.prototype,"stops",null),Qy=AP=h([ce("esri.renderers.visualVariables.OpacityVariable")],Qy);const yte=Qy;var CP;let vd=CP=class extends j3{constructor(t){super(t),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(t,e,i,r){if(r&&r.messages){const s=`visualVariables[${this.index}]`;r.messages.push(new Ce("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpressionTitle",context:r}))}}clone(){return new CP({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};h([p({readOnly:!0})],vd.prototype,"cache",null),h([p({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],vd.prototype,"axis",void 0),h([p({type:["rotation"],json:{type:["rotationInfo"]}})],vd.prototype,"type",void 0),h([p({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],vd.prototype,"rotationType",void 0),h([p({type:String,json:{write:!0}})],vd.prototype,"valueExpressionTitle",void 0),h([it("web-scene","valueExpressionTitle")],vd.prototype,"writeValueExpressionTitleWebScene",null),vd=CP=h([ce("esri.renderers.visualVariables.RotationVariable")],vd);const oC=vd;var $P;let lv=$P=class extends Je{constructor(t){super(t),this.label=null,this.size=null,this.value=null}clone(){return new $P({label:this.label,size:this.size,value:this.value})}};h([p({type:String,json:{write:!0}})],lv.prototype,"label",void 0),h([p({type:Number,cast:ki,json:{write:!0}})],lv.prototype,"size",void 0),h([p({type:Number,json:{write:!0}})],lv.prototype,"value",void 0),lv=$P=h([ce("esri.renderers.visualVariables.support.SizeStop")],lv);const uv=lv;var OP;let sM=OP=class extends fte{constructor(){super(...arguments),this.customValues=null}clone(){return new OP({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};h([p({type:[Number],json:{write:!0}})],sM.prototype,"customValues",void 0),sM=OP=h([ce("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],sM);const i2e=sM;var rp,cn;function tm(t){return t&&t.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function OS(t){return t!=null&&!isNaN(t)&&isFinite(t)}function gte(t){return t.valueExpression?rp.Expression:t.field&&typeof t.field=="string"?rp.Field:rp.Unknown}function r2e(t,e){const i=e||gte(t),r=t.valueUnit||"unknown";return i===rp.Unknown?cn.Constant:t.stops?cn.Stops:t.minSize!=null&&t.maxSize!=null&&t.minDataValue!=null&&t.maxDataValue!=null?cn.ClampedLinear:r==="unknown"?t.minSize!=null&&t.minDataValue!=null?t.minSize&&t.minDataValue?cn.Proportional:cn.Additive:cn.Identity:cn.RealWorldSize}(function(t){t.Unknown="unknown",t.Expression="expression",t.Field="field"})(rp||(rp={})),function(t){t.Unknown="unknown",t.Stops="stops",t.ClampedLinear="clamped-linear",t.Proportional="proportional",t.Additive="additive",t.Constant="constant",t.Identity="identity",t.RealWorldSize="real-world-size"}(cn||(cn={}));function Fut(t){}function s2e(t){return()=>t}const Z9={inches:ul(1,"meters","inches"),feet:ul(1,"meters","feet"),"us-feet":ul(1,"meters","us-feet"),yards:ul(1,"meters","yards"),miles:ul(1,"meters","miles"),"nautical-miles":ul(1,"meters","nautical-miles"),millimeters:ul(1,"meters","millimeters"),centimeters:ul(1,"meters","centimeters"),decimeters:ul(1,"meters","decimeters"),meters:ul(1,"meters","meters"),kilometers:ul(1,"meters","kilometers"),"decimal-degrees":1/O0e(1,"meters",Sr.radius)},Im=tt.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),IB=new kn,nM=Math.PI,vte=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function bte(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(g=>g.type==="color"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void Im.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const s=typeof e=="number",n=s?null:e,o=n&&n.attributes;let a=s?e:null;const l=r.field,{ipData:u,hasExpression:c}=r.cache;let d=r.cache.compiledFunc;if(!l&&!c){const g=r.stops;return g&&g[0]&&g[0].color}if(typeof a!="number")if(c){if(Re(i)||Re(i.arcade))return void Im.error("Use of arcade expressions requires an arcade context");const g={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},v=i.arcade.arcadeUtils,b=v.getViewInfo(g),_=v.createExecContext(n,b);if(!d){const S=v.createSyntaxTree(r.valueExpression);d=v.createFunction(S),r.cache.compiledFunc=d}a=v.executeFunction(d,_)}else o&&(a=o[l]);const f=r.normalizationField,m=o!=null&&f!=null?parseFloat(o[f]):void 0;if(a!=null&&(!f||s||!isNaN(m)&&m!==0)){isNaN(m)||s||(a/=m);const g=K9(a,u);if(g){const v=g[0],b=g[1],_=v===b?r.stops[v].color:It.blendColors(r.stops[v].color,r.stops[b].color,g[2],ee(i)?i.color:void 0);return new It(_)}}}function wte(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(g=>g.type==="opacity"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void Im.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const s=typeof e=="number",n=s?null:e,o=n&&n.attributes;let a=s?e:null;const l=r.field,{ipData:u,hasExpression:c}=r.cache;let d=r.cache.compiledFunc;if(!l&&!c){const g=r.stops;return g&&g[0]&&g[0].opacity}if(typeof a!="number")if(c){if(Re(i)||Re(i.arcade))return void Im.error("Use of arcade expressions requires an arcade context");const g={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},v=i.arcade.arcadeUtils,b=v.getViewInfo(g),_=v.createExecContext(n,b);if(!d){const S=v.createSyntaxTree(r.valueExpression);d=v.createFunction(S),r.cache.compiledFunc=d}a=v.executeFunction(d,_)}else o&&(a=o[l]);const f=r.normalizationField,m=o!=null&&f!=null?parseFloat(o[f]):void 0;if(a!=null&&(!f||s||!isNaN(m)&&m!==0)){isNaN(m)||s||(a/=m);const g=K9(a,u);if(g){const v=g[0],b=g[1];if(v===b)return r.stops[v].opacity;{const _=r.stops[v].opacity;return _+(r.stops[b].opacity-_)*g[2]}}}}function Y9(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(m=>m.type==="rotation"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void Im.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const s=r.axis||"heading",n=s==="heading"&&r.rotationType==="arithmetic"?90:0,o=s==="heading"&&r.rotationType==="arithmetic"?-1:1,a=typeof e=="number"?null:e,l=a&&a.attributes,u=r.field,{hasExpression:c}=r.cache;let d=r.cache.compiledFunc,f=0;if(!u&&!c)return f;if(c){if(Re(i)||Re(i.arcade))return void Im.error("Use of arcade expressions requires an arcade context");const m={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},g=i.arcade.arcadeUtils,v=g.getViewInfo(m),b=g.createExecContext(a,v);if(!d){const _=g.createSyntaxTree(r.valueExpression);d=g.createFunction(_),r.cache.compiledFunc=d}f=g.executeFunction(d,b)}else l&&(f=l[u]||0);return f=typeof f!="number"||isNaN(f)?null:n+o*f,f}function n2e(t,e,i){const r=typeof e=="number",s=r?null:e,n=s&&s.attributes;let o=r?e:null;const{isScaleDriven:a}=t.cache;let l=t.cache.compiledFunc;if(a){const c=ee(i)?i.scale:void 0,d=ee(i)?i.view:void 0;o=c==null||d==="3d"?o2e(t):c}else if(!r)switch(t.inputValueType){case rp.Expression:{if(Re(i)||Re(i.arcade))return void Im.error("Use of arcade expressions requires an arcade context");const c={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},d=i.arcade.arcadeUtils,f=d.getViewInfo(c),m=d.createExecContext(s,f);if(!l){const g=d.createSyntaxTree(t.valueExpression);l=d.createFunction(g),t.cache.compiledFunc=l}o=d.executeFunction(l,m);break}case rp.Field:n&&(o=n[t.field]);break;case rp.Unknown:o=null}if(!OS(o))return null;if(r||!t.normalizationField)return o;const u=n?parseFloat(n[t.normalizationField]):null;return OS(u)&&u!==0?o/u:null}function o2e(t){let e=null,i=null;const r=t.stops;return r?(e=r[0].value,i=r[r.length-1].value):(e=t.minDataValue||0,i=t.maxDataValue||0),(e+i)/2}function aC(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(n=>n.type==="size"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void Im.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const s=xte(n2e(r,e,i),r,e,i,r.cache.ipData);return s==null||isNaN(s)?0:s}function Oa(t,e,i){return t==null?null:tm(t)?aC(t,e,i):OS(t)?t:null}function _te(t,e,i){return OS(i)&&t>i?i:OS(e)&&t<e?e:t}function a2e(t,e,i,r){return t+((Oa(e.minSize,i,r)||e.minDataValue)??0)}function l2e(t,e,i){const r=t.stops;let s=r&&r.length&&r[0].size;return s==null&&(s=t.minSize),Oa(s,e,i)}function u2e(t,e,i,r){const s=(t-e.minDataValue)/(e.maxDataValue-e.minDataValue),n=Oa(e.minSize,i,r),o=Oa(e.maxSize,i,r),a=ee(r)?r.shape:void 0;if(t<=e.minDataValue)return n;if(t>=e.maxDataValue)return o;if(n==null||o==null)return null;if(e.scaleBy==="area"&&a){const l=a==="circle",u=l?nM*(n/2)**2:n*n,c=u+s*((l?nM*(o/2)**2:o*o)-u);return l?2*Math.sqrt(c/nM):Math.sqrt(c)}return n+s*(o-n)}function c2e(t,e,i,r){const s=ee(r)?r.shape:void 0,n=t/e.minDataValue,o=Oa(e.minSize,i,r),a=Oa(e.maxSize,i,r);let l=null;return l=s==="circle"?2*Math.sqrt(n*(o/2)**2):s==="square"||s==="diamond"||s==="image"?Math.sqrt(n*o**2):n*o,_te(l,o,a)}function h2e(t,e,i,r,s){const[n,o,a]=K9(t,s);if(n===o)return Oa(e.stops?.[n].size,i,r);{const l=Oa(e.stops?.[n].size,i,r);return l+(Oa(e.stops?.[o].size,i,r)-l)*a}}function d2e(t,e,i,r){const s=(ee(r)&&r.resolution?r.resolution:1)*Z9[e.valueUnit],n=Oa(e.minSize,i,r),o=Oa(e.maxSize,i,r),{valueRepresentation:a}=e;let l=null;return l=a==="area"?2*Math.sqrt(t/nM)/s:a==="radius"||a==="distance"?2*t/s:t/s,_te(l,n,o)}function xte(t,e,i,r,s){switch(e.transformationType){case cn.Additive:return a2e(t,e,i,r);case cn.Constant:return l2e(e,i,r);case cn.ClampedLinear:return u2e(t,e,i,r);case cn.Proportional:return c2e(t,e,i,r);case cn.Stops:return h2e(t,e,i,r,s);case cn.RealWorldSize:return d2e(t,e,i,r);case cn.Identity:return t;case cn.Unknown:return null}}function p2e(t,e,i){const{isScaleDriven:r}=t.cache;if(!(r&&i==="3d"||e))return null;const s={scale:e,view:i};let n=Oa(t.minSize,IB,s),o=Oa(t.maxSize,IB,s);if(n!=null||o!=null){if(n>o){const a=o;o=n,n=a}return{minSize:n,maxSize:o}}}function f2e(t,e,i){if(!t.visualVariables)return;const r=[],s=[],n=[],o=[],a=[];for(const l of t.visualVariables)switch(l.type){case"color":s.push(l);break;case"opacity":n.push(l);break;case"rotation":a.push(l);break;case"size":o.push(l)}return s.forEach(l=>{const u=bte(l,e,i);r.push({variable:l,value:u})}),n.forEach(l=>{const u=wte(l,e,i);r.push({variable:l,value:u})}),a.forEach(l=>{const u=Y9(l,e,i);r.push({variable:l,value:u})}),o.forEach(l=>{const u=aC(l,e,i);r.push({variable:l,value:u})}),r.filter(l=>l.value!=null)}function K9(t,e){if(!e)return;let i=0,r=e.length-1;return e.some((s,n)=>t<s?(r=n,!0):(i=n,!1)),[i,r,(t-e[i])/(e[r]-e[i])]}function Ste(t,e,i){const r=["proportional","proportional","proportional"];for(const s of t){const n=s.useSymbolValue?"symbol-value":aC(s,e,i);switch(s.axis){case"width":r[0]=n;break;case"depth":r[1]=n;break;case"height":r[2]=n;break;case"width-and-depth":r[0]=n,r[1]=n;break;case"all":case void 0:case null:r[0]=n,r[1]=n,r[2]=n;break;default:s.axis}}return r}const Q9=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:Ste,getColor:bte,getOpacity:wte,getRotationAngle:Y9,getSize:aC,getSizeForValue:xte,getSizeFromNumberOrVariable:Oa,getSizeRangeAtScale:p2e,getVisualVariableValues:f2e,viewScaleRE:vte},Symbol.toStringTag,{value:"Module"}));var RP;const tT=new si({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),kP=new si({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function MB(t){if(t!=null)return typeof t=="string"||typeof t=="number"?ki(t):t.type==="size"?tm(t)?t:(delete(t={...t}).type,new Wi(t)):void 0}function AB(t,e,i){if(typeof t!="object")return t;const r=new Wi;return r.read(t,i),r}let Wi=RP=class extends j3{constructor(t){super(t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&vte.test(this.valueExpression)}}set expression(t){tt.getLogger(this.declaredClass).warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),t==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",t)):this._set("expression",null)}set index(t){tm(this.maxSize)&&(this.maxSize.index=`visualVariables[${t}].maxSize`),tm(this.minSize)&&(this.minSize.index=`visualVariables[${t}].minSize`),this._set("index",t)}get inputValueType(){return gte(this)}set maxDataValue(t){t&&this.stops&&(tt.getLogger(this.declaredClass).warn("cannot set maxDataValue when stops is not null."),t=null),this._set("maxDataValue",t)}set maxSize(t){t&&this.stops&&(tt.getLogger(this.declaredClass).warn("cannot set maxSize when stops is not null."),t=null),this._set("maxSize",t)}castMaxSize(t){return MB(t)}readMaxSize(t,e,i){return AB(t,e,i)}set minDataValue(t){t&&this.stops&&(tt.getLogger(this.declaredClass).warn("cannot set minDataValue when stops is not null."),t=null),this._set("minDataValue",t)}set minSize(t){t&&this.stops&&(tt.getLogger(this.declaredClass).warn("cannot set minSize when stops is not null."),t=null),this._set("minSize",t)}castMinSize(t){return MB(t)}readMinSize(t,e,i){return AB(t,e,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(t){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value):t&&(tt.getLogger(this.declaredClass).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),t=null),this._set("stops",t)}get transformationType(){return r2e(this,this.inputValueType)}readValueExpression(t,e){return t||e.expression&&"$view.scale"}writeValueExpressionWebScene(t,e,i,r){if(t==="$view.scale"){if(r&&r.messages){const s=this.index,n=typeof s=="string"?s:`visualVariables[${s}]`;r.messages.push(new Ce("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:n+".valueExpression",context:r}))}}else e[i]=t}readValueUnit(t){return t?kP.read(t):null}clone(){return new RP({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:tm(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:tm(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(t=>t.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===cn.ClampedLinear){const{minSize:t,maxSize:e}=this;return this.minSize=e,this.maxSize=t,this}if(this.transformationType===cn.Stops){const t=this.stops;if(!t)return this;const e=t.map(r=>r.size).reverse(),i=t.length;for(let r=0;r<i;r++)t[r].size=e[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};h([p({readOnly:!0})],Wi.prototype,"cache",null),h([p({type:tT.apiValues,json:{type:tT.jsonValues,origins:{"web-map":{read:!1}},read:tT.read,write:tT.write}})],Wi.prototype,"axis",void 0),h([p({type:String,value:null,json:{read:!1}})],Wi.prototype,"expression",null),h([p()],Wi.prototype,"index",null),h([p({type:String,readOnly:!0})],Wi.prototype,"inputValueType",null),h([p({type:i2e,json:{write:!0}})],Wi.prototype,"legendOptions",void 0),h([p({type:Number,value:null,json:{write:!0}})],Wi.prototype,"maxDataValue",null),h([p({type:Number,value:null,json:{write:!0}})],Wi.prototype,"maxSize",null),h([mi("maxSize")],Wi.prototype,"castMaxSize",null),h([Ye("maxSize")],Wi.prototype,"readMaxSize",null),h([p({type:Number,value:null,json:{write:!0}})],Wi.prototype,"minDataValue",null),h([p({type:Number,value:null,json:{write:!0}})],Wi.prototype,"minSize",null),h([mi("minSize")],Wi.prototype,"castMinSize",null),h([Ye("minSize")],Wi.prototype,"readMinSize",null),h([p({type:String,json:{write:!0}})],Wi.prototype,"normalizationField",void 0),h([p({readOnly:!0})],Wi.prototype,"arcadeRequired",null),h([p({type:String})],Wi.prototype,"scaleBy",void 0),h([p({type:[uv],value:null,json:{write:!0}})],Wi.prototype,"stops",null),h([p({type:["outline"],json:{write:!0}})],Wi.prototype,"target",void 0),h([p({type:String,readOnly:!0})],Wi.prototype,"transformationType",null),h([p({type:["size"],json:{type:["sizeInfo"]}})],Wi.prototype,"type",void 0),h([p({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],Wi.prototype,"useSymbolValue",void 0),h([p({type:String,json:{write:!0}})],Wi.prototype,"valueExpression",void 0),h([Ye("valueExpression",["valueExpression","expression"])],Wi.prototype,"readValueExpression",null),h([it("web-scene","valueExpression")],Wi.prototype,"writeValueExpressionWebScene",null),h([p({type:["radius","diameter","area","width","distance"],json:{write:!0}})],Wi.prototype,"valueRepresentation",void 0),h([p({type:kP.apiValues,json:{write:kP.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],Wi.prototype,"valueUnit",void 0),h([Ye("valueUnit")],Wi.prototype,"readValueUnit",null),Wi=RP=h([ce("esri.renderers.visualVariables.SizeVariable")],Wi);const s1=Wi,m2e={color:mte,size:s1,opacity:yte,rotation:oC},y2e=new si({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),g2e=/^\[([^\]]+)\]$/i;let oM=class extends Pt{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),(e=e&&e.filter(i=>!!i))&&e.length){for(const i of e)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&e.sort((i,r)=>{let s=null;return s=i.target===r.target?0:i.target?1:-1,s});for(let i=0;i<e.length;i++)e[i].index=i;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,i,r){const{rotationExpression:s,rotationType:n}=i,o=s&&s.match(g2e),a=o&&o[1];if(a&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:n,field:a})),e)return e.map(l=>{const u=y2e.read(l.type),c=m2e[u];c||(tt.getLogger(this.declaredClass).warn(`Unknown variable type: ${u}`),r&&r.messages&&r.messages.push(new kl("visual-variable:unsupported",`visualVariable of type '${u}' is not supported`,{definition:l,context:r})));const d=new c;return d.read(l,r),d})}writeVariables(e,i){const r=[];for(const s of e){const n=s.toJSON(i);n&&r.push(n)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};h([p()],oM.prototype,"visualVariables",null),oM=h([ce("esri.renderers.visualVariables.VisualVariableFactory")],oM);const v2e=oM,b2e={base:j3,key:"type",typeMap:{opacity:yte,color:mte,rotation:oC,size:s1}},Jm=t=>{let e=class extends t{constructor(){super(...arguments),this._vvFactory=new v2e}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,r,s){return this._vvFactory.readVariables(i,r,s)}writeVisualVariables(i,r,s,n){r[s]=this._vvFactory.writeVariables(i,n)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,r){return i?this.getVisualVariablesForType(i,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(i,r){const s=this.visualVariables;return s?s.filter(n=>n.type===i&&(typeof r=="string"?n.target===r:r!==!1||!n.target)):[]}async collectVVRequiredFields(i,r){let s=[];this.visualVariables&&(s=s.concat(this.visualVariables));for(const n of s)n&&(n.field&&Ml(i,r,n.field),n.normalizationField&&Ml(i,r,n.normalizationField),n.valueExpression&&(w2e(n.valueExpression,i,r)||await Xo(i,r,n.valueExpression)))}};return h([p({types:[b2e],value:null,json:{write:!0}})],e.prototype,"visualVariables",null),h([Ye("visualVariables",["visualVariables","rotationType","rotationExpression"])],e.prototype,"readVisualVariables",null),h([it("visualVariables")],e.prototype,"writeVisualVariables",null),e=h([ce("esri.renderers.mixins.VisualVariablesMixin")],e),e};function w2e(t,e,i){const r=Q_e(t);return!!ee(r)&&(Ml(e,i,r),!0)}const O_={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function _2e(t,e=O_){if(!t)return{symbol:null};const{retainId:i=O_.retainId,ignoreDrivers:r=O_.ignoreDrivers,hasLabelingContext:s=O_.hasLabelingContext,retainCIM:n=O_.retainCIM}=e;let o=null;if(F0(t)||t instanceof r1)o=t.clone();else if(t.type==="cim"){const a=t.data?.symbol?.type;if(a!=="CIMPointSymbol")return{error:new Ce("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${a||"unknown"}' is unsupported in 3D`,{symbol:t})};o=n?t.clone():Gg.fromCIMSymbol(t)}else if(t instanceof za)o=tC.fromSimpleLineSymbol(t);else if(t instanceof Eu)o=Gg.fromSimpleMarkerSymbol(t);else if(t instanceof cm)o=Gg.fromPictureMarkerSymbol(t);else if(t instanceof Tp)o=e.geometryType&&e.geometryType==="mesh"?iC.fromSimpleFillSymbol(t):F3.fromSimpleFillSymbol(t);else{if(!(t instanceof zw))return{error:new Ce("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${t.type||t.declaredClass}' is unsupported in 3D`,{symbol:t})};o=s?eC.fromTextSymbol(t):Gg.fromTextSymbol(t)}if(i&&o&&o.type!=="cim"&&(o.id=t.id),r&&F0(o))for(let a=0;a<o.symbolLayers.length;++a)o.symbolLayers.getItemAt(a)._ignoreDrivers=!0;return{symbol:o}}function GA(t,e,i,r){const s=Ete(t,{},{context:r,isLabelSymbol:!1});ee(s)&&(e[i]=s)}function CB(t,e,i,r){const s=Ete(t,{},{context:r,isLabelSymbol:!0});ee(s)&&(e[i]=s)}function $B(t){return t instanceof Bw||t instanceof r1}function Ete(t,e,i){if(Re(t))return null;const{context:r,isLabelSymbol:s}=i,n=r?.origin,o=r?.messages;if(n==="web-scene"&&!$B(t)){const a=_2e(t,{retainCIM:!0,hasLabelingContext:s});return ee(a.symbol)?a.symbol.write(e,r):(o?.push(new Ce("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:t,context:r,error:a.error})),null)}return(n==="web-map"||n==="portal-item"&&!yX(r?.layer))&&$B(t)?(o?.push(new Ce("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:t,context:r})),null):t.write(e,r)}function X9(t,e){return z_e(t,null,e)}const Gw={types:sC,json:{write:{writer:GA},origins:{"web-scene":{types:bB,write:{writer:GA},read:{reader:zm({types:bB})}}}}},Tte={types:{base:Ba,key:"type",typeMap:{"simple-fill":h0.typeMap["simple-fill"],"picture-fill":h0.typeMap["picture-fill"],"polygon-3d":h0.typeMap["polygon-3d"]}},json:{write:{writer:GA},origins:{"web-scene":{type:F3,write:{writer:GA}}}}},aM={cast:t=>t==null||typeof t=="string"||typeof t=="number"?t:`${t}`,json:{type:String,write:{writer:(t,e)=>{e.value=t?.toString()}}}};var LP;let vf=LP=class extends Je{constructor(t){super(t),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new LP({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const t=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${t}`}};h([p({type:String,json:{write:!0}})],vf.prototype,"description",void 0),h([p({type:String,json:{write:!0}})],vf.prototype,"label",void 0),h([p({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],vf.prototype,"minValue",void 0),h([p({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],vf.prototype,"maxValue",void 0),h([p(Gw)],vf.prototype,"symbol",void 0),vf=LP=h([ce("esri.renderers.support.ClassBreakInfo")],vf);const Kb=vf;var PP;const Ite="log",lM="percent-of-total",uM="field",iT=new si({esriNormalizeByLog:Ite,esriNormalizeByPercentOfTotal:lM,esriNormalizeByField:uM}),x2e=ns(Kb);let Ds=PP=class extends Jm(Ip){constructor(t){super(t),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(t,e,i){if(!Array.isArray(t))return;let r=e.minValue;return t.map(s=>{const n=new Kb;return n.read(s,i),n.minValue==null&&(n.minValue=r),n.maxValue==null&&(n.maxValue=n.minValue),r=n.maxValue,n})}writeClassBreakInfos(t,e,i,r){const s=t.map(n=>n.write({},r));this._areClassBreaksConsecutive()&&s.forEach(n=>delete n.classMinValue),e[i]=s}castField(t){return t==null?t:typeof t=="function"?(tt.getLogger(this.declaredClass).error(".field: field must be a string value"),null):M3(t)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let t=this._get("normalizationType");const e=!!this.normalizationField,i=this.normalizationTotal!=null;return e||i?(t=e&&uM||i&&lM||null,e&&i&&tt.getLogger(this.declaredClass).warn("warning: both normalizationField and normalizationTotal are set!")):t!==uM&&t!==lM||(t=null),t}set normalizationType(t){this._set("normalizationType",t)}addClassBreakInfo(t,e,i){let r=null;r=typeof t=="number"?new Kb({minValue:t,maxValue:e,symbol:pte(i)}):x2e(Le(t)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(t,e){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const s=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(s[0]===t&&s[1]===e){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(t,e){return this.valueExpression&&(Re(e)||Re(e.arcade))&&tt.getLogger(this.declaredClass).warn(""),this.valueExpression?this._getBreakIndexForExpression(t,e):this._getBreakIndexForField(t)}async getClassBreakInfo(t,e){let i=e;this.valueExpression&&(Re(e)||Re(e.arcade))&&(i={...i,arcade:await cp()});const r=this.getBreakIndex(t,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(t,e){if(this.valueExpression&&(Re(e)||Re(e.arcade)))return void tt.getLogger(this.declaredClass).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(t,e);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(Re(e)||Re(e.arcade))){const s=await cp(),{arcadeUtils:n}=s;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),i={...i,arcade:s}}const r=this.getBreakIndex(t,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}getSymbols(){const t=[];return this.classBreakInfos.forEach(e=>{e.symbol&&t.push(e.symbol)}),this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${t}.${e}.${this.classBreakInfos.reduce((r,s)=>r+s.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new PP({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:Le(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:Le(this.visualVariables),legendOptions:Le(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(t,e)),Xo(t,e,this.valueExpression)];Ml(t,e,this.field),Ml(t,e,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:s,arcade:n}=VF(e,{}),{valueExpression:o}=this;let a=this._compiledValueExpression.valueExpression===o?this._compiledValueExpression.compiledFunction:null;const l=n.arcadeUtils;if(!a){const c=l.createSyntaxTree(o);a=l.createFunction(c),this._compiledValueExpression.compiledFunction=a}this._compiledValueExpression.valueExpression=o;const u=l.executeFunction(a,l.createExecContext(t,l.getViewInfo({viewingMode:i,scale:r,spatialReference:s})));return this._getBreakIndexfromInfos(u)}_getBreakIndexForField(t){const e=this.field,i=t.attributes,r=this.normalizationType;let s=parseFloat(i[e]);if(r){const n=this.normalizationTotal,o=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===Ite)s=Math.log(s)*Math.LOG10E;else if(r!==lM||n==null||isNaN(n)){if(r===uM&&!isNaN(o)){if(isNaN(s)||isNaN(o))return-1;s/=o}}else s=s/n*100}return this._getBreakIndexfromInfos(s)}_getBreakIndexfromInfos(t){const e=this.isMaxInclusive;if(t!=null&&typeof t=="number"&&!isNaN(t))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=t&&(e?t<=r[1]:t<r[1]))return i}return-1}_areClassBreaksConsecutive(){const t=this.classBreakInfos,e=t.length;for(let i=1;i<e;i++)if(t[i-1].maxValue!==t[i].minValue)return!1;return!0}};h([p(Tte)],Ds.prototype,"backgroundFillSymbol",void 0),h([p({type:[Kb]})],Ds.prototype,"classBreakInfos",void 0),h([Ye("classBreakInfos")],Ds.prototype,"readClassBreakInfos",null),h([it("classBreakInfos")],Ds.prototype,"writeClassBreakInfos",null),h([p({type:String,json:{write:!0}})],Ds.prototype,"defaultLabel",void 0),h([p(Gw)],Ds.prototype,"defaultSymbol",void 0),h([p({type:String,json:{write:!0}})],Ds.prototype,"field",void 0),h([mi("field")],Ds.prototype,"castField",null),h([p({type:Boolean})],Ds.prototype,"isMaxInclusive",void 0),h([p({type:d0,json:{write:!0}})],Ds.prototype,"legendOptions",void 0),h([p({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Ds.prototype,"minValue",null),h([p({type:String,json:{write:!0}})],Ds.prototype,"normalizationField",void 0),h([p({type:Number,cast:t=>vl(t),json:{write:!0}})],Ds.prototype,"normalizationTotal",void 0),h([p({type:iT.apiValues,value:null,json:{type:iT.jsonValues,read:iT.read,write:iT.write}})],Ds.prototype,"normalizationType",null),h([Dt({classBreaks:"class-breaks"})],Ds.prototype,"type",void 0),h([p({type:String,json:{write:!0}})],Ds.prototype,"valueExpression",void 0),h([p({type:String,json:{write:!0}})],Ds.prototype,"valueExpressionTitle",void 0),Ds=PP=h([ce("esri.renderers.ClassBreaksRenderer")],Ds);const qw=Ds,yO=-3;var Df;(function(t){t[t.ALL=0]="ALL",t[t.SOME=1]="SOME"})(Df||(Df={}));let jut=class{constructor(e,i,r){this._namespace=e,this._storage=i,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(e,i,r,s=0){this._storage.put(this._namespace+e,i,r,s)}get(e){const i=this._storage.get(this._namespace+e);return i===void 0?++this._miss:++this._hit,i}pop(e){const i=this._storage.pop(this._namespace+e);return i===void 0?++this._miss:++this._hit,i}updateSize(e,i,r){this._storage.updateSize(this._namespace+e,i,r)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}},Mte=class{constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new lm,this._users=new lm}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,i){this._removeFuncs.push([e,i])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace(i=>i[0]!==e)}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()}put(e,i,r,s){const n=this._db.get(e);if(n&&(this._size-=n.size,this._db.delete(e),n.entry!==i&&this._notifyRemove(e,n.entry,Df.ALL)),r>this._maxSize)return void this._notifyRemove(e,i,Df.ALL);if(i===void 0)return void console.warn("Refusing to cache undefined entry ");if(!r||r<0)return void console.warn("Refusing to cache entry with invalid size "+r);const o=1+Math.max(s,yO)-yO;this._db.set(e,{entry:i,size:r,lifetime:o,lives:o}),this._size+=r,this._checkSizeLimit()}updateSize(e,i,r){const s=this._db.get(e);if(s&&s.entry===i){for(this._size-=s.size;r>this._maxSize;){const n=this._notifyRemove(e,i,Df.SOME);if(!(ee(n)&&n>0))return void this._db.delete(e);r=n}s.size=r,this._size+=r,this._checkSizeLimit()}}pop(e){const i=this._db.get(e);if(i)return this._size-=i.size,this._db.delete(e),++this._hit,i.entry;++this._miss}get(e){const i=this._db.get(e);if(i!==void 0)return this._db.delete(e),i.lives=i.lifetime,this._db.set(e,i),++this._hit,i.entry;++this._miss}getStats(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((o,a)=>{const l=o.lifetime;r[l]=(r[l]||0)+o.size,this._users.forAll(u=>{const c=u.namespace;if(a.startsWith(c)){const d=i[c]||0;i[c]=d+o.size}})});const s={};this._users.forAll(o=>{const a=o.namespace;if(!isNaN(o.hitRate)&&o.hitRate>0){const l=i[a]||0;i[a]=l,s[a]=Math.round(100*o.hitRate)+"%"}else s[a]="0%"});const n=Object.keys(i);n.sort((o,a)=>i[a]-i[o]),n.forEach(o=>e[o]=Math.round(i[o]/2**20)+"MB / "+s[o]);for(let o=r.length-1;o>=0;--o){const a=r[o];a&&(e["Priority "+(o+yO-1)]=Math.round(a/this.size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll(e=>e.resetHitRate())}clear(e){this._db.forEach((i,r)=>{r.startsWith(e)&&(this._size-=i.size,this._db.delete(r),this._notifyRemove(r,i.entry,Df.ALL))})}clearAll(){this._db.forEach((e,i)=>this._notifyRemove(i,e.entry,Df.ALL)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,i,r){let s;return this._removeFuncs.some(n=>{if(e.startsWith(n[0])){const o=n[1](i,r);return typeof o=="number"&&(s=o),!0}return!1}),s}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[e,i]of this._db){if(this._db.delete(e),i.lives<=1){this._size-=i.size;const r=this._notifyRemove(e,i.entry,Df.SOME);ee(r)&&r>0&&(this._size+=r,i.lives=i.lifetime,i.size=r,this._db.set(e,i))}else--i.lives,this._db.set(e,i);if(this._size<=.9*this.maxSize)return}}},Ate=class{constructor(e,i){this._storage=new Mte,this._storage.maxSize=e,i&&this._storage.registerRemoveFunc("",i)}put(e,i,r){this._storage.put(e,i,r,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}};const OB="esri.renderers.support.DictionaryLoader",S2e={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let eD=class{constructor(e,i,r){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new Ate(100),this._dictionaryPromise=null,this.url=e,this.config=i,this.fieldMap=r}getSymbolFields(){return this._symbolFields}async getSymbolAsync(e,i){let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{r=await this._dictionaryPromise}catch(m){if(vn(m))return this._dictionaryPromise=null,null}const s={};if(this.fieldMap)for(const m of this._symbolFields){const g=this.fieldMap[m];if(g&&e.attributes[g]!=null){const v=""+e.attributes[g];s[m]=v}else s[m]=""}const n=r?.(s,i);if(!n||typeof n!="string")return null;const o=zF(n).toString(),a=this._symbolCache.get(o);if(a)return a.catch(()=>{this._symbolCache.pop(o)}),a;const l=n.split(";"),u=[],c=[];for(const m of l)if(m)if(m.includes("po:")){const g=m.substr(3).split("|");if(g.length===3){const v=g[0],b=g[1];let _=g[2];if(b==="DashTemplate")_=_.split(" ").map(S=>Number(S));else if(b==="Color"){const S=new It(_).toRgba();_=[S[0],S[1],S[2],255*S[3]]}else _=Number(_);c.push({primitiveName:v,propertyName:b,value:_})}}else if(m.includes("|")){for(const g of m.split("|"))if(this._itemNames.has(g)){u.push(g);break}}else this._itemNames.has(m)&&u.push(m);const d=!ee(e.geometry)||!e.geometry.hasZ&&e.geometry.type==="point",f=this._cimPartsToCIMSymbol(u,c,d,i);return this._symbolCache.put(o,f,1),f}async fetchResources(e){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void tt.getLogger(OB).error("no valid URL!");const i=Et(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:ee(e)?e.signal:null}),[{data:r}]=await Promise.all([i,cp()]);if(!r)throw this._dictionaryPromise=null,new Ce("esri.renderers.DictionaryRenderer","Bad dictionary data!");const s=r.expression,n=r.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+r.cimRefTemplateUrl,this._itemNames=new Set(r.itemsNames),this._symbolFields=n.symbol;const o={};if(this.config){const u=this.config;for(const c in u)o[c]=u[c]}if(n.configuration)for(const u of n.configuration)o.hasOwnProperty(u.name)||(o[u.name]=u.value);const a=[];if(ee(e)&&e.fields&&this.fieldMap)for(const u of this._symbolFields){const c=this.fieldMap[u],d=e.fields.filter(f=>f.name===c);d.length>0&&a.push({...d[0],name:u})}const l=Kbe(s,ee(e)?e.spatialReference:null,a,o).then(u=>{const c={scale:0};return(d,f)=>{if(Re(u))return null;const m=u.repurposeFeature({geometry:null,attributes:d});return c.scale=ee(f)?f.scale??void 0:void 0,u.evaluate({$feature:m,$view:c})}}).catch(u=>(tt.getLogger(OB).error("Creating dictinoary expression failed:",u),null));return this._dictionaryPromise=l,l}async _cimPartsToCIMSymbol(e,i,r,s){const n=new Array(e.length);for(let l=0;l<e.length;l++)n[l]=this._getSymbolPart(e[l],s);const o=await Promise.all(n),a=this.fieldMap;if(a)for(const l of o)Cte(l,a);return new k3({data:this._combineSymbolParts(o,i,r)})}async _getSymbolPart(e,i){if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then(n=>n.data);const r=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,e),s=Et(r,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(e,s);try{return(await s).data}catch(n){throw this._ongoingRequests.delete(e),n}}_combineSymbolParts(e,i,r){if(!e||e.length===0)return null;const s={...e[0]};if(e.length>1){s.symbolLayers=[];for(const n of e){const o=n;s.symbolLayers.unshift(...o.symbolLayers)}}return r&&(s.callout=S2e),{type:"CIMSymbolReference",symbol:s,primitiveOverrides:i}}};function Cte(t,e){if(!t)return;const i=t.symbolLayers;if(!i)return;let r=i.length;for(;r--;){const s=i[r];s&&s.enable!==!1&&s.type==="CIMVectorMarker"&&E2e(s,e)}}function E2e(t,e){const i=t.markerGraphics;if(i)for(const r of i){if(!r)continue;const s=r.symbol;if(s)switch(s.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":Cte(s,e);break;case"CIMTextSymbol":s.fieldMap=e}}}const Gut=Object.freeze(Object.defineProperty({__proto__:null,DictionaryLoader:eD},Symbol.toStringTag,{value:"Module"}));var NP;let Wu=NP=class extends Jm(Ip){constructor(t){super(t),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new eD(this.url,this.config,this.fieldMap)}writeData(t,e){t&&(e.scalingExpressionInfo={expression:t,returnType:"number"})}writeVisualVariables(t,e,i,r){r?.origin||super.writeVisualVariables(t,e,i,r)}clone(){return new NP({config:Le(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:Le(this.fieldMap),url:Le(this.url),visualVariables:Le(this.visualVariables)})}async getSymbolAsync(t,e){return this._loader.getSymbolAsync(t,e)}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e),this.scaleExpression&&await Xo(t,e,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];e.has(r)&&t.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};h([p({type:eD})],Wu.prototype,"_loader",null),h([p({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Wu.prototype,"config",void 0),h([p({type:Object,json:{write:!0}})],Wu.prototype,"fieldMap",void 0),h([p({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Wu.prototype,"scaleExpression",void 0),h([it("scaleExpression")],Wu.prototype,"writeData",null),h([p({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(t){return{enabled:!!t&&!!this.scaleExpression}}}}})],Wu.prototype,"scaleExpressionTitle",void 0),h([p({type:String,json:{write:!0}})],Wu.prototype,"url",void 0),h([it("visualVariables")],Wu.prototype,"writeVisualVariables",null),Wu=NP=h([ce("esri.renderers.DictionaryRenderer")],Wu);const T2e=Wu;var FP;let bd=FP=class extends Je{constructor(t){super(t),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(t){return t==null?t:typeof t=="function"?(tt.getLogger(this.declaredClass).error(".field: field must be a string value"),null):M3(t)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new FP({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};h([p({type:It,json:{type:[Number],write:!0}})],bd.prototype,"color",void 0),h([p({type:String,json:{write:!0}})],bd.prototype,"field",void 0),h([mi("field")],bd.prototype,"castField",null),h([p({type:String,json:{write:!0}})],bd.prototype,"label",void 0),h([p({type:String,json:{write:!0}})],bd.prototype,"valueExpression",void 0),h([p({type:String,json:{write:!0}})],bd.prototype,"valueExpressionTitle",void 0),bd=FP=h([ce("esri.renderers.support.AttributeColorInfo")],bd);const $te=bd;var DP;let cM=DP=class extends Je{constructor(){super(...arguments),this.unit=null}clone(){return new DP({unit:this.unit})}};h([p({type:String,json:{write:!0}})],cM.prototype,"unit",void 0),cM=DP=h([ce("esri.renderers.support.DotDensityLegendOptions")],cM);const I2e=cM;var jP;let ua=jP=class extends Jm(Ip){constructor(t){super(t),this.attributes=null,this.backgroundColor=new It([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new za,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(t){if(this.referenceScale==null)return this.dotValue;const e=t/this.referenceScale*this.dotValue;return e<1?1:e}getSymbol(){return new Tp({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new jP({attributes:Le(this.attributes),backgroundColor:Le(this.backgroundColor),dotBlendingEnabled:Le(this.dotBlendingEnabled),dotShape:Le(this.dotShape),dotSize:Le(this.dotSize),dotValue:Le(this.dotValue),legendOptions:Le(this.legendOptions),outline:Le(this.outline),referenceScale:Le(this.referenceScale),visualVariables:Le(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){return`${this.attributes?.map(e=>e.field||e.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e);for(const i of this.attributes??[])i.valueExpression&&await Xo(t,e,i.valueExpression),i.field&&t.add(i.field)}};h([p({type:[$te],json:{write:!0}})],ua.prototype,"attributes",void 0),h([p({type:It,json:{write:!0}})],ua.prototype,"backgroundColor",void 0),h([p({type:Boolean,json:{write:!0}})],ua.prototype,"dotBlendingEnabled",void 0),h([p({type:String,json:{write:!1}})],ua.prototype,"dotShape",void 0),h([p({type:Number,json:{write:!0}})],ua.prototype,"dotSize",void 0),h([p({type:I2e,json:{write:!0}})],ua.prototype,"legendOptions",void 0),h([p({type:za,json:{default:null,write:!0}})],ua.prototype,"outline",void 0),h([p({type:Number,json:{write:!0}})],ua.prototype,"dotValue",void 0),h([p({type:Number,json:{write:!0}})],ua.prototype,"referenceScale",void 0),h([p({type:Number,json:{write:!0}})],ua.prototype,"seed",void 0),h([Dt({dotDensity:"dot-density"})],ua.prototype,"type",void 0),ua=jP=h([ce("esri.renderers.DotDensityRenderer")],ua);const M2e=ua;var UP;let F2=UP=class extends Je{constructor(t){super(t),this.color=null,this.ratio=null}clone(){return new UP({color:this.color,ratio:this.ratio})}};h([p({type:It,json:{type:[Si],default:null,write:!0}})],F2.prototype,"color",void 0),h([p({type:Number,json:{write:!0}})],F2.prototype,"ratio",void 0),F2=UP=h([ce("esri.renderers.support.HeatmapColorStop")],F2);const kx=F2;let cv=class extends Er(Je){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};h([p({type:String,json:{write:!0}})],cv.prototype,"minLabel",void 0),h([p({type:String,json:{write:!0}})],cv.prototype,"maxLabel",void 0),h([p({type:String,json:{write:!0}})],cv.prototype,"title",void 0),cv=h([ce("esri.renderers.support.HeatmapLegendOptions")],cv);function lC(){return[0,0,0,0]}function A2e(t){return[t[0],t[1],t[2],t[3]]}function Hw(t,e,i,r){return[t,e,i,r]}function C2e(t){const e=lC(),i=Math.min(4,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function $2e(t,e){return new Float64Array(t,e,4)}function Ote(){return lC()}function Rte(){return Hw(1,1,1,1)}function kte(){return Hw(1,0,0,0)}function Lte(){return Hw(0,1,0,0)}function Pte(){return Hw(0,0,1,0)}function Nte(){return Hw(0,0,0,1)}const O2e=Ote(),R2e=Rte(),k2e=kte(),L2e=Lte(),P2e=Pte(),N2e=Nte();Object.freeze(Object.defineProperty({__proto__:null,ONES:R2e,UNIT_W:N2e,UNIT_X:k2e,UNIT_Y:L2e,UNIT_Z:P2e,ZEROS:O2e,clone:A2e,create:lC,createView:$2e,fromArray:C2e,fromValues:Hw,ones:Rte,unitW:Nte,unitX:kte,unitY:Lte,unitZ:Pte,zeros:Ote},Symbol.toStringTag,{value:"Module"}));const tD=2.4;function F2e(t){return dp(t*tD)}function D2e(t){return kee(t)/tD}function j2e(t,e,i,r){let{color:s,ratio:n}=e,{color:o,ratio:a}=i;a===n&&(a===1?n-=1e-6:a+=1e-6);const l=Da((r-n)/(a-n),0,1);BX(t,s.toArray(),o.toArray(),l)}function Hut(t){const i=new Uint8ClampedArray(2048);if(t=t.filter(({ratio:a})=>a>=0&&a<=1).sort((a,l)=>a.ratio-l.ratio).map(({color:a,ratio:l})=>({color:a,ratio:Math.max(l,.001)})),t.length<1)return i;let r=t[0],s=t[0],n=1;const o=lC();for(let a=0;a<512;a++){const l=(a+.5)/512;for(;l>s.ratio&&n<t.length;)r=s,s=t[n++];j2e(o,r,s,l),i.set(o,4*a)}return i}function Wut(t,e,i,r){const{radius:s,fieldOffset:n,field:o}=e,a=Math.round(kee(s)),l=new Float64Array(i*r);let u,c=Number.NEGATIVE_INFINITY;const d=B2e(o,n),f=new Set;for(const m of t){const g=m.getCursor();for(;g.next();){const v=g.getObjectId();if(f.has(v))continue;f.add(v);const b=g.readLegacyPointGeometry(),_=128;if(b.x<-_||b.x>=i+_||b.y<-_||b.y>r+_)continue;const S=+d(g),M=Math.max(0,Math.round(b.x)-a),x=Math.max(0,Math.round(b.y)-a),T=Math.min(r,Math.round(b.y)+a),I=Math.min(i,Math.round(b.x)+a);for(let $=x;$<T;$++)for(let L=M;L<I;L++){const B=$*i+L,z=V2e(b.x-L,b.y-$,a);u=l[B]+=z*S,u>c&&(c=u)}}}return{matrix:l.buffer,max:c}}function Jut(t,e,i,r,s,n){t.canvas.width=t.canvas.height=e,t.clearRect(0,0,e,e);const o=t.getImageData(0,0,e,e);i&&r&&o.data.set(new Uint8ClampedArray(U2e(e,i,r,s,n))),t.putImageData(o,0,0)}function U2e(t,e,i,r,s){const n=new Uint32Array(t*t),o="buffer"in e?e:new Float64Array(e),a="buffer"in i?new Uint32Array(i.buffer):new Uint32Array(new Uint8Array(i).buffer),l=a.length/(s-r);for(let u=0;u<o.length;u++){const c=o[u],d=Math.floor((c-r)*l);n[u]=a[Da(d,0,a.length-1)]}return n.buffer}function V2e(t,e,i){const r=Math.sqrt(t**2+e**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function Zut(t,e){return typeof t=="function"?t:t?typeof e=="string"?i=>-1*+i[t]:i=>+i[t]+e:()=>1}function B2e(t,e){return t!=null?typeof e=="string"?i=>-1*+i.readAttribute(t):i=>+i.readAttribute(t)+e:i=>1}var VP;const Fte="esri.renderers.HeatmapRenderer",z2e=tt.getLogger(Fte);function RB(t){if(t!=null){const{maxDensity:e,minDensity:i,radius:r}=t;if(e!=null||i!=null||r!=null){const{blurRadius:s,maxPixelIntensity:n,minPixelIntensity:o,...a}=t;return a}}return t}let sn=VP=class extends Ip{constructor(t){super(t),this.authoringInfo=null,this.colorStops=[new kx({ratio:0,color:new It("rgba(255, 140, 0, 0)")}),new kx({ratio:.75,color:new It("rgba(255, 140, 0, 1)")}),new kx({ratio:.9,color:new It("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(t){return RB(t)}get blurRadius(){return D2e(this.radius)}set blurRadius(t){const e=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",F2e(t)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",e*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(t){this._set("maxDensity",t*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(t){this._set("minDensity",t*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(tD**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(t,e){this._warnedProps[t]||Ws(this).getDefaultOrigin()==="user"&&(this._warnedProps[t]=!0,Pw(()=>{$k(z2e,t,{replacement:`${String(e)} (suggested value: ${this._get(e)})`,version:"4.24"})}))}read(t,e){t=RB(t),super.read(t,e)}getSymbol(){return new Eu}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(t,e){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&await Ml(t,e,i),r&&typeof r=="string"&&await Xo(t,e,r)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new VP({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:Le(this.colorStops),field:this.field,legendOptions:Le(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};h([p({type:D3,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],sn.prototype,"authoringInfo",void 0),h([p({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],sn.prototype,"blurRadius",null),h([p({type:[kx],json:{write:!0}})],sn.prototype,"colorStops",void 0),h([p({type:String,json:{write:!0}})],sn.prototype,"field",void 0),h([p({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:i==null})},origins:{"web-scene":{write:!1}}}})],sn.prototype,"fieldOffset",void 0),h([p({type:cv,json:{write:!0}})],sn.prototype,"legendOptions",void 0),h([p({type:Number,json:{write:!0}})],sn.prototype,"maxDensity",void 0),h([p({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],sn.prototype,"maxPixelIntensity",null),h([p({type:Number,json:{write:!0}})],sn.prototype,"minDensity",void 0),h([p({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],sn.prototype,"minPixelIntensity",null),h([p({type:Number,cast:ki,json:{write:!0}})],sn.prototype,"radius",void 0),h([p({type:Number,range:{min:0},json:{default:0,write:!0}})],sn.prototype,"referenceScale",void 0),h([Dt({heatmap:"heatmap"})],sn.prototype,"type",void 0),h([p({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],sn.prototype,"valueExpression",void 0),h([p({type:String})],sn.prototype,"valueExpressionTitle",void 0),h([p({readOnly:!0})],sn.prototype,"_pixelIntensityToDensity",null),sn=VP=h([ce(Fte)],sn);const Dte=sn;let Ag=class extends Er(Je){constructor(){super(...arguments),this.color=new It([0,0,0,0]),this.label=null,this.threshold=0}};h([p({type:It,json:{write:!0}})],Ag.prototype,"color",void 0),h([p({type:String,json:{write:!0}})],Ag.prototype,"label",void 0),h([p({type:Number,range:{min:0,max:1},json:{write:!0}})],Ag.prototype,"threshold",void 0),Ag=h([ce("esri.renderers.support.OthersCategory")],Ag);let hM=class extends Er(Je){constructor(){super(...arguments),this.title=null}};h([p({type:String,json:{write:!0}})],hM.prototype,"title",void 0),hM=h([ce("esri.renderers.support.PieChartLegendOptions")],hM);let rl=class extends Jm(Er(Ip)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new It([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new Ag,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){return new Eu({size:this.size?this.size/2+(this.outline?.width||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(ee)}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,i)=>e+i.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,i)=>e+JSON.stringify(i),"")}async collectRequiredFields(e,i){await this.collectVVRequiredFields(e,i);for(const r of this.attributes)r.valueExpression&&await Xo(e,i,r.valueExpression),r.field&&e.add(r.field)}};h([p({type:[$te],json:{write:!0}})],rl.prototype,"attributes",void 0),h([p({type:Tp,json:{default:null,write:!0}})],rl.prototype,"backgroundFillSymbol",void 0),h([p({type:It,json:{write:!0}})],rl.prototype,"defaultColor",void 0),h([p({type:String,json:{write:!0}})],rl.prototype,"defaultLabel",void 0),h([p({type:Number,range:{min:0,max:1},json:{write:!0}})],rl.prototype,"holePercentage",void 0),h([p({type:Ag,json:{write:!0}})],rl.prototype,"othersCategory",void 0),h([p({type:hM,json:{write:!0}})],rl.prototype,"legendOptions",void 0),h([p({type:za,json:{default:null,write:!0}})],rl.prototype,"outline",void 0),h([p({type:Number,cast:ki,json:{write:!0}})],rl.prototype,"size",void 0),h([Dt({pieChart:"pie-chart"})],rl.prototype,"type",void 0),rl=h([ce("esri.renderers.PieChartRenderer")],rl);const G2e=rl;var BP;let Xy=BP=class extends Jm(Ip){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(t,e){await Promise.all([this.collectSymbolFields(t,e),this.collectVVRequiredFields(t,e)])}async collectSymbolFields(t,e){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(t,e)))}getSymbol(t,e){return this.symbol}async getSymbolAsync(t,e){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((t,e)=>t+JSON.stringify(e),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new BP({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:Le(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};h([p({type:String,json:{write:!0}})],Xy.prototype,"description",void 0),h([p({type:String,json:{write:!0}})],Xy.prototype,"label",void 0),h([p(Gw)],Xy.prototype,"symbol",void 0),h([Dt({simple:"simple"})],Xy.prototype,"type",void 0),Xy=BP=h([ce("esri.renderers.SimpleRenderer")],Xy);const D0=Xy;function st(t,e,i={}){return iD(t,e,i,jte)}function Nl(t,e,i={}){return iD(t,e,i,Ute)}function iD(t,e,i={},r){let s=null;const n=i.once?(o,a)=>{r(o)&&(gs(s),e(o,a))}:(o,a)=>{r(o)&&e(o,a)};if(s=Pye(t,n,i.sync,i.equals),i.initial){const o=t();n(o,o)}return s}function bn(t,e,i,r={}){let s=null,n=null,o=null;function a(){s&&n&&(n.remove(),r.onListenerRemove?.(s),s=null,n=null)}function l(c){r.once&&r.once&&gs(o),i(c)}const u=st(t,(c,d)=>{a(),L4(c)&&(s=c,n=P4(c,e,l),r.onListenerAdd?.(c))},{sync:r.sync,initial:!0});return o=Lw(()=>{u.remove(),a()}),o}function uC(t,e){return q2e(t,Ute,e)}function q2e(t,e,i){if(Rl(i))return Promise.reject(yr());const r=t();if(e?.(r))return Promise.resolve(r);let s=null;function n(){s=gs(s)}return new Promise((o,a)=>{s=O4([$a(i,()=>{n(),a(yr())}),iD(t,l=>{n(),o(l)},{sync:!1,once:!0},e??jte)])})}function jte(t){return!0}function Ute(t){return!!t}const Cl={sync:!0},Fi={initial:!0},jf={sync:!0,initial:!0},H2e=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function zP(t){return t instanceof Pt}function kB(t){return t instanceof Nt?Object.keys(t.items):zP(t)?Ws(t).keys():t?Object.keys(t):[]}function rT(t,e){return t instanceof Nt?t.items[e]:t[e]}function W2e(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function Lx(t){return t?t.declaredClass:null}function Vte(t,e){const i=t.diff;if(i&&typeof i=="function")return i(t,e);const r=kB(t),s=kB(e);if(r.length===0&&s.length===0)return;if(!r.length||!s.length||W2e(t,e))return{type:"complete",oldValue:t,newValue:e};const n=s.filter(d=>!r.includes(d)),o=r.filter(d=>!s.includes(d)),a=r.filter(d=>s.includes(d)&&rT(t,d)!==rT(e,d)).concat(n,o).sort(),l=Lx(t);if(l&&H2e.includes(l)&&a.length)return{type:"complete",oldValue:t,newValue:e};let u;const c=zP(t)&&zP(e);for(const d of a){const f=rT(t,d),m=rT(e,d);let g;if((c||typeof f!="function"&&typeof m!="function")&&f!==m&&(f!=null||m!=null)){if(i&&i[d]&&typeof i[d]=="function")g=i[d](f,m);else if(f instanceof Date&&m instanceof Date){if(f.getTime()===m.getTime())continue;g={type:"complete",oldValue:f,newValue:m}}else g=typeof f=="object"&&typeof m=="object"&&Lx(f)===Lx(m)?Vte(f,m):{type:"complete",oldValue:f,newValue:m};ee(g)&&(ee(u)?u.diff[d]=g:u={type:"partial",diff:{[d]:g}})}}return u}function J2e(t,e){if(Re(t))return!1;const i=e.split(".");let r=t;for(const s of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const n=r.diff[s];if(!n)return!1;r=n}}return!0}function Xut(t,e){for(const i of e)if(J2e(t,i))return!0;return!1}function Z2e(t,e){if(!(typeof t=="function"||typeof e=="function"||Re(t)&&Re(e)))return Re(t)||Re(e)||typeof t=="object"&&typeof e=="object"&&Lx(t)!==Lx(e)?{type:"complete",oldValue:t,newValue:e}:Vte(t,e)}let hv=class extends Er(Je){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};h([p(aM)],hv.prototype,"value",void 0),h([p(aM)],hv.prototype,"value2",void 0),h([p(aM)],hv.prototype,"value3",void 0),hv=h([ce("esri.renderers.support.UniqueValue")],hv);const wb=hv;let bf=class extends Er(Je){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const i=typeof(e=Array.isArray(e)?e:[e])[0];return i==="string"||i==="number"?e.map(r=>new wb({value:r})):i==="object"?e[0]instanceof wb?e:e.map(r=>new wb(r)):null}};h([p({type:String,json:{write:!0}})],bf.prototype,"description",void 0),h([p({type:String,json:{write:!0}})],bf.prototype,"label",void 0),h([p(Gw)],bf.prototype,"symbol",void 0),h([p({type:[wb],json:{type:[[String]],read:{reader:t=>t?t.map(e=>new wb({value:e[0],value2:e[1],value3:e[2]})):null},write:{writer:(t,e)=>{const i=[];for(const r of t){const s=[r.value,r.value2,r.value3].filter(ee).map(n=>n.toString());i.push(s)}e.values=i}}}})],bf.prototype,"values",void 0),h([mi("values")],bf.prototype,"castValues",null),bf=h([ce("esri.renderers.support.UniqueValueClass")],bf);const Bte=bf;let D2=class extends Er(Je){constructor(e){super(e),this.heading=null,this.classes=null}};h([p({type:String,json:{write:!0}})],D2.prototype,"heading",void 0),h([p({type:[Bte],json:{write:!0}})],D2.prototype,"classes",void 0),D2=h([ce("esri.renderers.support.UniqueValueGroup")],D2);const GP=D2;var qP;let eg=qP=class extends Je{constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new qP({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const t=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${t}`}};h([p({type:String,json:{write:!0}})],eg.prototype,"description",void 0),h([p({type:String,json:{write:!0}})],eg.prototype,"label",void 0),h([p(Gw)],eg.prototype,"symbol",void 0),h([p(aM)],eg.prototype,"value",void 0),eg=qP=h([ce("esri.renderers.support.UniqueValueInfo")],eg);const p0=eg,Y2e=()=>!!Ze("enable-feature:force-wosr"),rct=()=>!!Ze("enable-feature:SceneLayer-editing");let gO={};async function K2e(t,e){try{return{data:(await txe(t,e)).data,baseUrl:l0e(t),styleUrl:t}}catch(i){return _a(i),null}}function Q2e(t,e,i){const r=ee(e.portal)?e.portal:Mo.getDefault();let s;const n=`${r.url} - ${r.user&&r.user.username} - ${t}`;return gO[n]||(gO[n]=X2e(t,r,i).then(o=>(s=o,o.fetchData())).then(o=>({data:o,baseUrl:s.itemUrl??"",styleName:t}))),gO[n]}function X2e(t,e,i){return e.load(i).then(()=>{const r=new Zd({disableExtraQuery:!0,query:`owner:${LB} AND type:${PB} AND typekeywords:"${t}"`});return e.queryItems(r,i)}).then(({results:r})=>{let s=null;const n=t.toLowerCase();if(r&&Array.isArray(r)){for(const o of r)if(o.typeKeywords?.some(l=>l.toLowerCase()===n)&&o.type===PB&&o.owner===LB){s=o;break}}if(!s)throw new Ce("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return s.load(i)})}function exe(t,e,i){return t&&ee(t.styleUrl)?K2e(t.styleUrl,i):t&&ee(t.styleName)?Q2e(t.styleName,e,i):Promise.reject(new Ce("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function sct(t){return t===null||t.type==="CIMSymbolReference"?t:{type:"CIMSymbolReference",symbol:t}}function nct(t,e){if(e==="cimRef")return t.cimRef;if(t.formatInfos&&!Y2e()){for(const i of t.formatInfos)if(i.type==="gltf")return i.href}return t.webRef}function txe(t,e){const i={responseType:"json",query:{f:"json"},...e};return Et(El(t),i)}const LB="esri_en",PB="Style",oct="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var j2;const zte="esri.renderers.UniqueValueRenderer",Bp=tt.getLogger(zte),NB="uvInfos-watcher",FB="uvGroups-watcher",ixe=",",rxe=ns(p0);function sxe(t){const{field1:e,field2:i,field3:r,fieldDelimiter:s,uniqueValueInfos:n,valueExpression:o}=t,a=!(!e||!i);return[{classes:(n??[]).map(l=>{const{symbol:u,label:c,value:d,description:f}=l,[m,g,v]=a?d?.toString()?.split(s||"")||[]:[d],b=[];return(e||o)&&b.push(m),i&&b.push(g),r&&b.push(v),{symbol:u,label:c,values:[b],description:f}})}]}let Fr=j2=class extends Jm(Ip){constructor(t){super(t),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,i){if(!e&&!i)return;if(!e||!i)return{type:"complete",oldValue:e,newValue:i};let r=!1;const s={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let n=0;n<i.length;n++){const o=e.find(a=>a.value===i[n].value);o?Z2e(o,i[n])?(s.changed.push({type:"complete",oldValue:o,newValue:i[n]}),r=!0):s.unchanged.push({oldValue:o,newValue:i[n]}):(s.added.push(i[n]),r=!0)}for(let n=0;n<e.length;n++)i.find(o=>o.value===e[n].value)||(s.removed.push(e[n]),r=!0);return r?s:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(t){this._set("field",t),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(t){return t==null||typeof t=="function"?t:M3(t)}writeField(t,e,i,r){typeof t=="string"?e[i]=t:r&&r.messages?r.messages.push(new Ce("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Bp.error(".field: cannot write field to JSON since it's not a string value")}set field2(t){this._set("field2",t),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(t){this._set("field3",t),this._updateUniqueValues()}set valueExpression(t){this._set("valueExpression",t),this._updateUniqueValues()}set defaultSymbol(t){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",t)}set fieldDelimiter(t){this._set("fieldDelimiter",t),this._updateUniqueValues()}readPortal(t,e,i){return i.portal||Mo.getDefault()}readStyleOrigin(t,e,i){if(e.styleName)return Object.freeze({styleName:e.styleName});if(e.styleUrl){const r=Uw(e.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(t,e,i,r){t.styleName?e.styleName=t.styleName:t.styleUrl&&(e.styleUrl=P3(t.styleUrl,r))}set uniqueValueGroups(t){this.styleOrigin?Bp.error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",t),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(t){this.styleOrigin?Bp.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(t,e){if(this.styleOrigin)return void Bp.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof t=="object"?rxe(t):new p0({value:t,symbol:pte(e)}),this.uniqueValueInfos?.push(i),this._valueInfoMap[i.value]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(t){if(this.styleOrigin)return void Bp.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const e=this.uniqueValueInfos;if(e){for(let i=0;i<e.length;i++)if(e[i].value===t+""){delete this._valueInfoMap[t],e.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(t,e){let i=e;return this.valueExpression&&(Re(e)||Re(e.arcade))&&(i={...i,arcade:await cp()}),this._getUniqueValueInfo(t,i)}getSymbol(t,e){if(this.valueExpression&&(Re(e)||Re(e.arcade)))return void Bp.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(t,e);return i&&i.symbol||this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(Re(i)||Re(i.arcade))){const s=await cp(),{arcadeUtils:n}=s;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),i={...i,arcade:s}}const r=this._getUniqueValueInfo(t,i);return r&&r.symbol||this.defaultSymbol}getSymbols(){const t=[];for(const e of this.uniqueValueInfos??[])e.symbol&&t.push(e.symbol);return this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=this.uniqueValueInfos?.reduce((r,s)=>r+s.getMeshHash(),"");return`${t}.${e}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const t=new j2({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:Le(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:Le(this.visualVariables),legendOptions:Le(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:Le(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(t._isDefaultSymbolDerived=!0),t._set("portal",this.portal);const e=Le(this.uniqueValueInfos),i=Le(this.uniqueValueGroups);return this.styleOrigin&&(t._set("styleOrigin",Object.freeze(Le(this.styleOrigin))),Object.freeze(e),Object.freeze(i)),t._set("uniqueValueInfos",e),t._updateValueInfoMap(),t._set("uniqueValueGroups",i),t._isInfosSource=this._isInfosSource,t._watchUniqueValueInfosAndGroups(),t}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(t,e)),Xo(t,e,this.valueExpression)];Ml(t,e,this.field),Ml(t,e,this.field2),Ml(t,e,this.field3),await Promise.all(i)}populateFromStyle(){return exe(this.styleOrigin,{portal:this.portal}).then(t=>{const e=[];return this._valueInfoMap={},t&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach(i=>{const r=new r1({styleUrl:t.styleUrl,styleName:t.styleName,portal:this.portal,name:i.name});this.defaultSymbol||i.name!==t.data.defaultItem||(this.defaultSymbol=r,this._isDefaultSymbolDerived=!0);const s=new p0({value:i.name,symbol:r});e.push(s),this._valueInfoMap[i.name]=s}),this._set("uniqueValueInfos",Object.freeze(e)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&this.uniqueValueInfos?.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",ixe)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:t}=this;if(t)for(const e of t)this._valueInfoMap[e.value+""]=e}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(NB);const{uniqueValueInfos:t}=this;if(t){const e=[];for(const i of t)e.push(st(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(r,s)=>{r!==s&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(e,NB)}}_watchUniqueValueGroups(){this.removeHandles(FB);const{uniqueValueGroups:t}=this;if(t){const e=[];for(const i of t){e.push(st(()=>({classes:i.classes}),(r,s)=>{r!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const r of i.classes??[])e.push(st(()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description}),(s,n)=>{s!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(e,FB)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const t=[],{field:e,field2:i,field3:r,fieldDelimiter:s,uniqueValueGroups:n,valueExpression:o}=this;if(!e&&!o)return this._set("uniqueValueInfos",t),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const a=!(!e||!i);for(const l of n)for(const u of l.classes??[]){const{symbol:c,label:d,values:f,description:m}=u;for(const g of f??[]){const{value:v,value2:b,value3:_}=g,S=[v];i&&S.push(b),r&&S.push(_);const M=a?S.join(s||""):S[0];t.push(new p0({symbol:c,label:d,value:M,description:m}))}}this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(t=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:e,field2:i,valueExpression:r,fieldDelimiter:s,uniqueValueInfos:n}=this;if(!e&&!r||!n.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!e||!i),a=n.map(u=>{const{symbol:c,label:d,value:f,description:m}=u,[g,v,b]=o?f?.toString()?.split(s||"")||[]:[f];return new Bte({symbol:c,label:d,description:m,values:[new wb({value:g,value2:v,value3:b})]})}),l=[new GP({classes:a})];t&&Object.freeze(l),this._set("uniqueValueGroups",l),this._watchUniqueValueGroups()}_getUniqueValueInfo(t,e){return this.valueExpression?this._getUnqiueValueInfoForExpression(t,e):this._getUnqiueValueInfoForFields(t)}_getUnqiueValueInfoForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:s,arcade:n}=VF(e,{});let o=this._cache.compiledFunc;const a=n.arcadeUtils;if(!o){const u=a.createSyntaxTree(this.valueExpression);o=a.createFunction(u),this._cache.compiledFunc=o}const l=a.executeFunction(o,a.createExecContext(t,a.getViewInfo({viewingMode:i,scale:r,spatialReference:s})));return this._valueInfoMap[l+""]}_getUnqiueValueInfoForFields(t){const e=this.field,i=t.attributes;let r;if(typeof e!="function"&&this.field2){const s=this.field2,n=this.field3,o=[];e&&o.push(i[e]),s&&o.push(i[s]),n&&o.push(i[n]),r=o.join(this.fieldDelimiter||"")}else typeof e=="function"?r=e(t):e&&(r=i[e]);return this._valueInfoMap[r+""]}static fromPortalStyle(t,e){const i=new j2(e&&e.properties);i._set("styleOrigin",Object.freeze({styleName:t})),i._set("portal",e&&e.portal||Mo.getDefault());const r=i.populateFromStyle();return r.catch(s=>{Bp.error(`#fromPortalStyle('${t}'[, ...])`,"Failed to create unique value renderer from style name",s)}),r}static fromStyleUrl(t,e){const i=new j2(e&&e.properties);i._set("styleOrigin",Object.freeze({styleUrl:t}));const r=i.populateFromStyle();return r.catch(s=>{Bp.error(`#fromStyleUrl('${t}'[, ...])`,"Failed to create unique value renderer from style URL",s)}),r}};h([p({readOnly:!0})],Fr.prototype,"_cache",null),h([Dt({uniqueValue:"unique-value"})],Fr.prototype,"type",void 0),h([p(Tte)],Fr.prototype,"backgroundFillSymbol",void 0),h([p({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Fr.prototype,"field",null),h([mi("field")],Fr.prototype,"castField",null),h([it("field")],Fr.prototype,"writeField",null),h([p({type:String,value:null,json:{write:!0}})],Fr.prototype,"field2",null),h([p({type:String,value:null,json:{write:!0}})],Fr.prototype,"field3",null),h([p({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],Fr.prototype,"orderByClassesEnabled",void 0),h([p({type:String,value:null,json:{write:!0}})],Fr.prototype,"valueExpression",null),h([p({type:String,json:{write:!0}})],Fr.prototype,"valueExpressionTitle",void 0),h([p({type:d0,json:{write:!0}})],Fr.prototype,"legendOptions",void 0),h([p({type:String,json:{write:!0}})],Fr.prototype,"defaultLabel",void 0),h([p(RK({...Gw},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Fr.prototype,"defaultSymbol",null),h([p({type:String,value:null,json:{write:!0}})],Fr.prototype,"fieldDelimiter",null),h([p({type:Mo,readOnly:!0})],Fr.prototype,"portal",void 0),h([Ye("portal",["styleName"])],Fr.prototype,"readPortal",null),h([p({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Fr.prototype,"styleOrigin",void 0),h([Ye("styleOrigin",["styleName","styleUrl"])],Fr.prototype,"readStyleOrigin",null),h([it("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Fr.prototype,"writeStyleOrigin",null),h([p({type:[GP],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(t,e,i)=>(e.uniqueValueGroups||sxe(e)).map(r=>GP.fromJSON(r,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Fr.prototype,"uniqueValueGroups",null),h([p({type:[p0],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Fr.prototype,"uniqueValueInfos",null),Fr=j2=h([ce(zte)],Fr);const Zm=Fr,U3={key:"type",base:Ip,typeMap:{heatmap:Dte,simple:D0,"unique-value":Zm,"class-breaks":qw,"dot-density":M2e,dictionary:T2e,"pie-chart":G2e},errorContext:"renderer"},Gte={key:"type",base:Ip,typeMap:{simple:D0,"unique-value":Zm,"class-breaks":qw,heatmap:Dte},errorContext:"renderer"};function Qb(t,e){return RS(t,null,e)}const nxe=zm({types:U3});function RS(t,e,i){return t?t&&(t.styleName||t.styleUrl)&&t.type!=="uniqueValue"?(i&&i.messages&&i.messages.push(new kl("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+t.type+"'",{definition:t,context:i})),null):nxe(t,e,i):null}let oxe=class qte{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(Ak),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const i=new qte,r=this._originStores[St.DEFAULTS];r&&r.forEach((s,n)=>{i.set(n,Le(s),St.DEFAULTS)});for(let s=St.SERVICE;s<Ak;s++){const n=this._originStores[s];n&&n.forEach((o,a)=>{e&&e.has(a)||i.set(a,Le(o),s)})}return i}get(e,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(e):void 0}keys(e){const i=e==null?this._values:this._originStores[e];return i?[...i.keys()]:[]}set(e,i,r=St.USER){let s=this._originStores[r];if(s||(s=new Map,this._originStores[r]=s),s.set(e,i),!this._values.has(e)||this._propertyOriginMap.get(e)<=r){const n=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,r),n!==i}return!1}delete(e,i=St.USER){const r=this._originStores[i];if(!r)return;const s=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===i){this._values.delete(e);for(let n=i-1;n>=0;n--){const o=this._originStores[n];if(o&&o.has(e)){this._values.set(e,o.get(e)),this._propertyOriginMap.set(e,n);break}}}return s}has(e,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(e)}revert(e,i){for(;i>0&&!this.has(e,i);)--i;const r=this._originStores[i],s=r&&r.get(e),n=this._values.get(e);return this._values.set(e,s),this._propertyOriginMap.set(e,i),n!==s}originOf(e){return this._propertyOriginMap.get(e)||St.DEFAULTS}forEach(e){this._values.forEach(e)}};const Hte=t=>{let e=class extends t{constructor(...i){super(...i);const r=Ws(this),s=r.store,n=new oxe;r.store=n,TQ(r,s,n)}read(i,r){MQ(this,i,r)}getAtOrigin(i,r){const s=vO(this),n=Ea(r);if(typeof i=="string")return s.get(i,n);const o={};return i.forEach(a=>{o[a]=s.get(a,n)}),o}originOf(i){return gS(this.originIdOf(i))}originIdOf(i){return vO(this).originOf(i)}revert(i,r){const s=vO(this),n=Ea(r),o=Ws(this);let a;a=typeof i=="string"?i==="*"?s.keys(n):[i]:i,a.forEach(l=>{o.invalidate(l),s.revert(l,n),o.commit(l)})}};return e=h([ce("esri.core.ReadOnlyMultiOriginJSONSupport")],e),e};function vO(t){return Ws(t).store}let DB=class extends Hte(Pt){};DB=h([ce("esri.core.ReadOnlyMultiOriginJSONSupport")],DB);const axe=t=>{let e=class extends t{constructor(...i){super(...i)}clear(i,r="user"){return bO(this).delete(i,Ea(r))}write(i={},r){return $Q(this,i=i||{},r),i}setAtOrigin(i,r,s){Ws(this).setAtOrigin(i,r,Ea(s))}removeOrigin(i){const r=bO(this),s=Ea(i),n=r.keys(s);for(const o of n)r.originOf(o)===s&&r.set(o,r.get(o,s),St.USER)}updateOrigin(i,r){const s=bO(this),n=Ea(r),o=this.get(i);for(let a=n+1;a<Ak;++a)s.delete(i,a);s.set(i,o,n)}toJSON(i){return this.write({},i)}};return e=h([ce("esri.core.WriteableMultiOriginJSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function bO(t){return Ws(t).store}const Ym=t=>{let e=class extends axe(Hte(t)){constructor(...i){super(...i)}};return e=h([ce("esri.core.MultiOriginJSONSupport")],e),e};let HP=class extends Ym(Pt){};HP=h([ce("esri.core.MultiOriginJSONSupport")],HP);async function lxe(t,e){const{WhereClause:i}=await De(()=>import("./WhereClause-aa8eb708.js").then(r=>r.W),["./WhereClause-aa8eb708.js","./executionError-c1d13a98.js"],import.meta.url);return i.create(t,e)}function rD(t,e){return ee(t)?ee(e)?`(${t}) AND (${e})`:t:e}var WP;let tg=WP=class extends Je{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new WP({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};h([p({type:String,json:{write:!0}})],tg.prototype,"expression",void 0),h([p({type:String,json:{write:!0}})],tg.prototype,"name",void 0),h([p({type:["boolean","date","number","string"],json:{write:!0}})],tg.prototype,"returnType",void 0),h([p({type:String,json:{write:!0}})],tg.prototype,"title",void 0),tg=WP=h([ce("esri.form.ExpressionInfo")],tg);const uxe=tg;let ig=class extends Je{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};h([p({type:String,json:{write:!0}})],ig.prototype,"description",void 0),h([p({type:String,json:{write:!0}})],ig.prototype,"label",void 0),h([p()],ig.prototype,"type",void 0),h([p({type:String,json:{write:!0}})],ig.prototype,"visibilityExpression",void 0),ig=h([ce("esri.form.elements.Element")],ig);const Xb=ig;var JP;let dM=JP=class extends Je{constructor(t){super(t),this.type=null}clone(){return new JP({type:this.type})}};h([p({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],dM.prototype,"type",void 0),dM=JP=h([ce("esri.form.elements.inputs.AttachmentInput")],dM);const cxe=dM;var ZP;let rg=ZP=class extends Xb{constructor(t){super(t),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new ZP({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};h([p({type:String,json:{write:!0}})],rg.prototype,"attachmentKeyword",void 0),h([p({type:Boolean,json:{write:!0}})],rg.prototype,"editable",void 0),h([p({type:cxe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],rg.prototype,"input",void 0),h([p({type:["attachment"],json:{read:!1,write:!0}})],rg.prototype,"type",void 0),rg=ZP=h([ce("esri.form.elements.AttachmentElement")],rg);const jB=rg;let pM=class extends Je{constructor(e){super(e),this.type=null}};h([p()],pM.prototype,"type",void 0),pM=h([ce("esri.form.elements.inputs.Input")],pM);const Ww=pM;let U2=class extends Ww{constructor(e){super(e),this.maxLength=null,this.minLength=0}};h([p({type:Number,json:{write:!0}})],U2.prototype,"maxLength",void 0),h([p({type:Number,json:{write:!0}})],U2.prototype,"minLength",void 0),U2=h([ce("esri.form.elements.inputs.TextInput")],U2);const sD=U2;var YP;let fM=YP=class extends sD{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new YP({maxLength:this.maxLength,minLength:this.minLength})}};h([p({type:["barcode-scanner"],json:{read:!1,write:!0}})],fM.prototype,"type",void 0),fM=YP=h([ce("esri.form.elements.inputs.BarcodeScannerInput")],fM);const hxe=fM;var KP;let dv=KP=class extends Ww{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new KP({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};h([p({type:String,json:{write:!0}})],dv.prototype,"noValueOptionLabel",void 0),h([p({type:Boolean,json:{write:!0}})],dv.prototype,"showNoValueOption",void 0),h([p({type:["combo-box"],json:{read:!1,write:!0}})],dv.prototype,"type",void 0),dv=KP=h([ce("esri.form.elements.inputs.ComboBoxInput")],dv);const dxe=dv;var QP;function UB(t){return t!=null?new Date(t):null}function VB(t){return t?t.getTime():null}let Ju=QP=class extends Ww{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,e){return UB(e.max)}writeMax(t,e){e.max=VB(t)}readMin(t,e){return UB(e.min)}writeMin(t,e){e.min=VB(t)}clone(){return new QP({includeTime:this.includeTime,max:this.max,min:this.min})}};h([p({type:Boolean,json:{write:!0}})],Ju.prototype,"includeTime",void 0),h([p({type:Date,json:{type:Number,write:!0}})],Ju.prototype,"max",void 0),h([Ye("max")],Ju.prototype,"readMax",null),h([it("max")],Ju.prototype,"writeMax",null),h([p({type:Date,json:{type:Number,write:!0}})],Ju.prototype,"min",void 0),h([Ye("min")],Ju.prototype,"readMin",null),h([it("min")],Ju.prototype,"writeMin",null),h([p({type:["datetime-picker"],json:{read:!1,write:!0}})],Ju.prototype,"type",void 0),Ju=QP=h([ce("esri.form.elements.inputs.DateTimePickerInput")],Ju);const pxe=Ju;var XP;let pv=XP=class extends Ww{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new XP({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};h([p({type:String,json:{write:!0}})],pv.prototype,"noValueOptionLabel",void 0),h([p({type:Boolean,json:{write:!0}})],pv.prototype,"showNoValueOption",void 0),h([p({type:["radio-buttons"],json:{read:!1,write:!0}})],pv.prototype,"type",void 0),pv=XP=h([ce("esri.form.elements.inputs.RadioButtonsInput")],pv);const fxe=pv;var e8;let fv=e8=class extends Ww{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new e8({offValue:this.offValue,onValue:this.onValue})}};h([p({type:[String,Number],json:{write:!0}})],fv.prototype,"offValue",void 0),h([p({type:[String,Number],json:{write:!0}})],fv.prototype,"onValue",void 0),h([p({type:["switch"],json:{read:!1,write:!0}})],fv.prototype,"type",void 0),fv=e8=h([ce("esri.form.elements.inputs.SwitchInput")],fv);const mxe=fv;var t8;let mM=t8=class extends sD{constructor(t){super(t),this.type="text-area"}clone(){return new t8({maxLength:this.maxLength,minLength:this.minLength})}};h([p({type:["text-area"],json:{read:!1,write:!0}})],mM.prototype,"type",void 0),mM=t8=h([ce("esri.form.elements.inputs.TextAreaInput")],mM);const yxe=mM;var i8;let yM=i8=class extends sD{constructor(t){super(t),this.type="text-box"}clone(){return new i8({maxLength:this.maxLength,minLength:this.minLength})}};h([p({type:["text-box"],json:{read:!1,write:!0}})],yM.prototype,"type",void 0),yM=i8=h([ce("esri.form.elements.inputs.TextBoxInput")],yM);const gxe=yM,vxe={base:Ww,key:"type",typeMap:{"barcode-scanner":hxe,"combo-box":dxe,"datetime-picker":pxe,"radio-buttons":fxe,switch:mxe,"text-area":yxe,"text-box":gxe}};var r8;let V2=r8=class extends Je{constructor(t){super(t),this.name=null,this.code=null}clone(){return new r8({name:this.name,code:this.code})}};h([p({type:String,json:{write:!0}})],V2.prototype,"name",void 0),h([p({type:[String,Number],json:{write:!0}})],V2.prototype,"code",void 0),V2=r8=h([ce("esri.layers.support.CodedValue")],V2);const bxe=new si({inherited:"inherited",codedValue:"coded-value",range:"range"});let B2=class extends Je{constructor(e){super(e),this.name=null,this.type=null}};h([p({type:String,json:{write:!0}})],B2.prototype,"name",void 0),h([Dt(bxe)],B2.prototype,"type",void 0),B2=h([ce("esri.layers.support.Domain")],B2);const cC=B2;var s8;let z2=s8=class extends cC{constructor(t){super(t),this.codedValues=null,this.type="coded-value"}getName(t){let e=null;if(this.codedValues){const i=String(t);this.codedValues.some(r=>(String(r.code)===i&&(e=r.name),!!e))}return e}clone(){return new s8({codedValues:Le(this.codedValues),name:this.name})}};h([p({type:[V2],json:{write:!0}})],z2.prototype,"codedValues",void 0),h([Dt({codedValue:"coded-value"})],z2.prototype,"type",void 0),z2=s8=h([ce("esri.layers.support.CodedValueDomain")],z2);const Wte=z2;var n8;let gM=n8=class extends cC{constructor(t){super(t),this.type="inherited"}clone(){return new n8}};h([Dt({inherited:"inherited"})],gM.prototype,"type",void 0),gM=n8=h([ce("esri.layers.support.InheritedDomain")],gM);const Jte=gM;var o8;let mv=o8=class extends cC{constructor(t){super(t),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new o8({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};h([p({type:Number,json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range&&e.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,i){e[i]=[this.minValue||0,t]}}}})],mv.prototype,"maxValue",void 0),h([p({type:Number,json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range&&e.range[0]},write:{target:"range",writer(t,e,i){e[i]=[t,this.maxValue||0]}}}})],mv.prototype,"minValue",void 0),h([Dt({range:"range"})],mv.prototype,"type",void 0),mv=o8=h([ce("esri.layers.support.RangeDomain")],mv);const Zte=mv,Yte={key:"type",base:cC,typeMap:{range:Zte,"coded-value":Wte,inherited:Jte}};function nD(t){if(!t||!t.type)return null;switch(t.type){case"range":return Zte.fromJSON(t);case"codedValue":return Wte.fromJSON(t);case"inherited":return Jte.fromJSON(t)}return null}var a8;const Kte="esri.form.elements.FieldElement",BB=tt.getLogger(Kte);let eu=a8=class extends Xb{constructor(t){super(t),this.domain=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}get editable(){return $k(BB,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),this._get("editable")??!0}set editable(t){$k(BB,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),this._set("editable",t)}clone(){return new a8({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};h([p({types:Yte,json:{read:{reader:nD},write:!0}})],eu.prototype,"domain",void 0),h([p({type:Boolean,json:{write:!0}})],eu.prototype,"editable",null),h([p({type:String,json:{write:!0}})],eu.prototype,"editableExpression",void 0),h([p({type:String,json:{write:!0}})],eu.prototype,"fieldName",void 0),h([p({type:String,json:{write:!0}})],eu.prototype,"hint",void 0),h([p({types:vxe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],eu.prototype,"input",void 0),h([p({type:String,json:{write:!0}})],eu.prototype,"requiredExpression",void 0),h([p({type:String,json:{read:!1,write:!0}})],eu.prototype,"type",void 0),h([p({type:String,json:{write:!0}})],eu.prototype,"valueExpression",void 0),eu=a8=h([ce(Kte)],eu);const zB=eu;var l8;let wd=l8=class extends Xb{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new l8({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:Le(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};h([p({type:Number,json:{write:!0}})],wd.prototype,"displayCount",void 0),h([p({type:["list"],json:{write:!0}})],wd.prototype,"displayType",void 0),h([p({type:Boolean,json:{write:!0}})],wd.prototype,"editable",void 0),h([p({type:[L9],json:{write:!0}})],wd.prototype,"orderByFields",void 0),h([p({type:Number,json:{write:!0}})],wd.prototype,"relationshipId",void 0),h([p({type:["relationship"],json:{read:!1,write:!0}})],wd.prototype,"type",void 0),wd=l8=h([ce("esri.form.elements.RelationshipElement")],wd);const GB=wd;function Qte(t){return{typesWithGroup:{base:Xb,key:"type",typeMap:{attachment:jB,field:zB,group:t,relationship:GB}},typesWithoutGroup:{base:Xb,key:"type",typeMap:{attachment:jB,field:zB,relationship:GB}}}}function Xte(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(s=>r[s.type]).map(s=>r[s.type].fromJSON(s))}function eie(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(s=>r[s.type]).map(s=>s.toJSON())}function tie(t,e,i=!0){return t?t.map(r=>Uh(i?e.typesWithGroup:e.typesWithoutGroup,r)):null}var u8;let hh=u8=class extends Xb{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return tie(t,wO,!1)}readElements(t,e){return Xte(e.formElements,wO,!1)}writeElements(t,e){e.formElements=eie(t,wO,!1)}clone(){return new u8({description:this.description,elements:Le(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};h([p({json:{write:!0}})],hh.prototype,"elements",void 0),h([mi("elements")],hh.prototype,"castElements",null),h([Ye("elements",["formElements"])],hh.prototype,"readElements",null),h([it("elements")],hh.prototype,"writeElements",null),h([p({type:["collapsed","expanded"],json:{write:!0}})],hh.prototype,"initialState",void 0),h([p({type:String,json:{read:!1,write:!0}})],hh.prototype,"type",void 0),hh=u8=h([ce("esri.form.elements.GroupElement")],hh);const wO=Qte(hh),wxe=hh;var c8;const _O=Qte(wxe);let Zu=c8=class extends Je{constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return tie(t,_O)}readElements(t,e){return Xte(e.formElements,_O)}writeElements(t,e){e.formElements=eie(t,_O)}clone(){return new c8({description:this.description,expressionInfos:Le(this.expressionInfos),elements:Le(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}};h([p({type:String,json:{write:!0}})],Zu.prototype,"description",void 0),h([p({json:{write:!0}})],Zu.prototype,"elements",void 0),h([mi("elements")],Zu.prototype,"castElements",null),h([Ye("elements",["formElements"])],Zu.prototype,"readElements",null),h([it("elements")],Zu.prototype,"writeElements",null),h([p({type:[uxe],json:{write:!0}})],Zu.prototype,"expressionInfos",void 0),h([p({type:Boolean,json:{default:!1,write:!0}})],Zu.prototype,"preserveFieldValuesWhenHidden",void 0),h([p({type:String,json:{write:!0}})],Zu.prototype,"title",void 0),Zu=c8=h([ce("esri.form.FormTemplate")],Zu);const _xe=Zu;async function xxe(t){const e="portalItem"in t?t:{portalItem:t},i=await De(()=>import("./portalLayers-33cf0e40.js"),["./portalLayers-33cf0e40.js","./lazyLayerLoader-0f3d1a0f.js","./preload-helper-388ac9d5.js","./layersLoader-456658d2.js","./fetchService-d05ae315.js","./jsonContext-48257512.js"],import.meta.url);try{return await i.fromItem(e)}catch(r){const s=e&&e.portalItem,n=s&&s.id||"unset",o=s&&s.portal&&s.portal.url||Li.portalUrl;throw tt.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+n+"')",r),r}}let Sxe=0,nn=class extends xp.EventedMixin(qm(Ll)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Xt(-180,-90,180,90,Tt.WGS84),this.id=Date.now().toString(16)+"-layer-"+Sxe++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Tt.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const i=typeof e=="string"?{url:e}:e;return(await De(()=>import("./arcgisLayers-87536586.js"),["./arcgisLayers-87536586.js","./preload-helper-388ac9d5.js","./fetchService-d05ae315.js","./lazyLayerLoader-0f3d1a0f.js"],import.meta.url)).fromUrl(i)}static fromPortalItem(e){return xxe(e)}initialize(){this.when().catch(e=>{vn(e)||tt.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){if(this.parent){const e=this,i=this.parent;"layers"in i&&i.layers.includes(e)?i.layers.remove(e):"tables"in i&&i.tables.includes(e)?i.tables.remove(e):"baseLayers"in i&&i.baseLayers.includes(e)?i.baseLayers.remove(e):"baseLayers"in i&&i.referenceLayers.includes(e)&&i.referenceLayers.remove(e)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return Fs(this.url)}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Et(e,{query:{f:"json"},responseType:"json"})).data;throw new Ce("layer:no-attribution-data","Layer does not have attribution data")}};h([p({type:String})],nn.prototype,"attributionDataUrl",void 0),h([p({type:Xt})],nn.prototype,"fullExtent",void 0),h([p({readOnly:!0})],nn.prototype,"hasAttributionData",null),h([p({type:String,clonable:!1})],nn.prototype,"id",void 0),h([p({type:Boolean,nonNullable:!0})],nn.prototype,"legendEnabled",void 0),h([p({type:["show","hide","hide-children"]})],nn.prototype,"listMode",void 0),h([p({type:Number,range:{min:0,max:1},nonNullable:!0})],nn.prototype,"opacity",void 0),h([p({clonable:!1})],nn.prototype,"parent",void 0),h([p({readOnly:!0})],nn.prototype,"parsedUrl",null),h([p({type:Boolean})],nn.prototype,"popupEnabled",void 0),h([p({type:Boolean})],nn.prototype,"attributionVisible",void 0),h([p({type:Tt})],nn.prototype,"spatialReference",void 0),h([p({type:String})],nn.prototype,"title",void 0),h([p({readOnly:!0,json:{read:!1}})],nn.prototype,"type",void 0),h([p()],nn.prototype,"url",void 0),h([p({type:Boolean,nonNullable:!0})],nn.prototype,"visible",void 0),nn=h([ce("esri.layers.Layer")],nn);const Bh=nn;let _b=class extends Pt{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._handles=new Ao,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll(),this._handles.destroy()}add(e,i,r={}){return this._installWatch(e,i,r,st)}addWhen(e,i,r={}){return this._installWatch(e,i,r,Nl)}addOnCollectionChange(e,i,{initial:r=!1,final:s=!1}={}){const n=++this._handleId;return this._handles.add([bn(e,"after-changes",this._createSyncUpdatingCallback(),Cl),bn(e,"change",i,{onListenerAdd:r?o=>i({added:o.toArray(),removed:[]}):void 0,onListenerRemove:s?o=>i({added:[],removed:o.toArray()}):void 0})],n),{remove:()=>this._handles.remove(n)}}addPromise(e){if(Re(e))return e;const i=++this._handleId;this._handles.add({remove:()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this._handles.has(sT)||this._set("updating",!1))}},i),this._pendingPromises.add(e),this._set("updating",!0);const r=()=>this._handles.remove(i);return e.then(r,r),e}removeAll(){this._pendingPromises.clear(),this._handles.removeAll(),this._set("updating",!1)}_installWatch(e,i,r={},s){const n=++this._handleId;r.sync||this._installSyncUpdatingWatch(e,n);const o=s(e,i,r);return this._handles.add(o,n),{remove:()=>this._handles.remove(n)}}_installSyncUpdatingWatch(e,i){const r=this._createSyncUpdatingCallback(),s=st(e,r,{sync:!0,equals:()=>!1});return this._handles.add(s,i),s}_createSyncUpdatingCallback(){return()=>{this._handles.remove(sT),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this._handles.add(Pw(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this._handles.remove(sT))}),sT)}}};h([p({readOnly:!0})],_b.prototype,"updating",void 0),_b=h([ce("esri.core.support.WatchUpdatingTracking")],_b);const sT=-42,ea=t=>{let e=class extends t{destroy(){this.destroyed||(this._get("handles")?.destroy(),this._get("updatingHandles")?.destroy())}get handles(){return this._get("handles")||new Ao}get updatingHandles(){return this._get("updatingHandles")||new _b}};return h([p({readOnly:!0})],e.prototype,"handles",null),h([p({readOnly:!0})],e.prototype,"updatingHandles",null),e=h([ce("esri.core.HandleOwner")],e),e};let qA=class extends ea(Pt){};qA=h([ce("esri.core.HandleOwner")],qA);let HA=class{constructor(e=i=>i.values().next().value){this._peeker=e,this._items=new Set}get length(){return this._items.size}clear(){this._items.clear()}last(){if(this._items.size===0)return;let e;for(e of this._items);return e}peek(){if(this._items.size!==0)return this._peeker(this._items)}push(e){this.contains(e)||this._items.add(e)}contains(e){return this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),e}remove(e){this._items.delete(e)}filter(e){return this._items.forEach(i=>{e(i)||this._items.delete(i)}),this}};var An;(function(t){t[t.HANDSHAKE=0]="HANDSHAKE",t[t.OPEN=1]="OPEN",t[t.OPENED=2]="OPENED",t[t.RESPONSE=3]="RESPONSE",t[t.INVOKE=4]="INVOKE",t[t.ABORT=5]="ABORT",t[t.CLOSE=6]="CLOSE",t[t.OPEN_PORT=7]="OPEN_PORT",t[t.ON=8]="ON"})(An||(An={}));let Exe=0;function iie(){return Exe++}function Txe(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function kS(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function oD(t,e,i,r){if(e.type===An.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==An.INVOKE&&e.type!==An.RESPONSE)return void t.postMessage(e);let s;if(Txe(i)?(s=qB(i.transferList),e.data=i.result):(s=qB(r),e.data=i),s){if(Ze("ff")){for(const n of s)if("byteLength"in n&&n.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(e.type){case An.INVOKE:throw o;case An.RESPONSE:return void oD(t,{type:An.RESPONSE,jobId:e.jobId,error:kS(o)})}}}t.postMessage(e,s)}else t.postMessage(e)}function LS(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function qB(t){if(!t||!t.length)return null;if(Ze("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(i=>!Ixe(i));return e.length?e:null}function Ixe(t){return t instanceof ArrayBuffer||t&&t.constructor&&t.constructor.name==="ArrayBuffer"}const Mxe={statsWorker:()=>De(()=>import("./statsWorker-777f0413.js"),["./statsWorker-777f0413.js","./quantizationUtils-a18aa97b.js","./utils-f5985451.js","./preload-helper-388ac9d5.js"],import.meta.url),geometryEngineWorker:()=>De(()=>import("./geometryEngineWorker-85fedce7.js"),["./geometryEngineWorker-85fedce7.js","./geometryEngineJSON-e42ff21a.js","./geometryEngineBase-807394fe.js","./json-48e3ea08.js"],import.meta.url),CSVSourceWorker:()=>De(()=>import("./CSVSourceWorker-71ae2fc1.js"),["./CSVSourceWorker-71ae2fc1.js","./json-48e3ea08.js","./FeatureStore-f17c63b9.js","./BoundsStore-83b83f12.js","./PooledRBush-7e0cbc69.js","./centroid-ede77936.js","./utils-7a6a6690.js","./preload-helper-388ac9d5.js","./projectionSupport-1fe92137.js","./QueryEngine-c10bcda2.js","./QueryEngineResult-0db87ff7.js","./quantizationUtils-a18aa97b.js","./WhereClause-aa8eb708.js","./executionError-c1d13a98.js","./utils-f5985451.js","./QueryEngineCapabilities-42e44ded.js","./timeSupport-4907a81c.js","./number-3b0ee09c.js","./clientSideDefaults-88a0f6ca.js"],import.meta.url),EdgeProcessingWorker:()=>De(()=>import("./EdgeProcessingWorker-d9c072ef.js"),["./EdgeProcessingWorker-d9c072ef.js","./BufferView-067dc1c7.js","./edgeProcessing-12bf7055.js","./deduplicate-58e5df9b.js","./Indices-56098ffd.js","./InterleavedLayout-01464a7a.js","./types-e1c0a5bf.js","./VertexAttribute-15d1866a.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./preload-helper-388ac9d5.js"],import.meta.url),ElevationSamplerWorker:()=>De(()=>import("./ElevationSamplerWorker-2f60292f.js"),["./ElevationSamplerWorker-2f60292f.js","./PooledRBush-7e0cbc69.js","./georeference-6ce02809.js","./mat3f64-221ce671.js","./mat4f64-1413b4a7.js","./spatialReferenceEllipsoidUtils-19e2f642.js","./quat-2013e5e2.js","./quatf64-3363c48e.js","./BufferView-067dc1c7.js","./vec33-76e2f0a2.js","./preload-helper-388ac9d5.js"],import.meta.url),FeatureServiceSnappingSourceWorker:()=>De(()=>import("./FeatureServiceSnappingSourceWorker-69c028a8.js"),["./FeatureServiceSnappingSourceWorker-69c028a8.js","./FeatureStore-f17c63b9.js","./BoundsStore-83b83f12.js","./PooledRBush-7e0cbc69.js","./centroid-ede77936.js","./utils-7a6a6690.js","./preload-helper-388ac9d5.js","./projectionSupport-1fe92137.js","./json-48e3ea08.js","./QueryEngine-c10bcda2.js","./QueryEngineResult-0db87ff7.js","./quantizationUtils-a18aa97b.js","./WhereClause-aa8eb708.js","./executionError-c1d13a98.js","./utils-f5985451.js","./QueryEngineCapabilities-42e44ded.js","./timeSupport-4907a81c.js"],import.meta.url),GeoJSONSourceWorker:()=>De(()=>import("./GeoJSONSourceWorker-b124be80.js"),["./GeoJSONSourceWorker-b124be80.js","./FeatureStore-f17c63b9.js","./BoundsStore-83b83f12.js","./PooledRBush-7e0cbc69.js","./centroid-ede77936.js","./utils-7a6a6690.js","./preload-helper-388ac9d5.js","./projectionSupport-1fe92137.js","./json-48e3ea08.js","./QueryEngine-c10bcda2.js","./QueryEngineResult-0db87ff7.js","./quantizationUtils-a18aa97b.js","./WhereClause-aa8eb708.js","./executionError-c1d13a98.js","./utils-f5985451.js","./QueryEngineCapabilities-42e44ded.js","./timeSupport-4907a81c.js","./geojson-9e59b327.js","./clientSideDefaults-88a0f6ca.js","./sourceUtils-c8ea7ccc.js"],import.meta.url),LercWorker:()=>De(()=>import("./LercWorker-a5fb8e3a.js"),["./LercWorker-a5fb8e3a.js","./preload-helper-388ac9d5.js"],import.meta.url),MemorySourceWorker:()=>De(()=>import("./MemorySourceWorker-b3e912e8.js"),["./MemorySourceWorker-b3e912e8.js","./objectIdUtils-967fafff.js","./FeatureStore-f17c63b9.js","./BoundsStore-83b83f12.js","./PooledRBush-7e0cbc69.js","./centroid-ede77936.js","./utils-7a6a6690.js","./preload-helper-388ac9d5.js","./projectionSupport-1fe92137.js","./json-48e3ea08.js","./QueryEngine-c10bcda2.js","./QueryEngineResult-0db87ff7.js","./quantizationUtils-a18aa97b.js","./WhereClause-aa8eb708.js","./executionError-c1d13a98.js","./utils-f5985451.js","./QueryEngineCapabilities-42e44ded.js","./timeSupport-4907a81c.js","./clientSideDefaults-88a0f6ca.js","./sourceUtils-c8ea7ccc.js"],import.meta.url),PBFDecoderWorker:()=>De(()=>import("./PBFDecoderWorker-74e93595.js"),["./PBFDecoderWorker-74e93595.js","./preload-helper-388ac9d5.js"],import.meta.url),Pipeline:()=>De(()=>import("./Pipeline-8745cc03.js"),["./Pipeline-8745cc03.js","./preload-helper-388ac9d5.js","./QueryEngine-c10bcda2.js","./QueryEngineResult-0db87ff7.js","./quantizationUtils-a18aa97b.js","./WhereClause-aa8eb708.js","./executionError-c1d13a98.js","./utils-f5985451.js","./projectionSupport-1fe92137.js","./json-48e3ea08.js","./utils-7a6a6690.js","./QueryEngineCapabilities-42e44ded.js","./timeSupport-4907a81c.js","./FeatureStore2D-d038769a.js","./CircularArray-c48430e5.js","./ComputedAttributeStorage-c5196ecb.js","./arcadeTimeUtils-d6b8096e.js","./centroid-ede77936.js","./definitions-cc1dbf1d.js","./visualVariablesUtils-9821563e.js","./color-b1c8dd9c.js","./enums-f1a6a48a.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./visualVariablesUtils-968002b5.js","./ogcFeatureUtils-c2eed336.js","./geojson-9e59b327.js","./clientSideDefaults-88a0f6ca.js","./createConnection-7da4a0b5.js"],import.meta.url),PointCloudWorker:()=>De(()=>import("./PointCloudWorker-63340ae4.js"),["./PointCloudWorker-63340ae4.js","./quat-2013e5e2.js","./mat3f64-221ce671.js","./quatf64-3363c48e.js","./I3SBinaryReader-6c4efd34.js","./VertexAttribute-15d1866a.js","./vec3f32-ad1dc57f.js","./PointCloudUniqueValueRenderer-92b8c3ad.js","./preload-helper-388ac9d5.js"],import.meta.url),RasterWorker:()=>De(()=>import("./RasterWorker-f8dece55.js"),["./RasterWorker-f8dece55.js","./utils-2bd7cbee.js","./rasterProjectionHelper-b2144909.js","./preload-helper-388ac9d5.js"],import.meta.url),SceneLayerSnappingSourceWorker:()=>De(()=>import("./SceneLayerSnappingSourceWorker-8c147efa.js"),["./SceneLayerSnappingSourceWorker-8c147efa.js","./lineSegment-3871b7e1.js","./sphere-5fa18887.js","./mat3f64-221ce671.js","./mat4f64-1413b4a7.js","./quatf64-3363c48e.js","./QueryEngineResult-0db87ff7.js","./preload-helper-388ac9d5.js","./quantizationUtils-a18aa97b.js","./WhereClause-aa8eb708.js","./executionError-c1d13a98.js","./utils-f5985451.js","./projectionSupport-1fe92137.js","./json-48e3ea08.js","./utils-7a6a6690.js","./plane-0673ba1c.js","./edgeProcessing-12bf7055.js","./deduplicate-58e5df9b.js","./Indices-56098ffd.js","./InterleavedLayout-01464a7a.js","./BufferView-067dc1c7.js","./types-e1c0a5bf.js","./VertexAttribute-15d1866a.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js"],import.meta.url),SceneLayerWorker:()=>De(()=>import("./SceneLayerWorker-9f7d4d42.js"),["./SceneLayerWorker-9f7d4d42.js","./preload-helper-388ac9d5.js","./sphere-5fa18887.js","./mat3f64-221ce671.js","./mat4f64-1413b4a7.js","./quatf64-3363c48e.js"],import.meta.url),WFSSourceWorker:()=>De(()=>import("./WFSSourceWorker-9692a67d.js"),["./WFSSourceWorker-9692a67d.js","./FeatureStore-f17c63b9.js","./BoundsStore-83b83f12.js","./PooledRBush-7e0cbc69.js","./centroid-ede77936.js","./utils-7a6a6690.js","./preload-helper-388ac9d5.js","./projectionSupport-1fe92137.js","./json-48e3ea08.js","./QueryEngine-c10bcda2.js","./QueryEngineResult-0db87ff7.js","./quantizationUtils-a18aa97b.js","./WhereClause-aa8eb708.js","./executionError-c1d13a98.js","./utils-f5985451.js","./QueryEngineCapabilities-42e44ded.js","./timeSupport-4907a81c.js","./geojson-9e59b327.js","./sourceUtils-c8ea7ccc.js","./wfsUtils-9ede8c9f.js","./xmlUtils-444cb4c0.js"],import.meta.url),WorkerTileHandler:()=>De(()=>import("./WorkerTileHandler-2363d11e.js"),["./WorkerTileHandler-2363d11e.js","./enums-fb086c25.js","./GeometryUtils-984e8446.js","./Rect-ea14f53a.js","./config-1337d16e.js","./StyleDefinition-29c49b98.js","./enums-f1a6a48a.js","./TurboLine-4d7f5bbb.js","./preload-helper-388ac9d5.js","./definitions-cc1dbf1d.js","./StyleRepository-44f4ff45.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./earcut-61f7b102.js","./BidiEngine-836b7ef6.js"],import.meta.url)},{CLOSE:HB,ABORT:WB,INVOKE:JB,RESPONSE:R_,OPEN_PORT:ZB,ON:Axe}=An,Cxe=2;let $xe=class{constructor(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this)}push(e){e.type===An.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},Mm=class yv{static connect(e){const i=new MessageChannel;let r;r=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const s=new yv(i.port1,{channel:i,client:r},()=>null);return typeof r=="object"&&"remoteClient"in r&&(r.remoteClient=s),yv.clients.set(s,r),i.port2}static loadWorker(e){const i=Mxe[e];return i?i():Promise.resolve(null)}constructor(e,i,r){this._port=e,this._getNextJob=r,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new $xe(s=>this._onInvokeMessage(s)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:HB}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,i,r){const s=r&&r.signal,n=r&&r.transferList;if(!this._port)return Promise.reject(new Ce("worker:port-closed",`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:i}));const o=iie();return new Promise((a,l)=>{if(Rl(s))return this._processWork(),void l(yr());const u=$a(s,()=>{const d=this._outJobs.get(o);d&&(this._outJobs.delete(o),this._processWork(),gs(d.abortHandle),this._post({type:WB,jobId:o}),l(yr()))}),c={resolve:a,reject:l,abortHandle:u,debugInfo:e};this._outJobs.set(o,c),this._post({type:JB,jobId:o,methodName:e,abortable:s!=null},i,n)})}on(e,i){const r=new MessageChannel;function s(n){i(n.data)}return this._port.postMessage({type:An.ON,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",s),r.port1.start(),{remove(){r.port1.postMessage({type:An.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",s)}}}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:ZB,port:e.port2}),e.port1}_processWork(){if(this._outJobs.size>=Cxe)return;const e=this._getNextJob();if(!e)return;const{methodName:i,data:r,invokeOptions:s,deferred:n}=e;this.invoke(i,r,s).then(o=>n.resolve(o)).catch(o=>n.reject(o))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{gs(e.abortHandle),e.reject(yr(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(e){ee(this._schedule)?this._schedule(()=>this._processMessage(e)):this._processMessage(e)}_processMessage(e){const i=LS(e);if(i)switch(i.type){case R_:this._onResponseMessage(i);break;case JB:this._invokeQueue.push(i);break;case WB:this._onAbortMessage(i);break;case HB:this._onCloseMessage();break;case ZB:this._onOpenPortMessage(i);break;case Axe:this._onOnMessage(i)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,s=i.get(r);this._invokeQueue.push(e),s&&(s.controller&&s.controller.abort(),i.delete(r))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&yv.clients.get(this)===e&&e.destroy(),yv.clients.delete(this),e&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:i,jobId:r,data:s,abortable:n}=e,o=n?new AbortController:null,a=this._inJobs;let l,u=this._client,c=u[i];try{if(!c&&i&&i.includes(".")){const d=i.split(".");for(let f=0;f<d.length-1;f++)u=u[d[f]],c=u[d[f+1]]}if(typeof c!="function")throw new TypeError(`${i} is not a function`);l=c.call(u,s,{client:this,signal:o?o.signal:null})}catch(d){return void this._post({type:R_,jobId:r,error:kS(d)})}_p(l)?(a.set(r,{controller:o,promise:l}),l.then(d=>{a.has(r)&&(a.delete(r),this._post({type:R_,jobId:r},d))},d=>{a.has(r)&&(a.delete(r),vn(d)||this._post({type:R_,jobId:r,error:kS(d||{message:`Error encountered at method ${i}`})}))})):this._post({type:R_,jobId:r},l)}_onOpenPortMessage(e){new yv(e.port,{client:this._client},()=>null)}_onOnMessage(e){const{port:i}=e,r=this._client.on(e.eventType,n=>{i.postMessage(n)}),s=P4(e.port,"message",n=>{LS(n)?.type===An.CLOSE&&(s.remove(),r.remove(),i.close())})}_onResponseMessage(e){const{jobId:i,error:r,data:s}=e,n=this._outJobs;if(!n.has(i))return;const o=n.get(i);n.delete(i),this._processWork(),gs(o.abortHandle),r?o.reject(Ce.fromJSON(JSON.parse(r))):o.resolve(s)}_post(e,i,r){return oD(this._port,e,i,r)}};Mm.kernelInfo={revision:iX,version:rX,buildDate:tX},Mm.clients=new Map;let Oxe=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new HA}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(e,i){return new Promise((r,s)=>{let n=!0;const o=a=>{pr(i.signal),n&&(n=!1,a())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let a=0;a<e.length;++a){const l=e[a];_p(l)?this._clientPromises[a]=l.then(u=>(this._clients[a]=new Mm(u,i,()=>this._ongoingJobsQueue.pop()??null),o(r),this._clients[a]),()=>(o(s),null)):(this._clients[a]=new Mm(l,i,()=>this._ongoingJobsQueue.pop()??null),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(r))}})}broadcast(e,i,r){const s=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const o=this._clientPromises[n];s[n]=o.then(a=>a?.invoke(e,i,r))}return s}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.deferred.reject(yr(`Worker closing, aborting job calling '${e.methodName}'`));for(const i of this._clientPromises)i.then(r=>r?.close());this._clients.length=0,this._clientPromises.length=0}invoke(e,i,r){let s;Array.isArray(r)?(tt.getLogger("esri.core.workers.Connection").warn("invoke()","The transferList parameter is deprecated, use the options object instead"),s={transferList:r}):s=r;const n=lp();this._ongoingJobsQueue.push({methodName:e,data:i,invokeOptions:s,deferred:n});for(let o=0;o<this._clientPromises.length;o++){const a=this._clients[o];a?a.jobAdded():this._clientPromises[o].then(l=>l?.jobAdded())}return n.promise}on(e,i){return Promise.all(this._clientPromises).then(()=>O4(this._clients.map(r=>r.on(e,i))))}openPorts(){return new Promise(e=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then(n=>{n&&(i[s]=n.openPort()),--r==0&&e(i)})})}get test(){return{numClients:this._clients.length}}};const rie=tt.getLogger("esri.intl.substitute");function dh(t,e,i={}){const{format:r={}}=i;return _c(t,s=>Rxe(s,e,r))}function Rxe(t,e,i){let r,s;const n=t.indexOf(":");if(n===-1?r=t.trim():(r=t.slice(0,n).trim(),s=t.slice(n+1).trim()),!r)return"";const o=T3(r,e);if(o==null)return"";const a=(s?i?.[s]:null)??i?.[r];return a?kxe(o,a):s?Lxe(o,s):aD(o)}function kxe(t,e){switch(e.type){case"date":return hp(t,e.intlOptions);case"number":return Tm(t,e.intlOptions);default:return rie.warn("missing format descriptor for key {key}"),aD(t)}}function Lxe(t,e){switch(e.toLowerCase()){case"dateformat":return hp(t);case"numberformat":return Tm(t);default:return rie.warn(`inline format is unsupported since 4.12: ${e}`),/^(dateformat|datestring)/i.test(e)?hp(t):/^numberformat/i.test(e)?Tm(t):aD(t)}}function aD(t){switch(typeof t){case"string":return t;case"number":return Tm(t);case"boolean":return""+t;default:return t instanceof Date?hp(t):""}}async function Pxe(t,e,i,r){const s=e.exec(i);if(!s)throw new Ce("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${e}"`);const n=s[1]?`${s[1]}/`:"",o=s[2],a=F1e(r),l=`${n}${o}.json`,u=a?`${n}${o}_${a}.json`:l;let c;try{c=await YB(t(u))}catch(d){if(u===l)throw new Ce("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:d});try{c=await YB(t(l))}catch(f){throw new Ce("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:f})}}return c}async function YB(t){if(ee(KB.fetchBundleAsset))return KB.fetchBundleAsset(t);const e=await Et(t,{responseType:"text"});return JSON.parse(e.data)}let Nxe=class{constructor({base:e="",pattern:i,location:r=new URL(window.location.href)}){let s;s=typeof r=="string"?n=>new URL(n,new URL(r,window.location.href)).href:r instanceof URL?n=>new URL(n,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=s,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)/)?(.*)$`)}fetchMessageBundle(e,i){return Pxe(this.getAssetUrl,this.matcher,e,i)}};function Fxe(t){return new Nxe(t)}const KB={};N1e(Fxe({pattern:"esri/",location:Ui}));const Dxe={};function jxe(t){const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:t.packages&&t.packages.concat()||[],paths:{...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=Dxe.baseUrl),e}let Uxe=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>e[i](...r)})}},vM=class{constructor(){this._dispatcher=new Uxe,this._workerPostMessage({type:An.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){bA(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,i,r){this._dispatcher.addEventListener(e,i,r)}removeEventListener(e,i,r){this._dispatcher.removeEventListener(e,i,r)}_workerPostMessage(e){bA(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const i=LS(e);if(i&&i.type===An.OPEN){const{modulePath:r,jobId:s}=i;let n=await Mm.loadWorker(r);n||(n=await De(()=>import(r),[],import.meta.url));const o=Mm.connect(n);this._workerPostMessage({type:An.OPENED,jobId:s,data:o})}}};const h8=tt.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:Vxe}=An,Bxe='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,version:r}=configuration.kernelInfo,{revision:t,version:n}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS API for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\\nModules version: ${r}\\nAssets version: ${n}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const i=outgoing.get(r);outgoing.delete(r),o.error?i.reject(JSON.parse(o.error)):i.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let nT,oT;const QB="Failed to create Worker. Fallback to execute module in main thread";async function zxe(){if(!Ze("esri-workers")||(Ze("mozilla"),0))return XB(new vM);if(!nT&&!oT)try{const e=Bxe.split('"{CONFIGURATION}"').join(`'${Gxe()}'`);nT=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){oT=e||{}}let t;if(nT)try{t=new Worker(nT,{name:"esri-worker-"+qxe++})}catch{h8.warn(QB,oT),t=new vM}else h8.warn(QB,oT),t=new vM;return XB(t)}async function XB(t){return new Promise(e=>{function i(s){const n=LS(s);n&&n.type===Vxe&&(t.removeEventListener("message",i),t.removeEventListener("error",r),e(t))}function r(s){s.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",r),h8.warn("Failed to create Worker. Fallback to execute module in main thread",s),(t=new vM).addEventListener("message",i),t.addEventListener("error",r)}t.addEventListener("message",i),t.addEventListener("error",r)})}function Gxe(){let t;if(Li.default!=null){const s={...Li};delete s.default,t=JSON.parse(JSON.stringify(s))}else t=JSON.parse(JSON.stringify(Li));t.assetsPath=_l(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?_l(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=gu(),t.has={"esri-csp-restrictions":Ze("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":Ze("esri-2d-update-debug"),"featurelayer-pbf":Ze("featurelayer-pbf"),"featurelayer-simplify-thresholds":Ze("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":Ze("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":Ze("featurelayer-simplify-mobile-factor"),"esri-atomics":Ze("esri-atomics"),"esri-shared-array-buffer":Ze("esri-shared-array-buffer"),"esri-tiles-debug":Ze("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":Ze("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":Ze("feature-polyline-generalization-factor"),"host-webworker":1,"polylabel-placement-enabled":Ze("polylabel-placement-enabled")},t.workers.loaderUrl&&(t.workers.loaderUrl=_l(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=_l(t.workers.workerPath):t.workers.workerPath=_l(Ui("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=Li.workers.loaderConfig,i=jxe({baseUrl:e?.baseUrl,locale:gu(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e?.has},map:{...e?.map},paths:{...e?.paths},packages:e?.packages||[]});return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:{version:rX,buildDate:tX,revision:iX}})}let qxe=0;const{ABORT:ez,INVOKE:Hxe,OPEN:Wxe,OPENED:Jxe,RESPONSE:k_}=An;let Zxe=class sie{static async create(e){const i=await zxe();return new sie(i,e)}constructor(e,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=i,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",r=>{r.preventDefault(),tt.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(e,i={}){const{signal:r}=i,s=iie();return new Promise((n,o)=>{const a={resolve:n,reject:o,abortHandle:qF(r,()=>{this._outJobs.delete(s),this._post({type:ez,jobId:s})})};this._outJobs.set(s,a),this._post({type:Wxe,jobId:s,modulePath:e})})}_onMessage(e){const i=LS(e);if(i)switch(i.type){case Jxe:this._onOpenedMessage(i);break;case k_:this._onResponseMessage(i);break;case ez:this._onAbortMessage(i);break;case Hxe:this._onInvokeMessage(i)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,s=i.get(r);s&&(s.controller&&s.controller.abort(),i.delete(r))}_onInvokeMessage(e){const{methodName:i,jobId:r,data:s,abortable:n}=e,o=n?new AbortController:null,a=this._inJobs,l=j0e[i];let u;try{if(typeof l!="function")throw new TypeError(`${i} is not a function`);u=l.call(null,s,{signal:o?o.signal:null})}catch(c){return void this._post({type:k_,jobId:r,error:kS(c)})}_p(u)?(a.set(r,{controller:o,promise:u}),u.then(c=>{a.has(r)&&(a.delete(r),this._post({type:k_,jobId:r},c))},c=>{a.has(r)&&(a.delete(r),c||(c={message:"Error encountered at method"+i}),vn(c)||this._post({type:k_,jobId:r,error:kS(c||{message:`Error encountered at method ${i}`})}))})):this._post({type:k_,jobId:r},u)}_onOpenedMessage(e){const{jobId:i,data:r}=e,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),gs(s.abortHandle),s.resolve(r))}_onResponseMessage(e){const{jobId:i,error:r,data:s}=e,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),gs(n.abortHandle),r?n.reject(Ce.fromJSON(JSON.parse(r))):n.resolve(s))}_post(e,i,r){return oD(this.worker,e,i,r)}},qg=Ze("esri-workers-debug")?1:Ze("esri-mobile")?Math.min(navigator.hardwareConcurrency-1,3):Ze("host-browser")?navigator.hardwareConcurrency-1:0;qg||(qg=Ze("safari")&&Ze("mac")?7:2);let tz=0;const bM=[];function Yxe(){oie()}async function aT(t,e){const i=new Oxe;return await i.open(t,e),i}async function nie(t,e={}){if(typeof t!="string")throw new Ce("workers:undefined-module","modulePath is missing");let i=e.strategy||"distributed";if(Ze("host-webworker")&&!Ze("esri-workers")&&(i="local"),i==="local"){let r=await Mm.loadWorker(t);r||(r=await De(()=>import(t),[],import.meta.url)),pr(e.signal);const s=e.client||r;return aT([Mm.connect(r)],{...e,client:s})}if(await oie(),pr(e.signal),i==="dedicated"){const r=tz++%qg;return aT([await bM[r].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const r=Math.min(e.maxNumWorkers,qg);if(r<qg){const s=new Array(r);for(let n=0;n<r;++n){const o=tz++%qg;s[n]=bM[o].open(t,e)}return aT(s,e)}}return aT(bM.map(r=>r.open(t,e)),e)}let lT=null;async function oie(){if(lT)return lT;new AbortController;const t=[];for(let e=0;e<qg;e++){const i=Zxe.create(e).then(r=>(bM[e]=r,r));t.push(i)}return lT=Promise.all(t),lT}function iz(t,e,i){if(t.hasM==null||t.hasZ)for(const r of e)for(const s of r)s.length>2&&(s[2]*=i)}function Kxe(t,e,i){if(!t&&!e||!i)return;const r=Gb(i);rz(t,i,r),rz(e,i,r)}function rz(t,e,i){if(t)for(const r of t)Qxe(r.geometry,e,i)}function Qxe(t,e,i){if(Re(t)||!t.spatialReference||bs(t.spatialReference,e))return;const r=Gb(t.spatialReference)/i;if(r!==1){if("x"in t)t.z!=null&&(t.z*=r);else if("rings"in t)iz(t,t.rings,r);else if("paths"in t)iz(t,t.paths,r);else if("points"in t&&(t.hasM==null||t.hasZ))for(const s of t.points)s.length>2&&(s[2]*=r)}}function lD(t,e,i){if(Re(e)||Re(i)||i.vcsWkid||bs(e,i))return null;const r=Gb(e)/Gb(i);if(r===1)return null;switch(t){case"point":case"esriGeometryPoint":return s=>Xxe(s,r);case"polyline":case"esriGeometryPolyline":return s=>tSe(s,r);case"polygon":case"esriGeometryPolygon":return s=>eSe(s,r);case"multipoint":case"esriGeometryMultipoint":return s=>iSe(s,r);case"extent":case"esriGeometryExtent":return s=>rSe(s,r);default:return null}}function Xxe(t,e){t&&t.z!=null&&(t.z*=e)}function eSe(t,e){if(t)for(const i of t.rings)for(const r of i)r.length>2&&(r[2]*=e)}function tSe(t,e){if(t)for(const i of t.paths)for(const r of i)r.length>2&&(r[2]*=e)}function iSe(t,e){if(t)for(const i of t.points)i.length>2&&(i[2]*=e)}function rSe(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}function d8(t,e,i){if(!i||!i.features||!i.hasZ)return;const r=lD(i.geometryType,e,t.outSpatialReference);if(!Re(r))for(const s of i.features)r(s.geometry)}const sSe=new si({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});var p8;const nSe=new si({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let lo=p8=class extends Je{constructor(t){super(t),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return i?.value??null}readValueType(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return i?nSe.fromJSON(i.fieldValueType):null}clone(){return new p8({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};h([p({type:String,json:{write:!0}})],lo.prototype,"alias",void 0),h([p({type:[String,Number],json:{write:{allowNull:!0}}})],lo.prototype,"defaultValue",void 0),h([p()],lo.prototype,"description",void 0),h([Ye("description")],lo.prototype,"readDescription",null),h([p({types:Yte,json:{read:{reader:nD},write:!0}})],lo.prototype,"domain",void 0),h([p({type:Boolean,json:{write:!0}})],lo.prototype,"editable",void 0),h([p({type:Si,json:{write:!0}})],lo.prototype,"length",void 0),h([p({type:String,json:{write:!0}})],lo.prototype,"name",void 0),h([p({type:Boolean,json:{write:!0}})],lo.prototype,"nullable",void 0),h([Dt(sSe)],lo.prototype,"type",void 0),h([p()],lo.prototype,"valueType",void 0),h([Ye("valueType",["description"])],lo.prototype,"readValueType",null),h([p({type:Boolean,json:{read:!1}})],lo.prototype,"visible",void 0),lo=p8=h([ce("esri.layers.support.Field")],lo);const ml=lo;var f8;const m8=new si({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Tn=f8=class extends Je{constructor(t){super(t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(t,e){const i=Tt.fromJSON(e.spatialReference),r=[];for(let s=0;s<t.length;s++){const n=t[s],o=kn.fromJSON(n),a=n.geometry&&n.geometry.spatialReference;ee(o.geometry)&&!a&&(o.geometry.spatialReference=i);const l=n.aggregateGeometries,u=o.aggregateGeometries;if(l&&ee(u))for(const c in u){const d=u[c],f=l[c]?.spatialReference;ee(d)&&!f&&(d.spatialReference=i)}r.push(o)}return r}writeGeometryType(t,e,i,r){if(t)return void m8.write(t,e,i,r);const{features:s}=this;if(s){for(const n of s)if(n&&ee(n.geometry))return void m8.write(n.geometry.type,e,i,r)}}readQueryGeometry(t,e){if(!t)return null;const i=!!t.spatialReference,r=Pl(t);return r&&!i&&e.spatialReference&&(r.spatialReference=Tt.fromJSON(e.spatialReference)),r}writeSpatialReference(t,e){if(t)return void(e.spatialReference=t.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&ee(r.geometry)&&r.geometry.spatialReference)return void(e.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new f8(this.cloneProperties())}cloneProperties(){return Le({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(t){const e=this.write();if(e.features&&Array.isArray(t)&&t.length>0)for(let i=0;i<e.features.length;i++){const r=e.features[i];if(r.geometry){const s=t&&t[i];r.geometry=s&&s.toJSON()||r.geometry}}return e}quantize(t){const{scale:[e,i],translate:[r,s]}=t,n=u=>Math.round((u-r)/e),o=u=>Math.round((s-u)/i),a=this.features,l=this._getQuantizationFunction(this.geometryType,n,o);for(let u=0,c=a.length;u<c;u++)l?.(a[u].geometry)||(a.splice(u,1),u--,c--);return this.transform=t,this}unquantize(){const{geometryType:t,features:e,transform:i}=this;if(!i)return this;const{translate:[r,s],scale:[n,o]}=i,a=c=>c*n+r,l=c=>s-c*o,u=this._getHydrationFunction(t,a,l);for(const{geometry:c}of e)ee(c)&&u&&u(c);return this.transform=null,this}_quantizePoints(t,e,i){let r,s;const n=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];if(o>0){const u=e(l[0]),c=i(l[1]);u===r&&c===s||(n.push([u-r,c-s]),r=u,s=c)}else r=e(l[0]),s=i(l[1]),n.push([r,s])}return n.length>0?n:null}_getQuantizationFunction(t,e,i){return t==="point"?r=>(r.x=e(r.x),r.y=i(r.y),r):t==="polyline"||t==="polygon"?r=>{const s=c0(r)?r.rings:r.paths,n=[];for(let o=0,a=s.length;o<a;o++){const l=s[o],u=this._quantizePoints(l,e,i);u&&n.push(u)}return n.length>0?(c0(r)?r.rings=n:r.paths=n,r):null}:t==="multipoint"?r=>{const s=this._quantizePoints(r.points,e,i);return s&&s.length>0?(r.points=s,r):null}:t==="extent"?r=>r:null}_getHydrationFunction(t,e,i){return t==="point"?r=>{r.x=e(r.x),r.y=i(r.y)}:t==="polyline"||t==="polygon"?r=>{const s=c0(r)?r.rings:r.paths;let n,o;for(let a=0,l=s.length;a<l;a++){const u=s[a];for(let c=0,d=u.length;c<d;c++){const f=u[c];c>0?(n+=f[0],o+=f[1]):(n=f[0],o=f[1]),f[0]=e(n),f[1]=i(o)}}}:t==="extent"?r=>{r.xmin=e(r.xmin),r.ymin=i(r.ymin),r.xmax=e(r.xmax),r.ymax=i(r.ymax)}:t==="multipoint"?r=>{const s=r.points;let n,o;for(let a=0,l=s.length;a<l;a++){const u=s[a];a>0?(n+=u[0],o+=u[1]):(n=u[0],o=u[1]),u[0]=e(n),u[1]=i(o)}}:null}};h([p({type:String,json:{write:!0}})],Tn.prototype,"displayFieldName",void 0),h([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Tn.prototype,"exceededTransferLimit",void 0),h([p({type:[kn],json:{write:!0}})],Tn.prototype,"features",void 0),h([Ye("features")],Tn.prototype,"readFeatures",null),h([p({type:[ml],json:{write:!0}})],Tn.prototype,"fields",void 0),h([p({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:m8.read}}})],Tn.prototype,"geometryType",void 0),h([it("geometryType")],Tn.prototype,"writeGeometryType",null),h([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Tn.prototype,"hasM",void 0),h([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Tn.prototype,"hasZ",void 0),h([p({types:Ac,json:{write:!0}})],Tn.prototype,"queryGeometry",void 0),h([Ye("queryGeometry")],Tn.prototype,"readQueryGeometry",null),h([p({type:Tt,json:{write:!0}})],Tn.prototype,"spatialReference",void 0),h([it("spatialReference")],Tn.prototype,"writeSpatialReference",null),h([p({json:{write:!0}})],Tn.prototype,"transform",void 0),Tn=f8=h([ce("esri.rest.support.FeatureSet")],Tn),Tn.prototype.toJSON.isDefaultToJSON=!0;const n1=Tn;let oSe=0;const aie="esri.layers.graphics.sources.MemorySource",xO=tt.getLogger(aie);let jd=class extends Ll.LoadableMixin(C3(ea(Nt))){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const i=ee(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}get _workerGeometryType(){const e=this.layer?.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,i={}){await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);d8(e,this.layer.spatialReference,r);const s=n1.fromJSON(r);if(!this._requiresClientGraphicMapping())return s;const n=this.layer.objectIdField;for(const o of s.features){const a=o.attributes[n],l=this._idToClientGraphic.get(a);l&&(o.geometry=l.geometry)}return s.geometryType=this.layer.geometryType,s}async queryFeaturesJSON(e,i={}){if(this._requiresClientGraphicMapping())throw new Ce("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);return d8(e,this.layer.spatialReference,r),r}queryFeatureCount(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,i))}queryObjectIds(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,i))}queryExtent(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,i)).then(r=>({count:r.count,extent:Xt.fromJSON(r.extent)}))}querySnapping(e,i={}){return this.load(i).then(()=>this._connection.invoke("querySnapping",e,i))}async _applyEdits(e){if(!this._connection)throw new Ce("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let r=null;const s=[],n=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const o=c=>"objectId"in c&&c.objectId!=null?c.objectId:"attributes"in c&&c.attributes[i]!=null?c.attributes[i]:null;if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const c of e.deleteFeatures){const d=o(c);d!=null&&s.push(d)}const a=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){for(const c of e.updateFeatures)if(n.push(this._serializeFeature(c)),a){const d=o(c);d!=null&&a.set(d,c)}}Kxe(r?r.features:null,n,this.layer.spatialReference);const{fullExtent:l,featureEditResults:u}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:n,deletes:s});return this.fullExtent=l,r&&r.finish(u.uidToObjectId),this._updateClientGraphicIds(a,u),this._createEditsResult(u)}async _prepareClientMapping(e,i){if(this._layerOrSourceGeometryType!=="mesh"||Re(e))return;const r=[];for(const{geometry:s}of e)!ee(s)||s.type!=="mesh"||s.hasExtent||s.loaded||r.push(s.load({signal:i}));r.length&&await Promise.all(r)}_updateClientGraphicIds(e,i){if(this._idToClientGraphic){if(e)for(const r of i.updateResults){if(!r.success)continue;const s=e.get(r.objectId);s!=null&&this._addIdToClientGraphic(s)}for(const r of i.deleteResults)r.success&&this._idToClientGraphic.delete(r.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const i=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:i?new Ce("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(e){const i=new Map,r=new Array(e.length);let s=null;for(let o=0;o<e.length;o++){const a=e[o],l=this._serializeFeature(a);!s&&ee(a.geometry)&&(s=a.geometry.type),r[o]=l,i.set(`${l.uid}`,a)}const n=this;return{features:r,inferredGeometryType:s,finish(o){const a=n.sourceJSON.objectIdField;for(const l in o){const u=o[l],c=i.get(l);c&&(c.attributes||(c.attributes={}),u===-1?delete c.attributes[a]:c.attributes[a]=u,n._addIdToClientGraphic(c))}}}}_addIdToClientGraphic(e){if(!this._idToClientGraphic)return;const i=this.sourceJSON.objectIdField,r=e.attributes&&e.attributes[i];r!=null&&this._idToClientGraphic.set(r,e)}get _layerOrSourceGeometryType(){return this.layer?.geometryType??this.sourceJSON?.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:i}=e,r=this._geometryForSerialization(e),s=(oSe++).toString();return r?{uid:s,geometry:r.toJSON(),attributes:i}:{uid:s,attributes:i}}_geometryForSerialization(e){const{geometry:i}=e;return Re(i)?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?ja.fromExtent(i.extent):null:i}async _startWorker(e){this._connection=await nie("MemorySourceWorker",{strategy:Ze("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:i,spatialReference:r,objectIdField:s,hasM:n,hasZ:o,timeInfo:a}=this.layer,l=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const u=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",m=>{xO.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),m.preventDefault()}));const c={features:u.features,fields:i&&i.map(m=>m.toJSON()),geometryType:lB.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&n,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:s,spatialReference:l?null:r&&r.toJSON(),timeInfo:a?a.toJSON():null},d=await this._connection.invoke("load",c,{signal:e});for(const m of d.warnings)xO.warn(m.message,{layer:this.layer,warning:m});d.featureErrors.length&&xO.warn(`Encountered ${d.featureErrors.length} validation errors while loading features`,d.featureErrors);const f=d.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(u.inferredGeometryType)&&(f.geometryType=lB.toJSON(u.inferredGeometryType)),this.sourceJSON=f,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),u.finish(d.assignedObjectIds)}};h([ZF({Type:kn,ensureType:ns(kn)})],jd.prototype,"itemType",void 0),h([p()],jd.prototype,"type",void 0),h([p({constructOnly:!0})],jd.prototype,"layer",void 0),h([p({readOnly:!0})],jd.prototype,"_workerGeometryType",null),h([p()],jd.prototype,"sourceJSON",void 0),jd=h([ce(aie)],jd);function aSe(t){return"portalItem"in t}const uD=t=>{let e=class extends t{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):aSe(this)?this.portalItem?.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return h([p({type:String})],e.prototype,"apiKey",null),e=h([ce("esri.layers.mixins.APIKeyMixin")],e),e},lie={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},uie=Object.values(lie),cie=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${uie.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),lSe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${uie.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),uSe=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function cSe(t){return!!cie.test(t)}function o1(t){if(Re(t))return null;const e=Fs(t),i=e.path.match(cie)||e.path.match(lSe);if(!i)return null;const[,r,s,n,o]=i,a=s.indexOf("/");return{title:cD(a!==-1?s.slice(a+1):s),serverType:lie[n.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:r}}}function hSe(t){const e=Fs(t).path.match(uSe);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function cD(t){return(t=t.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function dSe(t,e){const i=[];if(t){const r=o1(t);ee(r)&&r.title&&i.push(r.title)}if(e){const r=cD(e);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function hD(t){if(!t)return!1;const e=".arcgis.com/",i="//services",r="//tiles",s="//features",n=(t=t.toLowerCase()).includes(e),o=t.includes(i)||t.includes(r)||t.includes(s);return n&&o}function pSe(t,e){return t&&UQ(VQ(t,e))}function fSe(t){let{url:e}=t;if(!e)return{url:e};e=VQ(e,t.logger);const i=Fs(e),r=o1(i.path);let s;if(ee(r))r.sublayer!=null&&t.layer.layerId==null&&(s=r.sublayer),e=r.url.path;else if(t.nonStandardUrlAllowed){const n=hSe(i.path);ee(n)&&(e=n.serviceUrl,s=n.sublayerId)}return{url:UQ(e),layerId:s}}function mSe(t,e,i,r,s){N0(e,r,"url",s),r.url&&t.layerId!=null&&(r.url=$0(r.url,i,t.layerId.toString()))}function ySe(t){if(!t)return!1;const e=t.toLowerCase(),i=e.includes("/services/"),r=e.includes("/mapserver/wmsserver"),s=e.includes("/imageserver/wmsserver"),n=e.includes("/wmsserver");return i&&(r||s||n)}const hC=t=>{let e=class extends t{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=o1(this.url);if(ee(i)&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",pSe(i,tt.getLogger(this.declaredClass)))}};return h([p()],e.prototype,"title",null),h([p({type:String})],e.prototype,"url",null),e=h([ce("esri.layers.mixins.ArcGISService")],e),e};function dC(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function gSe(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function vSe(t,e,i,r,s,n,o,a,l,u,c,d,f,m,g,v){const b=new Float32Array(16);return b[0]=t,b[1]=e,b[2]=i,b[3]=r,b[4]=s,b[5]=n,b[6]=o,b[7]=a,b[8]=l,b[9]=u,b[10]=c,b[11]=d,b[12]=f,b[13]=m,b[14]=g,b[15]=v,b}function bSe(t,e){return new Float32Array(t,e,16)}const wSe=dC();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:wSe,clone:gSe,create:dC,createView:bSe,fromValues:vSe},Symbol.toStringTag,{value:"Module"}));function _Se(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Km(t,e,i,r,s,n,o,a,l,u,c,d,f,m,g,v,b){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t[4]=n,t[5]=o,t[6]=a,t[7]=l,t[8]=u,t[9]=c,t[10]=d,t[11]=f,t[12]=m,t[13]=g,t[14]=v,t[15]=b,t}function V3(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Mp(t,e){if(t===e){const i=e[1],r=e[2],s=e[3],n=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=n,t[11]=e[14],t[12]=s,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function xSe(t,e){return hie(t,e)||V3(t),t}function hie(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],d=e[9],f=e[10],m=e[11],g=e[12],v=e[13],b=e[14],_=e[15],S=i*a-r*o,M=i*l-s*o,x=i*u-n*o,T=r*l-s*a,I=r*u-n*a,$=s*u-n*l,L=c*v-d*g,B=c*b-f*g,z=c*_-m*g,H=d*b-f*v,J=d*_-m*v,K=f*_-m*b;let Q=S*K-M*J+x*H+T*z-I*B+$*L;return Q?(Q=1/Q,t[0]=(a*K-l*J+u*H)*Q,t[1]=(s*J-r*K-n*H)*Q,t[2]=(v*$-b*I+_*T)*Q,t[3]=(f*I-d*$-m*T)*Q,t[4]=(l*z-o*K-u*B)*Q,t[5]=(i*K-s*z+n*B)*Q,t[6]=(b*x-g*$-_*M)*Q,t[7]=(c*$-f*x+m*M)*Q,t[8]=(o*J-a*z+u*L)*Q,t[9]=(r*z-i*J-n*L)*Q,t[10]=(g*I-v*x+_*S)*Q,t[11]=(d*x-c*I-m*S)*Q,t[12]=(a*B-o*H-l*L)*Q,t[13]=(i*H-r*B+s*L)*Q,t[14]=(v*M-g*T-b*S)*Q,t[15]=(c*T-d*M+f*S)*Q,t):null}function SSe(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],d=e[9],f=e[10],m=e[11],g=e[12],v=e[13],b=e[14],_=e[15];return t[0]=a*(f*_-m*b)-d*(l*_-u*b)+v*(l*m-u*f),t[1]=-(r*(f*_-m*b)-d*(s*_-n*b)+v*(s*m-n*f)),t[2]=r*(l*_-u*b)-a*(s*_-n*b)+v*(s*u-n*l),t[3]=-(r*(l*m-u*f)-a*(s*m-n*f)+d*(s*u-n*l)),t[4]=-(o*(f*_-m*b)-c*(l*_-u*b)+g*(l*m-u*f)),t[5]=i*(f*_-m*b)-c*(s*_-n*b)+g*(s*m-n*f),t[6]=-(i*(l*_-u*b)-o*(s*_-n*b)+g*(s*u-n*l)),t[7]=i*(l*m-u*f)-o*(s*m-n*f)+c*(s*u-n*l),t[8]=o*(d*_-m*v)-c*(a*_-u*v)+g*(a*m-u*d),t[9]=-(i*(d*_-m*v)-c*(r*_-n*v)+g*(r*m-n*d)),t[10]=i*(a*_-u*v)-o*(r*_-n*v)+g*(r*u-n*a),t[11]=-(i*(a*m-u*d)-o*(r*m-n*d)+c*(r*u-n*a)),t[12]=-(o*(d*b-f*v)-c*(a*b-l*v)+g*(a*f-l*d)),t[13]=i*(d*b-f*v)-c*(r*b-s*v)+g*(r*f-s*d),t[14]=-(i*(a*b-l*v)-o*(r*b-s*v)+g*(r*l-s*a)),t[15]=i*(a*f-l*d)-o*(r*f-s*d)+c*(r*l-s*a),t}function ESe(t){const e=t[0],i=t[1],r=t[2],s=t[3],n=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],d=t[10],f=t[11],m=t[12],g=t[13],v=t[14],b=t[15];return(e*o-i*n)*(d*b-f*v)-(e*a-r*n)*(c*b-f*g)+(e*l-s*n)*(c*v-d*g)+(i*a-r*o)*(u*b-f*m)-(i*l-s*o)*(u*v-d*m)+(r*l-s*a)*(u*g-c*m)}function die(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],u=e[6],c=e[7],d=e[8],f=e[9],m=e[10],g=e[11],v=e[12],b=e[13],_=e[14],S=e[15];let M=i[0],x=i[1],T=i[2],I=i[3];return t[0]=M*r+x*a+T*d+I*v,t[1]=M*s+x*l+T*f+I*b,t[2]=M*n+x*u+T*m+I*_,t[3]=M*o+x*c+T*g+I*S,M=i[4],x=i[5],T=i[6],I=i[7],t[4]=M*r+x*a+T*d+I*v,t[5]=M*s+x*l+T*f+I*b,t[6]=M*n+x*u+T*m+I*_,t[7]=M*o+x*c+T*g+I*S,M=i[8],x=i[9],T=i[10],I=i[11],t[8]=M*r+x*a+T*d+I*v,t[9]=M*s+x*l+T*f+I*b,t[10]=M*n+x*u+T*m+I*_,t[11]=M*o+x*c+T*g+I*S,M=i[12],x=i[13],T=i[14],I=i[15],t[12]=M*r+x*a+T*d+I*v,t[13]=M*s+x*l+T*f+I*b,t[14]=M*n+x*u+T*m+I*_,t[15]=M*o+x*c+T*g+I*S,t}function TSe(t,e,i){const r=i[0],s=i[1],n=i[2];if(e===t)t[12]=e[0]*r+e[4]*s+e[8]*n+e[12],t[13]=e[1]*r+e[5]*s+e[9]*n+e[13],t[14]=e[2]*r+e[6]*s+e[10]*n+e[14],t[15]=e[3]*r+e[7]*s+e[11]*n+e[15];else{const o=e[0],a=e[1],l=e[2],u=e[3],c=e[4],d=e[5],f=e[6],m=e[7],g=e[8],v=e[9],b=e[10],_=e[11];t[0]=o,t[1]=a,t[2]=l,t[3]=u,t[4]=c,t[5]=d,t[6]=f,t[7]=m,t[8]=g,t[9]=v,t[10]=b,t[11]=_,t[12]=o*r+c*s+g*n+e[12],t[13]=a*r+d*s+v*n+e[13],t[14]=l*r+f*s+b*n+e[14],t[15]=u*r+m*s+_*n+e[15]}return t}function ISe(t,e,i){const r=i[0],s=i[1],n=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function MSe(t,e,i,r){let s,n,o,a,l,u,c,d,f,m,g,v,b,_,S,M,x,T,I,$,L,B,z,H,J=r[0],K=r[1],Q=r[2],y=Math.sqrt(J*J+K*K+Q*Q);return y<$u()?null:(y=1/y,J*=y,K*=y,Q*=y,s=Math.sin(i),n=Math.cos(i),o=1-n,a=e[0],l=e[1],u=e[2],c=e[3],d=e[4],f=e[5],m=e[6],g=e[7],v=e[8],b=e[9],_=e[10],S=e[11],M=J*J*o+n,x=K*J*o+Q*s,T=Q*J*o-K*s,I=J*K*o-Q*s,$=K*K*o+n,L=Q*K*o+J*s,B=J*Q*o+K*s,z=K*Q*o-J*s,H=Q*Q*o+n,t[0]=a*M+d*x+v*T,t[1]=l*M+f*x+b*T,t[2]=u*M+m*x+_*T,t[3]=c*M+g*x+S*T,t[4]=a*I+d*$+v*L,t[5]=l*I+f*$+b*L,t[6]=u*I+m*$+_*L,t[7]=c*I+g*$+S*L,t[8]=a*B+d*z+v*H,t[9]=l*B+f*z+b*H,t[10]=u*B+m*z+_*H,t[11]=c*B+g*z+S*H,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ASe(t,e,i){const r=Math.sin(i),s=Math.cos(i),n=e[4],o=e[5],a=e[6],l=e[7],u=e[8],c=e[9],d=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=n*s+u*r,t[5]=o*s+c*r,t[6]=a*s+d*r,t[7]=l*s+f*r,t[8]=u*s-n*r,t[9]=c*s-o*r,t[10]=d*s-a*r,t[11]=f*s-l*r,t}function CSe(t,e,i){const r=Math.sin(i),s=Math.cos(i),n=e[0],o=e[1],a=e[2],l=e[3],u=e[8],c=e[9],d=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*s-u*r,t[1]=o*s-c*r,t[2]=a*s-d*r,t[3]=l*s-f*r,t[8]=n*r+u*s,t[9]=o*r+c*s,t[10]=a*r+d*s,t[11]=l*r+f*s,t}function $Se(t,e,i){const r=Math.sin(i),s=Math.cos(i),n=e[0],o=e[1],a=e[2],l=e[3],u=e[4],c=e[5],d=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*s+u*r,t[1]=o*s+c*r,t[2]=a*s+d*r,t[3]=l*s+f*r,t[4]=u*s-n*r,t[5]=c*s-o*r,t[6]=d*s-a*r,t[7]=f*s-l*r,t}function pie(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function OSe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function RSe(t,e,i){if(e===0)return V3(t);let r,s,n,o=i[0],a=i[1],l=i[2],u=Math.sqrt(o*o+a*a+l*l);return u<$u()?null:(u=1/u,o*=u,a*=u,l*=u,r=Math.sin(e),s=Math.cos(e),n=1-s,t[0]=o*o*n+s,t[1]=a*o*n+l*r,t[2]=l*o*n-a*r,t[3]=0,t[4]=o*a*n-l*r,t[5]=a*a*n+s,t[6]=l*a*n+o*r,t[7]=0,t[8]=o*l*n+a*r,t[9]=a*l*n-o*r,t[10]=l*l*n+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function kSe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function LSe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function PSe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function fie(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=r+r,l=s+s,u=n+n,c=r*a,d=r*l,f=r*u,m=s*l,g=s*u,v=n*u,b=o*a,_=o*l,S=o*u;return t[0]=1-(m+v),t[1]=d+S,t[2]=f-_,t[3]=0,t[4]=d-S,t[5]=1-(c+v),t[6]=g+b,t[7]=0,t[8]=f+_,t[9]=g-b,t[10]=1-(c+m),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function NSe(t,e){const i=FSe,r=-e[0],s=-e[1],n=-e[2],o=e[3],a=e[4],l=e[5],u=e[6],c=e[7],d=r*r+s*s+n*n+o*o;return d>0?(i[0]=2*(a*o+c*r+l*n-u*s)/d,i[1]=2*(l*o+c*s+u*r-a*n)/d,i[2]=2*(u*o+c*n+a*s-l*r)/d):(i[0]=2*(a*o+c*r+l*n-u*s),i[1]=2*(l*o+c*s+u*r-a*n),i[2]=2*(u*o+c*n+a*s-l*r)),fie(t,e,i),t}const FSe=Va();function DSe(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function jSe(t,e){const i=e[0],r=e[1],s=e[2],n=e[4],o=e[5],a=e[6],l=e[8],u=e[9],c=e[10];return t[0]=Math.sqrt(i*i+r*r+s*s),t[1]=Math.sqrt(n*n+o*o+a*a),t[2]=Math.sqrt(l*l+u*u+c*c),t}function USe(t,e){const i=e[0]+e[5]+e[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function VSe(t,e,i,r){const s=e[0],n=e[1],o=e[2],a=e[3],l=s+s,u=n+n,c=o+o,d=s*l,f=s*u,m=s*c,g=n*u,v=n*c,b=o*c,_=a*l,S=a*u,M=a*c,x=r[0],T=r[1],I=r[2];return t[0]=(1-(g+b))*x,t[1]=(f+M)*x,t[2]=(m-S)*x,t[3]=0,t[4]=(f-M)*T,t[5]=(1-(d+b))*T,t[6]=(v+_)*T,t[7]=0,t[8]=(m+S)*I,t[9]=(v-_)*I,t[10]=(1-(d+g))*I,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function BSe(t,e,i,r,s){const n=e[0],o=e[1],a=e[2],l=e[3],u=n+n,c=o+o,d=a+a,f=n*u,m=n*c,g=n*d,v=o*c,b=o*d,_=a*d,S=l*u,M=l*c,x=l*d,T=r[0],I=r[1],$=r[2],L=s[0],B=s[1],z=s[2],H=(1-(v+_))*T,J=(m+x)*T,K=(g-M)*T,Q=(m-x)*I,y=(1-(f+_))*I,A=(b+S)*I,N=(g+M)*$,D=(b-S)*$,ne=(1-(f+v))*$;return t[0]=H,t[1]=J,t[2]=K,t[3]=0,t[4]=Q,t[5]=y,t[6]=A,t[7]=0,t[8]=N,t[9]=D,t[10]=ne,t[11]=0,t[12]=i[0]+L-(H*L+Q*B+N*z),t[13]=i[1]+B-(J*L+y*B+D*z),t[14]=i[2]+z-(K*L+A*B+ne*z),t[15]=1,t}function zSe(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=i+i,a=r+r,l=s+s,u=i*o,c=r*o,d=r*a,f=s*o,m=s*a,g=s*l,v=n*o,b=n*a,_=n*l;return t[0]=1-d-g,t[1]=c+_,t[2]=f-b,t[3]=0,t[4]=c-_,t[5]=1-u-g,t[6]=m+v,t[7]=0,t[8]=f+b,t[9]=m-v,t[10]=1-u-d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function GSe(t,e,i,r,s,n,o){const a=1/(i-e),l=1/(s-r),u=1/(n-o);return t[0]=2*n*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*n*l,t[6]=0,t[7]=0,t[8]=(i+e)*a,t[9]=(s+r)*l,t[10]=(o+n)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*n*2*u,t[15]=0,t}function qSe(t,e,i,r,s){const n=1/Math.tan(e/2);let o;return t[0]=n/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,s!=null&&s!==1/0?(o=1/(r-s),t[10]=(s+r)*o,t[14]=2*s*r*o):(t[10]=-1,t[14]=-2*r),t}function HSe(t,e,i,r){const s=Math.tan(e.upDegrees*Math.PI/180),n=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+a),u=2/(s+n);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(o-a)*l*.5,t[9]=(s-n)*u*.5,t[10]=r/(i-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*i/(i-r),t[15]=0,t}function WSe(t,e,i,r,s,n,o){const a=1/(e-i),l=1/(r-s),u=1/(n-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+i)*a,t[13]=(s+r)*l,t[14]=(o+n)*u,t[15]=1,t}function JSe(t,e,i,r){let s,n,o,a,l,u,c,d,f,m;const g=e[0],v=e[1],b=e[2],_=r[0],S=r[1],M=r[2],x=i[0],T=i[1],I=i[2],$=$u();return Math.abs(g-x)<$&&Math.abs(v-T)<$&&Math.abs(b-I)<$?V3(t):(c=g-x,d=v-T,f=b-I,m=1/Math.sqrt(c*c+d*d+f*f),c*=m,d*=m,f*=m,s=S*f-M*d,n=M*c-_*f,o=_*d-S*c,m=Math.sqrt(s*s+n*n+o*o),m?(m=1/m,s*=m,n*=m,o*=m):(s=0,n=0,o=0),a=d*o-f*n,l=f*s-c*o,u=c*n-d*s,m=Math.sqrt(a*a+l*l+u*u),m?(m=1/m,a*=m,l*=m,u*=m):(a=0,l=0,u=0),t[0]=s,t[1]=a,t[2]=c,t[3]=0,t[4]=n,t[5]=l,t[6]=d,t[7]=0,t[8]=o,t[9]=u,t[10]=f,t[11]=0,t[12]=-(s*g+n*v+o*b),t[13]=-(a*g+l*v+u*b),t[14]=-(c*g+d*v+f*b),t[15]=1,t)}function ZSe(t,e,i,r){const s=e[0],n=e[1],o=e[2],a=r[0],l=r[1],u=r[2];let c=s-i[0],d=n-i[1],f=o-i[2],m=c*c+d*d+f*f;m>0&&(m=1/Math.sqrt(m),c*=m,d*=m,f*=m);let g=l*f-u*d,v=u*c-a*f,b=a*d-l*c;return m=g*g+v*v+b*b,m>0&&(m=1/Math.sqrt(m),g*=m,v*=m,b*=m),t[0]=g,t[1]=v,t[2]=b,t[3]=0,t[4]=d*b-f*v,t[5]=f*g-c*b,t[6]=c*v-d*g,t[7]=0,t[8]=c,t[9]=d,t[10]=f,t[11]=0,t[12]=s,t[13]=n,t[14]=o,t[15]=1,t}function YSe(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function KSe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function QSe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function mie(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function XSe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function e3e(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t[9]=e[9]+i[9]*r,t[10]=e[10]+i[10]*r,t[11]=e[11]+i[11]*r,t[12]=e[12]+i[12]*r,t[13]=e[13]+i[13]*r,t[14]=e[14]+i[14]*r,t[15]=e[15]+i[15]*r,t}function t3e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function i3e(t,e){if(t===e)return!0;const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],d=t[9],f=t[10],m=t[11],g=t[12],v=t[13],b=t[14],_=t[15],S=e[0],M=e[1],x=e[2],T=e[3],I=e[4],$=e[5],L=e[6],B=e[7],z=e[8],H=e[9],J=e[10],K=e[11],Q=e[12],y=e[13],A=e[14],N=e[15],D=$u();return Math.abs(i-S)<=D*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(r-M)<=D*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(s-x)<=D*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(n-T)<=D*Math.max(1,Math.abs(n),Math.abs(T))&&Math.abs(o-I)<=D*Math.max(1,Math.abs(o),Math.abs(I))&&Math.abs(a-$)<=D*Math.max(1,Math.abs(a),Math.abs($))&&Math.abs(l-L)<=D*Math.max(1,Math.abs(l),Math.abs(L))&&Math.abs(u-B)<=D*Math.max(1,Math.abs(u),Math.abs(B))&&Math.abs(c-z)<=D*Math.max(1,Math.abs(c),Math.abs(z))&&Math.abs(d-H)<=D*Math.max(1,Math.abs(d),Math.abs(H))&&Math.abs(f-J)<=D*Math.max(1,Math.abs(f),Math.abs(J))&&Math.abs(m-K)<=D*Math.max(1,Math.abs(m),Math.abs(K))&&Math.abs(g-Q)<=D*Math.max(1,Math.abs(g),Math.abs(Q))&&Math.abs(v-y)<=D*Math.max(1,Math.abs(v),Math.abs(y))&&Math.abs(b-A)<=D*Math.max(1,Math.abs(b),Math.abs(A))&&Math.abs(_-N)<=D*Math.max(1,Math.abs(_),Math.abs(N))}function r3e(t){const e=$u(),i=t[0],r=t[1],s=t[2],n=t[4],o=t[5],a=t[6],l=t[8],u=t[9],c=t[10];return Math.abs(1-(i*i+n*n+l*l))<=e&&Math.abs(1-(r*r+o*o+u*u))<=e&&Math.abs(1-(s*s+a*a+c*c))<=e}function s3e(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const n3e=die,o3e=mie;Object.freeze(Object.defineProperty({__proto__:null,add:QSe,adjoint:SSe,copy:_Se,determinant:ESe,equals:i3e,exactEquals:t3e,frob:KSe,fromQuat:zSe,fromQuat2:NSe,fromRotation:RSe,fromRotationTranslation:fie,fromRotationTranslationScale:VSe,fromRotationTranslationScaleOrigin:BSe,fromScaling:OSe,fromTranslation:pie,fromXRotation:kSe,fromYRotation:LSe,fromZRotation:PSe,frustum:GSe,getRotation:USe,getScaling:jSe,getTranslation:DSe,hasIdentityRotation:s3e,identity:V3,invert:hie,invertOrIdentity:xSe,isOrthoNormal:r3e,lookAt:JSe,mul:n3e,multiply:die,multiplyScalar:XSe,multiplyScalarAndAdd:e3e,ortho:WSe,perspective:qSe,perspectiveFromFieldOfView:HSe,rotate:MSe,rotateX:ASe,rotateY:CSe,rotateZ:$Se,scale:ISe,set:Km,str:YSe,sub:o3e,subtract:mie,targetTo:ZSe,translate:TSe,transpose:Mp},Symbol.toStringTag,{value:"Module"}));const a3e=(t,e)=>{const i=Km(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return Mp(i,i)},l3e=(t,e)=>{const i=Km(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return Mp(i,i)},u3e=(t,e)=>{const i=1-e,r=Km(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return Mp(r,r)},c3e=(t,e)=>{const i=Math.sin(e*Math.PI/180),r=Math.cos(e*Math.PI/180),s=Km(t,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return Mp(s,s)},h3e=(t,e)=>{const i=1-2*e,r=Km(t,i,0,0,e,0,i,0,e,0,0,i,e,0,0,0,1);return Mp(r,r)},d3e=(t,e)=>{const i=Km(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return Mp(i,i)},p3e=(t,e)=>{const i=1-e,r=Km(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return Mp(r,r)};let yie=class gie{constructor(e,i,r){this.strength=e,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(e,i,r){this.strength=ba(e.strength,i.strength,r),this.radius=ba(e.radius,i.radius,r),this.threshold=ba(e.threshold,i.threshold,r)}clone(){return new gie(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:Px(this.radius),strength:this.strength,threshold:this.threshold}}},vie=class bie{constructor(e){this.radius=e,this.type="blur"}interpolate(e,i,r){this.radius=Math.round(ba(e.radius,i.radius,r))}clone(){return new bie(this.radius)}toJSON(){return{type:"blur",radius:Px(this.radius)}}},y8=class wie{constructor(e,i){this.type=e,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.amount=ba(e.amount,i.amount,r),this._updateMatrix()}clone(){return new wie(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||dC();switch(this.type){case"brightness":this._colorMatrix=a3e(e,this.amount);break;case"contrast":this._colorMatrix=l3e(e,this.amount);break;case"grayscale":this._colorMatrix=u3e(e,this.amount);break;case"invert":this._colorMatrix=h3e(e,this.amount);break;case"saturate":this._colorMatrix=d3e(e,this.amount);break;case"sepia":this._colorMatrix=p3e(e,this.amount)}}},_ie=class xie{constructor(e,i,r,s){this.offsetX=e,this.offsetY=i,this.blurRadius=r,this.color=s,this.type="drop-shadow"}interpolate(e,i,r){this.offsetX=ba(e.offsetX,i.offsetX,r),this.offsetY=ba(e.offsetY,i.offsetY,r),this.blurRadius=ba(e.blurRadius,i.blurRadius,r),this.color[0]=Math.round(ba(e.color[0],i.color[0],r)),this.color[1]=Math.round(ba(e.color[1],i.color[1],r)),this.color[2]=Math.round(ba(e.color[2],i.color[2],r)),this.color[3]=ba(e.color[3],i.color[3],r)}clone(){return new xie(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:Px(this.offsetX),yoffset:Px(this.offsetY),blurRadius:Px(this.blurRadius),color:e}}},Sie=class Eie{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.angle=ba(e.angle,i.angle,r),this._updateMatrix()}clone(){return new Eie(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||dC();this._colorMatrix=c3e(e,this.angle)}},Tie=class Iie{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,i,r){this.amount=ba(e.amount,i.amount,r)}clone(){return new Iie(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function ba(t,e,i){return t+(e-t)*i}function Px(t){return Math.round(1e3*dp(t))/1e3}function f3e(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new y8(t.type,0);case"saturate":case"brightness":case"contrast":return new y8(t.type,1);case"opacity":return new Tie(1);case"hue-rotate":return new Sie(0);case"blur":return new vie(0);case"drop-shadow":return new _ie(0,0,0,[...y9("transparent")]);case"bloom":return new yie(0,0,1)}}function m3e(t,e){const i=t.length>e.length?t:e;return(t.length>e.length?e:t).every((r,s)=>r.type===i[s].type)}function y3e(t,e){const i=t.length>e.length?t:e,r=t.length>e.length?e:t;for(let s=r.length;s<i.length;s++)r.push(f3e(i[s]))}function g3e(t){const e=t[0];return!!e&&"type"in e}var sz,nz,g8={};function Mie(t){if(!t||t.length===0)return null;if(typeof t=="string"){const i=oz(t);return i&&i.length!==0?i:null}const e=t.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new Ce("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:oz(i.value)}});e.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<e.length-1;i++){if(!m3e(e[i].effects,e[i+1].effects))throw new Ce("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[i].effects,b:e[i+1].effects});y3e(e[i].effects,e[i+1].effects)}return e.sort((i,r)=>r.scale-i.scale),e}function oz(t){let e;if(!t)return[];try{e=g8.parse(t)}catch(i){throw new Ce("effect:invalid-syntax","Invalid effect syntax",{value:t,error:i})}return e.map(i=>v3e(i))}function v3e(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return b3e(t);case"opacity":return w3e(t);case"hue-rotate":return _3e(t);case"blur":return x3e(t);case"drop-shadow":return S3e(t);case"bloom":return E3e(t)}}catch(e){throw e.details.filter=t,e}throw new Ce("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function b3e(t){let e=1;return Jw(t.parameters,1),t.parameters.length===1&&(e=oc(t.parameters[0])),new y8(t.name,e)}function w3e(t){let e=1;return Jw(t.parameters,1),t.parameters.length===1&&(e=oc(t.parameters[0])),new Tie(e)}function _3e(t){let e=0;return Jw(t.parameters,1),t.parameters.length===1&&(e=$3e(t.parameters[0])),new Sie(e)}function x3e(t){let e=0;return Jw(t.parameters,1),t.parameters.length===1&&(e=fD(t.parameters[0]),B3(e,t.parameters[0])),new vie(e)}function S3e(t){const e=[];let i=null;for(const r of t.parameters)if(r.type==="color"){if(e.length&&Object.freeze(e),i)throw new Ce("effect:type-error","Accepts only one color",{});i=O3e(r)}else{const s=fD(r);if(Object.isFrozen(e))throw new Ce("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(s),e.length===3&&B3(s,r)}if(e.length<2||e.length>3)throw new Ce("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new _ie(e[0],e[1],e[2]||0,i||Aie("black"))}function E3e(t){let e=1,i=0,r=0;return Jw(t.parameters,3),t.parameters[0]&&(e=oc(t.parameters[0])),t.parameters[1]&&(i=fD(t.parameters[1]),B3(i,t.parameters[1])),t.parameters[2]&&(r=oc(t.parameters[2])),new yie(e,i,r)}function Jw(t,e){if(t.length>e)throw new Ce("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function pC(t){if(t.type==="color")return"<color>";if(t.unit){if(pD[t.unit])return"<length>";if(dD[t.unit])return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function B3(t,e){if(t<0)throw new Ce("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function T3e(t){if(t.type!=="quantity"||t.unit!==null)throw new Ce("effect:type-error",`Expected <double>, Actual: ${pC(t)}`,{term:t})}function I3e(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new Ce("effect:type-error",`Expected <double> or <percentage>, Actual: ${pC(t)}`,{term:t})}nz=function(){function t(s,n){function o(){this.constructor=s}o.prototype=n.prototype,s.prototype=new o}function e(s,n,o,a){var l=Error.call(this,s);return Object.setPrototypeOf&&Object.setPrototypeOf(l,e.prototype),l.expected=n,l.found=o,l.location=a,l.name="SyntaxError",l}function i(s,n,o){return o=o||" ",s.length>n?s:(n-=s.length,s+(o+=o.repeat(n)).slice(0,n))}function r(s,n){var o,a={},l=(n=n!==void 0?n:{}).grammarSource,u={start:wt},c=wt,d="none",f=")",m=",",g="(",v="%",b="px",_="cm",S="mm",M="in",x="pt",T="pc",I="deg",$="rad",L="grad",B="turn",z="#",H=".",J="e",K=/^[ \t\n\r]/,Q=/^[a-z\-]/,y=/^[0-9a-fA-F]/,A=/^[+\-]/,N=/^[0-9]/,D=Fn("none"),ne=vr("none",!1),q=vr(")",!1),he=vr(",",!1),te=Fn("whitespace"),me=Oc([" ","	",`
`,"\r"],!1,!1),ve=Fn("function"),_e=vr("(",!1),Se=Fn("identifier"),Oe=Oc([["a","z"],"-"],!1,!1),Te=Fn("percentage"),we=vr("%",!1),Ie=Fn("length"),Ae=vr("px",!1),W=vr("cm",!1),V=vr("mm",!1),j=vr("in",!1),se=vr("pt",!1),ye=vr("pc",!1),ae=Fn("angle"),U=vr("deg",!1),le=vr("rad",!1),re=vr("grad",!1),k=vr("turn",!1),O=Fn("number"),C=Fn("color"),G=vr("#",!1),Z=Oc([["0","9"],["a","f"],["A","F"]],!1,!1),F=Oc(["+","-"],!1,!1),ie=Oc([["0","9"]],!1,!1),ge=vr(".",!1),xe=vr("e",!1),fe=function(){return[]},ze=function($e,Qe){return{type:"function",name:$e,parameters:Qe||[]}},He=function($e,Qe){return Qe.length>0?Lp($e,Qe,3):[$e]},et=function($e){return{type:"quantity",value:$e.value,unit:$e.unit}},Ve=function($e){return{type:"color",colorType:$e.type,value:$e.value}},be=function($e){return $e},ke=function(){return $o()},Ge=function($e){return{value:$e,unit:"%"}},ut=function($e){return{value:$e,unit:"px"}},pt=function($e){return{value:$e,unit:"cm"}},vt=function($e){return{value:$e,unit:"mm"}},kt=function($e){return{value:$e,unit:"in"}},dt=function($e){return{value:$e,unit:"pt"}},Wt=function($e){return{value:$e,unit:"pc"}},Gt=function($e){return{value:$e,unit:"deg"}},Ti=function($e){return{value:$e,unit:"rad"}},kr=function($e){return{value:$e,unit:"grad"}},_n=function($e){return{value:$e,unit:"turn"}},Wa=function($e){return{value:$e,unit:null}},Ja=function(){return{type:"hex",value:$o()}},Za=function($e){return{type:"function",value:$e}},jl=function(){return{type:"named",value:$o()}},Rp=function(){return parseFloat($o())},Be=0,Hi=0,ta=[{line:1,column:1}],Pi=0,xn=[],yt=0;if("startRule"in n){if(!(n.startRule in u))throw new Error(`Can't start parsing from rule "`+n.startRule+'".');c=u[n.startRule]}function $o(){return s.substring(Hi,Be)}function vr($e,Qe){return{type:"literal",text:$e,ignoreCase:Qe}}function Oc($e,Qe,ot){return{type:"class",parts:$e,inverted:Qe,ignoreCase:ot}}function Ru(){return{type:"end"}}function Fn($e){return{type:"other",description:$e}}function lt($e){var Qe,ot=ta[$e];if(ot)return ot;for(Qe=$e-1;!ta[Qe];)Qe--;for(ot={line:(ot=ta[Qe]).line,column:ot.column};Qe<$e;)s.charCodeAt(Qe)===10?(ot.line++,ot.column=1):ot.column++,Qe++;return ta[$e]=ot,ot}function b1($e,Qe){var ot=lt($e),fi=lt(Qe);return{source:l,start:{offset:$e,line:ot.line,column:ot.column},end:{offset:Qe,line:fi.line,column:fi.column}}}function ni($e){Be<Pi||(Be>Pi&&(Pi=Be,xn=[]),xn.push($e))}function f_($e,Qe,ot){return new e(e.buildMessage($e,Qe),$e,Qe,ot)}function wt(){var $e;return($e=Es())===a&&($e=ia()),$e}function Es(){var $e,Qe;return yt++,$e=Be,Di(),s.substr(Be,4)===d?(Qe=d,Be+=4):(Qe=a,yt===0&&ni(ne)),Qe!==a?(Di(),Hi=$e,$e=fe()):(Be=$e,$e=a),yt--,$e===a&&yt===0&&ni(D),$e}function ia(){var $e,Qe;if($e=[],(Qe=Ni())!==a)for(;Qe!==a;)$e.push(Qe),Qe=Ni();else $e=a;return $e}function Ni(){var $e,Qe,ot,fi;return $e=Be,Di(),(Qe=w1())!==a?(Di(),(ot=Xh())===a&&(ot=null),Di(),s.charCodeAt(Be)===41?(fi=f,Be++):(fi=a,yt===0&&ni(q)),fi!==a?(Di(),Hi=$e,$e=ze(Qe,ot)):(Be=$e,$e=a)):(Be=$e,$e=a),$e}function Xh(){var $e,Qe,ot,fi,Ts,mr,Lr,Ul;if($e=Be,(Qe=br())!==a){for(ot=[],fi=Be,Ts=Di(),s.charCodeAt(Be)===44?(mr=m,Be++):(mr=a,yt===0&&ni(he)),mr===a&&(mr=null),Lr=Di(),(Ul=br())!==a?fi=Ts=[Ts,mr,Lr,Ul]:(Be=fi,fi=a);fi!==a;)ot.push(fi),fi=Be,Ts=Di(),s.charCodeAt(Be)===44?(mr=m,Be++):(mr=a,yt===0&&ni(he)),mr===a&&(mr=null),Lr=Di(),(Ul=br())!==a?fi=Ts=[Ts,mr,Lr,Ul]:(Be=fi,fi=a);Hi=$e,$e=He(Qe,ot)}else Be=$e,$e=a;return $e}function br(){var $e,Qe;return $e=Be,(Qe=hy())===a&&(Qe=kc())===a&&(Qe=_1())===a&&(Qe=x1()),Qe!==a&&(Hi=$e,Qe=et(Qe)),($e=Qe)===a&&($e=Be,(Qe=kp())!==a&&(Hi=$e,Qe=Ve(Qe)),$e=Qe),$e}function Di(){var $e,Qe;for(yt++,$e=[],K.test(s.charAt(Be))?(Qe=s.charAt(Be),Be++):(Qe=a,yt===0&&ni(me));Qe!==a;)$e.push(Qe),K.test(s.charAt(Be))?(Qe=s.charAt(Be),Be++):(Qe=a,yt===0&&ni(me));return yt--,Qe=a,yt===0&&ni(te),$e}function w1(){var $e,Qe,ot;return yt++,$e=Be,(Qe=Rc())!==a?(s.charCodeAt(Be)===40?(ot=g,Be++):(ot=a,yt===0&&ni(_e)),ot!==a?(Hi=$e,$e=be(Qe)):(Be=$e,$e=a)):(Be=$e,$e=a),yt--,$e===a&&(Qe=a,yt===0&&ni(ve)),$e}function Rc(){var $e,Qe,ot;if(yt++,$e=Be,Qe=[],Q.test(s.charAt(Be))?(ot=s.charAt(Be),Be++):(ot=a,yt===0&&ni(Oe)),ot!==a)for(;ot!==a;)Qe.push(ot),Q.test(s.charAt(Be))?(ot=s.charAt(Be),Be++):(ot=a,yt===0&&ni(Oe));else Qe=a;return Qe!==a&&(Hi=$e,Qe=ke()),yt--,($e=Qe)===a&&(Qe=a,yt===0&&ni(Se)),$e}function hy(){var $e,Qe,ot;return yt++,$e=Be,Di(),(Qe=Dn())!==a?(s.charCodeAt(Be)===37?(ot=v,Be++):(ot=a,yt===0&&ni(we)),ot!==a?(Hi=$e,$e=Ge(Qe)):(Be=$e,$e=a)):(Be=$e,$e=a),yt--,$e===a&&yt===0&&ni(Te),$e}function kc(){var $e,Qe,ot;return yt++,$e=Be,Di(),(Qe=Dn())!==a?(s.substr(Be,2)===b?(ot=b,Be+=2):(ot=a,yt===0&&ni(Ae)),ot!==a?(Hi=$e,$e=ut(Qe)):(Be=$e,$e=a)):(Be=$e,$e=a),$e===a&&($e=Be,Di(),(Qe=Dn())!==a?(s.substr(Be,2)===_?(ot=_,Be+=2):(ot=a,yt===0&&ni(W)),ot!==a?(Hi=$e,$e=pt(Qe)):(Be=$e,$e=a)):(Be=$e,$e=a),$e===a&&($e=Be,Di(),(Qe=Dn())!==a?(s.substr(Be,2)===S?(ot=S,Be+=2):(ot=a,yt===0&&ni(V)),ot!==a?(Hi=$e,$e=vt(Qe)):(Be=$e,$e=a)):(Be=$e,$e=a),$e===a&&($e=Be,Di(),(Qe=Dn())!==a?(s.substr(Be,2)===M?(ot=M,Be+=2):(ot=a,yt===0&&ni(j)),ot!==a?(Hi=$e,$e=kt(Qe)):(Be=$e,$e=a)):(Be=$e,$e=a),$e===a&&($e=Be,Di(),(Qe=Dn())!==a?(s.substr(Be,2)===x?(ot=x,Be+=2):(ot=a,yt===0&&ni(se)),ot!==a?(Hi=$e,$e=dt(Qe)):(Be=$e,$e=a)):(Be=$e,$e=a),$e===a&&($e=Be,Di(),(Qe=Dn())!==a?(s.substr(Be,2)===T?(ot=T,Be+=2):(ot=a,yt===0&&ni(ye)),ot!==a?(Hi=$e,$e=Wt(Qe)):(Be=$e,$e=a)):(Be=$e,$e=a)))))),yt--,$e===a&&yt===0&&ni(Ie),$e}function _1(){var $e,Qe,ot;return yt++,$e=Be,(Qe=Dn())!==a?(s.substr(Be,3)===I?(ot=I,Be+=3):(ot=a,yt===0&&ni(U)),ot!==a?(Hi=$e,$e=Gt(Qe)):(Be=$e,$e=a)):(Be=$e,$e=a),$e===a&&($e=Be,(Qe=Dn())!==a?(s.substr(Be,3)===$?(ot=$,Be+=3):(ot=a,yt===0&&ni(le)),ot!==a?(Hi=$e,$e=Ti(Qe)):(Be=$e,$e=a)):(Be=$e,$e=a),$e===a&&($e=Be,(Qe=Dn())!==a?(s.substr(Be,4)===L?(ot=L,Be+=4):(ot=a,yt===0&&ni(re)),ot!==a?(Hi=$e,$e=kr(Qe)):(Be=$e,$e=a)):(Be=$e,$e=a),$e===a&&($e=Be,(Qe=Dn())!==a?(s.substr(Be,4)===B?(ot=B,Be+=4):(ot=a,yt===0&&ni(k)),ot!==a?(Hi=$e,$e=_n(Qe)):(Be=$e,$e=a)):(Be=$e,$e=a)))),yt--,$e===a&&(Qe=a,yt===0&&ni(ae)),$e}function x1(){var $e,Qe;return yt++,$e=Be,Di(),(Qe=Dn())!==a?(Hi=$e,$e=Wa(Qe)):(Be=$e,$e=a),yt--,$e===a&&yt===0&&ni(O),$e}function kp(){var $e,Qe,ot,fi;if(yt++,$e=Be,s.charCodeAt(Be)===35?(Qe=z,Be++):(Qe=a,yt===0&&ni(G)),Qe!==a){if(ot=[],y.test(s.charAt(Be))?(fi=s.charAt(Be),Be++):(fi=a,yt===0&&ni(Z)),fi!==a)for(;fi!==a;)ot.push(fi),y.test(s.charAt(Be))?(fi=s.charAt(Be),Be++):(fi=a,yt===0&&ni(Z));else ot=a;ot!==a?(Hi=$e,$e=Ja()):(Be=$e,$e=a)}else Be=$e,$e=a;return $e===a&&($e=Be,(Qe=Ni())!==a&&(Hi=$e,Qe=Za(Qe)),($e=Qe)===a&&($e=Be,(Qe=Rc())!==a&&(Hi=$e,Qe=jl()),$e=Qe)),yt--,$e===a&&(Qe=a,yt===0&&ni(C)),$e}function Dn(){var $e,Qe,ot,fi,Ts,mr,Lr;for($e=Be,A.test(s.charAt(Be))?(s.charAt(Be),Be++):yt===0&&ni(F),Qe=Be,ot=[],N.test(s.charAt(Be))?(fi=s.charAt(Be),Be++):(fi=a,yt===0&&ni(ie));fi!==a;)ot.push(fi),N.test(s.charAt(Be))?(fi=s.charAt(Be),Be++):(fi=a,yt===0&&ni(ie));if(s.charCodeAt(Be)===46?(fi=H,Be++):(fi=a,yt===0&&ni(ge)),fi!==a){if(Ts=[],N.test(s.charAt(Be))?(mr=s.charAt(Be),Be++):(mr=a,yt===0&&ni(ie)),mr!==a)for(;mr!==a;)Ts.push(mr),N.test(s.charAt(Be))?(mr=s.charAt(Be),Be++):(mr=a,yt===0&&ni(ie));else Ts=a;Ts!==a?Qe=ot=[ot,fi,Ts]:(Be=Qe,Qe=a)}else Be=Qe,Qe=a;if(Qe===a)if(Qe=[],N.test(s.charAt(Be))?(ot=s.charAt(Be),Be++):(ot=a,yt===0&&ni(ie)),ot!==a)for(;ot!==a;)Qe.push(ot),N.test(s.charAt(Be))?(ot=s.charAt(Be),Be++):(ot=a,yt===0&&ni(ie));else Qe=a;if(Qe!==a){if(ot=Be,s.charCodeAt(Be)===101?(fi=J,Be++):(fi=a,yt===0&&ni(xe)),fi!==a){if(A.test(s.charAt(Be))?(Ts=s.charAt(Be),Be++):(Ts=a,yt===0&&ni(F)),Ts===a&&(Ts=null),mr=[],N.test(s.charAt(Be))?(Lr=s.charAt(Be),Be++):(Lr=a,yt===0&&ni(ie)),Lr!==a)for(;Lr!==a;)mr.push(Lr),N.test(s.charAt(Be))?(Lr=s.charAt(Be),Be++):(Lr=a,yt===0&&ni(ie));else mr=a;mr!==a?ot=fi=[fi,Ts,mr]:(Be=ot,ot=a)}else Be=ot,ot=a;ot===a&&(ot=null),Hi=$e,$e=Rp()}else Be=$e,$e=a;return $e}function S1($e,Qe){return $e.map(function(ot){return ot[Qe]})}function Lp($e,Qe,ot){return[$e].concat(S1(Qe,ot))}if((o=c())!==a&&Be===s.length)return o;throw o!==a&&Be<s.length&&ni(Ru()),f_(xn,Pi<s.length?s.charAt(Pi):null,Pi<s.length?b1(Pi,Pi+1):b1(Pi,Pi))}return t(e,Error),e.prototype.format=function(s){var n="Error: "+this.message;if(this.location){var o,a=null;for(o=0;o<s.length;o++)if(s[o].source===this.location.source){a=s[o].text.split(/\r\n|\n|\r/g);break}var l=this.location.start,u=this.location.source+":"+l.line+":"+l.column;if(a){var c=this.location.end,d=i("",l.line.toString().length," "),f=a[l.line-1],m=(l.line===c.line?c.column:f.length+1)-l.column||1;n+=`
 --> `+u+`
`+d+` |
`+l.line+" | "+f+`
`+d+" | "+i("",l.column-1," ")+i("",m,"^")}else n+=`
 at `+u}return n},e.buildMessage=function(s,n){var o={literal:function(m){return'"'+l(m.text)+'"'},class:function(m){var g=m.parts.map(function(v){return Array.isArray(v)?u(v[0])+"-"+u(v[1]):u(v)});return"["+(m.inverted?"^":"")+g.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(m){return m.description}};function a(m){return m.charCodeAt(0).toString(16).toUpperCase()}function l(m){return m.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function u(m){return m.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function c(m){return o[m.type](m)}function d(m){var g,v,b=m.map(c);if(b.sort(),b.length>0){for(g=1,v=1;g<b.length;g++)b[g-1]!==b[g]&&(b[v]=b[g],v++);b.length=v}switch(b.length){case 1:return b[0];case 2:return b[0]+" or "+b[1];default:return b.slice(0,-1).join(", ")+", or "+b[b.length-1]}}function f(m){return m?'"'+l(m)+'"':"end of input"}return"Expected "+d(s)+" but "+f(n)+" found."},{SyntaxError:e,parse:r}},(sz={get exports(){return g8},set exports(t){g8=t}}).exports&&(sz.exports=nz());const dD={deg:1,grad:.9,rad:180/Math.PI,turn:360};function M3e(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&dD[t.unit]!=null))throw new Ce("effect:type-error",`Expected <angle>, Actual: ${pC(t)}`,{term:t})}const pD={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function A3e(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&pD[t.unit]!=null))throw new Ce("effect:type-error",`Expected <length>, Actual: ${pC(t)}`,{term:t})}function oc(t){I3e(t);const e=t.value;return B3(e,t),t.unit==="%"?.01*e:e}function C3e(t){return T3e(t),B3(t.value,t),t.value}function $3e(t){return M3e(t),t.value*dD[t.unit]||0}function fD(t){return A3e(t),t.value*pD[t.unit]||0}function O3e(t){switch(t.colorType){case"hex":return tve(t.value);case"named":return Aie(t.value);case"function":return L3e(t.value)}}function Aie(t){if(!wX(t))throw new Ce("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return eve(t)}const R3e=/^rgba?/i,k3e=/^hsla?/i;function L3e(t){if(Jw(t.parameters,4),R3e.test(t.name))return[oc(t.parameters[0]),oc(t.parameters[1]),oc(t.parameters[2]),t.parameters[3]?oc(t.parameters[3]):1];if(k3e.test(t.name))return _X(C3e(t.parameters[0]),oc(t.parameters[1]),oc(t.parameters[2]),t.parameters[3]?oc(t.parameters[3]):1);throw new Ce("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function mD(t,e,i){try{return N3e(t)}catch(r){i?.messages?.push(r)}return null}function yD(t,e,i,r){try{const s=P3e(t);Io(i,s,e)}catch(s){r.messages&&r.messages.push(s)}}function P3e(t){const e=Mie(t);return e?g3e(e)?e.map(i=>i.toJSON()):e.map(({scale:i,effects:r})=>({scale:i,value:r.map(s=>s.toJSON())})):null}function N3e(t){if(!t||t.length===0)return null;if(F3e(t)){const e=[];for(const i of t)e.push({scale:i.scale,value:az(i.value)});return e}return az(t)}function F3e(t){const e=t[0];return!!e&&"scale"in e}function az(t){if(!t||!t.length)return"";const e=[];for(const i of t){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[ed(i,"amount")];break;case"blur":r=[ed(i,"radius","pt")];break;case"hue-rotate":r=[ed(i,"angle","deg")];break;case"drop-shadow":r=[ed(i,"xoffset","pt"),ed(i,"yoffset","pt"),ed(i,"blurRadius","pt"),D3e(i,"color")];break;case"bloom":r=[ed(i,"strength"),ed(i,"radius","pt"),ed(i,"threshold")]}const s=`${i.type}(${r.filter(Boolean).join(" ")})`;Mie(s),e.push(s)}return e.join(" ")}function ed(t,e,i){if(t[e]==null)throw new Ce("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return i?t[e]+i:""+t[e]}function D3e(t,e){if(t[e]==null)throw new Ce("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const i=t[e];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const lz={read:{reader:mD},write:{allowNull:!0,writer:yD}},a1=t=>{let e=class extends t{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return h([p({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],e.prototype,"blendMode",void 0),h([p({json:{read:!1,write:!1,origins:{"web-map":lz,"portal-item":lz}}})],e.prototype,"effect",void 0),e=h([ce("esri.layers.mixins.BlendLayer")],e),e},fC=t=>{let e=class extends t{constructor(){super(...arguments),this.customParameters=null}};return h([p({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],e.prototype,"customParameters",void 0),e=h([ce("esri.layers.mixins.CustomParametersMixin")],e),e},j3e=new xp.EventEmitter,Cie="esri.layers.mixins.EditBusLayer",$ie=Symbol(Cie);function Sct(t){return t!=null&&typeof t=="object"&&$ie in t}const U3e=t=>{var e;let i=class extends t{constructor(...r){super(...r),this[e]=!0,this.when().then(()=>{this.own([j3e.on("edits",s=>{const n="layer"in s?s.layer:null,o="layer"in s?s.layer?.url:s.serviceUrl,a="layer"in s?s.layer?.layerId:s.layerId,l=s.event;if(n===this||o!==this.url)return;if(a!=null&&this.layerId!=null&&a===this.layerId)return void this.emit("edits",Le(l));const u=l.editedFeatures?.find(({layerId:c})=>c===this.layerId);if(u){const{adds:c,updates:d,deletes:f}=u.editedFeatures,m={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:c?c.map(({attributes:g})=>({objectId:this.objectIdField&&g[this.objectIdField],globalId:this.globalIdField&&g[this.globalIdField]})):[],deletedFeatures:f?f.map(({attributes:g})=>({objectId:this.objectIdField&&g[this.objectIdField],globalId:this.globalIdField&&g[this.globalIdField]})):[],updatedFeatures:d?d.map(({current:{attributes:g}})=>({objectId:this.objectIdField&&g[this.objectIdField],globalId:this.globalIdField&&g[this.globalIdField]})):[],editedFeatures:Le(l.editedFeatures),exceededTransferLimit:!1};this.emit("edits",m)}})])},()=>{})}};return e=$ie,i=h([ce(Cie)],i),i},uz={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},V3e={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function B3e(t,e){const i=new Date(t,e+1,1);return i.setDate(0),i.getDate()}function f0(t,e,i){const r=new Date(t.getTime());if(e&&i){const s=V3e[i],{getter:n,setter:o,multiplier:a}=s;if(i==="months"){const l=B3e(r.getFullYear(),r.getMonth()+e);r.getDate()>l&&r.setDate(l)}r[o](r[n]()+e*a)}return r}function cz(t,e){switch(e){case"milliseconds":return new Date(t.getTime());case"seconds":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds());case"minutes":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes());case"hours":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours());case"days":return new Date(t.getFullYear(),t.getMonth(),t.getDate());case"weeks":return new Date(t.getFullYear(),t.getMonth(),t.getDate()-t.getDay());case"months":return new Date(t.getFullYear(),t.getMonth(),1);case"years":return new Date(t.getFullYear(),0,1);case"decades":return new Date(t.getFullYear()-t.getFullYear()%10,0,1);case"centuries":return new Date(t.getFullYear()-t.getFullYear()%100,0,1);default:return new Date}}function z3e(t,e,i){return t===0?0:t*uz[e]/uz[i]}var Yu;let hl=Yu=class extends Je{static get allTime(){return hz}static get empty(){return G3e}constructor(t){super(t),this.end=null,this.start=null}readEnd(t,e){return e.end!=null?new Date(e.end):null}writeEnd(t,e){e.end=t?t.getTime():null}get isAllTime(){return this.equals(Yu.allTime)}get isEmpty(){return this.equals(Yu.empty)}readStart(t,e){return e.start!=null?new Date(e.start):null}writeStart(t,e){e.start=t?t.getTime():null}clone(){return new Yu({end:this.end,start:this.start})}equals(t){if(!t)return!1;const e=ee(this.start)?this.start.getTime():this.start,i=ee(this.end)?this.end.getTime():this.end,r=ee(t.start)?t.start.getTime():t.start,s=ee(t.end)?t.end.getTime():t.end;return e===r&&i===s}expandTo(t){if(this.isEmpty||this.isAllTime)return this.clone();const e=Kf(this.start,r=>cz(r,t)),i=Kf(this.end,r=>{const s=cz(r,t);return r.getTime()===s.getTime()?s:f0(s,1,t)});return new Yu({start:e,end:i})}intersection(t){if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return Yu.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const e=c2(this.start,-1/0,a=>a.getTime()),i=c2(this.end,1/0,a=>a.getTime()),r=c2(t.start,-1/0,a=>a.getTime()),s=c2(t.end,1/0,a=>a.getTime());let n,o;if(r>=e&&r<=i?n=r:e>=r&&e<=s&&(n=e),i>=r&&i<=s?o=i:s>=e&&s<=i&&(o=s),n!=null&&o!=null&&!isNaN(n)&&!isNaN(o)){const a=new Yu;return a.start=n===-1/0?null:new Date(n),a.end=o===1/0?null:new Date(o),a}return Yu.empty}offset(t,e){if(this.isEmpty||this.isAllTime)return this.clone();const i=new Yu,{start:r,end:s}=this;return ee(r)&&(i.start=f0(r,t,e)),ee(s)&&(i.end=f0(s,t,e)),i}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return hz.clone();const e=ee(this.start)&&ee(t.start)?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,i=ee(this.end)&&ee(t.end)?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new Yu({start:e,end:i})}};h([p({type:Date,json:{write:{allowNull:!0}}})],hl.prototype,"end",void 0),h([Ye("end")],hl.prototype,"readEnd",null),h([it("end")],hl.prototype,"writeEnd",null),h([p({readOnly:!0,json:{read:!1}})],hl.prototype,"isAllTime",null),h([p({readOnly:!0,json:{read:!1}})],hl.prototype,"isEmpty",null),h([p({type:Date,json:{write:{allowNull:!0}}})],hl.prototype,"start",void 0),h([Ye("start")],hl.prototype,"readStart",null),h([it("start")],hl.prototype,"writeStart",null),hl=Yu=h([ce("esri.TimeExtent")],hl);const hz=new hl,G3e=new hl({start:void 0,end:void 0}),Ga=hl;var v8;let Yd=v8=class extends Je{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new v8({mapLayerId:t,gdbVersion:e})}};h([Dt({mapLayer:"map-layer"})],Yd.prototype,"type",void 0),h([p({type:Si,json:{write:!0}})],Yd.prototype,"mapLayerId",void 0),h([p({type:String,json:{write:!0}})],Yd.prototype,"gdbVersion",void 0),Yd=v8=h([ce("esri.layers.support.source.MapLayerSource")],Yd);var b8;let _d=b8=class extends Je{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:i,spatialReference:r,geometryType:s}=this,n={workspaceId:t,query:e,oidFields:i,spatialReference:r?.clone()??void 0,geometryType:s};return new b8(n)}};h([Dt({queryTable:"query-table"})],_d.prototype,"type",void 0),h([p({type:String,json:{write:!0}})],_d.prototype,"workspaceId",void 0),h([p({type:String,json:{write:!0}})],_d.prototype,"query",void 0),h([p({type:String,json:{write:!0}})],_d.prototype,"oidFields",void 0),h([p({type:Tt,json:{write:!0}})],_d.prototype,"spatialReference",void 0),h([Dt(UA)],_d.prototype,"geometryType",void 0),_d=b8=h([ce("esri.layers.support.source.QueryTableDataSource")],_d);var w8;let gv=w8=class extends Je{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new w8({workspaceId:t,dataSourceName:e})}};h([Dt({raster:"raster"})],gv.prototype,"type",void 0),h([p({type:String,json:{write:!0}})],gv.prototype,"dataSourceName",void 0),h([p({type:String,json:{write:!0}})],gv.prototype,"workspaceId",void 0),gv=w8=h([ce("esri.layers.support.source.RasterDataSource")],gv);var _8;let sg=_8=class extends Je{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:i}=this;return new _8({workspaceId:t,gdbVersion:e,dataSourceName:i})}};h([Dt({table:"table"})],sg.prototype,"type",void 0),h([p({type:String,json:{write:!0}})],sg.prototype,"workspaceId",void 0),h([p({type:String,json:{write:!0}})],sg.prototype,"gdbVersion",void 0),h([p({type:String,json:{write:!0}})],sg.prototype,"dataSourceName",void 0),sg=_8=h([ce("esri.layers.support.source.TableDataSource")],sg);var x8,S8;const q3e=xs()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let sl=x8=class extends Je{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,i){return dz()(t,e,i)}castLeftTableSource(t){return Uh(E8(),t)}readRightTableSource(t,e,i){return dz()(t,e,i)}castRightTableSource(t){return Uh(E8(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:i,rightTableSource:r,joinType:s}=this,n={leftTableKey:t,rightTableKey:e,leftTableSource:i?.clone()??void 0,rightTableSource:r?.clone()??void 0,joinType:s};return new x8(n)}};h([Dt({joinTable:"join-table"})],sl.prototype,"type",void 0),h([p({type:String,json:{write:!0}})],sl.prototype,"leftTableKey",void 0),h([p({type:String,json:{write:!0}})],sl.prototype,"rightTableKey",void 0),h([p({json:{write:!0}})],sl.prototype,"leftTableSource",void 0),h([Ye("leftTableSource")],sl.prototype,"readLeftTableSource",null),h([mi("leftTableSource")],sl.prototype,"castLeftTableSource",null),h([p({json:{write:!0}})],sl.prototype,"rightTableSource",void 0),h([Ye("rightTableSource")],sl.prototype,"readRightTableSource",null),h([mi("rightTableSource")],sl.prototype,"castRightTableSource",null),h([Dt(q3e)],sl.prototype,"joinType",void 0),sl=x8=h([ce("esri.layers.support.source.JoinTableDataSource")],sl);let SO=null;function dz(){return SO||(SO=zm({types:E8()})),SO}let EO=null;function E8(){return EO||(EO={key:"type",base:null,typeMap:{"data-layer":Jo,"map-layer":Yd}}),EO}const H3e={key:"type",base:null,typeMap:{"join-table":sl,"query-table":_d,raster:gv,table:sg}};let Jo=S8=class extends Je{constructor(t){super(t),this.type="data-layer"}clone(){const{fields:t,dataSource:e}=this;return new S8({fields:t,dataSource:e})}};h([Dt({dataLayer:"data-layer"})],Jo.prototype,"type",void 0),h([p({type:[ml],json:{write:!0}})],Jo.prototype,"fields",void 0),h([p({types:H3e,json:{write:!0}})],Jo.prototype,"dataSource",void 0),Jo=S8=h([ce("esri.layers.support.source.DataLayerSource")],Jo),Jo.from=ns(Jo);let ng=class extends Er(Je){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};h([p({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:ee(this.onFields)&&this.onFields.length>0}}}}})],ng.prototype,"onFields",void 0),h([p({type:String,json:{write:!0}})],ng.prototype,"operator",void 0),h([p({type:String,json:{write:!0}})],ng.prototype,"searchTerm",void 0),h([p({type:String,json:{write:!0}})],ng.prototype,"searchType",void 0),ng=h([ce("esri.rest.support.FullTextSearch")],ng);const W3e=ng;var T8;const pz=new si({upperLeft:"upper-left",lowerLeft:"lower-left"});let og=T8=class extends Je{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new T8(Le({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};h([p({type:Xt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],og.prototype,"extent",void 0),h([p({type:["view","edit"],json:{write:!0}})],og.prototype,"mode",void 0),h([p({type:String,json:{read:pz.read,write:pz.write}})],og.prototype,"originPosition",void 0),h([p({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],og.prototype,"tolerance",void 0),og=T8=h([ce("esri.rest.support.QuantizationParameters")],og);const Oie=og;var I8;const fz=new si({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Ku=I8=class extends Je{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=Le(t))}clone(){return new I8({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:Le(this.statisticParameters)})}};h([p({type:Number,json:{write:!0}})],Ku.prototype,"maxPointCount",void 0),h([p({type:Number,json:{write:!0}})],Ku.prototype,"maxRecordCount",void 0),h([p({type:Number,json:{write:!0}})],Ku.prototype,"maxVertexCount",void 0),h([p({type:String,json:{write:!0}})],Ku.prototype,"onStatisticField",void 0),h([p({type:String,json:{write:!0}})],Ku.prototype,"outStatisticFieldName",void 0),h([p({type:String,json:{read:{source:"statisticType",reader:fz.read},write:{target:"statisticType",writer:fz.write}}})],Ku.prototype,"statisticType",void 0),h([p({type:Object})],Ku.prototype,"statisticParameters",void 0),h([it("statisticParameters")],Ku.prototype,"writeStatisticParameters",null),Ku=I8=h([ce("esri.rest.support.StatisticDefinition")],Ku);const Rie=Ku;var xb;const J3e=new si({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),Z3e=new si({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Kt=xb=class extends Je{static from(t){return Bn(xb,t)}constructor(t){super(t),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(t){return typeof t=="number"||typeof t=="object"?t:null}writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeParameterValues(t,e){if(t){const i={};for(const r in t){const s=t[r];Array.isArray(s)?i[r]=s.map(n=>n instanceof Date?n.getTime():n):s instanceof Date?i[r]=s.getTime():i[r]=s}e.parameterValues=i}}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,e.where="1=1"}writeWhere(t,e){e.where=t||"1=1"}clone(){return new xb(Le({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:ee(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};Kt.MAX_MAX_RECORD_COUNT_FACTOR=5,h([p({json:{write:!0}})],Kt.prototype,"aggregateIds",void 0),h([p({type:Boolean,json:{write:!0}})],Kt.prototype,"cacheHint",void 0),h([p({type:Boolean,json:{default:!1,write:!0}})],Kt.prototype,"compactGeometryEnabled",void 0),h([p({json:{write:!0}})],Kt.prototype,"datumTransformation",void 0),h([mi("datumTransformation")],Kt.prototype,"castDatumTransformation",null),h([p({type:Boolean,json:{default:!1,write:!0}})],Kt.prototype,"defaultSpatialReferenceEnabled",void 0),h([p({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],Kt.prototype,"distance",void 0),h([p({type:Jo,json:{write:!0}})],Kt.prototype,"dynamicDataSource",void 0),h([p({type:String,json:{write:!0}})],Kt.prototype,"formatOf3DObjects",void 0),h([p({type:[W3e],json:{write:{enabled:!0,overridePolicy(){return{enabled:ee(this.fullText)&&this.fullText.length>0}}}}})],Kt.prototype,"fullText",void 0),h([p({type:String,json:{write:!0}})],Kt.prototype,"gdbVersion",void 0),h([p({types:Ac,json:{read:Pl,write:!0}})],Kt.prototype,"geometry",void 0),h([p({type:Number,json:{write:!0}})],Kt.prototype,"geometryPrecision",void 0),h([p({type:[String],json:{write:!0}})],Kt.prototype,"groupByFieldsForStatistics",void 0),h([p({type:String,json:{write:!0}})],Kt.prototype,"having",void 0),h([p({type:Date})],Kt.prototype,"historicMoment",void 0),h([it("historicMoment")],Kt.prototype,"writeHistoricMoment",null),h([p({type:Number,json:{write:!0}})],Kt.prototype,"maxAllowableOffset",void 0),h([p({type:Number,cast:t=>t<1?1:t>xb.MAX_MAX_RECORD_COUNT_FACTOR?xb.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],Kt.prototype,"maxRecordCountFactor",void 0),h([p({type:["xyFootprint"],json:{write:!0}})],Kt.prototype,"multipatchOption",void 0),h([p({type:Number,json:{read:{source:"resultRecordCount"}}})],Kt.prototype,"num",void 0),h([p({json:{write:!0}})],Kt.prototype,"objectIds",void 0),h([p({type:[String],json:{write:!0}})],Kt.prototype,"orderByFields",void 0),h([p({type:[String],json:{write:!0}})],Kt.prototype,"outFields",void 0),h([p({type:Tt,json:{name:"outSR",write:!0}})],Kt.prototype,"outSpatialReference",void 0),h([p({type:[Rie],json:{write:{enabled:!0,overridePolicy(){return{enabled:ee(this.outStatistics)&&this.outStatistics.length>0}}}}})],Kt.prototype,"outStatistics",void 0),h([p({json:{write:!0}})],Kt.prototype,"parameterValues",void 0),h([it("parameterValues")],Kt.prototype,"writeParameterValues",null),h([p({type:Ct,json:{write:!0}})],Kt.prototype,"pixelSize",void 0),h([p({type:Oie,json:{write:!0}})],Kt.prototype,"quantizationParameters",void 0),h([p({type:[Object],json:{write:!0}})],Kt.prototype,"rangeValues",void 0),h([p({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],Kt.prototype,"relationParameter",void 0),h([p({type:String,json:{write:!0}})],Kt.prototype,"resultType",void 0),h([p({type:Boolean,json:{default:!1,write:!0}})],Kt.prototype,"returnCentroid",void 0),h([p({type:Boolean,json:{default:!1,write:!0}})],Kt.prototype,"returnDistinctValues",void 0),h([p({type:Boolean,json:{default:!0,write:!0}})],Kt.prototype,"returnExceededLimitFeatures",void 0),h([p({type:Boolean,json:{write:!0}})],Kt.prototype,"returnGeometry",void 0),h([p({type:Boolean,json:{default:!1,write:!0}})],Kt.prototype,"returnQueryGeometry",void 0),h([p({type:Boolean,json:{default:!1,write:!0}})],Kt.prototype,"returnM",void 0),h([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Kt.prototype,"returnZ",void 0),h([p({type:Tt,json:{write:!0}})],Kt.prototype,"sourceSpatialReference",void 0),h([Dt(J3e,{ignoreUnknown:!1,name:"spatialRel"})],Kt.prototype,"spatialRelationship",void 0),h([p({type:Number,json:{read:{source:"resultOffset"}}})],Kt.prototype,"start",void 0),h([it("start"),it("num")],Kt.prototype,"writeStart",null),h([p({type:String,json:{write:!0}})],Kt.prototype,"sqlFormat",void 0),h([p({type:String,json:{write:!0}})],Kt.prototype,"text",void 0),h([p({type:Ga,json:{write:!0}})],Kt.prototype,"timeExtent",void 0),h([p({type:Boolean,json:{default:!1,write:!0}})],Kt.prototype,"timeReferenceUnknownClient",void 0),h([Dt(Z3e,{ignoreUnknown:!1}),p({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null&&this.distance>0}}}}})],Kt.prototype,"units",void 0),h([p({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],Kt.prototype,"where",void 0),h([it("where")],Kt.prototype,"writeWhere",null),Kt=xb=h([ce("esri.rest.support.Query")],Kt);const Ls=Kt;var M8;const TO=new si({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),IO=new si({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Kc=M8=class extends Je{constructor(t){super(t),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(t={}){const{where:e,geometry:i,spatialRelationship:r,timeExtent:s,objectIds:n,units:o,distance:a}=this;return new Ls({geometry:Le(i),objectIds:Le(n),spatialRelationship:r,timeExtent:Le(s),where:e,units:o,distance:a,...t})}clone(){const{where:t,geometry:e,spatialRelationship:i,timeExtent:r,objectIds:s,units:n,distance:o}=this;return new M8({geometry:Le(e),objectIds:Le(s),spatialRelationship:i,timeExtent:Le(r),where:t,units:n,distance:o})}};h([p({type:String,json:{write:!0}})],Kc.prototype,"where",void 0),h([p({types:Ac,json:{write:!0}})],Kc.prototype,"geometry",void 0),h([p({type:TO.apiValues,json:{name:"spatialRel",read:{reader:TO.read},write:{allowNull:!1,writer:TO.write,overridePolicy(){return{enabled:ee(this.geometry)}}}}})],Kc.prototype,"spatialRelationship",void 0),h([p({type:Number,json:{write:{overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Kc.prototype,"distance",void 0),h([p({type:[Number],json:{write:!0}})],Kc.prototype,"objectIds",void 0),h([p({type:IO.apiValues,json:{read:IO.read,write:{writer:IO.write,overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Kc.prototype,"units",void 0),h([p({type:Ga,json:{write:!0}})],Kc.prototype,"timeExtent",void 0),Kc=M8=h([ce("esri.layers.support.FeatureFilter")],Kc);const kie=Kc;var A8;const mz={read:{reader:mD},write:{writer:yD,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},yz={read:{reader:mD},write:{writer:yD,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},gz={name:"showExcludedLabels",default:!0};let ag=A8=class extends Je{constructor(t){super(t),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(t,e){const i=super.write(t,e);if(e?.origin){if(i.filter){const r=Object.keys(i.filter);if(r.length>1||r[0]!=="where")return e.messages?.push(new Ce("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:e.layer,effect:this})),null}if("showExcludedLabels"in i)return e.messages?.push(new Ce("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:e.layer,effect:this})),null}return i}clone(){return new A8({filter:ee(this.filter)?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};h([p({type:kie,json:{write:{allowNull:!0,writer(t,e,i,r){const s=t?.write({},r);s&&Object.keys(s).length!==0?Io(i,s,e):Io(i,null,e)}}}})],ag.prototype,"filter",void 0),h([p({json:{write:!0,origins:{"web-map":mz,"portal-item":mz}}})],ag.prototype,"includedEffect",void 0),h([p({json:{write:!0,origins:{"web-map":yz,"portal-item":yz}}})],ag.prototype,"excludedEffect",void 0),h([p({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":gz,"portal-item":gz}}})],ag.prototype,"excludedLabelsVisible",void 0),ag=A8=h([ce("esri.layers.support.FeatureEffect")],ag);const Y3e=ag,vz={write:{allowNull:!0}},K3e=t=>{let e=class extends t{constructor(){super(...arguments),this.featureEffect=null}};return h([p({type:Y3e,json:{origins:{"web-map":vz,"portal-item":vz}}})],e.prototype,"featureEffect",void 0),e=h([ce("esri.layers.mixins.FeatureEffectLayer")],e),e};var G2;const WA=xs()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),Lie=WA.jsonValues.slice();_K(Lie,"orthometric");const Nx=xs()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Qu=G2=class extends Je{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,i){return WA.write(t,e,i)}readHeightModel(t,e,i){return WA.read(t)||(i&&i.messages&&i.messages.push(Q3e(t,{context:i})),null)}readHeightUnit(t,e,i){return Nx.read(t)||(i&&i.messages&&i.messages.push(bz(t,{context:i})),null)}readHeightUnitService(t,e,i){return YQ(t)||Nx.read(t)||(i&&i.messages&&i.messages.push(bz(t,{context:i})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new G2({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const i=R0e(e);return new G2({heightModel:t.heightModel,heightUnit:i,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new G2;return e.read(t,{origin:"web-scene"}),e}};function bz(t,e){return new kl("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function Q3e(t,e){return new kl("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}h([p({type:WA.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Lie,default:"ellipsoidal"}}}})],Qu.prototype,"heightModel",void 0),h([it("web-scene","heightModel")],Qu.prototype,"writeHeightModel",null),h([Ye(["web-scene","service"],"heightModel")],Qu.prototype,"readHeightModel",null),h([p({type:Nx.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Nx.jsonValues,write:Nx.write}}}})],Qu.prototype,"heightUnit",void 0),h([Ye("web-scene","heightUnit")],Qu.prototype,"readHeightUnit",null),h([Ye("service","heightUnit")],Qu.prototype,"readHeightUnitService",null),h([p({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Qu.prototype,"vertCRS",void 0),h([Ye("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Qu.prototype,"readVertCRS",null),Qu=G2=h([ce("esri.geometry.HeightModelInfo")],Qu);const mC=Qu;function X3e(t){if(!t)return t;const{start:e,end:i}=t;return new Ga({start:ee(e)?f0(e,-e.getTimezoneOffset(),"minutes"):e,end:ee(i)?f0(i,-i.getTimezoneOffset(),"minutes"):i})}function eEe(t){if(!t)return t;const{start:e,end:i}=t;return new Ga({start:ee(e)?f0(e,e.getTimezoneOffset(),"minutes"):e,end:ee(i)?f0(i,i.getTimezoneOffset(),"minutes"):i})}var C8;let q2=C8=class extends Je{constructor(t){super(t)}async collectRequiredFields(t,e){return Xo(t,e,this.expression)}clone(){return new C8({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};h([p({type:String,json:{write:!0}})],q2.prototype,"expression",void 0),h([p({type:String,json:{write:!0}})],q2.prototype,"title",void 0),q2=C8=h([ce("esri.layers.support.FeatureExpressionInfo")],q2);const wz=q2;function Tct(t){return 1/(Z9[t]||1)}function tEe(){const t=Object.keys(Z9);return t.sort(),t}const iEe=tEe();var $8;const uT=xs()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),_z=new si({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let xd=$8=class extends Je{constructor(t){super(t),this.offset=null}readFeatureExpressionInfo(t,e){return t??(e.featureExpression&&e.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(t,e,i,r){e[i]=t.write({},r),t.expression==="0"&&(e.featureExpression={value:0})}get mode(){const{offset:t,featureExpressionInfo:e}=this;return this._isOverridden("mode")?this._get("mode"):ee(t)||e?"relative-to-ground":"on-the-ground"}set mode(t){this._override("mode",t)}set unit(t){this._set("unit",t)}write(t,e){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(t,e):null}clone(){return new $8({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(t){return this.mode===t.mode&&this.offset===t.offset&&this.unit===t.unit&&_me(this.featureExpressionInfo,t.featureExpressionInfo)}};h([p({type:wz,json:{write:!0}})],xd.prototype,"featureExpressionInfo",void 0),h([Ye("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],xd.prototype,"readFeatureExpressionInfo",null),h([it("featureExpressionInfo",{featureExpressionInfo:{type:wz},"featureExpression.value":{type:[0]}})],xd.prototype,"writeFeatureExpressionInfo",null),h([p({type:uT.apiValues,nonNullable:!0,json:{type:uT.jsonValues,read:uT.read,write:{writer:uT.write,isRequired:!0}}})],xd.prototype,"mode",null),h([p({type:Number,json:{write:!0}})],xd.prototype,"offset",void 0),h([p({type:iEe,json:{type:String,read:_z.read,write:_z.write}})],xd.prototype,"unit",null),xd=$8=h([ce("esri.layers.support.ElevationInfo")],xd);const Pie=xd,rEe={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},z3={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,i){e[i]=!t}}}},gD={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:!0}},G3={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:N0}}},vD={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},sEe={value:null,type:Pie,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function Ict(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const Nie={write:!0,read:!0},JA={type:Number,json:{origins:{"web-document":Nie,"portal-item":{write:!0}}}},nEe={...JA,json:{...JA.json,origins:{"web-document":{...Nie,write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,i)=>i&&i.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?e.layerDefinition&&e.layerDefinition.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?CS(e.layerDefinition.drawingInfo.transparency):void 0:CS(e.drawingInfo.transparency)}}},oEe={type:Ga,readOnly:!0,get(){if(!this.layer?.timeInfo)return null;const{datesInUnknownTimezone:t,timeOffset:e,useViewTime:i}=this.layer,r=this.view?.timeExtent;let s=this.layer.timeExtent;t&&(s=eEe(s));let n=i?r&&s?r.intersection(s):r||s:s;if(!n||n.isEmpty||n.isAllTime)return n;e&&(n=n.offset(-e.value,e.unit)),t&&(n=X3e(n));const o=this._get("timeExtent");return n.equals(o)?o:n}},Mct={type:Xt,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const i=Xt.fromJSON(t);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(i.spatialReference=Tt.fromJSON(e.spatialReference)),i}}}},read:!1}},Fie={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},aEe={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},lEe={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},Die={json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}},xz=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Almaty"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Chihuahua"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class l1 extends Error{}class uEe extends l1{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class cEe extends l1{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class hEe extends l1{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class H2 extends l1{}class jie extends l1{constructor(e){super(`Invalid unit ${e}`)}}class cu extends l1{}class zp extends l1{constructor(){super("Zone is an abstract class")}}const Mt="numeric",Sc="short",$l="long",ZA={year:Mt,month:Mt,day:Mt},Uie={year:Mt,month:Sc,day:Mt},dEe={year:Mt,month:Sc,day:Mt,weekday:Sc},Vie={year:Mt,month:$l,day:Mt},Bie={year:Mt,month:$l,day:Mt,weekday:$l},zie={hour:Mt,minute:Mt},Gie={hour:Mt,minute:Mt,second:Mt},qie={hour:Mt,minute:Mt,second:Mt,timeZoneName:Sc},Hie={hour:Mt,minute:Mt,second:Mt,timeZoneName:$l},Wie={hour:Mt,minute:Mt,hourCycle:"h23"},Jie={hour:Mt,minute:Mt,second:Mt,hourCycle:"h23"},Zie={hour:Mt,minute:Mt,second:Mt,hourCycle:"h23",timeZoneName:Sc},Yie={hour:Mt,minute:Mt,second:Mt,hourCycle:"h23",timeZoneName:$l},Kie={year:Mt,month:Mt,day:Mt,hour:Mt,minute:Mt},Qie={year:Mt,month:Mt,day:Mt,hour:Mt,minute:Mt,second:Mt},Xie={year:Mt,month:Sc,day:Mt,hour:Mt,minute:Mt},ere={year:Mt,month:Sc,day:Mt,hour:Mt,minute:Mt,second:Mt},pEe={year:Mt,month:Sc,day:Mt,weekday:Sc,hour:Mt,minute:Mt},tre={year:Mt,month:$l,day:Mt,hour:Mt,minute:Mt,timeZoneName:Sc},ire={year:Mt,month:$l,day:Mt,hour:Mt,minute:Mt,second:Mt,timeZoneName:Sc},rre={year:Mt,month:$l,day:Mt,weekday:$l,hour:Mt,minute:Mt,timeZoneName:$l},sre={year:Mt,month:$l,day:Mt,weekday:$l,hour:Mt,minute:Mt,second:Mt,timeZoneName:$l};class q3{get type(){throw new zp}get name(){throw new zp}get ianaName(){return this.name}get isUniversal(){throw new zp}offsetName(e,i){throw new zp}formatOffset(e,i){throw new zp}offset(e){throw new zp}equals(e){throw new zp}get isValid(){throw new zp}}let MO=null;class yC extends q3{static get instance(){return MO===null&&(MO=new yC),MO}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return ore(e,i,r)}formatOffset(e,i){return Dx(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let wM={};function fEe(t){return wM[t]||(wM[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),wM[t]}const mEe={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function yEe(t,e){const i=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,s,n,o,a,l,u,c]=r;return[o,s,n,a,l,u,c]}function gEe(t,e){const i=t.formatToParts(e),r=[];for(let s=0;s<i.length;s++){const{type:n,value:o}=i[s],a=mEe[n];n==="era"?r[a]=o:Gi(a)||(r[a]=parseInt(o,10))}return r}let cT={};class pp extends q3{static create(e){return cT[e]||(cT[e]=new pp(e)),cT[e]}static resetCache(){cT={},wM={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=pp.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return ore(e,i,r,this.name)}formatOffset(e,i){return Dx(this.offset(e),i)}offset(e){const i=new Date(e);if(isNaN(i))return NaN;const r=fEe(this.name);let[s,n,o,a,l,u,c]=r.formatToParts?gEe(r,i):yEe(r,i);a==="BC"&&(s=-Math.abs(s)+1);const f=_D({year:s,month:n,day:o,hour:l===24?0:l,minute:u,second:c,millisecond:0});let m=+i;const g=m%1e3;return m-=g>=0?g:1e3+g,(f-m)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let Sz={};function vEe(t,e={}){const i=JSON.stringify([t,e]);let r=Sz[i];return r||(r=new Intl.ListFormat(t,e),Sz[i]=r),r}let O8={};function R8(t,e={}){const i=JSON.stringify([t,e]);let r=O8[i];return r||(r=new Intl.DateTimeFormat(t,e),O8[i]=r),r}let k8={};function bEe(t,e={}){const i=JSON.stringify([t,e]);let r=k8[i];return r||(r=new Intl.NumberFormat(t,e),k8[i]=r),r}let L8={};function wEe(t,e={}){const{base:i,...r}=e,s=JSON.stringify([t,r]);let n=L8[s];return n||(n=new Intl.RelativeTimeFormat(t,e),L8[s]=n),n}let W2=null;function _Ee(){return W2||(W2=new Intl.DateTimeFormat().resolvedOptions().locale,W2)}function xEe(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(i===-1)return[t];{let r,s;try{r=R8(t).resolvedOptions(),s=t}catch{const l=t.substring(0,i);r=R8(l).resolvedOptions(),s=l}const{numberingSystem:n,calendar:o}=r;return[s,n,o]}}function SEe(t,e,i){return(i||e)&&(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`)),t}function EEe(t){const e=[];for(let i=1;i<=12;i++){const r=xi.utc(2016,i,1);e.push(t(r))}return e}function TEe(t){const e=[];for(let i=1;i<=7;i++){const r=xi.utc(2016,11,13+i);e.push(t(r))}return e}function hT(t,e,i,r,s){const n=t.listingMode(i);return n==="error"?null:n==="en"?r(e):s(e)}function IEe(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class MEe{constructor(e,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:s,floor:n,...o}=r;if(!i||Object.keys(o).length>0){const a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=bEe(e,a)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):wD(e,3);return zs(i,this.padTo)}}}class AEe{constructor(e,i,r){this.opts=r;let s;if(e.zone.isUniversal){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&pp.create(a).valid?(s=a,this.dt=e):(s="UTC",r.timeZoneName?this.dt=e:this.dt=e.offset===0?e:xi.fromMillis(e.ts+e.offset*60*1e3))}else e.zone.type==="system"?this.dt=e:(this.dt=e,s=e.zone.name);const n={...this.opts};n.timeZone=n.timeZone||s,this.dtf=R8(i,n)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class CEe{constructor(e,i,r){this.opts={style:"long",...r},!i&&nre()&&(this.rtf=wEe(e,r))}format(e,i){return this.rtf?this.rtf.format(e,i):HEe(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}class Vr{static fromOpts(e){return Vr.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)}static create(e,i,r,s=!1){const n=e||Bs.defaultLocale,o=n||(s?"en-US":_Ee()),a=i||Bs.defaultNumberingSystem,l=r||Bs.defaultOutputCalendar;return new Vr(o,a,l,n)}static resetCache(){W2=null,O8={},k8={},L8={}}static fromObject({locale:e,numberingSystem:i,outputCalendar:r}={}){return Vr.create(e,i,r)}constructor(e,i,r,s){const[n,o,a]=xEe(e);this.locale=n,this.numberingSystem=i||o||null,this.outputCalendar=r||a||null,this.intl=SEe(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=IEe(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Vr.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1,r=!0){return hT(this,e,r,ure,()=>{const s=i?{month:e,day:"numeric"}:{month:e},n=i?"format":"standalone";return this.monthsCache[n][e]||(this.monthsCache[n][e]=EEe(o=>this.extract(o,s,"month"))),this.monthsCache[n][e]})}weekdays(e,i=!1,r=!0){return hT(this,e,r,dre,()=>{const s=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},n=i?"format":"standalone";return this.weekdaysCache[n][e]||(this.weekdaysCache[n][e]=TEe(o=>this.extract(o,s,"weekday"))),this.weekdaysCache[n][e]})}meridiems(e=!0){return hT(this,void 0,e,()=>pre,()=>{if(!this.meridiemCache){const i={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[xi.utc(2016,11,13,9),xi.utc(2016,11,13,19)].map(r=>this.extract(r,i,"dayperiod"))}return this.meridiemCache})}eras(e,i=!0){return hT(this,e,i,fre,()=>{const r={era:e};return this.eraCache[e]||(this.eraCache[e]=[xi.utc(-40,1,1),xi.utc(2017,1,1)].map(s=>this.extract(s,r,"era"))),this.eraCache[e]})}extract(e,i,r){const s=this.dtFormatter(e,i),n=s.formatToParts(),o=n.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new MEe(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new AEe(e,this.intl,i)}relFormatter(e={}){return new CEe(this.intl,this.isEnglish(),e)}listFormatter(e={}){return vEe(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let AO=null;class xo extends q3{static get utcInstance(){return AO===null&&(AO=new xo(0)),AO}static instance(e){return e===0?xo.utcInstance:new xo(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new xo(vC(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Dx(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Dx(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return Dx(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class $Ee extends q3{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Wf(t,e){if(Gi(t)||t===null)return e;if(t instanceof q3)return t;if(OEe(t)){const i=t.toLowerCase();return i==="default"?e:i==="local"||i==="system"?yC.instance:i==="utc"||i==="gmt"?xo.utcInstance:xo.parseSpecifier(i)||pp.create(t)}else return m0(t)?xo.instance(t):typeof t=="object"&&t.offset&&typeof t.offset=="number"?t:new $Ee(t)}let Ez=()=>Date.now(),Tz="system",Iz=null,Mz=null,Az=null,Cz=60,$z;class Bs{static get now(){return Ez}static set now(e){Ez=e}static set defaultZone(e){Tz=e}static get defaultZone(){return Wf(Tz,yC.instance)}static get defaultLocale(){return Iz}static set defaultLocale(e){Iz=e}static get defaultNumberingSystem(){return Mz}static set defaultNumberingSystem(e){Mz=e}static get defaultOutputCalendar(){return Az}static set defaultOutputCalendar(e){Az=e}static get twoDigitCutoffYear(){return Cz}static set twoDigitCutoffYear(e){Cz=e%100}static get throwOnInvalid(){return $z}static set throwOnInvalid(e){$z=e}static resetCaches(){Vr.resetCache(),pp.resetCache()}}function Gi(t){return typeof t>"u"}function m0(t){return typeof t=="number"}function gC(t){return typeof t=="number"&&t%1===0}function OEe(t){return typeof t=="string"}function REe(t){return Object.prototype.toString.call(t)==="[object Date]"}function nre(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function kEe(t){return Array.isArray(t)?t:[t]}function Oz(t,e,i){if(t.length!==0)return t.reduce((r,s)=>{const n=[e(s),s];return r&&i(r[0],n[0])===r[0]?r:n},null)[1]}function LEe(t,e){return e.reduce((i,r)=>(i[r]=t[r],i),{})}function ew(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Xd(t,e,i){return gC(t)&&t>=e&&t<=i}function PEe(t,e){return t-e*Math.floor(t/e)}function zs(t,e=2){const i=t<0;let r;return i?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function Uf(t){if(!(Gi(t)||t===null||t===""))return parseInt(t,10)}function gy(t){if(!(Gi(t)||t===null||t===""))return parseFloat(t)}function bD(t){if(!(Gi(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function wD(t,e,i=!1){const r=10**e;return(i?Math.trunc:Math.round)(t*r)/r}function H3(t){return t%4===0&&(t%100!==0||t%400===0)}function Fx(t){return H3(t)?366:365}function YA(t,e){const i=PEe(e-1,12)+1,r=t+(e-i)/12;return i===2?H3(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function _D(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(e.getUTCFullYear()-1900)),+e}function KA(t){const e=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7,i=t-1,r=(i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400))%7;return e===4||r===3?53:52}function P8(t){return t>99?t:t>Bs.twoDigitCutoffYear?1900+t:2e3+t}function ore(t,e,i,r=null){const s=new Date(t),n={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(n.timeZone=r);const o={timeZoneName:e,...n},a=new Intl.DateTimeFormat(i,o).formatToParts(s).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function vC(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const r=parseInt(e,10)||0,s=i<0||Object.is(i,-0)?-r:r;return i*60+s}function are(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new cu(`Invalid unit value ${t}`);return e}function QA(t,e){const i={};for(const r in t)if(ew(t,r)){const s=t[r];if(s==null)continue;i[e(r)]=are(s)}return i}function Dx(t,e){const i=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),s=t>=0?"+":"-";switch(e){case"short":return`${s}${zs(i,2)}:${zs(r,2)}`;case"narrow":return`${s}${i}${r>0?`:${r}`:""}`;case"techie":return`${s}${zs(i,2)}${zs(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function bC(t){return LEe(t,["hour","minute","second","millisecond"])}const NEe=["January","February","March","April","May","June","July","August","September","October","November","December"],lre=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],FEe=["J","F","M","A","M","J","J","A","S","O","N","D"];function ure(t){switch(t){case"narrow":return[...FEe];case"short":return[...lre];case"long":return[...NEe];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const cre=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],hre=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],DEe=["M","T","W","T","F","S","S"];function dre(t){switch(t){case"narrow":return[...DEe];case"short":return[...hre];case"long":return[...cre];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const pre=["AM","PM"],jEe=["Before Christ","Anno Domini"],UEe=["BC","AD"],VEe=["B","A"];function fre(t){switch(t){case"narrow":return[...VEe];case"short":return[...UEe];case"long":return[...jEe];default:return null}}function BEe(t){return pre[t.hour<12?0:1]}function zEe(t,e){return dre(e)[t.weekday-1]}function GEe(t,e){return ure(e)[t.month-1]}function qEe(t,e){return fre(e)[t.year<0?0:1]}function HEe(t,e,i="always",r=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},n=["hours","minutes","seconds"].indexOf(t)===-1;if(i==="auto"&&n){const d=t==="days";switch(e){case 1:return d?"tomorrow":`next ${s[t][0]}`;case-1:return d?"yesterday":`last ${s[t][0]}`;case 0:return d?"today":`this ${s[t][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),l=a===1,u=s[t],c=r?l?u[1]:u[2]||u[1]:l?s[t][0]:t;return o?`${a} ${c} ago`:`in ${a} ${c}`}function Rz(t,e){let i="";for(const r of t)r.literal?i+=r.val:i+=e(r.val);return i}const WEe={D:ZA,DD:Uie,DDD:Vie,DDDD:Bie,t:zie,tt:Gie,ttt:qie,tttt:Hie,T:Wie,TT:Jie,TTT:Zie,TTTT:Yie,f:Kie,ff:Xie,fff:tre,ffff:rre,F:Qie,FF:ere,FFF:ire,FFFF:sre};class wo{static create(e,i={}){return new wo(e,i)}static parseFormat(e){let i=null,r="",s=!1;const n=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?(r.length>0&&n.push({literal:s,val:r}),i=null,r="",s=!s):s||a===i?r+=a:(r.length>0&&n.push({literal:!1,val:r}),r=a,i=a)}return r.length>0&&n.push({literal:s,val:r}),n}static macroTokenToFormatOpts(e){return WEe[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}formatDateTime(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i}).format()}formatDateTimeParts(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i}).formatToParts()}formatInterval(e,i={}){return this.loc.dtFormatter(e.start,{...this.opts,...i}).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i}).resolvedOptions()}num(e,i=0){if(this.opts.forceSimple)return zs(e,i);const r={...this.opts};return i>0&&(r.padTo=i),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,i){const r=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",n=(m,g)=>this.loc.extract(e,m,g),o=m=>e.isOffsetFixed&&e.offset===0&&m.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,m.format):"",a=()=>r?BEe(e):n({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(m,g)=>r?GEe(e,m):n(g?{month:m}:{month:m,day:"numeric"},"month"),u=(m,g)=>r?zEe(e,m):n(g?{weekday:m}:{weekday:m,month:"long",day:"numeric"},"weekday"),c=m=>{const g=wo.macroTokenToFormatOpts(m);return g?this.formatWithSystemDefault(e,g):m},d=m=>r?qEe(e,m):n({era:m},"era"),f=m=>{switch(m){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return s?n({day:"numeric"},"day"):this.num(e.day);case"dd":return s?n({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return s?n({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return s?n({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return s?n({month:"numeric"},"month"):this.num(e.month);case"MM":return s?n({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return s?n({year:"numeric"},"year"):this.num(e.year);case"yy":return s?n({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return s?n({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return s?n({year:"numeric"},"year"):this.num(e.year,6);case"G":return d("short");case"GG":return d("long");case"GGGGG":return d("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return c(m)}};return Rz(wo.parseFormat(i),f)}formatDurationFromString(e,i){const r=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=l=>u=>{const c=r(u);return c?this.num(l.get(c),u.length):u},n=wo.parseFormat(i),o=n.reduce((l,{literal:u,val:c})=>u?l:l.concat(c),[]),a=e.shiftTo(...o.map(r).filter(l=>l));return Rz(n,s(a))}}class mc{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const mre=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Zw(...t){const e=t.reduce((i,r)=>i+r.source,"");return RegExp(`^${e}$`)}function Yw(...t){return e=>t.reduce(([i,r,s],n)=>{const[o,a,l]=n(e,s);return[{...i,...o},a||r,l]},[{},null,1]).slice(0,2)}function Kw(t,...e){if(t==null)return[null,null];for(const[i,r]of e){const s=i.exec(t);if(s)return r(s)}return[null,null]}function yre(...t){return(e,i)=>{const r={};let s;for(s=0;s<t.length;s++)r[t[s]]=Uf(e[i+s]);return[r,null,i+s]}}const gre=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,JEe=`(?:${gre.source}?(?:\\[(${mre.source})\\])?)?`,xD=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,vre=RegExp(`${xD.source}${JEe}`),SD=RegExp(`(?:T${vre.source})?`),ZEe=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,YEe=/(\d{4})-?W(\d\d)(?:-?(\d))?/,KEe=/(\d{4})-?(\d{3})/,QEe=yre("weekYear","weekNumber","weekDay"),XEe=yre("year","ordinal"),eTe=/(\d{4})-(\d\d)-(\d\d)/,bre=RegExp(`${xD.source} ?(?:${gre.source}|(${mre.source}))?`),tTe=RegExp(`(?: ${bre.source})?`);function Sb(t,e,i){const r=t[e];return Gi(r)?i:Uf(r)}function iTe(t,e){return[{year:Sb(t,e),month:Sb(t,e+1,1),day:Sb(t,e+2,1)},null,e+3]}function Qw(t,e){return[{hours:Sb(t,e,0),minutes:Sb(t,e+1,0),seconds:Sb(t,e+2,0),milliseconds:bD(t[e+3])},null,e+4]}function W3(t,e){const i=!t[e]&&!t[e+1],r=vC(t[e+1],t[e+2]),s=i?null:xo.instance(r);return[{},s,e+3]}function J3(t,e){const i=t[e]?pp.create(t[e]):null;return[{},i,e+1]}const rTe=RegExp(`^T?${xD.source}$`),sTe=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function nTe(t){const[e,i,r,s,n,o,a,l,u]=t,c=e[0]==="-",d=l&&l[0]==="-",f=(m,g=!1)=>m!==void 0&&(g||m&&c)?-m:m;return[{years:f(gy(i)),months:f(gy(r)),weeks:f(gy(s)),days:f(gy(n)),hours:f(gy(o)),minutes:f(gy(a)),seconds:f(gy(l),l==="-0"),milliseconds:f(bD(u),d)}]}const oTe={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function ED(t,e,i,r,s,n,o){const a={year:e.length===2?P8(Uf(e)):Uf(e),month:lre.indexOf(i)+1,day:Uf(r),hour:Uf(s),minute:Uf(n)};return o&&(a.second=Uf(o)),t&&(a.weekday=t.length>3?cre.indexOf(t)+1:hre.indexOf(t)+1),a}const aTe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function lTe(t){const[,e,i,r,s,n,o,a,l,u,c,d]=t,f=ED(e,s,r,i,n,o,a);let m;return l?m=oTe[l]:u?m=0:m=vC(c,d),[f,new xo(m)]}function uTe(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const cTe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,hTe=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,dTe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function kz(t){const[,e,i,r,s,n,o,a]=t;return[ED(e,s,r,i,n,o,a),xo.utcInstance]}function pTe(t){const[,e,i,r,s,n,o,a]=t;return[ED(e,a,i,r,s,n,o),xo.utcInstance]}const fTe=Zw(ZEe,SD),mTe=Zw(YEe,SD),yTe=Zw(KEe,SD),gTe=Zw(vre),wre=Yw(iTe,Qw,W3,J3),vTe=Yw(QEe,Qw,W3,J3),bTe=Yw(XEe,Qw,W3,J3),wTe=Yw(Qw,W3,J3);function _Te(t){return Kw(t,[fTe,wre],[mTe,vTe],[yTe,bTe],[gTe,wTe])}function xTe(t){return Kw(uTe(t),[aTe,lTe])}function STe(t){return Kw(t,[cTe,kz],[hTe,kz],[dTe,pTe])}function ETe(t){return Kw(t,[sTe,nTe])}const TTe=Yw(Qw);function ITe(t){return Kw(t,[rTe,TTe])}const MTe=Zw(eTe,tTe),ATe=Zw(bre),CTe=Yw(Qw,W3,J3);function $Te(t){return Kw(t,[MTe,wre],[ATe,CTe])}const OTe="Invalid Duration",_re={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},RTe={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},..._re},Bl=146097/400,k1=146097/4800,kTe={years:{quarters:4,months:12,weeks:Bl/7,days:Bl,hours:Bl*24,minutes:Bl*24*60,seconds:Bl*24*60*60,milliseconds:Bl*24*60*60*1e3},quarters:{months:3,weeks:Bl/28,days:Bl/4,hours:Bl*24/4,minutes:Bl*24*60/4,seconds:Bl*24*60*60/4,milliseconds:Bl*24*60*60*1e3/4},months:{weeks:k1/7,days:k1,hours:k1*24,minutes:k1*24*60,seconds:k1*24*60*60,milliseconds:k1*24*60*60*1e3},..._re},lg=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],LTe=lg.slice(0).reverse();function Gp(t,e,i=!1){const r={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new Ji(r)}function PTe(t){return t<0?Math.floor(t):Math.ceil(t)}function xre(t,e,i,r,s){const n=t[s][i],o=e[i]/n,a=Math.sign(o)===Math.sign(r[s]),l=!a&&r[s]!==0&&Math.abs(o)<=1?PTe(o):Math.trunc(o);r[s]+=l,e[i]-=l*n}function NTe(t,e){LTe.reduce((i,r)=>Gi(e[r])?i:(i&&xre(t,e,i,e,r),r),null)}function FTe(t){const e={};for(const[i,r]of Object.entries(t))r!==0&&(e[i]=r);return e}class Ji{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let r=i?kTe:RTe;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||Vr.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,i){return Ji.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new cu(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Ji({values:QA(e,Ji.normalizeUnit),loc:Vr.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(m0(e))return Ji.fromMillis(e);if(Ji.isDuration(e))return e;if(typeof e=="object")return Ji.fromObject(e);throw new cu(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[r]=ETe(e);return r?Ji.fromObject(r,i):Ji.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[r]=ITe(e);return r?Ji.fromObject(r,i):Ji.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new cu("need to specify a reason the Duration is invalid");const r=e instanceof mc?e:new mc(e,i);if(Bs.throwOnInvalid)throw new hEe(r);return new Ji({invalid:r})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new jie(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?wo.create(this.loc,r).formatDurationFromString(this,e):OTe}toHuman(e={}){const i=lg.map(r=>{const s=this.values[r];return Gi(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(s)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=wD(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();if(i<0||i>=864e5)return null;e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e};const r=this.shiftTo("hours","minutes","seconds","milliseconds");let s=e.format==="basic"?"hhmm":"hh:mm";(!e.suppressSeconds||r.seconds!==0||r.milliseconds!==0)&&(s+=e.format==="basic"?"ss":":ss",(!e.suppressMilliseconds||r.milliseconds!==0)&&(s+=".SSS"));let n=r.toFormat(s);return e.includePrefix&&(n="T"+n),n}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=Ji.fromDurationLike(e),r={};for(const s of lg)(ew(i.values,s)||ew(this.values,s))&&(r[s]=i.get(s)+this.get(s));return Gp(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const i=Ji.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=are(e(this.values[r],r));return Gp(this,{values:i},!0)}get(e){return this[Ji.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...QA(e,Ji.normalizeUnit)};return Gp(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:r,matrix:s}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:s,conversionAccuracy:r};return Gp(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return NTe(this.matrix,e),Gp(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=FTe(this.normalize().shiftToAll().toObject());return Gp(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>Ji.normalizeUnit(o));const i={},r={},s=this.toObject();let n;for(const o of lg)if(e.indexOf(o)>=0){n=o;let a=0;for(const u in r)a+=this.matrix[u][o]*r[u],r[u]=0;m0(s[o])&&(a+=s[o]);const l=Math.trunc(a);i[o]=l,r[o]=(a*1e3-l*1e3)/1e3;for(const u in s)lg.indexOf(u)>lg.indexOf(o)&&xre(this.matrix,s,u,i,o)}else m0(s[o])&&(r[o]=s[o]);for(const o in r)r[o]!==0&&(i[n]+=o===n?r[o]:r[o]/this.matrix[n][o]);return Gp(this,{values:i},!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return Gp(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(r,s){return r===void 0||r===0?s===void 0||s===0:r===s}for(const r of lg)if(!i(this.values[r],e.values[r]))return!1;return!0}}const L1="Invalid Interval";function DTe(t,e){return!t||!t.isValid?fs.invalid("missing or invalid start"):!e||!e.isValid?fs.invalid("missing or invalid end"):e<t?fs.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class fs{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new cu("need to specify a reason the Interval is invalid");const r=e instanceof mc?e:new mc(e,i);if(Bs.throwOnInvalid)throw new cEe(r);return new fs({invalid:r})}static fromDateTimes(e,i){const r=N_(e),s=N_(i),n=DTe(r,s);return n??new fs({start:r,end:s})}static after(e,i){const r=Ji.fromDurationLike(i),s=N_(e);return fs.fromDateTimes(s,s.plus(r))}static before(e,i){const r=Ji.fromDurationLike(i),s=N_(e);return fs.fromDateTimes(s.minus(r),s)}static fromISO(e,i){const[r,s]=(e||"").split("/",2);if(r&&s){let n,o;try{n=xi.fromISO(r,i),o=n.isValid}catch{o=!1}let a,l;try{a=xi.fromISO(s,i),l=a.isValid}catch{l=!1}if(o&&l)return fs.fromDateTimes(n,a);if(o){const u=Ji.fromISO(s,i);if(u.isValid)return fs.after(n,u)}else if(l){const u=Ji.fromISO(r,i);if(u.isValid)return fs.before(a,u)}}return fs.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds"){if(!this.isValid)return NaN;const i=this.start.startOf(e),r=this.end.startOf(e);return Math.floor(r.diff(i,e).get(e))+1}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?fs.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(N_).filter(o=>this.contains(o)).sort(),r=[];let{s}=this,n=0;for(;s<this.e;){const o=i[n]||this.e,a=+o>+this.e?this.e:o;r.push(fs.fromDateTimes(s,a)),s=a,n+=1}return r}splitBy(e){const i=Ji.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,s=1,n;const o=[];for(;r<this.e;){const a=this.start.plus(i.mapUnits(l=>l*s));n=+a>+this.e?this.e:a,o.push(fs.fromDateTimes(r,n)),r=n,s+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return i>=r?null:fs.fromDateTimes(i,r)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return fs.fromDateTimes(i,r)}static merge(e){const[i,r]=e.sort((s,n)=>s.s-n.s).reduce(([s,n],o)=>n?n.overlaps(o)||n.abutsStart(o)?[s,n.union(o)]:[s.concat([n]),o]:[s,o],[[],null]);return r&&i.push(r),i}static xor(e){let i=null,r=0;const s=[],n=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...n),a=o.sort((l,u)=>l.time-u.time);for(const l of a)r+=l.type==="s"?1:-1,r===1?i=l.time:(i&&+i!=+l.time&&s.push(fs.fromDateTimes(i,l.time)),i=null);return fs.merge(s)}difference(...e){return fs.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:L1}toLocaleString(e=ZA,i={}){return this.isValid?wo.create(this.s.loc.clone(i),e).formatInterval(this):L1}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:L1}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:L1}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:L1}toFormat(e,{separator:i=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:L1}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):Ji.invalid(this.invalidReason)}mapEndpoints(e){return fs.fromDateTimes(e(this.s),e(this.e))}}class dT{static hasDST(e=Bs.defaultZone){const i=xi.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return pp.isValidZone(e)}static normalizeZone(e){return Wf(e,Bs.defaultZone)}static months(e="long",{locale:i=null,numberingSystem:r=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||Vr.create(i,r,n)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||Vr.create(i,r,n)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:r=null,locObj:s=null}={}){return(s||Vr.create(i,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:s=null}={}){return(s||Vr.create(i,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Vr.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return Vr.create(i,null,"gregory").eras(e)}static features(){return{relative:nre()}}}function Lz(t,e){const i=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(e)-i(t);return Math.floor(Ji.fromMillis(r).as("days"))}function jTe(t,e,i){const r=[["years",(l,u)=>u.year-l.year],["quarters",(l,u)=>u.quarter-l.quarter+(u.year-l.year)*4],["months",(l,u)=>u.month-l.month+(u.year-l.year)*12],["weeks",(l,u)=>{const c=Lz(l,u);return(c-c%7)/7}],["days",Lz]],s={},n=t;let o,a;for(const[l,u]of r)i.indexOf(l)>=0&&(o=l,s[l]=u(t,e),a=n.plus(s),a>e?(s[l]--,t=n.plus(s)):t=a);return[t,s,a,o]}function UTe(t,e,i,r){let[s,n,o,a]=jTe(t,e,i);const l=e-s,u=i.filter(d=>["hours","minutes","seconds","milliseconds"].indexOf(d)>=0);u.length===0&&(o<e&&(o=s.plus({[a]:1})),o!==s&&(n[a]=(n[a]||0)+l/(o-s)));const c=Ji.fromObject(n,r);return u.length>0?Ji.fromMillis(l,r).shiftTo(...u).plus(c):c}const TD={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},Pz={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},VTe=TD.hanidec.replace(/[\[|\]]/g,"").split("");function BTe(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);if(t[i].search(TD.hanidec)!==-1)e+=VTe.indexOf(t[i]);else for(const s in Pz){const[n,o]=Pz[s];r>=n&&r<=o&&(e+=r-n)}}return parseInt(e,10)}else return e}function Nu({numberingSystem:t},e=""){return new RegExp(`${TD[t||"latn"]}${e}`)}const zTe="missing Intl.DateTimeFormat.formatToParts support";function er(t,e=i=>i){return{regex:t,deser:([i])=>e(BTe(i))}}const GTe=String.fromCharCode(160),Sre=`[ ${GTe}]`,Ere=new RegExp(Sre,"g");function qTe(t){return t.replace(/\./g,"\\.?").replace(Ere,Sre)}function Nz(t){return t.replace(/\./g,"").replace(Ere," ").toLowerCase()}function Fu(t,e){return t===null?null:{regex:RegExp(t.map(qTe).join("|")),deser:([i])=>t.findIndex(r=>Nz(i)===Nz(r))+e}}function Fz(t,e){return{regex:t,deser:([,i,r])=>vC(i,r),groups:e}}function CO(t){return{regex:t,deser:([e])=>e}}function HTe(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function WTe(t,e){const i=Nu(e),r=Nu(e,"{2}"),s=Nu(e,"{3}"),n=Nu(e,"{4}"),o=Nu(e,"{6}"),a=Nu(e,"{1,2}"),l=Nu(e,"{1,3}"),u=Nu(e,"{1,6}"),c=Nu(e,"{1,9}"),d=Nu(e,"{2,4}"),f=Nu(e,"{4,6}"),m=b=>({regex:RegExp(HTe(b.val)),deser:([_])=>_,literal:!0}),v=(b=>{if(t.literal)return m(b);switch(b.val){case"G":return Fu(e.eras("short",!1),0);case"GG":return Fu(e.eras("long",!1),0);case"y":return er(u);case"yy":return er(d,P8);case"yyyy":return er(n);case"yyyyy":return er(f);case"yyyyyy":return er(o);case"M":return er(a);case"MM":return er(r);case"MMM":return Fu(e.months("short",!0,!1),1);case"MMMM":return Fu(e.months("long",!0,!1),1);case"L":return er(a);case"LL":return er(r);case"LLL":return Fu(e.months("short",!1,!1),1);case"LLLL":return Fu(e.months("long",!1,!1),1);case"d":return er(a);case"dd":return er(r);case"o":return er(l);case"ooo":return er(s);case"HH":return er(r);case"H":return er(a);case"hh":return er(r);case"h":return er(a);case"mm":return er(r);case"m":return er(a);case"q":return er(a);case"qq":return er(r);case"s":return er(a);case"ss":return er(r);case"S":return er(l);case"SSS":return er(s);case"u":return CO(c);case"uu":return CO(a);case"uuu":return er(i);case"a":return Fu(e.meridiems(),0);case"kkkk":return er(n);case"kk":return er(d,P8);case"W":return er(a);case"WW":return er(r);case"E":case"c":return er(i);case"EEE":return Fu(e.weekdays("short",!1,!1),1);case"EEEE":return Fu(e.weekdays("long",!1,!1),1);case"ccc":return Fu(e.weekdays("short",!0,!1),1);case"cccc":return Fu(e.weekdays("long",!0,!1),1);case"Z":case"ZZ":return Fz(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return Fz(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return CO(/[a-z_+-/]{1,256}?/i);default:return m(b)}})(t)||{invalidReason:zTe};return v.token=t,v}const JTe={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function ZTe(t,e){const{type:i,value:r}=t;if(i==="literal")return{literal:!0,val:r};const s=e[i];let n=JTe[i];if(typeof n=="object"&&(n=n[s]),n)return{literal:!1,val:n}}function YTe(t){return[`^${t.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,t]}function KTe(t,e,i){const r=t.match(e);if(r){const s={};let n=1;for(const o in i)if(ew(i,o)){const a=i[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(s[a.token.val[0]]=a.deser(r.slice(n,n+l))),n+=l}return[r,s]}else return[r,{}]}function QTe(t){const e=n=>{switch(n){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return Gi(t.z)||(i=pp.create(t.z)),Gi(t.Z)||(i||(i=new xo(t.Z)),r=t.Z),Gi(t.q)||(t.M=(t.q-1)*3+1),Gi(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),Gi(t.u)||(t.S=bD(t.u)),[Object.keys(t).reduce((n,o)=>{const a=e(o);return a&&(n[a]=t[o]),n},{}),i,r]}let $O=null;function XTe(){return $O||($O=xi.fromMillis(1555555555555)),$O}function eIe(t,e){if(t.literal)return t;const i=wo.macroTokenToFormatOpts(t.val),r=Mre(i,e);return r==null||r.includes(void 0)?t:r}function Tre(t,e){return Array.prototype.concat(...t.map(i=>eIe(i,e)))}function Ire(t,e,i){const r=Tre(wo.parseFormat(i),t),s=r.map(o=>WTe(o,t)),n=s.find(o=>o.invalidReason);if(n)return{input:e,tokens:r,invalidReason:n.invalidReason};{const[o,a]=YTe(s),l=RegExp(o,"i"),[u,c]=KTe(e,l,a),[d,f,m]=c?QTe(c):[null,null,void 0];if(ew(c,"a")&&ew(c,"H"))throw new H2("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:r,regex:l,rawMatches:u,matches:c,result:d,zone:f,specificOffset:m}}}function tIe(t,e,i){const{result:r,zone:s,specificOffset:n,invalidReason:o}=Ire(t,e,i);return[r,s,n,o]}function Mre(t,e){return t?wo.create(e,t).formatDateTimeParts(XTe()).map(s=>ZTe(s,t)):null}const Are=[0,31,59,90,120,151,181,212,243,273,304,334],Cre=[0,31,60,91,121,152,182,213,244,274,305,335];function pu(t,e){return new mc("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function $re(t,e,i){const r=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const s=r.getUTCDay();return s===0?7:s}function Ore(t,e,i){return i+(H3(t)?Cre:Are)[e-1]}function Rre(t,e){const i=H3(t)?Cre:Are,r=i.findIndex(n=>n<e),s=e-i[r];return{month:r+1,day:s}}function N8(t){const{year:e,month:i,day:r}=t,s=Ore(e,i,r),n=$re(e,i,r);let o=Math.floor((s-n+10)/7),a;return o<1?(a=e-1,o=KA(a)):o>KA(e)?(a=e+1,o=1):a=e,{weekYear:a,weekNumber:o,weekday:n,...bC(t)}}function Dz(t){const{weekYear:e,weekNumber:i,weekday:r}=t,s=$re(e,1,4),n=Fx(e);let o=i*7+r-s-3,a;o<1?(a=e-1,o+=Fx(a)):o>n?(a=e+1,o-=Fx(e)):a=e;const{month:l,day:u}=Rre(a,o);return{year:a,month:l,day:u,...bC(t)}}function OO(t){const{year:e,month:i,day:r}=t,s=Ore(e,i,r);return{year:e,ordinal:s,...bC(t)}}function jz(t){const{year:e,ordinal:i}=t,{month:r,day:s}=Rre(e,i);return{year:e,month:r,day:s,...bC(t)}}function iIe(t){const e=gC(t.weekYear),i=Xd(t.weekNumber,1,KA(t.weekYear)),r=Xd(t.weekday,1,7);return e?i?r?!1:pu("weekday",t.weekday):pu("week",t.week):pu("weekYear",t.weekYear)}function rIe(t){const e=gC(t.year),i=Xd(t.ordinal,1,Fx(t.year));return e?i?!1:pu("ordinal",t.ordinal):pu("year",t.year)}function kre(t){const e=gC(t.year),i=Xd(t.month,1,12),r=Xd(t.day,1,YA(t.year,t.month));return e?i?r?!1:pu("day",t.day):pu("month",t.month):pu("year",t.year)}function Lre(t){const{hour:e,minute:i,second:r,millisecond:s}=t,n=Xd(e,0,23)||e===24&&i===0&&r===0&&s===0,o=Xd(i,0,59),a=Xd(r,0,59),l=Xd(s,0,999);return n?o?a?l?!1:pu("millisecond",s):pu("second",r):pu("minute",i):pu("hour",e)}const RO="Invalid DateTime",Uz=864e13;function pT(t){return new mc("unsupported zone",`the zone "${t.name}" is not supported`)}function kO(t){return t.weekData===null&&(t.weekData=N8(t.c)),t.weekData}function L_(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new xi({...i,...e,old:i})}function Pre(t,e,i){let r=t-e*60*1e3;const s=i.offset(r);if(e===s)return[r,e];r-=(s-e)*60*1e3;const n=i.offset(r);return s===n?[r,s]:[t-Math.min(s,n)*60*1e3,Math.max(s,n)]}function Vz(t,e){t+=e*60*1e3;const i=new Date(t);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function _M(t,e,i){return Pre(_D(t),e,i)}function Bz(t,e){const i=t.o,r=t.c.year+Math.trunc(e.years),s=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,n={...t.c,year:r,month:s,day:Math.min(t.c.day,YA(r,s))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=Ji.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=_D(n);let[l,u]=Pre(a,i,t.zone);return o!==0&&(l+=o,u=t.zone.offset(l)),{ts:l,o:u}}function P_(t,e,i,r,s,n){const{setZone:o,zone:a}=i;if(t&&Object.keys(t).length!==0){const l=e||a,u=xi.fromObject(t,{...i,zone:l,specificOffset:n});return o?u:u.setZone(a)}else return xi.invalid(new mc("unparsable",`the input "${s}" can't be parsed as ${r}`))}function fT(t,e,i=!0){return t.isValid?wo.create(Vr.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function LO(t,e){const i=t.c.year>9999||t.c.year<0;let r="";return i&&t.c.year>=0&&(r+="+"),r+=zs(t.c.year,i?6:4),e?(r+="-",r+=zs(t.c.month),r+="-",r+=zs(t.c.day)):(r+=zs(t.c.month),r+=zs(t.c.day)),r}function zz(t,e,i,r,s,n){let o=zs(t.c.hour);return e?(o+=":",o+=zs(t.c.minute),(t.c.second!==0||!i)&&(o+=":")):o+=zs(t.c.minute),(t.c.second!==0||!i)&&(o+=zs(t.c.second),(t.c.millisecond!==0||!r)&&(o+=".",o+=zs(t.c.millisecond,3))),s&&(t.isOffsetFixed&&t.offset===0&&!n?o+="Z":t.o<0?(o+="-",o+=zs(Math.trunc(-t.o/60)),o+=":",o+=zs(Math.trunc(-t.o%60))):(o+="+",o+=zs(Math.trunc(t.o/60)),o+=":",o+=zs(Math.trunc(t.o%60)))),n&&(o+="["+t.zone.ianaName+"]"),o}const Nre={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},sIe={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},nIe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Fre=["year","month","day","hour","minute","second","millisecond"],oIe=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],aIe=["year","ordinal","hour","minute","second","millisecond"];function Gz(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new jie(t);return e}function qz(t,e){const i=Wf(e.zone,Bs.defaultZone),r=Vr.fromObject(e),s=Bs.now();let n,o;if(Gi(t.year))n=s;else{for(const u of Fre)Gi(t[u])&&(t[u]=Nre[u]);const a=kre(t)||Lre(t);if(a)return xi.invalid(a);const l=i.offset(s);[n,o]=_M(t,l,i)}return new xi({ts:n,zone:i,loc:r,o})}function Hz(t,e,i){const r=Gi(i.round)?!0:i.round,s=(o,a)=>(o=wD(o,r||i.calendary?0:2,!0),e.loc.clone(i).relFormatter(i).format(o,a)),n=o=>i.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(i.unit)return s(n(i.unit),i.unit);for(const o of i.units){const a=n(o);if(Math.abs(a)>=1)return s(a,o)}return s(t>e?-0:0,i.units[i.units.length-1])}function Wz(t){let e={},i;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],i=Array.from(t).slice(0,t.length-1)):i=Array.from(t),[e,i]}class xi{constructor(e){const i=e.zone||Bs.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new mc("invalid input"):null)||(i.isValid?null:pT(i));this.ts=Gi(e.ts)?Bs.now():e.ts;let s=null,n=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[s,n]=[e.old.c,e.old.o];else{const a=i.offset(this.ts);s=Vz(this.ts,a),r=Number.isNaN(s.year)?new mc("invalid input"):null,s=r?null:s,n=r?null:a}this._zone=i,this.loc=e.loc||Vr.create(),this.invalid=r,this.weekData=null,this.c=s,this.o=n,this.isLuxonDateTime=!0}static now(){return new xi({})}static local(){const[e,i]=Wz(arguments),[r,s,n,o,a,l,u]=i;return qz({year:r,month:s,day:n,hour:o,minute:a,second:l,millisecond:u},e)}static utc(){const[e,i]=Wz(arguments),[r,s,n,o,a,l,u]=i;return e.zone=xo.utcInstance,qz({year:r,month:s,day:n,hour:o,minute:a,second:l,millisecond:u},e)}static fromJSDate(e,i={}){const r=REe(e)?e.valueOf():NaN;if(Number.isNaN(r))return xi.invalid("invalid input");const s=Wf(i.zone,Bs.defaultZone);return s.isValid?new xi({ts:r,zone:s,loc:Vr.fromObject(i)}):xi.invalid(pT(s))}static fromMillis(e,i={}){if(m0(e))return e<-Uz||e>Uz?xi.invalid("Timestamp out of range"):new xi({ts:e,zone:Wf(i.zone,Bs.defaultZone),loc:Vr.fromObject(i)});throw new cu(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(m0(e))return new xi({ts:e*1e3,zone:Wf(i.zone,Bs.defaultZone),loc:Vr.fromObject(i)});throw new cu("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const r=Wf(i.zone,Bs.defaultZone);if(!r.isValid)return xi.invalid(pT(r));const s=Bs.now(),n=Gi(i.specificOffset)?r.offset(s):i.specificOffset,o=QA(e,Gz),a=!Gi(o.ordinal),l=!Gi(o.year),u=!Gi(o.month)||!Gi(o.day),c=l||u,d=o.weekYear||o.weekNumber,f=Vr.fromObject(i);if((c||a)&&d)throw new H2("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&a)throw new H2("Can't mix ordinal dates with month/day");const m=d||o.weekday&&!c;let g,v,b=Vz(s,n);m?(g=oIe,v=sIe,b=N8(b)):a?(g=aIe,v=nIe,b=OO(b)):(g=Fre,v=Nre);let _=!1;for(const L of g){const B=o[L];Gi(B)?_?o[L]=v[L]:o[L]=b[L]:_=!0}const S=m?iIe(o):a?rIe(o):kre(o),M=S||Lre(o);if(M)return xi.invalid(M);const x=m?Dz(o):a?jz(o):o,[T,I]=_M(x,n,r),$=new xi({ts:T,zone:r,o:I,loc:f});return o.weekday&&c&&e.weekday!==$.weekday?xi.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${$.toISO()}`):$}static fromISO(e,i={}){const[r,s]=_Te(e);return P_(r,s,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[r,s]=xTe(e);return P_(r,s,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[r,s]=STe(e);return P_(r,s,i,"HTTP",i)}static fromFormat(e,i,r={}){if(Gi(e)||Gi(i))throw new cu("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:n=null}=r,o=Vr.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0}),[a,l,u,c]=tIe(o,e,i);return c?xi.invalid(c):P_(a,l,r,`format ${i}`,e,u)}static fromString(e,i,r={}){return xi.fromFormat(e,i,r)}static fromSQL(e,i={}){const[r,s]=$Te(e);return P_(r,s,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new cu("need to specify a reason the DateTime is invalid");const r=e instanceof mc?e:new mc(e,i);if(Bs.throwOnInvalid)throw new uEe(r);return new xi({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const r=Mre(e,Vr.fromObject(i));return r?r.map(s=>s?s.val:null).join(""):null}static expandFormat(e,i={}){return Tre(wo.parseFormat(e),Vr.fromObject(i)).map(s=>s.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?kO(this).weekYear:NaN}get weekNumber(){return this.isValid?kO(this).weekNumber:NaN}get weekday(){return this.isValid?kO(this).weekday:NaN}get ordinal(){return this.isValid?OO(this.c).ordinal:NaN}get monthShort(){return this.isValid?dT.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?dT.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?dT.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?dT.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return H3(this.year)}get daysInMonth(){return YA(this.year,this.month)}get daysInYear(){return this.isValid?Fx(this.year):NaN}get weeksInWeekYear(){return this.isValid?KA(this.weekYear):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:r,calendar:s}=wo.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:s}}toUTC(e=0,i={}){return this.setZone(xo.instance(e),i)}toLocal(){return this.setZone(Bs.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(e=Wf(e,Bs.defaultZone),e.equals(this.zone))return this;if(e.isValid){let s=this.ts;if(i||r){const n=e.offset(this.ts),o=this.toObject();[s]=_M(o,n,e)}return L_(this,{ts:s,zone:e})}else return xi.invalid(pT(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:r}={}){const s=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:r});return L_(this,{loc:s})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=QA(e,Gz),r=!Gi(i.weekYear)||!Gi(i.weekNumber)||!Gi(i.weekday),s=!Gi(i.ordinal),n=!Gi(i.year),o=!Gi(i.month)||!Gi(i.day),a=n||o,l=i.weekYear||i.weekNumber;if((a||s)&&l)throw new H2("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&s)throw new H2("Can't mix ordinal dates with month/day");let u;r?u=Dz({...N8(this.c),...i}):Gi(i.ordinal)?(u={...this.toObject(),...i},Gi(i.day)&&(u.day=Math.min(YA(u.year,u.month),u.day))):u=jz({...OO(this.c),...i});const[c,d]=_M(u,this.o,this.zone);return L_(this,{ts:c,o:d})}plus(e){if(!this.isValid)return this;const i=Ji.fromDurationLike(e);return L_(this,Bz(this,i))}minus(e){if(!this.isValid)return this;const i=Ji.fromDurationLike(e).negate();return L_(this,Bz(this,i))}startOf(e){if(!this.isValid)return this;const i={},r=Ji.normalizeUnit(e);switch(r){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(r==="weeks"&&(i.weekday=1),r==="quarters"){const s=Math.ceil(this.month/3);i.month=(s-1)*3+1}return this.set(i)}endOf(e){return this.isValid?this.plus({[e]:1}).startOf(e).minus(1):this}toFormat(e,i={}){return this.isValid?wo.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):RO}toLocaleString(e=ZA,i={}){return this.isValid?wo.create(this.loc.clone(i),e).formatDateTime(this):RO}toLocaleParts(e={}){return this.isValid?wo.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:s=!0,extendedZone:n=!1}={}){if(!this.isValid)return null;const o=e==="extended";let a=LO(this,o);return a+="T",a+=zz(this,o,i,r,s,n),a}toISODate({format:e="extended"}={}){return this.isValid?LO(this,e==="extended"):null}toISOWeekDate(){return fT(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:s=!1,extendedZone:n=!1,format:o="extended"}={}){return this.isValid?(s?"T":"")+zz(this,o==="extended",i,e,r,n):null}toRFC2822(){return fT(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return fT(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?LO(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let s="HH:mm:ss.SSS";return(i||e)&&(r&&(s+=" "),i?s+="z":e&&(s+="ZZ")),fT(this,s,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():RO}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",r={}){if(!this.isValid||!e.isValid)return Ji.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...r},n=kEe(i).map(Ji.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,l=o?e:this,u=UTe(a,l,n,s);return o?u.negate():u}diffNow(e="milliseconds",i={}){return this.diff(xi.now(),e,i)}until(e){return this.isValid?fs.fromDateTimes(this,e):this}hasSame(e,i){if(!this.isValid)return!1;const r=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(i)<=r&&r<=s.endOf(i)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||xi.fromObject({},{zone:this.zone}),r=e.padding?this<i?-e.padding:e.padding:0;let s=["years","months","days","hours","minutes","seconds"],n=e.unit;return Array.isArray(e.unit)&&(s=e.unit,n=void 0),Hz(i,this.plus(r),{...e,numeric:"always",units:s,unit:n})}toRelativeCalendar(e={}){return this.isValid?Hz(e.base||xi.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(xi.isDateTime))throw new cu("min requires all arguments be DateTimes");return Oz(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(xi.isDateTime))throw new cu("max requires all arguments be DateTimes");return Oz(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,r={}){const{locale:s=null,numberingSystem:n=null}=r,o=Vr.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});return Ire(o,e,i)}static fromStringExplain(e,i,r={}){return xi.fromFormatExplain(e,i,r)}static get DATE_SHORT(){return ZA}static get DATE_MED(){return Uie}static get DATE_MED_WITH_WEEKDAY(){return dEe}static get DATE_FULL(){return Vie}static get DATE_HUGE(){return Bie}static get TIME_SIMPLE(){return zie}static get TIME_WITH_SECONDS(){return Gie}static get TIME_WITH_SHORT_OFFSET(){return qie}static get TIME_WITH_LONG_OFFSET(){return Hie}static get TIME_24_SIMPLE(){return Wie}static get TIME_24_WITH_SECONDS(){return Jie}static get TIME_24_WITH_SHORT_OFFSET(){return Zie}static get TIME_24_WITH_LONG_OFFSET(){return Yie}static get DATETIME_SHORT(){return Kie}static get DATETIME_SHORT_WITH_SECONDS(){return Qie}static get DATETIME_MED(){return Xie}static get DATETIME_MED_WITH_SECONDS(){return ere}static get DATETIME_MED_WITH_WEEKDAY(){return pEe}static get DATETIME_FULL(){return tre}static get DATETIME_FULL_WITH_SECONDS(){return ire}static get DATETIME_HUGE(){return rre}static get DATETIME_HUGE_WITH_SECONDS(){return sre}}function N_(t){if(xi.isDateTime(t))return t;if(t&&t.valueOf&&m0(t.valueOf()))return xi.fromJSDate(t);if(t&&typeof t=="object")return xi.fromObject(t);throw new cu(`Unknown datetime argument: ${t}, of type ${typeof t}`)}function lIe(t,e="system"){if(!t||!xz.has(t.timeZone))return e;const i=xz.get(t.timeZone);return cIe(t.timeZone)||t.respectsDaylightSaving?i:uIe(i)}function uIe(t){const e=xi.local().setZone(t),i=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${xo.instance(-i).formatOffset(0,"narrow")}`}function cIe(t){return t.startsWith("UTC")}let wf=class extends Er(Je){constructor(e){super(e),this.legacy=null,this.timeZone="system"}readLegacy(e,i){const{timeZone:r,respectsDaylightSaving:s}=i;return{timeZone:r,respectsDaylightSaving:s}}readTimeZone(e,i){return"timeZoneIANA"in i?i.timeZoneIANA:lIe(i)}writeTimeZone(e,i){i.timeZoneIANA=e}equals(e){return!(Re(e)||Re(this.timeZone)||Re(e.timeZone))&&this.timeZone===e.timeZone}};h([p()],wf.prototype,"legacy",void 0),h([Ye("legacy",["timeZone"])],wf.prototype,"readLegacy",null),h([p({type:String,nonNullable:!0})],wf.prototype,"timeZone",void 0),h([Ye("timeZone",["timeZone","timeZoneIANA","respectsDaylightSaving"])],wf.prototype,"readTimeZone",null),h([it("timeZone")],wf.prototype,"writeTimeZone",null),wf=h([ce("esri.time.TimeReference")],wf);const Am=wf;let Sd=class extends Er(Je){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.dateFieldsTimeReference=null}};h([p()],Sd.prototype,"creatorField",void 0),h([p()],Sd.prototype,"creationDateField",void 0),h([p()],Sd.prototype,"editorField",void 0),h([p()],Sd.prototype,"editDateField",void 0),h([p()],Sd.prototype,"realm",void 0),h([p({type:Am})],Sd.prototype,"dateFieldsTimeReference",void 0),Sd=h([ce("esri.layers.support.EditFieldsInfo")],Sd);const hIe=Sd;let ph=class extends Er(Je){constructor(e){super(e)}};h([p({constructOnly:!0,json:{write:!0}})],ph.prototype,"name",void 0),h([p({constructOnly:!0,json:{write:!0}})],ph.prototype,"fields",void 0),h([p({constructOnly:!0,json:{write:!0}})],ph.prototype,"isAscending",void 0),h([p({constructOnly:!0,json:{write:!0}})],ph.prototype,"indexType",void 0),h([p({constructOnly:!0,json:{write:!0}})],ph.prototype,"isUnique",void 0),h([p({constructOnly:!0,json:{write:!0}})],ph.prototype,"description",void 0),ph=h([ce("esri.layers.support.FeatureIndex")],ph);var F8;let In=F8=class extends Je{constructor(t){super(t),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10}clone(){return new F8(Le({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};h([p({type:[String],json:{write:!0}})],In.prototype,"attachmentTypes",void 0),h([p({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],In.prototype,"attachmentsWhere",void 0),h([p({type:Boolean,json:{write:!0}})],In.prototype,"cacheHint",void 0),h([p({type:[String],json:{write:!0}})],In.prototype,"keywords",void 0),h([p({type:[Number],json:{write:!0}})],In.prototype,"globalIds",void 0),h([p({json:{write:!0}})],In.prototype,"name",void 0),h([p({type:Number,json:{read:{source:"resultRecordCount"}}})],In.prototype,"num",void 0),h([p({type:[Number],json:{write:!0}})],In.prototype,"objectIds",void 0),h([p({type:Boolean,json:{default:!1,write:!0}})],In.prototype,"returnMetadata",void 0),h([p({type:[Number],json:{write:!0}})],In.prototype,"size",void 0),h([p({type:Number,json:{read:{source:"resultOffset"}}})],In.prototype,"start",void 0),h([it("start"),it("num")],In.prototype,"writeStart",null),h([p({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],In.prototype,"where",void 0),In=F8=h([ce("esri.rest.support.AttachmentQuery")],In),In.from=ns(In);const XA=In;var D8;let zr=D8=class extends Je{constructor(t){super(t),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(e.definitionExpression="1=1")}clone(){return new D8(Le({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};h([p({type:Boolean,json:{write:!0}})],zr.prototype,"cacheHint",void 0),h([p({type:Jo,json:{write:!0}})],zr.prototype,"dynamicDataSource",void 0),h([p({type:String,json:{write:!0}})],zr.prototype,"gdbVersion",void 0),h([p({type:Number,json:{write:!0}})],zr.prototype,"geometryPrecision",void 0),h([p({type:Date})],zr.prototype,"historicMoment",void 0),h([it("historicMoment")],zr.prototype,"_writeHistoricMoment",null),h([p({type:Number,json:{write:!0}})],zr.prototype,"maxAllowableOffset",void 0),h([p({type:[Number],json:{write:!0}})],zr.prototype,"objectIds",void 0),h([p({type:[String],json:{write:!0}})],zr.prototype,"orderByFields",void 0),h([p({type:[String],json:{write:!0}})],zr.prototype,"outFields",void 0),h([p({type:Tt,json:{read:{source:"outSR"},write:{target:"outSR"}}})],zr.prototype,"outSpatialReference",void 0),h([p({json:{write:!0}})],zr.prototype,"relationshipId",void 0),h([p({type:Number,json:{read:{source:"resultOffset"}}})],zr.prototype,"start",void 0),h([it("start"),it("num")],zr.prototype,"writeStart",null),h([p({type:Number,json:{read:{source:"resultRecordCount"}}})],zr.prototype,"num",void 0),h([p({json:{write:!0}})],zr.prototype,"returnGeometry",void 0),h([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],zr.prototype,"returnM",void 0),h([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],zr.prototype,"returnZ",void 0),h([p({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],zr.prototype,"where",void 0),zr=D8=h([ce("esri.rest.support.RelationshipQuery")],zr),zr.from=ns(zr);const tw=zr,Jz=Object.freeze(Object.defineProperty({__proto__:null,default:tw},Symbol.toStringTag,{value:"Module"})),j8=new si({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function dIe(t,e,i,r){const s=await Qm(t);if(await ID(t,e,r),!s.addAttachment)throw new Ce(r,"Layer source does not support addAttachment capability");return s.addAttachment(e,i)}function ID(t,e,i){const{attributes:r}=e,{objectIdField:s}=t;return t.get("capabilities.data.supportsAttachment")?e?r?s&&r[s]?Promise.resolve():Promise.reject(new Ce(i,`feature is missing the identifying attribute ${s}`)):Promise.reject(new Ce(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new Ce(i,"A feature is required to add/delete/update attachments")):Promise.reject(new Ce(i,"this layer doesn't support attachments"))}async function pIe(t,e,i,r,s){const n=await Qm(t);if(await ID(t,e,s),!n.updateAttachment)throw new Ce(s,"Layer source does not support updateAttachment capability");return n.updateAttachment(e,i,r)}async function fIe(t,e,i){const r=await De(()=>import("./editingSupport-9ac49d87.js"),["./editingSupport-9ac49d87.js","./assetEditingSupport-2cebf928.js","./preload-helper-388ac9d5.js"],import.meta.url),s=await t.load();return r.applyEdits(s,s.source,e,i)}async function mIe(t,e,i,r){const s=await Qm(t);if(await ID(t,e,r),!s.deleteAttachments)throw new Ce(r,"Layer source does not support deleteAttachments capability");return s.deleteAttachments(e,i)}async function yIe(t,e,i){const r=(await t.load({signal:e?.signal})).source;if(!r.fetchRecomputedExtents)throw new Ce(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(e)}async function gIe(t,e,i,r){e=XA.from(e),await t.load();const s=t.source,n=t.capabilities;if(!n?.data?.supportsAttachment)throw new Ce(r,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:a,globalIds:l,num:u,size:c,start:d,where:f}=e;if(!n?.operations?.supportsQueryAttachments&&(o?.length>0||l?.length>0||c?.length>0||u||d||f))throw new Ce(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(a?.length||l?.length||f))throw new Ce(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);if(!s.queryAttachments)throw new Ce(r,"Layer source does not support queryAttachments capability",e);return s.queryAttachments(e)}async function vIe(t,e,i,r){const s=await Qm(t);if(!s.queryObjectIds)throw new Ce(r,"Layer source does not support queryObjectIds capability");return s.queryObjectIds(Ls.from(e)??t.createQuery(),i)}async function bIe(t,e,i,r){const s=await Qm(t);if(!s.queryFeatureCount)throw new Ce(r,"Layer source does not support queryFeatureCount capability");return s.queryFeatureCount(Ls.from(e)??t.createQuery(),i)}async function wIe(t,e,i,r){const s=await Qm(t);if(!s.queryExtent)throw new Ce(r,"Layer source does not support queryExtent capability");return s.queryExtent(Ls.from(e)??t.createQuery(),i)}async function _Ie(t,e,i,r){const s=await Qm(t);if(!s.queryRelatedFeatures)throw new Ce(r,"Layer source does not support queryRelatedFeatures capability");return s.queryRelatedFeatures(tw.from(e),i)}async function xIe(t,e,i,r){const s=await Qm(t);if(!s.queryRelatedFeaturesCount)throw new Ce(r,"Layer source does not support queryRelatedFeaturesCount capability");return s.queryRelatedFeaturesCount(tw.from(e),i)}async function SIe(t){const e=t.source;if(e?.refresh)try{const{dataChanged:i,updates:r}=await e.refresh();if(ee(r)&&(t.sourceJSON={...t.sourceJSON,...r},t.read(r,{origin:"service",url:t.parsedUrl})),i)return!0}catch{}if(t.definitionExpression)try{return(await lxe(t.definitionExpression,t.fieldsIndex)).hasDateFunctions}catch{}return!1}function EIe(t){const e=new Ls,i=t.get("capabilities.data"),r=t.get("capabilities.query");e.historicMoment=t.historicMoment,e.gdbVersion=t.gdbVersion,e.returnGeometry=!0,r&&(e.compactGeometryEnabled=r.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),i&&(i.supportsZ&&t.returnZ!=null&&(e.returnZ=t.returnZ),i.supportsM&&t.returnM!=null&&(e.returnM=t.returnM)),e.outFields=["*"];const{timeOffset:s,timeExtent:n}=t;return e.timeExtent=s!=null&&n!=null?n.offset(-s.value,s.unit):n||null,e.multipatchOption=t.geometryType==="multipatch"?"xyFootprint":null,e}function Dre(t){const{globalIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function jre(t){const{objectIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function TIe(t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}async function Qm(t){return(await t.load()).source}async function IIe(t,e){if(!xr||xr.findCredential(t))return;let i;try{const r=await gX(t,e);r&&(i=await xr.checkSignInStatus(`${r}/sharing`))}catch{}if(i)try{const r=ee(e)?e.signal:null;await xr.getCredential(t,{signal:r})}catch{}}async function MIe(t,e){const i=t.parsedUrl?.path;if(!i)return;const r=t.editFieldsInfo;(t.userHasUpdateItemPrivileges||t.userHasFullEditingPrivileges&&t.capabilities.operations.supportsEditing||r?.creatorField||r?.editorField)&&await IIe(i,e)}function AIe(t){return!t.sourceJSON?.isMultiServicesView&&(t.userHasUpdateItemPrivileges||t.editingEnabled)}let vv=class extends Er(Je){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};h([p({type:String,json:{read:{source:"shapeAreaFieldName"}}})],vv.prototype,"shapeAreaField",void 0),h([p({type:String,json:{read:{source:"shapeLengthFieldName"}}})],vv.prototype,"shapeLengthField",void 0),h([p({type:String,json:{read:t=>SS.read(t)||up.read(t)}})],vv.prototype,"units",void 0),vv=h([ce("esri.layers.support.GeometryFieldsInfo")],vv);const CIe=vv;var U8;let bv=U8=class extends Je{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new Nt}clone(){return new U8({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};h([p({type:String,json:{write:!0}})],bv.prototype,"floorField",void 0),h([p({json:{read:!1,write:!1}})],bv.prototype,"viewAllMode",void 0),h([p({json:{read:!1,write:!1}})],bv.prototype,"viewAllLevelIds",void 0),bv=U8=h([ce("esri.layers.support.LayerFloorInfo")],bv);const Ure=bv,Zz=new si({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),Yz=new si({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let tu=class extends Er(Je){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};h([p({json:{read:Zz.read,write:Zz.write}})],tu.prototype,"cardinality",void 0),h([p({json:{read:!0,write:!0}})],tu.prototype,"composite",void 0),h([p({json:{read:!0,write:!0}})],tu.prototype,"id",void 0),h([p({json:{read:!0,write:!0}})],tu.prototype,"keyField",void 0),h([p({json:{read:!0,write:!0}})],tu.prototype,"keyFieldInRelationshipTable",void 0),h([p({json:{read:!0,write:!0}})],tu.prototype,"name",void 0),h([p({json:{read:!0,write:!0}})],tu.prototype,"relatedTableId",void 0),h([p({json:{read:!0,write:!0}})],tu.prototype,"relationshipTableId",void 0),h([p({json:{read:Yz.read,write:Yz.write}})],tu.prototype,"role",void 0),tu=h([ce("esri.layers.support.Relationship")],tu);const $Ie=tu,OIe={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function ii(t,e,i){return!!(t&&t.hasOwnProperty(e)?t[e]:i)}function mT(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}function RIe(t){const e=t?.supportedSpatialAggregationStatistics?.map(i=>i.toLowerCase());return{envelope:!!e?.includes("envelopeaggregate"),centroid:!!e?.includes("centroidaggregate"),convexHull:!!e?.includes("convexhullaggregate")}}function Z3(t,e){return!!t?.supportedOperationsWithCacheHint?.map(r=>r.toLowerCase())?.includes(e.toLowerCase())}function MD(t,e){return{analytics:kIe(t),attachment:LIe(t),data:PIe(t),metadata:NIe(t),operations:FIe(t.capabilities,t,e),query:DIe(t,e),queryRelated:jIe(t),queryTopFeatures:UIe(t),editing:VIe(t)}}function kIe(t){return{supportsCacheHint:Z3(t.advancedQueryCapabilities,"queryAnalytics")}}function LIe(t){const e=t.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:Z3(t.advancedQueryCapabilities,"queryAttachments"),supportsResize:ii(t,"supportsAttachmentsResizing",!1)};return e&&Array.isArray(e)&&e.forEach(r=>{const s=OIe[r.name];s&&(i[s]=!!r.isEnabled)}),i}function PIe(t){return{isVersioned:ii(t,"isDataVersioned",!1),supportsAttachment:ii(t,"hasAttachments",!1),supportsM:ii(t,"hasM",!1),supportsZ:ii(t,"hasZ",!1)}}function NIe(t){return{supportsAdvancedFieldProperties:ii(t,"supportsFieldDescriptionProperty",!1)}}function FIe(t,e,i){const r=t?t.toLowerCase().split(",").map(f=>f.trim()):[],s=i?o1(i):null,n=r.includes(ee(s)&&s.serverType==="MapServer"?"data":"query"),o=r.includes("editing")&&!e.datesInUnknownTimezone;let a=o&&r.includes("create"),l=o&&r.includes("delete"),u=o&&r.includes("update");const c=r.includes("changetracking"),d=e.advancedQueryCapabilities;return o&&!(a||l||u)&&(a=l=u=!0),{supportsCalculate:ii(e,"supportsCalculate",!1),supportsTruncate:ii(e,"supportsTruncate",!1),supportsValidateSql:ii(e,"supportsValidateSql",!1),supportsAdd:a,supportsDelete:l,supportsEditing:o,supportsChangeTracking:c,supportsQuery:n,supportsQueryAnalytics:ii(d,"supportsQueryAnalytic",!1),supportsQueryAttachments:ii(d,"supportsQueryAttachments",!1),supportsQueryTopFeatures:ii(d,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:ii(e,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:u,supportsExceedsLimitStatistics:ii(e,"supportsExceedsLimitStatistics",!1)}}function DIe(t,e){const i=t.advancedQueryCapabilities,r=t.ownershipBasedAccessControlForFeatures,s=t.archivingInfo,n=t.currentVersion,o=e?.includes("MapServer"),a=!o||n>=Ze("mapserver-pbf-version-support"),l=hD(e),u=new Set((t.supportedQueryFormats??"").split(",").map(c=>c.toLowerCase().trim()));return{supportsStatistics:ii(i,"supportsStatistics",t.supportsStatistics),supportsPercentileStatistics:ii(i,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:ii(i,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:RIe(i),supportsCentroid:ii(i,"supportsReturningGeometryCentroid",!1),supportsDistance:ii(i,"supportsQueryWithDistance",!1),supportsDistinct:ii(i,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:ii(i,"supportsReturningQueryExtent",!1),supportsGeometryProperties:ii(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:ii(i,"supportsHavingClause",!1),supportsOrderBy:ii(i,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:ii(i,"supportsPagination",!1),supportsQuantization:ii(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:ii(t,"supportsQuantizationEditMode",!1),supportsQueryGeometry:ii(t,"supportsReturningQueryGeometry",!1),supportsResultType:ii(i,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:ii(i,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:ii(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:ii(t,"useStandardizedQueries",!1),supportsTopFeaturesQuery:ii(i,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:ii(r,"allowOthersToQuery",!0),supportsHistoricMoment:ii(s,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:a&&u.has("pbf"),supportsDisjointSpatialRelationship:ii(i,"supportsDisjointSpatialRel",!1),supportsCacheHint:ii(i,"supportsQueryWithCacheHint",!1)||Z3(i,"query"),supportsDefaultSpatialReference:ii(i,"supportsDefaultSR",!1),supportsCompactGeometry:l,supportsFullTextSearch:ii(i,"supportsFullTextSearch",!1),maxRecordCountFactor:mT(t,"maxRecordCountFactor",void 0),maxRecordCount:mT(t,"maxRecordCount",void 0),standardMaxRecordCount:mT(t,"standardMaxRecordCount",void 0),tileMaxRecordCount:mT(t,"tileMaxRecordCount",void 0)}}function jIe(t){const e=t.advancedQueryCapabilities,i=ii(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:ii(e,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:Z3(e,"queryRelated")}}function UIe(t){return{supportsCacheHint:Z3(t.advancedQueryCapabilities,"queryTopFilter")}}function VIe(t){const e=t.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:ii(t,"allowGeometryUpdates",!0),supportsGlobalId:ii(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:ii(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:ii(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:ii(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:ii(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:ii(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:ii(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:ii(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:ii(e,"allowOthersToUpdate",!0)}}const BIe=t=>{let e=class extends t{constructor(){super(...arguments),this.capabilities=null,this.copyright=null,this.dateFieldsTimeReference=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.isTable=!1,this.layerId=void 0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.preferredTimeReference=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.spatialReference=Tt.WGS84,this.subtypeField=null,this.trackIdField=null,this.indexes=new(Nt.ofType(ph)),this.version=void 0}readCapabilitiesFromService(i,r){return MD(r,this.url)}get effectiveCapabilities(){const i=this.capabilities;if(!i)return null;const r=Le(i),{operations:s,editing:n}=r;return this.sourceJSON?.isMultiServicesView?(this.userHasUpdateItemPrivileges&&(s.supportsQuery=!0),r):this.userHasUpdateItemPrivileges?(s.supportsAdd=s.supportsDelete=s.supportsEditing=s.supportsQuery=s.supportsUpdate=n.supportsDeleteByOthers=n.supportsGeometryUpdate=n.supportsUpdateByOthers=!0,r):(this.userHasFullEditingPrivileges&&s.supportsEditing&&(s.supportsAdd=s.supportsDelete=s.supportsUpdate=n.supportsGeometryUpdate=!0),r)}readEditingInfo(i,r){const{editingInfo:s}=r;return s?{lastEditDate:s.lastEditDate!=null?new Date(s.lastEditDate):null}:null}readIsTableFromService(i,r){return r.type==="Table"}readMinScale(i,r){return r.effectiveMinScale||i||0}readMaxScale(i,r){return r.effectiveMaxScale||i||0}readGlobalIdFieldFromService(i,r){return Dre(r)}readObjectIdFieldFromService(i,r){return jre(r)}readServiceDefinitionExpression(i,r){return r.definitionQuery||r.definitionExpression}set url(i){const r=fSe({layer:this,url:i,nonStandardUrlAllowed:!0,logger:tt.getLogger(this.declaredClass)});this._set("url",r.url),r.layerId!=null&&this._set("layerId",r.layerId)}writeUrl(i,r,s,n){mSe(this,i,null,r,n)}readVersion(i,r){return TIe(r)}};return h([p({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],e.prototype,"capabilities",void 0),h([Ye("service","capabilities")],e.prototype,"readCapabilitiesFromService",null),h([p({readOnly:!0})],e.prototype,"effectiveCapabilities",null),h([p({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],e.prototype,"copyright",void 0),h([p({type:Am})],e.prototype,"dateFieldsTimeReference",void 0),h([p({type:Boolean})],e.prototype,"datesInUnknownTimezone",void 0),h([p({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],e.prototype,"displayField",void 0),h([p({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],e.prototype,"definitionExpression",void 0),h([p({readOnly:!0,type:hIe})],e.prototype,"editFieldsInfo",void 0),h([p({readOnly:!0})],e.prototype,"editingInfo",void 0),h([Ye("editingInfo")],e.prototype,"readEditingInfo",null),h([p((()=>{const i=Le(sEe),r=i.json.origins;return r["web-map"]={read:!1,write:!1},r["portal-item"]={read:!1,write:!1},i})())],e.prototype,"elevationInfo",void 0),h([p({type:Ure,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],e.prototype,"floorInfo",void 0),h([p({type:Xt,json:{origins:{service:{read:{source:"extent"}}}}})],e.prototype,"fullExtent",void 0),h([p()],e.prototype,"gdbVersion",void 0),h([p({readOnly:!0,type:CIe,json:{read:{source:"geometryProperties"}}})],e.prototype,"geometryFieldsInfo",void 0),h([p({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:j8.read}}}})],e.prototype,"geometryType",void 0),h([p({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasM",void 0),h([p({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasZ",void 0),h([p({readOnly:!0,type:mC})],e.prototype,"heightModelInfo",void 0),h([p({type:Date})],e.prototype,"historicMoment",void 0),h([p({readOnly:!0})],e.prototype,"isTable",void 0),h([Ye("service","isTable",["type"])],e.prototype,"readIsTableFromService",null),h([p({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],e.prototype,"layerId",void 0),h([p(aEe)],e.prototype,"minScale",void 0),h([Ye("service","minScale",["minScale","effectiveMinScale"])],e.prototype,"readMinScale",null),h([p(lEe)],e.prototype,"maxScale",void 0),h([Ye("service","maxScale",["maxScale","effectiveMaxScale"])],e.prototype,"readMaxScale",null),h([p({type:String})],e.prototype,"globalIdField",void 0),h([Ye("service","globalIdField",["globalIdField","fields"])],e.prototype,"readGlobalIdFieldFromService",null),h([p({type:String})],e.prototype,"objectIdField",void 0),h([Ye("service","objectIdField",["objectIdField","fields"])],e.prototype,"readObjectIdFieldFromService",null),h([p({type:Am})],e.prototype,"preferredTimeReference",void 0),h([p({type:[$Ie],readOnly:!0})],e.prototype,"relationships",void 0),h([p()],e.prototype,"sourceJSON",void 0),h([p({type:Boolean})],e.prototype,"returnM",void 0),h([p({type:Boolean})],e.prototype,"returnZ",void 0),h([p({readOnly:!0})],e.prototype,"serviceDefinitionExpression",void 0),h([Ye("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],e.prototype,"readServiceDefinitionExpression",null),h([p({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],e.prototype,"serviceItemId",void 0),h([p({type:Tt,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],e.prototype,"spatialReference",void 0),h([p({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],e.prototype,"subtypeField",void 0),h([p({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],e.prototype,"trackIdField",void 0),h([p({readOnly:!0,json:{write:!1}})],e.prototype,"serverGens",void 0),h([p({type:Nt.ofType(ph),readOnly:!0})],e.prototype,"indexes",void 0),h([p(G3)],e.prototype,"url",null),h([it("url")],e.prototype,"writeUrl",null),h([p({json:{origins:{service:{read:!0}},read:!1}})],e.prototype,"version",void 0),h([Ye("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],e.prototype,"readVersion",null),e=h([ce("esri.layers.mixins.FeatureLayerBase")],e),e};let wv=class extends Er(Je){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};h([p({type:String,json:{write:!0}})],wv.prototype,"expression",void 0),h([p({type:String,json:{write:!0}})],wv.prototype,"title",void 0),h([p({type:String,json:{write:!0}})],wv.prototype,"returnType",void 0),wv=h([ce("esri.layers.support.ExpressionInfo")],wv);const AD=wv;var V8;let Ed=V8=class extends Je{constructor(t){super(t),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new V8({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:Le(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};h([p({type:Boolean,json:{write:!0}})],Ed.prototype,"isAutoGenerated",void 0),h([p({type:String,json:{write:!0}})],Ed.prototype,"name",void 0),h([p({type:String,json:{write:!0}})],Ed.prototype,"alias",void 0),h([p({type:String,json:{write:!0}})],Ed.prototype,"onStatisticField",void 0),h([p({type:AD,json:{write:!0}})],Ed.prototype,"onStatisticExpression",void 0),h([p({type:String,json:{write:!0}})],Ed.prototype,"statisticType",void 0),Ed=V8=h([ce("esri.layers.support.AggregateField")],Ed);const j0=Ed;let hm=class extends Je{constructor(){super(...arguments),this.type=null}};h([p({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],hm.prototype,"type",void 0),hm=h([ce("esri.layers.support.FeatureReduction")],hm);const CD="__begin__",$D="__end__",zIe=new RegExp(CD,"ig"),GIe=new RegExp($D,"ig"),Kz=new RegExp("^"+CD,"i"),Qz=new RegExp($D+"$","i"),e5='"',qIe=e5+" + ",HIe=" + "+e5;function WIe(t){return t.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}function JIe(t){return t.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function OD(t){const e={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(e.expression=t.labelExpressionInfo.value,e.type="conventional"):t.labelExpressionInfo.expression&&(e.expression=t.labelExpressionInfo.expression,e.type="arcade"):t.labelExpression!=null&&(e.expression=WIe(t.labelExpression),e.type="conventional"),e}function ZIe(t){const e=OD(t);if(!e)return null;switch(e.type){case"conventional":return B8(e.expression);case"arcade":return e.expression}return null}function YIe(t){const e=OD(t);if(!e)return null;switch(e.type){case"conventional":return QIe(e.expression);case"arcade":return Vre(e.expression)}return null}function B8(t){let e;return t?(e=_c(t,i=>CD+'$feature["'+i+'"]'+$D),e=Kz.test(e)?e.replace(Kz,""):e5+e,e=Qz.test(e)?e.replace(Qz,""):e+e5,e=e.replace(zIe,qIe).replace(GIe,HIe)):e='""',e}const KIe=/^\s*\{([^}]+)\}\s*$/i;function QIe(t){const e=t?.match(KIe);return e&&e[1].trim()||null}const XIe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,eMe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,tMe=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function Vre(t){if(!t)return null;let e=XIe.exec(t)||eMe.exec(t);return e?e[1]||e[3]:(e=tMe.exec(t),e?e[2]:null)}var z8;let _f=z8=class extends Je{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(t,e){return e.value?B8(e.value):t}writeExpression(t,e,i){this.value!=null&&(t=B8(this.value)),t!=null&&(e[i]=t)}clone(){return new z8({expression:this.expression,title:this.title,value:this.value})}};h([p({type:String,json:{write:{writerEnsuresNonNull:!0}}})],_f.prototype,"expression",void 0),h([Ye("expression",["expression","value"])],_f.prototype,"readExpression",null),h([it("expression")],_f.prototype,"writeExpression",null),h([p({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],_f.prototype,"title",void 0),h([p({json:{read:!1,write:!1}})],_f.prototype,"value",void 0),_f=z8=h([ce("esri.layers.support.LabelExpressionInfo")],_f);const Bre=_f,zre=[252,146,31,255],iMe={type:"esriSMS",style:"esriSMSCircle",size:6,color:zre,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},rMe={type:"esriSLS",style:"esriSLSSolid",width:.75,color:zre},sMe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},nMe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},oMe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},aMe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},lMe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},Pct=Eu.fromJSON(iMe),Nct=za.fromJSON(rMe),Fct=Tp.fromJSON(sMe),uMe=zw.fromJSON(nMe),Dct=Eu.fromJSON(oMe),jct=za.fromJSON(aMe),Uct=Tp.fromJSON(lMe);var G8;const yT=new si({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function gT(t,e,i){return{enabled:!yX(i?.layer)}}function Gre(t){return!t||t.origin!=="service"&&t.layer?.type!=="map-image"}function cMe(t){return t?.type==="map-image"}function qre(t){return!!cMe(t)&&!!t.capabilities?.exportMap?.supportsArcadeExpressionForLabeling}function hMe(t){return Gre(t)||qre(t?.layer)}let us=G8=class extends Je{static evaluateWhere(t,e){const i=(r,s,n)=>{switch(s){case"=":return r==n;case"<>":return r!=n;case">":return r>n;case">=":return r>=n;case"<":return r<n;case"<=":return r<=n}return!1};try{if(t==null)return!0;const r=t.split(" ");if(r.length===3)return i(e[r[0]],r[1],r[2]);if(r.length===7){const s=i(e[r[0]],r[1],r[2]),n=r[3],o=i(e[r[4]],r[5],r[6]);switch(n){case"AND":return s&&o;case"OR":return s||o}}return!1}catch{console.log("Error.: can't parse = "+t)}}constructor(t){super(t),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=uMe,this.useCodedValues=void 0,this.where=null}readLabelExpression(t,e){const i=e.labelExpressionInfo;if(!i||!i.value&&!i.expression)return t}writeLabelExpression(t,e,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)t=JIe(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const r=Vre(this.labelExpressionInfo.expression);r&&(t="["+r+"]")}}t!=null&&(e[i]=t)}writeLabelExpressionInfo(t,e,i,r){if(t==null&&this.labelExpression!=null&&Gre(r))t=new Bre({expression:this.getLabelExpressionArcade()});else if(!t)return;const s=t.toJSON(r);s.expression&&(e[i]=s)}writeMaxScale(t,e){(t||this.minScale)&&(e.maxScale=t)}writeMinScale(t,e){(t||this.maxScale)&&(e.minScale=t)}getLabelExpression(){return OD(this)}getLabelExpressionArcade(){return ZIe(this)}getLabelExpressionSingleField(){return YIe(this)}hash(){return JSON.stringify(this)}clone(){return new G8({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:Le(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:Le(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};h([p({type:String,json:{write:!0}})],us.prototype,"name",void 0),h([p({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:gT}}}}})],us.prototype,"allowOverrun",void 0),h([p({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:gT}}}}})],us.prototype,"deconflictionStrategy",void 0),h([p({type:String,json:{write:{overridePolicy(t,e,i){return this.labelExpressionInfo&&i?.origin==="service"&&qre(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],us.prototype,"labelExpression",void 0),h([Ye("labelExpression")],us.prototype,"readLabelExpression",null),h([it("labelExpression")],us.prototype,"writeLabelExpression",null),h([p({type:Bre,json:{write:{overridePolicy:(t,e,i)=>hMe(i)?{allowNull:!0}:{enabled:!1}}}})],us.prototype,"labelExpressionInfo",void 0),h([it("labelExpressionInfo")],us.prototype,"writeLabelExpressionInfo",null),h([p({type:yT.apiValues,json:{type:yT.jsonValues,read:yT.read,write:yT.write}})],us.prototype,"labelPlacement",void 0),h([p({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],us.prototype,"labelPosition",void 0),h([p({type:Number})],us.prototype,"maxScale",void 0),h([it("maxScale")],us.prototype,"writeMaxScale",null),h([p({type:Number})],us.prototype,"minScale",void 0),h([it("minScale")],us.prototype,"writeMinScale",null),h([p({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:gT}}}}})],us.prototype,"repeatLabel",void 0),h([p({type:Number,cast:ki,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:gT}}}}})],us.prototype,"repeatLabelDistance",void 0),h([p({types:G_e,json:{origins:{"web-scene":{types:q_e,write:CB,default:null}},write:CB,default:null}})],us.prototype,"symbol",void 0),h([p({type:Boolean,json:{write:!0}})],us.prototype,"useCodedValues",void 0),h([p({type:String,json:{write:!0}})],us.prototype,"where",void 0),us=G8=h([ce("esri.layers.support.LabelClass")],us);const Y3=us;var q8;const PO=zm({types:sC}),dMe="esri.layers.support.FeatureReductionBinning";let Fo=q8=class extends hm{constructor(t){super(t),this.type="binning",this.binType="geohash",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}writeFields(t,e,i){const r=t.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());Io(i,r,e)}readRenderer(t,e,i){const r=e.drawingInfo?.renderer;return r?RS(r,e,i)??void 0:e.defaultSymbol?e.types&&e.types.length?new Zm({defaultSymbol:PO(e.defaultSymbol,e,i),field:e.typeIdField,uniqueValueInfos:e.types.map(s=>({id:s.id,symbol:PO(s.symbol,s,i)}))}):new D0({symbol:PO(e.defaultSymbol,e,i)}):null}clone(){return new q8({fields:Le(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:Le(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:Le(this.popupTemplate),renderer:Le(this.renderer)})}};h([Dt({binning:"binning"})],Fo.prototype,"type",void 0),h([Dt({geohash:"geohash"})],Fo.prototype,"binType",void 0),h([p({type:Number,range:{min:1,max:9},json:{write:!0}})],Fo.prototype,"fixedBinLevel",void 0),h([p({type:[Y3],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Fo.prototype,"labelingInfo",void 0),h([p(gD)],Fo.prototype,"labelsVisible",void 0),h([p({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Fo.prototype,"maxScale",void 0),h([p(z3)],Fo.prototype,"popupEnabled",void 0),h([p({type:Hm,json:{name:"popupInfo",write:!0}})],Fo.prototype,"popupTemplate",void 0),h([p({type:[j0],json:{write:!0}})],Fo.prototype,"fields",void 0),h([it("fields")],Fo.prototype,"writeFields",null),h([p({types:U3,json:{write:{target:"drawingInfo.renderer"}}})],Fo.prototype,"renderer",void 0),h([Ye("renderer",["drawingInfo.renderer"])],Fo.prototype,"readRenderer",null),Fo=q8=h([ce(dMe)],Fo);const Hre=Fo;var H8;const NO=zm({types:sC}),pMe="esri.layers.support.FeatureReductionCluster";function Xz(t){return t.type==="simple"&&!t.visualVariables?.length}let js=H8=class extends Je{constructor(t){super(t),this.type="cluster",this.clusterRadius=ki("80px"),this.clusterMinSize=ki("12px"),this.clusterMaxSize=ki("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}readRenderer(t,e,i){const r=e.drawingInfo?.renderer;return r?.authoringInfo?.isAutoGenerated?null:r?Xz(r)?null:RS(r,e,i)??void 0:e.defaultSymbol?e.types&&e.types.length?new Zm({defaultSymbol:NO(e.defaultSymbol,e,i),field:e.typeIdField,uniqueValueInfos:e.types.map(s=>({id:s.id,symbol:NO(s.symbol,s,i)}))}):new D0({symbol:NO(e.defaultSymbol,e,i)}):null}readSymbol(t,e,i){const r=e.drawingInfo?.renderer;return r?.authoringInfo?.isAutoGenerated?null:r&&Xz(r)?RS(r,e,i)?.symbol:null}writeSymbol(t,e,i,r){const s=this.renderer?.authoringInfo?.isAutoGenerated;if(!this.renderer||s){const n=new D0({symbol:t});e.drawingInfo={renderer:n.write({},r)}}}writeFields(t,e,i){const r=t.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());Io(i,r,e)}readFields(t,e,i){return t.filter(r=>!r.isAutoGenerated).map(r=>j0.fromJSON(r))}clone(){return new H8({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:Le(this.labelingInfo),labelsVisible:this.labelsVisible,fields:Le(this.fields),maxScale:this.maxScale,renderer:Le(this.renderer),symbol:Le(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:Le(this.popupTemplate)})}};h([p({type:["cluster"],readOnly:!0,json:{write:!0}})],js.prototype,"type",void 0),h([p({type:Number,cast:t=>t==="auto"?t:ki(t),json:{write:!0}})],js.prototype,"clusterRadius",void 0),h([p({type:Number,cast:ki,json:{write:!0}})],js.prototype,"clusterMinSize",void 0),h([p({type:Number,cast:ki,json:{write:!0}})],js.prototype,"clusterMaxSize",void 0),h([p({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],js.prototype,"maxScale",void 0),h([p(z3)],js.prototype,"popupEnabled",void 0),h([p({type:Hm,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],js.prototype,"popupTemplate",void 0),h([p({types:U3,json:{write:{target:"drawingInfo.renderer"}}})],js.prototype,"renderer",void 0),h([Ye("renderer",["drawingInfo.renderer"])],js.prototype,"readRenderer",null),h([p({types:B_e})],js.prototype,"symbol",void 0),h([Ye("symbol",["drawingInfo.renderer"])],js.prototype,"readSymbol",null),h([it("symbol")],js.prototype,"writeSymbol",null),h([p({type:[Y3],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],js.prototype,"labelingInfo",void 0),h([p(gD)],js.prototype,"labelsVisible",void 0),h([p({type:[j0],json:{write:!0}})],js.prototype,"fields",void 0),h([it("fields")],js.prototype,"writeFields",null),h([Ye("fields")],js.prototype,"readFields",null),js=H8=h([ce(pMe)],js);const Wre=js;var W8;let xM=W8=class extends hm{constructor(t){super(t),this.type="selection"}clone(){return new W8}};h([p({type:["selection"]})],xM.prototype,"type",void 0),xM=W8=h([ce("esri.layers.support.FeatureReductionSelection")],xM);const eG=xM,tG={key:"type",base:hm,typeMap:{cluster:Wre,binning:Hre}},fMe={types:{key:"type",base:hm,typeMap:{selection:eG,cluster:Wre,binning:Hre}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:tG},"portal-item":{types:tG},"web-scene":{types:{key:"type",base:hm,typeMap:{selection:eG}}}}}},P1={Base64:0,Hex:1,String:2,Raw:3},Eb=8,Jre=(1<<Eb)-1;function im(t,e){const i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function mMe(t){const e=[];for(let i=0,r=t.length*Eb;i<r;i+=Eb)e[i>>5]|=(t.charCodeAt(i/Eb)&Jre)<<i%32;return e}function yMe(t){const e=[];for(let i=0,r=32*t.length;i<r;i+=Eb)e.push(String.fromCharCode(t[i>>5]>>>i%32&Jre));return e.join("")}function gMe(t){const e="0123456789abcdef",i=[];for(let r=0,s=4*t.length;r<s;r++)i.push(e.charAt(t[r>>2]>>r%4*8+4&15)+e.charAt(t[r>>2]>>r%4*8&15));return i.join("")}function vMe(t){const e="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let s=0,n=4*t.length;s<n;s+=3){const o=(t[s>>2]>>s%4*8&255)<<16|(t[s+1>>2]>>(s+1)%4*8&255)<<8|t[s+2>>2]>>(s+2)%4*8&255;for(let a=0;a<4;a++)8*s+6*a>32*t.length?r.push(e):r.push(i.charAt(o>>6*(3-a)&63))}return r.join("")}function bMe(t,e){return t<<e|t>>>32-e}function wC(t,e,i,r,s,n){return im(bMe(im(im(e,t),im(r,n)),s),i)}function to(t,e,i,r,s,n,o){return wC(e&i|~e&r,t,e,s,n,o)}function io(t,e,i,r,s,n,o){return wC(e&r|i&~r,t,e,s,n,o)}function ro(t,e,i,r,s,n,o){return wC(e^i^r,t,e,s,n,o)}function so(t,e,i,r,s,n,o){return wC(i^(e|~r),t,e,s,n,o)}function wMe(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let i=1732584193,r=-271733879,s=-1732584194,n=271733878;for(let o=0;o<t.length;o+=16){const a=i,l=r,u=s,c=n;i=to(i,r,s,n,t[o+0],7,-680876936),n=to(n,i,r,s,t[o+1],12,-389564586),s=to(s,n,i,r,t[o+2],17,606105819),r=to(r,s,n,i,t[o+3],22,-1044525330),i=to(i,r,s,n,t[o+4],7,-176418897),n=to(n,i,r,s,t[o+5],12,1200080426),s=to(s,n,i,r,t[o+6],17,-1473231341),r=to(r,s,n,i,t[o+7],22,-45705983),i=to(i,r,s,n,t[o+8],7,1770035416),n=to(n,i,r,s,t[o+9],12,-1958414417),s=to(s,n,i,r,t[o+10],17,-42063),r=to(r,s,n,i,t[o+11],22,-1990404162),i=to(i,r,s,n,t[o+12],7,1804603682),n=to(n,i,r,s,t[o+13],12,-40341101),s=to(s,n,i,r,t[o+14],17,-1502002290),r=to(r,s,n,i,t[o+15],22,1236535329),i=io(i,r,s,n,t[o+1],5,-165796510),n=io(n,i,r,s,t[o+6],9,-1069501632),s=io(s,n,i,r,t[o+11],14,643717713),r=io(r,s,n,i,t[o+0],20,-373897302),i=io(i,r,s,n,t[o+5],5,-701558691),n=io(n,i,r,s,t[o+10],9,38016083),s=io(s,n,i,r,t[o+15],14,-660478335),r=io(r,s,n,i,t[o+4],20,-405537848),i=io(i,r,s,n,t[o+9],5,568446438),n=io(n,i,r,s,t[o+14],9,-1019803690),s=io(s,n,i,r,t[o+3],14,-187363961),r=io(r,s,n,i,t[o+8],20,1163531501),i=io(i,r,s,n,t[o+13],5,-1444681467),n=io(n,i,r,s,t[o+2],9,-51403784),s=io(s,n,i,r,t[o+7],14,1735328473),r=io(r,s,n,i,t[o+12],20,-1926607734),i=ro(i,r,s,n,t[o+5],4,-378558),n=ro(n,i,r,s,t[o+8],11,-2022574463),s=ro(s,n,i,r,t[o+11],16,1839030562),r=ro(r,s,n,i,t[o+14],23,-35309556),i=ro(i,r,s,n,t[o+1],4,-1530992060),n=ro(n,i,r,s,t[o+4],11,1272893353),s=ro(s,n,i,r,t[o+7],16,-155497632),r=ro(r,s,n,i,t[o+10],23,-1094730640),i=ro(i,r,s,n,t[o+13],4,681279174),n=ro(n,i,r,s,t[o+0],11,-358537222),s=ro(s,n,i,r,t[o+3],16,-722521979),r=ro(r,s,n,i,t[o+6],23,76029189),i=ro(i,r,s,n,t[o+9],4,-640364487),n=ro(n,i,r,s,t[o+12],11,-421815835),s=ro(s,n,i,r,t[o+15],16,530742520),r=ro(r,s,n,i,t[o+2],23,-995338651),i=so(i,r,s,n,t[o+0],6,-198630844),n=so(n,i,r,s,t[o+7],10,1126891415),s=so(s,n,i,r,t[o+14],15,-1416354905),r=so(r,s,n,i,t[o+5],21,-57434055),i=so(i,r,s,n,t[o+12],6,1700485571),n=so(n,i,r,s,t[o+3],10,-1894986606),s=so(s,n,i,r,t[o+10],15,-1051523),r=so(r,s,n,i,t[o+1],21,-2054922799),i=so(i,r,s,n,t[o+8],6,1873313359),n=so(n,i,r,s,t[o+15],10,-30611744),s=so(s,n,i,r,t[o+6],15,-1560198380),r=so(r,s,n,i,t[o+13],21,1309151649),i=so(i,r,s,n,t[o+4],6,-145523070),n=so(n,i,r,s,t[o+11],10,-1120210379),s=so(s,n,i,r,t[o+2],15,718787259),r=so(r,s,n,i,t[o+9],21,-343485551),i=im(i,a),r=im(r,l),s=im(s,u),n=im(n,c)}return[i,r,s,n]}function Zre(t,e=P1.Hex){const i=e||P1.Base64,r=wMe(mMe(t),t.length*Eb);switch(i){case P1.Raw:return r;case P1.Hex:return gMe(r);case P1.String:return yMe(r);case P1.Base64:return vMe(r)}}var J8;let J2=J8=class extends s1{writeLevels(t,e,i){for(const r in t){const s=this.levels[r];return void(e.stops=s)}}clone(){return new J8({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:tm(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:tm(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(t=>t.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone(),levels:Le(this.levels)})}};h([p()],J2.prototype,"levels",void 0),h([it("levels")],J2.prototype,"writeLevels",null),J2=J8=h([ce("esri.views.2d.engine.LevelDependentSizeVariable")],J2);const _Me=tt.getLogger("esri.views.2d.layers.support.clusterUtils");Ze.add("esri-cluster-arcade-enabled",!0);const xMe=Ze("esri-cluster-arcade-enabled"),SMe=(t,e,i,r,s)=>{const n=e.clone();if(!TMe(n))return n;if(n.authoringInfo||(n.authoringInfo=new D3),n.authoringInfo.isAutoGenerated=!0,"visualVariables"in n){const o=(n.visualVariables||[]).filter(l=>l.valueExpression!=="$view.scale"),a=Yre(o);o.forEach(l=>{l.type==="rotation"?l.field?l.field=vy(t,l.field,"avg_angle","number"):l.valueExpression&&(l.field=F_(t,l.valueExpression,"avg_angle","number"),l.valueExpression=null):l.normalizationField?(l.field=vy(t,l.field,"avg_norm","number",l.normalizationField),l.normalizationField=null):l.field?l.field=vy(t,l.field,"avg","number"):l.valueExpression&&(l.field=F_(t,l.valueExpression,"avg","number"),l.valueExpression=null)}),Re(a)&&!EMe(o)&&s&&(o.push(Kre(i,r)),n.dynamicClusterSize=!0),n.visualVariables=o}switch(n.type){case"simple":break;case"pie-chart":for(const o of n.attributes)o.field?o.field=vy(t,o.field,"sum","number"):o.valueExpression&&(o.field=F_(t,o.valueExpression,"sum","number"),o.valueExpression=null);break;case"unique-value":n.field?n.field=vy(t,n.field,"mode","string"):n.valueExpression&&(n.field=F_(t,n.valueExpression,"mode","string"),n.valueExpression=null);break;case"class-breaks":n.normalizationField?(n.field=vy(t,n.field,"avg_norm","number",n.normalizationField),n.normalizationField=null):n.field?n.field=vy(t,n.field,"avg","number"):n.valueExpression&&(n.field=F_(t,n.valueExpression,"avg","number"),n.valueExpression=null)}return n},Yre=t=>{for(const e of t)if(e.type==="size")return e;return null};function Vct(t,e,i){const r=t.clone();let s=!1;if("visualVariables"in r){const n=(r.visualVariables||[]).filter(a=>a.valueExpression!=="$view.scale"),o=Yre(n);Re(o)&&(r.visualVariables||(r.visualVariables=[]),r.visualVariables.push(Kre(e,i)),r.dynamicClusterSize=!0,s=!0)}return{renderer:r,didInject:s}}const EMe=t=>{for(const e of t)if(e.field==="cluster_count")return!0;return!1},Kre=(t,e)=>{const i=[new uv({value:0,size:0}),new uv({value:1})];if(Re(e))return new s1({field:"cluster_count",stops:[...i,new uv({value:2,size:0})]});const r=Object.keys(e).reduce((s,n)=>({...s,[n]:[...i,new uv({value:Math.max(2,e[n].minValue),size:t.clusterMinSize}),new uv({value:Math.max(3,e[n].maxValue),size:t.clusterMaxSize})]}),{});return new J2({field:"cluster_count",levels:r})},TMe=t=>{const e=i=>_Me.error(new Ce("Unsupported-renderer",i,{renderer:t}));switch(t.type){case"unique-value":if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(t.normalizationField){const i=t.normalizationType;if(i!=="field")return e(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return e(`FeatureReductionCluster does not support renderers of type ${t.type}`),!1}if(!xMe){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function IMe(t,e,i){switch(t){case"sum":return`cluster_sum_${e}`;case"avg":case"avg_angle":return`cluster_avg_${e}`;case"mode":return`cluster_type_${e}`;case"avg_norm":{const r=i,s="field",n=e.toLowerCase()+",norm:"+s+","+r.toLowerCase();return"cluster_avg_"+Zre(n)}}}function F_(t,e,i,r){const s=Zre(e),n=i==="mode"?`cluster_type_${s}`:i==="sum"?`cluster_sum_${s}`:`cluster_avg_${s}`;return t.some(o=>o.name===n)||t.push(new j0({name:n,isAutoGenerated:!0,onStatisticExpression:new AD({expression:e,returnType:r}),statisticType:i})),n}function vy(t,e,i,r,s){if(e==="cluster_count"||t.some(o=>o.name===e))return e;const n=IMe(i,e,s);return t.some(o=>o.name===n)||(i==="avg_norm"?t.push(new j0({name:n,isAutoGenerated:!0,onStatisticExpression:new AD({expression:`$feature.${e} / $feature.${s}`,returnType:r}),statisticType:"avg"})):t.push(new j0({name:n,isAutoGenerated:!0,onStatisticField:e,statisticType:i}))),n}const MMe=t=>{let e=class extends t{constructor(...i){super(...i),this.own(this.watch("renderer",()=>{if(this.featureReduction){const r=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",r)}},!0))}set featureReduction(i){const r=this._normalizeFeatureReduction(i);this._set("featureReduction",r)}set renderer(i){}_normalizeFeatureReduction(i){if(i?.type!=="cluster")return i;const r=i.clone(),s=[new j0({name:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],n=(r.fields??[]).filter(a=>!a.isAutoGenerated);if(i.renderer&&!i.renderer.authoringInfo?.isAutoGenerated)return r.fields=[...s,...n],r;if(i.symbol)return r.fields=[...s,...n],r.renderer=null,r;if(!this.renderer)return i;const o=SMe(s,this.renderer,i,null,!1);return r.fields=[...s,...n],r.renderer=o,r}};return h([p(fMe)],e.prototype,"featureReduction",null),e=h([ce("esri.layers.mixins.FeatureReductionLayer")],e),e},AMe={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0,OrientedImageryLayer:!0}},Xw=t=>{let e=class extends t{constructor(){super(...arguments),this.title=null}writeListMode(i,r,s,n){(n&&n.layerContainerType==="ground"||i&&CQ(this,s,{},n))&&(r[s]=i)}writeOperationalLayerType(i,r,s,n){!i||n&&n.layerContainerType==="tables"||(r.layerType=i)}writeTitle(i,r){r.title=i??"Layer"}read(i,r){r&&(r.layer=this),_ge(this,i,s=>super.read(i,s),r)}write(i,r){if(r?.origin){const o=`${r.origin}/${r.layerContainerType||"operational-layers"}`,a=AMe[o];let l=a&&a[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&o==="web-scene/operational-layers"&&(l=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&o==="web-map/operational-layers"&&(l=!1),!l)return r.messages?.push(new Ce("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${o}'`,{layer:this})),null}const s=super.write(i,{...r,layer:this}),n=!!r&&!!r.messages&&!!r.messages.filter(o=>o instanceof Ce&&o.name==="web-document-write:property-required").length;return q4(s?.url)?(r?.messages?.push(new Ce("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&n?null:s}beforeSave(){}};return h([p({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],e.prototype,"id",void 0),h([p(Die)],e.prototype,"listMode",void 0),h([it("listMode")],e.prototype,"writeListMode",null),h([p({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],e.prototype,"operationalLayerType",void 0),h([it("operationalLayerType")],e.prototype,"writeOperationalLayerType",null),h([p(JA)],e.prototype,"opacity",void 0),h([p({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],e.prototype,"title",void 0),h([it("title"),it(["web-scene"],"title")],e.prototype,"writeTitle",null),h([p({type:Boolean,json:{name:"visibility"}})],e.prototype,"visible",void 0),e=h([ce("esri.layers.mixins.OperationalLayer")],e),e};var Z8;const FO=new si({asc:"ascending",desc:"descending"});let _v=Z8=class extends Je{constructor(t){super(t),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new Z8({field:this.field,valueExpression:this.valueExpression,order:this.order})}};h([p({type:String,json:{write:!0}})],_v.prototype,"field",void 0),h([p({type:String,json:{write:!0}})],_v.prototype,"valueExpression",void 0),h([p({type:FO.apiValues,json:{read:FO.read,write:FO.write}})],_v.prototype,"order",void 0),_v=Z8=h([ce("esri.layers.support.OrderByInfo")],_v);const Qre=_v;function CMe(t,e,i){if(!t)return null;const r=t.find(n=>!!n.field);if(!r)return null;const s=new Qre;return s.read(r,i),[s]}function $Me(t,e,i,r){const s=t.find(n=>!!n.field);s&&Io(i,[s.toJSON()],e)}const OMe=t=>{let e=class extends t{constructor(){super(...arguments),this.orderBy=null}};return h([p({type:[Qre],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:CMe},write:{target:"layerDefinition.orderBy",writer:$Me}}})],e.prototype,"orderBy",void 0),e=h([ce("esri.layers.mixins.OrderedLayer")],e),e};let DO,Ue=null;function Xre(){return!!Ue}function RMe(){return!!Ze("esri-wasm")}function ese(){return DO||(DO=De(()=>import("./pe-wasm-67793c2f.js"),[],import.meta.url).then(t=>t.p).then(({default:t})=>t({locateFile:e=>Ui(`esri/geometry/support/${e}`)})).then(t=>{ise(t)}),DO)}var Y8,Ur,K8;(function(t){function e(n,o,a){Ue.ensureCache.prepare();const l=Cg(a),u=a===l,c=Ue.ensureFloat64(l),d=Ue._pe_geog_to_proj(Ue.getPointer(n),o,c);return d&&Jf(a,o,c,u),d}function i(n,o,a,l){switch(l){case Ur.PE_TRANSFORM_P_TO_G:return r(n,o,a);case Ur.PE_TRANSFORM_G_TO_P:return e(n,o,a)}return 0}function r(n,o,a){return s(n,o,a,0)}function s(n,o,a,l){Ue.ensureCache.prepare();const u=Cg(a),c=a===u,d=Ue.ensureFloat64(u),f=Ue._pe_proj_to_geog_center(Ue.getPointer(n),o,d,l);return f&&Jf(a,o,d,c),f}t.geogToProj=e,t.projGeog=i,t.projToGeog=r,t.projToGeogCenter=s})(Y8||(Y8={})),function(t){function e(){t.PE_BUFFER_MAX=Ue.PeDefs.prototype.PE_BUFFER_MAX,t.PE_NAME_MAX=Ue.PeDefs.prototype.PE_NAME_MAX,t.PE_MGRS_MAX=Ue.PeDefs.prototype.PE_MGRS_MAX,t.PE_USNG_MAX=Ue.PeDefs.prototype.PE_USNG_MAX,t.PE_DD_MAX=Ue.PeDefs.prototype.PE_DD_MAX,t.PE_DDM_MAX=Ue.PeDefs.prototype.PE_DDM_MAX,t.PE_DMS_MAX=Ue.PeDefs.prototype.PE_DMS_MAX,t.PE_UTM_MAX=Ue.PeDefs.prototype.PE_UTM_MAX,t.PE_PARM_MAX=Ue.PeDefs.prototype.PE_PARM_MAX,t.PE_TYPE_NONE=Ue.PeDefs.prototype.PE_TYPE_NONE,t.PE_TYPE_GEOGCS=Ue.PeDefs.prototype.PE_TYPE_GEOGCS,t.PE_TYPE_PROJCS=Ue.PeDefs.prototype.PE_TYPE_PROJCS,t.PE_TYPE_GEOGTRAN=Ue.PeDefs.prototype.PE_TYPE_GEOGTRAN,t.PE_TYPE_COORDSYS=Ue.PeDefs.prototype.PE_TYPE_COORDSYS,t.PE_TYPE_UNIT=Ue.PeDefs.prototype.PE_TYPE_UNIT,t.PE_TYPE_LINUNIT=Ue.PeDefs.prototype.PE_TYPE_LINUNIT,t.PE_STR_OPTS_NONE=Ue.PeDefs.prototype.PE_STR_OPTS_NONE,t.PE_STR_AUTH_NONE=Ue.PeDefs.prototype.PE_STR_AUTH_NONE,t.PE_STR_AUTH_TOP=Ue.PeDefs.prototype.PE_STR_AUTH_TOP,t.PE_STR_NAME_CANON=Ue.PeDefs.prototype.PE_STR_NAME_CANON,t.PE_PARM_X0=Ue.PeDefs.prototype.PE_PARM_X0,t.PE_PARM_ND=Ue.PeDefs.prototype.PE_PARM_ND,t.PE_TRANSFORM_1_TO_2=Ue.PeDefs.prototype.PE_TRANSFORM_1_TO_2,t.PE_TRANSFORM_2_TO_1=Ue.PeDefs.prototype.PE_TRANSFORM_2_TO_1,t.PE_TRANSFORM_P_TO_G=Ue.PeDefs.prototype.PE_TRANSFORM_P_TO_G,t.PE_TRANSFORM_G_TO_P=Ue.PeDefs.prototype.PE_TRANSFORM_G_TO_P,t.PE_HORIZON_RECT=Ue.PeDefs.prototype.PE_HORIZON_RECT,t.PE_HORIZON_POLY=Ue.PeDefs.prototype.PE_HORIZON_POLY,t.PE_HORIZON_LINE=Ue.PeDefs.prototype.PE_HORIZON_LINE,t.PE_HORIZON_DELTA=Ue.PeDefs.prototype.PE_HORIZON_DELTA}t.init=e}(Ur||(Ur={})),function(t){const e={},i={},r=m=>{if(m){const g=m.getType();switch(g){case Ur.PE_TYPE_GEOGCS:m=Ue.castObject(m,Ue.PeGeogcs);break;case Ur.PE_TYPE_PROJCS:m=Ue.castObject(m,Ue.PeProjcs);break;case Ur.PE_TYPE_GEOGTRAN:m=Ue.castObject(m,Ue.PeGeogtran);break;default:g&Ur.PE_TYPE_UNIT&&(m=Ue.castObject(m,Ue.PeUnit))}}return m};function s(){Ue.PeFactory.prototype.initialize(null)}function n(m){return o(Ur.PE_TYPE_COORDSYS,m)}function o(m,g){let v=null,b=e[m];if(b||(b={},e[m]=b),b.hasOwnProperty(String(g)))v=b[g];else{const _=Ue.PeFactory.prototype.factoryByType(m,g);Ue.compare(_,Ue.NULL)||(v=_,b[g]=v)}return v=r(v),v}function a(m,g){let v=null,b=i[m];if(b||(b={},i[m]=b),b.hasOwnProperty(g))v=b[g];else{const _=Ue.PeFactory.prototype.fromString(m,g);Ue.compare(_,Ue.NULL)||(v=_,b[g]=v)}return v=r(v),v}function l(m){return o(Ur.PE_TYPE_GEOGCS,m)}function u(m){return o(Ur.PE_TYPE_GEOGTRAN,m)}function c(m){return Ue.PeFactory.prototype.getCode(m)}function d(m){return o(Ur.PE_TYPE_PROJCS,m)}function f(m){return o(Ur.PE_TYPE_UNIT,m)}t.initialize=s,t.coordsys=n,t.factoryByType=o,t.fromString=a,t.geogcs=l,t.geogtran=u,t.getCode=c,t.projcs=d,t.unit=f}(K8||(K8={}));let tse=null;var t5,Q8,X8,e6,i5,t6,r5,s5,i6;function ise(t){function e(n,o,a){n[o]=a(n[o])}Ue=t,Ur.init(),t5.init(),i5.init(),r5.init(),s5.init(),tse=class extends Ue.PeGCSExtent{destroy(){Ue.destroy(this)}};const i=[Ue.PeDatum,Ue.PeGeogcs,Ue.PeGeogtran,Ue.PeObject,Ue.PeParameter,Ue.PePrimem,Ue.PeProjcs,Ue.PeSpheroid,Ue.PeUnit];for(const n of i)e(n.prototype,"getName",o=>function(){return o.call(this,new Array(Ur.PE_NAME_MAX))});for(const n of[Ue.PeGeogtran,Ue.PeProjcs])e(n.prototype,"getParameters",o=>function(){const a=new Array(Ur.PE_PARM_MAX);let l=o.call(this);for(let u=0;u<a.length;u++){const c=Ue.getValue(l,"*");a[u]=c?Ue.wrapPointer(c,Ue.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a});e(Ue.PeHorizon.prototype,"getCoord",n=>function(){const o=this.getSize();if(!o)return null;const a=[];return Jf(a,o,n.call(this)),a}),e(Ue.PeGTlistExtendedEntry.prototype,"getEntries",n=>{const o=Ue._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=n.call(this);if(!Ue.compare(l,Ue.NULL)){a=[l];const u=this.getSteps();if(u>1){const c=Ue.getPointer(l);for(let d=1;d<u;d++)a.push(Ue.wrapPointer(c+o*d,Ue.PeGTlistExtendedGTs))}}return a}});const r=Ue._pe_getPeHorizonSize(),s=n=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(n))return o.get(n);let a=null;const l=n.call(this);if(!Ue.compare(l,Ue.NULL)){a=[l];const u=l.getNump();if(u>1){const c=Ue.getPointer(l);for(let d=1;d<u;d++)a.push(Ue.wrapPointer(c+r*d,Ue.PeHorizon))}}return o.set(n,a),a};e(Ue.PeProjcs.prototype,"horizonGcsGenerate",s),e(Ue.PeProjcs.prototype,"horizonPcsGenerate",s),Ue.PeObject.prototype.toString=function(n=Ur.PE_STR_OPTS_NONE){Ue.ensureCache.prepare();const o=Ue.getPointer(this),a=Ue.ensureInt8(new Array(Ur.PE_BUFFER_MAX));return Ue.UTF8ToString(Ue._pe_object_to_string_ext(o,n,a))}}function td(t){if(!t)return;const e=Ue.getClass(t);if(!e)return;const i=Ue.getCache(e);if(!i)return;const r=Ue.getPointer(t);r&&delete i[r]}function vT(t,e){const i=[],r=new Array(e);for(let s=0;s<t;s++)i.push(Ue.ensureInt8(r));return i}function Cg(t){let e;return Array.isArray(t[0])?(e=[],t.forEach(i=>{e.push(i[0],i[1])})):e=t,e}function Jf(t,e,i,r=!1){if(r)for(let s=0;s<2*e;s++)t[s]=Ue.getValue(i+s*Float64Array.BYTES_PER_ELEMENT,"double");else{const s=t.length===0;for(let n=0;n<e;n++)s&&(t[n]=new Array(2)),t[n][0]=Ue.getValue(i,"double"),t[n][1]=Ue.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(t){let e;function i(){t.PE_GTLIST_OPTS_COMMON=Ue.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,e=Ue._pe_getPeGTlistExtendedEntrySize()}function r(s,n,o,a,l,u){let c=null;const d=new Ue.PeInteger(u);try{const f=Ue.PeGTlistExtended.prototype.getGTlist(s,n,o,a,l,d);if((u=d.val)&&(c=[f],u>1)){const m=Ue.getPointer(f);for(let g=1;g<u;g++)c.push(Ue.wrapPointer(m+e*g,Ue.PeGTlistExtendedEntry))}}finally{Ue.destroy(d)}return c}t.init=i,t.getGTlist=r})(t5||(t5={})),function(t){function e(i){if(i&&i.length){for(const r of i)td(r),r.getEntries().forEach(s=>{td(s);const n=s.getGeogtran();td(n),n.getParameters().forEach(td),[n.getGeogcs1(),n.getGeogcs2()].forEach(o=>{td(o);const a=o.getDatum();td(a),td(a.getSpheroid()),td(o.getPrimem()),td(o.getUnit())})});Ue.PeGTlistExtendedEntry.prototype.Delete(i[0])}}t.destroy=e}(Q8||(Q8={})),function(t){function e(i,r,s,n,o){Ue.ensureCache.prepare();const a=Cg(s),l=s===a,u=Ue.ensureFloat64(a);let c=0;n&&(c=Ue.ensureFloat64(n));const d=Ue._pe_geog_to_geog(Ue.getPointer(i),r,u,c,o);return d&&Jf(s,r,u,l),d}t.geogToGeog=e}(X8||(X8={})),function(t){const e=(u,c,d,f,m,g)=>{let v,b;switch(Ue.ensureCache.prepare(),u){case"dd":v=Ue._pe_geog_to_dd,b=Ur.PE_DD_MAX;break;case"ddm":v=Ue._pe_geog_to_ddm,b=Ur.PE_DDM_MAX;break;case"dms":v=Ue._pe_geog_to_dms,b=Ur.PE_DMS_MAX}let _=0;c&&(_=Ue.getPointer(c));const S=Cg(f),M=Ue.ensureFloat64(S),x=vT(d,b),T=v(_,d,M,m,Ue.ensureInt32(x));if(T)for(let I=0;I<d;I++)g[I]=Ue.UTF8ToString(x[I]);return T},i=(u,c,d,f,m)=>{let g;switch(Ue.ensureCache.prepare(),u){case"dd":g=Ue._pe_dd_to_geog;break;case"ddm":g=Ue._pe_ddm_to_geog;break;case"dms":g=Ue._pe_dms_to_geog}let v=0;c&&(v=Ue.getPointer(c));const b=f.map(x=>Ue.ensureString(x)),_=Ue.ensureInt32(b),S=Ue.ensureFloat64(new Array(2*d)),M=g(v,d,_,S);return M&&Jf(m,d,S),M};function r(u,c,d,f,m){return e("dms",u,c,d,f,m)}function s(u,c,d,f){return i("dms",u,c,d,f)}function n(u,c,d,f,m){return e("ddm",u,c,d,f,m)}function o(u,c,d,f){return i("ddm",u,c,d,f)}function a(u,c,d,f,m){return e("dd",u,c,d,f,m)}function l(u,c,d,f){return i("dd",u,c,d,f)}t.geogToDms=r,t.dmsToGeog=s,t.geogToDdm=n,t.ddmToGeog=o,t.geogToDd=a,t.ddToGeog=l}(e6||(e6={})),function(t){function e(){t.PE_MGRS_STYLE_NEW=Ue.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,t.PE_MGRS_STYLE_OLD=Ue.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,t.PE_MGRS_STYLE_AUTO=Ue.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,t.PE_MGRS_180_ZONE_1_PLUS=Ue.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,t.PE_MGRS_ADD_SPACES=Ue.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(s,n,o,a,l,u,c){Ue.ensureCache.prepare();let d=0;s&&(d=Ue.getPointer(s));const f=Cg(o),m=Ue.ensureFloat64(f),g=vT(n,Ur.PE_MGRS_MAX),v=Ue.ensureInt32(g),b=Ue._pe_geog_to_mgrs_extended(d,n,m,a,l,u,v);if(b)for(let _=0;_<n;_++)c[_]=Ue.UTF8ToString(g[_]);return b}function r(s,n,o,a,l){Ue.ensureCache.prepare();let u=0;s&&(u=Ue.getPointer(s));const c=o.map(g=>Ue.ensureString(g)),d=Ue.ensureInt32(c),f=Ue.ensureFloat64(new Array(2*n)),m=Ue._pe_mgrs_to_geog_extended(u,n,d,a,f);return m&&Jf(l,n,f),m}t.init=e,t.geogToMgrsExtended=i,t.mgrsToGeogExtended=r}(i5||(i5={})),function(t){function e(r,s,n,o,a,l,u){Ue.ensureCache.prepare();let c=0;r&&(c=Ue.getPointer(r));const d=Cg(n),f=Ue.ensureFloat64(d),m=vT(s,Ur.PE_MGRS_MAX),g=Ue.ensureInt32(m),v=Ue._pe_geog_to_usng(c,s,f,o,a,l,g);if(v)for(let b=0;b<s;b++)u[b]=Ue.UTF8ToString(m[b]);return v}function i(r,s,n,o){Ue.ensureCache.prepare();let a=0;r&&(a=Ue.getPointer(r));const l=n.map(f=>Ue.ensureString(f)),u=Ue.ensureInt32(l),c=Ue.ensureFloat64(new Array(2*s)),d=Ue._pe_usng_to_geog(a,s,u,c);return d&&Jf(o,s,c),d}t.geogToUsng=e,t.usngToGeog=i}(t6||(t6={})),function(t){function e(){t.PE_UTM_OPTS_NONE=Ue.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,t.PE_UTM_OPTS_ADD_SPACES=Ue.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,t.PE_UTM_OPTS_NS=Ue.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(s,n,o,a,l){Ue.ensureCache.prepare();let u=0;s&&(u=Ue.getPointer(s));const c=Cg(o),d=Ue.ensureFloat64(c),f=vT(n,Ur.PE_UTM_MAX),m=Ue.ensureInt32(f),g=Ue._pe_geog_to_utm(u,n,d,a,m);if(g)for(let v=0;v<n;v++)l[v]=Ue.UTF8ToString(f[v]);return g}function r(s,n,o,a,l){Ue.ensureCache.prepare();let u=0;s&&(u=Ue.getPointer(s));const c=o.map(g=>Ue.ensureString(g)),d=Ue.ensureInt32(c),f=Ue.ensureFloat64(new Array(2*n)),m=Ue._pe_utm_to_geog(u,n,d,a,f);return m&&Jf(l,n,f),m}t.init=e,t.geogToUtm=i,t.utmToGeog=r}(r5||(r5={})),function(t){const e=new Map;function i(){t.PE_PCSINFO_OPTION_NONE=Ue.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,t.PE_PCSINFO_OPTION_DOMAIN=Ue.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,t.PE_POLE_OUTSIDE_BOUNDARY=Ue.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,t.PE_POLE_POINT=Ue.PePCSInfo.prototype.PE_POLE_POINT}function r(s,n=t.PE_PCSINFO_OPTION_DOMAIN){let o=null,a=null;return e.has(s)&&(a=e.get(s),a[n]&&(o=a[n])),o||(o=Ue.PePCSInfo.prototype.generate(s,n),a||(a=[],e.set(s,a)),a[n]=o),o}t.init=i,t.generate=r}(s5||(s5={})),function(t){function e(){return Ue.PeVersion.prototype.version_string()}t.versionString=e}(i6||(i6={}));const kMe=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return Y8},get PeDefs(){return Ur},get PeFactory(){return K8},get PeGCSExtent(){return tse},get PeGTTransformations(){return X8},get PeGTlistExtended(){return t5},get PeGTlistExtendedEntry(){return Q8},get PeNotationDms(){return e6},get PeNotationMgrs(){return i5},get PeNotationUsng(){return t6},get PeNotationUtm(){return r5},get PePCSInfo(){return s5},get PeVersion(){return i6},_init:ise,get _pe(){return Ue},isLoaded:Xre,isSupported:RMe,load:ese},Symbol.toStringTag,{value:"Module"})),by=Math.PI/180,LMe=/SPHEROID\[([^\]]+)]/i,qp=Sr.radius,Du=Sr.eccentricitySquared,PMe={a1:qp*Du,a2:qp*Du*qp*Du,a3:qp*Du*Du/2,a4:qp*Du*qp*Du*2.5,a5:qp*Du+qp*Du*Du/2,a6:1-Du},NMe={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:Sr.radius,f:Sr.flattening},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Sm.radius,f:Sm.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:ip.radius,f:ip.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:ip.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};let bT=0,jO=class r6{static fromGE(e){const i=new r6;return i._wkt=e.wkt,i._wkid=e.wkid,i._isInverse=e.isInverse,i}constructor(e){this.uid=bT++,e?(this._wkt=e.wkt!=null?e.wkt:null,this._wkid=e.wkid!=null?e.wkid:-1,this._isInverse=e.isInverse!=null&&e.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=bT++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=bT++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=bT++}getInverse(){const e=new r6;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}},s6=class Z2{static cacheKey(e,i){return[e.wkid!==void 0&&e.wkid!==null?e.wkid.toString():"-1",e.wkt!==void 0&&e.wkt!==null?e.wkt.toString():"",i.wkid!==void 0&&i.wkid!==null?i.wkid.toString():"-1",i.wkt!==void 0&&i.wkt!==null?i.wkt.toString():""].join(",")}static fromGE(e){const i=new Z2;let r="";for(const s of e.steps){const n=jO.fromGE(s);i.steps.push(n),r+=n.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=r,i}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e&&e.steps)for(const i of e.steps)i instanceof jO?this.steps.push(i):this.steps.push(new jO({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const e=new Z2;e.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];e.steps.push(r.getInverse())}return e}getGTListEntry(){let e="";for(const i of this.steps)e+=i.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,i,r){this._cachedProjection[Z2.cacheKey(e,i)]=r}getCachedGeTransformation(e,i){let r="";for(const n of this.steps)r+=n.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);const s=this._cachedProjection[Z2.cacheKey(e,i)];return s===void 0?null:s}},dm=null,PS=null,UO=null,VO={};const rse=new YF;function Cm(){return!!dm&&Xre()}function $m(t){return Re(UO)&&(UO=Promise.all([ese(),De(()=>import("./geometryEngineBase-807394fe.js"),[],import.meta.url).then(e=>e.g),De(()=>import("./hydrated-f5959013.js"),["./hydrated-f5959013.js","./preload-helper-388ac9d5.js"],import.meta.url)])),UO.then(([,e,{hydratedAdapter:i}])=>{pr(t),PS=i,dm=e.default,dm._enableProjection(kMe),rse.notify()})}function u1(t,e,i=null,r=null){return Array.isArray(t)?t.length===0?[]:iG(PS,t,t[0].spatialReference,e,i,r):iG(PS,[t],t.spatialReference,e,i,r)[0]}function iG(t,e,i,r,s=null,n=null){if(Re(i)||Re(r))return e;if(fp(i,r,s))return e.map(o=>VMe(o,i,r));if(Re(s)){const o=s6.cacheKey(i,r);VO[o]!==void 0?s=VO[o]:(s=DMe(i,r,void 0),Re(s)&&(s=new s6),VO[o]=s)}if(Re(dm)||Re(t))throw new RD;return ee(n)?dm._project(t,e,i,r,s,n):dm._project(t,e,i,r,s)}function Bct(t,e){const i=FMe([t],e);return ee(i.pending)?{pending:i.pending,geometry:null}:ee(i.geometries)?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function FMe(t,e){if(!Cm()){for(const i of t)if(ee(i)&&!bs(i.spatialReference,e)&&Cn(i.spatialReference)&&Cn(e)&&!fp(i.spatialReference,e))return pi(rse),{pending:$m(),geometries:null}}return{pending:null,geometries:t.map(i=>Re(i)?null:bs(i.spatialReference,e)?i:Cn(i.spatialReference)&&Cn(e)?jMe(i,e):null)}}function DMe(t,e,i=null){if(Re(t)||Re(e))return null;if(Re(dm)||Re(PS))throw new RD;const r=dm._getTransformation(PS,t,e,i,i?.spatialReference);return r!==null?s6.fromGE(r):null}class RD extends Ce{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}var Pe;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",t[t.WGS84=2]="WGS84",t[t.WEB_MERCATOR=3]="WEB_MERCATOR",t[t.WGS84_ECEF=4]="WGS84_ECEF",t[t.CGCS2000=5]="CGCS2000",t[t.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",t[t.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",t[t.GCSMARS2000=8]="GCSMARS2000",t[t.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",t[t.GCSMOON2000=10]="GCSMOON2000",t[t.LON_LAT=11]="LON_LAT",t[t.PLATE_CARREE=12]="PLATE_CARREE"})(Pe||(Pe={}));function jMe(t,e){try{const i=u1(t,e);if(i==null)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);const r=lD(i.type,t.spatialReference,e);return ee(r)&&r(i),i}catch(i){if(!(i instanceof RD))throw i;return null}}function fp(t,e,i){return!i&&(!!bs(t,e)||Cn(t)&&Cn(e)&&!!ase(t,e,use))}async function UMe(t,e,i,r){if(Cm())return TV(r);if(Array.isArray(t)){for(const{source:s,dest:n,geographicTransformation:o}of t)if(!fp(s,n,o))return $m(r)}else if(!fp(t,e,i))return $m(r);return TV(r)}function VMe(t,e,i){return t?"x"in t?BMe(t,e,new Ct,i,0):"xmin"in t?qMe(t,e,new Xt,i,0):"rings"in t?sse(t,e,new ja,i,0):"paths"in t?GMe(t,e,new Ta,i,0):"points"in t?zMe(t,e,new Dw,i,0):null:null}function BMe(t,e,i,r,s){Gs[0]=t.x,Gs[1]=t.y;const n=t.z;return Gs[2]=n!==void 0?n:s,K3(Gs,e,0,Gs,r,0,1)?(i.x=Gs[0],i.y=Gs[1],i.spatialReference=r,n===void 0?(i.z=void 0,i.hasZ=!1):(i.z=Gs[2],i.hasZ=!0),t.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}function zMe(t,e,i,r,s){const{points:n,hasZ:o,hasM:a}=t,l=[],u=n.length,c=[];for(const d of n)c.push(d[0],d[1],o?d[2]:s);if(!K3(c,e,0,c,r,0,u))return null;for(let d=0;d<u;++d){const f=3*d,m=c[f],g=c[f+1];o&&a?l.push([m,g,c[f+2],n[d][3]]):o?l.push([m,g,c[f+2]]):a?l.push([m,g,n[d][2]]):l.push([m,g])}return i.points=l,i.spatialReference=r,i.hasZ=o,i.hasM=a,i}function GMe(t,e,i,r,s){const{paths:n,hasZ:o,hasM:a}=t,l=[];return nse(n,o??!1,a??!1,e,l,r,s)?(i.paths=l,i.spatialReference=r,i.hasZ=o,i.hasM=a,i):null}function zct(t,e,i=e.spatialReference,r=0){return ee(t.spatialReference)&&ee(i)&&ee(sse(t,t.spatialReference,e,i,r))}function sse(t,e,i,r,s){const{rings:n,hasZ:o,hasM:a}=t,l=[];return nse(n,o??!1,a??!1,e,l,r,s)?(i.rings=l,i.spatialReference=r,i.hasZ=o,i.hasM=a,i):null}function qMe(t,e,i,r,s){const{xmin:n,ymin:o,xmax:a,ymax:l,hasZ:u,hasM:c}=t;return rG(n,o,u?t.zmin:s,e,Gs,r)?(i.xmin=Gs[0],i.ymin=Gs[1],u&&(i.zmin=Gs[2]),rG(a,l,u?t.zmax:s,e,Gs,r)?(i.xmax=Gs[0],i.ymax=Gs[1],u&&(i.zmax=Gs[2]),c&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=r,i):null):null}function Gct(t,e,i,r=0){Gs[0]=t.x,Gs[1]=t.y;const s=t.z;return Gs[2]=s!==void 0?s:r,K3(Gs,t.spatialReference,0,e,i,0,1)}function rG(t,e,i,r,s,n){return wT[0]=t,wT[1]=e,wT[2]=i,K3(wT,r,0,s,n,0,1)}function K3(t,e,i,r,s,n,o=1){const a=ase(e,s,use);if(Re(a))return!1;if(a===cr){if(t===r&&i===n)return!0;const u=i+3*o;for(let c=i,d=n;c<u;c++,d++)r[d]=t[c];return!0}const l=i+3*o;for(let u=i,c=n;u<l;u+=3,c+=3)a(t,u,r,c);return!0}function nse(t,e,i,r,s,n,o=0){const a=new Array;for(const u of t)for(const c of u)a.push(c[0],c[1],e?c[2]:o);if(!K3(a,r,0,a,n,0,a.length/3))return!1;let l=0;s.length=0;for(const u of t){const c=new Array;for(const d of u)e&&i?c.push([a[l++],a[l++],a[l++],d[3]]):e?c.push([a[l++],a[l++],a[l++]]):i?(c.push([a[l++],a[l++],d[2]]),l++):(c.push([a[l++],a[l++]]),l++);s.push(c)}return!0}function qct(t,e,i,r){if(Re(t)||Re(r))return!1;const s=NS(t,lse),n=NS(r,lAe);if(s===n&&!sG(n)&&(s!==Pe.UNKNOWN||bs(t,r)))return pie(i,e),!0;if(sG(n)){const o=Kv[s][Pe.LON_LAT],a=Kv[Pe.LON_LAT][n];return!Re(o)&&!Re(a)&&(o(e,0,Hp,0),a(Hp,0,Wp,0),ose(Eh*Hp[0],Eh*Hp[1],i),i[12]=Wp[0],i[13]=Wp[1],i[14]=Wp[2],!0)}if((n===Pe.WEB_MERCATOR||n===Pe.PLATE_CARREE)&&(s===Pe.WGS84||s===Pe.CGCS2000&&n===Pe.PLATE_CARREE||s===Pe.SPHERICAL_ECEF||s===Pe.WEB_MERCATOR)){const o=Kv[s][Pe.LON_LAT],a=Kv[Pe.LON_LAT][n];return!Re(o)&&!Re(a)&&(o(e,0,Hp,0),a(Hp,0,Wp,0),s===Pe.SPHERICAL_ECEF?HMe(Eh*Hp[0],Eh*Hp[1],i):V3(i),i[12]=Wp[0],i[13]=Wp[1],i[14]=Wp[2],!0)}return!1}function sG(t){return t===Pe.SPHERICAL_ECEF||t===Pe.SPHERICAL_MARS_PCPF||t===Pe.SPHERICAL_MOON_PCPF}function ose(t,e,i){const r=Math.sin(t),s=Math.cos(t),n=Math.sin(e),o=Math.cos(e),a=i;return a[0]=-r,a[4]=-n*s,a[8]=o*s,a[12]=0,a[1]=s,a[5]=-n*r,a[9]=o*r,a[13]=0,a[2]=0,a[6]=o,a[10]=n,a[14]=0,a[3]=0,a[7]=0,a[11]=0,a[15]=1,a}function HMe(t,e,i){return ose(t,e,i),Mp(i,i),i}function NS(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=Sp(t,1)),t.wkt===x0e.wkt?e.spatialReferenceId=Pe.SPHERICAL_ECEF:_S(t)?e.spatialReferenceId=Pe.WGS84:O0(t)?e.spatialReferenceId=Pe.WEB_MERCATOR:g0e(t)?e.spatialReferenceId=Pe.PLATE_CARREE:t.wkt===S0e.wkt?e.spatialReferenceId=Pe.WGS84_ECEF:t.wkid===du.CGCS2000?e.spatialReferenceId=Pe.CGCS2000:t.wkt===qQ.wkt?e.spatialReferenceId=Pe.SPHERICAL_MARS_PCPF:t.wkt===HQ.wkt?e.spatialReferenceId=Pe.SPHERICAL_MOON_PCPF:$3(t)?e.spatialReferenceId=Pe.GCSMARS2000:O3(t)?e.spatialReferenceId=Pe.GCSMOON2000:e.spatialReferenceId=Pe.UNKNOWN):Pe.UNKNOWN}function cr(t,e,i,r){t!==i&&(i[r++]=t[e++],i[r++]=t[e++],i[r]=t[e])}function Tb(t,e,i,r){i[r++]=iw*(t[e++]/Sr.radius),i[r++]=iw*(Math.PI/2-2*Math.atan(Math.exp(-t[e++]/Sr.radius))),i[r]=t[e]}function WMe(t,e,i,r){Tb(t,e,i,r),Jg(i,r,i,r)}function JMe(t,e,i,r){Tb(t,e,i,r),Yg(i,r,i,r)}function ZMe(t,e,i,r,s){const n=.4999999*Math.PI,o=Da(Eh*t[e+1],-n,n),a=Math.sin(o);i[r++]=Eh*t[e]*s.radius,i[r++]=s.halfSemiMajorAxis*Math.log((1+a)/(1-a)),i[r]=t[e+2]}function FS(t,e,i,r){ZMe(t,e,i,r,Sr)}const nG=Sr.radius*Math.PI/180,oG=180/(Sr.radius*Math.PI);function Hg(t,e,i,r){i[r]=t[e]*nG,i[r+1]=t[e+1]*nG,i[r+2]=t[e+2]}function Wg(t,e,i,r){i[r]=t[e]*oG,i[r+1]=t[e+1]*oG,i[r+2]=t[e+2]}function YMe(t,e,i,r){Tb(t,e,i,r),Hg(i,r,i,r)}function KMe(t,e,i,r){Kg(t,e,i,r),Hg(i,r,i,r)}function QMe(t,e,i,r){Zg(t,e,i,r),Hg(i,r,i,r)}function XMe(t,e,i,r){Wg(t,e,i,r),Jg(i,r,i,r)}function eAe(t,e,i,r){Wg(t,e,i,r),FS(i,r,i,r)}function tAe(t,e,i,r){Wg(t,e,i,r),Yg(i,r,i,r)}function kD(t){if(Re(t))return!1;const e=NS(t,lse);return!!Kv[e][Pe.WGS84_COMPARABLE_LON_LAT]}function LD(t,e,i,r,s){const n=s+t[e+2],o=Eh*t[e+1],a=Eh*t[e],l=Math.cos(o);i[r++]=Math.cos(a)*l*n,i[r++]=Math.sin(a)*l*n,i[r]=Math.sin(o)*n}function aG(t,e,i,r){LD(t,e,i,r,Sm.radius)}function lG(t,e,i,r){LD(t,e,i,r,ip.radius)}function Jg(t,e,i,r){LD(t,e,i,r,Sr.radius)}function PD(t,e,i,r,s){const n=t[e],o=t[e+1],a=t[e+2],l=Math.sqrt(n*n+o*o+a*a),u=GX(a/(l===0?1:l)),c=Math.atan2(o,n);i[r++]=iw*c,i[r++]=iw*u,i[r]=l-s}function uG(t,e,i,r){PD(t,e,i,r,Sm.radius)}function cG(t,e,i,r){PD(t,e,i,r,ip.radius)}function Zg(t,e,i,r){PD(t,e,i,r,Sr.radius)}function iAe(t,e,i,r){Zg(t,e,i,r),FS(i,r,i,r)}function rAe(t,e,i,r){Zg(t,e,i,r),Yg(i,r,i,r)}function sAe(t,e,i,r,s){const n=Eh*t[e],o=Eh*t[e+1],a=t[e+2],l=Math.sin(o),u=Math.cos(o),c=s.radius/Math.sqrt(1-s.eccentricitySquared*l*l);i[r++]=(c+a)*u*Math.cos(n),i[r++]=(c+a)*u*Math.sin(n),i[r++]=(c*(1-s.eccentricitySquared)+a)*l}function Yg(t,e,i,r){sAe(t,e,i,r,Sr)}function Kg(t,e,i,r){const s=PMe,n=t[e],o=t[e+1],a=t[e+2];let l,u,c,d,f,m,g,v,b,_,S,M,x,T,I,$,L,B,z,H,J;l=Math.abs(a),u=n*n+o*o,c=Math.sqrt(u),d=u+a*a,f=Math.sqrt(d),H=Math.atan2(o,n),m=a*a/d,g=u/d,T=s.a2/f,I=s.a3-s.a4/f,g>.3?(v=l/f*(1+g*(s.a1+T+m*I)/f),z=Math.asin(v),_=v*v,b=Math.sqrt(1-_)):(b=c/f*(1-m*(s.a5-T-g*I)/f),z=Math.acos(b),_=1-b*b,v=Math.sqrt(_)),S=1-Sr.eccentricitySquared*_,M=Sr.radius/Math.sqrt(S),x=s.a6*M,T=c-M*b,I=l-x*v,L=b*T+v*I,$=b*I-v*T,B=$/(x/S+L),z+=B,J=L+$*B/2,a<0&&(z=-z),i[r++]=iw*H,i[r++]=iw*z,i[r]=J}function nAe(t,e,i,r){Kg(t,e,i,r),Jg(i,r,i,r)}function oAe(t,e,i,r){Kg(t,e,i,r),FS(i,r,i,r)}const Kv={[Pe.WGS84]:{[Pe.CGCS2000]:null,[Pe.GCSMARS2000]:null,[Pe.GCSMOON2000]:null,[Pe.LON_LAT]:cr,[Pe.WGS84_COMPARABLE_LON_LAT]:cr,[Pe.SPHERICAL_ECEF]:Jg,[Pe.SPHERICAL_MARS_PCPF]:null,[Pe.SPHERICAL_MOON_PCPF]:null,[Pe.UNKNOWN]:null,[Pe.WEB_MERCATOR]:FS,[Pe.PLATE_CARREE]:Hg,[Pe.WGS84]:cr,[Pe.WGS84_ECEF]:Yg},[Pe.CGCS2000]:{[Pe.CGCS2000]:cr,[Pe.GCSMARS2000]:null,[Pe.GCSMOON2000]:null,[Pe.LON_LAT]:cr,[Pe.WGS84_COMPARABLE_LON_LAT]:cr,[Pe.SPHERICAL_ECEF]:Jg,[Pe.SPHERICAL_MARS_PCPF]:null,[Pe.SPHERICAL_MOON_PCPF]:null,[Pe.UNKNOWN]:null,[Pe.WEB_MERCATOR]:null,[Pe.PLATE_CARREE]:Hg,[Pe.WGS84]:null,[Pe.WGS84_ECEF]:Yg},[Pe.GCSMARS2000]:{[Pe.CGCS2000]:null,[Pe.GCSMARS2000]:cr,[Pe.GCSMOON2000]:null,[Pe.LON_LAT]:cr,[Pe.WGS84_COMPARABLE_LON_LAT]:null,[Pe.SPHERICAL_ECEF]:null,[Pe.SPHERICAL_MARS_PCPF]:lG,[Pe.SPHERICAL_MOON_PCPF]:null,[Pe.UNKNOWN]:null,[Pe.WEB_MERCATOR]:null,[Pe.PLATE_CARREE]:null,[Pe.WGS84]:null,[Pe.WGS84_ECEF]:null},[Pe.GCSMOON2000]:{[Pe.CGCS2000]:null,[Pe.GCSMARS2000]:null,[Pe.GCSMOON2000]:cr,[Pe.LON_LAT]:cr,[Pe.WGS84_COMPARABLE_LON_LAT]:null,[Pe.SPHERICAL_ECEF]:null,[Pe.SPHERICAL_MARS_PCPF]:null,[Pe.SPHERICAL_MOON_PCPF]:aG,[Pe.UNKNOWN]:null,[Pe.WEB_MERCATOR]:null,[Pe.PLATE_CARREE]:null,[Pe.WGS84]:null,[Pe.WGS84_ECEF]:null},[Pe.WEB_MERCATOR]:{[Pe.CGCS2000]:null,[Pe.GCSMARS2000]:null,[Pe.GCSMOON2000]:null,[Pe.LON_LAT]:Tb,[Pe.WGS84_COMPARABLE_LON_LAT]:Tb,[Pe.SPHERICAL_ECEF]:WMe,[Pe.SPHERICAL_MARS_PCPF]:null,[Pe.SPHERICAL_MOON_PCPF]:null,[Pe.UNKNOWN]:null,[Pe.WEB_MERCATOR]:cr,[Pe.PLATE_CARREE]:YMe,[Pe.WGS84]:Tb,[Pe.WGS84_ECEF]:JMe},[Pe.WGS84_ECEF]:{[Pe.CGCS2000]:Kg,[Pe.GCSMARS2000]:null,[Pe.GCSMOON2000]:null,[Pe.LON_LAT]:Kg,[Pe.WGS84_COMPARABLE_LON_LAT]:Kg,[Pe.SPHERICAL_ECEF]:nAe,[Pe.SPHERICAL_MARS_PCPF]:null,[Pe.SPHERICAL_MOON_PCPF]:null,[Pe.UNKNOWN]:null,[Pe.WEB_MERCATOR]:oAe,[Pe.PLATE_CARREE]:KMe,[Pe.WGS84]:Kg,[Pe.WGS84_ECEF]:cr},[Pe.SPHERICAL_ECEF]:{[Pe.CGCS2000]:Zg,[Pe.GCSMARS2000]:null,[Pe.GCSMOON2000]:null,[Pe.LON_LAT]:Zg,[Pe.WGS84_COMPARABLE_LON_LAT]:Zg,[Pe.SPHERICAL_ECEF]:cr,[Pe.SPHERICAL_MARS_PCPF]:null,[Pe.SPHERICAL_MOON_PCPF]:null,[Pe.UNKNOWN]:null,[Pe.WEB_MERCATOR]:iAe,[Pe.PLATE_CARREE]:QMe,[Pe.WGS84]:Zg,[Pe.WGS84_ECEF]:rAe},[Pe.SPHERICAL_MARS_PCPF]:{[Pe.CGCS2000]:null,[Pe.GCSMARS2000]:cG,[Pe.GCSMOON2000]:null,[Pe.LON_LAT]:cG,[Pe.WGS84_COMPARABLE_LON_LAT]:null,[Pe.SPHERICAL_ECEF]:null,[Pe.SPHERICAL_MARS_PCPF]:cr,[Pe.SPHERICAL_MOON_PCPF]:null,[Pe.UNKNOWN]:null,[Pe.WEB_MERCATOR]:null,[Pe.PLATE_CARREE]:null,[Pe.WGS84]:null,[Pe.WGS84_ECEF]:null},[Pe.SPHERICAL_MOON_PCPF]:{[Pe.CGCS2000]:null,[Pe.GCSMARS2000]:null,[Pe.GCSMOON2000]:uG,[Pe.LON_LAT]:uG,[Pe.WGS84_COMPARABLE_LON_LAT]:null,[Pe.SPHERICAL_ECEF]:null,[Pe.SPHERICAL_MARS_PCPF]:null,[Pe.SPHERICAL_MOON_PCPF]:cr,[Pe.UNKNOWN]:null,[Pe.WEB_MERCATOR]:null,[Pe.PLATE_CARREE]:null,[Pe.WGS84]:null,[Pe.WGS84_ECEF]:null},[Pe.UNKNOWN]:{[Pe.CGCS2000]:null,[Pe.GCSMARS2000]:null,[Pe.GCSMOON2000]:null,[Pe.LON_LAT]:null,[Pe.WGS84_COMPARABLE_LON_LAT]:null,[Pe.SPHERICAL_ECEF]:null,[Pe.SPHERICAL_MARS_PCPF]:null,[Pe.SPHERICAL_MOON_PCPF]:null,[Pe.UNKNOWN]:cr,[Pe.WEB_MERCATOR]:null,[Pe.PLATE_CARREE]:null,[Pe.WGS84]:null,[Pe.WGS84_ECEF]:null},[Pe.LON_LAT]:{[Pe.CGCS2000]:cr,[Pe.GCSMARS2000]:cr,[Pe.GCSMOON2000]:cr,[Pe.LON_LAT]:cr,[Pe.WGS84_COMPARABLE_LON_LAT]:cr,[Pe.SPHERICAL_ECEF]:Jg,[Pe.SPHERICAL_MARS_PCPF]:lG,[Pe.SPHERICAL_MOON_PCPF]:aG,[Pe.UNKNOWN]:null,[Pe.WEB_MERCATOR]:FS,[Pe.PLATE_CARREE]:Hg,[Pe.WGS84]:cr,[Pe.WGS84_ECEF]:Yg},[Pe.WGS84_COMPARABLE_LON_LAT]:{[Pe.CGCS2000]:null,[Pe.GCSMARS2000]:null,[Pe.GCSMOON2000]:null,[Pe.LON_LAT]:cr,[Pe.WGS84_COMPARABLE_LON_LAT]:cr,[Pe.SPHERICAL_ECEF]:Jg,[Pe.SPHERICAL_MARS_PCPF]:null,[Pe.SPHERICAL_MOON_PCPF]:null,[Pe.UNKNOWN]:null,[Pe.WEB_MERCATOR]:null,[Pe.PLATE_CARREE]:Hg,[Pe.WGS84]:cr,[Pe.WGS84_ECEF]:Yg},[Pe.PLATE_CARREE]:{[Pe.CGCS2000]:Wg,[Pe.GCSMARS2000]:null,[Pe.GCSMOON2000]:null,[Pe.LON_LAT]:Wg,[Pe.WGS84_COMPARABLE_LON_LAT]:Wg,[Pe.SPHERICAL_ECEF]:XMe,[Pe.SPHERICAL_MARS_PCPF]:null,[Pe.SPHERICAL_MOON_PCPF]:null,[Pe.UNKNOWN]:null,[Pe.WEB_MERCATOR]:eAe,[Pe.PLATE_CARREE]:cr,[Pe.WGS84]:Wg,[Pe.WGS84_ECEF]:tAe}};function ase(t,e,i=ND()){return Re(t)||Re(e)?null:aAe(t,e,i).projector}function aAe(t,e,i){if(Re(t)||Re(e)||i.source.spatialReference===t&&i.dest.spatialReference===e)return i;const r=NS(t,i.source),s=NS(e,i.dest);return r===Pe.UNKNOWN&&s===Pe.UNKNOWN?bs(t,e)?i.projector=cr:i.projector=null:i.projector=Kv[r][s],i}function ND(){return{source:{spatialReference:null,spatialReferenceId:Pe.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:Pe.UNKNOWN,metersPerUnit:1},projector:cr}}const lse={spatialReference:null,spatialReferenceId:Pe.UNKNOWN},lAe={spatialReference:null,spatialReferenceId:Pe.UNKNOWN},use=ND();ND();const Eh=Wv(1),iw=zX(1),wT=Va(),Hp=Va(),Wp=Va(),Gs=Va();async function uAe(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return Bg(t);const i=Tt.WGS84;return await UMe(e,i),u1(t,i)}function Hct(t,e){if(!cAe(t,e)){const i=t.typeKeywords;i?i.push(e):t.typeKeywords=[e]}}function cAe(t,e){return!!t.typeKeywords?.includes(e)}function Wct(t,e){const i=t.typeKeywords;if(i){const r=i.indexOf(e);r>-1&&i.splice(r,1)}}async function Jct(t){const e=t.clone().normalize();let i;if(e.length>1)for(const r of e)i?r.width>i.width&&(i=r):i=r;else i=e[0];return uAe(i)}const Zct={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table"};function hG(t){const{portal:e,isOrgItem:i,itemControl:r}=t,s=e.user?.privileges;let n=!s||s.includes("features:user:edit"),o=!!i&&!!s?.includes("features:user:fullEdit");const a=r==="update"||r==="admin";return a?o=n=!0:o&&(n=!0),{features:{edit:n,fullEdit:o},content:{updateItem:a}}}const e_=t=>{let e=class extends t{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=Jr(this.portalItem)}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,r,s){if(r.itemId)return new gb({id:r.itemId,portal:s&&s.portal})}writePortalItem(i,r){i&&i.id&&(r.itemId=i.id)}async loadFromPortal(i,r){if(this.portalItem&&this.portalItem.id)try{const s=await De(()=>import("./layersLoader-456658d2.js"),["./layersLoader-456658d2.js","./fetchService-d05ae315.js","./jsonContext-48257512.js","./preload-helper-388ac9d5.js"],import.meta.url);return pr(r),await s.load({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap},r)}catch(s){throw vn(s)||tt.getLogger(this.declaredClass).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${s}`),s}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(r=>(_a(r),!0)))}async _setUserPrivileges(i,r){if(!Li.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(r);if(this.url)try{const{features:{edit:s,fullEdit:n},content:{updateItem:o}}=await this._fetchUserPrivileges(i,r);this._set("userHasEditingPrivileges",s),this._set("userHasFullEditingPrivileges",n),this._set("userHasUpdateItemPrivileges",o)}catch(s){_a(s)}}async _fetchUserPrivileges(i,r){let s=this.portalItem;if(!i||!s||!s.loaded||s.sourceUrl)return this._fetchFallbackUserPrivileges(r);const n=i===s.id;if(n&&s.portal.user)return hG(s);let o,a;if(n)o=s.portal.url;else try{o=await gX(this.url,r)}catch(d){_a(d)}if(!o||!Kge(o,s.portal.url))return this._fetchFallbackUserPrivileges(r);try{const d=ee(r)?r.signal:null;a=await xr?.getCredential(`${o}/sharing`,{prompt:!1,signal:d})}catch(d){_a(d)}const l=!0,u=!1,c=!1;if(!a)return{features:{edit:l,fullEdit:u},content:{updateItem:c}};try{if(n?await s.reload():(s=new gb({id:i,portal:{url:o}}),await s.load(r)),s.portal.user)return hG(s)}catch(d){_a(d)}return{features:{edit:l,fullEdit:u},content:{updateItem:c}}}async _fetchFallbackUserPrivileges(i){let r=!0;try{r=await this._fetchUserHasEditingPrivileges(i)}catch(s){_a(s)}return{features:{edit:r,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const r=this.url?xr?.findCredential(this.url):null;if(!r)return!0;const s=_T.credential===r?_T.user:await this._fetchEditingUser(i);return _T.credential=r,_T.user=s,Re(s)||s.privileges==null||s.privileges.includes("features:user:edit")}async _fetchEditingUser(i){const r=this.portalItem?.portal?.user;if(r)return r;const s=xr.findServerInfo(this.url??"");if(!s?.owningSystemUrl)return null;const n=`${s.owningSystemUrl}/sharing/rest`,o=Mo.getDefault();if(o&&o.loaded&&El(o.restUrl)===El(n))return o.user;const a=`${n}/community/self`,l=ee(i)?i.signal:null,u=await B4(Et(a,{authMode:"no-prompt",query:{f:"json"},signal:l}));return u.ok?f9.fromJSON(u.value.data):null}read(i,r){r&&(r.layer=this),super.read(i,r)}write(i,r){const s=r&&r.portal,n=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||Mo.getDefault());return s&&n&&!FQ(n.restUrl,s.restUrl)?(r.messages&&r.messages.push(new Ce("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...r,layer:this})}};return h([p({type:gb})],e.prototype,"portalItem",null),h([Ye("web-document","portalItem",["itemId"])],e.prototype,"readPortalItem",null),h([it("web-document","portalItem",{itemId:{type:String}})],e.prototype,"writePortalItem",null),h([p({clonable:!1})],e.prototype,"resourceReferences",void 0),h([p({type:Boolean,readOnly:!0})],e.prototype,"userHasEditingPrivileges",void 0),h([p({type:Boolean,readOnly:!0})],e.prototype,"userHasFullEditingPrivileges",void 0),h([p({type:Boolean,readOnly:!0})],e.prototype,"userHasUpdateItemPrivileges",void 0),e=h([ce("esri.layers.mixins.PortalLayer")],e),e},_T={credential:null,user:null};let Y2=class extends Pt{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};h([p()],Y2.prototype,"updating",void 0),h([p()],Y2.prototype,"status",void 0),Y2=h([ce("esri.layers.support.PublishingInfo")],Y2);const hAe=Y2,cse="esri.layers.mixins.PublishableLayer",dAe=Symbol(cse),pAe=t=>{var e;let i=class extends t{constructor(){super(...arguments),this[e]=!0}get publishingInfo(){if(this.destroyed)return null;const r=this._get("publishingInfo");if(r)return r;const s=new hAe;return this._checkPublishingStatus(s),s}_checkPublishingStatus(r){let o=0;const a=async u=>{let c;r.updating=!0;try{c=await this.fetchPublishingStatus()}catch{c="unavailable"}c!=="published"&&c!=="unavailable"||(r.status==="publishing"&&this.refresh(),l.remove()),r.status=c,r.updating=!1,l.removed||(o=setTimeout(a,u,u+125))},l={removed:!1,remove(){this.removed=!0,clearTimeout(o)}};this.when().catch(()=>l.remove()),a(250),this.own(l)}};return e=dAe,h([p({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=h([ce(cse)],i),i},DS=new Nt,jx=new WeakMap;function fAe(t){hse(t)&&DS.push(t)}function mAe(t){hse(t)&&DS.includes(t)&&DS.remove(t)}function hse(t){return t!=null&&typeof t=="object"&&"refreshInterval"in t&&"refresh"in t}function dse(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:dse(e,t%e):0}let BO=0,xT=0;function yAe(){const t=Date.now();for(const e of DS)e.refreshInterval&&t-(jx.get(e)??0)+5>=6e4*e.refreshInterval&&(jx.set(e,t),e.refresh(t))}XK(()=>{const t=Date.now();let e=0;for(const i of DS)e=dse(Math.round(6e4*i.refreshInterval),e),i.refreshInterval?jx.get(i)||jx.set(i,t):jx.delete(i);if(e!==xT){if(xT=e,clearInterval(BO),xT===0)return void(BO=0);BO=setInterval(yAe,xT)}});const t_=t=>{let e=class extends t{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=HK(()=>this.hasDataChanged()),this.when().then(()=>{fAe(this)},()=>{})}destroy(){mAe(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){fb(this._debounceHasDataChanged()).then(r=>{r&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:r})},r=>{tt.getLogger(this.declaredClass).error(r),this.emit("refresh",{dataChanged:!1,error:r})})}async hasDataChanged(){return!0}};return h([p({type:Number,cast:i=>i>=.1?i:i<=0?0:.1,json:{write:!0}})],e.prototype,"refreshInterval",void 0),h([p({readOnly:!0})],e.prototype,"refreshTimestamp",void 0),h([p()],e.prototype,"refreshParameters",null),e=h([ce("esri.layers.mixins.RefreshableLayer")],e),e},c1=t=>{let e=class extends t{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&gAe(i,r.effectiveScaleRange);const s=this._get("effectiveScaleRange");return s&&s.minScale===i.minScale&&s.maxScale===i.maxScale?s:i}};return h([p({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"minScale",void 0),h([p({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"maxScale",void 0),h([p({readOnly:!0})],e.prototype,"effectiveScaleRange",null),e=h([ce("esri.layers.mixins.ScaleRangeLayer")],e),e};function gAe(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}const pse=xs()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let K2=class extends Er(Je){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return z3e(this.value,this.unit,"milliseconds")}};h([Dt(pse,{nonNullable:!0})],K2.prototype,"unit",void 0),h([p({type:Number,json:{write:!0},nonNullable:!0})],K2.prototype,"value",void 0),K2=h([ce("esri.TimeInterval")],K2);const n5=K2;function dG(t,e){return n5.fromJSON({value:t,unit:e})}let uo=class extends Er(Je){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,i){if(!i.timeExtent||!Array.isArray(i.timeExtent)||i.timeExtent.length!==2)return null;const r=new Date(i.timeExtent[0]),s=new Date(i.timeExtent[1]);return new Ga({start:r,end:s})}writeFullTimeExtent(e,i){e&&ee(e.start)&&ee(e.end)?i.timeExtent=[e.start.getTime(),e.end.getTime()]:i.timeExtent=null}readInterval(e,i){return i.timeInterval&&i.timeIntervalUnits?dG(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?dG(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(e,i){i.timeInterval=e?.toJSON().value??null,i.timeIntervalUnits=e?.toJSON().unit??null}};h([p({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],uo.prototype,"cumulative",void 0),h([p({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],uo.prototype,"endField",void 0),h([p({type:Ga,json:{write:{enabled:!0,allowNull:!0}}})],uo.prototype,"fullTimeExtent",void 0),h([Ye("fullTimeExtent",["timeExtent"])],uo.prototype,"readFullTimeExtent",null),h([it("fullTimeExtent")],uo.prototype,"writeFullTimeExtent",null),h([p({type:Boolean,json:{write:!0}})],uo.prototype,"hasLiveData",void 0),h([p({type:n5,json:{write:{enabled:!0,allowNull:!0}}})],uo.prototype,"interval",void 0),h([Ye("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],uo.prototype,"readInterval",null),h([it("interval")],uo.prototype,"writeInterval",null),h([p({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],uo.prototype,"startField",void 0),h([p({type:Am,json:{write:{enabled:!0,allowNull:!0}}})],uo.prototype,"timeReference",void 0),h([p({type:String,json:{write:{enabled:!0,allowNull:!0}}})],uo.prototype,"trackIdField",void 0),h([p({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],uo.prototype,"useTime",void 0),uo=h([ce("esri.layers.support.TimeInfo")],uo);const fse=uo,_C=t=>{let e=class extends t{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,r){const s=r.timeInfo.exportOptions;if(!s)return null;const n=s.timeOffset,o=pse.fromJSON(s.timeOffsetUnits);return n&&o?new n5({value:n,unit:o}):null}set timeInfo(i){cee(i,this.fieldsIndex),this._set("timeInfo",i)}};return h([p({type:Ga,json:{write:!1}})],e.prototype,"timeExtent",void 0),h([p({type:n5})],e.prototype,"timeOffset",void 0),h([Ye("service","timeOffset",["timeInfo.exportOptions"])],e.prototype,"readOffset",null),h([p({value:null,type:fse,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],e.prototype,"timeInfo",null),h([p({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],e.prototype,"useViewTime",void 0),e=h([ce("esri.layers.mixins.TemporalLayer")],e),e},pG=new si({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let xf=class extends Er(Je){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};h([p({json:{write:!0}})],xf.prototype,"name",void 0),h([p({json:{write:!0}})],xf.prototype,"description",void 0),h([p({json:{read:pG.read,write:pG.write}})],xf.prototype,"drawingTool",void 0),h([p({json:{write:!0}})],xf.prototype,"prototype",void 0),h([p({json:{write:!0}})],xf.prototype,"thumbnail",void 0),xf=h([ce("esri.layers.support.FeatureTemplate")],xf);const FD=xf;let Td=class extends Er(Je){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const i={};for(const r of Object.keys(e))i[r]=nD(e[r]);return i}writeDomains(e,i){const r={};for(const s of Object.keys(e))e[s]&&(r[s]=e[s]?.toJSON());i.domains=r}};h([p({json:{write:!0}})],Td.prototype,"id",void 0),h([p({json:{write:!0}})],Td.prototype,"name",void 0),h([p({json:{write:!0}})],Td.prototype,"domains",void 0),h([Ye("domains")],Td.prototype,"readDomains",null),h([it("domains")],Td.prototype,"writeDomains",null),h([p({type:[FD],json:{write:!0}})],Td.prototype,"templates",void 0),Td=h([ce("esri.layers.support.FeatureType")],Td);const DD=Td;function vAe(t){return t.type==="date"||t.type==="esriFieldTypeDate"}function fG(t){return t.type==="oid"||t.type==="esriFieldTypeOID"}function mG(t){return t.type==="global-id"||t.type==="esriFieldTypeGlobalID"}let jD=class{constructor(e=[]){if(this.fields=[],this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!e)return;this.fields=e;const i=[];for(const r of e){const s=r?.name,n=gG(r?.name);if(s&&n){const o=yG(s);this._fieldsMap.set(s,r),this._fieldsMap.set(o,r),this._normalizedFieldsMap.set(n,r),i.push(o),vAe(r)?(this.dateFields.push(r),this._dateFieldsSet.add(r)):C9(r)&&(this._numericFieldsSet.add(r),this.numericFields.push(r)),fG(r)||mG(r)||(r.editable=r.editable==null||!!r.editable,r.nullable=r.nullable==null||!!r.nullable)}}i.sort(),this.uid=i.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)fG(e)||mG(e)||e.nullable||dwe(e)!==void 0||this._requiredFields.push(e)}return this._requiredFields}has(e){return this.get(e)!=null}get(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get(yG(e))??this._normalizedFieldsMap.get(gG(e)),i&&this._fieldsMap.set(e,i),i)}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){const i=this.get(e);if(i)return i.name??void 0}};function yG(t){return t.trim().toLowerCase()}function gG(t){return rwe(t)?.toLowerCase()??""}function bAe(){return{fields:{type:[ml],value:null},fieldsIndex:{readOnly:!0,get(){return new jD(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(t){this._userOutFields=t,this.notifyChange("outFields")},get:function(){const t=this._userOutFields;if(!t||!t.length)return null;if(t.includes("*"))return["*"];if(!this.fields)return t;for(const e of t)this.fieldsIndex?.has(e)||tt.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${e} found in outFields`,{layer:this,outFields:t});return hee(this.fieldsIndex,t)}}}}const zO=tt.getLogger("esri.layers.support.labelingInfo"),wAe=/\[([^\[\]]+)\]/gi;function vG(t,e,i){return t?t.map(r=>{const s=new Y3;if(s.read(r,i),s.labelExpression){const n=e.fields||e.layerDefinition&&e.layerDefinition.fields||this.fields;s.labelExpression=s.labelExpression.replace(wAe,(o,a)=>`[${_Ae(a,n)}]`)}return s}):null}function _Ae(t,e){if(!e)return t;const i=t.toLowerCase();for(let r=0;r<e.length;r++){const s=e[r].name;if(s.toLowerCase()===i)return s}return t}const xAe={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};function SAe(t,e){const i=Le(t);return i.some(r=>EAe(r,e))?[]:i}function EAe(t,e){const i=t.labelPlacement,r=xAe[e];if(!t.symbol)return zO.warn("No ILabelClass symbol specified."),!0;if(!r)return zO.error(new Ce("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${e}' is not supported`)),!0;if(!r.includes(i)){const s=r[0];i&&zO.warn(`Found invalid label placement type ${i} for ${e}. Defaulting to ${s}`),t.labelPlacement=s}return!1}const Xu=[];function UD(t,e){if(hD(t.url??""))return!0;const{wkid:i}=e;for(const r of Xu){if((t.version??0)>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}Xu.push([10.91,()=>{const t=new Set([9709,9716,9741,9761,9766]);for(let e=9712;e<=9713;e++)t.add(e);for(let e=9748;e<=9749;e++)t.add(e);for(let e=20904;e<=20932;e++)t.add(e);for(let e=21004;e<=21032;e++)t.add(e);for(let e=21207;e<=21264;e++)t.add(e);for(let e=21307;e<=21364;e++)t.add(e);for(let e=102759;e<=102760;e++)t.add(e);for(let e=102901;e<=102955;e++)t.add(e);return t}]),Xu.push([10.9,()=>{const t=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let e=9356;e<=9360;e++)t.add(e);for(let e=9404;e<=9407;e++)t.add(e);for(let e=9476;e<=9482;e++)t.add(e);for(let e=9487;e<=9494;e++)t.add(e);for(let e=9697;e<=9699;e++)t.add(e);return t}]),Xu.push([10.81,()=>{const t=new Set([9265,9333,103598,103699]);for(let e=9248;e<=9254;e++)t.add(e);for(let e=9271;e<=9273;e++)t.add(e);for(let e=9284;e<=9285;e++)t.add(e);for(let e=21453;e<=21463;e++)t.add(e);return t}]),Xu.push([10.8,()=>{const t=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let e=8035;e<=8036;e++)t.add(e);for(let e=8455;e<=8456;e++)t.add(e);for(let e=8518;e<=8529;e++)t.add(e);for(let e=8533;e<=8536;e++)t.add(e);for(let e=8538;e<=8540;e++)t.add(e);for(let e=8677;e<=8679;e++)t.add(e);for(let e=8902;e<=8903;e++)t.add(e);for(let e=8907;e<=8910;e++)t.add(e);for(let e=8949;e<=8951;e++)t.add(e);for(let e=8972;e<=8987;e++)t.add(e);for(let e=9039;e<=9040;e++)t.add(e);for(let e=9068;e<=9069;e++)t.add(e);for(let e=9140;e<=9141;e++)t.add(e);for(let e=9148;e<=9150;e++)t.add(e);for(let e=9153;e<=9159;e++)t.add(e);for(let e=9205;e<=9218;e++)t.add(e);for(let e=9221;e<=9222;e++)t.add(e);for(let e=54098;e<=54101;e++)t.add(e);return t}]),Xu.push([10.71,()=>{const t=new Set([6316]);for(let e=8351;e<=8353;e++)t.add(e);for(let e=9294;e<=9297;e++)t.add(e);for(let e=22619;e<=22621;e++)t.add(e);for(let e=103586;e<=103594;e++)t.add(e);return t}]),Xu.push([10.7,()=>{const t=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let e=8065;e<=8068;e++)t.add(e);for(let e=8082;e<=8083;e++)t.add(e);for(let e=8379;e<=8385;e++)t.add(e);for(let e=8836;e<=8840;e++)t.add(e);for(let e=8857;e<=8860;e++)t.add(e);for(let e=53035;e<=53037;e++)t.add(e);for(let e=54090;e<=54091;e++)t.add(e);for(let e=102498;e<=102499;e++)t.add(e);return t}]),Xu.push([10.61,()=>new Set([102497])]),Xu.push([10.6,()=>{const t=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let e=7755;e<=7787;e++)t.add(e);for(let e=7791;e<=7795;e++)t.add(e);for(let e=7799;e<=7801;e++)t.add(e);for(let e=7825;e<=7831;e++)t.add(e);for(let e=7877;e<=7878;e++)t.add(e);for(let e=7882;e<=7883;e++)t.add(e);for(let e=7991;e<=7992;e++)t.add(e);for(let e=8042;e<=8043;e++)t.add(e);for(let e=8058;e<=8059;e++)t.add(e);for(let e=8311;e<=8348;e++)t.add(e);for(let e=9060;e<=9067;e++)t.add(e);for(let e=102562;e<=102568;e++)t.add(e);for(let e=102799;e<=102900;e++)t.add(e);return t}]),Xu.push([10.51,()=>{const t=new Set([7683,7881,7886,7899,8888,9e3]);for(let e=8013;e<=8032;e++)t.add(e);for(let e=9053;e<=9057;e++)t.add(e);for(let e=104017;e<=104018;e++)t.add(e);for(let e=104971;e<=104974;e++)t.add(e);return t}]),Xu.push([10.5,()=>{const t=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let e=4087;e<=4088;e++)t.add(e);for(let e=5896;e<=5899;e++)t.add(e);for(let e=7005;e<=7007;e++)t.add(e);for(let e=7057;e<=7070;e++)t.add(e);for(let e=7073;e<=7082;e++)t.add(e);for(let e=7109;e<=7128;e++)t.add(e);for(let e=7844;e<=7859;e++)t.add(e);return t}]);async function TAe(t,e,i){const r=t&&t.getAtOrigin&&t.getAtOrigin("renderer",e.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const s=await B4(r.populateFromStyle());if(pr(i),s.ok===!1){const n=s.error;e&&e.messages&&e.messages.push(new kl("renderer:style-reference",`Failed to create unique value renderer from style reference: ${n.message}`,{error:n,context:e})),t.clear("renderer",e?.origin)}}}var n6;let xv=n6=class extends Je{constructor(t){super(t),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new n6({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};h([p({type:[String],json:{write:!0}})],xv.prototype,"groupByFields",void 0),h([p({type:Number,json:{write:!0}})],xv.prototype,"topCount",void 0),h([p({type:[String],json:{write:!0}})],xv.prototype,"orderByFields",void 0),xv=n6=h([ce("esri.rest.support.TopFilter")],xv);const IAe=xv;var o6;const bG=new si({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),wG=new si({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Ir=o6=class extends Je{constructor(t){super(t),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10}clone(){return new o6(Le({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};h([p({type:Boolean,json:{write:!0}})],Ir.prototype,"cacheHint",void 0),h([p({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],Ir.prototype,"distance",void 0),h([p({types:Ac,json:{read:Pl,write:!0}})],Ir.prototype,"geometry",void 0),h([p({type:Number,json:{write:!0}})],Ir.prototype,"geometryPrecision",void 0),h([p({type:Number,json:{write:!0}})],Ir.prototype,"maxAllowableOffset",void 0),h([p({type:Number,json:{read:{source:"resultRecordCount"}}})],Ir.prototype,"num",void 0),h([p({json:{write:!0}})],Ir.prototype,"objectIds",void 0),h([p({type:[String],json:{write:!0}})],Ir.prototype,"orderByFields",void 0),h([p({type:[String],json:{write:!0}})],Ir.prototype,"outFields",void 0),h([p({type:Tt,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Ir.prototype,"outSpatialReference",void 0),h([p({type:String,json:{write:!0}})],Ir.prototype,"resultType",void 0),h([p({json:{write:!0}})],Ir.prototype,"returnGeometry",void 0),h([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ir.prototype,"returnM",void 0),h([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ir.prototype,"returnZ",void 0),h([p({type:Number,json:{read:{source:"resultOffset"}}})],Ir.prototype,"start",void 0),h([it("start"),it("num")],Ir.prototype,"writeStart",null),h([p({type:String,json:{read:{source:"spatialRel",reader:bG.read},write:{target:"spatialRel",writer:bG.write}}})],Ir.prototype,"spatialRelationship",void 0),h([p({type:Ga,json:{write:!0}})],Ir.prototype,"timeExtent",void 0),h([p({type:IAe,json:{write:!0}})],Ir.prototype,"topFilter",void 0),h([p({type:String,json:{read:wG.read,write:{writer:wG.write,overridePolicy(t){return{enabled:ee(t)&&ee(this.distance)&&this.distance>0}}}}})],Ir.prototype,"units",void 0),h([p({type:String,json:{write:!0}})],Ir.prototype,"where",void 0),Ir=o6=h([ce("esri.rest.support.TopFeaturesQuery")],Ir),Ir.from=ns(Ir);const ST=Ir,MAe=["oid","global-id"],AAe=["oid","global-id","guid"];function VD({displayField:t,editFieldsInfo:e,fields:i,objectIdField:r,title:s},n){if(!i)return null;const o=LAe({editFieldsInfo:e,fields:i,objectIdField:r},n);if(!o.length)return null;const a=FAe({titleBase:s,fields:i,displayField:t}),l=NAe();return new Hm({title:a,content:l,fieldInfos:o})}const CAe=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],$Ae=(t,{editFieldsInfo:e,objectIdField:i,visibleFieldNames:r})=>r?r.has(t.name):!mse(t.name,e)&&(!i||t.name!==i)&&!MAe.includes(t.type)&&!CAe.some(s=>s.test(t.name));function OAe(t,e){const i=t;return e&&(t=t.filter(r=>!e.includes(r.type))),t===i&&(t=t.slice()),t.sort(RAe),t}function RAe(t,e){return t.type==="oid"?-1:e.type==="oid"?1:_G(t)?-1:_G(e)?1:(t.alias||t.name).toLocaleLowerCase().localeCompare((e.alias||e.name).toLocaleLowerCase())}function mse(t,e){if(!t||!e)return!1;const{creationDateField:i,creatorField:r,editDateField:s,editorField:n}=e;return[i&&i.toLowerCase(),r&&r.toLowerCase(),s&&s.toLowerCase(),n&&n.toLowerCase()].includes(t.toLowerCase())}function kAe(t,e){return t.editable&&!AAe.includes(t.type)&&!mse(t.name,e)}function LAe({editFieldsInfo:t,fields:e,objectIdField:i},r){return OAe(e??[],r?.ignoreFieldTypes||DAe).map(s=>new R3({fieldName:s.name,isEditable:kAe(s,t),label:s.alias,format:PAe(s),visible:$Ae(s,{editFieldsInfo:t,objectIdField:i,visibleFieldNames:r?.visibleFieldNames})}))}function PAe(t){switch(t.type){case"small-integer":case"integer":case"single":return new Jv({digitSeparator:!0,places:0});case"double":return new Jv({digitSeparator:!0,places:2});case"date":return new Jv({dateFormat:"long-month-day-year"});default:return t.type==="string"&&gee(t.name)?new Jv({digitSeparator:!0,places:0}):null}}function NAe(){return[new Zb,new TS]}function FAe(t){const e=owe(t),{titleBase:i}=t;return e?`${i}: {${e.trim()}}`:i??""}function _G(t){return(t.name&&t.name.toLowerCase())==="name"?!0:(t.alias&&t.alias.toLowerCase())==="name"}const DAe=["geometry","blob","raster","guid","xml"],Oo="FeatureLayer",yse="esri.layers.FeatureLayer",jAe=tt.getLogger(yse);function ET(t,e){return new Ce("layer:unsupported",`Layer (${t.title}, ${t.id}) of type '${t.declaredClass}' ${e}`,{layer:t})}function xG(t){return t&&t instanceof Nt}const GO=bAe();function qO(t,e,i){const r=!!i?.writeLayerSchema;return{enabled:r,ignoreOrigin:r}}let Ut=class extends BIe(MMe(K3e(pAe(U3e(a1(OMe(_C(c1(t_(hC(Xw(e_(Ym(fC(uD(Er(Bh))))))))))))))))){constructor(...t){super(...t),this._handles=new Ao,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=Tt.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0}destroy(){this.source?.destroy(),this._handles=Jr(this._handles)}normalizeCtorArgs(t,e){return typeof t=="string"?{url:t,...e}:t}load(t){const e=ee(t)?t.signal:null;if(this.portalItem?.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(e).then(r=>this.initLayerProperties(r))),Promise.resolve(this);const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},t).catch(_a).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const r=await this._fetchFirstLayerId(e);r!=null&&(this.layerId=r)}if(!this.url&&!this._hasMemorySource())throw new Ce("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(e))}).then(()=>this._setUserPrivileges(this.serviceItemId,t)).then(()=>MIe(this,t));return this.addResolvingPromise(i),Promise.resolve(this)}readCapabilities(t,e){return e=e.layerDefinition||e,MD(e,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities?.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(t){this._overrideIfSome("editingEnabled",t)}readEditingEnabled(t,e){return this._readEditingEnabled(e,!1)}readEditingEnabledFromWebMap(t,e,i){return this._readEditingEnabled(e,!0,i)}writeEditingEnabled(t,e){this._writeEditingEnabled(t,e,!1)}writeEditingEnabledToWebMap(t,e,i,r){this._writeEditingEnabled(t,e,!0,r)}get effectiveEditingEnabled(){return AIe(this)}readIsTable(t,e){return(e=e?.layerDefinition??e).type==="Table"||!e.geometryType}writeIsTable(t,e,i,r){r?.writeLayerSchema&&Io(i,t?"Table":"Feature Layer",e)}readGlobalIdField(t,e){return Dre(e.layerDefinition||e)}readObjectIdField(t,e){return jre(e.layerDefinition||e)}get parsedUrl(){const t=Fs(this.url);return t!=null&&(this.dynamicDataSource!=null?t.path=$0(t.path,"dynamicLayer"):this.layerId!=null&&(t.path=$0(t.path,this.layerId.toString()))),t}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(t){cB(t,this.fieldsIndex),this._set("renderer",t)}readRenderer(t,e,i){const r=(e=e.layerDefinition||e).drawingInfo?.renderer;if(r){const s=RS(r,e,i)??void 0;return s||jAe.error("Failed to create renderer",{rendererDefinition:e.drawingInfo.renderer,layer:this,context:i}),s}if(e.defaultSymbol)return e.types&&e.types.length?new Zm({defaultSymbol:HO(e.defaultSymbol,e,i),field:e.typeIdField,uniqueValueInfos:e.types.map(s=>({id:s.id,symbol:HO(s.symbol,s,i)}))}):new D0({symbol:HO(e.defaultSymbol,e,i)})}set source(t){const e=this._get("source");e!==t&&(xG(e)&&this._resetMemorySource(e),xG(t)&&this._initMemorySource(t),this._set("source",t))}castSource(t){return t?Array.isArray(t)||t instanceof Nt?new jd({layer:this,items:t}):t:null}readSource(t,e){const i=n1.fromJSON(e.featureSet);return new jd({layer:this,items:i?.features??[]})}readTemplates(t,e){const i=e.editFieldsInfo,r=i&&i.creatorField,s=i&&i.editorField;return t=t&&t.map(n=>FD.fromJSON(n)),this._fixTemplates(t,r),this._fixTemplates(t,s),t}readTitle(t,e){const i=e.layerDefinition?.name??e.name,r=e.title||e.layerDefinition&&e.layerDefinition.title;if(i){const s=this.portalItem&&this.portalItem.title;if(this.sublayerTitleMode==="item-title")return this.url?dSe(this.url,i):i;let n=i;if(!n&&this.url){const o=o1(this.url);ee(o)&&(n=o.title)}return n?(this.sublayerTitleMode==="item-title-and-service-name"&&s&&s!==n&&(n=s+" - "+n),cD(n)):void 0}if(this.sublayerTitleMode==="item-title"&&r)return r}readTitleFromWebMap(t,e){return e.title||e.layerDefinition&&e.layerDefinition.name}readTypeIdField(t,e){let i=(e=e.layerDefinition||e).typeIdField;if(i&&e.fields){i=i.toLowerCase();const r=e.fields.find(s=>s.name.toLowerCase()===i);r&&(i=r.name)}return i}readTypes(t,e){t=(e=e.layerDefinition||e).types;const i=e.editFieldsInfo,r=i&&i.creatorField,s=i&&i.editorField;return t&&t.map(n=>(n=DD.fromJSON(n),this._fixTemplates(n.templates,r),this._fixTemplates(n.templates,s),n))}readVisible(t,e){return e.layerDefinition&&e.layerDefinition.defaultVisibility!=null?!!e.layerDefinition.defaultVisibility:e.visibility!=null?!!e.visibility:void 0}async addAttachment(t,e){return dIe(this,t,e,Oo)}async updateAttachment(t,e,i){return pIe(this,t,e,i,Oo)}async applyEdits(t,e){return fIe(this,t,e)}on(t,e){return super.on(t,e)}createPopupTemplate(t){return VD(this,t)}async createGraphicsSource(t){if(this._hasMemorySource()&&this.source)return this.source.load({signal:t});const{default:e}=await ch(De(()=>import("./FeatureLayerSource-43b7540a.js"),["./FeatureLayerSource-43b7540a.js","./assetEditingSupport-2cebf928.js","./clientSideDefaults-88a0f6ca.js","./QueryEngineCapabilities-42e44ded.js","./preload-helper-388ac9d5.js"],import.meta.url),t);return new e({layer:this}).load({signal:t})}createQuery(){const t=EIe(this);t.dynamicDataSource=this.dynamicDataSource;const e=ee(this.subtypeCode)?`${this.subtypeField} = ${this.subtypeCode}`:null,i=rD(this.definitionExpression,e);return t.where=i||"1=1",t}async deleteAttachments(t,e){return mIe(this,t,e,Oo)}async fetchRecomputedExtents(t){return yIe(this,t,Oo)}getFeatureType(t){const{typeIdField:e,types:i}=this;if(!e||!t)return null;const r=t.attributes?t.attributes[e]:void 0;if(r==null)return null;let s=null;return i?.some(n=>{const{id:o}=n;return o!=null&&(o.toString()===r.toString()&&(s=n),!!s)}),s}getFieldDomain(t,e){const i=e&&e.feature,r=this.getFeatureType(i);if(r){const s=r.domains&&r.domains[t];if(s&&s.type!=="inherited")return s}return this._getLayerDomain(t)}getField(t){return this.fieldsIndex.get(t)}async queryAttachments(t,e){return gIe(this,t,e,Oo)}async queryFeatures(t,e){const i=await this.load(),r=await i.source.queryFeatures(Ls.from(t)??i.createQuery(),e);if(r?.features)for(const s of r.features)s.layer=s.sourceLayer=i;return r}async queryObjectIds(t,e){return vIe(this,t,e,Oo)}async queryFeatureCount(t,e){return bIe(this,t,e,Oo)}async queryExtent(t,e){return wIe(this,t,e,Oo)}async queryRelatedFeatures(t,e){return _Ie(this,t,e,Oo)}async queryRelatedFeaturesCount(t,e){return xIe(this,t,e,Oo)}async queryTopFeatures(t,e){const{source:i,capabilities:r}=await this.load();if(!i.queryTopFeatures||!r?.query?.supportsTopFeaturesQuery)throw new Ce(Oo,"Layer source does not support queryTopFeatures capability");const s=await i.queryTopFeatures(ST.from(t),e);if(s?.features)for(const n of s.features)n.layer=n.sourceLayer=this;return s}async queryTopObjectIds(t,e){const{source:i,capabilities:r}=await this.load();if(!i.queryTopObjectIds||!r?.query.supportsTopFeaturesQuery)throw new Ce(Oo,"Layer source does not support queryTopObjectIds capability");return i.queryTopObjectIds(ST.from(t),e)}async queryTopFeaturesExtent(t,e){const{source:i,capabilities:r}=await this.load();if(!i.queryTopExtents||!r?.query?.supportsTopFeaturesQuery)throw new Ce(Oo,"Layer source does not support queryTopExtents capability");return i.queryTopExtents(ST.from(t),e)}async queryTopFeatureCount(t,e){const{source:i,capabilities:r}=await this.load();if(!i.queryTopCount||!r?.query?.supportsTopFeaturesQuery)throw new Ce(Oo,"Layer source does not support queryFeatureCount capability");return i.queryTopCount(ST.from(t),e)}read(t,e){const i=t.featureCollection;if(i){const r=i.layers;r&&r.length===1&&(super.read(r[0],e),i.showLegend!=null&&super.read({showLegend:i.showLegend},e))}super.read(t,e),e&&e.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(t,e){e={...e,origin:e?.origin??void 0,writeLayerSchema:e?.writeLayerSchema??this._hasMemorySource()};const{origin:i,layerContainerType:r,messages:s}=e;if(this.dynamicDataSource)return s?.push(ET(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if(i==="web-scene"||i==="web-map"&&r!=="tables")return s?.push(ET(this,"using a table source cannot be written to web scenes and web maps")),null;if(this._hasMemorySource())return s?.push(ET(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&i==="web-map"&&r==="tables")return s?.push(ET(this,"using a non-table source cannot be written to tables in web maps")),null;return super.write(t,e)}clone(){if(this._hasMemorySource())throw new Ce(Oo,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(t){return!!this.loaded&&(this.source?.type==="memory"||UD(this,t))}async save(t){return(await De(()=>import("./featureLayerUtils-ac7dbdf5.js"),["./featureLayerUtils-ac7dbdf5.js","./originUtils-1469eeaf.js","./multiOriginJSONSupportUtils-c978f4c3.js","./fetchService-d05ae315.js","./jsonContext-48257512.js","./preload-helper-388ac9d5.js"],import.meta.url)).save(this,t)}async saveAs(t,e){return(await De(()=>import("./featureLayerUtils-ac7dbdf5.js"),["./featureLayerUtils-ac7dbdf5.js","./originUtils-1469eeaf.js","./multiOriginJSONSupportUtils-c978f4c3.js","./fetchService-d05ae315.js","./jsonContext-48257512.js","./preload-helper-388ac9d5.js"],import.meta.url)).saveAs(this,t,e)}_readEditingEnabled(t,e,i){let r=t.layerDefinition?.capabilities;return r?this._hasEditingCapability(r):(r=t.capabilities,e&&i?.origin==="web-map"&&!this._hasMemorySource()&&r?this._hasEditingCapability(r):void 0)}_hasEditingCapability(t){return t.toLowerCase().split(",").map(e=>e.trim()).includes("editing")}_writeEditingEnabled(t,e,i,r){if(!t){const s=this.capabilities?.operations?.supportsSync?"Query,Sync":"Query";Io("layerDefinition.capabilities",s,e),i&&!r?.writeLayerSchema&&(e.capabilities=s)}}_getLayerDomain(t){const e=this.fieldsIndex.get(t);return e?e.domain:null}_fetchFirstLayerId(t){return Et(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:t}).then(e=>{const i=e.data;if(i)return Array.isArray(i.layers)&&i.layers.length>0?i.layers[0].id:Array.isArray(i.tables)&&i.tables.length>0?i.tables[0].id:void 0})}async initLayerProperties(t){return this._set("source",t),t.sourceJSON&&(this.sourceJSON=t.sourceJSON,this.read(t.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:this.portalItem?.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),cB(this.renderer,this.fieldsIndex),cee(this.timeInfo,this.fieldsIndex),TAe(this,{origin:"service"})}async hasDataChanged(){return SIe(this)}async fetchPublishingStatus(){const t=this.source;return t?.fetchPublishingStatus?t.fetchPublishingStatus():"unavailable"}_verifyFields(){const t=this.parsedUrl?.path??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+t+")"),this.isTable||this._hasMemorySource()||t.search(/\/FeatureServer\//i)!==-1||this.fields?.some(e=>e.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+t+")")}_fixTemplates(t,e){t&&t.forEach(i=>{const r=i.prototype&&i.prototype.attributes;r&&e&&delete r[e]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new Ce("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new Ce("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(t){t.forEach(e=>{e.layer=this,e.sourceLayer=this}),this._handles.add([t.on("after-add",e=>{e.item.layer=this,e.item.sourceLayer=this}),t.on("after-remove",e=>{e.item.layer=null,e.item.sourceLayer=null})],"fl-source")}_resetMemorySource(t){t.forEach(e=>{e.layer=null,e.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}};h([Ye("service","capabilities")],Ut.prototype,"readCapabilities",null),h([p({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Ut.prototype,"charts",void 0),h([p({readOnly:!0})],Ut.prototype,"createQueryVersion",null),h([p({json:{read:{source:"layerDefinition.copyrightText"}}})],Ut.prototype,"copyright",void 0),h([p({json:{read:{source:"layerDefinition.displayField"}}})],Ut.prototype,"displayField",void 0),h([p({types:h0,readOnly:!0})],Ut.prototype,"defaultSymbol",void 0),h([p({type:Jo})],Ut.prototype,"dynamicDataSource",void 0),h([p({type:Boolean})],Ut.prototype,"editingEnabled",null),h([Ye(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Ut.prototype,"readEditingEnabled",null),h([Ye("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Ut.prototype,"readEditingEnabledFromWebMap",null),h([it(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Ut.prototype,"writeEditingEnabled",null),h([it("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Ut.prototype,"writeEditingEnabledToWebMap",null),h([p({readOnly:!0})],Ut.prototype,"effectiveEditingEnabled",null),h([p({...GO.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:qO}}}}})],Ut.prototype,"fields",void 0),h([p(GO.fieldsIndex)],Ut.prototype,"fieldsIndex",void 0),h([p({type:_xe,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Ut.prototype,"formTemplate",void 0),h([p({json:{read:{source:"layerDefinition.extent"}}})],Ut.prototype,"fullExtent",void 0),h([p({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:qO,writer(t,e,i){const r=t?j8.toJSON(t):null;r&&Io(i,r,e)}}}},read:{source:"layerDefinition.geometryType",reader:j8.read}}})],Ut.prototype,"geometryType",void 0),h([p({json:{read:{source:"layerDefinition.hasM"}}})],Ut.prototype,"hasM",void 0),h([p({json:{read:{source:"layerDefinition.hasZ"}}})],Ut.prototype,"hasZ",void 0),h([p(Fie)],Ut.prototype,"id",void 0),h([p({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Ut.prototype,"infoFor3D",void 0),h([p({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Ut.prototype,"isTable",void 0),h([Ye("service","isTable",["type","geometryType"]),Ye("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Ut.prototype,"readIsTable",null),h([it("web-map","isTable")],Ut.prototype,"writeIsTable",null),h([p(gD)],Ut.prototype,"labelsVisible",void 0),h([p({type:[Y3],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:vG},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:vG},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],Ut.prototype,"labelingInfo",void 0),h([p((()=>{const t=Le(nEe);return t.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(e,i,r){Io(r,Q4(e),i)}}},t})())],Ut.prototype,"opacity",void 0),h([p(vD)],Ut.prototype,"legendEnabled",void 0),h([p({type:["show","hide"],json:(()=>{const t=Le(Die.json);return t.origins["portal-item"]={read:!1,write:!1},t})()})],Ut.prototype,"listMode",void 0),h([Ye("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Ut.prototype,"readGlobalIdField",null),h([p({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:qO}}}}})],Ut.prototype,"objectIdField",void 0),h([Ye("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Ut.prototype,"readObjectIdField",null),h([p({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Ut.prototype,"operationalLayerType",void 0),h([p(GO.outFields)],Ut.prototype,"outFields",void 0),h([p({readOnly:!0})],Ut.prototype,"parsedUrl",null),h([p({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Ut.prototype,"path",void 0),h([p(z3)],Ut.prototype,"popupEnabled",void 0),h([p({type:Hm,json:{name:"popupInfo",write:!0}})],Ut.prototype,"popupTemplate",void 0),h([p({readOnly:!0})],Ut.prototype,"defaultPopupTemplate",null),h([p({types:U3,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:Gte,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(t,e,i)=>({ignoreOrigin:i?.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(t,e,i)=>({ignoreOrigin:i?.writeLayerSchema})}}})],Ut.prototype,"renderer",null),h([Ye("service","renderer",["drawingInfo.renderer","defaultSymbol"]),Ye("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Ut.prototype,"readRenderer",null),h([p((()=>{const t=Le(rEe);return t.json.origins["portal-item"]={read:!1,write:!1},t})())],Ut.prototype,"screenSizePerspectiveEnabled",void 0),h([p({clonable:!1})],Ut.prototype,"source",null),h([mi("source")],Ut.prototype,"castSource",null),h([Ye("portal-item","source",["featureSet"]),Ye("web-map","source",["featureSet"])],Ut.prototype,"readSource",null),h([p({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],Ut.prototype,"spatialReference",void 0),h([p({type:Number})],Ut.prototype,"subtypeCode",void 0),h([p({type:[FD]})],Ut.prototype,"templates",void 0),h([Ye("templates",["editFieldsInfo","creatorField","editorField","templates"])],Ut.prototype,"readTemplates",null),h([p({type:fse})],Ut.prototype,"timeInfo",void 0),h([p()],Ut.prototype,"title",void 0),h([Ye("service","title",["name"]),Ye("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Ut.prototype,"readTitle",null),h([Ye("web-map","title",["layerDefinition.name","title"])],Ut.prototype,"readTitleFromWebMap",null),h([p({type:String})],Ut.prototype,"sublayerTitleMode",void 0),h([p({json:{read:!1}})],Ut.prototype,"type",void 0),h([p({type:String})],Ut.prototype,"typeIdField",void 0),h([Ye("service","typeIdField"),Ye("typeIdField",["layerDefinition.typeIdField"])],Ut.prototype,"readTypeIdField",null),h([p({type:[DD]})],Ut.prototype,"types",void 0),h([Ye("service","types",["types"]),Ye("types",["layerDefinition.types"])],Ut.prototype,"readTypes",null),h([p({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Ut.prototype,"visible",void 0),h([Ye("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Ut.prototype,"readVisible",null),Ut=h([ce(yse)],Ut);const HO=zm({types:sC}),xC=Ut,UAe=Object.freeze(Object.defineProperty({__proto__:null,default:xC},Symbol.toStringTag,{value:"Module"}));let Ux=class extends ea(Nt){constructor(e){super(e),this.handles.add([this.on("before-add",i=>{Re(i.item)&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(Nt.ofType(this.itemType.Type))(e):new Nt(e)}};function a6(t,e){return{type:t,cast:SQ,set(i){const r=C0(i,this._get(e),t);r.owner=this,this._set(e,r)}}}h([p()],Ux.prototype,"owner",null),Ux=h([ce("esri.core.support.OwningCollection")],Ux);let y0=class extends Ux{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};h([ZF({Type:kn,ensureType:ns(kn)})],y0.prototype,"itemType",void 0),y0=h([ce("esri.support.GraphicsCollection")],y0);let Id=class extends a1(c1(Bh)){constructor(e){super(e),this.elevationInfo=null,this.graphics=new y0,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,i){return super.on(e,i)}graphicChanged(e){this.emit("graphic-update",e)}};h([p({type:Pie})],Id.prototype,"elevationInfo",void 0),h([p(a6(y0,"graphics"))],Id.prototype,"graphics",void 0),h([p({type:["show","hide"]})],Id.prototype,"listMode",void 0),h([p()],Id.prototype,"screenSizePerspectiveEnabled",void 0),h([p({readOnly:!0})],Id.prototype,"type",void 0),h([p({constructOnly:!0})],Id.prototype,"internal",void 0),Id=h([ce("esri.layers.GraphicsLayer")],Id);const VAe=Id;var l6;const TT=new si({flow_from:"flow-from",flow_to:"flow-to"});let co=l6=class extends Jm(Je){constructor(t){super(t),this.density=.8,this.color=new It([255,255,255,1]),this.maxPathLength=200,this.trailWidth=1.5,this.flowSpeed=10,this.trailLength=100,this.smoothing=0,this.flowRepresentation="flow-from",this.type="flow",this.authoringInfo=null,this.legendOptions=null,this.trailCap="butt",this.background="none"}clone(){const{density:t,maxPathLength:e,trailWidth:i,flowSpeed:r,trailLength:s,smoothing:n,flowRepresentation:o,trailCap:a,background:l}=this,u=this.color.clone(),c=(this.visualVariables||[]).map(m=>m.clone()),d=this.authoringInfo?.clone(),f=this.legendOptions?.clone();return new l6({density:t,color:u,maxPathLength:e,trailWidth:i,flowSpeed:r,trailLength:s,trailCap:a,background:l,smoothing:n,flowRepresentation:o,visualVariables:c,authoringInfo:d,legendOptions:f})}getSymbol(t,e){}async getSymbolAsync(t,e){}getSymbols(){return[]}};h([p({type:Number,json:{write:!0}})],co.prototype,"density",void 0),h([p({type:It,json:{write:{allowNull:!0}}})],co.prototype,"color",void 0),h([p({type:Number,cast:ki,json:{write:!0}})],co.prototype,"maxPathLength",void 0),h([p({type:Number,cast:ki,json:{write:!0}})],co.prototype,"trailWidth",void 0),h([p({type:Number,json:{write:!0}})],co.prototype,"flowSpeed",void 0),h([p({type:Number,json:{write:!0}})],co.prototype,"trailLength",void 0),h([p({type:Number,cast:ki,json:{write:!1}})],co.prototype,"smoothing",void 0),h([p({type:TT.apiValues,json:{type:TT.jsonValues,read:{reader:TT.read},write:{writer:TT.write}}})],co.prototype,"flowRepresentation",void 0),h([Dt({flowRenderer:"flow"})],co.prototype,"type",void 0),h([p({type:D3,json:{write:!0}})],co.prototype,"authoringInfo",void 0),h([p({type:d0,json:{write:!0}})],co.prototype,"legendOptions",void 0),h([p({type:String,json:{write:!0}})],co.prototype,"trailCap",void 0),h([p({type:String,json:{write:!0}})],co.prototype,"background",void 0),co=l6=h([ce("esri.renderers.FlowRenderer")],co);const gse=co;let Sv=class extends Je{constructor(){super(...arguments),this.value=null,this.label=null,this.color=null}};h([p({type:Number,json:{write:!0}})],Sv.prototype,"value",void 0),h([p({type:String,json:{write:!0}})],Sv.prototype,"label",void 0),h([p({type:It,json:{type:[Si],write:!0}})],Sv.prototype,"color",void 0),Sv=h([ce("esri.renderers.support.ColormapInfo")],Sv);const vse=Sv;function BAe(t){return"r"in t&&"g"in t&&"b"in t}function bse(t){return"h"in t&&"s"in t&&"v"in t}function wse(t){return"l"in t&&"a"in t&&"b"in t}function _se(t){return"l"in t&&"c"in t&&"h"in t}function zAe(t){return"x"in t&&"y"in t&&"z"in t}const GAe=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],qAe=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function xse(t,e){const i=[];let r,s;if(t[0].length!==e.length)throw new Error("dimensions do not match");const n=t.length,o=t[0].length;let a=0;for(r=0;r<n;r++){for(a=0,s=0;s<o;s++)a+=t[r][s]*e[s];i.push(a)}return i}function Sse(t){const e=[t.r/255,t.g/255,t.b/255].map(r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4),i=xse(GAe,e);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function BD(t){const e=xse(qAe,[t.x/100,t.y/100,t.z/100]).map(i=>{const r=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(r,0))});return{r:Math.round(255*e[0]),g:Math.round(255*e[1]),b:Math.round(255*e[2])}}function Ese(t){const e=[t.x/95.047,t.y/100,t.z/108.883].map(i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862);return{l:116*e[1]-16,a:500*(e[0]-e[1]),b:200*(e[1]-e[2])}}function Tse(t){const e=t.l,i=[(e+16)/116+t.a/500,(e+16)/116,(e+16)/116-t.b/200].map(r=>r>6/29?r**3:3*(6/29)**2*(r-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function HAe(t){const e=t.l,i=t.a,r=t.b,s=Math.sqrt(i*i+r*r);let n=Math.atan2(r,i);return n=n>0?n:n+2*Math.PI,{l:e,c:s,h:n}}function WAe(t){const e=t.l,i=t.c,r=t.h;return{l:e,a:i*Math.cos(r),b:i*Math.sin(r)}}function JAe(t){return Ese(Sse(t))}function ZAe(t){return BD(Tse(t))}function YAe(t){return HAe(Ese(Sse(t)))}function KAe(t){return BD(Tse(WAe(t)))}function QAe(t){const e=t.r,i=t.g,r=t.b,s=Math.max(e,i,r),n=s-Math.min(e,i,r);let o=s,a=n===0?0:s===e?(i-r)/n%6:s===i?(r-e)/n+2:(e-i)/n+4,l=n===0?0:n/o;return a<0&&(a+=6),a*=60,l*=100,o*=100/255,{h:a,s:l,v:o}}function XAe(t){const e=(t.h+360)%360/60,i=t.s/100,r=t.v/100*255,s=r*i,n=s*(1-Math.abs(e%2-1));let o;switch(Math.floor(e)){case 0:o={r:s,g:n,b:0};break;case 1:o={r:n,g:s,b:0};break;case 2:o={r:0,g:s,b:n};break;case 3:o={r:0,g:n,b:s};break;case 4:o={r:n,g:0,b:s};break;case 5:case 6:o={r:s,g:0,b:n};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+r-s),o.g=Math.round(o.g+r-s),o.b=Math.round(o.b+r-s),o}function SC(t){return BAe(t)?t:_se(t)?KAe(t):wse(t)?ZAe(t):zAe(t)?BD(t):bse(t)?XAe(t):t}function o5(t){return bse(t)?t:QAe(SC(t))}function SG(t){return wse(t)?t:JAe(SC(t))}function EG(t){return _se(t)?t:YAe(SC(t))}const oht=["random","ndvi","ndvi2","ndvi3","elevation","gray","hillshade"],zD=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],Ise={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"},e5e=new si({Aspect:"aspect","Black to White":"black-to-white","Blue Bright":"blue-bright","Blue Light to Dark":"blue-light-to-dark","Blue-Green Bright":"blue-green-bright","Blue-Green Light to Dark":"blue-green-light-to-dark","Brown Light to Dark":"brown-light-to-dark","Brown to Blue Green Diverging, Bright":"brown-to-blue-green-diverging-right","Brown to Blue Green Diverging, Dark":"brown-to-blue-green-diverging-dark","Coefficient Bias":"coefficient-bias","Cold to Hot Diverging":"cold-to-hot-diverging","Condition Number":"condition-number","Cyan to Purple":"cyan-to-purple","Cyan-Light to Blue-Dark":"cyan-light-to-blue-dark",Distance:"distance","Elevation #1":"elevation1","Elevation #2":"elevation2",Errors:"errors","Gray Light to Dark":"gray-light-to-dark","Green Bright":"green-bright","Green Light to Dark":"green-light-to-dark","Green to Blue":"green-to-blue","Orange Bright":"orange-bright","Orange Light to Dark":"orange-light-to-dark","Partial Spectrum":"partial-spectrum","Partial Spectrum 1 Diverging":"partial-spectrum-1-diverging","Partial Spectrum 2 Diverging":"partial-spectrum-2-diverging","Pink to YellowGreen Diverging, Bright":"pink-to-yellow-green-diverging-bright","Pink to YellowGreen Diverging, Dark":"pink-to-yellow-green-diverging-dark",Precipitation:"precipitation",Prediction:"prediction","urple Bright":"purple-bright","Purple to Green Diverging, Bright":"purple-to-green-diverging-bright","Purple to Green Diverging, Dark":"purple-to-green-diverging-dark","Purple-Blue Bright":"purple-blue-bright","Purple-Blue Light to Dark":"purple-blue-light-to-dark","Purple-Red Bright":"purple-red-bright","Purple-Red Light to Dark":"purple-red-light-to-dark","Red Bright":"red-bright","Red Light to Dark":"red-light-to-dark","Red to Blue Diverging, Bright":"red-to-blue-diverging-bright","Red to Blue Diverging, Dark":"red-to-blue-diverging-dark","Red to Green":"red-to-green","Red to Green Diverging, Bright":"red-to-green-diverging-bright","Red to Green Diverging, Dark":"red-to-green-diverging-dark",Slope:"slope","Spectrum-Full Bright":"spectrum-full-bright","Spectrum-Full Dark":"spectrum-full-dark","Spectrum-Full Light":"spectrum-full-light",Surface:"surface",Temperature:"temperature","White to Black":"white-to-black","Yellow to Dark Red":"yellow-to-dark-red","Yellow to Green to Dark Blue":"yellow-to-green-to-dark-blue","Yellow to Red":"yellow-to-red","Yellow-Green Bright":"yellow-green-bright","Yellow-Green Light to Dark":"yellow-green-light-to-dark"});function IT(t,e){if(!t||!e||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]>e[i]+2||t[i]<e[i]-2)return!1;return!0}function t5e(t,e){if(!t)return;const i=e||zD;let r=null;return t.type==="algorithmic"?i.some(s=>{if(IT(t.fromColor.toRgb(),s.fromColor)&&IT(t.toColor.toRgb(),s.toColor))return r=s.id,!0}):t.type==="multipart"&&i.some(s=>{const n=t.colorRamps,o=s.colorRamps;if(n&&o&&n.length===o.length&&!o.some((a,l)=>{if(!IT(n[l].fromColor.toRgb(),new It(a.fromColor).toRgb())||!IT(n[l].toColor.toRgb(),new It(a.toColor).toRgb()))return!0})){if(r)return!0;r=s.id}}),r}function Mse(t){const e=t5e(t);return e?Ise[e]:null}function aht(t){const e=e5e.toJSON(t),i=Object.entries(Ise).find(s=>s[1]===e)?.[0],r=zD.find(s=>s.id===i);return r?r.colorRamps?{type:"multipart",colorRamps:r.colorRamps.map(s=>({type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:s.fromColor,toColor:s.toColor}))}:{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:r.fromColor,toColor:r.toColor}:null}function Ase(t){const e=(t=t||{}).numColors||256,i=t.distanceOffset||0,r=t.isCustomInterval!=null?t.isCustomInterval:t.distanceInterval!==null&&t.distanceInterval!==1/(e-1),s=t.distanceInterval||1/(e-1);return{...t,numColors:e,distanceOffset:i,interpolateAlpha:!!t.interpolateAlpha,distanceInterval:s,isCustomInterval:r,weights:t.weights}}function i5e(t,e,i){const{numColors:r,distanceOffset:s,distanceInterval:n,isCustomInterval:o}=i,a=t.s===0,l=e.s===0;let u=t.h,c=e.h;a&&!l?u=c:l&&!a&&(e={...e,h:u},c=u);let d,f=Math.abs(c-u);const m=360;f<m/2?d=(c-u)*n:(f=m-f,d=u>c?f*n:-f*n);const g=(e.s-t.s)*n,v=(e.v-t.v)*n;let{s:b,v:_}=t,S=u;if(s){const x=s/n;S=(S+x*d+m)%m,b+=x*g,_+=x*v}const M=[];for(let x=0;x<r-1;x++)M.push({h:S,s:b,v:_}),S=(S+d+m)%m,b+=g,_+=v;return M.push(o?{h:S,s:b,v:_}:e),M}function r5e(t,e,i){const{numColors:r,distanceOffset:s,distanceInterval:n,isCustomInterval:o}=i;let{l:a,a:l,b:u}=t;const c=(e.l-a)*n,d=(e.a-l)*n,f=(e.b-u)*n,m=[];if(s){const g=s/n;a+=g*c,l+=g*d,u+=g*f}for(let g=0;g<r-1;g++)m.push({l:a,a:l,b:u}),a+=c,l+=d,u+=f;return m.push(o?{l:a,a:l,b:u}:e),m}function s5e(t,e,i){const{numColors:r,distanceOffset:s,distanceInterval:n,isCustomInterval:o}=i,a=t.h,l=e.h,u=2*Math.PI;let c;if(a<=l){const S=l-a,M=l-a-u;c=Math.abs(M)<Math.abs(S)?M:S}else{const S=l+u-a,M=l-a;c=Math.abs(M)<Math.abs(S)?M:S}const d=c*n,f=(e.l-t.l)*n,m=(e.c-t.c)*n;let{l:g,c:v,h:b}=t;if(s){const S=s/n;g+=S*f,v+=S*m,b=(b+S*d+u)%u}const _=[];for(let S=0;S<r-1;S++)_.push({l:g,c:v,h:b}),g+=f,v+=m,b=(b+d+u)%u;return _.push(o?{l:g,c:v,h:b}:e),_}function Cse(t,e){let{fromColor:i,toColor:r}=t;i.length===3&&(i=i.concat([255])),r.length===3&&(r=r.concat([255]));const s=t.algorithm||"esriCIELabAlgorithm",n=Ase(e),{numColors:o,distanceOffset:a,isCustomInterval:l,interpolateAlpha:u}=n;if(o===1&&a===0)return[i];if(o===2&&a===0&&!l)return[i,r];const c={r:i[0],g:i[1],b:i[2]},d={r:r[0],g:r[1],b:r[2]},f=s==="esriCIELabAlgorithm"?r5e(SG(c),SG(d),n):s==="esriHSVAlgorithm"?i5e(o5(c),o5(d),n):s5e(EG(c),EG(d),n),m=[],g=i[3]??255,v=((r[3]??255)-g)/(o-1);for(let b=0;b<o;b++){const{r:_,g:S,b:M}=SC(f[b]),x=u?Math.round(g+v*b):255;m.push([_,S,M,x])}return m}function n5e(t,e){const{numColors:i,interpolateAlpha:r}=Ase(e);let s=e?.weights;const{colorRamps:n}=t;if(s){const f=s.reduce((m,g)=>m+g);s=s.map(m=>m/f)}else{s=[];for(let f=0;f<n.length;f++)s[f]=1/n.length}const o=[];let a=0,l=0;const u=1/(i-1);let c=!1;for(let f=0;f<n.length;f++){let m=c?0:a*u-l,g=f===n.length-1?i-1-a:(s[f]-m)/u;if(c=Math.ceil(g)===g,g=Math.ceil(g),g===0)continue;m/=s[f];const v=Cse(n[f],{numColors:g,interpolateAlpha:r,distanceOffset:m,distanceInterval:u/s[f]});a+=v.length,o.push(...v),l+=s[f]}const d=[...n[n.length-1].toColor];return d.length===3&&d.push(255),o.push(d),o}function o5e(t,e){const i="toJSON"in t?t.toJSON():t;return i.type==="multipart"?n5e(i,e):Cse(i,e)}function U0(t,e){const i=o5e(t,e),r=e?.interpolateAlpha;return i.forEach((s,n)=>{s.unshift(n),r||s.pop()}),i}function $se(t){const e=Mse(t);if(t){if(t.type==="algorithmic")return{...TG(t),Name:e};if(t.colorRamps){const i=t.colorRamps.map(TG);return{type:"MultiPartColorRamp",NumColorRamps:i.length,ArrayOfColorRamp:i,Name:e}}}}function TG(t){if(t)return{Algorithm:t.toJSON()?.Algorithm||"esriHSVAlgorithm",type:"AlgorithmicColorRamp",FromColor:IG(t.fromColor),ToColor:IG(t.toColor)}}function IG(t){const e=o5(t);return{type:"HsvColor",Hue:e.h,Saturation:e.s,Value:e.v,AlphaValue:255}}function a5e(t){const e=t.reverse().map(i=>{const r=i.toString(16);return r.length<2?"0"+r:r});return 4294967295&Number.parseInt(e.join(""),16)}var Q2;let X2=Q2=class extends Je{constructor(t){super(t),this.colormapInfos=null,this.type="raster-colormap"}static createFromColormap(t,e){if(!t)return null;const i=t[0].length===5,r=[...t].sort(s=>s[0][0]-s[1][0]).map(s=>vse.fromJSON({value:s[0],color:i?s.slice(1,5):s.slice(1,4).concat([255]),label:e?e[s[0]]??"":s[0]}));return new Q2({colormapInfos:r})}static createFromColorramp(t){const e=U0(t);return Q2.createFromColormap(e)}clone(){return new Q2({colormapInfos:this.colormapInfos.map(t=>t.toJSON())})}extractColormap(){return this.colormapInfos.map(({value:t,color:e})=>[t,e.r,e.g,e.b,e.a>1?e.a:255*e.a&255]).sort((t,e)=>t[0]-e[0])}};h([p({type:[vse],json:{write:!0}})],X2.prototype,"colormapInfos",void 0),h([Dt({rasterColormap:"raster-colormap"})],X2.prototype,"type",void 0),X2=Q2=h([ce("esri.renderers.RasterColormapRenderer")],X2);const GD=X2;var u6;let nl=u6=class extends Je{constructor(t){super(t),this.altitude=45,this.azimuth=315,this.colorRamp=null,this.hillshadeType="traditional",this.pixelSizePower=.664,this.pixelSizeFactor=.024,this.scalingType="none",this.type="raster-shaded-relief",this.zFactor=1}readColorRamp(t){return J9(t)}clone(){return new u6({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:Le(this.colorRamp)})}};h([p({type:Number,json:{write:!0}})],nl.prototype,"altitude",void 0),h([p({type:Number,json:{write:!0}})],nl.prototype,"azimuth",void 0),h([p({types:W9,json:{write:!0}})],nl.prototype,"colorRamp",void 0),h([Ye("colorRamp")],nl.prototype,"readColorRamp",null),h([p({type:["traditional","multi-directional"],json:{write:!0}})],nl.prototype,"hillshadeType",void 0),h([p({type:Number,json:{write:!0}})],nl.prototype,"pixelSizePower",void 0),h([p({type:Number,json:{write:!0}})],nl.prototype,"pixelSizeFactor",void 0),h([p({type:["none","adjusted"],json:{write:!0}})],nl.prototype,"scalingType",void 0),h([Dt({rasterShadedRelief:"raster-shaded-relief"})],nl.prototype,"type",void 0),h([p({type:Number,json:{write:!0}})],nl.prototype,"zFactor",void 0),nl=u6=h([ce("esri.renderers.RasterShadedReliefRenderer")],nl);const Ose=nl,Vx=new si({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"}),Rse={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"};var c6;let Is=c6=class extends Je{constructor(t){super(t),this.colorRamp=null,this.computeGamma=!1,this.dynamicRangeAdjustment=!1,this.gamma=[],this.maxPercent=null,this.minPercent=null,this.numberOfStandardDeviations=null,this.outputMax=null,this.outputMin=null,this.sigmoidStrengthLevel=null,this.statistics=[],this.histograms=null,this.useGamma=!1,this.stretchType="none",this.type="raster-stretch"}readColorRamp(t){if(t)return J9(t)}writeStatistics(t,e,i){t?.length&&(Array.isArray(t[0])||(t=t.map(r=>[r.min,r.max,r.avg,r.stddev])),e[i]=t)}readStretchType(t,e){let i=e.stretchType;return typeof i=="number"&&(i=Rse[i]),Vx.read(i)}clone(){return new c6({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:Le(this.statistics),gamma:Le(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:Le(this.colorRamp),histograms:Le(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})}};h([p({types:W9,json:{write:!0}})],Is.prototype,"colorRamp",void 0),h([Ye("colorRamp")],Is.prototype,"readColorRamp",null),h([p({type:Boolean,json:{write:!0}})],Is.prototype,"computeGamma",void 0),h([p({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],Is.prototype,"dynamicRangeAdjustment",void 0),h([p({type:[Number],json:{write:!0}})],Is.prototype,"gamma",void 0),h([p({type:Number,json:{write:!0}})],Is.prototype,"maxPercent",void 0),h([p({type:Number,json:{write:!0}})],Is.prototype,"minPercent",void 0),h([p({type:Number,json:{write:!0}})],Is.prototype,"numberOfStandardDeviations",void 0),h([p({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],Is.prototype,"outputMax",void 0),h([p({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],Is.prototype,"outputMin",void 0),h([p({type:Number,json:{write:!0}})],Is.prototype,"sigmoidStrengthLevel",void 0),h([p({json:{type:[[Number]],write:!0}})],Is.prototype,"statistics",void 0),h([p()],Is.prototype,"histograms",void 0),h([it("statistics")],Is.prototype,"writeStatistics",null),h([p({type:Boolean,json:{write:!0}})],Is.prototype,"useGamma",void 0),h([p({type:Vx.apiValues,json:{type:Vx.jsonValues,write:Vx.write}})],Is.prototype,"stretchType",void 0),h([Ye("stretchType",["stretchType"])],Is.prototype,"readStretchType",null),h([Dt({rasterStretch:"raster-stretch"})],Is.prototype,"type",void 0),Is=c6=h([ce("esri.renderers.RasterStretchRenderer")],Is);const qD=Is,MT={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Ta({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Tt.WebMercator}),minus180Line:new Ta({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Tt.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Ta({paths:[[[180,-180],[180,180]]],spatialReference:Tt.WGS84}),minus180Line:new Ta({paths:[[[-180,-180],[-180,180]]],spatialReference:Tt.WGS84})}};function Qg(t,e){return Math.ceil((t-e)/(2*e))}function kse(t,e){const i=Bx(t);for(const r of i)for(const s of r)s[0]+=e;return t}function Bx(t){return c0(t)?t.rings:t.paths}function Xm(t,e){return e?{...e,query:{...t??{},...e.query}}:{query:t}}function Kn(t){return typeof t=="string"?Fs(t):Le(t)}function Ap(t,e,i){const r={};for(const s in t){if(s==="declaredClass")continue;const n=t[s];if(n!=null&&typeof n!="function")if(Array.isArray(n)){r[s]=[];for(let o=0;o<n.length;o++)r[s][o]=Ap(n[o])}else if(typeof n=="object")if(n.toJSON){const o=n.toJSON(i&&i[s]);r[s]=e?o:JSON.stringify(o)}else r[s]=e?n:JSON.stringify(n);else r[s]=n}return r}async function l5e(t,e,i,r){const s=Kn(t),n=e[0].spatialReference,o={...r,query:{...s.query,f:"json",sr:JSON.stringify(n),target:JSON.stringify({geometryType:Mc(e[0]),geometries:e}),cutter:JSON.stringify(i)}},a=await Et(s.path+"/cut",o),{cutIndexes:l,geometries:u=[]}=a.data;return{cutIndexes:l,geometries:u.map(c=>{const d=Pl(c);return d.spatialReference=n,d})}}function u5e(t){return{geometryType:Mc(t[0]),geometries:t.map(e=>e.toJSON())}}function c5e(t,e,i){const r=Jbe(e);return t.map(s=>{const n=r.fromJSON(s);return n.spatialReference=i,n})}async function h5e(t,e,i){const r=typeof t=="string"?Fs(t):t,s=e[0].spatialReference,n=Mc(e[0]),o={...i,query:{...r.query,f:"json",sr:s.wkid?s.wkid:JSON.stringify(s),geometries:JSON.stringify(u5e(e))}},{data:a}=await Et(r.path+"/simplify",o);return c5e(a.geometries,n,s)}const Lse=tt.getLogger("esri.geometry.support.normalizeUtils");function d5e(t){return t.type==="polygon"}function p5e(t){return t[0].type==="polygon"}function f5e(t){return t[0].type==="polyline"}function Pse(t,e){if(!(t instanceof Ta||t instanceof ja)){const s="straightLineDensify: the input geometry is neither polyline nor polygon";throw Lse.error(s),new Ce(s)}const i=Bx(t),r=[];for(const s of i){const n=[];r.push(n),n.push([s[0][0],s[0][1]]);for(let o=0;o<s.length-1;o++){const a=s[o][0],l=s[o][1],u=s[o+1][0],c=s[o+1][1],d=Math.sqrt((u-a)*(u-a)+(c-l)*(c-l)),f=(c-l)/d,m=(u-a)/d,g=d/e;if(g>1){for(let S=1;S<=g-1;S++){const M=S*e,x=m*M+a,T=f*M+l;n.push([x,T])}const v=(d+Math.floor(g-1)*e)/2,b=m*v+a,_=f*v+l;n.push([b,_])}n.push([u,c])}}return d5e(t)?new ja({rings:r,spatialReference:t.spatialReference}):new Ta({paths:r,spatialReference:t.spatialReference})}function MG(t,e,i){if(e){const r=Pse(t,1e6);t=Bg(r,!0)}return i&&(t=kse(t,i)),t}function AG(t,e,i){if(Array.isArray(t)){const r=t[0];if(r>e){const s=Qg(r,e);t[0]=r+s*(-2*e)}else if(r<i){const s=Qg(r,i);t[0]=r+s*(-2*i)}}else{const r=t.x;if(r>e){const s=Qg(r,e);t=t.clone().offset(s*(-2*e),0)}else if(r<i){const s=Qg(r,i);t=t.clone().offset(s*(-2*i),0)}}return t}function m5e(t,e){let i=-1;for(let r=0;r<e.cutIndexes.length;r++){const s=e.cutIndexes[r],n=e.geometries[r],o=Bx(n);for(let a=0;a<o.length;a++){const l=o[a];l.some(u=>{if(u[0]<180)return!0;{let c=0;for(let f=0;f<l.length;f++){const m=l[f][0];c=m>c?m:c}c=Number(c.toFixed(9));const d=-360*Qg(c,180);for(let f=0;f<l.length;f++){const m=n.getPoint(a,f);n.setPoint(a,f,m.clone().offset(d,0))}return!0}})}if(s===i){if(p5e(t))for(const a of Bx(n))t[s]=t[s].addRing(a);else if(f5e(t))for(const a of Bx(n))t[s]=t[s].addPath(a)}else i=s,t[s]=n}return t}async function h1(t,e,i){if(!Array.isArray(t))return h1([t],e);e&&typeof e!="string"&&Lse.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof e=="string"?e:e?.url??Li.geometryServiceUrl;let s,n,o,a,l,u,c,d,f=0;const m=[],g=[];for(const x of t)if(Re(x))g.push(x);else if(s||(s=x.spatialReference,n=Il(s),o=s.isWebMercator,u=o?102100:4326,a=MT[u].maxX,l=MT[u].minX,c=MT[u].plus180Line,d=MT[u].minus180Line),n)if(x.type==="mesh")g.push(x);else if(x.type==="point")g.push(AG(x.clone(),a,l));else if(x.type==="multipoint"){const T=x.clone();T.points=T.points.map(I=>AG(I,a,l)),g.push(T)}else if(x.type==="extent"){const T=x.clone()._normalize(!1,!1,n);g.push(T.rings?new ja(T):T)}else if(x.extent){const T=x.extent,I=Qg(T.xmin,l)*(2*a);let $=I===0?x.clone():kse(x.clone(),I);T.offset(I,0),T.intersects(c)&&T.xmax!==a?(f=T.xmax>f?T.xmax:f,$=MG($,o),m.push($),g.push("cut")):T.intersects(d)&&T.xmin!==l?(f=T.xmax*(2*a)>f?T.xmax*(2*a):f,$=MG($,o,360),m.push($),g.push("cut")):g.push($)}else g.push(x.clone());else g.push(x);let v=Qg(f,a),b=-90;const _=v,S=new Ta;for(;v>0;){const x=360*v-180;S.addPath([[x,b],[x,-1*b]]),b*=-1,v--}if(m.length>0&&_>0){const x=m5e(m,await l5e(r,m,S,i)),T=[],I=[];for(let B=0;B<g.length;B++){const z=g[B];if(z!=="cut")I.push(z);else{const H=x.shift(),J=t[B];ee(J)&&J.type==="polygon"&&J.rings&&J.rings.length>1&&H.rings.length>=J.rings.length?(T.push(H),I.push("simplify")):I.push(o?um(H):H)}}if(!T.length)return I;const $=await h5e(r,T,i),L=[];for(let B=0;B<I.length;B++){const z=I[B];z!=="simplify"?L.push(z):L.push(o?um($.shift()):$.shift())}return L}const M=[];for(let x=0;x<g.length;x++){const T=g[x];if(T!=="cut")M.push(T);else{const I=m.shift();M.push(o===!0?um(I):I)}}return M}function lht(t,e){const i=Il(e);if(i){const[r,s]=i.valid,n=s-r;if(t<r)for(;t<r;)t+=n;if(t>s)for(;t>s;)t-=n}return t}let CG=class{constructor(e=null,i=null,r=null){this.minValue=e,this.maxValue=i,this.noDataValue=r}};const y5e=9999999e31,g5e=2e-7,v5e={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function i_(t){return v5e[t]??[-34028234663852886e22,34028234663852886e22]}function HD(t,e,i){if(t.depthCount&&t.depthCount>1)return;const{pixels:r,statistics:s,pixelType:n}=t,o=r[0].length,a=t.bandMasks??[],l=t.mask??new Uint8Array(o).fill(255),u=n==="f32"||n==="f64",c=i_(n);let d=!1;for(let f=0;f<r.length;f++){const m=typeof e=="number"?e:e[f];if(m==null)continue;const g=s?.[f].minValue??c[0],v=s?.[f].maxValue??c[1];if(g>m+Number.EPSILON||v<m-Number.EPSILON)continue;const b=a[f]||new Uint8Array(o).fill(255),_=r[f],S=i?.customFloatTolerance;if(u&&S!==0){let M=S;M||(M=Math.abs(m)>=y5e?g5e*Math.abs(m):n==="f32"?2**-23:Number.EPSILON);for(let x=0;x<_.length;x++)b[x]&&Math.abs(_[x]-m)<M&&(_[x]=0,b[x]=0,l[x]=0,d=!0)}else for(let M=0;M<_.length;M++)b[M]&&_[M]===m&&(_[M]=0,b[M]=0,l[M]=0,d=!0);a[f]=b}d&&(t.bandMasks=a,t.mask=l),d&&"updateStatistics"in t&&t.updateStatistics()}var ug;let ho=ug=class extends Je{static createEmptyBand(t,e){return new(ug.getPixelArrayConstructor(t))(e)}static getPixelArrayConstructor(t){let e;switch(t){case"u1":case"u2":case"u4":case"u8":e=Uint8Array;break;case"u16":e=Uint16Array;break;case"u32":e=Uint32Array;break;case"s8":e=Int8Array;break;case"s16":e=Int16Array;break;case"s32":e=Int32Array;break;case"f32":case"c64":case"c128":case"unknown":e=Float32Array;break;case"f64":e=Float64Array}return e}constructor(t){super(t),this.width=null,this.height=null,this.pixelType="f32",this.validPixelCount=null,this.mask=null,this.maskIsAlpha=!1,this.premultiplyAlpha=!1,this.statistics=null,this.depthCount=1}castPixelType(t){if(!t)return"f32";let e=t.toLowerCase();return["u1","u2","u4"].includes(e)?e="u8":["unknown","u8","s8","u16","s16","u32","s32","f32","f64"].includes(e)||(e="f32"),e}getPlaneCount(){return this.pixels?.length}addData(t){if(!t.pixels||t.pixels.length!==this.width*this.height)throw new Ce("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]),this.statistics||(this.statistics=[]),this.pixels.push(t.pixels),this.statistics.push(t.statistics??new CG)}getAsRGBA(){const t=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case"s8":case"s16":case"u16":case"s32":case"u32":case"f32":case"f64":this._fillFromNon8Bit(t);break;default:this._fillFrom8Bit(t)}return new Uint8ClampedArray(t)}getAsRGBAFloat(){const t=new Float32Array(this.width*this.height*4);return this._fillFrom32Bit(t),t}updateStatistics(){if(!this.pixels)return;this.statistics=this.pixels.map(i=>this._calculateBandStatistics(i,this.mask));const t=this.mask;let e=0;if(ee(t))for(let i=0;i<t.length;i++)t[i]&&e++;else e=this.width*this.height;this.validPixelCount=e}clamp(t){if(!t||t==="f64"||t==="f32"||!this.pixels)return;const[e,i]=i_(t),r=this.pixels,s=this.width*this.height,n=r.length;let o,a,l;const u=[];for(let c=0;c<n;c++){l=ug.createEmptyBand(t,s),o=r[c];for(let d=0;d<s;d++)a=o[d],l[d]=a>i?i:a<e?e:a;u.push(l)}this.pixels=u,this.pixelType=t}extractBands(t){const{pixels:e,statistics:i}=this;if(Re(t)||t.length===0||!e||e.length===0)return this;const r=e.length,s=t.some(o=>o>=e.length),n=r===t.length&&!t.some((o,a)=>o!==a);return s||n?this:new ug({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:t.map(o=>e[o]),statistics:i&&t.map(o=>i[o])})}clone(){const t=new ug({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});let e;ee(this.mask)&&(this.mask instanceof Uint8Array?t.mask=new Uint8Array(this.mask):t.mask=this.mask.slice(0));const i=ug.getPixelArrayConstructor(this.pixelType);if(this.pixels&&this.pixels.length>0){t.pixels=[];const r=!!this.pixels[0].slice;for(e=0;e<this.pixels.length;e++)t.pixels[e]=r?this.pixels[e].slice(0,this.pixels[e].length):new i(this.pixels[e])}if(this.statistics)for(t.statistics=[],e=0;e<this.statistics.length;e++)t.statistics[e]=Le(this.statistics[e]);return t.premultiplyAlpha=this.premultiplyAlpha,t}_fillFrom8Bit(t){const{mask:e,maskIsAlpha:i,premultiplyAlpha:r,pixels:s}=this;if(!t||!s||!s.length)return void tt.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.");let n,o,a,l;n=o=a=s[0],s.length>=3?(o=s[1],a=s[2]):s.length===2&&(o=s[1]);const u=new Uint32Array(t),c=this.width*this.height;if(n.length===c)if(ee(e)&&e.length===c)if(i)for(l=0;l<c;l++){const d=e[l];if(d){const f=d/255;u[l]=r?d<<24|a[l]*f<<16|o[l]*f<<8|n[l]*f:d<<24|a[l]<<16|o[l]<<8|n[l]}}else for(l=0;l<c;l++)e[l]&&(u[l]=255<<24|a[l]<<16|o[l]<<8|n[l]);else for(l=0;l<c;l++)u[l]=255<<24|a[l]<<16|o[l]<<8|n[l];else tt.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.")}_fillFromNon8Bit(t){const{pixels:e,mask:i,statistics:r}=this;if(!t||!e||!e.length)return void tt.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.");const s=this.pixelType;let n=1,o=0,a=1;if(r&&r.length>0){for(const v of r)if(v.minValue!=null&&(o=Math.min(o,v.minValue)),v.maxValue!=null&&v.minValue!=null){const b=v.maxValue-v.minValue;a=Math.max(a,b)}n=255/a}else{let v=255;s==="s8"?(o=-128,v=127):s==="u16"?v=65535:s==="s16"?(o=-32768,v=32767):s==="u32"?v=4294967295:s==="s32"?(o=-2147483648,v=2147483647):s==="f32"?(o=-34e38,v=34e38):s==="f64"&&(o=-Number.MAX_VALUE,v=Number.MAX_VALUE),n=255/(v-o)}const l=new Uint32Array(t),u=this.width*this.height;let c,d,f,m,g;if(c=d=f=e[0],c.length!==u)return tt.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(e.length>=2)if(d=e[1],e.length>=3&&(f=e[2]),ee(i)&&i.length===u)for(m=0;m<u;m++)i[m]&&(l[m]=255<<24|(f[m]-o)*n<<16|(d[m]-o)*n<<8|(c[m]-o)*n);else for(m=0;m<u;m++)l[m]=255<<24|(f[m]-o)*n<<16|(d[m]-o)*n<<8|(c[m]-o)*n;else if(ee(i)&&i.length===u)for(m=0;m<u;m++)g=(c[m]-o)*n,i[m]&&(l[m]=255<<24|g<<16|g<<8|g);else for(m=0;m<u;m++)g=(c[m]-o)*n,l[m]=255<<24|g<<16|g<<8|g}_fillFrom32Bit(t){const{pixels:e,mask:i}=this;if(!t||!e||!e.length)return tt.getLogger(this.declaredClass).error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");let r,s,n,o;r=s=n=e[0],e.length>=3?(s=e[1],n=e[2]):e.length===2&&(s=e[1]);const a=this.width*this.height;if(r.length!==a)return tt.getLogger(this.declaredClass).error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let l=0;if(ee(i)&&i.length===a)for(o=0;o<a;o++)t[l++]=r[o],t[l++]=s[o],t[l++]=n[o],t[l++]=1&i[o];else for(o=0;o<a;o++)t[l++]=r[o],t[l++]=s[o],t[l++]=n[o],t[l++]=1}_calculateBandStatistics(t,e){let i=1/0,r=-1/0;const s=t.length;let n,o=0;if(ee(e))for(n=0;n<s;n++)e[n]&&(o=t[n],i=o<i?o:i,r=o>r?o:r);else for(n=0;n<s;n++)o=t[n],i=o<i?o:i,r=o>r?o:r;return new CG(i,r)}};h([p({json:{write:!0}})],ho.prototype,"width",void 0),h([p({json:{write:!0}})],ho.prototype,"height",void 0),h([p({json:{write:!0}})],ho.prototype,"pixelType",void 0),h([mi("pixelType")],ho.prototype,"castPixelType",null),h([p({json:{write:!0}})],ho.prototype,"validPixelCount",void 0),h([p({json:{write:!0}})],ho.prototype,"mask",void 0),h([p({json:{write:!0}})],ho.prototype,"maskIsAlpha",void 0),h([p({json:{write:!0}})],ho.prototype,"pixels",void 0),h([p()],ho.prototype,"premultiplyAlpha",void 0),h([p({json:{write:!0}})],ho.prototype,"statistics",void 0),h([p({json:{write:!0}})],ho.prototype,"depthCount",void 0),h([p({json:{write:!0}})],ho.prototype,"noDataValues",void 0),h([p({json:{write:!0}})],ho.prototype,"bandMasks",void 0),ho=ug=h([ce("esri.layers.support.PixelBlock")],ho);const ui=ho;var $G,OG;(function(t){t[t.matchAny=0]="matchAny",t[t.matchAll=1]="matchAll"})($G||($G={})),function(t){t[t.bestMatch=0]="bestMatch",t[t.fail=1]="fail"}(OG||(OG={}));const cht=6;function Rr(t){return ee(t)&&t.declaredClass==="esri.layers.support.PixelBlock"&&t.pixels&&t.pixels.length>0}function RG(t,e){if(!e?.length||!Rr(t))return t;const i=t.pixels.length;return e&&e.some(r=>r>=i)||i===1&&e.length===1&&e[0]===0?t:i!==e.length||e.some((r,s)=>r!==s)?new ui({pixelType:t.pixelType,width:t.width,height:t.height,mask:t.mask,validPixelCount:t.validPixelCount,maskIsAlpha:t.maskIsAlpha,pixels:e.map(r=>t.pixels[r]),statistics:t.statistics&&e.map(r=>t.statistics[r])}):t}function hht(t){if(!t?.length||t.some(c=>!Rr(c)))return null;if(t.length===1)return ee(t[0])?t[0].clone():null;const e=t,{width:i,height:r,pixelType:s}=e[0];if(e.some(c=>c.width!==i||c.height!==r))return null;const n=e.map(({mask:c})=>c).filter(c=>c!=null);let o=null;n.length&&(o=new Uint8Array(i*r),o.set(n[0]),n.length>1&&Fse(n.slice(1),o));const a=[];e.forEach(({pixels:c})=>a.push(...c));const l=e.map(({statistics:c})=>c).filter(c=>c?.length),u=[];return l.forEach(c=>u.push(...c)),new ui({pixelType:s,width:i,height:r,mask:o,pixels:a,statistics:u.length?u:null})}function D_(t){if(!t)return;const e=t.colormap;if(!e||e.length===0)return;const i=e.sort((d,f)=>d[0]-f[0]);let r=0;i[0][0]<0&&(r=i[0][0]);const s=Math.max(256,i[i.length-1][0]-r+1),n=new Uint8Array(4*s),o=[];let a,l=0,u=0;const c=i[0].length===5;if(s>65536)return i.forEach(d=>{o[d[0]-r]=c?d.slice(1):d.slice(1).concat([255])}),{indexed2DColormap:o,offset:r,alphaSpecified:c};if(t.fillUnspecified)for(a=i[u],l=a[0]-r;l<s;l++)n[4*l]=a[1],n[4*l+1]=a[2],n[4*l+2]=a[3],n[4*l+3]=c?a[4]:255,l===a[0]-r&&(a=u===i.length-1?a:i[++u]);else for(l=0;l<i.length;l++)a=i[l],u=4*(a[0]-r),n[u]=a[1],n[u+1]=a[2],n[u+2]=a[3],n[u+3]=c?a[4]:255;return{indexedColormap:n,offset:r,alphaSpecified:c}}function WO(t,e){if(!Rr(t)||!e||!e.indexedColormap&&!e.indexed2DColormap)return t;const i=t.clone(),r=i.pixels;let s=i.mask;const n=i.width*i.height;if(r.length!==1)return t;const{indexedColormap:o,indexed2DColormap:a,offset:l,alphaSpecified:u}=e;let c=0;const d=r[0],f=new Uint8Array(d.length),m=new Uint8Array(d.length),g=new Uint8Array(d.length);let v,b=0;if(o){const _=o.length-1;if(ee(s))for(c=0;c<n;c++)s[c]&&(b=4*(d[c]-l),b<l||b>_?s[c]=0:(f[c]=o[b],m[c]=o[b+1],g[c]=o[b+2],s[c]=o[b+3]));else{for(s=new Uint8Array(n),c=0;c<n;c++)b=4*(d[c]-l),b<l||b>_?s[c]=0:(f[c]=o[b],m[c]=o[b+1],g[c]=o[b+2],s[c]=o[b+3]);i.mask=s}}else if(a)if(ee(s))for(c=0;c<n;c++)s[c]&&(v=a[d[c]],f[c]=v[0],m[c]=v[1],g[c]=v[2],s[c]=v[3]);else{for(s=new Uint8Array(n),c=0;c<n;c++)v=a[d[c]],f[c]=v[0],m[c]=v[1],g[c]=v[2],s[c]=v[3];i.mask=s}return i.pixels=[f,m,g],i.statistics=null,i.pixelType="u8",i.maskIsAlpha=u,i}function kG(t,e){if(!Rr(t))return null;const{pixels:i,mask:r}=t,s=i.length;let n=e.lut;const{offset:o}=e;n&&n[0].length===1&&(n=i.map(()=>n));const a=[],l=e.outputPixelType||"u8";for(let c=0;c<s;c++){const d=Nse(i[c],r,n[c],o||0,l);a.push(d)}const u=new ui({width:t.width,height:t.height,pixels:a,mask:r,pixelType:l});return u.updateStatistics(),u}function Nse(t,e,i,r,s){const n=t.length,o=ui.createEmptyBand(s,n);if(e)for(let a=0;a<n;a++)e[a]&&(o[a]=i[t[a]-r]);else for(let a=0;a<n;a++)o[a]=i[t[a]-r];return o}function b5e(t,e){if(!Rr(t))return null;const i=t.clone(),{pixels:r}=i,s=i.width*i.height,n=e.length,o=Math.floor(n/2),a=e[Math.floor(o)],l=r[0];let u,c,d,f,m,g,v=!1;const b=new Uint8Array(s),_=new Uint8Array(s),S=new Uint8Array(s);let M=i.mask;const x=e[0].mappedColor.length===4;for(M||(M=new Uint8Array(s),M.fill(x?255:1),i.mask=M),m=0;m<s;m++)if(M[m]){for(u=l[m],v=!1,g=o,c=a,d=0,f=n-1;f-d>1;){if(u===c.value){v=!0;break}u>c.value?d=g:f=g,g=Math.floor((d+f)/2),c=e[Math.floor(g)]}v||(u===e[d].value?(c=e[d],v=!0):u===e[f].value?(c=e[f],v=!0):u<e[d].value?(v=!1,c=null):u>e[d].value&&(u<e[f].value?(c=e[d],v=!0):f===n-1?(v=!1,c=null):(c=e[f],v=!0))),v?(b[m]=c.mappedColor[0],_[m]=c.mappedColor[1],S[m]=c.mappedColor[2],M[m]=c.mappedColor[3]):b[m]=_[m]=S[m]=M[m]=0}return i.pixels=[b,_,S],i.mask=M,i.pixelType="u8",i.maskIsAlpha=x,i}function dht(t,e){if(!Rr(t))return null;const{width:i,height:r}=t,{inputRanges:s,outputValues:n,outputPixelType:o,noDataRanges:a,allowUnmatched:l,isLastInputRangeInclusive:u}=e,c=t.pixels[0],d=ui.createEmptyBand(o,c.length),f=t.mask,m=new Uint8Array(i*r);f?m.set(f):m.fill(255);const g=t.pixelType.startsWith("f")?1e-6:0,v=s.map(M=>M-g);v[0]=s[0],v[v.length-1]=s[s.length-1]+(u?1e-6:0);const b=s.length/2,[_,S]=i_(o);for(let M=0;M<r;M++)for(let x=0;x<i;x++){const T=M*i+x;if(m[T]){const I=c[T];let $=!1;for(let L=b-1;L>=0;L--)if(I===v[2*L]||I>v[2*L]&&I<v[2*L+1]){d[T]=n[L],$=!0;break}$||(l?d[T]=I>S?S:I<_?_:I:m[T]=0)}}if(a?.length)for(let M=0;M<r;M++)for(let x=0;x<i;x++){const T=M*i+x;if(!f||f[T]){const I=c[T];for(let $=0;$<b;$+=2)if(I>=a[$]&&I<=a[$+1]){d[T]=0,m[T]=0;break}}}return new ui({width:i,height:r,pixelType:o,pixels:[d],mask:m})}function LG(t,e,i,r){const s=i!=null&&i.length>=2?new Set(i):null,n=i?.length===1?i[0]:null,o=!!e?.length;for(let a=0;a<t.length;a++)if(r[a]){const l=t[a];if(o){let u=!1;for(let c=0;c<e.length;c+=2)if(l>=e[c]&&l<=e[c+1]){u=!0;break}u||(r[a]=0)}r[a]&&(l===n||s?.has(l))&&(r[a]=0)}}function PG(t,e){const i=t[0].length;for(let r=0;r<i;r++)if(e[r]){let s=!1;for(let n=0;n<t.length;n++)if(t[n][r]){s=!0;break}s||(e[r]=0)}}function Fse(t,e){const i=t[0].length;for(let r=0;r<i;r++)if(e[r]){let s=!1;for(let n=0;n<t.length;n++)if(t[n][r]===0){s=!0;break}s&&(e[r]=0)}}function pht(t,e){if(!Rr(t))return null;const{width:i,height:r,pixels:s}=t,n=i*r,o=new Uint8Array(n);t.mask?o.set(t.mask):o.fill(255);const a=s.length,{includedRanges:l,noDataValues:u,outputPixelType:c,matchAll:d,lookups:f}=e;if(f){const m=[];for(let g=0;g<a;g++){const v=f[g],b=Nse(s[g],o,v.lut,v.offset||0,"u8");m.push(b)}m.length===1?o.set(m[0]):d?PG(m,o):Fse(m,o)}else if(d){const m=[];for(let g=0;g<a;g++){const v=new Uint8Array(n);v.set(o),LG(s[g],l?.slice(2*g,2*g+2),u?.[g],v),m.push(v)}m.length===1?o.set(m[0]):PG(m,o)}else for(let m=0;m<a;m++)LG(s[m],l?.slice(2*m,2*m+2),u?.[m],o);return new ui({width:i,height:r,pixelType:c,pixels:s,mask:o})}function fht(t){const{srcPixelType:e,inputRanges:i,outputValues:r,allowUnmatched:s,noDataRanges:n,isLastInputRangeInclusive:o,outputPixelType:a}=t;if(e!=="u8"&&e!=="s8"&&e!=="u16"&&e!=="s16")return null;const l=e.includes("16")?65536:256,u=e.includes("s")?-l/2:0,c=ui.createEmptyBand(a,l),d=new Uint8Array(l);s&&d.fill(255);const[f,m]=i_(a);if(i?.length&&r?.length){const v=i.map(b=>b-1e-6);v[0]=i[0],o&&(v[v.length-1]=i[i.length-1]);for(let b=0;b<v.length;b++){const _=r[b]>m?m:r[b]<f?f:r[b],S=Math.ceil(v[2*b]-u),M=Math.floor(v[2*b+1]-u);for(let x=S;x<=M;x++)c[x]=_,d[x]=255}}if(n?.length)for(let g=0;g<n.length;g++){const v=Math.ceil(n[2*g]-u),b=Math.floor(n[2*g+1]-u);for(let _=v;_<=b;_++)d[_]=0}return{lut:c,offset:u,mask:d}}function mht(t,e,i){if(t!=="u8"&&t!=="s8"&&t!=="u16"&&t!=="s16")return null;const r=t.includes("16")?65536:256,s=t.includes("s")?-r/2:0,n=new Uint8Array(r);if(e)for(let o=0;o<e.length;o++){const a=Math.ceil(e[2*o]-s),l=Math.floor(e[2*o+1]-s);for(let u=a;u<=l;u++)n[u]=255}else n.fill(255);if(i)for(let o=0;o<i.length;o++)n[i[o]-s]=0;return{lut:n,offset:s}}function w5e(t,e,i,r,s,n,o,a){return{xmin:s<=i*t?0:s<i*t+t?s-i*t:t,ymin:n<=r*e?0:n<r*e+e?n-r*e:e,xmax:s+o<=i*t?0:s+o<i*t+t?s+o-i*t:t,ymax:n+a<=r*e?0:n+a<r*e+e?n+a-r*e:e}}function yht(t,e){if(!t||t.length===0)return null;const i=t.find(g=>g.pixelBlock);if(!i||Re(i.pixelBlock))return null;const r=(i.extent.xmax-i.extent.xmin)/i.pixelBlock.width,s=(i.extent.ymax-i.extent.ymin)/i.pixelBlock.height,n=.01*Math.min(r,s),o=t.sort((g,v)=>Math.abs(g.extent.ymax-v.extent.ymax)>n?v.extent.ymax-g.extent.ymax:Math.abs(g.extent.xmin-v.extent.xmin)>n?g.extent.xmin-v.extent.xmin:0),a=Math.min.apply(null,o.map(g=>g.extent.xmin)),l=Math.min.apply(null,o.map(g=>g.extent.ymin)),u=Math.max.apply(null,o.map(g=>g.extent.xmax)),c=Math.max.apply(null,o.map(g=>g.extent.ymax)),d={x:Math.round((e.xmin-a)/r),y:Math.round((c-e.ymax)/s)},f={width:Math.round((u-a)/r),height:Math.round((c-l)/s)},m={width:Math.round((e.xmax-e.xmin)/r),height:Math.round((e.ymax-e.ymin)/s)};return Math.round(f.width/i.pixelBlock.width)*Math.round(f.height/i.pixelBlock.height)!==o.length||d.x<0||d.y<0||f.width<m.width||f.height<m.height?null:{extent:e,pixelBlock:_5e(o.map(g=>g.pixelBlock),f,{clipOffset:d,clipSize:m})}}function JO(t,e,i,r,s,n){const{width:o,height:a}=i.block,{x:l,y:u}=i.offset,{width:c,height:d}=i.mosaic,f=w5e(o,a,r,s,l,u,c,d);let m=0,g=0;if(n){const v=n.hasGCSSShiftTransform?360:n.halfWorldWidth??0,b=o*n.resolutionX,_=n.startX+r*b;_<v&&_+b>v?g=n.rightPadding:_>=v&&(m=n.leftMargin-n.rightPadding,g=0)}if(f.xmax-=g,typeof e!="number")for(let v=f.ymin;v<f.ymax;v++){const b=(s*a+v-u)*c+(r*o-l)+m,_=v*o;for(let S=f.xmin;S<f.xmax;S++)t[b+S]=e[_+S]}else for(let v=f.ymin;v<f.ymax;v++){const b=(s*a+v-u)*c+(r*o-l)+m;for(let _=f.xmin;_<f.xmax;_++)t[b+_]=e}}function _5e(t,e,i={}){const{clipOffset:r,clipSize:s,alignmentInfo:n,blockWidths:o}=i;if(o)return x5e(t,e,{blockWidths:o});const a=t.find($=>Rr($));if(Re(a))return null;const l=s?s.width:e.width,u=s?s.height:e.height,c=a.width,d=a.height,f=e.width/c,m=e.height/d,g={offset:r||{x:0,y:0},mosaic:s||e,block:{width:c,height:d}},v=a.pixelType,b=ui.getPixelArrayConstructor(v),_=a.pixels.length,S=[];let M,x;for(let $=0;$<_;$++){x=new b(l*u);for(let L=0;L<m;L++)for(let B=0;B<f;B++){const z=t[L*f+B];Rr(z)&&(M=z.pixels[$],JO(x,M,g,B,L,n))}S.push(x)}let T;if(t.some($=>Re($)||ee($.mask)&&$.mask.length>0)){T=new Uint8Array(l*u);for(let $=0;$<m;$++)for(let L=0;L<f;L++){const B=t[$*f+L],z=ee(B)?B.mask:null;ee(z)?JO(T,z,g,L,$,n):JO(T,B?1:0,g,L,$,n)}}const I=new ui({width:l,height:u,pixels:S,pixelType:v,mask:T});return I.updateStatistics(),I}function x5e(t,e,i){const r=t.find(m=>ee(m));if(Re(r))return null;const s=t.some(m=>!ee(m)||!!m.mask),{width:n,height:o}=e,a=s?new Uint8Array(n*o):null,{blockWidths:l}=i,u=[],c=r.getPlaneCount(),d=ui.getPixelArrayConstructor(r.pixelType);if(s)for(let m=0,g=0;m<t.length;g+=l[m],m++){const v=t[m];if(!Rr(v))continue;const b=v.mask;for(let _=0;_<o;_++)for(let S=0;S<l[m];S++)a[_*n+S+g]=b==null?255:b[_*v.width+S]}for(let m=0;m<c;m++){const g=new d(n*o);for(let v=0,b=0;v<t.length;b+=l[v],v++){const _=t[v];if(!Rr(_))continue;const S=_.pixels[m];if(S!=null)for(let M=0;M<o;M++)for(let x=0;x<l[v];x++)g[M*n+x+b]=S[M*_.width+x]}u.push(g)}const f=new ui({width:n,height:o,mask:a,pixels:u,pixelType:r.pixelType});return f.updateStatistics(),f}function ght(t,e,i){if(!Rr(t))return null;const{width:r,height:s}=t,n=e.x,o=e.y,a=i.width+n,l=i.height+o;if(n<0||o<0||a>r||l>s||n===0&&o===0&&a===r&&l===s)return t;t.mask||(t.mask=new Uint8Array(r*s));const u=t.mask;for(let c=0;c<s;c++){const d=c*r;for(let f=0;f<r;f++)u[d+f]=c<o||c>=l||f<n||f>=a?0:1}return t.updateStatistics(),t}function S5e(t){if(!Rr(t))return null;const e=t.clone(),{width:i,height:r,pixels:s}=t,n=s[0],o=e.pixels[0],a=t.mask;for(let l=2;l<r-1;l++){const u=new Map;for(let d=l-2;d<l+2;d++)for(let f=0;f<4;f++){const m=d*i+f;j_(u,n[m],a?a[m]:1)}o[l*i]=NG(u),o[l*i+1]=o[l*i+2]=o[l*i];let c=3;for(;c<i-1;c++){let d=(l-2)*i+c+1;j_(u,n[d],a?a[d]:1),d=(l-1)*i+c+1,j_(u,n[d],a?a[d]:1),d=l*i+c+1,j_(u,n[d],a?a[d]:1),d=(l+1)*i+c+1,j_(u,n[d],a?a[d]:1),d=(l-2)*i+c-3,AT(u,n[d],a?a[d]:1),d=(l-1)*i+c-3,AT(u,n[d],a?a[d]:1),d=l*i+c-3,AT(u,n[d],a?a[d]:1),d=(l+1)*i+c-3,AT(u,n[d],a?a[d]:1),o[l*i+c]=NG(u)}o[l*i+c+1]=o[l*i+c]}for(let l=0;l<i;l++)o[l]=o[i+l]=o[2*i+l],o[(r-1)*i+l]=o[(r-2)*i+l];return e.updateStatistics(),e}function NG(t){if(t.size===0)return 0;let e=0,i=-1,r=0;const s=t.keys();let n=s.next();for(;!n.done;)r=t.get(n.value),r>e&&(i=n.value,e=r),n=s.next();return i}function AT(t,e,i){if(i===0)return;const r=t.get(e);r===1?t.delete(e):t.set(e,r-1)}function j_(t,e,i){i!==0&&t.set(e,t.has(e)?t.get(e)+1:1)}function E5e(t,e,i){let{x:r,y:s}=e;const{width:n,height:o}=i;if(r===0&&s===0&&o===t.height&&n===t.width)return t;const{width:a,height:l}=t,u=Math.max(0,s),c=Math.max(0,r),d=Math.min(r+n,a),f=Math.min(s+o,l);if(d<0||f<0||!Rr(t))return null;r=Math.max(0,-r),s=Math.max(0,-s);const{pixels:m}=t,g=n*o,v=m.length,b=[];for(let x=0;x<v;x++){const T=m[x],I=ui.createEmptyBand(t.pixelType,g);for(let $=u;$<f;$++){const L=$*a;let B=($+s-u)*n+r;for(let z=c;z<d;z++)I[B++]=T[L+z]}b.push(I)}const _=new Uint8Array(g),S=t.mask;for(let x=u;x<f;x++){const T=x*a;let I=(x+s-u)*n+r;for(let $=c;$<d;$++)_[I++]=S?S[T+$]:1}const M=new ui({width:i.width,height:i.height,pixelType:t.pixelType,pixels:b,mask:_});return M.updateStatistics(),M}function T5e(t,e=!0){if(!Rr(t))return null;const{pixels:i,width:r,height:s,mask:n,pixelType:o}=t,a=[],l=Math.round(r/2),u=Math.round(s/2),c=s-1,d=r-1;for(let m=0;m<i.length;m++){const g=i[m],v=ui.createEmptyBand(o,l*u);let b=0;for(let _=0;_<s;_+=2)for(let S=0;S<r;S+=2){const M=g[_*r+S];if(e){const x=S===d?M:g[_*r+S+1],T=_===c?M:g[_*r+S+r],I=S===d?T:_===c?x:g[_*r+S+r+1];v[b++]=(M+x+T+I)/4}else v[b++]=M}a.push(v)}let f=null;if(ee(n)){f=new Uint8Array(l*u);let m=0;for(let g=0;g<s;g+=2)for(let v=0;v<r;v+=2){const b=n[g*r+v];if(e){const _=v===d?b:n[g*r+v+1],S=g===c?b:n[g*r+v+r],M=v===d?S:g===c?_:n[g*r+v+r+1];f[m++]=b*_*S*M?1:0}else f[m++]=b}}return new ui({width:l,height:u,pixelType:o,pixels:a,mask:f})}function vht(t,e,i){if(!Rr(t))return null;const{width:r,height:s}=e;let{width:n,height:o}=t;const a=new Map,l={x:0,y:0},u=i==null?1:1+i;let c=t;for(let d=0;d<u;d++){const f=Math.ceil(n/r),m=Math.ceil(o/s);for(let g=0;g<m;g++){l.y=g*s;for(let v=0;v<f;v++){l.x=v*r;const b=E5e(c,l,e);a.set(`${d}/${g}/${v}`,b)}}d<u-1&&(c=T5e(c)),n=Math.round(n/2),o=Math.round(o/2)}return a}function Dse(t,e,i,r,s=0){const{width:n,height:o}=t,{width:a,height:l}=e,u=r.cols,c=r.rows,d=Math.ceil(a/u-.1/u),f=Math.ceil(l/c-.1/c);let m,g,v,b,_,S,M;const x=d*u,T=x*f*c,I=new Float32Array(T),$=new Float32Array(T),L=new Uint32Array(T),B=new Uint32Array(T);let z,H,J=0;for(let K=0;K<f;K++)for(let Q=0;Q<d;Q++){m=12*(K*d+Q),g=i[m],v=i[m+1],b=i[m+2],_=i[m+3],S=i[m+4],M=i[m+5];for(let y=0;y<c;y++){J=(K*c+y)*x+Q*u,H=(y+.5)/c;for(let A=0;A<y;A++)z=(A+.5)/u,I[J+A]=(g*z+v*H+b)*n+s,$[J+A]=(_*z+S*H+M)*o+s,L[J+A]=Math.floor(I[J+A]),B[J+A]=Math.floor($[J+A])}m+=6,g=i[m],v=i[m+1],b=i[m+2],_=i[m+3],S=i[m+4],M=i[m+5];for(let y=0;y<c;y++){J=(K*c+y)*x+Q*u,H=(y+.5)/c;for(let A=y;A<u;A++)z=(A+.5)/u,I[J+A]=(g*z+v*H+b)*n+s,$[J+A]=(_*z+S*H+M)*o+s,L[J+A]=Math.floor(I[J+A]),B[J+A]=Math.floor($[J+A])}}return{offsets_x:I,offsets_y:$,offsets_xi:L,offsets_yi:B,gridWidth:x}}function bht(t,e){const{coefficients:i,spacing:r}=e,{offsets_x:s,offsets_y:n,gridWidth:o}=Dse(t,t,i,{rows:r[0],cols:r[1]}),{width:a,height:l}=t,u=new Float32Array(a*l),c=180/Math.PI;for(let d=0;d<l;d++)for(let f=0;f<a;f++){const m=d*o+f,g=d===0?m:m-o,v=d===l-1?m:m+o,b=s[g]-s[v],_=n[v]-n[g];if(isNaN(b)||isNaN(_))u[d*a+f]=90;else{let S=Math.atan2(_,b)*c;S=(360+S)%360,u[d*a+f]=S}}return u}function wht(t,e,i,r,s="nearest"){if(!Rr(t))return null;s==="majority"&&(t=S5e(t));const{pixels:n,mask:o,pixelType:a}=t,l=t.width,u=t.height,c=ui.getPixelArrayConstructor(a),d=n.length,{width:f,height:m}=e;let g=!1;for(let B=0;B<i.length;B+=3)i[B]===-1&&i[B+1]===-1&&i[B+2]===-1&&(g=!0);const{offsets_x:v,offsets_y:b,offsets_xi:_,offsets_yi:S,gridWidth:M}=Dse({width:l,height:u},e,i,r,s==="majority"?.5:0);let x;const T=(B,z,H)=>{const J=B instanceof Float32Array||B instanceof Float64Array?0:.5;for(let K=0;K<m;K++){x=K*M;for(let Q=0;Q<f;Q++){if(v[x]<0||b[x]<0)B[K*f+Q]=0;else if(H)B[K*f+Q]=z[_[x]+S[x]*l];else{const y=Math.floor(v[x]),A=Math.floor(b[x]),N=Math.ceil(v[x]),D=Math.ceil(b[x]),ne=v[x]-y,q=b[x]-A;if(!o||o[y+A*l]&&o[y+A*l]&&o[y+D*l]&&o[N+D*l]){const he=(1-ne)*z[y+A*l]+ne*z[N+A*l],te=(1-ne)*z[y+D*l]+ne*z[N+D*l];B[K*f+Q]=(1-q)*he+q*te+J}else B[K*f+Q]=z[_[x]+S[x]*l]}x++}}},I=[];let $;for(let B=0;B<d;B++)$=new c(f*m),T($,n[B],s==="nearest"||s==="majority"),I.push($);const L=new ui({width:f,height:m,pixelType:a,pixels:I});if(ee(o))L.mask=new Uint8Array(f*m),T(L.mask,o,!0);else if(g){L.mask=new Uint8Array(f*m);for(let B=0;B<f*m;B++)L.mask[B]=v[B]<0||b[B]<0?0:1}return L.updateStatistics(),L}const $g=new Map;$g.set("meter-per-second",1),$g.set("kilometer-per-hour",.277778),$g.set("knots",.514444),$g.set("feet-per-second",.3048),$g.set("mile-per-hour",.44704);const h6=180/Math.PI,WD=5,yl=new si({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"});function EC(t,e){return $g.get(t)/$g.get(e)||1}function jse(t){return(450-t)%360}function JD(t,e="geographic"){const[i,r]=t,s=Math.sqrt(i*i+r*r);let n=Math.atan2(r,i)*h6;return n=(360+n)%360,e==="geographic"&&(n=jse(n)),[s,n]}function Use(t,e="geographic"){let i=t[1];e==="geographic"&&(i=jse(i)),i%=360;const r=t[0];return[r*Math.cos(i/h6),r*Math.sin(i/h6)]}function _ht(t,e,i,r="geographic"){if(!Rr(t)||Re(i))return t;const s=e==="vector-magdir"?t.clone():d6(t,e),n=s.pixels[1];for(let o=0;o<n.length;o++)n[o]=r==="geographic"?(n[o]+i[o]+270)%360:(n[o]+360-i[o])%360;return e==="vector-magdir"?s:d6(s,"vector-magdir")}function d6(t,e,i="geographic",r=1){if(!Rr(t))return t;const{pixels:s,width:n,height:o}=t,a=n*o,l=s[0],u=s[1],c=t.pixelType.startsWith("f")?t.pixelType:"f32",d=ui.createEmptyBand(c,a),f=ui.createEmptyBand(c,a);let m=0;for(let v=0;v<o;v++)for(let b=0;b<n;b++)e==="vector-uv"?([d[m],f[m]]=JD([l[m],u[m]],i),d[m]*=r):([d[m],f[m]]=Use([l[m],u[m]],i),d[m]*=r,f[m]*=r),m++;const g=new ui({pixelType:c,width:t.width,height:t.height,mask:t.mask,validPixelCount:t.validPixelCount,maskIsAlpha:t.maskIsAlpha,pixels:[d,f]});return g.updateStatistics(),g}function I5e(t,e,i=1){if(i===1||!Rr(t))return t;const r=t.clone(),{pixels:s,width:n,height:o}=r,a=s[0],l=s[1];let u=0;for(let c=0;c<o;c++)for(let d=0;d<n;d++)e==="vector-uv"?(a[u]*=i,l[u]*=i):a[u]*=i,u++;return r.updateStatistics(),r}function xht(t,e,i,r,s){if(Re(s)||!s.spatialReference.equals(t.spatialReference))return{extent:t,width:Math.round(e/r),height:Math.round(i/r),resolution:t.width/e};const n=s.xmin,o=s.ymax,a=(t.xmax-t.xmin)/e*r,l=(t.ymax-t.ymin)/i*r,u=(a+l)/2;return t.xmin=n+Math.floor((t.xmin-n)/a)*a,t.xmax=n+Math.ceil((t.xmax-n)/a)*a,t.ymin=o+Math.floor((t.ymin-o)/l)*l,t.ymax=o+Math.ceil((t.ymax-o)/l)*l,{extent:t,width:Math.round(t.width/a),height:Math.round(t.height/l),resolution:u}}const M5e=Vse(0,0,0);function Vse(t=0,e=0,i=Math.PI,r=!0){r&&(i=(2*Math.PI-i)%(2*Math.PI));const s=r?-1:1,n=13*s,o=-7*s,a=-2*s,l=-16*s,u=21.75,[c,d]=qn(0,e+n,i,u),[f,m]=qn(t-5.5,e+o,i,u),[g,v]=qn(t+5.5,e+o,i,u),[b,_]=qn(t-1.5,e+a,i,u),[S,M]=qn(t+1.5,e+a,i,u),[x,T]=qn(t-1.5,e+l,i,u),[I,$]=qn(t+1.5,e+l,i,u);return[c,d,f,m,b,_,S,M,g,v,x,T,I,$]}function A5e(t=0,e=Math.PI,i=!0){i&&(e=(2*Math.PI-e)%(2*Math.PI));const r=10,s=i?-1:1,n=5*s,o=20*s,a=25*s,l=45,u=0,c=0,d=2,f=0,m=d*s,g=i?1:-1,v=r/2*g;let[b,_]=[u+v,c-o],[S,M]=[b+d*g,_],[x,T]=[S-f*g,M+m],[I,$]=[u-v,c-a],[L,B]=[I+f*g,$-m],z=Math.ceil(t/WD),H=Math.floor(z/10);z-=8*H;const J=[],K=[];for(let me=0;me<z/2;me++,H--){H<=0&&z%2==1&&me===(z-1)/2&&(I=u,L=I+f*g,$=($+_)/2,B=$-m);const[ve,_e]=qn(I,$,e,l);if(H>0){const[Se,Oe]=qn(S,$,e,l),[Te,we]=qn(b,_,e,l);J.push(Se),J.push(Oe),J.push(ve),J.push(_e),J.push(Te),J.push(we)}else{const[Se,Oe]=qn(S,M,e,l),[Te,we]=qn(x,T,e,l),[Ie,Ae]=qn(L,B,e,l);K.push(ve),K.push(_e),K.push(Ie),K.push(Ae),K.push(Te),K.push(we),K.push(Se),K.push(Oe)}$+=n,_+=n,M+=n,T+=n,B+=n}const[Q,y]=qn(u+v,c+o,e,l),A=(r/2+d)*g,[N,D]=qn(u+A,c+o,e,l),[ne,q]=qn(u+v,c-a,e,l),[he,te]=qn(u+A,c-a,e,l);return{pennants:J,barbs:K,shaft:[Q,y,N,D,ne,q,he,te]}}function qn(t,e,i,r=1){const s=Math.sqrt(t*t+e*e)/r,n=(2*Math.PI+Math.atan2(e,t))%(2*Math.PI);return[s,(2*Math.PI+n-i)%(2*Math.PI)]}const CT=[0,1,3,6,10,16,21,27,33,40,47,55,63],C5e=[0,.5,1,1.5,2],$5e=[0,.25,.5,1,1.5,2,2.5,3,3.5,4];function wy(t,e,i,r){const s=EC(r||"knots",i);let n;for(n=1;n<e.length;n++)if(n===e.length-1){if(t<e[n]*s)break}else if(t<=e[n]*s)break;return Math.min(n-1,e.length-2)}function O5e(t,e,i,r,s){let n=0;switch(e){case"beaufort_kn":n=wy(t,CT,"knots",i);break;case"beaufort_km":n=wy(t,CT,"kilometer-per-hour",i);break;case"beaufort_ft":n=wy(t,CT,"feet-per-second",i);break;case"beaufort_m":n=wy(t,CT,"meter-per-second",i);break;case"classified_arrow":n=wy(t,s??[],r,i);break;case"ocean_current_m":n=wy(t,C5e,"meter-per-second",i);break;case"ocean_current_kn":n=wy(t,$5e,"knots",i)}return n}function R5e(t,e){const{style:i,inputUnit:r,outputUnit:s,breakValues:n}=e,o=yl.fromJSON(r),a=yl.fromJSON(s),l=7*6,u=15;let c=0,d=0;const{width:f,height:m,mask:g}=t,v=t.pixels[0],b=t.pixels[1],_=ee(g)?g.filter(T=>T>0).length:f*m,S=new Float32Array(_*l),M=new Uint32Array(u*_),x=e.invertDirection?Vse(0,0,0,!1):M5e;for(let T=0;T<m;T++)for(let I=0;I<f;I++){const $=T*f+I;if(!g||g[T*f+I]){const L=(b[$]+360)%360/180*Math.PI,B=O5e(v[$],i,o,a,n);for(let H=0;H<x.length;H+=2)S[c++]=(I+.5)/f,S[c++]=(T+.5)/m,S[c++]=x[H],S[c++]=x[H+1]+L,S[c++]=B,S[c++]=v[$];const z=7*(c/l-1);M[d++]=z,M[d++]=z+1,M[d++]=z+2,M[d++]=z+0,M[d++]=z+4,M[d++]=z+3,M[d++]=z+0,M[d++]=z+2,M[d++]=z+3,M[d++]=z+2,M[d++]=z+5,M[d++]=z+3,M[d++]=z+5,M[d++]=z+6,M[d++]=z+3}}return{vertexData:S,indexData:M}}const ZO=[];function k5e(t,e){if(ZO.length===0)for(let m=0;m<30;m++)ZO.push(A5e(5*m,0,!e.invertDirection));const i=EC(yl.fromJSON(e.inputUnit),"knots"),{width:r,height:s,mask:n}=t,o=t.pixels[0],a=t.pixels[1],l=6,u=[],c=[];let d=0,f=0;for(let m=0;m<s;m++)for(let g=0;g<r;g++){const v=m*r+g,b=o[v]*i;if((!n||n[m*r+g])&&b>=WD){const _=(a[v]+360)%360/180*Math.PI,{pennants:S,barbs:M,shaft:x}=ZO[Math.min(Math.floor(b/5),29)];if(S.length+M.length===0)continue;let T=u.length/l;const I=(g+.5)/r,$=(m+.5)/s;for(let L=0;L<S.length;L+=2)u[d++]=I,u[d++]=$,u[d++]=S[L],u[d++]=S[L+1]+_,u[d++]=0,u[d++]=b;for(let L=0;L<M.length;L+=2)u[d++]=I,u[d++]=$,u[d++]=M[L],u[d++]=M[L+1]+_,u[d++]=0,u[d++]=b;for(let L=0;L<x.length;L+=2)u[d++]=I,u[d++]=$,u[d++]=x[L],u[d++]=x[L+1]+_,u[d++]=0,u[d++]=b;for(let L=0;L<S.length/6;L++)c[f++]=T,c[f++]=T+1,c[f++]=T+2,T+=3;for(let L=0;L<M.length/8;L++)c[f++]=T,c[f++]=T+1,c[f++]=T+2,c[f++]=T+1,c[f++]=T+2,c[f++]=T+3,T+=4;c[f++]=T+0,c[f++]=T+1,c[f++]=T+2,c[f++]=T+1,c[f++]=T+3,c[f++]=T+2,T+=4}}return{vertexData:new Float32Array(u),indexData:new Uint32Array(c)}}function L5e(t,e){let r=0,s=0;const{width:n,height:o,mask:a}=t,l=t.pixels[0],u=[],c=[],d=EC(yl.fromJSON(e.inputUnit),"knots"),f=e.style==="wind_speed"?WD:Number.MAX_VALUE;for(let m=0;m<o;m++)for(let g=0;g<n;g++){const v=l[m*n+g]*d;if((!a||a[m*n+g])&&v<f){for(let _=0;_<4;_++)u[r++]=(g+.5)/n,u[r++]=(m+.5)/o,u[r++]=_<2?-.5:.5,u[r++]=_%2==0?-.5:.5,u[r++]=0,u[r++]=v;const b=4*(r/24-1);c[s++]=b,c[s++]=b+1,c[s++]=b+2,c[s++]=b+1,c[s++]=b+2,c[s++]=b+3}}return{vertexData:new Float32Array(u),indexData:new Uint32Array(c)}}function Sht(t,e){return e.style==="simple_scalar"?L5e(t,e):e.style==="wind_speed"?k5e(t,e):R5e(t,e)}function Eht(t,e,i,r=[0,0],s=.5){const{width:n,height:o,mask:a}=t,[l,u]=t.pixels,[c,d]=r,f=Math.round((n-c)/i),m=Math.round((o-d)/i),g=f*m,v=new Float32Array(g),b=new Float32Array(g),_=new Uint8Array(g),S=e==="vector-uv";for(let x=0;x<m;x++)for(let T=0;T<f;T++){let I=0;const $=x*f+T,L=Math.max(0,x*i+d),B=Math.max(0,T*i+c),z=Math.min(o,L+i),H=Math.min(n,B+i);for(let J=L;J<z;J++)for(let K=B;K<H;K++){const Q=J*n+K;if(!a||a[Q]){I++;const y=S?[l[Q],u[Q]]:[l[Q],(360+u[Q])%360],[A,N]=S?y:Use(y);v[$]+=A,b[$]+=N}}if(I>=(z-L)*(H-B)*(1-s)){_[$]=1;const[J,K]=JD([v[$]/I,b[$]/I]);v[$]=J,b[$]=K}else _[$]=0,v[$]=0,b[$]=0}const M=new ui({width:f,height:m,pixels:[v,b],mask:_});return M.updateStatistics(),M}let P5e=class{constructor(e,i){this._storage=new Mte,this._storage.maxSize=e,i&&this._storage.registerRemoveFunc("",i)}put(e,i){this._storage.put(e,i,1,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}};new P5e(1e3);new It([128,128,128]);const N5e=new It("white");function N1(t,e){if(!t)return null;let i=null;return F0(t)?i=F5e(t):rC(t)&&(i=t.color?new It(t.color):null),i?jS(i,e):null}function F5e(t){const e=t.symbolLayers;if(!e)return null;let i=null;return e.forEach(r=>{r.type==="object"&&r.resource?.href!=null||(i=r.type==="water"?r.color:ee(r.material)?r.material.color:null)}),i?new It(i):null}function jS(t,e){if(e==null||t==null)return t;const i=t.toRgba();return i[3]=i[3]*e,new It(i)}function D5e(t,e,i){const r=t.symbolLayers;if(!r)return;const s=n=>{const o=ee(n)?n:null;return jS(e=e??o??(i!=null?N5e:null),i)};r.forEach(n=>{if(n.type!=="object"||n.resource?.href==null||e)if(n.type==="water")n.color=s(n.color);else{const o=ee(n.material)?n.material.color:null,a=s(o);Re(n.material)?n.material=new Al({color:a}):n.material.color=a,i!=null&&"outline"in n&&ee(n.outline)&&ee(n.outline.color)&&(n.outline.color=jS(n.outline.color,i))}})}function j5e(t,e,i){(e=e??t.color)&&(t.color=jS(e,i)),i!=null&&"outline"in t&&t.outline&&t.outline.color&&(t.outline.color=jS(t.outline.color,i))}function YO(t,e,i){t&&(e||i!=null)&&(e&&(e=new It(e)),F0(t)?D5e(t,e,i):rC(t)&&j5e(t,e,i))}async function U5e(t,e){const i=t.symbolLayers;i&&await Cge(i,async r=>V5e(r,e))}async function V5e(t,e){switch(t.type){case"extrude":z5e(t,e);break;case"icon":case"line":case"text":B5e(t,e);break;case"path":q5e(t,e);break;case"object":await G5e(t,e)}}function B5e(t,e){const i=Bse(e);ee(i)&&(t.size=i)}function Bse(t){for(const e of t)if(typeof e=="number")return e;return null}function z5e(t,e){t.size=typeof e[2]=="number"?e[2]:0}async function G5e(t,e){const{resourceSize:i,symbolSize:r}=await H5e(t),s=zse(e,i,r);t.width=zx(e[0],r[0],i[0],s),t.depth=zx(e[1],r[1],i[1],s),t.height=zx(e[2],r[2],i[2],s)}function q5e(t,e){const i=zse(e,MX,[t.width,void 0,t.height]);t.width=zx(e[0],t.width,1,i),t.height=zx(e[2],t.height,1,i)}function zse(t,e,i){for(let r=0;r<3;r++){const s=t[r];switch(s){case"symbol-value":{const n=i[r];return n!=null?n/e[r]:1}case"proportional":break;default:if(s&&e[r])return s/e[r]}}return 1}async function H5e(t){const e=await De(()=>import("./symbolLayerUtils-e6685ca9.js"),["./symbolLayerUtils-e6685ca9.js","./preload-helper-388ac9d5.js"],import.meta.url),i=await e.computeObjectLayerResourceSize(t,10),{width:r,height:s,depth:n}=t,o=[r,n,s];let a=1;for(let l=0;l<3;l++){const u=o[l];if(u!=null){a=u/i[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=i[l]*a);return{resourceSize:i,symbolSize:o}}function zx(t,e,i,r){switch(t){case"proportional":return i*r;case"symbol-value":return e??i;default:return t}}function W5e(t,e){const i=Bse(e);if(!Re(i))switch(t.type){case"simple-marker":t.size=i;break;case"picture-marker":{const r=t.width/t.height;r>1?(t.width=i,t.height=i*r):(t.width=i*r,t.height=i);break}case"simple-line":t.width=i;break;case"text":t.font.size=i}}async function Gse(t,e){if(t&&e)return F0(t)?U5e(t,e):void(rC(t)&&W5e(t,e))}function qse(t,e,i){if(t&&e!=null)if(F0(t)){const r=t.symbolLayers;r&&r.forEach(s=>{if(s&&s.type==="object")switch(i){case"tilt":s.tilt=e;break;case"roll":s.roll=e;break;default:s.heading=e}})}else rC(t)&&(t.type!=="simple-marker"&&t.type!=="picture-marker"&&t.type!=="text"||(t.angle=e))}async function J5e(t,e){return await t.fetchSymbol(e)||t.fetchCIMSymbol(e)}var p6;const FG=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]),$T=new si({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"}),OT=new si({flow_from:"flow-from",flow_to:"flow-to"});let po=p6=class extends Jm(Je){constructor(t){super(t),this.attributeField="Magnitude",this.flowRepresentation="flow-from",this.rotationType="arithmetic",this.style="single-arrow",this.symbolTileSize=50,this.type="vector-field"}readInputUnit(t,e){return FG.has(t)?yl.fromJSON(t):null}readOutputUnit(t,e){return FG.has(t)?yl.fromJSON(t):null}get styleRenderer(){const t=this.style,e=this.attributeField,i=this._createStyleRenderer(t);return i.field=e,i}get sizeVariables(){const t=[];if(this.visualVariables)for(const e of this.visualVariables)e.type==="size"&&t.push(e);if(t.length===0){const e=new s1({field:"Magnitude",minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize});this.visualVariables?this.visualVariables.push(e):this._set("visualVariables",[e]),t.push(e)}return t}get rotationVariables(){const t=[];if(this.visualVariables)for(const e of this.visualVariables)e.type==="rotation"&&t.push(e);if(t.length===0){const e=new oC({field:"Direction",rotationType:this.rotationType});this.visualVariables?this.visualVariables.push(e):this._set("visualVariables",[e]),t.push(e)}return t}clone(){return new p6({attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,symbolTileSize:this.symbolTileSize,style:this.style,visualVariables:Le(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})}async getGraphicsFromPixelData(t,e=!1,i=[]){const r=new Array,s=EC(this.inputUnit,this.outputUnit),n=this.rotationVariables[0]?.rotationType||this.rotationType,o=e?d6(t.pixelBlock,"vector-uv",n,s):I5e(t.pixelBlock,"vector-magdir",s);if(Re(o))return r;const a=t.extent,l=ee(o.mask)&&o.mask.length>0;let u=0;const c=(a.xmax-a.xmin)/o.width,d=(a.ymax-a.ymin)/o.height;for(let f=0;f<o.height;f++)for(let m=0;m<o.width;m++,u++){let g=new Ct({x:a.xmin+m*c+c/2,y:a.ymax-f*d-d/2,spatialReference:a.spatialReference});g=(await h1(g))[0];const v=i.some(b=>b.intersects(g));if((!l||o.mask[u])&&!v){const b={Magnitude:o.pixels[0][u],Direction:o.pixels[1][u]},_=new kn({geometry:{type:"point",x:g.x,y:g.y,spatialReference:a.spatialReference},attributes:b});_.symbol=this._getVisualVariablesAppliedSymbol(_),r.push(_)}}return r}getSymbol(t,e){}async getSymbolAsync(t,e){}getSymbols(){return[]}getClassBreakInfos(){return this.styleRenderer?.classBreakInfos}getDefaultSymbol(){return this.styleRenderer?.defaultSymbol}_getDefaultSymbol(t){return new Eu({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new za({width:0}),size:20,color:t||new It([0,92,230])})}_getVisualVariablesAppliedSymbol(t){if(!t)return;const e=this.styleRenderer?.getSymbol(t)?.clone(),i=this.sizeVariables,r=this.rotationVariables;if(i&&i.length&&this.sizeVariables.forEach(s=>Gse(e,Ste([s],t))),r&&r.length){const s=this.flowRepresentation==="flow-to"==(this.style==="ocean-current-kn"||this.style==="ocean-current-m")?0:180;t.attributes.Direction=t.attributes.Direction+s,this.rotationVariables.forEach(n=>qse(e,Y9(n,t),n.axis))}return e}_createStyleRenderer(t){let e={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(t){case"single-arrow":e=this._createSingleArrowRenderer();break;case"beaufort-kn":e=this._createBeaufortKnotsRenderer();break;case"beaufort-m":e=this._createBeaufortMeterRenderer();break;case"beaufort-ft":e=this._createBeaufortFeetRenderer();break;case"beaufort-mi":e=this._createBeaufortMilesRenderer();break;case"beaufort-km":e=this._createBeaufortKilometersRenderer();break;case"ocean-current-m":e=this._createCurrentMeterRenderer();break;case"ocean-current-kn":e=this._createCurrentKnotsRenderer();break;case"simple-scalar":e=this._createSimpleScalarRenderer();break;case"wind-barb":e=this._createWindBarbsRenderer();break;case"classified-arrow":e=this._createClassifiedArrowRenderer()}return new qw(e)}_createSingleArrowRenderer(){return{defaultSymbol:this._getDefaultSymbol()}}_createBeaufortKnotsRenderer(){const t=[0,1,3,6,10,16,21,27,33,40,47,55,63],e=[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]];return{defaultSymbol:this._getDefaultSymbol(new It([214,47,39])),classBreakInfos:this._getClassBreaks(t,e)}}_createBeaufortMeterRenderer(){const t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],e=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]];return{defaultSymbol:this._getDefaultSymbol(new It([214,47,39])),classBreakInfos:this._getClassBreaks(t,e)}}_createBeaufortFeetRenderer(){const t=this._getDefaultSymbol(new It([214,47,39]));let e=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];const i=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]],r=3.28084;return e=e.map(s=>s*r),{defaultSymbol:t,classBreakInfos:this._getClassBreaks(e,i)}}_createBeaufortMilesRenderer(){const t=this._getDefaultSymbol(new It([214,47,39]));let e=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];const i=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]],r=2.23694;return e=e.map(s=>s*r),{defaultSymbol:t,classBreakInfos:this._getClassBreaks(e,i)}}_createBeaufortKilometersRenderer(){const t=this._getDefaultSymbol(new It([214,47,39]));let e=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];const i=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]],r=3.6;return e=e.map(s=>s*r),{defaultSymbol:t,classBreakInfos:this._getClassBreaks(e,i)}}_createCurrentMeterRenderer(){const t=[0,.5,1,1.5,2],e=[[78,26,153],[179,27,26],[202,128,26],[177,177,177]];return{defaultSymbol:this._getDefaultSymbol(new It([177,177,177])),classBreakInfos:this._getClassBreaks(t,e)}}_createCurrentKnotsRenderer(){const t=[0,.25,.5,1,1.5,2,2.5,3,3.5,4],e=[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]];return{defaultSymbol:this._getDefaultSymbol(new It([177,177,177])),classBreakInfos:this._getClassBreaks(t,e)}}_createClassifiedArrowRenderer(){const t=this._getDefaultSymbol(new It([56,168,0]));let e=[0,1e-6,3.5,7,10.5,14];if(this.sizeVariables?.length){const r=this.sizeVariables[0].minDataValue,s=this.sizeVariables[0].maxDataValue;if(r&&s){const n=(s-r)/5;e=Array.from(Array(6).keys()).map(o=>r+n*o)}}const i=[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]];return{defaultSymbol:t,classBreakInfos:this._getClassBreaks(e,i)}}_createSimpleScalarRenderer(){return{defaultSymbol:cm.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII=",height:20,width:20,type:"esriPMS",angle:0})}}_createWindBarbsRenderer(){const t=Array.from(Array(31).keys()).map(s=>5*s),e=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"90-95",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="}],i=cm.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",height:20,width:20,type:"esriPMS",angle:0}),r=t.map((s,n)=>{let o;if(n!==t.length-1)if(n===0)o={minValue:s,maxValue:t[n+1],symbol:i};else{const a=cm.fromJSON({type:"esriPMS",imageData:e[n].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0});o={minValue:s,maxValue:t[n+1],symbol:a}}return new Kb(o)});return{defaultSymbol:i,classBreakInfos:r}}_getClassBreaks(t,e){return e.map((i,r)=>new Kb({minValue:t[r],maxValue:t[r+1],symbol:this._getDefaultSymbol(new It(i))}))}};h([p({type:String,json:{write:!0}})],po.prototype,"attributeField",void 0),h([p({type:OT.apiValues,json:{type:OT.jsonValues,read:{reader:OT.read},write:{writer:OT.write}}})],po.prototype,"flowRepresentation",void 0),h([p({type:["geographic","arithmetic"],json:{write:!0}})],po.prototype,"rotationType",void 0),h([p({type:$T.apiValues,json:{type:$T.jsonValues,read:{reader:$T.read},write:{writer:$T.write}}})],po.prototype,"style",void 0),h([p({json:{write:!0}})],po.prototype,"symbolTileSize",void 0),h([p({type:yl.apiValues,json:{type:yl.jsonValues,write:{writer:yl.write}}})],po.prototype,"inputUnit",void 0),h([Ye("inputUnit")],po.prototype,"readInputUnit",null),h([p({type:yl.apiValues,json:{type:yl.jsonValues,read:{reader:yl.read},write:{writer:yl.write}}})],po.prototype,"outputUnit",void 0),h([Ye("outputUnit")],po.prototype,"readOutputUnit",null),h([Dt({vectorField:"vector-field"})],po.prototype,"type",void 0),h([p({type:qw})],po.prototype,"styleRenderer",null),h([p({type:s1})],po.prototype,"sizeVariables",null),h([p({type:oC})],po.prototype,"rotationVariables",null),po=p6=h([ce("esri.renderers.VectorFieldRenderer")],po);const ZD=po,f6={key:"type",base:null,typeMap:{"unique-value":Zm,"class-breaks":qw,"raster-colormap":GD,"raster-stretch":qD,"vector-field":ZD,"raster-shaded-relief":Ose,flow:gse}},m6={...f6,typeMap:{...f6.typeMap}};delete m6.typeMap["vector-field"],delete m6.typeMap.flow;const Z5e={uniqueValue:Zm,classBreaks:qw,rasterStretch:qD,rasterColormap:GD,vectorField:ZD,rasterShadedRelief:Ose,flowRenderer:gse};function Y5e(t){return t&&Z5e[t.type]||null}function K5e(t,e){if(!t)return null;if(t.type==="classBreaks"&&t.classificationMethod){const r=t.authoringInfo||{classificationMethod:""};r.classificationMethod=t.classificationMethod,t.authoringInfo=r}t.type==="vectorField"&&t.visualVariables&&!Array.isArray(t.visualVariables)&&(t.visualVariables=[t.visualVariables]);const i=Y5e(t);if(i){const r=new i;return r.read(t,e),r}return e&&e.messages&&t&&e.messages.push(new kl("renderer:unsupported","Renderers of type '"+(t.type||"unknown")+"' are not supported",{definition:t,context:e})),null}var y6;let cg=y6=class extends Je{constructor(t){super(t),this.variableName=null,this.dimensionName=null,this.values=[],this.isSlice=!1}clone(){return new y6({variableName:this.variableName,dimensionName:this.dimensionName,values:Le(this.values),isSlice:this.isSlice})}};h([p({type:String,json:{write:!0}})],cg.prototype,"variableName",void 0),h([p({type:String,json:{write:!0}})],cg.prototype,"dimensionName",void 0),h([p({type:E_.array(E_.oneOf([E_.native(Number),E_.array(E_.native(Number))])),json:{write:!0}})],cg.prototype,"values",void 0),h([p({type:Boolean,json:{write:!0}})],cg.prototype,"isSlice",void 0),cg=y6=h([ce("esri.layers.support.DimensionalDefinition")],cg);const rw=cg;var g6;const SM=new Set(["raster","raster2","dem","fillraster"]),EM=new Set(["rasters"]),DG=t=>t&&t.rasterFunction?ga.fromJSON(t):t,KO=t=>t&&t instanceof ga?t.toJSON():t,v6=t=>t?.functionName&&!t.declaredClass,jG=t=>v6(t)?new ga(t):t,Q5e=t=>{if(t==null)return null;t=Le(t);const e={};for(const i of Object.keys(t))SM.has(i.toLowerCase())?e[i]=DG(t[i]):EM.has(i.toLowerCase())&&Array.isArray(t[i])?e[i]=t[i].map(DG):e[i]=t[i];return e};let ga=g6=class extends Je{constructor(t){super(t),this.functionName=null,this.outputPixelType="unknown",this.variableName=null,this.rasterFunctionDefinition=null}set functionArguments(t){if(t){const e=Object.keys(t);if(e.some(i=>SM.has(i.toLowerCase())&&v6(t[i]))||e.some(i=>EM.has(i.toLowerCase())&&Array.isArray(t[i])&&t[i].some(r=>v6(r)))){t=Le(t);for(const i of e)SM.has(i.toLowerCase())?t[i]=jG(t[i]):EM.has(i.toLowerCase())&&Array.isArray(t[i])&&(t[i]=t[i].map(r=>jG(r)))}}this._set("functionArguments",t)}readFunctionArguments(t){return Q5e(t)}writeFunctionArguments(t,e,i){const r={};for(const s of Object.keys(t))SM.has(s.toLowerCase())?r[s]=KO(t[s]):EM.has(s.toLowerCase())&&Array.isArray(t[s])?r[s]=t[s].map(KO):r[s]=KO(t[s]);e[i]=r}readFunctionName(t,e){const i=e.rasterFunctionInfos;return e.name||(i&&i.length&&i[0].name!=="None"?i[0].name:e.rasterFunctionDefinition?e.rasterFunctionDefinition.name:e.rasterFunction)}clone(){return new g6({functionName:this.functionName,functionArguments:Le(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,rasterFunctionDefinition:Le(this.rasterFunctionDefinition)})}};h([p({json:{type:Object,name:"rasterFunctionArguments"}})],ga.prototype,"functionArguments",null),h([Ye("functionArguments")],ga.prototype,"readFunctionArguments",null),h([it("functionArguments")],ga.prototype,"writeFunctionArguments",null),h([p({json:{type:String,write:{target:"rasterFunction"}}})],ga.prototype,"functionName",void 0),h([Ye("functionName",["rasterFunction","rasterFunctionInfos","rasterFunctionDefinition"])],ga.prototype,"readFunctionName",null),h([Dt({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1}),p({json:{default:"unknown"}})],ga.prototype,"outputPixelType",void 0),h([p({type:String,json:{read:!0,write:!0}})],ga.prototype,"variableName",void 0),h([p({type:Object,json:{name:"rasterFunctionDefinition"}})],ga.prototype,"rasterFunctionDefinition",void 0),ga=g6=h([ce("esri.layers.support.RasterFunction")],ga);const qi=ga,X5e={StretchFunction:{arguments:{ComputeGamma:{isDataset:!1,isPublic:!1,name:"ComputeGamma",type:"RasterFunctionVariable",value:!1},DRA:{isDataset:!1,isPublic:!1,name:"DRA",type:"RasterFunctionVariable",value:!1},EstimateStatsHistogram:{isDataset:!1,isPublic:!1,name:"EstimateStatsHistogram",type:"RasterFunctionVariable",value:!1},Gamma:{displayName:"Gamma",isDataset:!1,isPublic:!1,name:"Gamma",type:"RasterFunctionVariable"},Histograms:{isDataset:!1,isPublic:!1,name:"Histograms",type:"RasterFunctionVariable"},Max:{isDataset:!1,isPublic:!1,name:"Max",type:"RasterFunctionVariable",value:255},MaxPercent:{isDataset:!1,isPublic:!1,name:"MaxPercent",type:"RasterFunctionVariable",value:.5},Min:{isDataset:!1,isPublic:!1,name:"Min",type:"RasterFunctionVariable",value:0},MinPercent:{isDataset:!1,isPublic:!1,name:"MinPercent",type:"RasterFunctionVariable",value:.25},NumberOfStandardDeviations:{isDataset:!1,isPublic:!1,name:"NumberOfStandardDeviation",type:"RasterFunctionVariable",value:2},Raster:{isDataset:!0,isPublic:!1,name:"Raster",type:"RasterFunctionVariable"},SigmoidStrengthLevel:{isDataset:!1,isPublic:!1,name:"SigmoidStrengthLevel",type:"RasterFunctionVariable",value:2},Statistics:{isDataset:!1,isPublic:!1,name:"Statistics",type:"RasterFunctionVariable"},StretchType:{isDataset:!1,isPublic:!1,name:"StretchType",type:"RasterFunctionVariable",value:0},type:"StretchFunctionArguments",UseGamma:{isDataset:!1,isPublic:!1,name:"UseGamma",type:"RasterFunctionVariable",value:!1}},description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",function:{description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",name:"Stretch",pixelType:"UNKNOWN",type:"StretchFunction"},functionType:0,name:"Stretch",thumbnail:""},RemapFunction:{name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table.",function:{type:"RemapFunction",pixelType:"UNKNOWN",name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},UseTable:{name:"UseTable",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},InputRanges:{name:"InputRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"Input Ranges"},OutputValues:{name:"OutputValues",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"Output Values"},NoDataRanges:{name:"NoDataRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"NoData Ranges"},Table:{name:"Table",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputField:{name:"InputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},OutputField:{name:"OutputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputMaxField:{name:"InputMaxField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},RemapTableType:{name:"RemapTableType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},AllowUnmatched:{name:"AllowUnmatched",isPublic:!1,isDataset:!1,value:!0,type:"RasterFunctionVariable"},type:"RemapFunctionArguments"},functionType:0,thumbnail:""},ColormapFunction:{name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp.",function:{type:"ColormapFunction",pixelType:"UNKNOWN",name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},ColormapName:{name:"ColormapName",isPublic:!1,isDataset:!1,value:"Gray",type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},type:"ColormapFunctionArguments"},functionType:0,thumbnail:""},ShadedReliefFunction:{name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image.",function:{type:"ShadedReliefFunction",pixelType:"UNKNOWN",name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"ShadedReliefFunctionArguments"},functionType:0,thumbnail:""},HillshadeFunction:{name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image",function:{type:"HillshadeFunction",pixelType:"UNKNOWN",name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image"},arguments:{DEM:{name:"DEM",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"HillshadeFunctionArguments"},functionType:0,thumbnail:""},ResampleFunction:{name:"Resample",description:"Changes the cell size of a raster.",function:{type:"ResampleFunction",pixelType:"UNKNOWN",name:"Resample",description:"Changes the cell size of a raster."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ResamplingType:{name:"ResamplingType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},InputCellSize:{name:"InputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},OutputCellSize:{name:"OutputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},type:"ResampleFunctionArguments"},functionType:0,thumbnail:""}},e4e=new Set(["u1","u2","u4","u8","s8","u16","s16"]),t4e={simple_scalar:"Simple Scalar",wind_barb:"Wind Barb",single_arrow:"Single Arrow",beaufort_kn:"Beaufort Wind (Knots)",beaufort_m:"Beaufort Wind (MetersPerSecond)",ocean_current_m:"Ocean Current (MetersPerSecond)",ocean_current_kn:"Ocean Current (Knots)"},i4e=new Set(["raster-stretch","unique-value","class-breaks","raster-shaded-relief","vector-field","raster-colormap"]);function Hse(t){return i4e.has(t.type)}function QO(t,e){if(!t||!e)return Le(t||e);const i=Le(t);if(i.rasterFunctionDefinition&&e.rasterFunctionDefinition){const r=e.rasterFunctionDefinition;(r.thumbnail||r.thumbnailEx)&&(r.thumbnail=r.thumbnailEx=void 0),Wse(i.rasterFunctionDefinition.arguments,e)}else e.functionName?.toLowerCase()!=="none"&&(Jse(i.functionArguments).Raster=e);return i}function Wse(t,e){for(const i in t)i.toLowerCase()==="raster"&&(t[i].type==="RasterFunctionVariable"?(t[i]=e.rasterFunctionDefinition,t[i].type="RasterFunctionTemplate"):t[i].type==="RasterFunctionTemplate"&&Wse(t[i].arguments,e))}function zh(t){const e=Le(X5e[t.functionName+"Function"]),i=t.functionArguments;for(const r in i)r.toLowerCase()==="raster"?(e.arguments[r]=zh(i[r]),e.arguments[r].type="RasterFunctionTemplate"):r.toLowerCase()==="colormap"?(e.arguments[r].value=h4e(i[r]),e.arguments.ColorSchemeType.value=0):e.arguments[r].value=i[r];return e}function r4e(t,e){switch(e=e||{},t.type){case"raster-stretch":return o4e(t,e);case"class-breaks":return a4e(t,e);case"unique-value":return l4e(t,e);case"raster-colormap":return u4e(t,e);case"vector-field":return s4e(t,e);case"raster-shaded-relief":return n4e(t,e);case"flow":throw new Error("Unsupported rendering rule.")}}function Jse(t){const e=t?.Raster;return e&&e.declaredClass==="esri.layers.support.RasterFunction"?Jse(e.functionArguments):t}const U_={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,sigmoid:9};function s4e(t,e){const i=new qi;i.functionName="VectorFieldRenderer";const{dataType:r,bandProperties:s}=e,n=r==="vector-uv";let o,a;s&&s.length===2&&(o=s.map(f=>f.BandName.toLowerCase()).indexOf("magnitude"),a=s.map(f=>f.BandName.toLowerCase()).indexOf("direction")),o!==-1&&o!==null||(o=0,a=1);const l=t.rotationType==="arithmetic"?1:2,u=t.flowRepresentation==="flow-from"?0:1,c=t.visualVariables?t.visualVariables.find(f=>f.field==="Magnitude"):new s1,d={magnitudeBandID:o,directionBandID:a,isUVComponents:n,referenceSystem:l,massFlowAngleRepresentation:u,symbolTileSize:50,symbolTileSizeUnits:100,calculationMethod:"Vector Average",symbologyName:t4e[t.style.toLowerCase().replace("-","_")],minimumMagnitude:c.minDataValue,maximumMagnitude:c.maxDataValue,minimumSymbolSize:c.minSize,maximumSymbolSize:c.maxSize};return i.functionArguments=d,e.convertToRFT?new qi({rasterFunctionDefinition:zh(i)}):i}function n4e(t,e){const i=e.convertToRFT;if(e.dataType!=="elevation"&&(e.dataType!=="generic"||e.bandCount!==1||e.pixelType!=="s16"&&e.pixelType!=="s32"&&e.pixelType!=="f32"&&e.pixelType!=="f64"))return new qi;const r=new qi;r.functionName="Hillshade";const s=t.hillshadeType==="traditional"?0:1,n=t.scalingType==="none"?1:3,o={HillshadeType:s,SlopeType:n,ZFactor:t.zFactor};return s===0&&(o.Azimuth=t.azimuth,o.Altitude=t.altitude),n===3&&(o.PSPower=t.pixelSizePower,o.PSZFactor=t.pixelSizeFactor),r.functionArguments=o,r.variableName="Raster",t.colorRamp&&(r.functionName="ShadedRelief",i?o.ColorRamp=$se(t.colorRamp):o.Colormap=U0(t.colorRamp)),i?new qi({rasterFunctionDefinition:zh(r)}):r}function o4e(t,e){const i=e.convertToRFT,r=new qi;r.functionName="Stretch";const s=U_[Vx.toJSON(t.stretchType)],n="u8",o={StretchType:s,Statistics:c4e(t.statistics??[]),DRA:t.dynamicRangeAdjustment,UseGamma:t.useGamma,Gamma:t.gamma,ComputeGamma:t.computeGamma};if(t.outputMin!=null&&(o.Min=t.outputMin),t.outputMax!=null&&(o.Max=t.outputMax),s===U_.standardDeviation?(o.NumberOfStandardDeviations=t.numberOfStandardDeviations,r.outputPixelType=n):s===U_.percentClip?(o.MinPercent=t.minPercent,o.MaxPercent=t.maxPercent,r.outputPixelType=n):s===U_.minMax?r.outputPixelType=n:s===U_.sigmoid&&(o.SigmoidStrengthLevel=t.sigmoidStrengthLevel),r.functionArguments=o,r.variableName="Raster",t.colorRamp){const a=t.colorRamp,l=new qi;if(i)l.functionArguments={ColorRamp:$se(a)};else{const u=Mse(a);if(u)l.functionArguments={colorRamp:u};else if(!e.convertColorRampToColormap||a.type!=="algorithmic"&&a.type!=="multipart"){const c=t.colorRamp.toJSON();c.type==="algorithmic"?c.algorithm=c.algorithm||"esriCIELabAlgorithm":c.type==="multipart"&&c.colorRamps?.length&&c.colorRamps.forEach(d=>d.algorithm=d.algorithm||"esriCIELabAlgorithm"),l.functionArguments={colorRamp:c}}else l.functionArguments={Colormap:U0(a)}}return l.variableName="Raster",l.functionName="Colormap",l.functionArguments.Raster=r,i?new qi({rasterFunctionDefinition:zh(l)}):l}return i?new qi({rasterFunctionDefinition:zh(r)}):r}function a4e(t,e){const i=[],r=[],s=[],n=[],{pixelType:a,rasterAttributeTable:l}=e,u=Re(l)?null:l.features,c=Zse(l);if(c&&u&&Array.isArray(u)&&t.classBreakInfos){t.classBreakInfos.forEach((b,_)=>{const S=b.symbol?.color;let M;S?.a&&b.minValue!=null&&b.maxValue!=null&&u.forEach(x=>{b.minValue!=null&&b.maxValue!=null&&(M=x.attributes[t.field],(M>=b.minValue&&M<b.maxValue||_===t.classBreakInfos.length-1&&M>=b.minValue)&&n.push([x.attributes[c],S.r,S.g,S.b]))})});const g=a?a5(n,a):n,v=new qi;return v.functionName="Colormap",v.functionArguments={},v.functionArguments.Colormap=g,v.variableName="Raster",e.convertToRFT?new qi({rasterFunctionDefinition:zh(v)}):v}t.classBreakInfos.forEach((g,v)=>{if(g.minValue==null||g.maxValue==null)return;const b=g.symbol&&g.symbol.color;b?.a?(v===0?i.push(g.minValue,g.maxValue+1e-6):i.push(g.minValue+1e-6,g.maxValue+1e-6),r.push(v),n.push([v,b.r,b.g,b.b])):s.push(g.minValue,g.maxValue)});const d=a?a5(n,a):n,f=new qi;f.functionName="Remap",f.functionArguments={InputRanges:i,OutputValues:r,NoDataRanges:s},f.variableName="Raster";const m=new qi;return m.functionName="Colormap",m.functionArguments={Colormap:d,Raster:f},e.convertToRFT?new qi({rasterFunctionDefinition:zh(m)}):m}function a5(t,e){const i=e4e.has(e)?i_(e):null;return i&&t.push([Math.floor(i[0]-1),0,0,0],[Math.ceil(i[1]+1),0,0,0]),t}function Zse(t){if(Re(t))return;const{fields:e}=t,i=e&&e.find(r=>r&&r.name&&r.name.toLowerCase()==="value");return i&&i.name}function l4e(t,e){const i=[],{pixelType:r,rasterAttributeTable:s}=e,n=Re(s)?null:s.features,o=Zse(s),a=t.defaultSymbol?.color?.toRgb(),l=t.uniqueValueInfos;if(l)if(n){if(o){const d=new Map;l.forEach(m=>{const g=m.value,v=m.symbol?.color;g!=null&&v&&v.a&&d.set(String(g),v.toRgb())});const f=t.field;n.forEach(({attributes:m})=>{const g=String(m[f]),v=m[o],b=d.get(g);b?i.push([v,...b]):a&&i.push([v,...a])})}}else for(let d=0;d<l.length;d++){const f=l[d],m=f.symbol?.color,g=+f.value;if(m?.a){if(isNaN(g))return null;i.push([g,m.r,m.g,m.b])}}const u=r&&i.length>0?a5(i,r):i,c=new qi;return c.functionName="Colormap",c.functionArguments={},c.functionArguments.Colormap=u,c.variableName="Raster",e.convertToRFT?new qi({rasterFunctionDefinition:zh(c)}):c}function u4e(t,e){const i=t.extractColormap();if(!i||i.length===0)return null;const{pixelType:r}=e,s=r?a5(i,r):i,n=new qi;return n.functionName="Colormap",n.functionArguments={},n.functionArguments.Colormap=s,e.convertToRFT?new qi({rasterFunctionDefinition:zh(n)}):n}function c4e(t){const e=[];return t?.forEach(i=>{const r=i;if(Array.isArray(r))e.push(r);else{if(r.min==null||r.max==null)return;const s=[r.min,r.max,r.avg||0,r.stddev||0];e.push(s)}}),e}function h4e(t){const e=[],i=[];return t.forEach(r=>{e.push(r[0]),i.push(a5e([...r.slice(1),255]))}),{type:"RasterColormap",values:e,colors:i}}var b6;const Gx=xs()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),w6=xs()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"});function d4e(t){let e;switch(t?t.toLowerCase().replace("esrimosaic",""):""){case"byattribute":case"attribute":e="esriMosaicAttribute";break;case"lockraster":e="esriMosaicLockRaster";break;case"center":e="esriMosaicCenter";break;case"northwest":e="esriMosaicNorthwest";break;case"nadir":e="esriMosaicNadir";break;case"viewpoint":e="esriMosaicViewpoint";break;case"seamline":e="esriMosaicSeamline";break;default:e="esriMosaicNone"}return w6.fromJSON(e)}let on=b6=class extends Je{constructor(t){super(t),this.ascending=!0,this.itemRenderingRule=null,this.lockRasterIds=null,this.method=null,this.multidimensionalDefinition=null,this.objectIds=null,this.operation=null,this.sortField=null,this.sortValue=null,this.viewpoint=null,this.where=null}readAscending(t,e){return e.ascending!=null?e.ascending:e.sortAscending==null||e.sortAscending}readMethod(t,e){return d4e(e.mosaicMethod||e.defaultMosaicMethod)}writeMultidimensionalDefinition(t,e,i){t!=null&&(t=t.filter(({variableName:r,dimensionName:s})=>r&&r!=="*"||s)).length&&(e[i]=t.map(r=>r.toJSON()))}readOperation(t,e){const i=e.mosaicOperation,r=e.mosaicOperator&&e.mosaicOperator.toLowerCase(),s=i||(r?Gx.toJSON(r):null);return Gx.fromJSON(s)||"first"}castSortValue(t){return t==null||typeof t=="string"||typeof t=="number"?t:`${t}`}clone(){return new b6({ascending:this.ascending,itemRenderingRule:Le(this.itemRenderingRule),lockRasterIds:Le(this.lockRasterIds),method:this.method,multidimensionalDefinition:Le(this.multidimensionalDefinition),objectIds:Le(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:Le(this.viewpoint),where:this.where})}};h([p({type:Boolean,json:{write:!0}})],on.prototype,"ascending",void 0),h([Ye("ascending",["ascending","sortAscending"])],on.prototype,"readAscending",null),h([p({type:qi,json:{write:!0}})],on.prototype,"itemRenderingRule",void 0),h([p({type:[Si],json:{write:{overridePolicy(){return{enabled:this.method==="lock-raster"}}}}})],on.prototype,"lockRasterIds",void 0),h([p({type:String,json:{type:w6.jsonValues,write:{target:"mosaicMethod",writer:w6.write}}})],on.prototype,"method",void 0),h([Ye("method",["mosaicMethod","defaultMosaicMethod"])],on.prototype,"readMethod",null),h([p({type:[rw],json:{write:!0}})],on.prototype,"multidimensionalDefinition",void 0),h([it("multidimensionalDefinition")],on.prototype,"writeMultidimensionalDefinition",null),h([p({type:[Si],json:{name:"fids",write:!0}})],on.prototype,"objectIds",void 0),h([p({json:{type:Gx.jsonValues,read:{reader:Gx.read},write:{target:"mosaicOperation",writer:Gx.write}}})],on.prototype,"operation",void 0),h([Ye("operation",["mosaicOperation","mosaicOperator"])],on.prototype,"readOperation",null),h([p({type:String,json:{write:{overridePolicy(){return{enabled:this.method==="attribute"}}}}})],on.prototype,"sortField",void 0),h([p({type:[String,Number],json:{write:{allowNull:!0,overridePolicy(){return{enabled:this.method==="attribute",allowNull:!0}}}}})],on.prototype,"sortValue",void 0),h([mi("sortValue")],on.prototype,"castSortValue",null),h([p({type:Ct,json:{write:!0}})],on.prototype,"viewpoint",void 0),h([p({type:String,json:{write:!0}})],on.prototype,"where",void 0),on=b6=h([ce("esri.layers.support.MosaicRule")],on);const gl=on,pm=xs()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"}),qx=xs()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"});let cs=class extends Je{constructor(){super(...arguments),this.layer=null,this.compression=void 0,this.pixelType=void 0,this.lercVersion=2}get adjustAspectRatio(){return this.layer.adjustAspectRatio}writeAdjustAspectRatio(e,i,r){this.layer.version<10.3||(i[r]=e)}get bandIds(){return this.layer.bandIds}get compressionQuality(){return this.layer.compressionQuality}writeCompressionQuality(e,i,r){this.format&&this.format.toLowerCase().includes("jpg")&&e!=null&&(i[r]=e)}get compressionTolerance(){return this.layer.compressionTolerance}writeCompressionTolerance(e,i,r){this.format==="lerc"&&e!=null&&(i[r]=e)}get format(){return this.layer.renderer?.type==="vector-field"?"lerc":this.layer.format}get interpolation(){return this.layer.interpolation}get noData(){return this.layer.noData}get noDataInterpretation(){return this.layer.noDataInterpretation}writeLercVersion(e,i,r){this.format==="lerc"&&this.layer.version>=10.5&&(i[r]=e)}get version(){const e=this.layer;return e.commitProperty("bandIds"),e.commitProperty("format"),e.commitProperty("compressionQuality"),e.commitProperty("compressionTolerance"),e.commitProperty("interpolation"),e.commitProperty("noData"),e.commitProperty("noDataInterpretation"),e.commitProperty("mosaicRule"),e.commitProperty("renderingRule"),e.commitProperty("adjustAspectRatio"),e.commitProperty("pixelFilter"),e.commitProperty("definitionExpression"),e.commitProperty("multidimensionalSubset"),(this._get("version")||0)+1}set version(e){this._set("version",e)}get mosaicRule(){const e=this.layer;let i=e.mosaicRule;const r=e.definitionExpression;return i?r&&r!==i.where&&(i=i.clone(),i.where=r):r&&(i=new gl({where:r})),i}get renderingRule(){const e=this.layer;let i=e.renderingRule;const r=e.pixelFilter,s=!e.format||e.format.includes("jpg")||e.format.includes("png");i=this._addResampleRasterFunction(i);const n=e.multidimensionalSubset?.areaOfInterest;return n&&(i=this._addClipFunction(i,n)),s&&!r&&e.renderer?.type!=="vector-field"&&(i=this.combineRendererWithRenderingRule(i)),i}combineRendererWithRenderingRule(e){const i=this.layer,{rasterInfo:r,renderer:s}=i;return e=e||i.renderingRule,!s||!Hse(s)?e:QO(r4e(s,{rasterAttributeTable:r.attributeTable,pixelType:r.pixelType,dataType:r.dataType,bandProperties:r.keyProperties?.BandProperties,convertColorRampToColormap:i.version<10.6,convertToRFT:!!e?.rasterFunctionDefinition,bandCount:r.bandCount}),e)}_addResampleRasterFunction(e){if(this.layer.renderer?.type!=="vector-field"||e?.functionName==="Resample")return e;const i=this.layer.serviceDataType==="esriImageServiceDataTypeVector-UV"?7:10,r=this.layer.serviceRasterInfo.pixelSize;let s=new qi({functionName:"Resample",functionArguments:{ResamplingType:i,InputCellSize:r}});return s=e?.rasterFunctionDefinition?new qi({rasterFunctionDefinition:zh(s)}):s,QO(s,e)}_addClipFunction(e,i){const r=new qi({functionName:"Clip",functionArguments:{ClippingGeometry:i.toJSON(),ClippingType:1}});return QO(r,e)}};h([p()],cs.prototype,"layer",void 0),h([p({json:{write:!0}})],cs.prototype,"adjustAspectRatio",null),h([it("adjustAspectRatio")],cs.prototype,"writeAdjustAspectRatio",null),h([p({json:{write:!0}})],cs.prototype,"bandIds",null),h([p({json:{write:!0}})],cs.prototype,"compression",void 0),h([p({json:{write:!0}})],cs.prototype,"compressionQuality",null),h([it("compressionQuality")],cs.prototype,"writeCompressionQuality",null),h([p({json:{write:!0}})],cs.prototype,"compressionTolerance",null),h([it("compressionTolerance")],cs.prototype,"writeCompressionTolerance",null),h([p({json:{write:!0}})],cs.prototype,"format",null),h([p({type:String,json:{read:{reader:pm.read},write:{writer:pm.write}}})],cs.prototype,"interpolation",null),h([p({json:{write:!0}})],cs.prototype,"noData",null),h([p({type:String,json:{read:{reader:qx.read},write:{writer:qx.write}}})],cs.prototype,"noDataInterpretation",null),h([p({json:{write:!0}})],cs.prototype,"pixelType",void 0),h([p({json:{write:!0}})],cs.prototype,"lercVersion",void 0),h([it("lercVersion")],cs.prototype,"writeLercVersion",null),h([p({type:Number})],cs.prototype,"version",null),h([p({json:{write:!0}})],cs.prototype,"mosaicRule",null),h([p({json:{write:!0}})],cs.prototype,"renderingRule",null),cs=h([ce("esri.layers.mixins.ExportImageServiceParameters")],cs);async function sw(t,e){try{return await createImageBitmap(t)}catch(i){throw new Ce("request:server",`Unable to load ${e}`,{url:e,error:i})}}var _6;const p4e={base:Ep,key:"type",typeMap:{extent:Xt,polygon:ja}};let hg=_6=class extends Je{constructor(t){super(t),this.areaOfInterest=null,this.subsetDefinitions=null}get dimensions(){const{subsetDefinitions:t}=this;if(t==null||t.length===0)return[];const e=new Map;t.forEach(r=>{if(!r.dimensionName)return;let s,n;if(Array.isArray(r.values[0])){const o=r.values;s=o[0][0],n=o[r.values.length-1][1]}else{const o=r.values;s=o[0],n=o[r.values.length-1]}if(e.has(r.dimensionName)){const o=e.get(r.dimensionName);o[0]=Math.min(s,o[0]),o[1]=Math.max(n,o[1])}else e.set(r.dimensionName,[s,n])});const i=[];for(const r of e)i.push({name:r[0],extent:r[1]});return i}get variables(){const{subsetDefinitions:t}=this;if(t==null||t.length===0)return[];const e=new Set;return t.forEach(i=>{i.variableName&&e.add(i.variableName)}),[...e]}clone(){const t=this.subsetDefinitions?.map(i=>i.clone()),e=this.areaOfInterest?this.areaOfInterest.clone():this.areaOfInterest;return new _6({areaOfInterest:e,subsetDefinitions:t})}};h([p({types:p4e,json:{read:Pl,write:!0}})],hg.prototype,"areaOfInterest",void 0),h([p({readOnly:!0})],hg.prototype,"dimensions",null),h([p({readOnly:!0})],hg.prototype,"variables",null),h([p({type:[rw],json:{write:!0}})],hg.prototype,"subsetDefinitions",void 0),hg=_6=h([ce("esri.layers.support.MultidimensionalSubset")],hg);const f4e=hg;var x6;let Vn=x6=class extends Je{constructor(){super(...arguments),this.blockWidth=void 0,this.blockHeight=void 0,this.compression=null,this.origin=null,this.firstPyramidLevel=null,this.maximumPyramidLevel=null,this.pyramidScalingFactor=2,this.pyramidBlockWidth=null,this.pyramidBlockHeight=null,this.isVirtualTileInfo=!1,this.tileInfo=null,this.transposeInfo=null,this.blockBoundary=null}clone(){return new x6({blockWidth:this.blockWidth,blockHeight:this.blockHeight,compression:this.compression,origin:Le(this.origin),firstPyramidLevel:this.firstPyramidLevel,maximumPyramidLevel:this.maximumPyramidLevel,pyramidResolutions:Le(this.pyramidResolutions),pyramidScalingFactor:this.pyramidScalingFactor,pyramidBlockWidth:this.pyramidBlockWidth,pyramidBlockHeight:this.pyramidBlockHeight,isVirtualTileInfo:this.isVirtualTileInfo,tileInfo:Le(this.tileInfo),transposeInfo:Le(this.transposeInfo),blockBoundary:Le(this.blockBoundary)})}};h([p({type:Number,json:{write:!0}})],Vn.prototype,"blockWidth",void 0),h([p({type:Number,json:{write:!0}})],Vn.prototype,"blockHeight",void 0),h([p({type:String,json:{write:!0}})],Vn.prototype,"compression",void 0),h([p({type:Ct,json:{write:!0}})],Vn.prototype,"origin",void 0),h([p({type:Number,json:{write:!0}})],Vn.prototype,"firstPyramidLevel",void 0),h([p({type:Number,json:{write:!0}})],Vn.prototype,"maximumPyramidLevel",void 0),h([p({json:{write:!0}})],Vn.prototype,"pyramidResolutions",void 0),h([p({type:Number,json:{write:!0}})],Vn.prototype,"pyramidScalingFactor",void 0),h([p({type:Number,json:{write:!0}})],Vn.prototype,"pyramidBlockWidth",void 0),h([p({type:Number,json:{write:!0}})],Vn.prototype,"pyramidBlockHeight",void 0),h([p({type:Boolean,json:{write:!0}})],Vn.prototype,"isVirtualTileInfo",void 0),h([p({json:{write:!0}})],Vn.prototype,"tileInfo",void 0),h([p()],Vn.prototype,"transposeInfo",void 0),h([p()],Vn.prototype,"blockBoundary",void 0),Vn=x6=h([ce("esri.layers.support.RasterStorageInfo")],Vn);const Yse=Vn;var S6;let Dr=S6=class extends Je{constructor(t){super(t),this.attributeTable=null,this.bandCount=null,this.colormap=null,this.extent=null,this.format=void 0,this.height=null,this.width=null,this.histograms=null,this.keyProperties={},this.multidimensionalInfo=null,this.noDataValue=null,this.pixelSize=null,this.pixelType=null,this.isPseudoSpatialReference=!1,this.spatialReference=null,this.statistics=null,this.storageInfo=null,this.transform=null}get dataType(){const t=this.keyProperties?.DataType?.toLowerCase()??"generic";return t==="stdtime"?"standard-time":t}get nativeExtent(){return this._get("nativeExtent")||this.extent}set nativeExtent(t){t&&this._set("nativeExtent",t)}get nativePixelSize(){if(Re(this.transform)||!this.transform.affectsPixelSize)return this.pixelSize;const t=this.nativeExtent;return{x:t.width/this.width,y:t.height/this.height}}get hasMultidimensionalTranspose(){return!!this.storageInfo?.transposeInfo}clone(){return new S6({attributeTable:Le(this.attributeTable),bandCount:this.bandCount,colormap:Le(this.colormap),extent:Le(this.extent),nativePixelSize:Le(this.nativePixelSize),format:this.format,height:this.height,width:this.width,histograms:Le(this.histograms),keyProperties:Le(this.keyProperties),multidimensionalInfo:Le(this.multidimensionalInfo),noDataValue:this.noDataValue,pixelSize:Le(this.pixelSize),pixelType:this.pixelType,isPseudoSpatialReference:this.isPseudoSpatialReference,spatialReference:Le(this.spatialReference),statistics:Le(this.statistics),storageInfo:Le(this.storageInfo),transform:Le(this.transform)})}};h([p({json:{write:!0}})],Dr.prototype,"attributeTable",void 0),h([p({json:{write:!0}})],Dr.prototype,"bandCount",void 0),h([p({json:{write:!0}})],Dr.prototype,"colormap",void 0),h([p({type:String,readOnly:!0})],Dr.prototype,"dataType",null),h([p({type:Xt,json:{write:!0}})],Dr.prototype,"extent",void 0),h([p({type:Xt,json:{write:!0}})],Dr.prototype,"nativeExtent",null),h([p({json:{write:!0}})],Dr.prototype,"nativePixelSize",null),h([p({json:{write:!0}})],Dr.prototype,"format",void 0),h([p({json:{write:!0}})],Dr.prototype,"height",void 0),h([p({json:{write:!0}})],Dr.prototype,"width",void 0),h([p({json:{write:!0}})],Dr.prototype,"hasMultidimensionalTranspose",null),h([p({json:{write:!0}})],Dr.prototype,"histograms",void 0),h([p({json:{write:!0}})],Dr.prototype,"keyProperties",void 0),h([p({json:{write:!0}})],Dr.prototype,"multidimensionalInfo",void 0),h([p({json:{write:!0}})],Dr.prototype,"noDataValue",void 0),h([p({json:{write:!0}})],Dr.prototype,"pixelSize",void 0),h([p({json:{write:!0}})],Dr.prototype,"pixelType",void 0),h([p()],Dr.prototype,"isPseudoSpatialReference",void 0),h([p({type:Tt,json:{write:!0}})],Dr.prototype,"spatialReference",void 0),h([p({json:{write:!0}})],Dr.prototype,"statistics",void 0),h([p({type:Yse,json:{write:!0}})],Dr.prototype,"storageInfo",void 0),h([p({json:{write:!0}})],Dr.prototype,"transform",void 0),Dr=S6=h([ce("esri.layers.support.RasterInfo")],Dr);const Q3=Dr;let m4e=class{constructor(){this._workerThread=null,this._destroyed=!1}async initialize(){const e=await nie("RasterWorker");this._destroyed?e.close():this._workerThread=e}destroy(){this._destroyed=!0,this._workerThread&&(this._workerThread.close(),this._workerThread=null)}async convertVectorFieldData(e,i){if(!this._workerThread)throw new Ce("raster-jobhandler:no-connection","no available worker connection");const r=await this._workerThread.invoke("convertVectorFieldData",{pixelBlock:e.pixelBlock.toJSON(),type:e.dataType},i);return r?new ui(r):null}async decode(e,i){if(!this._workerThread)throw new Ce("raster-jobhandler:no-connection","no available worker connection");const r=await this._workerThread.invoke("decode",e,i);return r?new ui(r):null}async symbolize(e,i){if(!this._workerThread)throw new Ce("raster-jobhandler:no-connection","no available worker connection");const r={extent:e.extent&&e.extent.toJSON(),pixelBlock:ee(e.pixelBlock)&&e.pixelBlock.toJSON(),simpleStretchParams:e.simpleStretchParams,bandIds:e.bandIds},s=await this._workerThread.invoke("symbolize",r,i);return s?new ui(s):null}async updateSymbolizer(e,i){if(!this._workerThread)throw new Ce("raster-jobhandler:no-connection","no available worker connection");const r=e?.rendererJSON?.histograms;await Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:e.toJSON(),histograms:r},i))}async updateRasterFunction(e,i){if(!this._workerThread)throw new Ce("raster-jobhandler:no-connection","no available worker connection");await Promise.all(this._workerThread.broadcast("updateRasterFunction",{rasterFunctionJSON:e.toJSON()},i))}async process(e,i){if(!this._workerThread)throw new Ce("raster-jobhandler:no-connection","no available worker connection");const r=await this._workerThread.invoke("process",{extent:e.extent?.toJSON(),primaryPixelBlocks:e.primaryPixelBlocks.map(s=>ee(s)?s.toJSON():null),primaryRasterIds:e.primaryRasterIds},i);return r?new ui(r):null}async stretch(e,i){if(!this._workerThread)throw new Ce("raster-jobhandler:no-connection","no available worker connection");if(!e?.pixelBlock)return null;const r={srcPixelBlock:e.pixelBlock.toJSON(),stretchParams:e.stretchParams},s=await this._workerThread.invoke("stretch",r,i);return s?new ui(s):null}async split(e,i){if(!this._workerThread)throw new Ce("raster-jobhandler:no-connection","no available worker connection");if(!e?.pixelBlock)return null;const r={srcPixelBlock:e.pixelBlock.toJSON(),tileSize:e.tileSize,maximumPyramidLevel:e.maximumPyramidLevel},s=await this._workerThread.invoke("split",r,i);return s&&s.forEach((n,o)=>{s.set(o,n?ui.fromJSON(n):null)}),s}async estimateStatisticsHistograms(e,i){if(!this._workerThread)throw new Ce("raster-jobhandler:no-connection","no available worker connection");if(!e?.pixelBlock)return null;const r={srcPixelBlock:e.pixelBlock.toJSON()};return await this._workerThread.invoke("estimateStatisticsHistograms",r,i)}async mosaicAndTransform(e,i){if(!this._workerThread)throw new Ce("raster-jobhandler:no-connection","no available worker connection");if(!e?.srcPixelBlocks?.length)return{pixelBlock:null};const r={...e,srcPixelBlocks:e.srcPixelBlocks.map(n=>ee(n)?n.toJSON():null)},s=await this._workerThread.invoke("mosaicAndTransform",r,i);return{pixelBlock:s.pixelBlock?new ui(s.pixelBlock):null,localNorthDirections:s.localNorthDirections}}async createFlowMesh(e,i){if(!this._workerThread)throw new Ce("raster-jobhandler:no-connection","no available worker connection");const r={buffer:e.flowData.data.buffer,maskBuffer:e.flowData.mask.buffer,width:e.flowData.width,height:e.flowData.height},{meshType:s,simulationSettings:n}=e,o=await this._workerThread.invoke("createFlowMesh",{meshType:s,flowData:r,simulationSettings:n},{...i,transferList:[r.buffer,r.maskBuffer]});return{vertexData:new Float32Array(o.vertexBuffer),indexData:new Uint32Array(o.indexBuffer)}}getProjectionOffsetGrid(e,i){if(!this._workerThread)throw new Ce("raster-jobhandler:no-connection","no available worker connection");const r=ee(e.datumTransformation)?e.datumTransformation.steps.map(o=>({wkid:o.wkid,wkt:o.wkt,isInverse:o.isInverse})):null,s=ee(e.rasterTransform)?e.rasterTransform.toJSON():null,n={projectedExtent:e.projectedExtent.toJSON(),srcBufferExtent:e.srcBufferExtent.toJSON(),pixelSize:e.pixelSize,hasWrapAround:e.hasWrapAround,spacing:e.spacing,datumTransformationSteps:r,rasterTransform:s,isAdaptive:e.isAdaptive,includeGCSGrid:e.includeGCSGrid};return this._workerThread.invoke("getProjectionOffsetGrid",n,i)}};function Kse(t,e,i){const r=e.shift();if(i.length===0){const n=[];i.push({sliceId:-1,multidimensionalDefinition:n})}const s=i.length;for(let n=0;n<s;n++){const o=i.shift().multidimensionalDefinition;r.values?.forEach(a=>{i.push({sliceId:-1,multidimensionalDefinition:[...o,{variableName:t,dimensionName:r.name,values:[a]}]})})}e.length&&Kse(t,e,i)}function Aht(t,e){const i=[];let r=0;return(e?t.variables.filter(s=>s.name.toLowerCase()===e.toLowerCase()):[...t.variables].sort((s,n)=>s.name>n.name?1:-1)).forEach(s=>{const n=[],o=[...s.dimensions].sort((a,l)=>a.name>l.name?-1:1);Kse(s.name,o,n),n.forEach(a=>{i.push({...a,sliceId:r++})})}),i}function Cht(t,e,i){let r=t;if(e&&(e=[...e].sort((s,n)=>s.dimensionName<n.dimensionName?-1:1)).forEach(({dimensionName:s,values:n,isSlice:o})=>{n.length&&(r=r.filter(a=>{const l=a.multidimensionalDefinition.find(c=>c.dimensionName===s);if(l==null)return!1;const u=l.values[0];return typeof u=="number"?typeof n[0]=="number"?n.includes(u):n.some(c=>c[0]<=u&&c[1]>=u):typeof n[0]=="number"?n.some(c=>u[0]<=c&&u[1]>=c):o?n.some(c=>c[0]===u[0]&&c[0]===u[1]):n.some(c=>c[0]>=u[0]&&c[0]<=u[1]||c[1]>=u[0]&&c[1]<=u[1]||c[0]<u[0]&&c[1]>u[1])}))}),r.length&&i&&ee(i.start)&&ee(i.end)){const s=i.start.getTime(),n=i.end.getTime(),o=r[0].multidimensionalDefinition.findIndex(a=>a.dimensionName==="StdTime");o>-1&&(r=r.filter(a=>{const l=a.multidimensionalDefinition[o].values[0];return s<=l&&n>=l}))}return r.map(s=>s.sliceId)}function Qse(t,e){return Array.isArray(t)?e[0]===e[1]?t[0]===e[0]||t[1]===e[0]:t[0]>=e[0]&&t[0]<=e[1]&&t[1]>=e[0]&&t[1]<=e[1]:t>=e[0]&&t<=e[1]}function y4e(t,e){return t[0]<=e[0]&&t[1]>=e[0]||t[0]<=e[1]&&t[1]>=e[1]||t[0]>=e[0]&&t[1]<=e[1]}function Xse(t){return t.length===1?[t[0],t[0]]:[t[0],t[t.length-1]]}function ene(t,e,i){if(!e?.subsetDefinitions?.length)return t;let r;if(i){const{variables:o}=e;if(o.length&&!o.includes(i))return null;const a=e.subsetDefinitions.find(l=>l.dimensionName===t.name&&l.variableName===i);if(!a?.values?.length)return t;r=Xse(a.values)}else r=e.dimensions.find(({name:o})=>o===t.name)?.extent;const s=r;if(!s||!s?.length)return t;const n=t.values.filter(o=>Qse(o,s));return{...t,extent:[...s],values:n}}function tne(t,e,i){if(!e?.subsetDefinitions?.length)return!1;const{variables:r}=e;if(r.length&&t.some(({variableName:s})=>s&&!r.includes(s)))return!0;for(let s=0;s<t.length;s++){const n=t[s],o=e.subsetDefinitions.find(a=>(n.variableName===""||a.variableName===n.variableName)&&a.dimensionName===n.dimensionName);if(o?.values.length){const a=Xse(o.values);if(!n.isSlice&&n.values.length===2&&!Array.isArray(n.values[0])&&n.values[0]!==n.values[1]&&i){if(!y4e(n.values,a))return!0}else if(n.values.some(l=>!Qse(l,a)))return!0}}return!1}function XO(t,e){if(Re(t))return{isOutside:!1};const{geometry:i,timeExtent:r,multidimensionalDefinition:s}=e;let n=null;if(ee(r)&&(n=g4e(t,r),Re(n)))return{isOutside:!0};const{areaOfInterest:o}=t;if(o&&i){const a=i.type==="point"?i:i.type==="extent"?i.center:i.type==="polygon"?i.centroid:null;if(a&&!o.contains(a))return{isOutside:!0}}return ee(s)&&s.length&&tne(s,t,!0)?{isOutside:!0}:{isOutside:!1,intersection:{geometry:i,timeExtent:n,multidimensionalDefinition:s}}}function g4e(t,e){const i=t.dimensions.find(({name:o})=>o==="StdTime");if(i==null||Re(e.start)&&Re(e.end))return e;e=e.clone();const{start:r,end:s}=e.toJSON(),n=r===s?[r]:r!=null&&s!=null?[r,s]:[r??s];return n.length===2&&i?.extent.length&&(n[0]=Math.max(n[0],i.extent[0]),n[1]=Math.min(n[1],i.extent[1]??i.extent[0]),n[1]<n[0])||tne([new rw({variableName:"",dimensionName:"StdTime",isSlice:n.length===1,values:n})],t,!0)?null:(e.start=new Date(n[0]),e.end=new Date(n[1]??n[0]),e)}function v4e(t,e={}){const{multidimensionalInfo:i,keyProperties:r}=t;if(Re(i))return null;const{variableName:s,multidimensionalSubset:n,multidimensionalDefinition:o}=e,a=ee(o)?o[0]?.variableName:null,l=s||a||r?.DefaultVariable;let{variables:u}=i;return n?.variables?.length&&(u=u.filter(({name:c})=>n.variables.includes(c))),l?u.find(({name:c})=>c===l)??u[0]:u[0]}function b4e(t,e={}){const i=v4e(t,e);if(!i)return null;const r=[],{dimensions:s,name:n}=i;if(s.length===0)return[new rw({variableName:n,dimensionName:"",values:[],isSlice:!0})];for(let o=0;o<s.length;o++){const a=ene(s[o],e.multidimensionalSubset,n);if(!a)return null;const{values:l,extent:u}=a;let c=l?.[0]??u[0];a.name.toLowerCase()==="stdz"&&!a.hasRanges&&Math.abs(u[1])<=Math.abs(u[0])&&(c=l?.length?l[l.length-1]:u[1]),r.push(new rw({variableName:n,dimensionName:a.name,values:[c],isSlice:!e.useRangeForRangedDimensionInfo||!!a.hasRanges}))}return r}function $ht(t){return!(Re(t)||!t.length)&&t.some(e=>{if(e.values==null)return!0;const i=e.values.length;return i===0||i>1||!e.isSlice&&Array.isArray(e.values[0])})}function w4e(t,e){if(Re(e)||Re(t))return null;let i=e.variables.map(r=>({...r}));return t?.variables?.length&&(i=i.filter(({name:r})=>t.variables.includes(r)),i.forEach(r=>{r.dimensions=r.dimensions.map(s=>ene(s,t,r.name)).filter(ee)})),i}function _4e(t,e){const{values:i}=e;if(i?.length)return Array.isArray(i[0])!==Array.isArray(t)?-1:Array.isArray(i[0])?i.findIndex(a=>a[0]===t[0]&&a[1]===t[1]):i.indexOf(t);const{extent:r}=e;if(Array.isArray(t)||t<r[0]||t>r[1])return-1;const s=e.interval||1;if(e.unit!=="ISO8601")return Math.round((t-r[0])/s);const n=r[0];let o=-1;switch(e.intervalUnit?.toLowerCase()||"seconds"){case"seconds":o=Math.round((t-n)/1e3/s);break;case"minutes":o=Math.round((t-n)/6e4/s);break;case"hours":o=Math.round((t-n)/36e5/s);break;case"days":o=Math.round((t-n)/864e5/s);break;case"months":{const a=new Date(t).getUTCFullYear()-new Date(n).getUTCFullYear(),l=new Date(n).getUTCMonth(),u=new Date(t).getUTCMonth();o=a===0?u-l:u+11-l+12*(a-1)}break;case"years":o=Math.round((new Date(t).getUTCFullYear()-new Date(n).getUTCFullYear())/s);break;case"decades":o=Math.round((new Date(t).getUTCFullYear()-new Date(n).getUTCFullYear())/10/s)}return o}function UG(t){let e=t.values?.length;if(e)return e;const{extent:i,unit:r}=t,s=t.interval||1,n=i?i[1]-i[0]:0;if(r!=="ISO8601")return Math.round(n/s);switch(t.intervalUnit?.toLowerCase()??"seconds"){case"seconds":e=Math.round(n/1e3/s);break;case"minutes":e=Math.round(n/6e4/s);break;case"hours":e=Math.round(n/36e5/s);break;case"days":e=Math.round(n/864e5/s);break;case"months":{const o=new Date(i[1]).getUTCFullYear()-new Date(i[0]).getUTCFullYear(),a=new Date(i[1][0]).getUTCMonth(),l=new Date(i[1][1]).getUTCMonth();e=o===0?l-a+1:l+11-a+12*(o-1)+1}break;case"years":e=Math.round((new Date(i[1]).getUTCFullYear()-new Date(i[0]).getUTCFullYear())/s);break;case"decades":e=Math.round((new Date(i[1]).getUTCFullYear()-new Date(i[0]).getUTCFullYear())/10/s);break;default:e=0}return e}function Oht(t,e){let i=0;const r=t[0].variableName,s=[...e.variables].sort((n,o)=>n.name>o.name?1:-1);for(let n=0;n<s.length;n++){const o=s[n],a=[...o.dimensions].sort((c,d)=>c.name>d.name?-1:1);if(o.name!==r){i+=a.map(c=>UG(c)).reduce((c,d)=>c*d);continue}const l=a.map(c=>UG(c)),u=a.length;for(let c=0;c<u;c++){const d=t.find(m=>m.dimensionName===a[c].name);if(d==null)return null;const f=_4e(d.values[0],a[c]);if(f===-1)return null;l.shift(),i+=c===u-1?f:f*l.reduce((m,g)=>m*g)}break}return i}var eR,VG,BG,V0={},x4e={get exports(){return V0},set exports(t){V0=t}};VG=x4e,eR=function(){function t(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return t.prototype={ensureBuffer:function(e){var i=this.buffer,r=i?i.byteLength:0;if(e<r)return i;for(var s=512;s<e;)s<<=1;for(var n=new Uint8Array(s),o=0;o<r;++o)n[o]=i[o];return this.buffer=n},getByte:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(e){var i=this.pos;if(e){this.ensureBuffer(i+e);for(var r=i+e;!this.eof&&this.bufferLength<r;)this.readBlock();var s=this.bufferLength;r>s&&(r=s)}else{for(;!this.eof;)this.readBlock();r=this.bufferLength}return this.pos=r,this.buffer.subarray(i,r)},lookChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(e,i,r){for(var s=e+i;this.bufferLength<=s&&!this.eof;)this.readBlock();return new Stream(this.buffer,e,i,r)},skip:function(e){e||(e=1),this.pos+=e},reset:function(){this.pos=0}},t}(),(BG=function(){if(!self||!self.Uint32Array)return null;var t=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),e=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),i=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),r=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],s=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];function n(a){throw new Error(a)}function o(a){var l=0,u=a[l++],c=a[l++];u!=-1&&c!=-1||n("Invalid header in flate stream"),(15&u)!=8&&n("Unknown compression method in flate stream"),((u<<8)+c)%31!=0&&n("Bad FCHECK in flate stream"),32&c&&n("FDICT bit set in flate stream"),this.bytes=a,this.bytesPos=l,this.codeSize=0,this.codeBuf=0,eR.call(this)}return o.prototype=Object.create(eR.prototype),o.prototype.getBits=function(a){for(var l,u=this.codeSize,c=this.codeBuf,d=this.bytes,f=this.bytesPos;u<a;)(l=d[f++])===void 0&&n("Bad encoding in flate stream"),c|=l<<u,u+=8;return l=c&(1<<a)-1,this.codeBuf=c>>a,this.codeSize=u-=a,this.bytesPos=f,l},o.prototype.getCode=function(a){for(var l=a[0],u=a[1],c=this.codeSize,d=this.codeBuf,f=this.bytes,m=this.bytesPos;c<u;){var g;(g=f[m++])===void 0&&n("Bad encoding in flate stream"),d|=g<<c,c+=8}var v=l[d&(1<<u)-1],b=v>>16,_=65535&v;return(c==0||c<b||b==0)&&n("Bad encoding in flate stream"),this.codeBuf=d>>b,this.codeSize=c-b,this.bytesPos=m,_},o.prototype.generateHuffmanTable=function(a){for(var l=a.length,u=0,c=0;c<l;++c)a[c]>u&&(u=a[c]);for(var d=1<<u,f=new Uint32Array(d),m=1,g=0,v=2;m<=u;++m,g<<=1,v<<=1)for(var b=0;b<l;++b)if(a[b]==m){var _=0,S=g;for(c=0;c<m;++c)_=_<<1|1&S,S>>=1;for(c=_;c<d;c+=v)f[c]=m<<16|b;++g}return[f,u]},o.prototype.readBlock=function(){function a(q,he,te,me,ve){for(var _e=q.getBits(te)+me;_e-- >0;)he[v++]=ve}var l=this.getBits(3);if(1&l&&(this.eof=!0),(l>>=1)!=0){var u,c;if(l==1)u=r,c=s;else if(l==2){for(var d=this.getBits(5)+257,f=this.getBits(5)+1,m=this.getBits(4)+4,g=Array(t.length),v=0;v<m;)g[t[v++]]=this.getBits(3);for(var b=this.generateHuffmanTable(g),_=0,S=(v=0,d+f),M=new Array(S);v<S;){var x=this.getCode(b);x==16?a(this,M,2,3,_):x==17?a(this,M,3,3,_=0):x==18?a(this,M,7,11,_=0):M[v++]=_=x}u=this.generateHuffmanTable(M.slice(0,d)),c=this.generateHuffmanTable(M.slice(d,S))}else n("Unknown block type in flate stream");for(var T=(N=this.buffer)?N.length:0,I=this.bufferLength;;){var $=this.getCode(u);if($<256)I+1>=T&&(T=(N=this.ensureBuffer(I+1)).length),N[I++]=$;else{if($==256)return void(this.bufferLength=I);var L=($=e[$-=257])>>16;L>0&&(L=this.getBits(L)),_=(65535&$)+L,$=this.getCode(c),(L=($=i[$])>>16)>0&&(L=this.getBits(L));var B=(65535&$)+L;I+_>=T&&(T=(N=this.ensureBuffer(I+_)).length);for(var z=0;z<_;++z,++I)N[I]=N[I-B]}}}else{var H,J=this.bytes,K=this.bytesPos;(H=J[K++])===void 0&&n("Bad block header in flate stream");var Q=H;(H=J[K++])===void 0&&n("Bad block header in flate stream"),Q|=H<<8,(H=J[K++])===void 0&&n("Bad block header in flate stream");var y=H;(H=J[K++])===void 0&&n("Bad block header in flate stream"),(y|=H<<8)!=(65535&~Q)&&n("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var A=this.bufferLength,N=this.ensureBuffer(A+Q),D=A+Q;this.bufferLength=D;for(var ne=A;ne<D;++ne){if((H=J[K++])===void 0){this.eof=!0;break}N[ne]=H}this.bytesPos=K}},o}())!==void 0&&(VG.exports=BG);let S4e=class ine{constructor(e){this._canvas=null,this._ctx=null,e&&(this._canvas=e.canvas,this._ctx=e.ctx||e.canvas&&e.canvas.getContext("2d"))}decode(e,i,r){if(!e||e.byteLength<10)throw new Ce("imagecanvasdecoder: decode","required a valid encoded data as input.");let{width:s=0,height:n=0,format:o}=i;const{applyJpegMask:a}=i;if(a&&(!s||!n))throw new Ce("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((l,u)=>{let c=null;o==="jpg"&&a&&(c=ine._getMask(e,{width:s,height:n}));const d=new Blob([new Uint8Array(e)],{type:"image/"+o=="jpg"?"jpeg":o}),f=URL.createObjectURL(d),m=new Image;let g;m.src=f,m.onload=()=>{if(URL.revokeObjectURL(f),Rl(r))return void u(yr());s=m.width,n=m.height,this._canvas&&this._ctx?(this._canvas.width===s&&this._canvas.height===n||(this._canvas.width=s,this._canvas.height=n),this._ctx.clearRect(0,0,s,n)):(this._canvas=document.createElement("canvas"),this._canvas.width=s,this._canvas.height=n,this._ctx=this._canvas.getContext("2d")),this._ctx.drawImage(m,0,0);const v=this._ctx.getImageData(0,0,s,n);let b;if(g=v.data,i.renderOnCanvas){if(c)for(b=0;b<c.length;b++)c[b]?g[4*b+3]=255:g[4*b+3]=0;return this._ctx.putImageData(v,0,0),void l(null)}const _=s*n,S=new Uint8Array(_),M=new Uint8Array(_),x=new Uint8Array(_);if(c)for(b=0;b<_;b++)S[b]=g[4*b],M[b]=g[4*b+1],x[b]=g[4*b+2];else for(c=new Uint8Array(_),b=0;b<_;b++)S[b]=g[4*b],M[b]=g[4*b+1],x[b]=g[4*b+2],c[b]=g[4*b+3];l({width:s,height:n,pixels:[S,M,x],mask:c,pixelType:"u8"})},m.onerror=()=>{URL.revokeObjectURL(f),u("cannot load image")}})}static _getMask(e,i){let r=null;try{const s=new Uint8Array(e),n=Math.ceil(s.length/2);let o=0;const a=s.length-2;for(o=n;o<a&&(s[o]!==255||s[o+1]!==217);o++);if(o+=2,o<s.length-1){const l=new V0(s.subarray(o)).getBytes();r=new Uint8Array(i.width*i.height);let u=0;for(let c=0;c<l.length;c++)for(let d=7;d>=0;d--)r[u++]=l[c]>>d&1}}catch{}return r}};var zG,GG,qG,l5={},E4e={get exports(){return l5},set exports(t){l5=t}};zG=E4e,GG=function(){var t=function(){function e(i){this.message="JPEG error: "+i}return e.prototype=new Error,e.prototype.name="JpegError",e.constructor=e,e}();return function(){if(!self||!self.Uint8ClampedArray)return null;var e=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),i=4017,r=799,s=3406,n=2276,o=1567,a=3784,l=5793,u=2896;function c(){this.decodeTransform=null,this.colorTransform=-1}function d(_,S){for(var M,x,T=0,I=[],$=16;$>0&&!_[$-1];)$--;I.push({children:[],index:0});var L,B=I[0];for(M=0;M<$;M++){for(x=0;x<_[M];x++){for((B=I.pop()).children[B.index]=S[T];B.index>0;)B=I.pop();for(B.index++,I.push(B);I.length<=M;)I.push(L={children:[],index:0}),B.children[B.index]=L.children,B=L;T++}M+1<$&&(I.push(L={children:[],index:0}),B.children[B.index]=L.children,B=L)}return I[0].children}function f(_,S,M){return 64*((_.blocksPerLine+1)*S+M)}function m(_,S,M,x,T,I,$,L,B){var z=M.mcusPerLine,H=M.progressive,J=S,K=0,Q=0;function y(){if(Q>0)return Q--,K>>Q&1;if((K=_[S++])===255){var C=_[S++];if(C)throw new t("unexpected marker "+(K<<8|C).toString(16))}return Q=7,K>>>7}function A(C){for(var G=C;;){if(typeof(G=G[y()])=="number")return G;if(typeof G!="object")throw new t("invalid huffman sequence")}}function N(C){for(var G=0;C>0;)G=G<<1|y(),C--;return G}function D(C){if(C===1)return y()===1?1:-1;var G=N(C);return G>=1<<C-1?G:G+(-1<<C)+1}function ne(C,G){var Z=A(C.huffmanTableDC),F=Z===0?0:D(Z);C.blockData[G]=C.pred+=F;for(var ie=1;ie<64;){var ge=A(C.huffmanTableAC),xe=15&ge,fe=ge>>4;if(xe!==0){var ze=e[ie+=fe];C.blockData[G+ze]=D(xe),ie++}else{if(fe<15)break;ie+=16}}}function q(C,G){var Z=A(C.huffmanTableDC),F=Z===0?0:D(Z)<<B;C.blockData[G]=C.pred+=F}function he(C,G){C.blockData[G]|=y()<<B}var te=0;function me(C,G){if(te>0)te--;else for(var Z=I,F=$;Z<=F;){var ie=A(C.huffmanTableAC),ge=15&ie,xe=ie>>4;if(ge!==0){var fe=e[Z+=xe];C.blockData[G+fe]=D(ge)*(1<<B),Z++}else{if(xe<15){te=N(xe)+(1<<xe)-1;break}Z+=16}}}var ve,_e=0;function Se(C,G){for(var Z,F,ie=I,ge=$,xe=0;ie<=ge;){var fe=e[ie];switch(_e){case 0:if(xe=(F=A(C.huffmanTableAC))>>4,(Z=15&F)==0)xe<15?(te=N(xe)+(1<<xe),_e=4):(xe=16,_e=1);else{if(Z!==1)throw new t("invalid ACn encoding");ve=D(Z),_e=xe?2:3}continue;case 1:case 2:C.blockData[G+fe]?C.blockData[G+fe]+=y()<<B:--xe==0&&(_e=_e===2?3:0);break;case 3:C.blockData[G+fe]?C.blockData[G+fe]+=y()<<B:(C.blockData[G+fe]=ve<<B,_e=0);break;case 4:C.blockData[G+fe]&&(C.blockData[G+fe]+=y()<<B)}ie++}_e===4&&--te==0&&(_e=0)}function Oe(C,G,Z,F,ie){var ge=Z%z;G(C,f(C,(Z/z|0)*C.v+F,ge*C.h+ie))}function Te(C,G,Z){G(C,f(C,Z/C.blocksPerLine|0,Z%C.blocksPerLine))}var we,Ie,Ae,W,V,j,se=x.length;j=H?I===0?L===0?q:he:L===0?me:Se:ne;var ye,ae,U,le,re=0;for(ae=se===1?x[0].blocksPerLine*x[0].blocksPerColumn:z*M.mcusPerColumn;re<ae;){var k=T?Math.min(ae-re,T):ae;for(Ie=0;Ie<se;Ie++)x[Ie].pred=0;if(te=0,se===1)for(we=x[0],V=0;V<k;V++)Te(we,j,re),re++;else for(V=0;V<k;V++){for(Ie=0;Ie<se;Ie++)for(U=(we=x[Ie]).h,le=we.v,Ae=0;Ae<le;Ae++)for(W=0;W<U;W++)Oe(we,j,re,Ae,W);re++}Q=0,(ye=b(_,S))&&ye.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+ye.invalid),S=ye.offset);var O=ye&&ye.marker;if(!O||O<=65280)throw new t("marker was not found");if(!(O>=65488&&O<=65495))break;S+=2}return(ye=b(_,S))&&ye.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+ye.invalid),S=ye.offset),S-J}function g(_,S,M){var x,T,I,$,L,B,z,H,J,K,Q,y,A,N,D,ne,q,he=_.quantizationTable,te=_.blockData;if(!he)throw new t("missing required Quantization Table.");for(var me=0;me<64;me+=8)J=te[S+me],K=te[S+me+1],Q=te[S+me+2],y=te[S+me+3],A=te[S+me+4],N=te[S+me+5],D=te[S+me+6],ne=te[S+me+7],J*=he[me],K|Q|y|A|N|D|ne?(K*=he[me+1],Q*=he[me+2],y*=he[me+3],A*=he[me+4],N*=he[me+5],D*=he[me+6],ne*=he[me+7],T=(x=(x=l*J+128>>8)+(T=l*A+128>>8)+1>>1)-T,q=(I=Q)*a+($=D)*o+128>>8,I=I*o-$*a+128>>8,z=(L=(L=u*(K-ne)+128>>8)+(z=N<<4)+1>>1)-z,B=(H=(H=u*(K+ne)+128>>8)+(B=y<<4)+1>>1)-B,$=(x=x+($=q)+1>>1)-$,I=(T=T+I+1>>1)-I,q=L*n+H*s+2048>>12,L=L*s-H*n+2048>>12,H=q,q=B*r+z*i+2048>>12,B=B*i-z*r+2048>>12,z=q,M[me]=x+H,M[me+7]=x-H,M[me+1]=T+z,M[me+6]=T-z,M[me+2]=I+B,M[me+5]=I-B,M[me+3]=$+L,M[me+4]=$-L):(q=l*J+512>>10,M[me]=q,M[me+1]=q,M[me+2]=q,M[me+3]=q,M[me+4]=q,M[me+5]=q,M[me+6]=q,M[me+7]=q);for(var ve=0;ve<8;++ve)J=M[ve],(K=M[ve+8])|(Q=M[ve+16])|(y=M[ve+24])|(A=M[ve+32])|(N=M[ve+40])|(D=M[ve+48])|(ne=M[ve+56])?(T=(x=4112+((x=l*J+2048>>12)+(T=l*A+2048>>12)+1>>1))-T,q=(I=Q)*a+($=D)*o+2048>>12,I=I*o-$*a+2048>>12,$=q,z=(L=(L=u*(K-ne)+2048>>12)+(z=N)+1>>1)-z,B=(H=(H=u*(K+ne)+2048>>12)+(B=y)+1>>1)-B,q=L*n+H*s+2048>>12,L=L*s-H*n+2048>>12,H=q,q=B*r+z*i+2048>>12,B=B*i-z*r+2048>>12,J=(J=(x=x+$+1>>1)+H)<16?0:J>=4080?255:J>>4,K=(K=(T=T+I+1>>1)+(z=q))<16?0:K>=4080?255:K>>4,Q=(Q=(I=T-I)+B)<16?0:Q>=4080?255:Q>>4,y=(y=($=x-$)+L)<16?0:y>=4080?255:y>>4,A=(A=$-L)<16?0:A>=4080?255:A>>4,N=(N=I-B)<16?0:N>=4080?255:N>>4,D=(D=T-z)<16?0:D>=4080?255:D>>4,ne=(ne=x-H)<16?0:ne>=4080?255:ne>>4,te[S+ve]=J,te[S+ve+8]=K,te[S+ve+16]=Q,te[S+ve+24]=y,te[S+ve+32]=A,te[S+ve+40]=N,te[S+ve+48]=D,te[S+ve+56]=ne):(q=(q=l*J+8192>>14)<-2040?0:q>=2024?255:q+2056>>4,te[S+ve]=q,te[S+ve+8]=q,te[S+ve+16]=q,te[S+ve+24]=q,te[S+ve+32]=q,te[S+ve+40]=q,te[S+ve+48]=q,te[S+ve+56]=q)}function v(_,S){for(var M=S.blocksPerLine,x=S.blocksPerColumn,T=new Int16Array(64),I=0;I<x;I++)for(var $=0;$<M;$++)g(S,f(S,I,$),T);return S.blockData}function b(_,S,M){function x(B){return _[B]<<8|_[B+1]}var T=_.length-1,I=M<S?M:S;if(S>=T)return null;var $=x(S);if($>=65472&&$<=65534)return{invalid:null,marker:$,offset:S};for(var L=x(I);!(L>=65472&&L<=65534);){if(++I>=T)return null;L=x(I)}return{invalid:$.toString(16),marker:L,offset:I}}return c.prototype={parse:function(_){function S(){var C=_[$]<<8|_[$+1];return $+=2,C}function M(){var C=S(),G=$+C-2,Z=b(_,G,$);Z&&Z.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+Z.invalid),G=Z.offset);var F=_.subarray($,G);return $+=F.length,F}function x(C){for(var G=Math.ceil(C.samplesPerLine/8/C.maxH),Z=Math.ceil(C.scanLines/8/C.maxV),F=0;F<C.components.length;F++){V=C.components[F];var ie=Math.ceil(Math.ceil(C.samplesPerLine/8)*V.h/C.maxH),ge=Math.ceil(Math.ceil(C.scanLines/8)*V.v/C.maxV),xe=G*V.h,fe=Z*V.v*64*(xe+1);V.blockData=new Int16Array(fe),V.blocksPerLine=ie,V.blocksPerColumn=ge}C.mcusPerLine=G,C.mcusPerColumn=Z}var T,I,$=0,L=null,B=null,z=[],H=[],J=[],K=S();if(K!==65496)throw new t("SOI not found");for(K=S();K!==65497;){var Q,y,A;switch(K){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var N=M();K===65504&&N[0]===74&&N[1]===70&&N[2]===73&&N[3]===70&&N[4]===0&&(L={version:{major:N[5],minor:N[6]},densityUnits:N[7],xDensity:N[8]<<8|N[9],yDensity:N[10]<<8|N[11],thumbWidth:N[12],thumbHeight:N[13],thumbData:N.subarray(14,14+3*N[12]*N[13])}),K===65518&&N[0]===65&&N[1]===100&&N[2]===111&&N[3]===98&&N[4]===101&&(B={version:N[5]<<8|N[6],flags0:N[7]<<8|N[8],flags1:N[9]<<8|N[10],transformCode:N[11]});break;case 65499:for(var D=S()+$-2;$<D;){var ne=_[$++],q=new Uint16Array(64);if(ne>>4){if(ne>>4!=1)throw new t("DQT - invalid table spec");for(y=0;y<64;y++)q[e[y]]=S()}else for(y=0;y<64;y++)q[e[y]]=_[$++];z[15&ne]=q}break;case 65472:case 65473:case 65474:if(T)throw new t("Only single frame JPEGs supported");S(),(T={}).extended=K===65473,T.progressive=K===65474,T.precision=_[$++],T.scanLines=S(),T.samplesPerLine=S(),T.components=[],T.componentIds={};var he,te=_[$++],me=0,ve=0;for(Q=0;Q<te;Q++){he=_[$];var _e=_[$+1]>>4,Se=15&_[$+1];me<_e&&(me=_e),ve<Se&&(ve=Se);var Oe=_[$+2];A=T.components.push({h:_e,v:Se,quantizationId:Oe,quantizationTable:null}),T.componentIds[he]=A-1,$+=3}T.maxH=me,T.maxV=ve,x(T);break;case 65476:var Te=S();for(Q=2;Q<Te;){var we=_[$++],Ie=new Uint8Array(16),Ae=0;for(y=0;y<16;y++,$++)Ae+=Ie[y]=_[$];var W=new Uint8Array(Ae);for(y=0;y<Ae;y++,$++)W[y]=_[$];Q+=17+Ae,(we>>4?H:J)[15&we]=d(Ie,W)}break;case 65501:S(),I=S();break;case 65498:S();var V,j=_[$++],se=[];for(Q=0;Q<j;Q++){var ye=T.componentIds[_[$++]];V=T.components[ye];var ae=_[$++];V.huffmanTableDC=J[ae>>4],V.huffmanTableAC=H[15&ae],se.push(V)}var U=_[$++],le=_[$++],re=_[$++],k=m(_,$,T,se,I,U,le,re>>4,15&re);$+=k;break;case 65535:_[$]!==255&&$--;break;default:if(_[$-3]===255&&_[$-2]>=192&&_[$-2]<=254){$-=3;break}throw new t("unknown marker "+K.toString(16))}K=S()}for(this.width=T.samplesPerLine,this.height=T.scanLines,this.jfif=L,this.eof=$,this.adobe=B,this.components=[],Q=0;Q<T.components.length;Q++){var O=z[(V=T.components[Q]).quantizationId];O&&(V.quantizationTable=O),this.components.push({output:v(T,V),scaleX:V.h/T.maxH,scaleY:V.v/T.maxV,blocksPerLine:V.blocksPerLine,blocksPerColumn:V.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(_,S){var M,x,T,I,$,L,B,z,H,J,K,Q=this.width/_,y=this.height/S,A=0,N=this.components.length,D=_*S*N,ne=new Uint8ClampedArray(D),q=new Uint32Array(_),he=4294967288;for(B=0;B<N;B++){for(x=(M=this.components[B]).scaleX*Q,T=M.scaleY*y,A=B,K=M.output,I=M.blocksPerLine+1<<3,$=0;$<_;$++)z=0|$*x,q[$]=(z&he)<<3|7&z;for(L=0;L<S;L++)for(J=I*((z=0|L*T)&he)|(7&z)<<3,$=0;$<_;$++)ne[A]=K[J+q[$]],A+=N}var te=this.decodeTransform;if(te)for(B=0;B<D;)for(z=0,H=0;z<N;z++,B++,H+=2)ne[B]=(ne[B]*te[H]>>8)+te[H+1];return ne},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:this.numComponents===3?this.colorTransform!==0:this.colorTransform===1},_convertYccToRgb:function(_){for(var S,M,x,T=0,I=_.length;T<I;T+=3)S=_[T],M=_[T+1],x=_[T+2],_[T]=S-179.456+1.402*x,_[T+1]=S+135.459-.344*M-.714*x,_[T+2]=S-226.816+1.772*M;return _},_convertYcckToRgb:function(_){for(var S,M,x,T,I=0,$=0,L=_.length;$<L;$+=4)S=_[$],M=_[$+1],x=_[$+2],T=_[$+3],_[I++]=M*(-660635669420364e-19*M+.000437130475926232*x-54080610064599e-18*S+.00048449797120281*T-.154362151871126)-122.67195406894+x*(-.000957964378445773*x+.000817076911346625*S-.00477271405408747*T+1.53380253221734)+S*(.000961250184130688*S-.00266257332283933*T+.48357088451265)+T*(-.000336197177618394*T+.484791561490776),_[I++]=107.268039397724+M*(219927104525741e-19*M-.000640992018297945*x+.000659397001245577*S+.000426105652938837*T-.176491792462875)+x*(-.000778269941513683*x+.00130872261408275*S+.000770482631801132*T-.151051492775562)+S*(.00126935368114843*S-.00265090189010898*T+.25802910206845)+T*(-.000318913117588328*T-.213742400323665),_[I++]=M*(-.000570115196973677*M-263409051004589e-19*x+.0020741088115012*S-.00288260236853442*T+.814272968359295)-20.810012546947+x*(-153496057440975e-19*x-.000132689043961446*S+.000560833691242812*T-.195152027534049)+S*(.00174418132927582*S-.00255243321439347*T+.116935020465145)+T*(-.000343531996510555*T+.24165260232407);return _},_convertYcckToCmyk:function(_){for(var S,M,x,T=0,I=_.length;T<I;T+=4)S=_[T],M=_[T+1],x=_[T+2],_[T]=434.456-S-1.402*x,_[T+1]=119.541-S+.344*M+.714*x,_[T+2]=481.816-S-1.772*M;return _},_convertCmykToRgb:function(_){for(var S,M,x,T,I=0,$=1/255,L=0,B=_.length;L<B;L+=4)S=_[L]*$,M=_[L+1]*$,x=_[L+2]*$,T=_[L+3]*$,_[I++]=255+S*(-4.387332384609988*S+54.48615194189176*M+18.82290502165302*x+212.25662451639585*T-285.2331026137004)+M*(1.7149763477362134*M-5.6096736904047315*x-17.873870861415444*T-5.497006427196366)+x*(-2.5217340131683033*x-21.248923337353073*T+17.5119270841813)-T*(21.86122147463605*T+189.48180835922747),_[I++]=255+S*(8.841041422036149*S+60.118027045597366*M+6.871425592049007*x+31.159100130055922*T-79.2970844816548)+M*(-15.310361306967817*M+17.575251261109482*x+131.35250912493976*T-190.9453302588951)+x*(4.444339102852739*x+9.8632861493405*T-24.86741582555878)-T*(20.737325471181034*T+187.80453709719578),_[I++]=255+S*(.8842522430003296*S+8.078677503112928*M+30.89978309703729*x-.23883238689178934*T-14.183576799673286)+M*(10.49593273432072*M+63.02378494754052*x+50.606957656360734*T-112.23884253719248)+x*(.03296041114873217*x+115.60384449646641*T-193.58209356861505)-T*(22.33816807309886*T+180.12613974708367);return _},getData:function(_,S,M){if(this.numComponents>4)throw new t("Unsupported color mode");var x=this._getLinearizedBlockData(_,S);if(this.numComponents===1&&M){for(var T=x.length,I=new Uint8ClampedArray(3*T),$=0,L=0;L<T;L++){var B=x[L];I[$++]=B,I[$++]=B,I[$++]=B}return I}if(this.numComponents===3&&this._isColorConversionNeeded())return this._convertYccToRgb(x);if(this.numComponents===4){if(this._isColorConversionNeeded())return M?this._convertYcckToRgb(x):this._convertYcckToCmyk(x);if(M)return this._convertCmykToRgb(x)}return x}},c}()},(qG=GG())!==void 0&&(zG.exports=qG);let T4e=class{static decode(e,i=!1){const r=new Uint8Array(e),s=new l5;s.parse(r);const{width:n,height:o,numComponents:a,eof:l}=s,u=s.getData(n,o,!0),c=n*o;let d,f=null,m=0,g=0,v=0;if(!i&&l<r.length-1)try{const b=new V0(r.subarray(l)).getBytes();f=new Uint8Array(c);let _=0;for(m=0;m<b.length;m++)for(v=7;v>=0;v--)f[_++]=b[m]>>v&1}catch{}if(a===1&&u.length===n*o){const b=new Uint8Array(u.buffer);d=[b,b,b]}else{for(d=[],m=0;m<3;m++)d.push(new Uint8Array(c));for(v=0,g=0;g<c;g++)for(m=0;m<3;m++)d[m][g]=u[v++]}return{width:n,height:o,pixels:d,mask:f}}};const rne=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,127]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-34027999387901484e22,34027999387901484e22]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-17976931348623157e292,17976931348623157e292]}];let tR=null;function sne(){return tR||(tR=De(()=>import("./lerc-wasm-81cbfca1.js"),[],import.meta.url).then(t=>t.l).then(({default:t})=>t({locateFile:e=>Ui(`esri/layers/support/rasterFormats/${e}`)})).then(t=>{M4e(t)}),tR)}const u5={getBlobInfo:null,decode:null};function I4e(t){return 16+(t>>3<<3)}function Jp(t,e,i){i.set(t.slice(e,e+i.length))}function M4e(t){const{_malloc:e,_free:i,_lerc_getBlobInfo:r,_lerc_getDataRanges:s,_lerc_decode_4D:n,asm:o}=t;let a;const l=Object.values(o).find(c=>c&&"buffer"in c&&c.buffer===t.HEAPU8.buffer),u=c=>{const d=c.map(v=>I4e(v)),f=d.reduce((v,b)=>v+b),m=e(f);a=new Uint8Array(l.buffer);let g=d[0];d[0]=m;for(let v=1;v<d.length;v++){const b=d[v];d[v]=d[v-1]+g,g=b}return d};u5.getBlobInfo=c=>{const m=new Uint8Array(48),g=new Uint8Array(8*3),[v,b,_]=u([c.length,m.length,g.length]);a.set(c,v),a.set(m,b),a.set(g,_);let S=r(v,c.length,b,_,12,3);if(S)throw i(v),new Error(`lerc-getBlobInfo: error code is ${S}`);a=new Uint8Array(l.buffer),Jp(a,b,m),Jp(a,_,g);const M=new Uint32Array(m.buffer),x=new Float64Array(g.buffer),[T,I,,$,L,B,z,H,J,K,Q]=M,y={version:T,depthCount:K,width:$,height:L,validPixelCount:z,bandCount:B,blobSize:H,maskCount:J,dataType:I,minValue:x[0],maxValue:x[1],maxZerror:x[2],statistics:[],bandCountWithNoData:Q};if(Q)return y;if(K===1&&B===1)return i(v),y.statistics.push({minValue:x[0],maxValue:x[1]}),y;const A=K*B*8,N=new Uint8Array(A),D=new Uint8Array(A);let ne=v,q=0,he=0,te=!1;if(a.byteLength<v+2*A?(i(v),te=!0,[ne,q,he]=u([c.length,A,A]),a.set(c,ne)):[q,he]=u([A,A]),a.set(N,q),a.set(D,he),S=s(ne,c.length,K,B,q,he),S)throw i(ne),te||i(q),new Error(`lerc-getDataRanges: error code is ${S}`);a=new Uint8Array(l.buffer),Jp(a,q,N),Jp(a,he,D);const me=new Float64Array(N.buffer),ve=new Float64Array(D.buffer),_e=y.statistics;for(let Se=0;Se<B;Se++)if(K>1){const Oe=me.slice(Se*K,(Se+1)*K),Te=ve.slice(Se*K,(Se+1)*K),we=Math.min.apply(null,Oe),Ie=Math.max.apply(null,Te);_e.push({minValue:we,maxValue:Ie,depthStats:{minValues:Oe,maxValues:Te}})}else _e.push({minValue:me[Se],maxValue:ve[Se]});return i(ne),te||i(q),y},u5.decode=(c,d)=>{const{maskCount:f,depthCount:m,bandCount:g,width:v,height:b,dataType:_,bandCountWithNoData:S}=d,M=rne[_],x=v*b,T=new Uint8Array(x*g),I=x*m*g*M.size,$=new Uint8Array(I),L=new Uint8Array(g),B=new Uint8Array(8*g),[z,H,J,K,Q]=u([c.length,T.length,$.length,L.length,B.length]);a.set(c,z),a.set(T,H),a.set($,J),a.set(L,K),a.set(B,Q);const y=n(z,c.length,f,H,m,v,b,g,_,J,K,Q);if(y)throw i(z),new Error(`lerc-decode: error code is ${y}`);a=new Uint8Array(l.buffer),Jp(a,J,$),Jp(a,H,T);let A=null;if(S){Jp(a,K,L),Jp(a,Q,B),A=[];const N=new Float64Array(B.buffer);for(let D=0;D<L.length;D++)A.push(L[D]?N[D]:null)}return i(z),{data:$,maskData:T,noDataValues:A}}}function A4e(t,e,i,r,s){if(i<2)return t;const n=new r(e*i);if(s)for(let o=0,a=0;o<e;o++)for(let l=0,u=o;l<i;l++,u+=e)n[u]=t[a++];else for(let o=0,a=0;o<e;o++)for(let l=0,u=o;l<i;l++,u+=e)n[a++]=t[u];return n}function nne(t,e={}){const i=e.inputOffset??0,r=t instanceof Uint8Array?t.subarray(i):new Uint8Array(t,i),s=u5.getBlobInfo(r),{data:n,maskData:o,noDataValues:a}=u5.decode(r,s),{width:l,height:u,bandCount:c,depthCount:d,dataType:f,maskCount:m,statistics:g}=s,v=rne[f],b=new v.ctor(n.buffer),_=[],S=[],M=l*u,x=M*d;for(let z=0;z<c;z++){const H=b.subarray(z*x,(z+1)*x);if(e.returnInterleaved)_.push(H);else{const J=A4e(H,M,d,v.ctor,!0);_.push(J)}S.push(o.subarray(z*x,(z+1)*x))}const T=m===0?null:m===1?S[0]:new Uint8Array(M);if(m>1){T.set(S[0]);for(let z=1;z<S.length;z++){const H=S[z];for(let J=0;J<M;J++)T[J]=T[J]&H[J]}}const{noDataValue:I}=e,$=I!=null&&v.range[0]<=I&&v.range[1]>=I;if(m>0&&$)for(let z=0;z<c;z++){const H=_[z],J=S[z]||T;for(let K=0;K<M;K++)J[K]===0&&(H[K]=I)}const L=m===c&&c>1?S:null,{pixelType:B}=v;return{width:l,height:u,bandCount:c,pixelType:B,depthCount:d,statistics:g,pixels:_,mask:T,bandMasks:L,noDataValues:a}}function C4e(t,e,i,r=!0){if(e%4!=0||i%4!=0){const s=new ArrayBuffer(4*Math.ceil(i/4)),n=new Uint8Array(s),o=new Uint8Array(t,e,i);if(r)for(let a=0;a<n.length;a+=4)n[a]=o[a+3],n[a+1]=o[a+2],n[a+2]=o[a+1],n[a+3]=o[a];else n.set(o);return new Uint32Array(n.buffer)}if(r){const s=new Uint8Array(t,e,i),n=new Uint8Array(s.length);for(let o=0;o<n.length;o+=4)n[o]=s[o+3],n[o+1]=s[o+2],n[o+2]=s[o+1],n[o+3]=s[o];return new Uint32Array(n.buffer)}return new Uint32Array(t,e,i/4)}function HG(){const t=[];for(let e=0;e<=257;e++)t[e]=[e];return t}function WG(t,e){for(let i=0;i<e.length;i++)t.push(e[i])}const Ev=new Set;function YD(t,e,i,r=!0){const s=C4e(t,e,i,r);let n=9,o=HG(),a=32,l=o.length,u=[],c=1,d=s[0],f=0;const m=s.length,g=8*(4*m-i),v=[];for(;d!=null;){if(a>=n)a-=n,f=d>>>32-n,d<<=n;else{f=d>>>32-a,d=s[c++];const _=n-a;a=32-_,f=(f<<_)+(d>>>a),d<<=_}if(f===257)break;if(f===256){n=9,o=HG(),l=o.length,u=[];continue}const b=o[f];if(b==null){if(f>o.length)throw new Error("data integrity issue: code does not exist on code page");u.push(u[0]),o[l++]=u.slice(),WG(v,u)}else WG(v,b),u.push(b[0]),u.length>1&&(o[l++]=u.slice()),u=b.slice();if(Ev.has(l)&&n++,a===0&&(d=s[c++],a=32),c>m||c===m&&a<=g)break}return new Uint8Array(v)}Ev.add(511),Ev.add(1023),Ev.add(2047),Ev.add(4095),Ev.add(8191);const JG=(t,e)=>{const i=e.width*e.height,r=e.pixelType;return Math.floor(t.byteLength/(i*one(r)))},one=t=>{let e=1;switch(t){case Uint8Array:case Int8Array:e=1;break;case Uint16Array:case Int16Array:e=2;break;case Uint32Array:case Int32Array:case Float32Array:e=4;break;case Float64Array:e=8}return e},$4e=(t,e)=>{if(8*t.byteLength<e)return null;const i=new Uint8Array(t,0,Math.ceil(e/8)),r=new Uint8Array(e);let s=0,n=0,o=0,a=0;for(o=0;o<i.length-1;o++)for(n=i[o],a=7;a>=0;a--)r[s++]=n>>a&1;for(a=7;s<e-1;)n=i[i.length-1],r[s++]=n>>a&1,a--;return r};let O4e=class{static decode(e,i){const r=i.pixelType,s=[],n=i.width*i.height,o=JG(e,i),{bandIds:a,format:l}=i,u=a&&a.length||JG(e,i),c=e.byteLength-e.byteLength%(n*one(r)),d=new r(e,0,n*o);let f,m,g,v,b=null;if(l==="bip")for(f=0;f<u;f++){for(g=new r(n),v=a?a[f]:f,m=0;m<n;m++)g[m]=d[m*o+v];s.push(g)}else if(l==="bsq")for(f=0;f<u;f++)v=a?a[f]:f,s.push(d.subarray(v*n,(v+1)*n));return c<e.byteLength-1&&(b=$4e(e.slice(c),n)),{pixels:s,mask:b}}};function R4e(t,e){let i=0,r="",s=0,n=0;const o=t.length;for(;i<o;)n=t[i++],s=n>>4,s<8?s=1:s===15?(s=4,n=(7&n)<<18|(63&t[i++])<<12|(63&t[i++])<<6|63&t[i++]):s===14?(s=3,n=(15&n)<<12|(63&t[i++])<<6|63&t[i++]):(s=2,n=(31&n)<<6|63&t[i++]),(n!==0||e)&&(r+=String.fromCharCode(n));return r}const KD=(()=>{const t=[];return t[254]="NEWSUBFILETYPE",t[255]="SUBFILETYPE",t[256]="IMAGEWIDTH",t[257]="IMAGELENGTH",t[258]="BITSPERSAMPLE",t[259]="COMPRESSION",t[262]="PHOTOMETRICINTERPRETATION",t[263]="THRESHHOLDING",t[264]="CELLWIDTH",t[265]="CELLLENGTH",t[266]="FILLORDER",t[269]="DOCUMENTNAME",t[270]="IMAGEDESCRIPTION",t[271]="MAKE",t[272]="MODEL",t[273]="STRIPOFFSETS",t[274]="ORIENTATION",t[277]="SAMPLESPERPIXEL",t[278]="ROWSPERSTRIP",t[279]="STRIPBYTECOUNTS",t[280]="MINSAMPLEVALUE",t[281]="MAXSAMPLEVALUE",t[282]="XRESOLUTION",t[283]="YRESOLUTION",t[284]="PLANARCONFIGURATION",t[285]="PAGENAME",t[286]="XPOSITION",t[287]="YPOSITION",t[288]="FREEOFFSETS",t[289]="FREEBYTECOUNTS",t[290]="GRAYRESPONSEUNIT",t[291]="GRAYRESPONSECURVE",t[292]="T4OPTIONS",t[293]="T6OPTIONS",t[296]="RESOLUTIONUNIT",t[297]="PAGENUMBER",t[300]="COLORRESPONSEUNIT",t[301]="TRANSFERFUNCTION",t[305]="SOFTWARE",t[306]="DATETIME",t[315]="ARTIST",t[316]="HOSTCOMPUTER",t[317]="PREDICTOR",t[318]="WHITEPOINT",t[319]="PRIMARYCHROMATICITIES",t[320]="COLORMAP",t[321]="HALFTONEHINTS",t[322]="TILEWIDTH",t[323]="TILELENGTH",t[324]="TILEOFFSETS",t[325]="TILEBYTECOUNTS",t[326]="BADFAXLINES",t[327]="CLEANFAXDATA",t[328]="CONSECUTIVEBADFAXLINES",t[330]="SUBIFD",t[332]="INKSET",t[333]="INKNAMES",t[334]="NUMBEROFINKS",t[336]="DOTRANGE",t[337]="TARGETPRINTER",t[338]="EXTRASAMPLES",t[339]="SAMPLEFORMAT",t[340]="SMINSAMPLEVALUE",t[341]="SMAXSAMPLEVALUE",t[342]="TRANSFERRANGE",t[347]="JPEGTABLES",t[512]="JPEGPROC",t[513]="JPEGIFOFFSET",t[514]="JPEGIFBYTECOUNT",t[515]="JPEGRESTARTINTERVAL",t[517]="JPEGLOSSLESSPREDICTORS",t[518]="JPEGPOINTTRANSFORM",t[519]="JPEGQTABLES",t[520]="JPEGDCTABLES",t[521]="JPEGACTABLES",t[529]="YCBCRCOEFFICIENTS",t[530]="YCBCRSUBSAMPLING",t[531]="YCBCRPOSITIONING",t[532]="REFERENCEBLACKWHITE",t[700]="XMP",t[33550]="GEOPIXELSCALE",t[33922]="GEOTIEPOINTS",t[33432]="COPYRIGHT",t[42112]="GDAL_METADATA",t[42113]="GDAL_NODATA",t[50844]="RPCCOEFFICIENT",t[34264]="GEOTRANSMATRIX",t[34735]="GEOKEYDIRECTORY",t[34736]="GEODOUBLEPARAMS",t[34737]="GEOASCIIPARAMS",t[34665]="EXIFIFD",t[34853]="GPSIFD",t[40965]="INTEROPERABILITYIFD",t})(),k4e=(()=>{const t=KD.slice();return t[36864]="ExifVersion",t[40960]="FlashpixVersion",t[40961]="ColorSpace",t[42240]="Gamma",t[37121]="ComponentsConfiguration",t[37122]="CompressedBitsPerPixel",t[40962]="PixelXDimension",t[40963]="PixelYDimension",t[37500]="MakerNote",t[37510]="UserComment",t[40964]="RelatedSoundFile",t[36867]="DateTimeOriginal",t[36868]="DateTimeDigitized",t[36880]="OffsetTime",t[36881]="OffsetTimeOriginal",t[36882]="OffsetTimeDigitized",t[37520]="SubSecTime",t[37521]="SubSecTimeOriginal",t[37522]="SubSecTimeDigitized",t[37888]="Temperature",t[37889]="Humidity",t[37890]="Pressure",t[37891]="WaterDepth",t[37892]="Acceleration",t[37893]="CameraElevationAngle",t[42016]="ImageUniqueID",t[42032]="CameraOwnerName",t[42033]="BodySerialNumber",t[42034]="LensSpecification",t[42035]="LensMake",t[42036]="LensModel",t[42037]="LensSerialNumber",t[33434]="ExposureTime",t[33437]="FNumber",t[34850]="ExposureProgram",t[34852]="SpectralSensitivity",t[34855]="PhotographicSensitivity",t[34856]="OECF",t[34864]="SensitivityType",t[34865]="StandardOutputSensitivity",t[34866]="RecommendedExposureIndex",t[34867]="ISOSpeed",t[34868]="ISOSpeedLatitudeyyy",t[34869]="ISOSpeedLatitudezzz",t[37377]="ShutterSpeedValue",t[37378]="ApertureValue",t[37379]="BrightnessValue",t[37380]="ExposureBiasValue",t[37381]="MaxApertureValue",t[37382]="SubjectDistance",t[37383]="MeteringMode",t[37384]="LightSource",t[37385]="Flash",t[37386]="FocalLength",t[37396]="SubjectArea",t[41483]="FlashEnergy",t[41484]="SpatialFrequencyResponse",t[41486]="FocalPlaneXResolution",t[41487]="FocalPlaneYResolution",t[41488]="FocalPlaneResolutionUnit",t[41492]="SubjectLocation",t[41493]="ExposureIndex",t[41495]="SensingMethod",t[41728]="FileSource",t[41729]="SceneType",t[41730]="CFAPattern",t[41985]="CustomRendered",t[41986]="ExposureMode",t[41987]="WhiteBalance",t[41988]="DigitalZoomRatio",t[41989]="FocalLengthIn35mmFilm",t[41990]="SceneCaptureType",t[41991]="GainControl",t[41992]="Contrast",t[41993]="Saturation",t[41994]="Sharpness",t[41995]="DeviceSettingDescription",t[41996]="SubjectDistanceRange",t})(),L4e=["GPSVersionID","GPSLatitudeRef","GPSLatitude","GPSLongitudeRef","GPSLongitude","GPSAltitudeRef","GPSAltitude","GPSTimeStamp","GPSSatellites","GPSStatus","GPSMeasureMode","GPSDOP","GPSSpeedRef","GPSSpeed","GPSTrackRef","GPSTrack","GPSImgDirectionRef","GPSImgDirection","GPSMapDatum","GPSDestLatitudeRef","GPSDestLatitude","GPSDestLongitudeRef","GPSDestLongitude","GPSDestBearingRef","GPSDestBearing","GPSDestDistanceRef","GPSDestDistance","GPSProcessingMethod","GPSAreaInformation","GPSDateStamp","GPSDifferential","GPSHPositioningError"],P4e=(()=>{const t=[];return t[1024]="GTModelTypeGeoKey",t[1025]="GTRasterTypeGeoKey",t[1026]="GTCitationGeoKey",t[2048]="GeographicTypeGeoKey",t[2049]="GeogCitationGeoKey",t[2050]="GeogGeodeticDatumGeoKey",t[2051]="GeogPrimeMeridianGeoKey",t[2052]="GeogLinearUnitsGeoKey",t[2053]="GeogLinearUnitSizeGeoKey",t[2054]="GeogAngularUnitsGeoKey",t[2055]="GeogAngularUnitSizeGeoKey",t[2056]="GeogEllipsoidGeoKey",t[2057]="GeogSemiMajorAxisGeoKey",t[2058]="GeogSemiMinorAxisGeoKey",t[2059]="GeogInvFlatteningGeoKey",t[2061]="GeogPrimeMeridianLongGeoKey",t[2060]="GeogAzimuthUnitsGeoKey",t[3072]="ProjectedCSTypeGeoKey",t[3073]="PCSCitationGeoKey",t[3074]="ProjectionGeoKey",t[3075]="ProjCoordTransGeoKey",t[3076]="ProjLinearUnitsGeoKey",t[3077]="ProjLinearUnitSizeGeoKey",t[3078]="ProjStdParallel1GeoKey",t[3079]="ProjStdParallel2GeoKey",t[3080]="ProjNatOriginLongGeoKey",t[3081]="ProjNatOriginLatGeoKey",t[3082]="ProjFalseEastingGeoKey",t[3083]="ProjFalseNorthingGeoKey",t[3084]="ProjFalseOriginLongGeoKey",t[3085]="ProjFalseOriginLatGeoKey",t[3086]="ProjFalseOriginEastingGeoKey",t[3087]="ProjFalseOriginNorthingGeoKey",t[3088]="ProjCenterLongGeoKey",t[3090]="ProjCenterEastingGeoKey",t[3091]="ProjCenterNorthingGeoKey",t[3092]="ProjScaleAtNatOriginGeoKey",t[3093]="ProjScaleAtCenterGeoKey",t[3094]="ProjAzimuthAngleGeoKey",t[3095]="ProjStraightVertPoleLongGeoKey",t[4096]="VerticalCSTypeGeoKey",t[4097]="VerticalCitationGeoKey",t[4098]="VerticalDatumGeoKey",t[4099]="VerticalUnitsGeoKey",t})(),N4e=(t,e)=>{let i=(e||KD)[t];return i===void 0&&(i="unknown"+String(t)),i},E6=new Map;E6.set("EXIFIFD",k4e),E6.set("GPSIFD",L4e);const Ib={TIFF_TAGS:KD,ifdTags:E6,GEO_KEYS:P4e,getTagName:N4e},QD=(()=>{const t=new ArrayBuffer(4),e=new Uint8Array(t);return new Uint32Array(t)[0]=1,e[0]===1})(),ZG=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],nw=4294967296,F4e=new Set([1,5,6,7,8,34712,34887]);function XD(t,e){let i="unknown";return t===3?i=e===64?"f64":"f32":t===1?e===1?i="u1":e===2?i="u2":e===4?i="u4":e<=8?i="u8":e<=16?i="u16":e<=32&&(i="u32"):t===2&&(e<=8?i="s8":e<=16?i="s16":e<=32&&(i="s32")),i}function TC(t){let e=null;switch(t?t.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":e=Uint8Array;break;case"u16":e=Uint16Array;break;case"u32":e=Uint32Array;break;case"s8":e=Int8Array;break;case"s16":e=Int16Array;break;case"s32":e=Int32Array;break;case"f64":e=Float64Array;break;default:e=Float32Array}return e}function D4e(t,e){return{x:e[0]*t.x+e[1]*t.y+e[2],y:e[3]*t.x+e[4]*t.y+e[5]}}function ane(t,e){return t.get(e)?.values}function g0(t,e){return t.get(e)?.values}function YG(t,e){return t.get(e)?.values?.[0]}function bi(t,e){return t.get(e)?.values?.[0]}function iR(t,e,i,r=0,s=Ib.TIFF_TAGS,n=4){const o=n===8,a=o?i7(new DataView(t,i,8),0,e):new DataView(t,i,2).getUint16(0,e),l=4+2*n,u=o?8:2,c=u+a*l;if(i+c>t.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:c};const d=i+c+4<=t.byteLength?TM(new DataView(t,i+c,n===8?8:4),0,e,n===8):null,f=i+u,m=new Map;let g,v,b,_,S,M=0,x=0;for(let T=0;T<a;T++){v=new DataView(t,f+l*T,l),b=v.getUint16(0,e),S=v.getUint16(2,e),_=Ib.getTagName(b,s);const I=[];n===2?(M=v.getUint16(4,e),x=v.getUint16(6,e)):n===4?(M=v.getUint32(4,e),x=v.getUint32(8,e)):n===8&&(M=TM(v,4,e,!0),x=TM(v,12,e,!0),I.push(v.getUint32(12,e)),I.push(v.getUint32(16,e))),g={id:b,type:S,valueCount:M,valueOffset:x,valueOffsets:I,values:null},G4e(t,e,g,r,!1,n),m.set(_,g)}return{success:!0,ifd:m,nextIFD:d,requiredBufferSize:c}}const j4e=(t,e)=>nne(t,{inputOffset:e}).pixels[0];function T6(t,e){if(e!==1&&e!==2&&e!==4)return t;const i=new Uint8Array(t),r=8/e,s=new Uint8Array(t.byteLength*r);let n=0;const o=2**e-1;for(let a=0;a<i.length;a++){const l=i[a];for(let u=0;u<r;u++)s[n++]=l<<e*u>>>8-e&o}return s.buffer}function I6(t,e,i){const r=new l5;r.parse(t),r.colorTransform=i===6?-1:0;const s=r.getData(r.width,r.height,e!==1);return new Uint8Array(s.buffer)}function M6(t){const e=new V0(t).getBytes(),i=new ArrayBuffer(e.length),r=new Uint8Array(i);return r.set(e),r}async function A6(t,e,i,r,s){const n=QD===e,o=bi(i,"BITSPERSAMPLE"),a=bi(i,"SAMPLESPERPIXEL"),l=bi(i,"PHOTOMETRICINTERPRETATION"),u=XD(bi(i,"SAMPLEFORMAT")??1,o),c=bi(i,"COMPRESSION")??1,d=TC(u);let f,m,g;if(c===34887)return await sne(),j4e(t,r);if(c===1)f=t.slice(r,r+s),m=new Uint8Array(f);else if(c===8||c===32946)m=new Uint8Array(t,r,s),m=M6(m),f=m.buffer;else if(c===6)m=new Uint8Array(t,r,s),m=I6(m,a,l),f=m.buffer;else if(c===7){const v=i.get("JPEGTABLES").values,b=v.length-2;m=new Uint8Array(b+s-2);for(let S=0;S<b;S++)m[S]=v[S];const _=new Uint8Array(t,r+2,s-2);for(let S=0;S<_.length;S++)m[b+S]=_[S];m=I6(m,a,l),f=m.buffer}else{if(c!==5)throw new Error("tiff-decode: unsupport compression "+c);m=YD(t,r,s,e),f=m.buffer}if(f=T6(f,o),u==="u8"||u==="s8"||n)g=new d(f);else{f=new ArrayBuffer(m.length);const v=new Uint8Array(f);switch(u){case"u16":case"s16":for(let b=0;b<m.length;b+=2)v[b]=m[b+1],v[b+1]=m[b];break;case"u32":case"s32":case"f32":for(let b=0;b<m.length;b+=4)v[b]=m[b+3],v[b+1]=m[b+2],v[b+2]=m[b+1],v[b+3]=m[b]}g=new d(f)}return g}async function U4e(t,e,i){const r=g0(i,"TILEOFFSETS");if(r===void 0)return null;const s=g0(i,"TILEBYTECOUNTS"),{width:n,height:o,pixelType:a,tileWidth:l,tileHeight:u}=e7([i]),c=t7(i,e),d=bi(i,"SAMPLESPERPIXEL")||e.planes,f=n*o,m=bi(i,"BITSPERSAMPLE"),g=(bi(i,"COMPRESSION")??1)===34887,v=TC(a),b=[];for(let y=0;y<d;y++)b.push(new v(f));let _,S,M,x,T,I,$,L,B,z,H,J,K;const Q=Math.ceil(n/l);if(m%8==0){if(g&&c&&d>1){const y=Math.round(r.length/d);for(_=0;_<y;_++){I=Math.floor(_/Q)*u,$=_%Q*l,L=I*n+$;for(let A=0;A<d;A++){const N=_*d+A;if(s[N]!==0)for(M=await A6(t,e.littleEndian,i,r[N],s[N]),z=0,B=L,J=Math.min(l,n-$),H=Math.min(u,o-I),K=b[A],x=0;x<H;x++)for(B=L+x*n,z=x*l,T=0;T<J;T++,B++,z++)K[B]=M[z]}}}else for(_=0;_<r.length;_++)if(s[_]!==0)for(I=Math.floor(_/Q)*u,$=_%Q*l,L=I*n+$,M=await A6(t,e.littleEndian,i,r[_],s[_]),z=0,B=L,J=Math.min(l,n-$),H=Math.min(u,o-I),S=0;S<d;S++)if(K=b[S],c||g)for(x=0;x<H;x++)for(B=L+x*n,z=l*u*S+x*l,T=0;T<J;T++,B++,z++)K[B]=M[z];else for(x=0;x<H;x++)for(B=L+x*n,z=x*l*d+S,T=0;T<J;T++,B++,z+=d)K[B]=M[z]}return{width:n,height:o,pixelType:a,pixels:b}}const V4e=(t,e,i)=>{const r=QD===e.littleEndian,s=g0(i,"STRIPOFFSETS");if(s===void 0)return null;const{width:n,height:o,pixelType:a}=e7([i]),l=bi(i,"SAMPLESPERPIXEL")||e.planes,u=bi(i,"PHOTOMETRICINTERPRETATION"),c=n*o,d=bi(i,"BITSPERSAMPLE"),f=TC(a),m=new f(c*l),g=g0(i,"STRIPBYTECOUNTS"),v=bi(i,"ROWSPERSTRIP"),b=bi(i,"COMPRESSION")??1;let _,S,M,x,T,I,$,L,B,z=v;if(d%8==0)for(_=0;_<s.length;_++){if(T=_*(v*n)*l,z=(_+1)*v>o?o-_*v:v,a==="u8"||a==="s8"||r)b===8||b===32946?($=new Uint8Array(t,s[_],g[_]),$=M6($),I=$.buffer):b===6?($=new Uint8Array(t,s[_],g[_]),$=I6($,l,u),I=$.buffer):b===5?($=YD(t,s[_],g[_],e.littleEndian),I=$.buffer):(g[_]!==z*n*l*d/8&&console.log("strip byte counts is different than expected"),I=t.slice(s[_],s[_]+g[_])),I=T6(I,d),x=new f(I);else{switch(b===6||b===8||b===32946?($=new Uint8Array(t,s[_],g[_]),L=M6($),I=L.buffer):(g[_]!==z*n*l*d/8&&console.log("strip byte counts is different than expected"),I=new ArrayBuffer(g[_]),$=new Uint8Array(t,s[_],g[_]),L=new Uint8Array(I)),a){case"u16":case"s16":for(M=0;M<$.length;M+=2)L[M]=$[M+1],L[M+1]=$[M];break;case"u32":case"s32":case"f32":for(M=0;M<$.length;M+=4)L[M]=$[M+3],L[M+1]=$[M+2],L[M+2]=$[M+1],L[M+3]=$[M]}I=T6(I,d),x=new f(I)}m.set(x,T)}const H=[];if(l===1)H.push(m);else for(_=0;_<l;_++){for(B=new f(c),S=0;S<c;S++)B[S]=m[S*l+_];H.push(B)}return{width:n,height:o,pixelType:a,pixels:H}},B4e=(t,e,i)=>{if(!(t&&t.length>0&&e&&i))return null;let r,s,n;const o=t[0].length,a=t.length,l=new Uint8Array(o);for(let u=0;u<a;u++)if(r=t[u],s=e[u],n=i[u],u===0)for(let c=0;c<o;c++)l[c]=r[c]<s||r[c]>n?0:1;else for(let c=0;c<o;c++)l[c]&&(l[c]=r[c]<s||r[c]>n?0:1);return l},z4e=t=>{if(!t)return null;const e=t.match(/<Item(.*?)Item>/gi);if(!e||e.length===0)return null;const i=new Map;let r,s,n,o,a;for(let _=0;_<e.length;_++)r=e[_],s=r.slice(6,r.indexOf(">")),o=r.indexOf("sample="),o>-1&&(a=r.slice(o+8,r.indexOf('"',o+8))),o=r.indexOf("name="),o>-1&&(s=r.slice(o+6,r.indexOf('"',o+6))),s&&(n=r.slice(r.indexOf(">")+1,r.indexOf("</Item>")).trim(),a!=null?i.has(s)?i.get(s)[a]=n:i.set(s,[n]):i.set(s,n)),a=null;const l=i.get("STATISTICS_MINIMUM"),u=i.get("STATISTICS_MAXIMUM"),c=i.get("STATISTICS_MEAN"),d=i.get("STATISTICS_STDDEV");let f=null;if(l&&u){f=[];for(let _=0;_<l.length;_++)f.push({min:parseFloat(l[_]),max:parseFloat(u[_]),avg:c&&parseFloat(c[_]),stddev:d&&parseFloat(d[_])})}const m=i.get("BandName"),g=i.get("WavelengthMin"),v=i.get("WavelengthMax");let b=null;if(m){b=[];for(let _=0;_<m.length;_++)b.push({BandName:m[_],WavelengthMin:g&&parseFloat(g[_]),WavelengthMax:v&&parseFloat(v[_])})}return{statistics:f,bandProperties:b,dataType:i.get("DataType"),rawMetadata:i}};function G4e(t,e,i,r=0,s=!1,n=4){if(i.values)return!0;const o=i.type,a=i.valueCount;let l=i.valueOffset,u=[];const c=ZG[o],d=8*c,f=a*c,m=a*ZG[o]*8;let g,v;const b=n===8?64:32,_=i.valueOffsets;if(m>b&&f>(s?t.byteLength:t?t.byteLength-l+r:0))return i.offlineOffsetSize=[l,f],i.values=null,!1;if(m<=b){if(!e)if(b<=32)l>>>=32-m;else{const S=_?.length?_[0]:l>>>0,M=_?.length?_[1]:Math.round((l-S)/nw);m<=32?(l=S>>>32-m,_[0]=l):(l=S*2**(32-m)+(M>>>32-m),_[0]=S,_[1]=M>>>32-m)}if(a===1&&d===b)u=[l];else if(b===64){const S=_?.length?_[0]:l>>>0,M=_?.length?_[1]:Math.round((l-S)/nw);let x=S,T=32;for(v=1;v<=a;v++){const I=32-d*v%32;if(T<d){const $=x<<I>>>32-T,L=M<<32-T>>>32-T;x=M,u.push($+L*2**(d-T)),T-=32-(d-T)}else u.push(x<<I>>>32-d),T-=d;T===0&&(T=32,x=M)}}else for(v=1;v<=a;v++){const S=32-d*v;u.push(l<<S>>>32-d)}}else{l-=r,s&&(l=0);for(let S=l;S<l+f;S+=c){switch(o){case 1:case 2:case 7:g=new DataView(t,S,1).getUint8(0);break;case 3:g=new DataView(t,S,2).getUint16(0,e);break;case 4:case 13:g=new DataView(t,S,4).getUint32(0,e);break;case 5:g=new DataView(t,S,4).getUint32(0,e)/new DataView(t,S+4,4).getUint32(0,e);break;case 6:g=new DataView(t,S,1).getInt8(0);break;case 8:g=new DataView(t,S,2).getInt16(0,e);break;case 9:g=new DataView(t,S,4).getInt32(0,e);break;case 10:g=new DataView(t,S,4).getInt32(0,e)/new DataView(t,S+4,4).getInt32(0,e);break;case 11:g=new DataView(t,S,4).getFloat32(0,e);break;case 12:g=new DataView(t,S,8).getFloat64(0,e);break;case 16:case 18:g=i7(new DataView(t,S,8),0,e);break;case 17:g=H4e(new DataView(t,S,8),0,e);break;default:g=null}u.push(g)}}if(o===2){let S="";const M=u;for(u=[],v=0;v<M.length;v++)M[v]===0&&S!==""?(u.push(S),S=""):S+=String.fromCharCode(M[v]);S===""&&u.length!==0||u.push(S)}return i.values=u,!0}function e7(t){const e=t[0],i=bi(e,"TILEWIDTH"),r=bi(e,"TILELENGTH"),s=bi(e,"IMAGEWIDTH"),n=bi(e,"IMAGELENGTH"),o=bi(e,"BITSPERSAMPLE"),a=bi(e,"SAMPLESPERPIXEL"),l=bi(e,"SAMPLEFORMAT")??1,u=XD(l,o),c=t7(e),d=ane(e,"GDAL_NODATA");let f=null;d?.length&&(f=d.map(ne=>parseFloat(ne)),f.some(ne=>isNaN(ne))&&(f=null));const m=bi(e,"COMPRESSION")??1;let g;switch(m){case 1:g="NONE";break;case 2:case 3:case 4:case 32771:g="CCITT";break;case 5:g="LZW";break;case 6:case 7:g="JPEG";break;case 32773:g="PACKBITS";break;case 8:case 32946:g="DEFLATE";break;case 34712:g="JPEG2000";break;case 34887:g="LERC";break;default:g=String(m)}let v=!0,b="";F4e.has(m)||(v=!1,b+="unsupported tag compression "+m),l>3&&(v=!1,b+="unsupported tag sampleFormat "+l),o!==1&&o!==2&&o!==4&&o%8!=0&&(v=!1,b+="unsupported tag bitsPerSample "+o);const _=YG(e,"GEOASCIIPARAMS");let S;if(_){const ne=_.split("|").find(he=>he.includes("ESRI PE String = ")),q=ne?ne.replace("ESRI PE String = ",""):"";S=q.startsWith("COMPD_CS")||q.startsWith("PROJCS")||q.startsWith("GEOGCS")?{wkid:null,wkt:q}:null}const M=g0(e,"GEOTIEPOINTS"),x=g0(e,"GEOPIXELSCALE"),T=g0(e,"GEOTRANSMATRIX"),I=e.has("GEOKEYDIRECTORY")?e.get("GEOKEYDIRECTORY").data:null;let $,L,B=!1,z=!1;if(I){B=bi(I,"GTRasterTypeGeoKey")===2;const ne=bi(I,"GTModelTypeGeoKey");if(ne===2){const q=bi(I,"GeographicTypeGeoKey");q>=1024&&q<=32766&&(S={wkid:q}),S||q!==32767||(z=!0,S={wkid:4326})}else if(ne===1){const q=bi(I,"ProjectedCSTypeGeoKey");q>=1024&&q<=32766&&(S={wkid:q})}}if(x&&M&&M.length>=6?($=[x[0],0,M[3]-M[0]*x[0],0,-Math.abs(x[1]),M[4]-M[1]*x[1]],B&&($[2]-=.5*$[0]+.5*$[1],$[5]-=.5*$[3]+.5*$[4])):T&&T.length===16&&($=B?[T[0],T[1],T[3]-.5*T[0],T[4],T[5],T[7]-.5*T[5]]:[T[0],T[1],T[3],T[4],T[5],T[7]]),$){const ne=[{x:0,y:n},{x:0,y:0},{x:s,y:n},{x:s,y:0}];let q,he=Number.POSITIVE_INFINITY,te=Number.POSITIVE_INFINITY,me=Number.NEGATIVE_INFINITY,ve=Number.NEGATIVE_INFINITY;for(let _e=0;_e<ne.length;_e++)q=D4e(ne[_e],$),he=q.x>he?he:q.x,me=q.x<me?me:q.x,te=q.y>te?te:q.y,ve=q.y<ve?ve:q.y;L={xmin:he,xmax:me,ymin:te,ymax:ve,spatialReference:S}}else L={xmin:-.5,ymin:.5-n,xmax:s-.5,ymax:.5,spatialReference:S};z&&(L.xmax-L.xmin>400||Math.max(Math.abs(L.xmin),Math.abs(L.xmax))>361)&&(S=null,L.spatialReference=null);const H=lne(t);let J,K,Q,y,A;if(H.length>0){Q=Math.round(Math.log(s/bi(H[0],"IMAGEWIDTH"))/Math.LN2);const ne=H[H.length-1];y=Math.round(Math.log(s/bi(ne,"IMAGEWIDTH"))/Math.LN2),J=bi(ne,"TILEWIDTH"),K=bi(ne,"TILELENGTH")}J=y!=null&&y>0?J||i:null,K=y!=null&&y>0?K||r:null,i&&(A=[{maxCol:Math.ceil(s/i)-1,maxRow:Math.ceil(n/r)-1,minRow:0,minCol:0}],H.forEach(ne=>{A.push({maxCol:Math.ceil(bi(ne,"IMAGEWIDTH")/bi(ne,"TILEWIDTH"))-1,maxRow:Math.ceil(bi(ne,"IMAGELENGTH")/bi(ne,"TILELENGTH"))-1,minRow:0,minCol:0})}));const N=YG(t[0],"GDAL_METADATA"),D=z4e(N);return b+=" "+cne({width:s,height:n,tileWidth:i,tileHeight:r,planes:a,ifds:t}),{width:s,height:n,tileWidth:i,tileHeight:r,planes:a,isBSQ:c,pixelType:u,compression:g,noData:f,hasMaskBand:une(t).length===H.length+1,isSupported:v,message:b,extent:L,isPseudoGeographic:z,affine:x?null:$,firstPyramidLevel:Q,maximumPyramidLevel:y,pyramidBlockWidth:J,pyramidBlockHeight:K,tileBoundary:A,metadata:D}}function t7(t,e){const i=ane(t,"PLANARCONFIGURATION");return i?i[0]===2:!!e&&e.isBSQ}function lne(t){return t.filter(e=>bi(e,"NEWSUBFILETYPE")===1)}function une(t){return t.filter(e=>{const i=(4&(bi(e,"NEWSUBFILETYPE")??0))==4,r=bi(e,"PHOTOMETRICINTERPRETATION")===4;return i&&r})}function q4e(t){const{littleEndian:e,isBigTiff:i,firstIFDPos:r}=W4e(t);let s=r;const n=[];do{const o=J4e(t,e,s,0,Ib.TIFF_TAGS,i?8:4);if(!o.success)break;n.push(o.ifd),s=o.nextIFD}while(s>0);return{...e7(n),littleEndian:e,isBigTiff:i,ifds:n,pyramidIFDs:lne(n),maskIFDs:une(n)}}function i7(t,e,i){const r=t.getUint32(e,i),s=t.getUint32(e+4,i);return i?s*nw+r:r*nw+s}function H4e(t,e,i){let r=i?t.getInt32(e,i):t.getUint32(e,i),s=i?t.getUint32(e+4,i):t.getInt32(e+4,i);const n=(i?r:s)>=0?1:-1;return i?r*=n:s*=n,n*(i?s*nw+r:r*nw+s)}function TM(t,e,i,r){return r?i7(t,e,i):t.getUint32(e,i)}function W4e(t){const e=new DataView(t,0,16),i=e.getUint16(0,!1);let r=null;if(i===18761)r=!0;else{if(i!==19789)throw new Error("unexpected endianess byte");r=!1}const s=e.getUint16(2,r);if(s!==42&&s!==43)throw new Error("unexpected tiff identifier");let n=4;const o=s===43;if(o){const a=e.getUint16(n,r);if(n+=2,a!==8)throw new Error("unsupported bigtiff version");if(e.getUint16(n,r)!==0)throw new Error("unsupported bigtiff version");n+=2}return{littleEndian:r,isBigTiff:o,firstIFDPos:TM(e,n,r,o)}}function J4e(t,e,i,r=0,s=Ib.TIFF_TAGS,n=4){const o=iR(t,e,i,r,s,n);let a;const l=o.ifd;if(l){if(Ib.ifdTags.forEach((u,c)=>{l.has(c)&&(a=l.get(c),a.data=iR(t,e,a.valueOffset-r,r,u).ifd)}),l.has("GEOKEYDIRECTORY")){a=l.get("GEOKEYDIRECTORY");const u=a.values;if(u&&u.length>4){const c=u[0]+"."+u[1]+"."+u[2];a.data=iR(t,e,a.valueOffset+6-r,r,Ib.GEO_KEYS,2).ifd,a.data&&a.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[c]})}}if(l.has("XMP")){a=l.get("XMP");const u=a.values;typeof u[0]=="number"&&a.type===7&&(a.values=[R4e(new Uint8Array(u))])}}return o}function cne(t){const{width:e,height:i,tileHeight:r,tileWidth:s}=t,n=t.planes,o=s?s*r:e*i,a=bi(t.ifds[0],"BITSPERSAMPLE");let l="";return o*n>2**30/(a>8?a/8:1)&&(l=s?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported"),l}async function Z4e(t,e){const{headerInfo:i,ifd:r,offsets:s,sizes:n}=e,o=[];for(let B=0;B<s.length;B++){const z=await A6(t,i.littleEndian,r,s[B],n[B]||t.byteLength);o.push(z)}const a=t7(r,i),l=bi(r,"BITSPERSAMPLE"),u=XD(bi(r,"SAMPLEFORMAT")??1,l),c=bi(r,"SAMPLESPERPIXEL")||i.planes,d=TC(u),f=bi(r,"TILEWIDTH"),m=bi(r,"TILELENGTH"),g=bi(r,"COMPRESSION")??1,v=f*m;let b;const _=[];let S=o[0];const M=g===34887;for(let B=0;B<c;B++){if(b=new d(v),a&&M){if(S=o[B],S.length)for(let z=0;z<v;z++)b[z]=S[B][z+B]}else if(S.length)if(a||M&&!a)b=S.slice(v*B,v*(B+1));else for(let z=0;z<v;z++)b[z]=S[z*c+B];_.push(b)}const x=i.noData?i.noData[0]:e.noDataValue,T=i.metadata?i.metadata.statistics:null,I=T?T.map(B=>B.min):null,$=T?T.map(B=>B.max):null,L={pixelType:u,width:f,height:m,pixels:_,noDataValue:x};return x!=null?HD(L,x):I&&$&&e.applyMinMaxConstraint&&(L.mask=B4e(_,I,$)),L}async function Y4e(t,e={}){const i=e.pyramidLevel||0,r=e.headerInfo||q4e(t),{ifds:s,noData:n}=r;if(s.length===0)throw new Error("no valid image file directory");const o=cne(r);if(o)throw o;let a=null;const l=i===-1?s[s.length-1]:s[i],u=n??e.noDataValue;return a=r.tileWidth?await U4e(t,r,l):await V4e(t,r,l),a&&(u!=null&&HD(a,u),a)}var K4e=function(t){var e,i,r,s,n,o;function a(l){var u,c,d,f,m,g,v,b,_,S,M,x,T;for(this.data=l,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(u=this.readUInt32(),b=function(){var I,$;for($=[],I=0;I<4;++I)$.push(String.fromCharCode(this.data[this.pos++]));return $}.call(this).join(""),b){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(u);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),d=this.readUInt16()||100,m.delay=1e3*f/d,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,u-=4),l=m?.data||this.imgData,M=0;0<=u?M<u:M>u;0<=u?++M:--M)l.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(this.transparency.indexed=this.read(u),(_=255-this.transparency.indexed.length)>0)for(x=0;0<=_?x<_:x>_;0<=_?++x:--x)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(u)[0];break;case 2:this.transparency.rgb=this.read(u)}break;case"tEXt":g=(S=this.read(u)).indexOf(0),v=String.fromCharCode.apply(String,S.slice(0,g)),this.text[v]=String.fromCharCode.apply(String,S.slice(g+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(T=this.colorType)===4||T===6,c=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*c,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=u}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}return a.load=function(l,u,c){var d;return typeof u=="function"&&(c=u),(d=new XMLHttpRequest).open("GET",l,!0),d.responseType="arraybuffer",d.onload=function(){var f;return f=new a(new Uint8Array(d.response||d.mozResponseArrayBuffer)),typeof u?.getContext=="function"&&f.render(u),typeof c=="function"?c(f):void 0},d.send(null)},i=1,r=2,e=0,a.prototype.read=function(l){var u,c;for(c=[],u=0;0<=l?u<l:u>l;0<=l?++u:--u)c.push(this.data[this.pos++]);return c},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(l){var u,c,d,f,m,g,v,b,_,S,M,x,T,I,$,L,B,z,H,J,K,Q,y;if(l==null&&(l=this.imgData),l.length===0)return new Uint8Array(0);for(l=(l=new V0(l)).getBytes(),L=(x=this.pixelBitlength/8)*this.width,T=new Uint8Array(L*this.height),g=l.length,$=0,I=0,c=0;I<g;){switch(l[I++]){case 0:for(f=H=0;H<L;f=H+=1)T[c++]=l[I++];break;case 1:for(f=J=0;J<L;f=J+=1)u=l[I++],m=f<x?0:T[c-x],T[c++]=(u+m)%256;break;case 2:for(f=K=0;K<L;f=K+=1)u=l[I++],d=(f-f%x)/x,B=$&&T[($-1)*L+d*x+f%x],T[c++]=(B+u)%256;break;case 3:for(f=Q=0;Q<L;f=Q+=1)u=l[I++],d=(f-f%x)/x,m=f<x?0:T[c-x],B=$&&T[($-1)*L+d*x+f%x],T[c++]=(u+Math.floor((m+B)/2))%256;break;case 4:for(f=y=0;y<L;f=y+=1)u=l[I++],d=(f-f%x)/x,m=f<x?0:T[c-x],$===0?B=z=0:(B=T[($-1)*L+d*x+f%x],z=d&&T[($-1)*L+(d-1)*x+f%x]),v=m+B-z,b=Math.abs(v-m),S=Math.abs(v-B),M=Math.abs(v-z),_=b<=S&&b<=M?m:S<=M?B:z,T[c++]=(u+_)%256;break;default:throw new Error("Invalid filter algorithm: "+l[I-1])}$++}return T},a.prototype.decodePalette=function(){var l,u,c,d,f,m,g,v,b;for(c=this.palette,m=this.transparency.indexed||[],f=new Uint8Array((m.length||0)+c.length),d=0,c.length,l=0,u=g=0,v=c.length;g<v;u=g+=3)f[d++]=c[u],f[d++]=c[u+1],f[d++]=c[u+2],f[d++]=(b=m[l++])!=null?b:255;return f},a.prototype.copyToImageData=function(l,u){var c,d,f,m,g,v,b,_,S,M,x;if(d=this.colors,S=null,c=this.hasAlphaChannel,this.palette.length&&(S=(x=this._decodedPalette)!=null?x:this._decodedPalette=this.decodePalette(),d=4,c=!0),_=(f=l.data||l).length,g=S||u,m=v=0,d===1)for(;m<_;)b=S?4*u[m/4]:v,M=g[b++],f[m++]=M,f[m++]=M,f[m++]=M,f[m++]=c?g[b++]:this.transparency.grayscale&&this.transparency.grayscale===M?0:255,v=b;else for(;m<_;)b=S?4*u[m/4]:v,f[m++]=g[b++],f[m++]=g[b++],f[m++]=g[b++],f[m++]=c?g[b++]:this.transparency.rgb&&this.transparency.rgb[1]===g[b-3]&&this.transparency.rgb[3]===g[b-2]&&this.transparency.rgb[5]===g[b-1]?0:255,v=b},a.prototype.decode=function(){var l;return l=new Uint8Array(this.width*this.height*4),this.copyToImageData(l,this.decodePixels()),l},n=t.document&&t.document.createElement("canvas"),o=n&&n.getContext("2d"),s=function(l){var u;return o.width=l.width,o.height=l.height,o.clearRect(0,0,l.width,l.height),o.putImageData(l,0,0),(u=new Image).src=n.toDataURL(),u},a.prototype.decodeFrames=function(l){var u,c,d,f,m,g,v,b;if(this.animation){for(b=[],c=m=0,g=(v=this.animation.frames).length;m<g;c=++m)u=v[c],d=l.createImageData(u.width,u.height),f=this.decodePixels(new Uint8Array(u.data)),this.copyToImageData(d,f),u.imageData=d,b.push(u.image=s(d));return b}},a.prototype.renderFrame=function(l,u){var c,d,f;return c=(d=this.animation.frames)[u],f=d[u-1],u===0&&l.clearRect(0,0,this.width,this.height),f?.disposeOp===i?l.clearRect(f.xOffset,f.yOffset,f.width,f.height):f?.disposeOp===r&&l.putImageData(f.imageData,f.xOffset,f.yOffset),c.blendOp===e&&l.clearRect(c.xOffset,c.yOffset,c.width,c.height),l.drawImage(c.image,c.xOffset,c.yOffset)},a.prototype.animate=function(l){var u,c,d,f,m,g,v=this;return c=0,g=this.animation,f=g.numFrames,d=g.frames,m=g.numPlays,(u=function(){var b,_;if(b=c++%f,_=d[b],v.renderFrame(l,b),f>1&&c/f<m)return v.animation._timeout=setTimeout(u,_.delay)})()},a.prototype.stopAnimation=function(){var l;return clearTimeout((l=this.animation)!=null?l._timeout:void 0)},a.prototype.render=function(l){var u,c;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,u=l.getContext("2d"),this.animation?(this.decodeFrames(u),this.animate(u)):(c=u.createImageData(this.width,this.height),this.copyToImageData(c,this.decodePixels()),u.putImageData(c,0,0))},a}(self);const Q4e=new Set(["jpg","png","bmp","gif"]);async function X4e(t,e){if(!QD)throw new Ce("rasterCoded:decode","lerc decoder is not supported on big endian platform");await sne();const{offset:i}=e,{width:r,height:s,pixelType:n,statistics:o,depthCount:a,noDataValues:l,bandMasks:u,pixels:c,mask:d}=nne(t,{inputOffset:i,returnInterleaved:e.returnInterleaved});return new ui({width:r,height:s,pixelType:n.toLowerCase(),pixels:c,mask:d,statistics:o,bandMasks:u,depthCount:a,noDataValues:l})}async function eCe(t,e){const i=await Y4e(t,{...e,noDataValue:null});am(i);const r=new ui({width:i.width,height:i.height,pixels:i.pixels,pixelType:i.pixelType.toLowerCase(),mask:i.mask,statistics:null});return r.updateStatistics(),r}async function tCe(t,e){const i=await Z4e(t,e.customOptions),r=new ui({width:i.width,height:i.height,pixels:i.pixels,pixelType:i.pixelType.toLowerCase(),mask:i.mask,statistics:null});return r.updateStatistics(),r}function hne(t,e){const i=e.pixelType||"u8",r=ui.getPixelArrayConstructor(i),s=i==="u8"?t:new r(t.buffer),n=[],o=e.planes||1;if(o===1)n.push(s);else for(let l=0;l<o;l++){const u=(e.width||1)*(e.height||t.length),c=new r(u);for(let d=0;d<u;d++)c[d]=s[d*o+l];n.push(c)}const a=new ui({width:e.width||1,height:e.height||t.length,pixels:n,pixelType:i,statistics:null});return a.updateStatistics(),a}function iCe(t,e){return hne(new V0(new Uint8Array(t)).getBytes(),e)}function rCe(t,e){return hne(YD(t,e.offset,e.eof,!e.isInputBigEndian),e)}function sCe(t,e,i){const{pixelTypeCtor:r}=uCe(e.pixelType),s=(0,O4e.decode)(t,{width:e.width,height:e.height,pixelType:r,format:i}),n=new ui({width:e.width,height:e.height,pixels:s.pixels,pixelType:e.pixelType,mask:s.mask,statistics:null});return n.updateStatistics(),n}function nCe(t,e){const i=T4e.decode(t,e.hasNoZlibMask??void 0),r=new ui({width:i.width,height:i.height,pixels:i.pixels,pixelType:"U8",mask:i.mask,statistics:null});return r.updateStatistics(),r}function oCe(t,e){const i=new Uint8Array(t),r=new K4e(i),{width:s,height:n}=e,o=s*n,a=r.decode();let l,u=0,c=0;const d=new Uint8Array(o);for(u=0;u<o;u++)d[u]=a[4*u+3];const f=new ui({width:s,height:n,pixels:[],pixelType:"U8",mask:d,statistics:[]});for(u=0;u<3;u++){for(l=new Uint8Array(o),c=0;c<o;c++)l[c]=a[4*c+u];f.addData({pixels:l})}return f.updateStatistics(),f}async function aCe(t,e,i,r){const s=new S4e,n={applyJpegMask:!1,format:e,...i},o=await s.decode(t,n,r),a=new ui(o);return a.updateStatistics(),a}function dne(t){if(t==null)throw new Ce("rasterCodec:decode","parameter encodeddata is required.");const e=new Uint8Array(t,0,10);let i="";return e[0]===255&&e[1]===216?i="jpg":e[0]===137&&e[1]===80&&e[2]===78&&e[3]===71?i="png":e[0]===67&&e[1]===110&&e[2]===116&&e[3]===90&&e[4]===73&&e[5]===109&&e[6]===97&&e[7]===103&&e[8]===101&&e[9]===32?i="lerc":e[0]===76&&e[1]===101&&e[2]===114&&e[3]===99&&e[4]===50&&e[5]===32?i="lerc2":e[0]===73&&e[1]===73&&e[2]===42&&e[3]===0||e[0]===77&&e[1]===77&&e[2]===0&&e[3]===42||e[0]===73&&e[1]===73&&e[2]===43&&e[3]===0||e[0]===77&&e[1]===77&&e[2]===0&&e[3]===43?i="tiff":e[0]===71&&e[1]===73&&e[2]===70?i="gif":e[0]===66&&e[1]===77?i="bmp":String.fromCharCode.apply(null,e).toLowerCase().includes("error")&&(i="error"),i}function lCe(t){let e=null;switch(t){case"lerc":case"lerc2":e=X4e;break;case"jpg":e=nCe;break;case"png":e=oCe;break;case"bsq":case"bip":e=(i,r)=>sCe(i,r,t);break;case"tiff":e=eCe;break;case"deflate":e=iCe;break;case"lzw":e=rCe;break;case"error":e=()=>{throw new Ce("rasterCodec:decode","input data contains error")};break;default:e=()=>{throw new Ce("rasterCodec:decode","unsupported raster format")}}return e}function uCe(t){let e=null,i=null;switch(t?t.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":i=255,e=Uint8Array;break;case"u16":i=i||65535,e=Uint16Array;break;case"u32":i=i||2**32-1,e=Uint32Array;break;case"s8":i=i||-128,e=Int8Array;break;case"s16":i=i||-32768,e=Int16Array;break;case"s32":i=i||0-2**31,e=Int32Array;break;default:e=Float32Array}return{pixelTypeCtor:e,noDataValue:i}}function cCe(t,e=1){if(!t)return;const{pixels:i,width:r,height:s,mask:n}=t;if(!i||i.length===0)return;const o=i.length,a=r-1,l=s-1,u=[];let c,d,f,m,g,v,b=null;const _=ui.getPixelArrayConstructor(t.pixelType);if(e===0){for(c=0;c<o;c++){for(g=i[c],v=new _(a*l),d=0;d<l;d++)for(m=d*r,f=0;f<a;f++)v[d*a+f]=g[m+f];u.push(v)}if(ee(n))for(b=new Uint8Array(a*l),d=0;d<l;d++)for(m=d*r,f=0;f<a;f++)b[d*a+f]=n[m+f]}else{for(c=0;c<o;c++){for(g=i[c],v=new _(a*l),d=0;d<l;d++)for(m=d*r,f=0;f<a;f++)v[d*a+f]=(g[m+f]+g[m+f+1]+g[m+r+f]+g[m+r+f+1])/4;u.push(v)}if(n)for(b=new Uint8Array(a*l),d=0;d<l;d++)for(m=d*r,f=0;f<a;f++)b[d*a+f]=Math.min.apply(null,[n[m+f],n[m+f+1],n[m+r+f],n[m+r+f+1]])}t.width=a,t.height=l,t.mask=b,t.pixels=u}function hCe(t){let e=dne(t);return e==="lerc2"?e="lerc":e==="error"&&(e=""),e}async function KG(t,e={},i){if(t==null)throw new Ce("rasterCodec:decode","missing encodeddata parameter.");let r=e.format&&e.format.toLowerCase();if(!(r!=="bsq"&&r!=="bip"||e.width!=null&&e.height!=null))throw new Ce("rasterCodec:decode","requires width and height in options parameter.");if(r==="tiff"&&e.customOptions)return tCe(t,e);if((!r||r!=="bsq"&&r!=="bip"&&r!=="deflate"&&r!=="lzw")&&(r=dne(t)),e.useCanvas&&Q4e.has(r))return aCe(t,r,e,i);const s=lCe(r);e.isPoint&&((e={...e}).width!=null&&e.width++,e.height!=null&&e.height++);const n=await s(t,e);return n&&(r!=="jpg"&&e.noDataValue!=null&&n.depthCount===1&&HD(n,e.noDataValue,{customFloatTolerance:e.tolerance}),e.isPoint&&cCe(n),n)}const QG=new si({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),XG=new si({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});let ec=class extends Je{constructor(e){super(e),this.type="class-breaks-definition",this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null}set standardDeviationInterval(e){this.classificationMethod==="standard-deviation"&&this._set("standardDeviationInterval",e)}set definedInterval(e){this.classificationMethod==="defined-interval"&&this._set("definedInterval",e)}};h([Dt({classBreaksDef:"class-breaks-definition"})],ec.prototype,"type",void 0),h([p({json:{write:!0}})],ec.prototype,"breakCount",void 0),h([p({json:{write:!0}})],ec.prototype,"classificationField",void 0),h([p({type:String,json:{read:QG.read,write:QG.write}})],ec.prototype,"classificationMethod",void 0),h([p({json:{write:!0}})],ec.prototype,"normalizationField",void 0),h([p({json:{read:XG.read,write:XG.write}})],ec.prototype,"normalizationType",void 0),h([p({value:null,json:{write:!0}})],ec.prototype,"standardDeviationInterval",null),h([p({value:null,json:{write:!0}})],ec.prototype,"definedInterval",null),ec=h([ce("esri.rest.support.ClassBreaksDefinition")],ec);const Pht=ec,dCe=tt.getLogger("esri.rest.support.generateRendererUtils");function F1(t,e){return Number(t.toFixed(e))}function Nht(t){const{normalizationTotal:e}=t;return{classBreaks:pCe(t),normalizationTotal:e}}function pCe(t){const e=t.definition,{classificationMethod:i,normalizationType:r,definedInterval:s}=e,n=e.breakCount??1,o=[];let a=t.values;if(a.length===0)return[];a=a.sort((c,d)=>c-d);const l=a[0],u=a[a.length-1];if(i==="equal-interval")if(a.length>=n){const c=(u-l)/n;let d=l;for(let f=1;f<n;f++){const m=F1(l+f*c,6);o.push({minValue:d,maxValue:m,label:sa(d,m,r)}),d=m}o.push({minValue:d,maxValue:u,label:sa(d,u,r)})}else a.forEach(c=>{o.push({minValue:c,maxValue:c,label:sa(c,c,r)})});else if(i==="natural-breaks"){const c=fCe(a),d=t.valueFrequency||c.valueFrequency,f=mCe(c.uniqueValues,d,n);let m=l;for(let g=1;g<n;g++)if(c.uniqueValues.length>g){const v=F1(c.uniqueValues[f[g]],6);o.push({minValue:m,maxValue:v,label:sa(m,v,r)}),m=v}o.push({minValue:m,maxValue:u,label:sa(m,u,r)})}else if(i==="quantile")if(a.length>=n&&l!==u){let c=l,d=Math.ceil(a.length/n),f=0;for(let m=1;m<n;m++){let g=d+f-1;g>a.length&&(g=a.length-1),g<0&&(g=0),o.push({minValue:c,maxValue:a[g],label:sa(c,a[g],r)}),c=a[g],f+=d,d=Math.ceil((a.length-f)/(n-m))}o.push({minValue:c,maxValue:u,label:sa(c,u,r)})}else{let c=-1;for(let d=0;d<a.length;d++){const f=a[d];f!==c&&(c=f,o.push({minValue:c,maxValue:f,label:sa(c,f,r)}),c=f)}}else if(i==="standard-deviation"){const c=vCe(a),d=bCe(a,c);if(d===0)o.push({minValue:a[0],maxValue:a[0],label:sa(a[0],a[0],r)});else{const f=gCe(l,u,n,c,d)*d;let m=0,g=l;for(let b=n;b>=1;b--){const _=F1(c-(b-.5)*f,6);o.push({minValue:g,maxValue:_,label:sa(g,_,r)}),g=_,m++}let v=F1(c+.5*f,6);o.push({minValue:g,maxValue:v,label:sa(g,v,r)}),g=v,m++;for(let b=1;b<=n;b++)v=m===2*n?u:F1(c+(b+.5)*f,6),o.push({minValue:g,maxValue:v,label:sa(g,v,r)}),g=v,m++}}else if(i==="defined-interval"){if(!s)return o;const c=a[0],d=a[a.length-1],f=Math.ceil((d-c)/s);let m=c;for(let g=1;g<f;g++){const v=F1(c+g*s,6);o.push({minValue:m,maxValue:v,label:sa(m,v,r)}),m=v}o.push({minValue:m,maxValue:d,label:sa(m,d,r)})}return o}function sa(t,e,i){let r=null;return r=t===e?i&&i==="percent-of-total"?t+"%":t.toString():i&&i==="percent-of-total"?t+"% - "+e+"%":t+" - "+e,r}function fCe(t){const e=[],i=[];let r=Number.MIN_VALUE,s=1,n=-1;for(let o=0;o<t.length;o++){const a=t[o];a===r?(s++,i[n]=s):a!==null&&(e.push(a),r=a,s=1,i.push(s),n++)}return{uniqueValues:e,valueFrequency:i}}function mCe(t,e,i){const r=t.length,s=[];i>r&&(i=r);for(let o=0;o<i;o++)s.push(Math.round(o*r/i-1));s.push(r-1);let n=eq(s,t,e,i);return yCe(n.mean,n.sdcm,s,t,e,i)&&(n=eq(s,t,e,i)),s}function eq(t,e,i,r){let s=[],n=[],o=[],a=0;const l=[],u=[];for(let m=0;m<r;m++){const g=Qv(m,t,e,i);l.push(g.sbMean),u.push(g.sbSdcm),a+=u[m]}let c,d=a,f=!0;for(;f||a<d;){f=!1,s=[];for(let m=0;m<r;m++)s.push(t[m]);for(let m=0;m<r;m++)for(let g=t[m]+1;g<=t[m+1];g++)if(c=e[g],m>0&&g!==t[m+1]&&Math.abs(c-l[m])>Math.abs(c-l[m-1]))t[m]=g;else if(m<r-1&&t[m]!==g-1&&Math.abs(c-l[m])>Math.abs(c-l[m+1])){t[m+1]=g-1;break}d=a,a=0,n=[],o=[];for(let m=0;m<r;m++){n.push(l[m]),o.push(u[m]);const g=Qv(m,t,e,i);l[m]=g.sbMean,u[m]=g.sbSdcm,a+=u[m]}}if(a>d){for(let m=0;m<r;m++)t[m]=s[m],l[m]=n[m],u[m]=o[m];a=d}return{mean:l,sdcm:u}}function yCe(t,e,i,r,s,n){let o=0,a=0,l=0,u=0,c=!0;for(let d=0;d<2&&c;d++){d===0&&(c=!1);for(let f=0;f<n-1;f++)for(;i[f+1]+1!==i[f+2];){i[f+1]=i[f+1]+1;const m=Qv(f,i,r,s);l=m.sbMean,o=m.sbSdcm;const g=Qv(f+1,i,r,s);if(u=g.sbMean,a=g.sbSdcm,!(o+a<e[f]+e[f+1])){i[f+1]=i[f+1]-1;break}e[f]=o,e[f+1]=a,t[f]=l,t[f+1]=u,c=!0}for(let f=n-1;f>0;f--)for(;i[f]!==i[f-1]+1;){i[f]=i[f]-1;const m=Qv(f-1,i,r,s);l=m.sbMean,o=m.sbSdcm;const g=Qv(f,i,r,s);if(u=g.sbMean,a=g.sbSdcm,!(o+a<e[f-1]+e[f])){i[f]=i[f]+1;break}e[f-1]=o,e[f]=a,t[f-1]=l,t[f]=u,c=!0}}return c}function gCe(t,e,i,r,s){let n=Math.max(r-t,e-r)/s/i;return n=n>=1?1:n>=.5?.5:.25,n}function vCe(t){let e=0;for(let i=0;i<t.length;i++)e+=t[i];return e/=t.length,e}function bCe(t,e){let i=0;for(let r=0;r<t.length;r++){const s=t[r];i+=(s-e)*(s-e)}return i/=t.length,Math.sqrt(i)}function Qv(t,e,i,r){let s=0,n=0;for(let l=e[t]+1;l<=e[t+1];l++){const u=r[l];s+=i[l]*u,n+=u}n<=0&&dCe.warn("Exception in Natural Breaks calculation");const o=s/n;let a=0;for(let l=e[t]+1;l<=e[t+1];l++)a+=r[l]*(i[l]-o)**2;return{sbMean:o,sbSdcm:a}}const wCe=.25,_Ce=nC.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),tq=nC.fromJSON(zD[0]),pne=new Set(["scientific","standard-time","vector-uv","vector-magdir","vector-u","vector-v","vector-magnitude","vector-direction"]);function xCe(t,e){const{attributeTable:i,colormap:r}=t;if(r7(t)){const s=NCe(t);if(ee(s))return s}if(ee(r)){const s=$Ce(t);if(ee(s))return s}if(ee(i)){const s=ACe(t);if(ee(s))return s}return ECe(t,e)}function SCe(t,e=!1){const i=["raster-stretch"];return gne(t)&&i.push("raster-colormap"),yne(t)&&i.push("unique-value"),RCe(t,e)&&i.push("class-breaks"),OCe(t)&&i.push("raster-shaded-relief"),r7(t)&&i.push("vector-field"),LCe(t)&&i.push("flow"),i}function Fht(t,e,i){const r=["nearest","bilinear","cubic","majority"].find(s=>s===i?.toLowerCase());return e==="Map"?r??"bilinear":t.dataType==="standard-time"?r??"nearest":t.dataType==="thematic"||t.attributeTable||t.colormap?r==="nearest"||r==="majority"?r:"nearest":r??"bilinear"}function ECe(t,e){t=TCe(t,e?.variableName);const{bandCount:i}=t;let{bandIds:r,stretchType:s}=e||{};r?.some(d=>d>=i)&&(r=null);let n=t.statistics,o=t.histograms;i>1?(r=r?.length?r:fne(t),n=n==null?null:r?.map(d=>n[d]),o=o==null?null:r?.map(d=>o[d])):r=[0],s==null&&(s=MCe(t));let a=!1;switch(s){case"none":a=!1;break;case"percent-clip":a=!o?.length;break;default:a=!n?.length}const{dataType:l}=t,u=r?.length===1&&pne.has(l)?_Ce:null,c=new qD({stretchType:s,dynamicRangeAdjustment:a,colorRamp:u,outputMin:0,outputMax:255,gamma:r?.length===1?[1]:[1,1,1],useGamma:!1});return s==="percent-clip"?c.maxPercent=c.minPercent=wCe:s==="standard-deviation"&&(c.numberOfStandardDeviations=2),a||!ee(t.multidimensionalInfo)&&!e?.includeStatisticsInStretch||(s==="percent-clip"?c.histograms=o:s!=="min-max"&&s!=="standard-deviation"||(c.statistics=n)),c}function TCe(t,e){if(!e)return t;let i=t.statistics,r=t.histograms;const{multidimensionalInfo:s}=t;if(e&&ee(s)){const n=s.variables.find(o=>o.name===e);if(n){const{statistics:o,histograms:a}=n;o?.length&&(i=o),a?.length&&(r=a)}}return Q3.fromJSON({...t.toJSON(),statistics:i,histograms:r})}function fne(t){const e=t.bandCount;if(e===1)return null;if(e===2)return[0];const i=t.keyProperties&&t.keyProperties.BandProperties;let r;if(i&&i.length===e){const{red:s,green:n,blue:o,nir:a}=ICe(i);s!=null&&n!=null&&o!=null?r=[s,n,o]:a!=null&&s!=null&&n!=null&&(r=[a,s,n])}return!r&&e>=3&&(r=[0,1,2]),r}function ICe(t){const e={};for(let i=0;i<t.length;i++){const r=t[i],s=r.BandName?.toLowerCase();if(s==="red")e.red=i;else if(s==="green")e.green=i;else if(s==="blue")e.blue=i;else if(s==="nearinfrared"||s==="nearinfrared_1"||s==="nir")e.nir=i;else if(r.WavelengthMax&&r.WavelengthMin){const n=r.WavelengthMin,o=r.WavelengthMax;e.blue==null&&n>=410&&n<=480&&o>=480&&o<=540?e.blue=i:e.green==null&&n>=490&&n<=560&&o>=560&&o<=610?e.green=i:e.red==null&&n>=595&&n<=670&&o>=660&&o<=730?e.red=i:e.nir==null&&n>=700&&n<=860&&o>=800&&o<=950&&(e.nir=i)}}return e}function MCe(t){let e="percent-clip";const{pixelType:i,dataType:r,histograms:s,statistics:n,multidimensionalInfo:o}=t,a=pne.has(r)||r==="generic"&&ee(o);return i!=="u8"||r!=="processed"&&ee(s)&&ee(n)?i==="u8"||r==="elevation"||a?e="min-max":ee(s)?e="percent-clip":ee(n)&&(e="min-max"):e="none",e}function ACe(t,e,i,r){if(!yne(t,e))return null;const{attributeTable:s,statistics:n}=t,o=mne(s,e),a=Hx(s,"red"),l=Hx(s,"green"),u=Hx(s,"blue"),c=new D3,d=[],f=new Set,m=!!(a&&l&&u);if(ee(s))s.features.forEach(g=>{const v=g.attributes[o.name];if(!f.has(g.attributes[o.name])&&v!=null){f.add(v);const b=m&&(a.type==="single"||a.type==="double")&&(l.type==="single"||l.type==="double")&&(u.type==="single"||u.type==="double")&&!s.features.some(S=>S.attributes[a.name]>1||S.attributes[l.name]>1||S.attributes[u.name]>1),_=b?255:1;d.push(new p0({value:g.attributes[o.name],label:g.attributes[o.name]+"",symbol:{type:"simple-fill",style:"solid",outline:null,color:new It(m?[g.attributes[a.name]*_,g.attributes[l.name]*_,g.attributes[u.name]*_,1]:[0,0,0,0])}}))}});else if(n?.[0])for(let g=n[0].min;g<=n[0].max;g++)d.push(new p0({value:g,label:g.toString(),symbol:{type:"simple-fill",style:"solid",outline:null,color:new It([0,0,0,0])}}));if(d.sort((g,v)=>g.value&&typeof g.value.valueOf()=="string"?0:g.value>v.value?1:-1),!m){const g=U0(tq,{numColors:d.length});d.forEach((v,b)=>v.symbol.color=new It(g[b].slice(1,4))),c.colorRamp=tq}if(i||r){const g=i||U0(r,{numColors:d.length}).map(v=>v.slice(1));d.forEach((v,b)=>v.symbol.color=new It(g[b])),c.colorRamp=r}return new Zm({field:o.name,uniqueValueInfos:d,authoringInfo:c})}function mne(t,e,i){let r;return ee(t)?(r=e?t.fields.find(s=>e.toLowerCase()===s.name.toLowerCase()):CCe(t.fields),r||(i||(r=t.fields.find(s=>s.type==="string")),r||(r=Hx(t,"value")))):r=new ml({name:"value"}),r}function CCe(t){let e;for(let i=0;i<t.length;i++){const r=t[i].name.toLowerCase();if(t[i].type==="string"){if(r.startsWith("class")){e=t[i];break}e==null&&(r.endsWith("name")||r.endsWith("type"))&&(e=t[i])}}return e}function Hx(t,e){return Re(t)?null:t.fields.find(i=>i.name.toLowerCase()===e)}function yne(t,e){const{attributeTable:i,bandCount:r}=t;return Re(i)&&kCe(t)?!0:!(Re(i)||r>1||e&&i.fields.find(s=>s.name.toLowerCase()===e.toLowerCase())==null)}function gne(t){const{bandCount:e,colormap:i}=t;return ee(i)&&i.length>0&&e===1}function $Ce(t){if(!gne(t))return null;let e;const{attributeTable:i,colormap:r}=t;if(ee(i)){const s=Hx(i,"value"),n=mne(i,null,!0);n.type==="string"&&(e={},i.features.forEach(o=>{const a=o.attributes;e[a[s.name]]=n?a[n.name]:a[s.name]}))}return GD.createFromColormap(r,e)}function OCe(t){const{bandCount:e,dataType:i,pixelType:r}=t;return i==="elevation"||i==="generic"&&e===1&&(r==="s16"||r==="s32"||r==="f32"||r==="f64")}function RCe(t,e=!1){const{attributeTable:i,bandCount:r}=t;return r===1&&(!e||ee(i)||ee(t.histograms))}function kCe(t){return["u8","s8"].includes(t.pixelType)&&t.statistics?.[0]?.min!=null&&t.statistics[0]?.max!=null&&t.bandCount===1}function r7(t){const{dataType:e}=t;return e==="vector-uv"||e==="vector-magdir"}function LCe(t){const{dataType:e}=t;return e==="vector-uv"||e==="vector-magdir"}const PCe=new Map([["m/s","meter-per-second"],["km/h","kilometer-per-hour"],["knots","knots"],["ft/s","feet-per-second"],["mph","mile-per-hour"]]);function NCe(t){if(!r7(t))return null;let e;if(ee(t.statistics)&&t.statistics.length&&(t.dataType==="vector-magdir"||t.dataType==="vector-uv")){const{minMagnitude:s,maxMagnitude:n}=DCe(t.dataType,t.statistics);e=[{type:"size",field:"Magnitude",minSize:10,maxSize:40,minDataValue:s,maxDataValue:n}]}const i=ee(t.multidimensionalInfo)?PCe.get(t.multidimensionalInfo.variables[0].unit):null,r=new ZD({visualVariables:e,inputUnit:i,rotationType:"geographic"});return r.visualVariables=[...r.sizeVariables,...r.rotationVariables],r}function iq(t){return{color:t.symbolLayers[0].material?.color,type:"esriSFS",style:"esriSFSSolid"}}function FCe(t){if(t.type==="uniqueValue"){const e=t.uniqueValueInfos;return e?.[0].symbol?.symbolLayers?.length&&(t.uniqueValueInfos=e?.map(r=>({value:r.value,label:r.label,symbol:r.symbol?iq(r.symbol):null}))),t}if(t.type==="classBreaks"){const e=t.classBreakInfos;return e[0].symbol?.symbolLayers?.length&&(t.classBreakInfos=e.map(i=>({classMinValue:i.classMinValue,classMaxValue:i.classMaxValue,label:i.label,symbol:i.symbol?iq(i.symbol):null}))),t}return t}function DCe(t,e){let i,r;if(t==="vector-magdir")i=e[0].min,r=e[0].max;else{const s=e[0].min,n=e[0].max,o=e[1].min,a=e[1].max;i=0,r=Math.max(Math.abs(s),Math.abs(o),Math.abs(n),Math.abs(a))}return{minMagnitude:i,maxMagnitude:r}}const rR=1,jCe=[.299,.587,.114];function vne(t,e=256){e=Math.min(e,256);const{size:i,counts:r}=t,s=new Uint8Array(i),n=r.reduce((c,d)=>c+d/e,0);let o=0,a=0,l=0,u=n;for(let c=0;c<i;c++)if(l+=r[c],!(c<i-1&&l+r[c+1]<u)){for(;o<e-1&&u<l;)o++,u+=n;for(let d=a;d<=c;d++)s[d]=o;a=c+1}for(let c=a;c<i;c++)s[c]=e-1;return s}function rq(t){const{minCutOff:e,maxCutOff:i,gamma:r,pixelType:s,rounding:n}=t,o=t.outMin||0,a=t.outMax||255;if(!["u8","u16","s8","s16"].includes(s))return null;const l=e.length;let u,c,d=0;s==="s8"?d=-127:s==="s16"&&(d=-32767);let f=256;["u16","s16"].includes(s)&&(f=65536);const m=[],g=[],v=a-o;for(u=0;u<l;u++)g[u]=i[u]-e[u],m[u]=g[u]===0?0:v/g[u];let b;const _=[];let S,M,x;if(r&&r.length>=l){const T=bne(l,r);for(u=0;u<l;u++){for(x=[],c=0;c<f;c++)if(g[u]!==0)if(S=c+d,b=(S-e[u])/g[u],M=1,r[u]>1&&(M-=(1/v)**(b*T[u])),S<i[u]&&S>e[u]){const I=M*v*b**(1/r[u])+o;x[c]=n==="floor"?Math.floor(I):n==="round"?Math.round(I):I}else S>=i[u]?x[c]=a:x[c]=o;else x[c]=o;_[u]=x}}else for(u=0;u<l;u++){for(x=[],c=0;c<f;c++)if(S=c+d,S<=e[u])x[c]=o;else if(S>=i[u])x[c]=a;else{const T=(S-e[u])*m[u]+o;x[c]=n==="floor"?Math.floor(T):n==="round"?Math.round(T):T}_[u]=x}if(t.contrastOffset!=null){const T=UCe(t.contrastOffset,t.brightnessOffset);for(u=0;u<l;u++)for(x=_[u],c=0;c<f;c++)x[c]=T[x[c]]}return{lut:_,offset:d}}function UCe(t,e){const i=Math.min(Math.max(t,-100),100),r=Math.min(Math.max(e??0,-100),100),s=255,n=128;let o=0,a=0;const l=new Uint8Array(256);for(o=0;o<256;o++)i>0&&i<100?a=(200*o-100*s+2*s*r)/(2*(100-i))+n:i<=0&&i>-100?a=(200*o-100*s+2*s*r)*(100+i)/2e4+n:i===100?(a=200*o-100*s+(s+1)*(100-i)+2*s*r,a=a>0?s:0):i===-100&&(a=n),l[o]=a>s?s:a<0?0:a;return l}function VCe(t,e,i){const r=[];for(let s=0;s<e.length;s++){let n=0,o=0,a=0;"min"in e[s]?{min:n,max:o,avg:a}=e[s]:[n,o,a]=e[s];let l=a??0;t!=="u8"&&(l=255*(l-n)/(o-n)),i&&(l*=jCe[s]),r.push(BCe(l))}return r}function BCe(t){if(t<=0||t>=255)return rR;let e=0;t!==150&&(e=t<=150?45*Math.cos(.01047*t):17*Math.sin(.021*t));const i=255,r=t+e,s=Math.log(t/i),n=Math.log(r/i);if(n===0)return rR;const o=s/n;return isNaN(o)?rR:Math.min(9.9,Math.max(.01,o))}function zCe(t){if(Re(t)||!t.pixels?.length)return null;const{pixels:e,mask:i,pixelType:r}=t,s=t.width*t.height,n=e.length;let o,a,l,u,c;const d=[],f=[];let m,g,v,b,_,S,M,x,T,I;const $=256;for(u=0;u<n;u++){if(m=new Uint32Array($),v=e[u],r==="u8")if(o=-.5,a=255.5,i)for(c=0;c<s;c++)i[c]&&m[v[c]]++;else for(c=0;c<s;c++)m[v[c]]++;else{let L=!1;t.statistics||(t.updateStatistics(),L=!0);const B=t.statistics;if(o=B[u].minValue,a=B[u].maxValue,l=(a-o)/$,l===0){!B||t.validPixelCount||L||t.updateStatistics();const z=(t.validPixelCount||t.width*t.height)/$;for(let H=0;H<$;H++)m[H]=Math.round(z*(H+1))-Math.round(z*H)}else{for(g=new Uint32Array($+1),c=0;c<s;c++)i&&!i[c]||g[Math.floor((v[c]-o)/l)]++;for(c=0;c<$-1;c++)m[c]=g[c];m[$-1]=g[$-1]+g[$]}}for(d.push({min:o,max:a,size:$,counts:m}),b=0,_=0,x=0,c=0;c<$;c++)b+=m[c],_+=c*m[c];for(T=_/b,c=0;c<$;c++)x+=m[c]*(c-T)**2;I=Math.sqrt(x/(b-1)),l=(a-o)/$,S=(T+.5)*l+o,M=I*l,f.push({min:o,max:a,avg:S,stddev:M})}return{statistics:f,histograms:d}}function Dht(t){const e=[];for(let i=0;i<t.length;i++){const{min:r,max:s,size:n,counts:o}=t[i];let a=0,l=0;for(let g=0;g<n;g++)a+=o[g],l+=g*o[g];const u=l/a;let c=0;for(let g=0;g<n;g++)c+=o[g]*(g-u)**2;const d=(s-r)/n,f=(u+.5)*d+r,m=Math.sqrt(c/(a-1))*d;e.push({min:r,max:s,avg:f,stddev:m})}return e}function V_(t,e){const{pixelBlock:i,bandIds:r,returnHistogramLut:s,rasterInfo:n}=e;let o=null,a=null,l=t.stretchType;if(typeof l=="number"&&(l=Rse[l]),t.dra)if(l==="minMax"&&ee(i)&&i.statistics)o=i.statistics.map(z=>[z.minValue,z.maxValue,0,0]);else{const z=zCe(i);o=ee(z)?z.statistics:null,a=ee(z)?z.histograms:null}else o=t.statistics?.length>0?t.statistics:n.statistics,a=t.histograms||n.histograms;l!=="percentClip"&&l!=="histogramEqualization"||a?.length||(l="minMax");const u=o?.length||a?.length||n.bandCount,c=[],d=[];let f,m,g,v,b,_,S,M,x;o&&!Array.isArray(o[0])&&(o=o.map(z=>[z.min,z.max,z.avg,z.stddev]));const[T,I]=i_(n.pixelType);if(!o?.length){for(o=[],M=0;M<u;M++)o.push([T,I,1,1]);l==="standardDeviation"&&(l="minMax")}switch(l){case"none":for(M=0;M<u;M++)c[M]=T,d[M]=I;break;case"minMax":for(M=0;M<u;M++)c[M]=o[M][0],d[M]=o[M][1];break;case"standardDeviation":for(M=0;M<u;M++)c[M]=o[M][2]-t.numberOfStandardDeviations*o[M][3],d[M]=o[M][2]+t.numberOfStandardDeviations*o[M][3],c[M]<o[M][0]&&(c[M]=o[M][0]),d[M]>o[M][1]&&(d[M]=o[M][1]);break;case"histogramEqualization":for(am(a),M=0;M<u;M++)c[M]=a[M].min,d[M]=a[M].max;break;case"percentClip":for(am(a),M=0;M<a.length;M++){for(f=a[M],b=new Uint32Array(f.size),v=[...f.counts],v.length>=20&&(v[0]=v[1]=v[2]=v[v.length-1]=v[v.length-2]=0),g=0,m=(f.max-f.min)/f.size,S=f.min===-.5&&m===1?.5:0,x=0;x<f.size;x++)g+=v[x],b[x]=g;for(_=(t.minPercent||0)*g/100,c[M]=f.min+S,x=0;x<f.size;x++)if(b[x]>_){c[M]=f.min+m*(x+S);break}for(_=(1-(t.maxPercent||0)/100)*g,d[M]=f.max+S,x=f.size-2;x>=0;x--)if(b[x]<_){d[M]=f.min+m*(x+2-S);break}if(d[M]<c[M]){const z=c[M];c[M]=d[M],d[M]=z}}break;default:for(M=0;M<u;M++)c[M]=o[M][0],d[M]=o[M][1]}let $,L,B;return l==="histogramEqualization"?(am(a),L=a[0].size||256,$=0,s&&(B=a.map(z=>vne(z)))):(L=t.max||255,$=t.min||0),GCe({minCutOff:c,maxCutOff:d,outMax:L,outMin:$,histogramLut:B},r)}function GCe(t,e){if(e==null||e.length===0)return t;const i=Math.max.apply(null,e),{minCutOff:r,maxCutOff:s,outMin:n,outMax:o,histogramLut:a}=t;return r.length===e.length||r.length<=i?t:{minCutOff:e.map(l=>r[l]),maxCutOff:e.map(l=>s[l]),histogramLut:a?e.map(l=>a[l]):null,outMin:n,outMax:o}}function bne(t,e){const i=new Float32Array(t);for(let r=0;r<t;r++)e[r]>1?e[r]>2?i[r]=6.5+(e[r]-2)**2.5:i[r]=6.5+100*(2-e[r])**4:i[r]=1;return i}function sR(t,e){if(Re(t)||!t.pixels?.length)return t;const{mask:i,width:r,height:s,pixels:n}=t,{minCutOff:o,maxCutOff:a,gamma:l}=e,u=e.outMin||0,c=e.outMax||255,d=r*s,f=e.outputPixelType||"u8",m=t.pixels.map(()=>ui.createEmptyBand(f,d)),g=m.length;let v,b,_,S,M;const x=c-u,T=[],I=[];for(v=0;v<g;v++)I[v]=a[v]-o[v],T[v]=I[v]===0?0:x/I[v];const $=f.startsWith("u")||f.startsWith("s"),L=l&&l.length>=g,B=!!e.isRenderer;if(L){const H=bne(g,l);for(b=0;b<d;b++)if(i==null||i[b])for(v=0;v<g;v++)if(I[v]!==0)if(_=n[v][b],M=(_-o[v])/I[v],S=1,l[v]>1&&(S-=(1/x)**(M*H[v])),_<a[v]&&_>o[v]){const J=S*x*M**(1/l[v])+u;m[v][b]=B?Math.floor(J):$?Math.round(J):J}else _>=a[v]?m[v][b]=c:m[v][b]=u;else m[v][b]=u}else for(b=0;b<d;b++)if(i==null||i[b])for(v=0;v<g;v++)if(_=n[v][b],_<a[v]&&_>o[v]){const H=(_-o[v])*T[v]+u;m[v][b]=B?Math.floor(H):$?Math.round(H):H}else _>=a[v]?m[v][b]=c:m[v][b]=u;const z=new ui({width:r,height:s,mask:i,pixels:m,pixelType:f});return z.updateStatistics(),z}function wne(t){let{altitude:e,azimuth:i}=t;const{hillshadeType:r,pixelSizePower:s=1,pixelSizeFactor:n=1,scalingType:o,isGCS:a,resolution:l}=t,u=r==="multi-directional"?2*t.zFactor:t.zFactor,{x:c,y:d}=l;let f=u/(8*c),m=u/(8*d);if(a&&u>.001&&(f/=111e3,m/=111e3),o==="adjusted")if(a){const J=111e3*c,K=111e3*d;f=(u+J**s*n)/(8*J),m=(u+K**s*n)/(8*K)}else f=(u+c**s*n)/(8*c),m=(u+d**s*n)/(8*d);let g=(90-e)*Math.PI/180,v=Math.cos(g),b=(360-i+90)*Math.PI/180,_=Math.sin(g)*Math.cos(b),S=Math.sin(g)*Math.sin(b);const M=[315,270,225,360,180,0],x=[60,60,60,60,60,90],T=new Float32Array([3,5,3,2,1,4]),I=T.reduce((J,K)=>J+K),$=T.map(J=>J/I),L=r==="multi-directional"?M.length:1,B=new Float32Array(6),z=new Float32Array(6),H=new Float32Array(6);if(r==="multi-directional")for(let J=0;J<L;J++)e=x[J],i=M[J],g=(90-e)*Math.PI/180,v=Math.cos(g),b=(360-i+90)*Math.PI/180,_=Math.sin(g)*Math.cos(b),S=Math.sin(g)*Math.sin(b),B[J]=v,z[J]=_,H[J]=S;else B.fill(v),z.fill(_),H.fill(S);return{resolution:l,factor:[f,m],sinZcosA:_,sinZsinA:S,cosZ:v,sinZcosAs:z,sinZsinAs:H,cosZs:B,weights:$,hillshadeType:["traditional","multi-directional"].indexOf(r)}}function qCe(t,e){if(!Rr(t))return t;const{width:i,height:r,mask:s}=t,n=new Uint8Array(i*r);let o=1;if(ee(s)){for(let Q=0;Q<s.length;Q++)if(s[Q]){o=s[Q];break}n.set(s)}const{factor:a,sinZcosA:l,sinZsinA:u,cosZ:c,sinZcosAs:d,sinZsinAs:f,cosZs:m,weights:g}=wne(e),[v,b]=a,{hillshadeType:_}=e,S=t.pixels[0],M=new Uint8Array(i*r);let x,T,I,$,L,B,z,H;const J=1,K=ee(s);for(let Q=J;Q<r-J;Q++){const y=Q*i;for(let A=J;A<i-J;A++){if(s&&!s[y+A]){M[y+A]=0;continue}let N=8;if(K&&(N=(s[y-i+A-1]+s[y-i+A]+s[y-i+A+1]+s[y+A-1]+s[y+A+1]+s[y+i+A-1]+s[y+i+A]+s[y+i+A+1])/o,N<7)){M[y+A]=0,n[y+A]=0;continue}s&&N===7?(x=s[y-i+A-1]?S[y-i+A-1]:S[y+A],T=s[y-i+A]?S[y-i+A]:S[y+A],I=s[y-i+A+1]?S[y-i+A+1]:S[y+A],$=s[y+A-1]?S[y+A-1]:S[y+A],L=s[y+A+1]?S[y+A+1]:S[y+A],B=s[y+i+A-1]?S[y+i+A-1]:S[y+A],z=s[y+i+A]?S[y+i+A]:S[y+A],H=s[y+i+A+1]?S[y+i+A+1]:S[y+A]):(x=S[y-i+A-1],T=S[y-i+A],I=S[y-i+A+1],$=S[y+A-1],L=S[y+A+1],B=S[y+i+A-1],z=S[y+i+A],H=S[y+i+A+1]);const D=(I+L+L+H-(x+$+$+B))*v,ne=(B+z+z+H-(x+T+T+I))*b,q=Math.sqrt(1+D*D+ne*ne);let he=0;if(_==="traditional"){let te=255*(c+u*ne-l*D)/q;te<0&&(te=0),he=te}else{const te=f.length;for(let me=0;me<te;me++){let ve=255*(m[me]+f[me]*ne-d[me]*D)/q;ve<0&&(ve=0),he+=ve*g[me]}}M[y+A]=255&he}}for(let Q=0;Q<r;Q++)M[Q*i]=M[Q*i+1],M[(Q+1)*i-1]=M[(Q+1)*i-2];for(let Q=1;Q<i-1;Q++)M[Q]=M[Q+i],M[Q+(r-1)*i]=M[Q+(r-2)*i];return new ui({width:i,height:r,pixels:[M],mask:s?n:null,pixelType:"u8",validPixelCount:t.validPixelCount,statistics:[{minValue:0,maxValue:255}]})}function HCe(t,e,i,r){if(!Rr(t)||!Rr(e))return;const{min:s,max:n}=r,o=t.pixels[0],{pixels:a,mask:l}=e,u=a[0],c=255.00001/(n-s),d=new Uint8ClampedArray(u.length),f=new Uint8ClampedArray(u.length),m=new Uint8ClampedArray(u.length),g=i.length-1;for(let v=0;v<u.length;v++){if(l&&l[v]===0)continue;const b=Math.floor((u[v]-s)*c),[_,S]=i[b<0?0:b>g?g:b],M=o[v],x=M*S,T=x*(1-Math.abs(_%2-1)),I=M-x;switch(Math.floor(_)){case 0:d[v]=x+I,f[v]=T+I,m[v]=I;break;case 1:d[v]=T+I,f[v]=x+I,m[v]=I;break;case 2:d[v]=I,f[v]=x+I,m[v]=T+I;break;case 3:d[v]=I,f[v]=T+I,m[v]=x+I;break;case 4:d[v]=T+I,f[v]=I,m[v]=x+I;break;case 5:case 6:d[v]=x+I,f[v]=I,m[v]=T+I}}t.pixels=[d,f,m],t.updateStatistics()}function jht(t,e){if(!Rr(t))return t;const i=e.zFactor,r=e.pixelSizePower??1,s=e.pixelSizeFactor??1,n=e.slopeType,o=e.isGCS,{width:a,height:l,mask:u}=t,c=t.pixels[0],d=new Uint8Array(a*l);let f=1;if(ee(u)){for(let K=0;K<u.length;K++)if(u[K]){f=u[K];break}d.set(u)}const m=new Float32Array(a*l),{x:g,y:v}=e.resolution;let b=i/(8*g),_=i/(8*v);o&&Math.abs(i-1)<1e-4&&(b/=111e3,_/=111e3),n==="adjusted"&&(b=(i+g**r*s)/(8*g),_=(i+v**r*s)/(8*v));const S=1;let M,x,T,I,$,L,B,z;const H=ee(u);for(let K=S;K<l-S;K++){const Q=K*a;for(let y=S;y<a-S;y++){if(u&&!u[Q+y]){m[Q+y]=0;continue}let A=0;if(H&&(A=(u[Q-a+y-1]+u[Q-a+y]+u[Q-a+y+1]+u[Q+y-1]+u[Q+y+1]+u[Q+a+y-1]+u[Q+a+y]+u[Q+a+y+1])/f,A<7)){m[Q+y]=0,d[Q+y]=0;continue}u&&A===7?(M=u[Q-a+y-1]?c[Q-a+y-1]:c[Q+y],x=u[Q-a+y]?c[Q-a+y]:c[Q+y],T=u[Q-a+y+1]?c[Q-a+y+1]:c[Q+y],I=u[Q+y-1]?c[Q+y-1]:c[Q+y],$=u[Q+y+1]?c[Q+y+1]:c[Q+y],L=u[Q+a+y-1]?c[Q+a+y-1]:c[Q+y],B=u[Q+a+y]?c[Q+a+y]:c[Q+y],z=u[Q+a+y+1]?c[Q+a+y+1]:c[Q+y]):(M=c[Q-a+y-1],x=c[Q-a+y],T=c[Q-a+y+1],I=c[Q+y-1],$=c[Q+y+1],L=c[Q+a+y-1],B=c[Q+a+y],z=c[Q+a+y+1]);const N=(T+$+$+z-(M+I+I+L))*b,D=(L+B+B+z-(M+x+x+T))*_,ne=Math.sqrt(N*N+D*D);m[Q+y]=n==="percent-rise"?100*ne:57.2957795*Math.atan(ne)}}for(let K=0;K<l;K++)m[K*a]=m[K*a+1],m[(K+1)*a-1]=m[(K+1)*a-2];for(let K=1;K<a-1;K++)m[K]=m[K+a],m[K+(l-1)*a]=m[K+(l-2)*a];const J=new ui({width:a,height:l,pixels:[m],mask:u?d:null,pixelType:"f32",validPixelCount:t.validPixelCount});return J.updateStatistics(),J}function Uht(t,e={}){if(!Rr(t))return t;const{width:i,height:r,mask:s}=t,n=t.pixels[0],o=new Uint8Array(i*r);ee(s)&&o.set(s);const a=new Float32Array(i*r),{resolution:l}=e,u=l?1/l.x:1,c=l?1/l.y:1,d=1;let f,m,g,v,b,_,S,M;const x=ee(s);for(let T=d;T<r-d;T++){const I=T*i;for(let $=d;$<i-d;$++){if(s&&!s[I+$]){a[I+$]=0;continue}let L=0;if(x&&(L=s[I-i+$-1]+s[I-i+$]+s[I-i+$+1]+s[I+$-1]+s[I+$+1]+s[I+i+$-1]+s[I+i+$]+s[I+i+$+1],L<7)){a[I+$]=0,o[I+$]=0;continue}s&&L===7?(f=s[I-i+$-1]?n[I-i+$-1]:n[I+$],m=s[I-i+$]?n[I-i+$]:n[I+$],g=s[I-i+$+1]?n[I-i+$+1]:n[I+$],v=s[I+$-1]?n[I+$-1]:n[I+$],b=s[I+$+1]?n[I+$+1]:n[I+$],_=s[I+i+$-1]?n[I+i+$-1]:n[I+$],S=s[I+i+$]?n[I+i+$]:n[I+$],M=s[I+i+$+1]?n[I+i+$+1]:n[I+$]):(f=n[I-i+$-1],m=n[I-i+$],g=n[I-i+$+1],v=n[I+$-1],b=n[I+$+1],_=n[I+i+$-1],S=n[I+i+$],M=n[I+i+$+1]);const B=(g+b+b+M-(f+v+v+_))*u,z=(_+S+S+M-(f+m+m+g))*c;let H=-1;B===0&&z===0||(H=90-57.29578*Math.atan2(z,-B),H<0&&(H+=360),H===360?H=0:H>360&&(H%=360)),a[I+$]=H}}for(let T=0;T<r;T++)a[T*i]=a[T*i+1],a[(T+1)*i-1]=a[(T+1)*i-2];for(let T=1;T<i-1;T++)a[T]=a[T+i],a[T+(r-1)*i]=a[T+(r-2)*i];return new ui({width:i,height:r,pixels:[a],mask:s?o:null,pixelType:"f32",validPixelCount:t.validPixelCount,statistics:[{minValue:0,maxValue:360}]})}function WCe(t,e){const{attributeTable:i,bandCount:r}=t;return!(Re(i)||r>1||e&&i.fields.find(s=>s.name.toLowerCase()===e.toLowerCase())==null)}function JCe(t){const{bandCount:e,dataType:i,pixelType:r}=t;return i==="elevation"||i==="generic"&&e===1&&(r==="s16"||r==="f32"||r==="f64")}function ZCe(t){const{bandCount:e,colormap:i}=t;return ee(i)&&i.length>0&&e===1}let dg=class extends Je{constructor(e){super(e)}bind(){const{rendererJSON:e}=this;if(!e)return{success:!1};let i;switch(this.lookup={rendererJSON:{}},e.type){case"uniqueValue":i=this._updateUVRenderer(e);break;case"rasterColormap":i=this._updateColormapRenderer(e);break;case"rasterStretch":i=this._updateStretchRenderer(e);break;case"classBreaks":i=this._updateClassBreaksRenderer(e);break;case"rasterShadedRelief":i=this._updateShadedReliefRenderer(e);break;case"vectorField":i=this._updateVectorFieldRenderer();break;case"flowRenderer":i=this._updateFlowRenderer()}return i}symbolize(e){let i=e&&e.pixelBlock;if(!sq(i))return i;if(e.simpleStretchParams&&this.rendererJSON.type==="rasterStretch")return this.simpleStretch(i,e.simpleStretchParams);try{let r;switch(i.pixels.length>3&&(i=RG(i,[0,1,2])),this.rendererJSON.type){case"uniqueValue":case"rasterColormap":r=this._symbolizeColormap(i);break;case"classBreaks":r=this._symbolizeClassBreaks(i);break;case"rasterStretch":r=this._symbolizeStretch(i,e.bandIds);break;case"rasterShadedRelief":{const s=e.extent,n=s.spatialReference.isGeographic,o={x:(s.xmax-s.xmin)/i.width,y:(s.ymax-s.ymin)/i.height};r=this._symbolizeShadedRelief(i,{isGCS:n,resolution:o});break}}return r}catch(r){return tt.getLogger(this.declaredClass).error("symbolize",r.message),i}}simpleStretch(e,i){if(!sq(e))return e;try{return e.pixels.length>3&&(e=RG(e,[0,1,2])),sR(e,{...i,isRenderer:!0})}catch(r){return tt.getLogger(this.declaredClass).error("symbolize",r.message),e}}generateWebGLParameters(e){if(["uniqueValue","rasterColormap","classBreaks"].includes(this.rendererJSON.type)){const{indexedColormap:a,offset:l}=this.lookup.colormapLut||{};return{colormap:a,colormapOffset:l,type:"lut"}}const{pixelBlock:i,isGCS:r,resolution:s,bandIds:n}=e,{rendererJSON:o}=this;return o.type==="rasterStretch"?this._generateStretchWebGLParams(i,o,n):o.type==="rasterShadedRelief"?this._generateShadedReliefWebGLParams(o,r,s??void 0):o.type==="vectorField"?this._generateVectorFieldWebGLParams(o):null}_isLUTChanged(e){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const i=this.rendererJSON.colorRamp;return e?JSON.stringify(i)!==JSON.stringify(this.lookup.rendererJSON.colorRamp):(this.rendererJSON,this.lookup.rendererJSON,JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON))}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)}_symbolizeColormap(e){return this._isLUTChanged()&&!this.bind().success?e:WO(e,this.lookup.colormapLut)}_symbolizeClassBreaks(e){const{canUseIndexedLUT:i}=this._analyzeClassBreaks(this.rendererJSON);return this._isLUTChanged()&&!this.bind().success?e:i?WO(e,this.lookup.colormapLut):b5e(e,this.lookup.remapLut??[])}_symbolizeStretch(e,i){const{rasterInfo:r}=this,{pixelType:s,bandCount:n}=r,o=this.rendererJSON,a=["u8","u16","s8","s16"].includes(s);let l,u;const{dra:c}=o,{gamma:d}=this.lookup;if(o.stretchType==="histogramEqualization"){const f=c?null:this.lookup?.histogramLut,m=V_(o,{rasterInfo:r,pixelBlock:e,bandIds:i,returnHistogramLut:!f}),g=sR(e,{...m,gamma:d,isRenderer:!0});u=kG(g,{lut:c?m.histogramLut:f,offset:0})}else if(a){if(c){const f=V_(o,{rasterInfo:r,pixelBlock:e,bandIds:i});l=rq({pixelType:s,...f,gamma:d,rounding:"floor"})}else if(this._isLUTChanged()){if(!this.bind().success)return e;l=this.lookup?this.lookup.stretchLut:null}else l=this.lookup?this.lookup.stretchLut:null;if(!l)return e;n>1&&i?.length===e?.pixels.length&&l?.lut.length===n&&(l={lut:i.map(f=>l.lut[f]),offset:l.offset}),u=kG(e,l)}else{const f=V_(o,{rasterInfo:r,pixelBlock:e,bandIds:i});u=sR(e,{...f,gamma:d,isRenderer:!0})}if(o.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return e;u=WO(u,this.lookup?.colormapLut)}return u}_symbolizeShadedRelief(e,i){const r=this.rendererJSON,s={...r,...i},n=qCe(e,s);if(!r.colorRamp)return n;let o;if(this._isLUTChanged(!0)){if(!this.bind().success)return n;o=this.lookup?this.lookup.hsvMap:null}else o=this.lookup?this.lookup.hsvMap:null;if(!o)return n;const a=this.rasterInfo.statistics?.[0]??{min:0,max:8e3};return HCe(n,e,o,a),n}_isVectorFieldData(){const{bandCount:e,dataType:i}=this.rasterInfo;return e===2&&(i==="vector-magdir"||i==="vector-uv")}_updateVectorFieldRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".`}}_updateFlowRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; FlowRenderer only supports "vector-magdir" and "vector-uv".`}}_updateUVRenderer(e){const{bandCount:i,attributeTable:r,pixelType:s}=this.rasterInfo,n=e.field1;if(!n)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};const o=e.defaultSymbol,a=i===1&&["u8","s8"].includes(s);if(!WCe(this.rasterInfo,n)&&!a)return{success:!1,error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};const l=[];if(ee(r)){const c=r.fields.find(d=>d.name.toLowerCase()==="value");if(!c)return{success:!1,error:"Unsupported data; the data's raster attribute table does not have a value field."};r.features.forEach(d=>{const f=e.uniqueValueInfos?.find(g=>String(g.value)===String(d.attributes[n])),m=f?.symbol?.color;m?l.push([d.attributes[c.name]].concat(m)):o&&l.push([d.attributes[c.name]].concat(o.color))})}else{if(n.toLowerCase()!=="value")return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not availalbe.'};e.uniqueValueInfos?.forEach(c=>{const d=c?.symbol?.color;d?l.push([parseInt(""+c.value,10)].concat(d)):o&&l.push([parseInt(""+c.value,10)].concat(o?.color))})}if(l.length===0)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};const u=D_({colormap:l});return this.lookup={rendererJSON:e,colormapLut:u},this.canRenderInWebGL=!0,{success:!0}}_updateColormapRenderer(e){if(!ZCe(this.rasterInfo))return{success:!1,error:"Unsupported data; the data source does not have a colormap."};const i=e.colormapInfos.map(s=>[s.value].concat(s.color)).sort((s,n)=>s[0]-n[0]);if(!i||i.length===0)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};const r=D_({colormap:i});return this.lookup={rendererJSON:e,colormapLut:r},this.canRenderInWebGL=!0,{success:!0}}_updateShadedReliefRenderer(e){if(!JCe(this.rasterInfo))return{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; ShadedReliefRenderer only supports "elevation", or single band float/s16 data.`};if(e.colorRamp){const i=U0(e.colorRamp,{interpolateAlpha:!0}),r=D_({colormap:i}),s=[],n=r.indexedColormap;for(let o=0;o<n.length;o+=4){const a=o5({r:n[o],g:n[o+1],b:n[o+2]});s.push([a.h/60,a.s/100,255*a.v/100])}this.lookup={rendererJSON:e,colormapLut:r,hsvMap:s}}else this.lookup=null;return this.canRenderInWebGL=!0,{success:!0}}_analyzeClassBreaks(e){const{attributeTable:i,pixelType:r}=this.rasterInfo,s=ee(i)?i.fields.find(a=>a.name.toLowerCase()==="value"):null,n=ee(i)?i.fields.find(a=>a.name.toLowerCase()===e.field.toLowerCase()):null,o=s!=null&&n!==null;return{canUseIndexedLUT:["u8","u16","s8","s16"].includes(r)||o,tableValueField:s,tableBreakField:n}}_updateClassBreaksRenderer(e){const{attributeTable:i}=this.rasterInfo,{canUseIndexedLUT:r,tableValueField:s,tableBreakField:n}=this._analyzeClassBreaks(e),o=e.classBreakInfos;if(!o?.length)return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};const a=o.sort((f,m)=>f.classMaxValue-m.classMaxValue),l=a[a.length-1];let u=e.minValue;if(!r){const f=[];for(let m=0;m<a.length;m++)f.push({value:a[m].classMinValue??u,mappedColor:a[m].symbol.color}),u=a[m].classMaxValue;return f.push({value:l.classMaxValue,mappedColor:l.symbol.color}),this.lookup={rendererJSON:e,remapLut:f},this.canRenderInWebGL=!1,{success:!0}}const c=[];if(ee(i)&&s!=null&&n!==null&&s!==n){const f=s.name,m=n.name,g=a[a.length-1],{classMaxValue:v}=g;u=e.minValue;for(const b of i.features){const _=b.attributes[f],S=b.attributes[m],M=S===v?g:S<u?null:a.find(({classMaxValue:x})=>x>S);M&&c.push([_].concat(M.symbol.color))}}else{u=Math.floor(e.minValue);for(let f=0;f<a.length;f++){const m=a[f];for(let g=u;g<m.classMaxValue;g++)c.push([g].concat(m.symbol.color));u=Math.ceil(m.classMaxValue)}l.classMaxValue===u&&c.push([l.classMaxValue].concat(l.symbol.color))}const d=D_({colormap:c,fillUnspecified:!1});return this.lookup={rendererJSON:e,colormapLut:d},this.canRenderInWebGL=!0,{success:!0}}_isHistogramRequired(e){return e==="percentClip"||e==="histogramEqualization"}_isValidRasterStatistics(e){return ee(e)&&e.length>0&&e[0].min!=null&&e[0].max!=null}_updateStretchRenderer(e){let{stretchType:i,dra:r}=e;if(!(i==="none"||e.statistics?.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||r))return{success:!1,error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};const s=e.histograms||this.rasterInfo.histograms;!this._isHistogramRequired(e.stretchType)||s?.length||r||(i="minMax");const{computeGamma:n,useGamma:o,colorRamp:a}=e;let{gamma:l}=e;if(o&&n&&!l?.length){const d=e.statistics?.length?e.statistics:this.rasterInfo.statistics;l=VCe(this.rasterInfo.pixelType,d)}const u=this.rasterInfo.pixelType,c=!r&&["u8","u16","s8","s16"].includes(u);if(i==="histogramEqualization"){const d=s.map(f=>vne(f));this.lookup={rendererJSON:e,histogramLut:d}}else if(c){const d=V_(e,{rasterInfo:this.rasterInfo}),f=rq({pixelType:u,...d,gamma:o?l:null,rounding:"floor"});this.lookup={rendererJSON:e,stretchLut:f}}if(a){const d=U0(a,{interpolateAlpha:!0});this.lookup||(this.lookup={rendererJSON:e}),this.lookup.colormapLut=D_({colormap:d}),this.lookup.rendererJSON=e}return this.lookup.gamma=o&&l?.length?l:null,this.canRenderInWebGL=!0,{success:!0}}_generateStretchWebGLParams(e,i,r){let s=null,n=null;const o=this.lookup&&this.lookup.colormapLut;i.colorRamp&&o&&(s=o.indexedColormap,n=o.offset),i.stretchType==="histogramEqualization"&&(i={...i,stretchType:"minMax"});const{gamma:a}=this.lookup,l=!!(i.useGamma&&a&&a.some(x=>x!==1)),{minCutOff:u,maxCutOff:c,outMin:d,outMax:f}=V_(i,{rasterInfo:this.rasterInfo,pixelBlock:e,bandIds:r});let m=0;ee(e)&&(m=e.getPlaneCount(),m===2&&((e=e.clone()).statistics=[e.statistics[0]],e.pixels=[e.pixels[0]]));const{bandCount:g}=this.rasterInfo,v=Math.min(3,r?.length||m||g,g),b=new Float32Array(v),_=s||l?1:255;let S;for(S=0;S<u.length;S++)b[S]=c[S]===u[S]?0:(f-d)/(c[S]-u[S])/_;const M=new Float32Array(v);if(l&&a)for(S=0;S<v;S++)a[S]>1?a[S]>2?M[S]=6.5+(a[S]-2)**2.5:M[S]=6.5+100*(2-a[S])**4:M[S]=1;return{bandCount:v,outMin:d/_,outMax:f/_,minCutOff:u,maxCutOff:c,factor:b,useGamma:l,gamma:l?a:[1,1,1],gammaCorrection:l?M:[1,1,1],colormap:s,colormapOffset:n,stretchType:i.stretchType,type:"stretch"}}_generateShadedReliefWebGLParams(e,i=!1,r={x:0,y:0}){let s=null,n=null;const o=this.lookup&&this.lookup.colormapLut;e.colorRamp&&o&&(s=o.indexedColormap,n=o.offset);const a={...e,isGCS:i,resolution:r},l=wne(a),u=this.rasterInfo.statistics?.[0];return{...l,minValue:u?.min??0,maxValue:u?.max??8e3,hillshadeType:e.hillshadeType==="traditional"?0:1,type:"hillshade",colormap:s,colormapOffset:n}}_generateVectorFieldWebGLParams(e){const{style:i,inputUnit:r,outputUnit:s,visualVariables:n,symbolTileSize:o,flowRepresentation:a}=e;let l;const u=this.rasterInfo.statistics?.[0].min??0,c=this.rasterInfo.statistics?.[0].max??50,d=n?.find(S=>S.type==="sizeInfo")??{type:"sizeInfo",field:"Magnitude",maxDataValue:c,maxSize:.8*o,minDataValue:u,minSize:.2*o},f=d.minDataValue??u,m=d.maxDataValue??c,g=ee(d.maxSize)&&ee(d.minSize)?[d.minSize/o,d.maxSize/o]:[.2,.8];if(i==="wind_speed"){const S=(g[0]+g[1])/2;g[0]=g[1]=S}const v=ee(f)&&ee(m)?[f,m]:null;if(i==="classified_arrow")if(ee(f)&&ee(m)&&ee(d)){l=[];const S=(d.maxDataValue-d.minDataValue)/5;for(let M=0;M<6;M++)l.push(d.minDataValue+S*M)}else l=[0,1e-6,3.5,7,10.5,14];const b=a==="flow_to"==(i==="ocean_current_kn"||i==="ocean_current_m")?0:Math.PI,_=n?.find(S=>S.type==="rotationInfo");return{breakValues:l,dataRange:v,inputUnit:r,outputUnit:s,symbolTileSize:o,symbolPercentRange:g,style:i||"single_arrow",rotation:b,rotationType:this.rasterInfo.storageInfo?.tileInfo&&this.rasterInfo.dataType==="vector-uv"?"geographic":_?.rotationType||e.rotationType,type:"vectorField"}}};function sq(t){return Rr(t)&&t.validPixelCount!==0}h([p({json:{write:!0}})],dg.prototype,"rendererJSON",void 0),h([p({type:Q3,json:{write:!0}})],dg.prototype,"rasterInfo",void 0),h([p({json:{write:!0}})],dg.prototype,"lookup",void 0),h([p()],dg.prototype,"canRenderInWebGL",void 0),dg=h([ce("esri.renderers.support.RasterSymbolizer")],dg);const YCe=dg;let Tv=class extends Je{constructor(e){super(e),this.north=null,this.up=null,this.spatialReference=null}};h([p({type:Number,json:{write:!0}})],Tv.prototype,"north",void 0),h([p({type:Number,json:{write:!0}})],Tv.prototype,"up",void 0),h([p({type:Tt,json:{write:!0}})],Tv.prototype,"spatialReference",void 0),Tv=h([ce("esri.rest.support.ImageAngleResult")],Tv);const KCe=Tv;let Zf=class extends Je{constructor(){super(...arguments),this.value=null,this.displayValue=null,this.uncertainty=null}};h([p({type:Number,json:{read:!0,write:!0}})],Zf.prototype,"value",void 0),h([p({type:String,json:{read:!0,write:!0}})],Zf.prototype,"displayValue",void 0),h([p({type:Number,json:{read:!0,write:!0}})],Zf.prototype,"uncertainty",void 0),Zf=h([ce("esri.rest.support.ImageMeasureResultValue")],Zf);let Mb=class extends Zf{constructor(){super(...arguments),this.unit=null}};h([p({type:String,json:{read:up.read,write:up.write}})],Mb.prototype,"unit",void 0),Mb=h([ce("esri.rest.support.ImageMeasureResultLengthValue")],Mb);let IM=class extends Zf{constructor(){super(...arguments),this.unit=null}};h([p({type:String,json:{read:SS.read,write:SS.write}})],IM.prototype,"unit",void 0),IM=h([ce("esri.rest.support.ImageMeasureResultAreaValue")],IM);let Wx=class extends Zf{constructor(){super(...arguments),this.unit=null}};h([p({type:String,json:{read:RA.read,write:RA.write}})],Wx.prototype,"unit",void 0),Wx=h([ce("esri.rest.support.ImageMeasureResultAngleValue")],Wx);let rm=class extends Je{constructor(){super(...arguments),this.name=null,this.sensorName=null}};h([p({type:String,json:{read:!0,write:!0}})],rm.prototype,"name",void 0),h([p({type:String,json:{read:!0,write:!0}})],rm.prototype,"sensorName",void 0),rm=h([ce("esri.rest.support.BaseImageMeasureResult")],rm);let ex=class extends rm{constructor(){super(...arguments),this.area=null,this.perimeter=null}};h([p({type:IM,json:{read:!0,write:!0}})],ex.prototype,"area",void 0),h([p({type:Mb,json:{read:!0,write:!0}})],ex.prototype,"perimeter",void 0),ex=h([ce("esri.rest.support.ImageAreaResult")],ex);const QCe=ex;let Iv=class extends rm{constructor(){super(...arguments),this.distance=null,this.azimuthAngle=null,this.elevationAngle=null}};h([p({type:Mb,json:{read:!0,write:!0}})],Iv.prototype,"distance",void 0),h([p({type:Wx,json:{read:!0,write:!0}})],Iv.prototype,"azimuthAngle",void 0),h([p({type:Wx,json:{read:!0,write:!0}})],Iv.prototype,"elevationAngle",void 0),Iv=h([ce("esri.rest.support.ImageDistanceResult")],Iv);const XCe=Iv;let MM=class extends rm{constructor(){super(...arguments),this.height=null}};h([p({type:Mb,json:{read:!0,write:!0}})],MM.prototype,"height",void 0),MM=h([ce("esri.rest.support.ImageHeightResult")],MM);const e$e=MM;let tc=class extends Je{constructor(){super(...arguments),this.catalogItemVisibilities=null,this.catalogItems=null,this.location=null,this.name=null,this.objectId=null,this.processedValues=null,this.properties=null,this.value=null}};h([p({json:{write:!0}})],tc.prototype,"catalogItemVisibilities",void 0),h([p({type:n1,json:{write:!0}})],tc.prototype,"catalogItems",void 0),h([p({type:Ct,json:{write:!0}})],tc.prototype,"location",void 0),h([p({json:{write:!0}})],tc.prototype,"name",void 0),h([p({json:{write:!0}})],tc.prototype,"objectId",void 0),h([p({json:{write:!0}})],tc.prototype,"processedValues",void 0),h([p({json:{write:!0}})],tc.prototype,"properties",void 0),h([p({json:{write:!0}})],tc.prototype,"value",void 0),tc=h([ce("esri.rest.support.ImageIdentifyResult")],tc);const t$e=tc;let AM=class extends Je{constructor(){super(...arguments),this.geometries=null}};h([p({json:{write:!0}})],AM.prototype,"geometries",void 0),AM=h([ce("esri.rest.support.ImagePixelLocationResult")],AM);const i$e=AM;let CM=class extends rm{constructor(){super(...arguments),this.point=null}};h([p({type:Ct,json:{name:"point.value",read:!0,write:!0}})],CM.prototype,"point",void 0),CM=h([ce("esri.rest.support.ImagePointResult")],CM);const r$e=CM;let Md=class extends Je{constructor(){super(...arguments),this.attributes=null,this.location=null,this.locationId=null,this.rasterId=null,this.resolution=null,this.pixelValue=null}};h([p({json:{write:!0}})],Md.prototype,"attributes",void 0),h([p({type:Ct,json:{write:!0}})],Md.prototype,"location",void 0),h([p({json:{write:!0}})],Md.prototype,"locationId",void 0),h([p({json:{write:!0}})],Md.prototype,"rasterId",void 0),h([p({json:{write:!0}})],Md.prototype,"resolution",void 0),h([p({json:{write:!0}})],Md.prototype,"pixelValue",void 0),Md=h([ce("esri.rest.support.ImageSample")],Md);const s$e=Md;let $M=class extends Je{constructor(){super(...arguments),this.samples=null}};h([p({type:[s$e],json:{write:!0}})],$M.prototype,"samples",void 0),$M=h([ce("esri.rest.support.ImageSampleResult")],$M);const n$e=$M;function _ne(t){const e=t?.time;if(e&&(e.start!=null||e.end!=null)){const i=[];e.start!=null&&i.push(e.start),e.end==null||i.includes(e.end)||i.push(e.end),t.time=i.join(",")}}async function xne(t,e,i){const r=Kn(t),s=e.geometry?[e.geometry]:[],n=await h1(s),o=e.toJSON();_ne(o);const a=n&&n[0];ee(a)&&(o.geometry=a.toJSON());const l=Ap({...r.query,f:"json",...o});return Xm(l,i)}async function o$e(t,e,i){const r=e.toJSON();ee(r.angleName)&&(r.angleName=r.angleName.join(",")),ee(e.point)&&e.point.spatialReference?.imageCoordinateSystem&&(r.point.spatialReference=MC(e.point.spatialReference)),ee(e.spatialReference)&&e.spatialReference.imageCoordinateSystem&&(r.spatialReference=Sne(e.spatialReference));const s=Kn(t),n=Ap({...s.query,f:"json",...r}),o=Xm(n,i),{data:a}=await Et(`${s.path}/computeAngles`,o);return a.spatialReference=a.spatialReference?a.spatialReference.geodataXform!=null?new Tt({wkid:0,imageCoordinateSystem:a.spatialReference}):Tt.fromJSON(a.spatialReference):null,a.north==="NaN"&&(a.north=null),a.up==="NaN"&&(a.up=null),new KCe(a)}async function a$e(t,e,i){const r=e.toJSON(),{geometries:s}=e;if(s)for(let u=0;u<s.length;u++)s[u].spatialReference?.imageCoordinateSystem&&(r.geometries.geometries[u].spatialReference=MC(s[u].spatialReference));const n=Kn(t),o=Ap({...n.query,f:"json",...r}),a=Xm(o,i),{data:l}=await Et(`${n.path}/computePixelLocation`,a);return i$e.fromJSON(l)}async function l$e(t,e,i){const r=await xne(t,e,i),s=Kn(t),{data:n}=await Et(`${s.path}/computeStatisticsHistograms`,r),{statistics:o}=n;return o?.length&&o.forEach(a=>{a.avg=a.mean,a.stddev=a.standardDeviation}),{statistics:o,histograms:n.histograms}}async function u$e(t,e,i){const r=await xne(t,e,i),s=Kn(t),{data:n}=await Et(`${s.path}/computeHistograms`,r);return{histograms:n.histograms}}async function c$e(t,e,i){const r=e.toJSON();_ne(r),r.outFields?.length&&(r.outFields=r.outFields.join(","));const s=(await h1(e.geometry))?.[0];ee(s)&&(r.geometry=s.toJSON());const n=Kn(t),o=Ap({...n.query,f:"json",...r}),a=Xm(o,i),{data:l}=await Et(`${n.path}/getSamples`,a),u=l?.samples?.map(c=>{const d=c.value==="NaN"||c.value===""?null:c.value.split(" ").map(f=>Number(f));return{...c,pixelValue:d}});return n$e.fromJSON({samples:u})}async function nq(t,e,i){const r=Kn(t),s=e.geometry?[e.geometry]:[];return h1(s).then(n=>{const o=e.toJSON(),a=n&&n[0];ee(a)&&(o.geometry=JSON.stringify(a.toJSON()));const l=Ap({...r.query,f:"json",...o}),u=Xm(l,i);return Et(r.path+"/identify",u)}).then(n=>t$e.fromJSON(n.data))}async function h$e(t,e,i){const r=await IC(t,e,[e.fromGeometry,e.toGeometry],i);return e$e.fromJSON(r)}async function d$e(t,e,i){const r=await IC(t,e,[e.geometry],i);return QCe.fromJSON(r)}async function p$e(t,e,i){const r=await IC(t,e,[e.geometry],i);return r$e.fromJSON(r)}async function f$e(t,e,i){const r=await IC(t,e,[e.fromGeometry,e.toGeometry],i);return XCe.fromJSON(r)}async function IC(t,e,i,r){const s=Kn(t),n=await h1(i),o=e.toJSON();ee(n[0])&&(o.fromGeometry=JSON.stringify(oq(n[0]))),ee(n[1])&&(o.toGeometry=JSON.stringify(oq(n[1])));const a=Ap({...s.query,f:"json",...o}),l=Xm(a,r),{data:u}=await Et(s.path+"/measure",l);return u}function oq(t){const e=t.toJSON();return t.spatialReference?.imageCoordinateSystem&&(e.spatialReference=MC(t.spatialReference)),e}function MC(t){const{imageCoordinateSystem:e}=t;if(e){const{id:i,referenceServiceName:r}=e;return i!=null?r?{icsid:i,icsns:r}:{icsid:i}:{ics:e}}return t.toJSON()}function Sne(t,e){const i=MC(t),{icsid:r,icsns:s,wkid:n}=i;return r!=null?s==null||e?.toLowerCase().includes("/"+s.toLowerCase()+"/")?`0:${r}`:JSON.stringify(i):n?n.toString():JSON.stringify(i)}function Ene(t){const e={};for(const i in t){if(i==="declaredClass")continue;const r=t[i];if(r!=null&&typeof r!="function")if(Array.isArray(r)){e[i]=[];for(let s=0;s<r.length;s++)e[i][s]=Ene(r[s])}else typeof r=="object"?r.toJSON&&(e[i]=JSON.stringify(r)):e[i]=r}return e}var Vf;(function(t){t[t.varint=0]="varint",t[t.fixed64=1]="fixed64",t[t.delimited=2]="delimited",t[t.fixed32=5]="fixed32",t[t.unknown=99]="unknown"})(Vf||(Vf={}));const aq=4294967296,m$e=new TextDecoder("utf-8"),y$e=Ze("safari")||Ze("ios")?6:Ze("ff")?12:32;let C6=class OM{constructor(e,i,r=0,s=e?e.byteLength:0){this._tag=0,this._dataType=Vf.unknown,this._init(e,i,r,s)}_init(e,i,r,s){this._data=e,this._dataView=i,this._pos=r,this._end=s}asUnsafe(){return this}clone(){return new OM(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(e){this._pos=e}nextTag(e){for(;;){if(this._pos===this._end)return!1;const i=this._decodeVarint();if(this._tag=i>>3,this._dataType=7&i,!e||e===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const e=this._decodeVarint();return this._tag=e>>3,this._dataType=7&e,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let e=4294967295;return e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?e:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const e=this.getUInt32();if(e!==void 0)return e>>>1^-(1&e)|0}getSInt64(){return this._decodeSVarint()}getBool(){const e=this._data[this._pos]!==0;return this._skip(1),e}getEnum(){return this._decodeVarint()}getFixed64(){const e=this._dataView,i=this._pos,r=e.getUint32(i,!0)+e.getUint32(i+4,!0)*aq;return this._skip(8),r}getSFixed64(){const e=this._dataView,i=this._pos,r=e.getUint32(i,!0)+e.getInt32(i+4,!0)*aq;return this._skip(8),r}getDouble(){const e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e}getFixed32(){const e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e}getSFixed32(){const e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e}getFloat(){const e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e}getString(){const e=this._getLength(),i=this._pos,r=this._toString(this._data,i,i+e);return this._skip(e),r}getBytes(){const e=this._getLength(),i=this._pos,r=this._toBytes(this._data,i,i+e);return this._skip(e),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(e,i,r,s){const n=this.getMessage(),o=e(n,i,r,s);return n.release(),o}processMessage(e){const i=this.getMessage(),r=e(i);return i.release(),r}getMessage(){const e=this._getLength(),i=OM.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+e),this._skip(e),i}release(){OM.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case Vf.varint:this._decodeVarint();break;case Vf.fixed64:this._skip(8);break;case Vf.delimited:this._skip(this._getLength());break;case Vf.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(e){this._skip(e)}_skip(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e}_decodeVarint(){const e=this._data;let i=this._pos,r=0,s=0;if(this._end-i>=10)do{if(s=e[i++],r|=127&s,(128&s)==0||(s=e[i++],r|=(127&s)<<7,(128&s)==0)||(s=e[i++],r|=(127&s)<<14,(128&s)==0)||(s=e[i++],r|=(127&s)<<21,(128&s)==0)||(s=e[i++],r+=268435456*(127&s),(128&s)==0)||(s=e[i++],r+=34359738368*(127&s),(128&s)==0)||(s=e[i++],r+=4398046511104*(127&s),(128&s)==0)||(s=e[i++],r+=562949953421312*(127&s),(128&s)==0)||(s=e[i++],r+=72057594037927940*(127&s),(128&s)==0)||(s=e[i++],r+=9223372036854776e3*(127&s),(128&s)==0))break;throw new Error("Varint too long!")}while(0);else{let n=1;for(;i!==this._end&&(s=e[i],(128&s)!=0);)++i,r+=(127&s)*n,n*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=s*n}return this._pos=i,r}_decodeSVarint(){const e=this._data;let i=this._pos,r=0,s=0;const n=1&e[i];if(this._end-i>=10)do{if(s=e[i++],r|=127&s,(128&s)==0||(s=e[i++],r|=(127&s)<<7,(128&s)==0)||(s=e[i++],r|=(127&s)<<14,(128&s)==0)||(s=e[i++],r|=(127&s)<<21,(128&s)==0)||(s=e[i++],r+=268435456*(127&s),(128&s)==0)||(s=e[i++],r+=34359738368*(127&s),(128&s)==0)||(s=e[i++],r+=4398046511104*(127&s),(128&s)==0)||(s=e[i++],r+=562949953421312*(127&s),(128&s)==0)||(s=e[i++],r+=72057594037927940*(127&s),(128&s)==0)||(s=e[i++],r+=9223372036854776e3*(127&s),(128&s)==0))break;throw new Error("Varint too long!")}while(0);else{let o=1;for(;i!==this._end&&(s=e[i],(128&s)!=0);)++i,r+=(127&s)*o,o*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=s*o}return this._pos=i,n?-(r+1)/2:r/2}_getLength(){if(this._dataType!==Vf.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(e,i,r){if((r=Math.min(this._end,r))-i>y$e){const o=e.subarray(i,r);return m$e.decode(o)}let s="",n="";for(let o=i;o<r;++o){const a=e[o];128&a?n+="%"+a.toString(16):(s+=decodeURIComponent(n)+String.fromCharCode(a),n="")}return n.length&&(s+=decodeURIComponent(n)),s}_toBytes(e,i,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,i,r-i)}};C6.pool=new Bm(C6,void 0,t=>{t._data=null,t._dataView=null});let Ec=class RM{constructor(e=[],i=[],r=!1){this.lengths=e??[],this.coords=i??[],this.hasIndeterminateRingOrder=r}static fromRect(e){const[i,r,s,n]=e,o=s-i,a=n-r;return new RM([5],[i,r,o,0,0,a,-o,0,0,-a])}get isPoint(){return this.lengths.length===0}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((e,i)=>e+i)}forEachVertex(e){let i=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const s=this.lengths[r];for(let n=0;n<s;n++)e(this.coords[2*(n+i)],this.coords[2*(n+i)+1]);i+=s}}clone(e){return e?(e.set(this.coords),new RM(this.lengths.slice(),e,this.hasIndeterminateRingOrder)):new RM(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}},Om=class Tne{constructor(e=null,i={},r,s){this.geometry=e,this.attributes=i,this.centroid=r,this.objectId=s,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const e=new Tne(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e.geohashX=this.geohashX,e.geohashY=this.geohashY,e}};function g$e(t){return!(Re(t.geometry)||!t.geometry.coords||!t.geometry.coords.length)}let idt=class extends Om{},Ine=class Mne{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const e=new Mne;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}};const Ane=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let sdt=class{constructor(e){this._options=e,this.geometryTypes=Ane,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new Ine}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(e){if(!e||!e.features||!e.hasZ||!this._options.sourceSpatialReference||!e.spatialReference||bs(e.spatialReference,this._options.sourceSpatialReference)||e.spatialReference.vcsWkid)return;const i=Gb(this._options.sourceSpatialReference)/Gb(e.spatialReference);if(i!==1)for(const r of e.features){if(!g$e(r))continue;const s=r.geometry.coords;for(let n=2;n<s.length;n+=3)s[n]*=i}}addFeature(e,i){e.features.push(i)}createFeature(){return new Om}createSpatialReference(){return{wkid:0}}createGeometry(){return new Ec}addField(e,i){e.fields.push(i)}allocateCoordinates(e){e.coords.length=e.lengths.reduce((i,r)=>i+r,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,i){e.coords[this._coordinatePtr++]=i}addCoordinatePoint(e,i){e.coords.push(i)}addLength(e,i){e.lengths.push(i)}addQueryGeometry(e,i){e.queryGeometry=i.queryGeometry,e.queryGeometryType=i.queryGeometryType}createPointGeometry(){return new Ec}};const lq=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],uq=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],cq=["upperLeft","lowerLeft"];function hq(t){return t>=lq.length?null:lq[t]}function v$e(t){return t>=uq.length?null:uq[t]}function dq(t){return t>=cq.length?null:cq[t]}function pq(t,e){return e>=t.geometryTypes.length?null:t.geometryTypes[e]}function b$e(t,e,i){const s=t.asUnsafe(),n=e.createPointGeometry(i);for(;s.next();)switch(s.tag()){case 3:{const o=s.getUInt32(),a=s.pos()+o;let l=0;for(;s.pos()<a;)e.addCoordinatePoint(n,s.getSInt64(),l++);break}default:s.skip()}return n}function w$e(t,e,i){const n=t.asUnsafe(),o=e.createGeometry(i),a=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;n.next();)switch(n.tag()){case 2:{const l=n.getUInt32(),u=n.pos()+l;let c=0;for(;n.pos()<u;)e.addLength(o,n.getUInt32(),c++);break}case 3:{const l=n.getUInt32(),u=n.pos()+l;let c=0;for(e.allocateCoordinates(o);n.pos()<u;)e.addCoordinate(o,n.getSInt64(),c),c++,c===a&&(c=0);break}default:n.skip()}return o}function _$e(t){const s=t.asUnsafe(),n=new Ec;let o="esriGeometryPoint";for(;s.next();)switch(s.tag()){case 2:{const a=s.getUInt32(),l=s.pos()+a;for(;s.pos()<l;)n.lengths.push(s.getUInt32());break}case 3:{const a=s.getUInt32(),l=s.pos()+a;for(;s.pos()<l;)n.coords.push(s.getSInt64());break}case 1:o=Ane[s.getEnum()];break;default:s.skip()}return{queryGeometry:n,queryGeometryType:o}}function x$e(t){const c=t.asUnsafe();for(;c.next();)switch(c.tag()){case 1:return c.getString();case 2:return c.getFloat();case 3:return c.getDouble();case 4:return c.getSInt32();case 5:return c.getUInt32();case 6:return c.getInt64();case 7:return c.getUInt64();case 8:return c.getSInt64();case 9:return c.getBool();default:return c.skip(),null}return null}function S$e(t){const a=t.asUnsafe(),l={type:hq(0)};for(;a.next();)switch(a.tag()){case 1:l.name=a.getString();break;case 2:l.type=hq(a.getEnum());break;case 3:l.alias=a.getString();break;case 4:l.sqlType=v$e(a.getEnum());break;case 5:a.skip();break;case 6:l.defaultValue=a.getString();break;default:a.skip()}return l}function E$e(t){const r={},s=t.asUnsafe();for(;s.next();)switch(s.tag()){case 1:r.name=s.getString();break;case 2:r.isSystemMaintained=s.getBool();break;default:s.skip()}return r}function T$e(t,e,i,r){const a=e.createFeature(i);let l=0;for(;t.next();)switch(t.tag()){case 1:{const u=r[l++].name;a.attributes[u]=t.processMessage(x$e);break}case 2:a.geometry=t.processMessageWithArgs(w$e,e,i);break;case 4:a.centroid=t.processMessageWithArgs(b$e,e,i);break;default:t.skip()}return a}function I$e(t){const n=[1,1,1,1],o=t.asUnsafe();for(;o.next();)switch(o.tag()){case 1:n[0]=o.getDouble();break;case 2:n[1]=o.getDouble();break;case 4:n[2]=o.getDouble();break;case 3:n[3]=o.getDouble();break;default:o.skip()}return n}function M$e(t){const n=[0,0,0,0],o=t.asUnsafe();for(;o.next();)switch(o.tag()){case 1:n[0]=o.getDouble();break;case 2:n[1]=o.getDouble();break;case 4:n[2]=o.getDouble();break;case 3:n[3]=o.getDouble();break;default:o.skip()}return n}function A$e(t){const s={originPosition:dq(0)},n=t.asUnsafe();for(;n.next();)switch(n.tag()){case 1:s.originPosition=dq(n.getEnum());break;case 2:s.scale=n.processMessage(I$e);break;case 3:s.translate=n.processMessage(M$e);break;default:n.skip()}return s}function C$e(t){const s={},n=t.asUnsafe();for(;n.next();)switch(n.tag()){case 1:s.shapeAreaFieldName=n.getString();break;case 2:s.shapeLengthFieldName=n.getString();break;case 3:s.units=n.getString();break;default:n.skip()}return s}function $$e(t,e){const a=e.createSpatialReference();for(;t.next();)switch(t.tag()){case 1:a.wkid=t.getUInt32();break;case 5:a.wkt=t.getString();break;case 2:a.latestWkid=t.getUInt32();break;case 3:a.vcsWkid=t.getUInt32();break;case 4:a.latestVcsWkid=t.getUInt32();break;default:t.skip()}return a}function O$e(t,e){const v=e.createFeatureResult(),b=t.asUnsafe();v.geometryType=pq(e,0);let _=!1;for(;b.next();)switch(b.tag()){case 1:v.objectIdFieldName=b.getString();break;case 3:v.globalIdFieldName=b.getString();break;case 4:v.geohashFieldName=b.getString();break;case 5:v.geometryProperties=b.processMessage(C$e);break;case 7:v.geometryType=pq(e,b.getEnum());break;case 8:v.spatialReference=b.processMessageWithArgs($$e,e);break;case 10:v.hasZ=b.getBool();break;case 11:v.hasM=b.getBool();break;case 12:v.transform=b.processMessage(A$e);break;case 9:{const S=b.getBool();v.exceededTransferLimit=S;break}case 13:e.addField(v,b.processMessage(S$e));break;case 15:_||(e.prepareFeatures(v),_=!0),e.addFeature(v,b.processMessageWithArgs(T$e,e,v,v.fields));break;case 2:v.uniqueIdField=b.processMessage(E$e);break;default:b.skip()}return e.finishFeatureResult(v),v}function R$e(t,e){const s={};let n=null;for(;t.next();)switch(t.tag()){case 4:n=t.processMessageWithArgs(_$e);break;case 1:s.featureResult=t.processMessageWithArgs(O$e,e);break;default:t.skip()}return ee(n)&&s.featureResult&&e.addQueryGeometry(s,n),s}function k$e(t,e){try{const r=new C6(new Uint8Array(t),new DataView(t)),s={};for(;r.next();)r.tag()===2?s.queryResult=r.processMessageWithArgs(R$e,e):r.skip();return s}catch(i){throw new Ce("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}function L$e(t,e){const i=k$e(t,e),r=i.queryResult.featureResult,s=i.queryResult.queryGeometry,n=i.queryResult.queryGeometryType;if(r&&r.features&&r.features.length&&r.objectIdFieldName){const o=r.objectIdFieldName;for(const a of r.features)a.attributes&&(a.objectId=a.attributes[o])}return r&&(r.queryGeometry=s,r.queryGeometryType=n),r}const fq="Layer does not support extent calculation.";function P$e(t,e){if(e&&t.type==="extent")return`${t.xmin},${t.ymin},${t.xmax},${t.ymax}`;if(e&&t.type==="point")return`${t.x},${t.y}`;const i=t.toJSON();return delete i.spatialReference,JSON.stringify(i)}function N$e(t,e){const i=t.geometry,r=t.toJSON();delete r.compactGeometryEnabled,delete r.defaultSpatialReferenceEnabled;const s=r;let n,o,a;if(ee(i)&&(o=i.spatialReference,a=i.spatialReference.wkid||JSON.stringify(i.spatialReference),s.geometryType=Mc(i),s.geometry=P$e(i,t.compactGeometryEnabled),s.inSR=a),r.groupByFieldsForStatistics&&(s.groupByFieldsForStatistics=r.groupByFieldsForStatistics.join(",")),r.objectIds&&(s.objectIds=r.objectIds.join(",")),r.orderByFields&&(s.orderByFields=r.orderByFields.join(",")),!r.outFields||!r.returnDistinctValues&&(e?.returnCountOnly||e?.returnExtentOnly||e?.returnIdsOnly)?delete s.outFields:r.outFields.includes("*")?s.outFields="*":s.outFields=r.outFields.join(","),r.outSR?(s.outSR=r.outSR.wkid||JSON.stringify(r.outSR),n=t.outSpatialReference):i&&(r.returnGeometry||r.returnCentroid)&&(s.outSR=s.inSR,n=o),r.returnGeometry&&delete r.returnGeometry,r.outStatistics&&(s.outStatistics=JSON.stringify(r.outStatistics)),r.fullText&&(s.fullText=JSON.stringify(r.fullText)),r.pixelSize&&(s.pixelSize=JSON.stringify(r.pixelSize)),r.quantizationParameters&&(t.defaultSpatialReferenceEnabled&&ee(o)&&ee(t.quantizationParameters)&&ee(t.quantizationParameters.extent)&&o.equals(t.quantizationParameters.extent.spatialReference)&&delete r.quantizationParameters.extent.spatialReference,s.quantizationParameters=JSON.stringify(r.quantizationParameters)),r.parameterValues&&(s.parameterValues=JSON.stringify(r.parameterValues)),r.rangeValues&&(s.rangeValues=JSON.stringify(r.rangeValues)),r.dynamicDataSource&&(s.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r.timeExtent){const l=r.timeExtent,{start:u,end:c}=l;u==null&&c==null||(s.time=u===c?u:`${u??"null"},${c??"null"}`),delete r.timeExtent}return t.defaultSpatialReferenceEnabled&&ee(o)&&ee(n)&&o.equals(n)&&(s.defaultSR=s.inSR,delete s.inSR,delete s.outSR),s}async function F$e(t,e,i,r){const s=ee(e.timeExtent)&&e.timeExtent.isEmpty?{data:{features:[]}}:await X3(t,e,"json",r);return d8(e,i,s.data),s}async function D$e(t,e,i,r){if(ee(e.timeExtent)&&e.timeExtent.isEmpty)return{data:i.createFeatureResult()};const s=await j$e(t,e,r),n=s;return n.data=L$e(s.data,i),n}function j$e(t,e,i){return X3(t,e,"pbf",i)}function U$e(t,e,i){return ee(e.timeExtent)&&e.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):X3(t,e,"json",i,{returnIdsOnly:!0})}function V$e(t,e,i){return ee(e.timeExtent)&&e.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):X3(t,e,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}function B$e(t,e,i){return ee(e.timeExtent)&&e.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):X3(t,e,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}).then(r=>{const s=r.data;if(s.hasOwnProperty("extent"))return r;if(s.features)throw new Error(fq);if(s.hasOwnProperty("count"))throw new Error(fq);return r})}function X3(t,e,i,r={},s={}){const n=typeof t=="string"?Fs(t):t,o=e.geometry?[e.geometry]:[];return r.responseType=i==="pbf"?"array-buffer":"json",h1(o,null,r).then(a=>{const l=a&&a[0];ee(l)&&((e=e.clone()).geometry=l);const u=Ene({...n.query,f:i,...s,...N$e(e,s)});return Et($0(n.path,"query"),{...r,query:{...u,...r.query}})})}async function kM(t,e,i){const r=await Cne(t,e,i);return n1.fromJSON(r)}async function Cne(t,e,i){const r=Kn(t),s={...i},n=Ls.from(e),{data:o}=await F$e(r,n,n.sourceSpatialReference,s);return o}function Zn(t,e){return t?e?4:3:e?3:2}const r_=tt.getLogger("esri.layers.graphics.featureConversionUtils"),$ne={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},z$e=(t,e,i,r,s,n)=>{t[i]=s,t[i+1]=n},mq=(t,e,i,r,s,n)=>{t[i]=s,t[i+1]=n,t[i+2]=e[r+2]},G$e=(t,e,i,r,s,n)=>{t[i]=s,t[i+1]=n,t[i+2]=e[r+3]},q$e=(t,e,i,r,s,n)=>{t[i]=s,t[i+1]=n,t[i+2]=e[r+2],t[i+3]=e[r+3]};function s7(t,e,i,r){if(t){if(i)return e&&r?q$e:mq;if(e&&r)return G$e}else if(e&&r)return mq;return z$e}function nR({scale:t,translate:e},i){return Math.round((i-e[0])/t[0])}function oR({scale:t,translate:e},i){return Math.round((e[1]-i)/t[1])}function aR({scale:t,translate:e},i,r){return i*t[r]+e[r]}function odt(t,e,i){return t?e?i?a7(t):n7(t):i?o7(t):AC(t):null}function AC(t){const e=t.coords;return{x:e[0],y:e[1]}}function One(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t}function n7(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2]}}function H$e(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t}function o7(t){const e=t.coords;return{x:e[0],y:e[1],m:e[2]}}function W$e(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.m,t}function a7(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2],m:e[3]}}function J$e(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t.coords[3]=e.m,t}function Z$e(t,e,i,r){let s=AC;i&&r?s=a7:i?s=n7:r&&(s=o7);for(const n of e){const{geometry:o,attributes:a}=n,l=ee(o)?s(o):null;t.push({attributes:a,geometry:l})}return t}function l7(t,e){return t&&e?J$e:t?H$e:e?W$e:One}function Rne(t,e,i,r,s){const n=l7(i,r);for(const{geometry:o,attributes:a}of e){const l=ee(o)?n(new Ec,o):null;t.push(new Om(l,a,null,s?a[s]:void 0))}return t}function adt(t,e,i=l7(e.z!=null,e.m!=null)){return i(t,e)}function Y$e(t,e,i,r){for(const{geometry:s,attributes:n}of e)t.push({attributes:n,geometry:ee(s)?kne(s,i,r):null});return t}function kne(t,e,i){if(Re(t))return null;const r=Zn(e,i),s=[];for(let n=0;n<t.coords.length;n+=r){const o=[];for(let a=0;a<r;a++)o.push(t.coords[n+a]);s.push(o)}return e?i?{points:s,hasZ:e,hasM:i}:{points:s,hasZ:e}:i?{points:s,hasM:i}:{points:s}}function Lne(t,e,i,r,s){const n=Zn(i,r);for(const{geometry:o,attributes:a}of e){const l=ee(o)?Pne(new Ec,o,n):null;t.push(new Om(l,a,null,s?a[s]:void 0))}return t}function Pne(t,e,i=Zn(e.hasZ,e.hasM)){t.lengths[0]=e.points.length;const r=t.coords;let s=0;for(const n of e.points)for(let o=0;o<i;o++)r[s++]=n[o];return t}function K$e(t,e,i,r){for(const{geometry:s,attributes:n}of e)t.push({attributes:n,geometry:ee(s)?Nne(s,i,r):null});return t}function Nne(t,e,i){if(!t)return null;const r=Zn(e,i),{coords:s,lengths:n}=t,o=[];let a=0;for(const l of n){const u=[];for(let c=0;c<l;c++){const d=[];for(let f=0;f<r;f++)d.push(s[a++]);u.push(d)}o.push(u)}return e?i?{paths:o,hasZ:e,hasM:i}:{paths:o,hasZ:e}:i?{paths:o,hasM:i}:{paths:o}}function Fne(t,e,i,r,s){const n=Zn(i,r);for(const{geometry:o,attributes:a}of e){const l=ee(o)?Dne(new Ec,o,n):null;t.push(new Om(l,a,null,s?a[s]:void 0))}return t}function Dne(t,e,i=Zn(e.hasZ,e.hasM)){const{lengths:r,coords:s}=t;let n=0;for(const o of e.paths){for(const a of o)for(let l=0;l<i;l++)s[n++]=a[l];r.push(o.length)}return t}function Q$e(t,e,i,r){for(const{geometry:s,attributes:n,centroid:o}of e){const a=ee(s)?jne(s,i,r):null;if(ee(o)){const l=AC(o);t.push({attributes:n,centroid:l,geometry:a})}else t.push({attributes:n,geometry:a})}return t}function jne(t,e,i){if(!t)return null;const r=Zn(e,i),{coords:s,lengths:n}=t,o=[];let a=0;for(const l of n){const u=[];for(let c=0;c<l;c++){const d=[];for(let f=0;f<r;f++)d.push(s[a++]);u.push(d)}o.push(u)}return e?i?{rings:o,hasZ:e,hasM:i}:{rings:o,hasZ:e}:i?{rings:o,hasM:i}:{rings:o}}function Une(t,e,i,r,s){for(const{geometry:n,centroid:o,attributes:a}of e){const l=ee(n)?Vne(new Ec,n,i,r):null,u=s?a[s]:void 0;ee(o)?t.push(new Om(l,a,One(new Ec,o),u)):t.push(new Om(l,a,null,u))}return t}function Vne(t,e,i=e.hasZ,r=e.hasM){return X$e(t,e.rings,i,r),t}function X$e(t,e,i,r){const s=Zn(i,r),{lengths:n,coords:o}=t;let a=0;sp(t);for(const l of e){for(const u of l)for(let c=0;c<s;c++)o[a++]=u[c];n.push(l.length)}return t}const Ab=[],Jx=[];function ldt(t,e,i,r,s){Ab[0]=t;const[n]=Bne(Jx,Ab,e,i,r,s);return Tc(Ab),Tc(Jx),n}function Bne(t,e,i,r,s,n){if(Tc(t),!i){for(const o of e){const a=n?o.attributes[n]:void 0;t.push(new Om(null,o.attributes,null,a))}return t}switch(i){case"esriGeometryPoint":return Rne(t,e,r,s,n);case"esriGeometryMultipoint":return Lne(t,e,r,s,n);case"esriGeometryPolyline":return Fne(t,e,r,s,n);case"esriGeometryPolygon":return Une(t,e,r,s,n);default:r_.error("convertToFeatureSet:unknown-geometry",new Ce(`Unable to parse unknown geometry type '${i}'`)),Tc(t)}return t}function udt(t,e,i,r,s,n){const o=t.length;switch(i){case"esriGeometryPoint":Rne(t,e,r,s,n);break;case"esriGeometryMultipoint":Lne(t,e,r,s,n);break;case"esriGeometryPolyline":Fne(t,e,r,s,n);break;case"esriGeometryPolygon":Une(t,e,r,s,n);break;default:r_.error("convertToFeatureSet:unknown-geometry",new Ce(`Unable to parse unknown geometry type '${i}'`))}for(let a=0;a<e.length;a++)t[a+o].geometryType=i,t[a+o].insertAfter=e[a].insertAfter,t[a+o].groupId=e[a].groupId;return t}function cdt(t,e,i,r){Jx[0]=t,Gne(Ab,Jx,e,i,r);const s=Ab[0];return Tc(Ab),Tc(Jx),s}function hdt(t,e,i){if(Re(t))return null;const r=new Ec;return"hasZ"in t&&e==null&&(e=t.hasZ),"hasM"in t&&i==null&&(i=t.hasM),T9(t)?l7(e??t.z!=null,i??t.m!=null)(r,t):c0(t)?Vne(r,t,e,i):I9(t)?Dne(r,t,Zn(e,i)):E9(t)?Pne(r,t,Zn(e,i)):void r_.error("convertFromGeometry:unknown-geometry",new Ce(`Unable to parse unknown geometry type '${t}'`))}function zne(t,e,i,r){const s=t&&("coords"in t?t:t.geometry);if(Re(s))return null;switch(e){case"esriGeometryPoint":{let n=AC;return i&&r?n=a7:i?n=n7:r&&(n=o7),n(s)}case"esriGeometryMultipoint":return kne(s,i,r);case"esriGeometryPolyline":return Nne(s,i,r);case"esriGeometryPolygon":return jne(s,i,r);default:return r_.error("convertToGeometry:unknown-geometry",new Ce(`Unable to parse unknown geometry type '${e}'`)),null}}function eOe(t,e){for(const i of e)t.push({attributes:i.attributes});return t}function Gne(t,e,i,r,s){if(Tc(t),Re(i))return eOe(t,e);switch(i){case"esriGeometryPoint":return Z$e(t,e,r,s);case"esriGeometryMultipoint":return Y$e(t,e,r,s);case"esriGeometryPolyline":return K$e(t,e,r,s);case"esriGeometryPolygon":return Q$e(t,e,r,s);default:r_.error("convertToFeatureSet:unknown-geometry",new Ce(`Unable to parse unknown geometry type '${i}'`))}return t}function ddt(t){const{objectIdFieldName:e,spatialReference:i,transform:r,fields:s,hasM:n,hasZ:o,features:a,geometryType:l,exceededTransferLimit:u,uniqueIdField:c,queryGeometry:d,queryGeometryType:f}=t,m={features:Gne([],a,l,o,n),fields:s,geometryType:l,objectIdFieldName:e,spatialReference:i,uniqueIdField:c,queryGeometry:zne(d,f,!1,!1)};return r&&(m.transform=r),u&&(m.exceededTransferLimit=u),n&&(m.hasM=n),o&&(m.hasZ=o),m}function pdt(t,e){const i=new Ine,{hasM:r,hasZ:s,features:n,objectIdFieldName:o,spatialReference:a,geometryType:l,exceededTransferLimit:u,transform:c,fields:d}=t;return d&&(i.fields=d),i.geometryType=l??null,i.objectIdFieldName=o??e??null,i.spatialReference=a??null,i.objectIdFieldName?(n&&Bne(i.features,n,l,s,r,i.objectIdFieldName),u&&(i.exceededTransferLimit=u),r&&(i.hasM=r),s&&(i.hasZ=s),c&&(i.transform=c),i):(r_.error(new Ce("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),i)}function fdt(t){const{transform:e,features:i,hasM:r,hasZ:s}=t;if(!e)return t;for(const n of i)ee(n.geometry)&&O6(n.geometry,n.geometry,r,s,e),ee(n.centroid)&&O6(n.centroid,n.centroid,r,s,e);return t.transform=null,t}function mdt(t,e){const{geometryType:i,features:r,hasM:s,hasZ:n}=e;if(!t)return e;for(let o=0;o<r.length;o++){const a=r[o],l=a.weakClone();l.geometry=new Ec,yq(l.geometry,a.geometry,s,n,i,t),a.centroid&&(l.centroid=new Ec,yq(l.centroid,a.centroid,s,n,"esriGeometryPoint",t)),r[o]=l}return e.transform=t,e}function yq(t,e,i,r,s,n,o=i,a=r){if(sp(t),Re(e)||!e.coords.length)return null;const l=$ne[s],{coords:u,lengths:c}=e,d=Zn(i,r),f=Zn(i&&o,r&&a),m=s7(i,r,o,a);if(!c.length)return m(t.coords,u,0,0,nR(n,u[0]),oR(n,u[1])),sp(t,d,0),t;let g,v,b,_,S=0,M=0,x=M;for(const T of c){if(T<l)continue;let I=0;M=x,b=g=nR(n,u[S]),_=v=oR(n,u[S+1]),m(t.coords,u,M,S,b,_),I++,S+=d,M+=f;for(let $=1;$<T;$++,S+=d)b=nR(n,u[S]),_=oR(n,u[S+1]),b===g&&_===v||(m(t.coords,u,M,S,b-g,_-v),M+=f,I++,g=b,v=_);I>=l&&(t.lengths.push(I),x=M)}return Tc(t.coords,x),t.coords.length?t:null}function ydt(t,e,i,r,s,n,o=i,a=r){if(sp(t),!e||!e.coords.length)return null;const l=$ne[s],{coords:u,lengths:c}=e,d=Zn(i,r),f=Zn(i&&o,r&&a),m=s7(i,r,o,a);if(!c.length)return m(t.coords,u,0,0,u[0],u[1]),sp(t,d,0),t;let g=0;const v=n*n;for(const b of c){if(b<l){g+=b*d;continue}const _=t.coords.length/f,S=g,M=g+(b-1)*d;m(t.coords,u,t.coords.length,S,u[S],u[S+1]),$6(t.coords,u,d,v,m,S,M),m(t.coords,u,t.coords.length,M,u[M],u[M+1]);const x=t.coords.length/f-_;x>=l?t.lengths.push(x):Tc(t.coords,_*f),g+=b*d}return t.coords.length?t:null}function tOe(t,e,i,r){const s=t[e],n=t[e+1],o=t[i],a=t[i+1],l=t[r],u=t[r+1];let c=o,d=a,f=l-c,m=u-d;if(f!==0||m!==0){const g=((s-c)*f+(n-d)*m)/(f*f+m*m);g>1?(c=l,d=u):g>0&&(c+=f*g,d+=m*g)}return f=s-c,m=n-d,f*f+m*m}function $6(t,e,i,r,s,n,o){let a,l=r,u=0;for(let c=n+i;c<o;c+=i)a=tOe(e,c,n,o),a>l&&(u=c,l=a);l>r&&(u-n>i&&$6(t,e,i,r,s,n,u),s(t,e,t.length,u,e[u],e[u+1]),o-u>i&&$6(t,e,i,r,s,u,o))}function gdt(t,e,i,r){if(Re(e)||!e.coords||!e.coords.length)return null;const s=Zn(i,r);let n=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;if(e&&e.coords){const u=e.coords;for(let c=0;c<u.length;c+=s){const d=u[c],f=u[c+1];n=Math.min(n,d),a=Math.max(a,d),o=Math.min(o,f),l=Math.max(l,f)}}return GL(t)?y_e(t,n,o,a,l):r_e(n,o,a,l,t),t}function O6(t,e,i,r,s){const{coords:n,lengths:o}=e,a=Zn(i,r);if(!n.length)return t!==e&&sp(t),t;am(s);const{originPosition:l,scale:u,translate:c}=s,d=rOe;d.originPosition=l;const f=d.scale;f[0]=u[0]??1,f[1]=-(u[1]??1),f[2]=u[2]??1,f[3]=u[3]??1;const m=d.translate;if(m[0]=c[0]??0,m[1]=c[1]??0,m[2]=c[2]??0,m[3]=c[3]??0,!o.length){for(let v=0;v<a;++v)t.coords[v]=aR(d,n[v],v);return t!==e&&sp(t,a,0),t}let g=0;for(let v=0;v<o.length;v++){const b=o[v];t.lengths[v]=b;for(let M=0;M<a;++M)t.coords[g+M]=aR(d,n[g+M],M);let _=t.coords[g],S=t.coords[g+1];g+=a;for(let M=1;M<b;M++,g+=a){_+=n[g]*f[0],S+=n[g+1]*f[1],t.coords[g]=_,t.coords[g+1]=S;for(let x=2;x<a;++x)t.coords[g+x]=aR(d,n[g+x],x)}}return t!==e&&sp(t,n.length,o.length),t}function vdt(t,e,i,r,s,n){if(sp(t),t.lengths.push(...e.lengths),i===s&&r===n)for(let o=0;o<e.coords.length;o++)t.coords.push(e.coords[o]);else{const o=Zn(i,r),a=s7(i,r,s,n),l=e.coords;for(let u=0;u<l.length;u+=o)a(t.coords,l,t.coords.length,u,l[u],l[u+1])}return t}function iOe(t,e,i,r){let s=0,n=t[r*e],o=t[r*(e+1)];for(let a=1;a<i;a++){const l=n+t[r*(e+a)],u=o+t[r*(e+a)+1],c=(l-n)*(u+o);n=l,o=u,s+=c}return .5*s}function bdt(t,e){const{coords:i,lengths:r}=t;let s=0,n=0;for(let o=0;o<r.length;o++){const a=r[o];n+=iOe(i,s,a,e),s+=a}return Math.abs(n)}function wdt(t,e){if(Re(t))return null;const i=t.clone(),r=t.coords,s=t.lengths;let n=0;for(let o=0;o<s.length;o++){const a=s[o];let l=r[e*n],u=r[e*n+1];for(let c=1;c<a;c++){const d=l+r[e*(n+c)],f=u+r[e*(n+c)+1];i.coords[e*(n+c)]=d,i.coords[e*(n+c)+1]=f,l=d,u=f}n+=a}return i}function sp(t,e=0,i=0){Tc(t.lengths,i),Tc(t.coords,e)}function Tc(t,e=0){t.length!==e&&(t.length=e)}const rOe={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};function sOe(t){const{exifInfo:e,exifName:i,tagName:r}=t;if(!e||!i||!r)return null;const s=e.find(n=>n.name===i);return s?nOe({tagName:r,tags:s.tags}):null}function nOe(t){const{tagName:e,tags:i}=t;if(!i||!e)return null;const r=i.find(s=>s.name===e);return r&&r.value||null}var R6;const oOe={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let ca=R6=class extends Je{constructor(t){super(t),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:t}=this,e=sOe({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:t});return oOe[e]||null}clone(){return new R6({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};h([p({type:String})],ca.prototype,"contentType",void 0),h([p()],ca.prototype,"exifInfo",void 0),h([p({readOnly:!0})],ca.prototype,"orientationInfo",null),h([p({type:Si})],ca.prototype,"id",void 0),h([p({type:String})],ca.prototype,"globalId",void 0),h([p({type:String})],ca.prototype,"keywords",void 0),h([p({type:String})],ca.prototype,"name",void 0),h([p({json:{read:!1}})],ca.prototype,"parentGlobalId",void 0),h([p({json:{read:!1}})],ca.prototype,"parentObjectId",void 0),h([p({type:Si})],ca.prototype,"size",void 0),h([p({json:{read:!1}})],ca.prototype,"url",void 0),ca=R6=h([ce("esri.layers.support.AttachmentInfo")],ca);const aOe=ca;async function qne(t,e,i){const r=Kn(t);return V$e(r,Ls.from(e),{...i}).then(s=>s.data.count)}async function u7(t,e,i){const r=Kn(t);return U$e(r,Ls.from(e),{...i}).then(s=>s.data.objectIds)}async function Hne(t,e,i){const r=Kn(t),{renderingRule:s,sourceJSON:n}=e||{},o=s?JSON.stringify(s.rasterFunctionDefinition||s):null,a=Ap({...r.query,renderingRule:o,f:"json"}),l=Xm(a,i);t=r.path;const u=n||await Et(t,l).then(K=>K.data),c=u.hasRasterAttributeTable?Et(`${t}/rasterAttributeTable`,l):null,d=u.hasColormap?Et(`${t}/colormap`,l):null,f=u.hasHistograms?Et(`${t}/histograms`,l):null,m=u.currentVersion>=10.3?Et(`${t}/keyProperties`,l):null,g=u.hasMultidimensions?Et(`${t}/multidimensionalInfo`,l):null,v=await Promise.allSettled([c,d,f,m,g]);let b=null;if(u.minValues&&u.minValues.length===u.bandCount){b=[];for(let K=0;K<u.minValues.length;K++)b.push({min:u.minValues[K],max:u.maxValues[K],avg:u.meanValues[K],stddev:u.stdvValues[K]})}const _=Xt.fromJSON(u.extent),S=Math.ceil(_.width/u.pixelSizeX-.1),M=Math.ceil(_.height/u.pixelSizeY-.1),x=Tt.fromJSON(u.spatialReference||u.extent.spatialReference),T=v[0].status==="fulfilled"&&v[0].value?n1.fromJSON(v[0].value.data):null,I=v[1].status==="fulfilled"?v[1].value?.data.colormap:null,$=v[2].status==="fulfilled"?v[2].value?.data.histograms:null,L=v[3].status==="fulfilled"?v[3].value?.data??{}:{},B=v[4].status==="fulfilled"?v[4].value?.data.multidimensionalInfo:null;B?.variables?.length&&B.variables.forEach(K=>{K.statistics?.length&&K.statistics.forEach(Q=>{Q.avg=Q.mean,Q.stddev=Q.standardDeviation})});const{defaultVariable:z,serviceDataType:H}=u;z&&z!==L.DefaultVariable&&(L.DefaultVariable=z),H&&H.includes("esriImageServiceDataTypeVector")&&!H.includes(L.DataType)&&(L.DataType=H.replace("esriImageServiceDataType",""));let J=u.noDataValue;return u.noDataValues?.length&&u.noDataValues.some(K=>K!==J)&&(J=u.noDataValues),new Q3({width:S,height:M,bandCount:u.bandCount,extent:Xt.fromJSON(u.extent),spatialReference:x,pixelSize:new Ct({x:u.pixelSizeX,y:u.pixelSizeY,spatialReference:x}),pixelType:u.pixelType.toLowerCase(),statistics:b,attributeTable:T,colormap:I,histograms:$,keyProperties:L,noDataValue:J,multidimensionalInfo:B})}function lOe(t,e,i){return Hne(t,{sourceJSON:e},i)}function uOe(t,e,i){return Hne(t,{renderingRule:e},i)}async function cOe(t,e,i){const r=Kn(t),s=Ap({...r?.query,f:"json"}),n=Xm(s,i),o=`${r?.path}/${e}/info`,a=Et(`${o}`,n),l=Et(`${o}/keyProperties`,n),u=await Promise.allSettled([a,l]),c=u[0].status==="fulfilled"?u[0].value.data:null,d=u[1].status==="fulfilled"?u[1].value.data:null;let f=null;c.statistics?.length&&(f=c.statistics.map(x=>({min:x[0],max:x[1],avg:x[2],stddev:x[3]})));const m=Xt.fromJSON(c.extent),g=Math.ceil(m.width/c.pixelSizeX-.1),v=Math.ceil(m.height/c.pixelSizeY-.1),b=m.spatialReference,_=new Ct({x:c.pixelSizeX,y:c.pixelSizeY,spatialReference:b}),S=c.histograms?.length?c.histograms:null,M=new Yse({origin:c.origin,blockWidth:c.blockWidth,blockHeight:c.blockHeight,firstPyramidLevel:c.firstPyramidLevel,maximumPyramidLevel:c.maxPyramidLevel});return new Q3({width:g,height:v,bandCount:c.bandCount,extent:m,spatialReference:b,pixelSize:_,pixelType:c.pixelType.toLowerCase(),statistics:f,histograms:S,keyProperties:d,storageInfo:M})}var k6;let pg=k6=class extends Je{constructor(t){super(t),this.angleNames=null,this.point=null,this.spatialReference=null,this.rasterId=null}clone(){return new k6(Le({angleNames:this.angleNames,point:this.point,spatialReference:this.spatialReference,rasterId:this.rasterId}))}};h([p({type:[String],json:{name:"angleName",write:!0}})],pg.prototype,"angleNames",void 0),h([p({type:Ct,json:{write:!0}})],pg.prototype,"point",void 0),h([p({type:Tt,json:{write:!0}})],pg.prototype,"spatialReference",void 0),h([p({type:Si,json:{write:!0}})],pg.prototype,"rasterId",void 0),pg=k6=h([ce("esri.rest.support.ImageAngleParameters")],pg);const hOe=pg,vu=new si({esriMensurationPoint:"point",esriMensurationCentroid:"centroid",esriMensurationDistanceAndAngle:"distance-and-angle",esriMensurationAreaAndPerimeter:"area-and-perimeter",esriMensurationHeightFromBaseAndTop:"base-and-top",esriMensurationHeightFromBaseAndTopShadow:"base-and-top-shadow",esriMensurationHeightFromTopAndTopShadow:"top-and-top-shadow",esriMensurationPoint3D:"point-3D",esriMensurationCentroid3D:"centroid-3D",esriMensurationDistanceAndAngle3D:"distance-and-angle-3D",esriMensurationAreaAndPerimeter3D:"area-and-perimeter-3D"});let lu=class extends Je{constructor(){super(...arguments),this.type=null,this.measureOperation=null,this.mosaicRule=null,this.renderingRule=null,this.pixelSize=null,this.raster=void 0}};h([p()],lu.prototype,"type",void 0),h([p({type:vu.apiValues,json:{read:vu.read,write:vu.write}})],lu.prototype,"measureOperation",void 0),h([p({type:gl,json:{write:!0}})],lu.prototype,"mosaicRule",void 0),h([p({type:qi,json:{write:!0}})],lu.prototype,"renderingRule",void 0),h([p({type:Ct,json:{write:!0}})],lu.prototype,"pixelSize",void 0),h([p({json:{write:!0}})],lu.prototype,"raster",void 0),lu=h([ce("esri.rest.support.BaseImageMeasureParameters")],lu);var L6;let Ad=L6=class extends lu{constructor(){super(...arguments),this.type="area-perimeter",this.geometry=null,this.is3D=!1,this.linearUnit="meters",this.areaUnit="square-meters"}writeGeometry(t,e,i){t!=null&&(e.geometryType=Mc(t),e[i]=t.toJSON())}get measureOperation(){return this.is3D?"area-and-perimeter-3D":"area-and-perimeter"}clone(){return new L6(Le({geometry:this.geometry,is3D:this.is3D,linearUnit:this.linearUnit,areaUnit:this.areaUnit,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,raster:this.raster}))}};h([p({types:Ac,json:{name:"fromGeometry",read:!0,write:!0}})],Ad.prototype,"geometry",void 0),h([it("geometry")],Ad.prototype,"writeGeometry",null),h([p({type:vu.apiValues,json:{write:vu.write}})],Ad.prototype,"measureOperation",null),h([p({json:{read:!0}})],Ad.prototype,"is3D",void 0),h([p({type:String,json:{read:up.read,write:up.write}})],Ad.prototype,"linearUnit",void 0),h([p({type:String,json:{read:SS.read,write:SS.write}})],Ad.prototype,"areaUnit",void 0),Ad=L6=h([ce("esri.rest.support.ImageAreaParameters")],Ad);const dOe=Ad;var P6;let Qc=P6=class extends lu{constructor(){super(...arguments),this.type="distance-angle",this.fromGeometry=null,this.toGeometry=null,this.is3D=!1,this.linearUnit="meters",this.angularUnit="degrees"}writeFromGeometry(t,e,i){t!=null&&(e.geometryType=Mc(t),e[i]=t.toJSON())}get measureOperation(){return this.is3D?"distance-and-angle-3D":"distance-and-angle"}clone(){return new P6(Le({fromGeometry:this.fromGeometry,toGeometry:this.toGeometry,is3D:this.is3D,linearUnit:this.linearUnit,angularUnit:this.angularUnit,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,raster:this.raster}))}};h([p({type:Ct,json:{read:!0,write:!0}})],Qc.prototype,"fromGeometry",void 0),h([it("fromGeometry")],Qc.prototype,"writeFromGeometry",null),h([p({type:Ct,json:{read:!0,write:!0}})],Qc.prototype,"toGeometry",void 0),h([p({type:vu.apiValues,json:{write:vu.write}})],Qc.prototype,"measureOperation",null),h([p({json:{read:!0}})],Qc.prototype,"is3D",void 0),h([p({type:String,json:{read:up.read,write:up.write}})],Qc.prototype,"linearUnit",void 0),h([p({type:String,json:{read:RA.read,write:RA.write}})],Qc.prototype,"angularUnit",void 0),Qc=P6=h([ce("esri.rest.support.ImageDistanceParameters")],Qc);const pOe=Qc;var N6;let Cd=N6=class extends lu{constructor(){super(...arguments),this.type="height",this.fromGeometry=null,this.toGeometry=null,this.operationType="base-and-top",this.linearUnit="meters"}writeFromGeometry(t,e,i){t!=null&&(e.geometryType=Mc(t),e[i]=t.toJSON())}get measureOperation(){return this.operationType}clone(){return new N6(Le({fromGeometry:this.fromGeometry,toGeometry:this.toGeometry,operationType:this.operationType,linearUnit:this.linearUnit,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,raster:this.raster}))}};h([p({type:Ct,json:{read:!0}})],Cd.prototype,"fromGeometry",void 0),h([it("fromGeometry")],Cd.prototype,"writeFromGeometry",null),h([p({type:Ct,json:{read:!0,write:!0}})],Cd.prototype,"toGeometry",void 0),h([p({type:vu.apiValues,json:{write:vu.write}})],Cd.prototype,"measureOperation",null),h([p({json:{read:!0}})],Cd.prototype,"operationType",void 0),h([p({type:String,json:{read:up.read,write:up.write}})],Cd.prototype,"linearUnit",void 0),Cd=N6=h([ce("esri.rest.support.ImageHeightParameters")],Cd);const fOe=Cd;var F6;let Xc=F6=class extends Je{constructor(){super(...arguments),this.geometry=null,this.mosaicRule=null,this.renderingRule=null,this.pixelSize=null,this.raster=void 0,this.timeExtent=null}writeGeometry(t,e,i){t!=null&&(e.geometryType=Mc(t),e[i]=t.toJSON())}clone(){return new F6(Le({geometry:this.geometry,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,raster:this.raster,timeExtent:this.timeExtent}))}};h([p({types:Ac,json:{read:Pl}})],Xc.prototype,"geometry",void 0),h([it("geometry")],Xc.prototype,"writeGeometry",null),h([p({type:gl,json:{write:!0}})],Xc.prototype,"mosaicRule",void 0),h([p({type:qi,json:{write:!0}})],Xc.prototype,"renderingRule",void 0),h([p({type:Ct,json:{write:!0}})],Xc.prototype,"pixelSize",void 0),h([p({json:{write:!0}})],Xc.prototype,"raster",void 0),h([p({type:Ga,json:{read:{source:"time"},write:{target:"time"}}})],Xc.prototype,"timeExtent",void 0),Xc=F6=h([ce("esri.rest.support.ImageHistogramParameters")],Xc);const gq=Xc;var D6;let hs=D6=class extends Je{constructor(){super(...arguments),this.geometry=null,this.renderingRules=null,this.pixelSize=null,this.returnGeometry=!0,this.returnCatalogItems=!0,this.returnPixelValues=!0,this.maxItemCount=null,this.timeExtent=null,this.raster=void 0,this.viewId=void 0,this.processAsMultidimensional=!1}writeGeometry(t,e,i){t!=null&&(e.geometryType=Mc(t),e[i]=JSON.stringify(t.toJSON()))}set mosaicRule(t){let e=t;e&&e.mosaicMethod&&(e=gl.fromJSON({...e.toJSON(),mosaicMethod:e.mosaicMethod,mosaicOperation:e.mosaicOperation})),this._set("mosaicRule",e)}writeMosaicRule(t,e,i){t!=null&&(e[i]=JSON.stringify(t.toJSON()))}set renderingRule(t){let e=t;e&&e.rasterFunction&&(e=qi.fromJSON({...e.toJSON(),rasterFunction:e.rasterFunction,rasterFunctionArguments:e.rasterFunctionArguments})),this._set("renderingRule",e)}writeRenderingRule(t,e,i){t!=null&&(e[i]=JSON.stringify(t.toJSON())),t.rasterFunctionDefinition&&(e[i]=JSON.stringify(t.rasterFunctionDefinition))}writeRenderingRules(t,e,i){t!=null&&(e[i]=JSON.stringify(t.map(r=>r.rasterFunctionDefinition||r.toJSON())))}writePixelSize(t,e,i){t!=null&&(e[i]=JSON.stringify(t))}writeTimeExtent(t,e,i){if(t!=null){const r=ee(t.start)?t.start.getTime():null,s=ee(t.end)?t.end.getTime():null;e[i]=r!=null?s!=null?`${r},${s}`:`${r}`:null}}clone(){return new D6(Le({geometry:this.geometry,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,returnPixelValues:this.returnPixelValues,maxItemCount:this.maxItemCount,processAsMultidimensional:this.processAsMultidimensional,raster:this.raster,viewId:this.viewId,timeExtent:this.timeExtent}))}};h([p({json:{write:!0}})],hs.prototype,"geometry",void 0),h([it("geometry")],hs.prototype,"writeGeometry",null),h([p({type:gl,json:{write:!0}})],hs.prototype,"mosaicRule",null),h([it("mosaicRule")],hs.prototype,"writeMosaicRule",null),h([p({type:qi,json:{write:!0}})],hs.prototype,"renderingRule",null),h([it("renderingRule")],hs.prototype,"writeRenderingRule",null),h([p({type:[qi],json:{write:!0}})],hs.prototype,"renderingRules",void 0),h([it("renderingRules")],hs.prototype,"writeRenderingRules",null),h([p({type:Ct,json:{write:!0}})],hs.prototype,"pixelSize",void 0),h([it("pixelSize")],hs.prototype,"writePixelSize",null),h([p({type:Boolean,json:{write:!0}})],hs.prototype,"returnGeometry",void 0),h([p({type:Boolean,json:{write:!0}})],hs.prototype,"returnCatalogItems",void 0),h([p({type:Boolean,json:{write:!0}})],hs.prototype,"returnPixelValues",void 0),h([p({type:Number,json:{write:!0}})],hs.prototype,"maxItemCount",void 0),h([p({type:Ga,json:{write:{target:"time"}}})],hs.prototype,"timeExtent",void 0),h([it("timeExtent")],hs.prototype,"writeTimeExtent",null),h([p({json:{write:!0}})],hs.prototype,"raster",void 0),h([p({json:{write:!0}})],hs.prototype,"viewId",void 0),h([p({type:Boolean,json:{write:!0}})],hs.prototype,"processAsMultidimensional",void 0),hs=D6=h([ce("esri.rest.support.ImageIdentifyParameters")],hs);const vq=hs;var j6;let Mv=j6=class extends Je{constructor(){super(...arguments),this.geometries=null,this.rasterId=null}writeGeometry(t,e,i){e.geometries={geometryType:"esriGeometryPoint",geometries:t.map(r=>r.toJSON())}}clone(){return new j6({geometries:this.geometries?.map(t=>t.clone())??[],rasterId:this.rasterId})}};h([p({type:[Ct],json:{write:!0}})],Mv.prototype,"geometries",void 0),h([it("geometries")],Mv.prototype,"writeGeometry",null),h([p({type:Si,json:{write:!0}})],Mv.prototype,"rasterId",void 0),Mv=j6=h([ce("esri.rest.support.ImagePixelLocationParameters")],Mv);const mOe=Mv;var U6;let fg=U6=class extends lu{constructor(){super(...arguments),this.type="point",this.geometry=null,this.is3D=!1}writeGeometry(t,e,i){t!=null&&(e.geometryType=Mc(t),e[i]=t.toJSON())}get measureOperation(){const{is3D:t,geometry:e}=this;return e.type==="point"?t?"point-3D":"point":t?"centroid-3D":"centroid"}clone(){return new U6(Le({geometry:this.geometry,is3D:this.is3D,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,raster:this.raster}))}};h([p({types:Ac,json:{name:"fromGeometry",read:Pl}})],fg.prototype,"geometry",void 0),h([it("geometry")],fg.prototype,"writeGeometry",null),h([p({type:vu.apiValues,json:{read:vu.read,write:vu.write}})],fg.prototype,"measureOperation",null),h([p({json:{read:!0}})],fg.prototype,"is3D",void 0),fg=U6=h([ce("esri.rest.support.ImagePointParameters")],fg);const yOe=fg;var V6;let fo=V6=class extends Je{constructor(){super(...arguments),this.geometry=null,this.interpolation="nearest",this.mosaicRule=null,this.outFields=null,this.pixelSize=null,this.returnFirstValueOnly=!0,this.sampleDistance=null,this.sampleCount=null,this.sliceId=null,this.timeExtent=null}writeGeometry(t,e,i){t!=null&&(e.geometryType=Mc(t),e[i]=t.toJSON())}set locations(t){if(t?.length){const e=new Dw({spatialReference:t[0].spatialReference});e.points=t.map(i=>[i.x,i.y]),this._set("locations",t),this.geometry=e}}clone(){return new V6(Le({geometry:this.geometry,locations:this.locations,interpolation:this.interpolation,mosaicRule:this.mosaicRule,outFields:this.outFields,raster:this.raster,returnFirstValueOnly:this.returnFirstValueOnly,sampleDistance:this.sampleDistance,sampleCount:this.sampleCount,sliceId:this.sliceId,pixelSize:this.pixelSize,timeExtent:this.timeExtent}))}};h([p({types:Ac,json:{read:Pl}})],fo.prototype,"geometry",void 0),h([it("geometry")],fo.prototype,"writeGeometry",null),h([p()],fo.prototype,"locations",null),h([p({type:String,json:{type:pm.jsonValues,read:pm.read,write:pm.write}})],fo.prototype,"interpolation",void 0),h([p({type:gl,json:{write:!0}})],fo.prototype,"mosaicRule",void 0),h([p({type:[String],json:{write:!0}})],fo.prototype,"outFields",void 0),h([p({type:Ct,json:{write:!0}})],fo.prototype,"pixelSize",void 0),h([p({type:String,json:{write:!0}})],fo.prototype,"raster",void 0),h([p({type:Boolean,json:{write:!0}})],fo.prototype,"returnFirstValueOnly",void 0),h([p({type:Number,json:{write:!0}})],fo.prototype,"sampleDistance",void 0),h([p({type:Number,json:{write:!0}})],fo.prototype,"sampleCount",void 0),h([p({type:Number,json:{write:!0}})],fo.prototype,"sliceId",void 0),h([p({type:Ga,json:{read:{source:"time"},write:{target:"time"}}})],fo.prototype,"timeExtent",void 0),fo=V6=h([ce("esri.rest.support.ImageSampleParameters")],fo);const gOe=fo,ac=tt.getLogger("esri.views.2d.engine.flow.dataUtils"),vOe=10;async function bOe(t,e,i,r){const s=performance.now(),n=wOe(e,i),o=performance.now(),a=xOe(e,n,i.width,i.height),l=performance.now(),u=EOe(a,!0),c=performance.now(),d=t==="Streamlines"?TOe(u,vOe):IOe(u),f=performance.now();return Ze("esri-2d-profiler")&&(ac.info("I.1","_createFlowFieldFromData (ms)",Math.round(o-s)),ac.info("I.2","_getStreamlines (ms)",Math.round(l-o)),ac.info("I.3","createAnimatedLinesData (ms)",Math.round(c-l)),ac.info("I.4","create{Streamlines|Particles}Mesh (ms)",Math.round(f-c)),ac.info("I.5","createFlowMesh (ms)",Math.round(f-s)),ac.info("I.6","Mesh size (bytes)",d.vertexData.buffer.byteLength+d.indexData.buffer.byteLength)),await Promise.resolve(),pr(r),d}function wOe(t,e){const i=SOe(e.data,e.width,e.height,t.smoothing);return t.interpolate?(r,s)=>{const n=Math.floor(r),o=Math.floor(s);if(n<0||n>=e.width)return[0,0];if(o<0||o>=e.height)return[0,0];const a=r-n,l=s-o,u=n,c=o,d=n<e.width-1?n+1:n,f=o<e.height-1?o+1:o,m=i[2*(c*e.width+u)],g=i[2*(c*e.width+d)],v=i[2*(f*e.width+u)],b=i[2*(f*e.width+d)],_=i[2*(c*e.width+u)+1],S=i[2*(c*e.width+d)+1];return[(m*(1-l)+v*l)*(1-a)+(g*(1-l)+b*l)*a,(_*(1-l)+i[2*(f*e.width+u)+1]*l)*(1-a)+(S*(1-l)+i[2*(f*e.width+d)+1]*l)*a]}:(r,s)=>{const n=Math.round(r),o=Math.round(s);return n<0||n>=e.width||o<0||o>=e.height?[0,0]:[i[2*(o*e.width+n)+0],i[2*(o*e.width+n)+1]]}}function _Oe(t,e,i,r,s,n,o,a,l){const u=[];let c=i,d=r,f=0,[m,g]=e(c,d);m*=t.velocityScale,g*=t.velocityScale;const v=Math.sqrt(m*m+g*g);let b,_;u.push({x:c,y:d,t:f,speed:v});for(let S=0;S<t.verticesPerLine;S++){let[M,x]=e(c,d);M*=t.velocityScale,x*=t.velocityScale;const T=Math.sqrt(M*M+x*x);if(T<t.minSpeedThreshold)return u;const I=M/T,$=x/T;if(c+=I*t.segmentLength,d+=$*t.segmentLength,f+=t.segmentLength/T,Math.acos(I*b+$*_)>t.maxTurnAngle)return u;if(t.collisions){const L=Math.round(c*l),B=Math.round(d*l);if(L<0||L>o-1||B<0||B>a-1)return u;const z=n[B*o+L];if(z!==-1&&z!==s)return u;n[B*o+L]=s}u.push({x:c,y:d,t:f,speed:T}),b=I,_=$}return u}function xOe(t,e,i,r){const s=[],n=new wx,o=1/Math.max(t.lineCollisionWidth,1),a=Math.round(i*o),l=Math.round(r*o),u=new Int32Array(a*l);for(let d=0;d<u.length;d++)u[d]=-1;const c=[];for(let d=0;d<r;d+=t.lineSpacing)for(let f=0;f<i;f+=t.lineSpacing)c.push({x:f,y:d,sort:n.getFloat()});c.sort((d,f)=>d.sort-f.sort);for(const{x:d,y:f}of c)if(n.getFloat()<t.density){const m=_Oe(t,e,d,f,s.length,u,a,l,o);if(m.length<2)continue;s.push(m)}return s}function SOe(t,e,i,r){if(r===0)return t;const s=Math.round(3*r),n=new Array(2*s+1);let o=0;for(let u=-s;u<=s;u++){const c=Math.exp(-u*u/(r*r));n[u+s]=c,o+=c}for(let u=-s;u<=s;u++)n[u+s]/=o;const a=new Float32Array(t.length);for(let u=0;u<i;u++)for(let c=0;c<e;c++){let d=0,f=0;for(let m=-s;m<=s;m++){if(c+m<0||c+m>=e)continue;const g=n[m+s];d+=g*t[2*(u*e+(c+m))+0],f+=g*t[2*(u*e+(c+m))+1]}a[2*(u*e+c)+0]=d,a[2*(u*e+c)+1]=f}const l=new Float32Array(t.length);for(let u=0;u<e;u++)for(let c=0;c<i;c++){let d=0,f=0;for(let m=-s;m<=s;m++){if(c+m<0||c+m>=i)continue;const g=n[m+s];d+=g*a[2*((c+m)*e+u)+0],f+=g*a[2*((c+m)*e+u)+1]}l[2*(c*e+u)+0]=d,l[2*(c*e+u)+1]=f}return l}function EOe(t,e){const i=new wx,r=t.reduce((l,u)=>l+u.length,0),s=new Float32Array(4*r),n=new Array(t.length);let o=0,a=0;for(const l of t){const u=o;for(const c of l)s[4*o+0]=c.x,s[4*o+1]=c.y,s[4*o+2]=c.t,s[4*o+3]=c.speed,o++;n[a++]={startVertex:u,numberOfVertices:l.length,totalTime:l[l.length-1].t,timeSeed:e?i.getFloat():0}}return{lineVertices:s,lineDescriptors:n}}function TOe(t,e){const{lineVertices:r,lineDescriptors:s}=t;let n=0,o=0;for(const m of s)n+=2*m.numberOfVertices,o+=6*(m.numberOfVertices-1);const a=new Float32Array(n*9),l=new Uint32Array(o);let u=0,c=0;function d(){l[c++]=u-2,l[c++]=u,l[c++]=u-1,l[c++]=u,l[c++]=u+1,l[c++]=u-1}function f(m,g,v,b,_,S,M,x){const T=u*9;let I=0;a[T+I++]=m,a[T+I++]=g,a[T+I++]=1,a[T+I++]=v,a[T+I++]=S,a[T+I++]=M,a[T+I++]=b/2,a[T+I++]=_/2,a[T+I++]=x,u++,a[T+I++]=m,a[T+I++]=g,a[T+I++]=-1,a[T+I++]=v,a[T+I++]=S,a[T+I++]=M,a[T+I++]=-b/2,a[T+I++]=-_/2,a[T+I++]=x,u++}for(const m of s){const{totalTime:g,timeSeed:v}=m;let b=null,_=null,S=null,M=null,x=null,T=null;for(let I=0;I<m.numberOfVertices;I++){const $=r[4*(m.startVertex+I)+0],L=r[4*(m.startVertex+I)+1],B=r[4*(m.startVertex+I)+2],z=r[4*(m.startVertex+I)+3];let H=null,J=null,K=null,Q=null;if(I>0){H=$-b,J=L-_;const y=Math.sqrt(H*H+J*J);if(H/=y,J/=y,I>1){let A=H+x,N=J+T;const D=Math.sqrt(A*A+N*N);A/=D,N/=D;const ne=Math.min(1/(A*H+N*J),e);A*=ne,N*=ne,K=-N,Q=A}else K=-J,Q=H;K!==null&&Q!==null&&(f(b,_,S,K,Q,g,v,z),d())}b=$,_=L,S=B,x=H,T=J,M=z}f(b,_,S,-T,x,g,v,M)}return{vertexData:a,indexData:l}}function IOe(t){const{lineVertices:s,lineDescriptors:n}=t;let o=0,a=0;for(const y of n){const A=y.numberOfVertices-1;o+=4*A*2,a+=6*A*2}const l=new Float32Array(o*16),u=new Uint32Array(a);let c,d,f,m,g,v,b,_,S,M,x,T,I,$,L=0,B=0;function z(){u[B++]=L-8,u[B++]=L-7,u[B++]=L-6,u[B++]=L-7,u[B++]=L-5,u[B++]=L-6,u[B++]=L-4,u[B++]=L-3,u[B++]=L-2,u[B++]=L-3,u[B++]=L-1,u[B++]=L-2}function H(y,A,N,D,ne,q,he,te,me,ve,_e,Se,Oe,Te){const we=L*16;let Ie=0;for(const Ae of[1,2])for(const W of[1,2,3,4])l[we+Ie++]=y,l[we+Ie++]=A,l[we+Ie++]=N,l[we+Ie++]=D,l[we+Ie++]=he,l[we+Ie++]=te,l[we+Ie++]=me,l[we+Ie++]=ve,l[we+Ie++]=Ae,l[we+Ie++]=W,l[we+Ie++]=Oe,l[we+Ie++]=Te,l[we+Ie++]=ne/2,l[we+Ie++]=q/2,l[we+Ie++]=_e/2,l[we+Ie++]=Se/2,L++}function J(y,A){let N=S+x,D=M+T;const ne=Math.sqrt(N*N+D*D);N/=ne,D/=ne;const q=S*N+M*D;N/=q,D/=q;let he=x+I,te=T+$;const me=Math.sqrt(he*he+te*te);he/=me,te/=me;const ve=x*he+T*te;he/=ve,te/=ve,H(c,d,f,m,-D,N,g,v,b,_,-te,he,y,A),z()}function K(y,A,N,D,ne,q){if(S=x,M=T,x=I,T=$,S==null&&M==null&&(S=x,M=T),g!=null&&v!=null){I=y-g,$=A-v;const he=Math.sqrt(I*I+$*$);I/=he,$/=he}S!=null&&M!=null&&J(ne,q),c=g,d=v,f=b,m=_,g=y,v=A,b=N,_=D}function Q(y,A){S=x,M=T,x=I,T=$,S==null&&M==null&&(S=x,M=T),S!=null&&M!=null&&J(y,A)}for(const y of n){c=null,d=null,f=null,m=null,g=null,v=null,b=null,_=null,S=null,M=null,x=null,T=null,I=null,$=null;const{totalTime:A,timeSeed:N}=y;for(let D=0;D<y.numberOfVertices;D++)K(s[4*(y.startVertex+D)+0],s[4*(y.startVertex+D)+1],s[4*(y.startVertex+D)+2],s[4*(y.startVertex+D)+3],A,N);Q(A,N)}return{vertexData:l,indexData:u}}function bq(t,e){const i=e.pixels,{width:r,height:s}=e,n=new Float32Array(r*s*2),o=e.mask||new Uint8Array(r*s*2);if(e.mask||o.fill(255),t==="vector-uv")for(let a=0;a<r*s;a++)n[2*a+0]=i[0][a],n[2*a+1]=-i[1][a];else if(t==="vector-magdir")for(let a=0;a<r*s;a++){const l=i[0][a],u=Wv(i[1][a]),c=Math.cos(u-Math.PI/2),d=Math.sin(u-Math.PI/2);n[2*a+0]=c*l,n[2*a+1]=d*l}return{data:n,mask:o,width:r,height:s}}async function xdt(t,e,i,r,s,n){const o=performance.now(),a=Il(e.spatialReference);if(!a){const x=await wq(t,e,i,r,s,n);return Ze("esri-2d-profiler")&&ac.info("I.7","loadImagery, early exit (ms)",Math.round(performance.now()-o)),Ze("esri-2d-profiler")&&ac.info("I.9","Number of parts",1),x}const[l,u]=a.valid,c=u-l,d=Math.ceil(e.width/c),f=e.width/d,m=Math.round(i/d);let g=e.xmin;const v=[],b=performance.now();for(let x=0;x<d;x++){const T=new Xt({xmin:g,xmax:g+f,ymin:e.ymin,ymax:e.ymax,spatialReference:e.spatialReference});v.push(wq(t,T,m,r,s,n)),g+=f}const _=await Promise.all(v);Ze("esri-2d-profiler")&&ac.info("I.8","All calls to _fetchPart (ms)",Math.round(performance.now()-b)),Ze("esri-2d-profiler")&&ac.info("I.9","Number of parts",_.length);const S={data:new Float32Array(i*r*2),mask:new Uint8Array(i*r),width:i,height:r};let M=0;for(const x of _){for(let T=0;T<x.height;T++)for(let I=0;I<x.width;I++)M+I>=i||(S.data[2*(T*i+M+I)+0]=x.data[2*(T*x.width+I)+0],S.data[2*(T*i+M+I)+1]=x.data[2*(T*x.width+I)+1],S.mask[T*i+M+I]=x.mask[T*x.width+I]);M+=x.width}return Ze("esri-2d-profiler")&&ac.info("I.10","loadImagery, general exit (ms)",Math.round(performance.now()-o)),S}async function wq(t,e,i,r,s,n){const o={requestProjectedLocalDirections:!0,signal:n};if(ee(s)&&(o.timeExtent=s),t.type==="imagery"){await t.load({signal:n});const u=t.rasterInfo.dataType,c=await t.fetchImage(e,i,r,o);return!c||Re(c.pixelData)||Re(c.pixelData.pixelBlock)?{data:new Float32Array(i*r*2),mask:new Uint8Array(i*r),width:i,height:r}:bq(u,c.pixelData.pixelBlock)}await t.load({signal:n});const a=t.rasterInfo.dataType,l=await t.fetchPixels(e,i,r,o);return!l||Re(l.pixelBlock)?{data:new Float32Array(i*r*2),mask:new Uint8Array(i*r),width:i,height:r}:bq(a,l.pixelBlock)}const lR=xs()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",S16:"s16",U32:"u32",S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",UNKNOWN:"unknown"}),MOe=new Set(["png","png8","png24","png32","jpg","bmp","gif","jpgpng","lerc","tiff"]),AOe=uQ(vl,{min:0,max:255});function COe(t){if(!t)return null;const e=JSON.stringify(t).match(/"rasterFunction":"(.*?")/gi)?.map(i=>i.replace('"rasterFunction":"',"").replace('"',""));return e?e.join("/"):null}const $Oe=t=>{let e=class extends t{constructor(){super(...arguments),this._functionRasterInfos={},this._rasterJobHandler={instance:null,refCount:0,connectionPromise:null},this._cachedRendererJson=null,this._serviceSupportsMosaicRule=null,this._rasterAttributeTableFieldPrefix="Raster.",this.adjustAspectRatio=null,this.bandIds=void 0,this.capabilities=null,this.compressionQuality=void 0,this.compressionTolerance=.01,this.copyright=null,this.defaultMosaicRule=null,this.definitionExpression=null,this.exportImageServiceParameters=null,this.rasterInfo=null,this.fields=null,this.fullExtent=null,this.hasMultidimensions=!1,this.imageMaxHeight=4100,this.imageMaxWidth=4100,this.interpolation=void 0,this.minScale=0,this.maxScale=0,this.multidimensionalInfo=null,this.multidimensionalSubset=null,this.noData=null,this.noDataInterpretation=void 0,this.objectIdField=null,this.geometryType="polygon",this.typeIdField=null,this.types=[],this.pixelFilter=null,this.raster=void 0,this.sourceType=null,this.viewId=void 0,this.symbolizer=null,this.rasterFunctionInfos=null,this.serviceDataType=null,this.spatialReference=null,this.pixelType=null,this.serviceRasterInfo=null,this.sourceJSON=null,this.url=null,this.version=void 0}initialize(){this._set("exportImageServiceParameters",new cs({layer:this}))}readServiceSupportsMosaicRule(r,s){return this._isMosaicRuleSupported(s)}get _rasterFunctionNamesIndex(){const r=new Map;return!this.rasterFunctionInfos||ee(this.rasterFunctionInfos)&&this.rasterFunctionInfos.length<1||ee(this.rasterFunctionInfos)&&this.rasterFunctionInfos.forEach(s=>{r.set(s.name.toLowerCase().replace(/ /gi,"_"),s.name)}),r}readBandIds(r,s){if(Array.isArray(r)&&r.length>0&&r.every(n=>typeof n=="number"))return r}readCapabilities(r,s){return this._readCapabilities(s)}writeCompressionQuality(r,s,n){r!=null&&this.format!=="lerc"&&(s[n]=r)}writeCompressionTolerance(r,s,n){this.format==="lerc"&&r!=null&&(s[n]=r)}readDefaultMosaicRule(r,s){return this._serviceSupportsMosaicRule?gl.fromJSON(s):null}get fieldsIndex(){return this.fields?new jD(this.fields):null}set format(r){r&&MOe.has(r.toLowerCase())&&this._set("format",r.toLowerCase())}readFormat(r,s){return s.serviceDataType==="esriImageServiceDataTypeVector-UV"||s.serviceDataType==="esriImageServiceDataTypeVector-MagDir"||this.pixelFilter!=null?"lerc":"jpgpng"}readMinScale(r,s){return s.minLOD!=null&&s.maxLOD!=null?r:0}readMaxScale(r,s){return s.minLOD!=null&&s.maxLOD!=null?r:0}set mosaicRule(r){let s=r;s&&s.mosaicMethod&&(s=gl.fromJSON({...s.toJSON(),mosaicMethod:s.mosaicMethod,mosaicOperation:s.mosaicOperation})),this._set("mosaicRule",s)}readMosaicRule(r,s){const n=r||s.mosaicRule;return n?gl.fromJSON(n):this._isMosaicRuleSupported(s)?gl.fromJSON(s):null}writeMosaicRule(r,s,n){let o=this.mosaicRule;const a=this.definitionExpression;o?a&&a!==o.where&&(o=o.clone(),o.where=a):a&&(o=new gl({where:a})),this._isValidCustomizedMosaicRule(o)&&(s[n]=o.toJSON())}writeNoData(r,s,n){r!=null&&typeof r=="number"&&(s[n]=AOe(r))}readObjectIdField(r,s){if(!r){const n=s.fields.filter(o=>o.type==="esriFieldTypeOID"||o.type==="oid");r=n&&n[0]&&n[0].name}return r}get parsedUrl(){return Fs(this.url)}readSourceType(r,s){return this._isMosaicDataset(s)?"mosaic-dataset":"raster-dataset"}set renderer(r){this.loaded&&(r=this._configRenderer(r)),this._set("renderer",r)}readRenderer(r,s,n){const o=s?.layerDefinition?.drawingInfo?.renderer,a=K5e(o,n);return a==null?null:(a.type==="vector-field"&&s.symbolTileSize&&!o.symbolTileSize&&(a.symbolTileSize=s.symbolTileSize),Hse(a)||tt.getLogger(this.declaredClass).warn("ArcGISImageService","Imagery layer doesn't support given renderer type."),a)}writeRenderer(r,s,n){s.layerDefinition=s.layerDefinition||{},s.layerDefinition.drawingInfo=s.layerDefinition.drawingInfo||{},s.layerDefinition.drawingInfo.renderer=r.toJSON(),r.type==="vector-field"&&(s.symbolTileSize=r.symbolTileSize)}get rasterFields(){const r=this._rasterAttributeTableFieldPrefix||"Raster.",s=new ml({name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:"string"}),n=new ml({name:"Raster.ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),o=new ml({name:"Raster.ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"string"});let a=this.fields?Le(this.fields):[];a.push(n),this.capabilities?.operations.supportsQuery&&this.fields&&this.fields.length>0&&a.push(s),this.version>=10.4&&ee(this.rasterFunctionInfos)&&this.rasterFunctionInfos.some(u=>u.name.toLowerCase()==="none")&&a.push(o),ee(this.rasterFunctionInfos)&&this.rasterFunctionInfos.filter(u=>u.name.toLowerCase()!=="none").forEach(u=>{a.push(new ml({name:"Raster.ServicePixelValue."+u.name,alias:u.name,domain:null,editable:!1,length:50,type:"string"}))}),this._isVectorDataSet()&&(a.push(new ml({name:"Raster.Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"double"})),a.push(new ml({name:"Raster.Direction",alias:"Direction",domain:null,editable:!1,type:"double"})));const{attributeTable:l}=this.rasterInfo??{};if(ee(l)){const u=l.fields.filter(c=>c.type!=="esriFieldTypeOID"&&c.name.toLowerCase()!=="value").map(c=>{const d=Le(c);return d.name=r+c.name,d});a=a.concat(u)}return a}set renderingRule(r){let s=r;s&&s.rasterFunction&&(s=qi.fromJSON({...s.toJSON(),rasterFunction:s.rasterFunction,rasterFunctionArguments:s.rasterFunctionArguments})),this._set("renderingRule",s)}readRenderingRule(r,s){const n=s.rasterFunctionInfos;return s.renderingRule||n&&n.length&&n[0].name!=="None"?this._isRFTJson(s.renderingRule)?qi.fromJSON({rasterFunctionDefinition:s.renderingRule}):qi.fromJSON(s.renderingRule||{rasterFunctionInfos:s.rasterFunctionInfos}):null}writeRenderingRule(r,s,n){const o=r.toJSON();o.rasterFunctionDefinition?s[n]=o.rasterFunctionDefinition:s[n]=o}readSpatialReference(r,s){const n=r||s.extent.spatialReference;return n?Tt.fromJSON(n):null}readPixelType(r){return lR.fromJSON(r)||r}writePixelType(r,s,n){(Re(this.serviceRasterInfo)||this.pixelType!==this.serviceRasterInfo.pixelType)&&(s[n]=lR.toJSON(r))}readVersion(r,s){let n=s.currentVersion;return n||(n=s.hasOwnProperty("fields")||s.hasOwnProperty("timeInfo")?10:9.3),n}applyFilter(r){let s=r;return this.pixelFilter&&(s=this._clonePixelData(r),this.pixelFilter(s)),s}async applyRenderer(r,s){let n=r;const{renderer:o,symbolizer:a,pixelFilter:l,bandIds:u}=this;if(!this._isPicture()&&o&&a&&!l){const c=JSON.stringify(this._cachedRendererJson)!==JSON.stringify(o.toJSON()),d=this._rasterJobHandler.instance;if(d){c&&(a.bind(),await d.updateSymbolizer(a,s),this._cachedRendererJson=o.toJSON());const f=await d.symbolize({bandIds:u,...r},s);n={extent:r.extent,pixelBlock:f}}else n={extent:r.extent,pixelBlock:a.symbolize({bandIds:u,...r})}}return n}destroy(){this._shutdownJobHandler()}increaseRasterJobHandlerUsage(){this._rasterJobHandler.refCount++}decreaseRasterJobHandlerUsage(){this._rasterJobHandler.refCount--,this._rasterJobHandler.refCount<=0&&this._shutdownJobHandler()}async computeAngles(r,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsComputeAngles)throw new Ce("imagery-layer:compute-angles","this operation is not supported on the input image service");return r=Bn(hOe,r).clone(),o$e(this.url,r,this._getRequestOptions(s))}async computePixelSpaceLocations(r,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsComputePixelLocation)throw new Ce("imagery-layer:compute-pixel-space-locations","this operation is not supported on the input image service");return r=Bn(mOe,r).clone(),a$e(this.url,r,this._getRequestOptions(s))}async computeHistograms(r,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsComputeHistograms)throw new Ce("imagery-layer:compute-histograms","this operation is not supported on the input image service");return r=Bn(gq,r).clone(),this._applyMosaicAndRenderingRules(r),u$e(this.url,r,this._getRequestOptions(s))}async computeStatisticsHistograms(r,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsComputeStatisticsHistograms)throw new Ce("imagery-layer:compute-statistics-histograms","this operation is not supported on the input image service");return r=Bn(gq,r).clone(),this._applyMosaicAndRenderingRules(r),l$e(this.url,r,this._getRequestOptions(s))}async measureHeight(r,s){const n=await this._fetchCapabilities(s?.signal);if(!(r.operationType==="base-and-top"?n.mensuration.supportsHeightFromBaseAndTop:r.operationType==="base-and-top-shadow"?n.mensuration.supportsHeightFromBaseAndTopShadow:n.mensuration.supportsHeightFromTopAndTopShadow))throw new Ce("imagery-layer:measure-height","this operation is not supported on the input image service");return r=Bn(fOe,r).clone(),this._applyMosaicAndRenderingRules(r),h$e(this.url,r,this._getRequestOptions(s))}async measureAreaAndPerimeter(r,s){const n=await this._fetchCapabilities(s?.signal);if(!(n.mensuration.supportsAreaAndPerimeter&&(!r.is3D||n.mensuration.supports3D)))throw new Ce("imagery-layer:measure-area-and-perimeter","this operation is not supported on the input image service");return r=Bn(dOe,r).clone(),this._applyMosaicAndRenderingRules(r),d$e(this.url,r,this._getRequestOptions(s))}async measureDistanceAndAngle(r,s){const n=await this._fetchCapabilities(s?.signal);if(!(n.mensuration.supportsDistanceAndAngle&&(!r.is3D||n.mensuration.supports3D)))throw new Ce("imagery-layer:measure-distance-and-angle","this operation is not supported on the input image service");return r=Bn(pOe,r).clone(),this._applyMosaicAndRenderingRules(r),f$e(this.url,r,this._getRequestOptions(s))}async measurePointOrCentroid(r,s){const n=await this._fetchCapabilities(s?.signal);if(!(n.mensuration.supportsPointOrCentroid&&(!r.is3D||n.mensuration.supports3D)))throw new Ce("imagery-layer:measure-point-or-centroid","this operation is not supported on the input image service");return r=Bn(yOe,r).clone(),this._applyMosaicAndRenderingRules(r),p$e(this.url,r,this._getRequestOptions(s))}getField(r){const{fieldsIndex:s}=this;return ee(s)?s.get(r):void 0}getFieldDomain(r,s){const n=this.getField(r);return n?n.domain:null}async fetchImage(r,s,n,o={}){if(r==null||s==null||n==null)throw new Ce("imagery-layer:fetch-image","Insufficient parameters for requesting an image. A valid extent, width and height values are required.");if(this.renderer||this.symbolizer){const d=await this.generateRasterInfo(this.renderingRule,{signal:o.signal});d&&(this.rasterInfo=d)}const a=this.getExportImageServiceParameters(r,s,n,o.timeExtent);if(a==null){if(o.requestAsImageElement&&this._canRequestImageElement(this.format)){const _=document.createElement("canvas");return _.width=s,_.height=n,o.returnImageBitmap?{imageBitmap:await sw(_,`${i(this.parsedUrl)}/exportImage`)}:{imageOrCanvasElement:_}}const{bandIds:d,rasterInfo:f}=this,m=(d?.length||f.bandCount)??0,g=s*n,v=f.pixelType,b=[];for(let _=0;_<m;_++)b.push(ui.createEmptyBand(v,g));return{pixelData:{pixelBlock:new ui({width:s,height:n,pixels:b,mask:new Uint8Array(g),pixelType:v}),extent:r}}}const l=!!o.requestAsImageElement&&!this.pixelFilter,u=l&&!!o.returnImageBitmap,c={imageServiceParameters:a,imageProps:{extent:r,width:s,height:n,format:this.format},requestAsImageElement:l,returnImageBitmap:u,signal:o.signal};return this._requestArrayBuffer(c)}fetchKeyProperties(r){return Et(i(this.parsedUrl)+"/keyProperties",{query:this._getQueryParams({renderingRule:this.version>=10.3?r?.renderingRule:null})}).then(s=>s.data)}fetchRasterAttributeTable(r){return this.version<10.1?Promise.reject(new Ce("#fetchRasterAttributeTable()","Failed to get rasterAttributeTable")):Et(i(this.parsedUrl)+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:this.version>=10.3?r?.renderingRule:null})}).then(s=>n1.fromJSON(s.data))}getCatalogItemRasterInfo(r,s){const n={...s,query:this._getQueryParams()};return cOe(i(this.parsedUrl),r,n)}async getCatalogItemICSInfo(r,s){const{data:n}=await Et(i(this.parsedUrl)+"/"+r+"/info/ics",{query:this._getQueryParams(),...s}),o=n&&n.ics;if(!o)return;let a=null;try{a=(await Et(i(this.parsedUrl)+"/"+r+"/info",{query:this._getQueryParams(),...s})).data.extent}catch{}if(!a||!a.spatialReference)return{ics:o,icsToPixelTransform:null,icsExtent:null,northDirection:null};const l=this.version>=10.7?Et(i(this.parsedUrl)+"/"+r+"/info/icstopixel",{query:this._getQueryParams(),...s}).then(A=>A.data).catch(()=>({})):{},u=a.spatialReference,c={geometries:JSON.stringify({geometryType:"esriGeometryEnvelope",geometries:[a]}),inSR:u.wkid||JSON.stringify(u),outSR:"0:"+r},d=Et(i(this.parsedUrl)+"/project",{query:this._getQueryParams(c),...s}).then(A=>A.data).catch(()=>({})),f=5,m=(a.xmin+a.xmax)/2,g=(a.ymax-a.ymin)/(f+1),v=a.ymin+g,b=[];for(let A=0;A<f;A++)b.push({x:m,y:v+g*A});const _={geometries:JSON.stringify({geometryType:"esriGeometryPoint",geometries:b}),inSR:u.wkid||JSON.stringify(u),outSR:"0:"+r},S=Et(i(this.parsedUrl)+"/project",{query:this._getQueryParams(_),...s}).then(A=>A.data).catch(()=>({})),M=await Promise.all([l,d,S]);let x=M[0].ipxf;if(x==null){const A=o.geodataXform?.xf_0;A?.name?.toLowerCase()==="topup"&&A?.coefficients?.length===6&&(x={affine:{name:"ics [sensor: Frame] to pixel (column, row) transformation",coefficients:A.coefficients,cellsizeRatio:0,type:"GeometricXform"}})}const T=Xt.fromJSON(M[1]&&M[1].geometries&&M[1].geometries[0]);T&&(T.spatialReference=new Tt({wkid:0,imageCoordinateSystem:o}));const I=M[2].geometries?M[2].geometries.filter(A=>A!=null&&A.x!=null&&A.y!=null&&A.x!=="NaN"&&A.y!=="NaN"):[],$=I.length;if($<3)return{ics:o,icsToPixelTransform:x,icsExtent:T,northDirection:null};let L=0,B=0,z=0,H=0;for(let A=0;A<$;A++)L+=I[A].x,B+=I[A].y,z+=I[A].x*I[A].x,H+=I[A].x*I[A].y;const J=($*H-L*B)/($*z-L*L);let K=0;const Q=I[f-1].x>I[0].x,y=I[f-1].y>I[0].y;return J===1/0?K=y?90:270:J===0?K=Q?0:180:J>0?K=Q?180*Math.atan(J)/Math.PI:180*Math.atan(J)/Math.PI+180:J<0&&(K=y?180+180*Math.atan(J)/Math.PI:360+180*Math.atan(J)/Math.PI),{ics:o,icsToPixelTransform:x,icsExtent:T,northDirection:K}}async generateRasterInfo(r,s){if(r=Bn(qi,r),this.serviceRasterInfo&&(!r||r.functionName?.toLowerCase()==="none"||this._isVectorFieldResampleFunction(r)))return this.serviceRasterInfo;const n=COe(r);if(!n)return null;if(this._functionRasterInfos[n])return this._functionRasterInfos[n];const o=this._generateRasterInfo(r,s);this._functionRasterInfos[n]=o;try{return await o}catch{return this._functionRasterInfos[n]=null,null}}getExportImageServiceParameters(r,s,n,o){r=r.clone().shiftCentralMeridian();const a=Sne(r.spatialReference,i(this.parsedUrl));this.pixelType!==this.serviceRasterInfo.pixelType&&(this.exportImageServiceParameters.pixelType=this.pixelType);const l=this.exportImageServiceParameters.toJSON(),{bandIds:u,noData:c}=l;let{renderingRule:d}=l;const f=this.renderingRule?.rasterFunctionDefinition,m=!this.renderer||this.renderer.type==="raster-stretch";if(u?.length&&this._hasRenderingRule(this.renderingRule)&&!f&&m){const b={rasterFunction:"ExtractBand",rasterFunctionArguments:{BandIds:u}};if(d.rasterFunction==="Stretch")b.rasterFunctionArguments.Raster=d.rasterFunctionArguments.Raster,d.rasterFunctionArguments.Raster=b;else if(d.rasterFunction==="Colormap"){const _=d.rasterFunctionArguments.Raster;_?.rasterFunction==="Stretch"?(b.rasterFunctionArguments.Raster=_.rasterFunctionArguments.Raster,_.rasterFunctionArguments.Raster=b):(b.rasterFunctionArguments.Raster=_,d.rasterFunctionArguments.Raster=b)}else b.rasterFunctionArguments.Raster=d,d=b;l.bandIds=void 0}else l.bandIds=u?.join(",");c instanceof Array&&c.length>0&&(l.noData=c.join(","));const g=this._processMultidimensionalIntersection(null,o,this.exportImageServiceParameters.mosaicRule);if(g.isOutSide)return null;l.mosaicRule=ee(g.mosaicRule)?JSON.stringify(g.mosaicRule):null,o=g.timeExtent,l.renderingRule=this._getRenderingRuleString(qi.fromJSON(d));const v={};if(ee(o)){const{start:b,end:_}=o.toJSON();b&&_&&b===_?v.time=""+b:b==null&&_==null||(v.time=`${b??"null"},${_??"null"}`)}return{bbox:r.xmin+","+r.ymin+","+r.xmax+","+r.ymax,bboxSR:a,imageSR:a,size:s+","+n,...l,...v}}async getSamples(r,s){if(!(await this._fetchCapabilities(s?.signal))?.operations.supportsGetSamples)throw new Ce("imagery-layer:get-samples","getSamples operation is not supported on the input image service");r=Bn(gOe,r).clone();const{raster:n}=this;return n&&r.raster==null&&(r.raster=n),c$e(this.url,r,this._getRequestOptions(s))}async identify(r,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsIdentify)throw new Ce("imagery-layer:identify","identify operation is not supported on the input image service");r=Bn(vq,r).clone();const n=this._processMultidimensionalIntersection(r.geometry,r.timeExtent,r.mosaicRule||this.mosaicRule);if(n.isOutSide)throw new Ce("imagery-layer:identify","the request cannot be fulfilled when falling outside of the multidimensional subset");r.timeExtent=n.timeExtent,r.mosaicRule=n.mosaicRule;const{raster:o,renderingRule:a}=this;return a&&r.renderingRule==null&&(r.renderingRule=a),o&&r.raster==null&&(r.raster=o),nq(this.url,r,this._getRequestOptions(s))}createQuery(){const r=new Ls;return r.outFields=["*"],r.returnGeometry=!0,r.where=this.definitionExpression||"1=1",r}async queryRasters(r,s){return{query:r,requestOptions:s}=await this._prepareForQuery(r,s),kM(this.url,r,s)}async queryObjectIds(r,s){return{query:r,requestOptions:s}=await this._prepareForQuery(r,s),u7(this.url,r,s)}async queryRasterCount(r,s){return{query:r,requestOptions:s}=await this._prepareForQuery(r,s),qne(this.url,r,s)}async queryVisibleRasters(r,s){if(!r)throw new Ce("imagery-layer: query-visible-rasters","missing query parameter");await this.load();const{pixelSize:n,returnDomainValues:o,returnTopmostRaster:a,showNoDataRecords:l}=s||{pixelSize:null,returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1};let u=!1,c=null,d=null;const f="raster.servicepixelvalue",m=this._rasterFunctionNamesIndex;if(ee(r.outFields)&&(u=r.outFields.some(x=>!x.toLowerCase().includes(f)),this.version>=10.4)){const x=r.outFields.filter(I=>I.toLowerCase().includes(f)&&I.length>f.length).map(I=>{const $=I.slice(f.length+1);return[this._updateRenderingRulesFunctionName($,m),$]});c=x.map(I=>new qi({functionName:I[0]})),d=x.map(I=>I[1]);const{renderingRule:T}=this;c.length===0?T?.functionName?(c.push(T),d.push(T.functionName)):c=null:T?.functionName&&!c.some(I=>I.functionName===T.functionName)&&(c.push(T),d.push(T.functionName))}const g=Re(r.outSpatialReference)||r.outSpatialReference.equals(this.spatialReference),{multidimensionalSubset:v}=this;let b=r.timeExtent||this.timeExtent;if(v){const{isOutside:x,intersection:T}=XO(v,{geometry:r.geometry,timeExtent:r.timeExtent,multidimensionalDefinition:this.exportImageServiceParameters.mosaicRule?.multidimensionalDefinition});if(x)throw new Ce("imagery-layer:query-visible-rasters","the request cannot be fulfilled when falling outside of the multidimensional subset");T&&ee(T.timeExtent)&&(b=T.timeExtent)}const _=this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule,b),S=this._getQueryParams({geometry:r.geometry,timeExtent:b,mosaicRule:_,renderingRule:this.version<10.4?this.renderingRule:null,renderingRules:c,pixelSize:n,returnCatalogItems:u,returnGeometry:g,raster:this.raster,maxItemCount:a?1:null});delete S.f;const M=new vq(S);try{await this.generateRasterInfo(this.renderingRule);const x=await nq(this.url,M,{signal:s?.signal,query:{...this.customParameters}}),T=r.outFields,I=x.value!=null&&x.value.toLowerCase().includes("nodata");if(!(u&&!g&&x?.catalogItems?.features.length&&(l||!I)))return this._processVisibleRastersResponse(x,{returnDomainValues:o,templateRRFunctionNames:d,showNoDataRecords:l,templateFields:T});const $=this.objectIdField||"ObjectId",L=x.catalogItems?.features??[],B=L.map(J=>J.attributes?.[$]),z=new Ls({objectIds:B,returnGeometry:!0,outSpatialReference:r.outSpatialReference,outFields:[$]}),H=await this.queryRasters(z);return H?.features?.length&&H.features.forEach(J=>{L.forEach(K=>{K.attributes[$]===J.attributes[$]&&(K.geometry=new ja(J.geometry),ee(r.outSpatialReference)&&(K.geometry.spatialReference=r.outSpatialReference))})}),this._processVisibleRastersResponse(x,{returnDomainValues:o,templateRRFunctionNames:d,showNoDataRecords:l,templateFields:T})}catch{throw new Ce("imagery-layer:query-visible-rasters","encountered error when querying visible rasters")}}async fetchVariableStatisticsHistograms(r,s){const n=Et(i(this.parsedUrl)+"/statistics",{query:this._getQueryParams({variable:r}),signal:s}).then(l=>l.data?.statistics),o=Et(i(this.parsedUrl)+"/histograms",{query:this._getQueryParams({variable:r}),signal:s}).then(l=>l.data?.histograms),a=await Promise.all([n,o]);return a[0]&&a[0].forEach(l=>{l.avg=l.mean,l.stddev=l.standardDeviation}),{statistics:a[0]||null,histograms:a[1]||null}}async createFlowMesh(r,s){const n=this._rasterJobHandler.instance;return n?n.createFlowMesh(r,s):bOe(r.meshType,r.simulationSettings,r.flowData,ee(s.signal)?s.signal:new AbortController().signal)}getMultidimensionalSubsetVariables(r){const s=r??this.serviceRasterInfo.multidimensionalInfo;return w4e(this.multidimensionalSubset,s)}async _fetchService(r){await this._fetchServiceInfo(r),this.rasterInfo||(this.rasterInfo=this.serviceRasterInfo);const s=this.sourceJSON,n=ee(this.serviceRasterInfo)?Promise.resolve(this.serviceRasterInfo):lOe(i(this.parsedUrl),s,{signal:r,query:this._getQueryParams()}).then(l=>(this._set("serviceRasterInfo",l),this._set("multidimensionalInfo",l.multidimensionalInfo),l)),o=this._hasRenderingRule(this.renderingRule)?this.generateRasterInfo(this.renderingRule,{signal:r}):null,a=this._getRasterFunctionInfos();return Promise.all([n,o,a]).then(l=>{l[1]?this._set("rasterInfo",l[1]):this._set("rasterInfo",l[0]),l[2]&&this._set("rasterFunctionInfos",l[2]),this.renderer&&!this._isSupportedRenderer(this.renderer)&&(this._set("renderer",null),tt.getLogger(this.declaredClass).warn("ArcGISImageService","Switching to the default renderer. Renderer applied is not valid for this Imagery Layer")),this._set("renderer",this._configRenderer(this.renderer)),this.addHandles([st(()=>this.renderingRule,c=>{(this.renderer||this.symbolizer||this.popupEnabled&&this.popupTemplate)&&this.generateRasterInfo(c).then(d=>{d&&(this.rasterInfo=d)})})]);const{serviceRasterInfo:u}=this;ee(u.multidimensionalInfo)&&this._updateMultidimensionalDefinition(u)})}_combineMosaicRuleWithTimeExtent(r,s){const n=this.timeInfo,{multidimensionalInfo:o}=this.serviceRasterInfo;if(Re(r)||Re(o)||Re(s)||Re(n?.startField))return r;const{startField:a}=n,l=o.variables.some(v=>v.dimensions.some(b=>b.name===a))?a:"StdTime";if(r=r.clone(),this.sourceType==="mosaic-dataset")return r.multidimensionalDefinition=r.multidimensionalDefinition?.filter(v=>v.dimensionName!==l),this._cleanupMultidimensionalDefinition(r);r.multidimensionalDefinition=r.multidimensionalDefinition||[];const u=r.multidimensionalDefinition.filter(v=>v.dimensionName===l),c=ee(s.start)?s.start.getTime():null,d=ee(s.end)?s.end.getTime():null,f=c==null||d==null||c===d,m=f?[c||d]:[[c,d]],g=this.version>=10.8;if(u.length)u.forEach(v=>{v.dimensionName===l&&(g?(v.dimensionName=null,v.isSlice=!1,v.values=[]):(v.isSlice=f,v.values=m))});else if(!g){const v=r.multidimensionalDefinition.filter(b=>b.variableName!=null&&b.dimensionName==null);v.length?v.forEach(b=>{b.dimensionName=l,b.isSlice=f,b.values=m}):r.multidimensionalDefinition.push(new rw({variableName:"",dimensionName:l,isSlice:f,values:m}))}return this._cleanupMultidimensionalDefinition(r)}_cleanupMultidimensionalDefinition(r){return Re(r)?null:(r.multidimensionalDefinition&&(r.multidimensionalDefinition=r.multidimensionalDefinition.filter(s=>!(!s.variableName&&!s.dimensionName)),r.multidimensionalDefinition.length===0&&(r.multidimensionalDefinition=null)),this.sourceType!=="mosaic-dataset"&&r.multidimensionalDefinition==null?null:r)}async _prepareForQuery(r,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsQuery)throw new Ce("imagery-layer:query-rasters","query operation is not supported on the input image service");return r=ee(r)?Bn(Ls,r):this.createQuery(),s=this._getRequestOptions(s),this.raster&&(s.query={...s.query,raster:this.raster}),{query:r,requestOptions:s}}async _initJobHandler(){if(this._rasterJobHandler.connectionPromise!=null)return this._rasterJobHandler.connectionPromise;const r=new m4e;this._rasterJobHandler.connectionPromise=r.initialize().then(()=>{this._rasterJobHandler.instance=r},()=>{}),await this._rasterJobHandler.connectionPromise}_shutdownJobHandler(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy(),this._rasterJobHandler.instance=null,this._rasterJobHandler.connectionPromise=null,this._rasterJobHandler.refCount=0,this._cachedRendererJson=null}_isSupportedRenderer(r){const{rasterInfo:s,renderingRule:n}=this;return r.type==="unique-value"&&this._hasRenderingRule(n)&&s?.bandCount===1&&["u8","s8"].includes(s.pixelType)||s!=null&&r!=null&&SCe(s).includes(r.type)}async _fetchCapabilities(r){return this.capabilities||await this._fetchServiceInfo(r),this.capabilities}async _fetchServiceInfo(r){let s=this.sourceJSON;if(!s){const{data:n,ssl:o}=await Et(i(this.parsedUrl),{query:this._getQueryParams(),signal:r});s=n,this.sourceJSON=s,o&&(this.url=this.url.replace(/^http:/i,"https:"))}if(s.capabilities?.toLowerCase().split(",").map(n=>n.trim()).indexOf("tilesonly")>-1)throw new Ce("imagery-layer:fetch-service-info","use ImageryTileLayer to open tiles-only image services");this.read(s,{origin:"service",url:this.parsedUrl})}_isMosaicDataset(r){return r.serviceSourceType?r.serviceSourceType==="esriImageServiceSourceTypeMosaicDataset":r.fields?.length>0}_isMosaicRuleSupported(r){if(!r)return!1;const s=this._isMosaicDataset(r),n=r.currentVersion>=10.71&&r.hasMultidimensions&&!(r.fields?.length>1);return s||n}_isVectorFieldResampleFunction(r){if(Re(r))return!1;const{functionName:s,functionArguments:n}=r,o=s?.toLowerCase()==="resample",a=n?.ResampleType||n?.resampleType;return o&&(a===7||a===10)}_isPicture(){return!this.format||this.format.includes("jpg")||this.format.includes("png")}_configRenderer(r){const s=this._isPicture(),{rasterInfo:n}=this;if(!s&&!this.pixelFilter||this._isVectorDataSet()){if(!this.bandIds&&n.bandCount>=3){const a=fne(n);!a||n.bandCount===3&&a[0]===0&&a[1]===1&&a[2]===2||(this.bandIds=a)}r||(r=xCe(n,{bandIds:this.bandIds,variableName:this.renderingRule?null:this.mosaicRule?.multidimensionalDefinition?.[0].variableName}));const o=FCe(r.toJSON());this.symbolizer?(this.symbolizer.rendererJSON=o,this.symbolizer.rasterInfo=n):this.symbolizer=new YCe({rendererJSON:o,rasterInfo:n}),this.symbolizer.bind().success||(this.symbolizer=null)}return r}_clonePixelData(r){return r==null?r:{extent:r.extent&&r.extent.clone(),pixelBlock:ee(r.pixelBlock)?r.pixelBlock.clone():null}}_getQueryParams(r){r&&ee(r.renderingRule)&&typeof r.renderingRule!="string"&&(r.renderingRule=this._getRenderingRuleString(r.renderingRule));const{raster:s,viewId:n}=this;return{raster:s,viewId:n,f:"json",...r,...this.customParameters}}_getRequestOptions(r){return{...r,query:{...r?.query,...this.customParameters}}}_decodePixelBlock(r,s,n){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:r,options:s}):KG(r,s,n)}async _getRasterFunctionInfos(r){const s=this.sourceJSON.rasterFunctionInfos;return this.loaded?s:s&&this.version>=10.3?s.length===1&&s[0].name.toLowerCase()==="none"?s:(await Et(i(this.parsedUrl)+"/rasterFunctionInfos",{query:this._getQueryParams(),signal:r})).data?.rasterFunctionInfos:null}_canRequestImageElement(r){return!this.pixelFilter&&(!r||r.includes("png"))}async _requestArrayBuffer(r){const{imageProps:s,requestAsImageElement:n,returnImageBitmap:o,signal:a}=r;if(n&&this._canRequestImageElement(s.format)){const v=`${i(this.parsedUrl)}/exportImage`,{data:b}=await Et(v,{responseType:o?"blob":"image",query:this._getQueryParams({f:"image",...this.refreshParameters,...r.imageServiceParameters}),signal:a});return b instanceof Blob?{imageBitmap:await sw(b,v),params:s}:{imageOrCanvasElement:b,params:s}}const l=this._initJobHandler(),u=Et(i(this.parsedUrl)+"/exportImage",{responseType:"array-buffer",query:this._getQueryParams({f:"image",...r.imageServiceParameters}),signal:a}),c=(await Promise.all([u,l]))[0].data,d=s.format||"jpgpng";let f=d;if(f!=="bsq"&&f!=="bip"&&(f=hCe(c)),!f)throw new Ce("imagery-layer:fetch-image","unsupported format signature "+String.fromCharCode.apply(null,new Uint8Array(c)));const m={signal:a};return{pixelData:{pixelBlock:await(d==="gif"||d==="bmp"||d.includes("png")&&(f==="png"||f==="jpg")?KG(c,{useCanvas:!0,...s},m):this._decodePixelBlock(c,{width:s.width,height:s.height,planes:null,pixelType:null,noDataValue:null,format:d},m)),extent:s.extent},params:s}}_generateRasterInfo(r,s){const n={...s,query:this._getQueryParams()};return uOe(i(this.parsedUrl),r,n)}_isValidCustomizedMosaicRule(r){return r&&JSON.stringify(r.toJSON())!==JSON.stringify(this.defaultMosaicRule?.toJSON())}_updateMultidimensionalDefinition(r){if(this._isValidCustomizedMosaicRule(this.mosaicRule))return;let s=b4e(r,{multidimensionalSubset:this.multidimensionalSubset});if(ee(s)&&s.length>0){this.mosaicRule=this.mosaicRule||new gl;const n=this.mosaicRule.multidimensionalDefinition;!this.sourceJSON.defaultVariableName&&this.renderingRule&&this.renderingRule.functionName?.toLowerCase()!=="none"&&s.forEach(o=>o.variableName=""),s=s.filter(({variableName:o,dimensionName:a})=>o&&o!=="*"||a),!n?.length&&s.length&&(this.mosaicRule.multidimensionalDefinition=s)}}_processVisibleRastersResponse(r,s){s=s||{};const n=r.value,{templateRRFunctionNames:o,showNoDataRecords:a,returnDomainValues:l,templateFields:u}=s,c=r.processedValues;let d=r.catalogItems&&r.catalogItems.features,f=r.properties&&r.properties.Values&&r.properties.Values.map(M=>M.replace(/ /gi,", "))||[];const m=this.objectIdField||"ObjectId",g=typeof n=="string"&&n.toLowerCase().includes("nodata"),v=[];if(n&&!d&&!g){const M={};M[m]=0,f=[n],d=[new kn(this.fullExtent,null,M)]}if(!d)return[];let b,_,S;this._updateResponseFieldNames(d,u),g&&!a&&(d=[]);for(let M=0;M<d.length;M++){if(b=d[M],n!=null){if(_=f[M],S=this.renderingRule&&c&&c.length>0&&o&&o.length>0&&o.includes(this.renderingRule.functionName)?c[o.indexOf(this.renderingRule.functionName)]:n,_.toLowerCase()==="nodata"&&!a)continue;const x="Raster.ItemPixelValue",T="Raster.ServicePixelValue";b.attributes[x]=_,b.attributes[T]=S,this._updateFeatureWithMagDirValues(b,_);const I=this.fields&&this.fields.length>0;let $=this.renderingRule&&ee(this.serviceRasterInfo.attributeTable)?I?_:n:S;this.renderingRule||($=I?_:n),this._updateFeatureWithRasterAttributeTableValues(b,$)}if(b.sourceLayer=b.layer=this,l&&this._updateFeatureWithDomainValues(b),o&&c&&o.length===c.length)for(let x=0;x<o.length;x++){const T="Raster.ServicePixelValue."+o[x];b.attributes[T]=c[x]}v.push(d[M])}return v}_processMultidimensionalIntersection(r,s,n){const{multidimensionalSubset:o}=this;if(!o)return{isOutSide:!1,timeExtent:s,mosaicRule:n=this._combineMosaicRuleWithTimeExtent(n,s)};if(o){const{isOutside:a,intersection:l}=XO(o,{geometry:r,timeExtent:s});if(a)return{isOutSide:!0,timeExtent:null,mosaicRule:null};l&&ee(l.timeExtent)&&(s=l.timeExtent)}if(n=this._combineMosaicRuleWithTimeExtent(n,s),ee(n)&&n.multidimensionalDefinition){const{isOutside:a}=XO(o,{multidimensionalDefinition:n.multidimensionalDefinition});if(a)return{isOutSide:!0,timeExtent:null,mosaicRule:null}}return{isOutSide:!1,timeExtent:s,mosaicRule:n}}_updateFeatureWithRasterAttributeTableValues(r,s){const n=this.rasterInfo.attributeTable||this.serviceRasterInfo.attributeTable;if(Re(n))return;const{features:o,fields:a}=n,l=a.map(d=>d.name).filter(d=>d.toLowerCase()==="value"),u=l&&l[0];if(!u)return;const c=o.filter(d=>d.attributes[u]===(s!=null?parseInt(s,10):null));c&&c[0]&&a.forEach(d=>{const f=this._rasterAttributeTableFieldPrefix+d.name;r.attributes[f]=c[0].attributes[d.name]})}_updateFeatureWithMagDirValues(r,s){if(!this._isVectorDataSet())return;const n=s.split(/,\s*/).map(c=>parseFloat(c)),o=n.map(c=>[c]),a=n.map(c=>({minValue:c,maxValue:c,noDataValue:null})),l=new ui({height:1,width:1,pixelType:"f32",pixels:o,statistics:a});this.pixelFilter!=null&&this.pixelFilter({pixelBlock:l,extent:new Xt(0,0,0,0,this.spatialReference)});const u=this.serviceDataType==="esriImageServiceDataTypeVector-MagDir"?[l.pixels[0][0],l.pixels[1][0]]:JD([l.pixels[0][0],l.pixels[1][0]]);r.attributes["Raster.Magnitude"]=u[0],r.attributes["Raster.Direction"]=u[1]}_updateFeatureWithDomainValues(r){const s=this.fields&&this.fields.filter(n=>n.domain&&n.domain.type==="coded-value");s?.forEach(n=>{const o=r.attributes[n.name];if(o!=null){const a=n.domain.codedValues.find(l=>l.code===o);a&&(r.attributes[n.name]=a.name)}})}_updateResponseFieldNames(r,s){if(!s||s.length<1)return;const n=this.fieldsIndex;Re(n)||r.forEach(o=>{if(o&&o.attributes)for(const a of s){const l=n.get(a)?.name;l&&l!==a&&(o.attributes[a]=o.attributes[l],delete o.attributes[l])}})}_getRenderingRuleString(r){if(r){let s=r.toJSON();return s=s.rasterFunctionDefinition??s,(s.thumbnail||s.thumbnailEx)&&(s.thumbnail=s.thumbnailEx=null),JSON.stringify(s)}return null}_hasRenderingRule(r){return r!=null&&r.functionName!=null&&r.functionName.toLowerCase()!=="none"}_updateRenderingRulesFunctionName(r,s){if(!r||r.length<1)return;if(r==="Raw")return r.replace("Raw","None");const n=r.toLowerCase().replace(/ /gi,"_");return s.has(n)?s.get(n):r}_isRFTJson(r){return r&&r.name&&r.arguments&&r.function&&r.hasOwnProperty("functionType")}_isVectorDataSet(){return this.serviceDataType==="esriImageServiceDataTypeVector-UV"||this.serviceDataType==="esriImageServiceDataTypeVector-MagDir"}_applyMosaicAndRenderingRules(r){const{raster:s,mosaicRule:n,renderingRule:o}=this;o&&r.renderingRule==null&&(r.renderingRule=o),n&&r.mosaicRule==null&&(r.mosaicRule=n),s&&r.raster==null&&(r.raster=s)}_readCapabilities(r){const s=r.capabilities?r.capabilities.toLowerCase().split(",").map(v=>v.trim()):["image","catalog"],{currentVersion:n,advancedQueryCapabilities:o,maxRecordCount:a}=r,l=s.includes("image"),u=r.serviceDataType==="esriImageServiceDataTypeElevation",c=!!(r.spatialReference||r.extent&&r.extent.spatialReference),d=s.includes("edit"),f=s.includes("mensuration")&&c,m=r.mensurationCapabilities==null?[]:r.mensurationCapabilities.toLowerCase().split(",").map(v=>v.trim()),g=f&&m.includes("basic");return{data:{supportsAttachment:!1},operations:{supportsComputeHistograms:l,supportsExportImage:l,supportsIdentify:l,supportsMeasure:f,supportsDownload:s.includes("download"),supportsQuery:s.includes("catalog")&&r.fields&&r.fields.length>0,supportsGetSamples:n>=10.2&&l,supportsProject:n>=10.3&&l,supportsComputeStatisticsHistograms:n>=10.4&&l,supportsQueryBoundary:n>=10.6&&l,supportsCalculateVolume:n>=10.7&&u,supportsComputePixelLocation:n>=10.7&&s.includes("catalog"),supportsComputeAngles:n>=10.91,supportsAdd:d,supportsDelete:d,supportsEditing:d,supportsUpdate:d,supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsChangeTracking:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsExceedsLimitStatistics:!1,supportsQueryAnalytics:!1,supportsQueryTopFeatures:!1},query:{maxRecordCount:a,maxRecordCountFactor:void 0,supportsStatistics:!!o?.supportsStatistics,supportsOrderBy:!!o?.supportsOrderBy,supportsDistinct:!!o?.supportsDistinct,supportsPagination:!!o?.supportsPagination,supportsStandardizedQueriesOnly:!!o?.useStandardizedQueries,supportsPercentileStatistics:!!o?.supportsPercentileStatistics,supportsCentroid:!!o?.supportsReturningGeometryCentroid,supportsDistance:!!o?.supportsQueryWithDistance,supportsExtent:!!o?.supportsReturningQueryExtent,supportsGeometryProperties:!!o?.supportsReturningGeometryProperties,supportsHavingClause:!!o?.supportsHavingClause,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsMaxRecordCountFactor:!1,supportsSqlExpression:!1,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!1,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!1,supportsCacheHint:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!!o?.supportsDefaultSR,supportsFullTextSearch:!1,supportsCompactGeometry:!1,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0},mensuration:{supportsDistanceAndAngle:g,supportsAreaAndPerimeter:g,supportsPointOrCentroid:g,supportsHeightFromBaseAndTop:f&&m.includes("base-top height"),supportsHeightFromBaseAndTopShadow:f&&m.includes("base-top shadow height"),supportsHeightFromTopAndTopShadow:f&&m.includes("top-top shadow height"),supports3D:f&&m.includes("3d")}}}};function i(r){return r?.path??""}return h([p()],e.prototype,"_functionRasterInfos",void 0),h([p()],e.prototype,"_rasterJobHandler",void 0),h([p()],e.prototype,"_cachedRendererJson",void 0),h([p({readOnly:!0})],e.prototype,"_serviceSupportsMosaicRule",void 0),h([Ye("_serviceSupportsMosaicRule",["currentVersion","fields"])],e.prototype,"readServiceSupportsMosaicRule",null),h([p()],e.prototype,"_rasterAttributeTableFieldPrefix",void 0),h([p({readOnly:!0})],e.prototype,"_rasterFunctionNamesIndex",null),h([p()],e.prototype,"adjustAspectRatio",void 0),h([p({type:[Si],json:{write:!0}})],e.prototype,"bandIds",void 0),h([Ye("bandIds")],e.prototype,"readBandIds",null),h([p({readOnly:!0,json:{read:!1}})],e.prototype,"capabilities",void 0),h([Ye("service","capabilities",["capabilities","currentVersion","serviceDataType"])],e.prototype,"readCapabilities",null),h([p({type:Number})],e.prototype,"compressionQuality",void 0),h([it("compressionQuality")],e.prototype,"writeCompressionQuality",null),h([p({type:Number})],e.prototype,"compressionTolerance",void 0),h([it("compressionTolerance")],e.prototype,"writeCompressionTolerance",null),h([p({json:{read:{source:"copyrightText"}}})],e.prototype,"copyright",void 0),h([p({readOnly:!0,dependsOn:["_serviceSupportsMosaicRule"]})],e.prototype,"defaultMosaicRule",void 0),h([Ye("defaultMosaicRule",["defaultMosaicMethod"])],e.prototype,"readDefaultMosaicRule",null),h([p({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],e.prototype,"definitionExpression",void 0),h([p({readOnly:!0,constructOnly:!0})],e.prototype,"exportImageServiceParameters",void 0),h([p()],e.prototype,"rasterInfo",void 0),h([p({readOnly:!0,type:[ml]})],e.prototype,"fields",void 0),h([p({readOnly:!0})],e.prototype,"fieldsIndex",null),h([p({type:["png","png8","png24","png32","jpg","bmp","gif","jpgpng","lerc","tiff"],json:{write:!0}})],e.prototype,"format",null),h([Ye("service","format",["serviceDataType"])],e.prototype,"readFormat",null),h([p({type:Xt})],e.prototype,"fullExtent",void 0),h([p({readOnly:!0})],e.prototype,"hasMultidimensions",void 0),h([p({json:{read:{source:"maxImageHeight"}}})],e.prototype,"imageMaxHeight",void 0),h([p({json:{read:{source:"maxImageWidth"}}})],e.prototype,"imageMaxWidth",void 0),h([p({type:String,json:{type:pm.jsonValues,read:pm.read,write:pm.write}})],e.prototype,"interpolation",void 0),h([p()],e.prototype,"minScale",void 0),h([Ye("service","minScale")],e.prototype,"readMinScale",null),h([p()],e.prototype,"maxScale",void 0),h([Ye("service","maxScale")],e.prototype,"readMaxScale",null),h([p({type:gl})],e.prototype,"mosaicRule",null),h([Ye("mosaicRule",["mosaicRule","defaultMosaicMethod"])],e.prototype,"readMosaicRule",null),h([it("mosaicRule")],e.prototype,"writeMosaicRule",null),h([p()],e.prototype,"multidimensionalInfo",void 0),h([p({type:f4e,json:{write:!0}})],e.prototype,"multidimensionalSubset",void 0),h([p({json:{type:Si}})],e.prototype,"noData",void 0),h([it("noData")],e.prototype,"writeNoData",null),h([p({type:String,json:{type:qx.jsonValues,read:qx.read,write:qx.write}})],e.prototype,"noDataInterpretation",void 0),h([p({type:String,readOnly:!0,json:{read:{source:["fields"]}}})],e.prototype,"objectIdField",void 0),h([Ye("objectIdField")],e.prototype,"readObjectIdField",null),h([p({})],e.prototype,"geometryType",void 0),h([p({})],e.prototype,"typeIdField",void 0),h([p({})],e.prototype,"types",void 0),h([p({readOnly:!0})],e.prototype,"parsedUrl",null),h([p({type:Function})],e.prototype,"pixelFilter",void 0),h([p()],e.prototype,"raster",void 0),h([p({readOnly:!0})],e.prototype,"sourceType",void 0),h([Ye("sourceType",["serviceSourceType","fields"])],e.prototype,"readSourceType",null),h([p()],e.prototype,"viewId",void 0),h([p({types:f6,json:{name:"layerDefinition.drawingInfo.renderer",origins:{"web-scene":{types:m6,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:r=>({enabled:r&&r.type!=="vector-field"&&r.type!=="flow"})}}}}})],e.prototype,"renderer",null),h([Ye("renderer")],e.prototype,"readRenderer",null),h([it("renderer")],e.prototype,"writeRenderer",null),h([p()],e.prototype,"symbolizer",void 0),h([p(JA)],e.prototype,"opacity",void 0),h([p({readOnly:!0})],e.prototype,"rasterFields",null),h([p({constructOnly:!0})],e.prototype,"rasterFunctionInfos",void 0),h([p({type:qi})],e.prototype,"renderingRule",null),h([Ye("renderingRule",["renderingRule","rasterFunctionInfos"])],e.prototype,"readRenderingRule",null),h([it("renderingRule")],e.prototype,"writeRenderingRule",null),h([p()],e.prototype,"serviceDataType",void 0),h([p({readOnly:!0,type:Tt})],e.prototype,"spatialReference",void 0),h([Ye("spatialReference",["spatialReference","extent"])],e.prototype,"readSpatialReference",null),h([p({json:{type:lR.jsonValues}})],e.prototype,"pixelType",void 0),h([Ye("pixelType")],e.prototype,"readPixelType",null),h([it("pixelType")],e.prototype,"writePixelType",null),h([p({constructOnly:!0,type:Q3})],e.prototype,"serviceRasterInfo",void 0),h([p()],e.prototype,"sourceJSON",void 0),h([p(G3)],e.prototype,"url",void 0),h([p({readOnly:!0})],e.prototype,"version",void 0),h([Ye("version",["currentVersion","fields","timeInfo"])],e.prototype,"readVersion",null),e=h([ce("esri.layers.mixins.ArcGISImageService")],e),e};let iu=class extends a1(_C(c1(Xw(e_($Oe(t_(fC(hC(Ym(Bh)))))))))){constructor(...e){super(...e),this.legendEnabled=!0,this.isReference=null,this.operationalLayerType="ArcGISImageServiceLayer",this.popupEnabled=!0,this.popupTemplate=null,this.type="imagery"}normalizeCtorArgs(e,i){return typeof e=="string"?{url:e,...i}:e}load(e){const i=ee(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},e).catch(_a).then(()=>this._fetchService(i))),Promise.resolve(this)}writeOperationalLayerType(e,i,r){const s=this.renderer?.type==="vector-field";i[r]=s?"ArcGISImageServiceVectorLayer":"ArcGISImageServiceLayer"}get defaultPopupTemplate(){return this.createPopupTemplate()}createPopupTemplate(e){const i=this.rasterFields,r=this.title,s=new Set;let n=!1,o=!1;this.capabilities&&(n=this.capabilities.operations.supportsQuery&&this.fields&&this.fields.length>0,o=this.serviceDataType==="esriImageServiceDataTypeVector-UV"||this.serviceDataType==="esriImageServiceDataTypeVector-MagDir");const a=new Set;n&&a.add("raster.itempixelvalue");for(const l of i){const u=l.name.toLowerCase();a.has(u)||u.includes("raster.servicepixelvalue.")||s.add(l.name)}return o&&s.add("raster.magnitude").add("raster.direction"),VD({fields:i,title:r},{...e,visibleFieldNames:s})}queryFeatures(e,i){return this.queryRasters(e,i).then(r=>{if(r?.features)for(const s of r.features)s.layer=s.sourceLayer=this;return r})}queryFeatureCount(e,i){return this.queryRasterCount(e,i)}redraw(){this.emit("redraw")}serviceSupportsSpatialReference(e){return UD(this,e)}};h([p(vD)],iu.prototype,"legendEnabled",void 0),h([p({type:["show","hide"]})],iu.prototype,"listMode",void 0),h([p({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],iu.prototype,"isReference",void 0),h([p({type:["ArcGISImageServiceLayer"],json:{origins:{"web-map":{type:["ArcGISImageServiceLayer","ArcGISImageServiceVectorLayer"],read:!1,write:{target:"layerType",ignoreOrigin:!0}}}}})],iu.prototype,"operationalLayerType",void 0),h([it("web-map","operationalLayerType")],iu.prototype,"writeOperationalLayerType",null),h([p(z3)],iu.prototype,"popupEnabled",void 0),h([p({type:Hm,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],iu.prototype,"popupTemplate",void 0),h([p({readOnly:!0})],iu.prototype,"defaultPopupTemplate",null),h([p({readOnly:!0,json:{read:!1}})],iu.prototype,"type",void 0),iu=h([ce("esri.layers.ImageryLayer")],iu);const Wne=iu,Edt=Object.freeze(Object.defineProperty({__proto__:null,default:Wne},Symbol.toStringTag,{value:"Module"})),Jne=96;function B6(t,e){const i=e||t.extent,r=t.width,s=Sp(i&&i.spatialReference);return i&&r?i.width/r*s*WQ*Jne:0}function Tdt(t,e){return t/(Sp(e)*WQ*Jne)}let z6=class{constructor(e,i,r=""){this.major=e,this.minor=i,this._context=r}lessThan(e,i){return this.major<e||e===this.major&&this.minor<i}since(e,i){return!this.lessThan(e,i)}validate(e){if(this.major!==e.major){const i=this._context&&this._context+":",r=this._context&&this._context+" ";throw new Ce(i+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new z6(this.major,this.minor,this._context)}static parse(e,i=""){const[r,s]=e.split("."),n=/^\s*\d+\s*$/;if(!r||!r.match||!r.match(n))throw new Ce((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!s||!s.match||!s.match(n))throw new Ce((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const o=parseInt(r,10),a=parseInt(s,10);return new z6(o,a,i)}};const Zne=t=>{let e=class extends t{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=void 0,this._allLayersAndTablesPromise=null,this._allLayersAndTablesMap=null}readCapabilities(i,r){const s=r.capabilities&&r.capabilities.split(",").map(S=>S.toLowerCase().trim());if(!s)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const n=this.type,o=n!=="tile"&&!!r.supportsDynamicLayers,a=s.includes("query"),l=s.includes("map"),u=!!r.exportTilesAllowed,c=s.includes("tilemap"),d=s.includes("data"),f=n!=="tile"&&(!r.tileInfo||o),m=n!=="tile"&&(!r.tileInfo||o),g=n!=="tile",v=r.cimVersion&&z6.parse(r.cimVersion),b=v?.since(1,4)??!1,_=v?.since(2,0)??!1;return{operations:{supportsExportMap:l,supportsExportTiles:u,supportsIdentify:a,supportsQuery:d,supportsTileMap:c},exportMap:l?{supportsArcadeExpressionForLabeling:b,supportsSublayersChanges:g,supportsDynamicLayers:o,supportsSublayerVisibility:f,supportsSublayerDefinitionExpression:m,supportsCIMSymbols:_}:null,exportTiles:u?{maxExportTilesCount:+r.maxExportTilesCount}:null}}readVersion(i,r){let s=r.currentVersion;return s||(s=r.hasOwnProperty("capabilities")||r.hasOwnProperty("tables")?10:r.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),s}async fetchSublayerInfo(i,r){try{return await this.fetchAllLayersAndTables(r),this._allLayersAndTablesMap?.get(i)}catch{return}}async fetchAllLayersAndTables(i){await this.load(i),this._allLayersAndTablesPromise||(this._allLayersAndTablesPromise=Et(Fs(this.url).path+"/layers",{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey}}).then(s=>{this._allLayersAndTablesMap=new Map;for(const n of s.data.layers)this._allLayersAndTablesMap.set(n.id,n);return{result:s.data}},s=>({error:s})));const r=await this._allLayersAndTablesPromise;if(pr(i),"result"in r)return r.result;throw r.error}};return h([p({readOnly:!0})],e.prototype,"capabilities",void 0),h([Ye("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],e.prototype,"readCapabilities",null),h([p({json:{read:{source:"copyrightText"}}})],e.prototype,"copyright",void 0),h([p({type:Xt})],e.prototype,"fullExtent",void 0),h([p(Fie)],e.prototype,"id",void 0),h([p({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],e.prototype,"legendEnabled",void 0),h([p(z3)],e.prototype,"popupEnabled",void 0),h([p({type:Tt})],e.prototype,"spatialReference",void 0),h([p({readOnly:!0})],e.prototype,"version",void 0),h([Ye("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],e.prototype,"readVersion",null),e=h([ce("esri.layers.mixins.ArcGISMapService")],e),e};let Av=class extends Nt{constructor(e){super(e),this.getCollections=null}initialize(){this.own(XK(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const e=ee(this.getCollections)?this.getCollections():null;if(Re(e))return void this.removeAll();let i=0;for(const r of e)ee(r)&&(i=this._processCollection(i,r));this.splice(i,this.length)}_createNewInstance(e){return new Nt(e)}_processCollection(e,i){if(!i)return e;const r=this.itemFilterFunction?this.itemFilterFunction:s=>!!s;for(const s of i)if(s){if(r(s)){const n=this.indexOf(s,e);n>=0?n!==e&&this.reorder(s,e):this.add(s,e),++e}if(this.getChildrenFunction){const n=this.getChildrenFunction(s);if(Array.isArray(n))for(const o of n)e=this._processCollection(e,o);else e=this._processCollection(e,n)}}return e}};h([p()],Av.prototype,"getCollections",void 0),h([p()],Av.prototype,"getChildrenFunction",void 0),h([p()],Av.prototype,"itemFilterFunction",void 0),Av=h([ce("esri.core.CollectionFlattener")],Av);const B0=Av;async function OOe(t,e,i){const r=Kn(t);return B$e(r,Ls.from(e),{...i}).then(s=>({count:s.data.count,extent:Xt.fromJSON(s.data.extent)}))}function ROe(t,e){return e}function c7(t,e,i,r){switch(i){case 0:return US(t,e+r,0);case 1:return t.originPosition==="lowerLeft"?US(t,e+r,1):POe(t,e+r,1)}}function Yne(t,e,i,r){return i===2?US(t,e,2):c7(t,e,i,r)}function kOe(t,e,i,r){return i===2?US(t,e,3):c7(t,e,i,r)}function LOe(t,e,i,r){return i===3?US(t,e,3):Yne(t,e,i,r)}function US({translate:t,scale:e},i,r){return t[r]+i*e[r]}function POe({translate:t,scale:e},i,r){return t[r]-i*e[r]}let NOe=class{constructor(e){this._options=e,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=ROe,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this._options.applyTransform&&(e.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!e.hasZ)return;const i=lD(e.geometryType,this._options.sourceSpatialReference,e.spatialReference);if(!Re(i))for(const r of e.features)i(r.geometry)}createSpatialReference(){return{}}addField(e,i){const r=e.fields;am(r),r.push(i);const s=r.map(n=>n.name);this._attributesConstructor=function(){for(const n of s)this[n]=null}}addFeature(e,i){e.features.push(i)}prepareFeatures(e){switch(this._transform=e.transform,this._options.applyTransform&&e.transform&&(this._applyTransform=this._deriveApplyTransform(e)),this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++,e.geometryType){case"esriGeometryPoint":this.addCoordinate=(i,r,s)=>this.addCoordinatePoint(i,r,s),this.createGeometry=i=>this.createPointGeometry(i);break;case"esriGeometryPolygon":this.addCoordinate=(i,r,s)=>this._addCoordinatePolygon(i,r,s),this.createGeometry=i=>this._createPolygonGeometry(i);break;case"esriGeometryPolyline":this.addCoordinate=(i,r,s)=>this._addCoordinatePolyline(i,r,s),this.createGeometry=i=>this._createPolylineGeometry(i);break;case"esriGeometryMultipoint":this.addCoordinate=(i,r,s)=>this._addCoordinateMultipoint(i,r,s),this.createGeometry=i=>this._createMultipointGeometry(i)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(e,i,r){this._lengths.length===0&&(this._toAddInCurrentPath=i),this._lengths.push(i)}addQueryGeometry(e,i){const{queryGeometry:r,queryGeometryType:s}=i,n=O6(r.clone(),r,!1,!1,this._transform),o=zne(n,s,!1,!1);e.queryGeometryType=s,e.queryGeometry={...o}}createPointGeometry(e){const i={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(i.z=0),e.hasM&&(i.m=0),i}addCoordinatePoint(e,i,r){const s=Wo(this._transform,"transform");switch(i=this._applyTransform(s,i,r,0),r){case 0:e.x=i;break;case 1:e.y=i;break;case 2:"z"in e?e.z=i:e.m=i;break;case 3:e.m=i}}_transformPathLikeValue(e,i){let r=0;i<=1&&(r=this._previousCoordinate[i],this._previousCoordinate[i]+=e);const s=Wo(this._transform,"transform");return this._applyTransform(s,e,i,r)}_addCoordinatePolyline(e,i,r){this._dehydratedAddPointsCoordinate(e.paths,i,r)}_addCoordinatePolygon(e,i,r){this._dehydratedAddPointsCoordinate(e.rings,i,r)}_addCoordinateMultipoint(e,i,r){r===0&&e.points.push([]);const s=this._transformPathLikeValue(i,r);e.points[e.points.length-1].push(s)}_createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_dehydratedAddPointsCoordinate(e,i,r){r===0&&this._toAddInCurrentPath--==0&&(e.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const s=this._transformPathLikeValue(i,r),n=e[e.length-1];r===0&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),n.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=s}_deriveApplyTransform(e){const{hasZ:i,hasM:r}=e;return i&&r?LOe:i?Yne:r?kOe:c7}};async function FOe(t,e,i){const r=Kn(t),s={...i},n=Ls.from(e),o=!n.quantizationParameters,{data:a}=await D$e(r,n,new NOe({sourceSpatialReference:n.sourceSpatialReference,applyTransform:o}),s);return a}let ru=class extends Pt{constructor(e){super(e),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.url=null}get parsedUrl(){return Fs(this.url)}async execute(e,i){const r=await this.executeJSON(e,i);return this.featureSetFromJSON(e,r,i)}async executeJSON(e,i){const r=this._normalizeQuery(e),s=e.outStatistics?.[0]!=null,n=Ze("featurelayer-pbf-statistics"),o=!s||n;let a;if(this.pbfSupported&&o)try{a=await FOe(this.url,r,i)}catch(l){if(l.name!=="query:parsing-pbf")throw l;this.pbfSupported=!1}return this.pbfSupported&&o||(a=await Cne(this.url,r,i)),this._normalizeFields(a.fields),a}async featureSetFromJSON(e,i,r){if(!this._queryIs3DObjectFormat(e)||Re(this.infoFor3D)||!i.assetMaps||!i.features||!i.features.length)return n1.fromJSON(i);const{meshFeatureSetFromJSON:s}=await ch(De(()=>import("./meshFeatureSet-88b4aec7.js").then(n=>n.a),["./meshFeatureSet-88b4aec7.js","./preload-helper-388ac9d5.js","./georeference-6ce02809.js","./mat3f64-221ce671.js","./mat4f64-1413b4a7.js","./spatialReferenceEllipsoidUtils-19e2f642.js","./quat-2013e5e2.js","./quatf64-3363c48e.js","./BufferView-067dc1c7.js","./vec33-76e2f0a2.js","./imageUtils-c2d0d1ae.js","./earcut-61f7b102.js","./deduplicate-58e5df9b.js","./Indices-56098ffd.js"],import.meta.url),r);return s(e,this.infoFor3D,i)}executeForCount(e,i){return qne(this.url,this._normalizeQuery(e),i)}executeForExtent(e,i){return OOe(this.url,this._normalizeQuery(e),i)}executeForIds(e,i){return u7(this.url,this._normalizeQuery(e),i)}async executeRelationshipQuery(e,i){const[{default:r},{executeRelationshipQuery:s}]=await ch(Promise.all([De(()=>Promise.resolve().then(()=>Jz),void 0,import.meta.url),De(()=>import("./executeRelationshipQuery-6bcbdb5a.js"),["./executeRelationshipQuery-6bcbdb5a.js","./preload-helper-388ac9d5.js"],import.meta.url)]),i);return e=r.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),s(this.url,e,i)}async executeRelationshipQueryForCount(e,i){const[{default:r},{executeRelationshipQueryForCount:s}]=await ch(Promise.all([De(()=>Promise.resolve().then(()=>Jz),void 0,import.meta.url),De(()=>import("./executeRelationshipQuery-6bcbdb5a.js"),["./executeRelationshipQuery-6bcbdb5a.js","./preload-helper-388ac9d5.js"],import.meta.url)]),i);return e=r.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),s(this.url,e,i)}async executeAttachmentQuery(e,i){const{executeAttachmentQuery:r,fetchAttachments:s,processAttachmentQueryResult:n}=await ch(De(()=>import("./queryAttachments-cd5c5045.js"),["./queryAttachments-cd5c5045.js","./preload-helper-388ac9d5.js"],import.meta.url),i),o=Kn(this.url);return n(o,await(this.queryAttachmentsSupported?r(o,e,i):s(o,e,i)))}async executeTopFeaturesQuery(e,i){const{executeTopFeaturesQuery:r}=await ch(De(()=>import("./executeTopFeaturesQuery-5a6aab3c.js"),["./executeTopFeaturesQuery-5a6aab3c.js","./queryTopFeatures-28fc865f.js","./preload-helper-388ac9d5.js"],import.meta.url),i);return r(this.parsedUrl,e,this.sourceSpatialReference,i)}async executeForTopIds(e,i){const{executeForTopIds:r}=await ch(De(()=>import("./executeForTopIds-5242547a.js"),["./executeForTopIds-5242547a.js","./queryTopFeatures-28fc865f.js","./preload-helper-388ac9d5.js"],import.meta.url),i);return r(this.parsedUrl,e,i)}async executeForTopExtents(e,i){const{executeForTopExtents:r}=await ch(De(()=>import("./executeForTopExtents-58ca39f8.js"),["./executeForTopExtents-58ca39f8.js","./queryTopFeatures-28fc865f.js","./preload-helper-388ac9d5.js"],import.meta.url),i);return r(this.parsedUrl,e,i)}async executeForTopCount(e,i){const{executeForTopCount:r}=await ch(De(()=>import("./executeForTopCount-e78acfaa.js"),["./executeForTopCount-e78acfaa.js","./queryTopFeatures-28fc865f.js","./preload-helper-388ac9d5.js"],import.meta.url),i);return r(this.parsedUrl,e,i)}_normalizeQuery(e){let i=Ls.from(e);if(i.sourceSpatialReference=i.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(i=i===e?i.clone():i,i.gdbVersion=e.gdbVersion||this.gdbVersion,i.dynamicDataSource=e.dynamicDataSource?Jo.from(e.dynamicDataSource):this.dynamicDataSource),ee(this.infoFor3D)&&this._queryIs3DObjectFormat(e)){i=i===e?i.clone():i,i.formatOf3DObjects=null;for(const r of this.infoFor3D.queryFormats){if(r==="3D_glb"){i.formatOf3DObjects=r;break}r!=="3D_gltf"||i.formatOf3DObjects||(i.formatOf3DObjects=r)}if(!i.formatOf3DObjects)throw new Ce("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(Re(i.outFields)||!i.outFields.includes("*")){i=i===e?i.clone():i,Re(i.outFields)&&(i.outFields=[]);const{originX:r,originY:s,originZ:n,translationX:o,translationY:a,translationZ:l,scaleX:u,scaleY:c,scaleZ:d,rotationX:f,rotationY:m,rotationZ:g,rotationDeg:v}=this.infoFor3D.transformFieldRoles;i.outFields.push(r,s,n,o,a,l,u,c,d,f,m,g,v)}}return i}_normalizeFields(e){if(ee(this.fieldsIndex)&&ee(e))for(const i of e){const r=this.fieldsIndex.get(i.name);r&&Object.assign(i,r.toJSON())}}_queryIs3DObjectFormat(e){return ee(this.infoFor3D)&&e.returnGeometry===!0&&e.multipatchOption!=="xyFootprint"&&!e.outStatistics}};h([p({type:Jo})],ru.prototype,"dynamicDataSource",void 0),h([p()],ru.prototype,"fieldsIndex",void 0),h([p()],ru.prototype,"gdbVersion",void 0),h([p()],ru.prototype,"infoFor3D",void 0),h([p({readOnly:!0})],ru.prototype,"parsedUrl",null),h([p()],ru.prototype,"pbfSupported",void 0),h([p()],ru.prototype,"queryAttachmentsSupported",void 0),h([p()],ru.prototype,"sourceSpatialReference",void 0),h([p({type:String})],ru.prototype,"url",void 0),ru=h([ce("esri.tasks.QueryTask")],ru);const DOe=ru;var LM;function uR(t){return t!=null&&t.type==="esriSMS"}function cR(t,e,i){const r=this.originIdOf(e)>=Ea(i.origin);return{ignoreOrigin:!0,allowNull:r,enabled:!!i&&i.layer?.type==="map-image"&&(i.writeSublayerStructure||r)}}function _q(t,e,i){return{enabled:!!i&&i.layer?.type==="tile"&&this._isOverridden(e)}}function zl(t,e,i){return{ignoreOrigin:!0,enabled:i&&i.writeSublayerStructure||!1}}function RT(t,e,i){return{ignoreOrigin:!0,enabled:!!i&&(i.writeSublayerStructure||this.originIdOf(e)>=Ea(i.origin))}}let jOe=0;const mg=new Set;mg.add("layer"),mg.add("parent"),mg.add("loaded"),mg.add("loadStatus"),mg.add("loadError"),mg.add("loadWarnings");let ri=LM=class extends ea(Ym(qm(Ll))){constructor(t){super(t),this.capabilities=void 0,this.fields=null,this.fullExtent=null,this.geometryType=null,this.globalIdField=null,this.legendEnabled=!0,this.objectIdField=null,this.popupEnabled=!0,this.popupTemplate=null,this.sourceJSON=null,this.title=null,this.typeIdField=null,this.types=null,this._lastParsedUrl=null}async load(t){return this.addResolvingPromise((async()=>{const{layer:e,source:i,url:r}=this;if(!e&&!r)throw new Ce("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:this});let s=null;if(!e||this.originIdOf("url")>St.SERVICE||i?.type==="data-layer")s=(await Et(r,{responseType:"json",query:{f:"json"},...t})).data;else{let n=this.id;i?.type==="map-layer"&&(n=i.mapLayerId),s=await e.fetchSublayerInfo(n,t)}s&&(this.sourceJSON=s,this.read({layerDefinition:s},{origin:"service"}))})()),this}readCapabilities(t,e){e=e.layerDefinition||e;const{operations:{supportsQuery:i,supportsQueryAttachments:r},query:{supportsFormatPBF:s},data:{supportsAttachment:n}}=MD(e,this.url);return{exportMap:{supportsModification:!!e.canModifyLayer},operations:{supportsQuery:i,supportsQueryAttachments:r},data:{supportsAttachment:n},query:{supportsFormatPBF:s}}}get defaultPopupTemplate(){return this.createPopupTemplate()}set definitionExpression(t){this._setAndNotifyLayer("definitionExpression",t)}get fieldsIndex(){return new jD(this.fields||[])}set floorInfo(t){this._setAndNotifyLayer("floorInfo",t)}readGlobalIdFieldFromService(t,e){if((e=e.layerDefinition||e).globalIdField)return e.globalIdField;if(e.fields){for(const i of e.fields)if(i.type==="esriFieldTypeGlobalID")return i.name}}get id(){return this._get("id")??jOe++}set id(t){this._get("id")!==t&&(this.layer?.capabilities?.exportMap?.supportsDynamicLayers!==!1?this._set("id",t):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}set labelingInfo(t){this._setAndNotifyLayer("labelingInfo",t)}writeLabelingInfo(t,e,i,r){t&&t.length&&(e.layerDefinition={drawingInfo:{labelingInfo:t.map(s=>s.write({},r))}})}set labelsVisible(t){this._setAndNotifyLayer("labelsVisible",t)}set layer(t){this._set("layer",t),this.sublayers&&this.sublayers.forEach(e=>e.layer=t)}set listMode(t){this._set("listMode",t)}set minScale(t){this._setAndNotifyLayer("minScale",t)}readMinScale(t,e){return e.minScale||e.layerDefinition&&e.layerDefinition.minScale||0}set maxScale(t){this._setAndNotifyLayer("maxScale",t)}readMaxScale(t,e){return e.maxScale||e.layerDefinition&&e.layerDefinition.maxScale||0}get effectiveScaleRange(){const{minScale:t,maxScale:e}=this;return{minScale:t,maxScale:e}}readObjectIdFieldFromService(t,e){if((e=e.layerDefinition||e).objectIdField)return e.objectIdField;if(e.fields){for(const i of e.fields)if(i.type==="esriFieldTypeOID")return i.name}}set opacity(t){this._setAndNotifyLayer("opacity",t)}readOpacity(t,e){const i=e.layerDefinition;return 1-.01*((i?.transparency!=null?i.transparency:i?.drawingInfo?.transparency)??0)}writeOpacity(t,e,i,r){e.layerDefinition={drawingInfo:{transparency:100-100*t}}}writeParent(t,e){this.parent&&this.parent!==this.layer?e.parentLayerId=U4(this.parent.id):e.parentLayerId=-1}get queryTask(){if(!this.layer)return null;const{spatialReference:t}=this.layer,e="gdbVersion"in this.layer?this.layer.gdbVersion:void 0,{capabilities:i,fieldsIndex:r}=this,s=Ze("featurelayer-pbf")&&i?.query.supportsFormatPBF,n=i?.operations?.supportsQueryAttachments??!1;return new DOe({url:this.url,pbfSupported:s,fieldsIndex:r,gdbVersion:e,sourceSpatialReference:t,queryAttachmentsSupported:n})}set renderer(t){if(t){for(const e of t.getSymbols())if(F0(e)){tt.getLogger(this.declaredClass).warn("Sublayer renderer should use 2D symbols");break}}this._setAndNotifyLayer("renderer",t)}get source(){return this._get("source")||new Yd({mapLayerId:this.id})}set source(t){this._setAndNotifyLayer("source",t)}set sublayers(t){this._handleSublayersChange(t,this._get("sublayers")),this._set("sublayers",t)}castSublayers(t){return ns(Nt.ofType(LM),t)}writeSublayers(t,e,i){this.sublayers?.length&&(e[i]=this.sublayers.map(r=>r.id).toArray().reverse())}readTypeIdField(t,e){let i=(e=e.layerDefinition||e).typeIdField;if(i&&e.fields){i=i.toLowerCase();const r=e.fields.find(s=>s.name.toLowerCase()===i);r&&(i=r.name)}return i}get url(){const t=this.layer?.parsedUrl??this._lastParsedUrl,e=this.source;if(!t)return null;if(this._lastParsedUrl=t,e?.type==="map-layer")return`${t.path}/${e.mapLayerId}`;const i={layer:JSON.stringify({source:this.source})};return`${t.path}/dynamicLayer?${xm(i)}`}set url(t){this._overrideIfSome("url",t)}set visible(t){this._setAndNotifyLayer("visible",t)}writeVisible(t,e,i,r){e[i]=this.getAtOrigin("defaultVisibility","service")||t}clone(){const{store:t}=Ws(this),e=new LM;return Ws(e).store=t.clone(mg),this.commitProperty("url"),e._lastParsedUrl=this._lastParsedUrl,e}createPopupTemplate(t){return VD(this,t)}createQuery(){return new Ls({returnGeometry:!0,where:this.definitionExpression||"1=1"})}async createFeatureLayer(){if(this.hasOwnProperty("sublayers"))return null;const{layer:t}=this,e=t?.parsedUrl,i=new(await De(()=>Promise.resolve().then(()=>UAe),void 0,import.meta.url)).default({url:e?.path});return e&&this.source&&(this.source.type==="map-layer"?i.layerId=this.source.mapLayerId:i.dynamicDataSource=this.source),t?.refreshInterval!=null&&(i.refreshInterval=t.refreshInterval),this.definitionExpression&&(i.definitionExpression=this.definitionExpression),this.floorInfo&&(i.floorInfo=Le(this.floorInfo)),this.originIdOf("labelingInfo")>St.SERVICE&&(i.labelingInfo=Le(this.labelingInfo)),this.originIdOf("labelsVisible")>St.DEFAULTS&&(i.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>St.DEFAULTS&&(i.legendEnabled=this.legendEnabled),this.originIdOf("visible")>St.DEFAULTS&&(i.visible=this.visible),this.originIdOf("minScale")>St.DEFAULTS&&(i.minScale=this.minScale),this.originIdOf("maxScale")>St.DEFAULTS&&(i.maxScale=this.maxScale),this.originIdOf("opacity")>St.DEFAULTS&&(i.opacity=this.opacity),this.originIdOf("popupTemplate")>St.DEFAULTS&&(i.popupTemplate=Le(this.popupTemplate)),this.originIdOf("renderer")>St.SERVICE&&(i.renderer=Le(this.renderer)),this.source?.type==="data-layer"&&(i.dynamicDataSource=this.source.clone()),this.originIdOf("title")>St.DEFAULTS&&(i.title=this.title),t?.type==="map-image"&&t.originIdOf("customParameters")>St.DEFAULTS&&(i.customParameters=t.customParameters),t?.type==="tile"&&t.originIdOf("customParameters")>St.DEFAULTS&&(i.customParameters=t.customParameters),i}getField(t){return this.fieldsIndex.get(t)}getFeatureType(t){const{typeIdField:e,types:i}=this;if(!e||!t)return null;const r=t.attributes?t.attributes[e]:void 0;if(r==null)return null;let s=null;return i?.some(n=>{const{id:o}=n;return o!=null&&(o.toString()===r.toString()&&(s=n),!!s)}),s}getFieldDomain(t,e){const i=e&&e.feature,r=this.getFeatureType(i);if(r){const s=r.domains&&r.domains[t];if(s&&s.type!=="inherited")return s}return this._getLayerDomain(t)}async queryAttachments(t,e){await this.load(),t=XA.from(t);const i=this.capabilities;if(!i?.data?.supportsAttachment)throw new Ce("queryAttachments:not-supported","this layer doesn't support attachments");const{attachmentTypes:r,objectIds:s,globalIds:n,num:o,size:a,start:l,where:u}=t;if(!i?.operations?.supportsQueryAttachments&&(r?.length>0||n?.length>0||a?.length>0||o||l||u))throw new Ce("queryAttachments:option-not-supported","when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(s?.length||n?.length||u))throw new Ce("queryAttachments:invalid-query","'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);return this.queryTask.executeAttachmentQuery(t,e)}async queryFeatures(t=this.createQuery(),e){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new Ce("queryFeatures:not-supported","this layer doesn't support queries.");if(!this.url)throw new Ce("queryFeatures:not-supported","this layer has no url.");const i=await this.queryTask.execute(t,{...e,query:{...this.layer?.customParameters,token:this.layer?.apiKey}});if(i?.features)for(const r of i.features)r.sourceLayer=this;return i}toExportImageJSON(t){const e={id:this.id,source:this.source?.toJSON()||{mapLayerId:this.id,type:"mapLayer"}},i=rD(t,this.definitionExpression);ee(i)&&(e.definitionExpression=i);const r=["renderer","labelingInfo","opacity","labelsVisible"].reduce((n,o)=>(n[o]=this.originIdOf(o),n),{});if(Object.keys(r).some(n=>r[n]>St.SERVICE)){const n=e.drawingInfo={};if(r.renderer>St.SERVICE&&(n.renderer=this.renderer?this.renderer.toJSON():null),r.labelsVisible>St.SERVICE&&(n.showLabels=this.labelsVisible),this.labelsVisible&&r.labelingInfo>St.SERVICE){!this.loaded&&this.labelingInfo.some(a=>!a.labelPlacement)&&tt.getLogger(this.declaredClass).warnOnce(`A Sublayer (title: ${this.title}, id: ${this.id}) has an undefined 'labelPlacement' and so labels cannot be displayed. Either define a valid 'labelPlacement' or call Sublayer.load() to use a default value based on geometry type.`,{sublayer:this});let o=this.labelingInfo;ee(this.geometryType)&&(o=SAe(this.labelingInfo,UA.toJSON(this.geometryType))),n.labelingInfo=o.filter(a=>a.labelPlacement).map(a=>a.toJSON({origin:"service",layer:this.layer})),n.showLabels=!0}r.opacity>St.SERVICE&&(n.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(n.renderer)}return e}_assignDefaultSymbolColors(t){this._forEachSimpleMarkerSymbols(t,e=>{e.color||e.style!=="esriSMSX"&&e.style!=="esriSMSCross"||(e.outline&&e.outline.color?e.color=e.outline.color:e.color=[0,0,0,0])})}_forEachSimpleMarkerSymbols(t,e){if(t){const i=("uniqueValueInfos"in t?t.uniqueValueInfos:"classBreakInfos"in t?t.classBreakInfos:null)??[];for(const r of i)uR(r.symbol)&&e(r.symbol);"symbol"in t&&uR(t.symbol)&&e(t.symbol),"defaultSymbol"in t&&uR(t.defaultSymbol)&&e(t.defaultSymbol)}}_setAndNotifyLayer(t,e){const i=this.layer,r=this._get(t);let s,n;switch(t){case"definitionExpression":case"floorInfo":s="supportsSublayerDefinitionExpression";break;case"minScale":case"maxScale":case"visible":s="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":s="supportsDynamicLayers",n="supportsModification"}const o=Ws(this).getDefaultOrigin();if(o!=="service"){if(s&&this.layer?.capabilities?.exportMap?.[s]===!1)return void this._logLockedError(t,`capability not available 'layer.capabilities.exportMap.${s}'`);if(n&&this.capabilities?.exportMap[n]===!1)return void this._logLockedError(t,`capability not available 'capabilities.exportMap.${n}'`)}t!=="source"||this.loadStatus==="not-loaded"?(this._set(t,e),o!=="service"&&r!==e&&i&&i.emit&&i.emit("sublayer-update",{propertyName:t,target:this})):this._logLockedError(t,"'source' can't be changed after calling sublayer.load()")}_handleSublayersChange(t,e){e&&(e.forEach(i=>{i.parent=null,i.layer=null}),this.handles.removeAll()),t&&(t.forEach(i=>{i.parent=this,i.layer=this.layer}),this.handles.add([t.on("after-add",({item:i})=>{i.parent=this,i.layer=this.layer}),t.on("after-remove",({item:i})=>{i.parent=null,i.layer=null}),t.on("before-changes",i=>{const r=this.layer?.capabilities?.exportMap?.supportsSublayersChanges;r==null||r||(tt.getLogger(this.declaredClass).error(new Ce("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),i.preventDefault())})]))}_logLockedError(t,e){const{layer:i,declaredClass:r}=this;tt.getLogger(r).error(new Ce("sublayer:locked",`Property '${String(t)}' can't be changed on Sublayer from the layer '${i?.id}'`,{reason:e,sublayer:this,layer:i}))}_getLayerDomain(t){const e=this.fieldsIndex.get(t);return e?e.domain:null}};ri.test={isMapImageLayerOverridePolicy:t=>t===zl||t===cR,isTileImageLayerOverridePolicy:t=>t===_q},h([p({readOnly:!0})],ri.prototype,"capabilities",void 0),h([Ye("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],ri.prototype,"readCapabilities",null),h([p()],ri.prototype,"defaultPopupTemplate",null),h([p({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:cR}}})],ri.prototype,"definitionExpression",null),h([p({type:[ml],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],ri.prototype,"fields",void 0),h([p({readOnly:!0})],ri.prototype,"fieldsIndex",null),h([p({type:Ure,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:cR},origins:{"web-scene":{read:!1,write:!1}}}})],ri.prototype,"floorInfo",null),h([p({type:Xt,json:{read:{source:"layerDefinition.extent"}}})],ri.prototype,"fullExtent",void 0),h([p({type:UA.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:UA.read}}}}})],ri.prototype,"geometryType",void 0),h([p({type:String})],ri.prototype,"globalIdField",void 0),h([Ye("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],ri.prototype,"readGlobalIdFieldFromService",null),h([p({type:Si,json:{write:{ignoreOrigin:!0}}})],ri.prototype,"id",null),h([p({value:null,type:[Y3],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:zl}}})],ri.prototype,"labelingInfo",null),h([it("labelingInfo")],ri.prototype,"writeLabelingInfo",null),h([p({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:zl}}})],ri.prototype,"labelsVisible",null),h([p({value:null})],ri.prototype,"layer",null),h([p({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:RT}}})],ri.prototype,"legendEnabled",void 0),h([p({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],ri.prototype,"listMode",null),h([p({type:Number,value:0,json:{write:{overridePolicy:zl}}})],ri.prototype,"minScale",null),h([Ye("minScale",["minScale","layerDefinition.minScale"])],ri.prototype,"readMinScale",null),h([p({type:Number,value:0,json:{write:{overridePolicy:zl}}})],ri.prototype,"maxScale",null),h([Ye("maxScale",["maxScale","layerDefinition.maxScale"])],ri.prototype,"readMaxScale",null),h([p({readOnly:!0})],ri.prototype,"effectiveScaleRange",null),h([p({type:String})],ri.prototype,"objectIdField",void 0),h([Ye("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],ri.prototype,"readObjectIdFieldFromService",null),h([p({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:zl}}})],ri.prototype,"opacity",null),h([Ye("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],ri.prototype,"readOpacity",null),h([it("opacity")],ri.prototype,"writeOpacity",null),h([p({json:{type:Si,write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:zl}}})],ri.prototype,"parent",void 0),h([it("parent")],ri.prototype,"writeParent",null),h([p({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:(t,e)=>!e.disablePopup},write:{target:"disablePopup",overridePolicy:RT,writer(t,e,i){e[i]=!t}}}})],ri.prototype,"popupEnabled",void 0),h([p({type:Hm,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:RT}}})],ri.prototype,"popupTemplate",void 0),h([p({readOnly:!0})],ri.prototype,"queryTask",null),h([p({types:U3,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:zl},origins:{"web-scene":{types:Gte,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:zl}}}}})],ri.prototype,"renderer",null),h([p({types:{key:"type",base:null,typeMap:{"data-layer":Jo,"map-layer":Yd}},cast(t){if(t){if("mapLayerId"in t)return Bn(Yd,t);if("dataSource"in t)return Bn(Jo,t)}return t},json:{name:"layerDefinition.source",write:{overridePolicy:zl}}})],ri.prototype,"source",null),h([p()],ri.prototype,"sourceJSON",void 0),h([p({value:null,json:{type:[Si],write:{target:"subLayerIds",allowNull:!0,overridePolicy:zl}}})],ri.prototype,"sublayers",null),h([mi("sublayers")],ri.prototype,"castSublayers",null),h([it("sublayers")],ri.prototype,"writeSublayers",null),h([p({type:String,json:{name:"name",write:{overridePolicy:RT}}})],ri.prototype,"title",void 0),h([p({type:String})],ri.prototype,"typeIdField",void 0),h([Ye("typeIdField",["layerDefinition.typeIdField"])],ri.prototype,"readTypeIdField",null),h([p({type:[DD],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],ri.prototype,"types",void 0),h([p({type:String,json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:_q}}})],ri.prototype,"url",null),h([p({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:zl}}})],ri.prototype,"visible",null),h([it("visible")],ri.prototype,"writeVisible",null),ri=LM=h([ce("esri.layers.support.Sublayer")],ri);const eE=ri;function xq(t,e,i){return e.flatten(({sublayers:s})=>s).length!==t.length?!0:!!t.some(s=>s.originIdOf("minScale")>i||s.originIdOf("maxScale")>i||s.originIdOf("renderer")>i||s.originIdOf("labelingInfo")>i||s.originIdOf("opacity")>i||s.originIdOf("labelsVisible")>i||s.originIdOf("source")>i)||!Kne(t,e)}function UOe(t,e,i){return!!t.some(r=>{const s=r.source;return!(!s||s.type==="map-layer"&&s.mapLayerId===r.id&&(Re(s.gdbVersion)||s.gdbVersion===i))||r.originIdOf("renderer")>St.SERVICE||r.originIdOf("labelingInfo")>St.SERVICE||r.originIdOf("opacity")>St.SERVICE||r.originIdOf("labelsVisible")>St.SERVICE})||!Kne(t,e)}function Kne(t,e){if(!t||!t.length||Re(e))return!0;const i=e.slice().reverse().flatten(({sublayers:n})=>n&&n.toArray().reverse()).map(n=>n.id).toArray();if(t.length>i.length)return!1;let r=0;const s=i.length;for(const{id:n}of t){for(;r<s&&i[r]!==n;)r++;if(r>=s)return!1}return!0}function VOe(t){return!!t&&t.some(e=>e.minScale!=null||e.layerDefinition&&e.layerDefinition.minScale!=null)}const BOe=tt.getLogger("esri.layers.TileLayer");function zOe(t,e){const i=[],r={};return t&&t.forEach(s=>{const n=new eE;if(n.read(s,e),r[n.id]=n,s.parentLayerId!=null&&s.parentLayerId!==-1){const o=r[s.parentLayerId];o.sublayers||(o.sublayers=[]),o.sublayers.unshift(n)}else i.unshift(n)}),i}const hR=Nt.ofType(eE);function Qne(t,e){t&&t.forEach(i=>{e(i),i.sublayers&&i.sublayers.length&&Qne(i.sublayers,e)})}const Xne=t=>{let e=class extends t{constructor(...i){super(...i),this.allSublayers=new B0({getCollections:()=>[this.sublayers],getChildrenFunction:r=>r.sublayers}),this.sublayersSourceJSON={[St.SERVICE]:{},[St.PORTAL_ITEM]:{},[St.WEB_SCENE]:{},[St.WEB_MAP]:{}},this.addHandles(st(()=>this.sublayers,(r,s)=>this._handleSublayersChange(r,s),Cl))}readSublayers(i,r){if(!r||!i)return;const{sublayersSourceJSON:s}=this,n=Ea(r.origin);if(n<St.SERVICE||(s[n]={context:r,visibleLayers:i.visibleLayers||s[n].visibleLayers,layers:i.layers||s[n].layers},n>St.SERVICE))return;this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);const{sublayers:o,origin:a}=this.createSublayersForOrigin("web-document"),l=Ws(this);l.setDefaultOrigin(a),this._set("sublayers",new hR(o)),l.setDefaultOrigin("user")}findSublayerById(i){return this.allSublayers.find(r=>r.id===i)}createServiceSublayers(){return this.createSublayersForOrigin("service").sublayers}createSublayersForOrigin(i){const r=Ea(i==="web-document"?"web-map":i);let s=St.SERVICE,n=this.sublayersSourceJSON[St.SERVICE].layers,o=this.sublayersSourceJSON[St.SERVICE].context,a=null;const l=[St.PORTAL_ITEM,St.WEB_SCENE,St.WEB_MAP].filter(g=>g<=r);for(const g of l){const v=this.sublayersSourceJSON[g];VOe(v.layers)&&(s=g,n=v.layers,o=v.context,v.visibleLayers&&(a={visibleLayers:v.visibleLayers,context:v.context}))}const u=[St.PORTAL_ITEM,St.WEB_SCENE,St.WEB_MAP].filter(g=>g>s&&g<=r);let c=null;for(const g of u){const{layers:v,visibleLayers:b,context:_}=this.sublayersSourceJSON[g];v&&(c={layers:v,context:_}),b&&(a={visibleLayers:b,context:_})}const d=zOe(n,o),f=new Map,m=new Set;if(c)for(const g of c.layers)f.set(g.id,g);if(a?.visibleLayers)for(const g of a.visibleLayers)m.add(g);return Qne(d,g=>{c&&g.read(f.get(g.id),c.context),a&&g.read({defaultVisibility:m.has(g.id)},a.context)}),{origin:gS(s),sublayers:new hR({items:d})}}read(i,r){super.read(i,r),this.readSublayers(i,r)}_handleSublayersChange(i,r){r&&(r.forEach(s=>{s.parent=null,s.layer=null}),this.handles.remove("sublayers-owner")),i&&(i.forEach(s=>{s.parent=this,s.layer=this}),this.handles.add([i.on("after-add",({item:s})=>{s.parent=this,s.layer=this}),i.on("after-remove",({item:s})=>{s.parent=null,s.layer=null})],"sublayers-owner"),this.type==="tile"&&this.handles.add(i.on("before-changes",s=>{BOe.error(new Ce("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:this})),s.preventDefault()}),"sublayers-owner"))}};return h([p({readOnly:!0})],e.prototype,"allSublayers",void 0),h([p({readOnly:!0,type:Nt.ofType(eE)})],e.prototype,"serviceSublayers",void 0),h([p({value:null,type:hR,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],e.prototype,"sublayers",void 0),h([p({readOnly:!0})],e.prototype,"sublayersSourceJSON",void 0),e=h([ce("esri.layers.mixins.SublayersOwner")],e),e};function $dt(t){const e=t.layer;return"floorInfo"in e&&e.floorInfo?.floorField&&"floors"in t.view?eoe(t.view.floors,e.floorInfo.floorField):null}function Sq(t,e){return"floorInfo"in e&&e.floorInfo?.floorField?eoe(t,e.floorInfo.floorField):null}function eoe(t,e){if(!t?.length)return null;const i=t.filter(r=>r!=="").map(r=>`'${r}'`);return i.push("''"),`${e} IN (${i.join(",")}) OR ${e} IS NULL`}const GOe={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let ol=class extends ea(Pt){constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map(i=>{const r=Sq(this.floors,i);return i.toExportImageJSON(r)});return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&UOe(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("sublayer-update",i=>this.notifyChange(GOe[i.propertyName]))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map(i=>i.id).join(","):"show:-1":null}get layerDefs(){const e=!!this.floors?.length,i=this.visibleSublayers.filter(r=>r.definitionExpression!=null||e&&r.floorInfo!=null);return i.length?JSON.stringify(i.reduce((r,s)=>{const n=Sq(this.floors,s),o=rD(n,s.definitionExpression);return ee(o)&&(r[s.id]=o),r},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const i=this.layer.sublayers,r=n=>{const o=this.scale,a=o===0,l=n.minScale===0||o<=n.minScale,u=n.maxScale===0||o>=n.maxScale;n.visible&&(a||l&&u)&&(n.sublayers?n.sublayers.forEach(r):e.unshift(n))};i&&i.forEach(r);const s=this._get("visibleSublayers");return!s||s.length!==e.length||s.some((n,o)=>e[o]!==n)?e:s}toJSON(){const e=this.layer;let i={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?i.dynamicLayers=this.dynamicLayers:i={...i,layers:this.layers,layerDefs:this.layerDefs},i}};h([p({readOnly:!0})],ol.prototype,"dynamicLayers",null),h([p()],ol.prototype,"floors",void 0),h([p({readOnly:!0})],ol.prototype,"hasDynamicLayers",null),h([p()],ol.prototype,"layer",null),h([p({readOnly:!0})],ol.prototype,"layers",null),h([p({readOnly:!0})],ol.prototype,"layerDefs",null),h([p({type:Number})],ol.prototype,"scale",void 0),h([p(oEe)],ol.prototype,"timeExtent",void 0),h([p({readOnly:!0})],ol.prototype,"version",null),h([p({readOnly:!0})],ol.prototype,"visibleSublayers",null),ol=h([ce("esri.layers.mixins.ExportImageParameters")],ol);let is=class extends a1(_C(c1(Xne(Zne(hC(Xw(e_(Ym(t_(uD(fC(ea(Bh))))))))))))){constructor(...e){super(...e),this.dateFieldsTimeReference=null,this.datesInUnknownTimezone=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.preferredTimeReference=null,this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(e,i){return typeof e=="string"?{url:e,...i}:e}load(e){const i=ee(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).catch(_a).then(()=>this._fetchService(i))),Promise.resolve(this)}readImageFormat(e,i){const r=i.supportedImageFormatTypes;return r&&r.includes("PNG32")?"png32":"png24"}writeSublayers(e,i,r,s){if(!this.loaded||!e)return;const n=e.slice().reverse().flatten(({sublayers:c})=>c&&c.toArray().reverse()).toArray();let o=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap?.supportsDynamicLayers){const c=Ea(s.origin);if(c===St.PORTAL_ITEM){const d=this.createSublayersForOrigin("service").sublayers;o=xq(n,d,St.SERVICE)}else if(c>St.PORTAL_ITEM){const d=this.createSublayersForOrigin("portal-item");o=xq(n,d.sublayers,Ea(d.origin))}}const a=[],l={writeSublayerStructure:o,...s};let u=o;n.forEach(c=>{const d=c.write({},l);a.push(d),u=u||c.originOf("visible")==="user"}),a.some(c=>Object.keys(c).length>1)&&(i.layers=a),u&&(i.visibleLayers=n.filter(c=>c.visible).map(c=>c.id))}createExportImageParameters(e,i,r,s){const n=s&&s.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian());const o=new ol({layer:this,floors:s?.floors,scale:B6({extent:e,width:i})*n}),a=o.toJSON();o.destroy();const l=!s||!s.rotation||this.version<10.3?{}:{rotation:-s.rotation},u=e&&e.spatialReference,c=u.wkid||JSON.stringify(u.toJSON());a.dpi*=n;const d={};if(s?.timeExtent){const{start:f,end:m}=s.timeExtent.toJSON();d.time=f&&m&&f===m?""+f:`${f??"null"},${m??"null"}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(d.time="null,null");return{bbox:e&&e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:c,imageSR:c,size:i+","+r,...a,...l,...d}}async fetchImage(e,i,r,s){const{data:n}=await this._fetchImage("image",e,i,r,s);return n}async fetchImageBitmap(e,i,r,s){const{data:n,url:o}=await this._fetchImage("blob",e,i,r,s);return sw(n,o)}async fetchRecomputedExtents(e={}){const i={...e,query:{returnUpdates:!0,f:"json",...this.customParameters,token:this.apiKey}},{data:r}=await Et(this.url,i),{extent:s,fullExtent:n,timeExtent:o}=r,a=s||n;return{fullExtent:a&&Xt.fromJSON(a),timeExtent:o&&Ga.fromJSON({start:o[0],end:o[1]})}}loadAll(){return z4(this,e=>{e(this.allSublayers)})}serviceSupportsSpatialReference(e){return UD(this,e)}async _fetchImage(e,i,r,s,n){const o={responseType:e,signal:n?.signal??null,query:{...this.parsedUrl.query,...this.createExportImageParameters(i,r,s,n),f:"image",...this.refreshParameters,...this.customParameters,token:this.apiKey}},a=this.parsedUrl.path+"/export";if(o.query?.dynamicLayers!=null&&!this.capabilities?.exportMap?.supportsDynamicLayers)throw new Ce("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:o.query});try{const{data:l}=await Et(a,o);return{data:l,url:a}}catch(l){throw vn(l)?l:new Ce("mapimagelayer:image-fetch-error",`Unable to load image: ${a}`,{error:l})}}async _fetchService(e){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const{data:i,ssl:r}=await Et(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},signal:e});r&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=i,this.read(i,{origin:"service",url:this.parsedUrl})}};h([p({type:Am})],is.prototype,"dateFieldsTimeReference",void 0),h([p({type:Boolean})],is.prototype,"datesInUnknownTimezone",void 0),h([p()],is.prototype,"dpi",void 0),h([p()],is.prototype,"gdbVersion",void 0),h([p()],is.prototype,"imageFormat",void 0),h([Ye("imageFormat",["supportedImageFormatTypes"])],is.prototype,"readImageFormat",null),h([p({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],is.prototype,"imageMaxHeight",void 0),h([p({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],is.prototype,"imageMaxWidth",void 0),h([p()],is.prototype,"imageTransparency",void 0),h([p({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],is.prototype,"isReference",void 0),h([p({json:{read:!1,write:!1}})],is.prototype,"labelsVisible",void 0),h([p({type:["ArcGISMapServiceLayer"]})],is.prototype,"operationalLayerType",void 0),h([p({json:{read:!1,write:!1}})],is.prototype,"popupEnabled",void 0),h([p({type:Am})],is.prototype,"preferredTimeReference",void 0),h([p()],is.prototype,"sourceJSON",void 0),h([p({json:{write:{ignoreOrigin:!0}}})],is.prototype,"sublayers",void 0),h([it("sublayers",{layers:{type:[eE]},visibleLayers:{type:[Si]}})],is.prototype,"writeSublayers",null),h([p({type:["show","hide","hide-children"]})],is.prototype,"listMode",void 0),h([p({json:{read:!1},readOnly:!0,value:"map-image"})],is.prototype,"type",void 0),h([p(G3)],is.prototype,"url",void 0),is=h([ce("esri.layers.MapImageLayer")],is);const h7=is,kdt=Object.freeze(Object.defineProperty({__proto__:null,default:h7},Symbol.toStringTag,{value:"Module"}));var G6;let eh=G6=class extends Je{constructor(t){super(t),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new G6({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};h([p({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],eh.prototype,"cols",void 0),h([p({type:Si,json:{write:!0}})],eh.prototype,"level",void 0),h([p({type:String,json:{write:!0}})],eh.prototype,"levelValue",void 0),h([p({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],eh.prototype,"origin",void 0),h([p({type:Number,json:{write:!0}})],eh.prototype,"resolution",void 0),h([p({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],eh.prototype,"rows",void 0),h([p({type:Number,json:{write:!0}})],eh.prototype,"scale",void 0),eh=G6=h([ce("esri.layers.support.LOD")],eh);const Yt=eh;let toe=class{constructor(e,i,r,s,n){this.id=e,this.level=i,this.row=r,this.col=s,this.extent=n}};var Sf;const Eq=new si({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let an=Sf=class extends Je{static create(t={}){const{resolutionFactor:e=1,scales:i,size:r=256,spatialReference:s=Tt.WebMercator,numLODs:n=24}=t;if(!Cn(s)){const d=[];if(i)for(let f=0;f<i.length;f++){const m=i[f];d.push(new Yt({level:f,scale:m,resolution:m}))}else{let f=5e-4;for(let m=n-1;m>=0;m--)d.unshift(new Yt({level:m,scale:f,resolution:f})),f*=2}return new Sf({dpi:96,lods:d,origin:new Ct(0,0,s),size:[r,r],spatialReference:s})}const o=Il(s),a=t.origin?new Ct({x:t.origin.x,y:t.origin.y,spatialReference:s}):new Ct(o?{x:o.origin[0],y:o.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),l=96,u=1/(Sp(s)*39.37*l),c=[];if(i)for(let d=0;d<i.length;d++){const f=i[d],m=f*u;c.push(new Yt({level:d,scale:f,resolution:m}))}else{let d=l9(s)?512/r*5916575275917094e-7:256/r*591657527591555e-6;const f=Math.ceil(n/e);c.push(new Yt({level:0,scale:d,resolution:d*u}));for(let m=1;m<f;m++){const g=d/2**e,v=g*u;c.push(new Yt({level:m,scale:g,resolution:v})),d=g}}return new Sf({dpi:l,lods:c,origin:a,size:[r,r],spatialReference:s})}constructor(t){super(t),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:t,origin:e}=this;if(t&&e){const i=Il(t);return t.isWrappable&&!!i&&Math.abs(i.origin[0]-e.x)<=i.dx}return!1}readOrigin(t,e){return Ct.fromJSON({spatialReference:e.spatialReference,...t})}set lods(t){let e=0,i=0;const r=[],s=this._levelToLOD={};t&&(e=-1/0,i=1/0,t.forEach(n=>{r.push(n.scale),e=n.scale>e?n.scale:e,i=n.scale<i?n.scale:i,s[n.level]=n})),this._set("scales",r),this._set("minScale",e),this._set("maxScale",i),this._set("lods",t),this._initializeUpsampleLevels()}readSize(t,e){return[e.cols,e.rows]}writeSize(t,e){e.cols=t[0],e.rows=t[1]}zoomToScale(t){const e=this.scales;if(t<=0)return e[0];if(t>=e.length-1)return e[e.length-1];const i=Math.floor(t),r=i+1;return e[i]/(e[i]/e[r])**(t-i)}scaleToZoom(t){const e=this.scales,i=e.length-1;let r=0;for(;r<i;r++){const s=e[r],n=e[r+1];if(s<=t)return r;if(n===t)return r+1;if(s>t&&n<t)return r+Math.log(s/t)/Math.log(s/n)}return r}snapScale(t,e=.95){const i=this.scaleToZoom(t);return i%Math.floor(i)>=e?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(t,e,i,r){const s=this.lodAt(t);if(!s)return null;let n,o;if(typeof e=="number")n=e,o=i;else if(bs(e.spatialReference,this.spatialReference))n=e.x,o=e.y,r=i;else{const u=H4(e,this.spatialReference);if(Re(u))return null;n=u.x,o=u.y,r=i}const a=s.resolution*this.size[0],l=s.resolution*this.size[1];return r||(r=new toe(null,0,0,0,Su())),r.level=t,r.row=Math.floor((this.origin.y-o)/l+.001),r.col=Math.floor((n-this.origin.x)/a+.001),this.updateTileInfo(r),r}updateTileInfo(t,e=Sf.ExtrapolateOptions.NONE){let i=this.lodAt(t.level);if(!i&&e===Sf.ExtrapolateOptions.POWER_OF_TWO){const o=this.lods[this.lods.length-1];o.level<t.level&&(i=o)}if(!i)return;const r=t.level-i.level,s=i.resolution*this.size[0]/2**r,n=i.resolution*this.size[1]/2**r;t.id=`${t.level}/${t.row}/${t.col}`,t.extent||(t.extent=Su()),t.extent[0]=this.origin.x+t.col*s,t.extent[1]=this.origin.y-(t.row+1)*n,t.extent[2]=t.extent[0]+s,t.extent[3]=t.extent[1]+n}upsampleTile(t){const e=this._upsampleLevels[t.level];return!(!e||e.parentLevel===-1)&&(t.level=e.parentLevel,t.row=Math.floor(t.row/e.factor+.001),t.col=Math.floor(t.col/e.factor+.001),this.updateTileInfo(t),!0)}getTileBounds(t,e){const i=this.lodAt(e.level);if(i==null)return null;const{resolution:r}=i,s=r*this.size[0],n=r*this.size[1];return t[0]=this.origin.x+e.col*s,t[1]=this.origin.y-(e.row+1)*n,t[2]=t[0]+s,t[3]=t[1]+n,t}lodAt(t){return this._levelToLOD?.[t]??null}clone(){return Sf.fromJSON(this.write({}))}getOrCreateCompatible(t,e){if(this.size[0]===256&&this.size[1]===256)return t===256?this:null;const i=[],r=this.lods.length;for(let s=0;s<r;s++){const n=this.lods[s],o=n.resolution*e;i.push(new Yt({level:n.level,scale:n.scale,resolution:o}))}return new Sf({size:[t,t],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const t=this.lods;this._upsampleLevels=[];let e=null;for(let i=0;i<t.length;i++){const r=t[i];this._upsampleLevels[r.level]={parentLevel:e?e.level:-1,factor:e?e.resolution/r.resolution:0},e=r}}};h([p({type:Number,json:{write:!0}})],an.prototype,"compressionQuality",void 0),h([p({type:Number,json:{write:!0}})],an.prototype,"dpi",void 0),h([p({type:String,json:{read:Eq.read,write:Eq.write,origins:{"web-scene":{read:!1,write:!1}}}})],an.prototype,"format",void 0),h([p({readOnly:!0})],an.prototype,"isWrappable",null),h([p({type:Ct,json:{write:!0}})],an.prototype,"origin",void 0),h([Ye("origin")],an.prototype,"readOrigin",null),h([p({type:[Yt],value:null,json:{write:!0}})],an.prototype,"lods",null),h([p({readOnly:!0})],an.prototype,"minScale",void 0),h([p({readOnly:!0})],an.prototype,"maxScale",void 0),h([p({readOnly:!0})],an.prototype,"scales",void 0),h([p({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],an.prototype,"size",void 0),h([Ye("size",["rows","cols"])],an.prototype,"readSize",null),h([it("size",{cols:{type:Si},rows:{type:Si}})],an.prototype,"writeSize",null),h([p({type:Tt,json:{write:!0}})],an.prototype,"spatialReference",void 0),an=Sf=h([ce("esri.layers.support.TileInfo")],an),function(t){var e;(e=t.ExtrapolateOptions||(t.ExtrapolateOptions={}))[e.NONE=0]="NONE",e[e.POWER_OF_TWO=1]="POWER_OF_TWO"}(an||(an={}));const Ia=an;var q6;let Ef=q6=class extends Je{constructor(t){super(t)}clone(){return new q6({customLayerParameters:Le(this.customLayerParameters),customParameters:Le(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};h([p({json:{type:Object,write:!0}})],Ef.prototype,"customLayerParameters",void 0),h([p({json:{type:Object,write:!0}})],Ef.prototype,"customParameters",void 0),h([p({type:String,json:{write:!0}})],Ef.prototype,"layerIdentifier",void 0),h([p({type:String,json:{write:!0}})],Ef.prototype,"tileMatrixSet",void 0),h([p({type:String,json:{write:!0}})],Ef.prototype,"url",void 0),Ef=q6=h([ce("esri.layer.support.WMTSLayerInfo")],Ef);var H6;let rs=H6=class extends a1(t_(c1(Xw(e_(Ym(Bh)))))){constructor(...t){super(...t),this.copyright="",this.fullExtent=new Xt(-20037508342787e-6,-2003750834278e-5,2003750834278e-5,20037508342787e-6,Tt.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=Tt.WebMercator,this.subDomains=null,this.tileInfo=new Ia({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new Ct({x:-20037508342787e-6,y:20037508342787e-6,spatialReference:Tt.WebMercator}),spatialReference:Tt.WebMercator,lods:[new Yt({level:0,scale:591657527591555e-6,resolution:156543.033928}),new Yt({level:1,scale:295828763795777e-6,resolution:78271.5169639999}),new Yt({level:2,scale:147914381897889e-6,resolution:39135.7584820001}),new Yt({level:3,scale:73957190948944e-6,resolution:19567.8792409999}),new Yt({level:4,scale:36978595474472e-6,resolution:9783.93962049996}),new Yt({level:5,scale:18489297737236e-6,resolution:4891.96981024998}),new Yt({level:6,scale:9244648868618e-6,resolution:2445.98490512499}),new Yt({level:7,scale:4622324434309e-6,resolution:1222.99245256249}),new Yt({level:8,scale:2311162217155e-6,resolution:611.49622628138}),new Yt({level:9,scale:1155581108577e-6,resolution:305.748113140558}),new Yt({level:10,scale:577790.554289,resolution:152.874056570411}),new Yt({level:11,scale:288895.277144,resolution:76.4370282850732}),new Yt({level:12,scale:144447.638572,resolution:38.2185141425366}),new Yt({level:13,scale:72223.819286,resolution:19.1092570712683}),new Yt({level:14,scale:36111.909643,resolution:9.55462853563415}),new Yt({level:15,scale:18055.954822,resolution:4.77731426794937}),new Yt({level:16,scale:9027.977411,resolution:2.38865713397468}),new Yt({level:17,scale:4513.988705,resolution:1.19432856685505}),new Yt({level:18,scale:2256.994353,resolution:.597164283559817}),new Yt({level:19,scale:1128.497176,resolution:.298582141647617}),new Yt({level:20,scale:564.248588,resolution:.14929107082380833}),new Yt({level:21,scale:282.124294,resolution:.07464553541190416}),new Yt({level:22,scale:141.062147,resolution:.03732276770595208}),new Yt({level:23,scale:70.5310735,resolution:.01866138385297604})]}),this.type="web-tile",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(t,e){return typeof t=="string"?{urlTemplate:t,...e}:t}load(t){const e=this.loadFromPortal({supportedTypes:["WMTS"]},t).then(()=>{let i="";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const r=new $h(this.urlTemplate);!(this.subDomains&&this.subDomains.length>0)&&r.authority?.includes("{subDomain}")&&(i="is missing 'subDomains' property")}else i="spatialReference must match tileInfo.spatialReference";else i="is missing the required 'urlTemplate' property value";if(i)throw new Ce("web-tile-layer:load",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${i}`)});return this.addResolvingPromise(e),Promise.resolve(this)}get levelValues(){const t=[];if(!this.tileInfo)return null;for(const e of this.tileInfo.lods)t[e.level]=e.levelValue||e.level;return t}readSpatialReference(t,e){return t||e.fullExtent&&e.fullExtent.spatialReference&&Tt.fromJSON(e.fullExtent.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const t=[],{urlTemplate:e,subDomains:i}=this,r=new $h(e),s=r.scheme?r.scheme+"://":"//",n=s+r.authority+"/",o=r.authority;if(o?.includes("{subDomain}")){if(i&&i.length>0&&o.split(".").length>1)for(const a of i)t.push(s+o.replace(/\{subDomain\}/gi,a)+"/")}else t.push(n);return t.map(a=>(a.charAt(a.length-1)!=="/"&&(a+="/"),a))}get urlPath(){if(!this.urlTemplate)return null;const t=this.urlTemplate,e=new $h(t),i=(e.scheme?e.scheme+"://":"//")+e.authority+"/";return t.substring(i.length)}readUrlTemplate(t,e){return t||e.templateUrl}writeUrlTemplate(t,e){t&&xc(t)&&(t="https:"+t),t&&(t=t.replace(/\{z\}/gi,"{level}").replace(/\{x\}/gi,"{col}").replace(/\{y\}/gi,"{row}"),t=El(t)),e.templateUrl=t}fetchTile(t,e,i,r={}){const{signal:s}=r,n=this.getTileUrl(t,e,i),o={responseType:"image",signal:s,query:{...this.refreshParameters}};return Et(n,o).then(a=>a.data)}async fetchImageBitmapTile(t,e,i,r={}){const{signal:s}=r;if(this.fetchTile!==H6.prototype.fetchTile){const l=await this.fetchTile(t,e,i,r);try{return createImageBitmap(l)}catch(u){throw new Ce("request:server",`Unable to load tile ${t}/${e}/${i}`,{error:u,level:t,row:e,col:i})}}const n=this.getTileUrl(t,e,i),o={responseType:"blob",signal:s,query:{...this.refreshParameters}},{data:a}=await Et(n,o);return sw(a,n)}getTileUrl(t,e,i){const{levelValues:r,tileServers:s,urlPath:n}=this;if(!r||!s||!n)return"";const o=r[t];return s[e%s.length]+_c(n,{level:o,z:o,col:i,x:i,row:e,y:e})}};h([p({type:String,value:"",json:{write:!0}})],rs.prototype,"copyright",void 0),h([p({type:Xt,json:{write:!0},nonNullable:!0})],rs.prototype,"fullExtent",void 0),h([p({readOnly:!0,json:{read:!1,write:!1}})],rs.prototype,"legendEnabled",void 0),h([p({type:["show","hide"]})],rs.prototype,"listMode",void 0),h([p({json:{read:!0,write:!0}})],rs.prototype,"blendMode",void 0),h([p()],rs.prototype,"levelValues",null),h([p({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],rs.prototype,"isReference",void 0),h([p({type:["WebTiledLayer"],value:"WebTiledLayer"})],rs.prototype,"operationalLayerType",void 0),h([p({readOnly:!0,json:{read:!1,write:!1}})],rs.prototype,"popupEnabled",void 0),h([p({type:Tt})],rs.prototype,"spatialReference",void 0),h([Ye("spatialReference",["spatialReference","fullExtent.spatialReference"])],rs.prototype,"readSpatialReference",null),h([p({type:[String],json:{write:!0}})],rs.prototype,"subDomains",void 0),h([p({type:Ia,json:{write:!0}})],rs.prototype,"tileInfo",void 0),h([p({readOnly:!0})],rs.prototype,"tileServers",null),h([p({json:{read:!1}})],rs.prototype,"type",void 0),h([p()],rs.prototype,"urlPath",null),h([p({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],rs.prototype,"urlTemplate",void 0),h([Ye("urlTemplate",["urlTemplate","templateUrl"])],rs.prototype,"readUrlTemplate",null),h([it("urlTemplate",{templateUrl:{type:String}})],rs.prototype,"writeUrlTemplate",null),h([p({type:Ef,json:{write:!0}})],rs.prototype,"wmtsInfo",void 0),rs=H6=h([ce("esri.layers.WebTileLayer")],rs);const ioe=rs,Pdt=Object.freeze(Object.defineProperty({__proto__:null,default:ioe},Symbol.toStringTag,{value:"Module"}));let Do=class extends ioe{constructor(...e){super(...e),this.portalItem=null,this.isReference=null,this.tileInfo=new Ia({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new Ct({x:-20037508342787e-6,y:20037508342787e-6,spatialReference:Tt.WebMercator}),spatialReference:Tt.WebMercator,lods:[new Yt({level:0,scale:591657527591555e-6,resolution:156543.033928}),new Yt({level:1,scale:295828763795777e-6,resolution:78271.5169639999}),new Yt({level:2,scale:147914381897889e-6,resolution:39135.7584820001}),new Yt({level:3,scale:73957190948944e-6,resolution:19567.8792409999}),new Yt({level:4,scale:36978595474472e-6,resolution:9783.93962049996}),new Yt({level:5,scale:18489297737236e-6,resolution:4891.96981024998}),new Yt({level:6,scale:9244648868618e-6,resolution:2445.98490512499}),new Yt({level:7,scale:4622324434309e-6,resolution:1222.99245256249}),new Yt({level:8,scale:2311162217155e-6,resolution:611.49622628138}),new Yt({level:9,scale:1155581108577e-6,resolution:305.748113140558}),new Yt({level:10,scale:577790.554289,resolution:152.874056570411}),new Yt({level:11,scale:288895.277144,resolution:76.4370282850732}),new Yt({level:12,scale:144447.638572,resolution:38.2185141425366}),new Yt({level:13,scale:72223.819286,resolution:19.1092570712683}),new Yt({level:14,scale:36111.909643,resolution:9.55462853563415}),new Yt({level:15,scale:18055.954822,resolution:4.77731426794937}),new Yt({level:16,scale:9027.977411,resolution:2.38865713397468}),new Yt({level:17,scale:4513.988705,resolution:1.19432856685505}),new Yt({level:18,scale:2256.994353,resolution:.597164283559817}),new Yt({level:19,scale:1128.497176,resolution:.298582141647617})]}),this.subDomains=["a","b","c"],this.fullExtent=new Xt(-20037508342787e-6,-2003750834278e-5,2003750834278e-5,20037508342787e-6,Tt.WebMercator),this.urlTemplate="https://{subDomain}.tile.openstreetmap.org/{level}/{col}/{row}.png",this.operationalLayerType="OpenStreetMap",this.type="open-street-map",this.copyright="Map data &copy; OpenStreetMap contributors, CC-BY-SA"}get refreshInterval(){return 0}};h([p({type:gb,json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],Do.prototype,"portalItem",void 0),h([p({type:Boolean,json:{read:!1,write:!1}})],Do.prototype,"isReference",void 0),h([p({type:Number,readOnly:!0,json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],Do.prototype,"refreshInterval",null),h([p({type:Ia,json:{write:!1}})],Do.prototype,"tileInfo",void 0),h([p({type:["show","hide"]})],Do.prototype,"listMode",void 0),h([p({readOnly:!0,json:{read:!1,write:!1}})],Do.prototype,"subDomains",void 0),h([p({readOnly:!0,json:{read:!1,write:!1},nonNullable:!0})],Do.prototype,"fullExtent",void 0),h([p({readOnly:!0,json:{read:!1,write:!1}})],Do.prototype,"urlTemplate",void 0),h([p({type:["OpenStreetMap"]})],Do.prototype,"operationalLayerType",void 0),h([p({json:{read:!1}})],Do.prototype,"type",void 0),h([p({json:{read:!1,write:!1}})],Do.prototype,"copyright",void 0),h([p({json:{read:!1,write:!1}})],Do.prototype,"wmtsInfo",void 0),Do=h([ce("esri.layers.OpenStreetMapLayer")],Do);const d7=Do,Fdt=Object.freeze(Object.defineProperty({__proto__:null,default:d7},Symbol.toStringTag,{value:"Module"})),qOe={type:Ia,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:HOe}}}}};function HOe(t,e,i,r){if(!t)return null;const{minScale:s,maxScale:n,minLOD:o,maxLOD:a}=e;if(o!=null&&a!=null)return r&&r.ignoreMinMaxLOD?Ia.fromJSON(t):Ia.fromJSON({...t,lods:t.lods.filter(({level:l})=>l!=null&&l>=o&&l<=a)});if(s!==0&&n!==0){const l=d=>Math.round(1e4*d)/1e4,u=s?l(s):1/0,c=n?l(n):-1/0;return Ia.fromJSON({...t,lods:t.lods.filter(d=>{const f=l(d.scale);return f<=u&&f>=c})})}return Ia.fromJSON(t)}function roe(t){return 32+t.length}function soe(t){return 16}function Ddt(t){if(!t)return 0;let e=ooe;for(const i in t)if(t.hasOwnProperty(i)){const r=t[i];switch(typeof r){case"string":e+=roe(r);break;case"number":e+=soe();break;case"boolean":e+=4}}return e}function WOe(t){if(!t)return 0;if(Array.isArray(t))return JOe(t);let e=ooe;for(const i in t)t.hasOwnProperty(i)&&(e+=noe(t[i]));return e}function JOe(t){const e=t.length;if(e===0||typeof t[0]=="number")return 32+8*e;let i=aoe;for(let r=0;r<e;r++)i+=noe(t[r]);return i}function noe(t){switch(typeof t){case"object":return WOe(t);case"string":return roe(t);case"number":return soe();case"boolean":return 4;default:return 8}}function jdt(t,e){return aoe+t.length*e}const ooe=32,aoe=32;var VS;(function(t){t[t.KILOBYTES=1024]="KILOBYTES",t[t.MEGABYTES=1048576]="MEGABYTES",t[t.GIGABYTES=1073741824]="GIGABYTES"})(VS||(VS={}));let Tq=class PM{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(e,i){if(this._allAvailability!=="unknown")return this._allAvailability;const r=(e-this.location.top)*this.location.width+(i-this.location.left),s=r%8,n=r>>3,o=this._tileAvailabilityBitSet;return n<0||n>o.length?"unknown":o[n]&1<<s?"available":"unavailable"}_updateFromData(e){const i=this.location.width,r=this.location.height;let s=!0,n=!0;const o=Math.ceil(i*r/8),a=new Uint8Array(o);let l=0;for(let u=0;u<e.length;u++){const c=u%8;e[u]?(n=!1,a[l]|=1<<c):s=!1,c===7&&++l}n?this._allAvailability="unavailable":s?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=a,this.byteSize+=a.length)}static fromDefinition(e,i){const r=e.service.request||Et,{row:s,col:n,width:o,height:a}=e,l={query:{f:"json"}};return i=i?{...l,...i}:l,r(ZOe(e),i).then(u=>u.data).catch(u=>{if(u&&u.details&&u.details.httpStatus===422)return{location:{top:s,left:n,width:o,height:a},valid:!0,data:Tme(o*a,0)};throw u}).then(u=>{if(u.location&&(u.location.top!==s||u.location.left!==n||u.location.width!==o||u.location.height!==a))throw new Ce("tilemap:location-mismatch","Tilemap response for different location than requested",{response:u,definition:{top:s,left:n,width:o,height:a}});return PM.fromJSON(u)})}static fromJSON(e){PM._validateJSON(e);const i=new PM;return i.location=Object.freeze(Le(e.location)),i._updateFromData(e.data),Object.freeze(i)}static _validateJSON(e){if(!e||!e.location)throw new Ce("tilemap:missing-location","Location missing from tilemap response");if(e.valid===!1)throw new Ce("tilemap:invalid","Tilemap response was marked as invalid");if(!e.data)throw new Ce("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(e.data))throw new Ce("tilemap:data-mismatch","Data must be an array of numbers");if(e.data.length!==e.location.width*e.location.height)throw new Ce("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}};function Iq(t){return`${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}function ZOe(t){let e;if(t.service.type==="vector-tile")e=`${t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`;else{const r=t.service.tileServers;e=`${r&&r.length?r[t.row%r.length]:t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}const i=t.service.query;return i&&(e=`${e}?${i}`),e}var Og;let ic=Og=class extends ea(Pt){constructor(t){super(t),this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2*VS.MEGABYTES,this.request=Et,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new Ate(this.cacheByteSize),this.addHandles([st(()=>{const{layer:t}=this;return[t?.parsedUrl,t?.tileServers,t?.apiKey,t?.customParameters]},()=>this._initializeTilemapDefinition()),st(()=>this.layer?.tileInfo?.lods,t=>this._initializeAvailableLevels(t),jf)]),this._initializeTilemapDefinition()}castLevels(t){return t<=2?(tt.getLogger(this.declaredClass).error("Minimum levels for Tilemap is 3, but got ",t),3):t}get size(){return 1<<this.levels}fetchTilemap(t,e,i,r){if(!this._availableLevels[t])return Promise.reject(new Ce("tilemap-cache:level-unavailable",`Level ${t} is unavailable in the service`));const s=this._tmpTilemapDefinition,n=this._tilemapFromCache(t,e,i,s);if(n)return Promise.resolve(n);const o=r&&r.signal;return r={...r,signal:null},new Promise((a,l)=>{$a(o,()=>l(yr()));const u=Iq(s);let c=this._pendingTilemapRequests[u];if(!c){c=Tq.fromDefinition(s,r).then(f=>(this._tilemapCache.put(u,f,f.byteSize),f));const d=()=>delete this._pendingTilemapRequests[u];this._pendingTilemapRequests[u]=c,c.then(d,d)}c.then(a,l)})}getAvailability(t,e,i){if(!this._availableLevels[t])return"unavailable";const r=this._tilemapFromCache(t,e,i,this._tmpTilemapDefinition);return r?r.getAvailability(e,i):"unknown"}fetchAvailability(t,e,i,r){return this._availableLevels[t]?this.fetchTilemap(t,e,i,r).catch(s=>s).then(s=>{if(s instanceof Tq){const n=s.getAvailability(e,i);if(n==="unavailable")throw new Ce("tile-map:tile-unavailable","Tile is not available",{level:t,row:e,col:i});return n}if(vn(s))throw s;return"unknown"}):Promise.reject(new Ce("tilemap-cache:level-unavailable",`Level ${t} is unavailable in the service`))}fetchAvailabilityUpsample(t,e,i,r,s){r.level=t,r.row=e,r.col=i;const n=this.layer.tileInfo;n.updateTileInfo(r);const o=this.fetchAvailability(t,e,i,s).catch(a=>{if(vn(a))throw a;if(n.upsampleTile(r))return this.fetchAvailabilityUpsample(r.level,r.row,r.col,r);throw a});return this._fetchAvailabilityUpsamplePrefetch(r.id,t,e,i,s,o),o}async _fetchAvailabilityUpsamplePrefetch(t,e,i,r,s,n){if(!this._prefetchingEnabled||t==null)return;const o=`prefetch-${t}`;if(this.handles.has(o))return;const a=new AbortController;n.then(()=>a.abort(),()=>a.abort());let l=!1;const u={remove(){l||(l=!0,a.abort())}};if(this.handles.add(u,o),await vye(10,a.signal).catch(()=>{}),l||(l=!0,this.handles.remove(o)),Rl(a))return;const c=new toe(t,e,i,r),d={...s,signal:a.signal},f=this.layer.tileInfo;for(let m=0;Og._prefetches.length<Og._maxPrefetch&&f.upsampleTile(c);++m){const g=this.fetchAvailability(c.level,c.row,c.col,d);Og._prefetches.push(g);const v=()=>{Og._prefetches.removeUnordered(g)};g.then(v,v)}}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const{parsedUrl:t,apiKey:e,customParameters:i}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:t.path,query:xm({...t.query,...i,token:e??t.query?.token}),tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(t,e,i,r){r.level=t,r.row=e-e%this.size,r.col=i-i%this.size;const s=Iq(r);return this._tilemapCache.get(s)}_initializeAvailableLevels(t){this._availableLevels={},t&&t.forEach(e=>this._availableLevels[e.level]=!0)}get test(){const t=this;return{get prefetchingEnabled(){return t._prefetchingEnabled},set prefetchingEnabled(e){t._prefetchingEnabled=e},hasTilemap:(e,i,r)=>!!t._tilemapFromCache(e,i,r,t._tmpTilemapDefinition)}}};ic._maxPrefetch=4,ic._prefetches=new lm({initialSize:Og._maxPrefetch}),h([p({constructOnly:!0,type:Number})],ic.prototype,"levels",void 0),h([mi("levels")],ic.prototype,"castLevels",null),h([p({readOnly:!0,type:Number})],ic.prototype,"size",null),h([p({constructOnly:!0,type:Number})],ic.prototype,"cacheByteSize",void 0),h([p({constructOnly:!0})],ic.prototype,"layer",void 0),h([p({constructOnly:!0})],ic.prototype,"request",void 0),ic=Og=h([ce("esri.layers.support.TilemapCache")],ic);const YOe=t=>{let e=class extends t{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(i,r){return r.minLOD!=null&&r.maxLOD!=null?i:0}readMaxScale(i,r){return r.minLOD!=null&&r.maxLOD!=null?i:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(i,r){return r.capabilities&&r.capabilities.includes("Tilemap")?new ic({layer:this}):null}};return h([p({json:{read:{source:"copyrightText"}}})],e.prototype,"copyright",void 0),h([p()],e.prototype,"minScale",void 0),h([Ye("service","minScale")],e.prototype,"readMinScale",null),h([p()],e.prototype,"maxScale",void 0),h([Ye("service","maxScale")],e.prototype,"readMaxScale",null),h([p({type:Tt})],e.prototype,"spatialReference",void 0),h([p({readOnly:!0})],e.prototype,"supportsBlankTile",null),h([p(qOe)],e.prototype,"tileInfo",void 0),h([p()],e.prototype,"tilemapCache",void 0),h([Ye("service","tilemapCache",["capabilities"])],e.prototype,"readTilemapCache",null),h([p()],e.prototype,"version",void 0),e=h([ce("esri.layers.mixins.ArcGISCachedService")],e),e},Mq=["Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Elevation/World_Hillshade","Elevation/World_Hillshade_Dark","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Ocean_Basemap","Reference/World_Boundaries_and_Places","Reference/World_Boundaries_and_Places_Alternate","Reference/World_Transportation","World_Imagery","World_Street_Map","World_Topo_Map"];let Ms=class extends a1(Xne(c1(Xw(e_(YOe(Zne(hC(Ym(ea(t_(uD(fC(Bh))))))))))))){constructor(...e){super(...e),this.listMode="show",this.isReference=null,this.operationalLayerType="ArcGISTiledMapServiceLayer",this.resampling=!0,this.sourceJSON=null,this.spatialReference=null,this.path=null,this.sublayers=null,this.type="tile",this.url=null}normalizeCtorArgs(e,i){return typeof e=="string"?{url:e,...i}:e}load(e){const i=ee(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).catch(_a).then(()=>this._fetchService(i))),Promise.resolve(this)}get attributionDataUrl(){const e=this.parsedUrl?.path.toLowerCase();return e?this._getDefaultAttribution(this._getMapName(e)):null}readSpatialReference(e,i){return(e=e||i.tileInfo&&i.tileInfo.spatialReference)&&Tt.fromJSON(e)}writeSublayers(e,i,r,s){if(!this.loaded||!e)return;const n=e.slice().reverse().flatten(({sublayers:l})=>l&&l.toArray().reverse()).toArray(),o=[],a={writeSublayerStructure:!1,...s};n.forEach(l=>{const u=l.write({},a);o.push(u)}),o.some(l=>Object.keys(l).length>1)&&(i.layers=o)}get tileServers(){return this._getDefaultTileServers(this.parsedUrl?.path)}castTileServers(e){return Array.isArray(e)?e.map(i=>Fs(i).path):null}fetchTile(e,i,r,s={}){const{signal:n}=s,o=this.getTileUrl(e,i,r),a={responseType:"image",signal:n,query:{...this.refreshParameters}};return Et(o,a).then(l=>l.data)}async fetchImageBitmapTile(e,i,r,s={}){const{signal:n}=s,o=this.getTileUrl(e,i,r),a={responseType:"blob",signal:n,query:{...this.refreshParameters}},{data:l}=await Et(o,a);return sw(l,o)}getTileUrl(e,i,r){const s=!this.tilemapCache&&this.supportsBlankTile,n=xm({...this.parsedUrl?.query,blankTile:!s&&null,...this.customParameters,token:this.apiKey}),o=this.tileServers;return`${o&&o.length?o[i%o.length]:this.parsedUrl?.path}/tile/${e}/${i}/${r}${n?"?"+n:""}`}loadAll(){return z4(this,e=>{e(this.allSublayers)})}_fetchService(e){return new Promise((i,r)=>{if(this.sourceJSON){if(this.sourceJSON.bandCount!=null&&this.sourceJSON.pixelSizeX!=null)throw new Ce("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");return void i({data:this.sourceJSON})}if(!this.parsedUrl)throw new Ce("tile-layer:undefined-url","layer's url is not defined");const s=o1(this.parsedUrl.path);if(ee(s)&&s.serverType==="ImageServer")throw new Ce("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");Et(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(i,r)}).then(i=>{let r=this.url;if(i.ssl&&(r=this.url=r.replace(/^http:/i,"https:")),this.sourceJSON=i.data,this.read(i.data,{origin:"service",url:this.parsedUrl}),this.version===10.1&&!hD(r))return this._fetchServerVersion(r,e).then(s=>{this.read({currentVersion:s})}).catch(()=>{})})}_fetchServerVersion(e,i){if(!cSe(e))return Promise.reject();const r=e.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return Et(r,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:i}).then(s=>{if(s.data&&s.data.currentVersion)return s.data.currentVersion;throw new Ce("tile-layer:version-not-available")})}_getMapName(e){const i=e.match(/^(?:https?:)?\/\/(server\.arcgisonline\.com|services\.arcgisonline\.com|ibasemaps-api\.arcgis\.com)\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i);return i?i[2]:void 0}_getDefaultAttribution(e){if(e==null)return null;let i;e=e.toLowerCase();for(let r=0,s=Mq.length;r<s;r++)if(i=Mq[r],i.toLowerCase().includes(e))return _l("//static.arcgis.com/attribution/"+i);return null}_getDefaultTileServers(e){if(e==null)return[];const i=e.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i)!==-1,r=e.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i)!==-1;return i||r?[e,e.replace(i?/server\.arcgisonline/i:/services\.arcgisonline/i,i?"services.arcgisonline":"server.arcgisonline")]:[]}get hasOverriddenFetchTile(){return!this.fetchTile.__isDefault__}};h([p({readOnly:!0})],Ms.prototype,"attributionDataUrl",null),h([p({type:["show","hide","hide-children"]})],Ms.prototype,"listMode",void 0),h([p({json:{read:!0,write:!0}})],Ms.prototype,"blendMode",void 0),h([p({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],Ms.prototype,"isReference",void 0),h([p({readOnly:!0,type:["ArcGISTiledMapServiceLayer"]})],Ms.prototype,"operationalLayerType",void 0),h([p({type:Boolean})],Ms.prototype,"resampling",void 0),h([p()],Ms.prototype,"sourceJSON",void 0),h([p({type:Tt})],Ms.prototype,"spatialReference",void 0),h([Ye("spatialReference",["spatialReference","tileInfo"])],Ms.prototype,"readSpatialReference",null),h([p({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Ms.prototype,"path",void 0),h([p({readOnly:!0})],Ms.prototype,"sublayers",void 0),h([it("sublayers",{layers:{type:[eE]}})],Ms.prototype,"writeSublayers",null),h([p({json:{read:!1,write:!1}})],Ms.prototype,"popupEnabled",void 0),h([p()],Ms.prototype,"tileServers",null),h([mi("tileServers")],Ms.prototype,"castTileServers",null),h([p({readOnly:!0,json:{read:!1}})],Ms.prototype,"type",void 0),h([p(G3)],Ms.prototype,"url",void 0),Ms=h([ce("esri.layers.TileLayer")],Ms),Ms.prototype.fetchTile.__isDefault__=!0;const p7=Ms,Vdt=Object.freeze(Object.defineProperty({__proto__:null,default:p7},Symbol.toStringTag,{value:"Module"})),KOe=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function W6(t){return t!=null&&KOe.some(([e,i])=>t>=e&&t<=i)}const QOe={visible:"visibleSublayers"};let Ud=class extends ea(Pt){constructor(e){super(e),this.scale=0}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("wms-sublayer-update",i=>this.notifyChange(QOe[i.propertyName]))],"layer"))}get layers(){return this.visibleSublayers.filter(({name:e})=>e).map(({name:e})=>e).join()}get version(){this.commitProperty("layers");const e=this.layer;return e&&e.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:e,scale:i}=this,r=e?.sublayers,s=[],n=o=>{const{minScale:a,maxScale:l,sublayers:u,visible:c}=o;c&&(i===0||(a===0||i<=a)&&(l===0||i>=l))&&(u?u.forEach(n):s.push(o))};return r?.forEach(n),s}toJSON(){const{layer:e,layers:i}=this,{imageFormat:r,imageTransparency:s,version:n}=e;return{format:r,request:"GetMap",service:"WMS",styles:"",transparent:s?"TRUE":"FALSE",version:n,layers:i}}};h([p()],Ud.prototype,"layer",null),h([p({readOnly:!0})],Ud.prototype,"layers",null),h([p({type:Number})],Ud.prototype,"scale",void 0),h([p({readOnly:!0})],Ud.prototype,"version",null),h([p({readOnly:!0})],Ud.prototype,"visibleSublayers",null),Ud=h([ce("esri.layers.support.ExportWMSImageParameters")],Ud);var NM;let XOe=0,jr=NM=class extends qm(HP){constructor(t){super(t),this.dimensions=null,this.fullExtents=null,this.legendUrl=null,this.legendEnabled=!0,this.layer=null,this.maxScale=0,this.minScale=0,this.parent=null,this.popupEnabled=!1,this.queryable=!1,this.sublayers=null,this.spatialReferences=null,this.addHandles([bn(()=>this.sublayers,"after-add",({item:e})=>{e.parent=this,e.layer=this.layer},Cl),bn(()=>this.sublayers,"after-remove",({item:e})=>{e.layer=e.parent=null},Cl),st(()=>this.sublayers,(e,i)=>{if(i)for(const r of i)r.layer=r.parent=null;if(e)for(const r of e)r.parent=this,r.layer=this.layer},Cl)])}get description(){return this._get("description")}set description(t){this._set("description",t)}get fullExtent(){return this._get("fullExtent")}set fullExtent(t){this._set("fullExtent",t)}readExtent(t,e){return(t=e.extent)?Xt.fromJSON(t):null}get id(){return this._get("id")??XOe++}set id(t){this._set("id",t)}readLegendUrl(t,e){return e?.legendUrl??e?.legendURL??null}get effectiveScaleRange(){const{minScale:t,maxScale:e}=this;return{minScale:t,maxScale:e}}get name(){return this._get("name")}set name(t){this._set("name",t)}castSublayers(t){return ns(Nt.ofType(NM),t)}get title(){return this._get("title")}set title(t){this._set("title",t)}get visible(){return this._get("visible")}set visible(t){this._setAndNotifyLayer("visible",t)}clone(){const t=new NM;return this.hasOwnProperty("description")&&(t.description=this.description),this.hasOwnProperty("fullExtent")&&(t.fullExtent=this.fullExtent.clone()),this.hasOwnProperty("fullExtents")&&(t.fullExtents=this.fullExtents?.map(e=>e.clone())??null),this.hasOwnProperty("legendUrl")&&(t.legendUrl=this.legendUrl),this.hasOwnProperty("legendEnabled")&&(t.legendEnabled=this.legendEnabled),this.hasOwnProperty("layer")&&(t.layer=this.layer),this.hasOwnProperty("name")&&(t.name=this.name),this.hasOwnProperty("parent")&&(t.parent=this.parent),this.hasOwnProperty("queryable")&&(t.queryable=this.queryable),this.hasOwnProperty("sublayers")&&(t.sublayers=this.sublayers&&this.sublayers.map(e=>e.clone())),this.hasOwnProperty("spatialReferences")&&(t.spatialReferences=this.spatialReferences?.map(e=>e)),this.hasOwnProperty("visible")&&(t.visible=this.visible),this.hasOwnProperty("title")&&(t.title=this.title),t}_setAndNotifyLayer(t,e){const i=this.layer;this._get(t)!==e&&(this._set(t,e),i&&i.emit("wms-sublayer-update",{propertyName:t,id:this.id}))}};h([p()],jr.prototype,"description",null),h([p({readOnly:!0})],jr.prototype,"dimensions",void 0),h([p({value:null})],jr.prototype,"fullExtent",null),h([Ye("fullExtent",["extent"])],jr.prototype,"readExtent",null),h([p()],jr.prototype,"fullExtents",void 0),h([p({type:Number,json:{write:{enabled:!1,overridePolicy:()=>({ignoreOrigin:!0,enabled:!0})}}})],jr.prototype,"id",null),h([p({type:String,json:{origins:{"web-document":{read:{source:["legendUrl","legendURL"]},write:{target:"legendUrl",ignoreOrigin:!0}}},read:{source:"legendURL"},write:{ignoreOrigin:!0}}})],jr.prototype,"legendUrl",void 0),h([Ye(["web-document"],"legendUrl")],jr.prototype,"readLegendUrl",null),h([p({value:!0,type:Boolean,json:{read:{source:"showLegend"},write:{target:"showLegend"},origins:{"web-map":{read:!1,write:!1},"web-scene":{read:!1,write:!1}}}})],jr.prototype,"legendEnabled",void 0),h([p()],jr.prototype,"layer",void 0),h([p()],jr.prototype,"maxScale",void 0),h([p()],jr.prototype,"minScale",void 0),h([p({readOnly:!0})],jr.prototype,"effectiveScaleRange",null),h([p({type:String,value:null,json:{read:{source:"name"},write:{ignoreOrigin:!0}}})],jr.prototype,"name",null),h([p()],jr.prototype,"parent",void 0),h([p({type:Boolean,json:{read:{source:"showPopup"},write:{ignoreOrigin:!0,target:"showPopup"}}})],jr.prototype,"popupEnabled",void 0),h([p({type:Boolean,json:{write:{ignoreOrigin:!0}}})],jr.prototype,"queryable",void 0),h([p()],jr.prototype,"sublayers",void 0),h([mi("sublayers")],jr.prototype,"castSublayers",null),h([p({type:[Number],json:{read:{source:"spatialReferences"}}})],jr.prototype,"spatialReferences",void 0),h([p({type:String,value:null,json:{write:{ignoreOrigin:!0}}})],jr.prototype,"title",null),h([p({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"}}})],jr.prototype,"visible",null),jr=NM=h([ce("esri.layers.support.WMSSublayer")],jr);const J6=jr,kT={84:4326,83:4269,27:4267};function eRe(t){if(!t)return null;const e={idCounter:-1};typeof t=="string"&&(t=new DOMParser().parseFromString(t,"text/xml"));const i=t.documentElement;if(i.nodeName==="ServiceExceptionReport"){const ne=Array.prototype.slice.call(i.childNodes).map(q=>q.textContent).join(`\r
`);throw new Ce("wmslayer:wms-capabilities-xml-is-not-valid","The server returned errors when the WMS capabilities were requested.",ne)}const r=So("Capability",i),s=So("Service",i),n=r&&So("Request",r);if(!r||!s||!n)return null;const o=So("Layer",r);if(!o)return null;const a=i.nodeName==="WMS_Capabilities"||i.nodeName==="WMT_MS_Capabilities"?i.getAttribute("version"):"1.3.0",l=vh("Title",s,"")||vh("Name",s,""),u=vh("AccessConstraints",s,""),c=/^none$/i.test(u)?"":u,d=vh("Abstract",s,""),f=parseInt(vh("MaxWidth",s,"5000"),10),m=parseInt(vh("MaxHeight",s,"5000"),10),g=Cq(n,"GetMap"),v=Aq(n,"GetMap"),b=tx(o,a,e);if(!b)return null;let _,S=0;const M=Array.prototype.slice.call(r.childNodes),x=b.sublayers??[],T=ne=>{ne!=null&&x.push(ne)};M.forEach(ne=>{ne.nodeName==="Layer"&&(S===0?_=ne:(S===1&&b.name&&(b.name="",T(tx(_,a,e))),T(tx(ne,a,e))),S++)});let I=b.sublayers,$=b.extent;const L=b.fullExtents??[];if(I||(I=[]),I.length===0&&I.push(b),!$){const ne=new Xt(I[0].extent);b.extent=ne.toJSON(),$=b.extent}const B=b.spatialReferences.length>0?b.spatialReferences:loe(b),z=Aq(n,"GetFeatureInfo"),H=z?Cq(n,"GetFeatureInfo"):null,J=uoe(I),K=b.minScale||0,Q=b.maxScale||0,y=b.dimensions??[],A=J.reduce((ne,q)=>ne.concat(q.dimensions??[]),[]),N=y.concat(A).filter(hoe);let D=null;if(N.length){const ne=N.map(q=>{const{extent:he}=q;return rRe(he)?he.map(te=>te.getTime()):he?.map(te=>[te.min.getTime(),te.max.getTime()])}).flat(2).filter(ee);D={startTimeField:null,endTimeField:null,trackIdField:void 0,timeExtent:[Math.min(...ne),Math.max(...ne)]}}return{copyright:c,description:d,dimensions:y,extent:$,fullExtents:L,featureInfoFormats:H,featureInfoUrl:z,mapUrl:v,maxWidth:f,maxHeight:m,maxScale:Q,minScale:K,layers:J,spatialReferences:B,supportedImageFormatTypes:g,timeInfo:D,title:l,version:a}}function tRe(t){const e=t.filter(i=>i.popupEnabled&&i.name&&i.queryable);return e.length?e.map(({name:i})=>i).join():null}function loe(t){if(t.spatialReferences.length>0)return t.spatialReferences;if(t.sublayers)for(const e of t.sublayers){const i=loe(e);if(i.length>0)return i}return[]}function uoe(t){let e=[];for(const i of t)e.push(i),i.sublayers?.length&&(e=e.concat(uoe(i.sublayers)),delete i.sublayers);return e}function FM(t,e,i){return e.getAttribute(t)??i}function iRe(t,e,i,r){const s=So(t,i);return s?FM(e,s,r):r}function So(t,e){for(let i=0;i<e.childNodes.length;i++){const r=e.childNodes[i];if(coe(r)&&r.nodeName===t)return r}return null}function DM(t,e){if(e==null)return[];const i=[];for(let r=0;r<e.childNodes.length;r++){const s=e.childNodes[r];coe(s)&&s.nodeName===t&&i.push(s)}return i}function vh(t,e,i){return So(t,e)?.textContent??i}function B_(t,e,i){if(!t)return null;const r=parseFloat(t.getAttribute("minx")),s=parseFloat(t.getAttribute("miny")),n=parseFloat(t.getAttribute("maxx")),o=parseFloat(t.getAttribute("maxy"));let a,l,u,c;i?(a=isNaN(s)?-Number.MAX_VALUE:s,l=isNaN(r)?-Number.MAX_VALUE:r,u=isNaN(o)?Number.MAX_VALUE:o,c=isNaN(n)?Number.MAX_VALUE:n):(a=isNaN(r)?-Number.MAX_VALUE:r,l=isNaN(s)?-Number.MAX_VALUE:s,u=isNaN(n)?Number.MAX_VALUE:n,c=isNaN(o)?Number.MAX_VALUE:o);const d=new Tt({wkid:e});return new Xt({xmin:a,ymin:l,xmax:u,ymax:c,spatialReference:d})}function Aq(t,e){const i=So(e,t);if(i){const r=So("DCPType",i);if(r){const s=So("HTTP",r);if(s){const n=So("Get",s);if(n){let o=iRe("OnlineResource","xlink:href",n,null);if(o)return o.indexOf("&")===o.length-1&&(o=o.substring(0,o.length-1)),nRe(o,["service","request"])}}}}return null}function Cq(t,e){const i=DM("Operation",t);if(!i.length)return DM("Format",So(e,t)).map(({textContent:s})=>s).filter(ee);const r=[];for(const s of i)if(s.getAttribute("name")===e){const n=DM("Format",s);for(const{textContent:o}of n)o!=null&&r.push(o)}return r}function $q(t,e,i){const r=So(e,t);if(!r)return i;const{textContent:s}=r;if(s==null||s==="")return i;const n=Number(s);return isNaN(n)?i:n}function tx(t,e,i){if(!t)return null;const r={id:i.idCounter++,fullExtents:[],parentLayerId:null,queryable:t.getAttribute("queryable")==="1",spatialReferences:[],sublayers:null},s=So("LatLonBoundingBox",t),n=So("EX_GeographicBoundingBox",t);let o=null;s&&(o=B_(s,4326)),n&&(o=new Xt(0,0,0,0,new Tt({wkid:4326})),o.xmin=parseFloat(vh("westBoundLongitude",n,"0")),o.ymin=parseFloat(vh("southBoundLatitude",n,"0")),o.xmax=parseFloat(vh("eastBoundLongitude",n,"0")),o.ymax=parseFloat(vh("northBoundLatitude",n,"0"))),s||n||(o=new Xt(-180,-90,180,90,new Tt({wkid:4326}))),r.minScale=$q(t,"MaxScaleDenominator",0),r.maxScale=$q(t,"MinScaleDenominator",0);const a=["1.0.0","1.1.0","1.1.1"].includes(e)?"SRS":"CRS";return Array.prototype.slice.call(t.childNodes).forEach(l=>{if(l.nodeName==="Name")r.name=l.textContent||"";else if(l.nodeName==="Title")r.title=l.textContent||"";else if(l.nodeName==="Abstract")r.description=l.textContent||"";else if(l.nodeName==="BoundingBox"){const u=l.getAttribute(a);if(u&&u.indexOf("EPSG:")===0){const d=parseInt(u.substring(5),10);d===0||isNaN(d)||o||(o=e==="1.3.0"?B_(l,d,W6(d)):B_(l,d))}const c=u&&u.indexOf(":");if(c&&c>-1){let d=parseInt(u.substring(c+1,u.length),10);d===0||isNaN(d)||(d=kT[d]?kT[d]:d);const f=e==="1.3.0"?B_(l,d,W6(d)):B_(l,d);f&&r.fullExtents&&r.fullExtents.push(f)}}else if(l.nodeName===a)(l.textContent?.split(" ")??[]).forEach(u=>{const c=u.includes(":")?parseInt(u.split(":")[1],10):parseInt(u,10);if(c!==0&&!isNaN(c)){const d=kT[c]?kT[c]:c;r.spatialReferences.includes(d)||r.spatialReferences.push(d)}});else if(l.nodeName!=="Style"||r.legendURL){if(l.nodeName==="Layer"){const u=tx(l,e,i);u&&(u.parentLayerId=r.id,r.sublayers||(r.sublayers=[]),r.sublayers.push(u))}}else{const u=So("LegendURL",l);if(u){const c=So("OnlineResource",u);c&&(r.legendURL=c.getAttribute("xlink:href"))}}}),r.extent=o?.toJSON(),r.dimensions=DM("Dimension",t).filter(l=>l.getAttribute("name")&&l.getAttribute("units")&&l.textContent).map(l=>{const u=l.getAttribute("name"),c=l.getAttribute("units"),d=l.textContent,f=l.getAttribute("unitSymbol")??void 0,m=l.getAttribute("default")??void 0,g=FM("default",l,"0")!=="0",v=FM("nearestValue",l,"0")!=="0",b=FM("current",l,"0")!=="0";return hoe({name:u,units:c})?{name:"time",units:"ISO8601",extent:kq(d),default:kq(m),multipleValues:g,nearestValue:v,current:b}:sRe({name:u,units:c})?{name:"elevation",units:c,extent:Oq(d),unitSymbol:f,default:Oq(m),multipleValues:g,nearestValue:v}:{name:u,units:c,extent:Rq(d),unitSymbol:f,default:Rq(m),multipleValues:g,nearestValue:v}}),r}function rRe(t){return Array.isArray(t)&&t.length>0&&t[0]instanceof Date}function coe(t){return t.nodeType===Node.ELEMENT_NODE}function sRe(t){return/^elevation$/i.test(t.name)&&/^(epsg|crs):\d+$/i.test(t.units)}function hoe(t){return/^time$/i.test(t.name)&&/^iso8601$/i.test(t.units)}function nRe(t,e){const i=[],r=Fs(t);for(const s in r.query)r.query.hasOwnProperty(s)&&(e.includes(s.toLowerCase())||i.push(s+"="+r.query[s]));return r.path+(i.length?"?"+i.join("&"):"")}function Oq(t){if(!t)return;const e=t.includes("/"),i=t.split(",");return e?i.map(r=>{const s=r.split("/");return s.length<2?null:{min:parseFloat(s[0]),max:parseFloat(s[1]),resolution:s.length>=3&&s[2]!=="0"?parseFloat(s[2]):void 0}}).filter(ee):i.map(r=>parseFloat(r))}function Rq(t){if(!t)return;const e=t.includes("/"),i=t.split(",");return e?i.map(r=>{const s=r.split("/");return s.length<2?null:{min:s[0],max:s[1],resolution:s.length>=3&&s[2]!=="0"?s[2]:void 0}}).filter(ee):i}function kq(t){if(!t)return;const e=t.includes("/"),i=t.split(",");return e?i.map(r=>{const s=r.split("/");return s.length<2?null:{min:new Date(s[0]),max:new Date(s[1]),resolution:s.length>=3&&s[2]!=="0"?oRe(s[2]):void 0}}).filter(ee):i.map(r=>new Date(r))}function oRe(t){const e=/(?:p(\d+y|\d+(?:.|,)\d+y)?(\d+m|\d+(?:.|,)\d+m)?(\d+d|\d+(?:.|,)\d+d)?)?(?:t(\d+h|\d+(?:.|,)\d+h)?(\d+m|\d+(?:.|,)\d+m)?(\d+s|\d+(?:.|,)\d+s)?)?/i,i=t.match(e);return i?{years:D1(i[1]),months:D1(i[2]),days:D1(i[3]),hours:D1(i[4]),minutes:D1(i[5]),seconds:D1(i[6])}:null}function D1(t){if(!t)return 0;const e=/(?:\d+(?:.|,)\d+|\d+)/,i=t.match(e);if(!i)return 0;const r=i[0].replace(",",".");return Number(r)}function j1(t){return t.toISOString().replace(/\.[0-9]{3}/,"")}const Lq=new Set([102100,3857,102113,900913]),aRe=new Set([3395,54004]);function lRe(t,e){let i=t.wkid;return Re(e)?i:(i!=null&&e.includes(i)||!t.latestWkid||(i=t.latestWkid),i!=null&&Lq.has(i)?e.find(r=>Lq.has(r))||e.find(r=>aRe.has(r))||102100:i)}const dR=new si({bmp:"image/bmp",gif:"image/gif",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml"},{ignoreUnknown:!1});function Pq(t){return t==="text/html"}function Nq(t){return t==="text/plain"}let Ci=class extends a1(_C(t_(c1(Xw(e_(Ym(Bh))))))){constructor(...e){super(...e),this.allSublayers=new B0({getCollections:()=>[this.sublayers],getChildrenFunction:i=>i.sublayers}),this.customParameters=null,this.customLayerParameters=null,this.copyright=null,this.description=null,this.dimensions=null,this.fullExtent=null,this.fullExtents=null,this.featureInfoFormats=null,this.featureInfoUrl=null,this.fetchFeatureInfoFunction=null,this.imageFormat=null,this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.legendEnabled=!0,this.mapUrl=null,this.isReference=null,this.operationalLayerType="WMS",this.spatialReference=null,this.spatialReferences=null,this.sublayers=null,this.type="wms",this.url=null,this.version=null,this.addHandles([bn(()=>this.sublayers,"after-add",({item:i})=>{i.parent=i.layer=this},Cl),bn(()=>this.sublayers,"after-remove",({item:i})=>{i.layer=i.parent=null},Cl),st(()=>this.sublayers,(i,r)=>{if(r)for(const s of r)s.layer=s.parent=null;if(i)for(const s of i)s.parent=s.layer=this},Cl)])}normalizeCtorArgs(e,i){return typeof e=="string"?{url:e,...i}:e}load(e){const i=ee(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["WMS"]},e).catch(_a).then(()=>this._fetchService(i))),Promise.resolve(this)}readFullExtentFromItemOrMap(e,i){const r=i.extent;return r?new Xt({xmin:r[0][0],ymin:r[0][1],xmax:r[1][0],ymax:r[1][1]}):null}writeFullExtent(e,i){i.extent=[[e.xmin,e.ymin],[e.xmax,e.ymax]]}get featureInfoFormat(){return Re(this.featureInfoFormats)?null:this.featureInfoFormats.find(Pq)??this.featureInfoFormats.find(Nq)??null}set featureInfoFormat(e){ee(e)?(Pq(e)||Nq(e))&&this._override("featureInfoFormat",e):(this.revert("featureInfoFormat","service"),this._clearOverride("featureInfoFormat"))}readImageFormat(e,i){const r=i.supportedImageFormatTypes;return r&&r.includes("image/png")?"image/png":r&&r[0]}readSpatialReferenceFromItemOrDocument(e,i){return new Tt(i.spatialReferences[0])}writeSpatialReferences(e,i){const r=this.spatialReference?.wkid;e&&r?(i.spatialReferences=e.filter(s=>s!==r),i.spatialReferences.unshift(r)):i.spatialReferences=e}readSublayersFromItemOrMap(e,i,r){return Fq(i.layers,r,i.visibleLayers)}readSublayers(e,i,r){return Fq(i.layers,r)}writeSublayers(e,i,r,s){i.layers=[];const n=new Map,o=e.flatten(({sublayers:a})=>a??[]);for(const a of o)if(typeof a.parent?.id=="number"){const l=n.get(a.parent.id);l!=null?l.push(a.id):n.set(a.parent.id,[a.id])}for(const a of o){const l={sublayer:a,...s},u=a.write({parentLayerId:typeof a.parent?.id=="number"?a.parent.id:-1},l);if(n.has(a.id)&&(u.sublayerIds=n.get(a.id)),!a.sublayers&&a.name){const c=a.write({},l);delete c.id,i.layers.push(c)}}i.visibleLayers=o.filter(({visible:a,sublayers:l})=>a&&!l).map(({name:a})=>a).toArray()}createExportImageParameters(e,i,r,s){const n=s?.pixelRatio??1,o=B6({extent:e,width:i})*n,a=new Ud({layer:this,scale:o}),{xmin:l,ymin:u,xmax:c,ymax:d,spatialReference:f}=e,m=lRe(f,this.spatialReferences),g=this.version==="1.3.0"&&W6(m)?`${u},${l},${d},${c}`:`${l},${u},${c},${d}`,v=a.toJSON();return{bbox:g,[this.version==="1.3.0"?"crs":"srs"]:m==null||isNaN(m)?void 0:"EPSG:"+m,...v}}async fetchImage(e,i,r,s){const n=this.mapUrl,o=this.createExportImageParameters(e,i,r,s);if(!o.layers){const d=document.createElement("canvas");return d.width=i,d.height=r,d}const a=s?.timeExtent?.start,l=s?.timeExtent?.end,u=ee(a)&&ee(l)?a.getTime()===l.getTime()?j1(a):`${j1(a)}/${j1(l)}`:void 0,c={responseType:"image",query:this._mixCustomParameters({width:i,height:r,...o,time:u,...this.refreshParameters}),signal:s?.signal};return Et(n??"",c).then(d=>d.data)}async fetchImageBitmap(e,i,r,s){const n=this.mapUrl??"",o=this.createExportImageParameters(e,i,r,s);if(!o.layers){const f=document.createElement("canvas");return f.width=i,f.height=r,f}const a=s?.timeExtent?.start,l=s?.timeExtent?.end,u=ee(a)&&ee(l)?a.getTime()===l.getTime()?j1(a):`${j1(a)}/${j1(l)}`:void 0,c={responseType:"blob",query:this._mixCustomParameters({width:i,height:r,...o,time:u,...this.refreshParameters}),signal:s?.signal},{data:d}=await Et(n,c);return sw(d,n)}fetchFeatureInfo(e,i,r,s,n){const o=B6({extent:e,width:i}),a=new Ud({layer:this,scale:o}),l=tRe(a.visibleSublayers);if(Re(this.featureInfoUrl)||Re(l))return Promise.resolve([]);if(Re(this.fetchFeatureInfoFunction)&&Re(this.featureInfoFormat))return Promise.resolve([]);const u=this.version==="1.3.0"?{I:s,J:n}:{x:s,y:n},c={query_layers:l,request:"GetFeatureInfo",info_format:this.featureInfoFormat,feature_count:25,width:i,height:r,...u},d={...this.createExportImageParameters(e,i,r),...c},f=this._mixCustomParameters(d);return ee(this.fetchFeatureInfoFunction)?this.fetchFeatureInfoFunction(f):this._defaultFetchFeatureInfoFunction(RI(this.featureInfoUrl,f))}findSublayerById(e){return this.allSublayers.find(i=>i.id===e)}findSublayerByName(e){return this.allSublayers.find(i=>i.name===e)}serviceSupportsSpatialReference(e){return ySe(this.url)||this.spatialReferences!=null&&this.spatialReferences.some(i=>{const r=i===900913?Tt.WebMercator:new Tt({wkid:i});return bs(r,e)})}_defaultFetchFeatureInfoFunction(e){const i=document.createElement("iframe");i.src=Zge(e),i.style.border="none",i.style.margin="0",i.style.width="100%",i.setAttribute("sandbox","");const r=new Hm({title:this.title,content:i}),s=new kn({sourceLayer:this,popupTemplate:r});return Promise.resolve([s])}async _fetchService(e){if(!this.resourceInfo){const{path:i,query:r}=this.parsedUrl??{};r?.service&&(r.SERVICE=r.service,delete r.service),r?.request&&(r.REQUEST=r.request,delete r.request);const{data:s}=await Et(i??"",{query:{SERVICE:"WMS",REQUEST:"GetCapabilities",...r,...this.customParameters},responseType:"xml",signal:e});this.resourceInfo=eRe(s)}if(this.parsedUrl){const i=new $h(this.parsedUrl.path),{httpsDomains:r}=Li.request;i.scheme!=="https"||i.port&&i.port!=="443"||!i.host||r.includes(i.host)||r.push(i.host)}this.read(this.resourceInfo,{origin:"service"})}_mixCustomParameters(e){if(!this.customLayerParameters&&!this.customParameters)return e;const i={...this.customParameters,...this.customLayerParameters};for(const r in i)e[r.toLowerCase()]=i[r];return e}};function uRe(t,e){return t.some(i=>{for(const r in i)if(CQ(i,r,null,e))return!0;return!1})}function Fq(t,e,i){t=t??[];const r=new Map;t.every(n=>n.id==null)&&(t=Le(t)).forEach((n,o)=>n.id=o);for(const n of t){const o=new J6;o.read(n,e),i&&!i.includes(o.name)&&(o.visible=!1),r.set(o.id,o)}const s=[];for(const n of t){const o=n.id!=null?r.get(n.id):null;if(o)if(n.parentLayerId!=null&&n.parentLayerId>=0){const a=r.get(n.parentLayerId);if(!a)continue;a.sublayers||(a.sublayers=new Nt),a.sublayers.push(o)}else s.push(o)}return s}h([p({readOnly:!0})],Ci.prototype,"allSublayers",void 0),h([p({json:{type:Object,write:!0}})],Ci.prototype,"customParameters",void 0),h([p({json:{type:Object,write:!0}})],Ci.prototype,"customLayerParameters",void 0),h([p({type:String,json:{write:!0}})],Ci.prototype,"copyright",void 0),h([p()],Ci.prototype,"description",void 0),h([p({readOnly:!0})],Ci.prototype,"dimensions",void 0),h([p({json:{type:[[Number]],read:{source:"extent"},write:{target:"extent"},origins:{"web-document":{write:{ignoreOrigin:!0}},"portal-item":{write:{ignoreOrigin:!0}}}}})],Ci.prototype,"fullExtent",void 0),h([Ye(["web-document","portal-item"],"fullExtent",["extent"])],Ci.prototype,"readFullExtentFromItemOrMap",null),h([it(["web-document","portal-item"],"fullExtent",{extent:{type:[[Number]]}})],Ci.prototype,"writeFullExtent",null),h([p()],Ci.prototype,"fullExtents",void 0),h([p({type:String,json:{write:{ignoreOrigin:!0}}})],Ci.prototype,"featureInfoFormat",null),h([p({type:[String],readOnly:!0})],Ci.prototype,"featureInfoFormats",void 0),h([p({type:String,json:{write:{ignoreOrigin:!0}}})],Ci.prototype,"featureInfoUrl",void 0),h([p()],Ci.prototype,"fetchFeatureInfoFunction",void 0),h([p({type:String,json:{origins:{"web-document":{default:"image/png",type:dR.jsonValues,read:{reader:dR.read,source:"format"},write:{writer:dR.write,target:"format"}}}}})],Ci.prototype,"imageFormat",void 0),h([Ye("imageFormat",["supportedImageFormatTypes"])],Ci.prototype,"readImageFormat",null),h([p({type:Number,json:{read:{source:"maxHeight"},write:{target:"maxHeight"}}})],Ci.prototype,"imageMaxHeight",void 0),h([p({type:Number,json:{read:{source:"maxWidth"},write:{target:"maxWidth"}}})],Ci.prototype,"imageMaxWidth",void 0),h([p()],Ci.prototype,"imageTransparency",void 0),h([p(vD)],Ci.prototype,"legendEnabled",void 0),h([p({type:["show","hide","hide-children"]})],Ci.prototype,"listMode",void 0),h([p({type:String,json:{write:{ignoreOrigin:!0}}})],Ci.prototype,"mapUrl",void 0),h([p({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],Ci.prototype,"isReference",void 0),h([p({type:["WMS"]})],Ci.prototype,"operationalLayerType",void 0),h([p()],Ci.prototype,"resourceInfo",void 0),h([p({type:Tt,json:{origins:{service:{read:{source:"extent.spatialReference"}}},write:!1}})],Ci.prototype,"spatialReference",void 0),h([Ye(["web-document","portal-item"],"spatialReference",["spatialReferences"])],Ci.prototype,"readSpatialReferenceFromItemOrDocument",null),h([p({type:[Si],json:{read:!1,origins:{service:{read:!0},"web-document":{read:!1,write:{ignoreOrigin:!0}},"portal-item":{read:!1,write:{ignoreOrigin:!0}}}}})],Ci.prototype,"spatialReferences",void 0),h([it(["web-document","portal-item"],"spatialReferences")],Ci.prototype,"writeSpatialReferences",null),h([p({type:Nt.ofType(J6),json:{write:{target:"layers",overridePolicy(t,e,i){if(uRe(this.allSublayers,i))return{ignoreOrigin:!0}}}}})],Ci.prototype,"sublayers",void 0),h([Ye(["web-document","portal-item"],"sublayers",["layers","visibleLayers"])],Ci.prototype,"readSublayersFromItemOrMap",null),h([Ye("service","sublayers",["layers"])],Ci.prototype,"readSublayers",null),h([it("sublayers",{layers:{type:[J6]},visibleLayers:{type:[String]}})],Ci.prototype,"writeSublayers",null),h([p({json:{read:!1},readOnly:!0,value:"wms"})],Ci.prototype,"type",void 0),h([p(G3)],Ci.prototype,"url",void 0),h([p({type:String,json:{write:{ignoreOrigin:!0}}})],Ci.prototype,"version",void 0),Ci=h([ce("esri.layers.WMSLayer")],Ci);const doe=Ci,Gdt=Object.freeze(Object.defineProperty({__proto__:null,default:doe},Symbol.toStringTag,{value:"Module"}));var Z6;let jM=Z6=class extends Je{constructor(t){super(t),this.type="none"}clone(){return new Z6({type:this.type})}};h([Dt({none:"none",stayAbove:"stay-above"})],jM.prototype,"type",void 0),jM=Z6=h([ce("esri.ground.NavigationConstraint")],jM);let Mr=class extends Pt{constructor(){super(...arguments),this.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1,this.DECONFLICTOR_SHOW_VISIBLE=!1,this.DECONFLICTOR_SHOW_INVISIBLE=!1,this.DECONFLICTOR_SHOW_GRID=!1,this.LABELS_SHOW_BORDER=!1,this.TEXT_SHOW_BASELINE=!1,this.TEXT_SHOW_BORDER=!1,this.OVERLAY_DRAW_DEBUG_TEXTURE=!1,this.OVERLAY_SHOW_CENTER=!1,this.SHOW_POI=!1,this.TESTS_DISABLE_OPTIMIZATIONS=!1,this.TESTS_DISABLE_FAST_UPDATES=!1,this.DRAW_MESH_GEOMETRY_NORMALS=!1,this.FEATURE_TILE_FETCH_SHOW_TILES=!1,this.FEATURE_TILE_TREE_SHOW_TILES=!1,this.TERRAIN_TILE_TREE_SHOW_TILES=!1,this.I3S_TREE_SHOW_TILES=!1,this.I3S_SHOW_MODIFICATIONS=!1,this.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1,this.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1,this.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES=!1,this.LINE_WIREFRAMES=!1,this.TERRAIN_USE_LEGACY_SHADING=!1}};h([p()],Mr.prototype,"SCENEVIEW_HITTEST_RETURN_INTERSECTOR",void 0),h([p()],Mr.prototype,"DECONFLICTOR_SHOW_VISIBLE",void 0),h([p()],Mr.prototype,"DECONFLICTOR_SHOW_INVISIBLE",void 0),h([p()],Mr.prototype,"DECONFLICTOR_SHOW_GRID",void 0),h([p()],Mr.prototype,"LABELS_SHOW_BORDER",void 0),h([p()],Mr.prototype,"TEXT_SHOW_BASELINE",void 0),h([p()],Mr.prototype,"TEXT_SHOW_BORDER",void 0),h([p()],Mr.prototype,"OVERLAY_DRAW_DEBUG_TEXTURE",void 0),h([p()],Mr.prototype,"OVERLAY_SHOW_CENTER",void 0),h([p()],Mr.prototype,"SHOW_POI",void 0),h([p()],Mr.prototype,"TESTS_DISABLE_OPTIMIZATIONS",void 0),h([p()],Mr.prototype,"TESTS_DISABLE_FAST_UPDATES",void 0),h([p()],Mr.prototype,"DRAW_MESH_GEOMETRY_NORMALS",void 0),h([p()],Mr.prototype,"FEATURE_TILE_FETCH_SHOW_TILES",void 0),h([p()],Mr.prototype,"FEATURE_TILE_TREE_SHOW_TILES",void 0),h([p()],Mr.prototype,"TERRAIN_TILE_TREE_SHOW_TILES",void 0),h([p()],Mr.prototype,"I3S_TREE_SHOW_TILES",void 0),h([p()],Mr.prototype,"I3S_SHOW_MODIFICATIONS",void 0),h([p()],Mr.prototype,"LOD_INSTANCE_RENDERER_DISABLE_UPDATES",void 0),h([p()],Mr.prototype,"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL",void 0),h([p()],Mr.prototype,"EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES",void 0),h([p()],Mr.prototype,"LINE_WIREFRAMES",void 0),h([p()],Mr.prototype,"TERRAIN_USE_LEGACY_SHADING",void 0),Mr=h([ce("esri.views.3d.support.DebugFlags")],Mr);const cRe=new Mr;var Y6;let th=Y6=class extends A3(Ll){constructor(t){super(t),this.opacity=1,this.shading=!cRe.TERRAIN_USE_LEGACY_SHADING,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Nt;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&tt.getLogger(this.declaredClass).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.layers.on("after-add",r=>e(r.item)),this.layers.on("after-remove",r=>i(r.item))}initialize(){this.when().catch(t=>{tt.getLogger(this.declaredClass).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.layers.removeAll();for(const e of t)e.destroy();this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set layers(t){this._set("layers",C0(t,this._get("layers")))}writeLayers(t,e,i,r){const s=[];t&&(r={...r,layerContainerType:"ground"},t.forEach(n=>{if("write"in n){const o={};s2e(n)().write(o,r)&&s.push(o)}else r&&r.messages&&r.messages.push(new Ce("layer:unsupported",`Layers (${n.title}, ${n.id}) of type '${n.declaredClass}' cannot be persisted in the ground`,{layer:n}))})),e.layers=s}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return z4(this,t=>{t(this.layers)})}async queryElevation(t,e){await this.load({signal:e?.signal});const{ElevationQuery:i}=await De(()=>import("./ElevationQuery-5e4a50eb.js"),["./ElevationQuery-5e4a50eb.js","./preload-helper-388ac9d5.js"],import.meta.url);pr(e);const r=new i,s=this.layers.filter(Dq).toArray();return r.queryAll(s,t,e)}async createElevationSampler(t,e){await this.load({signal:e?.signal});const{ElevationQuery:i}=await De(()=>import("./ElevationQuery-5e4a50eb.js"),["./ElevationQuery-5e4a50eb.js","./preload-helper-388ac9d5.js"],import.meta.url);pr(e);const r=new i,s=this.layers.filter(Dq).toArray();return r.createSamplerAll(s,t,e)}clone(){const t={opacity:this.opacity,surfaceColor:Le(this.surfaceColor),navigationConstraint:Le(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new Y6({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}_loadLayersFromJSON(t,e,i){const r=e&&e.origin||"web-scene",s=e&&e.portal||null,n=e&&e.url||null;return De(()=>import("./layersCreator-74554c12.js"),["./layersCreator-74554c12.js","./lazyLayerLoader-0f3d1a0f.js","./preload-helper-388ac9d5.js","./portalLayers-33cf0e40.js","./layersLoader-456658d2.js","./fetchService-d05ae315.js","./jsonContext-48257512.js"],import.meta.url).then(({populateOperationalLayers:o})=>{pr(i);const a=[];if(t.layers&&Array.isArray(t.layers)){const l={context:{origin:r,url:n,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,t.layers,l))}return Fa(a)}).then(()=>{})}};function hRe(t){return t&&"createElevationSampler"in t}function Dq(t){return t.type==="elevation"||hRe(t)}h([p({json:{read:!1}})],th.prototype,"layers",null),h([it("layers")],th.prototype,"writeLayers",null),h([p({readOnly:!0})],th.prototype,"resourceInfo",void 0),h([p({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Si,read:{reader:CS,source:"transparency"},write:{writer:(t,e)=>{e.transparency=Q4(t)},target:"transparency"}}})],th.prototype,"opacity",void 0),h([p({type:Boolean,nonNullable:!0,json:{read:!1}})],th.prototype,"shading",void 0),h([p({type:It,json:{type:[Si],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],th.prototype,"surfaceColor",void 0),h([p({type:jM,json:{write:!0}})],th.prototype,"navigationConstraint",void 0),th=Y6=h([ce("esri.Ground")],th);const c5=th;function dRe(t){return!(!t?.loaded||!vX(t)?.operations?.supportsEditing||"editingEnabled"in t&&!q1e(t))}const jq=tt.getLogger("esri.support.basemapUtils");function pRe(){return{}}function fRe(t){for(const e in t){const i=t[e];i?.destroyed===!1&&i.destroy(),delete t[e]}}function mRe(t,e){let i;if(typeof t=="string"){if(!(t in rL)){const r=Object.entries(rL).filter(([s,n])=>Li.apiKey&&!n.classic||!Li.apiKey&&n.classic&&!n.deprecated).map(([s])=>`"${s}"`).join(", ");return jq.warn(`Unable to find basemap definition for: ${t}. Try one of these: ${r}`),null}e&&(i=e[t]),i||(i=Em.fromId(t),e&&(e[t]=i))}else i=ns(Em,t);return i?.destroyed&&(jq.warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function yRe(t,e){return t===e?!0:_Re(Uq(t),Uq(e),{mustMatchReferences:!0})==="equal"}function gRe(t,e){if(Re(e)||Re(t))return{spatialReference:null,updating:!1};if(e.loadStatus==="not-loaded")return e.load(),{spatialReference:null,updating:!0};if(e.spatialReference)return{spatialReference:e.spatialReference,updating:!1};if(e.baseLayers.length===0)return{spatialReference:null,updating:!1};const i=e.baseLayers.getItemAt(0);switch(i.loadStatus){case"not-loaded":i.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const r=(("supportedSpatialReferences"in i?i.supportedSpatialReferences:null)||["tileInfo"in i?i.tileInfo?.spatialReference:i.spatialReference]).filter(Boolean),s=t.spatialReference;return s?{spatialReference:r.find(n=>s.equals(n))??r[0]??null,updating:!1}:{spatialReference:r[0],updating:!1}}function Uq(t){return t?!t.loaded&&t.resourceInfo?bRe(t.resourceInfo.data):{baseLayers:Vq(t.baseLayers),referenceLayers:Vq(t.referenceLayers)}:null}function Vq(t){return(Nt.isCollection(t)?t.toArray():t).map(vRe)}function vRe(t){return{type:t.type,url:poe("urlTemplate"in t&&t.urlTemplate||t.url||"styleUrl"in t&&t.styleUrl||""),minScale:"minScale"in t&&t.minScale!=null?t.minScale:0,maxScale:"maxScale"in t&&t.maxScale!=null?t.maxScale:0,opacity:t.opacity!=null?t.opacity:1,visible:t.visible==null||!!t.visible,sublayers:t.type!=="map-image"&&t.type!=="wms"||!ee(t.sublayers)?void 0:t.sublayers?.map(e=>({id:e.id,visible:e.visible})),activeLayerId:t.type==="wmts"?t.activeLayer?.id:void 0}}function bRe(t){return t?{baseLayers:Bq((t.baseMapLayers??[]).filter(e=>!e.isReference)),referenceLayers:Bq((t.baseMapLayers??[]).filter(e=>e.isReference))}:null}function Bq(t){return t.map(e=>wRe(e))}function wRe(t){let e;switch(t.layerType){case"VectorTileLayer":e="vector-tile";break;case"ArcGISTiledMapServiceLayer":e="tile";break;default:e="unknown"}return{type:e,url:poe(t.templateUrl||t.urlTemplate||t.styleUrl||t.url),minScale:t.minScale!=null?t.minScale:0,maxScale:t.maxScale!=null?t.maxScale:0,opacity:t.opacity!=null?t.opacity:1,visible:t.visibility==null||!!t.visibility,sublayers:void 0,activeLayerId:void 0}}function _Re(t,e,i){return t!=null!=(e!=null)?"not-equal":!t||!e?"equal":zq(t.baseLayers,e.baseLayers)?zq(t.referenceLayers,e.referenceLayers)?"equal":i.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal"}function zq(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!xRe(t[i],e[i]))return!1;return!0}function xRe(t,e){if(t.type!==e.type||t.type==="scene"||t.url!==e.url||t.minScale!==e.minScale||t.maxScale!==e.maxScale||t.visible!==e.visible||t.opacity!==e.opacity)return!1;if(ee(t.activeLayerId)||ee(e.activeLayerId))return t.activeLayerId===e.activeLayerId;if(ee(t.sublayers)||ee(e.sublayers)){if(Re(t.sublayers)||Re(e.sublayers)||t.sublayers.length!==e.sublayers.length)return!1;for(let i=0;i<t.sublayers.length;i++){const r=t.sublayers.at(i),s=e.sublayers.at(i);if(r?.id!==s?.id||r?.visible!==s?.visible)return!1}}return!0}function poe(t){return t?El(t).replace(/^\s*https?:/i,"").toLowerCase():""}function SRe(t){return new B0({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const i=[];return"tables"in e&&i.push(e.tables),"layers"in e&&i.push(e.layers),i},itemFilterFunction:e=>{const i=e.parent;return!!i&&"tables"in i&&i.tables.includes(e)}})}const Gq={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function ERe(t){let e=null;if(typeof t=="string")if(t in Gq){const i=Gq[t];e=new c5({resourceInfo:{data:{layers:[i]}}})}else tt.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=ns(c5,t);return e}function K6(t,e,i){let r,s;if(t)for(let n=0,o=t.length;n<o;n++){if(r=t.getItemAt(n),r[e]===i)return r;if(r?.type==="group"&&(s=K6(r.layers,e,i),s))return s}}const TRe=t=>{let e=class extends t{constructor(...i){super(...i),this.layers=new Nt;const r=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},s=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||tt.getLogger(this.declaredClass).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},n=o=>{o.parent=null,this.layerRemoved(o)};this.layers.on("before-add",o=>r(o.item)),this.layers.on("after-add",o=>s(o.item)),this.layers.on("after-remove",o=>n(o.item))}destroy(){const i=this.layers.removeAll();for(const r of i)this.layerRemoved(r),r.destroy();this.layers.destroy()}set layers(i){this._set("layers",C0(i,this._get("layers")))}add(i,r){const s=this.layers;if(r=s.getNextIndex(r),i instanceof Bh){const n=i;n.parent===this?this.reorder(n,r):s.add(n,r)}else _p(i)?i.then(n=>{this.destroyed||this.add(n,r)}):tt.getLogger(this.declaredClass).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,r){const s=this.layers;let n=s.getNextIndex(r);i.slice().forEach(o=>{o.parent!==this?(s.add(o,n),n+=1):this.reorder(o,n)})}findLayerById(i){return K6(this.layers,"id",i)}findLayerByUid(i){return K6(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,r){return this.layers.reorder(i,r)}layerAdded(i){}layerRemoved(i){}};return h([p()],e.prototype,"layers",null),e=h([ce("esri.support.LayersMixin")],e),e};function Q6(t,e,i){if(t)for(let r=0,s=t.length;r<s;r++){const n=t.getItemAt(r);if(n[e]===i)return n;if(n?.type==="group"){const o=Q6(n.tables,e,i);if(o)return o}}}const IRe=t=>{let e=class extends t{constructor(...i){super(...i),this.tables=new Nt,this.tables.on("after-add",r=>{const s=r.item;s.parent&&s.parent!==this&&"tables"in s.parent&&s.parent.tables.remove(s),s.parent=this,s.type!=="feature"&&tt.getLogger(this.declaredClass).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",r=>{r.item.parent=null})}destroy(){const i=this.tables.removeAll();for(const r of i)r.destroy();this.tables.destroy()}set tables(i){this._set("tables",C0(i,this._get("tables")))}findTableById(i){return Q6(this.tables,"id",i)}findTableByUid(i){return Q6(this.tables,"uid",i)}};return h([p()],e.prototype,"tables",null),e=h([ce("esri.support.TablesMixin")],e),e};let ih=class extends IRe(TRe(xp.EventedMixin(Pt))){constructor(e){super(e),this.allLayers=new B0({getCollections:()=>[this.basemap?.baseLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:i=>"layers"in i?i.layers:null}),this.allTables=SRe(this),this.basemap=null,this.editableLayers=new B0({getCollections:()=>[this.allLayers],itemFilterFunction:dRe}),this.ground=new c5,this._basemapCache=pRe()}destroy(){this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.ground?.destroy(),this.basemap?.destroy(),fRe(this._basemapCache),this._basemapCache=null}castBasemap(e){return mRe(e,this._basemapCache)}castGround(e){const i=ERe(e);return Re(i)?this._get("ground"):i}findLayerById(e){return this.allLayers.find(i=>i.id===e)}findTableById(e){return this.allTables.find(i=>i.id===e)}};h([p({readOnly:!0,dependsOn:[]})],ih.prototype,"allLayers",void 0),h([p({readOnly:!0})],ih.prototype,"allTables",void 0),h([p({type:Em})],ih.prototype,"basemap",void 0),h([mi("basemap")],ih.prototype,"castBasemap",null),h([p({readOnly:!0})],ih.prototype,"editableLayers",void 0),h([p({type:c5,nonNullable:!0})],ih.prototype,"ground",void 0),h([mi("ground")],ih.prototype,"castGround",null),ih=h([ce("esri.Map")],ih);const foe=ih;let f7=class{constructor(e,i){this.min=e,this.max=i,this.range=i-e}ndiff(e,i=0){return Math.ceil((e-i)/this.range)*this.range+i}_normalize(e,i,r,s=0,n=!1){return(r-=s)<e?r+=this.ndiff(e-r):r>i&&(r-=this.ndiff(r-i)),n&&r===i&&(r=e),r+s}normalize(e,i=0,r=!1){return this._normalize(this.min,this.max,e,i,r)}clamp(e,i=0){return Da(e-i,this.min,this.max)+i}monotonic(e,i,r){return e<i?i:i+this.ndiff(e-i,r)}minimalMonotonic(e,i,r){return this._normalize(e,e+this.range,i,r)}center(e,i,r){return i=this.monotonic(e,i,r),this.normalize((e+i)/2,r)}diff(e,i,r){return this.monotonic(e,i,r)-e}shortestSignedDiff(e,i){e=this.normalize(e);const r=(i=this.normalize(i))-e,s=i<e?this.minimalMonotonic(e,i)-e:i-this.minimalMonotonic(i,e);return Math.abs(r)<Math.abs(s)?r:s}contains(e,i,r){return i=this.minimalMonotonic(e,i),(r=this.minimalMonotonic(e,r))>e&&r<i}};function m7(t){for(const e in t){const i=t[e];i instanceof Function&&(t[e]=i.bind(t))}return t}m7(new f7(0,2*Math.PI));m7(new f7(-Math.PI,Math.PI));const MRe=m7(new f7(0,360));let $d=class extends Er(Je){constructor(...e){super(...e),this.position=new Ct([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,i,r,s){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const n={position:e};return i!=null&&(n.heading=i),r!=null&&(n.tilt=r),s!=null&&(n.fov=s),n}return e}writePosition(e,i,r,s){const n=e.clone();n.x=vl(e.x||0),n.y=vl(e.y||0),n.z=e.hasZ?vl(e.z||0):e.z,i[r]=n.write({},s)}readPosition(e,i){const r=new Ct;return r.read(e,i),r.x=vl(r.x||0),r.y=vl(r.y||0),r.z=r.hasZ?vl(r.z||0):r.z,r}equals(e){return!Re(e)&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};h([p({type:Ct,json:{write:{isRequired:!0}}})],$d.prototype,"position",void 0),h([it("position")],$d.prototype,"writePosition",null),h([Ye("position")],$d.prototype,"readPosition",null),h([p({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),mi(t=>MRe.normalize(vl(t)))],$d.prototype,"heading",void 0),h([p({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),mi(t=>Da(vl(t),-180,180))],$d.prototype,"tilt",void 0),h([p({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],$d.prototype,"fov",void 0),$d=h([ce("esri.Camera")],$d);const ARe=$d;var X6;let Tf=X6=class extends Je{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new X6({rotation:this.rotation,scale:this.scale,targetGeometry:ee(this.targetGeometry)?this.targetGeometry.clone():null,camera:ee(this.camera)?this.camera.clone():null})}};function pR(){return{enabled:!this.camera}}h([p({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:pR}}}}})],Tf.prototype,"rotation",void 0),h([mi("rotation")],Tf.prototype,"castRotation",null),h([p({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:pR}}}}})],Tf.prototype,"scale",void 0),h([p({types:Ac,json:{read:Pl,write:!0,origins:{"web-scene":{read:Pl,write:{overridePolicy:pR}}}}})],Tf.prototype,"targetGeometry",void 0),h([p({type:ARe,json:{write:!0}})],Tf.prototype,"camera",void 0),Tf=X6=h([ce("esri.Viewpoint")],Tf);const Oh=Tf,UM={widthBreakpoint:{getValue(t){const e=t.viewSize[0],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,i=e[0],r=e[1],s=this.values;return r>=i?s.portrait:s.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},fR={xsmall:544,small:768,medium:992,large:1200};function CRe(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function mR(t,e){return e?UM[t].valueToClassName[e].split(" "):[]}const $Re=t=>{let e=class extends t{constructor(...i){super(...i),this._breakpointsHandles=new Ao,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=fR}initialize(){this._breakpointsHandles.add(st(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),Fi))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=Jr(this._breakpointsHandles))}set breakpoints(i){if(i===this._get("breakpoints"))return;const r=CRe(i);if(!r){const s=JSON.stringify(fR,null,2);console.warn("provided breakpoints are not valid, using defaults:"+s)}i=r?i:fR,this._set("breakpoints",{...i})}_updateClassNames(){if(!this.container)return;const i=Zo.acquire(),r=Zo.acquire();let s,n=!1;for(s in UM){const o=this[s],a=UM[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(n=!0,this[s]=a,mR(s,o).forEach(l=>r.push(l)),mR(s,a).forEach(l=>i.push(l)))}n&&(this._applyClassNameChanges(i,r),Zo.release(i),Zo.release(r))}_applyClassNameChanges(i,r){const s=this.container;s&&(r.forEach(n=>s.classList.remove(n)),i.forEach(n=>s.classList.add(n)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let r;for(r in UM)mR(r,this[r]).forEach(s=>i.classList.remove(s))}};return h([p()],e.prototype,"breakpoints",null),h([p()],e.prototype,"orientation",void 0),h([p()],e.prototype,"widthBreakpoint",void 0),h([p()],e.prototype,"heightBreakpoint",void 0),e=h([ce("esri.views.BreakpointsOwner")],e),e};function y7(t){return typeof t=="string"?document.getElementById(t):t??null}function moe(t){for(;t.hasChildNodes();)t.removeChild(t.firstChild)}function qq(t,e){const i=e.parentNode;i&&i.insertBefore(t,e)}function Hq(t,e){for(;;){const i=t.firstChild;if(!i)break;e.appendChild(i)}}/*!
 * @esri/arcgis-html-sanitizer - v3.0.1 - Tue Nov 15 2022 09:46:54 GMT-0800 (Pacific Standard Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 */var ORe=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},Rg={exports:{}},as={},BS={exports:{}},d1={};function yoe(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function RRe(t,e,i){}function kRe(t,e,i){}var LRe=/javascript\s*\:/img;function PRe(t,e){return LRe.test(e)?"":e}d1.whiteList=yoe();d1.getDefaultWhiteList=yoe;d1.onAttr=RRe;d1.onIgnoreAttr=kRe;d1.safeAttrValue=PRe;var NRe={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,s;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,s=t.length;r<s;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},z_=NRe;function FRe(t,e){t=z_.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,r=!1,s=0,n=0,o="";function a(){if(!r){var c=z_.trim(t.slice(s,n)),d=c.indexOf(":");if(d!==-1){var f=z_.trim(c.slice(0,d)),m=z_.trim(c.slice(d+1));if(f){var g=e(s,o.length,f,m,c);g&&(o+=g+"; ")}}}s=n+1}for(;n<i;n++){var l=t[n];if(l==="/"&&t[n+1]==="*"){var u=t.indexOf("*/",n+2);if(u===-1)break;n=u+1,s=n+1,r=!1}else l==="("?r=!0:l===")"?r=!1:l===";"?r||a():l===`
`&&a()}return z_.trim(o)}var DRe=FRe,LT=d1,jRe=DRe;function Wq(t){return t==null}function URe(t){var e={};for(var i in t)e[i]=t[i];return e}function goe(t){t=URe(t||{}),t.whiteList=t.whiteList||LT.whiteList,t.onAttr=t.onAttr||LT.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||LT.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||LT.safeAttrValue,this.options=t}goe.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,s=i.onAttr,n=i.onIgnoreAttr,o=i.safeAttrValue,a=jRe(t,function(l,u,c,d,f){var m=r[c],g=!1;if(m===!0?g=m:typeof m=="function"?g=m(d):m instanceof RegExp&&(g=m.test(d)),g!==!0&&(g=!1),d=o(c,d),!!d){var v={position:u,sourcePosition:l,source:f,isWhite:g};if(g){var b=s(c,d,v);return Wq(b)?c+":"+d:b}else{var b=n(c,d,v);if(!Wq(b))return b}}});return a};var VRe=goe;(function(t,e){var i=d1,r=VRe;function s(o,a){var l=new r(a);return l.process(o)}e=t.exports=s,e.FilterCSS=r;for(var n in i)e[n]=i[n]})(BS,BS.exports);var g7={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,s;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,s=t.length;r<s;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,i=e.exec(t);return i?i.index:-1}},BRe=BS.exports.FilterCSS,zRe=BS.exports.getDefaultWhiteList,h5=g7;function voe(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var boe=new BRe;function GRe(t,e,i){}function qRe(t,e,i){}function HRe(t,e,i){}function WRe(t,e,i){}function woe(t){return t.replace(ZRe,"&lt;").replace(YRe,"&gt;")}function JRe(t,e,i,r){if(i=Ioe(i),e==="href"||e==="src"){if(i=h5.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(e==="background"){if(PT.lastIndex=0,PT.test(i))return""}else if(e==="style"){if(Jq.lastIndex=0,Jq.test(i)||(Zq.lastIndex=0,Zq.test(i)&&(PT.lastIndex=0,PT.test(i))))return"";r!==!1&&(r=r||boe,i=r.process(i))}return i=Moe(i),i}var ZRe=/</g,YRe=/>/g,KRe=/"/g,QRe=/&quot;/g,XRe=/&#([a-zA-Z0-9]*);?/gim,eke=/&colon;?/gim,tke=/&newline;?/gim,PT=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Jq=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Zq=/u\s*r\s*l\s*\(.*/gi;function _oe(t){return t.replace(KRe,"&quot;")}function xoe(t){return t.replace(QRe,'"')}function Soe(t){return t.replace(XRe,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function Eoe(t){return t.replace(eke,":").replace(tke," ")}function Toe(t){for(var e="",i=0,r=t.length;i<r;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return h5.trim(e)}function Ioe(t){return t=xoe(t),t=Soe(t),t=Eoe(t),t=Toe(t),t}function Moe(t){return t=_oe(t),t=woe(t),t}function ike(){return""}function rke(t,e){typeof e!="function"&&(e=function(){});var i=!Array.isArray(t);function r(o){return i?!0:h5.indexOf(t,o)!==-1}var s=[],n=!1;return{onIgnoreTag:function(o,a,l){if(r(o))if(l.isClosing){var u="[/removed]",c=l.position+u.length;return s.push([n!==!1?n:l.position,c]),n=!1,u}else return n||(n=l.position),"[removed]";else return e(o,a,l)},remove:function(o){var a="",l=0;return h5.forEach(s,function(u){a+=o.slice(l,u[0]),l=u[1]}),a+=o.slice(l),a}}}function ske(t){for(var e="",i=0;i<t.length;){var r=t.indexOf("<!--",i);if(r===-1){e+=t.slice(i);break}e+=t.slice(i,r);var s=t.indexOf("-->",r);if(s===-1)break;i=s+3}return e}function nke(t){var e=t.split("");return e=e.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),e.join("")}as.whiteList=voe();as.getDefaultWhiteList=voe;as.onTag=GRe;as.onIgnoreTag=qRe;as.onTagAttr=HRe;as.onIgnoreTagAttr=WRe;as.safeAttrValue=JRe;as.escapeHtml=woe;as.escapeQuote=_oe;as.unescapeQuote=xoe;as.escapeHtmlEntities=Soe;as.escapeDangerHtml5Entities=Eoe;as.clearNonPrintableCharacter=Toe;as.friendlyAttrValue=Ioe;as.escapeAttrValue=Moe;as.onIgnoreTagStripAll=ike;as.StripTagBody=rke;as.stripCommentTag=ske;as.stripBlankChar=nke;as.cssFilter=boe;as.getDefaultCSSWhiteList=zRe;var CC={},Bf=g7;function oke(t){var e=Bf.spaceIndex(t),i;return e===-1?i=t.slice(1,-1):i=t.slice(1,e+1),i=Bf.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function ake(t){return t.slice(0,2)==="</"}function lke(t,e,i){var r="",s=0,n=!1,o=!1,a=0,l=t.length,u="",c="";e:for(a=0;a<l;a++){var d=t.charAt(a);if(n===!1){if(d==="<"){n=a;continue}}else if(o===!1){if(d==="<"){r+=i(t.slice(s,a)),n=a,s=a;continue}if(d===">"){r+=i(t.slice(s,n)),c=t.slice(n,a+1),u=oke(c),r+=e(n,r.length,u,c,ake(c)),s=a+1,n=!1;continue}if(d==='"'||d==="'")for(var f=1,m=t.charAt(a-f);m.trim()===""||m==="=";){if(m==="="){o=d;continue e}m=t.charAt(a-++f)}}else if(d===o){o=!1;continue}}return s<t.length&&(r+=i(t.substr(s))),r}var uke=/[^a-zA-Z0-9\\_:.-]/gim;function cke(t,e){var i=0,r=0,s=[],n=!1,o=t.length;function a(f,m){if(f=Bf.trim(f),f=f.replace(uke,"").toLowerCase(),!(f.length<1)){var g=e(f,m||"");g&&s.push(g)}}for(var l=0;l<o;l++){var u=t.charAt(l),c,d;if(n===!1&&u==="="){n=t.slice(i,l),i=l+1,r=t.charAt(i)==='"'||t.charAt(i)==="'"?i:dke(t,l+1);continue}if(n!==!1&&l===r){if(d=t.indexOf(u,l+1),d===-1)break;c=Bf.trim(t.slice(r+1,d)),a(n,c),n=!1,l=d,i=l+1;continue}if(/\s|\n|\t/.test(u))if(t=t.replace(/\s|\n|\t/g," "),n===!1)if(d=hke(t,l),d===-1){c=Bf.trim(t.slice(i,l)),a(c),n=!1,i=l+1;continue}else{l=d-1;continue}else if(d=pke(t,l-1),d===-1){c=Bf.trim(t.slice(i,l)),c=Yq(c),a(n,c),n=!1,i=l+1;continue}else continue}return i<t.length&&(n===!1?a(t.slice(i)):a(n,Yq(Bf.trim(t.slice(i))))),Bf.trim(s.join(" "))}function hke(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="="?e:-1}}function dke(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="'"||i==='"'?e:-1}}function pke(t,e){for(;e>0;e--){var i=t[e];if(i!==" ")return i==="="?e:-1}}function fke(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function Yq(t){return fke(t)?t.substr(1,t.length-2):t}CC.parseTag=lke;CC.parseAttr=cke;var mke=BS.exports.FilterCSS,sc=as,Aoe=CC,yke=Aoe.parseTag,gke=Aoe.parseAttr,VM=g7;function NT(t){return t==null}function vke(t){var e=VM.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=VM.trim(t.slice(e+1,-1));var i=t[t.length-1]==="/";return i&&(t=VM.trim(t.slice(0,-1))),{html:t,closing:i}}function bke(t){var e={};for(var i in t)e[i]=t[i];return e}function wke(t){var e={};for(var i in t)Array.isArray(t[i])?e[i.toLowerCase()]=t[i].map(function(r){return r.toLowerCase()}):e[i.toLowerCase()]=t[i];return e}function Coe(t){t=bke(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=sc.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=wke(t.whiteList||t.allowList):t.whiteList=sc.whiteList,t.onTag=t.onTag||sc.onTag,t.onTagAttr=t.onTagAttr||sc.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||sc.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||sc.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||sc.safeAttrValue,t.escapeHtml=t.escapeHtml||sc.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new mke(t.css))}Coe.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,s=i.onTag,n=i.onIgnoreTag,o=i.onTagAttr,a=i.onIgnoreTagAttr,l=i.safeAttrValue,u=i.escapeHtml,c=e.cssFilter;i.stripBlankChar&&(t=sc.stripBlankChar(t)),i.allowCommentTag||(t=sc.stripCommentTag(t));var d=!1;i.stripIgnoreTagBody&&(d=sc.StripTagBody(i.stripIgnoreTagBody,n),n=d.onIgnoreTag);var f=yke(t,function(m,g,v,b,_){var S={sourcePosition:m,position:g,isClosing:_,isWhite:Object.prototype.hasOwnProperty.call(r,v)},M=s(v,b,S);if(!NT(M))return M;if(S.isWhite){if(S.isClosing)return"</"+v+">";var x=vke(b),T=r[v],I=gke(x.html,function($,L){var B=VM.indexOf(T,$)!==-1,z=o(v,$,L,B);return NT(z)?B?(L=l(v,$,L,c),L?$+'="'+L+'"':$):(z=a(v,$,L,B),NT(z)?void 0:z):z});return b="<"+v,I&&(b+=" "+I),x.closing&&(b+=" /"),b+=">",b}else return M=n(v,b,S),NT(M)?u(b):M},u);return d&&(f=d.remove(f)),f};var _ke=Coe;(function(t,e){var i=as,r=CC,s=_ke;function n(a,l){var u=new s(l);return u.process(a)}e=t.exports=n,e.filterXSS=n,e.FilterXSS=s,function(){for(var a in i)e[a]=i[a];for(var l in r)e[l]=r[l]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=t.exports)})(Rg,Rg.exports);var xke=function(){function t(e,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(n,o,a,l){return n==="a"&&o==="href"||(n==="img"||n==="source")&&o==="src"?r.sanitizeUrl(a):Rg.exports.safeAttrValue(n,o,a,l)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var s;e&&!i?s=e:e&&i?(s=Object.create(this.arcgisFilterOptions),Object.keys(e).forEach(function(n){n==="whiteList"?s.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]):s[n]=e[n]})):(s=Object.create(this.arcgisFilterOptions),s.whiteList=this.arcgisWhiteList),this.xssFilterOptions=s,this._xssFilter=new Rg.exports.FilterXSS(s)}return t.prototype.sanitize=function(e,i){switch(i===void 0&&(i={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,i);default:return i.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,i){var r=(i??{}).isProtocolRequired,s=r===void 0?!0:r,n=this._trim(e.substring(0,e.indexOf(":"))),o=e==="/",a=/^#/.test(e),l=n&&this.allowedProtocols.indexOf(n.toLowerCase())>-1;return o||a||l?Rg.exports.escapeAttrValue(e):!n&&!s?Rg.exports.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,i,r,s){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,i,r,s):Rg.exports.safeAttrValue(e,i,r,s)},t.prototype.validate=function(e,i){i===void 0&&(i={});var r=this.sanitize(e,i);return{isValid:e===r,sanitized:r}},t.prototype.encodeHTML=function(e){var i=this;return String(e).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},t.prototype.encodeAttrValue=function(e){var i=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(r,s){return i.test(r)?r:"&#x".concat(Number(e.charCodeAt(s)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var i={};return e.forEach(function(r){Object.keys(r).forEach(function(s){Array.isArray(r[s])&&Array.isArray(i[s])?i[s]=i[s].concat(r[s]):i[s]=r[s]})}),i},t.prototype._iterateOverObject=function(e,i){var r=this;i===void 0&&(i={});try{var s=!1,n=void 0;if(Array.isArray(e))n=e.reduce(function(a,l){var u=r.validate(l,i);return u.isValid?a.concat([l]):(s=!0,a.concat([u.sanitized]))},[]);else if(ORe(e)){var o=Object.keys(e);n=o.reduce(function(a,l){var u=e[l],c=r.validate(u,i);return c.isValid?a[l]=u:(s=!0,a[l]=c.sanitized),a},{})}else return i.allowUndefined&&typeof e>"u"?void 0:null;return s?n:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t}();const $C=new Map;function $oe(){$C.clear()}function Ske(t){return $C.get(t)}function Eke(t,e){$C.set(t,e)}function yR(t){$C.delete(t)}var z0,ow,Tke=function(t){if("WebkitTransition"in t.style)z0="webkitTransitionEnd",ow="webkitAnimationEnd";else{if(!("transition"in t.style))throw new Error("Your browser is not supported!");z0="transitionend",ow="animationend"}},Ooe=function(t){z0||Tke(t)},Ike=function(t,e){return e===void 0&&(e=t+"-active"),function(i){Ooe(i);var r=!1,s=function(n){r||(r=!0,i.removeEventListener(z0,s),i.removeEventListener(ow,s),i.classList.remove(t),i.classList.remove(e))};i.classList.add(t),i.addEventListener(z0,s),i.addEventListener(ow,s),requestAnimationFrame(function(){i.classList.add(e)})}},Mke=function(t,e){return e===void 0&&(e=t+"-active"),function(i,r){Ooe(i);var s=!1,n=function(o){s||(s=!0,i.removeEventListener(z0,n),i.removeEventListener(ow,n),r())};i.classList.add(t),i.addEventListener(z0,n),i.addEventListener(ow,n),requestAnimationFrame(function(){i.classList.add(e)})}};const Ake=tt.getLogger("esri.widgets.support.widgetUtils");function Roe(t){const e=Zo.acquire();for(let r=0;r<arguments.length;r++){const s=arguments[r],n=typeof s;if(n==="string")e.push(s);else if(Array.isArray(s))e.push.apply(e,s);else if(n==="object")for(const o in s)s[o]&&e.push(o)}const i=e.join(" ");return Zo.release(e),i}(()=>{const t=new Map,e=new ResizeObserver(i=>{$oe();for(const r of i)t.get(r.target)?.(r)});return(i,r,s)=>(t.has(i)&&Ake.error("Already observing element",i),t.set(i,r),e.observe(i,s),Lw(()=>{e.unobserve(i),t.delete(i)}))})();function Th(t){const e=t?.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function Kq(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function d5(t){const e="data-node-ref";this[t.getAttribute(e)]=t}function Cke(t,e){return(t==="enter"?Ike:Mke)(e)}const $ke=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],Oke=$ke.reduce((t,e)=>(t[e]=[],t),{}),Rke=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],koe=new xke({whiteList:Oke,onTagAttr:(t,e,i)=>{const r=`${e}="${i}"`;if(Rke.includes(e))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function kke(t){return t==="Enter"||t===" "}const Loe="http://www.w3.org/",OC=`${Loe}2000/svg`,Poe=`${Loe}1999/xlink`;let Qq=[],v7=(t,e)=>{let i={};return Object.keys(t).forEach(r=>{i[r]=t[r]}),e&&Object.keys(e).forEach(r=>{i[r]=e[r]}),i},b7=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),Noe=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},Lke=(t,e,i)=>{if(e.vnodeSelector!==""){for(let r=i;r<t.length;r++)if(b7(t[r],e))return r}return-1},gR=(t,e,i,r)=>{let s=t[e];if(s.vnodeSelector==="")return;let n=s.properties;if(!(n&&(n.key===void 0?n.bind:n.key))){for(let o=0;o<t.length;o++)if(o!==e){let a=t[o];if(b7(a,s))throw new Error(`${i.vnodeSelector} had a ${s.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},Pke=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},eN=[],tN=!1,Foe=t=>{(t.children||[]).forEach(Foe),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},Xq=()=>{tN=!1,eN.forEach(Foe),eN.length=0},eH=t=>{eN.push(t),tN||(tN=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(Xq,{timeout:16}):setTimeout(Xq,16))},tH=t=>{let e=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return e.style.pointerEvents="none",void i(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),eH(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),eH(t))},Nke=(t,e,i)=>{if(!e)return;let r=i.eventHandlerInterceptor,s=Object.keys(e),n=s.length;for(let o=0;o<n;o++){let a=s[o],l=e[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")iN(t,l,!0);else if(a==="classes"){let u=Object.keys(l),c=u.length;for(let d=0;d<c;d++){let f=u[d];l[f]&&t.classList.add(f)}}else if(a==="styles"){let u=Object.keys(l),c=u.length;for(let d=0;d<c;d++){let f=u[d],m=l[f];m&&(Noe(m),i.styleApplyer(t,f,m))}}else if(a!=="key"&&l!=null){let u=typeof l;u==="function"?(a.lastIndexOf("on",0)===0&&(r&&(l=r(a,l,t,e)),a==="oninput"&&function(){let c=l;l=function(d){c.apply(this,[d]),d.target["oninput-value"]=d.target.value}}()),t[a]=l):i.namespace===OC?a==="href"?t.setAttributeNS(Poe,a,l):t.setAttribute(a,l):u==="string"&&a!=="value"?a==="innerHTML"?t[a]=koe.sanitize(l):Doe(t)&&a in t?t[a]=l:t.setAttribute(a,l):t[a]=l}}};function Doe(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let p5,Fke=(t,e,i)=>{if(e)for(let r of e)Xv(r,t,void 0,i)},joe=(t,e,i)=>{Fke(t,e.children,i),e.text&&(t.textContent=e.text),Nke(t,e.properties,i),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,i,e.vnodeSelector,e.properties,e.children])},Xv=(t,e,i,r)=>{let s,n=0,o=t.vnodeSelector,a=e.ownerDocument;if(o==="")s=t.domNode=a.createTextNode(t.text),i!==void 0?e.insertBefore(s,i):e.appendChild(s);else{for(let l=0;l<=o.length;++l){let u=o.charAt(l);if(l===o.length||u==="."||u==="#"){let c=o.charAt(n-1),d=o.slice(n,l);c==="."?s.classList.add(d):c==="#"?s.id=d:(d==="svg"&&(r=v7(r,{namespace:OC})),r.namespace!==void 0?s=t.domNode=a.createElementNS(r.namespace,d):(s=t.domNode=t.domNode||a.createElement(d),d==="input"&&t.properties&&t.properties.type!==void 0&&s.setAttribute("type",t.properties.type)),i!==void 0?e.insertBefore(s,i):s.parentNode!==e&&e.appendChild(s)),n=l+1}}joe(s,t,r)}},iN=(t,e,i)=>{e&&e.split(" ").forEach(r=>{r&&t.classList.toggle(r,i)})},Dke=(t,e,i,r)=>{if(!i)return;let s=!1,n=Object.keys(i),o=n.length;for(let a=0;a<o;a++){let l=n[a],u=i[l],c=e[l];if(l==="class")c!==u&&(iN(t,c,!1),iN(t,u,!0));else if(l==="classes"){let d=t.classList,f=Object.keys(u),m=f.length;for(let g=0;g<m;g++){let v=f[g],b=!!u[v];b!==!!c[v]&&(s=!0,b?d.add(v):d.remove(v))}}else if(l==="styles"){let d=Object.keys(u),f=d.length;for(let m=0;m<f;m++){let g=d[m],v=u[g];v!==c[g]&&(s=!0,v?(Noe(v),r.styleApplyer(t,g,v)):r.styleApplyer(t,g,""))}}else if(u||typeof c!="string"||(u=""),l==="value"){let d=t[l];d!==u&&(t["oninput-value"]?d===t["oninput-value"]:u!==c)&&(t[l]=u,t["oninput-value"]=void 0),u!==c&&(s=!0)}else if(u!==c){let d=typeof u;d==="function"&&r.eventHandlerInterceptor||(r.namespace===OC?l==="href"?t.setAttributeNS(Poe,l,u):t.setAttribute(l,u):d==="string"?l==="innerHTML"?t[l]=koe.sanitize(u):l==="role"&&u===""?t.removeAttribute(l):Doe(t)&&l in t?t[l]=u:t.setAttribute(l,u):t[l]!==u&&(t[l]=u),s=!0)}}return s},jke=(t,e,i,r,s)=>{if(i===r)return!1;r=r||Qq;let n,o=(i=i||Qq).length,a=r.length,l=0,u=0,c=!1;for(;u<a;){let d=l<o?i[l]:void 0,f=r[u];if(d!==void 0&&b7(d,f))c=p5(d,f,s)||c,l++;else{let m=Lke(i,f,l+1);if(m>=0){for(n=l;n<m;n++)tH(i[n]),gR(i,n,t,"removed");c=p5(i[m],f,s)||c,l=m+1}else Xv(f,e,l<o?i[l].domNode:void 0,s),Pke(f),gR(r,u,t,"added")}u++}if(o>l)for(n=l;n<o;n++)tH(i[n]),gR(i,n,t,"removed");return c};p5=(t,e,i)=>{let r=t.domNode,s=!1;if(t===e)return!1;let n=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let o=r.ownerDocument.createTextNode(e.text);return r.parentNode.replaceChild(o,r),e.domNode=o,s=!0,s}e.domNode=r}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(i=v7(i,{namespace:OC})),t.text!==e.text&&(n=!0,e.text===void 0?r.removeChild(r.firstChild):r.textContent=e.text),e.domNode=r,n=jke(e,r,t.children,e.children,i)||n,n=Dke(r,t.properties,e.properties,i)||n,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[r,i,e.vnodeSelector,e.properties,e.children]);return n&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(r,e.properties,t.properties),s};let G_=(t,e)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=t;t=i,p5(r,i,e)},domNode:t.domNode});const Uke={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}};let Cv=t=>v7(Uke,t),sm={create:(t,e)=>(e=Cv(e),Xv(t,document.createElement("div"),void 0,e),G_(t,e)),append:(t,e,i)=>(i=Cv(i),Xv(e,t,void 0,i),G_(e,i)),insertBefore:(t,e,i)=>(i=Cv(i),Xv(e,t.parentNode,t,i),G_(e,i)),merge:(t,e,i)=>(i=Cv(i),e.domNode=t,joe(t,e,i),G_(e,i)),replace:(t,e,i)=>(i=Cv(i),Xv(e,t.parentNode,t,i),t.parentNode.removeChild(t),G_(e,i))},Uoe,Vke=(t,e)=>{let i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i};Uoe=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let Bke=(t,e)=>{let i=t;return e.forEach(r=>{i=i&&i.children?Uoe(i.children,s=>s.domNode===r):void 0}),i},zke=(t,e,i)=>{let r=function(s){i("domEvent",s);let n=e(),o=Vke(s.currentTarget,n.domNode);o.reverse();let a,l=Bke(n.getLastRender(),o);return t.scheduleRender(),l&&(a=l.properties[`on${s.type}`].apply(l.properties.bind||this,arguments)),i("domEventProcessed",s),a};return(s,n,o,a)=>r},rN=t=>{let e,i,r=Cv(t),s=r.performanceLogger,n=!0,o=!1,a=[],l=[],u=(d,f,m)=>{let g,v=()=>g;r.eventHandlerInterceptor=zke(e,v,s),g=d(f,m(),r),a.push(g),l.push(m)},c=()=>{if(i=void 0,n){n=!1,s("renderStart",void 0);for(let d=0;d<a.length;d++){let f=l[d]();s("rendered",void 0),a[d].update(f),s("patched",void 0)}s("renderDone",void 0),n=!0}};return e={renderNow:c,scheduleRender:()=>{i||o||(i=requestAnimationFrame(c))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),o=!0},resume:()=>{o=!1,n=!0,e.scheduleRender()},append:(d,f)=>{u(sm.append,d,f)},insertBefore:(d,f)=>{u(sm.insertBefore,d,f)},merge:(d,f)=>{u(sm.merge,d,f)},replace:(d,f)=>{u(sm.replace,d,f)},detach:d=>{for(let f=0;f<l.length;f++)if(l[f]===d)return l.splice(f,1),a.splice(f,1)[0];throw new Error("renderFunction was not found")}},e},If=class extends Pt{constructor(){super(...arguments),this.items=new Nt,this._watchUpdatingTracking=new _b,this._callbacks=new Map,this._projector=rN(),this._hiddenProjector=rN()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const r of i.added){const s=()=>r.render();this._callbacks.set(r,s),this._projector.append(this.surface,s)}for(const r of i.removed){const s=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(s.domNode),this._callbacks.delete(r)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const i=this._hiddenSurface,r=this._hiddenProjector;let s;const n=()=>(s=e.render(),s);r.append(i,n),r.renderNow();const o={left:0,top:0,right:0,bottom:0};if(s&&s.domNode){const a=s.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(r.detach(n);i.firstChild;)i.removeChild(i.firstChild);return o}overlaps(e,i){const r=this.computeBoundingRect(e),s=this.computeBoundingRect(i);return Math.max(r.left,s.left)<=Math.min(r.right,s.right)&&Math.max(r.top,s.top)<=Math.min(r.bottom,s.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e){if(!this.items.some(r=>r.visible))return;const i=e.getContext("2d");i.save(),i.font=this._fontString(),this.items.forEach(r=>{i.save(),r.renderCanvas(i),i.restore()}),i.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};h([p({readOnly:!0})],If.prototype,"surface",void 0),h([p({readOnly:!0})],If.prototype,"items",void 0),h([p({readOnly:!0})],If.prototype,"needsRender",null),h([p({readOnly:!0})],If.prototype,"_watchUpdatingTracking",void 0),h([p({readOnly:!0})],If.prototype,"updating",null),If=h([ce("esri.views.overlay.ViewOverlay")],If);const iH=If;function Cb(t,e,i,r){let s=null,n=1e3;typeof e=="number"?(n=e,r=i):(s=e??null,n=i);let o,a=0;const l=()=>{a=0,t.apply(r,o)},u=(...c)=>{s&&s.apply(r,c),o=c,n?a||(a=setTimeout(l,n)):l()};return u.remove=()=>{a&&(clearTimeout(a),a=0)},u.forceUpdate=()=>{a&&(clearTimeout(a),l())},u.hasPendingUpdates=()=>!!a,u}const Gke="randomUUID"in crypto;function qke(){if(Gke)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=i=>t[i].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}const Hke={handleInterceptedEvent:(t,e,i,r)=>(t.scheduleRender(),e.properties[`on${r.type}`].apply(e.properties.bind||i,[r]))},Wke={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{t.style[e]=i}},Jke=t=>({...Wke,...t}),Zke=(t,e)=>{const i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i},Yke=(t,e)=>t.find(e),rH=(t,e,i=!1)=>{let r=t;return e.forEach((s,n)=>{const o=r?.children?Yke(r.children,a=>a.domNode===s):void 0;i&&!o&&n!==e.length-1||(r=o)}),r},Kke=t=>{let e;const i={...Hke,...t},r=Jke(i),s=r.performanceLogger;let n,o=!0,a=!1;const l=[],u=[],c=(f,m,g)=>{let v;r.eventHandlerInterceptor=(_,S,M,x)=>function(T){let I;s("domEvent",T);const $=Zke(T.currentTarget,v.domNode),L=$.some(z=>customElements.get(z?.tagName?.toLowerCase()));if(T.eventPhase===Event.CAPTURING_PHASE||!L)$.reverse(),I=rH(v.getLastRender(),$);else{const z=T.composedPath(),H=z.slice(z.indexOf(T.currentTarget),z.indexOf(v.domNode)).filter(J=>J.getRootNode()===J.ownerDocument).reverse();I=rH(v.getLastRender(),H,!0)}let B;return I&&(B=i.handleInterceptedEvent(e,I,this,T)),s("domEventProcessed",T),B},i.postProcessProjectionOptions?.(r);const b=g();v=f(m,b,r),l.push(v),u.push(g),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(v,b)};let d=()=>{if(n=void 0,o){o=!1,s("renderStart",void 0);for(let f=0;f<l.length;f++){const m=u[f]();s("rendered",void 0),l[f].update(m),s("patched",void 0)}s("renderDone",void 0),o=!0}};return i.modifyDoRenderImplementation&&(d=i.modifyDoRenderImplementation(d,l,u)),e={renderNow:d,scheduleRender:()=>{n||a||(n=requestAnimationFrame(d))},stop:()=>{n&&(cancelAnimationFrame(n),n=void 0),a=!0},resume:()=>{a=!1,o=!0,e.scheduleRender()},append:(f,m)=>{c(sm.append,f,m)},insertBefore:(f,m)=>{c(sm.insertBefore,f,m)},merge:(f,m)=>{c(sm.merge,f,m)},replace:(f,m)=>{c(sm.replace,f,m)},detach:f=>{for(let m=0;m<u.length;m++)if(u[m]===f)return u.splice(m,1),l.splice(m,1)[0];throw new Error("renderFunction was not found")}},e},$v={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let Ov,Voe,RC,Boe=!1,f5=!1,w7=!1,pl=!1,sH=null,sN=!1;const Ydt=t=>{const e=new URL(t,Yn.$resourcesUrl$);return e.origin!==rE.location.origin?e.href:e.pathname},Qke=t=>Yn.$resourcesUrl$=t,G0=(t,e="")=>()=>{},nH="http://www.w3.org/1999/xlink",oH={},Xke="http://www.w3.org/2000/svg",eLe="http://www.w3.org/1999/xhtml",tLe=t=>t!=null,_7=t=>(t=typeof t,t==="object"||t==="function"),zoe=(t,e,...i)=>{let r=null,s=null,n=null,o=!1,a=!1;const l=[],u=d=>{for(let f=0;f<d.length;f++)r=d[f],Array.isArray(r)?u(r):r!=null&&typeof r!="boolean"&&((o=typeof t!="function"&&!_7(r))&&(r=String(r)),o&&a?l[l.length-1].$text$+=r:l.push(o?m5(null,r):r),a=o)};if(u(i),e){e.key&&(s=e.key),e.name&&(n=e.name);{const d=e.className||e.class;d&&(e.class=typeof d!="object"?d:Object.keys(d).filter(f=>d[f]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,l,sLe);const c=m5(t,null);return c.$attrs$=e,l.length>0&&(c.$children$=l),c.$key$=s,c.$name$=n,c},m5=(t,e)=>{const i={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},iLe={},rLe=t=>t&&t.$tag$===iLe,sLe={forEach:(t,e)=>t.map(aH).forEach(e),map:(t,e)=>t.map(aH).map(e).map(nLe)},aH=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),nLe=t=>{if(typeof t.vtag=="function"){const i=Object.assign({},t.vattrs);return t.vkey&&(i.key=t.vkey),t.vname&&(i.name=t.vname),zoe(t.vtag,i,...t.vchildren||[])}const e=m5(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},oLe=t=>kLe.map(e=>e(t)).find(e=>!!e),aLe=(t,e)=>t!=null&&!_7(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,lLe=t=>t,Kdt=(t,e,i)=>{const r=lLe(t);return{emit:s=>uLe(r,e,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:s})}},uLe=(t,e,i)=>{const r=Yn.ce(e,i);return t.dispatchEvent(r),r},lH=new WeakMap,cLe=(t,e,i)=>{let r=g5.get(t);NLe&&i?(r=r||new CSSStyleSheet,typeof r=="string"?r=e:r.replaceSync(e)):r=e,g5.set(t,r)},hLe=(t,e,i,r)=>{let s=Goe(e,i);const n=g5.get(s);if(t=t.nodeType===11?t:Rh,n)if(typeof n=="string"){t=t.head||t;let o=lH.get(t),a;o||lH.set(t,o=new Set),o.has(s)||(a=Rh.createElement("style"),a.innerHTML=n,t.insertBefore(a,t.querySelector("link")),o&&o.add(s))}else t.adoptedStyleSheets.includes(n)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,n]);return s},dLe=t=>{const e=t.$cmpMeta$,i=t.$hostElement$,r=e.$flags$,s=G0("attachStyles",e.$tagName$),n=hLe(i.shadowRoot?i.shadowRoot:i.getRootNode(),e,t.$modeName$);r&10&&(i["s-sc"]=n,i.classList.add(n+"-h"),r&2&&i.classList.add(n+"-s")),s()},Goe=(t,e)=>"sc-"+(e&&t.$flags$&32?t.$tagName$+"-"+e:t.$tagName$),uH=(t,e,i,r,s,n)=>{if(i!==r){let o=pH(t,e),a=e.toLowerCase();if(e==="class"){const l=t.classList,u=cH(i),c=cH(r);l.remove(...u.filter(d=>d&&!c.includes(d))),l.add(...c.filter(d=>d&&!u.includes(d)))}else if(e==="style"){for(const l in i)(!r||r[l]==null)&&(l.includes("-")?t.style.removeProperty(l):t.style[l]="");for(const l in r)(!i||r[l]!==i[l])&&(l.includes("-")?t.style.setProperty(l,r[l]):t.style[l]=r[l])}else if(e!=="key")if(e==="ref")r&&r(t);else if(!t.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):pH(rE,a)?e=a.slice(2):e=a[2]+e.slice(3),i&&Yn.rel(t,e,i,!1),r&&Yn.ael(t,e,r,!1);else{const l=_7(r);if((o||l&&r!==null)&&!s)try{if(t.tagName.includes("-"))t[e]=r;else{const c=r??"";e==="list"?o=!1:(i==null||t[e]!=c)&&(t[e]=c)}}catch{}let u=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(e=a,u=!0),r==null||r===!1?(r!==!1||t.getAttribute(e)==="")&&(u?t.removeAttributeNS(nH,e):t.removeAttribute(e)):(!o||n&4||s)&&!l&&(r=r===!0?"":r,u?t.setAttributeNS(nH,e,r):t.setAttribute(e,r))}}},pLe=/\s/,cH=t=>t?t.split(pLe):[],qoe=(t,e,i,r)=>{const s=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,n=t&&t.$attrs$||oH,o=e.$attrs$||oH;for(r in n)r in o||uH(s,r,n[r],void 0,i,e.$flags$);for(r in o)uH(s,r,n[r],o[r],i,e.$flags$)},y5=(t,e,i,r)=>{const s=e.$children$[i];let n=0,o,a,l;if(Boe||(w7=!0,s.$tag$==="slot"&&(Ov&&r.classList.add(Ov+"-s"),s.$flags$|=s.$children$?2:1)),s.$text$!==null)o=s.$elm$=Rh.createTextNode(s.$text$);else if(s.$flags$&1)o=s.$elm$=Rh.createTextNode("");else{if(pl||(pl=s.$tag$==="svg"),o=s.$elm$=Rh.createElementNS(pl?Xke:eLe,s.$flags$&2?"slot-fb":s.$tag$),pl&&s.$tag$==="foreignObject"&&(pl=!1),qoe(null,s,pl),tLe(Ov)&&o["s-si"]!==Ov&&o.classList.add(o["s-si"]=Ov),s.$children$)for(n=0;n<s.$children$.length;++n)a=y5(t,s,n,o),a&&o.appendChild(a);s.$tag$==="svg"?pl=!1:o.tagName==="foreignObject"&&(pl=!0)}return o["s-hn"]=RC,s.$flags$&3&&(o["s-sr"]=!0,o["s-cr"]=Voe,o["s-sn"]=s.$name$||"",l=t&&t.$children$&&t.$children$[i],l&&l.$tag$===s.$tag$&&t.$elm$&&zS(t.$elm$,!1)),o},zS=(t,e)=>{Yn.$flags$|=1;const i=t.childNodes;for(let r=i.length-1;r>=0;r--){const s=i[r];s["s-hn"]!==RC&&s["s-ol"]&&(Joe(s).insertBefore(s,x7(s)),s["s-ol"].remove(),s["s-ol"]=void 0,w7=!0),e&&zS(s,e)}Yn.$flags$&=-2},Hoe=(t,e,i,r,s,n)=>{let o=t["s-cr"]&&t["s-cr"].parentNode||t,a;for(o.shadowRoot&&o.tagName===RC&&(o=o.shadowRoot);s<=n;++s)r[s]&&(a=y5(null,i,s,t),a&&(r[s].$elm$=a,o.insertBefore(a,x7(e))))},Woe=(t,e,i,r,s)=>{for(;e<=i;++e)(r=t[e])&&(s=r.$elm$,Koe(r),f5=!0,s["s-ol"]?s["s-ol"].remove():zS(s,!0),s.remove())},fLe=(t,e,i,r)=>{let s=0,n=0,o=0,a=0,l=e.length-1,u=e[0],c=e[l],d=r.length-1,f=r[0],m=r[d],g,v;for(;s<=l&&n<=d;)if(u==null)u=e[++s];else if(c==null)c=e[--l];else if(f==null)f=r[++n];else if(m==null)m=r[--d];else if(FT(u,f))Rv(u,f),u=e[++s],f=r[++n];else if(FT(c,m))Rv(c,m),c=e[--l],m=r[--d];else if(FT(u,m))(u.$tag$==="slot"||m.$tag$==="slot")&&zS(u.$elm$.parentNode,!1),Rv(u,m),t.insertBefore(u.$elm$,c.$elm$.nextSibling),u=e[++s],m=r[--d];else if(FT(c,f))(u.$tag$==="slot"||m.$tag$==="slot")&&zS(c.$elm$.parentNode,!1),Rv(c,f),t.insertBefore(c.$elm$,u.$elm$),c=e[--l],f=r[++n];else{for(o=-1,a=s;a<=l;++a)if(e[a]&&e[a].$key$!==null&&e[a].$key$===f.$key$){o=a;break}o>=0?(v=e[o],v.$tag$!==f.$tag$?g=y5(e&&e[n],i,o,t):(Rv(v,f),e[o]=void 0,g=v.$elm$),f=r[++n]):(g=y5(e&&e[n],i,n,t),f=r[++n]),g&&Joe(u.$elm$).insertBefore(g,x7(u.$elm$))}s>l?Hoe(t,r[d+1]==null?null:r[d+1].$elm$,i,r,n,d):n>d&&Woe(e,s,l)},FT=(t,e)=>t.$tag$===e.$tag$?t.$tag$==="slot"?t.$name$===e.$name$:t.$key$===e.$key$:!1,x7=t=>t&&t["s-ol"]||t,Joe=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,Rv=(t,e)=>{const i=e.$elm$=t.$elm$,r=t.$children$,s=e.$children$,n=e.$tag$,o=e.$text$;let a;o===null?(pl=n==="svg"?!0:n==="foreignObject"?!1:pl,n==="slot"||qoe(t,e,pl),r!==null&&s!==null?fLe(i,r,e,s):s!==null?(t.$text$!==null&&(i.textContent=""),Hoe(i,null,e,s,0,s.length-1)):r!==null&&Woe(r,0,r.length-1),pl&&n==="svg"&&(pl=!1)):(a=i["s-cr"])?a.parentNode.textContent=o:t.$text$!==o&&(i.data=o)},Zoe=t=>{const e=t.childNodes;let i,r,s,n,o,a;for(r=0,s=e.length;r<s;r++)if(i=e[r],i.nodeType===1){if(i["s-sr"]){for(o=i["s-sn"],i.hidden=!1,n=0;n<s;n++)if(a=e[n].nodeType,e[n]["s-hn"]!==i["s-hn"]||o!==""){if(a===1&&o===e[n].getAttribute("slot")){i.hidden=!0;break}}else if(a===1||a===3&&e[n].textContent.trim()!==""){i.hidden=!0;break}}Zoe(i)}},lc=[],Yoe=t=>{let e,i,r,s,n,o,a=0;const l=t.childNodes,u=l.length;for(;a<u;a++){if(e=l[a],e["s-sr"]&&(i=e["s-cr"])&&i.parentNode)for(r=i.parentNode.childNodes,s=e["s-sn"],o=r.length-1;o>=0;o--)i=r[o],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==e["s-hn"]&&(hH(i,s)?(n=lc.find(c=>c.$nodeToRelocate$===i),f5=!0,i["s-sn"]=i["s-sn"]||s,n?n.$slotRefNode$=e:lc.push({$slotRefNode$:e,$nodeToRelocate$:i}),i["s-sr"]&&lc.map(c=>{hH(c.$nodeToRelocate$,i["s-sn"])&&(n=lc.find(d=>d.$nodeToRelocate$===i),n&&!c.$slotRefNode$&&(c.$slotRefNode$=n.$slotRefNode$))})):lc.some(c=>c.$nodeToRelocate$===i)||lc.push({$nodeToRelocate$:i}));e.nodeType===1&&Yoe(e)}},hH=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",Koe=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(Koe)},mLe=(t,e)=>{const i=t.$hostElement$,r=t.$cmpMeta$,s=t.$vnode$||m5(null,null),n=rLe(e)?e:zoe(null,null,e);RC=i.tagName,r.$attrsToReflect$&&(n.$attrs$=n.$attrs$||{},r.$attrsToReflect$.map(([o,a])=>n.$attrs$[a]=i[o])),n.$tag$=null,n.$flags$|=4,t.$vnode$=n,n.$elm$=s.$elm$=i.shadowRoot||i,Ov=i["s-sc"],Voe=i["s-cr"],Boe=(r.$flags$&1)!==0,f5=!1,Rv(s,n);{if(Yn.$flags$|=1,w7){Yoe(n.$elm$);let o,a,l,u,c,d,f=0;for(;f<lc.length;f++)o=lc[f],a=o.$nodeToRelocate$,a["s-ol"]||(l=Rh.createTextNode(""),l["s-nr"]=a,a.parentNode.insertBefore(a["s-ol"]=l,a));for(f=0;f<lc.length;f++)if(o=lc[f],a=o.$nodeToRelocate$,o.$slotRefNode$){for(u=o.$slotRefNode$.parentNode,c=o.$slotRefNode$.nextSibling,l=a["s-ol"];l=l.previousSibling;)if(d=l["s-nr"],d&&d["s-sn"]===a["s-sn"]&&u===d.parentNode&&(d=d.nextSibling,!d||!d["s-nr"])){c=d;break}(!c&&u!==a.parentNode||a.nextSibling!==c)&&a!==c&&(!a["s-hn"]&&a["s-ol"]&&(a["s-hn"]=a["s-ol"].parentNode.nodeName),u.insertBefore(a,c))}else a.nodeType===1&&(a.hidden=!0)}f5&&Zoe(n.$elm$),Yn.$flags$&=-2,lc.length=0}},yLe=(t,e)=>{},S7=(t,e)=>(t.$flags$|=16,yLe(t,t.$ancestorComponent$),jLe(()=>gLe(t,e))),gLe=(t,e)=>{const i=t.$hostElement$,r=G0("scheduleUpdate",t.$cmpMeta$.$tagName$),s=i;let n;return e?n=$b(s,"componentWillLoad"):n=$b(s,"componentWillUpdate"),n=dH(n,()=>$b(s,"componentWillRender")),r(),dH(n,()=>vLe(t,s,e))},vLe=async(t,e,i)=>{const r=t.$hostElement$,s=G0("update",t.$cmpMeta$.$tagName$);r["s-rc"],i&&dLe(t);const n=G0("render",t.$cmpMeta$.$tagName$);bLe(t,e,r),n(),s(),wLe(t)},bLe=(t,e,i)=>{try{sH=e,e=e.render&&e.render(),t.$flags$&=-17,t.$flags$|=2,($v.hasRenderFn||$v.reflect)&&($v.vdomRender||$v.reflect)&&($v.hydrateServerSide||mLe(t,e))}catch(a){iE(a,t.$hostElement$)}return sH=null,null},wLe=t=>{const e=t.$cmpMeta$.$tagName$,i=t.$hostElement$,r=G0("postUpdate",e),s=i;t.$ancestorComponent$,$b(s,"componentDidRender"),t.$flags$&64?($b(s,"componentDidUpdate"),r()):(t.$flags$|=64,$b(s,"componentDidLoad"),r())},Qdt=t=>{{const e=tE(t),i=e.$hostElement$.isConnected;return i&&(e.$flags$&18)===2&&S7(e,!1),i}},$b=(t,e,i)=>{if(t&&t[e])try{return t[e](i)}catch(r){iE(r)}},dH=(t,e)=>t&&t.then?t.then(e):e(),_Le=(t,e)=>tE(t).$instanceValues$.get(e),xLe=(t,e,i,r)=>{const s=tE(t),n=t,o=s.$instanceValues$.get(e),a=s.$flags$,l=n;i=aLe(i,r.$members$[e][0]);const u=Number.isNaN(o)&&Number.isNaN(i);if(i!==o&&!u){s.$instanceValues$.set(e,i);{if(r.$watchers$&&a&128){const d=r.$watchers$[e];d&&d.map(f=>{try{l[f](i,o,e)}catch(m){iE(m,n)}})}if((a&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(i,o,e)===!1)return;S7(s,!1)}}}},SLe=(t,e,i)=>{if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);const r=Object.entries(e.$members$),s=t.prototype;r.map(([n,[o]])=>{(o&31||o&32)&&Object.defineProperty(s,n,{get(){return _Le(this,n)},set(a){xLe(this,n,a,e)},configurable:!0,enumerable:!0})});{const n=new Map;s.attributeChangedCallback=function(o,a,l){Yn.jmp(()=>{const u=n.get(o);if(this.hasOwnProperty(u))l=this[u],delete this[u];else if(s.hasOwnProperty(u)&&typeof this[u]=="number"&&this[u]==l)return;this[u]=l===null&&typeof this[u]=="boolean"?!1:l})},t.observedAttributes=r.filter(([o,a])=>a[0]&15).map(([o,a])=>{const l=a[1]||o;return n.set(l,o),a[0]&512&&e.$attrsToReflect$.push([o,l]),l})}}return t},ELe=async(t,e,i,r,s)=>{if(!(e.$flags$&32)&&(s=t.constructor,e.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>e.$flags$|=128),s.style)){let o=s.style;typeof o!="string"&&(o=o[e.$modeName$=oLe(t)]);const a=Goe(i,e.$modeName$);if(!g5.has(a)){const l=G0("registerStyles",i.$tagName$);cLe(a,o,!!(i.$flags$&1)),l()}}e.$ancestorComponent$,(()=>S7(e,!0))()},TLe=t=>{},ILe=t=>{if(!(Yn.$flags$&1)){const e=tE(t),i=e.$cmpMeta$,r=G0("connectedCallback",i.$tagName$);e.$flags$&1?(Qoe(t,e,i.$listeners$),TLe(e.$lazyInstance$)):(e.$flags$|=1,i.$flags$&12&&MLe(t),i.$members$&&Object.entries(i.$members$).map(([s,[n]])=>{if(n&31&&t.hasOwnProperty(s)){const o=t[s];delete t[s],t[s]=o}}),ELe(t,e,i)),r()}},MLe=t=>{const e=t["s-cr"]=Rh.createComment("");e["s-cn"]=!0,t.insertBefore(e,t.firstChild)},ALe=t=>{if(!(Yn.$flags$&1)){const e=tE(t);e.$rmListeners$&&(e.$rmListeners$.map(i=>i()),e.$rmListeners$=void 0)}},Xdt=(t,e)=>{const i={$flags$:e[0],$tagName$:e[1]};i.$members$=e[2],i.$listeners$=e[3],i.$watchers$=t.$watchers$,i.$attrsToReflect$=[];const r=t.prototype.connectedCallback,s=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){RLe(this,i)},connectedCallback(){ILe(this),r&&r.call(this)},disconnectedCallback(){ALe(this),s&&s.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)})}}),t.is=i.$tagName$,SLe(t,i)},ept=(t,e)=>e,Qoe=(t,e,i,r)=>{i&&i.map(([s,n,o])=>{const a=$Le(t,s),l=CLe(e,o),u=OLe(s);Yn.ael(a,n,l,u),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>Yn.rel(a,n,l,u))})},CLe=(t,e)=>i=>{try{$v.lazyLoad||t.$hostElement$[e](i)}catch(r){iE(r)}},$Le=(t,e)=>e&4?Rh:e&8?rE:e&16?Rh.body:t,OLe=t=>LLe?{passive:(t&1)!==0,capture:(t&2)!==0}:(t&2)!==0,Xoe=new WeakMap,tE=t=>Xoe.get(t),RLe=(t,e)=>{const i={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return Qoe(t,i,e.$listeners$),Xoe.set(t,i)},pH=(t,e)=>e in t,iE=(t,e)=>(0,console.error)(t,e),g5=new Map,kLe=[],rE=typeof window<"u"?window:{},Rh=rE.document||{head:{}},tpt=rE.HTMLElement||class{},Yn={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,i,r)=>t.addEventListener(e,i,r),rel:(t,e,i,r)=>t.removeEventListener(e,i,r),ce:(t,e)=>new CustomEvent(t,e)},LLe=(()=>{let t=!1;try{Rh.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch{}return t})(),PLe=t=>Promise.resolve(t),NLe=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),fH=[],eae=[],FLe=(t,e)=>i=>{t.push(i),sN||(sN=!0,e&&Yn.$flags$&4?DLe(nN):Yn.raf(nN))},mH=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(i){iE(i)}t.length=0},nN=()=>{mH(fH),mH(eae),(sN=fH.length>0)&&Yn.raf(nN)},DLe=t=>PLe().then(t),jLe=FLe(eae,!0);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const tae="calcite-mode-auto",iae="calcite-mode-dark",ULe="calcite-mode-light",ipt={autoMode:tae,darkMode:iae,lightMode:ULe,rtl:"calcite--rtl"};/*!
* tabbable 6.0.1
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var rae=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],v5=rae.join(","),sae=typeof Element>"u",q0=sae?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,b5=!sae&&Element.prototype.getRootNode?function(t){return t.getRootNode()}:function(t){return t.ownerDocument},nae=function(e,i,r){var s=Array.prototype.slice.apply(e.querySelectorAll(v5));return i&&q0.call(e,v5)&&s.unshift(e),s=s.filter(r),s},oae=function t(e,i,r){for(var s=[],n=Array.from(e);n.length;){var o=n.shift();if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,u=t(l,!0,r);r.flatten?s.push.apply(s,u):s.push({scopeParent:o,candidates:u})}else{var c=q0.call(o,v5);c&&r.filter(o)&&(i||!e.includes(o))&&s.push(o);var d=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),f=!r.shadowRootFilter||r.shadowRootFilter(o);if(d&&f){var m=t(d===!0?o.children:d.children,!0,r);r.flatten?s.push.apply(s,m):s.push({scopeParent:o,candidates:m})}else n.unshift.apply(n,o.children)}}return s},aae=function(e,i){return e.tabIndex<0&&(i||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},VLe=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},lae=function(e){return e.tagName==="INPUT"},BLe=function(e){return lae(e)&&e.type==="hidden"},zLe=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return i},GLe=function(e,i){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===i)return e[r]},qLe=function(e){if(!e.name)return!0;var i=e.form||b5(e),r=function(a){return i.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var n=GLe(s,e.form);return!n||n===e},HLe=function(e){return lae(e)&&e.type==="radio"},WLe=function(e){return HLe(e)&&!qLe(e)},JLe=function(e){for(var i,r=b5(e).host,s=!!((i=r)!==null&&i!==void 0&&i.ownerDocument.contains(r)||e.ownerDocument.contains(e));!s&&r;){var n;r=b5(r).host,s=!!((n=r)!==null&&n!==void 0&&n.ownerDocument.contains(r))}return s},yH=function(e){var i=e.getBoundingClientRect(),r=i.width,s=i.height;return r===0&&s===0},ZLe=function(e,i){var r=i.displayCheck,s=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var n=q0.call(e,"details>summary:first-of-type"),o=n?e.parentElement:e;if(q0.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var a=e;e;){var l=e.parentElement,u=b5(e);if(l&&!l.shadowRoot&&s(l)===!0)return yH(e);e.assignedSlot?e=e.assignedSlot:!l&&u!==e.ownerDocument?e=u.host:e=l}e=a}if(JLe(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return yH(e);return!1},YLe=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var s=i.children.item(r);if(s.tagName==="LEGEND")return q0.call(i,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}i=i.parentElement}return!1},w5=function(e,i){return!(i.disabled||BLe(i)||ZLe(i,e)||zLe(i)||YLe(i))},oN=function(e,i){return!(WLe(i)||aae(i)<0||!w5(e,i))},KLe=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},QLe=function t(e){var i=[],r=[];return e.forEach(function(s,n){var o=!!s.scopeParent,a=o?s.scopeParent:s,l=aae(a,o),u=o?t(s.candidates):a;l===0?o?i.push.apply(i,u):i.push(a):r.push({documentOrder:n,tabIndex:l,item:s,isScope:o,content:u})}),r.sort(VLe).reduce(function(s,n){return n.isScope?s.push.apply(s,n.content):s.push(n.content),s},[]).concat(i)},XLe=function(e,i){i=i||{};var r;return i.getShadowRoot?r=oae([e],i.includeContainer,{filter:oN.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:KLe}):r=nae(e,i.includeContainer,oN.bind(null,i)),QLe(r)},rpt=function(e,i){i=i||{};var r;return i.getShadowRoot?r=oae([e],i.includeContainer,{filter:w5.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=nae(e,i.includeContainer,w5.bind(null,i)),r},spt=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return q0.call(e,v5)===!1?!1:oN(i,e)},ePe=rae.concat("iframe").join(","),npt=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return q0.call(e,ePe)===!1?!1:w5(i,e)};const tPe={getShadowRoot:!0};function opt(t){const e="dir",i=`[${e}]`,r=iPe(t,i);return r?r.getAttribute(e):"ltr"}function apt(t,e,i){const r=`[${e}]`,s=t.closest(r);return s?s.getAttribute(e):i}function uae(t){return t.getRootNode()}function cae(t){return t.host||null}function lpt(t,{selector:e,id:i}){function r(s){if(!s)return null;s.assignedSlot&&(s=s.assignedSlot);const n=uae(s),o=i?"getElementById"in n?n.getElementById(i):null:e?n.querySelector(e):null,a=cae(n);return o||(a?r(a):null)}return r(t)}function iPe(t,e){function i(r){return r?r.closest(e)||i(cae(uae(r))):null}return i(t)}function rPe(t,e){return hae(t,e)}function hae(t,e){if(!t)return;const i=e(t);if(i!==void 0)return i;const{parentNode:r}=t;return hae(r instanceof ShadowRoot?r.host:r,e)}function upt(t,e){return!!rPe(e,i=>i===t?!0:void 0)}function sPe(t){return typeof t?.setFocus=="function"}async function cpt(t){if(t)return sPe(t)?t.setFocus():t.focus()}function hpt(t){(XLe(t,tPe)[0]||t).focus()}const GS=":not([slot])";function dpt(t,e,i){e&&!Array.isArray(e)&&typeof e!="string"&&(i=e,e=null);const r=e?Array.isArray(e)?e.map(s=>`[slot="${s}"]`).join(","):`[slot="${e}"]`:GS;return i?.all?nPe(t,r,i):oPe(t,r,i)}function dae(t,e){return t?Array.from(t.children||[]).filter(i=>i?.matches(e)):[]}function nPe(t,e,i){let r=e===GS?dae(t,GS):Array.from(t.querySelectorAll(e));r=i&&i.direct===!1?r:r.filter(n=>n.parentElement===t),r=i?.matches?r.filter(n=>n?.matches(i.matches)):r;const s=i?.selector;return s?r.map(n=>Array.from(n.querySelectorAll(s))).reduce((n,o)=>[...n,...o],[]).filter(n=>!!n):r}function oPe(t,e,i){let r=e===GS?dae(t,GS)[0]||null:t.querySelector(e);r=i&&i.direct===!1||r?.parentElement===t?r:null,r=i?.matches?r?.matches(i.matches)?r:null:r;const s=i?.selector;return s?r?.querySelector(s):r}function ppt(t,e,i){if(typeof e=="string"&&e!=="")return e;if(e==="")return t[i]}function fpt(t){return(!!t).toString()}function mpt(t){return!!aPe(t).length}function aPe(t){return t.target.assignedElements({flatten:!0})}function ypt(t){return!!(t.isPrimary&&t.button===0)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */function gH(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(iae)||t.contains(tae)&&e?"dark":"light",r=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),s=o=>{n!==o&&r(o),n=o};let n=i();r(n),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>s(o.matches?"dark":"light")),new MutationObserver(()=>s(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function lPe(){typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document&&(document.readyState==="interactive"?gH():document.addEventListener("DOMContentLoaded",()=>gH(),{once:!0}))}const uPe=lPe;uPe();let pae;function cPe(){Qke(_l(Ui(pae)))}pae="components/assets";const fae=Symbol("widget"),hPe=Symbol("widget-test-data"),dPe=[],pPe={},_5=new WeakMap;function mae(t,e){let i=e.children;if(i&&i.length)for(let s=0;s<i.length;++s)i[s]=mae(t,i[s]);else i=dPe;const r=e.vnodeSelector;if(E7(r)){const s=e.properties||pPe,n=s.key||r;return{vnodeSelector:"div",properties:{key:n,afterCreate:fPe,afterUpdate:mPe,afterRemoved:yae,parentWidget:t,widgetConstructor:r,widgetProperties:{...s,key:n,children:i}},children:void 0,text:void 0,domNode:null}}return e}function fPe(t,e,i,{parentWidget:r,widgetConstructor:s,widgetProperties:n}){const o=new s(n);o.container=t,_5.set(t,o),o.afterCreate?.(o,t),r._internalHandles.add(Lw(()=>yae(t)))}function mPe(t,e,i,{widgetProperties:r}){const s=_5.get(t);s&&(s.set(r),s.afterUpdate?.(s,t))}function yae(t){const e=_5.get(t);e&&(e.afterRemoved?.(e,t),e.destroy(),_5.delete(t))}function E7(t){return typeof t=="function"&&t[fae]}const vH=new Set;function yPe(t){vH.add(t),t.finally(()=>vH.delete(t))}var gae;const gPe="esri.widgets.Widget";let vPe=0;const bPe={widgetIcon:"esri-icon-checkbox-unchecked"};function vae(t,e){for(const i in e)t[i]!=null&&(typeof t[i]=="object"&&typeof e[i]=="object"?vae(t[i],e?.[i]):t[i]=e[i]);return t}const wPe=Kke({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(r,s,n,o)=>{const a=e?.(r,s,n,o),l=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in n)||l){const u=r[2].toLowerCase()+r.slice(3),c=m=>a?.call(n,m);n.addEventListener(u,c,l);const d=()=>n.removeEventListener(u,c,l),f=o.afterRemoved;o.afterRemoved=m=>{f?.(m),d()}}return a}},handleInterceptedEvent(t,e,i,r){const{eventPhase:s,type:n}=r,o=s===Event.CAPTURING_PHASE;let a=`on${n}${o?"capture":""}`;const l=e.properties;(l&&a in l||(a=`on${n[0].toUpperCase()}${n.slice(1)}${o?"Capture":""}`,l&&a in l))&&($oe(),t.scheduleRender(),l[a].call(l.bind||i,r))}});let vR=!1,ln=class extends C3(xp.EventedAccessor){constructor(e,i){super(e,i),this._attached=!1,this._internalHandles=new Ao,this._projector=wPe,this._readyForTrueRender=!1,this.iconClass=bPe.widgetIcon,this.key=this,this._loadLocale=HK(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const o=await Fa(this._messageBundleProps.map(async({bundlePath:a,propertyName:l})=>{let u=await fX(a);this.uiStrings&&Object.keys(this.uiStrings)&&(u=vae(Le(u),this.uiStrings)),this[l]=u}));for(const a of o)a.error&&tt.getLogger(this.declaredClass).error("widget-intl:locale-error",this.declaredClass,a.error)}await this.loadLocale()}),cPe();const r="esri-widget-uid-"+qke(),s=this.render.bind(this);this._trackingTarget=new D4(()=>this.scheduleRender());const n=()=>{if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:r,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0};const o=s();let{properties:a}=o;a||(o.properties=a={});let{key:l,styles:u}=a;l||(a.key=r),u||(a.styles=u={}),u.display||(u.display="");let c=0;return o.children?.forEach(d=>{if(E7(d.vnodeSelector))return;let{properties:f}=d;f||(d.properties=f={}),f.key||(f.key=`${this.id}--${c++}`)}),mae(this,o)};this.render=()=>{if(vR)return n();let o=Ske(this)??null;if(o)return o;this._trackingTarget.clear(),vR=!0;try{o=ap(this._trackingTarget,n)}catch(a){throw console.error(a),a}finally{vR=!1}return o&&Eke(this,o),o},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()})),yPe(this._resourcesFetch)}normalizeCtorArgs(e,i){const r={...e};return i&&(r.container=i),r}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(Ok)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(Jr(this._trackingTarget),Jr(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,yR(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return y7(e)}get domNode(){return this.container}set domNode(e){this.container=e}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+vPe++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(gae=fae,hPe)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(yR(this),this._projector.scheduleRender())}classes(...e){return Roe.apply(this,e)}renderNow(){yR(this),this._projector.renderNow()}_postInitialize(){if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this._internalHandles.add(st(()=>this.viewModel,(i,r)=>{r&&this._internalHandles.remove("delegated-events"),i&&L4(i)&&this._internalHandles.add(this._delegatedEventNames.map(s=>P4(i,s,n=>{this.emit(s,n)})),"delegated-events")},Fi)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(Ok),this.scheduleRender()};this._internalHandles.add([dX(e),st(()=>this.uiStrings,e),Nl(()=>this.container,i=>{this.destroyed||this._attach(i)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){this._attached&&(this._projector.detach(this.render),this._attached=!1),e?.parentNode?.removeChild(e)}};ln[gae]=!0,h([p()],ln.prototype,"_readyForTrueRender",void 0),h([p({value:null})],ln.prototype,"container",null),h([mi("container")],ln.prototype,"castContainer",null),h([p()],ln.prototype,"iconClass",void 0),h([p()],ln.prototype,"id",null),h([p()],ln.prototype,"label",null),h([p()],ln.prototype,"renderable",null),h([p()],ln.prototype,"uiStrings",void 0),h([p()],ln.prototype,"viewModel",void 0),h([p({value:!0})],ln.prototype,"visible",null),h([p()],ln.prototype,"key",void 0),h([p()],ln.prototype,"children",void 0),h([p()],ln.prototype,"afterCreate",void 0),h([p()],ln.prototype,"afterUpdate",void 0),h([p()],ln.prototype,"afterRemoved",void 0),ln=h([ce(gPe)],ln);const Pn=ln,bH=["B","kB","MB","GB","TB"];function _Pe(t,e){let i=e===0?0:Math.floor(Math.log(e)/Math.log(VS.KILOBYTES));i=Da(i,0,bH.length-1);const r=Tm(e/VS.KILOBYTES**i,{maximumFractionDigits:2});return _c(t.units.bytes[bH[i]],{fileSize:r})}const xPe="esri.widgets.Feature.support.featureUtils",wH=tt.getLogger(xPe),SPe=/href=(""|'')/gi,EPe=/(\{([^\{\r\n]+)\})/g,TPe=/\'/g,bae=/^\s*expression\//i,IPe=/(\n)/gi,MPe=/[\u00A0-\u9999<>\&]/gim,APe=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,CPe=/^(?:mailto:|tel:)/,wae="relationships/",aN=R9("short-date-short-time");function _ae(t){if(!Re(t))return t.get("sourceLayer")||t.get("layer")}async function x5(t,e){return typeof t=="function"?t.call(null,e):t}function xae(t=""){if(t)return!CPe.test(t.trim().toLowerCase())}function T7(t){return!!t&&bae.test(t)}function $Pe(t,e){if(!T7(e)||!t)return null;const i=e.replace(bae,"").toLowerCase();let r=null;return t.some(s=>s.name.toLowerCase()===i&&(r=s,!0)),r}function Sae(t,e){const i=$Pe(e,t?.fieldName);return i?i.title||null:t?t.label||t.fieldName:null}function OPe(t,e){const i=e.get(t.toLowerCase());return`{${i&&i.fieldName||t}}`}function RPe(t){return t.replace(SPe,"")}function qS(t,e){const i=I7(e,t);return i?i.name:t}function kPe(t,e){return t&&t.map(i=>qS(i,e))}function I7(t,e){return t&&typeof t.getField=="function"&&e?t.getField(e)??null:null}function Eae(t){return`${t}`.trim()}function Xg({attributes:t,globalAttributes:e,layer:i,text:r,expressionAttributes:s,fieldInfoMap:n}){return r?lN({formattedAttributes:e,template:FPe(r,{...e,...s,...t},i),fieldInfoMap:n}):""}function lN({formattedAttributes:t,template:e,fieldInfoMap:i}){return Eae(RPe(_c(_c(e,r=>OPe(r,i)),t)))}function LPe(t,e,i=!1){const r=e[t];if(typeof r=="string"){const s="%27",n=(i?encodeURIComponent(r):r).replace(TPe,s);e[t]=n}}function PPe(t,e=!1){const i={...t};return Object.keys(i).forEach(r=>LPe(r,i,e)),i}function NPe(t,e,i){const r=(e=Eae(e))&&e[0]!=="{";return _c(t,PPe(i,r||!1))}function uN(t,e){return t.replace(EPe,(i,r,s)=>{const n=I7(e,s);return n?`{${n.name}}`:r})}function FPe(t,e,i){const r=uN(t,i);return r&&r.replace(APe,(s,n,o)=>NPe(s,n||o,e))}function DPe(t,e){if(typeof t=="string"&&e&&e.dateFormat==null&&(e.places!=null||e.digitSeparator!=null)){const i=Number(t);if(!isNaN(i))return i}return t}function jPe(t){return t?.type==="feature"}function _H(t){return!!t?.layer}function UPe(t){return t?.type==="map-image"}function VPe(t,e){const i=e.fieldInfos,r=e.fieldName,s=Tae(i,r)?.clone(),n=e.preventPlacesFormatting,o=e.layer,a=I7(o,r);if(s&&a?.type==="date"){const u=s.format||new Jv;u.dateFormat=u.dateFormat||"short-date-short-time",u.dateTimeFormatOptions=!_H(o)&&jPe(o)&&o.datesInUnknownTimezone||_H(o)&&UPe(o.layer)&&o.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,s.format=u}const l=s&&s.format;return typeof t=="string"&&gee(r)&&l?l.formatRasterPixelValue(t):typeof(t=DPe(t,l))=="string"||t==null||l==null?sE(t):n?Tm(t,{..._ee(l),minimumFractionDigits:0,maximumFractionDigits:20}):l.format(t)}function Tae(t,e){if(!t||!t.length||!e)return;const i=e.toLowerCase();let r;return t.some(s=>!(!s.fieldName||s.fieldName.toLowerCase()!==i)&&(r=s,!0)),r}function BPe({fieldName:t,graphic:e,layer:i}){if(ep(t)||!i||typeof i.getFeatureType!="function")return null;const{typeIdField:r}=i;if(!r||t!==r)return null;const s=i.getFeatureType(e);return s?s.name:null}function zPe({fieldName:t,value:e,graphic:i,layer:r}){if(ep(t)||!r||typeof r.getFieldDomain!="function")return null;const s=i&&r.getFieldDomain(t,{feature:i});return s&&s.type==="coded-value"?s.getName(e):null}function GPe(t,e){const{creatorField:i,creationDateField:r,editorField:s,editDateField:n}=t;if(!e)return;const o=e[n];if(typeof o=="number"){const l=e[s];return{type:"edit",date:hp(o,aN),user:l}}const a=e[r];if(typeof a=="number"){const l=e[i];return{type:"create",date:hp(a,aN),user:l}}return null}function qPe(t,e){const i=new Map;return t&&t.forEach(r=>{const s=qS(r.fieldName,e);r.fieldName=s,i.set(s.toLowerCase(),r)}),i}function xH(t){const e=[];if(!t)return e;const{fieldInfos:i,content:r}=t;return i&&e.push(...i),r&&Array.isArray(r)&&r.forEach(s=>{if(s.type==="fields"){const n=s&&s.fieldInfos;n&&e.push(...n)}}),e}function M7(t){return t.replace(MPe,e=>`&#${e.charCodeAt(0)};`)}function sE(t){return typeof t=="string"?t.replace(IPe,'<br class="esri-text-new-line" />'):t}function Iae(t){const{value:e,fieldName:i,fieldInfos:r,fieldInfoMap:s,layer:n,graphic:o}=t;if(e==null)return"";const a=zPe({fieldName:i,value:e,graphic:o,layer:n});if(a)return a;const l=BPe({fieldName:i,graphic:o,layer:n});if(l)return l;if(s.get(i.toLowerCase()))return VPe(e,{fieldInfos:r||Array.from(s.values()),fieldName:i,layer:n});const u=n&&n.fieldsIndex;return u&&u.isDateField(i)?hp(e,aN):sE(e)}function bR({fieldInfos:t,attributes:e,layer:i,graphic:r,fieldInfoMap:s,relatedInfos:n}){const o={};return n?.forEach(a=>ZPe({attributes:o,relatedInfo:a,fieldInfoMap:s,fieldInfos:t,layer:i})),e&&Object.keys(e).forEach(a=>{const l=e[a];o[a]=Iae({fieldName:a,fieldInfos:t,fieldInfoMap:s,layer:i,value:l,graphic:r})}),o}async function Mae(t,e){const{layer:i,graphic:r,outFields:s,objectIds:n,returnGeometry:o,spatialReference:a}=t,l=n[0];if(typeof l!="number"&&typeof l!="string"){const c="Could not query required fields for the specified feature. The feature's ID is invalid.",d={layer:i,graphic:r,objectId:l,requiredFields:s};return wH.warn(c,d),null}if(!vX(i)?.operations?.supportsQuery){const c="The specified layer cannot be queried. The following fields will not be available.",d={layer:i,graphic:r,requiredFields:s,returnGeometry:o};return wH.warn(c,d),null}const u=i.createQuery();return u.objectIds=n,u.outFields=s?.length?s:[i.objectIdField],u.returnGeometry=!!o,u.returnZ=!!o,u.returnM=!!o,u.outSpatialReference=a,(await i.queryFeatures(u,e)).features[0]}async function HPe(t){if(!t.expressionInfos?.length)return!1;const e=await cp(),{arcadeUtils:{hasGeometryFunctions:i}}=e;return i(t)}async function WPe({graphic:t,popupTemplate:e,layer:i,spatialReference:r},s){if(!i||!e||(typeof i.load=="function"&&await i.load(s),!t.attributes))return;const n=t.attributes[i.objectIdField];if(n==null)return;const o=[n],a=await e.getRequiredFields(i.fieldsIndex),l=Ewe(a,t),u=l?[]:a,c=e.returnGeometry||await HPe(e);if(l&&!c)return;const d=await Mae({layer:i,graphic:t,outFields:u,objectIds:o,returnGeometry:c,spatialReference:r},s);d&&(d.geometry&&(t.geometry=d.geometry),d.attributes&&(t.attributes={...t.attributes,...d.attributes}))}function ep(t=""){return!!t&&t.includes(wae)}function JPe(t){return t?`${wae}${t.layerId}/${t.fieldName}`:""}function SH({attributes:t,graphic:e,relatedInfo:i,fieldInfos:r,fieldInfoMap:s,layer:n}){t&&e&&i&&Object.keys(e.attributes).forEach(o=>{const a=JPe({layerId:i.relation.id.toString(),fieldName:o}),l=e.attributes[o];t[a]=Iae({fieldName:a,fieldInfos:r,fieldInfoMap:s,layer:n,value:l,graphic:e})})}function ZPe({attributes:t,relatedInfo:e,fieldInfoMap:i,fieldInfos:r,layer:s}){t&&e&&(e.relatedFeatures&&e.relatedFeatures&&e.relatedFeatures.forEach(n=>SH({attributes:t,graphic:n,relatedInfo:e,fieldInfoMap:i,fieldInfos:r,layer:s})),e.relatedStatsFeatures&&e.relatedStatsFeatures&&e.relatedStatsFeatures.forEach(n=>SH({attributes:t,graphic:n,relatedInfo:e,fieldInfoMap:i,fieldInfos:r,layer:s})))}const EH=t=>{if(!t)return!1;const e=t.toUpperCase();return e.includes("CURRENT_TIMESTAMP")||e.includes("CURRENT_DATE")||e.includes("CURRENT_TIME")},Aae=({layer:t,method:e,query:i,definitionExpression:r})=>{if(!t.capabilities?.query?.supportsCacheHint||e==="attachments")return;const s=ee(i.where)?i.where:null,n=ee(i.geometry)?i.geometry:null;EH(r)||EH(s)||n?.type==="extent"||i.resultType==="tile"||(i.cacheHint=!0)},YPe=({query:t,layer:e,method:i})=>{Aae({layer:e,method:i,query:t,definitionExpression:`${e.definitionExpression} ${e.serviceDefinitionExpression}`})},KPe=({queryPayload:t,layer:e,method:i})=>{Aae({layer:e,method:i,query:t,definitionExpression:`${e.definitionExpression} ${e.serviceDefinitionExpression}`})};function QPe(t,e,i){return t&&e&&i?TH(t.allLayers,e,i)||TH(t.allTables,e,i):null}function TH(t,e,i){return t.find(r=>r!==e&&r.type==="feature"&&r.url===e.url&&r.layerId===i.relatedTableId)}const IH={editing:!1,operations:{add:!0,update:!0,delete:!0}},Cae=Nt.ofType(aOe);let ha=class extends Pt{constructor(e){super(e),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities={...IH},this.activeAttachmentInfo=null,this.activeFileInfo=null,this.attachmentInfos=new Cae,this.fileInfos=new Nt,this.graphic=null,this.mode="view",this.filesEnabled=!1,this.addHandles(st(()=>this.graphic,()=>this._graphicChanged(),Fi))}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(e){return{...IH,...e}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){const{graphic:e}=this;if(!e)return!1;const i=e.layer||e.sourceLayer;return i?.loaded&&"capabilities"in i&&i.capabilities&&"operations"in i.capabilities&&"supportsResizeAttachments"in i.capabilities.operations&&i.capabilities.operations.supportsResizeAttachments||!1}async getAttachments(){const{_attachmentLayer:e,attachmentInfos:i}=this;if(!e||typeof e.queryAttachments!="function")throw new Ce("invalid-layer","getAttachments(): A valid layer is required.");const r=this._getObjectId(),s=new XA({objectIds:[r],returnMetadata:!0}),n=[],o=e.queryAttachments(s).then(l=>l[r]||n).catch(()=>n);this._getAttachmentsPromise=o,this.notifyChange("state");const a=await o;return i.removeAll(),a.length&&i.addMany(a),this._getAttachmentsPromise=null,this.notifyChange("state"),a}async addAttachment(e,i=this.graphic){const{_attachmentLayer:r,attachmentInfos:s,abilities:n}=this;if(!i)throw new Ce("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:i});if(!e)throw new Ce("invalid-attachment","addAttachment(): An attachment is required.",{attachment:e});if(!n.operations?.add)throw new Ce("invalid-abilities","addAttachment(): add abilities are required.");if(!r||typeof r.addAttachment!="function")throw new Ce("invalid-layer","addAttachment(): A valid layer is required.");const o=r.addAttachment(i,e).then(l=>this._queryAttachment(l.objectId,i)),a=await o;return s.add(a),a}async deleteAttachment(e){const{_attachmentLayer:i,attachmentInfos:r,graphic:s,abilities:n}=this;if(!e)throw new Ce("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!n.operations?.delete)throw new Ce("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!i||typeof i.deleteAttachments!="function")throw new Ce("invalid-layer","deleteAttachment(): A valid layer is required.");if(!s)throw new Ce("invalid-graphic","deleteAttachment(): A graphic is required.");const o=i.deleteAttachments(s,[e.id]).then(()=>e),a=await o;return r.remove(a),a}async updateAttachment(e,i=this.activeAttachmentInfo){const{_attachmentLayer:r,attachmentInfos:s,graphic:n,abilities:o}=this;if(!e)throw new Ce("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:e});if(!i)throw new Ce("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:i});if(!o.operations?.update)throw new Ce("invalid-abilities","updateAttachment(): Update abilities are required.");const a=s.findIndex(c=>c===i);if(!r||typeof r.updateAttachment!="function")throw new Ce("invalid-layer","updateAttachment(): A valid layer is required.");if(!n)throw new Ce("invalid-graphic","updateAttachment(): A graphic is required.");const l=r.updateAttachment(n,i.id,e).then(c=>this._queryAttachment(c.objectId)),u=await l;return s.splice(a,1,u),u}async commitFiles(){return await Promise.all(this.fileInfos.items.map(e=>this.addAttachment(e.form))),this.fileInfos.removeAll(),this.getAttachments()}addFile(e,i){if(!e||!i)return null;const r={file:e,form:i};return this.fileInfos.add(r),r}updateFile(e,i,r=this.activeFileInfo){if(!e||!i||!r)return null;const s=this.fileInfos.findIndex(n=>r===n);return s>-1&&this.fileInfos.splice(s,1,{file:e,form:i}),this.fileInfos.items[s]}deleteFile(e){const i=this.fileInfos.find(r=>r.file===e);return i?(this.fileInfos.remove(i),i):null}async _queryAttachment(e,i){const{_attachmentLayer:r}=this;if(!e||!r?.queryAttachments)throw new Ce("invalid-attachment-id","Could not query attachment.");const s=this._getObjectId(i),n=new XA({objectIds:[s],attachmentsWhere:`AttachmentId=${e}`,returnMetadata:!0});return r.queryAttachments(n).then(o=>o[s][0])}_getObjectId(e=this.graphic){return e?.getObjectId()??null}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:e}=this,i=_ae(e);this._attachmentLayer=i?i.type==="scene"&&ee(i.associatedLayer)?i.associatedLayer:i:null}};h([p()],ha.prototype,"abilities",void 0),h([mi("abilities")],ha.prototype,"castAbilities",null),h([p()],ha.prototype,"activeAttachmentInfo",void 0),h([p()],ha.prototype,"activeFileInfo",void 0),h([p({readOnly:!0,type:Cae})],ha.prototype,"attachmentInfos",void 0),h([p()],ha.prototype,"fileInfos",void 0),h([p({type:kn})],ha.prototype,"graphic",void 0),h([p()],ha.prototype,"mode",void 0),h([p({readOnly:!0})],ha.prototype,"state",null),h([p()],ha.prototype,"filesEnabled",void 0),h([p({readOnly:!0})],ha.prototype,"supportsResizeAttachments",null),ha=h([ce("esri.widgets.Attachments.AttachmentsViewModel")],ha);const A7=ha;function MH(t){const e=t.toLowerCase();return e==="image/bmp"||e==="image/emf"||e==="image/exif"||e==="image/gif"||e==="image/x-icon"||e==="image/jpeg"||e==="image/png"||e==="image/tiff"||e==="image/x-wmf"}function XPe(t){const e=Ui("esri/themes/base/images/files/");return t?t==="text/plain"?`${e}text-32.svg`:t==="application/pdf"?`${e}pdf-32.svg`:t==="text/csv"?`${e}csv-32.svg`:t==="application/gpx+xml"?`${e}gpx-32.svg`:t==="application/x-dwf"?`${e}cad-32.svg`:t==="application/postscript"||t==="application/json"||t==="text/xml"||t==="model/vrml"?`${e}code-32.svg`:t==="application/x-zip-compressed"||t==="application/x-7z-compressed"||t==="application/x-gzip"||t==="application/x-tar"||t==="application/x-gtar"||t==="application/x-bzip2"||t==="application/gzip"||t==="application/x-compress"||t==="application/x-apple-diskimage"||t==="application/x-rar-compressed"||t==="application/zip"?`${e}zip-32.svg`:t.includes("image/")?`${e}image-32.svg`:t.includes("audio/")?`${e}sound-32.svg`:t.includes("video/")?`${e}video-32.svg`:t.includes("msexcel")||t.includes("ms-excel")||t.includes("spreadsheetml")?`${e}excel-32.svg`:t.includes("msword")||t.includes("ms-word")||t.includes("wordprocessingml")?`${e}word-32.svg`:t.includes("powerpoint")||t.includes("presentationml")?`${e}report-32.svg`:`${e}generic-32.svg`:`${e}generic-32.svg`}function On(t){return(e,i)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:i})}}var e8e=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},$ae=function(t,e){for(var i=0,r=t.length;i<r;i++){var s=t[i];Array.isArray(s)?$ae(s,e):s!=null&&s!==!1&&(s.hasOwnProperty("vnodeSelector")||(s=e8e(s)),e.push(s))}},t8e=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:i[0],domNode:null};var s=[];return $ae(i,s),{vnodeSelector:t,properties:e||void 0,children:s,text:void 0,domNode:null}};function Ne(t,e,...i){return typeof t!="function"||E7(t)?t8e(t,e,...i):t(e,...i)}const AH={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},ji="esri-attachments",_y="esri-button",_t={base:ji,loaderContainer:`${ji}__loader-container`,loader:`${ji}__loader`,fadeIn:`${ji}--fade-in`,container:`${ji}__container`,containerList:`${ji}__container--list`,containerPreview:`${ji}__container--preview`,actions:`${ji}__actions`,deleteButton:`${ji}__delete-button`,addAttachmentButton:`${ji}__add-attachment-button`,errorMessage:`${ji}__error-message`,items:`${ji}__items`,item:`${ji}__item`,itemButton:`${ji}__item-button`,itemMask:`${ji}__item-mask`,itemMaskIcon:`${ji}__item-mask--icon`,itemImage:`${ji}__image`,itemImageResizable:`${ji}__image--resizable`,itemLabel:`${ji}__label`,itemFilename:`${ji}__filename`,itemChevronIcon:`${ji}__item-chevron-icon`,itemLink:`${ji}__item-link`,itemLinkOverlay:`${ji}__item-link-overlay`,itemLinkOverlayIcon:`${ji}__item-link-overlay-icon`,itemEditIcon:`${ji}__item-edit-icon`,itemAddIcon:`${ji}__item-add-icon`,itemAddButton:`${ji}__item-add-button`,formNode:`${ji}__form-node`,fileFieldset:`${ji}__file-fieldset`,fileLabel:`${ji}__file-label`,fileName:`${ji}__file-name`,fileInput:`${ji}__file-input`,metadata:`${ji}__metadata`,metadataFieldset:`${ji}__metadata-fieldset`,progressBar:`${ji}__progress-bar`,esriWidget:"esri-widget",esriButton:_y,buttonDisabled:`${_y}--disabled`,esriButtonSecondary:`${_y}--secondary`,esriButtonTertiary:`${_y}--tertiary`,esriButtonThird:`${_y}--third`,esriButtonSmall:`${_y}--small`,esriButtonHalf:`${_y}--half`,empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},wR=window.CSS;let mo=class extends Pn{constructor(e,i){super(e,i),this.displayType="auto",this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=null,this.visibleElements={...AH},this._supportsImageOrientation=wR&&wR.supports&&wR.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.viewModel||(this.viewModel=new A7),this.addHandles([bn(()=>this.viewModel?.attachmentInfos,"change",()=>this.scheduleRender()),bn(()=>this.viewModel?.fileInfos,"change",()=>this.scheduleRender()),st(()=>this.viewModel?.mode,()=>this._modeChanged(),Fi)])}loadDependencies(){return Promise.all([De(()=>import("./calcite-icon-7f660ce3.js"),["./calcite-icon-7f660ce3.js","./icon-d62e8920.js","./observers-fef7c483.js","./preload-helper-388ac9d5.js"],import.meta.url)])}get abilities(){return this.viewModel.abilities}set abilities(e){this.viewModel.abilities=e}get effectiveDisplayType(){const{displayType:e}=this;return e&&e!=="auto"?e:this.viewModel.supportsResizeAttachments?"preview":"list"}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}castVisibleElements(e){return{...AH,...e}}addAttachment(){const{_addAttachmentForm:e,viewModel:i}=this;return this._set("submitting",!0),this._set("error",null),i.addAttachment(e).then(r=>(this._set("submitting",!1),this._set("error",null),i.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new Ce("attachments:add-attachment",this.messages.addErrorMessage,r)),r})}deleteAttachment(e){const{viewModel:i}=this;return this._set("submitting",!0),this._set("error",null),i.deleteAttachment(e).then(r=>(this._set("submitting",!1),this._set("error",null),i.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new Ce("attachments:delete-attachment",this.messages.deleteErrorMessage,r)),r})}updateAttachment(){const{viewModel:e}=this,{_updateAttachmentForm:i}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(i).then(r=>(this._set("submitting",!1),this._set("error",null),e.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new Ce("attachments:update-attachment",this.messages.updateErrorMessage,r)),r})}addFile(){const e=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);return this.viewModel.mode="view",e}updateFile(){const{viewModel:e}=this,i=e.updateFile(this.selectedFile,this._updateAttachmentForm,e.activeFileInfo);return e.mode="view",i}deleteFile(e){const i=this.viewModel.deleteFile(e||this.viewModel.activeFileInfo?.file);return this.viewModel.mode="view",i}render(){const{submitting:e,viewModel:i}=this,{state:r}=i;return Ne("div",{class:this.classes(_t.base,_t.esriWidget)},e?this.renderProgressBar():null,r==="loading"?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:e,visibleElements:i}=this;return e&&i.errorMessage?Ne("div",{key:"error-message",class:_t.errorMessage},e.message):null}renderAttachments(){const{activeFileInfo:e,mode:i,activeAttachmentInfo:r}=this.viewModel;return i==="add"?this.renderAddForm():i==="edit"?this.renderDetailsForm(r||e):this.renderAttachmentContainer()}renderLoading(){return Ne("div",{class:_t.loaderContainer,key:"loader"},Ne("div",{class:_t.loader}))}renderProgressBar(){return this.visibleElements.progressBar?Ne("div",{class:_t.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:e,selectedFile:i}=this,r=e||!i,s=this.visibleElements.cancelAddButton?Ne("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes(_t.esriButton,_t.esriButtonTertiary,_t.esriButtonSmall,_t.esriButtonHalf,e&&_t.buttonDisabled)},this.messages.cancel):null,n=this.visibleElements.addSubmitButton?Ne("button",{type:"submit",disabled:r,class:this.classes(_t.esriButton,_t.esriButtonSecondary,_t.esriButtonSmall,_t.esriButtonHalf,{[_t.buttonDisabled]:r})},this.messages.add):null,o=i?Ne("span",{key:"file-name",class:_t.fileName},i.name):null,a=Ne("form",{bind:this,afterCreate:d5,afterRemoved:Kq,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},Ne("fieldset",{class:_t.fileFieldset},o,Ne("label",{class:this.classes(_t.fileLabel,_t.esriButton,_t.esriButtonSecondary)},i?this.messages.changeFile:this.messages.selectFile,Ne("input",{class:_t.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),n,s);return Ne("div",{key:"add-form-container",class:_t.formNode},a)}renderDetailsForm(e){const{visibleElements:i,viewModel:r,selectedFile:s,submitting:n}=this,{abilities:o}=r,a=n||!s;let l,u,c,d;s?(l=s.type,u=s.name,c=s.size):e&&"file"in e?(l=e.file.type,u=e.file.name,c=e.file.size):e&&"contentType"in e&&(l=e.contentType,u=e.name,c=e.size,d=e.url);const f=o.editing&&o.operations?.delete&&i.deleteButton?Ne("button",{key:"delete-button",type:"button",disabled:n,bind:this,onclick:x=>this._submitDeleteAttachment(x,e),class:this.classes(_t.esriButton,_t.esriButtonSmall,_t.esriButtonTertiary,_t.deleteButton,{[_t.buttonDisabled]:n})},this.messages.delete):void 0,m=o.editing&&o.operations?.update&&i.updateButton?Ne("button",{disabled:a,key:"update-button",type:"submit",class:this.classes(_t.esriButton,_t.esriButtonSmall,_t.esriButtonThird,{[_t.buttonDisabled]:a})},this.messages.update):void 0,g=this.visibleElements.cancelUpdateButton?Ne("button",{disabled:n,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(_t.esriButton,_t.esriButtonSmall,_t.esriButtonTertiary,_t.esriButtonThird,{[_t.buttonDisabled]:n})},this.messages.cancel):void 0,v=o.editing&&o.operations?.update?Ne("fieldset",{key:"file",class:_t.fileFieldset},Ne("span",{key:"file-name",class:_t.fileName},u),Ne("label",{class:this.classes(_t.fileLabel,_t.esriButton,_t.esriButtonSecondary)},this.messages.changeFile,Ne("input",{class:_t.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):void 0,b=Ne("fieldset",{key:"size",class:_t.metadataFieldset},Ne("label",null,_Pe(this.messagesUnits,c??0))),_=Ne("fieldset",{key:"content-type",class:_t.metadataFieldset},Ne("label",null,l)),S=ee(d)?Ne("a",{class:_t.itemLink,href:d,rel:"noreferrer",target:"_blank"},this.renderImageMask(e,400),Ne("div",{class:_t.itemLinkOverlay},Ne("span",{class:_t.itemLinkOverlayIcon},Ne("calcite-icon",{icon:"launch"})))):this.renderImageMask(e,400),M=Ne("form",{bind:this,afterCreate:d5,afterRemoved:Kq,"data-node-ref":"_updateAttachmentForm",onsubmit:x=>this._submitUpdateAttachment(x,e)},Ne("div",{class:_t.metadata},b,_),v,Ne("div",{class:_t.actions},f,g,m));return Ne("div",{key:"edit-form-container",class:_t.formNode},S,M)}renderImageMask(e,i){return e?"file"in e?this.renderGenericImageMask(e.file.name,e.file.type):this.renderImageMaskForAttachment(e,i):null}renderGenericImageMask(e,i){const{supportsResizeAttachments:r}=this.viewModel,s=XPe(i),n={[_t.itemImageResizable]:r};return Ne("div",{class:this.classes(_t.itemMaskIcon,_t.itemMask)},Ne("img",{title:e,alt:e,src:s,class:this.classes(n,_t.itemImage)}))}renderImageMaskForAttachment(e,i){const{supportsResizeAttachments:r}=this.viewModel;if(!e)return null;const{contentType:s,name:n,url:o}=e;if(!r||!MH(s))return this.renderGenericImageMask(n,s);const a=this._getCSSTransform(e),l=a?{transform:a,"image-orientation":"none"}:{},u=`${o}${o?.includes("?")?"&":"?"}w=${i}`,c={[_t.itemImageResizable]:r};return Ne("div",{class:this.classes(_t.itemMask)},Ne("img",{styles:l,alt:n,title:n,src:u,class:this.classes(c,_t.itemImage)}))}renderFile(e){const{file:i}=e;return Ne("li",{class:_t.item,key:i},Ne("button",{key:"details-button",bind:this,class:_t.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,onclick:()=>this._startEditFile(e),type:"button"},this.renderImageMask(e),Ne("label",{class:_t.itemLabel},Ne("span",{class:_t.itemFilename},i.name||this.messages.noTitle),Ne("span",{"aria-hidden":"true",class:this.classes(_t.itemChevronIcon,Th(this.container)?_t.iconLeft:_t.iconRight)}))))}renderAttachmentInfo({attachmentInfo:e,displayType:i}){const{viewModel:r,effectiveDisplayType:s}=this,{abilities:n,supportsResizeAttachments:o}=r,{contentType:a,name:l,url:u}=e,c=this.renderImageMask(e,i==="list"?48:400),d=n.editing?Ne("span",{"aria-hidden":"true",class:this.classes(_t.itemChevronIcon,Th(this.container)?_t.iconLeft:_t.iconRight)}):null,f=[c,s==="preview"&&o&&MH(a)?null:Ne("label",{class:_t.itemLabel},Ne("span",{class:_t.itemFilename},l||this.messages.noTitle),d)],m=n.editing?Ne("button",{key:"details-button",bind:this,class:_t.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},f):Ne("a",{key:"details-link",class:_t.itemButton,href:u??void 0,target:"_blank"},f);return Ne("li",{class:_t.item,key:e},m)}renderAttachmentContainer(){const{effectiveDisplayType:e,viewModel:i,visibleElements:r}=this,{attachmentInfos:s,abilities:n,fileInfos:o}=i,a=!!s?.length,l=!!o?.length,u={[_t.containerList]:e!=="preview",[_t.containerPreview]:e==="preview"},c=n.editing&&n.operations?.add&&r.addButton?Ne("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(_t.esriButton,_t.esriButtonTertiary,_t.addAttachmentButton),type:"button"},Ne("span",{"aria-hidden":"true",class:this.classes(_t.itemAddIcon,_t.iconPlus)}),this.messages.add):void 0,d=a?Ne("ul",{key:"attachments-list",class:_t.items},s.toArray().map(g=>this.renderAttachmentInfo({attachmentInfo:g,displayType:e}))):void 0,f=l?Ne("ul",{key:"file-list",class:_t.items},o.toArray().map(g=>this.renderFile(g))):void 0,m=l||a?void 0:Ne("div",{class:_t.empty},this.messages.noAttachments);return Ne("div",{key:"attachments-container",class:this.classes(_t.container,u)},d,f,m,c)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){const i=e.target,r=i&&i.files&&i.files.item(0);this._set("selectedFile",r)}_submitDeleteAttachment(e,i){e.preventDefault(),i&&("file"in i?this.deleteFile(i.file):i&&this.deleteAttachment(i))}_submitAddAttachment(e){e.preventDefault(),this.viewModel.filesEnabled?this.addFile():this.addAttachment()}_submitUpdateAttachment(e,i){e.preventDefault(),i&&"file"in i?this.updateFile():this.updateAttachment()}_startEditAttachment(e){const{viewModel:i}=this;i.activeFileInfo=null,i.activeAttachmentInfo=e,i.mode="edit"}_startEditFile(e){const{viewModel:i}=this;i.activeAttachmentInfo=null,i.activeFileInfo=e,i.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e){const{orientationInfo:i}=e;return!this._supportsImageOrientation&&i?[i.rotation?`rotate(${i.rotation}deg)`:"",i.mirrored?"scaleX(-1)":""].join(" "):""}};h([p()],mo.prototype,"abilities",null),h([p()],mo.prototype,"displayType",void 0),h([p({readOnly:!0})],mo.prototype,"effectiveDisplayType",null),h([p()],mo.prototype,"graphic",null),h([p()],mo.prototype,"label",null),h([p(),On("esri/widgets/Attachments/t9n/Attachments")],mo.prototype,"messages",void 0),h([p(),On("esri/core/t9n/Units")],mo.prototype,"messagesUnits",void 0),h([p({readOnly:!0})],mo.prototype,"selectedFile",void 0),h([p({readOnly:!0})],mo.prototype,"submitting",void 0),h([p({readOnly:!0})],mo.prototype,"error",void 0),h([p({type:A7})],mo.prototype,"viewModel",void 0),h([p()],mo.prototype,"visibleElements",void 0),h([mi("visibleElements")],mo.prototype,"castVisibleElements",null),mo=h([ce("esri.widgets.Attachments")],mo);const i8e=mo;let ix=class extends A7{constructor(e){super(e),this.description=null,this.title=null}};h([p()],ix.prototype,"description",void 0),h([p()],ix.prototype,"title",void 0),ix=h([ce("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],ix);const C7=ix,r8e={heading:"esri-widget__heading"};function kC({level:t,class:e,...i},r){const s=s8e(t);return Ne(`h${s}`,{...i,class:Roe(r8e.heading,e),role:"heading","aria-level":String(s)},r)}function s8e(t){return Da(Math.ceil(t),1,6)}const _R="esri-feature-element-info",xR={base:_R,title:`${_R}__title`,description:`${_R}__description`};let kv=class extends Pn{constructor(e,i){super(e,i),this.description=null,this.headingLevel=2,this.title=null}render(){return Ne("div",{class:xR.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:e}=this;return e?Ne(kC,{level:this.headingLevel,class:xR.title},e):null}renderDescription(){const{description:e}=this;return e?Ne("div",{key:"description",class:xR.description},e):null}};h([p()],kv.prototype,"description",void 0),h([p()],kv.prototype,"headingLevel",void 0),h([p()],kv.prototype,"title",void 0),kv=h([ce("esri.widgets.Feature.support.FeatureElementInfo")],kv);const LC=kv,n8e={base:"esri-feature-attachments"};let rh=class extends Pn{constructor(e,i){super(e,i),this._featureElementInfo=null,this.attachmentsWidget=new i8e,this.headingLevel=2,this.viewModel=new C7}initialize(){this._featureElementInfo=new LC,this.addHandles([st(()=>[this.viewModel?.description,this.viewModel?.title,this.headingLevel],()=>this._setupFeatureElementInfo(),Fi),st(()=>this.viewModel,e=>this.attachmentsWidget.viewModel=e,Fi)])}destroy(){this.attachmentsWidget.destroy(),this._featureElementInfo?.destroy()}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get displayType(){return this.attachmentsWidget.displayType}set displayType(e){this.attachmentsWidget.displayType=e}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){const{attachmentsWidget:e}=this;return Ne("div",{class:n8e.base},this._featureElementInfo?.render(),e?.render())}_setupFeatureElementInfo(){const{description:e,title:i,headingLevel:r}=this;this._featureElementInfo?.set({description:e,title:i,headingLevel:r})}};h([p({readOnly:!0})],rh.prototype,"attachmentsWidget",void 0),h([p()],rh.prototype,"description",null),h([p()],rh.prototype,"displayType",null),h([p()],rh.prototype,"graphic",null),h([p()],rh.prototype,"headingLevel",void 0),h([p()],rh.prototype,"title",null),h([p({type:C7})],rh.prototype,"viewModel",void 0),rh=h([ce("esri.widgets.Feature.FeatureAttachments")],rh);const o8e=rh;let Mf=class extends ea(Pt){constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(st(()=>this.creator,i=>{this._destroyContent(),this._createContent(i)},Fi))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:e,graphic:i,destroyer:r}=this;e&&i&&(x5(r,{graphic:i}).catch(()=>null),this._set("created",null))}async _createContent(e){const i=this.graphic;if(!i||!e)return;const r=x5(e,{graphic:i}).catch(()=>null);this._loadingPromise=r,this.notifyChange("state");const s=await r;r===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",s))}};h([p({readOnly:!0})],Mf.prototype,"created",void 0),h([p()],Mf.prototype,"creator",void 0),h([p()],Mf.prototype,"destroyer",void 0),h([p({type:kn})],Mf.prototype,"graphic",void 0),h([p({readOnly:!0})],Mf.prototype,"state",null),Mf=h([ce("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],Mf);const S5=Mf;function fl(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${e}'`);return{value:l8e(t[e])}}}function a8e(t){const e=t?.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function l8e(t){return function(e,...i){a8e(e)?kke(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...i)}}function u8e(t){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const i=e._delegatedEventNames,r=Array.isArray(t)?t:c8e(t);i.push(...r)}}function c8e(t){return t.split(",").map(e=>e.trim())}const Oae="calcite-mode-";function h8e(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replace(/\s|'|"/g,"")}function E5(){return h8e().startsWith("dark")}function d8e(){return`${Oae}${E5()?"dark":"light"}`}function p8e(t){f8e(t),t.classList.add(d8e())}function f8e(t){Array.from(t.classList).forEach(e=>{e.startsWith(Oae)&&t.classList.remove(e)})}function Rae(t){return t&&typeof t.render=="function"}function m8e(t){return t&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}const SR="esri-feature-content",ER={base:SR,loaderContainer:`${SR}__loader-container`,loader:`${SR}__loader`};let Lv=class extends Pn{constructor(e,i){super(e,i),this.viewModel=null,this._addTargetToAnchors=r=>{Array.from(r.querySelectorAll("a")).forEach(s=>{xae(s.href)&&!s.hasAttribute("target")&&s.setAttribute("target","_blank")})}}get creator(){return this.viewModel?.creator}set creator(e){this.viewModel&&(this.viewModel.creator=e)}get graphic(){return this.viewModel?.graphic}set graphic(e){this.viewModel&&(this.viewModel.graphic=e)}renderLoading(){return Ne("div",{class:ER.loaderContainer,key:"loader"},Ne("div",{class:ER.loader}))}renderCreated(){const e=this.viewModel?.created;return e?e instanceof HTMLElement?Ne("div",{key:e,bind:e,afterCreate:this._attachToNode}):Rae(e)?Ne("div",{key:e},!e.destroyed&&e.render()):Ne("div",{key:e,innerHTML:e,afterCreate:this._addTargetToAnchors}):null}render(){const e=this.viewModel?.state;return Ne("div",{class:ER.base},e==="loading"?this.renderLoading():this.renderCreated())}_attachToNode(e){const i=this;e.appendChild(i)}};h([p()],Lv.prototype,"creator",null),h([p()],Lv.prototype,"graphic",null),h([p({type:S5})],Lv.prototype,"viewModel",void 0),Lv=h([ce("esri.widgets.Feature.FeatureContent")],Lv);const BM=Lv;let Od=class extends Pt{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:i}=this,r=[];return i?.forEach(s=>{if(!(!s.hasOwnProperty("visible")||s.visible))return;const n=s.clone();n.label=Sae(n,e),r.push(n)}),r}};h([p()],Od.prototype,"attributes",void 0),h([p({type:[Cee]})],Od.prototype,"expressionInfos",void 0),h([p()],Od.prototype,"description",void 0),h([p({type:[R3]})],Od.prototype,"fieldInfos",void 0),h([p({readOnly:!0})],Od.prototype,"formattedFieldInfos",null),h([p()],Od.prototype,"title",void 0),Od=h([ce("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],Od);const PC=Od,y8e=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function g8e(t){let e=null;return y8e.some(i=>(i.pattern.test(t)&&(e=i),!!e)),e}function v8e(t,e){if(typeof e!="string"||!e)return e;const i=g8e(e);if(!i)return e;const r=e.match(i.pattern),s=r&&r[2],n=_c(_c(i.label,{messages:t,hierPart:s}),{appName:i.appName}),o=i.target?` target="${i.target}"`:"",a=i.target==="_blank"?' rel="noreferrer"':"";return e.replace(i.pattern,`<a${o} href="$1"${a}>${n}</a>`)}const DT="esri-feature-fields",q_={base:DT,fieldHeader:`${DT}__field-header`,fieldData:`${DT}__field-data`,fieldDataDate:`${DT}__field-data--date`,esriTable:"esri-widget__table"};let rc=class extends Pn{constructor(e,i){super(e,i),this._featureElementInfo=null,this.viewModel=new PC,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new LC,this.addHandles(st(()=>[this.viewModel?.description,this.viewModel?.title],()=>this._setupFeatureElementInfo(),Fi))}destroy(){this._featureElementInfo?.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get expressionInfos(){return this.viewModel.expressionInfos}set expressionInfos(e){this.viewModel.expressionInfos=e}get fieldInfos(){return this.viewModel.fieldInfos}set fieldInfos(e){this.viewModel.fieldInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}renderFieldInfo(e,i){const{attributes:r}=this.viewModel,s=e.fieldName,n=e.label||s,o=r?r[s]==null?"":r[s]:"",a=!(!e.format||!e.format.dateFormat),l=typeof o=="number"&&!a?this._forceLTR(o):v8e(this.messagesURIUtils,o),u={[q_.fieldDataDate]:a};return Ne("tr",{key:`fields-element-info-row-${s}-${i}`},Ne("th",{key:`fields-element-info-row-header-${s}-${i}`,class:q_.fieldHeader,innerHTML:n}),Ne("td",{key:`fields-element-info-row-data-${s}-${i}`,class:this.classes(q_.fieldData,u),innerHTML:l}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e?.length?Ne("table",{class:q_.esriTable,summary:this.messages.fieldsSummary},Ne("tbody",null,e.map((i,r)=>this.renderFieldInfo(i,r)))):null}render(){return Ne("div",{class:q_.base},this._featureElementInfo?.render(),this.renderFields())}_setupFeatureElementInfo(){const{description:e,title:i}=this;this._featureElementInfo?.set({description:e,title:i})}_forceLTR(e){return`&lrm;${e}`}};h([p()],rc.prototype,"attributes",null),h([p()],rc.prototype,"description",null),h([p()],rc.prototype,"expressionInfos",null),h([p()],rc.prototype,"fieldInfos",null),h([p()],rc.prototype,"title",null),h([p({type:PC,nonNullable:!0})],rc.prototype,"viewModel",void 0),h([p(),On("esri/widgets/Feature/t9n/Feature")],rc.prototype,"messages",void 0),h([p(),On("esri/widgets/support/t9n/uriUtils")],rc.prototype,"messagesURIUtils",void 0),rc=h([ce("esri.widgets.Feature.FeatureFields")],rc);const kae=rc,b8e={maximumFractionDigits:20};function w8e(t){return Tm(t,b8e)}const _8e="<",x8e=">",S8e=R9("short-date");function E8e(t,e,i,r){let s="";e===0?s=`${_8e} `:e===i&&(s=`${x8e} `);let n=null;return n=r?hp(t,S8e):w8e(t),s+n}const T8e=new It([64,64,64]);function I8e(t,e){const i=[],r=t.length-1;return t.length===5?i.push(0,2,4):i.push(0,r),t.map((s,n)=>i.includes(n)?E8e(s,n,r,e):null)}async function M8e(t,e,i){let r=!1,s=[],n=[];if(t.stops){const u=t.stops;s=u.map(c=>c.value),r=u.some(c=>!!c.label),r&&(n=u.map(c=>c.label))}const o=s[0],a=s[s.length-1];if(o==null&&a==null)return null;const l=r?null:I8e(s,i??!1);return(await Promise.all(s.map(async(u,c)=>({value:u,color:t.type==="opacity"?await A8e(u,t,e):(await De(()=>Promise.resolve().then(()=>Q9),void 0,import.meta.url)).getColor(t,u),label:r?n[c]:l?.[c]??""})))).reverse()}async function A8e(t,e,i=T8e){const r=new It(i),s=(await De(()=>Promise.resolve().then(()=>Q9),void 0,import.meta.url)).getOpacity(e,t);return s!=null&&(r.a=s),r}function C8e(t){if(!t.colorStops)return[];const e=[...t.colorStops].filter(r=>r.color?.a>0);let i=e.length-1;if(e&&e[0]){const r=e[i];r&&r.ratio!==1&&(e.push(new kx({ratio:1,color:r.color})),i++)}return e.map((r,s)=>{let n="";return s===0?n=t.legendOptions?.minLabel||"low":s===i&&(n=t.legendOptions?.maxLabel||"high"),{color:r.color,label:n,ratio:r.ratio}}).reverse()}tt.getLogger("esri.renderers.support.utils");async function Xa(t,e,i){iQ(t,e,()=>[]).push(...i)}async function $8e(t){const e=new Map;if(!t)return e;if("visualVariables"in t&&t.visualVariables){const i=t.visualVariables.filter(r=>r.type==="color");for(const r of i){const s=(await M8e(r)??[]).map(n=>n.color);await Xa(e,r.field||r.valueExpression,s)}}if(t.type==="heatmap"){const i=C8e(t).map(r=>r.color);await Xa(e,t.field||t.valueExpression,i)}else if(t.type==="pie-chart"){for(const i of t.attributes)await Xa(e,i.field||i.valueExpression,[i.color]);await Xa(e,"default",[t?.othersCategory?.color,N1(t.backgroundFillSymbol,null)])}else if(t.type==="dot-density"){for(const i of t.attributes)await Xa(e,i.field||i.valueExpression,[i.color]);await Xa(e,"default",[t.backgroundColor])}else if(t.type==="unique-value")if(t.authoringInfo?.type==="predominance")for(const i of t.uniqueValueInfos??[])await Xa(e,i.value.toString(),[N1(i.symbol,null)]);else{const i=(t.uniqueValueInfos??[]).map(a=>N1(a.symbol,null)),{field:r,field2:s,field3:n,valueExpression:o}=t;(r||o)&&await Xa(e,r||o,i),s&&await Xa(e,s,i),n&&await Xa(e,n,i)}else if(t.type==="class-breaks"){const i=t.classBreakInfos.map(n=>N1(n.symbol,null)),{field:r,valueExpression:s}=t;await Xa(e,r??s,i)}else t.type==="simple"&&await Xa(e,"default",[N1(t.symbol,null)]);return"defaultSymbol"in t&&t.defaultSymbol&&await Xa(e,"default",[N1(t.defaultSymbol,null)]),e.forEach((i,r)=>{const s=Sme(i.filter(Boolean),(n,o)=>JSON.stringify(n)===JSON.stringify(o));e.set(r,s)}),e}const O8e="esri.widgets.Feature.support.relatedFeatureUtils",CH=tt.getLogger(O8e),$H=new Map;function zM(t){if(!ep(t))return null;const[e,i]=t.split("/").slice(1);return{layerId:e,fieldName:i}}function R8e(t,e){if(!e.relationships)return null;let i=null;const{relationships:r}=e;return r.some(s=>s.id===parseInt(t,10)&&(i=s,!0)),i}function k8e({originRelationship:t,relationships:e,layerId:i}){let r=null;return e&&e.some(s=>(`${s.relatedTableId}`===i&&s.id===t?.id&&(r=s),!!r)),r}function L8e(t,e){const i=e.toLowerCase();for(const r in t)if(r.toLowerCase()===i)return t[r];return null}function P8e(t,e){const i=R8e(t,e);if(i)return{url:`${e.url}/${i.relatedTableId}`,sourceSpatialReference:e.spatialReference,relation:i,relatedFields:[],outStatistics:[]}}function N8e(t,e){if(!e||!t)return;const{features:i,statsFeatures:r}=t,s=i&&i.value;e.relatedFeatures=s?s.features:[];const n=r&&r.value;e.relatedStatsFeatures=n?n.features:[]}function F8e(t,e,i,r){const s=new tw;return s.outFields=["*"],s.relationshipId=typeof e.id=="number"?e.id:parseInt(e.id,10),s.objectIds=[t.attributes[i.objectIdField]],i.queryRelatedFeatures?.(s,r)??Promise.resolve({})}function D8e(t,e,i){let r=0;const s=[];for(;r<e.length;)s.push(`${t} IN (${e.slice(r,i+r)})`),r+=i;return s.join(" OR ")}async function j8e(t,e,i,r){const s=i.layerId.toString(),{layerInfo:n,relation:o,relatedFields:a,outStatistics:l,url:u,sourceSpatialReference:c}=e;if(!n||!o)return null;const d=k8e({originRelationship:o,relationships:n.relationships,layerId:s});if(d?.relationshipTableId&&d.keyFieldInRelationshipTable){const m=(await F8e(t,d,i,r))[t.attributes[i.objectIdField]];if(!m)return null;const g=m.features.map(v=>v.attributes[n.objectIdField]);if(l?.length&&n.supportsStatistics){const v=new Ls;v.where=D8e(n.objectIdField,g,1e3),v.outFields=a,v.outStatistics=l,v.sourceSpatialReference=c;const b={features:Promise.resolve(m),statsFeatures:kM(u,v)};return Fa(b)}}const f=d?.keyField;if(f){const m=C9(G8e(n.fields,f)),g=L8e(t.attributes,o.keyField),v=m?`${f}=${g}`:`${f}='${g}'`,b=kM(u,new Ls({where:v,outFields:e.relatedFields,sourceSpatialReference:c}),r),_=e.outStatistics&&e.outStatistics.length>0&&n.supportsStatistics?kM(u,new Ls({where:v,outFields:e.relatedFields,outStatistics:e.outStatistics,sourceSpatialReference:c}),r):null,S={features:b};return _&&(S.statsFeatures=_),Fa(S)}return null}function U8e(t,e){return Et(t,{query:{f:"json"},signal:e&&e.signal})}function V8e({relatedInfos:t,layer:e},i){const r={};return t.forEach((s,n)=>{const{relation:o}=s;if(!o){const d=new Ce("relation-required","A relation is required on a layer to retrieve related records.");throw CH.error(d),d}const{relatedTableId:a}=o;if(typeof a!="number"){const d=new Ce("A related table ID is required on a layer to retrieve related records.");throw CH.error(d),d}const l=`${e.url}/${a}`,u=$H.get(l),c=u||U8e(l);u||$H.set(l,c),r[n]=c}),ch(Fa(r),i)}function B8e({graphic:t,relatedInfos:e,layer:i},r){const s={};return e.forEach((n,o)=>{n.layerInfo&&(s[o]=j8e(t,n,i,r))}),Fa(s)}function z8e({relatedInfo:t,fieldName:e,fieldInfo:i}){if(t.relatedFields?.push(e),i.statisticType){const r=new Rie({statisticType:i.statisticType,onStatisticField:e,outStatisticFieldName:e});t.outStatistics?.push(r)}}function G8e(t,e){if(t!=null){e=e.toLowerCase();for(const i of t)if(i&&i.name.toLowerCase()===e)return i}return null}const OH={chartAnimation:!0};let Us=class extends Pt{constructor(e){super(e),this.abilities={...OH},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.isAggregate=!1,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(e){return{...OH,...e}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){const{formattedMediaInfoCount:i}=this,r=(e+i)%i;this.activeMediaInfoIndex=r}_pageContentElementMedia(e){const{activeMediaInfoIndex:i}=this,r=i+e;this._setContentElementMedia(r)}_formatMediaInfos(){const{mediaInfos:e,layer:i}=this,r=this.attributes??{},s=this.formattedAttributes??{},n=this.expressionAttributes??{},o=this.fieldInfoMap??new Map;return e?.map(a=>{const l=a?.clone();if(!l)return null;if(l.title=Xg({attributes:r,fieldInfoMap:o,globalAttributes:s,expressionAttributes:n,layer:i,text:l.title}),l.caption=Xg({attributes:r,fieldInfoMap:o,globalAttributes:s,expressionAttributes:n,layer:i,text:l.caption}),l.altText=Xg({attributes:r,fieldInfoMap:o,globalAttributes:s,expressionAttributes:n,layer:i,text:l.altText}),l.type==="image"){const{value:u}=l;return this._setImageValue({value:u,formattedAttributes:s,layer:i}),l.value.sourceURL?l:void 0}if(l.type==="pie-chart"||l.type==="line-chart"||l.type==="column-chart"||l.type==="bar-chart"){const{value:u}=l;return this._setChartValue({value:u,chartType:l.type,attributes:r,formattedAttributes:s,layer:i,expressionAttributes:n}),l}return null}).filter(ee)??[]}_setImageValue(e){const i=this.fieldInfoMap??new Map,{value:r,formattedAttributes:s,layer:n}=e,{linkURL:o,sourceURL:a}=r;if(a){const l=uN(a,n);r.sourceURL=lN({formattedAttributes:s,template:l,fieldInfoMap:i})}if(o){const l=uN(o,n);r.linkURL=lN({formattedAttributes:s,template:l,fieldInfoMap:i})}}_setChartValue(e){const{value:i,attributes:r,formattedAttributes:s,chartType:n,layer:o,expressionAttributes:a}=e,{popupTemplate:l,relatedInfos:u}=this,{fields:c,normalizeField:d}=i,f=o;if(i.fields=kPe(c,f),d&&(i.normalizeField=qS(d,f)),!c.some(g=>!!(s[g]!=null||ep(g)&&u?.size)))return;const m=l?.fieldInfos??[];c.forEach(g=>{if(ep(g))return void(i.series=[...i.series,...this._getRelatedChartInfos({fieldInfos:m,fieldName:g,formattedAttributes:s,chartType:n,value:i})]);const v=this._getChartOption({value:i,attributes:r,chartType:n,formattedAttributes:s,expressionAttributes:a,fieldName:g,fieldInfos:m});i.series.push(v)})}_getRelatedChartInfos(e){const{fieldInfos:i,fieldName:r,formattedAttributes:s,chartType:n,value:o}=e,a=[],l=zM(r),u=l&&this.relatedInfos?.get(l.layerId.toString());if(!u)return a;const{relatedFeatures:c,relation:d}=u;if(!d||!c)return a;const{cardinality:f}=d;return c.forEach(m=>{const{attributes:g}=m;g&&Object.keys(g).forEach(v=>{v===l.fieldName&&a.push(this._getChartOption({value:o,attributes:g,formattedAttributes:s,fieldName:r,chartType:n,relatedFieldName:v,hasMultipleRelatedFeatures:c?.length>1,fieldInfos:i}))})}),f==="one-to-many"||f==="many-to-many"?a:[a[0]]}_getTooltip({label:e,value:i,chartType:r}){return r==="pie-chart"?`${e}`:`${e}: ${i}`}_getChartOption(e){const{value:i,attributes:r,formattedAttributes:s,expressionAttributes:n,fieldName:o,relatedFieldName:a,fieldInfos:l,chartType:u,hasMultipleRelatedFeatures:c}=e,d=this.layer,f=this.fieldInfoMap??new Map,{normalizeField:m,tooltipField:g}=i,v=m?ep(m)?r[zM(m).fieldName]:r[m]:null,b=T7(o)&&n&&n[o]!==void 0?n[o]:a&&r[a]!==void 0?r[a]:r[o]!==void 0?r[o]:s[o],_=new xee({fieldName:o,value:b===void 0?null:b&&v?b/v:b});if(ep(o)){const I=f.get(o.toLowerCase()),$=g&&f.get(g.toLowerCase()),L=I?.fieldName??o,B=c&&g?zM(g).fieldName:$?.fieldName??g,z=c&&B?r[B]:s[B]??I?.label??I?.fieldName??a,H=c&&a?r[a]:s[L];return _.tooltip=this._getTooltip({label:z,value:H,chartType:u}),_}const S=Tae(l,o),M=qS(o,d),x=g&&s[g]!==void 0?s[g]:Sae(S||new R3({fieldName:M}),this.popupTemplate?.expressionInfos),T=s[M];return _.tooltip=this._getTooltip({label:x,value:T,chartType:u}),_}};h([p()],Us.prototype,"abilities",void 0),h([mi("abilities")],Us.prototype,"castAbilities",null),h([p()],Us.prototype,"activeMediaInfoIndex",void 0),h([p({readOnly:!0})],Us.prototype,"activeMediaInfo",null),h([p()],Us.prototype,"attributes",void 0),h([p()],Us.prototype,"description",void 0),h([p()],Us.prototype,"fieldInfoMap",void 0),h([p()],Us.prototype,"formattedAttributes",void 0),h([p()],Us.prototype,"expressionAttributes",void 0),h([p({readOnly:!0})],Us.prototype,"formattedMediaInfos",null),h([p()],Us.prototype,"isAggregate",void 0),h([p()],Us.prototype,"layer",void 0),h([p({readOnly:!0})],Us.prototype,"formattedMediaInfoCount",null),h([p()],Us.prototype,"mediaInfos",void 0),h([p()],Us.prototype,"popupTemplate",void 0),h([p()],Us.prototype,"relatedInfos",void 0),h([p()],Us.prototype,"title",void 0),Us=h([ce("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],Us);const e0=Us;var RH=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],q8e=[].concat(RH.slice(30,39),RH.slice(28,30).reverse()),H8e=[{name:"default",colors:q8e},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}];const kH="en-us",$7=new Map([["ar",()=>De(()=>import("./ar-bb1fe5ab.js"),["./ar-bb1fe5ab.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.a)],["bg-bg",()=>De(()=>import("./bg_BG-184a2bfa.js"),["./bg_BG-184a2bfa.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.b)],["bs-ba",()=>De(()=>import("./bs_BA-f32cc344.js"),["./bs_BA-f32cc344.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.b)],["ca-es",()=>De(()=>import("./ca_ES-d17ee95b.js"),["./ca_ES-d17ee95b.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.c)],["cs-cz",()=>De(()=>import("./cs_CZ-bcd1e782.js"),["./cs_CZ-bcd1e782.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.c)],["da-dk",()=>De(()=>import("./da_DK-27b1b06e.js"),["./da_DK-27b1b06e.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.d)],["de-de",()=>De(()=>import("./de_DE-c0a1d8dd.js"),["./de_DE-c0a1d8dd.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.d)],["de-ch",()=>De(()=>import("./de_CH-be7b4255.js"),["./de_CH-be7b4255.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.d)],["el-gr",()=>De(()=>import("./el_GR-05fb9ec0.js"),["./el_GR-05fb9ec0.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.e)],["en-us",()=>De(()=>import("./en_US-170979d8.js"),["./en_US-170979d8.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.e)],["en-ca",()=>De(()=>import("./en_CA-170979d8.js"),["./en_CA-170979d8.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.e)],["es-es",()=>De(()=>import("./es_ES-d0b66640.js"),["./es_ES-d0b66640.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.e)],["et-ee",()=>De(()=>import("./et_EE-56dd74d3.js"),["./et_EE-56dd74d3.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.e)],["fi-fi",()=>De(()=>import("./fi_FI-91d58cb9.js"),["./fi_FI-91d58cb9.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.f)],["fr-fr",()=>De(()=>import("./fr_FR-a11503e0.js"),["./fr_FR-a11503e0.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.f)],["he-il",()=>De(()=>import("./he_IL-90db98c4.js"),["./he_IL-90db98c4.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.h)],["hr-hr",()=>De(()=>import("./hr_HR-fac8bb29.js"),["./hr_HR-fac8bb29.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.h)],["hu-hu",()=>De(()=>import("./hu_HU-e8803856.js"),["./hu_HU-e8803856.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.h)],["id-id",()=>De(()=>import("./id_ID-86e57d06.js"),["./id_ID-86e57d06.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.i)],["it-it",()=>De(()=>import("./it_IT-2d4485ba.js"),["./it_IT-2d4485ba.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.i)],["ja-jp",()=>De(()=>import("./ja_JP-77c6c16d.js"),["./ja_JP-77c6c16d.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.j)],["ko-kr",()=>De(()=>import("./ko_KR-e155b9ab.js"),["./ko_KR-e155b9ab.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.k)],["lt-lt",()=>De(()=>import("./lt_LT-fde47ae9.js"),["./lt_LT-fde47ae9.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.l)],["lv-lv",()=>De(()=>import("./lv_LV-359be050.js"),["./lv_LV-359be050.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.l)],["nb-no",()=>De(()=>import("./nb_NO-30d57c1a.js"),["./nb_NO-30d57c1a.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.n)],["nl-nl",()=>De(()=>import("./nl_NL-cb904b48.js"),["./nl_NL-cb904b48.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.n)],["pl-pl",()=>De(()=>import("./pl_PL-58c54c9f.js"),["./pl_PL-58c54c9f.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.p)],["pt-br",()=>De(()=>import("./pt_BR-d2e10248.js"),["./pt_BR-d2e10248.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.p)],["pt-pt",()=>De(()=>import("./pt_PT-65a41842.js"),["./pt_PT-65a41842.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.p)],["ro-ro",()=>De(()=>import("./ro_RO-15e90e9f.js"),["./ro_RO-15e90e9f.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.r)],["ru-ru",()=>De(()=>import("./ru_RU-a74d21e5.js"),["./ru_RU-a74d21e5.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.r)],["sk-sk",()=>De(()=>import("./sk_SK-a928dbd1.js"),["./sk_SK-a928dbd1.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.s)],["sl-sl",()=>De(()=>import("./sl_SL-1a3c3078.js"),["./sl_SL-1a3c3078.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.s)],["sr-rs",()=>De(()=>import("./sr_RS-0b18b911.js"),["./sr_RS-0b18b911.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.s)],["sv-se",()=>De(()=>import("./sv_SE-ce7e3f84.js"),["./sv_SE-ce7e3f84.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.s)],["th-th",()=>De(()=>import("./th_TH-1448f333.js"),["./th_TH-1448f333.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.t)],["tr-tr",()=>De(()=>import("./tr_TR-dd92f630.js"),["./tr_TR-dd92f630.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.t)],["uk-ua",()=>De(()=>import("./uk_UA-fe4434ed.js"),["./uk_UA-fe4434ed.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.u)],["vi-vn",()=>De(()=>import("./vi_VN-41938633.js"),["./vi_VN-41938633.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.v)],["zh-cn",()=>De(()=>import("./zh_Hans-524a1291.js"),["./zh_Hans-524a1291.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.z)],["zh-hk",()=>De(()=>import("./zh_Hant-0e1f08e5.js"),["./zh_Hant-0e1f08e5.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.z)],["zh-tw",()=>De(()=>import("./zh_Hant-0e1f08e5.js"),["./zh_Hant-0e1f08e5.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(t=>t.z)]]);function W8e(t){const e=t.split("-")[0].toLowerCase();let i=null;for(const r of $7.keys())if(r.startsWith(e)){i=r;break}return i}function J8e(t){return t?$7.has(t.toLowerCase())?t.toLowerCase():W8e(t)||kH:kH}let U1=null,H_=null;async function Z8e(t=gu()){if(t=J8e(t),U1&&t===H_)return U1;U1=De(()=>import("./index-a1a574a3.js"),["./index-a1a574a3.js","./_commonjsHelpers-2f3e7994.js"],import.meta.url).then(e=>e.i),H_=t;try{const[e,i]=await Promise.all([U1,$7.get(H_)()]);H_===t&&(e.am4core.options.defaultLocale=i.default),e.am4core.options.suppressWarnings=!0,e.am4core.options.autoDispose=!0}catch{return U1=null,H_=null,null}return U1}function Y8e(t,e="default"){const i=H8e.find(r=>r.name===e);return i?i.colors.map(r=>t.color(r)):null}const Ro="esri-feature-media",Xr={base:Ro,mediaContainer:`${Ro}__container`,mediaItemContainer:`${Ro}__item-container`,mediaItem:`${Ro}__item`,mediaItemTitle:`${Ro}__item-title`,mediaItemCaption:`${Ro}__item-caption`,mediaPrevious:`${Ro}__previous`,mediaPreviousIconLTR:`${Ro}__previous-icon`,mediaPreviousIconRTL:`${Ro}__previous-icon--rtl`,mediaNext:`${Ro}__next`,mediaNextIconLTR:`${Ro}__next-icon`,mediaNextIconRTL:`${Ro}__next-icon--rtl`,mediaChart:`${Ro}__chart`,mediaButton:`${Ro}__button`,mediaIcon:`${Ro}__icon`,iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow"},TR=.05,IR=.95,MR=15,id="color",Zp="tooltip",W_="value",LH="default-line-value";let da=class extends Pn{constructor(e,i){super(e,i),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.viewModel=new e0,this.messages=null,this._getChartDependencies=async r=>{const s=await Z8e(),{destroyed:n,viewModel:o}=this;if(n||!o||!r)return;const{activeMediaInfo:a}=o,l=await this._getRendererColors(s);this._renderChart({chartDiv:r,mediaInfo:a,chartsModule:s,colorMap:l})}}initialize(){this._featureElementInfo=new LC,this.addHandles([st(()=>[this.viewModel?.activeMediaInfo,this.viewModel?.activeMediaInfoIndex],()=>this._setupMediaRefreshTimer(),Fi),st(()=>[this.viewModel?.description,this.viewModel?.title],()=>this._setupFeatureElementInfo(),Fi)])}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo?.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get activeMediaInfoIndex(){return this.viewModel.activeMediaInfoIndex}set activeMediaInfoIndex(e){this.viewModel.activeMediaInfoIndex=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get fieldInfoMap(){return this.viewModel.fieldInfoMap}set fieldInfoMap(e){this.viewModel.fieldInfoMap=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get mediaInfos(){return this.viewModel.mediaInfos}set mediaInfos(e){this.viewModel.mediaInfos=e}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(e){this.viewModel.popupTemplate=e}get relatedInfos(){return this.viewModel.relatedInfos}set relatedInfos(e){this.viewModel.relatedInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){return Ne("div",{bind:this,class:Xr.base,onkeyup:this._handleMediaKeyup},this._featureElementInfo?.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e}=this.viewModel;return e?Ne("div",{key:"media-element-container",class:Xr.mediaContainer},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:i}=this,{activeMediaInfoIndex:r,formattedMediaInfoCount:s}=this.viewModel,{value:n,refreshInterval:o,altText:a,title:l,type:u}=e,{sourceURL:c,linkURL:d}=n,f=xae(d??void 0)?"_blank":"_self",m=f==="_blank"?"noreferrer":"",g=o?i:null,v=g?g.timestamp:0,b=g?g.sourceURL:c,_=Ne("img",{alt:a||l,key:`media-${u}-${r}-${s}-${v}`,src:b??void 0});return(d?Ne("a",{title:l,href:d,rel:m,target:f},_):null)||_}renderChartMediaInfo(e){const{activeMediaInfoIndex:i,formattedMediaInfoCount:r}=this.viewModel;return Ne("div",{key:`media-${e.type}-${i}-${r}`,bind:this,class:Xr.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?e.type==="image"?this.renderImageMediaInfo(e):e.type.includes("chart")?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const i=e.title?Ne("div",{key:"media-title",class:Xr.mediaItemTitle,innerHTML:e.title}):null,r=e.caption?Ne("div",{key:"media-caption",class:Xr.mediaItemCaption,innerHTML:e.caption}):null;return Ne("div",{key:"media-container",class:Xr.mediaItemContainer},Ne("div",{key:"media-item-container",class:Xr.mediaItem},this.renderMediaInfoType()),i,r)}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const i=e==="previous",r=i?this.messages.previous:this.messages.next,s=i?this.classes(Xr.mediaButton,Xr.mediaPrevious):this.classes(Xr.mediaButton,Xr.mediaNext),n=i?this.classes(Xr.mediaIcon,Xr.mediaPreviousIconLTR,Xr.iconLeftTriangleArrow):this.classes(Xr.mediaIcon,Xr.mediaNextIconLTR,Xr.iconRightTriangleArrow),o=i?this.classes(Xr.mediaIcon,Xr.mediaPreviousIconRTL,Xr.iconRightTriangleArrow):this.classes(Xr.mediaIcon,Xr.mediaNextIconRTL,Xr.iconLeftTriangleArrow),a=i?"media-previous":"media-next",l=i?this._previous:this._next;return Ne("button",{type:"button",key:a,title:r,"aria-label":r,tabIndex:0,class:s,bind:this,onclick:l},Ne("span",{"aria-hidden":"true",class:n}),Ne("span",{"aria-hidden":"true",class:o}))}_setupFeatureElementInfo(){const{description:e,title:i}=this;this._featureElementInfo?.set({description:e,title:i})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_getRenderer(){const{isAggregate:e,layer:i}=this.viewModel;return e&&i?.featureReduction&&"renderer"in i.featureReduction?i.featureReduction.renderer:i?.renderer}async _getRendererColors(e){const{am4core:i}=e,r=new Map,s=this._getRenderer(),n="default";if(!s)return r;const o=await $8e(s);return o.delete(n),Array.from(o.values()).every(a=>a?.length===1)&&(r.set(LH,i.color({r:50,g:50,b:50,a:1})),Array.from(o.keys()).forEach(a=>{a&&r.set(a,i.color(o.get(a)?.[0].toCss(!0)))})),r}_handleMediaKeyup(e){const i=Tg(e);i==="ArrowLeft"&&(e.stopPropagation(),this.viewModel.previous()),i==="ArrowRight"&&(e.stopPropagation(),this.viewModel.next())}_renderChart(e){const{abilities:i}=this.viewModel,{chartsModule:r,chartDiv:s,mediaInfo:n,colorMap:o}=e,{value:a,type:l}=n,{am4core:u}=r,c=Y8e(u);function d(g){g instanceof u.ColorSet&&c&&(g.list=c)}E5()&&u.useTheme(r.am4themes_dark);const f=window.matchMedia("(prefers-reduced-motion: reduce)");i.chartAnimation&&!f.matches?u.useTheme(r.am4themes_animated):u.unuseTheme(r.am4themes_animated),u.useTheme(d);const m=l==="pie-chart"?this._createPieChart(e):this._createXYChart(e);s.setAttribute("aria-label",n.altText||n.title),m.data=a.series.map(g=>({[Zp]:g.tooltip,[W_]:g.value,[id]:o.get(g.fieldName)})).filter(g=>l!=="pie-chart"||g.value!=null&&g.value>0)}_customizeChartTooltip(e,i){e&&(e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=i.color("#ffffff"),e.background.fill=i.color({r:0,g:0,b:0,a:.7}))}_createPieChart(e){const{chartDiv:i,chartsModule:r}=e,{am4core:s,am4charts:n}=r,o=s.create(i,n.PieChart);o.rtl=Th(this.container);const a=o.series.push(new n.PieSeries);return a.labels.template.disabled=!0,a.ticks.template.disabled=!0,a.dataFields.value=W_,a.dataFields.category=Zp,this._customizeChartTooltip(a.tooltip,s),a.slices.template.propertyFields.fill=id,a.slices.template.propertyFields.stroke=id,o}_getMinSeriesValue(e){let i=0;return e.forEach(r=>i=Math.min(r.value,i)),i}_createColumnChart(e,i){const{chartsModule:r,mediaInfo:s}=i,{value:n}=s,{am4core:o,am4charts:a}=r,l=e.xAxes.push(new a.CategoryAxis);l.dataFields.category=Zp,l.renderer.labels.template.disabled=!0;const u=l.tooltip;this._customizeChartTooltip(u,o),u.events.on("sizechanged",()=>{u.dy=-u.contentHeight});const c=e.yAxes.push(new a.ValueAxis),d=c.renderer.labels.template;c.renderer.minLabelPosition=TR,c.renderer.maxLabelPosition=IR,c.min=this._getMinSeriesValue(n.series),this._customizeChartTooltip(c.tooltip,o),d.wrap=!0;const f=e.series.push(new a.ColumnSeries);f.dataFields.valueY=W_,f.dataFields.categoryX=Zp,f.columns.template.propertyFields.fill=id,f.columns.template.propertyFields.stroke=id,e.cursor=new a.XYCursor,n.series.length>MR&&(e.scrollbarX=new o.Scrollbar)}_createBarChart(e,i){const{chartsModule:r,mediaInfo:s}=i,{value:n}=s,{am4core:o,am4charts:a}=r,l=e.yAxes.push(new a.CategoryAxis);l.dataFields.category=Zp,l.renderer.inversed=!0,l.renderer.labels.template.disabled=!0;const u=l.tooltip;this._customizeChartTooltip(u,o),u.events.on("sizechanged",()=>{u.dx=u.contentWidth});const c=e.xAxes.push(new a.ValueAxis),d=c.renderer.labels.template;c.renderer.minLabelPosition=TR,c.renderer.maxLabelPosition=IR,c.min=this._getMinSeriesValue(n.series),this._customizeChartTooltip(c.tooltip,o),d.wrap=!0;const f=e.series.push(new a.ColumnSeries);f.dataFields.valueX=W_,f.dataFields.categoryY=Zp,f.columns.template.propertyFields.fill=id,f.columns.template.propertyFields.stroke=id,e.cursor=new a.XYCursor,n.series.length>MR&&(e.scrollbarY=new o.Scrollbar)}_createLineChart(e,i){const{chartsModule:r,mediaInfo:s,colorMap:n}=i,{value:o}=s,{am4core:a,am4charts:l}=r,u=e.xAxes.push(new l.CategoryAxis);u.dataFields.category=Zp,u.renderer.labels.template.disabled=!0;const c=u.tooltip;this._customizeChartTooltip(c,a),c.events.on("sizechanged",()=>{c.dy=-c.contentHeight});const d=e.yAxes.push(new l.ValueAxis),f=d.renderer.labels.template;d.renderer.minLabelPosition=TR,d.renderer.maxLabelPosition=IR,d.min=this._getMinSeriesValue(o.series),this._customizeChartTooltip(d.tooltip,a),f.wrap=!0;const m=e.series.push(new l.LineSeries);m.dataFields.categoryX=Zp,m.dataFields.valueY=W_,m.strokeWidth=1;const g=n.get(LH);g&&(m.stroke=g);const v=m.bullets.push(new l.CircleBullet);v.propertyFields.fill=id,v.propertyFields.stroke=id,e.cursor=new l.XYCursor,o.series.length>MR&&(e.scrollbarX=new a.Scrollbar)}_createXYChart(e){const{chartDiv:i,chartsModule:r,mediaInfo:s}=e,{type:n}=s,{am4core:o,am4charts:a}=r,l=o.create(i,a.XYChart);return l.rtl=Th(this.container),n==="column-chart"&&this._createColumnChart(l,e),n==="bar-chart"&&this._createBarChart(l,e),n==="line-chart"&&this._createLineChart(l,e),l}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const i=Date.now();this._refreshIntervalInfo={timestamp:i,sourceURL:e&&this._getImageSource(e,i)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&e.type==="image"&&e.refreshInterval&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:i,value:r}=e;if(!i)return;const s=6e4*i;this._updateMediaInfoTimestamp(r.sourceURL);const n=setInterval(()=>{this._updateMediaInfoTimestamp(r.sourceURL)},s);this._refreshTimer=n}_getImageSource(e,i){const r=e.includes("?")?"&":"?",[s,n=""]=e.split("#");return`${s}${r}timestamp=${i}${n?"#":""}${n}`}};h([p()],da.prototype,"attributes",null),h([p()],da.prototype,"activeMediaInfoIndex",null),h([p()],da.prototype,"description",null),h([p()],da.prototype,"fieldInfoMap",null),h([p()],da.prototype,"layer",null),h([p()],da.prototype,"mediaInfos",null),h([p()],da.prototype,"popupTemplate",null),h([p()],da.prototype,"relatedInfos",null),h([p()],da.prototype,"title",null),h([p({type:e0})],da.prototype,"viewModel",void 0),h([p(),On("esri/widgets/Feature/t9n/Feature")],da.prototype,"messages",void 0),da=h([ce("esri.widgets.Feature.FeatureMedia")],da);const Lae=da,K8e=["$datastore","$map","$layer","$aggregatedfeatures"],Q8e="esri.widgets.Feature.support.arcadeFeatureUtils",X8e=tt.getLogger(Q8e);function e6e(t){return typeof t=="string"?sE(M7(t)):Array.isArray(t)?t6e(t):t?.declaredClass==="esri.arcade.Dictionary"?i6e(t):t}function t6e(t){return`<ul class="esri-widget__list">${t.map(e=>`<li>${typeof e=="string"?sE(M7(e)):e}</li>`).join("")}</ul>`}function i6e(t){return`<table class="esri-widget__table">${t.keys().map(e=>{const i=t.field(e);return`<tr><th>${e}</th><td>${typeof i=="string"?sE(M7(i)):i}</td></tr>`}).join("")}</table>`}function r6e({aggregatedFeatures:t,arcadeUtils:e,featureSetVars:i,context:r,viewInfo:s,map:n,graphic:o,interceptor:a}){i.forEach(l=>{const u=l.toLowerCase(),c=s.sr,d={map:n,spatialReference:c,interceptor:a};if(u==="$map"&&(r.vars[u]=e.convertMapToFeatureSetCollection(d)),u==="$layer"&&(r.vars[u]=e.convertFeatureLayerToFeatureSet({layer:o.sourceLayer,spatialReference:c,interceptor:a})),u==="$datastore"&&(r.vars[u]=e.convertServiceUrlToWorkspace({url:o.sourceLayer.url,spatialReference:c,interceptor:a})),u==="$aggregatedfeatures"){const f=o.layer,{fields:m,objectIdField:g,geometryType:v,spatialReference:b,displayField:_}=f,S=new xC({fields:m,objectIdField:g,geometryType:v,spatialReference:b,displayField:_,...f.type==="feature"?{templates:f.templates,typeIdField:f.typeIdField,types:f.types}:null,source:t});r.vars[u]=e.convertFeatureLayerToFeatureSet({layer:S,spatialReference:b,interceptor:a})}})}function Pae(){return De(()=>import("./arcadeUtils-eee1ed7b.js").then(t=>t.ax),["./arcadeUtils-eee1ed7b.js","./preload-helper-388ac9d5.js","./arcadeTimeUtils-d6b8096e.js","./executionError-c1d13a98.js","./number-3b0ee09c.js"],import.meta.url)}function s6e(t){return"createQuery"in t&&"queryFeatures"in t}async function n6e({graphic:t,view:e}){const{isAggregate:i,layer:r}=t;if(!i||!r||e?.type!=="2d")return[];const s=await e.whenLayerView(r);if(!s6e(s))return[];const n=s.createQuery(),o=t.getObjectId();n.aggregateIds=o!=null?[o]:[];const{features:a}=await s.queryFeatures(n);return a}async function Nae({expressionInfo:t,arcadeUtils:e,interceptor:i,spatialReference:r,map:s,graphic:n,view:o}){if(!t||!t.expression)return null;const a=e.createSyntaxTree(t.expression),l=K8e.filter(m=>e.hasVariable(a,m)),[u]=await Promise.all([n6e({graphic:n,view:o}),e.loadScriptDependencies(a,!0,l)]),c=e.getViewInfo({spatialReference:r}),d=e.createExecContext(n,c);d.interceptor=i,d.useAsync=!0,r6e({aggregatedFeatures:u,arcadeUtils:e,featureSetVars:l,context:d,viewInfo:c,map:s,graphic:n,interceptor:i});const f=e.createFunction(a,d);return e.executeAsyncFunction(f,d).catch(m=>X8e.error("arcade-execution-error",{error:m,graphic:n,expressionInfo:t}))}async function o6e({expressionInfos:t,spatialReference:e,graphic:i,interceptor:r,map:s,view:n}){if(!t||!t.length)return{};const o=await Pae(),a={};for(const c of t)a[`expression/${c.name}`]=Nae({expressionInfo:c,arcadeUtils:o,interceptor:r,spatialReference:e,map:s,graphic:i,view:n});const l=await Fa(a),u={};for(const c in l)u[c]=e6e(l[c].value);return u}const a6e=1;let al=class extends ea(Pt){constructor(e){super(e),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:i}=this;i&&i.abort(),this._abortController=null},this._createVM=()=>{const i=this.contentElement?.type;this.contentElementViewModel?.destroy();const r=i==="fields"?new PC:i==="media"?new e0:i==="text"?new S5:null;this._set("contentElementViewModel",r)},this._compile=async()=>{this._cancelQuery();const i=new AbortController;this._abortController=i,await this._compileExpression(),this._abortController===i&&(this._abortController=null)},this._compileThrottled=Cb(this._compile,a6e,this),this._compileExpression=async()=>{const{expressionInfo:i,graphic:r,interceptor:s,spatialReference:n,map:o,view:a,_abortController:l}=this;if(!(i&&r&&n&&o))return void this._set("contentElement",null);const u=await Pae();if(l!==this._abortController)return;const c=await Nae({arcadeUtils:u,expressionInfo:i,graphic:r,interceptor:s,map:o,spatialReference:n,view:a});if(!c||c.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const d=await c.castAsJsonAsync(l?.signal),f=d?.type,m=f==="media"?AS.fromJSON(d):f==="text"?Yb.fromJSON(d):f==="fields"?Zb.fromJSON(d):null;this._set("contentElement",m)},this.handles.add([st(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),Fi),st(()=>[this.contentElement],()=>this._createVM(),Fi)])}destroy(){this._cancelQuery(),this.contentElementViewModel?.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){return this.view?.spatialReference??null}set spatialReference(e){this._override("spatialReference",e)}get state(){const{_abortController:e,contentElement:i,contentElementViewModel:r}=this;return e?"loading":i||r?"ready":"disabled"}get map(){return this.view?.map??null}set map(e){this._override("map",e)}};h([p()],al.prototype,"_abortController",void 0),h([p({type:vee})],al.prototype,"expressionInfo",void 0),h([p({type:kn})],al.prototype,"graphic",void 0),h([p({readOnly:!0})],al.prototype,"contentElement",void 0),h([p({readOnly:!0})],al.prototype,"contentElementViewModel",void 0),h([p()],al.prototype,"interceptor",void 0),h([p()],al.prototype,"spatialReference",null),h([p({readOnly:!0})],al.prototype,"state",null),h([p()],al.prototype,"map",null),h([p()],al.prototype,"view",void 0),al=h([ce("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],al);const O7=al,jT={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let GM=class extends Pn{constructor(e,i){super(e,i),this._contentWidget=null,this.viewModel=new O7}initialize(){this.addHandles(st(()=>this.viewModel?.contentElementViewModel,()=>this._setupExpressionWidget(),Fi))}destroy(){this._destroyContentWidget()}renderLoading(){return Ne("div",{key:"loading-container",class:jT.loadingSpinnerContainer},Ne("span",{class:this.classes(jT.iconLoading,jT.spinner)}))}render(){const{state:e}=this.viewModel;return Ne("div",{class:jT.base},e==="loading"?this.renderLoading():e==="disabled"?null:this._contentWidget?.render())}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:i}=this.viewModel,r=i?.type;this._destroyContentWidget();const s=e?r==="fields"?new kae({viewModel:e}):r==="media"?new Lae({viewModel:e}):r==="text"?new BM({viewModel:e}):null:null;this._contentWidget=s,this.scheduleRender()}};h([p({type:O7})],GM.prototype,"viewModel",void 0),GM=h([ce("esri.widgets.Feature.FeatureExpression")],GM);const l6e=GM,AR=100;let lr=class extends Er(qm(ea(Pt))){constructor(e){super(e),this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.featuresPerPage=10,this.description=null,this.graphic=null,this.layer=null,this.map=null,this.orderByFields=null,this.featureCount=0,this.relationshipId=null,this.showAllEnabled=!1,this.title=null,this._cancelQuery=()=>{const{_queryAbortController:i}=this;i&&i.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:i}=this;i&&i.abort(),this._queryFeatureCountAbortController=null},this._cancelQueryPage=()=>{const{_queryPageAbortController:i}=this;i&&i.abort(),this._queryPageAbortController=null},this._queryController=async()=>{this._cancelQuery();const i=new AbortController;this._queryAbortController=i,await fb(this._query()),this._queryAbortController===i&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._cancelQueryFeatureCount();const i=new AbortController;this._queryFeatureCountAbortController=i,await fb(this._queryFeatureCount()),this._queryFeatureCountAbortController===i&&(this._queryFeatureCountAbortController=null)},this._queryPageController=async()=>{const i=new AbortController;this._queryPageAbortController=i,await fb(this._queryPage()),this._queryPageAbortController===i&&(this._queryPageAbortController=null)},this._queryThrottled=Cb(this._queryController,AR,this),this._queryFeatureCountThrottled=Cb(this._queryFeatureCountController,AR,this),this._queryPageThrottled=Cb(this._queryPageController,AR,this),this._query=async()=>{const{_queryAbortController:i,relatedFeatures:r}=this;this._destroyRelatedFeatureViewModels(),this.featurePage=1,r.removeAll(),r.addMany(this._sliceFeatures(await this._queryRelatedFeatures({signal:i?.signal})))},this.handles.add([st(()=>[this.displayCount,this.graphic,this.layer,this.map,this.orderByFieldsFixedCasing,this.relationshipId,this.featuresPerPage,this.showAllEnabled,this.canQuery,this.featureCount],()=>this._queryThrottled(),Fi),st(()=>[this.featurePage,this.showAllEnabled],()=>this._queryPageThrottled()),st(()=>[this.layer,this.relationshipId,this.objectId,this.canQuery],()=>this._queryFeatureCountThrottled())])}destroy(){this._destroyRelatedFeatureViewModels(),this.relatedFeatures.removeAll(),this._cancelQuery(),this._cancelQueryFeatureCount(),this._cancelQueryPage()}set featurePage(e){const{featuresPerPage:i,featureCount:r}=this,s=1,n=Math.ceil(r/i)||1;this._set("featurePage",Math.min(Math.max(e,s),n))}get featurePage(){return this._get("featurePage")}get orderByFieldsFixedCasing(){const{orderByFields:e,relatedLayer:i}=this;return e&&i?.loaded?e.map(r=>{const s=r.clone(),n=qS(r.field,i);return s.field=n,s}):e??[]}get supportsCacheHint(){return!!this.layer?.capabilities?.queryRelated?.supportsCacheHint}get canQuery(){const e=this.layer?.capabilities?.queryRelated;return!!(this.relatedLayer&&this.relationship&&typeof this.relationshipId=="number"&&typeof this.objectId=="number"&&e?.supportsCount&&e?.supportsPagination)}get itemDescriptionFieldName(){return this.orderByFieldsFixedCasing?.[0]?.field||null}set displayCount(e){this._set("displayCount",Math.min(Math.max(e,0),10))}get displayCount(){return this._get("displayCount")}get objectId(){return(this.objectIdField&&this.graphic?.attributes?.[this.objectIdField])??null}get objectIdField(){return this.layer?.objectIdField||null}get relatedFeatures(){return this._get("relatedFeatures")||new Nt}get relatedLayer(){const{layer:e,map:i,relationship:r}=this;return e?.loaded&&i&&r?QPe(i,e,r)??null:null}get relationship(){const{relationshipId:e,layer:i}=this;return typeof e=="number"?i?.relationships?.find(({id:r})=>r===e)??null:null}get relatedFeatureViewModels(){return this._get("relatedFeatureViewModels")||new Nt}get state(){const{_queryAbortController:e,_queryFeatureCountAbortController:i,_queryPageAbortController:r,canQuery:s}=this;return i?"loading":e||r?"querying":s?"ready":"disabled"}_destroyRelatedFeatureViewModels(){this.relatedFeatureViewModels?.forEach(e=>!e.destroyed&&e.destroy()),this.relatedFeatureViewModels.removeAll()}async _queryFeatureCount(){const{layer:e,relatedLayer:i,relationshipId:r,objectId:s,_queryFeatureCountAbortController:n,canQuery:o,supportsCacheHint:a}=this;if(await e?.load(),await i?.load(),!o||!e||!i)return void this._set("featureCount",0);const l=i.createQuery(),u=new tw({cacheHint:a,relationshipId:r,returnGeometry:!1,objectIds:[s],where:dV(l.where,void 0)}),c=await e.queryRelatedFeaturesCount(u,{signal:n?.signal});this._set("featureCount",c[s]||0)}_sliceFeatures(e){const{showAllEnabled:i,displayCount:r}=this;return i?e:r?e.slice(0,r):[]}async _queryPage(){const{relatedFeatures:e,featurePage:i,showAllEnabled:r,_queryPageAbortController:s}=this;!r||i<2||e.addMany(await this._queryRelatedFeatures({signal:s?.signal}))}async _queryRelatedFeatures(e){const{orderByFieldsFixedCasing:i,showAllEnabled:r,featuresPerPage:s,displayCount:n,layer:o,relationshipId:a,featurePage:l,featureCount:u,relatedLayer:c,supportsCacheHint:d}=this,{canQuery:f,objectId:m}=this;if(!f||!o||!c)return[];const g=r?((l-1)*s+u)%u:0,v=r?s:n,b=c.objectIdField,_=[...i?.map(I=>I.field),b].filter(ee),S=i?.map(I=>`${I.field} ${I.order}`),M=c.createQuery(),x=new tw({orderByFields:S,start:g,num:v,outFields:_,cacheHint:d,relationshipId:a,returnGeometry:!1,objectIds:[m],where:dV(M.where,void 0)}),T=(await o.queryRelatedFeatures(x,{signal:e?.signal}))[m]?.features||[];return T.forEach(I=>{I.sourceLayer=c,I.layer=c}),T}};h([p()],lr.prototype,"_queryAbortController",void 0),h([p()],lr.prototype,"_queryPageAbortController",void 0),h([p()],lr.prototype,"_queryFeatureCountAbortController",void 0),h([p({value:1})],lr.prototype,"featurePage",null),h([p()],lr.prototype,"featuresPerPage",void 0),h([p({readOnly:!0})],lr.prototype,"orderByFieldsFixedCasing",null),h([p({readOnly:!0})],lr.prototype,"supportsCacheHint",null),h([p({readOnly:!0})],lr.prototype,"canQuery",null),h([p()],lr.prototype,"description",void 0),h([p({readOnly:!0})],lr.prototype,"itemDescriptionFieldName",null),h([p({value:3})],lr.prototype,"displayCount",null),h([p({type:kn})],lr.prototype,"graphic",void 0),h([p()],lr.prototype,"layer",void 0),h([p()],lr.prototype,"map",void 0),h([p({readOnly:!0})],lr.prototype,"objectId",null),h([p({readOnly:!0})],lr.prototype,"objectIdField",null),h([p()],lr.prototype,"orderByFields",void 0),h([p({readOnly:!0})],lr.prototype,"relatedFeatures",null),h([p({readOnly:!0})],lr.prototype,"relatedLayer",null),h([p({readOnly:!0})],lr.prototype,"relationship",null),h([p()],lr.prototype,"featureCount",void 0),h([p({readOnly:!0})],lr.prototype,"relatedFeatureViewModels",null),h([p()],lr.prototype,"relationshipId",void 0),h([p()],lr.prototype,"showAllEnabled",void 0),h([p()],lr.prototype,"state",null),h([p()],lr.prototype,"title",void 0),lr=h([ce("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],lr);const R7=lr,rx="esri-feature",CR=`${rx}-relationship`,rd={base:CR,esriWidget:"esri-widget",listContainer:`${CR}__list`,listContainerQuerying:`${CR}__list--querying`,featureObserver:`${rx}__feature-observer`,stickySpinnerContainer:`${rx}__sticky-loading-container`,loadingSpinnerContainer:`${rx}__loading-container`,spinner:`${rx}__loading-spinner`,iconLoading:"esri-icon-loading-indicator esri-rotating"},PH={title:!0,description:!0};let jo=class extends Pn{constructor(e,i){super(e,i),this._featureElementInfo=null,this._relatedFeatureIntersectionObserverNode=null,this._relatedFeatureIntersectionObserver=new IntersectionObserver(([r])=>{r?.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this.headingLevel=2,this.viewModel=new R7,this.messages=null,this.messagesCommon=null,this.visibleElements={...PH},this._increaseFeaturePage=()=>{const{state:r,showAllEnabled:s,relatedFeatures:n,featuresPerPage:o,featurePage:a}=this.viewModel;r==="ready"&&s&&n.length>=o*a&&this.viewModel.featurePage++}}initialize(){this._featureElementInfo=new LC,this.addHandles([st(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),Fi),st(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),bn(()=>this.viewModel.relatedFeatureViewModels,"change",()=>this._setupRelatedFeatureViewModels())])}loadDependencies(){return Promise.all([De(()=>import("./calcite-list-9100b7ad.js"),["./calcite-list-9100b7ad.js","./interactive-573cbe88.js","./observers-fef7c483.js","./utils3-5494f162.js","./loadable-25ad9e4e.js","./debounce-31e0cfcc.js","./t9n-854d67dc.js","./icon-d62e8920.js","./loader-c6f8843f.js","./guid-9426053f.js","./scrim-b5159a35.js","./preload-helper-388ac9d5.js"],import.meta.url),De(()=>import("./calcite-list-item-aaed9b13.js"),["./calcite-list-item-aaed9b13.js","./interactive-573cbe88.js","./utils3-5494f162.js","./loadable-25ad9e4e.js","./icon-d62e8920.js","./observers-fef7c483.js","./preload-helper-388ac9d5.js"],import.meta.url),De(()=>import("./calcite-icon-7f660ce3.js"),["./calcite-icon-7f660ce3.js","./icon-d62e8920.js","./observers-fef7c483.js","./preload-helper-388ac9d5.js"],import.meta.url),De(()=>import("./calcite-notice-0f3063e8.js"),["./calcite-notice-0f3063e8.js","./observers-fef7c483.js","./loadable-25ad9e4e.js","./t9n-854d67dc.js","./icon-d62e8920.js","./preload-helper-388ac9d5.js"],import.meta.url)])}destroy(){this._unobserveRelatedFeatureObserver(),this._featureElementInfo=Jr(this._featureElementInfo)}get displayShowAllButton(){const{showAllEnabled:e,featureCount:i,displayCount:r}=this.viewModel;return!e&&!!i&&(i>r||r===0)}get displayListItems(){return this.displayShowAllButton||this.viewModel.relatedFeatureViewModels.length>0}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get featureCountDescription(){const{messages:e}=this,{featureCount:i}=this.viewModel;return dh(i===1?e?.numberRecord:e?.numberRecords,{number:i})}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}castVisibleElements(e){return{...PH,...e}}renderStickyLoading(){return this.viewModel.state==="querying"?Ne("div",{key:"sticky-loader",class:rd.stickySpinnerContainer},this.renderLoadingIcon()):null}renderLoadingIcon(){return Ne("span",{class:this.classes(rd.iconLoading,rd.spinner)})}renderLoading(){return Ne("div",{key:"loading-container",class:rd.loadingSpinnerContainer},this.renderLoadingIcon())}renderShowAllIconNode(){return Ne("calcite-icon",{scale:"s",icon:"list",slot:"content-end"})}renderChevronIconNode(){const e=Th(this.container)?"chevron-left":"chevron-right";return Ne("calcite-icon",{scale:"s",icon:e,slot:"content-end"})}renderRelatedFeature(e){const{itemDescriptionFieldName:i}=this.viewModel,r=e.title;e.description=i&&e.formattedAttributes?.global[i];const s=e.state==="loading";return Ne("calcite-list-item",{key:e.uid,label:s?`${this.messagesCommon?.loading}…`:r,description:s?"…":e.description??"",onCalciteListItemSelect:()=>this.emit("select-record",{featureViewModel:e})},this.renderChevronIconNode())}renderShowAllListItem(){return this.displayShowAllButton?Ne("calcite-list-item",{key:"show-all-item",label:this.messages?.showAll,description:this.featureCountDescription,onCalciteListItemSelect:()=>this.emit("show-all-records")},this.renderShowAllIconNode()):null}renderNoRelatedFeaturesMessage(){return Ne("calcite-notice",{key:"no-related-features-message",icon:"information",open:!0,kind:"brand",scale:"s",width:"full"},Ne("div",{slot:"message"},this.messages?.noRelatedFeatures))}renderFeatureObserver(){return Ne("div",{key:"feature-observer",class:rd.featureObserver,bind:this,afterCreate:this._relatedFeatureIntersectionObserverCreated})}renderList(){const{relatedFeatureViewModels:e}=this.viewModel;return Ne("calcite-list",null,e.toArray().map(i=>this.renderRelatedFeature(i)),this.renderShowAllListItem())}renderRelatedFeatures(){const{displayListItems:e}=this,{state:i}=this.viewModel;return Ne("div",{key:"list-container",class:this.classes(rd.listContainer,{[rd.listContainerQuerying]:i==="querying"})},e?this.renderList():i==="ready"?this.renderNoRelatedFeaturesMessage():null,this.renderStickyLoading(),this.renderFeatureObserver())}renderRelationshipNotFound(){return Ne("calcite-notice",{key:"relationship-not-found",icon:"exclamation-mark-triangle",open:!0,kind:"danger",scale:"s",width:"full"},Ne("div",{slot:"message"},this.messages?.relationshipNotFound))}render(){const{state:e}=this.viewModel;return Ne("div",{class:this.classes(rd.base,rd.esriWidget)},this._featureElementInfo?.render(),e==="loading"?this.renderLoading():e==="disabled"?this.renderRelationshipNotFound():this.renderRelatedFeatures())}_setupRelatedFeatureViewModels(){const{relatedFeatureViewModels:e}=this.viewModel,i="related-feature-viewmodels";this.removeHandles(i),e?.forEach(r=>{this.addHandles(st(()=>[r.title,r.state],()=>this.scheduleRender(),Fi),i)}),this.scheduleRender()}_setupFeatureElementInfo(){const{headingLevel:e,visibleElements:i}=this,r=i.description&&this.description,s=i.title&&this.title;this._featureElementInfo?.set({description:r,title:s,headingLevel:e})}async _handleRelatedFeatureObserverChange(){this._unobserveRelatedFeatureObserver();const{state:e,showAllEnabled:i}=this.viewModel;await F4(0),this._relatedFeatureIntersectionObserverNode&&e==="ready"&&i&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)}_relatedFeatureIntersectionObserverCreated(e){this._relatedFeatureIntersectionObserverNode=e}_unobserveRelatedFeatureObserver(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)}};h([p()],jo.prototype,"_relatedFeatureIntersectionObserverNode",void 0),h([p({readOnly:!0})],jo.prototype,"displayShowAllButton",null),h([p({readOnly:!0})],jo.prototype,"displayListItems",null),h([p()],jo.prototype,"description",null),h([p({readOnly:!0})],jo.prototype,"featureCountDescription",null),h([p()],jo.prototype,"headingLevel",void 0),h([p()],jo.prototype,"title",null),h([p({type:R7})],jo.prototype,"viewModel",void 0),h([p(),On("esri/widgets/Feature/t9n/Feature")],jo.prototype,"messages",void 0),h([p(),On("esri/t9n/common")],jo.prototype,"messagesCommon",void 0),h([p()],jo.prototype,"visibleElements",void 0),h([mi("visibleElements")],jo.prototype,"castVisibleElements",null),jo=h([ce("esri.widgets.Feature.FeatureRelationship")],jo);const NH=jo;let u6e=class{constructor(e,i){this.preLayerQueryCallback=e,this.preRequestCallback=i,this.preLayerQueryCallback||(this.preLayerQueryCallback=r=>{}),this.preRequestCallback||(this.preLayerQueryCallback=r=>{})}};var sx;const c6e=1,FH="content-view-models",DH="relationship-view-models",jH={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0};let Ar=sx=class extends qm(Pt){constructor(t){super(t),this._handles=new Ao,this._error=null,this._featureAbortController=null,this._graphicChangedThrottled=Cb(this._graphicChanged,c6e,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...jH},this.content=null,this.contentViewModels=[],this.description=null,this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=e=>{const{abilities:i}=this;return e.type==="attachments"&&!!i.attachmentsContent||e.type==="custom"&&!!i.customContent||e.type==="fields"&&!!i.fieldsContent||e.type==="media"&&!!i.mediaContent||e.type==="text"&&!!i.textContent||e.type==="expression"&&!!i.expressionContent||e.type==="relationship"&&!!i.relationshipContent},this._handles.add(st(()=>[this.graphic,this._effectivePopupTemplate,this.abilities],()=>this._graphicChangedThrottled(),Fi))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return ee(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return qPe(xH(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return _ae(this.graphic)}castAbilities(t){return{...jH,...t}}get isTable(){return this._sourceLayer?.isTable||!1}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(t){this._set("graphic",t?t.clone():null)}get spatialReference(){return this.view?.spatialReference??null}set spatialReference(t){this._override("spatialReference",t)}get map(){return this.view?.map||null}set map(t){this._override("map",t)}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(t,e){const i=this.contentViewModels[t];i instanceof e0&&i.setActiveMedia(e)}nextMedia(t){const e=this.contentViewModels[t];e instanceof e0&&e.next()}previousMedia(t){const e=this.contentViewModels[t];e instanceof e0&&e.previous()}async updateGeometry(){const{graphic:t,spatialReference:e,_sourceLayer:i}=this;await i?.load();const r=i?.objectIdField;if(!r||!t||!i)return;const s=t?.attributes?.[r];if(s==null)return;const n=[s];if(!t.geometry){const o=(await Mae({layer:i,graphic:t,outFields:[],objectIds:n,returnGeometry:!0,spatialReference:e}))?.geometry;o&&(t.geometry=o)}}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:t}=this;if(!t)return;const e=new AbortController;this._featureAbortController=e;try{await this._queryFeature({signal:e.signal})}catch(i){vn(i)||(this._error=i,tt.getLogger(this.declaredClass).error("error","The popupTemplate could not be displayed for this feature.",{error:i,graphic:t,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===e&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:t}=this;t&&t.abort(),this._featureAbortController=null}_compileContentElement(t,e){return t.type==="attachments"?this._compileAttachments(t,e):t.type==="custom"?this._compileCustom(t,e):t.type==="fields"?this._compileFields(t,e):t.type==="media"?this._compileMedia(t,e):t.type==="text"?this._compileText(t,e):t.type==="expression"?this._compileExpression(t,e):t.type==="relationship"?this._compileRelationship(t,e):void 0}_compileContent(t){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(t)?t.filter(this._isAllowedContentType).map((e,i)=>this._compileContentElement(e,i)).filter(ee):typeof t=="string"?this._compileText(new Yb({text:t}),0).text:t}_destroyContentViewModels(){this._handles?.remove(DH),this._handles?.remove(FH),this.contentViewModels.forEach(t=>t&&!t.destroyed&&t.destroy()),this._set("contentViewModels",[])}_matchesFeature(t,e){const i=t?.graphic?.getObjectId(),r=e?.getObjectId();return ee(i)&&ee(r)&&i===r}_setRelatedFeaturesViewModels({relatedFeatureViewModels:t,relatedFeatures:e,map:i}){const{view:r,spatialReference:s}=this;e?.filter(Boolean).forEach(n=>{t.find(o=>this._matchesFeature(o,n))||t.add(new sx({abilities:{relationshipContent:!1},map:i,view:r,spatialReference:s,graphic:n}))}),t.forEach(n=>{e?.find(a=>this._matchesFeature(n,a))||t.remove(n)})}_setExpressionContentVM(t,e){const i=this.formattedAttributes,{contentElement:r,contentElementViewModel:s}=t,n=r?.type;s&&n&&(n==="fields"&&(this._createFieldsFormattedAttributes({contentElement:r,contentElementIndex:e,formattedAttributes:i}),s.set(this._createFieldsVMParams(r,e))),n==="media"&&(this._createMediaFormattedAttributes({contentElement:r,contentElementIndex:e,formattedAttributes:i}),s.set(this._createMediaVMParams(r,e))),n==="text"&&s.set(this._createTextVMParams(r)))}_compileRelationship(t,e){const{displayCount:i,orderByFields:r,relationshipId:s,title:n,description:o}=t,{_sourceLayer:a,graphic:l,map:u}=this,c=new R7({displayCount:i,graphic:l,orderByFields:r,relationshipId:s,layer:a,map:u,...this._compileTitleAndDesc({title:n,description:o})});return this.contentViewModels[e]=c,this._handles.add(bn(()=>c.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels(c)),DH),t}_compileExpression(t,e){const{expressionInfo:i}=t,{graphic:r,map:s,spatialReference:n,view:o}=this,a=new O7({expressionInfo:i,graphic:r,interceptor:sx.interceptor,map:s,spatialReference:n,view:o});return this.contentViewModels[e]=a,this._handles.add(st(()=>a.contentElementViewModel,()=>this._setExpressionContentVM(a,e),Fi),FH),t}_compileAttachments(t,e){const{graphic:i}=this,{description:r,title:s}=t;return this.contentViewModels[e]=new C7({graphic:i,...this._compileTitleAndDesc({title:s,description:r})}),t}_compileCustom(t,e){const{graphic:i}=this,{creator:r,destroyer:s}=t;return this.contentViewModels[e]=new S5({graphic:i,creator:r,destroyer:s}),t}_compileTitleAndDesc({title:t,description:e}){const{_fieldInfoMap:i,_sourceLayer:r,graphic:s,formattedAttributes:n}=this,o=s?.attributes,a=this._expressionAttributes,l=n.global;return{title:Xg({attributes:o,fieldInfoMap:i,globalAttributes:l,expressionAttributes:a,layer:r,text:t}),description:Xg({attributes:o,fieldInfoMap:i,globalAttributes:l,expressionAttributes:a,layer:r,text:e})}}_createFieldsVMParams(t,e){const i=this._effectivePopupTemplate,r=this.formattedAttributes,s={...r?.global,...r?.content[e]},n=(t?.fieldInfos||i?.fieldInfos)?.filter(({fieldName:u})=>T7(u)||ep(u)||s.hasOwnProperty(u)),o=i?.expressionInfos,{description:a,title:l}=t;return{attributes:s,expressionInfos:o,fieldInfos:n,...this._compileTitleAndDesc({title:l,description:a})}}_compileFields(t,e){const i=t.clone(),r=new PC(this._createFieldsVMParams(t,e));return this.contentViewModels[e]=r,i.fieldInfos=r.formattedFieldInfos.slice(0),i}_createMediaVMParams(t,e){const{abilities:i,graphic:r,_fieldInfoMap:s,_effectivePopupTemplate:n,relatedInfos:o,_sourceLayer:a,_expressionAttributes:l}=this,u=this.formattedAttributes,c=r?.attributes??{},{description:d,mediaInfos:f,title:m}=t;return{abilities:{chartAnimation:i.chartAnimation},activeMediaInfoIndex:t.activeMediaInfoIndex||0,attributes:c,isAggregate:r?.isAggregate,layer:a,fieldInfoMap:s,formattedAttributes:{...u?.global,...u?.content[e]},expressionAttributes:l,mediaInfos:f,popupTemplate:n,relatedInfos:o,...this._compileTitleAndDesc({title:m,description:d})}}_compileMedia(t,e){const i=t.clone(),r=new e0(this._createMediaVMParams(t,e));return i.mediaInfos=r.formattedMediaInfos.slice(0),this.contentViewModels[e]=r,i}_createTextVMParams(t){const{graphic:e,_fieldInfoMap:i,_sourceLayer:r,_expressionAttributes:s}=this;if(t&&t.text){const n=e?.attributes??{},o=this.formattedAttributes?.global??{};t.text=Xg({attributes:n,fieldInfoMap:i,globalAttributes:o,expressionAttributes:s,layer:r,text:t.text})}return{graphic:e,creator:t.text}}_compileText(t,e){const i=t.clone();return this.contentViewModels[e]=new S5(this._createTextVMParams(i)),i}_compileLastEditInfo(){const{_effectivePopupTemplate:t,_sourceLayer:e,graphic:i}=this;if(!t)return;const{lastEditInfoEnabled:r}=t,s=e?.editFieldsInfo;return r&&s?GPe(s,i?.attributes):void 0}_compileTitle(t){const{_fieldInfoMap:e,_sourceLayer:i,graphic:r,_expressionAttributes:s}=this,n=r?.attributes??{},o=this.formattedAttributes?.global??{};return Xg({attributes:n,fieldInfoMap:e,globalAttributes:o,expressionAttributes:s,layer:i,text:t})}async _getTitle(){const{_effectivePopupTemplate:t,graphic:e}=this;if(!e)return null;const i=t?.title;return x5(i,{graphic:e})}async _getContent(){const{_effectivePopupTemplate:t,graphic:e}=this;if(!e)return null;const i=t?.content;return x5(i,{graphic:e})}async _queryFeature(t){const{_featureAbortController:e,_sourceLayer:i,graphic:r,_effectivePopupTemplate:s}=this,n=this.map,o=this.view,a=this.spatialReference;if(e!==this._featureAbortController||!r)return;await WPe({graphic:r,popupTemplate:s,layer:i,spatialReference:a},t);const{content:{value:l},title:{value:u}}=await Fa({content:this._getContent(),title:this._getTitle()}),{expressionAttributes:{value:c}}=await Fa({checkForRelatedFeatures:this._checkForRelatedFeatures(t),expressionAttributes:o6e({expressionInfos:s?.expressionInfos,spatialReference:a,graphic:r,map:n,interceptor:sx.interceptor,view:o})});e===this._featureAbortController&&r&&(this._expressionAttributes=c,this._graphicExpressionAttributes={...r.attributes,...c},this._set("formattedAttributes",this._createFormattedAttributes(l)),this._set("title",this._compileTitle(u)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(l)||null))}_createMediaFormattedAttributes({contentElement:t,contentElementIndex:e,formattedAttributes:i}){const{_effectivePopupTemplate:r,graphic:s,relatedInfos:n,_sourceLayer:o,_fieldInfoMap:a,_graphicExpressionAttributes:l}=this;i.content[e]=bR({fieldInfos:r?.fieldInfos,graphic:s,attributes:{...l,...t.attributes},layer:o,fieldInfoMap:a,relatedInfos:n})}_createFieldsFormattedAttributes({contentElement:t,contentElementIndex:e,formattedAttributes:i}){if(t.fieldInfos){const{graphic:r,relatedInfos:s,_sourceLayer:n,_fieldInfoMap:o,_graphicExpressionAttributes:a}=this;i.content[e]=bR({fieldInfos:t.fieldInfos,graphic:r,attributes:{...a,...t.attributes},layer:n,fieldInfoMap:o,relatedInfos:s})}}_createFormattedAttributes(t){const{_effectivePopupTemplate:e,graphic:i,relatedInfos:r,_sourceLayer:s,_fieldInfoMap:n,_graphicExpressionAttributes:o}=this,a=e?.fieldInfos,l={global:bR({fieldInfos:a,graphic:i,attributes:o,layer:s,fieldInfoMap:n,relatedInfos:r}),content:[]};return Array.isArray(t)&&t.forEach((u,c)=>{u.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:u,contentElementIndex:c,formattedAttributes:l}),u.type==="media"&&this._createMediaFormattedAttributes({contentElement:u,contentElementIndex:c,formattedAttributes:l})}),l}_checkForRelatedFeatures(t){const{graphic:e,_effectivePopupTemplate:i}=this;return this._queryRelatedInfos(e,xH(i),t)}async _queryRelatedInfos(t,e,i){const{relatedInfos:r,_sourceLayer:s}=this;r.clear();const n=ee(s?.associatedLayer)?await s?.associatedLayer.load(i):s;if(!n||!t)return;const o=e.filter(u=>u&&ep(u.fieldName));if(!o||!o.length)return;e.forEach(u=>this._configureRelatedInfo(u,n));const a=await V8e({relatedInfos:r,layer:n},i);Object.keys(a).forEach(u=>{const c=r.get(u.toString()),d=a[u]?.value;c&&d&&(c.layerInfo=d.data)});const l=await B8e({graphic:t,relatedInfos:r,layer:n},i);Object.keys(l).forEach(u=>{N8e(l[u]?.value,r.get(u.toString()))})}_configureRelatedInfo(t,e){const{relatedInfos:i}=this,r=zM(t.fieldName);if(!r)return;const{layerId:s,fieldName:n}=r;if(!s)return;const o=i.get(s.toString())||P8e(s,e);o&&(z8e({relatedInfo:o,fieldName:n,fieldInfo:t}),this.relatedInfos.set(s,o))}};Ar.interceptor=new u6e(YPe,KPe),h([p()],Ar.prototype,"_error",void 0),h([p()],Ar.prototype,"_featureAbortController",void 0),h([p({readOnly:!0})],Ar.prototype,"_effectivePopupTemplate",null),h([p({readOnly:!0})],Ar.prototype,"_fieldInfoMap",null),h([p({readOnly:!0})],Ar.prototype,"_sourceLayer",null),h([p()],Ar.prototype,"abilities",void 0),h([mi("abilities")],Ar.prototype,"castAbilities",null),h([p({readOnly:!0})],Ar.prototype,"content",void 0),h([p({readOnly:!0})],Ar.prototype,"contentViewModels",void 0),h([p()],Ar.prototype,"description",void 0),h([p({type:Boolean})],Ar.prototype,"defaultPopupTemplateEnabled",void 0),h([p({readOnly:!0})],Ar.prototype,"isTable",null),h([p({readOnly:!0})],Ar.prototype,"state",null),h([p({readOnly:!0})],Ar.prototype,"formattedAttributes",void 0),h([p({type:kn,value:null})],Ar.prototype,"graphic",null),h([p({readOnly:!0})],Ar.prototype,"lastEditInfo",void 0),h([p({readOnly:!0})],Ar.prototype,"relatedInfos",void 0),h([p()],Ar.prototype,"spatialReference",null),h([p({readOnly:!0})],Ar.prototype,"title",void 0),h([p()],Ar.prototype,"map",null),h([p({readOnly:!0})],Ar.prototype,"waitingForContent",null),h([p()],Ar.prototype,"view",void 0),Ar=sx=h([ce("esri.widgets.FeatureViewModel")],Ar);const k7=Ar,jn="esri-feature",Gr={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:jn,container:`${jn}__size-container`,title:`${jn}__title`,main:`${jn}__main-container`,btn:`${jn}__button`,icon:`${jn}__icon`,content:`${jn}__content`,contentNode:`${jn}__content-node`,contentElement:`${jn}__content-element`,text:`${jn}__text`,lastEditedInfo:`${jn}__last-edited-info`,fields:`${jn}__fields`,fieldHeader:`${jn}__field-header`,fieldData:`${jn}__field-data`,fieldDataDate:`${jn}__field-data--date`,loadingSpinnerContainer:`${jn}__loading-container`,spinner:`${jn}__loading-spinner`},Fae=t=>{let e=class extends t{constructor(){super(...arguments),this.renderNodeContent=i=>Rae(i)&&!i.destroyed?Ne("div",{class:Gr.contentNode,key:i},i.render()):i instanceof HTMLElement?Ne("div",{class:Gr.contentNode,key:i,bind:i,afterCreate:this._attachToNode}):m8e(i)?Ne("div",{class:Gr.contentNode,key:i,bind:i.domNode,afterCreate:this._attachToNode}):null}_attachToNode(i){const r=this;i.appendChild(r)}};return e=h([ce("esri.widgets.Feature.ContentMixin")],e),e};var cN;const UH={title:!0,content:!0,lastEditedInfo:!0},VH="relationship-handles";let un=cN=class extends Fae(Pn){constructor(t,e){super(t,e),this._contentWidgets=[],this.flowItems=null,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.visibleElements={...UH},this.viewModel=new k7}initialize(){this.addHandles(st(()=>this.viewModel?.contentViewModels,()=>this._setupContentWidgets(),Fi))}loadDependencies(){return De(()=>import("./calcite-notice-0f3063e8.js"),["./calcite-notice-0f3063e8.js","./observers-fef7c483.js","./loadable-25ad9e4e.js","./t9n-854d67dc.js","./icon-d62e8920.js","./preload-helper-388ac9d5.js"],import.meta.url)}destroy(){this._destroyContentWidgets()}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(t){this.viewModel.defaultPopupTemplateEnabled=t}get isTable(){return this.viewModel.isTable}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(t){this.viewModel.spatialReference=t}get title(){return this.viewModel.title}castVisibleElements(t){return{...UH,...t}}get map(){return this.viewModel.map}set map(t){this.viewModel.map=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const{state:t}=this.viewModel,e=Ne("div",{class:Gr.container,key:"container"},this.renderTitle(),t==="error"?this.renderError():t==="loading"?this.renderLoading():this.renderContentContainer());return Ne("div",{class:this.classes(Gr.base,Gr.esriWidget)},e)}setActiveMedia(t,e){return this.viewModel.setActiveMedia(t,e)}nextMedia(t){return this.viewModel.nextMedia(t)}previousMedia(t){return this.viewModel.previousMedia(t)}renderError(){const{messagesCommon:t,messages:e,visibleElements:i}=this;return Ne("calcite-notice",{open:!0,kind:"danger",icon:"exclamation-mark-circle",scale:"s"},i.title?Ne("div",{key:"error-title",slot:"title"},t.errorMessage):null,Ne("div",{key:"error-message",slot:"message"},e.loadingError))}renderLoading(){return Ne("div",{key:"loading-container",class:Gr.loadingSpinnerContainer},Ne("span",{class:this.classes(Gr.iconLoading,Gr.spinner)}))}renderContentContainer(){const{visibleElements:t}=this;return t.content?Ne("div",{class:Gr.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:t,title:e}=this;return t.title?Ne(kC,{level:this.headingLevel,class:Gr.title,innerHTML:e}):null}renderContent(){const t=this.viewModel.content,e="content";if(!t)return null;if(Array.isArray(t))return t.length?Ne("div",{class:Gr.contentNode,key:`${e}-content-elements`},t.map(this.renderContentElement,this)):null;if(typeof t=="string"){const i=this._contentWidgets[0];return!i||i.destroyed?null:Ne("div",{class:Gr.contentNode,key:`${e}-content`},i.render())}return this.renderNodeContent(t)}renderContentElement(t,e){const{visibleElements:i}=this;if(typeof i.content!="boolean"&&!i.content?.[t.type])return null;switch(t.type){case"attachments":return this.renderAttachments(e);case"custom":return this.renderCustom(t,e);case"fields":return this.renderFields(e);case"media":return this.renderMedia(e);case"text":return this.renderText(t,e);case"expression":return this.renderExpression(e);case"relationship":return this.renderRelationship(e);default:return null}}renderAttachments(t){const e=this._contentWidgets[t];if(!e||e.destroyed)return null;const{state:i,attachmentInfos:r}=e.viewModel;return i==="loading"||r.length>0?Ne("div",{key:this._buildKey("attachments-element",t),class:this.classes(Gr.contentElement)},e.render()):null}renderRelationship(t){const e=this._contentWidgets[t];return e&&!e.destroyed&&this.flowItems?Ne("div",{key:this._buildKey("relationship-element",t),class:Gr.contentElement},e.render()):null}renderExpression(t){const e=this._contentWidgets[t];return!e||e.destroyed?null:Ne("div",{key:this._buildKey("expression-element",t),class:Gr.contentElement},e.render())}renderCustom(t,e){const{creator:i}=t,r=this._contentWidgets[e];return!r||r.destroyed?null:i?Ne("div",{key:this._buildKey("custom-element",e),class:Gr.contentElement},r.render()):null}renderFields(t){const e=this._contentWidgets[t];return!e||e.destroyed?null:Ne("div",{key:this._buildKey("fields-element",t),class:Gr.contentElement},e.render())}renderMedia(t){const e=this._contentWidgets[t];return!e||e.destroyed?null:Ne("div",{key:this._buildKey("media-element",t),class:Gr.contentElement},e.render())}renderLastEditInfo(){const{visibleElements:t,messages:e}=this,{lastEditInfo:i}=this.viewModel;if(!i||!t.lastEditedInfo)return null;const{date:r,user:s}=i,n=i.type==="edit"?s?e.lastEditedByUser:e.lastEdited:s?e.lastCreatedByUser:e.lastCreated,o=dh(n,{date:r,user:s});return Ne("div",{key:"edit-info-element",class:this.classes(Gr.lastEditedInfo,Gr.contentElement)},o)}renderText(t,e){const i=t.text,r=this._contentWidgets[e];return!r||r.destroyed?null:i?Ne("div",{key:this._buildKey("text-element",e),class:this.classes(Gr.contentElement,Gr.text)},r.render()):null}_buildKey(t,...e){return`${t}__${this.get("viewModel.graphic.uid")||"0"}-${e.join("-")}`}_destroyContentWidget(t){t&&(t.viewModel=null,!t.destroyed&&t.destroy())}_destroyContentWidgets(){this.removeHandles(VH),this._contentWidgets.forEach(t=>this._destroyContentWidget(t)),this._contentWidgets=[]}_addFeatureRelationshipHandles(t){const{flowItems:e,visibleElements:i}=this;this.addHandles([bn(()=>t,"select-record",({featureViewModel:r})=>{e&&(r.abilities={relationshipContent:!0},e.push(new cN({flowItems:e,viewModel:r,visibleElements:i})))}),bn(()=>t,"show-all-records",()=>{if(!e)return;const{viewModel:r}=t;r.showAllEnabled=!0;const s=new NH({visibleElements:{title:!1,description:!1},viewModel:r});this._addFeatureRelationshipHandles(s),e.push(s)})],VH)}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:t,visibleElements:e}=this,i=this.get("viewModel.content"),{contentViewModels:r}=this.viewModel;if(Array.isArray(i))i.forEach((s,n)=>{if(s.type==="attachments"&&(this._contentWidgets[n]=new o8e({displayType:s.displayType,headingLevel:e.title?t+1:t,viewModel:r[n]})),s.type==="fields"&&(this._contentWidgets[n]=new kae({viewModel:r[n]})),s.type==="media"&&(this._contentWidgets[n]=new Lae({viewModel:r[n]})),s.type==="text"&&(this._contentWidgets[n]=new BM({viewModel:r[n]})),s.type==="custom"&&(this._contentWidgets[n]=new BM({viewModel:r[n]})),s.type==="expression"&&(this._contentWidgets[n]=new l6e({viewModel:r[n]})),s.type==="relationship"){const o=new NH({viewModel:r[n]});this._addFeatureRelationshipHandles(o),this._contentWidgets[n]=o}},this);else{const s=r[0];s&&!s.destroyed&&(this._contentWidgets[0]=new BM({viewModel:s}))}this.scheduleRender()}};h([p()],un.prototype,"graphic",null),h([p()],un.prototype,"defaultPopupTemplateEnabled",null),h([p()],un.prototype,"flowItems",void 0),h([p()],un.prototype,"headingLevel",void 0),h([p({readOnly:!0})],un.prototype,"isTable",null),h([p()],un.prototype,"label",null),h([p(),On("esri/widgets/Feature/t9n/Feature")],un.prototype,"messages",void 0),h([p(),On("esri/t9n/common")],un.prototype,"messagesCommon",void 0),h([p(),On("esri/widgets/support/t9n/uriUtils")],un.prototype,"messagesURIUtils",void 0),h([p()],un.prototype,"spatialReference",null),h([p({readOnly:!0})],un.prototype,"title",null),h([p()],un.prototype,"visibleElements",void 0),h([mi("visibleElements")],un.prototype,"castVisibleElements",null),h([p()],un.prototype,"map",null),h([p()],un.prototype,"view",null),h([p({type:k7})],un.prototype,"viewModel",void 0),un=cN=h([ce("esri.widgets.Feature")],un);const h6e=un;var Dae;const qM=Symbol("anchorHandles");let yg=class extends xp.EventedAccessor{constructor(e){super(e),this[Dae]=new Ao,this.location=null,this.screenLocationEnabled=!1,this.view=null,this[qM].add([Nl(()=>Kf(this.screenLocationEnabled?this.view:null,i=>[i.size,i.type==="3d"?i.camera:i.viewpoint]),()=>this.notifyChange("screenLocation")),st(()=>this.screenLocation,(i,r)=>{ee(i)&&ee(r)&&this.emit("view-change")})])}destroy(){this.view=null,this[qM]=Jr(this[qM])}get screenLocation(){const{location:e,view:i,screenLocationEnabled:r}=this;return r&&ee(e)&&ee(i)&&i.ready?i.toScreen?.(e):null}};Dae=qM,h([p()],yg.prototype,"location",void 0),h([p()],yg.prototype,"screenLocation",null),h([p()],yg.prototype,"screenLocationEnabled",void 0),h([p()],yg.prototype,"view",void 0),yg=h([ce("esri.widgets.support.AnchorElementViewModel")],yg);const jae=yg,d6e="esri.widgets.CompassViewModel";let HM=class extends jae{constructor(e){super(e),this.visible=!1}};h([p()],HM.prototype,"visible",void 0),HM=h([ce(d6e)],HM);const Uae=HM,$R="esri-spinner",OR={base:$R,spinnerStart:`${$R}--start`,spinnerFinish:`${$R}--finish`};let gg=class extends Pn{constructor(e,i){super(e,i),this._animationDelay=500,this._animationPromise=null,this.viewModel=new Uae}initialize(){this.addHandles(st(()=>this.visible,e=>this._visibleChange(e)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}show(e){const{location:i,promise:r}=e??{};i&&(this.viewModel.location=i),this.visible=!0;const s=()=>this.hide();r&&r.catch(()=>{}).then(s)}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:i}=this.viewModel,r=!!i,s=e&&r,n=!e&&r,o={[OR.spinnerStart]:s,[OR.spinnerFinish]:n},a=this._getPositionStyles();return Ne("div",{class:this.classes(OR.base,o),styles:a})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const i=F4(this._animationDelay);this._animationPromise=i,i.catch(()=>{}).then(()=>{this._animationPromise===i&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:e,view:i}=this.viewModel;if(Re(i)||Re(e))return{};const{padding:r}=i;return{left:e.x-r.left+"px",top:e.y-r.top+"px"}}};h([p()],gg.prototype,"location",null),h([p()],gg.prototype,"view",null),h([p({type:Uae})],gg.prototype,"viewModel",void 0),h([p()],gg.prototype,"visible",null),gg=h([ce("esri.widgets.Spinner")],gg);const p6e=gg,NC={iconZoom:"esri-icon-zoom-in-magnifying-glass",iconTrash:"esri-icon-trash",iconBrowseClusteredFeatures:"esri-icon-table"},t0=new jw({id:"zoom-to-feature",title:"{messages.zoom}",className:NC.iconZoom}),BH=new jw({id:"remove-selected-feature",title:"{messages.remove}",className:NC.iconTrash}),eb=new jw({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:NC.iconZoom}),tb=new jw({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:NC.iconBrowseClusteredFeatures}),f6e="esri.widgets.Popup.PopupViewModel",T5=tt.getLogger(f6e),m6e=t=>{const{event:e,view:i}=t,{action:r}=e,s=i&&i.popup;if(!r)return Promise.reject(new Ce("trigger-action:missing-arguments","Event has no action"));if(!s)return Promise.reject(new Ce("trigger-action:missing-arguments","view.popup is missing"));const{disabled:n,id:o}=r;if(!o)return Promise.reject(new Ce("trigger-action:invalid-action","action.id is missing"));if(n)return Promise.reject(new Ce("trigger-action:invalid-action","Action is disabled"));if(o===t0.id)return g6e(s.viewModel).catch(Ok);if(o===eb.id)return v6e(s.viewModel);if(o===tb.id)return s.featureMenuOpen=!s.featureMenuOpen,s.viewModel.browseClusterEnabled=!s.viewModel.browseClusterEnabled,Promise.resolve();if(s.viewModel.browseClusterEnabled=!1,o===BH.id){s.close();const{selectedFeature:a}=s;if(!a)return Promise.reject(new Ce(`trigger-action:${BH.id}`,"selectedFeature is required",{selectedFeature:a}));const{sourceLayer:l}=a;return l?l.remove(a):i.graphics.remove(a),Promise.resolve()}return Promise.resolve()};function Vae(t){const{selectedFeature:e,location:i,view:r}=t;return r?r.type==="3d"?e??i??null:t.get("selectedFeature.geometry")||i:null}function kg(t){return!!t&&t.isAggregate&&t.sourceLayer?.featureReduction?.type==="cluster"}async function y6e(t,e){if(e?.type!=="3d"||!t||t.declaredClass!=="esri.Graphic")return!0;const i=e.getViewForGraphic(t);if(i&&"whenGraphicBounds"in i){let r;try{r=await i.whenGraphicBounds(t,{useViewElevation:!0})}catch{}return!r||!r.boundingBox||r.boundingBox[0]===r.boundingBox[3]&&r.boundingBox[1]===r.boundingBox[4]&&r.boundingBox[2]===r.boundingBox[5]}return!0}async function g6e(t){const{location:e,selectedFeature:i,view:r,zoomFactor:s}=t,n=Vae(t);if(!r||!n){const c=new Ce("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:n,view:r});throw T5.error(c),c}const o=r.scale/s,a=t.selectedFeature?.geometry,l=a??e,u=ee(l)&&l.type==="point"&&await y6e(i,r);t0.active=!0,t0.disabled=!0;try{await t.zoomTo({target:{target:n,scale:u?o:void 0}})}catch{const d=new Ce("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:i});T5.error(d)}finally{t0.active=!1,t0.disabled=!1,t.zoomToLocation=null,u&&(t.location=l)}}async function v6e(t){const{selectedFeature:e,view:i}=t;if(i?.type!=="2d"){const o=new Ce("zoomToCluster:invalid-view","View must be 2d MapView.",{view:i});throw T5.error(o),o}if(!e||!kg(e)){const o=new Ce("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:e});throw T5.error(o),o}const[r,s]=await L7(i,e);eb.active=!0,eb.disabled=!0;const{extent:n}=await r.queryExtent(s);await t.zoomTo({target:n}),eb.active=!1,eb.disabled=!1}async function b6e(t){const{view:e,selectedFeature:i}=t;if(!e||!i)return;const[r,s]=await L7(e,i),{extent:n}=await r.queryExtent(s);t.selectedClusterBoundaryFeature.geometry=n,e.graphics.add(t.selectedClusterBoundaryFeature)}async function w6e(t){const{selectedFeature:e,view:i}=t;if(!i||!e)return;const[r,s]=await L7(i,e);tb.active=!0,tb.disabled=!0;const{features:n}=await r.queryFeatures(s);tb.active=!1,tb.disabled=!1,i.popup?.open({features:[e].concat(n),featureMenuOpen:!0})}async function L7(t,e){const i=await t.whenLayerView(e.sourceLayer),r=i.createQuery(),s=e.getObjectId();return r.aggregateIds=s!=null?[s]:[],[i,r]}function _6e(t){const e=t.features.filter(i=>kg(i));e.length&&(t.features=e)}function Bae(t){if(Re(t))return null;switch(t.type){case"point":return t;case"extent":return t.center;case"polygon":return t.centroid;case"multipoint":case"polyline":return t.extent?.center;default:return null}}const zt="esri-popup",J_=`${zt}__header`,xy=`${zt}--is-docked`,nt={calciteThemeLight:"calcite-mode-light",calciteThemeDark:"calcite-mode-dark",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:zt,widget:"esri-widget",main:`${zt}__main-container`,loadingContainer:`${zt}__loading-container`,isCollapsible:`${zt}--is-collapsible`,isCollapsed:`${zt}--is-collapsed`,shadow:`${zt}--shadow`,isDocked:xy,isDockedTopLeft:`${xy}-top-left`,isDockedTopCenter:`${xy}-top-center`,isDockedTopRight:`${xy}-top-right`,isDockedBottomLeft:`${xy}-bottom-left`,isDockedBottomCenter:`${xy}-bottom-center`,isDockedBottomRight:`${xy}-bottom-right`,alignTopCenter:`${zt}--aligned-top-center`,alignBottomCenter:`${zt}--aligned-bottom-center`,alignTopLeft:`${zt}--aligned-top-left`,alignBottomLeft:`${zt}--aligned-bottom-left`,alignTopRight:`${zt}--aligned-top-right`,alignBottomRight:`${zt}--aligned-bottom-right`,isFeatureMenuOpen:`${zt}--feature-menu-open`,isActionsMenuOpen:`${zt}--actions-menu-open`,hasFeatureUpdated:`${zt}--feature-updated`,header:J_,headerButtons:`${J_}-buttons`,headerContainer:`${J_}-container`,headerContainerButton:`${J_}-container--button`,headerTitle:`${J_}-title`,content:`${zt}__content`,contentHasFlows:"esri-content--has-flows",contentFlowItem:"esri-content__flow-item",footer:`${zt}__footer`,footerHasPagination:`${zt}__footer--has-pagination`,footerHasActions:`${zt}__footer--has-actions`,footerHasActionsMenu:`${zt}__footer--has-actions-menu`,button:`${zt}__button`,buttonDisabled:`${zt}__button--disabled`,buttonDock:`${zt}__button--dock`,icon:`${zt}__icon`,iconDock:`${zt}__icon--dock-icon`,inlineActionsContainer:`${zt}__inline-actions-container`,actionsMenuButton:`${zt}__actions-menu-button`,actions:`${zt}__actions`,action:`${zt}__action`,actionImage:`${zt}__action-image`,actionText:`${zt}__action-text`,actionToggle:`${zt}__action-toggle`,actionToggleOn:`${zt}__action-toggle--on`,actionExit:`${zt}__action--exit`,actionSelectFeature:`${zt}__action--select-feature`,pointer:`${zt}__pointer`,pointerDirection:`${zt}__pointer-direction`,navigation:`${zt}__navigation`,paginationPrevious:`${zt}__pagination-previous`,paginationNext:`${zt}__pagination-next`,paginationPreviousIconLTR:`${zt}__pagination-previous-icon`,paginationPreviousIconRTL:`${zt}__pagination-previous-icon--rtl`,paginationNextIconLTR:`${zt}__pagination-next-icon`,paginationNextIconRTL:`${zt}__pagination-next-icon--rtl`,featureMenu:`${zt}__feature-menu`,featureMenuList:`${zt}__feature-menu-list`,featureMenuItem:`${zt}__feature-menu-item`,featureMenuViewport:`${zt}__feature-menu-viewport`,featureMenuHeader:`${zt}__feature-menu-header`,featureMenuNote:`${zt}__feature-menu-note`,featureMenuSelected:`${zt}__feature-menu-item--selected`,featureMenuButton:`${zt}__feature-menu-button`,featureMenuTitle:`${zt}__feature-menu-title`,featureMenuObserver:`${zt}__feature-menu-observer`,featureMenuLoader:`${zt}__feature-menu-loader`,collapseButton:`${zt}__collapse-button`,collapseIcon:`${zt}__collapse-icon`},x6e="OBJECTID";var H0;(function(t){t[t.size=22]="size",t[t.lineWidth=50]="lineWidth",t[t.maxSize=120]="maxSize",t[t.maxOutlineSize=80]="maxOutlineSize",t[t.tallSymbolWidth=20]="tallSymbolWidth"})(H0||(H0={}));function zae(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function S6e(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function E6e(t,e,i,r,s,n){const o=new Float32Array(6);return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o[4]=s,o[5]=n,o}function T6e(t,e){return new Float32Array(t,e,6)}function Gae(t,e,i,r){const s=e[r],n=e[r+1];t[r]=i[0]*s+i[2]*n+i[4],t[r+1]=i[1]*s+i[3]*n+i[5]}function I6e(t,e,i,r=0,s=0,n=2){const o=s||e.length/n;for(let a=r;a<o;a++)Gae(t,e,i,a*n)}Object.freeze(Object.defineProperty({__proto__:null,clone:S6e,create:zae,createView:T6e,fromValues:E6e,transform:Gae,transformMany:I6e},Symbol.toStringTag,{value:"Module"}));function M6e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function A6e(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function C6e(t,e,i,r,s,n,o){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t[4]=n,t[5]=o,t}function P7(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5];let l=i*n-r*s;return l?(l=1/l,t[0]=n*l,t[1]=-r*l,t[2]=-s*l,t[3]=i*l,t[4]=(s*a-n*o)*l,t[5]=(r*o-i*a)*l,t):null}function $6e(t){return t[0]*t[3]-t[1]*t[2]}function qae(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],u=i[0],c=i[1],d=i[2],f=i[3],m=i[4],g=i[5];return t[0]=r*u+n*c,t[1]=s*u+o*c,t[2]=r*d+n*f,t[3]=s*d+o*f,t[4]=r*m+n*g+a,t[5]=s*m+o*g+l,t}function FC(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],u=Math.sin(i),c=Math.cos(i);return t[0]=r*c+n*u,t[1]=s*c+o*u,t[2]=r*-u+n*c,t[3]=s*-u+o*c,t[4]=a,t[5]=l,t}function N7(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],u=i[0],c=i[1];return t[0]=r*u,t[1]=s*u,t[2]=n*c,t[3]=o*c,t[4]=a,t[5]=l,t}function HS(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],u=i[0],c=i[1];return t[0]=r,t[1]=s,t[2]=n,t[3]=o,t[4]=r*u+n*c+a,t[5]=s*u+o*c+l,t}function Hae(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=-i,t[3]=r,t[4]=0,t[5]=0,t}function Wae(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function F7(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function O6e(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function R6e(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function k6e(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function Jae(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function L6e(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function P6e(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t}function N6e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function F6e(t,e){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=e[0],u=e[1],c=e[2],d=e[3],f=e[4],m=e[5],g=$u();return Math.abs(i-l)<=g*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(r-u)<=g*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(s-c)<=g*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(n-d)<=g*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(o-f)<=g*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-m)<=g*Math.max(1,Math.abs(a),Math.abs(m))}const D6e=qae,j6e=Jae;Object.freeze(Object.defineProperty({__proto__:null,add:k6e,copy:M6e,determinant:$6e,equals:F6e,exactEquals:N6e,frob:R6e,fromRotation:Hae,fromScaling:Wae,fromTranslation:F7,identity:A6e,invert:P7,mul:D6e,multiply:qae,multiplyScalar:L6e,multiplyScalarAndAdd:P6e,rotate:FC,scale:N7,set:C6e,str:O6e,sub:j6e,subtract:Jae,translate:HS},Symbol.toStringTag,{value:"Module"}));const zH=Ze("android");Ze("chrome")||zH&&zH>=4;rN();H0.size;H0.maxSize;H0.maxOutlineSize;H0.lineWidth;H0.tallSymbolWidth;function Zae(t){return t&&"opacity"in t?t.opacity*Zae(t.parent):1}async function U6e(t,e){if(!t)return;const i=t.sourceLayer,r=(ee(e)&&e.useSourceLayer?i:t.layer)??i,s=Zae(r);if(ee(t.symbol)&&(!ee(e)||e.ignoreGraphicSymbol!==!0)){const b=t.symbol.type==="web-style"?await J5e(t.symbol,{...e,cache:ee(e)?e.webStyleCache:null}):t.symbol.clone();return YO(b,null,s),b}const n=(ee(e)?e.renderer:null)??(r&&"renderer"in r?r.renderer:null);let o=n&&"getSymbolAsync"in n?await n.getSymbolAsync(t,e):null;if(!o)return;if(o=o.type==="web-style"?await o.fetchSymbol({...e,cache:ee(e)?e.webStyleCache:null}):o.clone(),!(n&&"visualVariables"in n&&n.visualVariables&&n.visualVariables.length))return YO(o,null,s),o;if("arcadeRequiredForVisualVariables"in n&&n.arcadeRequiredForVisualVariables&&(Re(e)||Re(e.arcade))){const b={...e};b.arcade=await cp(),e=b}const a=await De(()=>Promise.resolve().then(()=>Q9),void 0,import.meta.url),l=[],u=[],c=[],d=[];for(const b of n.visualVariables)switch(b.type){case"color":l.push(b);break;case"opacity":u.push(b);break;case"rotation":d.push(b);break;case"size":b.target||c.push(b)}const f=!!l.length&&l[l.length-1],m=f?a.getColor(f,t,e):null,g=!!u.length&&u[u.length-1];let v=g?a.getOpacity(g,t,e):null;if(s!=null&&(v=v!=null?v*s:s),YO(o,m,v),c.length){const b=a.getAllSizes(c,t,e);await Gse(o,b)}for(const b of d)qse(o,a.getRotationAngle(b,t,e),b.axis);return o}let V6e=class{constructor(e,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in e){const s=e[r],n=new zK(s,void 0,void 0,2,2);this._properties[r]={pool:n,acquired:[]}}this._afterDispatchHandle=Cye(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const i=this._properties[e];for(const r of i.acquired)MV(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(e){const i=this._owner._get(e),r=this._properties[e];let s=r.pool.acquire();for(r.acquired.push(s);s===i;)r.acquired.push(s),s=r.pool.acquire();return s}_release(){for(const e in this._properties){const i=this._properties[e];let r=0;for(const s of i.acquired)MV(s)?i.acquired[r++]=s:i.pool.release(s);i.acquired.length=r}}};const B6e=Ze("mac")?"Meta":"Ctrl",DC={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let t=48;t<58;t++)DC[t]=String.fromCharCode(t);for(let t=1;t<25;t++)DC[111+t]=`F${t}`;for(let t=65;t<91;t++)DC[t]=[String.fromCharCode(t+32),String.fromCharCode(t)];function z6e(t){if(t.key!==void 0)return Tg(t);const e=DC[t.keyCode];return Array.isArray(e)?t.shiftKey?e[1]:e[0]:e}function G6e(t){switch(t){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}let q6e=class{constructor(e,i=[]){this.eventType=e,this.keyModifiers=i}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=e.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}};const GH=tt.getLogger("esri.views.input.InputHandler");let wn=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const i=this._incoming[e];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager?GH.error("This InputHandler has already been registered with an InputManager"):(e.setEventCallback(i=>this._handleEvent(i)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,i,r){let s;typeof i=="function"?(r=i,s=[]):s=i||[];const n=typeof e=="string"?new q6e(e,s):e,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=c=>{const d=this._incoming[c.match.eventType];if(d){const f=d.indexOf(c);d.splice(f,1),o(),this._manager&&this._manager.updateDependencies()}},l=new H6e(n,r,{onPause:a,onRemove:a,onResume:c=>{const d=this._incoming[c.match.eventType];d&&!d.includes(c)&&(d.push(c),o(),this._manager&&this._manager.updateDependencies())}});let u=this._incoming[n.eventType];return u||(u=[],this._incoming[n.eventType]=u),u.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const i=new W6e(e,{onEmit:(r,s,n,o)=>{this._manager?.emit(r.eventType,s,n,o)},onRemove:r=>{delete this._outgoing[r.eventType],this._manager?.updateDependencies()}});return this._outgoing[e]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(e){this._manager?.setPointerCapture(e,!0)}stopCapturingPointer(e){this._manager?.setPointerCapture(e,!1)}refreshHasPendingInputs(){this._manager?.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):GH.error("This InputHandler is not registered with an InputManager")}_handleEvent(e){const i=this._incoming[e.type];if(i){for(const r of i)if(r.match.matches(e)&&(r.callback?.(e),e.shouldStopPropagation()))break}}},H6e=class{constructor(e,i,r){this.match=e,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},W6e=class{constructor(e,i){this.eventType=e,this._removed=!1,this._handler=i}emit(e,i,r){this._removed||this._handler.onEmit(this,e,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},J6e=class extends wn{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>{this._update(i.data)})}_update(e){const i=e.native.pointerType==="touch"?"touch":"mouse",{x:r,y:s}=e;i===this._value&&this._x===r&&this._y===s||(this._value=i,this._x=r,this._y=s,this._onChange(i,r,s))}},I5=class{constructor(e){this._observable=new YF,this._value=e}get(){return pi(this._observable),this._value}set(e){e!==this._value&&(this._value=e,this._observable.notify())}},Z6e=class extends wn{get multiTouchActive(){return this._multiTouchActive.get()}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=new I5(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.set(this._activeTouchPointerIds.size>1)}},sh=class extends Pt{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=B6e,this._latestPointerType="mouse",this._propertiesPool=new V6e({latestPointerLocation:Q6e},this),this.latestPointerLocation=null,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const i of e)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}installHandlers(e,i,r=fm.INTERNAL){if(this._nameToGroup[e])return void tt.getLogger(this.declaredClass).error("There is already an InputHandler group registered under the name `"+e+"`");if(i.length===0)return void tt.getLogger(this.declaredClass).error("Can't register a group of zero handlers");const s={name:e,handlers:i.map(n=>({handler:n,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=s;for(let n=s.handlers.length-1;n>=0;n--){const o=s.handlers[n];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,l,u,c,d)=>{this._emitInputEvent(o.priorityIndex+1,a,l,u,d,c)},setPointerCapture:(a,l)=>{this._setPointerCapture(s,o,a,l)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const i=this._nameToGroup[e];i?(i.handlers.forEach(r=>{r.removed=!0,r.uninstallCallback?.()}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):tt.getLogger(this.declaredClass).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,i=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const s=this._handlers[r];s.priorityIndex=r,this._handlersPriority.push(s)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const s=this._handlersPriority[r];s.priorityIndex=r;let n=s.handler.hasSideEffects;if(!n){for(const o of s.handler.outgoingEventTypes)if(e.has(o)){n=!0;break}}if(n)for(const o of s.handler.incomingEventMatches){e.add(o.eventType);for(const a of o.keyModifiers)G6e(a)||i.add(a)}s.active=n}this._sourceEvents=e,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,i,r){this._latestPointerType=e;const s=this._get("latestPointerLocation");if(Re(s)||s.x!==i||s.y!==r){const n=this._propertiesPool.get("latestPointerLocation");n.x=i,n.y=r,this._set("latestPointerLocation",n)}}_onEventReceived(e,i){if(e==="pointer-capture-lost"){const n=i;this._pointerCaptures.delete(n.native.pointerId)}this._updateKeyModifiers(e,i);const r=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,s=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(e,i,r,s)}_updateKeyModifiers(e,i){if(!i)return;let r=!1;const s=()=>{if(!r){const a=new Set;this._activeKeyModifiers.forEach(l=>{a.add(l)}),this._activeKeyModifiers=a,r=!0}},n=(a,l)=>{l&&!this._activeKeyModifiers.has(a)?(s(),this._activeKeyModifiers.add(a)):!l&&this._activeKeyModifiers.has(a)&&(s(),this._activeKeyModifiers.delete(a))};if(e==="key-down"||e==="key-up"){const a=i.key;this._keyModifiers.has(a)&&n(a,e==="key-down")}const o=i.native;n("Alt",!(!o||!o.altKey)),n("Ctrl",!(!o||!o.ctrlKey)),n("Shift",!(!o||!o.shiftKey)),n("Meta",!(!o||!o.metaKey)),n("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new J6e((e,i,r)=>this._setLatestPointer(e,i,r)),this._multiTouchHandler=new Z6e,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],fm.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,fm.INTERNAL)}_setPointerCapture(e,i,r,s){const n=e.name+"-"+i.priorityIndex,o=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,o),s?(o.add(n),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):o.has(n)&&(o.delete(n),o.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,i,r,s){this._emitInputEvent(0,e,i,r,s)}_emitInputEvent(e,i,r,s,n,o){const a=s!==void 0?s:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),l=n!==void 0&&n,u={event:new Y6e(i,r,a,o||this._activeKeyModifiers,l),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(u):this._doNewPropagation(u)}_doNewPropagation(e){this._currentPropagation={events:new HA,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){const e=Wo(this._currentPropagation);for(;e.events.length>0;){const{event:i,priorityIndex:r}=e.events.pop(),s=i.data&&i.data.eventId;if(!(s!=null&&this._stoppedPropagationEventIds.has(s)))for(e.currentHandler=this._handlersPriority[r];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!i.shouldStopPropagation()&&e.currentHandler.eventCallback?.(i),i.shouldStopPropagation()){s!=null&&this._stoppedPropagationEventIds.add(s);break}if(i.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:i,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}_pausePropagation(e){const i=new HA;i.push(e);const r=this._currentPropagation;if(r){for(;r.events.length;)i.push(r.events.pop());r.events=i,r.currentHandler=null}}_compareHandlerPriority(e,i){if(e.handler.hasSideEffects!==i.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==i.groupPriority)return e.groupPriority>i.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const s of i.handler.incomingEventMatches){if(r.eventType!==s.eventType)continue;const n=r.keyModifiers.filter(o=>s.keyModifiers.includes(o));if(n.length===r.keyModifiers.length!=(n.length===s.keyModifiers.length))return r.keyModifiers.length>s.keyModifiers.length?-1:1}return e.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(e){const i=[];for(const r of e){let s=0;for(;s<i.length&&this._compareHandlerPriority(r,i[s])>=0;)s++;i.splice(s,0,r)}return i}get debug(){const e=i=>{const r=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=r};return{injectEvent:(i,r)=>{e(()=>{this._onEventReceived(i,r)})},disablePointerCapture:e}}};h([p({readOnly:!0})],sh.prototype,"hasPendingInputs",null),h([p({constructOnly:!0})],sh.prototype,"eventSource",void 0),h([p({constructOnly:!0})],sh.prototype,"recognizers",void 0),h([p()],sh.prototype,"_latestPointerType",void 0),h([p()],sh.prototype,"latestPointerType",null),h([p()],sh.prototype,"multiTouchActive",null),h([p({readOnly:!0})],sh.prototype,"latestPointerLocation",void 0),sh=h([ce("esri.views.input.InputManager")],sh);let Y6e=class{constructor(e,i,r,s,n){this.type=e,this.data=i,this.timestamp=r,this.modifiers=s,this.cancelable=n,this._propagationState=zf.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=zf.STOPPED}shouldStopPropagation(){return(this._propagationState&zf.STOPPED)!=0}async(e){this._propagationState|=zf.PAUSED;const i=(r,s)=>{this._propagationState&=~zf.PAUSED;const n=this._resumeCallback;if(this._resumeCallback=null,n&&n(),s)throw r;return r};return(typeof e=="function"?e():e).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(e){return!!(this._propagationState&zf.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};var zf;(function(t){t[t.NONE=0]="NONE",t[t.STOPPED=1]="STOPPED",t[t.PAUSED=2]="PAUSED"})(zf||(zf={}));const fm={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let K6e=class{};const Q6e=K6e;function qH(t){return t&&typeof t.highlight=="function"}const Yae=t=>{let e=class extends t{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:r}=this;return am(r),this.goToOverride?this.goToOverride(r,i):r.goTo(i.target,i.options)}};return h([p()],e.prototype,"goToOverride",void 0),h([p()],e.prototype,"view",void 0),e=h([ce("esri.widgets.support.GoTo")],e),e},Zx=Nt.ofType({key:"type",defaultKeyValue:"button",base:K4,typeMap:{button:jw,toggle:Oee}}),X6e=()=>[t0.clone()],eNe=()=>[eb.clone(),tb.clone()];let $i=class extends Yae(jae){get isLoadingFeature(){return this.featureViewModels.some(e=>e.waitingForContent)}constructor(e){super(e),this._handles=new Ao,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._highlightSelectedFeaturePromise=null,this._highlightActiveFeaturePromise=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new Zx,this.activeFeature=null,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new kn({symbol:new Tp({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}initialize(){this._handles.add([st(()=>[this.autoOpenEnabled,this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),st(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),st(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),st(()=>this.view?.animation?.state,e=>this._animationStateChange(e)),st(()=>this.location,e=>this._locationChange(e)),st(()=>this.selectedFeature,e=>this._selectedFeatureChange(e)),st(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),st(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),st(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",e=>m6e({event:e,view:this.view})),Nl(()=>!this.waitingForResult,()=>this._waitingForResultChange(),Cl),st(()=>[this.features,this.view?.map,this.view?.spatialReference],()=>this._updateFeatureVMs()),st(()=>this.view?.scale,()=>this._viewScaleChange()),Nl(()=>!this.visible,()=>this.browseClusterEnabled=!1),st(()=>this.browseClusterEnabled,e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new Zx;e.removeAll();const{actions:i,defaultActions:r,defaultPopupTemplateEnabled:s,includeDefaultActions:n,selectedFeature:o}=this,a=n?r.concat(i):i,l=o&&(typeof o.getEffectivePopupTemplate=="function"&&o.getEffectivePopupTemplate(s)||o.popupTemplate),u=l&&l.actions,c=l&&l.overwriteActions?u:u?u.concat(a):a;return c&&c.filter(Boolean).forEach(d=>e.add(d)),e}get defaultActions(){const e=this._get("defaultActions")||new Zx;return e.removeAll(),e.addMany(kg(this.selectedFeature)?eNe():X6e()),e}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){const i=e||[];this._set("features",i);const{pendingPromisesCount:r,promiseCount:s,selectedFeatureIndex:n}=this,o=s&&i.length;o&&r&&n===-1?this.selectedFeatureIndex=0:o&&n!==-1||(this.selectedFeatureIndex=i.length?0:-1)}get location(){return this._get("location")||null}set location(e){let i=e;const r=this.view?.spatialReference?.isWebMercator;e&&e?.spatialReference?.isWGS84&&r&&(i=um(e)),this._set("location",i)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach(i=>{this._pendingPromises.add(i);const r=n=>{this._pendingPromises.has(i)&&this._updateFeatures(n),this._updatePendingPromises(i)},s=()=>this._updatePendingPromises(i);i.then(r,s)}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:e,selectedFeatureIndex:i}=this;return i===-1?null:e[i]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return typeof e=="number"?e:-1}set selectedFeatureIndex(e){const{featureCount:i}=this;e=isNaN(e)||e<-1||!i?-1:(e+i)%i,this.activeFeature=null,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:e}=this,i=Vae(this);return i&&e?this.callGoTo({target:{target:i,scale:e.scale}}):Promise.reject(new Ce("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:i,view:e}))}zoomTo(e){return this.callGoTo(e)}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(e,i){const{view:r}=this;if(!r||!e)throw new Ce("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:r});return r.fetchPopupFeatures(e,{event:i&&i.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:i&&i.signal})}open(e){const i={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...e,visible:!0},{fetchFeatures:r}=i;delete i.fetchFeatures,r&&this._setFetchFeaturesPromises(i.location);const s=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const n of s)delete i[n];this.set(i)}triggerAction(e){const i=this.allActions.getItemAt(e);i&&!i.disabled&&this.emit("trigger-action",{action:i})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){_6e(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:e,selectedFeature:i}=this;e?.type==="2d"?kg(i)?(await b6e(this),await w6e(this)):tt.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",i):tt.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",i)}_animationStateChange(e){this.zoomToLocation||(t0.disabled=e==="waiting-for-target")}_clearBrowsedClusterGraphics(){const e=this.view?.graphics;e&&(e.remove(this.selectedClusterBoundaryFeature),this._selectedClusterFeature&&e.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(kg(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=this.selectedFeature?[this.selectedFeature]:[])}_locationChange(e){const{selectedFeature:i,updateLocationEnabled:r}=this;r&&e&&(!i||i.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:i,featurePage:r,featuresPerPage:s,featureViewModels:n}=this;if(r===null)return;const o=((r-1)*s+i)%i,a=o+s;n.slice(o,a).forEach((l,u)=>{l&&!l.graphic&&(l.graphic=e[o+u])})}async _selectedFeatureChange(e){const{location:i,updateLocationEnabled:r,view:s}=this;if(e&&s){if(this.browseClusterEnabled)return this._selectedClusterFeature&&(s.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),kg(e)?void 0:(e.symbol=await U6e(e),this._selectedClusterFeature=e,void s.graphics.add(this._selectedClusterFeature));!r&&i||!e.geometry?r&&!e.geometry&&this.centerAtLocation().then(()=>{const n=s.center?.clone();n&&(this.location=n)}):this.location=Bae(e.geometry)}}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then(i=>{const{clientOnlyGraphics:r,promisesPerLayerView:s}=i,n=Promise.resolve(r),o=s.map(a=>a.promise);this.promises=[n,...o]})}_destroyFeatureVMs(){this.featureViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:e,features:i,featureViewModels:r}=this;if(kg(e)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!i||!i.length)return;const s=r.slice(0),n=[];i.forEach((o,a)=>{if(!o)return;let l=null;if(s.some((u,c)=>(u&&u.graphic===o&&(l=u,s.splice(c,1)),!!l)),l)n[a]=l;else{const u=new k7({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:this.view?.spatialReference,graphic:o===e?o:null,map:this.view?.map,view:this.view});n[a]=u}}),s.forEach(o=>o&&!o.destroyed&&o.destroy()),this._set("featureViewModels",n)}_getScreenPoint(e){const{view:i}=this;return i&&e&&typeof i.toScreen=="function"?i.toScreen(e):null}_autoOpenEnabledChange(){const e="auto-fetch-features",{_handles:i,autoOpenEnabled:r}=this;if(i.remove(e),r&&this.view){const s=this.view.on("click",n=>{n.pointerType==="mouse"&&n.button!==0||this._fetchFeaturesAndOpen(n)},fm.WIDGET);i.add(s,e)}}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(e,i){this._cancelFetchingFeatures();const r=new AbortController,{signal:s}=r;this._fetchFeaturesController=r,this.notifyChange("waitingForResult");const n=this.fetchFeatures(e,{signal:s,event:i});return n.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),n}_fetchFeaturesAndOpen(e){const{screenPoint:i,mapPoint:r}=e,{view:s}=this;this._fetchFeaturesWithController(i,e).then(n=>{const{clientOnlyGraphics:o,promisesPerLayerView:a,location:l}=n,u=[Promise.resolve(o),...a.map(c=>c.promise)];return s?.popup?.open({location:l||r,promises:u}),n})}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}async _getLayerView(e,i){return await e.when(),e.whenLayerView(i)}_getHighlightLayer(e){const{layer:i,sourceLayer:r}=e;return r&&"layer"in r&&r.layer?r.layer:r?.type==="map-notes"||r?.type==="subtype-group"?r:i}_getHighlightTarget(e,i){const r=i.type==="imagery"?void 0:"objectIdField"in i?i.objectIdField||x6e:null,s=e.attributes;return s&&r&&s[r]||e}async _highlightActiveFeature(){const e="highlight-active-feature";this._handles.remove(e);const{highlightEnabled:i,view:r,activeFeature:s,visible:n}=this;if(!(s&&r&&i&&n))return;const o=this._getHighlightLayer(s);if(!(o&&o instanceof Bh))return;const a=this._getLayerView(r,o);this._highlightActiveFeaturePromise=a;const l=await a;if(!(l&&qH(l)&&this._highlightActiveFeaturePromise===a&&this.activeFeature&&this.highlightEnabled))return;const u=l.highlight(this._getHighlightTarget(s,o));this._handles.add(u,e)}async _highlightSelectedFeature(){const e="highlight-selected-feature";this._handles.remove(e);const{selectedFeature:i,highlightEnabled:r,view:s,visible:n}=this;if(!(i&&s&&r&&n))return;const o=this._getHighlightLayer(i);if(!(o&&o instanceof Bh))return;const a=this._getLayerView(s,o);this._highlightSelectedFeaturePromise=a;const l=await a;if(!(l&&qH(l)&&this._highlightSelectedFeaturePromise===a&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const u=l.highlight(this._getHighlightTarget(i,o));this._handles.add(u,e)}_updateFeatures(e){const{features:i}=this;if(!e||!e.length)return;if(!i.length)return void(this.features=e);const r=e.filter(s=>!i.includes(s));this.features=i.concat(r)}};h([p()],$i.prototype,"featurePage",void 0),h([p()],$i.prototype,"isLoadingFeature",null),h([p({type:Zx})],$i.prototype,"actions",void 0),h([p({readOnly:!0})],$i.prototype,"active",null),h([p()],$i.prototype,"activeFeature",void 0),h([p({readOnly:!0})],$i.prototype,"allActions",null),h([p({type:Boolean})],$i.prototype,"defaultPopupTemplateEnabled",void 0),h([p()],$i.prototype,"autoCloseEnabled",void 0),h([p()],$i.prototype,"autoOpenEnabled",void 0),h([p()],$i.prototype,"browseClusterEnabled",void 0),h([p()],$i.prototype,"content",void 0),h([p({type:Zx,readOnly:!0})],$i.prototype,"defaultActions",null),h([p({readOnly:!0})],$i.prototype,"featureCount",null),h([p()],$i.prototype,"features",null),h([p()],$i.prototype,"featuresPerPage",void 0),h([p()],$i.prototype,"featureViewModelAbilities",void 0),h([p({readOnly:!0})],$i.prototype,"featureViewModels",void 0),h([p()],$i.prototype,"highlightEnabled",void 0),h([p()],$i.prototype,"includeDefaultActions",void 0),h([p({type:Ct})],$i.prototype,"location",null),h([p({readOnly:!0})],$i.prototype,"pendingPromisesCount",null),h([p({readOnly:!0})],$i.prototype,"selectedClusterBoundaryFeature",void 0),h([p({readOnly:!0})],$i.prototype,"waitingForResult",null),h([p({readOnly:!0})],$i.prototype,"promiseCount",null),h([p()],$i.prototype,"promises",null),h([p({value:null,readOnly:!0})],$i.prototype,"selectedFeature",null),h([p({value:-1})],$i.prototype,"selectedFeatureIndex",null),h([p({readOnly:!0})],$i.prototype,"selectedFeatureViewModel",null),h([p({readOnly:!0})],$i.prototype,"state",null),h([p()],$i.prototype,"title",void 0),h([p()],$i.prototype,"updateLocationEnabled",void 0),h([p()],$i.prototype,"view",void 0),h([p()],$i.prototype,"visible",void 0),h([p()],$i.prototype,"zoomFactor",void 0),h([p()],$i.prototype,"zoomToLocation",void 0),h([p()],$i.prototype,"centerAtLocation",null),$i=h([ce("esri.widgets.Popup.PopupViewModel")],$i);const Kae=$i,HH="selected-index",tNe=0,WH="popup-spinner",JH={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},ZH="esri-popup";function sd(t,e){return e===void 0?`${ZH}__${t}`:`${ZH}__${t}-${e}`}const YH={closeButton:!0,featureNavigation:!0};let Bt=class extends Fae(Pn){constructor(e,i){super(e,i),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new Ao,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverNode=null,this._featureMenuViewportNode=null,this._rootFlowItemNode=null,this._featureMenuIntersectionObserverCallback=([r])=>{r?.isIntersecting&&this.viewModel.featurePage!=null&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=Cb(()=>this._displaySpinner(),tNe),this._exitRelatedRecordsActions=new WeakMap,this._featureSelectionActions=new WeakMap,this._flowItems=new Nt,this.alignment="auto",this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureMenuOpen=!1,this.headingLevel=2,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.spinnerEnabled=!0,this.viewModel=new Kae,this.visibleElements={...YH},this._handleOpenRelatedFeature=r=>{this._openRelatedFeature(r)},this._addSelectedFeatureIndexHandle(),this.addHandles([st(()=>this.viewModel?.screenLocation,()=>this._positionContainer()),st(()=>[this.viewModel?.active,this.dockEnabled],()=>this._toggleScreenLocationEnabled()),st(()=>this.viewModel?.screenLocation,(r,s)=>{!!r!=!!s&&this.reposition()}),st(()=>[this.viewModel?.view?.padding,this.viewModel?.view?.size,this.viewModel?.active,this.viewModel?.location,this.alignment],()=>this.reposition()),st(()=>this.spinnerEnabled,r=>this._spinnerEnabledChange(r)),st(()=>this.viewModel?.view?.size,(r,s)=>this._updateDockEnabledForViewSize(r,s)),st(()=>this.viewModel?.view,(r,s)=>this._viewChange(r,s)),st(()=>this.viewModel?.view?.ready,(r,s)=>this._viewReadyChange(r??!1,s??!1)),st(()=>[this.viewModel?.waitingForResult,this.viewModel?.location],()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),st(()=>this.selectedFeatureWidget,()=>this._destroyFlowItemWidgets()),st(()=>[this.selectedFeatureWidget?.viewModel?.title,this.selectedFeatureWidget?.viewModel?.state],()=>this._setTitleFromFeatureWidget()),st(()=>[this.selectedFeatureWidget?.viewModel?.content,this.selectedFeatureWidget?.viewModel?.state],()=>this._setContentFromFeatureWidget()),Nl(()=>!this.collapsed,()=>{this.viewModel?.view?.widthBreakpoint==="xsmall"&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),bn(()=>this.viewModel?.allActions,"change",()=>this._watchActions()),st(()=>this.viewModel?.allActions,()=>this._watchActions(),Fi),st(()=>this.viewModel?.featureViewModels,()=>this._featureMenuViewportScrollTop()),bn(()=>this._flowItems,"change",()=>{this.notifyChange("_activeFlowItemWidget"),this.scheduleRender()}),st(()=>[this._activeFlowItemWidget?.viewModel?.state,this._activeFlowItemWidget?.viewModel?.title],()=>this.scheduleRender())])}loadDependencies(){return Promise.all([De(()=>import("./calcite-flow-eb7f7b94.js"),["./calcite-flow-eb7f7b94.js","./observers-fef7c483.js","./preload-helper-388ac9d5.js"],import.meta.url),De(()=>import("./calcite-flow-item-149f4bcc.js"),["./calcite-flow-item-149f4bcc.js","./interactive-573cbe88.js","./loadable-25ad9e4e.js","./t9n-854d67dc.js","./observers-fef7c483.js","./guid-9426053f.js","./action-ab6c065d.js","./icon-d62e8920.js","./loader-c6f8843f.js","./tooltip-4002e6db.js","./preload-helper-388ac9d5.js","./debounce-31e0cfcc.js","./scrim-b5159a35.js"],import.meta.url),De(()=>import("./calcite-action-64e2b0a3.js"),["./calcite-action-64e2b0a3.js","./action-ab6c065d.js","./guid-9426053f.js","./interactive-573cbe88.js","./loadable-25ad9e4e.js","./t9n-854d67dc.js","./observers-fef7c483.js","./icon-d62e8920.js","./loader-c6f8843f.js","./preload-helper-388ac9d5.js"],import.meta.url),De(()=>import("./calcite-tooltip-e6f88031.js"),["./calcite-tooltip-e6f88031.js","./tooltip-4002e6db.js","./preload-helper-388ac9d5.js","./debounce-31e0cfcc.js","./guid-9426053f.js"],import.meta.url),De(()=>import("./calcite-icon-7f660ce3.js"),["./calcite-icon-7f660ce3.js","./icon-d62e8920.js","./observers-fef7c483.js","./preload-helper-388ac9d5.js"],import.meta.url)])}destroy(){this._destroyFlowItemWidgets(),this._destroySelectedFeatureWidget(),this._destroySpinner(),this._handles?.destroy(),this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver?.disconnect()}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){const{selectedFeatureWidget:e,viewModel:i}=this;if(!e)return!!i?.content;const r=e.viewModel;if(r?.waitingForContent||r?.state==="error")return!0;const s=r?.content;return Array.isArray(s)?!!s.length:!!s}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation!=null}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}get _activeFlowItemWidget(){const{_flowItems:e}=this;return e.getItemAt(e.length-1)||null}get actions(){return this.viewModel.actions}set actions(e){this.viewModel.actions=e}set actionsMenuOpen(e){this._set("actionsMenuOpen",!!e)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get autoCloseEnabled(){return this.viewModel.autoCloseEnabled}set autoCloseEnabled(e){this.viewModel.autoCloseEnabled=e}get autoOpenEnabled(){return this.viewModel.autoOpenEnabled}set autoOpenEnabled(e){this.viewModel.autoOpenEnabled=e}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(e){this.viewModel.defaultPopupTemplateEnabled=e}get content(){return this.viewModel.content}set content(e){this.viewModel.content=e}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||JH}set dockOptions(e){const i={...JH},r=this.viewModel?.view?.breakpoints,s={};r&&(s.width=r.xsmall,s.height=r.xsmall);const n={...i,...e},o={...i.breakpoint,...s},{breakpoint:a}=n;typeof a=="object"?n.breakpoint={...o,...a}:a&&(n.breakpoint=o),this._set("dockOptions",n),this._setCurrentDockPosition(),this.reposition()}get featureCount(){return this.viewModel.featureCount}get features(){return this.viewModel.features}set features(e){this.viewModel.features=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get highlightEnabled(){return this.viewModel.highlightEnabled}set highlightEnabled(e){this.viewModel.highlightEnabled=e}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get promises(){return this.viewModel.promises}set promises(e){this.viewModel.promises=e}get selectedFeature(){return this.viewModel.selectedFeature}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(e){this.viewModel.selectedFeatureIndex=e}get selectedFeatureWidget(){const{_feature:e,visibleElements:i,headingLevel:r,_flowItems:s}=this,{selectedFeatureViewModel:n}=this.viewModel,o={...i,title:!1};return n?(e?(e.viewModel=n,e.visibleElements=o):this._feature=new h6e({flowItems:s,headingLevel:r+1,viewModel:n,visibleElements:o}),this._feature):null}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(e){this.viewModel.updateLocationEnabled=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}castVisibleElements(e){return{...YH,...e}}blur(){const{active:e}=this.viewModel;e||tt.getLogger(this.declaredClass).warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){return this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(e,i){return this.viewModel.fetchFeatures(e,i)}focus(){const{active:e}=this.viewModel;e||tt.getLogger(this.declaredClass).warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(e){this._handles.remove(HH);const i=!!e&&!!e.featureMenuOpen,r=!!e&&!!e.actionsMenuOpen,s={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:r,featureMenuOpen:i};this.viewModel?.view?.widthBreakpoint==="xsmall"&&(s.collapsed=!0),this.set(s),this.viewModel.open(e),this._shouldFocus(e),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(e){return this.viewModel.triggerAction(e)}render(){const{actionsMenuOpen:e,dockEnabled:i,featureMenuVisible:r,dividedActions:s,currentAlignment:n,currentDockPosition:o}=this,{active:a}=this.viewModel,{menuActions:l}=s,u=a&&l.length>1&&e,c=a&&i,d=a&&!i,f=this.selectedFeature?.layer?.title,m=this.selectedFeature?.layer?.id,g={[nt.alignTopCenter]:n==="top-center",[nt.alignBottomCenter]:n==="bottom-center",[nt.alignTopLeft]:n==="top-left",[nt.alignBottomLeft]:n==="bottom-left",[nt.alignTopRight]:n==="top-right",[nt.alignBottomRight]:n==="bottom-right",[nt.isDocked]:c,[nt.shadow]:d,[nt.isDockedTopLeft]:o==="top-left",[nt.isDockedTopCenter]:o==="top-center",[nt.isDockedTopRight]:o==="top-right",[nt.isDockedBottomLeft]:o==="bottom-left",[nt.isDockedBottomCenter]:o==="bottom-center",[nt.isDockedBottomRight]:o==="bottom-right",[nt.isFeatureMenuOpen]:r,[nt.isActionsMenuOpen]:u};return Ne("div",{class:this.classes(nt.base,g),role:"presentation","data-layer-title":f,"data-layer-id":m,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},a?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return Ne("span",{"aria-hidden":"true",class:this.classes(nt.icon,nt.iconLoading,nt.rotating)})}renderNavigationLoading(){const{messagesCommon:e}=this;return this.viewModel.pendingPromisesCount?Ne("div",{key:sd("loading-container"),role:"presentation",class:nt.loadingContainer,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const e=Th(this.container),i={[nt.iconRightTriangleArrow]:e,[nt.paginationPreviousIconRTL]:e,[nt.iconLeftTriangleArrow]:!e,[nt.paginationPreviousIconLTR]:!e};return Ne("span",{"aria-hidden":"true",class:this.classes(nt.icon,i)})}renderPreviousButton(){const{messages:e}=this;return Ne("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(nt.button,nt.paginationPrevious),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())}renderNextIcon(){const e=Th(this.container),i={[nt.iconLeftTriangleArrow]:e,[nt.paginationNextIconRTL]:e,[nt.iconRightTriangleArrow]:!e,[nt.paginationNextIconLTR]:!e};return Ne("span",{"aria-hidden":"true",class:this.classes(nt.icon,i)})}renderNextButton(){const{messages:e}=this;return Ne("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(nt.button,nt.paginationNext),"aria-label":e.next,title:e.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:e,featureMenuId:i,messagesCommon:r}=this,{featureCount:s,selectedFeatureIndex:n}=this.viewModel;return Ne("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(nt.button,nt.featureMenuButton),"aria-haspopup":"true","aria-controls":i,"aria-expanded":e.toString(),"aria-label":r.menu,title:r.menu},this._getPageText(s,n))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:[]}renderDockIcon(){const{dockEnabled:e}=this,i=this._wouldDockTo(),r={[nt.iconUndock]:e,[nt.iconDock]:!e,[nt.iconDockToRight]:!e&&(i==="top-right"||i==="bottom-right"),[nt.iconDockToLeft]:!e&&(i==="top-left"||i==="bottom-left"),[nt.iconDockToTop]:!e&&i==="top-center",[nt.iconDockToBottom]:!e&&i==="bottom-center"};return Ne("span",{"aria-hidden":"true",class:this.classes(r,nt.icon)})}renderDockButton(){const{dockEnabled:e,messages:i}=this,r=this.viewModel?.view?.widthBreakpoint,s=e?i.undock:i.dock;return r!=="xsmall"&&this.dockOptions?.buttonEnabled?Ne("div",{role:"button","aria-label":s,title:s,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(nt.button,nt.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:e}=this.viewModel,{titleId:i,collapsible:r,contentCollapsed:s,messagesCommon:n}=this,o={[nt.headerContainerButton]:r},a=Ne(kC,{level:this.headingLevel,class:nt.headerTitle,innerHTML:e??""}),l=r?Ne("button",{key:`${e}--collapsible`,id:i,title:s?n.expand:n.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(nt.headerContainer,o),"aria-expanded":s?"false":"true",onclick:this._toggleCollapsed,type:"button"},a,Ne("calcite-icon",{class:nt.collapseIcon,key:"collapse-icon",icon:s?"chevron-down":"chevron-up",scale:"m"})):Ne("div",{key:e??"title",id:i,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(nt.headerContainer,o)},a);return e?l:null}renderCloseIcon(){return Ne("span",{"aria-hidden":"true",class:this.classes(nt.icon,nt.iconClose)})}renderCloseButton(){const{visibleElements:e,messagesCommon:i}=this;return e.closeButton?Ne("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:nt.button,"aria-label":i.close,title:i.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return Ne("header",{class:nt.header},this.renderTitle(),Ne("div",{class:nt.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:e,hasContent:i,contentCollapsed:r,_flowItems:s}=this,{content:n}=this.viewModel,o=s.toArray(),a={[nt.contentHasFlows]:!!o.length};return i&&!r?Ne("div",{key:n??"content",enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:this.classes(nt.content,a)},Ne("calcite-flow",{bind:this},Ne("calcite-flow-item",{bind:this,"data-node-ref":"_rootFlowItemNode",afterCreate:d5,key:"root-flow-item",onCalciteFlowItemBack:this._handleBackClick},this.renderContent()),o.map(l=>this.renderFlowItem(l))),o.map(l=>this.renderFlowItemTooltips(l))):null}renderFlowItem(e){const{messages:i}=this,r=E5(),s="graphic"in e&&!e.isTable;return Ne("calcite-flow-item",{bind:this,class:this.classes({[nt.calciteThemeDark]:!r,[nt.calciteThemeLight]:r}),heading:e.title??"",description:this._getFlowItemDescription(e),onCalciteFlowItemBack:this._handleBackClick,key:`flow-item-${e.viewModel.uid}`},Ne("calcite-action",{class:nt.actionExit,icon:"move-up",label:i?.exitRelatedRecords,text:i?.exitRelatedRecords,slot:"header-actions-start",bind:this,afterCreate:n=>this._storeExitRelatedRecordsAction(e,n),onclick:this._destroyFlowItemWidgets}),s?Ne("calcite-action",{class:nt.actionSelectFeature,icon:"zoom-to-object",label:i?.selectFeature,text:i?.selectFeature,slot:"header-actions-end",bind:this,afterCreate:n=>this._storeFeatureSelectionAction(e,n),onclick:()=>this._handleOpenRelatedFeature(e)}):null,Ne("div",{class:this.classes(nt.contentFlowItem,{[nt.calciteThemeDark]:r,[nt.calciteThemeLight]:!r})},e.render()))}renderFlowItemTooltips(e){const{messages:i,_exitRelatedRecordsActions:r,_featureSelectionActions:s}=this,n=E5(),o=s.get(e);return[Ne("calcite-tooltip",{class:this.classes({[nt.calciteThemeDark]:!n,[nt.calciteThemeLight]:n}),key:`exit-related-records-tooltip-${e.viewModel.uid}`,label:i?.exitRelatedRecords,overlayPositioning:"fixed",referenceElement:r.get(e),placement:"top"},i?.exitRelatedRecords),o?Ne("calcite-tooltip",{class:this.classes({[nt.calciteThemeDark]:!n,[nt.calciteThemeLight]:n}),key:`select-related-record-tooltip-${e.viewModel.uid}`,label:i?.selectFeature,overlayPositioning:"fixed",referenceElement:o,placement:"top"},i?.selectFeature):null]}renderActionsMenuButton(){const{actionsMenuId:e,actionsMenuButtonId:i,actionsMenuOpen:r,dividedActions:s,messagesCommon:n}=this,o=r?n.close:n.open,{menuActions:a}=s;return a.length?Ne("div",{key:sd("actions-menu-button"),class:this.classes(nt.button,nt.actionsMenuButton),role:"button",id:i,"aria-haspopup":"true","aria-controls":r?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":o,title:o},Ne("span",{"aria-hidden":"true",class:nt.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:e,actionsMenuButtonId:i,actionsMenuOpen:r,dividedActions:s}=this,{menuActions:n}=s;return n.length&&r?Ne("ul",{id:e,role:"menu","aria-labelledby":i,key:sd("actions"),class:nt.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},n.toArray().map(o=>this.renderAction({action:o,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:e}=this.dividedActions;return e.length?e.toArray().map(i=>this.renderAction({action:i,type:"inline"})):[]}renderInlineActionsContainer(){const{inlineActions:e,menuActions:i}=this.dividedActions,r=!!e.length,s=!!i.length;return r||s?Ne("div",{key:"inline-actions-container","data-inline-actions":r.toString(),"data-menu-actions":s.toString(),class:nt.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?Ne("section",{key:sd("navigation"),class:this.classes(nt.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:e,dividedActions:i}=this,{inlineActions:r,menuActions:s}=i,n=!!r.length,o=!!s.length,a={[nt.footerHasPagination]:e,[nt.footerHasActions]:n,[nt.footerHasActionsMenu]:o};return e||n?Ne("div",{key:sd("feature-buttons"),class:this.classes(nt.footer,a)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:e}=this,{featureViewModels:i,isLoadingFeature:r}=this.viewModel,s=dh(e.selectedFeatures,{total:i.length});return Ne("section",{key:sd("menu"),class:nt.featureMenu},Ne("strong",{class:nt.featureMenuHeader},s),Ne("nav",{bind:this,class:nt.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:d5},this.renderFeatureMenu(),Ne("div",{class:nt.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),r?Ne("div",{class:nt.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:Ne("div",{key:sd("pointer"),class:nt.pointer,role:"presentation"},Ne("div",{class:this.classes(nt.pointerDirection,nt.shadow)}))}renderMainContainer(){const{dockEnabled:e,currentAlignment:i,currentDockPosition:r,titleId:s,contentId:n,collapsible:o,hasContent:a,contentCollapsed:l,visibleElements:u}=this,{title:c}=this.viewModel,d=i==="bottom-left"||i==="bottom-center"||i==="bottom-right"||r==="top-left"||r==="top-center"||r==="top-right",f=i==="top-left"||i==="top-center"||i==="top-right"||r==="bottom-left"||r==="bottom-center"||r==="bottom-right",m={[nt.shadow]:e,[nt.isCollapsible]:o,[nt.isCollapsed]:l};return Ne("div",{class:this.classes(nt.main,nt.widget,m),tabIndex:u.closeButton?void 0:-1,role:"dialog","aria-labelledby":c?s:"","aria-describedby":a&&!l?n:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},d?this.renderFooter():null,d?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),f?this.renderFooter():null,f?this.renderFeatureMenuContainer():null)}renderContent(){const e=this.viewModel?.content;return e?typeof e=="string"?Ne("div",{class:Gr.contentNode,key:e,innerHTML:e}):this.renderNodeContent(e):null}renderActionText(e){return Ne("span",{key:"text",class:nt.actionText},e)}renderActionIcon(e){const i=this._getActionClass(e),r=this._getActionImage(e),s={[nt.iconLoading]:e.active,[nt.rotating]:e.active,[nt.icon]:!!i,[nt.actionImage]:!e.active&&!!r};return i&&(s[i]=!e.active),Ne("span",{key:"icon","aria-hidden":"true",class:this.classes(nt.icon,s),styles:this._getIconStyles(r)})}renderAction(e){const{action:i,type:r}=e,s=this._getActionTitle(i),n={[nt.action]:i.type!=="toggle",[nt.actionToggle]:i.type==="toggle",[nt.actionToggleOn]:i.type==="toggle"&&i.value,[nt.buttonDisabled]:i.disabled},o=[this.renderActionIcon(i),this.renderActionText(s)],a=r==="menu-item"?Ne("li",{key:i.uid,role:"menuitem",tabIndex:0,title:s,"aria-label":s,class:this.classes(nt.button,n),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":i.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},o):Ne("div",{key:i.uid,role:"button",tabIndex:0,title:s,"aria-label":s,class:this.classes(nt.button,n),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":i.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},o);return i.visible?a:null}renderFeatureMenuItem(e,i){const{messages:r,messagesCommon:s}=this,{selectedFeatureIndex:n,selectedFeatureViewModel:o}=this.viewModel,a=e===o,l={[nt.featureMenuSelected]:a},u=a?Ne("span",{key:sd(`feature-menu-selected-feature-${n}`),title:r.selectedFeature,"aria-label":r.selectedFeature,class:nt.iconCheckMark}):null,c=Ne("span",{innerHTML:e.title||s.untitled});return Ne("li",{role:"menuitem",tabIndex:-1,key:sd(`feature-menu-feature-${n}`),class:this.classes(l,nt.featureMenuItem),bind:this,"data-feature-index":i,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},Ne("span",{class:nt.featureMenuTitle},c,u))}renderFeatureMenu(){const{featureMenuId:e}=this,{featureViewModels:i}=this.viewModel;return i.length>1?Ne("ol",{class:nt.featureMenuList,id:e,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},i.filter(r=>!!r.graphic).map((r,s)=>this.renderFeatureMenuItem(r,s))):null}_storeFeatureSelectionAction(e,i){this._featureSelectionActions.set(e,i),this.scheduleRender()}_storeExitRelatedRecordsAction(e,i){this._exitRelatedRecordsActions.set(e,i),this.scheduleRender()}_getFlowItemDescription(e){return"featureCountDescription"in e?e.featureCountDescription:e.viewModel.description??""}async _openRelatedFeature(e){await e.viewModel.updateGeometry();const i=e.graphic,r=i?.geometry;if(Re(r)||Re(i))return;this._destroyFlowItemWidgets(),await this.viewModel.zoomTo({target:r});const s=Bae(r);this.open({features:[i],location:ee(s)?s:void 0})}_destroyFlowItemWidgets(){this._flowItems.removeAll().forEach(e=>{"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),e.viewModel=null,e.destroy()})}_handleBackClick(){const e=this._flowItems.pop();e&&(this._exitRelatedRecordsActions.delete(e),this._featureSelectionActions.delete(e),"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),e&&(e.viewModel=null,e.destroy()))}_getActionTitle(e){const{messages:i,selectedFeature:r,messagesCommon:s}=this,{id:n}=e,o=r?.attributes,a=e.title??"",l=n==="zoom-to-feature"?dh(a,{messages:i}):n==="remove-selected-feature"?dh(a,{messages:s}):n==="zoom-to-clustered-features"||n==="browse-clustered-features"?dh(a,{messages:i}):e.title;return l&&o?dh(l,o):l??""}_getActionClass(e){const{selectedFeature:i}=this,r=i?.attributes,{className:s,image:n}=e,o=n||s?s:nt.iconDefaultAction;return o&&r?dh(o,r):o??""}_getActionImage(e){const{selectedFeature:i}=this,r=i?.attributes,{image:s}=e;return s&&r?dh(s,r):s??""}_createFeatureUpdatedAnimation(){return Cke("enter",nt.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:e,featureNavigationVisible:i}=this;if(typeof e!="number")return null;const r=Math.round(e);return Math.max(i?r-1:r,0)}_watchActions(){const{allActions:e}=this.viewModel;this.notifyChange("dividedActions");const i="actions";this._handles.remove(i),e&&e.forEach(r=>{this._handles.add(st(()=>[r.uid,r.active,r.className,r.disabled,r.id,r.title,r.image,r.visible],()=>this.scheduleRender()),i)})}_divideActions(){const{allActions:e}=this.viewModel,i=e.filter(o=>o.visible),r=this._getInlineActionCount(),s=r===null,n=r===0;return{inlineActions:s?i.slice(0):n?new Nt:i.slice(0,r),menuActions:s?new Nt:n?i.slice(0):i.slice(r)}}_featureMenuOpenChanged(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){const{selectedFeatureWidget:e,messagesCommon:i}=this;e&&(this.viewModel.title=e.viewModel?.state==="error"?i.errorMessage:e.viewModel?.title||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}_handleFeatureMenuKeyup(e){Tg(e)==="Escape"&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(e){Tg(e)==="Escape"&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_setActiveFeature(e){const{viewModel:i}=this,r=e.currentTarget["data-feature-index"];i.activeFeature=i.features[r]||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_handleFeatureMenuItemKeyup(e){const i=Tg(e),{_featureMenuNode:r}=this,s=e.currentTarget["data-feature-index"];if(!r)return;const n=r.querySelectorAll("li"),o=n.length;i!=="ArrowUp"?i!=="ArrowDown"?i!=="Home"?i!=="End"||(e.stopPropagation(),n[n.length-1].focus()):(e.stopPropagation(),n[0].focus()):(e.stopPropagation(),n[(s+1+o)%o].focus()):(e.stopPropagation(),n[(s-1+o)%o].focus())}_handleActionMenuItemKeyup(e){const i=Tg(e),{_actionsMenuNode:r}=this,s=e.currentTarget.dataset.actionUid,{menuActions:n}=this.dividedActions,o=n.findIndex(u=>u.uid===s);if(!r)return;const a=r.querySelectorAll("li"),l=a.length;i!=="ArrowUp"?i!=="ArrowDown"?i!=="Home"?i!=="End"||(e.stopPropagation(),a[a.length-1].focus()):(e.stopPropagation(),a[0].focus()):(e.stopPropagation(),a[(o+1+l)%l].focus()):(e.stopPropagation(),a[(o-1+l)%l].focus())}_handleMainKeyup(e){const i=Tg(e);i==="ArrowLeft"&&(e.stopPropagation(),this.previous()),i==="ArrowRight"&&(e.stopPropagation(),this.next())}_spinnerEnabledChange(e){if(this._destroySpinner(),!e)return;const i=this.get("viewModel.view");this._createSpinner(i)}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide())}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:i,waitingForResult:r}=this.viewModel;r&&i?e.show({location:i}):e.hide()}_getIconStyles(e){return{"background-image":e?`url(${e})`:""}}async _shouldFocus(e){e?.shouldFocus&&(await uC(()=>this.viewModel?.active===!0),this.focus())}_addSelectedFeatureIndexHandle(){const e=st(()=>this.viewModel?.selectedFeatureIndex,(i,r)=>this._selectedFeatureIndexUpdated(i,r));this._handles.add(e,HH)}_selectedFeatureIndexUpdated(e,i){const{featureCount:r}=this;r&&e!==i&&e!==-1&&(this._destroyFlowItemWidgets(),this.actionsMenuOpen=!1,this.featureMenuOpen=!1,this._mainContainerNode&&(this._mainContainerNode.scrollTop=0),this._rootFlowItemNode&&this._rootFlowItemNode.scrollContentTo({top:0}))}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null}_isScreenLocationWithinView(e,i){return e.x>-1&&e.y>-1&&e.x<=i.width&&e.y<=i.height}_isOutsideView(e){const{popupHeight:i,popupWidth:r,screenLocation:s,side:n,view:o}=e;if(isNaN(r)||isNaN(i)||!o||!s)return!1;const a=o.padding;return n==="right"&&s.x+r/2>o.width-a.right||n==="left"&&s.x-r/2<a.left||n==="top"&&s.y-i<a.top||n==="bottom"&&s.y+i>o.height-a.bottom}_calculateAutoAlignment(e){if(e!=="auto")return e;const{_pointerOffsetInPx:i,_containerNode:r,_mainContainerNode:s,viewModel:n}=this,{screenLocation:o,view:a}=n;if(Re(o)||!a||!r)return"top-center";if(!this._isScreenLocationWithinView(o,a))return this._get("currentAlignment")||"top-center";function l(x){return parseInt(x.replace(/[^-\d\.]/g,""),10)}const u=s?window.getComputedStyle(s,null):null,c=u?l(u.getPropertyValue("max-height")):0,d=u?l(u.getPropertyValue("height")):0,{height:f,width:m}=r.getBoundingClientRect(),g=m+i,v=Math.max(f,c,d)+i,b=this._isOutsideView({popupHeight:v,popupWidth:g,screenLocation:o,side:"right",view:a}),_=this._isOutsideView({popupHeight:v,popupWidth:g,screenLocation:o,side:"left",view:a}),S=this._isOutsideView({popupHeight:v,popupWidth:g,screenLocation:o,side:"top",view:a}),M=this._isOutsideView({popupHeight:v,popupWidth:g,screenLocation:o,side:"bottom",view:a});return _?S?"bottom-right":"top-right":b?S?"bottom-left":"top-left":S?M?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return typeof e=="function"?e.call(this):e}_getCurrentAlignment(){const{alignment:e,dockEnabled:i}=this;return i||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(e){const i=["left","right"];return Th(this.container)&&i.reverse(),e.replace(/leading/gi,i[0]).replace(/trailing/gi,i[1])}_callDockPosition(e){return typeof e=="function"?e.call(this):e}_getDockPosition(){return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(this.dockOptions?.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(e){if(e!=="auto")return e;const i=this.viewModel?.view,r=Th(this.container)?"top-left":"top-right";if(!i)return r;const s=i.padding||{left:0,right:0,top:0,bottom:0},n=i.width-s.left-s.right,{breakpoints:o}=i;return o&&n<=o.xsmall?"bottom-center":r}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),!this._containerNode)return;const{screenLocation:i}=this.viewModel,{width:r}=this._containerNode.getBoundingClientRect(),s=this._calculatePositionStyle(i,r);s&&Object.assign(this._containerNode.style,s)}_calculateFullWidth(e){const{currentAlignment:i,_pointerOffsetInPx:r}=this;return i==="top-left"||i==="bottom-left"||i==="top-right"||i==="bottom-right"?e+r:e}_calculateAlignmentPosition(e,i,r,s){const{currentAlignment:n,_pointerOffsetInPx:o}=this;if(!r)return;const{padding:a}=r,l=s/2,u=r.height-i,c=r.width-e;return n==="bottom-center"?{top:i+o-a.top,left:e-l-a.left}:n==="top-left"?{bottom:u+o-a.bottom,right:c+o-a.right}:n==="bottom-left"?{top:i+o-a.top,right:c+o-a.right}:n==="top-right"?{bottom:u+o-a.bottom,left:e+o-a.left}:n==="bottom-right"?{top:i+o-a.top,left:e+o-a.left}:n==="top-center"?{bottom:u+o-a.bottom,left:e-l-a.left}:void 0}_calculatePositionStyle(e,i){const{dockEnabled:r,view:s}=this;if(!s)return;if(r)return{left:"",top:"",right:"",bottom:""};if(Re(e)||!i)return;const n=this._calculateFullWidth(i),o=this._calculateAlignmentPosition(e.x,e.y,s,n);return o?{top:o.top!==void 0?`${o.top}px`:"auto",left:o.left!==void 0?`${o.left}px`:"auto",bottom:o.bottom!==void 0?`${o.bottom}px`:"auto",right:o.right!==void 0?`${o.right}px`:"auto"}:void 0}_viewChange(e,i){e&&i&&(this.close(),this.clear())}_viewReadyChange(e,i){if(e){const r=this.get("viewModel.view");this._wireUpView(r)}else i&&(this.close(),this.clear())}_wireUpView(e){if(this._destroySpinner(),!e)return;const{spinnerEnabled:i}=this;i&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(e,i,r){const[s,n]=e,[o,a]=i,{width:l=0,height:u=0}=r??{};return s<=l&&o>l||s>l&&o<=l||n<=u&&a>u||n>u&&a<=u}_updateDockEnabledForViewSize(e,i){if(!e||!i)return;const r=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},s=r.left+r.right,n=r.top+r.bottom,o=[],a=[];o[0]=e[0]-s,o[1]=e[1]-n,a[0]=i[0]-s,a[1]=i[1]-n;const{dockOptions:l}=this,u=l.breakpoint;this._dockingThresholdCrossed(o,a,u)&&this._setDockEnabledForViewSize(l),this._setCurrentDockPosition()}_focusDockButtonNode(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus())}_closeButtonNodeUpdated(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0}_mainContainerNodeUpdated(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}_featureMenuNodeUpdated(e){if(this._featureMenuNode=e,!e||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const i=e.querySelectorAll("li");i.length&&i[0].focus()}_actionsMenuNodeUpdated(e){if(this._actionsMenuNode=e,!e||!this._focusFirstAction)return;this._focusFirstAction=!1;const i=e.querySelectorAll("li");i.length&&i[0].focus()}_focusFeatureMenuButtonNode(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus())}_focusActionsMenuButtonNode(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:e,viewModel:i}=this;if(!i)return;const r=i.active&&!e;i.screenLocationEnabled=r}_shouldDockAtCurrentViewSize(e){const i=e.breakpoint,r=this.viewModel?.view?.ui;if(!r)return!1;const{width:s,height:n}=r;if(isNaN(s)||isNaN(n)||!i)return!1;const o=i.hasOwnProperty("width")&&s<=(i.width??0),a=i.hasOwnProperty("height")&&n<=(i.height??0);return o||a}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}_getPageText(e,i){return this.featureNavigationVisible?dh(this.messages.pageText,{index:i+1,total:e}):null}_destroySpinner(){const{_spinner:e,view:i}=this;e&&(i&&i.ui&&i.ui.remove(e,WH),e.destroy(),this._spinner=null)}_createSpinner(e){e&&(this._spinner=new p6e({view:e}),e.ui.add(this._spinner,{key:WH,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e}_toggleActionsMenu(){const e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e}_triggerAction(e){const i=e.currentTarget.dataset.actionUid,{allActions:r}=this.viewModel,s=r.findIndex(o=>o.uid===i),n=r.getItemAt(s);n&&n.type==="toggle"&&(n.value=!n.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(s)}_selectFeature(e){const i=e.currentTarget["data-feature-index"];isNaN(i)||(this.viewModel.selectedFeatureIndex=i),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};h([p({readOnly:!0})],Bt.prototype,"actionsMenuId",null),h([p({readOnly:!0})],Bt.prototype,"actionsMenuButtonId",null),h([p({readOnly:!0})],Bt.prototype,"featureMenuId",null),h([p({readOnly:!0})],Bt.prototype,"titleId",null),h([p({readOnly:!0})],Bt.prototype,"contentId",null),h([p({readOnly:!0})],Bt.prototype,"hasContent",null),h([p({readOnly:!0})],Bt.prototype,"featureNavigationVisible",null),h([p({readOnly:!0})],Bt.prototype,"collapsible",null),h([p({readOnly:!0})],Bt.prototype,"featureMenuVisible",null),h([p({readOnly:!0})],Bt.prototype,"contentCollapsed",null),h([p({readOnly:!0})],Bt.prototype,"dividedActions",null),h([p({readOnly:!0,dependsOn:["_flowItems.length"]})],Bt.prototype,"_activeFlowItemWidget",null),h([p()],Bt.prototype,"actions",null),h([p()],Bt.prototype,"actionsMenuOpen",null),h([p()],Bt.prototype,"alignment",void 0),h([p()],Bt.prototype,"autoCloseEnabled",null),h([p()],Bt.prototype,"autoOpenEnabled",null),h([p()],Bt.prototype,"defaultPopupTemplateEnabled",null),h([p()],Bt.prototype,"content",null),h([p()],Bt.prototype,"collapsed",void 0),h([p()],Bt.prototype,"collapseEnabled",void 0),h([p({readOnly:!0})],Bt.prototype,"currentAlignment",null),h([p({readOnly:!0})],Bt.prototype,"currentDockPosition",null),h([p()],Bt.prototype,"dockOptions",null),h([p()],Bt.prototype,"dockEnabled",void 0),h([p({readOnly:!0})],Bt.prototype,"featureCount",null),h([p()],Bt.prototype,"featureMenuOpen",void 0),h([p()],Bt.prototype,"features",null),h([p()],Bt.prototype,"goToOverride",null),h([p()],Bt.prototype,"headingLevel",void 0),h([p()],Bt.prototype,"highlightEnabled",null),h([p()],Bt.prototype,"location",null),h([p()],Bt.prototype,"label",null),h([p()],Bt.prototype,"maxInlineActions",void 0),h([p(),On("esri/widgets/Popup/t9n/Popup")],Bt.prototype,"messages",void 0),h([p(),On("esri/t9n/common")],Bt.prototype,"messagesCommon",void 0),h([p()],Bt.prototype,"promises",null),h([p({readOnly:!0})],Bt.prototype,"selectedFeature",null),h([p()],Bt.prototype,"selectedFeatureIndex",null),h([p({readOnly:!0})],Bt.prototype,"selectedFeatureWidget",null),h([p()],Bt.prototype,"spinnerEnabled",void 0),h([p()],Bt.prototype,"title",null),h([p()],Bt.prototype,"updateLocationEnabled",null),h([p()],Bt.prototype,"view",null),h([p({type:Kae}),u8e(["triggerAction","trigger-action"])],Bt.prototype,"viewModel",void 0),h([p()],Bt.prototype,"visible",null),h([p()],Bt.prototype,"visibleElements",void 0),h([mi("visibleElements")],Bt.prototype,"castVisibleElements",null),h([fl()],Bt.prototype,"_close",null),h([fl()],Bt.prototype,"_toggleDockEnabled",null),h([fl()],Bt.prototype,"_toggleFeatureMenu",null),h([fl()],Bt.prototype,"_toggleActionsMenu",null),h([fl()],Bt.prototype,"_triggerAction",null),h([fl()],Bt.prototype,"_selectFeature",null),h([fl()],Bt.prototype,"_next",null),h([fl()],Bt.prototype,"_previous",null),Bt=h([ce("esri.widgets.Popup")],Bt);const KH=Bt,RR=[0,0];function iNe(t){const e=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return RR[0]=i.left+(e?.pageXOffset??0),RR[1]=i.top+(e?.pageYOffset??0),RR}function QH(t){t&&(moe(t),t.parentNode&&t.parentNode.removeChild(t))}function rNe(t){const e=document.createElement("div");return t.appendChild(e),e}const Z_=16,UT=750,sNe=512,nNe=2,oNe=t=>{let e=class extends t{constructor(...i){super(...i),this._freqInfo={freq:Z_,time:UT},this._overlayRenderTaskHandle=null,this.height=0,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,i.length!==0&&i[0]?.popup!==void 0||(this.popup=new KH({view:this})),this.handles.add([st(()=>this.cursor,r=>{const{surface:s}=this;s&&s.setAttribute("data-cursor",r)}),st(()=>this.interacting,r=>{const{surface:s}=this;s&&s.setAttribute("data-interacting",r.toString())})])}initialize(){this.handles.add(st(()=>this.ui,(i,r)=>this._handleUIChange(i,r))),this._wireUI(this.ui),this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=Jr(this.ui),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(i){const r=this._get("container"),s=y7(i);if(s||typeof i!="string"||tt.getLogger(this.declaredClass).error("#container",`element with id '${i}' not found`),r===s)return;const n="dom-size";if(this.handles.remove(n),this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(QH(this.root),this._set("root",null)),this.userContent&&(Hq(this.userContent,r),QH(this.userContent),this._set("userContent",null))),!s)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);s.classList.add("esri-view");const o=document.createElement("div");o.className="esri-view-user-storage",Hq(s,o),s.appendChild(o),this._set("userContent",o);const a=document.createElement("div");a.className="esri-view-root",s.insertBefore(a,s.firstChild),this._set("root",a);const l=document.createElement("div");l.className="esri-view-surface",l.setAttribute("role","application"),l.tabIndex=0,a.appendChild(l),this._set("surface",l);const u=new iH;a.appendChild(u.surface),this._set("overlay",u),st(()=>u.needsRender,c=>{c&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=Bb({render:()=>this.overlay?.render()}):this._overlayRenderTaskHandle=gs(this._overlayRenderTaskHandle)}),this.forceDOMReadyCycle(),this.handles.add(st(()=>this.size,c=>{const[d,f]=c,m="esri-view-surface--inset-outline";d>=document.body.clientWidth||f>=document.body.clientHeight?l.classList.add(m):l.classList.remove(m)},Fi),n),this._set("container",s),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}set popup(i){const r=this._get("popup");r&&r!==i&&r.destroy(),this._set("popup",i)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(i,r,s){const n=this.position;return i-=n?n[0]:0,r-=n?n[1]:0,s?(s[0]=i,s[1]=r):s=[i,r],s}containerToPage(i,r,s){const n=this.position;return i+=n?n[0]:0,r+=n?n[1]:0,s?(s[0]=i,s[1]=r):s=[i,r],s}_handleUIChange(i,r){r&&(this.handles.remove("ui"),r.destroy()),i&&this._wireUI(i),this._set("ui",i)}_wireUI(i){this.handles.remove("ui"),i&&(i.view=this,this.handles.add([st(()=>this.root,r=>{i.container=r?rNe(r):null},Fi),st(()=>this.popup,(r,s)=>{const n="popup",o="manual";s&&i.remove(s,n),r&&(r.view=i.view,i.add(r,{key:n,position:o}))},Fi)],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=Z_,i.time=UT,this.handles.add([(()=>{const r=()=>{i.freq=Z_,i.time=UT};return window.addEventListener("resize",r),{remove(){window.removeEventListener("resize",r)}}})(),Bb({prepare:r=>{const s=this._measure(),n=this._freqInfo;if(n.time+=r.deltaTime,s&&(n.freq=Z_,this._get("resizing")||this._set("resizing",!0)),n.time<n.freq)return;n.time=0;const o=this._position();n.freq=o||s?Z_:Math.min(UT,n.freq*nNe),!s&&n.freq>=sNe&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,r=i?i.clientWidth:0,s=i?i.clientHeight:0;if(r===0||s===0)return this.suspended||this._set("suspended",!0),!1;const n=this.width,o=this.height;return r===n&&s===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:n,oldHeight:o,width:r,height:s}),!0)}_position(){const i=this.container,r=this.position,s=i&&iNe(i);return!!s&&(!r||s[0]!==r[0]||s[1]!==r[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return h([p()],e.prototype,"container",null),h([p({readOnly:!0})],e.prototype,"focused",null),h([p({readOnly:!0})],e.prototype,"height",void 0),h([p({type:KH})],e.prototype,"popup",null),h([p({type:iH})],e.prototype,"overlay",void 0),h([p({readOnly:!0})],e.prototype,"position",void 0),h([p({readOnly:!0})],e.prototype,"resizing",void 0),h([p({readOnly:!0})],e.prototype,"root",void 0),h([p({value:null,readOnly:!0})],e.prototype,"size",null),h([p({readOnly:!0})],e.prototype,"surface",void 0),h([p({readOnly:!0})],e.prototype,"suspended",void 0),h([p()],e.prototype,"ui",void 0),h([p({readOnly:!0})],e.prototype,"userContent",void 0),h([p({readOnly:!0})],e.prototype,"width",void 0),h([p()],e.prototype,"widthBreakpoint",void 0),e=h([ce("esri.views.DOMContainer")],e),e},aNe=t=>{let e=class extends t{async fetchPopupFeatures(i,r){await this.when();const{location:s,queryArea:n,layerViewsAndGraphics:o,clientOnlyGraphics:a}=await this._prepareFetchPopupFeatures(i,r),l=Promise.resolve(a),u=this._queryLayerPopupFeatures(n,o,r),c=u.map(d=>d.promise);return{location:s,clientOnlyGraphics:a,allGraphicsPromise:dye([l,...c]).then(d=>Array.from(new Set(d.flat()))),promisesPerLayerView:u}}_queryLayerPopupFeatures(i,r,s){return r.map(({layerView:n,graphics:o})=>{const a={clientGraphics:o,event:ee(s)?s.event:void 0,signal:ee(s)?s.signal:void 0,defaultPopupTemplateEnabled:!!ee(s)&&!!s.defaultPopupTemplateEnabled},l=n.fetchPopupFeatures(i,a);return{layerView:n,promise:l}})}_isValidPopupGraphic(i,r){return i&&!!i.getEffectivePopupTemplate(ee(r)&&r.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(i,r){const{clientGraphics:s,queryArea:n,location:o}=await this._popupHitTestGraphics(i,r),a=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:l,clientOnlyGraphics:u}=this._graphicsPerFetchPopupLayerView(s,a);return{clientOnlyGraphics:u,layerViewsAndGraphics:l,queryArea:n,location:o}}async _popupHitTestGraphics(i,r){const s=await this.popupHitTest(i),n=s.results,o=s.mapPoint,a=n.filter(u=>u.type==="graphic"&&this._isValidPopupGraphic(u.graphic,r)),l=a.length?a[0].mapPoint:null;return{clientGraphics:a.map(u=>u.graphic),queryArea:o,location:o||l}}_getFetchPopupLayerViews(){const i=[];return this.allLayerViews.forEach(r=>{this._isValidPopupLayerView(r)&&i.push(r)}),ee(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&i.push(this.graphicsView),i.reverse()}_isValidPopupLayerView(i){return ee(i)&&(!("layer"in i)||!i.suspended)&&"fetchPopupFeatures"in i}_graphicsPerFetchPopupLayerView(i,r){const s=[],n=new Map,o=r.map(a=>{const l=[];return"layer"in a?n.set(a.layer,l):n.set(a.graphics,l),{layerView:a,graphics:l}});for(const a of i){const l=n.get(a.layer)||n.get(a.sourceLayer)||null;l?l.push(a):s.push(a)}return{layerViewsAndGraphics:o,clientOnlyGraphics:s}}};return e=h([ce("esri.views.PopupView")],e),e};let M5=class extends Ux{constructor(e){super(e),this.handles.add(this.on("before-add",i=>{Re(i.item)||i.item.parent===this.owner&&(tt.getLogger(this.declaredClass).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};M5=h([ce("esri.support.AnalysesCollection")],M5);let Af=class extends Pt{constructor(e){super(e),this.view=null,this.baseLayerViews=new Nt,this.referenceLayerViews=new Nt,this._loadingHandle=st(()=>this.view?.map?.basemap,i=>{i&&i.load().catch(()=>{})},Fi)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){if(this.view&&this.view.suspended)return!1;const e=this.view?.map?.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(i=>i.updating)||this.referenceLayerViews.some(i=>i.updating))}};h([p({constructOnly:!0})],Af.prototype,"view",void 0),h([p({readOnly:!0})],Af.prototype,"baseLayerViews",void 0),h([p({readOnly:!0})],Af.prototype,"referenceLayerViews",void 0),h([p({readOnly:!0})],Af.prototype,"suspended",null),h([p({type:Boolean,readOnly:!0})],Af.prototype,"updating",null),Af=h([ce("esri.views.BasemapView")],Af);function lNe(t){return"tryRecycleWith"in t}let uNe=class{constructor(e,i,r){this.layer=e,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=lp(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,$a(this._controller.signal,()=>{const s=new Ce("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(s)})}tryRecycle(e){if(!this.done||!this.layerView||!lNe(this.layerView))return null;const i=this.layer.type,r=this._controller.signal;for(let s=0;s<e.length;s++){const n=e[s];if(n.type!==i)continue;const o=this.layerView.tryRecycleWith(n,{signal:r});if(o){e.splice(s,1),this.layer=n;const a=this.layerView,l=a.view;return this.promise=Promise.race([o.then(()=>(pr(this._controller.signal),n.emit("layerview-destroy",{view:l,layerView:a}),l.emit("layerview-destroy",{view:l,layerView:a}),n.emit("layerview-create",{view:l,layerView:a}),l.emit("layerview-create",{view:l,layerView:a}),a)),new Promise((u,c)=>$a(this._controller.signal,()=>c(yr())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(!e)return;const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:e}),r.emit("layerview-destroy",{layer:i,layerView:e}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}async start(){if(this._started)return;this._started=!0;const{_controller:{signal:e},layer:i,view:r}=this;this._map=r.map;try{let s,n;if(await i.load({signal:e}),"prefetchResources"in i&&await i.prefetchResources?.({signal:e}),hNe(i))s=await i.createLayerView(r,{signal:e});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new Ce("layer:view-not-supported","No layerview implementation was found");const l=await this.layerViewImporter.importLayerView(i);pr(e),s="default"in l?new l.default({layer:i,view:r}):new l({layer:i,view:r})}const o=()=>{n=gs(n),s.destroyed||s.destroy(),s.layer=null,s.parent=null,s.view=null,this.done=!0};n=$a(e,o),pr(e);try{await s.when()}catch(l){throw o(),l}if(!this._map?.allLayers?.includes(i))return o(),void this._deferred.reject(new Ce("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=s,i.emit("layerview-create",{view:r,layerView:s}),r.emit("layerview-create",{layer:i,layerView:s}),this.done=!0,this._deferred.resolve(s)}catch(s){i.emit("layerview-create-error",{view:r,error:s}),r.emit("layerview-create-error",{layer:i,error:s}),this.done=!0,this._deferred.reject(new Ce("layerview:create-error","layerview creation failed",{layer:i,error:s}))}}},su=class extends Pt{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new _b,this.supportsGround=!0,this._preloadLayerViewModules=()=>{const i=this.view.map?.allLayers;if(i)for(const r of i)this.layerViewImporter.hasLayerViewModule(r)&&this.layerViewImporter.importLayerView(r)},this._reschedule=()=>(Re(this._workPromise)&&(this._workPromise=lp(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(Pw(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{const i=this.view.map;if(this._map!==i&&(this.clear(),this._map=i),Re(this._workPromise))return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,s=[],n=this.view.ready,o=l=>{if(!Re(l)){for(const u of l)if(u){r.add(u);const c=this._layerLayerViewInfoMap.get(u);c&&n?c.start():c||this._recyclingInfoMap.has(u)||s.push(u),"layers"in u&&u.layers&&o(u.layers)}}};for(const l of this._rootCollectionNames)o(this.get(l));for(const[l,u]of this._layerLayerViewInfoMap)if(!r.has(l)){this._layerLayerViewInfoMap.delete(u.layer);const c=u.tryRecycle(s);c?(this._recyclingInfoMap.set(u.layer,u),c.then(()=>{this._recyclingInfoMap.delete(u.layer),this._layerLayerViewInfoMap.set(u.layer,u),this._reschedule()}).catch(()=>{this._recyclingInfoMap.delete(u.layer),u.destroy(),this._reschedule()})):u.destroy()}for(const[l,u]of this._recyclingInfoMap)r.has(l)||(this._recyclingInfoMap.delete(u.layer),u.destroy());for(const l of s)this._createLayerView(l);this._refreshCollections();const a=[i?.ground?.layers,i?.basemap?.baseLayers,i?.basemap?.referenceLayers,i?.layers].filter(l=>!!l);r.forEach(l=>"layers"in l&&a.push(l.layers)),this.addHandles(a.map(l=>this._watchUpdatingTracking.addOnCollectionChange(()=>l,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.own([bn(()=>this.view?.map?.allLayers,"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),st(()=>{const e=this.view,i=e?.map;return[i?.basemap,i?.ground,i?.layers,e?.ready]},()=>this._reschedule(),jf)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null,ee(this._workPromise)&&(this._workPromise.reject(yr()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return ee(this._workPromise)||this._watchUpdatingTracking.updating||j4(this._layerLayerViewInfoMap,e=>!e.done)}get updatingRemaining(){let e=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++e;return e}clear(){if(!this.destroyed){for(const e of this._layerLayerViewInfoMap.values())e.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new Ce("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,i]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,i,r){if(!e||!i)return void(i&&i.removeAll());let s=0;for(const n of e){const o=this._layerLayerViewInfoMap.get(n);if(!o||!o.layerView)continue;const a=o.layerView;a.layer=n,a.parent=r,i.getItemAt(s)!==a&&i.splice(s,0,a),n.layers&&this._populateLayerViewsOwners(n.layers,a.layerViews,a),s+=1}s<i.length&&i.splice(s,i.length)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const i=new uNe(e,this.view,this.layerViewImporter);i.promise.then(()=>this._refreshCollections(),r=>{r&&(vn(r)||r.name==="cancelled:layerview-create")||tt.getLogger(this.declaredClass).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:r}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};h([p()],su.prototype,"_workPromise",void 0),h([p({readOnly:!0})],su.prototype,"_watchUpdatingTracking",void 0),h([p({readOnly:!0})],su.prototype,"_layersToLayerViews",null),h([p({readOnly:!0})],su.prototype,"_rootCollectionNames",null),h([p()],su.prototype,"layerViewImporter",void 0),h([p()],su.prototype,"supportsGround",void 0),h([p({readOnly:!0})],su.prototype,"updating",null),h([p({readOnly:!0})],su.prototype,"updatingRemaining",null),h([p({constructOnly:!0})],su.prototype,"view",void 0),su=h([ce("esri.views.LayerViewManager")],su);const cNe=su;function hNe(t){return"createLayerView"in t&&t.createLayerView!=null}let ll=class extends Pt{constructor(e){super(e),this.factor=1.5,this.offset=pn(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};h([p({type:Number})],ll.prototype,"factor",void 0),h([p({nonNullable:!0})],ll.prototype,"offset",void 0),h([p()],ll.prototype,"position",void 0),h([p({type:Number,range:{min:0}})],ll.prototype,"size",void 0),h([p()],ll.prototype,"maskUrl",void 0),h([p()],ll.prototype,"maskEnabled",void 0),h([p()],ll.prototype,"overlayUrl",void 0),h([p()],ll.prototype,"overlayEnabled",void 0),h([p({readOnly:!0})],ll.prototype,"version",null),h([p({type:Boolean})],ll.prototype,"visible",void 0),ll=h([ce("esri.views.Magnifier")],ll);const Qae=ll;let dNe=class{constructor(){this._tasks=new Array,this._running=new I5(!1)}get length(){return this._tasks.length}get running(){return this._running.get()}destroy(){this.cancelAll()}runTask(e){for(;!e.done&&this._process(e);)e.madeProgress()}push(e,i,r){return this._running.set(!0),new Promise((s,n)=>this._tasks.push(new XH(s,n,e,i,r)))}unshift(e,i,r){return this._running.set(!0),new Promise((s,n)=>this._tasks.unshift(new XH(s,n,e,i,r)))}_process(e){if(this._tasks.length===0)return!1;const i=this._tasks.shift();try{const r=Rl(i.signal);if(r&&!i.abortCallback)i.reject(yr());else{const s=r?i.abortCallback?.(yr()):i.callback(e);_p(s)?s.then(i.resolve,i.reject):i.resolve(s)}}catch(r){i.reject(r)}return this._running.set(this._tasks.length>0),!0}cancelAll(){const e=yr();for(const i of this._tasks)if(i.abortCallback){const r=i.abortCallback(e);i.resolve(r)}else i.reject(e);this._tasks.length=0,this._running.set(!1)}},XH=class{constructor(e,i,r,s,n){this.resolve=e,this.reject=i,this.callback=r,this.signal=s,this.abortCallback=n}},nx=class extends Pt{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};h([p()],nx.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),h([p()],nx.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),nx=h([ce("esri.views.support.DebugFlags")],nx);const pNe=new nx;var cl;(function(t){t[t.ANIMATING=0]="ANIMATING",t[t.INTERACTING=1]="INTERACTING",t[t.IDLE=2]="IDLE"})(cl||(cl={}));var hN,_i;(function(t){t[t.YIELD=1]="YIELD"})(hN||(hN={})),function(t){t.RESOURCE_CONTROLLER_IMMEDIATE="immediate",t.RESOURCE_CONTROLLER="schedule",t.SLIDE="slide",t.STREAM_DATA_LOADER="stream loader",t.ELEVATION_QUERY="elevation query",t.TERRAIN_SURFACE="terrain",t.SURFACE_GEOMETRY_UPDATES="surface geometry updates",t.LOD_RENDERER="LoD renderer",t.GRAPHICS_CORE="Graphics3D",t.I3S_CONTROLLER="I3S",t.POINT_CLOUD_LAYER="point cloud",t.FEATURE_TILE_FETCHER="feature fetcher",t.OVERLAY="overlay",t.STAGE="stage",t.GRAPHICS_DECONFLICTOR="graphics deconflictor",t.FILTER_VISIBILITY="Graphics3D filter visibility",t.SCALE_VISIBILITY="Graphics3D scale visibility",t.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",t.POINT_OF_INTEREST_FREQUENT="POI frequent",t.POINT_OF_INTEREST_INFREQUENT="POI infrequent",t.LABELER="labeler",t.FEATURE_QUERY_ENGINE="feature query",t.FEATURE_TILE_TREE="feature tile tree",t.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",t.ELEVATION_ALIGNMENT="elevation alignment",t.TEXT_TEXTURE_ATLAS="text texture atlas",t.TEXTURE_UNLOAD="texture unload",t.LINE_OF_SIGHT_TOOL="line of sight tool",t.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",t.ELEVATION_PROFILE="elevation profile",t.SNAPPING="snapping",t.SHADOW_ACCUMULATOR="shadow accumulator",t.CLOUDS_GENERATOR="clouds generator",t[t.TEST_PRIO=1]="TEST_PRIO"}(_i||(_i={}));const yh=0,eW=new Map([[_i.RESOURCE_CONTROLLER_IMMEDIATE,yh],[_i.RESOURCE_CONTROLLER,4],[_i.SLIDE,yh],[_i.STREAM_DATA_LOADER,yh],[_i.ELEVATION_QUERY,yh],[_i.TERRAIN_SURFACE,1],[_i.SURFACE_GEOMETRY_UPDATES,1],[_i.LOD_RENDERER,2],[_i.GRAPHICS_CORE,2],[_i.I3S_CONTROLLER,2],[_i.POINT_CLOUD_LAYER,2],[_i.FEATURE_TILE_FETCHER,2],[_i.OVERLAY,4],[_i.STAGE,4],[_i.GRAPHICS_DECONFLICTOR,4],[_i.FILTER_VISIBILITY,4],[_i.SCALE_VISIBILITY,4],[_i.FRUSTUM_VISIBILITY,4],[_i.CLOUDS_GENERATOR,4],[_i.POINT_OF_INTEREST_FREQUENT,6],[_i.POINT_OF_INTEREST_INFREQUENT,30],[_i.LABELER,8],[_i.FEATURE_QUERY_ENGINE,8],[_i.FEATURE_TILE_TREE,16],[_i.FEATURE_TILE_TREE_ACTIVE,yh],[_i.ELEVATION_ALIGNMENT,12],[_i.TEXT_TEXTURE_ATLAS,12],[_i.TEXTURE_UNLOAD,12],[_i.LINE_OF_SIGHT_TOOL,16],[_i.LINE_OF_SIGHT_TOOL_INTERACTIVE,yh],[_i.SNAPPING,yh],[_i.SHADOW_ACCUMULATOR,30]]);function tW(t){return eW.has(t)?eW.get(t):typeof t=="number"?t:1}const iW=6.5,rW=1,fNe=30,sW=1e3/30,nW=100,oW=.9;var dN,Sy;(function(t){class e{get updating(){return this._updating.get()}_updatingChanged(){this._updating.set(this._tasks.some(n=>n.needsUpdate))}constructor(){this._updating=new I5(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new xx("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=cl.INTERACTING,this._tasks=new lm,this._runQueue=new lm,this._load=0,this._idleStateCallbacks=new lm,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=st(()=>pNe.SCHEDULER_LOG_SLOW_TASKS,o=>this._debug=o,Fi);for(const o of Object.keys(_i))this.performanceInfo.tasks.set(_i[o],new xx(_i[o]));const n=this;this._test={FRAME_SAFETY_BUDGET:iW,INTERACTING_BUDGET:sW,IDLE_BUDGET:nW,get availableBudget(){return n._budget.budget},usedBudget:0,getBudget:()=>n._budget,setBudget:o=>n._budget=o,updateTask:o=>this._updateTask(o),getState:o=>this._getState(o),getRuntime:o=>this._getRuntime(o),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(n=>n.remove()),this._tasks.clear(),gs(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(n){this._updatingChanged(),n&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())}))}registerTask(n,o){const a=tW(n),l=new i(this,n,o,a);return this._tasks.push(l),this._updatingChanged(),this.performanceInfo.tasks.has(n)||this.performanceInfo.tasks.set(n,new xx(n)),l}registerIdleStateCallbacks(n,o){const a={idleBegin:n,idleEnd:o};this._idleStateCallbacks.push(a),this.state===cl.IDLE&&this._idleUpdatesStartFired&&a.idleBegin();const l=this;return{remove:()=>this._removeIdleStateCallbacks(a),set idleBegin(u){l._idleUpdatesStartFired&&(a.idleEnd(),l._state===cl.IDLE&&u()),a.idleBegin=u},set idleEnd(u){a.idleEnd=u}}}get load(){return this._load}set state(n){this._state!==n&&(this._state=n,this.state!==cl.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(o=>o.idleEnd())))}get state(){return this._state}updateBudget(n){this._test.usedBudget=0,++this._frameNumber;let o=iW,a=n.frameDuration,l=rW;switch(this.state){case cl.IDLE:o=0,a=Math.max(nW,n.frameDuration),l=fNe;break;case cl.INTERACTING:a=Math.max(sW,n.frameDuration);case cl.ANIMATING:}return a=a-n.elapsedFrameTime-o,this.state!==cl.IDLE&&a<rW&&!this._forceTask?(this._forceTask=!0,!1):(a=Math.max(a,l),this._budget.reset(a,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case cl.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(n=>n.idleBegin())),this._runIdle();break;case cl.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(n){this._idleUpdatesStartFired&&n.idleEnd(),this._idleStateCallbacks.removeUnordered(n)}removeTask(n){this._tasks.removeUnordered(n),this._runQueue.removeUnordered(n),this._updatingChanged()}_updateTask(n){this._tasks.forAll(o=>{o.name===n&&o.setPriority(n)})}_getState(n){if(this._runQueue.some(a=>a.name===n))return Sy.SCHEDULED;let o=Sy.IDLE;return this._tasks.forAll(a=>{a.name===n&&a.needsUpdate&&(a.schedulePriority<=1?o=Sy.READY:o!==Sy.READY&&(o=Sy.WAITING))}),o}_getRuntime(n){let o=0;return this._tasks.forAll(a=>{a.name===n&&(o+=a.runtime)}),o}_resetRuntimes(){this._tasks.forAll(n=>n.runtime=0)}_getRunning(){const n=new Map;if(this._tasks.forAll(a=>{a.needsUpdate&&n.set(a.name,(n.get(a.name)||0)+1)}),n.size===0)return null;let o="";return n.forEach((a,l)=>{o+=a>1?` ${a}x ${l}`:` ${l}`}),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const n=this._tasks.reduce((o,a)=>a.needsUpdate?++o:o,0);this._load=this._load*oW+n*(1-oW)}_schedule(){for(this._runQueue.filterInPlace(n=>!!n.needsUpdate||(n.schedulePriority=n.basePriority,!1)),this._tasks.forAll(n=>{n.basePriority===yh&&n.needsUpdate&&!this._runQueue.includes(n)&&n.blockFrame!==this._frameNumber&&this._runQueue.unshift(n)});this._runQueue.length===0;){let n=!1,o=0;if(this._tasks.forAll(a=>{a.needsUpdate&&a.schedulePriority!==0&&a.basePriority!==yh&&a.blockFrame!==this._frameNumber&&(n=!0,o=Math.max(o,a.basePriority),a.schedulePriority===1?(a.schedulePriority=0,this._runQueue.push(a)):--a.schedulePriority)}),!n)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const n=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const o=this._budget.now(),a=this._runQueue.pop();this._budget.resetProgress();try{a.task.runTask(this._budget)===hN.YIELD&&(a.blockFrame=this._frameNumber)}catch(u){tt.getLogger("esri.views.support.Scheduler").error(`Exception in task "${a.name}"`,u)}!this._budget.hasProgressed&&a.blockFrame!==this._frameNumber&&a.needsUpdate&&(a.name,_i.I3S_CONTROLLER,a.blockFrame=this._frameNumber),a.schedulePriority=a.basePriority;const l=this._budget.now()-o;if(a.runtime+=l,this._frameTaskTimes.set(a.priority,this._frameTaskTimes.get(a.priority)+l),this._debug&&l>2*this._budget.budget&&console.log("Task",a.name,"used",l,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-n)}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-n)}_startFrameTaskTimes(){for(const n of Object.keys(_i))this._frameTaskTimes.set(_i[n],0)}_recordFrameTaskTimes(n){this._frameTaskTimes.forEach((o,a)=>this.performanceInfo.tasks.get(a).record(o)),this.performanceInfo.total.record(n)}get test(){return this._test}}t.Scheduler=e;class i{get task(){return this._task.get()}get updating(){return this._queue.running}constructor(n,o,a,l){this._scheduler=n,this.name=o,this._basePriority=l,this.blockFrame=0,this.runtime=0,this._queue=new dNe,this._handles=new Ao,this.schedulePriority=this._basePriority,this._task=new I5(ee(a)?a:this._queue),this._handles.add(Nl(()=>this.task.running,u=>n.taskRunningChanged(u)))}remove(){this.processQueue(Xae),this._scheduler.removeTask(this),this.schedule=pN.schedule,this.reschedule=pN.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(n){this.name=n;const o=tW(n);this._basePriority!==yh&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(n){this.setPriority(n)}get needsUpdate(){return this.updating||this.task.running}schedule(n,o,a){return this._queue.push(n,o,a)}reschedule(n,o,a){return this._queue.unshift(n,o,a)}processQueue(n){this._queue.runTask(n)}}class r{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=cl.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(n){return!this.done&&(n()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(n){this._enabled=n}reset(n,o){this._begin=this.now(),this._budget=n,this._state=o,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}t.Budget=r})(dN||(dN={})),function(t){t.SCHEDULED="s",t.READY="r",t.WAITING="w",t.IDLE="i"}(Sy||(Sy={}));const Xae=(()=>{const t=new dN.Budget;return t.enabled=!1,t})();let mNe=class{remove(){}processQueue(){}schedule(e,i,r){try{if(Rl(i)){const s=yr();return r?Promise.resolve(r(s)):Promise.reject(s)}return Rk(e(Xae))}catch(s){return Promise.reject(s)}}reschedule(e,i,r){return this.schedule(e,i,r)}};const pN=new mNe;let ox=class extends Pt{constructor(e,i){super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=i?.registerTask(_i.TEXTURE_UNLOAD)??pN}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask.remove(),this._textureRequests.forEach(e=>this._releaseTextureRequest(e)),this._textureRequests.clear()}get updating(){return this._frameTask.updating}fromData(e,i,r){const s=this.makeUid(e);let n=this._textureRequests.get(s);if(!n){const o=i();n={referenceCount:0,texture:o,textureAsync:null,abortController:null,onRemove:r},this._stage&&(this._stage.add(o),this._stage.loadImmediate(o)),this._textureRequests.set(s,n)}return n.referenceCount++,{uid:s,texture:n.texture,release:()=>this._release(s)}}_release(e){const i=this._textureRequests.get(e);i?(i.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),i.referenceCount--,i.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(e))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const i=this._textureRequests.get(e);!i||i.referenceCount>0||(this._releaseTextureRequest(i),this._textureRequests.delete(e))}_releaseTextureRequest(e){e.onRemove&&e.onRemove(),e.texture?this._stage?.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,i=null){return ee(i)?`${e}.${i}px`:e}};h([p()],ox.prototype,"_frameTask",void 0),h([p()],ox.prototype,"updating",null),ox=h([ce("esri.views.3d.support.TextureCollection")],ox);var aW;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"})(aW||(aW={}));const ele=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],tle={};function ile(t){return!!tle[t]}function yNe(t){for(const e of t)if(!ile(e))return!1;return!0}ele.forEach(t=>{tle[t]=!0});let gNe=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:i,priority:r},s)=>this.inputManager?.installHandlers(s,[i],r))}disconnect(){this.inputManager&&this._handlers.forEach((e,i)=>this.inputManager?.uninstallHandlers(i)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,i,r,s){const n=Array.isArray(e)?e:e.split(",");if(!yNe(n))return n.some(ile)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(i)?a=i:(o=i,a=[]),typeof r=="function"?o=r:s=r,s=s??fm.DEFAULT;const l=this._createUniqueGroupName(),u=new vNe(this.view,n,a,o);this._handlers.set(l,{handler:u,priority:s});for(const c of n){const d=this._handlerCounts.get(c)||0;this._handlerCounts.set(c,d+1)}return this.inputManager&&this.inputManager.installHandlers(l,[u],s),{remove:()=>this._removeHandler(l,n)}}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,i){if(this._handlers.has(e)){this._handlers.delete(e);for(const r of i){const s=this._handlerCounts.get(r);s===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",r):s===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,s-1)}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},vNe=class extends wn{constructor(e,i,r,s){super(!0),this._latestDragStart=void 0,this.view=e;for(const n of i)switch(n){case"click":this.registerIncoming("click",r,o=>s(this._wrapClick(o)));break;case"double-click":this.registerIncoming("double-click",r,o=>s(this._wrapDoubleClick(o)));break;case"immediate-click":this.registerIncoming("immediate-click",r,o=>s(this._wrapImmediateClick(o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,o=>s(this._wrapImmediateDoubleClick(o)));break;case"hold":this.registerIncoming("hold",r,o=>s(this._wrapHold(o)));break;case"drag":this.registerIncoming("drag",r,o=>{const a=this._wrapDrag(o);a&&s(a)});break;case"key-down":this.registerIncoming("key-down",r,o=>s(this._wrapKeyDown(o)));break;case"key-up":this.registerIncoming("key-up",r,o=>s(this._wrapKeyUp(o)));break;case"pointer-down":this.registerIncoming("pointer-down",r,o=>s(this._wrapPointer(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,o=>s(this._wrapPointer(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,o=>s(this._wrapPointer(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,o=>s(this._wrapPointerDrag(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,o=>s(this._wrapMouseWheel(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,o=>s(this._wrapPointer(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,o=>s(this._wrapPointer(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,o=>{s(this._wrapGamepad(o))});break;case"focus":this.registerIncoming("focus",r,o=>{s(this._wrapFocus(o))});break;case"blur":this.registerIncoming("blur",r,o=>{s(this._wrapBlur(o))})}}_wrapFocus(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:i=>e.async(i),preventDefault:()=>e.preventDefault()}}_wrapBlur(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:i=>e.async(i),preventDefault:()=>e.preventDefault()}}_wrapClick(e){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a,eventId:l}=e.data,{cancelable:u,timestamp:c}=e;return{type:"click",pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:c,screenPoint:pn(n,o),mapPoint:this._getMapPoint(n,o),eventId:l,cancelable:u,stopPropagation:()=>e.stopPropagation(),async:d=>e.async(d),preventDefault:()=>e.preventDefault()}}_wrapDoubleClick(e){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a,eventId:l}=e.data,{cancelable:u,timestamp:c}=e;return{type:"double-click",pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:c,mapPoint:this._getMapPoint(n,o),eventId:l,cancelable:u,stopPropagation:()=>e.stopPropagation(),async:d=>e.async(d),preventDefault:()=>e.preventDefault()}}_wrapImmediateClick(e){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a,eventId:l}=e.data,u=a.pointerId,{cancelable:c,timestamp:d}=e;return{type:"immediate-click",pointerId:u,pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:d,mapPoint:this._getMapPoint(n,o),eventId:l,cancelable:c,stopPropagation:()=>e.stopPropagation(),async:f=>e.async(f),preventDefault:()=>e.preventDefault()}}_wrapImmediateDoubleClick(e){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a,eventId:l}=e.data,u=a.pointerId,{cancelable:c,timestamp:d}=e;return{type:"immediate-double-click",pointerId:u,pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:d,mapPoint:this._getMapPoint(n,o),eventId:l,cancelable:c,stopPropagation:()=>e.stopPropagation(),async:f=>e.async(f),preventDefault:()=>e.preventDefault()}}_wrapHold(e){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a}=e.data,{cancelable:l,timestamp:u}=e;return{type:"hold",pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:u,mapPoint:this._getMapPoint(n,o),cancelable:l,stopPropagation:()=>e.stopPropagation(),async:c=>e.async(c),preventDefault:()=>e.preventDefault()}}_getMapPoint(e,i){return this.view.toMap(pn(e,i),{exclude:[]})}_wrapDrag(e){const i=e.data,{x:r,y:s}=i.center,{action:n,pointerType:o,button:a}=i;if(n==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const l=i.pointer.native,u=i.buttons,{cancelable:c,timestamp:d}=e,f={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return n==="end"&&(this._latestDragStart=void 0),{type:"drag",action:n,x:r,y:s,origin:f,pointerType:o,button:a,buttons:u,radius:i.radius,angle:zX(i.angle),native:l,timestamp:d,cancelable:c,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}_wrapKeyDown(e){const{key:i,repeat:r,native:s}=e.data,{cancelable:n,timestamp:o}=e;return{type:"key-down",key:i,repeat:r,native:s,timestamp:o,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:a=>e.async(a),preventDefault:()=>e.preventDefault()}}_wrapKeyUp(e){const{key:i,native:r}=e.data,{cancelable:s,timestamp:n}=e;return{type:"key-up",key:i,native:r,timestamp:n,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:o=>e.async(o),preventDefault:()=>e.preventDefault()}}_wrapPointer(e,i){const{x:r,y:s,button:n,buttons:o,native:a,eventId:l}=e.data,u=a.pointerId,c=a.pointerType,{cancelable:d,timestamp:f}=e;return{type:i,x:r,y:s,pointerId:u,pointerType:c,button:n,buttons:o,native:a,timestamp:f,eventId:l,cancelable:d,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}_wrapPointerDrag(e){const{x:i,y:r,buttons:s,native:n,eventId:o}=e.data.currentEvent,{button:a}=e.data.startEvent,l=e.data.startEvent.native.pointerId,u=e.data.startEvent.native.pointerType,c=e.data.action,d={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:f,timestamp:m}=e;return{type:"pointer-drag",x:i,y:r,pointerId:l,pointerType:u,button:a,buttons:s,action:c,origin:d,native:n,timestamp:m,eventId:o,cancelable:f,stopPropagation:()=>e.stopPropagation(),async:g=>e.async(g),preventDefault:()=>e.preventDefault()}}_wrapMouseWheel(e){const{cancelable:i,data:r,timestamp:s}=e,{x:n,y:o,deltaY:a,native:l}=r;return{type:"mouse-wheel",x:n,y:o,deltaY:a,native:l,timestamp:s,cancelable:i,stopPropagation:()=>e.stopPropagation(),async:u=>e.async(u),preventDefault:()=>e.preventDefault()}}_wrapGamepad(e){const{action:i,state:r,device:s}=e.data,{cancelable:n,timestamp:o}=e,{buttons:a,axes:l}=r;return{type:"gamepad",device:s,timestamp:o,action:i,buttons:a,axes:l,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:u=>e.async(u),preventDefault:()=>e.preventDefault()}}};var WS,lW,uW;(function(t){t[t.USER=0]="USER",t[t.MANAGER=1]="MANAGER"})(WS||(WS={})),function(t){t[t.None=0]="None",t[t.Unfocused=1]="Unfocused",t[t.Focused=2]="Focused",t[t.Unselected=4]="Unselected",t[t.Selected=8]="Selected",t[t.All=15]="All"}(lW||(lW={})),function(t){t[t.None=0]="None",t[t.Custom1=16]="Custom1",t[t.Custom2=32]="Custom2",t[t.Custom3=64]="Custom3",t[t.Custom4=128]="Custom4",t[t.Custom5=256]="Custom5",t[t.Custom6=512]="Custom6",t[t.Custom7=1024]="Custom7",t[t.Custom8=2048]="Custom8",t[t.Custom9=4096]="Custom9",t[t.Custom10=8192]="Custom10",t[t.Custom11=16384]="Custom11",t[t.Custom12=32768]="Custom12",t[t.All=65520]="All"}(uW||(uW={}));function bNe(t){return[t.on("before-add",e=>{const i=e.item;if(i==null||t.includes(i))return tt.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();i.onAdd()}),t.on("after-remove",e=>{const i=e.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function fN(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(WS.USER)&&t.getEditableFlag(WS.MANAGER)}function nh(t){return pn(t.x,t.y)}function rle(t,e){const i=(t instanceof HTMLElement?t:t.surface)?.getBoundingClientRect();return i?pn(e.clientX-i.left,e.clientY-i.top):pn(0,0)}function cW(t,e){return e instanceof Event?rle(t,e):nh(e)}function hW(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let wNe=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(e,i){const r=()=>e.stopPropagation();switch(e.type){case"pointer-move":dW(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(r(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!pW(e))break;const s=nh(e),n=this._intersect(s,e.pointerType,i.forEachTool);if(Re(n))break;const o=n.manipulator,a=n.tool;!(ee(o)&&ee(a)&&o.interactive)||o.grabbable&&o.grabbableForEvent(e)||!o.grabbing||o.dragging||this._ungrabManipulatorBeforeDragging(o,e,i),ee(o)&&ee(a)&&o.interactive&&o.grabbable&&o.grabbableForEvent(e)&&!o.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:o,tool:a,start:s,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&Re(i.activeTool)&&(this._revertToNullActiveTool=!0,i.setActiveTool(n.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:s}),r());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,i);break;case"pointer-drag":{if(!pW(e))break;const s=this._grabbedManipulators.get(e.pointerId),n=Kf(s,({manipulator:c})=>c),o=Kf(s,({tool:c})=>c);if(Re(n)||Re(o))break;const a=nh(e);a.x=Da(a.x,0,i.view.width),a.y=Da(a.y,0,i.view.height);const l=s.start,u=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(n.dragging=!0,u?n.events.emit("drag",{action:"update",start:l,screenPoint:a}):n.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:o,manipulator:n,start:l}));break;case"end":n.dragging=!1,u&&n.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,i)}r();break}case"immediate-click":{const s=nh(e),n=this._intersect(s,e.pointerType,i.forEachTool);if(_Ne(e)||i.forEachTool(u=>{if((!ee(n)||n.tool!==u||u.automaticManipulatorSelection)&&u.manipulators){let c=!1;u.manipulators.forEach(({manipulator:d})=>{d.selected&&(d.selected=!1,c=!0)}),c&&u.onManipulatorSelectionChanged&&u.onManipulatorSelectionChanged()}}),Re(n))break;const{manipulator:o,tool:a}=n;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const l=e.native.shiftKey;o.events.emit("immediate-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:r});break}case"click":{const s=nh(e),n=this._intersect(s,e.pointerType,i.forEachTool),o=ee(n)?n.manipulator:null;if(Re(o)||!o.interactive)break;const a=e.native.shiftKey;o.events.emit(e.type,{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:a}),r();break}case"double-click":{const s=nh(e),n=this._intersect(s,e.pointerType,i.forEachTool),o=ee(n)?n.manipulator:null;if(Re(o)||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("double-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r});break}case"immediate-double-click":{const s=nh(e),n=this._intersect(s,e.pointerType,i.forEachTool),o=ee(n)?n.manipulator:null;if(Re(o)||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r});break}}this._onFocusChange(i.forEachTool)}_ungrabManipulatorBeforeDragging(e,i,r){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:nh(i)}),this._grabbedManipulators.forEach(({manipulator:s},n)=>{s===e&&this._grabbedManipulators.delete(n)}),this._afterManipulatorUngrab(r.setActiveTool)}_handlePointerEnd(e,i){const r=Kf(this._grabbedManipulators.get(e.pointerId),({manipulator:s})=>s);Re(r)||r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:nh(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorUngrab(i.setActiveTool))}_cursorFromMap(e){let i=null;return j4(e,({manipulator:r})=>!(Re(r)||!r.interactive)&&(r.grabbing&&r.grabCursor?(i=r.grabCursor,!0):!!r.cursor&&(i=r.cursor,!0))),i}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const i=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:s})=>{i.add(s)}),this._hoveredManipulators.forEach(({tool:s})=>{r.add(s)}),e(s=>{s.hasGrabbedManipulators=i.has(s),s.hasHoveredManipulators=r.has(s);const n=this._grabbedManipulators.values(),o=bme(n,({tool:a})=>a===s);s.firstGrabbedManipulator=ee(o)?o.manipulator:null})}clearPointers(e,{forEachTool:i,setActiveTool:r},s=!0,n){const o=(a,l)=>a===e&&(Re(n)||n===l);this._grabbedManipulators.forEach(({tool:a,manipulator:l,pointerType:u},c)=>{o(a,l)&&(this._grabbedManipulators.delete(c),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:u}))}),this._draggedManipulators.forEach(({tool:a,manipulator:l},u)=>{o(a,l)&&(this._draggedManipulators.delete(u),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}),s&&this._hoveredManipulators.forEach(({tool:a,manipulator:l},u)=>{o(a,l)&&(this._hoveredManipulators.delete(u),l.hovering=!1)}),this._afterManipulatorUngrab(r),this._onFocusChange(i)}_intersect(e,i,r){let s=null;return r(n=>{if(n.manipulators==null||!fN(n))return!1;const o=n.manipulators.intersect(e,i);return!Re(o)&&(s={tool:n,manipulator:o},!0)}),s}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(pn(i.x,i.y),r,i.pointerType,e)})}handleHoverEvent(e,i){e.type!=="pointer-up"&&e.type!=="immediate-click"&&e.type!=="pointer-move"||!dW(e.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(nh(e),e.pointerId,e.pointerType,i)}_updateHoveredStateForPointerAtScreenPosition(e,i,r,s){let n=this._intersect(e,r,s);const o=Kf(this._hoveredManipulators.get(i),({manipulator:a})=>a);ee(n)&&!n.manipulator.interactive&&(n=null),ee(n)&&o===n.manipulator||(ee(o)&&(o.hovering=!1),ee(n)?(n.manipulator.hovering=!0,this._hoveredManipulators.set(i,n)):this._hoveredManipulators.delete(i),this._onFocusChange(s))}_afterManipulatorUngrab(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}};function dW(t){return t==="mouse"}function pW(t){return t.pointerType!=="mouse"||t.button===0}function _Ne(t){return!!t.native.shiftKey}const fW="attached",kR="tools";let Rd=class extends qA{constructor(e){super(e),this._manipulatorState=new wNe,this.tools=new Nt,this.cursor=null,this._forEachTool=i=>{for(const r of this.tools.items)if(i(r))return}}initialize(){this.handles.add([this.view.on(ele,e=>{this._handleInputEvent(e)},fm.TOOL),...bNe(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(ee(e)&&!this.view.ready)return void tt.getLogger(this.declaredClass).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const i=this.activeTool;this._set("activeTool",e),ee(i)&&i.deactivate(),ee(e)&&e.activate(),this._removeIncompleteTools(e);for(const r of this.tools){this._updateToolEditableFlag(r);const s=fN(r);!Re(this.activeTool)&&s||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!s)}this._updateCursor()}get updating(){return this.updatingHandles.updating||this.tools.some(e=>e.updating)||(this.textures?.updating??!1)}attach(){this.view.type==="3d"?(this._set("textures",new ox(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([st(()=>{const{state:e}=this.view;return"camera"in e&&e.camera},()=>this._forEachManipulator(e=>e.onViewChange())),this.view.elevationProvider?.on("elevation-change",e=>this._forEachManipulator(i=>i.onElevationChange(e))),Lw(()=>this._set("textures",Jr(this.textures)))],fW)):this.handles.add(st(()=>this.view.extent,()=>this._forEachManipulator(e=>e.onViewChange())))}detach(){ee(this.activeTool)&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove(fW)}_forEachManipulator(e){this._forEachTool(i=>{i.manipulators&&i.manipulators.forEach(({manipulator:r})=>e(r,i))})}_handleInputEvent(e){let i=!1;const r={...e,stopPropagation:()=>{i=!0,e.stopPropagation()}};ee(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r):this._forEachTool(s=>{!i&&s.visible&&s.handleInputEvent(r)}),!i&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),!i&&ee(this.activeTool)&&this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove(kR),this._forEachTool(e=>{if(e instanceof Pt){const i=st(()=>[e.cursor,e.visible,e.editable],()=>{fN(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.handles.add(i,kR)}e.manipulators&&this.handles.add([e.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],kR)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){e.setEditableFlag?.(WS.MANAGER,Re(this.activeTool)||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;Re(e)&&this._forEachTool(i=>!(!ee(i.cursor)||!i.visible)&&(e=i.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(i=>(Re(e)||i!==e)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}};h([p({constructOnly:!0,nonNullable:!0})],Rd.prototype,"view",void 0),h([p({readOnly:!0,nonNullable:!0})],Rd.prototype,"textures",void 0),h([p({value:null})],Rd.prototype,"activeTool",null),h([p({readOnly:!0,type:Nt})],Rd.prototype,"tools",void 0),h([p({readOnly:!0})],Rd.prototype,"cursor",void 0),h([p({readOnly:!0})],Rd.prototype,"updating",null),Rd=h([ce("esri.views.ToolViewManager")],Rd);const xNe=Rd;let Pv=class extends Pt{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":SNe.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return ENe[this.deviceType]}};h([p({nonNullable:!0,readOnly:!0})],Pv.prototype,"nativeIndex",void 0),h([p({type:String,readOnly:!0})],Pv.prototype,"deviceType",null),h([p({type:Number,readOnly:!0})],Pv.prototype,"axisThreshold",null),Pv=h([ce("esri.views.input.gamepad.GamepadInputDevice")],Pv);const SNe=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),ENe={standard:.15,spacemouse:.025,unknown:0},D7=Pv;let ax=class extends Pt{constructor(...e){super(...e),this.devices=new Nt,this.enabledFocusMode="document"}};h([p({type:Nt.ofType(D7),readOnly:!0})],ax.prototype,"devices",void 0),h([p({type:["document","view","none"]})],ax.prototype,"enabledFocusMode",void 0),ax=h([ce("esri.views.input.gamepad.GamepadSettings")],ax);const TNe=ax;let WM=class extends Pt{constructor(){super(...arguments),this.gamepad=new TNe}};h([p({readOnly:!0})],WM.prototype,"gamepad",void 0),WM=h([ce("esri.views.input.Input")],WM);const INe=WM;let Cf=class extends Pt{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};h([p({type:Boolean,nonNullable:!0})],Cf.prototype,"enabled",void 0),h([p({type:D7})],Cf.prototype,"device",void 0),h([p({type:["pan","zoom"],nonNullable:!0})],Cf.prototype,"mode",void 0),h([p({type:["forward-down","forward-up"],nonNullable:!0})],Cf.prototype,"tiltDirection",void 0),h([p({type:Number,nonNullable:!0})],Cf.prototype,"velocityFactor",void 0),Cf=h([ce("esri.views.navigation.gamepad.GamepadSettings")],Cf);const sle=Cf;let vg=class extends Pt{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new sle,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};h([p({type:Boolean})],vg.prototype,"browserTouchPanEnabled",void 0),h([p({type:sle,nonNullable:!0})],vg.prototype,"gamepad",void 0),h([p({type:Boolean})],vg.prototype,"momentumEnabled",void 0),h([p({type:Boolean})],vg.prototype,"mouseWheelZoomEnabled",void 0),vg=h([ce("esri.views.navigation.Navigation")],vg);const nle=vg;var mW;function MNe(t){const e=t.url?o1(t.url):void 0;return!(t.spatialReference?.vcsWkid==null&&ee(e)&&e.serverType==="ImageServer")&&ole(t)&&t.heightModelInfo?t.heightModelInfo:ANe(t)?mC.deriveUnitFromSR($Ne,t.spatialReference):null}function ole(t){return"heightModelInfo"in t}function ale(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function ANe(t){return ale(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):lle(t)}function CNe(t){return t.layers!=null||lle(t)||ale(t)||ole(t)}function lle(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(t){t[t.Ok=0]="Ok",t[t.Units=1]="Units",t[t.HeightModel=2]="HeightModel",t[t.CRS=3]="CRS",t[t.Unsupported=4]="Unsupported"})(mW||(mW={}));const $Ne=new mC({heightModel:"gravity-related-height"});var mp;function yW(t){return t===mp.Global?"global":"local"}(function(t){t[t.Global=1]="Global",t[t.Local=2]="Local"})(mp||(mp={}));let mN,LR=null;async function ONe(t){LR||(LR=De(()=>import("./geometryServiceUtils-95ef3cfb.js"),["./geometryServiceUtils-95ef3cfb.js","./preload-helper-388ac9d5.js"],import.meta.url).then(e=>mN=e)),await LR,pr(t)}async function ule(t,e,i,r){if(!t)return null;const s=t.spatialReference;return Cm()||fp(s,e)?u1(t,e):mN?mN.projectGeometry(t,e,i,r):(await Promise.race([ONe(r),$m(r)]),ule(t,e,i,r))}let ur=class extends Pt{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=yS(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return ee(this.userSpatialReference)?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return Re(this.userSpatialReference)||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){const e=this.map?.(),i=[];return ee(this.priorityCollection)&&i.push(this.priorityCollection),i.push({parent:e?.basemap,layers:e?.basemap?.baseLayers},{layers:e?.layers},{parent:e?.ground,layers:e?.ground?.layers},{parent:e?.basemap,layers:e?.basemap?.referenceLayers}),i}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:e,updating:i}=this._allLayers;let r=null;for(const n of e){const o=this._getSupportedSpatialReferences(n);if(o.length>0){const a=this._narrowDownSpatialReferenceCandidates(r,o);ee(a)&&(r=a)}if(ee(r)&&r.length===1)break}if(i&&(Re(r)||r.length!==1))return{updating:!0};const s=this._pickSpatialReferenceCandidate(r);return{spatialReference:ee(s)?s.spatialReference:null,viewingMode:ee(s)?s.viewingMode:null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:i}=this._collectLayers([{parent:this.map?.()?.basemap,layers:this.map?.()?.basemap?.baseLayers},{layers:this.map?.()?.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const r=e[0].tileInfo;return{tileInfo:r&&r.spatialReference.equals(this.spatialReference)?r:null,updating:!1}}return{updating:i}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};const{layers:e,updating:i}=this._allLayers;for(const r of e)if(CNe(r)){const s=MNe(r);if(s)return{heightModelInfo:s,vcsWkid:r.spatialReference?.vcsWkid,latestVcsWkid:r.spatialReference?.latestVcsWkid,updating:!1}}return{updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,i=e.updating,r=[];for(const s of e.layers){const n="fullExtents"in s&&s.fullExtents||(ee(s.fullExtent)?[s.fullExtent]:[]),o=this.requiresExtentInSpatialReference?null:n[0],a=n.find(l=>l.spatialReference.equals(this.spatialReference))??o;if(a)return{candidates:[{extent:a,layer:s}],updating:!1};if(this._getSupportedSpatialReferences(s).length>0)for(const l of n)r.push({extent:l,layer:s})}return{candidates:r,updating:i}}get _extentTask(){const{candidates:e,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(Re(e)||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(e),s=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&s.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:ee(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished}:(ee(this._projectExtentTask.task)&&(this._projectExtentTask.task=yS(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:s.clone(),task:RQ(async n=>{try{const o=await ule(r.extent,s,r.layer.portalItem,n);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(Rl(n))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,i){if(Re(e))return i;const r=[],s=(n,o)=>ee(n)?ee(o)?n===o&&n:n:o;for(const n of e)for(const o of i){if(!n.spatialReference.equals(o.spatialReference))continue;const a=s(n.viewingMode,o.viewingMode);if(a!==!1){r.push({spatialReference:n.spatialReference,viewingMode:a});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(e){const i=this.defaultSpatialReference;return Re(e)||e.length<1?ee(i)?{spatialReference:i,viewingMode:null}:null:(ee(i)&&e.length>1&&e.some(({spatialReference:r})=>r.equals(i))&&(e=e.filter(({spatialReference:r})=>r.equals(i))),e.length>1&&e.some(({viewingMode:r})=>r!==mp.Local)&&(e=e.filter(({viewingMode:r})=>r!==mp.Local)),e[0])}_getSupportedSpatialReferences(e){const i="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(i.length===0)return[];const r=[];for(const s of i){const n=this.getSpatialReferenceSupport({spatialReference:s,layer:e});if(ee(n)){const o=ee(n.constraints)?n.constraints:[{spatialReference:s,viewingMode:null}];for(const{spatialReference:a,viewingMode:l}of o)(!this.requiresExtentInSpatialReference||Re(this.userSpatialReference)||a.equals(this.userSpatialReference))&&r.push({spatialReference:a,viewingMode:l})}}return r}_pickExtentCandidate(e){const i=this.spatialReference;return e.find(({extent:r})=>i.equals(r.spatialReference))||e[0]}_collectLayers(e){if(this._loadMaybe(this.map?.())!=="loaded")return{layers:[],updating:!0};const i={layers:[],preloading:-1,updating:!1};for(const r of e)if(this._collectCollection(r,i),i.preloading===this.sourcePreloadCount)break;return{layers:i.layers,updating:i.updating}}_collectCollection(e,i){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const r of e.layers){switch(this._loadMaybe(r)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":i.updating||i.layers.push(r),"layers"in r&&this._collectCollection({layers:r.layers},i)}if(i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(()=>{}),"loading"):e.loadStatus:"loaded"}};h([p()],ur.prototype,"required",void 0),h([p({constructOnly:!0})],ur.prototype,"map",void 0),h([p({constructOnly:!0})],ur.prototype,"getSpatialReferenceSupport",void 0),h([p()],ur.prototype,"defaultSpatialReference",void 0),h([p()],ur.prototype,"userSpatialReference",void 0),h([p()],ur.prototype,"sourcePreloadCount",void 0),h([p()],ur.prototype,"priorityCollection",void 0),h([p()],ur.prototype,"requiresExtentInSpatialReference",void 0),h([p()],ur.prototype,"suspended",void 0),h([p({readOnly:!0})],ur.prototype,"ready",null),h([p({readOnly:!0})],ur.prototype,"heightModelInfoReady",null),h([p({readOnly:!0})],ur.prototype,"spatialReference",null),h([p({readOnly:!0})],ur.prototype,"extent",null),h([p({readOnly:!0})],ur.prototype,"heightModelInfo",null),h([p({readOnly:!0})],ur.prototype,"vcsWkid",null),h([p({readOnly:!0})],ur.prototype,"latestVcsWkid",null),h([p({readOnly:!0})],ur.prototype,"viewingMode",null),h([p({readOnly:!0})],ur.prototype,"tileInfo",null),h([p({readOnly:!0})],ur.prototype,"mapCollections",null),h([p({readOnly:!0})],ur.prototype,"_allLayers",null),h([p({readOnly:!0})],ur.prototype,"_spatialReferenceTask",null),h([p({readOnly:!0})],ur.prototype,"_tileInfoTask",null),h([p({readOnly:!0})],ur.prototype,"_heightModelInfoTask",null),h([p({readOnly:!0})],ur.prototype,"_extentCandidatesTask",null),h([p()],ur.prototype,"_extentTask",null),h([p()],ur.prototype,"_projectExtentTask",void 0),ur=h([ce("esri.views.support.DefaultsFromMap")],ur);var JM;let Zt=JM=class extends ea(xp.EventedMixin(C3(Pt))){constructor(t){super(t),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new B0({getCollections:()=>[this.basemapView?.baseLayerViews,this.groundView?.layerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:e=>e.layerViews}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new y0,this.analyses=new M5,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Nt,this.magnifier=new Qae,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.timeReference=new Am,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new INe,this.navigation=new nle,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new gNe(this),this.persistableViewModels=new Nt,this._isValid=!1,this._readyCycleForced=!1,this._currentSpatialReference=null,this.handles.add(st(()=>this.preconditionsReady,e=>{e?(this._currentSpatialReference=this.spatialReference,JM.views.add(this)):(this._currentSpatialReference=null,JM.views.remove(this)),this.notifyChange("spatialReference"),!e&&this.ready?(this.toolViewManager?.detach(),ee(this.analysisViewManager)&&this.analysisViewManager.detach(),this.layerViewManager?.clear(),this._teardown()):e&&!this.ready&&(this._startup(),ee(this.analysisViewManager)&&this.analysisViewManager.attach(),this.toolViewManager.attach())},Cl))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,uC(()=>this.ready)))),this.basemapView=new Af({view:this}),this.layerViewManager=new cNe({view:this,layerViewImporter:{importLayerView:t=>this.importLayerView(t),hasLayerViewModule:t=>this.hasLayerViewModule(t)},supportsGround:this.supportsGround}),this.toolViewManager=new xNe({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([st(()=>this.initialExtentRequired,t=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:t},{sync:!0,initial:!0}),st(()=>this.ready,t=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=t,this.defaultsFromMap.userSpatialReference=t?this.spatialReference:this._userSpatialReference)},{sync:!0}),st(()=>this._userSpatialReference,t=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=t)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let t=null;this.handles.add([st(()=>this.defaultsFromMap?.ready,e=>{const i=this.map?.allLayers.length>0;if(e&&!this.spatialReference&&i){if(ee(t))return;const r=Lw(()=>t=yS(t));t=RQ(async s=>{try{await F4(this.spatialReferenceWarningDelay,null,s)}catch{return}finally{t=null}tt.getLogger(this.declaredClass).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(r,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Jr(this.graphics),this.analyses=Jr(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),Jr(this.analysisViewManager),this.toolViewManager=Jr(this.toolViewManager),this.layerViewManager=Jr(this.layerViewManager),this.basemapView=Jr(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const t=this.map;this.map=null,t?.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return tt.getLogger(this.declaredClass).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(t){this.toolViewManager&&(this.toolViewManager.activeTool=t)}get animation(){return this._get("animation")}set animation(t){this._set("animation",t)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new ur({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:t=>this.getSpatialReferenceSupport(t),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(t){this._set("extent",t)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||Ll.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(t){t!==this._get("map")&&(t?.destroyed&&(tt.getLogger(this.declaredClass).warn("#map","The provided map is already destroyed",{map:t}),t=null),Ll.isLoadable(t)&&t.load().catch(()=>{}),this.constructed&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",t))}get spatialReference(){let t=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return t&&this.defaultsFromMap?.required?.heightModelInfo&&(t=t.clone(),t.vcsWkid=this.defaultsFromMap.vcsWkid,t.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),t}set spatialReference(t){const e=!bs(t,this._get("spatialReference"));this._set("_userSpatialReference",t),e&&(this._set("spatialReference",t),this._spatialReferenceChanged(t))}_spatialReferenceChanged(t){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){const t=this.toolViewManager?this.toolViewManager.cursor:null;return ee(t)?t:this._cursor||"default"}set cursor(t){this._cursor=t,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(t){return this.layerViewManager.whenLayerView(t)}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}importLayerView(t){throw new Ce("importLayerView() not implemented")}hasLayerViewModule(t){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(t){return ee(this.getSpatialReferenceSupport({spatialReference:t}))}when(t,e){return this.isResolved()&&!this.ready&&tt.getLogger(this.declaredClass).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(t,e)}forceReadyCycle(){this.ready&&(Nl(()=>this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(t){this.toolViewManager.tools.add(t),this.activeTool=t}tryFatalErrorRecovery(){this.fatalError=null}};Zt.views=new Nt,h([p()],Zt.prototype,"_userSpatialReference",void 0),h([p()],Zt.prototype,"activeTool",null),h([p({readOnly:!0})],Zt.prototype,"allLayerViews",void 0),h([p()],Zt.prototype,"groundView",void 0),h([p()],Zt.prototype,"animation",null),h([p()],Zt.prototype,"basemapView",void 0),h([p()],Zt.prototype,"center",null),h([p({readOnly:!0})],Zt.prototype,"_defaultsFromMapSettings",null),h([p()],Zt.prototype,"defaultsFromMap",null),h([p()],Zt.prototype,"fatalError",void 0),h([p({type:Xt})],Zt.prototype,"extent",null),h([p(a6(y0,"graphics"))],Zt.prototype,"graphics",void 0),h([p(a6(M5,"analyses"))],Zt.prototype,"analyses",void 0),h([p({readOnly:!0,type:mC})],Zt.prototype,"heightModelInfo",null),h([p({readOnly:!0})],Zt.prototype,"interacting",null),h([p({readOnly:!0})],Zt.prototype,"navigating",null),h([p({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Zt.prototype,"preconditionsReady",null),h([p({readOnly:!0})],Zt.prototype,"typeSpecificPreconditionsReady",void 0),h([p({type:Nt,readOnly:!0})],Zt.prototype,"layerViews",void 0),h([p()],Zt.prototype,"resolution",null),h([p({type:Qae})],Zt.prototype,"magnifier",void 0),h([p({value:null,type:foe})],Zt.prototype,"map",null),h([p()],Zt.prototype,"padding",void 0),h([p({readOnly:!0})],Zt.prototype,"ready",void 0),h([p({type:Tt})],Zt.prototype,"spatialReference",null),h([p()],Zt.prototype,"spatialReferenceWarningDelay",void 0),h([p()],Zt.prototype,"stationary",null),h([p({readOnly:!0})],Zt.prototype,"supportsGround",void 0),h([p({type:Ga})],Zt.prototype,"timeExtent",void 0),h([p({type:Am,nonNullable:!0})],Zt.prototype,"timeReference",void 0),h([p()],Zt.prototype,"tools",null),h([p()],Zt.prototype,"toolViewManager",void 0),h([p({readOnly:!0})],Zt.prototype,"type",void 0),h([p({type:Number})],Zt.prototype,"scale",void 0),h([p({readOnly:!0})],Zt.prototype,"updating",void 0),h([p({readOnly:!0})],Zt.prototype,"initialExtentRequired",void 0),h([p({readOnly:!0})],Zt.prototype,"initialExtent",null),h([p()],Zt.prototype,"cursor",null),h([p({readOnly:!0})],Zt.prototype,"input",void 0),h([p({type:nle,nonNullable:!0})],Zt.prototype,"navigation",void 0),h([p()],Zt.prototype,"layerViewManager",void 0),h([p()],Zt.prototype,"analysisViewManager",void 0),h([p()],Zt.prototype,"width",void 0),h([p()],Zt.prototype,"height",void 0),h([p({readOnly:!0})],Zt.prototype,"resizing",void 0),h([p({value:null,readOnly:!0})],Zt.prototype,"size",null),h([p({readOnly:!0})],Zt.prototype,"suspended",void 0),h([p({readOnly:!0})],Zt.prototype,"viewEvents",void 0),h([p({readOnly:!0})],Zt.prototype,"persistableViewModels",void 0),h([p()],Zt.prototype,"_isValid",void 0),h([p()],Zt.prototype,"_readyCycleForced",void 0),h([p()],Zt.prototype,"_currentSpatialReference",void 0),Zt=JM=h([ce("esri.views.View")],Zt);const RNe=Zt;let $f=class extends CA{constructor(e){super(e),this.state="running",this.target=null,this._dfd=null}initialize(){this.addResolvingPromise(new Promise((e,i)=>this._dfd={resolve:e,reject:i}))}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._dfd?.reject(new Ce("ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._dfd?.resolve())}update(e,i){i||(i=_p(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",i)}};h([p({readOnly:!0})],$f.prototype,"done",null),h([p({readOnly:!0,type:String})],$f.prototype,"state",void 0),h([p()],$f.prototype,"target",void 0),$f=h([ce("esri.views.ViewAnimation")],$f),function(t){t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}($f||($f={}));const yN=$f;function Lg(t,e,i,r){const s=3*t,n=3*(i-t)-s,o=1-s-n,a=3*e,l=3*(r-e)-a,u=1-a-l;function c(g){return((o*g+n)*g+s)*g}function d(g){return((u*g+l)*g+a)*g}function f(g){return(3*o*g+2*n)*g+s}function m(g,v){let b,_,S,M,x,T;for(S=g,T=0;T<8;T++){if(M=c(S)-g,Math.abs(M)<v)return S;if(x=f(S),Math.abs(x)<1e-6)break;S-=M/x}if(b=0,_=1,S=g,S<b)return b;if(S>_)return _;for(;b<_;){if(M=c(S),Math.abs(M-g)<v)return S;g>M?b=S:_=S,S=.5*(_-b)+b}return S}return function(g,v=1e-6){return d(m(g,v))}}const kNe=/^cubic-bezier\((.*)\)/,uu={};function LNe(t){let e=uu[t]||null;if(!e){const i=kNe.exec(t);if(i){const r=i[1].split(",").map(s=>parseFloat(s.trim()));r.length!==4||r.some(s=>isNaN(s))||(e=Lg.apply(Lg,r))}}return e}uu.ease=Lg(.25,.1,.25,1),uu.linear=Lg(0,0,1,1),uu.easeIn=uu["ease-in"]=Lg(.42,0,1,1),uu.easeOut=uu["ease-out"]=Lg(0,0,.58,1),uu.easeInOut=uu["ease-in-out"]=Lg(.42,0,.58,1);function mm(){return[1,0,0,1,0,0]}function PNe(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function NNe(t,e,i,r,s,n){return[t,e,i,r,s,n]}function FNe(t,e){return new Float64Array(t,e,6)}Object.freeze(Object.defineProperty({__proto__:null,clone:PNe,create:mm,createView:FNe,fromValues:NNe},Symbol.toStringTag,{value:"Module"}));function JS(t,e){return t[0]=e[0],t[1]=e[1],t}function Mn(t,e,i){return t[0]=e,t[1]=i,t}function cle(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function ZS(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function hle(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function dle(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function DNe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function jNe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function UNe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function VNe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function BNe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function nE(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function zNe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t}function oE(t,e){const i=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(i*i+r*r)}function A5(t,e){const i=e[0]-t[0],r=e[1]-t[1];return i*i+r*r}function C5(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function ple(t){const e=t[0],i=t[1];return e*e+i*i}function fle(t,e){return t[0]=-e[0],t[1]=-e[1],t}function GNe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function gN(t,e){const i=e[0],r=e[1];let s=i*i+r*r;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s),t}function mle(t,e){return t[0]*e[0]+t[1]*e[1]}function yle(t,e,i){const r=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=r,t}function qNe(t,e,i,r){const s=e[0],n=e[1];return t[0]=s+r*(i[0]-s),t[1]=n+r*(i[1]-n),t}function HNe(t,e){e=e||1;const i=2*J4()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function WNe(t,e,i){const r=e[0],s=e[1];return t[0]=i[0]*r+i[2]*s,t[1]=i[1]*r+i[3]*s,t}function bh(t,e,i){const r=e[0],s=e[1];return t[0]=i[0]*r+i[2]*s+i[4],t[1]=i[1]*r+i[3]*s+i[5],t}function JNe(t,e,i){const r=e[0],s=e[1];return t[0]=i[0]*r+i[3]*s+i[6],t[1]=i[1]*r+i[4]*s+i[7],t}function ZNe(t,e,i){const r=e[0],s=e[1];return t[0]=i[0]*r+i[4]*s+i[12],t[1]=i[1]*r+i[5]*s+i[13],t}function YNe(t,e,i,r){const s=e[0]-i[0],n=e[1]-i[1],o=Math.sin(r),a=Math.cos(r);return t[0]=s*a-n*o+i[0],t[1]=s*o+n*a+i[1],t}function KNe(t,e){const i=t[0],r=t[1],s=e[0],n=e[1];let o=i*i+r*r;o>0&&(o=1/Math.sqrt(o));let a=s*s+n*n;a>0&&(a=1/Math.sqrt(a));const l=(i*s+r*n)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function QNe(t){return"vec2("+t[0]+", "+t[1]+")"}function XNe(t,e){return t[0]===e[0]&&t[1]===e[1]}function eFe(t,e){const i=t[0],r=t[1],s=e[0],n=e[1],o=$u();return Math.abs(i-s)<=o*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-n)<=o*Math.max(1,Math.abs(r),Math.abs(n))}function tFe(t,e,i,r,s){let n=e[0]-i[0],o=e[1]-i[1];const a=(r[0]*n+r[1]*o)*(s-1);return n=r[0]*a,o=r[1]*a,t[0]=e[0]+n,t[1]=e[1]+o,t}const iFe=C5,j7=ZS,rFe=hle,sFe=dle,nFe=oE,oFe=A5,aFe=ple;Object.freeze(Object.defineProperty({__proto__:null,add:cle,angle:KNe,ceil:DNe,copy:JS,cross:yle,dist:nFe,distance:oE,div:sFe,divide:dle,dot:mle,equals:eFe,exactEquals:XNe,floor:jNe,inverse:GNe,len:iFe,length:C5,lerp:qNe,max:VNe,min:UNe,mul:rFe,multiply:hle,negate:fle,normalize:gN,projectAndScale:tFe,random:HNe,rotate:YNe,round:BNe,scale:nE,scaleAndAdd:zNe,set:Mn,sqrDist:oFe,sqrLen:aFe,squaredDistance:A5,squaredLength:ple,str:QNe,sub:j7,subtract:ZS,transformMat2:WNe,transformMat2d:bh,transformMat3:JNe,transformMat4:ZNe},Symbol.toStringTag,{value:"Module"}));function vs(){return[0,0]}function lFe(t){return[t[0],t[1]]}function aE(t,e){return[t,e]}function uFe(t){const e=vs(),i=Math.min(2,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function cFe(t,e){return new Float64Array(t,e,2)}function gle(){return vs()}function vle(){return aE(1,1)}function ble(){return aE(1,0)}function wle(){return aE(0,1)}const hFe=gle(),dFe=vle(),pFe=ble(),fFe=wle();Object.freeze(Object.defineProperty({__proto__:null,ONES:dFe,UNIT_X:pFe,UNIT_Y:fFe,ZEROS:hFe,clone:lFe,create:vs,createView:cFe,fromArray:uFe,fromValues:aE,ones:vle,unitX:ble,unitY:wle,zeros:gle},Symbol.toStringTag,{value:"Module"}));const _le=96,xle=39.37,mFe=180/Math.PI;function Sle(t){return t.wkid?t:t.spatialReference||Tt.WGS84}function U7(t,e){return e.type?Mn(t,e.x,e.y):JS(t,e)}function Ele(t){return Sp(t)}function Yx(t,e){const i=Math.max(1,e[0]),r=Math.max(1,e[1]);return Math.max(t.width/i,t.height/r)*EFe(t.spatialReference)}async function lx(t,e,i,r){let s,n;if(!t||Array.isArray(t)&&!t.length)return null;if(Nt.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const a=t.every(c=>"attributes"in c),l=t.some(c=>!c.geometry);let u=t;if(a&&l&&e&&e.allLayerViews){const c=new Map;for(const g of t){const v=g.layer,b=c.get(v)||[],_=g.attributes[v.objectIdField];_!=null&&b.push(_),c.set(v,b)}const d=[];c.forEach((g,v)=>{const b=e.allLayerViews.find(_=>_.layer.id===v.id);if(b&&"queryFeatures"in b){const _=v.createQuery();_.objectIds=g,_.returnGeometry=!0,d.push(b.queryFeatures(_))}});const f=await Promise.all(d),m=[];for(const g of f)if(g&&g.features&&g.features.length)for(const v of g.features)ee(v.geometry)&&m.push(v.geometry);u=m}for(const c of u)r=await lx(c,e,i,r);return r}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")s=new Ct(t);else if(t instanceof Ep)s=t;else if("geometry"in t){if(t.geometry)s=t.geometry;else if(t.layer){const a=t.layer,l=e.allLayerViews.find(u=>u.layer.id===a.id);if(l&&"queryFeatures"in l){const u=a.createQuery();u.objectIds=[t.attributes[a.objectIdField]],u.returnGeometry=!0;const c=await l.queryFeatures(u);s=gK(c,"features",0,"geometry")}}}if(Re(s)||(n=s.type==="point"?new Xt({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference}):s.extent,!n))return null;Cm()||fp(n.spatialReference,i)||await $m();const o=u1(n,i);return o?r=r?r.union(o):o:null}function yFe(t){if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&t.layer&&t.layer.minScale&&t.layer.maxScale){const e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every(e=>"layer"in e)){let e=0,i=0;for(const r of t){const s=r.layer;s&&s.minScale&&s.maxScale&&(e=s.minScale<e?s.minScale:e,i=s.maxScale>i?s.maxScale:i)}return e&&i?{min:e,max:i}:null}}}function PR(t,e){return bs(Sle(t),e)?t:u1(t,e)}async function gFe(t,e){if(!t||!e)return new Oh({targetGeometry:new Ct,scale:0,rotation:0});let i=e.spatialReference;const{constraints:r,padding:s,viewpoint:n,size:o}=e,a=[s?o[0]-s.left-s.right:o[0],s?o[1]-s.top-s.bottom:o[1]];let l=null;t instanceof Oh?l=t:t.viewpoint?l=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(l=t.target);let u=null;l&&l.targetGeometry?u=l.targetGeometry:t instanceof Xt?u=t:(t||t&&("center"in t||"extent"in t||"target"in t))&&(u=await lx(t.center,e,i)||await lx(t.extent,e,i)||await lx(t.target,e,i)||await lx(t,e,i)),!u&&n&&n.targetGeometry?u=n.targetGeometry:!u&&e.extent&&(u=e.extent),i||(i=Sle(e.spatialReference||e.extent||u)),Cm()||bs(u.spatialReference,i)||fp(u,i)||await $m();const c=PR(u.center?u.center:u,i);let d=0;if(l&&ee(l.targetGeometry)&&l.targetGeometry.type==="point")d=l.scale;else if("scale"in t&&t.scale)d=t.scale;else if("zoom"in t&&t.zoom!==-1&&r&&r.effectiveLODs)d=r.zoomToScale(t.zoom);else if(Array.isArray(u)||u.type==="point"||u.type==="extent"&&u.width===0&&u.height===0){const v=PR(e.extent,i);d=ee(v)?Yx(v,a):e.extent?Yx(e.extent,a):n.scale}else d=Yx(PR(u.extent,i),a);const f=yFe(t);f&&(f.min&&f.min>d?d=f.min:f.max&&f.max<d&&(d=f.max));let m=0;l?m=l.rotation:t.hasOwnProperty("rotation")?m=t.rotation:n&&(m=n.rotation);let g=new Oh({targetGeometry:c,scale:d,rotation:m});return r&&(g=r.fit(g),r.constrainByGeometry(g),r.rotationEnabled||(g.rotation=m)),g}function Cc(t,e){const i=t.targetGeometry,r=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function vFe(t,e,i){return i?Mn(t,.5*(e[0]-i.right+i.left),.5*(e[1]-i.bottom+i.top)):nE(t,e,.5)}const bFe=function(){const t=vs();return function(e,i,r){const s=i.targetGeometry;U7(t,s);const n=.5*s_(i);return e.xmin=t[0]-n*r[0],e.ymin=t[1]-n*r[1],e.xmax=t[0]+n*r[0],e.ymax=t[1]+n*r[1],e.spatialReference=s.spatialReference,e}}();function wFe(t,e,i,r,s){return vN(t,e,i.center),t.scale=Yx(i,r),s&&s.constraints&&s.constraints.constrain(t),t}function _Fe(t,e,i,r){return z7(t,e,i,r),P7(t,t)}const Tle=function(){const t=vs();return function(e,i,r){return j7(e,TFe(e,i),vFe(t,i,r))}}(),xFe=function(){const t=mm(),e=vs();return function(i,r,s,n){const o=s_(r),a=V7(r);return Mn(e,o,o),Wae(t,e),FC(t,t,a),HS(t,t,Tle(e,s,n)),HS(t,t,[0,n.top-n.bottom]),Mn(i,t[4],t[5])}}();function s_(t){return t.scale*SFe(t.targetGeometry)}function SFe(t){return ee(t)&&Cn(t.spatialReference)?1/(Ele(t.spatialReference)*xle*_le):1}function V7(t){return v9(t.rotation)||0}function EFe(t){return Cn(t)?Ele(t)*xle*_le:1}function TFe(t,e){return nE(t,e,.5)}const B7=function(){const t=vs(),e=vs(),i=vs();return function(r,s,n,o,a,l){return fle(t,s),nE(e,n,.5*l),Mn(i,1/o*l,-1/o*l),F7(r,e),a&&FC(r,r,a),N7(r,r,i),HS(r,r,t),r}}(),z7=function(){const t=vs();return function(e,i,r,s){const n=s_(i),o=V7(i);return U7(t,i.targetGeometry),B7(e,t,r,n,o,s)}}(),IFe=function(){const t=vs();return function(e,i,r,s){const n=s_(i);return U7(t,i.targetGeometry),B7(e,t,r,n,0,s)}}();function MFe(t){const e=Il(t);return e?e.valid[1]-e.valid[0]:0}function AFe(t,e){return Math.round(MFe(t)/e)}const CFe=function(){const t=vs(),e=vs(),i=[0,0,0];return function(r,s,n){ZS(t,r,s),gN(t,t),ZS(e,r,n),gN(e,e),yle(i,t,e);let o=Math.acos(mle(t,e)/(C5(t)*C5(e)))*mFe;return i[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),$Fe=function(){const t=vs();return function(e,i,r,s){const n=e.targetGeometry;return Cc(e,i),xFe(t,i,r,s),n.x+=t[0],n.y+=t[1],e}}(),vN=function(t,e,i){Cc(t,e);const r=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,t},OFe=function(){const t=vs();return function(e,i,r,s,n){n||(n="center"),j7(t,r,s),nE(t,t,.5);const o=t[0],a=t[1];switch(n){case"center":Mn(t,0,0);break;case"left":Mn(t,-o,0);break;case"top":Mn(t,0,a);break;case"right":Mn(t,o,0);break;case"bottom":Mn(t,0,-a);break;case"top-left":Mn(t,-o,a);break;case"bottom-left":Mn(t,-o,-a);break;case"top-right":Mn(t,o,a);break;case"bottom-right":Mn(t,o,-a)}return jC(e,i,t),e}}();function gft(t,e,i){return Cc(t,e),t.rotation+=i,t}function RFe(t,e,i){return Cc(t,e),t.rotation=i,t}const kFe=function(){const t=vs();return function(e,i,r,s,n){return Cc(e,i),isNaN(r)||r===0||(Mle(t,s,i,n),e.scale=i.scale*r,Ale(t,t,e,n),jC(e,e,Mn(t,t[0]-s[0],s[1]-t[1]))),e}}();function gW(t,e,i){return Cc(t,e),t.scale=i,t}const Ile=function(){const t=vs();return function(e,i,r,s,n,o){return Cc(e,i),isNaN(r)||r===0||(Mle(t,n,i,o),e.scale=i.scale*r,e.rotation+=s,Ale(t,t,e,o),jC(e,e,Mn(t,t[0]-n[0],n[1]-t[1]))),e}}(),vft=function(){const t=vs(),e=vs();return function(i,r,s,n,o,a,l){return Tle(e,a,l),cle(t,o,e),n?Ile(i,r,s,n,t,a):kFe(i,r,s,t,a)}}(),Mle=function(){const t=mm();return function(e,i,r,s){return bh(e,i,_Fe(t,r,s,1))}}(),Ale=function(){const t=mm();return function(e,i,r,s){return bh(e,i,z7(t,r,s,1))}}(),jC=function(){const t=vs(),e=mm();return function(i,r,s){Cc(i,r);const n=s_(r),o=i.targetGeometry;return Hae(e,V7(r)),N7(e,e,aE(n,n)),bh(t,s,e),o.x+=t[0],o.y+=t[1],i}}();let LFe=class{constructor(e,i,r,s){const n=e.targetGeometry,o=i.targetGeometry;s?typeof s=="string"&&(s=LNe(s)||uu.ease):s=uu.ease,this.easing=s,this.duration=r,this.sCenterX=n.x,this.sCenterY=n.y,this.sScale=e.scale,this.sRotation=e.rotation,this.tCenterX=o.x,this.tCenterY=o.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(e,i){const r=this.easing(i);let s,n,o,a;i>=1?(s=this.tCenterX,n=this.tCenterY,o=this.tRotation,a=this.tScale):(s=this.sCenterX+r*this.dCenterX,n=this.sCenterY+r*this.dCenterY,o=this.sRotation+r*this.dRotation,a=this.sScale+r*this.dScale),e.targetGeometry.x=s,e.targetGeometry.y=n,e.scale=a,e.rotation=o}},kd=class extends Pt{constructor(e){super(e),this.updateFunction=null,this.animation=null,this.duration=200,this.transition=null,this.easing=uu.ease,this.view=null,this.viewpoint=new Oh({targetGeometry:new Ct,scale:0,rotation:0}),this._updateTask=Bb({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask=gs(this._updateTask)}animate(e,i,r){this.stop();const s=this.viewpoint;Cc(s,i),this.transition=new LFe(this.viewpoint,e.target,r&&r.duration||this.duration,r&&r.easing||this.easing);const n=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this.transition?.applyRatio(this.viewpoint,1),this.view?.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,i){this.stop(),this.updateFunction=i,this.viewpoint=e;const r=new yN({target:e.clone()}),s=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const i=this.animation;if(i&&i.state!==yN.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const r=this.transition,s=(performance.now()-this._startTime)/r.duration,n=s>=1;r.applyRatio(this.viewpoint,s),n&&this.animation?.finish()}this.view?.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};h([p()],kd.prototype,"animation",void 0),h([p()],kd.prototype,"duration",void 0),h([p()],kd.prototype,"transition",void 0),h([p()],kd.prototype,"easing",void 0),h([p()],kd.prototype,"view",void 0),h([p()],kd.prototype,"viewpoint",void 0),kd=h([ce("esri.views.2d.AnimationManager")],kd);const PFe=kd;let NFe=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)},this.update=()=>{this._updateRequested=!1;const{basemapView:i,graphicsView:r,labelManager:s,layerViews:n,state:{id:o}}=this.view;i?.baseLayerViews.forEach(this._updateLayerView,this),n.forEach(this._updateLayerView,this),i?.referenceLayerViews.forEach(this._updateLayerView,this),ee(s)&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),ee(r)&&(r.lastUpdateId!==o&&(r.viewChange(),r.lastUpdateId=o),r.updateRequested&&r.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle?.pause()}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=st(()=>e.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=Bb(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){if(!e.attached)return void this.requestUpdate();const i=this.view.state,r=e.lastUpdateId;r!=null&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),r!==i.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=i.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews.forEach(this._updateLayerView,this)}};function ps(){return Promise.all([De(()=>import("./webglDeps-a98174be.js"),["./webglDeps-a98174be.js","./VertexArrayObject-08d42ae7.js","./Texture-1b8ff28d.js","./enums-64ab819c.js","./ProgramTemplate-955552d1.js","./programUtils-0c0d452c.js","./NestedMap-7c434b47.js","./preload-helper-388ac9d5.js"],import.meta.url),De(()=>import("./mapViewDeps-64ac5947.js"),["./mapViewDeps-64ac5947.js","./MagnifierPrograms-42e1d9ee.js","./_commonjsHelpers-2f3e7994.js","./WGLContainer-2c173132.js","./definitions-cc1dbf1d.js","./VertexArrayObject-08d42ae7.js","./Texture-1b8ff28d.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./color-b1c8dd9c.js","./enums-f1a6a48a.js","./ProgramTemplate-955552d1.js","./MaterialKey-835d60d7.js","./utils-64fa4fcb.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-a79faf7d.js","./earcut-61f7b102.js","./ExpandedCIM-877df5d1.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-a18aa97b.js","./floatRGBA-e7156149.js","./rasterizingUtils-58eb8a8e.js","./imageutils-f0e5ac1f.js","./Matcher-37a9e719.js","./visualVariablesUtils-9821563e.js","./visualVariablesUtils-968002b5.js","./tileUtils-c2f19f52.js","./TurboLine-4d7f5bbb.js","./devEnvironmentUtils-f2a1f21e.js","./CircularArray-c48430e5.js","./webgl-debug-b1f7a2c5.js","./ComputedAttributeStorage-c5196ecb.js","./arcadeTimeUtils-d6b8096e.js","./executionError-c1d13a98.js","./centroid-ede77936.js","./BufferPool-d8a0723a.js","./enums-fb086c25.js","./programUtils-0c0d452c.js","./NestedMap-7c434b47.js","./RenderingContext-ab49bb4c.js","./OrderIndependentTransparency-e1b3a745.js","./basicInterfaces-b7051eb1.js","./doublePrecisionUtils-e3c3d0d8.js","./imageUtils-c2d0d1ae.js","./GraphicsView2D-f654d128.js","./normalizeUtilsSync-91270f4b.js","./projectionSupport-1fe92137.js","./json-48e3ea08.js","./AttributeStoreView-6307b3aa.js","./TiledDisplayObject-d0148f43.js","./schemaUtils-e2d062ae.js","./util-c2d90ab9.js","./GraphicContainer-03f01eb0.js","./BaseGraphicContainer-c06e3f4f.js","./FeatureContainer-96b2572a.js","./TileContainer-d9051116.js","./vec3f32-ad1dc57f.js","./requestImageUtils-00d96779.js"],import.meta.url)])}const Y_=()=>ps().then(()=>De(()=>import("./TileLayerView2D-4bf03c23.js"),["./TileLayerView2D-4bf03c23.js","./MagnifierPrograms-42e1d9ee.js","./_commonjsHelpers-2f3e7994.js","./WGLContainer-2c173132.js","./definitions-cc1dbf1d.js","./VertexArrayObject-08d42ae7.js","./Texture-1b8ff28d.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./color-b1c8dd9c.js","./enums-f1a6a48a.js","./ProgramTemplate-955552d1.js","./MaterialKey-835d60d7.js","./utils-64fa4fcb.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-a79faf7d.js","./earcut-61f7b102.js","./ExpandedCIM-877df5d1.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-a18aa97b.js","./floatRGBA-e7156149.js","./rasterizingUtils-58eb8a8e.js","./imageutils-f0e5ac1f.js","./Matcher-37a9e719.js","./visualVariablesUtils-9821563e.js","./visualVariablesUtils-968002b5.js","./tileUtils-c2f19f52.js","./TurboLine-4d7f5bbb.js","./devEnvironmentUtils-f2a1f21e.js","./CircularArray-c48430e5.js","./webgl-debug-b1f7a2c5.js","./ComputedAttributeStorage-c5196ecb.js","./arcadeTimeUtils-d6b8096e.js","./executionError-c1d13a98.js","./centroid-ede77936.js","./BufferPool-d8a0723a.js","./enums-fb086c25.js","./OrderIndependentTransparency-e1b3a745.js","./basicInterfaces-b7051eb1.js","./GraphicsView2D-f654d128.js","./normalizeUtilsSync-91270f4b.js","./projectionSupport-1fe92137.js","./json-48e3ea08.js","./AttributeStoreView-6307b3aa.js","./TiledDisplayObject-d0148f43.js","./schemaUtils-e2d062ae.js","./util-c2d90ab9.js","./vec3f32-ad1dc57f.js","./imageUtils-fac66a8e.js","./BitmapTileContainer-0a62583a.js","./Bitmap-226b0531.js","./TileContainer-d9051116.js","./LayerView-581efebc.js","./HighlightGraphicContainer-b96c0d00.js","./BaseGraphicContainer-c06e3f4f.js","./FeatureContainer-96b2572a.js","./RefreshableLayerView-b1f0fcdd.js","./drapedUtils-850ba51f.js","./popupUtils-4cea5297.js"],import.meta.url)),V1=()=>ps().then(()=>De(()=>import("./FeatureLayerView2D-2164c6a2.js"),["./FeatureLayerView2D-2164c6a2.js","./Container-a79faf7d.js","./definitions-cc1dbf1d.js","./enums-64ab819c.js","./Texture-1b8ff28d.js","./LayerView-581efebc.js","./schemaUtils-e2d062ae.js","./color-b1c8dd9c.js","./enums-f1a6a48a.js","./VertexElementDescriptor-2925c6af.js","./utils-64fa4fcb.js","./MaterialKey-835d60d7.js","./visualVariablesUtils-968002b5.js","./ExpandedCIM-877df5d1.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-a18aa97b.js","./floatRGBA-e7156149.js","./util-c2d90ab9.js","./popupUtils-4cea5297.js","./RefreshableLayerView-b1f0fcdd.js"],import.meta.url)),vW={"base-dynamic":()=>ps().then(()=>De(()=>import("./BaseDynamicLayerView2D-421625dd.js"),["./BaseDynamicLayerView2D-421625dd.js","./BitmapContainer-5c84aebb.js","./WGLContainer-2c173132.js","./definitions-cc1dbf1d.js","./VertexArrayObject-08d42ae7.js","./Texture-1b8ff28d.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./color-b1c8dd9c.js","./enums-f1a6a48a.js","./ProgramTemplate-955552d1.js","./MaterialKey-835d60d7.js","./utils-64fa4fcb.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-a79faf7d.js","./earcut-61f7b102.js","./LayerView-581efebc.js","./ExportStrategy-c706cb70.js","./Bitmap-226b0531.js","./RefreshableLayerView-b1f0fcdd.js","./preload-helper-388ac9d5.js"],import.meta.url)),"base-tile":Y_,"bing-maps":Y_,csv:V1,"geo-rss":()=>ps().then(()=>De(()=>import("./GeoRSSLayerView2D-0704db3a.js"),["./GeoRSSLayerView2D-0704db3a.js","./LayerView-581efebc.js","./Container-a79faf7d.js","./definitions-cc1dbf1d.js","./enums-64ab819c.js","./Texture-1b8ff28d.js","./GraphicContainer-03f01eb0.js","./color-b1c8dd9c.js","./enums-f1a6a48a.js","./VertexElementDescriptor-2925c6af.js","./BaseGraphicContainer-c06e3f4f.js","./FeatureContainer-96b2572a.js","./AttributeStoreView-6307b3aa.js","./TiledDisplayObject-d0148f43.js","./visualVariablesUtils-9821563e.js","./visualVariablesUtils-968002b5.js","./VertexArrayObject-08d42ae7.js","./TileContainer-d9051116.js","./WGLContainer-2c173132.js","./ProgramTemplate-955552d1.js","./MaterialKey-835d60d7.js","./utils-64fa4fcb.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./earcut-61f7b102.js","./vec3f32-ad1dc57f.js","./GraphicsView2D-f654d128.js","./ExpandedCIM-877df5d1.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-a18aa97b.js","./floatRGBA-e7156149.js","./normalizeUtilsSync-91270f4b.js","./projectionSupport-1fe92137.js","./json-48e3ea08.js","./Matcher-37a9e719.js","./tileUtils-c2f19f52.js","./TurboLine-4d7f5bbb.js","./devEnvironmentUtils-f2a1f21e.js","./schemaUtils-e2d062ae.js","./util-c2d90ab9.js","./ComputedAttributeStorage-c5196ecb.js","./arcadeTimeUtils-d6b8096e.js","./executionError-c1d13a98.js","./centroid-ede77936.js"],import.meta.url)),feature:V1,geojson:V1,graphics:()=>ps().then(()=>De(()=>import("./GraphicsLayerView2D-33640c26.js"),["./GraphicsLayerView2D-33640c26.js","./LayerView-581efebc.js","./Container-a79faf7d.js","./definitions-cc1dbf1d.js","./enums-64ab819c.js","./Texture-1b8ff28d.js","./GraphicContainer-03f01eb0.js","./color-b1c8dd9c.js","./enums-f1a6a48a.js","./VertexElementDescriptor-2925c6af.js","./BaseGraphicContainer-c06e3f4f.js","./FeatureContainer-96b2572a.js","./AttributeStoreView-6307b3aa.js","./TiledDisplayObject-d0148f43.js","./visualVariablesUtils-9821563e.js","./visualVariablesUtils-968002b5.js","./VertexArrayObject-08d42ae7.js","./TileContainer-d9051116.js","./WGLContainer-2c173132.js","./ProgramTemplate-955552d1.js","./MaterialKey-835d60d7.js","./utils-64fa4fcb.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./earcut-61f7b102.js","./vec3f32-ad1dc57f.js","./GraphicsView2D-f654d128.js","./ExpandedCIM-877df5d1.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-a18aa97b.js","./floatRGBA-e7156149.js","./normalizeUtilsSync-91270f4b.js","./projectionSupport-1fe92137.js","./json-48e3ea08.js","./Matcher-37a9e719.js","./tileUtils-c2f19f52.js","./TurboLine-4d7f5bbb.js","./devEnvironmentUtils-f2a1f21e.js","./schemaUtils-e2d062ae.js","./util-c2d90ab9.js","./ComputedAttributeStorage-c5196ecb.js","./arcadeTimeUtils-d6b8096e.js","./executionError-c1d13a98.js","./centroid-ede77936.js"],import.meta.url)),group:()=>ps().then(()=>De(()=>import("./GroupLayerView2D-33deda22.js"),["./GroupLayerView2D-33deda22.js","./GroupContainer-43988afa.js","./WGLContainer-2c173132.js","./definitions-cc1dbf1d.js","./VertexArrayObject-08d42ae7.js","./Texture-1b8ff28d.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./color-b1c8dd9c.js","./enums-f1a6a48a.js","./ProgramTemplate-955552d1.js","./MaterialKey-835d60d7.js","./utils-64fa4fcb.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-a79faf7d.js","./earcut-61f7b102.js","./LayerView-581efebc.js","./preload-helper-388ac9d5.js"],import.meta.url)),imagery:()=>ps().then(()=>De(()=>import("./ImageryLayerView2D-5952c189.js"),["./ImageryLayerView2D-5952c189.js","./RasterVFDisplayObject-7cffcf51.js","./VertexArrayObject-08d42ae7.js","./Texture-1b8ff28d.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./WGLContainer-2c173132.js","./definitions-cc1dbf1d.js","./color-b1c8dd9c.js","./enums-f1a6a48a.js","./ProgramTemplate-955552d1.js","./MaterialKey-835d60d7.js","./utils-64fa4fcb.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-a79faf7d.js","./earcut-61f7b102.js","./LayerView-581efebc.js","./GraphicsView2D-f654d128.js","./ExpandedCIM-877df5d1.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-a18aa97b.js","./floatRGBA-e7156149.js","./normalizeUtilsSync-91270f4b.js","./projectionSupport-1fe92137.js","./json-48e3ea08.js","./AttributeStoreView-6307b3aa.js","./TiledDisplayObject-d0148f43.js","./visualVariablesUtils-9821563e.js","./visualVariablesUtils-968002b5.js","./Matcher-37a9e719.js","./tileUtils-c2f19f52.js","./TurboLine-4d7f5bbb.js","./devEnvironmentUtils-f2a1f21e.js","./schemaUtils-e2d062ae.js","./util-c2d90ab9.js","./ComputedAttributeStorage-c5196ecb.js","./arcadeTimeUtils-d6b8096e.js","./executionError-c1d13a98.js","./centroid-ede77936.js","./HighlightGraphicContainer-b96c0d00.js","./BaseGraphicContainer-c06e3f4f.js","./FeatureContainer-96b2572a.js","./TileContainer-d9051116.js","./vec3f32-ad1dc57f.js","./BitmapContainer-5c84aebb.js","./Bitmap-226b0531.js","./ExportStrategy-c706cb70.js","./rasterProjectionHelper-b2144909.js","./popupUtils-4cea5297.js","./RefreshableLayerView-b1f0fcdd.js"],import.meta.url)),"imagery-tile":()=>ps().then(()=>De(()=>import("./ImageryTileLayerView2D-a551ff79.js"),["./ImageryTileLayerView2D-a551ff79.js","./RasterVFDisplayObject-7cffcf51.js","./VertexArrayObject-08d42ae7.js","./Texture-1b8ff28d.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./WGLContainer-2c173132.js","./definitions-cc1dbf1d.js","./color-b1c8dd9c.js","./enums-f1a6a48a.js","./ProgramTemplate-955552d1.js","./MaterialKey-835d60d7.js","./utils-64fa4fcb.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-a79faf7d.js","./earcut-61f7b102.js","./LayerView-581efebc.js","./rasterUtils-355ef021.js","./TiledDisplayObject-d0148f43.js","./TileContainer-d9051116.js","./RawBlockCache-34185bfd.js","./rasterProjectionHelper-b2144909.js","./util-c2d90ab9.js","./popupUtils-4cea5297.js","./RefreshableLayerView-b1f0fcdd.js","./preload-helper-388ac9d5.js"],import.meta.url)),kml:()=>ps().then(()=>De(()=>import("./KMLLayerView2D-a5706329.js"),["./KMLLayerView2D-a5706329.js","./kmlUtils-7bd95b61.js","./Bitmap-226b0531.js","./Container-a79faf7d.js","./definitions-cc1dbf1d.js","./enums-64ab819c.js","./Texture-1b8ff28d.js","./BitmapContainer-5c84aebb.js","./WGLContainer-2c173132.js","./VertexArrayObject-08d42ae7.js","./VertexElementDescriptor-2925c6af.js","./color-b1c8dd9c.js","./enums-f1a6a48a.js","./ProgramTemplate-955552d1.js","./MaterialKey-835d60d7.js","./utils-64fa4fcb.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./earcut-61f7b102.js","./LayerView-581efebc.js","./GraphicContainer-03f01eb0.js","./BaseGraphicContainer-c06e3f4f.js","./FeatureContainer-96b2572a.js","./AttributeStoreView-6307b3aa.js","./TiledDisplayObject-d0148f43.js","./visualVariablesUtils-9821563e.js","./visualVariablesUtils-968002b5.js","./TileContainer-d9051116.js","./vec3f32-ad1dc57f.js","./GraphicsView2D-f654d128.js","./ExpandedCIM-877df5d1.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-a18aa97b.js","./floatRGBA-e7156149.js","./normalizeUtilsSync-91270f4b.js","./projectionSupport-1fe92137.js","./json-48e3ea08.js","./Matcher-37a9e719.js","./tileUtils-c2f19f52.js","./TurboLine-4d7f5bbb.js","./devEnvironmentUtils-f2a1f21e.js","./schemaUtils-e2d062ae.js","./util-c2d90ab9.js","./ComputedAttributeStorage-c5196ecb.js","./arcadeTimeUtils-d6b8096e.js","./executionError-c1d13a98.js","./centroid-ede77936.js","./rasterProjectionHelper-b2144909.js","./RenderingContext-ab49bb4c.js","./programUtils-0c0d452c.js","./NestedMap-7c434b47.js","./OrderIndependentTransparency-e1b3a745.js","./basicInterfaces-b7051eb1.js","./doublePrecisionUtils-e3c3d0d8.js","./webgl-debug-b1f7a2c5.js","./rasterUtils-355ef021.js"],import.meta.url)),"knowledge-graph":()=>ps().then(()=>De(()=>import("./KnowledgeGraphLayerView2D-f1f3a3fe.js"),["./KnowledgeGraphLayerView2D-f1f3a3fe.js","./LayerView-581efebc.js","./Container-a79faf7d.js","./definitions-cc1dbf1d.js","./enums-64ab819c.js","./Texture-1b8ff28d.js","./preload-helper-388ac9d5.js"],import.meta.url)),"link-chart":()=>ps().then(()=>De(()=>import("./KnowledgeGraphLayerView2D-f1f3a3fe.js"),["./KnowledgeGraphLayerView2D-f1f3a3fe.js","./LayerView-581efebc.js","./Container-a79faf7d.js","./definitions-cc1dbf1d.js","./enums-64ab819c.js","./Texture-1b8ff28d.js","./preload-helper-388ac9d5.js"],import.meta.url)),"knowledge-graph-sublayer":V1,"map-image":()=>ps().then(()=>De(()=>import("./MapImageLayerView2D-2762a899.js"),["./MapImageLayerView2D-2762a899.js","./BitmapContainer-5c84aebb.js","./WGLContainer-2c173132.js","./definitions-cc1dbf1d.js","./VertexArrayObject-08d42ae7.js","./Texture-1b8ff28d.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./color-b1c8dd9c.js","./enums-f1a6a48a.js","./ProgramTemplate-955552d1.js","./MaterialKey-835d60d7.js","./utils-64fa4fcb.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-a79faf7d.js","./earcut-61f7b102.js","./LayerView-581efebc.js","./GraphicsView2D-f654d128.js","./ExpandedCIM-877df5d1.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-a18aa97b.js","./floatRGBA-e7156149.js","./normalizeUtilsSync-91270f4b.js","./projectionSupport-1fe92137.js","./json-48e3ea08.js","./AttributeStoreView-6307b3aa.js","./TiledDisplayObject-d0148f43.js","./visualVariablesUtils-9821563e.js","./visualVariablesUtils-968002b5.js","./Matcher-37a9e719.js","./tileUtils-c2f19f52.js","./TurboLine-4d7f5bbb.js","./devEnvironmentUtils-f2a1f21e.js","./schemaUtils-e2d062ae.js","./util-c2d90ab9.js","./ComputedAttributeStorage-c5196ecb.js","./arcadeTimeUtils-d6b8096e.js","./executionError-c1d13a98.js","./centroid-ede77936.js","./HighlightGraphicContainer-b96c0d00.js","./BaseGraphicContainer-c06e3f4f.js","./FeatureContainer-96b2572a.js","./TileContainer-d9051116.js","./vec3f32-ad1dc57f.js","./ExportStrategy-c706cb70.js","./Bitmap-226b0531.js","./RefreshableLayerView-b1f0fcdd.js","./drapedUtils-850ba51f.js","./popupUtils-4cea5297.js"],import.meta.url)),"map-notes":()=>ps().then(()=>De(()=>import("./MapNotesLayerView2D-7896323d.js"),["./MapNotesLayerView2D-7896323d.js","./Container-a79faf7d.js","./definitions-cc1dbf1d.js","./enums-64ab819c.js","./Texture-1b8ff28d.js","./GroupContainer-43988afa.js","./WGLContainer-2c173132.js","./VertexArrayObject-08d42ae7.js","./VertexElementDescriptor-2925c6af.js","./color-b1c8dd9c.js","./enums-f1a6a48a.js","./ProgramTemplate-955552d1.js","./MaterialKey-835d60d7.js","./utils-64fa4fcb.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./earcut-61f7b102.js","./LayerView-581efebc.js","./GraphicContainer-03f01eb0.js","./BaseGraphicContainer-c06e3f4f.js","./FeatureContainer-96b2572a.js","./AttributeStoreView-6307b3aa.js","./TiledDisplayObject-d0148f43.js","./visualVariablesUtils-9821563e.js","./visualVariablesUtils-968002b5.js","./TileContainer-d9051116.js","./vec3f32-ad1dc57f.js","./GraphicsView2D-f654d128.js","./ExpandedCIM-877df5d1.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-a18aa97b.js","./floatRGBA-e7156149.js","./normalizeUtilsSync-91270f4b.js","./projectionSupport-1fe92137.js","./json-48e3ea08.js","./Matcher-37a9e719.js","./tileUtils-c2f19f52.js","./TurboLine-4d7f5bbb.js","./devEnvironmentUtils-f2a1f21e.js","./schemaUtils-e2d062ae.js","./util-c2d90ab9.js","./ComputedAttributeStorage-c5196ecb.js","./arcadeTimeUtils-d6b8096e.js","./executionError-c1d13a98.js","./centroid-ede77936.js"],import.meta.url)),media:()=>ps().then(()=>De(()=>import("./MediaLayerView2D-429eb4d2.js"),["./MediaLayerView2D-429eb4d2.js","./perspectiveUtils-582ed7f3.js","./normalizeUtilsSync-91270f4b.js","./mat3f64-221ce671.js","./MagnifierPrograms-42e1d9ee.js","./_commonjsHelpers-2f3e7994.js","./WGLContainer-2c173132.js","./definitions-cc1dbf1d.js","./VertexArrayObject-08d42ae7.js","./Texture-1b8ff28d.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./color-b1c8dd9c.js","./enums-f1a6a48a.js","./ProgramTemplate-955552d1.js","./MaterialKey-835d60d7.js","./utils-64fa4fcb.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-a79faf7d.js","./earcut-61f7b102.js","./ExpandedCIM-877df5d1.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-a18aa97b.js","./floatRGBA-e7156149.js","./rasterizingUtils-58eb8a8e.js","./imageutils-f0e5ac1f.js","./Matcher-37a9e719.js","./visualVariablesUtils-9821563e.js","./visualVariablesUtils-968002b5.js","./tileUtils-c2f19f52.js","./TurboLine-4d7f5bbb.js","./devEnvironmentUtils-f2a1f21e.js","./CircularArray-c48430e5.js","./webgl-debug-b1f7a2c5.js","./ComputedAttributeStorage-c5196ecb.js","./arcadeTimeUtils-d6b8096e.js","./executionError-c1d13a98.js","./centroid-ede77936.js","./BufferPool-d8a0723a.js","./enums-fb086c25.js","./OrderIndependentTransparency-e1b3a745.js","./basicInterfaces-b7051eb1.js","./GraphicsView2D-f654d128.js","./projectionSupport-1fe92137.js","./json-48e3ea08.js","./AttributeStoreView-6307b3aa.js","./TiledDisplayObject-d0148f43.js","./schemaUtils-e2d062ae.js","./util-c2d90ab9.js","./vec3f32-ad1dc57f.js","./LayerView-581efebc.js"],import.meta.url)),"ogc-feature":()=>ps().then(()=>De(()=>import("./OGCFeatureLayerView2D-f829c782.js"),["./OGCFeatureLayerView2D-f829c782.js","./FeatureLayerView2D-2164c6a2.js","./Container-a79faf7d.js","./definitions-cc1dbf1d.js","./enums-64ab819c.js","./Texture-1b8ff28d.js","./LayerView-581efebc.js","./schemaUtils-e2d062ae.js","./color-b1c8dd9c.js","./enums-f1a6a48a.js","./VertexElementDescriptor-2925c6af.js","./utils-64fa4fcb.js","./MaterialKey-835d60d7.js","./visualVariablesUtils-968002b5.js","./ExpandedCIM-877df5d1.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-a18aa97b.js","./floatRGBA-e7156149.js","./util-c2d90ab9.js","./popupUtils-4cea5297.js","./RefreshableLayerView-b1f0fcdd.js"],import.meta.url)),"open-street-map":Y_,"oriented-imagery":V1,route:()=>ps().then(()=>De(()=>import("./RouteLayerView2D-2ba26263.js"),["./RouteLayerView2D-2ba26263.js","./Stop-b90253c3.js","./LayerView-581efebc.js","./Container-a79faf7d.js","./definitions-cc1dbf1d.js","./enums-64ab819c.js","./Texture-1b8ff28d.js","./GraphicContainer-03f01eb0.js","./color-b1c8dd9c.js","./enums-f1a6a48a.js","./VertexElementDescriptor-2925c6af.js","./BaseGraphicContainer-c06e3f4f.js","./FeatureContainer-96b2572a.js","./AttributeStoreView-6307b3aa.js","./TiledDisplayObject-d0148f43.js","./visualVariablesUtils-9821563e.js","./visualVariablesUtils-968002b5.js","./VertexArrayObject-08d42ae7.js","./TileContainer-d9051116.js","./WGLContainer-2c173132.js","./ProgramTemplate-955552d1.js","./MaterialKey-835d60d7.js","./utils-64fa4fcb.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./earcut-61f7b102.js","./vec3f32-ad1dc57f.js","./GraphicsView2D-f654d128.js","./ExpandedCIM-877df5d1.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-a18aa97b.js","./floatRGBA-e7156149.js","./normalizeUtilsSync-91270f4b.js","./projectionSupport-1fe92137.js","./json-48e3ea08.js","./Matcher-37a9e719.js","./tileUtils-c2f19f52.js","./TurboLine-4d7f5bbb.js","./devEnvironmentUtils-f2a1f21e.js","./schemaUtils-e2d062ae.js","./util-c2d90ab9.js","./ComputedAttributeStorage-c5196ecb.js","./arcadeTimeUtils-d6b8096e.js","./executionError-c1d13a98.js","./centroid-ede77936.js"],import.meta.url)),stream:()=>ps().then(()=>De(()=>import("./StreamLayerView2D-08c13608.js"),["./StreamLayerView2D-08c13608.js","./FeatureLayerView2D-2164c6a2.js","./Container-a79faf7d.js","./definitions-cc1dbf1d.js","./enums-64ab819c.js","./Texture-1b8ff28d.js","./LayerView-581efebc.js","./schemaUtils-e2d062ae.js","./color-b1c8dd9c.js","./enums-f1a6a48a.js","./VertexElementDescriptor-2925c6af.js","./utils-64fa4fcb.js","./MaterialKey-835d60d7.js","./visualVariablesUtils-968002b5.js","./ExpandedCIM-877df5d1.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-a18aa97b.js","./floatRGBA-e7156149.js","./util-c2d90ab9.js","./popupUtils-4cea5297.js","./RefreshableLayerView-b1f0fcdd.js"],import.meta.url)),"subtype-group":()=>ps().then(()=>De(()=>import("./SubtypeGroupLayerView2D-643df08b.js"),["./SubtypeGroupLayerView2D-643df08b.js","./FeatureLayerView2D-2164c6a2.js","./Container-a79faf7d.js","./definitions-cc1dbf1d.js","./enums-64ab819c.js","./Texture-1b8ff28d.js","./LayerView-581efebc.js","./schemaUtils-e2d062ae.js","./color-b1c8dd9c.js","./enums-f1a6a48a.js","./VertexElementDescriptor-2925c6af.js","./utils-64fa4fcb.js","./MaterialKey-835d60d7.js","./visualVariablesUtils-968002b5.js","./ExpandedCIM-877df5d1.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-a18aa97b.js","./floatRGBA-e7156149.js","./util-c2d90ab9.js","./popupUtils-4cea5297.js","./RefreshableLayerView-b1f0fcdd.js"],import.meta.url)),tile:Y_,"vector-tile":()=>ps().then(()=>De(()=>import("./VectorTileLayerView2D-d862f9d8.js"),["./VectorTileLayerView2D-d862f9d8.js","./enums-fb086c25.js","./Rect-ea14f53a.js","./enums-64ab819c.js","./Texture-1b8ff28d.js","./rasterizingUtils-58eb8a8e.js","./floatRGBA-e7156149.js","./VertexArrayObject-08d42ae7.js","./config-1337d16e.js","./TiledDisplayObject-d0148f43.js","./Container-a79faf7d.js","./definitions-cc1dbf1d.js","./StyleDefinition-29c49b98.js","./enums-f1a6a48a.js","./color-b1c8dd9c.js","./VertexElementDescriptor-2925c6af.js","./TileContainer-d9051116.js","./WGLContainer-2c173132.js","./ProgramTemplate-955552d1.js","./MaterialKey-835d60d7.js","./utils-64fa4fcb.js","./GeometryUtils-dd03fc25.js","./earcut-61f7b102.js","./StyleRepository-44f4ff45.js","./GeometryUtils-984e8446.js","./LayerView-581efebc.js","./preload-helper-388ac9d5.js"],import.meta.url)),wcs:()=>ps().then(()=>De(()=>import("./ImageryTileLayerView2D-a551ff79.js"),["./ImageryTileLayerView2D-a551ff79.js","./RasterVFDisplayObject-7cffcf51.js","./VertexArrayObject-08d42ae7.js","./Texture-1b8ff28d.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./WGLContainer-2c173132.js","./definitions-cc1dbf1d.js","./color-b1c8dd9c.js","./enums-f1a6a48a.js","./ProgramTemplate-955552d1.js","./MaterialKey-835d60d7.js","./utils-64fa4fcb.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-a79faf7d.js","./earcut-61f7b102.js","./LayerView-581efebc.js","./rasterUtils-355ef021.js","./TiledDisplayObject-d0148f43.js","./TileContainer-d9051116.js","./RawBlockCache-34185bfd.js","./rasterProjectionHelper-b2144909.js","./util-c2d90ab9.js","./popupUtils-4cea5297.js","./RefreshableLayerView-b1f0fcdd.js","./preload-helper-388ac9d5.js"],import.meta.url)),"web-tile":Y_,wfs:V1,wms:()=>ps().then(()=>De(()=>import("./WMSLayerView2D-6d9f9533.js"),["./WMSLayerView2D-6d9f9533.js","./BitmapContainer-5c84aebb.js","./WGLContainer-2c173132.js","./definitions-cc1dbf1d.js","./VertexArrayObject-08d42ae7.js","./Texture-1b8ff28d.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./color-b1c8dd9c.js","./enums-f1a6a48a.js","./ProgramTemplate-955552d1.js","./MaterialKey-835d60d7.js","./utils-64fa4fcb.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-a79faf7d.js","./earcut-61f7b102.js","./LayerView-581efebc.js","./ExportStrategy-c706cb70.js","./Bitmap-226b0531.js","./RefreshableLayerView-b1f0fcdd.js","./preload-helper-388ac9d5.js"],import.meta.url)),wmts:()=>ps().then(()=>De(()=>import("./WMTSLayerView2D-82ae2f4f.js"),["./WMTSLayerView2D-82ae2f4f.js","./imageUtils-fac66a8e.js","./BitmapTileContainer-0a62583a.js","./Bitmap-226b0531.js","./Container-a79faf7d.js","./definitions-cc1dbf1d.js","./enums-64ab819c.js","./Texture-1b8ff28d.js","./TiledDisplayObject-d0148f43.js","./WGLContainer-2c173132.js","./VertexArrayObject-08d42ae7.js","./VertexElementDescriptor-2925c6af.js","./color-b1c8dd9c.js","./enums-f1a6a48a.js","./ProgramTemplate-955552d1.js","./MaterialKey-835d60d7.js","./utils-64fa4fcb.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./earcut-61f7b102.js","./TileContainer-d9051116.js","./LayerView-581efebc.js","./RefreshableLayerView-b1f0fcdd.js","./preload-helper-388ac9d5.js"],import.meta.url)),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function FFe(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new Ce(`${i}:view-not-supported`,`${e} is not supported in 2D`)}const bW={hasLayerViewModule:t=>ee(vW[t.type]),importLayerView:t=>{const e=vW[t.type];if(Re(e))throw FFe(t);return e(t)}};function DFe(t,e){const{spatialReference:i}=e,r=[e.x,e.y];let s=Number.POSITIVE_INFINITY,n=0,o=0;const a=[0,0],l=t.type==="extent"?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:t.rings;for(const u of l)for(let c=0;c<u.length-1;c++){Abe(a,r,u,c);const d=oE(r,a);d<s&&(s=d,n=a[0],o=a[1])}return{coordinate:new Ct({x:n,y:o,spatialReference:i}),distance:s}}var bN;let Pg=bN=class extends P9(Pt){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(Re(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return u1(this.geometry,this.spatialReference)}catch(t){return tt.getLogger(this.declaredClass).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(Re(this.normalizedGeometry))return t;const i=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?W4(this.normalizedGeometry,i):aX(this.normalizedGeometry,i))return t;const{coordinate:r}=DFe(this.normalizedGeometry,i);return r&&(t.targetGeometry=r),t}clone(){return new bN({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};h([p({constructOnly:!0})],Pg.prototype,"geometry",void 0),h([p({readOnly:!0})],Pg.prototype,"normalizedGeometry",null),h([p({constructOnly:!0})],Pg.prototype,"spatialReference",void 0),Pg=bN=h([ce("esri.views.2d.constraints.GeometryConstraint")],Pg);var wN;let ux=wN=class extends P9(Pt){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new wN({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};h([p()],ux.prototype,"enabled",void 0),h([p()],ux.prototype,"rotationEnabled",void 0),ux=wN=h([ce("esri.views.2d.constraints.RotationConstraint")],ux);const Cle=ux;var _N;let pa=_N=class extends P9(Pt){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:i,maxScale:r,minZoom:s,maxZoom:n}=this,o=-1,a=-1,l=!1,u=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!e||!e.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);e=e.map(c=>c.clone()),e.sort((c,d)=>d.scale-c.scale),e.forEach((c,d)=>c.level=d);for(const c of e)!l&&i>0&&i>=c.scale&&(o=c.level,l=!0),!u&&r>0&&r>=c.scale&&(a=t?t.level:-1,u=!0),t=c;s===-1&&(s=i===0?0:o),n===-1&&(n=r===0?e.length-1:a),s=Math.max(s,0),s=Math.min(s,e.length-1),n=Math.max(n,0),n=Math.min(n,e.length-1),s>n&&([s,n]=[n,s]),i=e[s].scale,r=e[n].scale,e.splice(0,s),e.splice(n-s+1,e.length),e.forEach((c,d)=>{this._lodByScale[c.scale]=c,this._scales[d]=c.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",n),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(t,e){if(e&&t.scale===e.scale)return t;const i=this.effectiveMinScale,r=this.effectiveMaxScale,s=t.targetGeometry,n=e&&e.targetGeometry,o=r!==0&&t.scale<r,a=i!==0&&t.scale>i;if(o||a){const l=a?i:r;if(e&&n){const u=(l-e.scale)/(t.scale-e.scale);s.x=n.x+(s.x-n.x)*u,s.y=n.y+(s.y-n.y)*u}t.scale=l}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),i=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(i>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const i=Math.round(t-.5),r=Math.round(t);return e[r]+(r-t)*(e[i]-e[r])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let i,r;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let s=0;s<e.length-1;s++){if(i=e[s],r=e[s+1],r===t)return s+this.effectiveMinZoom+1;if(i>t&&r<t)return s+this.effectiveMinZoom+1-(t-r)/(i-r)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new _N({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e,this._scales[0])),this._lodByScale[t].scale}};h([p({readOnly:!0})],pa.prototype,"effectiveLODs",void 0),h([p({readOnly:!0})],pa.prototype,"effectiveMinZoom",void 0),h([p({readOnly:!0})],pa.prototype,"effectiveMaxZoom",void 0),h([p({readOnly:!0})],pa.prototype,"effectiveMinScale",void 0),h([p({readOnly:!0})],pa.prototype,"effectiveMaxScale",void 0),h([p()],pa.prototype,"lods",void 0),h([p()],pa.prototype,"minZoom",void 0),h([p()],pa.prototype,"maxZoom",void 0),h([p()],pa.prototype,"minScale",void 0),h([p()],pa.prototype,"maxScale",void 0),h([p()],pa.prototype,"snapToZoom",void 0),pa=_N=h([ce("esri.views.2d.constraints.ZoomConstraint")],pa);const $le=pa,jFe={base:null,key:"type",typeMap:{extent:Xt,polygon:ja}};let ds=class extends Pt{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _defaultLODs(){const e=this.view?.defaultsFromMap?.tileInfo,i=this.view?.spatialReference;return e&&i&&e.spatialReference.equals(i)?e.lods:null}get _geometry(){return new Pg({geometry:this.geometry,spatialReference:this.view?.spatialReference})}get _rotation(){return new Cle({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),i=this.lods||this._defaultLODs,r=this.minZoom,s=this.maxZoom,n=this.minScale,o=this.maxScale,a=this.snapToZoom;return e&&e.lods===i&&e.minZoom===r&&e.maxZoom===s&&e.minScale===n&&e.maxScale===o&&e.snapToZoom===a?e:new $le({lods:i,minZoom:r,maxZoom:s,minScale:n,maxScale:o,snapToZoom:a})}canZoomInTo(e){const i=this.effectiveMaxScale;return i===0||e>=i}canZoomOutTo(e){const i=this.effectiveMinScale;return i===0||e<=i}constrain(e,i){return this._zoom.constrain(e,i),this._rotation.constrain(e,i),this._geometry.constrain(e,i),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};h([p({readOnly:!0})],ds.prototype,"effectiveLODs",null),h([p({readOnly:!0})],ds.prototype,"effectiveMinScale",null),h([p({readOnly:!0})],ds.prototype,"effectiveMaxScale",null),h([p({readOnly:!0})],ds.prototype,"effectiveMinZoom",null),h([p({readOnly:!0})],ds.prototype,"effectiveMaxZoom",null),h([p({types:jFe,value:null})],ds.prototype,"geometry",null),h([p({type:[Yt]})],ds.prototype,"lods",void 0),h([p()],ds.prototype,"minScale",void 0),h([p()],ds.prototype,"maxScale",void 0),h([p()],ds.prototype,"minZoom",void 0),h([p()],ds.prototype,"maxZoom",void 0),h([p()],ds.prototype,"rotationEnabled",void 0),h([p()],ds.prototype,"snapToZoom",void 0),h([p()],ds.prototype,"view",void 0),h([p({readOnly:!0})],ds.prototype,"version",null),h([p()],ds.prototype,"_defaultLODs",null),h([p({type:Pg})],ds.prototype,"_geometry",null),h([p({type:Cle})],ds.prototype,"_rotation",null),h([p({readOnly:!0,type:$le})],ds.prototype,"_zoom",null),ds=h([ce("esri.views.2d.MapViewConstraints")],ds);const Ole=ds;function UFe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function VFe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Rle(t,e,i,r,s,n,o,a,l,u){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t[4]=n,t[5]=o,t[6]=a,t[7]=l,t[8]=u,t}function kle(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function BFe(t,e){if(t===e){const i=e[1],r=e[2],s=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=r,t[7]=s}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function zFe(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],d=c*o-a*u,f=-c*n+a*l,m=u*n-o*l;let g=i*d+r*f+s*m;return g?(g=1/g,t[0]=d*g,t[1]=(-c*r+s*u)*g,t[2]=(a*r-s*o)*g,t[3]=f*g,t[4]=(c*i-s*l)*g,t[5]=(-a*i+s*n)*g,t[6]=m*g,t[7]=(-u*i+r*l)*g,t[8]=(o*i-r*n)*g,t):null}function GFe(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8];return t[0]=o*c-a*u,t[1]=s*u-r*c,t[2]=r*a-s*o,t[3]=a*l-n*c,t[4]=i*c-s*l,t[5]=s*n-i*a,t[6]=n*u-o*l,t[7]=r*l-i*u,t[8]=i*o-r*n,t}function qFe(t){const e=t[0],i=t[1],r=t[2],s=t[3],n=t[4],o=t[5],a=t[6],l=t[7],u=t[8];return e*(u*n-o*l)+i*(-u*s+o*a)+r*(l*s-n*a)}function G7(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],u=e[6],c=e[7],d=e[8],f=i[0],m=i[1],g=i[2],v=i[3],b=i[4],_=i[5],S=i[6],M=i[7],x=i[8];return t[0]=f*r+m*o+g*u,t[1]=f*s+m*a+g*c,t[2]=f*n+m*l+g*d,t[3]=v*r+b*o+_*u,t[4]=v*s+b*a+_*c,t[5]=v*n+b*l+_*d,t[6]=S*r+M*o+x*u,t[7]=S*s+M*a+x*c,t[8]=S*n+M*l+x*d,t}function xN(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],u=e[6],c=e[7],d=e[8],f=i[0],m=i[1];return t[0]=r,t[1]=s,t[2]=n,t[3]=o,t[4]=a,t[5]=l,t[6]=f*r+m*o+u,t[7]=f*s+m*a+c,t[8]=f*n+m*l+d,t}function Lle(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],u=e[6],c=e[7],d=e[8],f=Math.sin(i),m=Math.cos(i);return t[0]=m*r+f*o,t[1]=m*s+f*a,t[2]=m*n+f*l,t[3]=m*o-f*r,t[4]=m*a-f*s,t[5]=m*l-f*n,t[6]=u,t[7]=c,t[8]=d,t}function HFe(t,e,i){const r=i[0],s=i[1],n=i[2];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t[6]=n*e[6],t[7]=n*e[7],t[8]=n*e[8],t}function WFe(t,e,i){const r=i[0],s=i[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t}function JFe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function ZFe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function YFe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function KFe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function QFe(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=i+i,a=r+r,l=s+s,u=i*o,c=r*o,d=r*a,f=s*o,m=s*a,g=s*l,v=n*o,b=n*a,_=n*l;return t[0]=1-d-g,t[3]=c-_,t[6]=f+b,t[1]=c+_,t[4]=1-u-g,t[7]=m-v,t[2]=f-b,t[5]=m+v,t[8]=1-u-d,t}function XFe(t,e){const i=e[0],r=e[1],s=e[2],n=e[4],o=e[5],a=e[6],l=e[8],u=e[9],c=e[10],d=c*o-a*u,f=-c*n+a*l,m=u*n-o*l,g=i*d+r*f+s*m;if(!g)return null;const v=1/g;return t[0]=d*v,t[1]=(-c*r+s*u)*v,t[2]=(a*r-s*o)*v,t[3]=f*v,t[4]=(c*i-s*l)*v,t[5]=(-a*i+s*n)*v,t[6]=m*v,t[7]=(-u*i+r*l)*v,t[8]=(o*i-r*n)*v,t}function e9e(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],d=e[9],f=e[10],m=e[11],g=e[12],v=e[13],b=e[14],_=e[15],S=i*a-r*o,M=i*l-s*o,x=i*u-n*o,T=r*l-s*a,I=r*u-n*a,$=s*u-n*l,L=c*v-d*g,B=c*b-f*g,z=c*_-m*g,H=d*b-f*v,J=d*_-m*v,K=f*_-m*b;let Q=S*K-M*J+x*H+T*z-I*B+$*L;return Q?(Q=1/Q,t[0]=(a*K-l*J+u*H)*Q,t[1]=(l*z-o*K-u*B)*Q,t[2]=(o*J-a*z+u*L)*Q,t[3]=(s*J-r*K-n*H)*Q,t[4]=(i*K-s*z+n*B)*Q,t[5]=(r*z-i*J-n*L)*Q,t[6]=(v*$-b*I+_*T)*Q,t[7]=(b*x-g*$-_*M)*Q,t[8]=(g*I-v*x+_*S)*Q,t):null}function t9e(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function i9e(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function r9e(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function s9e(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function Ple(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function n9e(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function o9e(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t}function a9e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function l9e(t,e){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],d=e[0],f=e[1],m=e[2],g=e[3],v=e[4],b=e[5],_=e[6],S=e[7],M=e[8],x=$u();return Math.abs(i-d)<=x*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(r-f)<=x*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(s-m)<=x*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(n-g)<=x*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(o-v)<=x*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(a-b)<=x*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(l-_)<=x*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(u-S)<=x*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(c-M)<=x*Math.max(1,Math.abs(c),Math.abs(M))}function u9e(t){const e=$u(),i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8];return Math.abs(1-(i*i+n*n+l*l))<=e&&Math.abs(1-(r*r+o*o+u*u))<=e&&Math.abs(1-(s*s+a*a+c*c))<=e}const c9e=G7,h9e=Ple;Object.freeze(Object.defineProperty({__proto__:null,add:s9e,adjoint:GFe,copy:VFe,determinant:qFe,equals:l9e,exactEquals:a9e,frob:r9e,fromMat2d:KFe,fromMat4:UFe,fromQuat:QFe,fromRotation:ZFe,fromScaling:YFe,fromTranslation:JFe,identity:kle,invert:zFe,isOrthoNormal:u9e,mul:c9e,multiply:G7,multiplyScalar:n9e,multiplyScalarAndAdd:o9e,normalFromMat4:e9e,normalFromMat4Legacy:XFe,projection:t9e,rotate:Lle,scale:HFe,scaleByVec2:WFe,set:Rle,str:i9e,sub:h9e,subtract:Ple,translate:xN,transpose:BFe},Symbol.toStringTag,{value:"Module"}));function ZM(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function d9e(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function p9e(t,e,i,r,s,n,o,a,l){const u=new Float32Array(9);return u[0]=t,u[1]=e,u[2]=i,u[3]=r,u[4]=s,u[5]=n,u[6]=o,u[7]=a,u[8]=l,u}function f9e(t,e){return new Float32Array(t,e,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:d9e,create:ZM,createView:f9e,fromValues:p9e},Symbol.toStringTag,{value:"Module"}));function Nle(){return new Float32Array(2)}function m9e(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function aw(t,e){const i=new Float32Array(2);return i[0]=t,i[1]=e,i}function y9e(t,e){return new Float32Array(t,e,2)}function Fle(){return Nle()}function Dle(){return aw(1,1)}function jle(){return aw(1,0)}function Ule(){return aw(0,1)}const g9e=Fle(),v9e=Dle(),b9e=jle(),w9e=Ule();Object.freeze(Object.defineProperty({__proto__:null,ONES:v9e,UNIT_X:b9e,UNIT_Y:w9e,ZEROS:g9e,clone:m9e,create:Nle,createView:y9e,fromValues:aw,ones:Dle,unitX:jle,unitY:Ule,zeros:Fle},Symbol.toStringTag,{value:"Module"}));function _9e(t){return t instanceof Float32Array&&t.length>=2}function x9e(t){return Array.isArray(t)&&t.length>=2}function NR(t){return _9e(t)||x9e(t)}var SN;const nd=[0,0];let Of=SN=class extends Je{constructor(t){super(t),this._viewpoint2D={center:vs(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Xt,this.id=0,this.inverseTransform=mm(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=mm(),this.transformNoRotation=mm(),this.displayMat3=ZM(),this.displayViewMat3=ZM(),this.viewMat3=ZM(),this.viewMat2d=zae(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}copy(t){const e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=Cc(i,t.viewpoint),this._set("size",JS(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new SN({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return NR(e)?bh(t,e,this.inverseTransform):(nd[0]=e,nd[1]=i,bh(t,nd,this.inverseTransform))}toScreen(t,e,i){return NR(e)?bh(t,e,this.transform):(nd[0]=e,nd[1]=i,bh(t,nd,this.transform))}toScreenNoRotation(t,e,i){return NR(e)?bh(t,e,this.transformNoRotation):(nd[0]=e,nd[1]=i,bh(t,nd,this.transformNoRotation))}getScreenTransform(t,e){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,s=this._get("size");return B7(t,i,s,e,0,r),t}_update(){const{center:t,spatialReference:e,scale:i,rotation:r}=this._viewpoint2D,s=this._get("pixelRatio")||1,n=this._get("size"),o=new Oh({targetGeometry:new Ct(t[0],t[1],e),scale:i,rotation:r});if(this._set("viewpoint",o),!n||!e||!i)return;this.resolution=s_(o),this.rotation=r,this.scale=i,this.spatialReference=e,JS(this.center,t);const a=n[0]!==0?2/n[0]:0,l=n[1]!==0?-2/n[1]:0;Rle(this.displayMat3,a,0,0,0,l,0,-1,1,1);const u=kle(this.viewMat3),c=aw(n[0]/2,n[1]/2),d=aw(-n[0]/2,-n[1]/2),f=v9(r);xN(u,u,c),Lle(u,u,f),xN(u,u,d),G7(this.displayViewMat3,this.displayMat3,u);const m=F7(this.viewMat2d,c);return FC(m,m,f),HS(m,m,d),bFe(this.extent,o,n),z7(this.transform,o,n,s),P7(this.inverseTransform,this.transform),IFe(this.transformNoRotation,o,n,s),this.worldScreenWidth=AFe(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};h([p({readOnly:!0})],Of.prototype,"id",void 0),h([p({value:1,json:{write:!0}})],Of.prototype,"pixelRatio",null),h([p({json:{write:!0}})],Of.prototype,"size",null),h([p()],Of.prototype,"spatialReference",void 0),h([p({type:Oh,json:{write:!0}})],Of.prototype,"viewpoint",null),Of=SN=h([ce("esri.views.2d.ViewState")],Of);const wW=Of;var EN,TN;let qd=EN=class extends Pt{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new EN({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};h([p()],qd.prototype,"left",void 0),h([p()],qd.prototype,"top",void 0),h([p()],qd.prototype,"right",void 0),h([p()],qd.prototype,"bottom",void 0),qd=EN=h([ce("esri.views.2d.PaddedViewState.Padding")],qd);let Nv=TN=class extends wW{constructor(...t){super(...t),this.paddedViewState=new wW,this._updateContent=(()=>{const e=vs();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const s=this.paddedViewState;Mn(e,r.left+r.right,r.top+r.bottom),ZS(e,i,e),JS(s.size,e);const n=s.viewpoint;n&&(this.viewpoint=n)}})(),this.addHandles(st(()=>[this.size,this.padding],()=>this._updateContent(),Cl)),this.padding=new qd,this.size=[0,0]}set padding(t){this._set("padding",t||new qd)}set viewpoint(t){if(t){const e=t.clone();this.paddedViewState.viewpoint=t,$Fe(e,t,this._get("size"),this._get("padding"));const i=this._viewpoint2D,r=e.targetGeometry;i.center[0]=r.x,i.center[1]=r.y,i.rotation=e.rotation,i.scale=e.scale,i.spatialReference=r.spatialReference,this._update()}}clone(){return new TN({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};h([p()],Nv.prototype,"paddedViewState",void 0),h([p({type:qd})],Nv.prototype,"padding",null),h([p()],Nv.prototype,"viewpoint",null),Nv=TN=h([ce("esri.views.2d.PaddedViewState")],Nv);const S9e=Nv;let E9e=class{constructor(e,i){this.item=e,this.controller=i,this.promise=null}},Vle=class{constructor(e){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new HA(e.peeker),this.process=e.process;const i=e.scheduler;e.priority&&ee(i)&&(this._task=i.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}get length(){return this._processingItems.size+this._queue.length}abort(e){const i=this._controllers.get(e);i&&i.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(i=>e.push(i)),this._controllers.clear(),e.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((i,r)=>e(r))}get(e){const i=this._deferreds.get(e);return i?i.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(e,i){const r=this.get(e);if(r)return r;const s=new AbortController;let n=null;i&&(n=$a(i,()=>s.abort()));const o=()=>{const c=this._processingItems.get(e);c&&c.controller.abort(),a(),u.reject(yr())},a=()=>{l.remove(),ee(n)&&n.remove(),this._deferreds.delete(e),this._controllers.delete(e),this._queue.remove(e),this._processingItems.delete(e),this._scheduleNext()},l=qF(s.signal,o),u=lp();return this._deferreds.set(e,u),this._controllers.set(e,s),u.promise.then(a,a),this._queue.push(e),this._scheduleNext(),u.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const e=[];this._processingItems.forEach(i=>e.push(i)),this._processingItems.clear();for(const i of e)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=Pw(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(i))}_processError(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(i))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(Re(e))return;let i;const r=new AbortController,s=new E9e(e,r);this._processingItems.set(e,s);try{i=this.process(e,r.signal)}catch(n){this._processError(s,n)}_p(i)?(s.promise=i,i.then(n=>this._processResult(s,n),n=>this._processError(s,n))):this._processResult(s,i)}get test(){return{update:e=>this.runTask(e)}}};function T9e(t,e){return t.length=0,e.forEach(i=>t.push(i)),t}const FR=new Set,VT=[],B1=new Map,_W=[0,0];let Yp=class extends Pt{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:i}=this;this._queue=new Vle({concurrency:e,process:(r,s)=>{const n=this._keyToItem.get(r);return i(n,{signal:s})},peeker:r=>r.values().next().value})}destroy(){this.clear(),this._queue=Jr(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const i=typeof e=="string"?e:e.id;return this.has(i)&&this._queue.isOngoing(i)}pause(){this._queue.pause()}push(e,i){const r=e.key.id+"-"+i;if(this.has(r))return this.get(r);const s=this._queue.push(r),n=()=>{this._keyToItem.delete(r),this.notifyChange("updating")};return this._keyToItem.set(r,e),s.then(n,n),this.notifyChange("updating"),s}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView;let r=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;e.forEach(c=>{const d=this._keyToItem.get(c),f=this.tileInfoView.getTileScale(d.key);B1.has(f)||(B1.set(f,[]),r=Math.max(f,r),s=Math.min(f,s)),B1.get(f).push(d.key),FR.add(f)});let n=this.state.scale;B1.has(n)||(T9e(VT,FR),VT.sort((c,d)=>c-d),n=VT.reduce((c,d)=>Math.abs(d-n)<Math.abs(c-n)?d:c,VT[0])),n=Math.min(n,r),n=Math.max(n,s);const o=B1.get(n),a=i.getClosestInfoForScale(n),l=a.getColumnForX(this.state.center[0]),u=a.getRowForY(this.state.center[1]);return o.sort((c,d)=>{const f=a.denormalizeCol(c.col,c.world),m=a.denormalizeCol(d.col,d.world);return Math.sqrt((l-f)*(l-f)+(u-c.row)*(u-c.row))-Math.sqrt((l-m)*(l-m)+(u-d.row)*(u-d.row))}),FR.clear(),B1.clear(),o[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView,r=this.state.center;let s,n=Number.POSITIVE_INFINITY;return e.forEach(o=>{const a=this._keyToItem.get(o);i.getTileCoords(_W,a.key);const l=oE(_W,r);l<n&&(n=l,s=a.key)}),s.id}};h([p({constructOnly:!0})],Yp.prototype,"concurrency",void 0),h([p({constructOnly:!0})],Yp.prototype,"process",void 0),h([p()],Yp.prototype,"state",void 0),h([p({constructOnly:!0})],Yp.prototype,"strategy",void 0),h([p({constructOnly:!0})],Yp.prototype,"tileInfoView",void 0),h([p({readOnly:!0})],Yp.prototype,"updating",null),Yp=h([ce("esri.views.2d.tiling.PagedTileQueue")],Yp);let W0=class bg{static getId(e,i,r,s){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${i}/${r}/${s}`}constructor(e,i,r,s){this.set(e,i,r,s)}get key(){return this}get id(){return this.toString()}set id(e){this.set(e)}get hash(){const e=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|e<<8|r}acquire(e,i,r,s){this.set(e,i,r,s)}contains(e){const i=e.level-this.level;return i>=0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new bg(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,i,r,s){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[n,o,a,l]=e.split("/");this.level=parseFloat(n),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+e,this.row=+i,this.col=+r,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new bg(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const e=this.level+1,i=this.row<<1,r=this.col<<1,s=this.world;return[new bg(e,i,r,s),new bg(e,i,r+1,s),new bg(e,i+1,r,s),new bg(e,i+1,r+1,s)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}};W0.pool=new Bm(W0,null,null,25,50);function Kp(t,e){return[t,e]}function Ey(t,e,i){return t[0]=e,t[1]=i,t}function I9e(t,e,i,r,s){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t}const ju=new W0("0/0/0/0");let M9e=class Ble{static create(e,i,r=null){const s=Il(e.spatialReference),n=i.origin||Kp(e.origin.x,e.origin.y),o=Kp(e.size[0]*i.resolution,e.size[1]*i.resolution),a=Kp(-1/0,-1/0),l=Kp(1/0,1/0),u=Kp(1/0,1/0);ee(r)&&(Ey(a,Math.max(0,Math.floor((r.xmin-n[0])/o[0])),Math.max(0,Math.floor((n[1]-r.ymax)/o[1]))),Ey(l,Math.max(0,Math.floor((r.xmax-n[0])/o[0])),Math.max(0,Math.floor((n[1]-r.ymin)/o[1]))),Ey(u,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:c,rows:d}=i;let f,m,g,v;return!r&&c&&d&&(Ey(a,c[0],d[0]),Ey(l,c[1],d[1]),Ey(u,c[1]-c[0]+1,d[1]-d[0]+1)),e.isWrappable?(f=Kp(Math.ceil(Math.round((s.valid[1]-s.valid[0])/i.resolution)/e.size[0]),u[1]),m=Kp(Math.floor((s.origin[0]-n[0])/o[0]),a[1]),g=Kp(f[0]+m[0]-1,l[1]),v=!0):(m=a,g=l,f=u,v=!1),new Ble(i.level,i.resolution,i.scale,n,a,l,u,o,m,g,f,v)}constructor(e,i,r,s,n,o,a,l,u,c,d,f){this.level=e,this.resolution=i,this.scale=r,this.origin=s,this.first=n,this.last=o,this.size=a,this.norm=l,this.worldStart=u,this.worldEnd=c,this.worldSize=d,this.wrap=f}normalizeCol(e){if(!this.wrap)return e;const i=this.worldSize[0];return e<0?i-1-Math.abs((e+1)%i):e%i}denormalizeCol(e,i){return this.wrap?this.worldSize[0]*i+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){return this.origin[0]+e*this.norm[0]}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,i,r=!1){ju.set(i);const s=r?ju.col:this.denormalizeCol(ju.col,ju.world),n=ju.row;return I9e(e,this.getXForColumn(s),this.getYForRow(n+1),this.getXForColumn(s+1),this.getYForRow(n)),e}getTileCoords(e,i,r=!1){ju.set(i);const s=r?ju.col:this.denormalizeCol(ju.col,ju.world);return Array.isArray(e)?Ey(e,this.getXForColumn(s),this.getYForRow(ju.row)):(e.x=this.getXForColumn(s),e.y=this.getYForRow(ju.row)),e}},lw=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}forEach(e,i){const{spans:r,lodInfo:s}=this,{level:n}=s;if(r.length!==0)for(const{row:o,colFrom:a,colTo:l}of r)for(let u=a;u<=l;u++)e.call(i,n,o,s.normalizeCol(u),s.getWorldForColumn(u))}};lw.pool=new Bm(lw);let DR=class{constructor(e,i,r){this.row=e,this.colFrom=i,this.colTo=r}};const Pr=new W0("0/0/0/0");let A9e=class zle{static create(e,i){e[1]>i[1]&&([e,i]=[i,e]);const[r,s]=e,[n,o]=i,a=n-r,l=o-s,u=l!==0?a/l:0,c=(Math.ceil(s)-s)*u,d=(Math.floor(s)-s)*u;return new zle(r,Math.floor(s),Math.ceil(o),u,a<0?c:d,a<0?d:c,a<0?n:r,a<0?r:n)}constructor(e,i,r,s,n,o,a,l){this.x=e,this.ymin=i,this.ymax=r,this.invM=s,this.leftAdjust=n,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const el=[[0,0],[0,0],[0,0],[0,0]],C9e=1e-6;let $9e=class{constructor(e,i=null){this.tileInfo=e,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const r=e.lods.slice();r.sort((n,o)=>o.scale-n.scale);const s=this._lodInfos=r.map(n=>M9e.create(e,n,i));r.forEach((n,o)=>{this._infoByLevel[n.level]=s[o],this._infoByScale[n.scale]=s[o],this.scales[o]=n.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,i,r=!1){Pr.set(i);const s=this._infoByLevel[Pr.level];return s?s.getTileBounds(e,Pr,r):e}getTileCoords(e,i,r=!1){Pr.set(i);const s=this._infoByLevel[Pr.level];return s?s.getTileCoords(e,Pr,r):e}getTileCoverage(e,i=192,r="closest"){const s=r==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),n=lw.pool.acquire(s),o=this._wrap;let a,l,u,c=1/0,d=-1/0;const f=n.spans;el[0][0]=el[0][1]=el[1][1]=el[3][0]=-i,el[1][0]=el[2][0]=e.size[0]+i,el[2][1]=el[3][1]=e.size[1]+i;for(const b of el)e.toMap(b,b),b[0]=s.getColumnForX(b[0]),b[1]=s.getRowForY(b[1]);const m=[];let g=3;for(let b=0;b<4;b++){if(el[b][1]===el[g][1]){g=b;continue}const _=A9e.create(el[b],el[g]);c=Math.min(_.ymin,c),d=Math.max(_.ymax,d),m[_.ymin]===void 0&&(m[_.ymin]=[]),m[_.ymin].push(_),g=b}if(c==null||d==null||d-c>100)return null;let v=[];for(a=c;a<d;){m[a]!=null&&(v=v.concat(m[a])),l=1/0,u=-1/0;for(let b=v.length-1;b>=0;b--){const _=v[b];l=Math.min(l,_.getLeftCol()),u=Math.max(u,_.getRightCol())}if(l=Math.floor(l),u=Math.floor(u),a>=s.first[1]&&a<=s.last[1])if(o)if(s.size[0]<s.worldSize[0]){const b=Math.floor(u/s.worldSize[0]);for(let _=Math.floor(l/s.worldSize[0]);_<=b;_++)f.push(new DR(a,Math.max(s.getFirstColumnForWorld(_),l),Math.min(s.getLastColumnForWorld(_),u)))}else f.push(new DR(a,l,u));else l>s.last[0]||u<s.first[0]||(l=Math.max(l,s.first[0]),u=Math.min(u,s.last[0]),f.push(new DR(a,l,u)));a+=1;for(let b=v.length-1;b>=0;b--){const _=v[b];_.ymax>=a?_.incrRow():v.splice(b,1)}}return n}getTileParentId(e){Pr.set(e);const i=this._infoByLevel[Pr.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(Pr,this._lodInfos[r],Pr),Pr.id)}getTileResolution(e){const i=this._infoByLevel[typeof e=="object"?e.level:e];return i?i.resolution:-1}getTileScale(e){const i=this._infoByLevel[e.level];return i?i.scale:-1}intersects(e,i){Pr.set(i);const r=this._infoByLevel[Pr.level],s=e.lodInfo;if(s.resolution>r.resolution){this._getTileIdAtLOD(Pr,s,Pr);const o=s.denormalizeCol(Pr.col,Pr.world);for(const a of e.spans)if(a.row===Pr.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(s.resolution<r.resolution){const[o,a,l,u]=e.spans.reduce((v,b)=>(v[0]=Math.min(v[0],b.row),v[1]=Math.max(v[1],b.row),v[2]=Math.min(v[2],b.colFrom),v[3]=Math.max(v[3],b.colTo),v),[1/0,-1/0,1/0,-1/0]),c=r.denormalizeCol(Pr.col,Pr.world),d=s.getColumnForX(r.getXForColumn(c)),f=s.getRowForY(r.getYForRow(Pr.row)),m=s.getColumnForX(r.getXForColumn(c+1))-1,g=s.getRowForY(r.getYForRow(Pr.row+1))-1;return!(d>u||m<l||f>a||g<o)}const n=s.denormalizeCol(Pr.col,Pr.world);return e.spans.some(o=>o.row===Pr.row&&o.colFrom<=n&&o.colTo>=n)}normalizeBounds(e,i,r){if(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],this._wrap){const s=Il(this.tileInfo.spatialReference),n=-r*(s.valid[1]-s.valid[0]);e[0]+=n,e[2]+=n}return e}getSmallestInfoForScale(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(e>i[r]+C9e)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(e){const i=this.scales;return this._infoByScale[e]||(e=i.reduce((r,s)=>Math.abs(s-e)<Math.abs(r-e)?s:r,i[0])),this._infoByScale[e]}scaleToLevel(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let r=i.length-1;r>=0;r--)if(e<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-e)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}_getTileIdAtLOD(e,i,r){const s=this._infoByLevel[r.level];return e.set(r),i.resolution<s.resolution?null:(i.resolution===s.resolution||(e.level=i.level,e.col=Math.floor(r.col*s.resolution/i.resolution+.01),e.row=Math.floor(r.row*s.resolution/i.resolution+.01)),e)}};function O9e(t,e){return t.length=0,e.forEach(i=>t.push(i)),t}const jR=new Set,BT=[],z1=new Map,xW=[0,0];let Ld=class extends Pt{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:i,strategy:r}=this;this._queue=new Vle({concurrency:e,process:(s,n)=>{const o=this._keyToItem.get(s);return i(o,{signal:n})},peeker:r==="scale-first"?s=>this._peekByScaleFirst(s):s=>this._peekByCenterFirst(s)})}destroy(){this.clear(),this._queue=Jr(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const i=typeof e=="string"?e:e.id;return this.has(i)&&this._queue.isOngoing(i)}pause(){this._queue.pause()}push(e){const i=e.key.id;if(this._queue.has(i))return this._queue.get(i);const r=this._queue.push(i),s=()=>{this._keyToItem.delete(i),this.notifyChange("updating")};return this._keyToItem.set(i,e),r.then(s,s),this.notifyChange("updating"),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView;let r=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;e.forEach(c=>{const d=this._keyToItem.get(c),f=this.tileInfoView.getTileScale(d.key);z1.has(f)||(z1.set(f,[]),r=Math.max(f,r),s=Math.min(f,s)),z1.get(f).push(d.key),jR.add(f)});let n=this.state.scale;z1.has(n)||(O9e(BT,jR),BT.sort((c,d)=>c-d),n=BT.reduce((c,d)=>Math.abs(d-n)<Math.abs(c-n)?d:c,BT[0])),n=Math.min(n,r),n=Math.max(n,s);const o=z1.get(n),a=i.getClosestInfoForScale(n),l=a.getColumnForX(this.state.center[0]),u=a.getRowForY(this.state.center[1]);return o.sort((c,d)=>{const f=a.denormalizeCol(c.col,c.world),m=a.denormalizeCol(d.col,d.world);return Math.sqrt((l-f)*(l-f)+(u-c.row)*(u-c.row))-Math.sqrt((l-m)*(l-m)+(u-d.row)*(u-d.row))}),jR.clear(),z1.clear(),o[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView,r=this.state.center;let s,n=Number.POSITIVE_INFINITY;return e.forEach(o=>{const a=this._keyToItem.get(o);i.getTileCoords(xW,a.key);const l=oE(xW,r);l<n&&(n=l,s=a.key)}),s.id}};h([p({constructOnly:!0})],Ld.prototype,"concurrency",void 0),h([p({constructOnly:!0})],Ld.prototype,"process",void 0),h([p()],Ld.prototype,"state",void 0),h([p({constructOnly:!0})],Ld.prototype,"strategy",void 0),h([p({constructOnly:!0})],Ld.prototype,"tileInfoView",void 0),h([p({readOnly:!0})],Ld.prototype,"updating",null),Ld=h([ce("esri.views.2d.tiling.TileQueue")],Ld);const $ft=Ld;let R9e=class{constructor(e,i,r){this.maxSize=e,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const i=this._tilePerId.get(e);if(!i)return;const r=i.key.level,s=this._tileKeysPerLevel[r];SW(this._tilePerId,e);for(let n=0;n<s.length;n++)if(s[n].id===e){s.splice(n,1);break}return i.visible=!0,i}add(e){e.visible=!1;const i=e.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,e);const s=i.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(i)}prune(e,i,r){let s=this._tilePerId.size;if(s<=this.maxSize)return;let n=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&n>=0;)n!==e&&(s=this._pruneAroundCenterTile(s,i,r,n)),n--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,i,r,e))}_pruneAroundCenterTile(e,i,r,s){const n=this._tileKeysPerLevel[s];if(!n||n.length===0)return e;const{size:o,origin:a}=this._tileInfoView.tileInfo,l=r*o[0],u=r*o[1],c=[0,0],d=[0,0];for(n.sort((f,m)=>(c[0]=a.x+l*(f.col+.5),c[1]=a.y-u*(f.row+.5),d[0]=a.x+l*(m.col+.5),d[1]=a.y-u*(m.row+.5),A5(c,i)-A5(d,i)));n.length>0;){const f=n.pop();if(this._removeTile(f.id),--e===this.maxSize)break}return e}_removeTile(e){const i=this._tilePerId.get(e);this._removedFunc&&i&&this._removedFunc(i),SW(this._tilePerId,e)}};function SW(t,e){t.delete(e)}const Ty=new W0(0,0,0,0),Gl=new Map,G1=[],zT=[];let Rft=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.resampling=e.resampling==null||!!e.resampling,e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new R9e(e.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(e){const{resampling:i,tileIndex:r}=this,s=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.coveragePolicy);if(zT.length=0,G1.length=0,Gl.clear(),!s)return;const{minScale:n,maxScale:o}=this.tileInfoView.tileInfo,{spans:a,lodInfo:l}=s,{level:u}=l,{scale:c,center:d,resolution:f}=e.state,m=!e.stationary&&c>this._previousScale;if(this._previousScale=c,this.tiles.length=0,!i&&(c>n||c<o))return this.tiles.length=0,Gl.clear(),r.forEach(_=>{this.releaseTile(_)}),r.clear(),zT.length=0,G1.length=0,Gl.clear(),lw.pool.release(s),!0;r.forEach(_=>_.visible=!0);let g=0,v=0;if(a.length>0)for(const{row:_,colFrom:S,colTo:M}of a)for(let x=S;x<=M;x++){g++;const T=Ty.set(u,_,l.normalizeCol(x),l.getWorldForColumn(x)).id;if(r.has(T)){const I=r.get(T);I.isReady?(Gl.set(T,I),v++):m||this._addParentTile(T,Gl)}else{let I;if(this._tileCache&&this._tileCache.has(T)){if(I=this._tileCache.pop(T),this.tileIndex.set(T,I),I.isReady){Gl.set(T,I),v++;continue}}else I=this.acquireTile(Ty),this.tileIndex.set(T,I);m||this._addParentTile(T,Gl)}}const b=v===g;r.forEach((_,S)=>{if(Ty.set(S),Gl.has(S))return;const M=this.tileInfoView.intersects(s,Ty),x=this.cachePolicy==="purge"?Ty.level!==u:Ty.level>u;!M||!m&&b?!x&&M||G1.push(S):_.isReady?x&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Ty,u)?G1.push(S):zT.push(S):x&&G1.push(S)});for(const _ of zT){const S=r.get(_);S&&S.isReady&&Gl.set(_,S)}for(const _ of G1){const S=r.get(_);this._tileCache?this._tileCache.add(S):this.releaseTile(S),r.delete(_)}return Gl.forEach(_=>this.tiles.push(_)),r.forEach(_=>{Gl.has(_.key.id)||(_.visible=!1)}),this._tileCache&&this._tileCache.prune(u,d,f),lw.pool.release(s),Gl.clear(),b}clear(e=!0){const{tileIndex:i}=this;e&&i.forEach(r=>{this.releaseTile(r)}),i.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,i){let r=e,s=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(s=this.tileIndex.get(r),s&&s.isReady){i.has(s.key.id)||i.set(s.key.id,s);break}}else if(this._tileCache&&this._tileCache.has(r)&&(s=this._tileCache.pop(r),this.tileIndex.set(r,s),s&&s.isReady)){i.has(s.key.id)||i.set(s.key.id,s);break}}_hasReadyAncestor(e,i){const r=Su();this.tileInfoView.getTileBounds(r,e,!0);for(const s of this.tileIndex.values())if(s.isReady&&s.key.level>=i&&s.key.level<e.level){const n=Su();if(this.tileInfoView.getTileBounds(n,s.key,!0),c_e(n,r))return!0}return!1}};function q7(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}let EW=class extends wn{constructor(e,i){super(!0),this._view=e,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(e,i){q7(e.data,"primary")&&(e.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},k9e=class extends wn{constructor(e,i,r){super(!0),this.view=e,this.pointerType=i,this.registerIncoming("double-tap-drag",r,s=>this._handleDoubleTapDrag(s))}_handleDoubleTapDrag(e){const{data:i}=e,{pointerType:r}=i;if(r!==this.pointerType)return;e.stopPropagation();const{action:s,delta:n}=i,{view:o}=this,{mapViewNavigation:a}=o;switch(s){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=n,a.begin();break}case"update":{if(this._previousDelta.y===n.y)return;this._previousDelta=n;const l=1.015**n.y,u=this._startScale*l,c=u/this._currentScale;a.setViewpointImmediate(c),this._currentScale=u;break}case"end":{const{constraints:l}=o,{effectiveLODs:u,snapToZoom:c}=l;if(!c||!u)return void a.end();const d=l.snapScale(this._currentScale),f=(n.y>0?Math.max(d,l.snapToPreviousScale(this._startScale)):Math.min(d,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(f);break}}}},UC=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const i=e.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){this._startEvent=e,this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},L9e=class extends wn{constructor(e,i,r){super(!0),this.view=e,this.pointerAction=i,this.registerIncoming("drag",r,s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new UC({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&q7(r.data,this.pointerAction)})}_handleDrag(e){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},P9e=class extends wn{constructor(e,i,r){super(!0),this._view=e,this.pointerAction=i;const s=this._view.mapViewNavigation;this._dragEventSeparator=new UC({start:(n,o)=>{s.rotate.begin(this._view,o.data),o.stopPropagation()},update:(n,o)=>{s.rotate.update(this._view,o.data),o.stopPropagation()},end:(n,o)=>{s.rotate.end(),o.stopPropagation()},condition:(n,o)=>n===1&&q7(o.data,this.pointerAction)}),this.registerIncoming("drag",r,n=>this._dragEventSeparator.handle(n))}};function Uu(t){let e=t*t;return t<0&&(e*=-1),e}function N9e(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function F9e(t,e,i){const r=i,s=t.state,n=t.device,o=e.tiltDirection==="forward-down"?1:-1,a=1;return n.deviceType==="standard"?(r.translation[0]=Uu(s.axes[0]),r.translation[1]=Uu(s.axes[1]),r.translation[2]=Uu(s.buttons[7])-Uu(s.buttons[6]),r.heading=Uu(s.axes[2]),r.tilt=Uu(s.axes[3])):n.deviceType==="spacemouse"&&(r.translation[0]=1.2*Uu(s.axes[0]),r.translation[1]=1.2*Uu(s.axes[1]),r.translation[2]=2*-Uu(s.axes[2]),r.heading=1.2*Uu(s.axes[5]),r.tilt=1.2*Uu(s.axes[3])),r.tilt*=o,w9(r.translation,r.translation,a),r}function D9e(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let j9e=class extends wn{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new Ao,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([st(()=>this._view.navigation.gamepad?.enabled,i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=Bb({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},Fi)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const i=this._view.navigation.gamepad.device;i&&e.data.device!==i||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,N9e(this._transformation)):(this._currentDevice=e.data.device,F9e(e.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(e){const i=this._transformation;if(D9e(i))return;const r=this._view.viewpoint.clone(),s=this._view.navigation.gamepad.velocityFactor,n=V9e*s*e;jC(r,r,[i.translation[0]*n,-i.translation[1]*n]);const o=1+i.translation[2]*B9e*e,a=this._view.constraints.rotationEnabled?-i.heading*U9e*e:0,l=this._view.size,u=[l[0]/2,l[1]];Ile(r,r,o,a,u,l);const c=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=c}};const U9e=.06,V9e=.7,B9e=6e-4;let z9e=class extends wn{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._pressed=!1,this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",r,s=>this._handleKeyUp(s)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const r=this._keyMap[e.data.key];if(this._pressed=r!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),r){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}},G9e=class extends wn{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",r,s=>this._handleKeyUp(s)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const r=e.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection[e.data.key];if(this._pressed=s!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}};var ib;(function(t){t[t.IN=0]="IN",t[t.OUT=1]="OUT"})(ib||(ib={}));let q9e=class extends wn{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),i.zoomIn.forEach(s=>this._keysToZoomAction[s]=ib.IN),i.zoomOut.forEach(s=>this._keysToZoomAction[s]=ib.OUT)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const i=e.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=e.data;if(!(r in this._keysToZoomAction))return;const s=this._keysToZoomAction[r],{mapViewNavigation:n}=this.view;let o=null;switch(s){case ib.IN:o=n.zoomIn();break;case ib.OUT:o=n.zoomOut();break;default:return}n.begin(),o.then(()=>n.end()),e.stopPropagation()}};const H9e=.6;let W9e=class extends wn{constructor(e,i){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(e){if(!this._view.navigation.mouseWheelZoomEnabled||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:s,deltaY:n}=e.data,o=1/H9e**(1/60*n),a=i.zoom(o,[r,s]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}},J9e=class extends wn{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new UC({start:(r,s)=>{i.pinch.begin(this.view,s.data),s.stopPropagation()},update:(r,s)=>{i.pinch.update(this.view,s.data),s.stopPropagation()},end:(r,s)=>{i.pinch.end(this.view),s.stopPropagation()},condition:r=>r>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function TW(t){const e=t.native;return e?{buttons:e.buttons.map(i=>i.pressed?i.value?i.value:1:0),axes:e.axes.map(i=>K9e(i,t.axisThreshold))}:{buttons:[],axes:[]}}function Z9e(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==e.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==e.buttons[i])return!1;return!0}function Y9e(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function K9e(t,e){const i=Math.abs(t);return i<e?0:Math.sign(t)*(i-e)/(1-e)}let Q9e=class{constructor(e,i){this._element=e,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=n=>{this._connectGamepad(n.gamepad)},this._onDisconnectGamepad=n=>{const o=n.gamepad,a=o.index,l=this._inputDevices[a];l&&(this._emitGamepadEvent(o,TW(l),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,s=window.isSecureContext;this.supported=r&&s,this.supported&&(this._forEachGamepad(n=>this._connectGamepad(n)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const i=new D7(e);i.deviceType!=="unknown"&&(this._inputDevices[e.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=Bb({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!i;this._forEachGamepad(s=>{const n=this._inputDevices[s.index];if(!n)return;const o=this._latestUpdate[s.index],a=TW(n),l=r||Y9e(a);o&&(o.timestamp===s.timestamp||!o.active&&l||Z9e(o.state,a))||this._emitGamepadEvent(s,a,!l)})}_forEachGamepad(e){const i=window.navigator.getGamepads();for(let r=0;r<i.length;r++){const s=i[r];this._validate(s)&&e(s)}}_emitGamepadEvent(e,i,r){const s=this._latestUpdate[e.index],n=s&&s.active;if(!n&&!r)return;const o=!n&&r?"start":n&&r?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[e.index],state:i,action:o})}_validate(e){if(!e||!e.connected)return!1;for(let i=0;i<e.axes.length;i++)if(isNaN(e.axes[i]))return!1;return!0}};const IW=Ze("edge"),X9e=Ze("chrome"),eDe=Ze("ff"),tDe=Ze("safari"),MW="esri-view-surface",q1={touchNone:`${MW}--touch-none`,touchPan:`${MW}--touch-pan`};let Gle=class qle{constructor(e,i){this._input=i,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new Q9e(e,this._input),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>{this._releasePointerCaptureSafe(e)}),this._gamepadSource=Jr(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const i in this._active)if(!e||!e.has(i)){const r=this._active[i];this._element.removeEventListener(UR[i],r),delete this._active[i]}e&&e.forEach(i=>{if(!this._active[i]&&UR[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(UR[i],r),this._active[i]=r}}),this._gamepadSource.hasEventListeners=e?.has("gamepad")??!1}setPointerCapture(e,i){i?(this._element.setPointerCapture(e.pointerId),this._activePointerCaptures.add(e.pointerId)):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?q1.touchNone:q1.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?q1.touchPan:q1.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(q1.touchNone),this._element.classList.remove(q1.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,i){const r=rle(this._element,e);return qle.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(e,i){const r=z6e(i);r&&e==="key-up"&&this._keyDownState.delete(r);const s={native:i,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&e==="key-down"&&this._keyDownState.add(s.key),this._callback(e,s)}_handlePointer(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(e,r)}_handlePointerPreventDefault(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(e,r)}_handleMouseWheel(e,i){let r=i.deltaY;switch(i.deltaMode){case 0:IW&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}IW?r*=.7:X9e||tDe?r*=.6:eDe&&(r*=1.375);const s=100,n=Math.abs(r);n>s&&(r=r/n*200/(1+Math.exp(-.02*(n-s))));const o=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(e,o)}_handlePointerCaptureLost(e,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(e,i)}_handleDefault(e,i){const r={native:i};i.preventDefault(),this._callback(e,r)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}};Gle.test={disableSubpixelCoordinates:!1};const UR={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let iDe=class extends wn{constructor(){super(!0),this.registerIncoming("context-menu",e=>{e.data.native.preventDefault()})}};function H7(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function rDe(t,e){const i=e.x-t.x,r=e.y-t.y;return Math.sqrt(i*i+r*r)}function sDe(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:pn()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[M,x]=t,[T,I]=[x.x-M.x,x.y-M.y];return e.radius=Math.sqrt(T*T+I*I)/2,e.center.x=(M.x+x.x)/2,e.center.y=(M.y+x.y)/2,e}let i=0,r=0;for(let M=0;M<t.length;M++)i+=t[M].x,r+=t[M].y;i/=t.length,r/=t.length;const s=t.map(M=>M.x-i),n=t.map(M=>M.y-r);let o=0,a=0,l=0,u=0,c=0,d=0,f=0;for(let M=0;M<s.length;M++){const x=s[M],T=n[M],I=x*x,$=T*T;o+=I,a+=$,l+=x*T,u+=I*x,c+=$*T,d+=x*$,f+=T*I}const m=.5*(u+d),g=.5*(c+f),v=o*a-l*l,b=(m*a-g*l)/v,_=(o*g-l*m)/v,S=pn(b+i,_+r);return{radius:Math.sqrt(b*b+_*_+(o+a)/t.length),center:S}}function v0(t){const{native:e}=t,{pointerId:i,button:r,pointerType:s}=e;return s==="mouse"?`${i}:${r}`:`${s}`}const fu={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};let nDe=class extends wn{constructor(e=fu.maximumDoubleClickDelay,i=fu.maximumDoubleClickDistance,r=fu.maximumDoubleTouchDelay,s=fu.maximumDoubleTouchDistance,n=I3){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=s,this._clock=n,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=gs(e.doubleClickTimer))}get hasPendingInputs(){return j4(this._pointerState,e=>e.doubleClickTimer!=null)}_clearDoubleClickTimer(e,i){const r=this._pointerState.get(e);r&&(r.doubleClickTimer=gs(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const i=this._pointerState.get(e);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_getPointerId(e){const{pointerId:i,pointerType:r,button:s}=e.native;return r==="mouse"?`${i}:${s}`:`${r}`}_handleImmediateClick(e){const i=e.data,{pointerType:r}=i.native,s=this._getPointerId(i);if(!this._pointerState.has(s))return void this._startClick(e);const n=this._pointerState.get(s),{data:o,modifiers:a}=n.event,l=r==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;H7(o,i)>l?(this._clearDoubleClickTimer(s,!0),this._startClick(e)):(this._clearDoubleClickTimer(s,!1),n.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(e){const i=v0(e.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(e){const{data:i}=e,{native:{pointerType:r}}=i,s=v0(i),n=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(s),n),a=1;this._pointerState.set(s,{event:e,doubleClickTimer:o,pointerDownCount:a}),this.refreshHasPendingInputs()}},oDe=class extends wn{constructor(e=fu.maximumDoubleClickDelay,i=fu.maximumDoubleClickDistance,r=fu.maximumDoubleTouchDelay,s=fu.maximumDoubleTouchDistance,n=I3){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=s,this._clock=n,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=pn(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new UC({start:(o,a)=>this._dragStart(o,a),update:(o,a)=>this._dragUpdate(a),end:(o,a)=>this._dragEnd(a)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=gs(e.doubleTapTimeout)})}get hasPendingInputs(){return j4(this._pointerState,e=>e.doubleTapTimeout!=null)}_clearPointerDown(e){const i=this._pointerState.get(e);i&&(i.doubleTapTimeout=gs(i.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_createDoubleTapDragData(e,i,r){const{button:s,buttons:n,pointer:o,pointers:a,pointerType:l,timestamp:u}=r;return{action:e,delta:i,button:s,buttons:n,pointer:o,pointers:a,pointerType:l,timestamp:u}}_dragStart(e,i){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:s}=i,{center:n}=r;this._dragStartCenter=n;const o=this._createDoubleTapDragData("begin",pn(0,0),r);this._doubleTapDrag.emit(o,void 0,s),i.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:s}=i,n=pn(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("update",n,i);this._doubleTapDrag.emit(o,void 0,r),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:s}=i,n=pn(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("end",n,i);this._doubleTapDrag.emit(o,void 0,r),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:i}=e,r=v0(i),s=this._pointerState.get(r),{pointerType:n}=i.native;if(s){const o=n==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(r),H7(s.event.data,i)>o?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:i}=e,{pointerType:r}=i.native,s=v0(i),n=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(s),n);this._pointerState.set(s,{event:e,doubleTapTimeout:o}),this.refreshHasPendingInputs()}},aDe=class extends wn{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,i,r,s){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:s,pointers:lDe(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(e){const i=e.native.pointerId,r=GT(this._activePointerMap).angle,s={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,s);const n=YM(s,Hle(this._activePointerMap));s.initialAngle=n,s.lastAngle=n,this._updatePointerAngles(r)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const i=e.native.pointerId,r=this._activePointerMap.get(i);r?r.event=e:this._addPointer(e)}_removePointer(e){const i=GT(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(i)}_updatePointerAngles(e){const i=GT(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=YM(r,i)-e,r.lastAngle=YM(r,i)-e})}_emitEvent(e,i,r){const s=GT(this._activePointerMap);this._drag.emit(this._createPayload(e,i,s,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const i=e.data.native.pointerId,r=e.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const i=e.data,r=i.currentEvent,s=e.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,s)):(this._addPointer(r),this._emitEvent("added",r,s),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,s))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function Hle(t){const e=[];return t.forEach(i=>{e.push(pn(i.event.x,i.event.y))}),sDe(e)}function GT(t){const e=Hle(t);let i=0;return t.forEach(r=>{let s=YM(r,e),n=s-r.lastAngle;for(;n>Math.PI;)n-=2*Math.PI;for(;n<-Math.PI;)n+=2*Math.PI;s=r.lastAngle+n,r.lastAngle=s;const o=s-r.initialAngle;i+=o}),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function lDe(t){const e=new Map;return t.forEach((i,r)=>e.set(r,i.event)),e}function YM(t,e){const i=t.event,r=i.x-e.center.x,s=i.y-e.center.y;return Math.atan2(s,r)}var AW;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t[t.Undefined=-1]="Undefined"})(AW||(AW={}));let uDe=class extends wn{constructor(e=fu.maximumDoubleClickDelay,i=fu.maximumDoubleClickDistance,r=fu.maximumDoubleTouchDelay,s=fu.maximumDoubleTouchDistance,n=I3){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=s,this._clock=n,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=v0(i);if(!this._pointerState.has(r)){const s={downButton:i.native.button,immediateDoubleClick:null};this._pointerState.set(r,s),this.startCapturingPointer(i.native)}}_handlePointerUp(e){const i=e.data,r=v0(i),s=this._pointerState.get(r);if(s&&s.downButton===i.native.button){const n=s.immediateDoubleClick;if(n){n.timeoutHandle.remove();const o=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;H7(n,e.data)>o?this._startImmediateDoubleClick(e,s):(this._immediateDoubleClick.emit(e.data,void 0,n.modifiers),this._removeState(i))}else this._startImmediateDoubleClick(e,s)}}_startImmediateDoubleClick(e,i){const r=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;i.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),r)}}_removeState(e){const i=v0(e);this._pointerState.delete(i),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}};const K_={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};let cDe=class extends wn{constructor(e=K_.maximumClickDelay,i=K_.movementUntilMouseDrag,r=K_.movementUntilPenDrag,s=K_.movementUntilTouchDrag,n=K_.holdDelay,o=I3){super(!1),this._maximumClickDelay=e,this._movementUntilMouseDrag=i,this._movementUntilPenDrag=r,this._movementUntilTouchDrag=s,this._holdDelay=n,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",a=>{this._handlePointerLoss(a,"pointer-up")}),this.registerIncoming("pointer-capture-lost",a=>{this._handlePointerLoss(a,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",a=>{this._handlePointerLoss(a,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=gs(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=i.native.pointerId;let s=null;this._pointerState.size===0&&(s=this._clock.setTimeout(()=>{const o=this._pointerState.get(r);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,e.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._holdDelay));const n={startEvent:i,previousEvent:i,startTimestamp:e.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:s,modifiers:new Set};this._pointerState.set(r,n),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_createPointerDragData(e,i,r){return{action:e,startEvent:i.startEvent,previousEvent:i.previousEvent,currentEvent:r}}_handlePointerMove(e){const i=e.data,r=i.native.pointerId,s=this._pointerState.get(r);s&&(s.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",s,i),void 0,s.modifiers):rDe(i,s.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(e),s.previousEvent=i)}_getDragThreshold(e){switch(e){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(e){const i=e.data,r=i.native.pointerId;this._pointerState.forEach(s=>{s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging||(s.modifiers=e.modifiers,s.isDragging=!0,r===s.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",s,i)):this._pointerDrag.emit(this._createPointerDragData("start",s,s.previousEvent),e.timestamp))})}_handlePointerLoss(e,i){const r=e.data,s=r.native.pointerId,n=this._pointerState.get(s);n&&(n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",n,i==="pointer-up"?r:n.previousEvent),void 0,n.modifiers):i==="pointer-up"&&n.downButton===r.native.button&&e.timestamp-n.startTimestamp<=this._maximumClickDelay&&!n.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(s),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};const qT={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let wg=class extends Pt{constructor(){super(...arguments),this._handles=new Ao}initialize(){const e=()=>this.view?.ready;this._handles.add([Nl(()=>!e(),()=>this._disconnect()),Nl(e,()=>this._connect())])}destroy(){this._handles=Jr(this._handles),this._disconnect()}get latestPointerType(){return this._inputManager?.latestPointerType}get latestPointerLocation(){return this._inputManager?.latestPointerLocation}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=Jr(this._inputManager)}_connect(){const e=this.view.surface,i=new Gle(e,this.view.input),r=[new uDe,new cDe,new nDe,new aDe(this.view.navigation),new oDe],s=new sh({eventSource:i,recognizers:r});s.installHandlers("prevent-context-menu",[new iDe],fm.INTERNAL),s.installHandlers("navigation",[new J9e(this.view),new j9e(this.view),new W9e(this.view),new EW(this.view),new EW(this.view,[qT.counter]),new L9e(this.view,"primary"),new z9e(this.view,qT.pan),new q9e(this.view,qT.zoom),new G9e(this.view,qT.rotate),new P9e(this.view,"secondary"),new k9e(this.view,"touch")],fm.INTERNAL),this.view.viewEvents.connect(s),this._source=i,this._inputManager=s,st(()=>this.view?.navigation?.browserTouchPanEnabled,n=>{this._source&&(this._source.browserTouchPanningEnabled=!n)},Fi)}get test(){return{inputManager:this._inputManager}}};h([p()],wg.prototype,"view",void 0),h([p()],wg.prototype,"latestPointerType",null),h([p()],wg.prototype,"latestPointerLocation",null),h([p()],wg.prototype,"multiTouchActive",null),wg=h([ce("esri.views.2d.input.MapViewInputManager")],wg);const hDe=wg;var CW,$W,OW,IN={},dDe={get exports(){return IN},set exports(t){IN=t}};CW=dDe,$W=function(){function t(s,n,o,a,l){e(s,n,o||0,a||s.length-1,l||r)}function e(s,n,o,a,l){for(;a>o;){if(a-o>600){var u=a-o+1,c=n-o+1,d=Math.log(u),f=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*f*(u-f)/u)*(c-u/2<0?-1:1);e(s,n,Math.max(o,Math.floor(n-c*f/u+m)),Math.min(a,Math.floor(n+(u-c)*f/u+m)),l)}var g=s[n],v=o,b=a;for(i(s,o,n),l(s[a],g)>0&&i(s,o,a);v<b;){for(i(s,v,b),v++,b--;l(s[v],g)<0;)v++;for(;l(s[b],g)>0;)b--}l(s[o],g)===0?i(s,o,b):i(s,++b,a),b<=n&&(o=b+1),n<=b&&(a=b-1)}}function i(s,n,o){var a=s[n];s[n]=s[o],s[o]=a}function r(s,n){return s<n?-1:s>n?1:0}return t},(OW=$W())!==void 0&&(CW.exports=OW);const pDe=IN;function $5(t,e){if(!(this instanceof $5))return new $5(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function fDe(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function H1(t,e){cx(t,0,t.children.length,e,t)}function cx(t,e,i,r,s){s||(s=Fv(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var n,o=e;o<i;o++)n=t.children[o],hx(s,t.leaf?r(n):n);return s}function hx(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function RW(t,e){return t.minX-e.minX}function kW(t,e){return t.minY-e.minY}function VR(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function HT(t){return t.maxX-t.minX+(t.maxY-t.minY)}function mDe(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function yDe(t,e){var i=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),s=Math.min(t.maxX,e.maxX),n=Math.min(t.maxY,e.maxY);return Math.max(0,s-i)*Math.max(0,n-r)}function BR(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function WT(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Fv(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function LW(t,e,i,r,s){for(var n,o=[e,i];o.length;)(i=o.pop())-(e=o.pop())<=r||(n=e+Math.ceil((i-e)/r/2)*r,pDe(t,n,e,i,s),o.push(e,n,n,i))}$5.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],r=this.toBBox;if(!WT(t,e))return i;for(var s,n,o,a,l=[];e;){for(s=0,n=e.children.length;s<n;s++)o=e.children[s],WT(t,a=e.leaf?r(o):o)&&(e.leaf?i.push(o):BR(t,a)?this._all(o,i):l.push(o));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!WT(t,e))return!1;for(var r,s,n,o,a=[];e;){for(r=0,s=e.children.length;r<s;r++)if(n=e.children[r],WT(t,o=e.leaf?i(n):n)){if(e.leaf||BR(t,o))return!0;a.push(n)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var s=this.data;this.data=r,r=s}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Fv([]),this},remove:function(t,e){if(!t)return this;for(var i,r,s,n,o=this.data,a=this.toBBox(t),l=[],u=[];o||l.length;){if(o||(o=l.pop(),r=l[l.length-1],i=u.pop(),n=!0),o.leaf&&(s=fDe(t,o.children,e))!==-1)return o.children.splice(s,1),l.push(o),this._condense(l),this;n||o.leaf||!BR(o,a)?r?(i++,o=r.children[i],n=!1):o=null:(l.push(o),u.push(i),i=0,r=o,o=o.children[0])}return this},toBBox:function(t){return t},compareMinX:RW,compareMinY:kW,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,r){var s,n=i-e+1,o=this._maxEntries;if(n<=o)return H1(s=Fv(t.slice(e,i+1)),this.toBBox),s;r||(r=Math.ceil(Math.log(n)/Math.log(o)),o=Math.ceil(n/Math.pow(o,r-1))),(s=Fv([])).leaf=!1,s.height=r;var a,l,u,c,d=Math.ceil(n/o),f=d*Math.ceil(Math.sqrt(o));for(LW(t,e,i,f,this.compareMinX),a=e;a<=i;a+=f)for(LW(t,a,u=Math.min(a+f-1,i),d,this.compareMinY),l=a;l<=u;l+=d)c=Math.min(l+d-1,u),s.children.push(this._build(t,l,c,r-1));return H1(s,this.toBBox),s},_chooseSubtree:function(t,e,i,r){for(var s,n,o,a,l,u,c,d;r.push(e),!e.leaf&&r.length-1!==i;){for(c=d=1/0,s=0,n=e.children.length;s<n;s++)l=VR(o=e.children[s]),(u=mDe(t,o)-l)<d?(d=u,c=l<c?l:c,a=o):u===d&&l<c&&(c=l,a=o);e=a||e.children[0]}return e},_insert:function(t,e,i){var r=this.toBBox,s=i?t:r(t),n=[],o=this._chooseSubtree(s,this.data,e,n);for(o.children.push(t),hx(o,s);e>=0&&n[e].children.length>this._maxEntries;)this._split(n,e),e--;this._adjustParentBBoxes(s,n,e)},_split:function(t,e){var i=t[e],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);var n=this._chooseSplitIndex(i,s,r),o=Fv(i.children.splice(n,i.children.length-n));o.height=i.height,o.leaf=i.leaf,H1(i,this.toBBox),H1(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(t,e){this.data=Fv([t,e]),this.data.height=t.height+1,this.data.leaf=!1,H1(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var r,s,n,o,a,l,u,c;for(l=u=1/0,r=e;r<=i-e;r++)o=yDe(s=cx(t,0,r,this.toBBox),n=cx(t,r,i,this.toBBox)),a=VR(s)+VR(n),o<l?(l=o,c=r,u=a<u?a:u):o===l&&a<u&&(u=a,c=r);return c},_chooseSplitAxis:function(t,e,i){var r=t.leaf?this.compareMinX:RW,s=t.leaf?this.compareMinY:kW;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,s)&&t.children.sort(r)},_allDistMargin:function(t,e,i,r){t.children.sort(r);var s,n,o=this.toBBox,a=cx(t,0,e,o),l=cx(t,i-e,i,o),u=HT(a)+HT(l);for(s=e;s<i-e;s++)n=t.children[s],hx(a,t.leaf?o(n):n),u+=HT(a);for(s=i-e-1;s>=e;s--)n=t.children[s],hx(l,t.leaf?o(n):n),u+=HT(l);return u},_adjustParentBBoxes:function(t,e,i){for(var r=i;r>=0;r--)hx(e[r],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)t[i].children.length===0?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():H1(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};let PW=class Wle{constructor(e,i){this.key=new W0(0,0,0,0),this.bounds=Su(),this.objectIds=new Set,this.key.set(i);const r=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.scale=r.scale,this.level=r.level}get id(){return this.key.id}get extent(){return Xt.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const e=this.key.getChildKeys(),i=Zo.acquire();for(let r=0;r<e.length;r++)i[r]=new Wle(this.tileInfoView,e[r]);return i}getQuantizationParameters(){return Oie.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const Iy={added:[],removed:[]},zR=new Set,gDe=new W0(0,0,0,0);let vDe=class extends xp{constructor(e){super(),this._tiles=new Map,this._index=$5(9,Ze("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const i={added:[],removed:[]};for(const r of e.added)if(!this.has(r)){const s=new PW(this.tileScheme,r);this._tiles.set(r,s),this._index.insert(s),i.added.push(s)}for(const r of e.removed)if(this.has(r)){const s=this.get(r);this._tiles.delete(r),this._index.remove(s),i.removed.push(s)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(e){const i=this.tileScheme.getTileCoverage(e,0);if(!i)return;const{spans:r,lodInfo:s}=i,{level:n}=s;if(r.length>0)for(const{row:o,colFrom:a,colTo:l}of r)for(let u=a;u<=l;u++){const c=gDe.set(n,o,s.normalizeCol(u),s.getWorldForColumn(u)).id;if(zR.add(c),!this.has(c)){const d=new PW(this.tileScheme,c);this._tiles.set(c,d),this._index.insert(d),this.tiles.push(d),Iy.added.push(d)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];zR.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),Iy.removed.push(a))}(Iy.added.length||Iy.removed.length)&&this.emit("update",Iy),lw.pool.release(i),zR.clear(),Iy.added.length=0,Iy.removed.length=0}},_g=class extends Pt{constructor(){super(...arguments),this.color=new It([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity}};h([p({type:It})],_g.prototype,"color",void 0),h([p({type:It})],_g.prototype,"haloColor",void 0),h([p()],_g.prototype,"haloOpacity",void 0),h([p()],_g.prototype,"fillOpacity",void 0),_g=h([ce("esri.views.2d.support.HighlightOptions")],_g);const Jle=_g,bDe=t=>t.includes("Brush");let Zle=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),bDe(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};function wDe(t,e,i,r,s,n,o,a){t.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let l=null;t.width!=null&&t.height!=null?l=[t.width,t.height]:t.width==null&&t.height!=null?l=[t.height,t.height]:t.width!=null&&t.height==null?l=[t.width,t.width]:t.width==null&&t.height==null&&(l=null);const u=i[0]-(r.left+r.right),c=i[1]-(r.top+r.bottom);let d,f,m=t.area||{x:0,y:0,width:u,height:c};if(l){const g=u/c,v=l[0]/l[1];if(v>g){const b=m.width/v;m={x:m.x,y:Math.round(m.y+(m.height-b)/2),width:m.width,height:Math.round(b)}}else{const b=m.height*v;m={x:Math.round(m.x+(m.width-b)/2),y:m.y,width:Math.round(b),height:m.height}}}else l=[m.width,m.height];return l[0]>m.width?(d=Math.min(l[0]/m.width,e),f=l[0]/m.width/d):(d=1,f=l[0]/m.width),{resolutionScale:d,cropArea:{x:Math.round((m.x+r.left)*d),y:Math.round((m.y+r.top)*d),width:Math.round(m.width*d),height:Math.round(m.height*d)},outputScale:f,format:s,quality:n,children:o,rotation:a}}function _De(t,e,i){const{ctx:r,canvas:s}=Yle(t,i),n=r.getImageData(0,0,t.width,t.height),o=EDe(s,e);return Kle(s),{dataUrl:o,data:n}}function xDe(t,e){const{ctx:i,canvas:r}=Yle(t,e),s=i.getImageData(0,0,t.width,t.height);return Kle(r),s}function Yle(t,e){const i=SDe();e.premultipliedAlpha&&CDe(t),i.width=t.width,i.height=t.height;const r=i.getContext("2d",{willReadFrequently:!0});return r.putImageData(t,0,0),e.flipY&&ADe(r),{ctx:r,canvas:i}}function Kle(t){t.width=0,t.height=0}function SDe(){return Re(GR)&&(GR=document.createElement("canvas")),GR}let GR=null;function EDe(t,e){const i=$De[e.format],r=e.quality/100;return t.toDataURL(i,r)}function TDe(t,e){const i=MDe(t),r=RDe[i];return{format:i,quality:Da(e??r,0,100)}}function IDe(t,e){return e/Math.max(t[0],t[1])}function imt(t,e,i,r=0,s=0,n=t.width-r,o=t.height-s,a=!1){const{data:l}=t,{width:u,height:c,data:d}=e,f=n/u,m=o/c,g=Math.ceil(f/2),v=Math.ceil(m/2),b=t.width;for(let _=0;_<c;_++)for(let S=0;S<u;S++){const M=4*(S+(a?c-_-1:_)*u);let x=0,T=0,I=0,$=0,L=0,B=0;const z=(_+.5)*m;for(let H=Math.floor(_*m);H<(_+1)*m;H++){const J=Math.abs(z-(H+.5))/v,K=(S+.5)*f,Q=J*J;for(let y=Math.floor(S*f);y<(S+1)*f;y++){const A=Math.abs(K-(y+.5))/g,N=Math.sqrt(Q+A*A);if(N>=1)continue;let D=2*N*N*N-3*N*N+1;const ne=4*(r+y+(s+H)*b);B+=D*l[ne+3],T+=D,!i&&l[ne+3]<255&&(D=D*l[ne+3]/255),I+=D*l[ne],$+=D*l[ne+1],L+=D*l[ne+2],x+=D}}d[M]=I/x,d[M+1]=$/x,d[M+2]=L/x,d[M+3]=B/T}return e}function MDe(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return ODe}}function ADe(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function CDe(t){const e=t.data,i=e.length;for(let r=0;r<i;r+=4){const s=e[r+3];if(s!==255&&s>0){const n=255/s;e[r+0]=e[r+0]*n,e[r+1]=e[r+1]*n,e[r+2]=e[r+2]*n}}}const $De={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},NW=98,ODe="png",RDe={png:100,jpg:NW,jpeg:NW};var Cs;function rmt(t,e,i={}){const r=Qle(t);for(;r.length>1;){const s=O5(e,r.shift(),i);if(ee(s))return s}return kDe(e,r.shift(),i)}function Qle(t){const e=Ze("esri-force-webgl");if(e===Cs.WEBGL1||e===Cs.WEBGL2)return[e];switch(t){case"2d":return Ze("mac")&&Ze("chrome")?[Cs.WEBGL1,Cs.WEBGL2]:[Cs.WEBGL2,Cs.WEBGL1];case"3d":return[Cs.WEBGL2,Cs.WEBGL1]}}function kDe(t,e,i={}){if(!window.WebGLRenderingContext)return FW(t,LDe),null;const r=O5(t,e,i);return Re(r)&&FW(t,PDe),r}function O5(t,e,i={}){const r=e===Cs.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let s=null;for(const n of r){try{s=t.getContext(n,i)}catch{}if(s)break}return s}function FW(t,e){const i=t.parentNode;i&&(i.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+e+"</div></div></td></tr></table>")}(function(t){t[t.WEBGL1=1]="WEBGL1",t[t.WEBGL2=2]="WEBGL2"})(Cs||(Cs={}));const LDe='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',PDe=`It doesn't appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>`;let qR,HR;function NDe(t){const e=Qle(t);for(;e.length>1;){const i=DW(e.shift());if(i.available)return i}return DW(e.shift())}function DW(t){switch(t){case Cs.WEBGL1:return FDe();case Cs.WEBGL2:return DDe()}}function FDe(){return qR||(qR=VDe()),qR}function DDe(){return HR||(HR=BDe()),HR}let Xle=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}},jDe=class extends Xle{constructor(){super(...arguments),this.type=Cs.WEBGL1}},UDe=class extends Xle{constructor(){super(...arguments),this.type=Cs.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}};function eue(t,e){if(t===Cs.WEBGL1&&typeof WebGLRenderingContext>"u"||t===Cs.WEBGL2&&typeof WebGL2RenderingContext>"u")return null;const i=document.createElement("canvas");if(!i)return null;let r=O5(i,t,{failIfMajorPerformanceCaveat:!0});if(Re(r)&&(r=O5(i,t),ee(r)&&(e.majorPerformanceCaveat=!0)),Re(r))return r;if(t===Cs.WEBGL1){const n=r.getParameter(r.VERSION)?.match(/^WebGL\s+([\d.]*)/);if(n){const o=parseFloat(n[1]);e.available=o>=.94}}else e.available=!0;e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const s=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return s&&(e.supportsHighPrecisionFragment=s.precision>0),r}function VDe(){const t=new jDe,e=eue(Cs.WEBGL1,t);return Re(e)||(t.supportsElementIndexUint=e.getExtension("OES_element_index_uint")!==null,t.supportsStandardDerivatives=e.getExtension("OES_standard_derivatives")!==null,t.supportsInstancedArrays=e.getExtension("ANGLE_instanced_arrays")!==null,t.supportsTextureFloat=e.getExtension("OES_texture_float")!==null,t.supportsTextureHalfFloat=e.getExtension("OES_texture_half_float")!==null,t.supportsColorBufferFloat=e.getExtension("WEBGL_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=e.getExtension("EXT_color_buffer_half_float")!==null),t}function BDe(){const t=new UDe,e=eue(Cs.WEBGL2,t);return Re(e)||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function zDe(t){const e=NDe(t);if(!e.available)return new Ce("webgl:required","WebGL is required but not supported.");if(t==="3d"&&e.majorPerformanceCaveat)return new Ce("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!e.supportsHighPrecisionFragment)return new Ce("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!e.supportsVertexShaderSamplers)return new Ce("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(e.type===Cs.WEBGL1){if(!e.supportsElementIndexUint)return new Ce("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!e.supportsStandardDerivatives)return new Ce("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!e.supportsInstancedArrays)return new Ce("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function GDe(t){return t&&"nodeType"in t}function qDe(t){return t&&typeof t.render=="function"}const jW={component:"esri-component"};let xg=class extends Pt{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const i=this._get("node");e!==i&&(e&&e.classList.add(jW.component),i&&i.classList.remove(jW.component),this._set("node",e))}castNode(e){return e?typeof e=="string"||GDe(e)?(this._set("widget",null),y7(e)):(qDe(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};h([p({dependsOn:[]})],xg.prototype,"id",null),h([p()],xg.prototype,"node",null),h([mi("node")],xg.prototype,"castNode",null),h([p({readOnly:!0})],xg.prototype,"widget",void 0),xg=h([ce("esri.views.ui.Component")],xg);const KM=xg,HDe={left:0,top:0,bottom:0,right:0},tue={bottom:30,top:15,right:15,left:15},WR="manual",od="esri-ui",ko={ui:od,corner:`${od}-corner`,innerContainer:`${od}-inner-container`,manualContainer:`${od}-manual-container`,cornerContainer:`${od}-corner-container`,topLeft:`${od}-top-left`,topRight:`${od}-top-right`,bottomLeft:`${od}-bottom-left`,bottomRight:`${od}-bottom-right`};function WDe(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function JR(t){const e=t,i=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(i===null||i===Object.prototype)&&("component"in e||"index"in e||"position"in e)?t:null}function ZR(t,{top:e,bottom:i,left:r,right:s}){t.style.top=e,t.style.bottom=i,t.style.left=r,t.style.right=s}let oh=class extends xp.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._locale=gu(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&ZR(i,this._toPxPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&ZR(i,this._toPxPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([st(()=>[this.view?.padding,this.container],this._applyViewPadding,Fi),st(()=>this.padding,this._applyUIPadding,Fi),st(()=>[this.container,this._locale],([e,i])=>{e&&e.setAttribute("lang",i)},Fi),dX(e=>{this._locale=e})])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentToKey.clear()}set container(e){const i=this._get("container");e!==i&&(e&&(e.classList.add(ko.ui),p8e(e),this._attachContainers(e)),i&&(i.classList.remove(ko.ui),ZR(i,{top:"",bottom:"",left:"",right:""}),moe(i)),this._set("container",e))}get height(){const e=this.get("view.height")||0;if(e===0)return e;const i=this._getViewPadding(),r=i.top+i.bottom;return Math.max(e-r,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...tue,...e}}get width(){const e=this.get("view.width")||0;if(e===0)return e;const i=this._getViewPadding(),r=i.left+i.right;return Math.max(e-r,0)}add(e,i){let r,s;if(Array.isArray(e))return void e.forEach(o=>this.add(o,i));const n=JR(e);n&&({index:r,position:i,component:e,key:s}=n),i&&typeof i=="object"&&({index:r,key:s,position:i}=i),!e||i&&!this._isValidPosition(i)||this._add(e,i,r,s)}remove(e,i){if(!e)return;if(Array.isArray(e))return e.map(s=>this.remove(s,i));const r=this._find(e);if(r){const s=this._componentToKey;if(s.has(e)&&s.get(e)!==i)return;const n=this._components.indexOf(r);return r.node.parentNode&&r.node.parentNode.removeChild(r.node),this._componentToKey.delete(e),this._components.splice(n,1)[0]}}empty(e){return Array.isArray(e)?e.map(i=>this.empty(i)).reduce((i,r)=>i.concat(r)):(e=e||WR)===WR?Array.prototype.slice.call(this._manualContainer.children).filter(i=>!i.classList.contains(ko.corner)).map(i=>this.remove(i)):this._isValidPosition(e)?Array.prototype.slice.call(this._cornerNameToContainerLookup[e].children).map(this.remove,this):null}move(e,i){if(Array.isArray(e)&&e.forEach(o=>this.move(o,i)),!e)return;let r;const s=JR(e)||JR(i);if(s&&(r=s.index,i=s.position,e=s.component||e),i&&!this._isValidPosition(i))return;const n=this.remove(e);n&&this.add(n,{position:i,index:r})}find(e){if(!e)return null;const i=this._findById(e);return i&&(i.widget||i.node)}getPosition(e){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(e))return i;return null}_add(e,i,r,s){e instanceof KM||(e=new KM({node:e})),this._place({component:e,position:i,index:r}),this._components.push(e),s&&this._componentToKey.set(e,s)}_find(e){return e?e instanceof KM?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.get("view.padding")||HDe}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(ko.innerContainer),e.classList.add(ko.cornerContainer);const i=document.createElement("div");i.classList.add(ko.innerContainer),i.classList.add(ko.manualContainer);const r=document.createElement("div");r.classList.add(ko.topLeft),r.classList.add(ko.corner),e.appendChild(r);const s=document.createElement("div");s.classList.add(ko.topRight),s.classList.add(ko.corner),e.appendChild(s);const n=document.createElement("div");n.classList.add(ko.bottomLeft),n.classList.add(ko.corner),e.appendChild(n);const o=document.createElement("div");o.classList.add(ko.bottomRight),o.classList.add(ko.corner),e.appendChild(o),this._innerContainer=e,this._manualContainer=i;const a=Th();this._cornerNameToContainerLookup={"top-left":r,"top-right":s,"bottom-left":n,"bottom-right":o,"top-leading":a?s:r,"top-trailing":a?r:s,"bottom-leading":a?o:n,"bottom-trailing":a?n:o},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const i=e.component,r=e.position||WR,s=e.index,n=this._positionNameToContainerLookup[r],o=s!=null&&s>-1;if(WDe(i.widget)&&i.widget.startup(),!o)return void n.appendChild(i.node);const a=Array.prototype.slice.call(n.children);if(s===0)return void(n.firstChild?qq(i.node,n.firstChild):n.appendChild(i.node));s>=a.length?n.appendChild(i.node):qq(i.node,a[s])}_toPxPosition(e){return{top:this._toPxUnit(e.top),left:this._toPxUnit(e.left),right:this._toPxUnit(e.right),bottom:this._toPxUnit(e.bottom)}}_toPxUnit(e){return e===0?"0":e+"px"}_findByComponent(e){let i,r=null;return this._components.some(s=>(i=s===e,i&&(r=s),i)),r}_findById(e){let i,r=null;return this._components.some(s=>(i=s.id===e,i&&(r=s),i)),r}_findByNode(e){let i,r=null;return this._components.some(s=>(i=s.node===e,i&&(r=s),i)),r}};h([p()],oh.prototype,"_locale",void 0),h([p()],oh.prototype,"container",null),h([p()],oh.prototype,"height",null),h([p({value:tue})],oh.prototype,"padding",null),h([mi("padding")],oh.prototype,"castPadding",null),h([p()],oh.prototype,"view",void 0),h([p()],oh.prototype,"width",null),oh=h([ce("esri.views.ui.UI")],oh);const JDe=oh;function UW(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function ZDe(t,e){return t.length!==e.length||t.some((i,r)=>i.text!==e[r].text)}function JT(t,e,i){!i||!e||t.find(r=>r.layerView===e&&r.text===i)||t.push({text:i,layerView:e})}function YDe(t){return t.type==="bing-maps"}const Qp=[];let Dv=class extends qA{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Nt,this.view=null,this._allLayerViewsChange=i=>{this.handles.remove("suspension");const r=this.get("view.allLayerViews");r&&this.handles.add(r.map(s=>st(()=>[s.suspended,s.layer?.attributionVisible],()=>this._updateAttributionItems())),"suspension"),i&&i.removed&&i.removed.forEach(s=>{this._pendingAttributions.delete(s),this._fetchedAttributionData.delete(s)}),this._updateAttributionItems()},this.handles.add([bn(()=>this.view?.allLayerViews,"change",i=>this._allLayerViewsChange(i),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Nl(()=>this.view?.stationary===!0,()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,i=e?.allLayerViews;Qp.length=0,e&&i?(i.forEach(r=>{if(r.suspended||!r.layer?.attributionVisible)return;const s=r.layer;if(UW(s,"user"))return void JT(Qp,r,s.copyright);if(s.hasAttributionData){if(this._fetchedAttributionData.has(r)){const o=this._fetchedAttributionData.get(r);return void(o?JT(Qp,r,this._getDynamicAttribution(o,e,s)):UW(s)&&JT(Qp,r,s.copyright))}return void this._fetchAttributionData(r)}const n=s.get("portalItem.accessInformation");JT(Qp,r,n||s.copyright)}),ZDe(this.items,Qp)&&(this.items.removeAll(),this.items.addMany(Qp)),Qp.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const i=await B4(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const r=i.ok?this._createContributionIndex(i.value,YDe(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,r)}this._updateAttributionItems()}_createContributionIndex(e,i){const r=e.contributors,s={};if(!r)return s;for(let n=0;n<r.length;n++){const o=r[n],a=o.coverageAreas;if(!a)return;for(const l of a){const u=l.bbox,c=l.zoomMin-(i&&l.zoomMin?1:0),d=l.zoomMax-(i&&l.zoomMax?1:0),f={xmin:u[1],ymin:u[0],xmax:u[3],ymax:u[2],spatialReference:Tt.WGS84},m={extent:um(f),attribution:o.attribution||"",score:l.score!=null?l.score:100,id:n};for(let g=c;g<=d;g++)s[g]=s[g]||[],s[g].push(m)}}return s.maxKey=Math.max.apply(null,Object.keys(s)),s}_getDynamicAttribution(e,i,r){const{extent:s,scale:n}=i;let o=r.tileInfo?.scaleToZoom(n)??0;if(o=Math.min(e.maxKey??0,Math.round(o)),!s||o==null||o<=-1)return"";const a=e[o],l=H4(s.center.clone().normalize(),i.spatialReference),u={};return a?a.filter(c=>{const d=c.id,f=!u[d]&&l&&c.extent&&W4(c.extent,l);return f&&(u[d]=!0),f}).sort((c,d)=>d.score-c.score||c.objectId-d.objectId).map(c=>c.attribution).join(", "):""}};h([p({readOnly:!0,type:Nt})],Dv.prototype,"items",void 0),h([p({readOnly:!0})],Dv.prototype,"state",null),h([p()],Dv.prototype,"view",void 0),Dv=h([ce("esri.widgets.Attribution.AttributionViewModel")],Dv);const iue=Dv,W1="esri-attribution",Xp={base:`${W1} esri-widget`,poweredBy:`${W1}__powered-by`,sources:`${W1}__sources`,open:`${W1}--open`,sourcesOpen:`${W1}__sources--open`,link:`${W1}__link`,widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let Uo=class extends Pn{constructor(e,i){super(e,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(r=>r.forEach(({target:s})=>this._checkSourceTextOverflow(s))),this.iconClass=Xp.widgetIcon,this.itemDelimiter=" | ",this.messages=null,this.viewModel=new iue}initialize(){this.addHandles(bn(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,i)=>(e.includes(i.text)||e.push(i.text),e),[]).join(this.itemDelimiter)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[Xp.open]:this._isOpen};return Ne("div",{bind:this,class:this.classes(Xp.base,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return Ne("div",{class:Xp.poweredBy},"Powered by"," ",Ne("a",{class:Xp.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,i=this._isInteractive,r=i?"0":"",{attributionText:s}=this,n={[Xp.sourcesOpen]:e,[Xp.interactive]:i};return Ne("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Xp.sources,n),innerHTML:s,tabindex:r})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let i=!1;const{clientHeight:r,clientWidth:s,scrollWidth:n}=e,o=n>s,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(i=!0),this._isOpen){const l=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,l&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};h([p()],Uo.prototype,"_isOpen",void 0),h([p()],Uo.prototype,"_isInteractive",null),h([p()],Uo.prototype,"_attributionTextOverflowed",void 0),h([p()],Uo.prototype,"_prevSourceNodeHeight",void 0),h([p({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Uo.prototype,"attributionText",null),h([p()],Uo.prototype,"iconClass",void 0),h([p()],Uo.prototype,"itemDelimiter",void 0),h([p()],Uo.prototype,"label",null),h([p(),On("esri/widgets/Attribution/t9n/Attribution")],Uo.prototype,"messages",void 0),h([p()],Uo.prototype,"view",null),h([p({type:iue})],Uo.prototype,"viewModel",void 0),h([fl()],Uo.prototype,"_toggleState",null),Uo=h([ce("esri.widgets.Attribution")],Uo);const KDe=Uo,QDe="esri.widgets.CompassViewModel";let Sg=class extends Yae(Pt){constructor(e){super(e),this._handles=new Ao,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(st(()=>this.view,this._updateRotationWatcher,Fi))}destroy(){gs(this._handles),this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const e={};this.view?.type==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const i=-e.heading;this.orientation={x:0,y:0,z:i}}_updateRotationWatcher(e){this._handles.removeAll(),e&&this._handles.add(e.type==="2d"?st(()=>e?.rotation,this._updateForRotation,Fi):st(()=>e?.camera,this._updateForCamera,Fi))}};h([p({readOnly:!0})],Sg.prototype,"canShowNorth",null),h([p()],Sg.prototype,"orientation",void 0),h([p({readOnly:!0})],Sg.prototype,"state",null),h([p()],Sg.prototype,"view",void 0),Sg=h([ce(QDe)],Sg);const rue=Sg,ef={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let ah=class extends Pn{constructor(e,i){super(e,i),this.iconClass=ef.widgetIcon,this.messages=null,this.viewModel=new rue}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:i}=this.viewModel,r=i==="disabled",s=(i==="rotation"?"rotation":"compass")=="compass",n=r?-1:0,o={[ef.disabled]:r,[ef.interactive]:!r},a={[ef.northIcon]:s,[ef.rotationIcon]:!s},{messages:l}=this;return Ne("div",{bind:this,class:this.classes(ef.base,o),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:n,"aria-label":l.reset,title:l.reset},Ne("span",{"aria-hidden":"true",class:this.classes(ef.icon,a),styles:this._toRotationTransform(e)}),Ne("span",{class:ef.text},l.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};h([p()],ah.prototype,"goToOverride",null),h([p()],ah.prototype,"iconClass",void 0),h([p()],ah.prototype,"label",null),h([p(),On("esri/widgets/Compass/t9n/Compass")],ah.prototype,"messages",void 0),h([p()],ah.prototype,"view",null),h([p({type:rue})],ah.prototype,"viewModel",void 0),h([fl()],ah.prototype,"_reset",null),ah=h([ce("esri.widgets.Compass")],ah);const XDe=ah,J1="esri-navigation-toggle",ql={base:`${J1} esri-widget`,button:`${J1}__button esri-widget--button`,activeButton:`${J1}__button--active`,panButton:`${J1}__button--pan`,rotateButton:`${J1}__button--rotate`,isLayoutHorizontal:`${J1}--horizontal`,rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let jv=class extends Pt{constructor(e){super(e),this.navigationMode="pan",this.view=null}initialize(){this.own(Nl(()=>this.view?.inputManager,()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){return this.get("view.ready")&&this.view?.type==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};h([p({readOnly:!0})],jv.prototype,"state",null),h([p()],jv.prototype,"navigationMode",void 0),h([p()],jv.prototype,"view",void 0),jv=h([ce("esri.widgets.NavigationToggleViewModel")],jv);const sue=jv;let lh=class extends Pn{constructor(e,i){super(e,i),this.iconClass=ql.widgetIcon,this.messages=null,this.viewModel=new sue}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}toggle(){return this.viewModel.toggle()}render(){const e=this.get("viewModel.state")==="disabled",i=this.get("viewModel.navigationMode")==="pan",r={[ql.disabled]:e,[ql.isLayoutHorizontal]:this.layout==="horizontal"},s={[ql.activeButton]:i},n={[ql.activeButton]:!i},o=e?-1:0,a=this.messages.toggle;return Ne("div",{bind:this,class:this.classes(ql.base,r),onclick:this._toggle,onkeydown:this._toggle,tabIndex:o,"aria-label":a,title:a},Ne("div",{class:this.classes(ql.button,ql.panButton,s)},Ne("span",{class:ql.panIcon})),Ne("div",{class:this.classes(ql.button,ql.rotateButton,n)},Ne("span",{class:ql.rotationIcon})))}_toggle(){this.toggle()}};h([p()],lh.prototype,"iconClass",void 0),h([p()],lh.prototype,"label",null),h([p({value:"vertical"})],lh.prototype,"layout",null),h([p(),On("esri/widgets/NavigationToggle/t9n/NavigationToggle")],lh.prototype,"messages",void 0),h([p()],lh.prototype,"view",null),h([p({type:sue})],lh.prototype,"viewModel",void 0),h([fl()],lh.prototype,"_toggle",null),lh=h([ce("esri.widgets.NavigationToggle")],lh);const e7e=lh,Q_={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let Rf=class extends Pn{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const e=this.enabled?0:-1,i={[Q_.disabled]:!this.enabled,[Q_.interactive]:this.enabled},r={[this.iconClass]:!!this.iconClass};return Ne("div",{bind:this,class:this.classes(Q_.button,i),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},Ne("span",{"aria-hidden":"true",role:"presentation",class:this.classes(Q_.icon,r)}),Ne("span",{class:Q_.iconText},this.title))}_triggerAction(){this.action.call(this)}};h([p()],Rf.prototype,"action",void 0),h([p()],Rf.prototype,"enabled",void 0),h([p()],Rf.prototype,"iconClass",void 0),h([p()],Rf.prototype,"title",void 0),h([fl()],Rf.prototype,"_triggerAction",null),Rf=h([ce("esri.widgets.IconButton")],Rf);const VW=Rf;let Uv=class extends Pt{get canZoomIn(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),i=this.get("view.constraints.effectiveMaxScale");return i===0||e>i}get canZoomOut(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),i=this.get("view.constraints.effectiveMinScale");return i===0||e<i}};h([p({readOnly:!0})],Uv.prototype,"canZoomIn",null),h([p({readOnly:!0})],Uv.prototype,"canZoomOut",null),h([p()],Uv.prototype,"view",void 0),Uv=h([ce("esri.widgets.Zoom.ZoomConditions2D")],Uv);const t7e=Uv;let Vv=class extends Pt{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};h([p({readOnly:!0})],Vv.prototype,"canZoomIn",null),h([p({readOnly:!0})],Vv.prototype,"canZoomOut",null),h([p()],Vv.prototype,"view",void 0),Vv=h([ce("esri.widgets.Zoom.ZoomConditions3D")],Vv);const i7e=Vv;let kf=class extends Pt{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return ee(this._zoomConditions)&&this._zoomConditions.canZoomIn}get canZoomOut(){return ee(this._zoomConditions)&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new t7e({view:e}):e.type==="3d"&&(this._zoomConditions=new i7e({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():fb(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():fb(e.goTo({zoomFactor:.5}))}};h([p()],kf.prototype,"_zoomConditions",void 0),h([p()],kf.prototype,"canZoomIn",null),h([p()],kf.prototype,"canZoomOut",null),h([p({readOnly:!0})],kf.prototype,"state",null),h([p()],kf.prototype,"view",null),kf=h([ce("esri.widgets.Zoom.ZoomViewModel")],kf);const nue=kf,X_={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let Pd=class extends Pn{constructor(e,i){super(e,i),this.iconClass=X_.widgetIcon,this.messages=null,this.viewModel=new nue}initialize(){this._zoomInButton=new VW({action:this.zoomIn.bind(this),iconClass:X_.zoomInIcon}),this._zoomOutButton=new VW({action:this.zoomOut.bind(this),iconClass:X_.zoomOutIcon})}destroy(){this._zoomInButton=Jr(this._zoomInButton),this._zoomOutButton=Jr(this._zoomOutButton)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e=this.viewModel,i={[X_.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:r,canZoomOut:s}=e;this._zoomInButton.enabled=r,this._zoomOutButton.enabled=s;const{zoomIn:n,zoomOut:o}=this.messages;return this._zoomInButton.title=n,this._zoomOutButton.title=o,Ne("div",{class:this.classes(X_.base,i)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};h([p()],Pd.prototype,"iconClass",void 0),h([p()],Pd.prototype,"label",null),h([p({value:"vertical"})],Pd.prototype,"layout",null),h([p(),On("esri/widgets/Zoom/t9n/Zoom")],Pd.prototype,"messages",void 0),h([p()],Pd.prototype,"view",null),h([p({type:nue})],Pd.prototype,"viewModel",void 0),Pd=h([ce("esri.widgets.Zoom")],Pd);const r7e=Pd;function s7e(t){return t&&t.view!==void 0}let QM=class extends JDe{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[]}initialize(){this.addHandles([st(()=>this.components,this._componentsWatcher.bind(this),Fi),st(()=>this.view,this._updateViewAwareWidgets.bind(this),Fi)])}_add(e,i,r,s){let n=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;n=this._createComponent(e)}super._add(n,i,r,s)}_removeComponents(e){e.forEach(i=>{const r=this._find(i);r&&(this.remove(r),r.destroy())})}_updateViewAwareWidgets(e){this.components.forEach(i=>{const r=this._find(i),s=r&&r.widget;s7e(s)&&(s.view=e)})}_componentsWatcher(e,i){this._removeComponents(i),this._addComponents(e),this._adjustPadding(e)}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(e){this.constructed&&e.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(e){const i=this._createWidget(e);if(i)return new KM({id:e,node:i})}_createWidget(e){return e==="attribution"?this._createAttribution():e==="compass"?this._createCompass():e==="navigation-toggle"?this._createNavigationToggle():e==="zoom"?this._createZoom():void 0}_createAttribution(){return new KDe({view:this.view})}_createCompass(){return new XDe({view:this.view})}_createNavigationToggle(){return new e7e({view:this.view})}_createZoom(){return new r7e({view:this.view})}};h([p()],QM.prototype,"components",void 0),QM=h([ce("esri.views.ui.DefaultUI")],QM);const n7e=QM;let XM=class extends n7e{constructor(e){super(e),this.components=["attribution","zoom"]}};h([p()],XM.prototype,"components",void 0),XM=h([ce("esri.views.ui.2d.DefaultUI2D")],XM);const oue=XM;var MN;let eA=MN=class extends Je{constructor(t){super(t),this.color=new It([0,0,0,1])}clone(){return new MN(Le({color:this.color}))}};h([p({type:It,json:{write:!0}})],eA.prototype,"color",void 0),eA=MN=h([ce("esri.webmap.background.ColorBackground")],eA);const o7e=eA;let aue,lue,uue,cue,hue,due;async function a7e(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:i,MapViewNavigation:r,MagnifierView2D:s,Stage:n}]=await Promise.all([De(()=>import("./webglDeps-a98174be.js"),["./webglDeps-a98174be.js","./VertexArrayObject-08d42ae7.js","./Texture-1b8ff28d.js","./enums-64ab819c.js","./ProgramTemplate-955552d1.js","./programUtils-0c0d452c.js","./NestedMap-7c434b47.js","./preload-helper-388ac9d5.js"],import.meta.url),De(()=>import("./mapViewDeps-64ac5947.js"),["./mapViewDeps-64ac5947.js","./MagnifierPrograms-42e1d9ee.js","./_commonjsHelpers-2f3e7994.js","./WGLContainer-2c173132.js","./definitions-cc1dbf1d.js","./VertexArrayObject-08d42ae7.js","./Texture-1b8ff28d.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./color-b1c8dd9c.js","./enums-f1a6a48a.js","./ProgramTemplate-955552d1.js","./MaterialKey-835d60d7.js","./utils-64fa4fcb.js","./StyleDefinition-29c49b98.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-a79faf7d.js","./earcut-61f7b102.js","./ExpandedCIM-877df5d1.js","./BidiEngine-836b7ef6.js","./GeometryUtils-984e8446.js","./preload-helper-388ac9d5.js","./Rect-ea14f53a.js","./quantizationUtils-a18aa97b.js","./floatRGBA-e7156149.js","./rasterizingUtils-58eb8a8e.js","./imageutils-f0e5ac1f.js","./Matcher-37a9e719.js","./visualVariablesUtils-9821563e.js","./visualVariablesUtils-968002b5.js","./tileUtils-c2f19f52.js","./TurboLine-4d7f5bbb.js","./devEnvironmentUtils-f2a1f21e.js","./CircularArray-c48430e5.js","./webgl-debug-b1f7a2c5.js","./ComputedAttributeStorage-c5196ecb.js","./arcadeTimeUtils-d6b8096e.js","./executionError-c1d13a98.js","./centroid-ede77936.js","./BufferPool-d8a0723a.js","./enums-fb086c25.js","./programUtils-0c0d452c.js","./NestedMap-7c434b47.js","./RenderingContext-ab49bb4c.js","./OrderIndependentTransparency-e1b3a745.js","./basicInterfaces-b7051eb1.js","./doublePrecisionUtils-e3c3d0d8.js","./imageUtils-c2d0d1ae.js","./GraphicsView2D-f654d128.js","./normalizeUtilsSync-91270f4b.js","./projectionSupport-1fe92137.js","./json-48e3ea08.js","./AttributeStoreView-6307b3aa.js","./TiledDisplayObject-d0148f43.js","./schemaUtils-e2d062ae.js","./util-c2d90ab9.js","./GraphicContainer-03f01eb0.js","./BaseGraphicContainer-c06e3f4f.js","./FeatureContainer-96b2572a.js","./TileContainer-d9051116.js","./vec3f32-ad1dc57f.js","./requestImageUtils-00d96779.js"],import.meta.url)]);lue=t,uue=e,cue=i,hue=r,due=s,aue=n}const BW=160;function l7e(t){return t&&t.declaredClass==="esri.Viewpoint"}let ai=class extends $Re(oNe(aNe(RNe))){constructor(t){super(t),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new B0({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this._stationaryTimer=null,this._gotoTask=null,this.frameTask=new NFe(this),this._pePromise=null,this.floors=new Nt,this.highlightOptions=new Jle,this.inputManager=new hDe({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new Zle,this.type="2d",this.ui=new oue,this._pixelFormat={flipY:!0,premultipliedAlpha:!0},this.constraints=new Ole,this.padding={top:0,right:0,bottom:0,left:0},this.handles.add([st(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(BW)},Cl),this.on("resize",e=>this._resizeHandler(e)),st(()=>this.animationManager?.animation,e=>{this.animation=e})]),Yxe()}destroy(){this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new vDe(this.featuresTilingScheme)}get initialExtentRequired(){const{scale:t,constraints:e,center:i,viewpoint:r,extent:s}=this;let n=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint)&&!s&&(e?.effectiveLODs||(n=-1),(!i||t===0&&n===-1)&&(!r||!ee(r.targetGeometry)||r.targetGeometry.type!=="extent"&&!r.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!Cm()||(this._pePromise||(this._pePromise=$m().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const t=this._getDefaultViewpoint();if(!t)return!1;const e=this.spatialReference,i=t.targetGeometry;return!!fp(i.spatialReference,e)||this._projectionEngineLoaded}set animation(t){const e=this._get("animation");if(t===e)return;if(e&&e.stop(),!t||t.isFulfilled())return void this._set("animation",null);this._set("animation",t),this.frameTask.animationInProgress=!0;const i=()=>{t===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame()),this.frameTask&&(this.frameTask.animationInProgress=!1)};t.when(i,i)}get background(){return c7e(this.map)?this.map.initialViewProperties.background:null}set background(t){this._override("background",t)}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:e}=this.state.paddedViewState;return new Ct({x:t[0],y:t[1],spatialReference:e})}set center(t){if(t==null)return;if(!this.ready)return this._set("center",t),void this.notifyChange("initialExtentRequired");let e;try{e=this._project(t,this.spatialReference)}catch(r){return void tt.getLogger(this.declaredClass).error(new Ce("mapview:invalid-center","could not project the value in the view's spatial reference",{input:t,error:r}))}const i=this.viewpoint;vN(i,i,e),this.viewpoint=i}set constraints(t){const e=this._get("constraints");e&&(this.handles.remove("map-view-constraints"),e.destroy()),this._set("constraints",t),t&&(t.view=this,this.ready&&(this.state.viewpoint=t.fit(this.state.paddedViewState.viewpoint)),this.handles.add(st(()=>t.version,()=>{this.ready&&this.state&&(this.state.viewpoint=t.fit(this.state.paddedViewState.viewpoint))},Cl),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(t){if(t==null)return;if(!t.width||!t.height)return void tt.getLogger(this.declaredClass).error(new Ce("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",t),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");let e;try{e=this._project(t,this.spatialReference)}catch(r){return void tt.getLogger(this.declaredClass).error(new Ce("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:r}))}const i=this.viewpoint;wFe(i,i,e,this.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const e=this.viewpoint;RFe(e,e,t),this.viewpoint=e}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",-1);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}const e=this.viewpoint;gW(e,e,t),this.viewpoint=e}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){const t=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(e=>!e.destroyed&&!("layerViews"in e)&&e.updating===!0));if(Ze("esri-2d-log-updating")){const e=this.allLayerViews.reduce((i,r)=>({...i,[r.layer.id]:!r.destroyed&&!("layerViews"in r)&&r.updating}),{});console.log(`Updating MapView: ${t}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${this.layerViewManager?.updating}
-> labelManager.updating: ${this.labelManager?.updating}
-> graphicsView.updating: ${this.graphicsView?.updating}
-> allLayerViews: ${JSON.stringify(e)}
`)}return t}get viewpoint(){if(!this.ready)return this._get("viewpoint");const t=this.state.paddedViewState;return t&&t.viewpoint.clone()}set viewpoint(t){if(t==null)return;if(!this.ready)return this._set("viewpoint",t),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");let e,i;try{e=this._project(t,this.spatialReference),!t.scale||isNaN(t.scale)?i=new Ce("mapview:invalid-viewpoint",`invalid scale value of ${t.scale}`):Re(t.targetGeometry)&&(i=new Ce("mapview:invalid-viewpoint","geometry not defined"))}catch(s){i=new Ce("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:s})}if(i)return void tt.getLogger(this.declaredClass).error(i);this._scaleBeforeChangingSpatialReference=null;const r=new Oh({targetGeometry:new Ct,scale:0,rotation:0});Cc(r,e),this.constraints.constrain(r,this.state.paddedViewState.viewpoint),this.state.viewpoint=r,this.frameTask.requestFrame(),this._set("viewpoint",r)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(t){if(t==null)return;if(!this.ready){this._set("zoom",t),this._set("scale",0);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}if(!this.constraints.effectiveLODs)return void this._set("zoom",-1);const e=this.viewpoint;gW(e,e,this.constraints.zoomToScale(t)),this.viewpoint=e,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(t,e){if(t)return this.animation&&(this.animation=null),this._createAnimation(),uC(()=>this.ready,e).then(()=>{const i={animate:!0,...e},r=gFe(t,this);return this.animation?.update(r),this._gotoTask={},i.animate?this._gotoAnimated(r,i):this._gotoImmediate(r,i)});tt.getLogger(this.declaredClass).error("#goTo()","target cannot be null or undefined")}async hitTest(t,e){const i=hW(t)?cW(this,t):t;if(!this.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let r=new Set,s=!1,n=null,o=null;e?.include?GW(e.include,zW(this,c=>r.add(c),c=>{n||(n=new Set),n.add(c)},c=>r.add(c),()=>s=!0)):(s=!0,r=new Set(this.allLayerViews)),e?.exclude&&GW(e.exclude,zW(this,c=>r.delete(c),c=>{o||(o=new Set),o.add(c)}));const a=this.allLayerViews.filter(c=>!c.suspended&&r.has(c)).reverse(),l=this.toMap(i);let u=[...s?this.graphicsView.hitTest(l).map(c=>({type:"graphic",graphic:c,layer:null,mapPoint:l})):[],...await Promise.all(a.map(c=>c.hitTest(l,i)).toArray())].filter(ee).flat().filter(ee);return n&&(u=u.filter(c=>!("graphic"in c)||!c.graphic||n?.has(AN(c.graphic)))),o&&(u=u.filter(c=>!("graphic"in c)||!c.graphic||o?.has(AN(c.graphic)))),{screenPoint:i,results:u}}async takeScreenshot(t){const e=this._createScreenshotPlan(t),i=await this._stage.takeScreenshot(e);return _De(i,{format:e.format,quality:e.quality,rotation:0,disableDecorations:!1},this._pixelFormat)}async _takeScreenshot(t){const e=this._createScreenshotPlan(t),i=await this._stage.takeScreenshot(e);return xDe(i,this._pixelFormat)}_createScreenshotPlan(t){t=t??{};const e=this.supersampleScreenshotsEnabled?Math.min(4,IDe(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let i;t.layers?(i=[],t.layers.forEach(n=>{const o=this.allLayerViews.find(a=>a.layer.id===n.id);o&&"container"in o&&o.container&&i.push(o.container)})):i=this._stage.children;const{format:r,quality:s}=TDe(t.format,t.quality);return wDe(t,e,this.size,this.padding,r,s,i,t.rotation)}get test(){return{takeScreenshot:t=>this._takeScreenshot(t)}}toMap(t){if(!this.ready)return null;const e=hW(t)?cW(this,t):t,i=[0,0],[r,s]=this.state.toMap(i,[e.x,e.y]),n=this.spatialReference;return new Ct({x:r,y:s,spatialReference:n})}toScreen(t){if(!this.ready)return null;const e=this._project(t,this.spatialReference),i=[e.x,e.y];return this.state.toScreen(i,i),pn(i[0],i[1])}on(t,e,i,r){return this.inputManager&&this.viewEvents.on(t,e,i,r)||super.on(t,e)}hasEventListener(t){return super.hasEventListener(t)||this.viewEvents.hasHandler(t)}whenLayerView(t){return super.whenLayerView(t)}graphicChanged(t){this.graphicsView&&this.graphicsView.graphicUpdateHandler(t)}whenReady(){return new Promise(t=>{this.ready?t(this):this._resolveWhenReady.push(t)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map?.initialViewProperties?.spatialReference||this.defaultsFromMap?.spatialReference||null}hasLayerViewModule(t){return bW.hasLayerViewModule(t)}importLayerView(t){return bW.importLayerView(t)}pixelSizeAt(){return this.ready?this.state.resolution:(tt.getLogger(this.declaredClass).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(t){return this.hitTest(t).then(e=>({...e,mapPoint:this.toMap(t)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let t=zDe(this.type);return Ze("safari")&&Ze("safari")<9&&(t=new Ce("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:Ze("safari")})),ee(t)?(tt.getLogger(this.declaredClass).warn("#validate()",t.message),Promise.reject(t)):a7e()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new yN),this.animation}_cancellableGoTo(t,e,i){const r=()=>t===this._gotoTask,s=i.then(()=>{r()&&(this.animation=null)}).catch(o=>{throw r()&&(e&&!e.done&&(e.stop(),this.frameTask.animationInProgress=!1),this.animation=null),o}),n=new Promise(o=>o(s));return e.when().catch(()=>{r()&&n.cancel&&n.cancel()}),n}_gotoImmediate(t,e){const i=this._gotoTask,r=this.animation,s=t.then(n=>{if(pr(e),i!==this._gotoTask)throw new Ce("view:goto-interrupted","Goto was interrupted");this.viewpoint=r.target=n,r.finish()});return this._cancellableGoTo(i,r,s)}_flipStationary(t){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const e=performance.now()-this._lastStationaryEventTimestamp;e<BW&&(this._stationaryTimer=this._flipStationary(e))},t)),this._stationaryTimer}_getDefaultViewpoint(){const{constraints:t,initialExtent:e,map:i,padding:r,size:s}=this;if(!t)return null;const n=i&&"initialViewProperties"in i?i.initialViewProperties:void 0,o={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};t.effectiveLODs?o.zoom!==-1&&(o.scale=t.zoomToScale(o.zoom)):o.zoom=-1;let a=null,l=null,u=0;const c=o.viewpoint&&o.viewpoint.rotation,d=o.viewpoint&&o.viewpoint.targetGeometry;ee(d)&&(d.type==="extent"?a=d:d.type==="point"&&(l=d,u=o.viewpoint.scale));const f=o.extent||a||n?.viewpoint?.targetGeometry?.extent||e,m=o.center||l||f?.center,g=o.scale||u||n?.viewpoint?.scale||f&&Yx(f,[s[0]-r.left-r.right,s[1]-r.top-r.bottom]),v=o.rotation||c||n?.viewpoint?.rotation||0;return m&&g?new Oh({targetGeometry:m,scale:g,rotation:v}):null}_gotoAnimated(t,e){const i=this._gotoTask,r=this.animation;if(!r)return Promise.resolve();const s=t.then(n=>{if(pr(e),i!==this._gotoTask)throw new Ce("view:goto-interrupted","Goto was interrupted");return r.update(n),this.animationManager.animate(r,this.viewpoint,e),r.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,r,s)}_project(t,e){const i=t&&t.targetGeometry||t;if(!e)return t;if(!i)return null;if(e.imageCoordinateSystem||i.spatialReference?.imageCoordinateSystem||bs(e,i.spatialReference))return t;const r=u1(i,e);if(!r)throw new Ce("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:e});return l7e(t)?(t.targetGeometry=r,t):r}_resizeHandler(t){if(!this.ready)return;const e=this.state;let i=this.state.paddedViewState.viewpoint;const r=this.state.paddedViewState.size.concat();e.size=[t.width,t.height],OFe(i,i,r,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints.constrain(i,void 0),this.state.viewpoint=i}_startup(){this.timeline.begin("MapView Startup");const t=this._getDefaultViewpoint(),e=t.targetGeometry;try{this._project(t,this.spatialReference)}catch(a){tt.getLogger(this.declaredClass).warn(new kl("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:e.toJSON(),spatialReference:this.spatialReference,error:a})),t.targetGeometry=this.defaultsFromMap.extent?.center||new Ct({x:0,y:0,spatialReference:this.spatialReference})}this.constraints?.fit(t),this._set("state",new S9e({padding:this._get("padding"),size:this.size,viewpoint:t})),this.graphics.owner=this;const i=new aue(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=i,this._magnifierView=new due,this._magnifierView.magnifier=this.magnifier;const r=new cue({view:this});this._set("labelManager",r);const s=new PFe({view:this});this._set("animationManager",s);const n=new hue({view:this,animationManager:s});this._set("mapViewNavigation",n),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("post-render",()=>this._set("rendering",i.renderRequested)),i.on("will-render",()=>this._set("rendering",i.renderRequested)),i.on("webgl-error",a=>this.fatalError=a.error),st(()=>this.stationary,a=>i.stationary=a,jf),st(()=>this.background,a=>{i.background=a,this._magnifierView.background=a},jf),st(()=>this.magnifier,a=>this._magnifierView.magnifier=a,jf),st(()=>this.renderingOptions,a=>i.renderingOptions=a,jf),st(()=>this.highlightOptions,a=>i.highlightOptions=a,jf),st(()=>this.state.id,()=>i.state=this.state,jf)],"map-view"),this._updateStageChildren();const o=this._resolveWhenReady;this._resolveWhenReady=[],o.forEach(a=>a(this)),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);const{center:[t,e],spatialReference:i,rotation:r,scale:s}=this.state.paddedViewState,n=new Ct({x:t,y:e,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",n),this._set("zoom",-1),this._set("rotation",r),this._set("scale",s),this._set("spatialReference",i),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(e=>{this._stage.addChild(e.container)});const t=this.graphicsView;this._stage.addChild(t.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const t=new $9e(Ia.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",t);const e=new lue({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new uue(t)});this.frameTask.graphicsView=e,this._set("graphicsView",e)}_destroySpatialReferenceDependentProperties(){const t=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,t.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(t){if(!this.ready)return;this.frameTask.stop();for(const a of this.allLayerViews)a.processDetach();this._destroySpatialReferenceDependentProperties();const e=this.state.paddedViewState.clone();if(Re(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=e.scale;else{const a=e.viewpoint.clone();a.scale=this._scaleBeforeChangingSpatialReference,e.viewpoint=a}const i=e.clone(),[r,s]=e.center;let n=null;try{n=this._project(new Ct({x:r,y:s,spatialReference:e.spatialReference}),t)}catch(a){Cm()||tt.getLogger(this.declaredClass).warn(new kl("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:n?.toJSON(),spatialReference:t,error:a}))}n||(n=new Ct({x:0,y:0,spatialReference:t}));const o=vN(new Oh({targetGeometry:new Ct,scale:0,rotation:0}),e.viewpoint,n);i.viewpoint=o;try{const l=[e.size[0]/2,e.size[1]/2],u=[l[0]+20,l[1]],c=e.toMap([0,0],u),{x:d,y:f}=this._project(new Ct({x:c[0],y:c[1],spatialReference:e.spatialReference}),t);c[0]=d,c[1]=f,i.toScreen(c,c);const m=CFe(l,c,u),g=Math.hypot(c[0]-l[0],c[1]-l[1])/20;!Number.isFinite(g)||Math.abs(g)>4?(o.rotation=0,o.targetGeometry=new Ct({x:0,y:0,spatialReference:t})):(o.scale*=g,o.scale>Ze("mapview-srswitch-adjust-rotation-scale-threshold")?o.rotation=0:o.rotation+=Number.isFinite(m)?m:0)}catch{}this._get("constraints").constrain(o,void 0),this._get("state").viewpoint=o,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const a of this.allLayerViews)a.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};ai.type="2d",h([p({readOnly:!0})],ai.prototype,"animationManager",void 0),h([p({constructOnly:!0})],ai.prototype,"deactivatedWebGLExtensions",void 0),h([p({constructOnly:!0})],ai.prototype,"debugWebGLExtensions",void 0),h([p({readOnly:!0})],ai.prototype,"featuresTilingScheme",void 0),h([p({readOnly:!0})],ai.prototype,"fullOpacity",void 0),h([p({readOnly:!0})],ai.prototype,"graphicsTileStore",null),h([p()],ai.prototype,"graphicsView",void 0),h([p({readOnly:!0})],ai.prototype,"state",void 0),h([p()],ai.prototype,"initialExtentRequired",null),h([p()],ai.prototype,"labelManager",void 0),h([p({readOnly:!0})],ai.prototype,"resourceManager",null),h([p({readOnly:!0})],ai.prototype,"textureManager",null),h([p({readOnly:!0})],ai.prototype,"mapViewNavigation",void 0),h([p({constructOnly:!0})],ai.prototype,"renderCanvas",void 0),h([p()],ai.prototype,"renderingOptions",void 0),h([p({readOnly:!0})],ai.prototype,"rendering",void 0),h([p({constructOnly:!0})],ai.prototype,"supersampleScreenshotsEnabled",void 0),h([p({readOnly:!0})],ai.prototype,"supportsGround",void 0),h([p()],ai.prototype,"_stationaryTimer",void 0),h([p()],ai.prototype,"_defaultsFromMapSettings",null),h([p()],ai.prototype,"_pePromise",void 0),h([p({readOnly:!0})],ai.prototype,"typeSpecificPreconditionsReady",null),h([p()],ai.prototype,"animation",null),h([p({type:o7e})],ai.prototype,"background",null),h([p({value:null,type:Ct,dependsOn:["state.id","ready"]})],ai.prototype,"center",null),h([p({type:Ole})],ai.prototype,"constraints",null),h([p({value:null,type:Xt,dependsOn:["state.id","ready"]})],ai.prototype,"extent",null),h([p()],ai.prototype,"floors",void 0),h([p({type:Jle})],ai.prototype,"highlightOptions",void 0),h([p({readOnly:!0})],ai.prototype,"inputManager",void 0),h([p()],ai.prototype,"map",void 0),h([p({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],ai.prototype,"padding",null),h([p()],ai.prototype,"resizeAlign",void 0),h([p({readOnly:!0,dependsOn:["state.id"]})],ai.prototype,"resolution",null),h([p({value:0,type:Number,dependsOn:["state.id","ready"]})],ai.prototype,"rotation",null),h([p({value:0,type:Number,dependsOn:["state.id","ready"]})],ai.prototype,"scale",null),h([p({constructOnly:!0})],ai.prototype,"spatialReferenceLocked",void 0),h([p()],ai.prototype,"stationary",null),h([p({type:Zle,readOnly:!0})],ai.prototype,"timeline",void 0),h([p({readOnly:!0})],ai.prototype,"type",void 0),h([p({readOnly:!0})],ai.prototype,"updating",null),h([p({value:null,type:Oh,dependsOn:["state.id","ready"]})],ai.prototype,"viewpoint",null),h([p({value:-1,dependsOn:["state.id","ready"]})],ai.prototype,"zoom",null),h([p({readOnly:!0})],ai.prototype,"navigating",null),h([p({type:oue})],ai.prototype,"ui",void 0),ai=h([ce("esri.views.MapView")],ai);const u7e=ai;function AN(t){const e=t.getObjectId();return e?`${t.layer?.uid??t.sourceLayer?.uid??"MapView"}/${e}`:`"MapView/${t.uid}`}function zW(t,e,i,r,s){return n=>{if(n instanceof kn){if(n.layer===t)s?.();else{const o=t.allLayerViews.find(a=>a.layer===n.layer);o&&r?.(o)}i(AN(n))}else{const o=t.allLayerViews.find(a=>a.layer===n);o&&e(o)}}}function GW(t,e){if(t)if(fA(t))for(const i of t)if(fA(i))for(const r of i)e(r);else e(i);else e(t)}function c7e(t){return t?.declaredClass==="esri.WebMap"}let h7e=class{constructor(e){this.message=e}toString(){return`AssertException: ${this.message}`}};function pue(t,e){if(!t){e=e||"Assertion";const i=new Error(e).stack;throw new h7e(`${e} at ${i}`)}}function xmt(t,e,i,r){let s,n=(i[0]-t[0])/e[0],o=(r[0]-t[0])/e[0];n>o&&(s=n,n=o,o=s);let a=(i[1]-t[1])/e[1],l=(r[1]-t[1])/e[1];if(a>l&&(s=a,a=l,l=s),n>l||a>o)return!1;a>n&&(n=a),l<o&&(o=l);let u=(i[2]-t[2])/e[2],c=(r[2]-t[2])/e[2];return u>c&&(s=u,u=c,c=s),!(n>c||u>o)&&(c<o&&(o=c),!(o<0))}let d7e=class{constructor(e){this.client=e,this._cancelled=!1,this.size=0,this.duration=0}},p7e=class{constructor(e){this.typeWorkerQuota=e,this.tasks=new Array,this.numWorkers=0,this.statistics=new f7e}},f7e=class{constructor(){this.requests=0,this.size=0,this.duration=0,this.speed=0}},m7e=class{constructor(e,i,r,s){this._workerFunc=e,this._callbackFunc=i,this._maxTotalNumWorkers=r,this._totalNumWorkers=0,this._clients=s.map(n=>new p7e(n))}destroy(){this._clients.length=0}hasQuota(e){const i=this._clients[e];return!!i&&(this._totalNumWorkers<this._maxTotalNumWorkers||i.numWorkers+i.tasks.length<i.typeWorkerQuota)}push(e){const i=this._clients[e.client];i&&(this._totalNumWorkers<this._maxTotalNumWorkers?(i.numWorkers++,this._totalNumWorkers++,this._workerFunc(e,(r,s)=>this._taskCallback(r,s))):i.tasks.push(e))}cancel(e){this._taskFinished(e),e._cancelled=!0}_taskFinished(e){const i=this._clients[e.client];this._totalNumWorkers--,i.numWorkers--,i.statistics.requests++,i.statistics.size+=e.size||0,i.statistics.duration+=e.duration||0,i.statistics.speed=i.statistics.duration>0?i.statistics.size/i.statistics.duration:0,pue(i.numWorkers>=0),this._next()}_next(){for(const e of this._clients)if(e&&e.numWorkers<e.typeWorkerQuota&&this._processQueue(e))return;for(const e of this._clients)if(e&&this._processQueue(e))return}_processQueue(e){for(;e.tasks.length>0;)if(this._workerFunc(e.tasks.shift(),(i,r)=>this._taskCallback(i,r)))return e.numWorkers++,this._totalNumWorkers++,!0;return!1}_taskCallback(e,i){e._cancelled||(this._callbackFunc(e,i),this._taskFinished(e))}getStatsForType(e){const i=this._clients[e];return i?{quota:i.typeWorkerQuota,workers:i.numWorkers,queueSize:i.tasks.length,requestStats:i.statistics}:null}get test(){const e=this;return{set workerFunc(i){e._workerFunc=i}}}},YR=class extends Pt{constructor(){super(...arguments),this._tasks=new Map,this._onLoadQueue=new Array,this._doneQueue=new Array,this.updating=!1}setup(e,i,r){this._loadQueue=new m7e((s,n)=>this._startLoading(s,n),(s,n)=>this._doneLoadingCB(s,n),e,i),r&&(this._frameTask=r.registerTask(_i.STREAM_DATA_LOADER,this))}destroy(){this._frameTask=gs(this._frameTask),this._tasks.forEach(e=>yS(e.abortController)),this._loadQueue=Jr(this._loadQueue),this._onLoadQueue=null,this._doneQueue=null,this._tasks=null}hasDownloadSlots(e){return this._loadQueue.hasQuota(e)}request(e,i,r,s={}){const n=WK();n.__signal=ee(s)?s.signal:null;const o=this._createOrUpdateTask(e,i,r,s,n);return $a(s,()=>this._cancelRequest(o,n)),n.promise}_createTask(e,i,r,s,n,o){const a=new b7e(e,i,r,s,n);return this._updateTask(a,o),this._tasks.set(n,a),this._tasks.size===1&&this._set("updating",!0),this._loadQueue.push(a),a}_cancelRequest(e,i){_K(e.resolvers,i),i.reject(yr()),e.resolvers.length===0&&(e.status===au.DOWNLOADING&&(e.status=au.CANCELLED,this._loadQueue.cancel(e),e.abortController?.abort(),e.request=null,e.abortController=null),e.status=au.CANCELLED,this._tasks.delete(e.key),this._tasks.size===0&&this._set("updating",!1))}_updateTask(e,i){e.resolvers.push(i)}_createOrUpdateTask(e,i,r,s,n){const o=w7e(ee(s)&&s.uid||e,i,r),a=this._tasks.get(o);return a?(this._updateTask(a,n),a):this._createTask(e,s,i,r,o,n)}_doneLoadingCB(e,i){this._loadQueue&&(pue(e.status===au.DOWNLOADING),e.status=au.DOWNLOADED,this._frameTask?this._doneQueue.push({task:e,err:i}):this._doneLoading(e,i))}get running(){return this._doneQueue.length>0||this._onLoadQueue.length>0}runTask(e){for(;!e.done&&this._onLoadQueue.length>0;){const i=this._onLoadQueue.shift();pr(i.task.abortController),i.task.abortController=null,i.callback(i.task),e.madeProgress()}for(;!e.done&&this._doneQueue.length>0;){const i=this._doneQueue.shift();i.task.status!==au.DOWNLOADED&&(i.err=i.err||yr()),this._doneLoading(i.task,i.err),e.madeProgress()}}_doneLoading(e,i){if(i&&!vn(i)&&e.numRetries>0)return--e.numRetries,void this._loadQueue.push(e);let r=e.result instanceof HTMLImageElement?0:e.resolvers.length;for(const s of e.resolvers)if(i)vn(i)?s.reject(i):s.reject(new Ce("stream-data-loader:request-error",`Failed to request resource at '${e.url}'. ${i}`,{url:e.url,error:i}));else{--r;const n=r<=0?e.result:Le(e.result);s.resolve(n)}this._tasks.delete(e.key),this._tasks.size===0&&this._set("updating",!1)}_startLoading(e,i){if(e.status===au.CANCELLED)return!1;let r,s;switch(e.startTime=performance.now(),e.status=au.DOWNLOADING,e.docType){case"binary":s="array-buffer",r=0;break;case"image":s="image";break;case"image+type":s="array-buffer";break;default:s="json"}e.abortController=new AbortController;const n=e.abortController.signal;e.request=Et(e.url,{...e.options,responseType:s,timeout:r,signal:n});let o=()=>{};const a=u=>{e.duration=performance.now()-e.startTime,e.size=u instanceof ArrayBuffer?u.byteLength:e.size||0,e.result=u,this._frameTask?this._onLoadQueue.push({callback:i,task:e}):(e.abortController=null,i(e))},l=u=>{e.status===au.DOWNLOADING&&i(e,u),o()};return e.docType!=="image+type"?(e.request.then(u=>a(u.data),l),!0):(e.request.then(u=>{const c=u.data,d=g7e(c);if(s="image",e.size=c.byteLength,d==="unknown")return e.request=Et(e.url,{responseType:s,timeout:r,signal:n}),void e.request.then(g=>a(g.data),l);const f=new Blob([c],{type:d}),m=window.URL.createObjectURL(f);o=()=>window.URL.revokeObjectURL(m),e.request=Et(m,{responseType:s,timeout:r,signal:n}),e.request.then(g=>a(new v7e(g.data,d,o)),l)},l),!0)}get test(){return{loadQueue:this._loadQueue}}};h([p({readOnly:!0})],YR.prototype,"updating",void 0),YR=h([ce("esri.views.3d.support.StreamDataLoader")],YR);const y7e={numRetries:0};function g7e(t){if(t.byteLength<2)return"unknown";const e=new Uint8Array(t,0,t.byteLength);return e[0]===137&&e[1]===80?"image/png":e[0]===71&&e[1]===73?"image/gif":e[0]===66&&e[1]===77?"image/bmp":e[0]===255&&e[1]===216?"image/jpeg":"unknown"}let v7e=class{constructor(e,i,r){this.image=e,this.type=i,this.release=r}get isOpaque(){return this.type==="image/jpeg"}};class b7e extends d7e{constructor(e,i,r,s,n){super(s),this.url=e,this.options=i,this.docType=r,this.key=n,this.result=null,this.status=au.QUEUED,this.request=null,this.abortController=null,this.resolvers=new Array,this.startTime=0,this.numRetries=y7e.numRetries}}function w7e(t,e,i){return`${t}:${e}:${i}`}var au;(function(t){t[t.QUEUED=1]="QUEUED",t[t.DOWNLOADING=2]="DOWNLOADING",t[t.DOWNLOADED=3]="DOWNLOADED",t[t.CANCELLED=4]="CANCELLED"})(au||(au={}));var qW,HW,Ih,WW,JW,ZW,YW;(function(t){t[t.INNER=0]="INNER",t[t.OUTER=1]="OUTER"})(qW||(qW={})),function(t){t[t.REGULAR=0]="REGULAR",t[t.HAS_NORTH_POLE=1]="HAS_NORTH_POLE",t[t.HAS_SOUTH_POLE=2]="HAS_SOUTH_POLE",t[t.HAS_BOTH_POLES=3]="HAS_BOTH_POLES"}(HW||(HW={})),function(t){t[t.NORTH=0]="NORTH",t[t.NORTH_EAST=1]="NORTH_EAST",t[t.EAST=2]="EAST",t[t.SOUTH_EAST=3]="SOUTH_EAST",t[t.SOUTH=4]="SOUTH",t[t.SOUTH_WEST=5]="SOUTH_WEST",t[t.WEST=6]="WEST",t[t.NORTH_WEST=7]="NORTH_WEST"}(Ih||(Ih={})),function(t){t[t.OFF=0]="OFF",t[t.ON=1]="ON"}(WW||(WW={})),function(t){t[t.Color=0]="Color",t[t.ColorNoRasterImage=1]="ColorNoRasterImage",t[t.Highlight=2]="Highlight",t[t.Water=3]="Water",t[t.Occluded=4]="Occluded",t[t.ObjectAndLayerIdColor=5]="ObjectAndLayerIdColor"}(JW||(JW={})),function(t){t[t.FADING=0]="FADING",t[t.IMMEDIATE=1]="IMMEDIATE",t[t.UNFADED=2]="UNFADED"}(ZW||(ZW={})),function(t){t[t.INSIDE=0]="INSIDE",t[t.INTERSECTS=1]="INTERSECTS",t[t.OUTSIDE=2]="OUTSIDE"}(YW||(YW={}));const _7e=12;class qr{constructor(e){const i=qr.checkUnsupported(e);if(ee(i))throw i;const r=e;this.spatialReference=r.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isGCS=kD(this.spatialReference)||$3(this.spatialReference)||O3(this.spatialReference),this.origin=[r.origin.x,r.origin.y],this.pixelSize=r.size[0],this.dpi=r.dpi;const s=r.lods.reduce((u,c,d)=>(c.level<u.min&&(u.min=c.level,u.minIndex=d),u.max=Math.max(u.max,c.level),u),{min:1/0,minIndex:0,max:-1/0}),n=r.lods[s.minIndex],o=2**n.level;let a=n.resolution*o,l=n.scale*o;this.levels=new Array(s.max+1);for(let u=0;u<this.levels.length;u++)this.levels[u]={resolution:a,scale:l,tileSize:[a*r.size[0],a*r.size[1]]},a/=2,l/=2}clone(){return new qr(this.toTileInfo())}toTileInfo(){return new Ia({dpi:this.dpi,origin:new Ct({x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference}),size:[this.pixelSize,this.pixelSize],spatialReference:this.spatialReference,lods:this.levels.map((e,i)=>new Yt({level:i,scale:e.scale,resolution:e.resolution}))})}getExtent(e,i,r,s){const n=this.levels[e],o=n.tileSize[0],a=n.tileSize[1];s[0]=this.origin[0]+r*o,s[2]=this.origin[0]+(r+1)*o,s[3]=this.origin[1]-i*a,s[1]=this.origin[1]-(i+1)*a}convertExtentToRadians(e,i){this._isWebMercator?(i[0]=ZV(e[0]),i[1]=YV(e[1]),i[2]=ZV(e[2]),i[3]=YV(e[3])):this._isGCS&&(i[0]=Wv(e[0]),i[1]=Wv(e[1]),i[2]=Wv(e[2]),i[3]=Wv(e[3]))}getExtentGeometry(e,i,r,s=new Xt){return this.getExtent(e,i,r,Dc),s.spatialReference=this.spatialReference,s.xmin=Dc[0],s.ymin=Dc[1],s.xmax=Dc[2],s.ymax=Dc[3],s.zmin=void 0,s.zmax=void 0,s}ensureMaxLod(e){if(e==null)return!1;let i=!1;for(;this.levels.length<=e;){const r=this.levels[this.levels.length-1],s=r.resolution/2;this.levels.push({resolution:s,scale:r.scale/2,tileSize:[s*this.pixelSize,s*this.pixelSize]}),i=!0}return i}capMaxLod(e){this.levels.length>e+1&&(this.levels.length=e+1)}getMaxLod(){return this.levels.length-1}scaleAtLevel(e){return this.levels[0].scale/2**e}levelAtScale(e){const i=this.levels[0].scale;return e>=i?0:Math.log(i/e)*Math.LOG2E}resolutionAtLevel(e){return this.levels[0].resolution/2**e}compatibleWith(e){if(!(e instanceof qr)){if(qr.checkUnsupported(e))return!1;e=new qr(e)}if(!e.spatialReference.equals(this.spatialReference)||e.pixelSize!==this.pixelSize)return!1;const i=Math.min(this.levels.length,e.levels.length)-1,r=this.levels[i].resolution;let s=.5*r;return!bb(e.origin[0],this.origin[0],s)||!bb(e.origin[1],this.origin[1],s)?!1:(s=.5*r/2**i/this.pixelSize*_7e,bb(r,e.levels[i].resolution,s))}rootTilesInExtent(e,i=null,r=1/0){const s=new Array,n=this.levels[0].tileSize;if(Re(e)||n[0]===0||n[1]===0)return s;qr.computeRowColExtent(e,n,this.origin,Dc);let o=Dc[1],a=Dc[3],l=Dc[0],u=Dc[2];const c=u-l,d=a-o;if(c*d>r){const f=Math.floor(Math.sqrt(r));d>f&&(o=o+Math.floor(.5*d)-Math.floor(.5*f),a=o+f),c>f&&(l=l+Math.floor(.5*c)-Math.floor(.5*f),u=l+f)}for(let f=o;f<a;f++)for(let m=l;m<u;m++)s.push([0,f,m]);return ee(i)&&(i[0]=this.origin[0]+l*n[0],i[1]=this.origin[1]-a*n[1],i[2]=this.origin[0]+u*n[0],i[3]=this.origin[1]-o*n[1]),s}static computeRowColExtent(e,i,r,s){const n=.001*(e[2]-e[0]+(e[3]-e[1]));s[0]=Math.max(0,Math.floor((e[0]+n-r[0])/i[0])),s[2]=Math.max(0,Math.ceil((e[2]-n-r[0])/i[0])),s[1]=Math.max(0,Math.floor((r[1]-e[3]+n)/i[1])),s[3]=Math.max(0,Math.ceil((r[1]-e[1]-n)/i[1]))}static isPowerOfTwo(e){const i=e.lods,r=i[0].resolution*2**i[0].level;return!i.some(s=>!Sbe(s.resolution,r/2**s.level))}static hasGapInLevels(e){const i=e.lods.map(r=>r.level);i.sort((r,s)=>r-s);for(let r=1;r<i.length;r++)if(i[r]!==i[0]+r)return!0;return!1}static tileSizeSupported(e){const i=e.size[1];return i===e.size[0]&&(i&i-1)==0&&i>=128&&i<=512}static hasOriginPerLODs(e){const i=e.origin;return e.lods.some(r=>r.origin!=null&&(r.origin[0]!==i.x||r.origin[1]!==i.y))}static getMissingTileInfoError(){return new Ce("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}static checkUnsupported(e){return Re(e)?W7():e.lods.length<1?new Ce("tilingscheme:generic","Tiling scheme must have at least one level"):qr.isPowerOfTwo(e)?qr.hasGapInLevels(e)?new Ce("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):qr.tileSizeSupported(e)?qr.hasOriginPerLODs(e)?new Ce("tilingscheme:multiple-origin","Tiling scheme levels must not have their own origin"):null:new Ce("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"):new Ce("tilingscheme:power-of-two","Tiling scheme must be power of two")}static fromExtent(e,i){const r=e[2]-e[0],s=e[3]-e[1],n=Sp(i),o=1.2*Math.max(r,s),a=256,l=96,u=.0254,c=new qr(new Ia({size:[a,a],origin:new Ct({x:e[0]-.5*(o-r),y:e[3]+.5*(o-s)}),lods:[new Yt({level:0,resolution:o/a,scale:1/(a/l*u/(o*n))})],spatialReference:i}));return c.ensureMaxLod(20),c}static makeWebMercatorAuxiliarySphere(e){const i=new qr(qr.WebMercatorAuxiliarySphereTileInfo);return i.ensureMaxLod(e),i}static makeGCSWithTileSize(e,i=256,r=16){const s=256/i,n=new qr(new Ia({size:[i,i],origin:new Ct({x:-180,y:90,spatialReference:e}),spatialReference:e,lods:[new Yt({level:0,resolution:.703125*s,scale:295497598570834e-6*s})]}));return n.ensureMaxLod(r),n}get test(){return{isWebMercator:this._isWebMercator,isGCS:this._isGCS}}}function W7(){return new Ce("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}qr.WebMercatorAuxiliarySphereTileInfo=new Ia({size:[256,256],origin:new Ct({x:-20037508342787e-6,y:20037508342787e-6,spatialReference:Tt.WebMercator}),spatialReference:Tt.WebMercator,lods:[new Yt({level:0,resolution:156543.03392800014,scale:591657527591555e-6})]}),qr.WebMercatorAuxiliarySphere=qr.makeWebMercatorAuxiliarySphere(19);const Dc=Su(),KW=64;Ebe(nL/10);const x7e=Su();qr.WebMercatorAuxiliarySphere.getExtent(0,0,0,x7e);Su([-180,-90,180,90]);const Z1=Va(),S7e=Va(),ad=Va(),ld=Va();function E7e(t,e,i=0){const r=t.extent;if(Re(r))return!1;if(i===0)return a_e(r,e);const s=Math.min(r[2]-r[0],r[3]-r[1]);return u_e(r,e,i*s)}function ZT(t,e,i,r){FA(Z1,i),Z1[r]=e[r];const s=Ax(Z1,Z1,e),n=Ax(S7e,t,e),o=DA(n,s),a=DA(s,s);let l;l=o<=0?e:a<=o?i:CX(Z1,e,w9(s,s,o/a));const u=Ax(Z1,t,l);return Math.PI/2-Math.atan(u[2]/Math.sqrt(u[0]*u[0]+u[1]*u[1]))}function T7e(t,e,i){const r=t.extent;if(Re(r))return 0;ad[0]=r[0],ad[1]=r[1],ad[2]=i,ld[0]=r[2],ld[1]=r[3],ld[2]=i;let s=1/0,n=1/0;return e[0]<ad[0]?s=ZT(e,ad,ld,0):e[0]>ld[0]&&(s=ZT(e,ld,ad,0)),e[1]<ad[1]?n=ZT(e,ad,ld,1):e[1]>ld[1]&&(n=ZT(e,ld,ad,1)),Math.min(s,n)}function I7e(t,e,i){if(Re(t))return W7();if(t.spatialReference.isGeographic&&!kD(t.spatialReference))return new Ce("tilingscheme:local-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in local scenes");const r=qr.checkUnsupported(t);if(ee(r))return r;if(Re(i))return new Ce("tilingscheme:extent-not-exist","The layer does not provide a layer extent.");const s=M7e(t,i);if(s)return s;const n=t.spatialReference;return ee(e)&&!(n.equals(e)||e.isWGS84&&n.isWebMercator)?new Ce("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene"):null}function M7e(t,e){const i=t.lods,r=i[0].resolution*2**i[0].level,s=[r*t.size[0],r*t.size[1]],n=[t.origin.x,t.origin.y],o=s_e(e),a=Su();qr.computeRowColExtent(o,s,n,a);const l=(a[2]-a[0])*(a[3]-a[1]);if(l>KW){const u=i[0].scale*2**i[0].level;let c=Math.max((o[3]-o[1])/t.size[1],(o[2]-o[0])/t.size[0])*u/r;const d=Math.floor(Math.log(c)/Math.log(10));return c=Math.ceil(c/10**d)*10**d,new Ce("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(u).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+c.toLocaleString()+".",{level0Scale:u,suggestedLevel0Scale:c,requiredNumRootTiles:l,allowedNumRootTiles:KW})}return null}const A7e=Object.freeze(Object.defineProperty({__proto__:null,checkIfTileInfoSupportedForViewSR:I7e,isInsideExtent:E7e,tiltToExtentEdge:T7e},Symbol.toStringTag,{value:"Module"}));function C7e(){return!0}function $7e(){return 0}function O7e(t,e){if(Re(t))return W7();const i=t.lods.length-1,r=t.spatialReference,s=kD(r)||$3(r)||O3(r);if(r.isWebMercator){if(!qr.makeWebMercatorAuxiliarySphere(i).compatibleWith(t))return new Ce("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!s)return new Ce("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!qr.makeGCSWithTileSize(t.spatialReference,t.size[0],i).compatibleWith(t))return t.spatialReference.isWGS84?new Ce("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme"):new Ce("tilingscheme:incompatible-global","The tiling scheme is not compatible with the ArcGIS Online tiling scheme")}return ee(e)&&!t.spatialReference.equals(e)?new Ce("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene"):void 0}const R7e=Object.freeze(Object.defineProperty({__proto__:null,checkIfTileInfoSupportedForViewSR:O7e,isInsideExtent:C7e,tiltToExtentEdge:$7e},Symbol.toStringTag,{value:"Module"})),k7e={[mp.Global]:R7e,[mp.Local]:A7e};function CN(t,e,i,r){return k7e[r].checkIfTileInfoSupportedForViewSR(t,i,e)}function L7e(t,e,i){const r=B1e(t);if(ee(r)){if(!Nt.isCollection(r))return{tileInfo:r.tileInfo,fullExtent:r.fullExtent};{const s=r.find(n=>CN(n.tileInfo,n.fullExtent,e,i)==null);if(s)return{tileInfo:s.tileInfo,fullExtent:s.fullExtent}}}return{tileInfo:null,fullExtent:null}}Ih.NORTH,Ih.EAST,Ih.SOUTH,Ih.WEST;Ih.NORTH_EAST,Ih.SOUTH_EAST,Ih.SOUTH_WEST,Ih.NORTH_WEST;function P7e(t,e){return t!=null&&(e==null||(e===mp.Local?!t.isGeographic||t.isWGS84||t.wkid===du.CGCS2000:t.isWebMercator||t.isWGS84||t.wkid===du.CGCS2000||t.wkid===du.GCSMARS2000||t.wkid===du.GCSMARS2000_SPHERE||t.wkid===du.GCSMOON2000))}async function N7e(t,e={}){await D7e(t,e),pr(e)}async function F7e(t,e={}){const{basemap:i,view:r}=t;if(pr(e),"spatialReferenceLocked"in r&&!r.spatialReferenceLocked||(await i.load(e),pr(e),i.baseLayers.length===0))return;const s=i.baseLayers.getItemAt(0);if(!V1e(s))return;if(i.spatialReference){if(r.spatialReference.equals(i.spatialReference))return;QW()}await s.load(e),pr(e);const n=(("supportedSpatialReferences"in s?s.supportedSpatialReferences:null)||["tileInfo"in s?s.tileInfo?.spatialReference:null]).filter(ee);n.length!==0&&n.every(o=>!r.spatialReference.equals(o))&&QW()}function QW(){throw new Ce("basemap-compatibility:incompatible-spatial-reference","Basemap spatial reference is not compatible with the view")}async function D7e(t,e){const{basemap:i,view:r}=t;if(await i.load(e),i.baseLayers.length===0)return;const s=i.baseLayers.concat(i.referenceLayers).toArray().filter(o=>!rB(o)).map(o=>new Ce("basemap-compatibility:unsupported-basemap-layer-type","Unsupported basemap layer type ${operationalLayerType}",{layer:o,operationalLayerType:o.operationalLayerType||"unknown"}));if(s.length)throw s[0];const n=i.baseLayers.getItemAt(0);if(rB(n)){try{await n.load(e)}catch(o){const a="basemap-compatibility:unknown-error",l="Unknown basemap compatibility error",{name:u=a,message:c=l,details:d}=o;throw new Ce(u,c,d)}j7e(n,r)}}function j7e(t,e){const i=e.state.viewingMode;if(!i)return;let r,s;if(t?.type==="wmts"){const l=L7e(t,e.spatialReference,i);if(Re(l.tileInfo))throw new Ce("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view");r=l.tileInfo,s=l.fullExtent}else r=t.tileInfo,s=t.fullExtent;if(Re(r))return;if(!P7e(r.spatialReference,i))throw new Ce(`basemapgalleryitem:spatial-reference-unsupported-${yW(i)}`,`Basemap spatial reference is unsupported in ${yW(i)} mode`);const n=r.spatialReference.isGeographic,o=t?.type==="vector-tile"?r.getOrCreateCompatible(256,n?1:2):null;if(i===mp.Global){let l=CN(r,s,null,i);if(l&&t?.type==="vector-tile"&&ee(s)&&o&&!CN(o,s,null,i)&&(l=null),l){const u=r.spatialReference.isWebMercator?"web-mercator":"wgs84";throw new Ce(`basemapgalleryitem:tiling-scheme-unsupported-${u}-global`,"Basemap tiling scheme is unsupported in global mode",{error:l})}}else if(qr.checkUnsupported(r))throw new Ce("basemapgalleryitem:tiling-scheme-unsupported-local","Basemap tiling scheme is unsupported in local mode");const a=e.get("basemapTerrain.tilingScheme");if(a&&!a.compatibleWith(r)&&(t?.type!=="vector-tile"||!o||!a.compatibleWith(o)))throw new Ce("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view")}let uh=class extends qm(ea(Pt)){constructor(e){super(e),this.compatibilityFunction=null,this.error=null,this.state="loading",this.view=null}initialize(){const e=()=>this.refresh();this.handles.add([st(()=>this.basemap?.loadStatus,e),st(()=>this.compatibilityFunction,e),st(()=>this.view&&"basemapTerrain"in this.view&&this.view.basemapTerrain?.tilingScheme,e),st(()=>this.view?.ready,e),st(()=>this.view?.spatialReference,e)]),this.refresh()}destroy(){this._cancelRefresh(),this.basemap=null,this.compatibilityFunction=null,this.view=null}get _spatialReferenceTask(){return gRe(this.view,this.basemap)}set basemap(e){const i=this._get("basemap");i&&i.cancelLoad(),e&&e.load().catch(()=>{}),this._set("basemap",e)}get spatialReference(){return this._spatialReferenceTask.spatialReference}refresh(){this._cancelRefresh(),this._set("state","loading");const e=this.basemap?.loadStatus;if(e!=="loaded"&&e!=="failed")return;if(!this.compatibilityFunction)return void(e==="loaded"?(this._set("state","ready"),this._set("error",null)):(this._set("state","error"),this._set("error",this.basemap.loadError)));const i=new AbortController,{signal:r}=i;this.compatibilityFunction(this,{signal:r}).then(()=>uC(()=>!this._spatialReferenceTask.updating,r)).then(()=>{this._set("state","ready"),this._set("error",null)}).catch(s=>{vn(s)||(this._set("state","error"),this._set("error",s))}),this._refreshController=i}_cancelRefresh(){this._refreshController&&(this._refreshController.abort(),this._refreshController=null)}};h([p({readOnly:!0})],uh.prototype,"_spatialReferenceTask",null),h([p()],uh.prototype,"basemap",null),h([p()],uh.prototype,"compatibilityFunction",void 0),h([p({readOnly:!0})],uh.prototype,"error",void 0),h([p({readOnly:!0})],uh.prototype,"spatialReference",null),h([p({readOnly:!0})],uh.prototype,"state",void 0),h([p()],uh.prototype,"view",void 0),uh=h([ce("esri.widgets.BasemapGallery.support.BasemapGalleryItem")],uh);const fue=uh,mue=Nt.ofType(Em);let dx=class extends Pt{constructor(t){super(t),this.basemaps=new mue}get state(){return"ready"}refresh(){}};h([p({type:mue})],dx.prototype,"basemaps",void 0),h([p({readOnly:!0})],dx.prototype,"state",null),dx=h([ce("esri.widgets.BasemapGallery.support.LocalBasemapsSource")],dx);const yue=dx,gue=Nt.ofType(Em);let Nd=class extends Ll.LoadableMixin(C3(yue)){constructor(e){super(e),this._handles=new Ao,this.basemaps=new gue,this.filterFunction=null,this.portal=Mo.getDefault(),this.query=null,this.updateBasemapsCallback=null}initialize(){this._handles.add([st(()=>[this.filterFunction,this.loadStatus,this.portal?.basemapGalleryGroupQuery,this.portal?.user,this.query,this.updateBasemapsCallback],()=>this.refresh(),Fi)])}destroy(){this._handles.destroy(),this._handles=null,this.filterFunction=null,this.portal=null}get state(){return this.loadStatus==="not-loaded"?"not-loaded":this.loadStatus==="loading"||this._lastPortalBasemapFetchController?"loading":"ready"}load(e){return this.addResolvingPromise(this.portal.load(e)),this.notifyChange("state"),Promise.resolve(this)}async refresh(){if(this.state!=="ready")return;this._lastPortalBasemapFetchController&&(this._lastPortalBasemapFetchController.abort(),this._lastPortalBasemapFetchController=null);const e=this.portal,i=new AbortController;this._lastPortalBasemapFetchController=i,this.notifyChange("state");try{const r=await e.fetchBasemaps(this._toQueryString(this.query),i);this._updateBasemaps(r)}catch(r){if(vn(r))throw r;tt.getLogger(this.declaredClass).warn(new Ce("basemap-source:fetch-basemaps-error","Could not fetch basemaps from portal.",{error:r})),this._updateBasemaps()}this._lastPortalBasemapFetchController=null,this.notifyChange("state")}_toQueryString(e){return e&&typeof e!="string"?Object.keys(e).map(i=>`${i}:${e[i]}`).join(" AND "):e}_updateBasemaps(e=[]){let i=this.filterFunction?e.filter(this.filterFunction):e;i=this.updateBasemapsCallback?this.updateBasemapsCallback(i):i,this.basemaps.removeAll(),this.basemaps.addMany(i)}};h([p({readOnly:!0,type:gue})],Nd.prototype,"basemaps",void 0),h([p()],Nd.prototype,"filterFunction",void 0),h([p({type:Mo})],Nd.prototype,"portal",void 0),h([p()],Nd.prototype,"query",void 0),h([p({readOnly:!0})],Nd.prototype,"state",null),h([p()],Nd.prototype,"updateBasemapsCallback",void 0),Nd=h([ce("esri.widgets.BasemapGallery.support.PortalBasemapsSource")],Nd);const tA=Nd,vue=Nt.ofType(fue);function U7e(t){return t&&t.declaredClass==="esri.portal.Portal"}function V7e(t){return t&&!(t instanceof tA)&&(!!t.portal||!!t.query)}function B7e(t){return t&&"basemaps"in t&&"state"in t&&"refresh"in t}let nu=class extends ea(Ll){constructor(t){super(t),this._loadingProjectionEngine=!1,this.items=new vue,this.source=new tA,this.view=null}initialize(){const t=()=>this._recreateItems();this.handles.add([st(()=>this.state==="ready"?this.compatibilityFunction:null,()=>this._updateItems()),bn(()=>this.source?.basemaps,"change",t,{onListenerAdd:t})])}get activeBasemap(){return this.view?.map?.basemap??null}set activeBasemap(t){if(!this.view.map)return;const e=typeof t=="string"?Em.fromId(t):t;if(!e||!this.view.ready)return this.view.map.basemap=e,void this._clearOverride("activeBasemap");const i=e.spatialReference||this.items?.find(r=>this.basemapEquals(e,r.basemap))?.spatialReference;if(i&&"spatialReferenceLocked"in this.view&&!this.view.spatialReferenceLocked){const r=this.view.spatialReference;if(ee(i)&&!bs(r,i)&&!fp(this.view.spatialReference,i)&&!Cm())return this._override("activeBasemap",e),this._loadingProjectionEngine=!0,void $m().then(()=>{this._get("activeBasemap")===t&&(this.view.map.basemap=t,this.view.spatialReference=i,this._clearOverride("activeBasemap"))},()=>{}).then(()=>{this._loadingProjectionEngine=!1});this.view.map.basemap=e,this._clearOverride("activeBasemap"),ee(i)&&!bs(this.view.spatialReference,i)&&(this.view.spatialReference=i)}else this.view.map.basemap=e,this._clearOverride("activeBasemap")}get activeBasemapIndex(){const{state:t,items:e,activeBasemap:i}=this;if(t!=="ready")return-1;const r=e.findIndex(s=>s.basemap===i);return r===-1?e.findIndex(s=>this.basemapEquals(s.basemap,i)):r}get compatibilityFunction(){return this.view?.type==="3d"?N7e:F7e}set compatibilityFunction(t){this._overrideIfSome("compatibilityFunction",t)}castSource(t){return Array.isArray(t)||Nt.isCollection(t)?new yue({basemaps:t}):U7e(t)?new tA({portal:t}):V7e(t)?new tA(t):B7e(t)?t:null}get state(){return this.view?.ready&&this.source?this._loadingProjectionEngine?"loading":"ready":"disabled"}basemapEquals(t,e){return yRe(t,e)}refresh(){this._recreateItems()}load(t){return this.addResolvingPromise(Ll.isLoadable(this.source)?this.source.load(t):null),Promise.resolve(this)}_recreateItems(){const t=this.source?.basemaps,{view:e,compatibilityFunction:i}=this;this.items.removeAll().forEach(r=>r.destroy()),t&&this.items.addMany(t.map(r=>new fue({basemap:r,compatibilityFunction:i,view:e})))}_updateItems(){for(const t of this.items)t.compatibilityFunction=this.compatibilityFunction,t.view=this.view}};h([p()],nu.prototype,"_loadingProjectionEngine",void 0),h([p()],nu.prototype,"activeBasemap",null),h([p({readOnly:!0})],nu.prototype,"activeBasemapIndex",null),h([p()],nu.prototype,"compatibilityFunction",null),h([p({readOnly:!0,type:vue})],nu.prototype,"items",void 0),h([p()],nu.prototype,"source",void 0),h([mi("source")],nu.prototype,"castSource",null),h([p({readOnly:!0})],nu.prototype,"state",null),h([p()],nu.prototype,"view",void 0),nu=h([ce("esri.widgets.BasemapGallery.BasemapGalleryViewModel")],nu);const z7e=nu,ud="esri-basemap-gallery",tl={base:`${ud} esri-widget esri-widget--panel-height-only`,sourceLoading:`${ud}--source-loading`,loader:`${ud}__loader`,item:`${ud}__item`,itemContainer:`${ud}__item-container`,itemTitle:`${ud}__item-title`,itemThumbnail:`${ud}__item-thumbnail`,selectedItem:`${ud}__item--selected`,itemError:`${ud}__item--error`,emptyMessage:"esri-widget__content--empty",widgetIcon:"esri-icon-basemap",disabled:"esri-disabled",loaderAnimation:"esri-widget__loader-animation"};let Hl=class extends Pn{constructor(e,i){super(e,i),this._handles=new Ao,this._focusBasemapItemEnabled=!1,this.disabled=!1,this.headingLevel=2,this.iconClass=tl.widgetIcon,this.messages=null,this.viewModel=new z7e}initialize(){const e=this._handles;this.addHandles([bn(()=>this.viewModel.items,"change",i=>{const r="basemap-gallery-item-changes",{added:s,moved:n}=i;e.remove(r),e.add([...s,...n].map(o=>st(()=>o.state,()=>this.scheduleRender())),r),this.scheduleRender()}),Nl(()=>this.source,()=>this.viewModel.load(),{initial:!0,once:!0})])}destroy(){this._handles.destroy()}loadDependencies(){return De(()=>import("./calcite-scrim-1babd1b4.js"),["./calcite-scrim-1babd1b4.js","./scrim-b5159a35.js","./t9n-854d67dc.js","./observers-fef7c483.js","./loader-c6f8843f.js","./guid-9426053f.js","./preload-helper-388ac9d5.js"],import.meta.url)}get activeBasemap(){return this.viewModel.activeBasemap}set activeBasemap(e){this.viewModel.activeBasemap=e}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get source(){return this.viewModel.source}set source(e){this.viewModel.source=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e=this.source.state==="loading",i=this.disabled||this.viewModel.state==="disabled",r=this.viewModel.items.map((a,l)=>this._renderBasemapGalleryItem(a,l)).toArray(),s={[tl.sourceLoading]:e,[tl.disabled]:i},n=e?Ne("div",{class:tl.loader,key:"esri-basemap-gallery__loader"}):null,o=e?null:r.length>0?Ne("ul",{bind:this,"aria-disabled":this.disabled,"aria-label":this.label,class:tl.itemContainer,key:"esri-basemap-gallery__item-container",onkeydown:this._handleKeyDown,role:"radiogroup"},r):Ne("div",{class:tl.emptyMessage,key:"esri-basemap-gallery__empty-message"},Ne(kC,{level:this.headingLevel},this.messages.noBasemaps));return Ne("div",{class:this.classes(tl.base,s)},n,o)}_getRoundRobinIndex(e,i){return(e+i)%i}_handleKeyDown(e){const{key:i}=e;if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(i))return;e.preventDefault();const{items:r,activeBasemapIndex:s}=this.viewModel,n=i==="ArrowUp"||i==="ArrowLeft"?this._getRoundRobinIndex(Math.max(s-1,-1),r.length):this._getRoundRobinIndex(s+1,r.length),o=r.getItemAt(n);o?.state==="ready"&&(this.viewModel.activeBasemap=o.basemap),this._focusBasemapItemEnabled=!0}_focusBasemapItem(e){this._focusBasemapItemEnabled&&e.tabIndex===0&&(e.focus(),this._focusBasemapItemEnabled=!1)}_handleClick(e){const i=e.currentTarget["data-item"];i.state==="ready"&&(this.viewModel.activeBasemap=i.basemap)}_renderBasemapGalleryItem(e,i){const r=e.basemap.thumbnailUrl||Ui("esri/themes/base/images/basemap-toggle-64.svg"),s=e.basemap.title,n=e.basemap.portalItem?.snippet,o=e.error?.message||n||s,{viewModel:{state:a,activeBasemapIndex:l}}=this,u=this.disabled||a==="disabled",c=l===i,d=c||l===-1&&i===0?0:-1,f=a==="loading",m={[tl.selectedItem]:c,[tl.itemError]:e.state==="error"},g=`basemapgallery-item-${e.uid}`;return Ne("li",{"aria-checked":c.toString(),"aria-disabled":u.toString(),"aria-labelledby":g,bind:this,class:this.classes(tl.item,m),"data-item":e,onkeydown:this._handleClick,onclick:this._handleClick,role:"radio",tabIndex:d,afterUpdate:this._focusBasemapItem,title:o},Ne("img",{alt:"",class:tl.itemThumbnail,src:r}),Ne("div",{id:g,class:tl.itemTitle},s),e.state==="loading"||c&&f?Ne("calcite-scrim",null,Ne("span",{"aria-hidden":"true",role:"presentation",class:tl.loaderAnimation})):null)}};h([p()],Hl.prototype,"activeBasemap",null),h([p()],Hl.prototype,"disabled",void 0),h([p()],Hl.prototype,"headingLevel",void 0),h([p()],Hl.prototype,"iconClass",void 0),h([p()],Hl.prototype,"label",null),h([p(),On("esri/widgets/BasemapGallery/t9n/BasemapGallery")],Hl.prototype,"messages",void 0),h([p()],Hl.prototype,"source",null),h([p()],Hl.prototype,"view",null),h([p()],Hl.prototype,"viewModel",void 0),h([fl()],Hl.prototype,"_handleClick",null),Hl=h([ce("esri.widgets.BasemapGallery")],Hl);const Lo="esri-scale-bar",es={base:`${Lo} esri-widget`,labelContainer:`${Lo}__label-container`,rulerLabelContainer:`${Lo}__label-container--ruler`,lineLabelContainer:`${Lo}__label-container--line`,topLabelContainer:`${Lo}__label-container--top`,bottomLabelContainer:`${Lo}__label-container--bottom`,label:`${Lo}__label`,line:`${Lo}__line`,topLine:`${Lo}__line--top`,bottomLine:`${Lo}__line--bottom`,ruler:`${Lo}__ruler`,rulerBlock:`${Lo}__ruler-block`,barContainer:`${Lo}__bar-container`,rulerBarContainer:`${Lo}__bar-container--ruler`,lineBarContainer:`${Lo}__bar-container--line`,disabled:"esri-disabled"};function bue(t){if(!t)return null;if(l9(t)&&t.wkid){const e=NMe[t.wkid];if(e)return e}if(t.wkt){const e=G7e(t.wkt);if(e)return e}return null}function G7e(t){const e=LMe.exec(t);if(!e||e.length!==2)return null;const i=e[1].split(",");if(!i||i.length<3)return null;const r=parseFloat(i[1]),s=parseFloat(i[2]);return isNaN(r)||isNaN(s)?null:{a:r,f:s===0?0:1/s}}function q7e(t){const e=bue(t??Tt.WGS84);if(H7e(e))return e;const i=e.a*(1-e.f);return Object.assign(e,{b:i,eSq:1-(i/e.a)**2,radius:(2*e.a+i)/3,densificationRatio:1e4/((2*e.a+i)/3)})}function H7e(t){return t!=null&&"b"in t&&"eSq"in t&&"radius"in t}function wue(t){return bue(t)!==null}function W7e(t,e="meters"){if(!t)throw new Ce("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(t.some(r=>!wue(r.spatialReference)))throw new Ce("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let r=0;r<t.length;r++){const s=t[r],{spatialReference:n}=s,o=s.type==="polyline"?s.paths:s.rings;let a=0;for(let l=0;l<o.length;l++){const u=o[l];let c=0;for(let d=1;d<u.length;d++){const f=u[d-1][0],m=u[d][0],g=u[d-1][1],v=u[d][1];if(g!==v||f!==m){const b=new J7e;Z7e(b,[f,g],[m,v],n),c+=b.distance}}a+=c}a=ul(a,"meters",e),i.push(a)}return i}class J7e{constructor(e=0,i,r){this.distance=e,this.azimuth=i,this.reverseAzimuth=r}}function Z7e(t,e,i,r){const s=e[0]*by,n=e[1]*by,o=i[0]*by,a=i[1]*by,{a:l,b:u,f:c,radius:d}=q7e(r),f=o-s,m=Math.atan((1-c)*Math.tan(n)),g=Math.atan((1-c)*Math.tan(a)),v=Math.sin(m),b=Math.cos(m),_=Math.sin(g),S=Math.cos(g);let M,x,T,I,$,L,B,z,H,J,K=1e3,Q=f;do{if(B=Math.sin(Q),z=Math.cos(Q),T=Math.sqrt(S*B*(S*B)+(b*_-v*S*z)*(b*_-v*S*z)),T===0)return t.distance=0,t.azimuth=void 0,t.reverseAzimuth=void 0,t;$=v*_+b*S*z,L=Math.atan2(T,$),H=b*S*B/T,x=1-H*H,I=$-2*v*_/x,isNaN(I)&&(I=0),J=c/16*x*(4+c*(4-3*x)),M=Q,Q=f+(1-J)*c*H*(L+J*T*(I+J*$*(2*I*I-1)))}while(Math.abs(Q-M)>1e-12&&--K>0);if(K===0){const q=d,he=Math.acos(Math.sin(n)*Math.sin(a)+Math.cos(n)*Math.cos(a)*Math.cos(o-s))*q,te=o-s,me=Math.sin(te)*Math.cos(a),ve=Math.cos(n)*Math.sin(a)-Math.sin(n)*Math.cos(a)*Math.cos(te),_e=Math.atan2(me,ve);return t.azimuth=_e/by,t.distance=he,t.reverseAzimuth=void 0,t}const y=x*(l*l-u*u)/(u*u),A=y/1024*(256+y*(y*(74-47*y)-128)),N=u*(1+y/16384*(4096+y*(y*(320-175*y)-768)))*(L-A*T*(I+A/4*($*(2*I*I-1)-A/6*I*(4*T*T-3)*(4*I*I-3)))),D=Math.atan2(S*Math.sin(Q),b*_-v*S*Math.cos(Q)),ne=Math.atan2(b*Math.sin(Q),b*_*Math.cos(Q)-v*S);return t.azimuth=D/by,t.distance=N,t.reverseAzimuth=ne/by,t}function Y7e(t){const{wkid:e}=t;if(ue[e]!=null)return ue.values[ue[e]];const{wkt:i}=t,r=i.lastIndexOf(",")+1,s=i.lastIndexOf("]]");return parseFloat(i.substring(r,s))}function XW(t,e){return t&&t.includes(e)}function eJ(t,e){const{x:i,y:r}=t==="decimal-degrees"?Bg(e,!0):e;return[i,r]}function tJ({state:{paddedViewState:t},spatialReference:e,width:i}){return e.isWrappable&&t.worldScreenWidth<i}let Bv=class extends Pt{constructor(t){super(t),this.scaleComputedFrom=pn(),this.view=null}get state(){return this.get("view.ready")&&this.get("view.type")==="2d"?"ready":"disabled"}getScaleBarProperties(t,e){if(this.state==="disabled"||isNaN(t)||!e)return null;const i=this._getDistanceInKm(this.view,this.scaleComputedFrom);if(Re(i))return null;if(e==="metric")return this._getScaleBarProps(t,i,"metric");const r=i/1.609;return this._getScaleBarProps(t,r,"non-metric")}_getLocationUnit(){const t=this.get("view.spatialReference"),{isWebMercator:e,wkid:i,wkt:r}=t;return e||XW(r,"WGS_1984_Web_Mercator")?"decimal-degrees":ue[i]!=null||XW(r,"PROJCS")?"linear-unit":"unknown"}_getDistanceInKm(t,e){const{state:i,spatialReference:r}=t,s=this._getLocationUnit();if(s==="linear-unit")return i.extent.width*Y7e(r)/1e3;const[n,o]=this._getScaleMeasuringPoints(t,e),a=s==="decimal-degrees"||r.isGeographic&&!wue(r)?Tt.WGS84:r,l=new Ta({paths:[[eJ(s,n),eJ(s,o)]],spatialReference:a}),u=Pse(l,10);let c;try{[c]=W7e([u],"kilometers")}catch{return null}return c}_getScaleMeasuringPoints(t,e){const{width:i,height:r,position:s,spatialReference:n}=t;if(tJ(t)){const{valid:u}=Il(n);return[new Ct(u[0],0,n),new Ct(u[1],0,n)]}let o=e.y-s[1];o>r?o=r:o<0&&(o=0);const a=pn(0,o),l=pn(i,o);return[t.toMap(a),t.toMap(l)]}_getScaleBarProps(t,e,i){const{view:r}=this;let s=t*e/(tJ(r)?r.state.paddedViewState.worldScreenWidth:r.width),n=i==="metric"?"km":"mi";s<.1&&(n==="mi"?(s*=5280,n="ft"):n==="km"&&(s*=1e3,n="m"));let o=0;for(;s>=1;)s/=10,o++;const a=this._getConstraints(s);if(!a)return null;const{min:l,max:u}=a,c=u/s>=s/l?l:u;return{length:t*(c/s),value:10**o*c,unit:n}}_getConstraints(t){return t>.5?{min:.5,max:1}:t>.3?{min:.3,max:.5}:t>.2?{min:.2,max:.3}:t>.15?{min:.15,max:.2}:t>=.1?{min:.15,max:.1}:void 0}};h([p()],Bv.prototype,"scaleComputedFrom",void 0),h([p({readOnly:!0})],Bv.prototype,"state",null),h([p()],Bv.prototype,"view",void 0),Bv=h([ce("esri.widgets.Scalebar.ScaleBarViewModel")],Bv);const K7e=Bv;function YT(t){return 2*t}let jc=class extends Pn{constructor(e,i){super(e,i),this.messages=null,this.unit="non-metric",this.viewModel=new K7e}initialize(){this.addHandles([st(()=>{const{view:e}=this;return[e?.stationary,e?.center,e?.scale,e?.zoom]},([e])=>{e&&this.scheduleRender()})])}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set style(e){const i=this.unit==="dual"?"line":e;this._set("style",i)}castStyle(e){return e==="line"?e:"ruler"}castUnit(e){return e==="metric"||e==="dual"?e:"non-metric"}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e=this.get("viewModel.state")==="disabled",i={[es.disabled]:e};let r,s;if(!e){const{unit:n,style:o}=this,a=n==="metric"||n==="dual",l=50;if(n==="non-metric"||n==="dual"){const u=this.viewModel.getScaleBarProperties(l,"non-metric");u&&(s=o==="ruler"?this._renderRuler(u):this._renderLine(u,"bottom"))}if(a){const u=this.viewModel.getScaleBarProperties(l,"metric");u&&(r=o==="ruler"?this._renderRuler(u):this._renderLine(u,"top"))}}return Ne("div",{afterCreate:this._handleRootCreateOrUpdate,afterUpdate:this._handleRootCreateOrUpdate,bind:this,class:this.classes(es.base,i)},r,s)}_renderRuler(e){const i=YT(Math.round(e.length)),{messages:r}=this,s=r[e.unit]||r.unknownUnit,n=`${YT(e.value)} ${s}`;return Ne("div",{class:this.classes(es.barContainer,es.rulerBarContainer),key:"esri-scale-bar__ruler"},Ne("div",{class:es.ruler,styles:{width:`${i}px`}},Ne("div",{class:es.rulerBlock}),Ne("div",{class:es.rulerBlock}),Ne("div",{class:es.rulerBlock}),Ne("div",{class:es.rulerBlock})),Ne("div",{class:this.classes(es.labelContainer,es.rulerLabelContainer)},Ne("div",{class:es.label},"0"),Ne("div",{class:es.label},n)))}_renderLine(e,i){const{messages:r}=this,s=r[e.unit]||r.unknownUnit,n=`${YT(e.value)} ${s}`,o={[es.topLabelContainer]:i==="top",[es.bottomLabelContainer]:i==="bottom"},a=Ne("div",{class:this.classes(es.labelContainer,es.lineLabelContainer,o),key:"esri-scale-bar__label"},Ne("div",{class:es.label},n)),l={[es.topLine]:i==="top",[es.bottomLine]:i==="bottom"},u=YT(Math.round(e.length)),c=Ne("div",{class:this.classes(es.line,l),key:"esri-scale-bar__line",styles:{width:`${u}px`}});return Ne("div",{class:this.classes(es.barContainer,es.lineBarContainer),key:"esri-scale-bar__line-container"},[c,a])}_handleRootCreateOrUpdate(e){const i=this.viewModel;if(!i)return;const r=e.getBoundingClientRect(),s=r.left+window.pageXOffset,n=r.top+window.pageYOffset,o=pn(s,n);(o.x!==i.scaleComputedFrom.x||o.y!==i.scaleComputedFrom.y)&&(i.scaleComputedFrom=o)}};h([p()],jc.prototype,"label",null),h([p(),On("esri/widgets/ScaleBar/t9n/ScaleBar")],jc.prototype,"messages",void 0),h([p()],jc.prototype,"style",null),h([mi("style")],jc.prototype,"castStyle",null),h([p()],jc.prototype,"unit",void 0),h([mi("unit")],jc.prototype,"castUnit",null),h([p()],jc.prototype,"view",null),h([p()],jc.prototype,"viewModel",void 0),jc=h([ce("esri.widgets.ScaleBar")],jc);class Ii{wkid;latestWkid;wkt;constructor(e,i){typeof e=="string"?this.wkt=e:(this.wkid=e,this.latestWkid=i)}isEqual(e){return!!(this.isWebMercator()&&e.isWebMercator()||this.wkid&&e.wkid&&this.wkid===e.wkid||this.wkt&&e.wkt&&this.wkt===e.wkt||this.latestWkid&&e.latestWkid&&this.latestWkid===e.latestWkid)}clone(){const e=new Ii("");return e.latestWkid=this.latestWkid,e.wkid=this.wkid,e.wkt=this.wkt,e}lean(){const e={};return this.wkt?e.wkt=this.wkt:(e.wkid=this.wkid,this.latestWkid&&(e.latestWkid=this.latestWkid)),e}isWebMercator(){const e=[900913,3587,54004,41001,102113,102100,3785];return!!(this.wkid&&e.includes(this.wkid)||this.latestWkid&&e.includes(this.latestWkid))}static latLongSR(){return new Ii(4326)}static fromConfig(e){if(e.wkt)return new Ii(e.wkt);if(e.wkid)return new Ii(e.wkid,e.latestWkid);throw new Error("Could not parse config spatial reference object")}static parseSR(e){return e?e instanceof Ii?e.clone():new Ii(e):Ii.latLongSR()}static fromESRI(e){if(e.wkt)return new Ii(e.wkt);{const i=e.toJSON().latestWkid,r=new Ii(e.wkid);return i&&(r.latestWkid=i),r}}toESRI(){return new Tt(this.lean())}static fromGeoJSON(e){const i=Ii.parseGeoJsonCrs(e);return i.substring(0,5)==="EPSG:"?new Ii(parseInt(i.slice(5))):new Ii(i)}static parseGeoJsonCrs(e){if(e){if(e.type==="name"){const i=/urn:ogc:def:crs:EPSG::(\d+)/,r=e.properties.name,s=r.match(i);if(s)return"EPSG:"+s[1];if(r.substring(0,7)!=="urn:ogc")return r}}else return"EPSG:4326";return console.error("Encountered unsupported GeoJSON CRS format. Defaulting to lat-long, resuling conversion is likely wrong",e),"EPSG:4326"}toGeoJSON(){const e={type:"name",properties:{name:""}};return this.wkt?e.properties.name=this.wkt:e.properties.name="urn:ogc:def:crs:EPSG::"+(this.latestWkid||this.wkid),e}}class p1{sr;id;constructor(e,i){this.id=e?e.toString():"",this.sr=Ii.parseSR(i)}get type(){return Mi.UNKNOWN}childIdGenerator(e){return`${this.id}-${e}`}toESRI(){throw new Error(`.toESRI not implemented on geometry type ${this.type}`)}toGeoJSON(){throw new Error(`.toGeoJSON not implemented on geometry type ${this.type}`)}invalid(){return this.type===Mi.NONE||this.type===Mi.UNKNOWN}geoJsonFactory(e,i){const r={type:e,coordinates:i};return this.sr&&(r.crs=this.sr.toGeoJSON()),r}}class f1 extends p1{constructor(){super("no_geometry")}get type(){return Mi.NONE}}let Yo=class px extends p1{rawArray;constructor(e,i,r,s){super(e,i.sr||r),s?this.rawArray=i.slice():this.rawArray=px.parseXY(i)}get type(){return Mi.POINT}get x(){return this.rawArray[0]}set x(e){this.rawArray[0]=e}get y(){return this.rawArray[1]}set y(e){this.rawArray[1]=e}toArray(){return this.rawArray.slice()}static parseXY(e){let i;if(Array.isArray(e)&&e.length===2)i=e;else{if(e instanceof px)return e.toArray();i=[e.x,e.y]}if(isNaN(i[0])||isNaN(i[1]))throw new Error("Unsupported point format detected. Supported formats are two element array of numbers, or object with x and y properties containing numbers");return[parseFloat(i[0]),parseFloat(i[1])]}static fromESRI(e,i){return new px(i,[e.x,e.y],Ii.fromESRI(e.spatialReference),!0)}toESRI(){return new Ct({x:this.x,y:this.y,spatialReference:this.sr.toESRI()})}static fromGeoJSON(e,i){return new px(i,e.coordinates,Ii.fromGeoJSON(e.crs),!0)}toGeoJSON(){return this.geoJsonFactory(ms.POINT,this.toArray())}};class Ma extends p1{rawArray;constructor(e,i,r,s){super(e,i.sr||r),s?this.rawArray=Ma.arrayDeepCopy(i):i instanceof Ma?this.rawArray=i.toArray():this.rawArray=Ma.parsePointSet(i)}get pointArray(){return this.rawArray.map((e,i)=>new Yo(this.childIdGenerator(i),e,this.sr,!0))}getAt(e){return new Yo(this.childIdGenerator(e),this.rawArray[e],this.sr,!0)}updateAt(e,i){this.rawArray[i]=Yo.parseXY(e)}get length(){return this.rawArray.length}toArray(){return Ma.arrayDeepCopy(this.rawArray)}static parsePointSet(e){if(Array.isArray(e)){if(e.length===0)throw new Error("no verticies provided");return e.map(i=>Yo.parseXY(i))}else throw new Error("Bad geometry input encountered")}static arrayDeepCopy(e){return e.map(i=>i.slice())}}class Ob extends Ma{constructor(e,i,r,s){super(e,i,r,s)}get type(){return Mi.MULTIPOINT}static fromESRI(e,i){return new Ob(i,e.points,Ii.fromESRI(e.spatialReference),!0)}toESRI(){return new Dw({points:this.toArray(),spatialReference:this.sr.toESRI()})}static fromGeoJSON(e,i){return new Ob(i,e.coordinates,Ii.fromGeoJSON(e.crs),!0)}toGeoJSON(){return this.geoJsonFactory(ms.MULTIPOINT,this.toArray())}}class ym extends Ma{constructor(e,i,r,s){if(super(e,i,r,s),this.rawArray.length<2)throw new Error("lines require at least two verticies")}get type(){return Mi.LINESTRING}static fromESRI(e,i){return new ym(i,e.paths[0],Ii.fromESRI(e.spatialReference),!0)}toESRI(){return new Ta({paths:[this.toArray()],spatialReference:this.sr.toESRI()})}static fromGeoJSON(e,i){return new ym(i,e.coordinates,Ii.fromGeoJSON(e.crs),!0)}toGeoJSON(){return this.geoJsonFactory(ms.LINESTRING,this.toArray())}}class uc extends p1{rawArray;constructor(e,i,r,s){if(super(e,i.sr||r),s)this.rawArray=uc.arrayDeepCopy(i);else if(i instanceof uc)this.rawArray=i.toArray();else if(i instanceof Ma)this.rawArray=[i.toArray()];else if(Array.isArray(i)){if(i.length===0)throw new Error("no lines provided");this.rawArray=i.map(n=>Ma.parsePointSet(n))}else throw new Error("invalid lines format for MulitLineString")}get lineArray(){return this.rawArray.map((e,i)=>new ym(this.childIdGenerator(i),e,this.sr,!0))}getAt(e){return new ym(this.childIdGenerator(e),this.rawArray[e],this.sr,!0)}updateAt(e,i){this.rawArray[i]=Ma.parsePointSet(e)}get length(){return this.rawArray.length}get type(){return Mi.MULTILINESTRING}toArray(){return uc.arrayDeepCopy(this.rawArray)}static arrayDeepCopy(e){return e.map(i=>i.map(r=>r.slice()))}static fromESRI(e,i){return new uc(i,e.paths,Ii.fromESRI(e.spatialReference),!0)}toESRI(){return new Ta({paths:this.toArray(),spatialReference:this.sr.toESRI()})}static fromGeoJSON(e,i){return new uc(i,e.coordinates,Ii.fromGeoJSON(e.crs),!0)}toGeoJSON(){return this.geoJsonFactory(ms.MULTILINESTRING,this.toArray())}}class b0 extends Ma{constructor(e,i,r,s){if(super(e,i,r,s),b0.closeRing(this.rawArray),this.length<4)throw new Error("Linear Ring must have at least 3 distinct vertices.")}get type(){return Mi.LINEARRING}updateAt(e,i){const r=this.length-1;i===0?super.updateAt(e,r):i===r&&super.updateAt(e,0),super.updateAt(e,i)}static closeRing(e){const i=e[0],r=e[e.length-1];(i[0]!==r[0]||i[1]!==r[1])&&e.push(i.slice())}static fromESRI(e,i){return new b0(i,e.rings[0],Ii.fromESRI(e.spatialReference),!0)}toESRI(){return new ja({rings:[this.toArray()],spatialReference:this.sr.toESRI()})}static fromGeoJSON(e,i){return new b0(i,e.coordinates,Ii.fromGeoJSON(e.crs),!0)}toGeoJSON(){return this.geoJsonFactory(ms.POLYGON,[this.toArray()])}}class vo extends p1{rawArray;constructor(e,i,r,s){super(e,i.sr||r),s?this.rawArray=vo.arrayDeepCopy(i):this.rawArray=vo.parsePolygon(i)}addLinearRings(e){e.forEach(i=>this.rawArray.push(i.toArray()))}get ringArray(){return this.rawArray.map((e,i)=>new b0(this.childIdGenerator(i),e,this.sr,!0))}get type(){return Mi.POLYGON}toArray(){return vo.arrayDeepCopy(this.rawArray)}static parsePolygon(e){let i=[];if(e instanceof vo)return e.toArray();if(e instanceof uc)i=e.toArray();else if(e instanceof Ma)i=[e.toArray()];else if(Array.isArray(e)){if(e.length===0)throw new Error("no rings provided");i=e.map(r=>Ma.parsePointSet(r))}else throw new Error("invalid input format for parsePolygon");return i.forEach(r=>b0.closeRing(r)),i}static arrayDeepCopy(e){return e.map(i=>i.map(r=>r.slice()))}static fromESRI(e,i){return new vo(i,e.rings,Ii.fromESRI(e.spatialReference),!0)}toESRI(){return new ja({rings:this.toArray(),spatialReference:this.sr.toESRI()})}static fromGeoJSON(e,i){return new vo(i,e.coordinates,Ii.fromGeoJSON(e.crs),!0)}toGeoJSON(){return this.geoJsonFactory(ms.POLYGON,this.toArray())}}class Hd extends p1{rawArray;constructor(e,i,r,s){super(e,i.sr||r),s?this.rawArray=Hd.arrayDeepCopy(i):this.rawArray=Hd.parseMultiPolygon(i)}addPolygon(e){this.rawArray.push(e.toArray())}get polygonArray(){return this.rawArray.map((e,i)=>new vo(this.childIdGenerator(i),e,this.sr,!0))}get type(){return Mi.MULTIPOLYGON}toArray(){return Hd.arrayDeepCopy(this.rawArray)}static parseMultiPolygon(e){if(e instanceof Hd)return e.toArray();if(e instanceof vo)return[e.toArray()];if(e instanceof uc||e instanceof Ma)return[vo.parsePolygon(e)];if(Array.isArray(e)){if(e.length===0)throw new Error("no polygons provided");return e.map(i=>vo.parsePolygon(i))}else throw new Error("invalid input format for parseMultiPolygon")}static arrayDeepCopy(e){return e.map(i=>i.map(r=>r.map(s=>s.slice())))}static fromESRI(e,i){return new Hd(i,[e.rings],Ii.fromESRI(e.spatialReference),!0)}toESRI(){const e=[];return this.toArray().forEach(i=>{i.forEach(r=>e.push(r))}),new ja({rings:e,spatialReference:this.sr.toESRI()})}static fromGeoJSON(e,i){return new Hd(i,e.coordinates,Ii.fromGeoJSON(e.crs),!0)}toGeoJSON(){return this.geoJsonFactory(ms.MULTIPOLYGON,this.toArray())}}class Wr extends p1{rawMin;rawMax;constructor(e,i,r,s){super(e,i.sr||s),this.rawMin=Yo.parseXY(i),this.rawMax=Yo.parseXY(r)}get type(){return Mi.EXTENT}get xmin(){return this.rawMin[0]}get ymin(){return this.rawMin[1]}get xmax(){return this.rawMax[0]}get ymax(){return this.rawMax[1]}center(){return new Yo(this.id+"_centerPoint",[(this.xmax-this.xmin)/2+this.xmin,(this.ymax-this.ymin)/2+this.ymin],this.sr,!0)}expand(e){return Wr.fromESRI(this.toESRI().expand(e),`${this.id}-expanded`)}clone(){return new Wr(this.id,this.rawMin,this.rawMax,this.sr)}toArray(){return[this.rawMin.slice(),this.rawMax.slice()]}toPolygonArray(){return[[this.rawMin.slice(),[this.xmin,this.ymax],this.rawMax.slice(),[this.xmax,this.ymin],this.rawMin.slice()]]}toPolygon(){return new vo(this.id,this.toPolygonArray(),this.sr,!0)}static fromParams(e,i,r,s,n,o){return new Wr(e,[i,r],[s,n],o)}static fromConfig(e,i){return new Wr(e,[i.xmin,i.ymin],[i.xmax,i.ymax],Ii.fromConfig(i.spatialReference))}isEqual(e){return e?this.xmin===e.xmin&&this.ymin===e.ymin&&this.xmax===e.xmax&&this.ymax===e.ymax:!1}static fromESRI(e,i){return Wr.fromParams(i,e.xmin,e.ymin,e.xmax,e.ymax,Ii.fromESRI(e.spatialReference))}toESRI(){return new Xt({xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax,spatialReference:this.sr.toESRI()})}static fromArcServer(e,i){return Wr.fromESRI(Xt.fromJSON(e),i)}static fromGeoJSON(e,i){if(e.coordinates.length!==5)throw new Error("Extent expected a four vertex polygon from GeoJSON");const r=e.coordinates[0].slice(),s=r.slice();return[1,2,3].forEach(n=>{[0,1].forEach(o=>{const a=e.coordinates[n];r[o]>a[o]&&(r[o]=a[o]),s[o]<a[o]&&(s[o]=a[o])})}),new Wr(i,r,s,Ii.fromGeoJSON(e.crs))}toGeoJSON(){return this.geoJsonFactory(ms.POLYGON,this.toPolygonArray())}}class yp{c;constructor(e){if(!e){this.c=[0,0,0,1];return}if(Array.isArray(e)){const i=e.length;if(i<3||i>4){console.error("Invalid colour value array passed to Colour class"),this.c=[0,0,0,1];return}this.c=e.map((r,s)=>s===3?r:parseInt(r)),i===3&&this.c.push(1)}else if(typeof e=="string"){const i=e.substring(0,1)==="#"?e.substring(1):e;this.c=[0,2,4,6].map(r=>{const s=i.substring(r,r+2);return yp.hexToInt(s)})}else this.c=[e.r,e.g,e.b,e.a??1];this.c.forEach((i,r)=>{i<0&&(console.error("Negative value passed to colour"),this.c[r]=0),i>255&&(console.error("Rotund value passed to colour"),this.c[r]=255)}),this.c[3]>1&&(this.c[3]=this.c[3]/255)}get rgba(){return this.c.slice()}get hex(){const e=this.rgba;return e[3]=e[3]*255,`#${e.map(i=>yp.intToHex(i)).join("")}`}get r(){return this.c[0]}get g(){return this.c[1]}get b(){return this.c[2]}get a(){return this.c[3]}toESRI(){return new It(this.rgba)}toArcServer(){return[this.c[0],this.c[1],this.c[2],255*this.c[3]]}static hexToInt(e){return e.length===0?255:parseInt(e,16)}static intToHex(e){const i=e.toString(16);return i.length===1?`0${i}`:i}}class Wd{toOptions(){throw new Error(".toOptions called on BaseStyle. Likely was not implemented on subclass.")}toESRI(){throw new Error(".toESRI called on BaseStyle. Likely was not implemented on subclass.")}static convToPoints(e){if(!(typeof e>"u"))if(typeof e=="string"){let i;const r=e.length;if(r===0)return;const s=e.substring(r-2);return s==="px"?i=parseFloat(e.substring(0,r-2))*1.333333:s==="pt"?i=parseFloat(e.substring(0,r-2)):i=parseFloat(e),i}else return e}}class nm extends Wd{_height;_xOffset;_yOffset;_icon;_width;_size;_colour;_style;_outline;_path;_angle;constructor(e){if(e=e||{style:dd.CIRCLE},super(),this._style=e.style||dd.CIRCLE,e.style===dd.ICON){const i=e;this._icon=i.icon||"",this._height=Wd.convToPoints(i.height)||16.5,this._width=Wd.convToPoints(i.width)||16.5,this._size=0,this._colour=new yp,this._outline=new kh,this._path=""}else{const i=e;this._size=Wd.convToPoints(i.size)||12,this._colour=new yp(i.colour??"#ffffff40"),this._outline=new kh(i.outline),this._path=this._style===dd.PATH&&i.path||"",this._height=0,this._width=0,this._icon=""}this._xOffset=Wd.convToPoints(e.xOffset)||0,this._yOffset=Wd.convToPoints(e.yOffset)||0,this._angle=e.angle||0}get colour(){return this.propGrouse(!1),this._colour}get styleType(){return this._style}get width(){return this.propGrouse(!0),this._width}get height(){return this.propGrouse(!0),this._height}get size(){return this.propGrouse(!1),this._size}get xOffset(){return this._xOffset}get yOffset(){return this._yOffset}get angle(){return this._angle}get icon(){return this.propGrouse(!0),this._icon}get outline(){return this.propGrouse(!1),this._outline}get path(){return this.propGrouse(!1),this._path}propGrouse(e){this._style===dd.ICON!==e&&console.warn(`Accessed a point style property that is invalid for the style type ${this._style}`)}toOptions(){const e={style:this.styleType,yOffset:this.yOffset,xOffset:this.xOffset,angle:this.angle};return this._style===dd.ICON?{...e,icon:this.icon,width:this.width,height:this.height}:{...e,size:this.size,colour:this.colour.hex,path:this.path}}toESRI(){let e;return this.styleType===dd.ICON?nm.isImageUrl(this.icon)?(e=new cm,e.url=this.icon,e.width=this.width,e.height=this.height,e.xoffset=this.xOffset,e.yoffset=this.yOffset,e.angle=this.angle):(e=new Eu,e.color=new It(this.colour.rgba),e.size=this.width,e.xoffset=this.xOffset,e.yoffset=this.yOffset,e.angle=this.angle):(e=new Eu,e.color=new It(this.colour.rgba),e.size=this.size,e.xoffset=this.xOffset,e.yoffset=this.yOffset,e.angle=this.angle,e.path=this.path,e.style=this.styleType,e.outline=this.outline.toESRI()),e}static fromESRI(e){const i={xOffset:e.xoffset,yOffset:e.yoffset,angle:e.angle};if(e.type==="simple-marker"){const r=i;r.style=e.style,r.colour=e.color.toRgba(),r.size=e.size,r.path=e.path,r.outline=kh.fromESRI(e.outline).toOptions()}else{const r=i;r.style=dd.ICON,r.width=e.width,r.height=e.height,r.icon=e.url}return new nm(i)}static fromArcServer(e){return nm.fromESRI(X9(e))}static isImageUrl(e){return!!e.match(/\.(jpeg|jpg|gif|png|swf|svg)$/)||!!e.match(/^\s*data:([a-z]+\/[a-z0-9\-\+]+(;[a-z\-]+\=[a-z0-9\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i)}}class kh extends Wd{_style;_width;_miter;_cap;_join;_colour;constructor(e){e=e||{},super(),this._style=e.style||ma.SOLID;const i=Wd.convToPoints(e.width);this._width=typeof i>"u"||i<0?.75:i,this._colour=new yp(e.colour),this._miter=e.miter??2,this._cap=e.cap||mK.ROUND,this._join=e.join||fK.ROUND}get styleType(){return this._style}get width(){return this._width}get colour(){return this._colour}get miter(){return this._miter}get cap(){return this._cap}get join(){return this._join}toOptions(){return{style:this.styleType,width:this.width,colour:this.colour.hex,miter:this.miter,cap:this.cap,join:this.join}}toESRI(){const e=new za;return e.width=this.width,e.color=this.colour.toESRI(),e.style=this.styleType,e.cap=this.cap,e.miterLimit=this.miter,e.join=this.join,e}static fromESRI(e){const i={width:e.width,colour:e.color.toRgba(),style:e.style};return new kh(i)}static fromArcServer(e){return kh.fromESRI(X9(e))}}class YS extends Wd{_outlineStyle;_fillColour;_fillStyle;constructor(e){super(),e=e||{},e.fill||(e.fill={}),this._fillColour=new yp(e.fill.colour),this._fillStyle=e.fill.style||yK.SOLID,this._outlineStyle=new kh(e.outline)}get fillColour(){return this._fillColour}get fillStyleType(){return this._fillStyle}get outline(){return this._outlineStyle}toOptions(){return{fill:{style:this.fillStyleType,colour:this.fillColour.hex},outline:this.outline.toOptions()}}toESRI(){const e=this.outline.toESRI(),i=new It(this.fillColour.rgba),r=new Tp;return r.style=this.fillStyleType,r.color=i,r.outline=e,r}static fromESRI(e){const i={fill:{colour:e.color.toRgba(),style:e.style},outline:kh.fromESRI(e.outline).toOptions()};return new YS(i)}static fromArcServer(e){return YS.fromESRI(X9(e))}}class Q7e{Extent=Wr;Graphic=jh;LineString=ym;LineStyle=kh;LinearRing=b0;MultiLineString=uc;MultiPoint=Ob;MultiPolygon=Hd;Point=Yo;PointStyle=nm;Polygon=vo;PolygonStyle=YS;SpatialReference=Ii;esriMapClickToRamp(e,i){return{mapPoint:Yo.fromESRI(e.mapPoint,i),screenX:e.x,screenY:e.y,button:e.button,input:e.native.pointerType,clickTime:e.timestamp}}esriMapMouseToRamp(e){return{screenX:e.x,screenY:e.y,button:e.button,moveTime:e.timestamp}}geomRampToEsri(e){return e.toESRI()}geomEsriToRamp(e,i){switch(e.type){case"point":return Yo.fromESRI(e,i);case"polyline":{const r=e;return r.paths.length===1?ym.fromESRI(r,i):uc.fromESRI(r,i)}case"polygon":return vo.fromESRI(e,i);case"extent":return Wr.fromESRI(e,i);case"multipoint":return Ob.fromESRI(e,i);default:throw new Error(`Encountered unhandled geometry type ${e.type}`)}}geomGeoJsonToRamp(e,i){switch(e.type){case ms.POINT:return Yo.fromGeoJSON(e,i);case ms.LINESTRING:return ym.fromGeoJSON(e,i);case ms.POLYGON:return vo.fromGeoJSON(e,i);case ms.MULTIPOINT:return Ob.fromGeoJSON(e,i);case ms.MULTILINESTRING:return uc.fromGeoJSON(e,i);case ms.MULTIPOLYGON:return Hd.fromGeoJSON(e,i);default:throw new Error(`Encountered unhandled geometry type ${e.type}`)}}geomRampToGeoJson(e){return e.toGeoJSON()}graphicRampToGeoJson(e){const i={},r={type:"Feature",geometry:this.geomRampToGeoJson(e.geometry),properties:i};return Object.keys(e.attributes).forEach(s=>r.properties[s]=e.attributes[s]),r}graphicGeoJsonToRamp(e,i){if(e.type!=="Feature")throw new Error("Expected input parameter of graphicGeoJsonToRamp to be a GeoJson feature");const r=this.geomGeoJsonToRamp(e.geometry,i),s={};return Object.keys(e.properties.forEach(o=>s[o]=e.properties[o])),new jh(r,"",s)}graphicRampToEsri(e){const i={attributes:{},id:e.id};return i.geometry=this.geomRampToEsri(e.geometry),Object.keys(e.attributes).forEach(r=>i.attributes[r]=e.attributes[r]),e.style&&(i.symbol=this.styleRampToEsri(e.style)),new kn(i)}styleRampToEsri(e){return e.toESRI()}styleEsriToRamp(e){switch(e.type){case"picture-marker":case"simple-marker":return nm.fromESRI(e);case"simple-line":return kh.fromESRI(e);case"simple-fill":return YS.fromESRI(e);default:return console.error(`Unsupported ESRI symbol type encountered: ${e.type}`),new nm}}serverGeomTypeToRampGeomType(e){if(!e)return Mi.NONE;switch(e){case"esriGeometryPolygon":return Mi.POLYGON;case"esriGeometryPolyline":return Mi.LINESTRING;case"esriGeometryPoint":return Mi.POINT;case"esriGeometryMultipoint":return Mi.MULTIPOINT;case"esriGeometryEnvelope":return Mi.EXTENT;default:return console.error(`Unrecognized server geometry type encountered: ${e}`),Mi.UNKNOWN}}clientGeomTypeToRampGeomType(e){if(!e)return Mi.NONE;switch(e){case"polygon":return Mi.POLYGON;case"polyline":return Mi.LINESTRING;case"point":return Mi.POINT;case"multipoint":return Mi.MULTIPOINT;default:return console.error(`Unrecognized client geometry type encountered: ${e}`),Mi.UNKNOWN}}geoJsonGeomTypeToEsriGeomType(e){switch(e){case ms.POINT:return"point";case ms.LINESTRING:case ms.MULTILINESTRING:return"polyline";case ms.POLYGON:case ms.MULTIPOLYGON:return"polygon";case ms.MULTIPOINT:return"multipoint";default:throw new Error(`Encountered unhandled geometry type ${e}`)}}isImageUrl(e){return nm.isImageUrl(e)}}class R5{layerIdx;name;children;uid;isRoot;constructor(e,i,r="",s=!0){this.layerIdx=e,this.name=r,this.isRoot=s,this.children=[],this.uid=i}findChildByUid(e){if(this.uid===e)return this;{let i;return this.children.some(r=>i=r.findChildByUid(e)),i}}findChildByIdx(e){if(this.layerIdx===e)return this;{let i;return this.children.some(r=>i=r.findChildByIdx(e)),i}}get isLogicalLayer(){return this.layerIdx>-1&&this.children.length===0}get isLayerRoot(){return this.isRoot}}class _ue{minScale;maxScale;constructor(e=0,i=0){this.minScale=e,this.maxScale=i}isOffScale(e){const i={offScale:!1,zoomIn:!1};return e<this.maxScale&&this.maxScale!==0?(i.offScale=!0,i.zoomIn=!1):e>this.minScale&&this.minScale!==0&&(i.offScale=!0,i.zoomIn=!0),i}}class xue{sql;cache;extent;constructor(e="",i=""){this.sql={[Ho.PERMANENT]:e,[Ho.INITIAL]:i},this.extent=void 0,this.cache={}}sqlActiveFilters(e=[]){const i=this.sql,r=Object.keys(i).filter(s=>i[s]);return e.length===0?r:r.filter(s=>e.indexOf(s)===-1)}isActive(){return this.sqlActiveFilters([Ho.PERMANENT]).length>0}getCombinedSql(e=[]){const i=this.sqlActiveFilters(e),r=i.length;return r===0?"":r===1?this.sql[i[0]]:i.map(s=>`(${this.sql[s]})`).join(" AND ")}setSql(e,i){e===Ho.PERMANENT?console.error("Attempted to overwrite a permanent filter. Not allowed."):(this.sql[e]=i,this.clearCacheSet(e))}getSql(e){return this.sql[e]||""}setExtent(e){e.isEqual(this.extent)||(this.extent=e,this.clearCacheSet(Ho.EXTENT))}getCacheKey(e,i){return`_cache$${e.sort().join("$")}${i?"$"+Ho.EXTENT:""}$`}getCache(e,i){const r=this.getCacheKey(e,i);return this.cache[r]}setCache(e,i,r){const s=this.getCacheKey(i,r);this.cache[s]=e}cacheActiveKeys(){const e=this.cache;return Object.keys(e).filter(i=>e[i])}clearAllCaches(){this.cache={}}clearCacheSet(e){this.cacheActiveKeys().forEach(i=>{i.indexOf(`$${e}$`)>-1&&delete this.cache[i]})}clearAll(){this.sql={[Ho.PERMANENT]:this.sql[Ho.PERMANENT]},this.extent=void 0,this.clearAllCaches()}}class KS{id;sr;_defaultExtent;_fullExtent;_maximumExtent;constructor(e,i,r=void 0,s=void 0){this.id=e,this.sr=i.sr.clone(),this._defaultExtent=i.clone(),this._fullExtent=r?.clone(),this._maximumExtent=s?.clone(),r&&!r.sr.isEqual(this.sr)&&console.error(`Full extent provided in extent set has a mismatching spatial reference: ${r.sr}`),s&&!s.sr.isEqual(this.sr)&&console.error(`Maximum extent provided in extent set has a mismatching spatial reference: ${s.sr}`)}get defaultExtent(){return this._defaultExtent}set defaultExtent(e){this._defaultExtent=e.clone()}get fullExtent(){return this._fullExtent?this._fullExtent:this.defaultExtent}set fullExtent(e){this._fullExtent=e.clone()}get maximumExtent(){return this._maximumExtent?this._maximumExtent:this.fullExtent}set maximumExtent(e){this._maximumExtent=e.clone()}static fromConfig(e){return new KS(e.id,Wr.fromConfig(`${e.id}-extent-default`,e.default),e.full!==void 0?Wr.fromConfig(`${e.id}-extent-full`,e.full):void 0,e.maximum!==void 0?Wr.fromConfig(`${e.id}-extent-maximum`,e.maximum):void 0)}clone(){return new KS(this.id,this._defaultExtent,this._fullExtent,this._maximumExtent)}}class fn{realPromise;resolveMe(){}rejectMe(){}getPromise(){return this.realPromise}constructor(){this.realPromise=new Promise((e,i)=>{this.resolveMe=e,this.rejectMe=i})}}var Hn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function n_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function X7e(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var i=function r(){if(this instanceof r){var s=[null];s.push.apply(s,arguments);var n=Function.bind.apply(e,s);return new n}return e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(i,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),i}var eje=function(e){return tje(e)&&!ije(e)};function tje(t){return!!t&&typeof t=="object"}function ije(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||nje(t)}var rje=typeof Symbol=="function"&&Symbol.for,sje=rje?Symbol.for("react.element"):60103;function nje(t){return t.$$typeof===sje}function oje(t){return Array.isArray(t)?[]:{}}function QS(t,e){return e.clone!==!1&&e.isMergeableObject(t)?uw(oje(t),t,e):t}function aje(t,e,i){return t.concat(e).map(function(r){return QS(r,i)})}function lje(t,e){if(!e.customMerge)return uw;var i=e.customMerge(t);return typeof i=="function"?i:uw}function uje(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function iJ(t){return Object.keys(t).concat(uje(t))}function Sue(t,e){try{return e in t}catch{return!1}}function cje(t,e){return Sue(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function hje(t,e,i){var r={};return i.isMergeableObject(t)&&iJ(t).forEach(function(s){r[s]=QS(t[s],i)}),iJ(e).forEach(function(s){cje(t,s)||(Sue(t,s)&&i.isMergeableObject(e[s])?r[s]=lje(s,i)(t[s],e[s],i):r[s]=QS(e[s],i))}),r}function uw(t,e,i){i=i||{},i.arrayMerge=i.arrayMerge||aje,i.isMergeableObject=i.isMergeableObject||eje,i.cloneUnlessOtherwiseSpecified=QS;var r=Array.isArray(e),s=Array.isArray(t),n=r===s;return n?r?i.arrayMerge(t,e,i):hje(t,e,i):QS(e,i)}uw.all=function(e,i){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,s){return uw(r,s,i)},{})};var dje=uw,pje=dje;const Eue=n_(pje);class fje{generateUUID(){let e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const r=(e+Math.random()*16)%16|0;return e=Math.floor(e/16),(i==="x"?r:r&3|8).toString(16)})}convertImageToCanvas(e,i,r=!0){const s=i??window.document.createElement("canvas"),n=window.document.createElement("img");r&&(n.crossOrigin="anonymous");const o=new Promise((a,l)=>{n.addEventListener("load",()=>{s.width=n.width,s.height=n.height,s.getContext("2d")?.drawImage(n,0,0),a(s)}),n.addEventListener("error",u=>l(u))});return n.src=e,o}async convertImagetoDataURL(e,i="image/png"){return e.startsWith("data")?e:this.convertImageToCanvas(e).then(r=>r.toDataURL(i)).catch(r=>(console.error("Failed to load crossorigin image",e,r),e))}parseUrlIndex(e){const i={rootUrl:e,index:0},r=/\/(\d+)\/?$/,s=e.match(r);if(s){const n=s[1];i.index=isNaN(parseInt(n))?void 0:parseInt(n),i.rootUrl=e.substr(0,e.length-s[0].length)}else console.warn("Cannot extract layer index from url "+e);return i}}class k5{_url;_base;_query;_queryMap={};constructor(e){this._url=e,[this._base,this._query]=e.split("?").concat(""),this._queryMap=this._query.split("&").reduce((i,r)=>{const[s,n]=r.split("=");return i[s]=n,i},{})}get query(){return this._query}get base(){return this._base}get queryMap(){return this._queryMap}updateQuery(e){const i=Eue.all([{},this.queryMap,e]);return`${this.base}${Object.entries(i).filter(([,s])=>s!==void 0).map(([s,n],o)=>`${o===0?"?":""}${s}=${n}`).join("&")}`}}var KR={exports:{}},rJ;function Tue(){return rJ||(rJ=1,function(t,e){(function(i,r){t.exports=r(),typeof window=="object"&&(i.Terraformer=r())})(Hn,function(){var i={},r=6378137,s=57.29577951308232,n=.017453292519943,o={type:"link",properties:{href:"http://spatialreference.org/ref/sr-org/6928/ogcwkt/",type:"ogcwkt"}},a={type:"link",properties:{href:"http://spatialreference.org/ref/epsg/4326/ogcwkt/",type:"ogcwkt"}};function l(U){return Object.prototype.toString.call(U)==="[object Array]"}function u(){var U=Array.prototype.slice.apply(arguments);typeof console!==void 0&&console.warn&&console.warn.apply(console,U)}function c(U,le){for(var re in le)le.hasOwnProperty(re)&&(U[re]=le[re]);return U}function d(U){if(U.type)switch(U.type){case"Point":return[U.coordinates[0],U.coordinates[1],U.coordinates[0],U.coordinates[1]];case"MultiPoint":return g(U.coordinates);case"LineString":return g(U.coordinates);case"MultiLineString":return f(U.coordinates);case"Polygon":return f(U.coordinates);case"MultiPolygon":return m(U.coordinates);case"Feature":return U.geometry?d(U.geometry):null;case"FeatureCollection":return v(U);case"GeometryCollection":return b(U);default:throw new Error("Unknown type: "+U.type)}return null}function f(U){for(var le=null,re=null,k=null,O=null,C=0;C<U.length;C++)for(var G=U[C],Z=0;Z<G.length;Z++){var F=G[Z],ie=F[0],ge=F[1];(le===null||ie<le)&&(le=ie),(re===null||ie>re)&&(re=ie),(k===null||ge<k)&&(k=ge),(O===null||ge>O)&&(O=ge)}return[le,k,re,O]}function m(U){for(var le=null,re=null,k=null,O=null,C=0;C<U.length;C++)for(var G=U[C],Z=0;Z<G.length;Z++)for(var F=G[Z],ie=0;ie<F.length;ie++){var ge=F[ie],xe=ge[0],fe=ge[1];(le===null||xe<le)&&(le=xe),(re===null||xe>re)&&(re=xe),(k===null||fe<k)&&(k=fe),(O===null||fe>O)&&(O=fe)}return[le,k,re,O]}function g(U){for(var le=null,re=null,k=null,O=null,C=0;C<U.length;C++){var G=U[C],Z=G[0],F=G[1];(le===null||Z<le)&&(le=Z),(re===null||Z>re)&&(re=Z),(k===null||F<k)&&(k=F),(O===null||F>O)&&(O=F)}return[le,k,re,O]}function v(U){for(var le=[],re,k=U.features.length-1;k>=0;k--)re=d(U.features[k].geometry),le.push([re[0],re[1]]),le.push([re[2],re[3]]);return g(le)}function b(U){for(var le=[],re,k=U.geometries.length-1;k>=0;k--)re=d(U.geometries[k]),le.push([re[0],re[1]]),le.push([re[2],re[3]]);return g(le)}function _(U){var le=d(U);return{x:le[0],y:le[1],w:Math.abs(le[0]-le[2]),h:Math.abs(le[1]-le[3])}}function S(U){return U*s}function M(U){return U*n}function x(U,le){for(var re=0;re<U.length;re++)typeof U[re][0]=="number"&&(U[re]=le(U[re])),typeof U[re]=="object"&&(U[re]=x(U[re],le));return U}function T(U){var le=U[0],re=U[1];return[S(le/r)-Math.floor((S(le/r)+180)/360)*360,S(Math.PI/2-2*Math.atan(Math.exp(-1*re/r)))]}function I(U){var le=U[0],re=Math.max(Math.min(U[1],89.99999),-89.99999);return[M(le)*r,r/2*Math.log((1+Math.sin(M(re)))/(1-Math.sin(M(re))))]}function $(U,le,re){if(U.type==="Point")U.coordinates=le(U.coordinates);else if(U.type==="Feature")U.geometry=$(U.geometry,le,!0);else if(U.type==="FeatureCollection")for(var k=0;k<U.features.length;k++)U.features[k]=$(U.features[k],le,!0);else if(U.type==="GeometryCollection")for(var O=0;O<U.geometries.length;O++)U.geometries[O]=$(U.geometries[O],le,!0);else U.coordinates=x(U.coordinates,le);return re||le===I&&(U.crs=o),le===T&&delete U.crs,U}function L(U){return $(U,I)}function B(U){return $(U,T)}function z(U,le){return U<le?-1:U>le?1:0}function H(U,le){return U[0]>le[0]?-1:U[0]<le[0]?1:U[1]>le[1]?-1:U[1]<le[1]?1:0}function J(U,le,re){return z((le[0]-U[0])*(re[1]-U[1])-(re[0]-U[0])*(le[1]-U[1]),0)}function K(U,le){var re=le[0]-U[0],k=le[1]-U[1];return re*re+k*k}function Q(U,le){var re=le;for(var k in U){var O=J(le,re,U[k]);(O===-1||O===0&&K(le,U[k])>K(le,re))&&(re=U[k])}return re}function y(U){if(U.length===0)return[];if(U.length===1)return U;for(var le=[U.sort(H)[0]],re=0;re<le.length;re++){var k=Q(U,le[re]);k!==le[0]&&le.push(k)}return le}function A(U){for(var le,re=0;re<U.length-3;re++){var k=U[re],O=U[re+1],C=U[re+2],G=[O[0]-k[0],O[1]-k[1]],Z=C[0]*G[1]-C[1]*G[0]+G[0]*k[1]-G[1]*k[0];if(re===0)Z<0?le=!0:le=!1;else if(le&&Z>0||!le&&Z<0)return!1}return!0}function N(U,le){for(var re=!1,k=-1,O=U.length,C=O-1;++k<O;C=k)(U[k][1]<=le[1]&&le[1]<U[C][1]||U[C][1]<=le[1]&&le[1]<U[k][1])&&le[0]<(U[C][0]-U[k][0])*(le[1]-U[k][1])/(U[C][1]-U[k][1])+U[k][0]&&(re=!re);return re}function D(U,le){if(U&&U.length){if(U.length===1)return N(U[0],le);if(N(U[0],le)){for(var re=1;re<U.length;re++)if(N(U[re],le))return!1;return!0}else return!1}else return!1}function ne(U,le,re,k){var O=(k[0]-re[0])*(U[1]-re[1])-(k[1]-re[1])*(U[0]-re[0]),C=(le[0]-U[0])*(U[1]-re[1])-(le[1]-U[1])*(U[0]-re[0]),G=(k[1]-re[1])*(le[0]-U[0])-(k[0]-re[0])*(le[1]-U[1]);if(G!==0){var Z=O/G,F=C/G;if(0<=Z&&Z<=1&&0<=F&&F<=1)return!0}return!1}function q(U){return!isNaN(parseFloat(U))&&isFinite(U)}function he(U,le){if(q(U[0][0])){if(q(le[0][0])){for(var re=0;re<U.length-1;re++)for(var k=0;k<le.length-1;k++)if(ne(U[re],U[re+1],le[k],le[k+1]))return!0}else for(var O=0;O<le.length;O++)if(he(U,le[O]))return!0}else for(var C=0;C<U.length;C++)if(he(U[C],le))return!0;return!1}function te(U){for(var le=[],re=0;re<U.length;re++){var k=U[re].slice();me(k[0],k[k.length-1])===!1&&k.push(k[0]),le.push(k)}return le}function me(U,le){for(var re=0;re<U.length;re++)if(U[re]!==le[re])return!1;return!0}function ve(U,le){if(U.length!==le.length)return!1;for(var re=U.slice().sort(H),k=le.slice().sort(H),O=0;O<re.length;O++){if(re[O].length!==k[O].length)return!1;for(var C=0;C<re.length;C++)if(re[O][C]!==k[O][C])return!1}return!0}var _e=["length"];function Se(U){if(U)switch(U.type){case"Point":return new Oe(U);case"MultiPoint":return new Te(U);case"LineString":return new we(U);case"MultiLineString":return new Ie(U);case"Polygon":return new Ae(U);case"MultiPolygon":return new W(U);case"Feature":return new V(U);case"FeatureCollection":return new j(U);case"GeometryCollection":return new se(U);default:throw new Error("Unknown type: "+U.type)}}Se.prototype.toMercator=function(){return L(this)},Se.prototype.toGeographic=function(){return B(this)},Se.prototype.envelope=function(){return _(this)},Se.prototype.bbox=function(){return d(this)},Se.prototype.convexHull=function(){var U=[],le,re;if(this.type==="Point")return null;if(this.type==="LineString"||this.type==="MultiPoint")if(this.coordinates&&this.coordinates.length>=3)U=this.coordinates;else return null;else if(this.type==="Polygon"||this.type==="MultiLineString")if(this.coordinates&&this.coordinates.length>0){for(le=0;le<this.coordinates.length;le++)U=U.concat(this.coordinates[le]);if(U.length<3)return null}else return null;else if(this.type==="MultiPolygon")if(this.coordinates&&this.coordinates.length>0){for(le=0;le<this.coordinates.length;le++)for(re=0;re<this.coordinates[le].length;re++)U=U.concat(this.coordinates[le][re]);if(U.length<3)return null}else return null;else if(this.type==="Feature"){var k=new Se(this.geometry);return k.convexHull()}return new Ae({type:"Polygon",coordinates:te([y(U)])})},Se.prototype.toJSON=function(){var U={};for(var le in this)this.hasOwnProperty(le)&&_e.indexOf(le)===-1&&(U[le]=this[le]);return U.bbox=d(this),U},Se.prototype.contains=function(U){return new Se(U).within(this)},Se.prototype.within=function(U){var le,re,k,O;if(U.type==="Feature"&&(U=U.geometry),U.type==="Point"&&this.type==="Point")return me(this.coordinates,U.coordinates);if(U.type==="MultiLineString"&&this.type==="Point")for(re=0;re<U.coordinates.length;re++){var C={type:"LineString",coordinates:U.coordinates[re]};if(this.within(C))return!0}if((U.type==="LineString"||U.type==="MultiPoint")&&this.type==="Point")for(re=0;re<U.coordinates.length;re++){if(this.coordinates.length!==U.coordinates[re].length)return!1;if(me(this.coordinates,U.coordinates[re]))return!0}if(U.type==="Polygon")if(this.type==="Polygon"){if(U.coordinates.length===this.coordinates.length){for(re=0;re<this.coordinates.length;re++)if(ve(this.coordinates[re],U.coordinates[re]))return!0}return this.coordinates.length&&D(U.coordinates,this.coordinates[0][0])?!he(te(this.coordinates),te(U.coordinates)):!1}else{if(this.type==="Point")return D(U.coordinates,this.coordinates);if(this.type==="LineString"||this.type==="MultiPoint"){if(!this.coordinates||this.coordinates.length===0)return!1;for(re=0;re<this.coordinates.length;re++)if(D(U.coordinates,this.coordinates[re])===!1)return!1;return!0}else if(this.type==="MultiLineString"){for(re=0;re<this.coordinates.length;re++){var G=new we(this.coordinates[re]);if(G.within(U)===!1)return O++,!1}return!0}else if(this.type==="MultiPolygon"){for(re=0;re<this.coordinates.length;re++){var Z=new Se({type:"Polygon",coordinates:this.coordinates[re]});if(Z.within(U)===!1)return!1}return!0}}if(U.type==="MultiPolygon"){if(this.type==="Point"){if(U.coordinates.length){for(re=0;re<U.coordinates.length;re++)if(le=U.coordinates[re],D(le,this.coordinates)&&he([this.coordinates],U.coordinates)===!1)return!0}return!1}else if(this.type==="Polygon"){for(re=0;re<this.coordinates.length;re++)if(U.coordinates[re].length===this.coordinates.length){for(k=0;k<this.coordinates.length;k++)if(ve(this.coordinates[k],U.coordinates[re][k]))return!0}if(he(this.coordinates,U.coordinates)===!1&&U.coordinates.length){for(re=0;re<U.coordinates.length;re++)le=U.coordinates[re],D(le,this.coordinates[0][0])===!1?O=!1:O=!0;return O}}else if(this.type==="LineString"||this.type==="MultiPoint")for(re=0;re<U.coordinates.length;re++){var F={type:"Polygon",coordinates:U.coordinates[re]};return!!this.within(F)}else if(this.type==="MultiLineString"){for(re=0;re<this.coordinates.length;re++){var ie=new we(this.coordinates[re]);if(ie.within(U)===!1)return!1}return!0}else if(this.type==="MultiPolygon"){for(re=0;re<U.coordinates.length;re++){var ge={type:"Polygon",coordinates:U.coordinates[re]};if(this.within(ge)===!1)return!1}return!0}}return!1},Se.prototype.intersects=function(U){U.type==="Feature"&&(U=U.geometry);var le=new Se(U);if(this.within(U)||le.within(this))return!0;if(this.type!=="Point"&&this.type!=="MultiPoint"&&U.type!=="Point"&&U.type!=="MultiPoint")return he(this.coordinates,U.coordinates);if(this.type==="Feature"){var re=new Se(this.geometry);return re.intersects(U)}return u("Type "+this.type+" to "+U.type+" intersection is not supported by intersects"),!1};function Oe(U){var le=Array.prototype.slice.call(arguments);if(U&&U.type==="Point"&&U.coordinates)c(this,U);else if(U&&l(U))this.coordinates=U;else if(le.length>=2)this.coordinates=le;else throw"Terraformer: invalid input for Terraformer.Point";this.type="Point"}Oe.prototype=new Se,Oe.prototype.constructor=Oe;function Te(U){if(U&&U.type==="MultiPoint"&&U.coordinates)c(this,U);else if(l(U))this.coordinates=U;else throw"Terraformer: invalid input for Terraformer.MultiPoint";this.type="MultiPoint"}Te.prototype=new Se,Te.prototype.constructor=Te,Te.prototype.forEach=function(U){for(var le=0;le<this.coordinates.length;le++)U.apply(this,[this.coordinates[le],le,this.coordinates]);return this},Te.prototype.addPoint=function(U){return this.coordinates.push(U),this},Te.prototype.insertPoint=function(U,le){return this.coordinates.splice(le,0,U),this},Te.prototype.removePoint=function(U){return typeof U=="number"?this.coordinates.splice(U,1):this.coordinates.splice(this.coordinates.indexOf(U),1),this},Te.prototype.get=function(U){return new Oe(this.coordinates[U])};function we(U){if(U&&U.type==="LineString"&&U.coordinates)c(this,U);else if(l(U))this.coordinates=U;else throw"Terraformer: invalid input for Terraformer.LineString";this.type="LineString"}we.prototype=new Se,we.prototype.constructor=we,we.prototype.addVertex=function(U){return this.coordinates.push(U),this},we.prototype.insertVertex=function(U,le){return this.coordinates.splice(le,0,U),this},we.prototype.removeVertex=function(U){return this.coordinates.splice(U,1),this};function Ie(U){if(U&&U.type==="MultiLineString"&&U.coordinates)c(this,U);else if(l(U))this.coordinates=U;else throw"Terraformer: invalid input for Terraformer.MultiLineString";this.type="MultiLineString"}Ie.prototype=new Se,Ie.prototype.constructor=Ie,Ie.prototype.forEach=function(U){for(var le=0;le<this.coordinates.length;le++)U.apply(this,[this.coordinates[le],le,this.coordinates])},Ie.prototype.get=function(U){return new we(this.coordinates[U])};function Ae(U){if(U&&U.type==="Polygon"&&U.coordinates)c(this,U);else if(l(U))this.coordinates=U;else throw"Terraformer: invalid input for Terraformer.Polygon";this.type="Polygon"}Ae.prototype=new Se,Ae.prototype.constructor=Ae,Ae.prototype.addVertex=function(U){return this.insertVertex(U,this.coordinates[0].length-1),this},Ae.prototype.insertVertex=function(U,le){return this.coordinates[0].splice(le,0,U),this},Ae.prototype.removeVertex=function(U){return this.coordinates[0].splice(U,1),this},Ae.prototype.close=function(){this.coordinates=te(this.coordinates)},Ae.prototype.hasHoles=function(){return this.coordinates.length>1},Ae.prototype.holes=function(){var U=[];if(this.hasHoles())for(var le=1;le<this.coordinates.length;le++)U.push(new Ae([this.coordinates[le]]));return U};function W(U){if(U&&U.type==="MultiPolygon"&&U.coordinates)c(this,U);else if(l(U))this.coordinates=U;else throw"Terraformer: invalid input for Terraformer.MultiPolygon";this.type="MultiPolygon"}W.prototype=new Se,W.prototype.constructor=W,W.prototype.forEach=function(U){for(var le=0;le<this.coordinates.length;le++)U.apply(this,[this.coordinates[le],le,this.coordinates])},W.prototype.get=function(U){return new Ae(this.coordinates[U])},W.prototype.close=function(){var U=[];return this.forEach(function(le){U.push(te(le))}),this.coordinates=U,this};function V(U){if(U&&U.type==="Feature")c(this,U);else if(U&&U.type&&U.coordinates)this.geometry=U;else throw"Terraformer: invalid input for Terraformer.Feature";this.type="Feature"}V.prototype=new Se,V.prototype.constructor=V;function j(U){if(U&&U.type==="FeatureCollection"&&U.features)c(this,U);else if(l(U))this.features=U;else throw"Terraformer: invalid input for Terraformer.FeatureCollection";this.type="FeatureCollection"}j.prototype=new Se,j.prototype.constructor=j,j.prototype.forEach=function(U){for(var le=0;le<this.features.length;le++)U.apply(this,[this.features[le],le,this.features])},j.prototype.get=function(U){var le;return this.forEach(function(re){re.id===U&&(le=re)}),new V(le)};function se(U){if(U&&U.type==="GeometryCollection"&&U.geometries)c(this,U);else if(l(U))this.geometries=U;else if(U.coordinates&&U.type)this.type="GeometryCollection",this.geometries=[U];else throw"Terraformer: invalid input for Terraformer.GeometryCollection";this.type="GeometryCollection"}se.prototype=new Se,se.prototype.constructor=se,se.prototype.forEach=function(U){for(var le=0;le<this.geometries.length;le++)U.apply(this,[this.geometries[le],le,this.geometries])},se.prototype.get=function(U){return new Se(this.geometries[U])};function ye(U,le,re){for(var k=I(U),O=re||64,C={type:"Polygon",coordinates:[[]]},G=1;G<=O;G++){var Z=G*(360/O)*Math.PI/180;C.coordinates[0].push([k[0]+le*Math.cos(Z),k[1]+le*Math.sin(Z)])}return C.coordinates=te(C.coordinates),B(C)}function ae(U,le,re){var k=re||64,O=le||250;if(!U||U.length<2||!O||!k)throw new Error("Terraformer: missing parameter for Terraformer.Circle");c(this,new V({type:"Feature",geometry:ye(U,O,k),properties:{radius:O,center:U,steps:k}}))}return ae.prototype=new Se,ae.prototype.constructor=ae,ae.prototype.recalculate=function(){return this.geometry=ye(this.properties.center,this.properties.radius,this.properties.steps),this},ae.prototype.center=function(U){return U&&(this.properties.center=U,this.recalculate()),this.properties.center},ae.prototype.radius=function(U){return U&&(this.properties.radius=U,this.recalculate()),this.properties.radius},ae.prototype.steps=function(U){return U&&(this.properties.steps=U,this.recalculate()),this.properties.steps},ae.prototype.toJSON=function(){var U=Se.prototype.toJSON.call(this);return U},i.Primitive=Se,i.Point=Oe,i.MultiPoint=Te,i.LineString=we,i.MultiLineString=Ie,i.Polygon=Ae,i.MultiPolygon=W,i.Feature=V,i.FeatureCollection=j,i.GeometryCollection=se,i.Circle=ae,i.toMercator=L,i.toGeographic=B,i.Tools={},i.Tools.positionToMercator=I,i.Tools.positionToGeographic=T,i.Tools.applyConverter=$,i.Tools.toMercator=L,i.Tools.toGeographic=B,i.Tools.createCircle=ye,i.Tools.calculateBounds=d,i.Tools.calculateEnvelope=_,i.Tools.coordinatesContainPoint=N,i.Tools.polygonContainsPoint=D,i.Tools.arraysIntersectArrays=he,i.Tools.coordinatesContainPoint=N,i.Tools.coordinatesEqual=ve,i.Tools.convexHull=y,i.Tools.isConvex=A,i.MercatorCRS=o,i.GeographicCRS=a,i})}(KR)),KR.exports}var mje=Tue();function yje(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var J0=1,Z0=2,Rb=3,gje=4,$N=5,sJ=6378137,vje=6356752314e-3,nJ=.0066943799901413165,Kx=484813681109536e-20,mt=Math.PI/2,bje=.16666666666666666,wje=.04722222222222222,_je=.022156084656084655,At=1e-10,zn=.017453292519943295,Mh=57.29577951308232,nr=Math.PI/4,XS=Math.PI*2,$s=3.14159265359,qa={};qa.greenwich=0;qa.lisbon=-9.131906111111;qa.paris=2.337229166667;qa.bogota=-74.080916666667;qa.madrid=-3.687938888889;qa.rome=12.452333333333;qa.bern=7.439583333333;qa.jakarta=106.807719444444;qa.ferro=-17.666666666667;qa.brussels=4.367975;qa.stockholm=18.058277777778;qa.athens=23.7163375;qa.oslo=10.722916666667;const xje={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var oJ=/[\s_\-\/\(\)]/g;function Rm(t,e){if(t[e])return t[e];for(var i=Object.keys(t),r=e.toLowerCase().replace(oJ,""),s=-1,n,o;++s<i.length;)if(n=i[s],o=n.toLowerCase().replace(oJ,""),o===r)return t[n]}function ON(t){var e={},i=t.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,l){var u=l.split("=");return u.push(!0),a[u[0].toLowerCase()]=u[1],a},{}),r,s,n,o={proj:"projName",datum:"datumCode",rf:function(a){e.rf=parseFloat(a)},lat_0:function(a){e.lat0=a*zn},lat_1:function(a){e.lat1=a*zn},lat_2:function(a){e.lat2=a*zn},lat_ts:function(a){e.lat_ts=a*zn},lon_0:function(a){e.long0=a*zn},lon_1:function(a){e.long1=a*zn},lon_2:function(a){e.long2=a*zn},alpha:function(a){e.alpha=parseFloat(a)*zn},gamma:function(a){e.rectified_grid_angle=parseFloat(a)},lonc:function(a){e.longc=a*zn},x_0:function(a){e.x0=parseFloat(a)},y_0:function(a){e.y0=parseFloat(a)},k_0:function(a){e.k0=parseFloat(a)},k:function(a){e.k0=parseFloat(a)},a:function(a){e.a=parseFloat(a)},b:function(a){e.b=parseFloat(a)},r_a:function(){e.R_A=!0},zone:function(a){e.zone=parseInt(a,10)},south:function(){e.utmSouth=!0},towgs84:function(a){e.datum_params=a.split(",").map(function(l){return parseFloat(l)})},to_meter:function(a){e.to_meter=parseFloat(a)},units:function(a){e.units=a;var l=Rm(xje,a);l&&(e.to_meter=l.to_meter)},from_greenwich:function(a){e.from_greenwich=a*zn},pm:function(a){var l=Rm(qa,a);e.from_greenwich=(l||parseFloat(a))*zn},nadgrids:function(a){a==="@null"?e.datumCode="none":e.nadgrids=a},axis:function(a){var l="ewnsud";a.length===3&&l.indexOf(a.substr(0,1))!==-1&&l.indexOf(a.substr(1,1))!==-1&&l.indexOf(a.substr(2,1))!==-1&&(e.axis=a)},approx:function(){e.approx=!0}};for(r in i)s=i[r],r in o?(n=o[r],typeof n=="function"?n(s):e[n]=s):e[r]=s;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var e3=1,Iue=2,Mue=3,L5=4,Aue=5,J7=-1,Sje=/\s/,Eje=/[A-Za-z]/,Tje=/[A-Za-z84_]/,VC=/[,\]]/,Cue=/[\d\.E\-\+]/;function Cp(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=e3}Cp.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==L5)for(;Sje.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case e3:return this.neutral(t);case Iue:return this.keyword(t);case L5:return this.quoted(t);case Aue:return this.afterquote(t);case Mue:return this.number(t);case J7:return}};Cp.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=L5;return}if(VC.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};Cp.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=e3;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=e3,this.currentObject=this.stack.pop(),this.currentObject||(this.state=J7);return}};Cp.prototype.number=function(t){if(Cue.test(t)){this.word+=t;return}if(VC.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};Cp.prototype.quoted=function(t){if(t==='"'){this.state=Aue;return}this.word+=t};Cp.prototype.keyword=function(t){if(Tje.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=e3;return}if(VC.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};Cp.prototype.neutral=function(t){if(Eje.test(t)){this.word=t,this.state=Iue;return}if(t==='"'){this.word="",this.state=L5;return}if(Cue.test(t)){this.word=t,this.state=Mue;return}if(VC.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};Cp.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===J7)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function Ije(t){var e=new Cp(t);return e.output()}function aJ(t,e,i){Array.isArray(e)&&(i.unshift(e),e=null);var r=e?{}:t,s=i.reduce(function(n,o){return rb(o,n),n},r);e&&(t[e]=s)}function rb(t,e){if(!Array.isArray(t)){e[t]=!0;return}var i=t.shift();if(i==="PARAMETER"&&(i=t.shift()),t.length===1){if(Array.isArray(t[0])){e[i]={},rb(t[0],e[i]);return}e[i]=t[0];return}if(!t.length){e[i]=!0;return}if(i==="TOWGS84"){e[i]=t;return}if(i==="AXIS"){i in e||(e[i]=[]),e[i].push(t);return}Array.isArray(i)||(e[i]={});var r;switch(i){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[i]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&rb(t[2],e[i]);return;case"SPHEROID":case"ELLIPSOID":e[i]={name:t[0],a:t[1],rf:t[2]},t.length===4&&rb(t[3],e[i]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":t[0]=["name",t[0]],aJ(e,i,t);return;default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return rb(t,e[i]);return aJ(e,i,t)}}var Mje=.017453292519943295;function Aje(t,e){var i=e[0],r=e[1];!(i in t)&&r in t&&(t[i]=t[r],e.length===3&&(t[i]=e[2](t[i])))}function cd(t){return t*Mje}function Cje(t){if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",i=0,r=t.AXIS.length;i<r;++i){var s=[t.AXIS[i][0].toLowerCase(),t.AXIS[i][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?e+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?e+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?e+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var n=t.GEOGCS;t.type==="GEOGCS"&&(n=t),n&&(n.DATUM?t.datumCode=n.DATUM.name.toLowerCase():t.datumCode=n.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),(t.datumCode==="new_zealand_geodetic_datum_1949"||t.datumCode==="new_zealand_1949")&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode.slice(-6)==="_ferro"&&(t.datumCode=t.datumCode.slice(0,-6)),t.datumCode.slice(-8)==="_jakarta"&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),n.DATUM&&n.DATUM.SPHEROID&&(t.ellps=n.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=n.DATUM.SPHEROID.a,t.rf=parseFloat(n.DATUM.SPHEROID.rf,10)),n.DATUM&&n.DATUM.TOWGS84&&(t.datum_params=n.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a);function o(u){var c=t.to_meter||1;return u*c}var a=function(u){return Aje(t,u)},l=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",cd],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",cd],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",cd],["lat0","latitude_of_origin",cd],["lat0","standard_parallel_1",cd],["lat1","standard_parallel_1",cd],["lat2","standard_parallel_2",cd],["azimuth","Azimuth"],["alpha","azimuth",cd],["srsCode","name"]];l.forEach(a),!t.long0&&t.longc&&(t.projName==="Albers_Conic_Equal_Area"||t.projName==="Lambert_Azimuthal_Equal_Area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(t.projName==="Stereographic_South_Pole"||t.projName==="Polar Stereographic (variant B)")&&(t.lat0=cd(t.lat1>0?90:-90),t.lat_ts=t.lat1)}function $ue(t){var e=Ije(t),i=e.shift(),r=e.shift();e.unshift(["name",r]),e.unshift(["type",i]);var s={};return rb(e,s),Cje(s),s}function qo(t){var e=this;if(arguments.length===2){var i=arguments[1];typeof i=="string"?i.charAt(0)==="+"?qo[t]=ON(arguments[1]):qo[t]=$ue(arguments[1]):qo[t]=i}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(r){Array.isArray(r)?qo.apply(e,r):qo(r)});if(typeof t=="string"){if(t in qo)return qo[t]}else"EPSG"in t?qo["EPSG:"+t.EPSG]=t:"ESRI"in t?qo["ESRI:"+t.ESRI]=t:"IAU2000"in t?qo["IAU2000:"+t.IAU2000]=t:console.log(t);return}}yje(qo);function $je(t){return typeof t=="string"}function Oje(t){return t in qo}var Rje=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function kje(t){return Rje.some(function(e){return t.indexOf(e)>-1})}var Lje=["3857","900913","3785","102113"];function Pje(t){var e=Rm(t,"authority");if(e){var i=Rm(e,"epsg");return i&&Lje.indexOf(i)>-1}}function Nje(t){var e=Rm(t,"extension");if(e)return Rm(e,"proj4")}function Fje(t){return t[0]==="+"}function Dje(t){if($je(t)){if(Oje(t))return qo[t];if(kje(t)){var e=$ue(t);if(Pje(e))return qo["EPSG:3857"];var i=Nje(e);return i?ON(i):e}if(Fje(t))return ON(t)}else return t}function lJ(t,e){t=t||{};var i,r;if(!e)return t;for(r in e)i=e[r],i!==void 0&&(t[r]=i);return t}function Gh(t,e,i){var r=t*e;return i/Math.sqrt(1-r*r)}function lE(t){return t<0?-1:1}function Ft(t){return Math.abs(t)<=$s?t:t-lE(t)*XS}function bc(t,e,i){var r=t*i,s=.5*t;return r=Math.pow((1-r)/(1+r),s),Math.tan(.5*(mt-e))/r}function t3(t,e){for(var i=.5*t,r,s,n=mt-2*Math.atan(e),o=0;o<=15;o++)if(r=t*Math.sin(n),s=mt-2*Math.atan(e*Math.pow((1-r)/(1+r),i))-n,n+=s,Math.abs(s)<=1e-10)return n;return-9999}function jje(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Gh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function Uje(t){var e=t.x,i=t.y;if(i*Mh>90&&i*Mh<-90&&e*Mh>180&&e*Mh<-180)return null;var r,s;if(Math.abs(Math.abs(i)-mt)<=At)return null;if(this.sphere)r=this.x0+this.a*this.k0*Ft(e-this.long0),s=this.y0+this.a*this.k0*Math.log(Math.tan(nr+.5*i));else{var n=Math.sin(i),o=bc(this.e,i,n);r=this.x0+this.a*this.k0*Ft(e-this.long0),s=this.y0-this.a*this.k0*Math.log(o)}return t.x=r,t.y=s,t}function Vje(t){var e=t.x-this.x0,i=t.y-this.y0,r,s;if(this.sphere)s=mt-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var n=Math.exp(-i/(this.a*this.k0));if(s=t3(this.e,n),s===-9999)return null}return r=Ft(this.long0+e/(this.a*this.k0)),t.x=r,t.y=s,t}var Bje=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const zje={init:jje,forward:Uje,inverse:Vje,names:Bje};function Gje(){}function uJ(t){return t}var qje=["longlat","identity"];const Hje={init:Gje,forward:uJ,inverse:uJ,names:qje};var Wje=[zje,Hje],iA={},P5=[];function Oue(t,e){var i=P5.length;return t.names?(P5[i]=t,t.names.forEach(function(r){iA[r.toLowerCase()]=i}),this):(console.log(e),!0)}function Jje(t){if(!t)return!1;var e=t.toLowerCase();if(typeof iA[e]<"u"&&P5[iA[e]])return P5[iA[e]]}function Zje(){Wje.forEach(Oue)}const Yje={start:Zje,add:Oue,get:Jje};var vi={};vi.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};vi.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};vi.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};vi.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};vi.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};vi.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};vi.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};vi.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};vi.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};vi.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};vi.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};vi.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};vi.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};vi.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};vi.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};vi.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};vi.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};vi.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};vi.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};vi.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};vi.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};vi.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};vi.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};vi.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};vi.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};vi.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};vi.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};vi.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};vi.hough={a:6378270,rf:297,ellipseName:"Hough"};vi.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};vi.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};vi.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};vi.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};vi.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};vi.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};vi.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};vi.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};vi.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};vi.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};vi.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};vi.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var Kje=vi.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};vi.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function Qje(t,e,i,r){var s=t*t,n=e*e,o=(s-n)/s,a=0;r?(t*=1-o*(bje+o*(wje+o*_je)),s=t*t,o=0):a=Math.sqrt(o);var l=(s-n)/n;return{es:o,e:a,ep2:l}}function Xje(t,e,i,r,s){if(!t){var n=Rm(vi,r);n||(n=Kje),t=n.a,e=n.b,i=n.rf}return i&&!e&&(e=(1-1/i)*t),(i===0||Math.abs(t-e)<At)&&(s=!0,e=t),{a:t,b:e,rf:i,sphere:s}}var Nn={};Nn.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};Nn.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};Nn.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};Nn.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};Nn.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};Nn.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};Nn.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};Nn.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};Nn.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};Nn.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};Nn.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};Nn.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};Nn.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};Nn.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};Nn.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};Nn.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};Nn.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function eUe(t,e,i,r,s,n,o){var a={};return t===void 0||t==="none"?a.datum_type=$N:a.datum_type=gje,e&&(a.datum_params=e.map(parseFloat),(a.datum_params[0]!==0||a.datum_params[1]!==0||a.datum_params[2]!==0)&&(a.datum_type=J0),a.datum_params.length>3&&(a.datum_params[3]!==0||a.datum_params[4]!==0||a.datum_params[5]!==0||a.datum_params[6]!==0)&&(a.datum_type=Z0,a.datum_params[3]*=Kx,a.datum_params[4]*=Kx,a.datum_params[5]*=Kx,a.datum_params[6]=a.datum_params[6]/1e6+1)),o&&(a.datum_type=Rb,a.grids=o),a.a=i,a.b=r,a.es=s,a.ep2=n,a}var Rue={};function tUe(t,e){var i=new DataView(e),r=sUe(i),s=nUe(i,r);s.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var n=oUe(i,s,r),o={header:s,subgrids:n};return Rue[t]=o,o}function iUe(t){if(t===void 0)return null;var e=t.split(",");return e.map(rUe)}function rUe(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:Rue[t]||null,isNull:!1}}function sb(t){return t/3600*Math.PI/180}function sUe(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function nUe(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:RN(t,56,56+8).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function RN(t,e,i){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,i)))}function oUe(t,e,i){for(var r=176,s=[],n=0;n<e.nSubgrids;n++){var o=lUe(t,r,i),a=uUe(t,r,o,i),l=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),u=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);s.push({ll:[sb(o.lowerLongitude),sb(o.lowerLatitude)],del:[sb(o.longitudeInterval),sb(o.latitudeInterval)],lim:[l,u],count:o.gridNodeCount,cvs:aUe(a)})}return s}function aUe(t){return t.map(function(e){return[sb(e.longitudeShift),sb(e.latitudeShift)]})}function lUe(t,e,i){return{name:RN(t,e+8,e+16).trim(),parent:RN(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,i),upperLatitude:t.getFloat64(e+88,i),lowerLongitude:t.getFloat64(e+104,i),upperLongitude:t.getFloat64(e+120,i),latitudeInterval:t.getFloat64(e+136,i),longitudeInterval:t.getFloat64(e+152,i),gridNodeCount:t.getInt32(e+168,i)}}function uUe(t,e,i,r){for(var s=e+176,n=16,o=[],a=0;a<i.gridNodeCount;a++){var l={latitudeShift:t.getFloat32(s+a*n,r),longitudeShift:t.getFloat32(s+a*n+4,r),latitudeAccuracy:t.getFloat32(s+a*n+8,r),longitudeAccuracy:t.getFloat32(s+a*n+12,r)};o.push(l)}return o}function Lh(t,e){if(!(this instanceof Lh))return new Lh(t);e=e||function(u){if(u)throw u};var i=Dje(t);if(typeof i!="object"){e(t);return}var r=Lh.projections.get(i.projName);if(!r){e(t);return}if(i.datumCode&&i.datumCode!=="none"){var s=Rm(Nn,i.datumCode);s&&(i.datum_params=i.datum_params||(s.towgs84?s.towgs84.split(","):null),i.ellps=s.ellipse,i.datumName=s.datumName?s.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84",i.lat1=i.lat1||i.lat0;var n=Xje(i.a,i.b,i.rf,i.ellps,i.sphere),o=Qje(n.a,n.b,n.rf,i.R_A),a=iUe(i.nadgrids),l=i.datum||eUe(i.datumCode,i.datum_params,n.a,n.b,o.es,o.ep2,a);lJ(this,i),lJ(this,r),this.a=n.a,this.b=n.b,this.rf=n.rf,this.sphere=n.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=l,this.init(),e(null,this)}Lh.projections=Yje;Lh.projections.start();function cUe(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===J0?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===Z0?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function kue(t,e,i){var r=t.x,s=t.y,n=t.z?t.z:0,o,a,l,u;if(s<-mt&&s>-1.001*mt)s=-mt;else if(s>mt&&s<1.001*mt)s=mt;else{if(s<-mt)return{x:-1/0,y:-1/0,z:t.z};if(s>mt)return{x:1/0,y:1/0,z:t.z}}return r>Math.PI&&(r-=2*Math.PI),a=Math.sin(s),u=Math.cos(s),l=a*a,o=i/Math.sqrt(1-e*l),{x:(o+n)*u*Math.cos(r),y:(o+n)*u*Math.sin(r),z:(o*(1-e)+n)*a}}function Lue(t,e,i,r){var s=1e-12,n=s*s,o=30,a,l,u,c,d,f,m,g,v,b,_,S,M,x=t.x,T=t.y,I=t.z?t.z:0,$,L,B;if(a=Math.sqrt(x*x+T*T),l=Math.sqrt(x*x+T*T+I*I),a/i<s){if($=0,l/i<s)return L=mt,B=-r,{x:t.x,y:t.y,z:t.z}}else $=Math.atan2(T,x);u=I/l,c=a/l,d=1/Math.sqrt(1-e*(2-e)*c*c),g=c*(1-e)*d,v=u*d,M=0;do M++,m=i/Math.sqrt(1-e*v*v),B=a*g+I*v-m*(1-e*v*v),f=e*m/(m+B),d=1/Math.sqrt(1-f*(2-f)*c*c),b=c*(1-f)*d,_=u*d,S=_*g-b*v,g=b,v=_;while(S*S>n&&M<o);return L=Math.atan(_/Math.abs(b)),{x:$,y:L,z:B}}function hUe(t,e,i){if(e===J0)return{x:t.x+i[0],y:t.y+i[1],z:t.z+i[2]};if(e===Z0){var r=i[0],s=i[1],n=i[2],o=i[3],a=i[4],l=i[5],u=i[6];return{x:u*(t.x-l*t.y+a*t.z)+r,y:u*(l*t.x+t.y-o*t.z)+s,z:u*(-a*t.x+o*t.y+t.z)+n}}}function dUe(t,e,i){if(e===J0)return{x:t.x-i[0],y:t.y-i[1],z:t.z-i[2]};if(e===Z0){var r=i[0],s=i[1],n=i[2],o=i[3],a=i[4],l=i[5],u=i[6],c=(t.x-r)/u,d=(t.y-s)/u,f=(t.z-n)/u;return{x:c+l*d-a*f,y:-l*c+d+o*f,z:a*c-o*d+f}}}function KT(t){return t===J0||t===Z0}function pUe(t,e,i){if(cUe(t,e)||t.datum_type===$N||e.datum_type===$N)return i;var r=t.a,s=t.es;if(t.datum_type===Rb){var n=cJ(t,!1,i);if(n!==0)return;r=sJ,s=nJ}var o=e.a,a=e.b,l=e.es;if(e.datum_type===Rb&&(o=sJ,a=vje,l=nJ),s===l&&r===o&&!KT(t.datum_type)&&!KT(e.datum_type))return i;if(i=kue(i,s,r),KT(t.datum_type)&&(i=hUe(i,t.datum_type,t.datum_params)),KT(e.datum_type)&&(i=dUe(i,e.datum_type,e.datum_params)),i=Lue(i,l,o,a),e.datum_type===Rb){var u=cJ(e,!0,i);if(u!==0)return}return i}function cJ(t,e,i){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;for(var r={x:-i.x,y:i.y},s={x:Number.NaN,y:Number.NaN},n=[],o=0;o<t.grids.length;o++){var a=t.grids[o];if(n.push(a.name),a.isNull){s=r;break}if(a.mandatory,a.grid===null){if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1;continue}var l=a.grid.subgrids[0],u=(Math.abs(l.del[1])+Math.abs(l.del[0]))/1e4,c=l.ll[0]-u,d=l.ll[1]-u,f=l.ll[0]+(l.lim[0]-1)*l.del[0]+u,m=l.ll[1]+(l.lim[1]-1)*l.del[1]+u;if(!(d>r.y||c>r.x||m<r.y||f<r.x)&&(s=fUe(r,e,l),!isNaN(s.x)))break}return isNaN(s.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*Mh+" "+r.y*Mh+" tried: '"+n+"'"),-1):(i.x=-s.x,i.y=s.y,0)}function fUe(t,e,i){var r={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return r;var s={x:t.x,y:t.y};s.x-=i.ll[0],s.y-=i.ll[1],s.x=Ft(s.x-Math.PI)+Math.PI;var n=hJ(s,i);if(e){if(isNaN(n.x))return r;n.x=s.x-n.x,n.y=s.y-n.y;var o=9,a=1e-12,l,u;do{if(u=hJ(n,i),isNaN(u.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:s.x-(u.x+n.x),y:s.y-(u.y+n.y)},n.x+=l.x,n.y+=l.y}while(o--&&Math.abs(l.x)>a&&Math.abs(l.y)>a);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=Ft(n.x+i.ll[0]),r.y=n.y+i.ll[1]}else isNaN(n.x)||(r.x=t.x+n.x,r.y=t.y+n.y);return r}function hJ(t,e){var i={x:t.x/e.del[0],y:t.y/e.del[1]},r={x:Math.floor(i.x),y:Math.floor(i.y)},s={x:i.x-1*r.x,y:i.y-1*r.y},n={x:Number.NaN,y:Number.NaN},o;if(r.x<0||r.x>=e.lim[0]||r.y<0||r.y>=e.lim[1])return n;o=r.y*e.lim[0]+r.x;var a={x:e.cvs[o][0],y:e.cvs[o][1]};o++;var l={x:e.cvs[o][0],y:e.cvs[o][1]};o+=e.lim[0];var u={x:e.cvs[o][0],y:e.cvs[o][1]};o--;var c={x:e.cvs[o][0],y:e.cvs[o][1]},d=s.x*s.y,f=s.x*(1-s.y),m=(1-s.x)*(1-s.y),g=(1-s.x)*s.y;return n.x=m*a.x+f*l.x+g*c.x+d*u.x,n.y=m*a.y+f*l.y+g*c.y+d*u.y,n}function dJ(t,e,i){var r=i.x,s=i.y,n=i.z||0,o,a,l,u={};for(l=0;l<3;l++)if(!(e&&l===2&&i.z===void 0))switch(l===0?(o=r,"ew".indexOf(t.axis[l])!==-1?a="x":a="y"):l===1?(o=s,"ns".indexOf(t.axis[l])!==-1?a="y":a="x"):(o=n,a="z"),t.axis[l]){case"e":u[a]=o;break;case"w":u[a]=-o;break;case"n":u[a]=o;break;case"s":u[a]=-o;break;case"u":i[a]!==void 0&&(u.z=o);break;case"d":i[a]!==void 0&&(u.z=-o);break;default:return null}return u}function Pue(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function mUe(t){pJ(t.x),pJ(t.y)}function pJ(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function yUe(t,e){return(t.datum.datum_type===J0||t.datum.datum_type===Z0||t.datum.datum_type===Rb)&&e.datumCode!=="WGS84"||(e.datum.datum_type===J0||e.datum.datum_type===Z0||e.datum.datum_type===Rb)&&t.datumCode!=="WGS84"}function N5(t,e,i,r){var s;Array.isArray(i)?i=Pue(i):i={x:i.x,y:i.y,z:i.z,m:i.m};var n=i.z!==void 0;if(mUe(i),t.datum&&e.datum&&yUe(t,e)&&(s=new Lh("WGS84"),i=N5(t,s,i,r),t=s),r&&t.axis!=="enu"&&(i=dJ(t,!1,i)),t.projName==="longlat")i={x:i.x*zn,y:i.y*zn,z:i.z||0};else if(t.to_meter&&(i={x:i.x*t.to_meter,y:i.y*t.to_meter,z:i.z||0}),i=t.inverse(i),!i)return;if(t.from_greenwich&&(i.x+=t.from_greenwich),i=pUe(t.datum,e.datum,i),!!i)return e.from_greenwich&&(i={x:i.x-e.from_greenwich,y:i.y,z:i.z||0}),e.projName==="longlat"?i={x:i.x*Mh,y:i.y*Mh,z:i.z||0}:(i=e.forward(i),e.to_meter&&(i={x:i.x/e.to_meter,y:i.y/e.to_meter,z:i.z||0})),r&&e.axis!=="enu"?dJ(e,!0,i):(n||delete i.z,i)}var fJ=Lh("WGS84");function QR(t,e,i,r){var s,n,o;return Array.isArray(i)?(s=N5(t,e,i,r)||{x:NaN,y:NaN},i.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof s.z=="number"?[s.x,s.y,s.z].concat(i.splice(3)):[s.x,s.y,i[2]].concat(i.splice(3)):[s.x,s.y].concat(i.splice(2)):[s.x,s.y]):(n=N5(t,e,i,r),o=Object.keys(i),o.length===2||o.forEach(function(a){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(a==="x"||a==="y"||a==="z")return}else if(a==="x"||a==="y")return;n[a]=i[a]}),n)}function mJ(t){return t instanceof Lh?t:t.oProj?t.oProj:Lh(t)}function _r(t,e,i){t=mJ(t);var r=!1,s;return typeof e>"u"?(e=t,t=fJ,r=!0):(typeof e.x<"u"||Array.isArray(e))&&(i=e,e=t,t=fJ,r=!0),e=mJ(e),i?QR(t,e,i):(s={forward:function(n,o){return QR(t,e,n,o)},inverse:function(n,o){return QR(e,t,n,o)}},r&&(s.oProj=e),s)}var yJ=6,Nue="AJSAJS",Fue="AFAFAF",nb=65,ya=73,ou=79,fx=86,mx=90;const gUe={forward:Due,inverse:vUe,toPoint:jue};function Due(t,e){return e=e||5,_Ue(bUe({lat:t[1],lon:t[0]}),e)}function vUe(t){var e=Z7(Vue(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function jue(t){var e=Z7(Vue(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function XR(t){return t*(Math.PI/180)}function gJ(t){return 180*(t/Math.PI)}function bUe(t){var e=t.lat,i=t.lon,r=6378137,s=.00669438,n=.9996,o,a,l,u,c,d,f,m=XR(e),g=XR(i),v,b;b=Math.floor((i+180)/6)+1,i===180&&(b=60),e>=56&&e<64&&i>=3&&i<12&&(b=32),e>=72&&e<84&&(i>=0&&i<9?b=31:i>=9&&i<21?b=33:i>=21&&i<33?b=35:i>=33&&i<42&&(b=37)),o=(b-1)*6-180+3,v=XR(o),a=s/(1-s),l=r/Math.sqrt(1-s*Math.sin(m)*Math.sin(m)),u=Math.tan(m)*Math.tan(m),c=a*Math.cos(m)*Math.cos(m),d=Math.cos(m)*(g-v),f=r*((1-s/4-3*s*s/64-5*s*s*s/256)*m-(3*s/8+3*s*s/32+45*s*s*s/1024)*Math.sin(2*m)+(15*s*s/256+45*s*s*s/1024)*Math.sin(4*m)-35*s*s*s/3072*Math.sin(6*m));var _=n*l*(d+(1-u+c)*d*d*d/6+(5-18*u+u*u+72*c-58*a)*d*d*d*d*d/120)+5e5,S=n*(f+l*Math.tan(m)*(d*d/2+(5-u+9*c+4*c*c)*d*d*d*d/24+(61-58*u+u*u+600*c-330*a)*d*d*d*d*d*d/720));return e<0&&(S+=1e7),{northing:Math.round(S),easting:Math.round(_),zoneNumber:b,zoneLetter:wUe(e)}}function Z7(t){var e=t.northing,i=t.easting,r=t.zoneLetter,s=t.zoneNumber;if(s<0||s>60)return null;var n=.9996,o=6378137,a=.00669438,l,u=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),c,d,f,m,g,v,b,_,S,M=i-5e5,x=e;r<"N"&&(x-=1e7),b=(s-1)*6-180+3,l=a/(1-a),v=x/n,_=v/(o*(1-a/4-3*a*a/64-5*a*a*a/256)),S=_+(3*u/2-27*u*u*u/32)*Math.sin(2*_)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*_)+151*u*u*u/96*Math.sin(6*_),c=o/Math.sqrt(1-a*Math.sin(S)*Math.sin(S)),d=Math.tan(S)*Math.tan(S),f=l*Math.cos(S)*Math.cos(S),m=o*(1-a)/Math.pow(1-a*Math.sin(S)*Math.sin(S),1.5),g=M/(c*n);var T=S-c*Math.tan(S)/m*(g*g/2-(5+3*d+10*f-4*f*f-9*l)*g*g*g*g/24+(61+90*d+298*f+45*d*d-252*l-3*f*f)*g*g*g*g*g*g/720);T=gJ(T);var I=(g-(1+2*d+f)*g*g*g/6+(5-2*f+28*d-3*f*f+8*l+24*d*d)*g*g*g*g*g/120)/Math.cos(S);I=b+gJ(I);var $;if(t.accuracy){var L=Z7({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});$={top:L.lat,right:L.lon,bottom:T,left:I}}else $={lat:T,lon:I};return $}function wUe(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function _Ue(t,e){var i="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+xUe(t.easting,t.northing,t.zoneNumber)+i.substr(i.length-5,e)+r.substr(r.length-5,e)}function xUe(t,e,i){var r=Uue(i),s=Math.floor(t/1e5),n=Math.floor(e/1e5)%20;return SUe(s,n,r)}function Uue(t){var e=t%yJ;return e===0&&(e=yJ),e}function SUe(t,e,i){var r=i-1,s=Nue.charCodeAt(r),n=Fue.charCodeAt(r),o=s+t-1,a=n+e,l=!1;o>mx&&(o=o-mx+nb-1,l=!0),(o===ya||s<ya&&o>ya||(o>ya||s<ya)&&l)&&o++,(o===ou||s<ou&&o>ou||(o>ou||s<ou)&&l)&&(o++,o===ya&&o++),o>mx&&(o=o-mx+nb-1),a>fx?(a=a-fx+nb-1,l=!0):l=!1,(a===ya||n<ya&&a>ya||(a>ya||n<ya)&&l)&&a++,(a===ou||n<ou&&a>ou||(a>ou||n<ou)&&l)&&(a++,a===ya&&a++),a>fx&&(a=a-fx+nb-1);var u=String.fromCharCode(o)+String.fromCharCode(a);return u}function Vue(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,i=null,r="",s,n=0;!/[A-Z]/.test(s=t.charAt(n));){if(n>=2)throw"MGRSPoint bad conversion from: "+t;r+=s,n++}var o=parseInt(r,10);if(n===0||n+3>e)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(n++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+t;i=t.substring(n,n+=2);for(var l=Uue(o),u=EUe(i.charAt(0),l),c=TUe(i.charAt(1),l);c<IUe(a);)c+=2e6;var d=e-n;if(d%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var f=d/2,m=0,g=0,v,b,_,S,M;return f>0&&(v=1e5/Math.pow(10,f),b=t.substring(n,n+f),m=parseFloat(b)*v,_=t.substring(n+f),g=parseFloat(_)*v),S=m+u,M=g+c,{easting:S,northing:M,zoneLetter:a,zoneNumber:o,accuracy:v}}function EUe(t,e){for(var i=Nue.charCodeAt(e-1),r=1e5,s=!1;i!==t.charCodeAt(0);){if(i++,i===ya&&i++,i===ou&&i++,i>mx){if(s)throw"Bad character: "+t;i=nb,s=!0}r+=1e5}return r}function TUe(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var i=Fue.charCodeAt(e-1),r=0,s=!1;i!==t.charCodeAt(0);){if(i++,i===ya&&i++,i===ou&&i++,i>fx){if(s)throw"Bad character: "+t;i=nb,s=!0}r+=1e5}return r}function IUe(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function cw(t,e,i){if(!(this instanceof cw))return new cw(t,e,i);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}cw.fromMGRS=function(t){return new cw(jue(t))};cw.prototype.toMGRS=function(t){return Due([this.x,this.y],t)};var MUe=1,AUe=.25,vJ=.046875,bJ=.01953125,wJ=.01068115234375,CUe=.75,$Ue=.46875,OUe=.013020833333333334,RUe=.007120768229166667,kUe=.3645833333333333,LUe=.005696614583333333,PUe=.3076171875;function Bue(t){var e=[];e[0]=MUe-t*(AUe+t*(vJ+t*(bJ+t*wJ))),e[1]=t*(CUe-t*(vJ+t*(bJ+t*wJ)));var i=t*t;return e[2]=i*($Ue-t*(OUe+t*RUe)),i*=t,e[3]=i*(kUe-t*LUe),e[4]=i*t*PUe,e}function BC(t,e,i,r){return i*=e,e*=e,r[0]*t-i*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}var NUe=20;function zue(t,e,i){for(var r=1/(1-e),s=t,n=NUe;n;--n){var o=Math.sin(s),a=1-e*o*o;if(a=(BC(s,o,Math.cos(s),i)-t)*(a*Math.sqrt(a))*r,s-=a,Math.abs(a)<At)return s}return s}function FUe(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Bue(this.es),this.ml0=BC(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function DUe(t){var e=t.x,i=t.y,r=Ft(e-this.long0),s,n,o,a=Math.sin(i),l=Math.cos(i);if(this.es){var c=l*r,d=Math.pow(c,2),f=this.ep2*Math.pow(l,2),m=Math.pow(f,2),g=Math.abs(l)>At?Math.tan(i):0,v=Math.pow(g,2),b=Math.pow(v,2);s=1-this.es*Math.pow(a,2),c=c/Math.sqrt(s);var _=BC(i,a,l,this.en);n=this.a*(this.k0*c*(1+d/6*(1-v+f+d/20*(5-18*v+b+14*f-58*v*f+d/42*(61+179*b-b*v-479*v)))))+this.x0,o=this.a*(this.k0*(_-this.ml0+a*r*c/2*(1+d/12*(5-v+9*f+4*m+d/30*(61+b-58*v+270*f-330*v*f+d/56*(1385+543*b-b*v-3111*v))))))+this.y0}else{var u=l*Math.sin(r);if(Math.abs(Math.abs(u)-1)<At)return 93;if(n=.5*this.a*this.k0*Math.log((1+u)/(1-u))+this.x0,o=l*Math.cos(r)/Math.sqrt(1-Math.pow(u,2)),u=Math.abs(o),u>=1){if(u-1>At)return 93;o=0}else o=Math.acos(o);i<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return t.x=n,t.y=o,t}function jUe(t){var e,i,r,s,n=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+o/this.k0,i=zue(e,this.es,this.en),Math.abs(i)<mt){var d=Math.sin(i),f=Math.cos(i),m=Math.abs(f)>At?Math.tan(i):0,g=this.ep2*Math.pow(f,2),v=Math.pow(g,2),b=Math.pow(m,2),_=Math.pow(b,2);e=1-this.es*Math.pow(d,2);var S=n*Math.sqrt(e)/this.k0,M=Math.pow(S,2);e=e*m,r=i-e*M/(1-this.es)*.5*(1-M/12*(5+3*b-9*g*b+g-4*v-M/30*(61+90*b-252*g*b+45*_+46*g-M/56*(1385+3633*b+4095*_+1574*_*b)))),s=Ft(this.long0+S*(1-M/6*(1+2*b+g-M/20*(5+28*b+24*_+8*g*b+6*g-M/42*(61+662*b+1320*_+720*_*b))))/f)}else r=mt*lE(o),s=0;else{var a=Math.exp(n/this.k0),l=.5*(a-1/a),u=this.lat0+o/this.k0,c=Math.cos(u);e=Math.sqrt((1-Math.pow(c,2))/(1+Math.pow(l,2))),r=Math.asin(e),o<0&&(r=-r),l===0&&c===0?s=0:s=Ft(Math.atan2(l,c)+this.long0)}return t.x=s,t.y=r,t}var UUe=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const rA={init:FUe,forward:DUe,inverse:jUe,names:UUe};function Gue(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function cc(t,e){t=Math.abs(t),e=Math.abs(e);var i=Math.max(t,e),r=Math.min(t,e)/(i||1);return i*Math.sqrt(1+Math.pow(r,2))}function VUe(t){var e=1+t,i=e-1;return i===0?t:t*Math.log(e)/i}function BUe(t){var e=Math.abs(t);return e=VUe(e*(1+e/(cc(1,e)+1))),t<0?-e:e}function Y7(t,e){for(var i=2*Math.cos(2*e),r=t.length-1,s=t[r],n=0,o;--r>=0;)o=-n+i*s+t[r],n=s,s=o;return e+o*Math.sin(2*e)}function zUe(t,e){for(var i=2*Math.cos(e),r=t.length-1,s=t[r],n=0,o;--r>=0;)o=-n+i*s+t[r],n=s,s=o;return Math.sin(e)*o}function GUe(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function que(t,e,i){for(var r=Math.sin(e),s=Math.cos(e),n=Gue(i),o=GUe(i),a=2*s*o,l=-2*r*n,u=t.length-1,c=t[u],d=0,f=0,m=0,g,v;--u>=0;)g=f,v=d,f=c,d=m,c=-g+a*f-l*d+t[u],m=-v+l*f+a*d;return a=r*o,l=s*n,[a*c-l*m,a*m+l*c]}function qUe(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(rA.init.apply(this),this.forward=rA.forward,this.inverse=rA.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),i=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),i=i*e,this.cgb[1]=i*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=i*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),i=i*e,this.cgb[2]=i*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=i*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),i=i*e,this.cgb[3]=i*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=i*(1237/630+e*(-12/5+e*(-24832/14175))),i=i*e,this.cgb[4]=i*(4174/315+e*(-144838/6237)),this.cbg[4]=i*(-734/315+e*(109598/31185)),i=i*e,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=i*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=i*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),i=i*e,this.utg[2]=i*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=i*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),i=i*e,this.utg[3]=i*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=i*(49561/161280+e*(-179/168+e*(6601661/7257600))),i=i*e,this.utg[4]=i*(-4583/161280+e*(108847/3991680)),this.gtu[4]=i*(34729/80640+e*(-3418889/1995840)),i=i*e,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=i*(212378941/319334400);var r=Y7(this.cbg,this.lat0);this.Zb=-this.Qn*(r+zUe(this.gtu,2*r))}function HUe(t){var e=Ft(t.x-this.long0),i=t.y;i=Y7(this.cbg,i);var r=Math.sin(i),s=Math.cos(i),n=Math.sin(e),o=Math.cos(e);i=Math.atan2(r,o*s),e=Math.atan2(n*s,cc(r,s*o)),e=BUe(Math.tan(e));var a=que(this.gtu,2*i,2*e);i=i+a[0],e=e+a[1];var l,u;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*i+this.Zb)+this.y0):(l=1/0,u=1/0),t.x=l,t.y=u,t}function WUe(t){var e=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);i=(i-this.Zb)/this.Qn,e=e/this.Qn;var r,s;if(Math.abs(e)<=2.623395162778){var n=que(this.utg,2*i,2*e);i=i+n[0],e=e+n[1],e=Math.atan(Gue(e));var o=Math.sin(i),a=Math.cos(i),l=Math.sin(e),u=Math.cos(e);i=Math.atan2(o*u,cc(l,u*a)),e=Math.atan2(l,u*a),r=Ft(e+this.long0),s=Y7(this.cgb,i)}else r=1/0,s=1/0;return t.x=r,t.y=s,t}var JUe=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"];const sA={init:qUe,forward:HUe,inverse:WUe,names:JUe};function ZUe(t,e){if(t===void 0){if(t=Math.floor((Ft(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var YUe="etmerc";function KUe(){var t=ZUe(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*zn,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,sA.init.apply(this),this.forward=sA.forward,this.inverse=sA.inverse}var QUe=["Universal Transverse Mercator System","utm"];const XUe={init:KUe,names:QUe,dependsOn:YUe};function K7(t,e){return Math.pow((1-t)/(1+t),e)}var eVe=20;function tVe(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+nr)/(Math.pow(Math.tan(.5*this.lat0+nr),this.C)*K7(this.e*t,this.ratexp))}function iVe(t){var e=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+nr),this.C)*K7(this.e*Math.sin(i),this.ratexp))-mt,t.x=this.C*e,t}function rVe(t){for(var e=1e-14,i=t.x/this.C,r=t.y,s=Math.pow(Math.tan(.5*r+nr)/this.K,1/this.C),n=eVe;n>0&&(r=2*Math.atan(s*K7(this.e*Math.sin(t.y),-.5*this.e))-mt,!(Math.abs(r-t.y)<e));--n)t.y=r;return n?(t.x=i,t.y=r,t):null}var sVe=["gauss"];const Q7={init:tVe,forward:iVe,inverse:rVe,names:sVe};function nVe(){Q7.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function oVe(t){var e,i,r,s;return t.x=Ft(t.x-this.long0),Q7.forward.apply(this,[t]),e=Math.sin(t.y),i=Math.cos(t.y),r=Math.cos(t.x),s=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*i*r),t.x=s*i*Math.sin(t.x),t.y=s*(this.cosc0*e-this.sinc0*i*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function aVe(t){var e,i,r,s,n;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,n=Math.sqrt(t.x*t.x+t.y*t.y)){var o=2*Math.atan2(n,this.R2);e=Math.sin(o),i=Math.cos(o),s=Math.asin(i*this.sinc0+t.y*e*this.cosc0/n),r=Math.atan2(t.x*e,n*this.cosc0*i-t.y*this.sinc0*e)}else s=this.phic0,r=0;return t.x=r,t.y=s,Q7.inverse.apply(this,[t]),t.x=Ft(t.x+this.long0),t}var lVe=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const uVe={init:nVe,forward:oVe,inverse:aVe,names:lVe};function cVe(t,e,i){return e*=i,Math.tan(.5*(mt+t))*Math.pow((1-e)/(1+e),.5*i)}function hVe(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=At&&(this.k0=.5*(1+lE(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=At&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=At&&(this.k0=.5*this.cons*Gh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/bc(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Gh(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-mt,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function dVe(t){var e=t.x,i=t.y,r=Math.sin(i),s=Math.cos(i),n,o,a,l,u,c,d=Ft(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=At&&Math.abs(i+this.lat0)<=At?(t.x=NaN,t.y=NaN,t):this.sphere?(n=2*this.k0/(1+this.sinlat0*r+this.coslat0*s*Math.cos(d)),t.x=this.a*n*s*Math.sin(d)+this.x0,t.y=this.a*n*(this.coslat0*r-this.sinlat0*s*Math.cos(d))+this.y0,t):(o=2*Math.atan(this.ssfn_(i,r,this.e))-mt,l=Math.cos(o),a=Math.sin(o),Math.abs(this.coslat0)<=At?(u=bc(this.e,i*this.con,this.con*r),c=2*this.a*this.k0*u/this.cons,t.x=this.x0+c*Math.sin(e-this.long0),t.y=this.y0-this.con*c*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<At?(n=2*this.a*this.k0/(1+l*Math.cos(d)),t.y=n*a):(n=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*l*Math.cos(d))),t.y=n*(this.cosX0*a-this.sinX0*l*Math.cos(d))+this.y0),t.x=n*l*Math.sin(d)+this.x0,t))}function pVe(t){t.x-=this.x0,t.y-=this.y0;var e,i,r,s,n,o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,i=this.lat0,o<=At?(t.x=e,t.y=i,t):(i=Math.asin(Math.cos(a)*this.sinlat0+t.y*Math.sin(a)*this.coslat0/o),Math.abs(this.coslat0)<At?this.lat0>0?e=Ft(this.long0+Math.atan2(t.x,-1*t.y)):e=Ft(this.long0+Math.atan2(t.x,t.y)):e=Ft(this.long0+Math.atan2(t.x*Math.sin(a),o*this.coslat0*Math.cos(a)-t.y*this.sinlat0*Math.sin(a))),t.x=e,t.y=i,t)}else if(Math.abs(this.coslat0)<=At){if(o<=At)return i=this.lat0,e=this.long0,t.x=e,t.y=i,t;t.x*=this.con,t.y*=this.con,r=o*this.cons/(2*this.a*this.k0),i=this.con*t3(this.e,r),e=this.con*Ft(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else s=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=At?n=this.X0:(n=Math.asin(Math.cos(s)*this.sinX0+t.y*Math.sin(s)*this.cosX0/o),e=Ft(this.long0+Math.atan2(t.x*Math.sin(s),o*this.cosX0*Math.cos(s)-t.y*this.sinX0*Math.sin(s)))),i=-1*t3(this.e,Math.tan(.5*(mt+n)));return t.x=e,t.y=i,t}var fVe=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"];const mVe={init:hVe,forward:dVe,inverse:pVe,names:fVe,ssfn_:cVe};function yVe(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),i=this.a,r=this.rf,s=1/r,n=2*s-Math.pow(s,2),o=this.e=Math.sqrt(n);this.R=this.k0*i*Math.sqrt(1-n)/(1-n*Math.pow(e,2)),this.alpha=Math.sqrt(1+n/(1-n)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*l+this.alpha*o/2*u}function gVe(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+i)+this.K,s=2*(Math.atan(Math.exp(r))-Math.PI/4),n=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(n)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(n))),a=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(n));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*o+this.x0,t}function vVe(t){for(var e=t.x-this.x0,i=t.y-this.y0,r=e/this.R,s=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),n=Math.asin(Math.cos(this.b0)*Math.sin(s)+Math.sin(this.b0)*Math.cos(s)*Math.cos(r)),o=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(s))),a=this.lambda0+o/this.alpha,l=0,u=n,c=-1e3,d=0;Math.abs(u-c)>1e-7;){if(++d>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+n/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=a,t.y=u,t}var bVe=["somerc"];const wVe={init:yVe,forward:gVe,inverse:vVe,names:bVe};var zv=1e-7;function _Ve(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],i=typeof t.PROJECTION=="object"?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||e.indexOf(i)!==-1}function xVe(){var t,e,i,r,s,n,o,a,l,u,c=0,d,f=0,m=0,g=0,v=0,b=0,_=0;this.no_off=_Ve(this),this.no_rot="no_rot"in this;var S=!1;"alpha"in this&&(S=!0);var M=!1;if("rectified_grid_angle"in this&&(M=!0),S&&(_=this.alpha),M&&(c=this.rectified_grid_angle*zn),S||M)f=this.longc;else if(m=this.long1,v=this.lat1,g=this.long2,b=this.lat2,Math.abs(v-b)<=zv||(t=Math.abs(v))<=zv||Math.abs(t-mt)<=zv||Math.abs(Math.abs(this.lat0)-mt)<=zv||Math.abs(Math.abs(b)-mt)<=zv)throw new Error;var x=1-this.es;e=Math.sqrt(x),Math.abs(this.lat0)>At?(a=Math.sin(this.lat0),i=Math.cos(this.lat0),t=1-this.es*a*a,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/x),this.A=this.B*this.k0*e/t,r=this.B*e/(i*Math.sqrt(t)),s=r*r-1,s<=0?s=0:(s=Math.sqrt(s),this.lat0<0&&(s=-s)),this.E=s+=r,this.E*=Math.pow(bc(this.e,this.lat0,a),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=s=1),S||M?(S?(d=Math.asin(Math.sin(_)/r),M||(c=_)):(d=c,_=Math.asin(r*Math.sin(d))),this.lam0=f-Math.asin(.5*(s-1/s)*Math.tan(d))/this.B):(n=Math.pow(bc(this.e,v,Math.sin(v)),this.B),o=Math.pow(bc(this.e,b,Math.sin(b)),this.B),s=this.E/n,l=(o-n)/(o+n),u=this.E*this.E,u=(u-o*n)/(u+o*n),t=m-g,t<-Math.pi?g-=XS:t>Math.pi&&(g+=XS),this.lam0=Ft(.5*(m+g)-Math.atan(u*Math.tan(.5*this.B*(m-g))/l)/this.B),d=Math.atan(2*Math.sin(this.B*Ft(m-this.lam0))/(s-1/s)),c=_=Math.asin(r*Math.sin(d))),this.singam=Math.sin(d),this.cosgam=Math.cos(d),this.sinrot=Math.sin(c),this.cosrot=Math.cos(c),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(_))),this.lat0<0&&(this.u_0=-this.u_0)),s=.5*d,this.v_pole_n=this.ArB*Math.log(Math.tan(nr-s)),this.v_pole_s=this.ArB*Math.log(Math.tan(nr+s))}function SVe(t){var e={},i,r,s,n,o,a,l,u;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-mt)>At){if(o=this.E/Math.pow(bc(this.e,t.y,Math.sin(t.y)),this.B),a=1/o,i=.5*(o-a),r=.5*(o+a),n=Math.sin(this.B*t.x),s=(i*this.singam-n*this.cosgam)/r,Math.abs(Math.abs(s)-1)<At)throw new Error;u=.5*this.ArB*Math.log((1-s)/(1+s)),a=Math.cos(this.B*t.x),Math.abs(a)<zv?l=this.A*t.x:l=this.ArB*Math.atan2(i*this.cosgam+n*this.singam,a)}else u=t.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*t.y;return this.no_rot?(e.x=l,e.y=u):(l-=this.u_0,e.x=u*this.cosrot+l*this.sinrot,e.y=l*this.cosrot-u*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function EVe(t){var e,i,r,s,n,o,a,l={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(i=t.y,e=t.x):(i=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*i),s=.5*(r-1/r),n=.5*(r+1/r),o=Math.sin(this.BrA*e),a=(o*this.cosgam+s*this.singam)/n,Math.abs(Math.abs(a)-1)<At)l.x=0,l.y=a<0?-mt:mt;else{if(l.y=this.E/Math.sqrt((1+a)/(1-a)),l.y=t3(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(s*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var TVe=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const IVe={init:xVe,forward:SVe,inverse:EVe,names:TVe};function MVe(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<At)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),i=Math.cos(this.lat1),r=Gh(this.e,e,i),s=bc(this.e,this.lat1,e),n=Math.sin(this.lat2),o=Math.cos(this.lat2),a=Gh(this.e,n,o),l=bc(this.e,this.lat2,n),u=bc(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>At?this.ns=Math.log(r/a)/Math.log(s/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function AVe(t){var e=t.x,i=t.y;Math.abs(2*Math.abs(i)-Math.PI)<=At&&(i=lE(i)*(mt-2*At));var r=Math.abs(Math.abs(i)-mt),s,n;if(r>At)s=bc(this.e,i,Math.sin(i)),n=this.a*this.f0*Math.pow(s,this.ns);else{if(r=i*this.ns,r<=0)return null;n=0}var o=this.ns*Ft(e-this.long0);return t.x=this.k0*(n*Math.sin(o))+this.x0,t.y=this.k0*(this.rh-n*Math.cos(o))+this.y0,t}function CVe(t){var e,i,r,s,n,o=(t.x-this.x0)/this.k0,a=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+a*a),i=1):(e=-Math.sqrt(o*o+a*a),i=-1);var l=0;if(e!==0&&(l=Math.atan2(i*o,i*a)),e!==0||this.ns>0){if(i=1/this.ns,r=Math.pow(e/(this.a*this.f0),i),s=t3(this.e,r),s===-9999)return null}else s=-mt;return n=Ft(l/this.ns+this.long0),t.x=n,t.y=s,t}var $Ve=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const OVe={init:MVe,forward:AVe,inverse:CVe,names:$Ve};function RVe(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function kVe(t){var e,i,r,s,n,o,a,l=t.x,u=t.y,c=Ft(l-this.long0);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),r=-c*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),n=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(s)),o=this.n*n,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),t.y=a*Math.cos(o)/1,t.x=a*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t}function LVe(t){var e,i,r,s,n,o,a,l,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),n=Math.atan2(t.y,t.x),s=n/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(s)),i=Math.asin(Math.cos(r)*Math.sin(s)/Math.cos(e)),t.x=this.long0-i/this.alfa,a=e,l=0;var c=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(l=1),a=t.y,c+=1;while(l===0&&c<15);return c>=15?null:t}var PVe=["Krovak","krovak"];const NVe={init:RVe,forward:kVe,inverse:LVe,names:PVe};function Ko(t,e,i,r,s){return t*s-e*Math.sin(2*s)+i*Math.sin(4*s)-r*Math.sin(6*s)}function uE(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function cE(t){return .375*t*(1+.25*t*(1+.46875*t))}function hE(t){return .05859375*t*t*(1+.75*t)}function dE(t){return t*t*t*(35/3072)}function hw(t,e,i){var r=e*i;return t/Math.sqrt(1-r*r)}function o_(t){return Math.abs(t)<mt?t:t-lE(t)*Math.PI}function F5(t,e,i,r,s){var n,o;n=t/e;for(var a=0;a<15;a++)if(o=(t-(e*n-i*Math.sin(2*n)+r*Math.sin(4*n)-s*Math.sin(6*n)))/(e-2*i*Math.cos(2*n)+4*r*Math.cos(4*n)-6*s*Math.cos(6*n)),n+=o,Math.abs(o)<=1e-10)return n;return NaN}function FVe(){this.sphere||(this.e0=uE(this.es),this.e1=cE(this.es),this.e2=hE(this.es),this.e3=dE(this.es),this.ml0=this.a*Ko(this.e0,this.e1,this.e2,this.e3,this.lat0))}function DVe(t){var e,i,r=t.x,s=t.y;if(r=Ft(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(s)*Math.sin(r)),i=this.a*(Math.atan2(Math.tan(s),Math.cos(r))-this.lat0);else{var n=Math.sin(s),o=Math.cos(s),a=hw(this.a,this.e,n),l=Math.tan(s)*Math.tan(s),u=r*Math.cos(s),c=u*u,d=this.es*o*o/(1-this.es),f=this.a*Ko(this.e0,this.e1,this.e2,this.e3,s);e=a*u*(1-c*l*(1/6-(8-l+8*d)*c/120)),i=f-this.ml0+a*n/o*c*(.5+(5-l+6*d)*c/24)}return t.x=e+this.x0,t.y=i+this.y0,t}function jVe(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,i=t.y/this.a,r,s;if(this.sphere){var n=i+this.lat0;r=Math.asin(Math.sin(n)*Math.cos(e)),s=Math.atan2(Math.tan(e),Math.cos(n))}else{var o=this.ml0/this.a+i,a=F5(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-mt)<=At)return t.x=this.long0,t.y=mt,i<0&&(t.y*=-1),t;var l=hw(this.a,this.e,Math.sin(a)),u=l*l*l/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(a),2),d=e*this.a/l,f=d*d;r=a-l*Math.tan(a)/u*d*d*(.5-(1+3*c)*d*d/24),s=d*(1-f*(c/3+(1+3*c)*c*f/15))/Math.cos(a)}return t.x=Ft(s+this.long0),t.y=o_(r),t}var UVe=["Cassini","Cassini_Soldner","cass"];const VVe={init:FVe,forward:DVe,inverse:jVe,names:UVe};function gm(t,e){var i;return t>1e-7?(i=t*e,(1-t*t)*(e/(1-i*i)-.5/t*Math.log((1-i)/(1+i)))):2*e}var BVe=1,zVe=2,GVe=3,qVe=4;function HVe(){var t=Math.abs(this.lat0);if(Math.abs(t-mt)<At?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<At?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=gm(this.e,1),this.mmf=.5/(1-this.es),this.apa=tBe(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=gm(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function WVe(t){var e,i,r,s,n,o,a,l,u,c,d=t.x,f=t.y;if(d=Ft(d-this.long0),this.sphere){if(n=Math.sin(f),c=Math.cos(f),r=Math.cos(d),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(i=this.mode===this.EQUIT?1+c*r:1+this.sinph0*n+this.cosph0*c*r,i<=At)return null;i=Math.sqrt(2/i),e=i*c*Math.sin(d),i*=this.mode===this.EQUIT?n:this.cosph0*n-this.sinph0*c*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(f+this.lat0)<At)return null;i=nr-f*.5,i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)),e=i*Math.sin(d),i*=r}}else{switch(a=0,l=0,u=0,r=Math.cos(d),s=Math.sin(d),n=Math.sin(f),o=gm(this.e,n),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=o/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:u=1+this.sinb1*a+this.cosb1*l*r;break;case this.EQUIT:u=1+l*r;break;case this.N_POLE:u=mt+f,o=this.qp-o;break;case this.S_POLE:u=f-mt,o=this.qp+o;break}if(Math.abs(u)<At)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),this.mode===this.OBLIQ?i=this.ymf*u*(this.cosb1*a-this.sinb1*l*r):i=(u=Math.sqrt(2/(1+l*r)))*a*this.ymf,e=this.xmf*u*l*s;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(u=Math.sqrt(o))*s,i=r*(this.mode===this.S_POLE?u:-u)):e=i=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*i+this.y0,t}function JVe(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,i=t.y/this.a,r,s,n,o,a,l,u;if(this.sphere){var c=0,d,f=0;if(d=Math.sqrt(e*e+i*i),s=d*.5,s>1)return null;switch(s=2*Math.asin(s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=Math.sin(s),c=Math.cos(s)),this.mode){case this.EQUIT:s=Math.abs(d)<=At?0:Math.asin(i*f/d),e*=f,i=c*d;break;case this.OBLIQ:s=Math.abs(d)<=At?this.lat0:Math.asin(c*this.sinph0+i*f*this.cosph0/d),e*=f*this.cosph0,i=(c-Math.sin(s)*this.sinph0)*d;break;case this.N_POLE:i=-i,s=mt-s;break;case this.S_POLE:s-=mt;break}r=i===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,i)}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,i*=this.dd,l=Math.sqrt(e*e+i*i),l<At)return t.x=this.long0,t.y=this.lat0,t;o=2*Math.asin(.5*l/this.rq),n=Math.cos(o),e*=o=Math.sin(o),this.mode===this.OBLIQ?(u=n*this.sinb1+i*o*this.cosb1/l,a=this.qp*u,i=l*this.cosb1*n-i*this.sinb1*o):(u=i*o/l,a=this.qp*u,i=l*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),a=e*e+i*i,!a)return t.x=this.long0,t.y=this.lat0,t;u=1-a/this.qp,this.mode===this.S_POLE&&(u=-u)}r=Math.atan2(e,i),s=iBe(Math.asin(u),this.apa)}return t.x=Ft(this.long0+r),t.y=s,t}var ZVe=.3333333333333333,YVe=.17222222222222222,KVe=.10257936507936508,QVe=.06388888888888888,XVe=.0664021164021164,eBe=.016415012942191543;function tBe(t){var e,i=[];return i[0]=t*ZVe,e=t*t,i[0]+=e*YVe,i[1]=e*QVe,e*=t,i[0]+=e*KVe,i[1]+=e*XVe,i[2]=e*eBe,i}function iBe(t,e){var i=t+t;return t+e[0]*Math.sin(i)+e[1]*Math.sin(i+i)+e[2]*Math.sin(i+i+i)}var rBe=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const sBe={init:HVe,forward:WVe,inverse:JVe,names:rBe,S_POLE:BVe,N_POLE:zVe,EQUIT:GVe,OBLIQ:qVe};function km(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function nBe(){Math.abs(this.lat1+this.lat2)<At||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Gh(this.e3,this.sin_po,this.cos_po),this.qs1=gm(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Gh(this.e3,this.sin_po,this.cos_po),this.qs2=gm(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=gm(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>At?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function oBe(t){var e=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var r=gm(this.e3,this.sin_phi),s=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,n=this.ns0*Ft(e-this.long0),o=s*Math.sin(n)+this.x0,a=this.rh-s*Math.cos(n)+this.y0;return t.x=o,t.y=a,t}function aBe(t){var e,i,r,s,n,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),s=0,e!==0&&(s=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-r*r)/(2*this.ns0)):(i=(this.c-r*r)/this.ns0,o=this.phi1z(this.e3,i)),n=Ft(s/this.ns0+this.long0),t.x=n,t.y=o,t}function lBe(t,e){var i,r,s,n,o,a=km(.5*e);if(t<At)return a;for(var l=t*t,u=1;u<=25;u++)if(i=Math.sin(a),r=Math.cos(a),s=t*i,n=1-s*s,o=.5*n*n/r*(e/(1-l)-i/n+.5/t*Math.log((1-s)/(1+s))),a=a+o,Math.abs(o)<=1e-7)return a;return null}var uBe=["Albers_Conic_Equal_Area","Albers","aea"];const cBe={init:nBe,forward:oBe,inverse:aBe,names:uBe,phi1z:lBe};function hBe(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function dBe(t){var e,i,r,s,n,o,a,l,u=t.x,c=t.y;return r=Ft(u-this.long0),e=Math.sin(c),i=Math.cos(c),s=Math.cos(r),o=this.sin_p14*e+this.cos_p14*i*s,n=1,o>0||Math.abs(o)<=At?(a=this.x0+this.a*n*i*Math.sin(r)/o,l=this.y0+this.a*n*(this.cos_p14*e-this.sin_p14*i*s)/o):(a=this.x0+this.infinity_dist*i*Math.sin(r),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*i*s)),t.x=a,t.y=l,t}function pBe(t){var e,i,r,s,n,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(s=Math.atan2(e,this.rc),i=Math.sin(s),r=Math.cos(s),o=km(r*this.sin_p14+t.y*i*this.cos_p14/e),n=Math.atan2(t.x*i,e*this.cos_p14*r-t.y*this.sin_p14*i),n=Ft(this.long0+n)):(o=this.phic0,n=0),t.x=n,t.y=o,t}var fBe=["gnom"];const mBe={init:hBe,forward:dBe,inverse:pBe,names:fBe};function yBe(t,e){var i=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-i)<1e-6)return e<0?-1*mt:mt;for(var r=Math.asin(.5*e),s,n,o,a,l=0;l<30;l++)if(n=Math.sin(r),o=Math.cos(r),a=t*n,s=Math.pow(1-a*a,2)/(2*o)*(e/(1-t*t)-n/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),r+=s,Math.abs(s)<=1e-10)return r;return NaN}function gBe(){this.sphere||(this.k0=Gh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function vBe(t){var e=t.x,i=t.y,r,s,n=Ft(e-this.long0);if(this.sphere)r=this.x0+this.a*n*Math.cos(this.lat_ts),s=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var o=gm(this.e,Math.sin(i));r=this.x0+this.a*this.k0*n,s=this.y0+this.a*o*.5/this.k0}return t.x=r,t.y=s,t}function bBe(t){t.x-=this.x0,t.y-=this.y0;var e,i;return this.sphere?(e=Ft(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(i=yBe(this.e,2*t.y*this.k0/this.a),e=Ft(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=i,t}var wBe=["cea"];const _Be={init:gBe,forward:vBe,inverse:bBe,names:wBe};function xBe(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function SBe(t){var e=t.x,i=t.y,r=Ft(e-this.long0),s=o_(i-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*s,t}function EBe(t){var e=t.x,i=t.y;return t.x=Ft(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=o_(this.lat0+(i-this.y0)/this.a),t}var TBe=["Equirectangular","Equidistant_Cylindrical","eqc"];const IBe={init:xBe,forward:SBe,inverse:EBe,names:TBe};var _J=20;function MBe(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=uE(this.es),this.e1=cE(this.es),this.e2=hE(this.es),this.e3=dE(this.es),this.ml0=this.a*Ko(this.e0,this.e1,this.e2,this.e3,this.lat0)}function ABe(t){var e=t.x,i=t.y,r,s,n,o=Ft(e-this.long0);if(n=o*Math.sin(i),this.sphere)Math.abs(i)<=At?(r=this.a*o,s=-1*this.a*this.lat0):(r=this.a*Math.sin(n)/Math.tan(i),s=this.a*(o_(i-this.lat0)+(1-Math.cos(n))/Math.tan(i)));else if(Math.abs(i)<=At)r=this.a*o,s=-1*this.ml0;else{var a=hw(this.a,this.e,Math.sin(i))/Math.tan(i);r=a*Math.sin(n),s=this.a*Ko(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+a*(1-Math.cos(n))}return t.x=r+this.x0,t.y=s+this.y0,t}function CBe(t){var e,i,r,s,n,o,a,l,u;if(r=t.x-this.x0,s=t.y-this.y0,this.sphere)if(Math.abs(s+this.a*this.lat0)<=At)e=Ft(r/this.a+this.long0),i=0;else{o=this.lat0+s/this.a,a=r*r/this.a/this.a+o*o,l=o;var c;for(n=_J;n;--n)if(c=Math.tan(l),u=-1*(o*(l*c+1)-l-.5*(l*l+a)*c)/((l-o)/c-1),l+=u,Math.abs(u)<=At){i=l;break}e=Ft(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(i))}else if(Math.abs(s+this.ml0)<=At)i=0,e=Ft(this.long0+r/this.a);else{o=(this.ml0+s)/this.a,a=r*r/this.a/this.a+o*o,l=o;var d,f,m,g,v;for(n=_J;n;--n)if(v=this.e*Math.sin(l),d=Math.sqrt(1-v*v)*Math.tan(l),f=this.a*Ko(this.e0,this.e1,this.e2,this.e3,l),m=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),g=f/this.a,u=(o*(d*g+1)-g-.5*d*(g*g+a))/(this.es*Math.sin(2*l)*(g*g+a-2*o*g)/(4*d)+(o-g)*(d*m-2/Math.sin(2*l))-m),l-=u,Math.abs(u)<=At){i=l;break}d=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),e=Ft(this.long0+Math.asin(r*d/this.a)/Math.sin(i))}return t.x=e,t.y=i,t}var $Be=["Polyconic","poly"];const OBe={init:MBe,forward:ABe,inverse:CBe,names:$Be};function RBe(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function kBe(t){var e,i=t.x,r=t.y,s=r-this.lat0,n=i-this.long0,o=s/Kx*1e-5,a=n,l=1,u=0;for(e=1;e<=10;e++)l=l*o,u=u+this.A[e]*l;var c=u,d=a,f=1,m=0,g,v,b=0,_=0;for(e=1;e<=6;e++)g=f*c-m*d,v=m*c+f*d,f=g,m=v,b=b+this.B_re[e]*f-this.B_im[e]*m,_=_+this.B_im[e]*f+this.B_re[e]*m;return t.x=_*this.a+this.x0,t.y=b*this.a+this.y0,t}function LBe(t){var e,i=t.x,r=t.y,s=i-this.x0,n=r-this.y0,o=n/this.a,a=s/this.a,l=1,u=0,c,d,f=0,m=0;for(e=1;e<=6;e++)c=l*o-u*a,d=u*o+l*a,l=c,u=d,f=f+this.C_re[e]*l-this.C_im[e]*u,m=m+this.C_im[e]*l+this.C_re[e]*u;for(var g=0;g<this.iterations;g++){var v=f,b=m,_,S,M=o,x=a;for(e=2;e<=6;e++)_=v*f-b*m,S=b*f+v*m,v=_,b=S,M=M+(e-1)*(this.B_re[e]*v-this.B_im[e]*b),x=x+(e-1)*(this.B_im[e]*v+this.B_re[e]*b);v=1,b=0;var T=this.B_re[1],I=this.B_im[1];for(e=2;e<=6;e++)_=v*f-b*m,S=b*f+v*m,v=_,b=S,T=T+e*(this.B_re[e]*v-this.B_im[e]*b),I=I+e*(this.B_im[e]*v+this.B_re[e]*b);var $=T*T+I*I;f=(M*T+x*I)/$,m=(x*T-M*I)/$}var L=f,B=m,z=1,H=0;for(e=1;e<=9;e++)z=z*L,H=H+this.D[e]*z;var J=this.lat0+H*Kx*1e5,K=this.long0+B;return t.x=K,t.y=J,t}var PBe=["New_Zealand_Map_Grid","nzmg"];const NBe={init:RBe,forward:kBe,inverse:LBe,names:PBe};function FBe(){}function DBe(t){var e=t.x,i=t.y,r=Ft(e-this.long0),s=this.x0+this.a*r,n=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return t.x=s,t.y=n,t}function jBe(t){t.x-=this.x0,t.y-=this.y0;var e=Ft(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=i,t}var UBe=["Miller_Cylindrical","mill"];const VBe={init:FBe,forward:DBe,inverse:jBe,names:UBe};var BBe=20;function zBe(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Bue(this.es)}function GBe(t){var e,i,r=t.x,s=t.y;if(r=Ft(r-this.long0),this.sphere){if(!this.m)s=this.n!==1?Math.asin(this.n*Math.sin(s)):s;else for(var n=this.n*Math.sin(s),o=BBe;o;--o){var a=(this.m*s+Math.sin(s)-n)/(this.m+Math.cos(s));if(s-=a,Math.abs(a)<At)break}e=this.a*this.C_x*r*(this.m+Math.cos(s)),i=this.a*this.C_y*s}else{var l=Math.sin(s),u=Math.cos(s);i=this.a*BC(s,l,u,this.en),e=this.a*r*u/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=i,t}function qBe(t){var e,i,r,s;return t.x-=this.x0,r=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(e))),this.m?e=km((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=km(Math.sin(e)/this.n)),r=Ft(r+this.long0),e=o_(e)):(e=zue(t.y/this.a,this.es,this.en),s=Math.abs(e),s<mt?(s=Math.sin(e),i=this.long0+t.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(e)),r=Ft(i)):s-At<mt&&(r=this.long0)),t.x=r,t.y=e,t}var HBe=["Sinusoidal","sinu"];const WBe={init:zBe,forward:GBe,inverse:qBe,names:HBe};function JBe(){}function ZBe(t){for(var e=t.x,i=t.y,r=Ft(e-this.long0),s=i,n=Math.PI*Math.sin(i);;){var o=-(s+Math.sin(s)-n)/(1+Math.cos(s));if(s+=o,Math.abs(o)<At)break}s/=2,Math.PI/2-Math.abs(i)<At&&(r=0);var a=.900316316158*this.a*r*Math.cos(s)+this.x0,l=1.4142135623731*this.a*Math.sin(s)+this.y0;return t.x=a,t.y=l,t}function YBe(t){var e,i;t.x-=this.x0,t.y-=this.y0,i=t.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),e=Math.asin(i);var r=Ft(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),i=(2*e+Math.sin(2*e))/Math.PI,Math.abs(i)>1&&(i=1);var s=Math.asin(i);return t.x=r,t.y=s,t}var KBe=["Mollweide","moll"];const QBe={init:JBe,forward:ZBe,inverse:YBe,names:KBe};function XBe(){Math.abs(this.lat1+this.lat2)<At||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=uE(this.es),this.e1=cE(this.es),this.e2=hE(this.es),this.e3=dE(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Gh(this.e,this.sinphi,this.cosphi),this.ml1=Ko(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<At?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Gh(this.e,this.sinphi,this.cosphi),this.ml2=Ko(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Ko(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function eze(t){var e=t.x,i=t.y,r;if(this.sphere)r=this.a*(this.g-i);else{var s=Ko(this.e0,this.e1,this.e2,this.e3,i);r=this.a*(this.g-s)}var n=this.ns*Ft(e-this.long0),o=this.x0+r*Math.sin(n),a=this.y0+this.rh-r*Math.cos(n);return t.x=o,t.y=a,t}function tze(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,i,r,s;this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var n=0;if(i!==0&&(n=Math.atan2(e*t.x,e*t.y)),this.sphere)return s=Ft(this.long0+n/this.ns),r=o_(this.g-i/this.a),t.x=s,t.y=r,t;var o=this.g-i/this.a;return r=F5(o,this.e0,this.e1,this.e2,this.e3),s=Ft(this.long0+n/this.ns),t.x=s,t.y=r,t}var ize=["Equidistant_Conic","eqdc"];const rze={init:XBe,forward:eze,inverse:tze,names:ize};function sze(){this.R=this.a}function nze(t){var e=t.x,i=t.y,r=Ft(e-this.long0),s,n;Math.abs(i)<=At&&(s=this.x0+this.R*r,n=this.y0);var o=km(2*Math.abs(i/Math.PI));(Math.abs(r)<=At||Math.abs(Math.abs(i)-mt)<=At)&&(s=this.x0,i>=0?n=this.y0+Math.PI*this.R*Math.tan(.5*o):n=this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/r-r/Math.PI),l=a*a,u=Math.sin(o),c=Math.cos(o),d=c/(u+c-1),f=d*d,m=d*(2/u-1),g=m*m,v=Math.PI*this.R*(a*(d-g)+Math.sqrt(l*(d-g)*(d-g)-(g+l)*(f-g)))/(g+l);r<0&&(v=-v),s=this.x0+v;var b=l+d;return v=Math.PI*this.R*(m*b-a*Math.sqrt((g+l)*(l+1)-b*b))/(g+l),i>=0?n=this.y0+v:n=this.y0-v,t.x=s,t.y=n,t}function oze(t){var e,i,r,s,n,o,a,l,u,c,d,f,m;return t.x-=this.x0,t.y-=this.y0,d=Math.PI*this.R,r=t.x/d,s=t.y/d,n=r*r+s*s,o=-Math.abs(s)*(1+n),a=o-2*s*s+r*r,l=-2*o+1+2*s*s+n*n,m=s*s/l+(2*a*a*a/l/l/l-9*o*a/l/l)/27,u=(o-a*a/3/l)/l,c=2*Math.sqrt(-u/3),d=3*m/u/c,Math.abs(d)>1&&(d>=0?d=1:d=-1),f=Math.acos(d)/3,t.y>=0?i=(-c*Math.cos(f+Math.PI/3)-a/3/l)*Math.PI:i=-(-c*Math.cos(f+Math.PI/3)-a/3/l)*Math.PI,Math.abs(r)<At?e=this.long0:e=Ft(this.long0+Math.PI*(n-1+Math.sqrt(1+2*(r*r-s*s)+n*n))/2/r),t.x=e,t.y=i,t}var aze=["Van_der_Grinten_I","VanDerGrinten","vandg"];const lze={init:sze,forward:nze,inverse:oze,names:aze};function uze(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function cze(t){var e=t.x,i=t.y,r=Math.sin(t.y),s=Math.cos(t.y),n=Ft(e-this.long0),o,a,l,u,c,d,f,m,g,v,b,_,S,M,x,T,I,$,L,B,z,H,J;return this.sphere?Math.abs(this.sin_p12-1)<=At?(t.x=this.x0+this.a*(mt-i)*Math.sin(n),t.y=this.y0-this.a*(mt-i)*Math.cos(n),t):Math.abs(this.sin_p12+1)<=At?(t.x=this.x0+this.a*(mt+i)*Math.sin(n),t.y=this.y0+this.a*(mt+i)*Math.cos(n),t):($=this.sin_p12*r+this.cos_p12*s*Math.cos(n),T=Math.acos($),I=T?T/Math.sin(T):1,t.x=this.x0+this.a*I*s*Math.sin(n),t.y=this.y0+this.a*I*(this.cos_p12*r-this.sin_p12*s*Math.cos(n)),t):(o=uE(this.es),a=cE(this.es),l=hE(this.es),u=dE(this.es),Math.abs(this.sin_p12-1)<=At?(c=this.a*Ko(o,a,l,u,mt),d=this.a*Ko(o,a,l,u,i),t.x=this.x0+(c-d)*Math.sin(n),t.y=this.y0-(c-d)*Math.cos(n),t):Math.abs(this.sin_p12+1)<=At?(c=this.a*Ko(o,a,l,u,mt),d=this.a*Ko(o,a,l,u,i),t.x=this.x0+(c+d)*Math.sin(n),t.y=this.y0+(c+d)*Math.cos(n),t):(f=r/s,m=hw(this.a,this.e,this.sin_p12),g=hw(this.a,this.e,r),v=Math.atan((1-this.es)*f+this.es*m*this.sin_p12/(g*s)),b=Math.atan2(Math.sin(n),this.cos_p12*Math.tan(v)-this.sin_p12*Math.cos(n)),b===0?L=Math.asin(this.cos_p12*Math.sin(v)-this.sin_p12*Math.cos(v)):Math.abs(Math.abs(b)-Math.PI)<=At?L=-Math.asin(this.cos_p12*Math.sin(v)-this.sin_p12*Math.cos(v)):L=Math.asin(Math.sin(n)*Math.cos(v)/Math.sin(b)),_=this.e*this.sin_p12/Math.sqrt(1-this.es),S=this.e*this.cos_p12*Math.cos(b)/Math.sqrt(1-this.es),M=_*S,x=S*S,B=L*L,z=B*L,H=z*L,J=H*L,T=m*L*(1-B*x*(1-x)/6+z/8*M*(1-2*x)+H/120*(x*(4-7*x)-3*_*_*(1-7*x))-J/48*M),t.x=this.x0+T*Math.sin(b),t.y=this.y0+T*Math.cos(b),t))}function hze(t){t.x-=this.x0,t.y-=this.y0;var e,i,r,s,n,o,a,l,u,c,d,f,m,g,v,b,_,S,M,x,T,I,$,L;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*mt*this.a?void 0:(i=e/this.a,r=Math.sin(i),s=Math.cos(i),n=this.long0,Math.abs(e)<=At?o=this.lat0:(o=km(s*this.sin_p12+t.y*r*this.cos_p12/e),a=Math.abs(this.lat0)-mt,Math.abs(a)<=At?this.lat0>=0?n=Ft(this.long0+Math.atan2(t.x,-t.y)):n=Ft(this.long0-Math.atan2(-t.x,t.y)):n=Ft(this.long0+Math.atan2(t.x*r,e*this.cos_p12*s-t.y*this.sin_p12*r))),t.x=n,t.y=o,t)):(l=uE(this.es),u=cE(this.es),c=hE(this.es),d=dE(this.es),Math.abs(this.sin_p12-1)<=At?(f=this.a*Ko(l,u,c,d,mt),e=Math.sqrt(t.x*t.x+t.y*t.y),m=f-e,o=F5(m/this.a,l,u,c,d),n=Ft(this.long0+Math.atan2(t.x,-1*t.y)),t.x=n,t.y=o,t):Math.abs(this.sin_p12+1)<=At?(f=this.a*Ko(l,u,c,d,mt),e=Math.sqrt(t.x*t.x+t.y*t.y),m=e-f,o=F5(m/this.a,l,u,c,d),n=Ft(this.long0+Math.atan2(t.x,t.y)),t.x=n,t.y=o,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),b=Math.atan2(t.x,t.y),g=hw(this.a,this.e,this.sin_p12),_=Math.cos(b),S=this.e*this.cos_p12*_,M=-S*S/(1-this.es),x=3*this.es*(1-M)*this.sin_p12*this.cos_p12*_/(1-this.es),T=e/g,I=T-M*(1+M)*Math.pow(T,3)/6-x*(1+3*M)*Math.pow(T,4)/24,$=1-M*I*I/2-T*I*I*I/6,v=Math.asin(this.sin_p12*Math.cos(I)+this.cos_p12*Math.sin(I)*_),n=Ft(this.long0+Math.asin(Math.sin(b)*Math.sin(I)/Math.cos(v))),L=Math.sin(v),o=Math.atan2((L-this.es*$*this.sin_p12)*Math.tan(v),L*(1-this.es)),t.x=n,t.y=o,t))}var dze=["Azimuthal_Equidistant","aeqd"];const pze={init:uze,forward:cze,inverse:hze,names:dze};function fze(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function mze(t){var e,i,r,s,n,o,a,l,u=t.x,c=t.y;return r=Ft(u-this.long0),e=Math.sin(c),i=Math.cos(c),s=Math.cos(r),o=this.sin_p14*e+this.cos_p14*i*s,n=1,(o>0||Math.abs(o)<=At)&&(a=this.a*n*i*Math.sin(r),l=this.y0+this.a*n*(this.cos_p14*e-this.sin_p14*i*s)),t.x=a,t.y=l,t}function yze(t){var e,i,r,s,n,o,a;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),i=km(e/this.a),r=Math.sin(i),s=Math.cos(i),o=this.long0,Math.abs(e)<=At?(a=this.lat0,t.x=o,t.y=a,t):(a=km(s*this.sin_p14+t.y*r*this.cos_p14/e),n=Math.abs(this.lat0)-mt,Math.abs(n)<=At?(this.lat0>=0?o=Ft(this.long0+Math.atan2(t.x,-t.y)):o=Ft(this.long0-Math.atan2(-t.x,t.y)),t.x=o,t.y=a,t):(o=Ft(this.long0+Math.atan2(t.x*r,e*this.cos_p14*s-t.y*this.sin_p14*r)),t.x=o,t.y=a,t))}var gze=["ortho"];const vze={init:fze,forward:mze,inverse:yze,names:gze};var ss={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},or={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function bze(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=mt-nr/2?this.face=ss.TOP:this.lat0<=-(mt-nr/2)?this.face=ss.BOTTOM:Math.abs(this.long0)<=nr?this.face=ss.FRONT:Math.abs(this.long0)<=mt+nr?this.face=this.long0>0?ss.RIGHT:ss.LEFT:this.face=ss.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function wze(t){var e={x:0,y:0},i,r,s,n,o,a,l={value:0};if(t.x-=this.long0,this.es!==0?i=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):i=t.y,r=t.x,this.face===ss.TOP)n=mt-i,r>=nr&&r<=mt+nr?(l.value=or.AREA_0,s=r-mt):r>mt+nr||r<=-(mt+nr)?(l.value=or.AREA_1,s=r>0?r-$s:r+$s):r>-(mt+nr)&&r<=-nr?(l.value=or.AREA_2,s=r+mt):(l.value=or.AREA_3,s=r);else if(this.face===ss.BOTTOM)n=mt+i,r>=nr&&r<=mt+nr?(l.value=or.AREA_0,s=-r+mt):r<nr&&r>=-nr?(l.value=or.AREA_1,s=-r):r<-nr&&r>=-(mt+nr)?(l.value=or.AREA_2,s=-r-mt):(l.value=or.AREA_3,s=r>0?-r+$s:-r-$s);else{var u,c,d,f,m,g,v;this.face===ss.RIGHT?r=kb(r,+mt):this.face===ss.BACK?r=kb(r,+$s):this.face===ss.LEFT&&(r=kb(r,-mt)),f=Math.sin(i),m=Math.cos(i),g=Math.sin(r),v=Math.cos(r),u=m*v,c=m*g,d=f,this.face===ss.FRONT?(n=Math.acos(u),s=QT(n,d,c,l)):this.face===ss.RIGHT?(n=Math.acos(c),s=QT(n,d,-u,l)):this.face===ss.BACK?(n=Math.acos(-u),s=QT(n,d,-c,l)):this.face===ss.LEFT?(n=Math.acos(-c),s=QT(n,d,u,l)):(n=s=0,l.value=or.AREA_0)}return a=Math.atan(12/$s*(s+Math.acos(Math.sin(s)*Math.cos(nr))-mt)),o=Math.sqrt((1-Math.cos(n))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(s))))),l.value===or.AREA_1?a+=mt:l.value===or.AREA_2?a+=$s:l.value===or.AREA_3&&(a+=1.5*$s),e.x=o*Math.cos(a),e.y=o*Math.sin(a),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function _ze(t){var e={lam:0,phi:0},i,r,s,n,o,a,l,u,c,d={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,r=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),i=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?d.value=or.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(d.value=or.AREA_1,i-=mt):t.x<0&&-t.x>=Math.abs(t.y)?(d.value=or.AREA_2,i=i<0?i+$s:i-$s):(d.value=or.AREA_3,i+=mt),c=$s/12*Math.tan(i),o=Math.sin(c)/(Math.cos(c)-1/Math.sqrt(2)),a=Math.atan(o),s=Math.cos(i),n=Math.tan(r),l=1-s*s*n*n*(1-Math.cos(Math.atan(1/Math.cos(a)))),l<-1?l=-1:l>1&&(l=1),this.face===ss.TOP)u=Math.acos(l),e.phi=mt-u,d.value===or.AREA_0?e.lam=a+mt:d.value===or.AREA_1?e.lam=a<0?a+$s:a-$s:d.value===or.AREA_2?e.lam=a-mt:e.lam=a;else if(this.face===ss.BOTTOM)u=Math.acos(l),e.phi=u-mt,d.value===or.AREA_0?e.lam=-a+mt:d.value===or.AREA_1?e.lam=-a:d.value===or.AREA_2?e.lam=-a-mt:e.lam=a<0?-a-$s:-a+$s;else{var f,m,g;f=l,c=f*f,c>=1?g=0:g=Math.sqrt(1-c)*Math.sin(a),c+=g*g,c>=1?m=0:m=Math.sqrt(1-c),d.value===or.AREA_1?(c=m,m=-g,g=c):d.value===or.AREA_2?(m=-m,g=-g):d.value===or.AREA_3&&(c=m,m=g,g=-c),this.face===ss.RIGHT?(c=f,f=-m,m=c):this.face===ss.BACK?(f=-f,m=-m):this.face===ss.LEFT&&(c=f,f=m,m=-c),e.phi=Math.acos(-g)-mt,e.lam=Math.atan2(m,f),this.face===ss.RIGHT?e.lam=kb(e.lam,-mt):this.face===ss.BACK?e.lam=kb(e.lam,-$s):this.face===ss.LEFT&&(e.lam=kb(e.lam,+mt))}if(this.es!==0){var v,b,_;v=e.phi<0?1:0,b=Math.tan(e.phi),_=this.b/Math.sqrt(b*b+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-_*_)/(this.one_minus_f*_)),v&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function QT(t,e,i,r){var s;return t<At?(r.value=or.AREA_0,s=0):(s=Math.atan2(e,i),Math.abs(s)<=nr?r.value=or.AREA_0:s>nr&&s<=mt+nr?(r.value=or.AREA_1,s-=mt):s>mt+nr||s<=-(mt+nr)?(r.value=or.AREA_2,s=s>=0?s-$s:s+$s):(r.value=or.AREA_3,s+=mt)),s}function kb(t,e){var i=t+e;return i<-$s?i+=XS:i>+$s&&(i-=XS),i}var xze=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const Sze={init:bze,forward:wze,inverse:_ze,names:xze};var kN=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],yx=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Hue=.8487,Wue=1.3523,Jue=Mh/5,Eze=1/Jue,ob=18,D5=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},Tze=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function Ize(t,e,i,r){for(var s=e;r;--r){var n=t(s);if(s-=n,Math.abs(n)<i)break}return s}function Mze(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function Aze(t){var e=Ft(t.x-this.long0),i=Math.abs(t.y),r=Math.floor(i*Jue);r<0?r=0:r>=ob&&(r=ob-1),i=Mh*(i-Eze*r);var s={x:D5(kN[r],i)*e,y:D5(yx[r],i)};return t.y<0&&(s.y=-s.y),s.x=s.x*this.a*Hue+this.x0,s.y=s.y*this.a*Wue+this.y0,s}function Cze(t){var e={x:(t.x-this.x0)/(this.a*Hue),y:Math.abs(t.y-this.y0)/(this.a*Wue)};if(e.y>=1)e.x/=kN[ob][0],e.y=t.y<0?-mt:mt;else{var i=Math.floor(e.y*ob);for(i<0?i=0:i>=ob&&(i=ob-1);;)if(yx[i][0]>e.y)--i;else if(yx[i+1][0]<=e.y)++i;else break;var r=yx[i],s=5*(e.y-r[0])/(yx[i+1][0]-r[0]);s=Ize(function(n){return(D5(r,n)-e.y)/Tze(r,n)},s,At,100),e.x/=D5(kN[i],s),e.y=(5*i+s)*zn,t.y<0&&(e.y=-e.y)}return e.x=Ft(e.x+this.long0),e}var $ze=["Robinson","robin"];const Oze={init:Mze,forward:Aze,inverse:Cze,names:$ze};function Rze(){this.name="geocent"}function kze(t){var e=kue(t,this.es,this.a);return e}function Lze(t){var e=Lue(t,this.es,this.a,this.b);return e}var Pze=["Geocentric","geocentric","geocent","Geocent"];const Nze={init:Rze,forward:kze,inverse:Lze,names:Pze};var go={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},e2={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Fze(){if(Object.keys(e2).forEach(function(i){if(typeof this[i]>"u")this[i]=e2[i].def;else{if(e2[i].num&&isNaN(this[i]))throw new Error("Invalid parameter value, must be numeric "+i+" = "+this[i]);e2[i].num&&(this[i]=parseFloat(this[i]))}e2[i].degrees&&(this[i]=this[i]*zn)}.bind(this)),Math.abs(Math.abs(this.lat0)-mt)<At?this.mode=this.lat0<0?go.S_POLE:go.N_POLE:Math.abs(this.lat0)<At?this.mode=go.EQUIT:(this.mode=go.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function Dze(t){t.x-=this.long0;var e=Math.sin(t.y),i=Math.cos(t.y),r=Math.cos(t.x),s,n;switch(this.mode){case go.OBLIQ:n=this.sinph0*e+this.cosph0*i*r;break;case go.EQUIT:n=i*r;break;case go.S_POLE:n=-e;break;case go.N_POLE:n=e;break}switch(n=this.pn1/(this.p-n),s=n*i*Math.sin(t.x),this.mode){case go.OBLIQ:n*=this.cosph0*e-this.sinph0*i*r;break;case go.EQUIT:n*=e;break;case go.N_POLE:n*=-(i*r);break;case go.S_POLE:n*=i*r;break}var o,a;return o=n*this.cg+s*this.sg,a=1/(o*this.sw*this.h1+this.cw),s=(s*this.cg-n*this.sg)*this.cw*a,n=o*a,t.x=s*this.a,t.y=n*this.a,t}function jze(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},i,r,s;s=1/(this.pn1-t.y*this.sw),i=this.pn1*t.x*s,r=this.pn1*t.y*this.cw*s,t.x=i*this.cg+r*this.sg,t.y=r*this.cg-i*this.sg;var n=cc(t.x,t.y);if(Math.abs(n)<At)e.x=0,e.y=t.y;else{var o,a;switch(a=1-n*n*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/n+n/this.pn1),o=Math.sqrt(1-a*a),this.mode){case go.OBLIQ:e.y=Math.asin(o*this.sinph0+t.y*a*this.cosph0/n),t.y=(o-this.sinph0*Math.sin(e.y))*n,t.x*=a*this.cosph0;break;case go.EQUIT:e.y=Math.asin(t.y*a/n),t.y=o*n,t.x*=a;break;case go.N_POLE:e.y=Math.asin(o),t.y=-t.y;break;case go.S_POLE:e.y=-Math.asin(o);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var Uze=["Tilted_Perspective","tpers"];const Vze={init:Fze,forward:Dze,inverse:jze,names:Uze};function Bze(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function zze(t){var e=t.x,i=t.y,r,s,n,o;if(e=e-this.long0,this.shape==="ellipse"){i=Math.atan(this.radius_p2*Math.tan(i));var a=this.radius_p/cc(this.radius_p*Math.cos(i),Math.sin(i));if(s=a*Math.cos(e)*Math.cos(i),n=a*Math.sin(e)*Math.cos(i),o=a*Math.sin(i),(this.radius_g-s)*s-n*n-o*o*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=this.radius_g-s,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/cc(o,r)),t.y=this.radius_g_1*Math.atan(o/r)):(t.x=this.radius_g_1*Math.atan(n/r),t.y=this.radius_g_1*Math.atan(o/cc(n,r)))}else this.shape==="sphere"&&(r=Math.cos(i),s=Math.cos(e)*r,n=Math.sin(e)*r,o=Math.sin(i),r=this.radius_g-s,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/cc(o,r)),t.y=this.radius_g_1*Math.atan(o/r)):(t.x=this.radius_g_1*Math.atan(n/r),t.y=this.radius_g_1*Math.atan(o/cc(n,r))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function Gze(t){var e=-1,i=0,r=0,s,n,o,a;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(r=Math.tan(t.y/this.radius_g_1),i=Math.tan(t.x/this.radius_g_1)*cc(1,r)):(i=Math.tan(t.x/this.radius_g_1),r=Math.tan(t.y/this.radius_g_1)*cc(1,i));var l=r/this.radius_p;if(s=i*i+l*l+e*e,n=2*this.radius_g*e,o=n*n-4*s*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;a=(-n-Math.sqrt(o))/(2*s),e=this.radius_g+a*e,i*=a,r*=a,t.x=Math.atan2(i,e),t.y=Math.atan(r*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(r=Math.tan(t.y/this.radius_g_1),i=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+r*r)):(i=Math.tan(t.x/this.radius_g_1),r=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+i*i)),s=i*i+r*r+e*e,n=2*this.radius_g*e,o=n*n-4*s*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;a=(-n-Math.sqrt(o))/(2*s),e=this.radius_g+a*e,i*=a,r*=a,t.x=Math.atan2(i,e),t.y=Math.atan(r*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var qze=["Geostationary Satellite View","Geostationary_Satellite","geos"];const Hze={init:Bze,forward:zze,inverse:Gze,names:qze};function Wze(t){t.Proj.projections.add(rA),t.Proj.projections.add(sA),t.Proj.projections.add(XUe),t.Proj.projections.add(uVe),t.Proj.projections.add(mVe),t.Proj.projections.add(wVe),t.Proj.projections.add(IVe),t.Proj.projections.add(OVe),t.Proj.projections.add(NVe),t.Proj.projections.add(VVe),t.Proj.projections.add(sBe),t.Proj.projections.add(cBe),t.Proj.projections.add(mBe),t.Proj.projections.add(_Be),t.Proj.projections.add(IBe),t.Proj.projections.add(OBe),t.Proj.projections.add(NBe),t.Proj.projections.add(VBe),t.Proj.projections.add(WBe),t.Proj.projections.add(QBe),t.Proj.projections.add(rze),t.Proj.projections.add(lze),t.Proj.projections.add(pze),t.Proj.projections.add(vze),t.Proj.projections.add(Sze),t.Proj.projections.add(Oze),t.Proj.projections.add(Nze),t.Proj.projections.add(Vze),t.Proj.projections.add(Hze)}_r.defaultDatum="WGS84";_r.Proj=Lh;_r.WGS84=new _r.Proj("WGS84");_r.Point=cw;_r.toPoint=Pue;_r.defs=qo;_r.nadgrid=tUe;_r.transform=N5;_r.mgrs=gUe;_r.version="__VERSION__";Wze(_r);const xJ="EPSG:4326";class Jze{espgWorker;constructor(){this.espgWorker=this.defaultEpsgLookup,_r.defs("EPSG:3978","+proj=lcc +lat_1=49 +lat_2=77 +lat_0=49 +lon_0=-95 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),_r.defs("EPSG:3979","+proj=lcc +lat_1=49 +lat_2=77 +lat_0=49 +lon_0=-95 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),_r.defs("EPSG:54004","+proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs"),_r.defs("EPSG:102100",_r.defs("EPSG:3857")),_r.defs("EPSG:102187","+proj=tmerc +lat_0=0 +lon_0=-114 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),_r.defs("EPSG:102190","+proj=aea +lat_1=50 +lat_2=58.5 +lat_0=45 +lon_0=-126 +x_0=1000000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs");let e=1;for(;e<=60;){const i=e<10?`0${e}`:e;_r.defs(`EPSG:326${i}`,`+proj=utm +zone=${e} +ellps=WGS84 +datum=WGS84 +units=m +no_defs`),e++}}addProjection(e,i){e=typeof e=="number"?`EPSG:${e}`:e,_r.defs(e,i)}defaultEpsgLookup(e){const i=/urn:ogc:def:crs:EPSG::(\d+)/,r=/EPSG:(\d+)/,s=String(e).match(i)||String(e).match(r)||[];if(s.length<2)throw new Error("Invalid code provided.");return new Promise((n,o)=>{const a=`https://epsg.io/${s[1]}.proj4`;Et(a,{responseType:"text"}).then(c=>{c.data?n(c.data):o()},c=>{o(c)})})}epsgLookup(e){return this.espgWorker(e)}setEpsgLookup(e){this.espgWorker=e}normalizeProj(e){if(typeof e=="object"){if(e.wkid)return"EPSG:"+e.wkid;if(e.wkt)return e.wkt}else{if(typeof e=="number")return"EPSG:"+e;if(typeof e=="string")return e}throw new Error("Bad argument type, please provide a string, integer or SpatialReference object.")}async checkProj(e){let i,r="";if(e.wkt)return!0;try{i=this.normalizeProj(e)}catch{return!1}e.latestWkid&&(r=this.normalizeProj(e.latestWkid));const s=(l,u)=>{l!==u&&_r.defs(u,_r.defs(l))};if(_r.defs(i))return!0;if(r&&_r.defs(r))return s(r,i),!0;const n=async l=>{try{const u=await this.epsgLookup(l);return u===null||u===""?!1:(_r.defs(l,u),!0)}catch{return!1}};return await(r?n(r):Promise.resolve(!1))?(s(r,i),!0):n(i)}async checkProjBomber(e){if(e.length>0){const i=e.pop();if(await this.checkProj(i))return this.checkProjBomber(e);throw console.error("Unable to parse or locate projection information for this item:",i),new Error("Could not find projection information, see console for details")}}async projectGeoJson(e,i,r){let s=this.normalizeProj(i),n=this.normalizeProj(r);if(!s&&e.crs&&e.crs.type==="name"&&(s=Ii.parseGeoJsonCrs(e.crs)),s||(s=xJ),n||(n=xJ),n===s)return e;await this.checkProjBomber([s,n]);const o=_r(s,n).forward;return mje.Tools.applyConverter(e,o)}async projectGeometry(e,i){if(i.type===Mi.EXTENT)return this.projectExtent(e,i);await this.checkProjBomber([e,i.sr]);const r=i.toGeoJSON(),s=await this.projectGeoJson(r,this.normalizeProj(i.sr),this.normalizeProj(e)),n=Vb.geom.geomGeoJsonToRamp(s,i.id);return n.sr=Ii.parseSR(e),n}async projectExtent(e,i){const r=(v,b,_)=>{if(_===0)return[v,b];const S=[(v[0]+b[0])/2,(v[1]+b[1])/2];if(_===1)return[v,S,b];if(_>1){const M=r(v,S,_-1),x=r(S,b,_-1);return M.concat(x.slice(1))}return[[]]},s=i.toPolygonArray().pop()||[];let n=[];[0,1,2,3].map(v=>r(s[v],s[v+1],3).slice(1)).forEach(v=>n=n.concat(v));const o=new vo("warpy",[n],i.sr,!0),a=await this.projectGeometry(e,o),l=a.toArray().pop()||[],u=l.map(v=>v[0]),c=l.map(v=>v[1]),d=Math.min.apply(null,u),f=Math.max.apply(null,u),m=Math.min.apply(null,c),g=Math.max.apply(null,c);return Wr.fromParams(i.id+"_projected",d,m,f,g,a.sr)}}class Zze{DEFAULT_MERCATOR="DEFAULT_ESRI_World_AuxMerc_3857";DEFAULT_LAMBERT="DEFAULT_NRCAN_Lambert_3978";proj;geom;sharedUtils;constructor(){this.proj=new Jze,this.geom=new Q7e,this.sharedUtils=new fje}defaultTileSchemas(){return[this.DEFAULT_LAMBERT,this.DEFAULT_MERCATOR]}defaultLODs(e){const i=r=>r.map(s=>({level:s[0],resolution:s[1],scale:s[2]}));if(e===this.DEFAULT_LAMBERT)return i([[0,38364.660062653464,145e6],[1,22489.62831258996,85e6],[2,13229.193125052918,5e7],[3,7937.5158750317505,3e7],[4,4630.2175937685215,175e5],[5,2645.8386250105837,1e7],[6,1587.5031750063501,6e6],[7,926.0435187537042,35e5],[8,529.1677250021168,2e6],[9,317.50063500127004,12e5],[10,185.20870375074085,7e5],[11,111.12522225044451,42e4],[12,66.1459656252646,25e4],[13,38.36466006265346,145e3],[14,22.48962831258996,85e3],[15,13.229193125052918,5e4],[16,7.9375158750317505,3e4],[17,4.6302175937685215,17500]]);if(e===this.DEFAULT_MERCATOR)return i([[0,19567.87924099992,73957190948944e-6],[1,9783.93962049996,36978595474472e-6],[2,4891.96981024998,18489297737236e-6],[3,2445.98490512499,9244648868618e-6],[4,1222.992452562495,4622324434309e-6],[5,611.4962262813797,2311162217155e-6],[6,305.74811314055756,1155581108577e-6],[7,152.87405657041106,577790.554289],[8,76.43702828507324,288895.277144],[9,38.21851414253662,144447.638572],[10,19.10925707126831,72223.819286],[11,9.554628535634155,36111.909643],[12,4.77731426794937,18055.954822],[13,2.388657133974685,9027.977411],[14,1.1943285668550503,4513.988705],[15,.5971642835598172,2256.994353],[16,.29858214164761665,1128.497176],[17,.14929107082380833,564.248588],[18,.07464553541190416,282.124294],[19,.03732276770595208,141.062147],[20,.01866138385297604,70.5310735]]);throw new Error(`Unknown tile schema key passed to LOD defaulter ${e}`)}}class Ks{$iApi;get $vApp(){return this.$iApi.$vApp}get $element(){return this.$iApi.$element}constructor(e){this.$iApi=e}}function Yze(t){return typeof t=="function"&&t.render&&typeof t.render=="function"}function Kze(t){const e=["data","props","propsData","computed","methods","watch","template","render","components","model"];return typeof t=="object"&&!t.functional&&e.some(i=>t[i]!==void 0)}function Qze(t){return typeof t=="object"&&t.default!==void 0}var Zue={exports:{}};function X7(){}X7.prototype={on:function(t,e,i){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:i}),this},once:function(t,e,i){var r=this;function s(){r.off(t,s),e.apply(i,arguments)}return s._=e,this.on(t,s,i)},emit:function(t){var e=[].slice.call(arguments,1),i=((this.e||(this.e={}))[t]||[]).slice(),r=0,s=i.length;for(r;r<s;r++)i[r].fn.apply(i[r].ctx,e);return this},off:function(t,e){var i=this.e||(this.e={}),r=i[t],s=[];if(r&&e)for(var n=0,o=r.length;n<o;n++)r[n].fn!==e&&r[n].fn._!==e&&s.push(r[n]);return s.length?i[t]=s:delete i[t],this}};Zue.exports=X7;var Xze=Zue.exports.TinyEmitter=X7;function Ha(t,e){const i=Object.create(null),r=t.split(",");for(let s=0;s<r.length;s++)i[r[s]]=!0;return e?s=>!!i[s.toLowerCase()]:s=>!!i[s]}const dr={},Lb=[],Qo=()=>{},nA=()=>!1,eGe=/^on[^a-z]/,m1=t=>eGe.test(t),ej=t=>t.startsWith("onUpdate:"),Bi=Object.assign,tj=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},tGe=Object.prototype.hasOwnProperty,Zi=(t,e)=>tGe.call(t,e),Rt=Array.isArray,Pb=t=>a_(t)==="[object Map]",y1=t=>a_(t)==="[object Set]",SJ=t=>a_(t)==="[object Date]",iGe=t=>a_(t)==="[object RegExp]",ci=t=>typeof t=="function",Ei=t=>typeof t=="string",Lm=t=>typeof t=="symbol",fr=t=>t!==null&&typeof t=="object",ij=t=>fr(t)&&ci(t.then)&&ci(t.catch),Yue=Object.prototype.toString,a_=t=>Yue.call(t),rGe=t=>a_(t).slice(8,-1),Kue=t=>a_(t)==="[object Object]",rj=t=>Ei(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,w0=Ha(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),sGe=Ha("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),zC=t=>{const e=Object.create(null);return i=>e[i]||(e[i]=t(i))},nGe=/-(\w)/g,Ps=zC(t=>t.replace(nGe,(e,i)=>i?i.toUpperCase():"")),oGe=/\B([A-Z])/g,xl=zC(t=>t.replace(oGe,"-$1").toLowerCase()),ey=zC(t=>t.charAt(0).toUpperCase()+t.slice(1)),_0=zC(t=>t?`on${ey(t)}`:""),dw=(t,e)=>!Object.is(t,e),Nb=(t,e)=>{for(let i=0;i<t.length;i++)t[i](e)},j5=(t,e,i)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:i})},U5=t=>{const e=parseFloat(t);return isNaN(e)?t:e},V5=t=>{const e=Ei(t)?Number(t):NaN;return isNaN(e)?t:e};let EJ;const LN=()=>EJ||(EJ=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),aGe="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console",lGe=Ha(aGe);function ty(t){if(Rt(t)){const e={};for(let i=0;i<t.length;i++){const r=t[i],s=Ei(r)?Que(r):ty(r);if(s)for(const n in s)e[n]=s[n]}return e}else{if(Ei(t))return t;if(fr(t))return t}}const uGe=/;(?![^(]*\))/g,cGe=/:([^]+)/,hGe=/\/\*[^]*?\*\//g;function Que(t){const e={};return t.replace(hGe,"").split(uGe).forEach(i=>{if(i){const r=i.split(cGe);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function ws(t){let e="";if(Ei(t))e=t;else if(Rt(t))for(let i=0;i<t.length;i++){const r=ws(t[i]);r&&(e+=r+" ")}else if(fr(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}function Xue(t){if(!t)return null;let{class:e,style:i}=t;return e&&!Ei(e)&&(t.class=ws(e)),i&&(t.style=ty(i)),t}const dGe="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",pGe="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",fGe="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",mGe=Ha(dGe),yGe=Ha(pGe),gGe=Ha(fGe),vGe="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",bGe=Ha(vGe);function ece(t){return!!t||t===""}function wGe(t,e){if(t.length!==e.length)return!1;let i=!0;for(let r=0;i&&r<t.length;r++)i=Pm(t[r],e[r]);return i}function Pm(t,e){if(t===e)return!0;let i=SJ(t),r=SJ(e);if(i||r)return i&&r?t.getTime()===e.getTime():!1;if(i=Lm(t),r=Lm(e),i||r)return t===e;if(i=Rt(t),r=Rt(e),i||r)return i&&r?wGe(t,e):!1;if(i=fr(t),r=fr(e),i||r){if(!i||!r)return!1;const s=Object.keys(t).length,n=Object.keys(e).length;if(s!==n)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Pm(t[o],e[o]))return!1}}return String(t)===String(e)}function GC(t,e){return t.findIndex(i=>Pm(i,e))}const Zr=t=>Ei(t)?t:t==null?"":Rt(t)||fr(t)&&(t.toString===Yue||!ci(t.toString))?JSON.stringify(t,tce,2):String(t),tce=(t,e)=>e&&e.__v_isRef?tce(t,e.value):Pb(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((i,[r,s])=>(i[`${r} =>`]=s,i),{})}:y1(e)?{[`Set(${e.size})`]:[...e.values()]}:fr(e)&&!Rt(e)&&!Kue(e)?String(e):e;let dl;class qC{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=dl,!e&&dl&&(this.index=(dl.scopes||(dl.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const i=dl;try{return dl=this,e()}finally{dl=i}}}on(){dl=this}off(){dl=this.parent}stop(e){if(this._active){let i,r;for(i=0,r=this.effects.length;i<r;i++)this.effects[i].stop();for(i=0,r=this.cleanups.length;i<r;i++)this.cleanups[i]();if(this.scopes)for(i=0,r=this.scopes.length;i<r;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function pE(t){return new qC(t)}function ice(t,e=dl){e&&e.active&&e.effects.push(t)}function HC(){return dl}function sj(t){dl&&dl.cleanups.push(t)}const nj=t=>{const e=new Set(t);return e.w=0,e.n=0,e},rce=t=>(t.w&Nm)>0,sce=t=>(t.n&Nm)>0,_Ge=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Nm},xGe=t=>{const{deps:e}=t;if(e.length){let i=0;for(let r=0;r<e.length;r++){const s=e[r];rce(s)&&!sce(s)?s.delete(t):e[i++]=s,s.w&=~Nm,s.n&=~Nm}e.length=i}},B5=new WeakMap;let gx=0,Nm=1;const PN=30;let hc;const x0=Symbol(""),NN=Symbol("");class l_{constructor(e,i=null,r){this.fn=e,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,ice(this,r)}run(){if(!this.active)return this.fn();let e=hc,i=vm;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=hc,hc=this,vm=!0,Nm=1<<++gx,gx<=PN?_Ge(this):TJ(this),this.fn()}finally{gx<=PN&&xGe(this),Nm=1<<--gx,hc=this.parent,vm=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){hc===this?this.deferStop=!0:this.active&&(TJ(this),this.onStop&&this.onStop(),this.active=!1)}}function TJ(t){const{deps:e}=t;if(e.length){for(let i=0;i<e.length;i++)e[i].delete(t);e.length=0}}function nce(t,e){t.effect&&(t=t.effect.fn);const i=new l_(t);e&&(Bi(i,e),e.scope&&ice(i,e.scope)),(!e||!e.lazy)&&i.run();const r=i.run.bind(i);return r.effect=i,r}function oce(t){t.effect.stop()}let vm=!0;const ace=[];function u_(){ace.push(vm),vm=!1}function c_(){const t=ace.pop();vm=t===void 0?!0:t}function Ua(t,e,i){if(vm&&hc){let r=B5.get(t);r||B5.set(t,r=new Map);let s=r.get(i);s||r.set(i,s=nj()),lce(s)}}function lce(t,e){let i=!1;gx<=PN?sce(t)||(t.n|=Nm,i=!rce(t)):i=!t.has(hc),i&&(t.add(hc),hc.deps.push(t))}function gp(t,e,i,r,s,n){const o=B5.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(i==="length"&&Rt(t)){const l=Number(r);o.forEach((u,c)=>{(c==="length"||c>=l)&&a.push(u)})}else switch(i!==void 0&&a.push(o.get(i)),e){case"add":Rt(t)?rj(i)&&a.push(o.get("length")):(a.push(o.get(x0)),Pb(t)&&a.push(o.get(NN)));break;case"delete":Rt(t)||(a.push(o.get(x0)),Pb(t)&&a.push(o.get(NN)));break;case"set":Pb(t)&&a.push(o.get(x0));break}if(a.length===1)a[0]&&FN(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);FN(nj(l))}}function FN(t,e){const i=Rt(t)?t:[...t];for(const r of i)r.computed&&IJ(r);for(const r of i)r.computed||IJ(r)}function IJ(t,e){(t!==hc||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function SGe(t,e){var i;return(i=B5.get(t))==null?void 0:i.get(e)}const EGe=Ha("__proto__,__v_isRef,__isVue"),uce=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Lm)),TGe=WC(),IGe=WC(!1,!0),MGe=WC(!0),AGe=WC(!0,!0),MJ=CGe();function CGe(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...i){const r=hi(this);for(let n=0,o=this.length;n<o;n++)Ua(r,"get",n+"");const s=r[e](...i);return s===-1||s===!1?r[e](...i.map(hi)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...i){u_();const r=hi(this)[e].apply(this,i);return c_(),r}}),t}function $Ge(t){const e=hi(this);return Ua(e,"has",t),e.hasOwnProperty(t)}function WC(t=!1,e=!1){return function(r,s,n){if(s==="__v_isReactive")return!t;if(s==="__v_isReadonly")return t;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&n===(t?e?yce:mce:e?fce:pce).get(r))return r;const o=Rt(r);if(!t){if(o&&Zi(MJ,s))return Reflect.get(MJ,s,n);if(s==="hasOwnProperty")return $Ge}const a=Reflect.get(r,s,n);return(Lm(s)?uce.has(s):EGe(s))||(t||Ua(r,"get",s),e)?a:ir(a)?o&&rj(s)?a:a.value:fr(a)?t?YC(a):Ys(a):a}}const OGe=cce(),RGe=cce(!0);function cce(t=!1){return function(i,r,s,n){let o=i[r];if(Fm(o)&&ir(o)&&!ir(s))return!1;if(!t&&(!pw(s)&&!Fm(s)&&(o=hi(o),s=hi(s)),!Rt(i)&&ir(o)&&!ir(s)))return o.value=s,!0;const a=Rt(i)&&rj(r)?Number(r)<i.length:Zi(i,r),l=Reflect.set(i,r,s,n);return i===hi(n)&&(a?dw(s,o)&&gp(i,"set",r,s):gp(i,"add",r,s)),l}}function kGe(t,e){const i=Zi(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&i&&gp(t,"delete",e,void 0),r}function LGe(t,e){const i=Reflect.has(t,e);return(!Lm(e)||!uce.has(e))&&Ua(t,"has",e),i}function PGe(t){return Ua(t,"iterate",Rt(t)?"length":x0),Reflect.ownKeys(t)}const hce={get:TGe,set:OGe,deleteProperty:kGe,has:LGe,ownKeys:PGe},dce={get:MGe,set(t,e){return!0},deleteProperty(t,e){return!0}},NGe=Bi({},hce,{get:IGe,set:RGe}),FGe=Bi({},dce,{get:AGe}),oj=t=>t,JC=t=>Reflect.getPrototypeOf(t);function XT(t,e,i=!1,r=!1){t=t.__v_raw;const s=hi(t),n=hi(e);i||(e!==n&&Ua(s,"get",e),Ua(s,"get",n));const{has:o}=JC(s),a=r?oj:i?lj:i3;if(o.call(s,e))return a(t.get(e));if(o.call(s,n))return a(t.get(n));t!==s&&t.get(e)}function eI(t,e=!1){const i=this.__v_raw,r=hi(i),s=hi(t);return e||(t!==s&&Ua(r,"has",t),Ua(r,"has",s)),t===s?i.has(t):i.has(t)||i.has(s)}function tI(t,e=!1){return t=t.__v_raw,!e&&Ua(hi(t),"iterate",x0),Reflect.get(t,"size",t)}function AJ(t){t=hi(t);const e=hi(this);return JC(e).has.call(e,t)||(e.add(t),gp(e,"add",t,t)),this}function CJ(t,e){e=hi(e);const i=hi(this),{has:r,get:s}=JC(i);let n=r.call(i,t);n||(t=hi(t),n=r.call(i,t));const o=s.call(i,t);return i.set(t,e),n?dw(e,o)&&gp(i,"set",t,e):gp(i,"add",t,e),this}function $J(t){const e=hi(this),{has:i,get:r}=JC(e);let s=i.call(e,t);s||(t=hi(t),s=i.call(e,t)),r&&r.call(e,t);const n=e.delete(t);return s&&gp(e,"delete",t,void 0),n}function OJ(){const t=hi(this),e=t.size!==0,i=t.clear();return e&&gp(t,"clear",void 0,void 0),i}function iI(t,e){return function(r,s){const n=this,o=n.__v_raw,a=hi(o),l=e?oj:t?lj:i3;return!t&&Ua(a,"iterate",x0),o.forEach((u,c)=>r.call(s,l(u),l(c),n))}}function rI(t,e,i){return function(...r){const s=this.__v_raw,n=hi(s),o=Pb(n),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=s[t](...r),c=i?oj:e?lj:i3;return!e&&Ua(n,"iterate",l?NN:x0),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:a?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function tf(t){return function(...e){return t==="delete"?!1:this}}function DGe(){const t={get(n){return XT(this,n)},get size(){return tI(this)},has:eI,add:AJ,set:CJ,delete:$J,clear:OJ,forEach:iI(!1,!1)},e={get(n){return XT(this,n,!1,!0)},get size(){return tI(this)},has:eI,add:AJ,set:CJ,delete:$J,clear:OJ,forEach:iI(!1,!0)},i={get(n){return XT(this,n,!0)},get size(){return tI(this,!0)},has(n){return eI.call(this,n,!0)},add:tf("add"),set:tf("set"),delete:tf("delete"),clear:tf("clear"),forEach:iI(!0,!1)},r={get(n){return XT(this,n,!0,!0)},get size(){return tI(this,!0)},has(n){return eI.call(this,n,!0)},add:tf("add"),set:tf("set"),delete:tf("delete"),clear:tf("clear"),forEach:iI(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(n=>{t[n]=rI(n,!1,!1),i[n]=rI(n,!0,!1),e[n]=rI(n,!1,!0),r[n]=rI(n,!0,!0)}),[t,i,e,r]}const[jGe,UGe,VGe,BGe]=DGe();function ZC(t,e){const i=e?t?BGe:VGe:t?UGe:jGe;return(r,s,n)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Zi(i,s)&&s in r?i:r,s,n)}const zGe={get:ZC(!1,!1)},GGe={get:ZC(!1,!0)},qGe={get:ZC(!0,!1)},HGe={get:ZC(!0,!0)},pce=new WeakMap,fce=new WeakMap,mce=new WeakMap,yce=new WeakMap;function WGe(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function JGe(t){return t.__v_skip||!Object.isExtensible(t)?0:WGe(rGe(t))}function Ys(t){return Fm(t)?t:KC(t,!1,hce,zGe,pce)}function aj(t){return KC(t,!1,NGe,GGe,fce)}function YC(t){return KC(t,!0,dce,qGe,mce)}function gce(t){return KC(t,!0,FGe,HGe,yce)}function KC(t,e,i,r,s){if(!fr(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const n=s.get(t);if(n)return n;const o=JGe(t);if(o===0)return t;const a=new Proxy(t,o===2?r:i);return s.set(t,a),a}function bu(t){return Fm(t)?bu(t.__v_raw):!!(t&&t.__v_isReactive)}function Fm(t){return!!(t&&t.__v_isReadonly)}function pw(t){return!!(t&&t.__v_isShallow)}function QC(t){return bu(t)||Fm(t)}function hi(t){const e=t&&t.__v_raw;return e?hi(e):t}function _s(t){return j5(t,"__v_skip",!0),t}const i3=t=>fr(t)?Ys(t):t,lj=t=>fr(t)?YC(t):t;function uj(t){vm&&hc&&(t=hi(t),lce(t.dep||(t.dep=nj())))}function XC(t,e){t=hi(t);const i=t.dep;i&&FN(i)}function ir(t){return!!(t&&t.__v_isRef===!0)}function Xe(t){return vce(t,!1)}function cj(t){return vce(t,!0)}function vce(t,e){return ir(t)?t:new ZGe(t,e)}class ZGe{constructor(e,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?e:hi(e),this._value=i?e:i3(e)}get value(){return uj(this),this._value}set value(e){const i=this.__v_isShallow||pw(e)||Fm(e);e=i?e:hi(e),dw(e,this._rawValue)&&(this._rawValue=e,this._value=i?e:i3(e),XC(this))}}function bce(t){XC(t)}function ti(t){return ir(t)?t.value:t}function wce(t){return ci(t)?t():ti(t)}const YGe={get:(t,e,i)=>ti(Reflect.get(t,e,i)),set:(t,e,i,r)=>{const s=t[e];return ir(s)&&!ir(i)?(s.value=i,!0):Reflect.set(t,e,i,r)}};function e$(t){return bu(t)?t:new Proxy(t,YGe)}class KGe{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:i,set:r}=e(()=>uj(this),()=>XC(this));this._get=i,this._set=r}get value(){return this._get()}set value(e){this._set(e)}}function _ce(t){return new KGe(t)}function hj(t){const e=Rt(t)?new Array(t.length):{};for(const i in t)e[i]=Sce(t,i);return e}class QGe{constructor(e,i,r){this._object=e,this._key=i,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return SGe(hi(this._object),this._key)}}class XGe{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function xce(t,e,i){return ir(t)?t:ci(t)?new XGe(t):fr(t)&&arguments.length>1?Sce(t,e,i):Xe(t)}function Sce(t,e,i){const r=t[e];return ir(r)?r:new QGe(t,e,i)}class eqe{constructor(e,i,r,s){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new l_(e,()=>{this._dirty||(this._dirty=!0,XC(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const e=hi(this);return uj(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function tqe(t,e,i=!1){let r,s;const n=ci(t);return n?(r=t,s=Qo):(r=t.get,s=t.set),new eqe(r,s,n||!s,i)}function Ece(t,...e){}function Tce(t,e){}function Ph(t,e,i,r){let s;try{s=r?t(...r):t()}catch(n){iy(n,e,i)}return s}function Ra(t,e,i,r){if(ci(t)){const n=Ph(t,e,i,r);return n&&ij(n)&&n.catch(o=>{iy(o,e,i)}),n}const s=[];for(let n=0;n<t.length;n++)s.push(Ra(t[n],e,i,r));return s}function iy(t,e,i,r=!0){const s=e?e.vnode:null;if(e){let n=e.parent;const o=e.proxy,a=i;for(;n;){const u=n.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](t,o,a)===!1)return}n=n.parent}const l=e.appContext.config.errorHandler;if(l){Ph(l,null,10,[t,o,a]);return}}iqe(t,i,s,r)}function iqe(t,e,i,r=!0){console.error(t)}let r3=!1,DN=!1;const _o=[];let Sh=0;const Fb=[];let Vd=null,Ng=0;const Ice=Promise.resolve();let dj=null;function Kh(t){const e=dj||Ice;return t?e.then(this?t.bind(this):t):e}function rqe(t){let e=Sh+1,i=_o.length;for(;e<i;){const r=e+i>>>1;s3(_o[r])<t?e=r+1:i=r}return e}function t$(t){(!_o.length||!_o.includes(t,r3&&t.allowRecurse?Sh+1:Sh))&&(t.id==null?_o.push(t):_o.splice(rqe(t.id),0,t),Mce())}function Mce(){!r3&&!DN&&(DN=!0,dj=Ice.then(Ace))}function sqe(t){const e=_o.indexOf(t);e>Sh&&_o.splice(e,1)}function i$(t){Rt(t)?Fb.push(...t):(!Vd||!Vd.includes(t,t.allowRecurse?Ng+1:Ng))&&Fb.push(t),Mce()}function RJ(t,e=r3?Sh+1:0){for(;e<_o.length;e++){const i=_o[e];i&&i.pre&&(_o.splice(e,1),e--,i())}}function z5(t){if(Fb.length){const e=[...new Set(Fb)];if(Fb.length=0,Vd){Vd.push(...e);return}for(Vd=e,Vd.sort((i,r)=>s3(i)-s3(r)),Ng=0;Ng<Vd.length;Ng++)Vd[Ng]();Vd=null,Ng=0}}const s3=t=>t.id==null?1/0:t.id,nqe=(t,e)=>{const i=s3(t)-s3(e);if(i===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return i};function Ace(t){DN=!1,r3=!0,_o.sort(nqe);const e=Qo;try{for(Sh=0;Sh<_o.length;Sh++){const i=_o[Sh];i&&i.active!==!1&&Ph(i,null,14)}}finally{Sh=0,_o.length=0,z5(),r3=!1,dj=null,(_o.length||Fb.length)&&Ace()}}let Fg,sI=[];function pj(t,e){var i,r;Fg=t,Fg?(Fg.enabled=!0,sI.forEach(({event:s,args:n})=>Fg.emit(s,...n)),sI=[]):typeof window<"u"&&window.HTMLElement&&!((r=(i=window.navigator)==null?void 0:i.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(n=>{pj(n,e)}),setTimeout(()=>{Fg||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,sI=[])},3e3)):sI=[]}function oqe(t,e,...i){if(t.isUnmounted)return;const r=t.vnode.props||dr;let s=i;const n=e.startsWith("update:"),o=n&&e.slice(7);if(o&&o in r){const c=`${o==="modelValue"?"model":o}Modifiers`,{number:d,trim:f}=r[c]||dr;f&&(s=i.map(m=>Ei(m)?m.trim():m)),d&&(s=i.map(U5))}let a,l=r[a=_0(e)]||r[a=_0(Ps(e))];!l&&n&&(l=r[a=_0(xl(e))]),l&&Ra(l,t,6,s);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Ra(u,t,6,s)}}function Cce(t,e,i=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const n=t.emits;let o={},a=!1;if(!ci(t)){const l=u=>{const c=Cce(u,e,!0);c&&(a=!0,Bi(o,c))};!i&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!n&&!a?(fr(t)&&r.set(t,null),null):(Rt(n)?n.forEach(l=>o[l]=null):Bi(o,n),fr(t)&&r.set(t,o),o)}function r$(t,e){return!t||!m1(e)?!1:(e=e.slice(2).replace(/Once$/,""),Zi(t,e[0].toLowerCase()+e.slice(1))||Zi(t,xl(e))||Zi(t,e))}let $n=null,s$=null;function n3(t){const e=$n;return $n=t,s$=t&&t.type.__scopeId||null,e}function ry(t){s$=t}function sy(){s$=null}const $ce=t=>Ns;function Ns(t,e=$n,i){if(!e||t._n)return t;const r=(...s)=>{r._d&&H5(-1);const n=n3(e);let o;try{o=t(...s)}finally{n3(n),r._d&&H5(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function oA(t){const{type:e,vnode:i,proxy:r,withProxy:s,props:n,propsOptions:[o],slots:a,attrs:l,emit:u,render:c,renderCache:d,data:f,setupState:m,ctx:g,inheritAttrs:v}=t;let b,_;const S=n3(t);try{if(i.shapeFlag&4){const x=s||r;b=bl(c.call(x,x,d,n,m,f,g)),_=l}else{const x=e;b=bl(x.length>1?x(n,{attrs:l,slots:a,emit:u}):x(n,null)),_=e.props?l:lqe(l)}}catch(x){eS.length=0,iy(x,t,1),b=wi(Jn)}let M=b;if(_&&v!==!1){const x=Object.keys(_),{shapeFlag:T}=M;x.length&&T&7&&(o&&x.some(ej)&&(_=uqe(_,o)),M=Ic(M,_))}return i.dirs&&(M=Ic(M),M.dirs=M.dirs?M.dirs.concat(i.dirs):i.dirs),i.transition&&(M.transition=i.transition),b=M,n3(S),b}function aqe(t){let e;for(let i=0;i<t.length;i++){const r=t[i];if(qh(r)){if(r.type!==Jn||r.children==="v-if"){if(e)return;e=r}}else return}return e}const lqe=t=>{let e;for(const i in t)(i==="class"||i==="style"||m1(i))&&((e||(e={}))[i]=t[i]);return e},uqe=(t,e)=>{const i={};for(const r in t)(!ej(r)||!(r.slice(9)in e))&&(i[r]=t[r]);return i};function cqe(t,e,i){const{props:r,children:s,component:n}=t,{props:o,children:a,patchFlag:l}=e,u=n.emitsOptions;if(e.dirs||e.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return r?kJ(r,o,u):!!o;if(l&8){const c=e.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(o[f]!==r[f]&&!r$(u,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?kJ(r,o,u):!0:!!o;return!1}function kJ(t,e,i){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const n=r[s];if(e[n]!==t[n]&&!r$(i,n))return!0}return!1}function fj({vnode:t,parent:e},i){for(;e&&e.subTree===t;)(t=e.vnode).el=i,e=e.parent}const Oce=t=>t.__isSuspense,hqe={name:"Suspense",__isSuspense:!0,process(t,e,i,r,s,n,o,a,l,u){t==null?dqe(e,i,r,s,n,o,a,l,u):pqe(t,e,i,r,s,o,a,l,u)},hydrate:fqe,create:mj,normalize:mqe},Rce=hqe;function o3(t,e){const i=t.props&&t.props[e];ci(i)&&i()}function dqe(t,e,i,r,s,n,o,a,l){const{p:u,o:{createElement:c}}=l,d=c("div"),f=t.suspense=mj(t,s,r,e,d,i,n,o,a,l);u(null,f.pendingBranch=t.ssContent,d,null,r,f,n,o),f.deps>0?(o3(t,"onPending"),o3(t,"onFallback"),u(null,t.ssFallback,e,i,r,null,n,o),Db(f,t.ssFallback)):f.resolve(!1,!0)}function pqe(t,e,i,r,s,n,o,a,{p:l,um:u,o:{createElement:c}}){const d=e.suspense=t.suspense;d.vnode=e,e.el=t.el;const f=e.ssContent,m=e.ssFallback,{activeBranch:g,pendingBranch:v,isInFallback:b,isHydrating:_}=d;if(v)d.pendingBranch=f,dc(f,v)?(l(v,f,d.hiddenContainer,null,s,d,n,o,a),d.deps<=0?d.resolve():b&&(l(g,m,i,r,s,null,n,o,a),Db(d,m))):(d.pendingId++,_?(d.isHydrating=!1,d.activeBranch=v):u(v,s,d),d.deps=0,d.effects.length=0,d.hiddenContainer=c("div"),b?(l(null,f,d.hiddenContainer,null,s,d,n,o,a),d.deps<=0?d.resolve():(l(g,m,i,r,s,null,n,o,a),Db(d,m))):g&&dc(f,g)?(l(g,f,i,r,s,d,n,o,a),d.resolve(!0)):(l(null,f,d.hiddenContainer,null,s,d,n,o,a),d.deps<=0&&d.resolve()));else if(g&&dc(f,g))l(g,f,i,r,s,d,n,o,a),Db(d,f);else if(o3(e,"onPending"),d.pendingBranch=f,d.pendingId++,l(null,f,d.hiddenContainer,null,s,d,n,o,a),d.deps<=0)d.resolve();else{const{timeout:S,pendingId:M}=d;S>0?setTimeout(()=>{d.pendingId===M&&d.fallback(m)},S):S===0&&d.fallback(m)}}function mj(t,e,i,r,s,n,o,a,l,u,c=!1){const{p:d,m:f,um:m,n:g,o:{parentNode:v,remove:b}}=u;let _;const S=yqe(t);S&&e?.pendingBranch&&(_=e.pendingId,e.deps++);const M=t.props?V5(t.props.timeout):void 0,x={vnode:t,parent:e,parentComponent:i,isSVG:o,container:r,hiddenContainer:s,anchor:n,deps:0,pendingId:0,timeout:typeof M=="number"?M:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:c,isUnmounted:!1,effects:[],resolve(T=!1,I=!1){const{vnode:$,activeBranch:L,pendingBranch:B,pendingId:z,effects:H,parentComponent:J,container:K}=x;if(x.isHydrating)x.isHydrating=!1;else if(!T){const A=L&&B.transition&&B.transition.mode==="out-in";A&&(L.transition.afterLeave=()=>{z===x.pendingId&&f(B,K,N,0)});let{anchor:N}=x;L&&(N=g(L),m(L,J,x,!0)),A||f(B,K,N,0)}Db(x,B),x.pendingBranch=null,x.isInFallback=!1;let Q=x.parent,y=!1;for(;Q;){if(Q.pendingBranch){Q.effects.push(...H),y=!0;break}Q=Q.parent}y||i$(H),x.effects=[],S&&e&&e.pendingBranch&&_===e.pendingId&&(e.deps--,e.deps===0&&!I&&e.resolve()),o3($,"onResolve")},fallback(T){if(!x.pendingBranch)return;const{vnode:I,activeBranch:$,parentComponent:L,container:B,isSVG:z}=x;o3(I,"onFallback");const H=g($),J=()=>{x.isInFallback&&(d(null,T,B,H,L,null,z,a,l),Db(x,T))},K=T.transition&&T.transition.mode==="out-in";K&&($.transition.afterLeave=J),x.isInFallback=!0,m($,L,null,!0),K||J()},move(T,I,$){x.activeBranch&&f(x.activeBranch,T,I,$),x.container=T},next(){return x.activeBranch&&g(x.activeBranch)},registerDep(T,I){const $=!!x.pendingBranch;$&&x.deps++;const L=T.vnode.el;T.asyncDep.catch(B=>{iy(B,T,0)}).then(B=>{if(T.isUnmounted||x.isUnmounted||x.pendingId!==T.suspenseId)return;T.asyncResolved=!0;const{vnode:z}=T;qN(T,B,!1),L&&(z.el=L);const H=!L&&T.subTree.el;I(T,z,v(L||T.subTree.el),L?null:g(T.subTree),x,o,l),H&&b(H),fj(T,z.el),$&&--x.deps===0&&x.resolve()})},unmount(T,I){x.isUnmounted=!0,x.activeBranch&&m(x.activeBranch,i,T,I),x.pendingBranch&&m(x.pendingBranch,i,T,I)}};return x}function fqe(t,e,i,r,s,n,o,a,l){const u=e.suspense=mj(e,r,i,t.parentNode,document.createElement("div"),null,s,n,o,a,!0),c=l(t,u.pendingBranch=e.ssContent,i,u,n,o);return u.deps===0&&u.resolve(!1,!0),c}function mqe(t){const{shapeFlag:e,children:i}=t,r=e&32;t.ssContent=LJ(r?i.default:i),t.ssFallback=r?LJ(i.fallback):wi(Jn)}function LJ(t){let e;if(ci(t)){const i=K0&&t._c;i&&(t._d=!1,ht()),t=t(),i&&(t._d=!0,e=Aa,mhe())}return Rt(t)&&(t=aqe(t)),t=bl(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(i=>i!==t)),t}function kce(t,e){e&&e.pendingBranch?Rt(t)?e.effects.push(...t):e.effects.push(t):i$(t)}function Db(t,e){t.activeBranch=e;const{vnode:i,parentComponent:r}=t,s=i.el=e.el;r&&r.subTree===i&&(r.vnode.el=s,fj(r,s))}function yqe(t){var e;return((e=t.props)==null?void 0:e.suspensible)!=null&&t.props.suspensible!==!1}function Lce(t,e){return fE(t,null,e)}function yj(t,e){return fE(t,null,{flush:"post"})}function Pce(t,e){return fE(t,null,{flush:"sync"})}const nI={};function Js(t,e,i){return fE(t,e,i)}function fE(t,e,{immediate:i,deep:r,flush:s,onTrack:n,onTrigger:o}=dr){var a;const l=HC()===((a=Hs)==null?void 0:a.scope)?Hs:null;let u,c=!1,d=!1;if(ir(t)?(u=()=>t.value,c=pw(t)):bu(t)?(u=()=>t,r=!0):Rt(t)?(d=!0,c=t.some(x=>bu(x)||pw(x)),u=()=>t.map(x=>{if(ir(x))return x.value;if(bu(x))return i0(x);if(ci(x))return Ph(x,l,2)})):ci(t)?e?u=()=>Ph(t,l,2):u=()=>{if(!(l&&l.isUnmounted))return f&&f(),Ra(t,l,3,[m])}:u=Qo,e&&r){const x=u;u=()=>i0(x())}let f,m=x=>{f=S.onStop=()=>{Ph(x,l,4)}},g;if(fw)if(m=Qo,e?i&&Ra(e,l,3,[u(),d?[]:void 0,m]):u(),s==="sync"){const x=Vj();g=x.__watcherHandles||(x.__watcherHandles=[])}else return Qo;let v=d?new Array(t.length).fill(nI):nI;const b=()=>{if(S.active)if(e){const x=S.run();(r||c||(d?x.some((T,I)=>dw(T,v[I])):dw(x,v)))&&(f&&f(),Ra(e,l,3,[x,v===nI?void 0:d&&v[0]===nI?[]:v,m]),v=x)}else S.run()};b.allowRecurse=!!e;let _;s==="sync"?_=b:s==="post"?_=()=>Gn(b,l&&l.suspense):(b.pre=!0,l&&(b.id=l.uid),_=()=>t$(b));const S=new l_(u,_);e?i?b():v=S.run():s==="post"?Gn(S.run.bind(S),l&&l.suspense):S.run();const M=()=>{S.stop(),l&&l.scope&&tj(l.scope.effects,S)};return g&&g.push(M),M}function gqe(t,e,i){const r=this.proxy,s=Ei(t)?t.includes(".")?Nce(r,t):()=>r[t]:t.bind(r,r);let n;ci(e)?n=e:(n=e.handler,i=e);const o=Hs;jm(this);const a=fE(s,n.bind(r),i);return o?jm(o):wm(),a}function Nce(t,e){const i=e.split(".");return()=>{let r=t;for(let s=0;s<i.length&&r;s++)r=r[i[s]];return r}}function i0(t,e){if(!fr(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),ir(t))i0(t.value,e);else if(Rt(t))for(let i=0;i<t.length;i++)i0(t[i],e);else if(y1(t)||Pb(t))t.forEach(i=>{i0(i,e)});else if(Kue(t))for(const i in t)i0(t[i],e);return t}function ar(t,e){const i=$n;if(i===null)return t;const r=h$(i)||i.proxy,s=t.dirs||(t.dirs=[]);for(let n=0;n<e.length;n++){let[o,a,l,u=dr]=e[n];o&&(ci(o)&&(o={mounted:o,updated:o}),o.deep&&i0(a),s.push({dir:o,instance:r,value:a,oldValue:void 0,arg:l,modifiers:u}))}return t}function gh(t,e,i,r){const s=t.dirs,n=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];n&&(a.oldValue=n[o].value);let l=a.dir[r];l&&(u_(),Ra(l,i,8,[t.el,a,t,e]),c_())}}function n$(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Co(()=>{t.isMounted=!0}),Qh(()=>{t.isUnmounting=!0}),t}const Wl=[Function,Array],o$={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Wl,onEnter:Wl,onAfterEnter:Wl,onEnterCancelled:Wl,onBeforeLeave:Wl,onLeave:Wl,onAfterLeave:Wl,onLeaveCancelled:Wl,onBeforeAppear:Wl,onAppear:Wl,onAfterAppear:Wl,onAppearCancelled:Wl},vqe={name:"BaseTransition",props:o$,setup(t,{slots:e}){const i=Ln(),r=n$();let s;return()=>{const n=e.default&&mE(e.default(),!0);if(!n||!n.length)return;let o=n[0];if(n.length>1){for(const v of n)if(v.type!==Jn){o=v;break}}const a=hi(t),{mode:l}=a;if(r.isLeaving)return ek(o);const u=PJ(o);if(!u)return ek(o);const c=Y0(u,a,r,i);Dm(u,c);const d=i.subTree,f=d&&PJ(d);let m=!1;const{getTransitionKey:g}=u.type;if(g){const v=g();s===void 0?s=v:v!==s&&(s=v,m=!0)}if(f&&f.type!==Jn&&(!dc(u,f)||m)){const v=Y0(f,a,r,i);if(Dm(f,v),l==="out-in")return r.isLeaving=!0,v.afterLeave=()=>{r.isLeaving=!1,i.update.active!==!1&&i.update()},ek(o);l==="in-out"&&u.type!==Jn&&(v.delayLeave=(b,_,S)=>{const M=Fce(r,f);M[String(f.key)]=f,b._leaveCb=()=>{_(),b._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=S})}return o}}},gj=vqe;function Fce(t,e){const{leavingVNodes:i}=t;let r=i.get(e.type);return r||(r=Object.create(null),i.set(e.type,r)),r}function Y0(t,e,i,r){const{appear:s,mode:n,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:d,onLeave:f,onAfterLeave:m,onLeaveCancelled:g,onBeforeAppear:v,onAppear:b,onAfterAppear:_,onAppearCancelled:S}=e,M=String(t.key),x=Fce(i,t),T=(L,B)=>{L&&Ra(L,r,9,B)},I=(L,B)=>{const z=B[1];T(L,B),Rt(L)?L.every(H=>H.length<=1)&&z():L.length<=1&&z()},$={mode:n,persisted:o,beforeEnter(L){let B=a;if(!i.isMounted)if(s)B=v||a;else return;L._leaveCb&&L._leaveCb(!0);const z=x[M];z&&dc(t,z)&&z.el._leaveCb&&z.el._leaveCb(),T(B,[L])},enter(L){let B=l,z=u,H=c;if(!i.isMounted)if(s)B=b||l,z=_||u,H=S||c;else return;let J=!1;const K=L._enterCb=Q=>{J||(J=!0,Q?T(H,[L]):T(z,[L]),$.delayedLeave&&$.delayedLeave(),L._enterCb=void 0)};B?I(B,[L,K]):K()},leave(L,B){const z=String(t.key);if(L._enterCb&&L._enterCb(!0),i.isUnmounting)return B();T(d,[L]);let H=!1;const J=L._leaveCb=K=>{H||(H=!0,B(),K?T(g,[L]):T(m,[L]),L._leaveCb=void 0,x[z]===t&&delete x[z])};x[z]=t,f?I(f,[L,J]):J()},clone(L){return Y0(L,e,i,r)}};return $}function ek(t){if(yE(t))return t=Ic(t),t.children=null,t}function PJ(t){return yE(t)?t.children?t.children[0]:void 0:t}function Dm(t,e){t.shapeFlag&6&&t.component?Dm(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function mE(t,e=!1,i){let r=[],s=0;for(let n=0;n<t.length;n++){let o=t[n];const a=i==null?o.key:String(i)+String(o.key!=null?o.key:n);o.type===Cr?(o.patchFlag&128&&s++,r=r.concat(mE(o.children,e,a))):(e||o.type!==Jn)&&r.push(a!=null?Ic(o,{key:a}):o)}if(s>1)for(let n=0;n<r.length;n++)r[n].patchFlag=-2;return r}function zi(t,e){return ci(t)?(()=>Bi({name:t.name},e,{setup:t}))():t}const S0=t=>!!t.type.__asyncLoader;function vj(t){ci(t)&&(t={loader:t});const{loader:e,loadingComponent:i,errorComponent:r,delay:s=200,timeout:n,suspensible:o=!0,onError:a}=t;let l=null,u,c=0;const d=()=>(c++,l=null,f()),f=()=>{let m;return l||(m=l=e().catch(g=>{if(g=g instanceof Error?g:new Error(String(g)),a)return new Promise((v,b)=>{a(g,()=>v(d()),()=>b(g),c+1)});throw g}).then(g=>m!==l&&l?l:(g&&(g.__esModule||g[Symbol.toStringTag]==="Module")&&(g=g.default),u=g,g)))};return zi({name:"AsyncComponentWrapper",__asyncLoader:f,get __asyncResolved(){return u},setup(){const m=Hs;if(u)return()=>tk(u,m);const g=S=>{l=null,iy(S,m,13,!r)};if(o&&m.suspense||fw)return f().then(S=>()=>tk(S,m)).catch(S=>(g(S),()=>r?wi(r,{error:S}):null));const v=Xe(!1),b=Xe(),_=Xe(!!s);return s&&setTimeout(()=>{_.value=!1},s),n!=null&&setTimeout(()=>{if(!v.value&&!b.value){const S=new Error(`Async component timed out after ${n}ms.`);g(S),b.value=S}},n),f().then(()=>{v.value=!0,m.parent&&yE(m.parent.vnode)&&t$(m.parent.update)}).catch(S=>{g(S),b.value=S}),()=>{if(v.value&&u)return tk(u,m);if(b.value&&r)return wi(r,{error:b.value});if(i&&!_.value)return wi(i)}}})}function tk(t,e){const{ref:i,props:r,children:s,ce:n}=e.vnode,o=wi(t,r,s);return o.ref=i,o.ce=n,delete e.vnode.ce,o}const yE=t=>t.type.__isKeepAlive,bqe={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const i=Ln(),r=i.ctx;if(!r.renderer)return()=>{const S=e.default&&e.default();return S&&S.length===1?S[0]:S};const s=new Map,n=new Set;let o=null;const a=i.suspense,{renderer:{p:l,m:u,um:c,o:{createElement:d}}}=r,f=d("div");r.activate=(S,M,x,T,I)=>{const $=S.component;u(S,M,x,0,a),l($.vnode,S,M,x,$,a,T,S.slotScopeIds,I),Gn(()=>{$.isDeactivated=!1,$.a&&Nb($.a);const L=S.props&&S.props.onVnodeMounted;L&&va(L,$.parent,S)},a)},r.deactivate=S=>{const M=S.component;u(S,f,null,1,a),Gn(()=>{M.da&&Nb(M.da);const x=S.props&&S.props.onVnodeUnmounted;x&&va(x,M.parent,S),M.isDeactivated=!0},a)};function m(S){ik(S),c(S,i,a,!0)}function g(S){s.forEach((M,x)=>{const T=WN(M.type);T&&(!S||!S(T))&&v(x)})}function v(S){const M=s.get(S);!o||!dc(M,o)?m(M):o&&ik(o),s.delete(S),n.delete(S)}Js(()=>[t.include,t.exclude],([S,M])=>{S&&g(x=>vx(S,x)),M&&g(x=>!vx(M,x))},{flush:"post",deep:!0});let b=null;const _=()=>{b!=null&&s.set(b,rk(i.subTree))};return Co(_),h_(_),Qh(()=>{s.forEach(S=>{const{subTree:M,suspense:x}=i,T=rk(M);if(S.type===T.type&&S.key===T.key){ik(T);const I=T.component.da;I&&Gn(I,x);return}m(S)})}),()=>{if(b=null,!e.default)return null;const S=e.default(),M=S[0];if(S.length>1)return o=null,S;if(!qh(M)||!(M.shapeFlag&4)&&!(M.shapeFlag&128))return o=null,M;let x=rk(M);const T=x.type,I=WN(S0(x)?x.type.__asyncResolved||{}:T),{include:$,exclude:L,max:B}=t;if($&&(!I||!vx($,I))||L&&I&&vx(L,I))return o=x,M;const z=x.key==null?T:x.key,H=s.get(z);return x.el&&(x=Ic(x),M.shapeFlag&128&&(M.ssContent=x)),b=z,H?(x.el=H.el,x.component=H.component,x.transition&&Dm(x,x.transition),x.shapeFlag|=512,n.delete(z),n.add(z)):(n.add(z),B&&n.size>parseInt(B,10)&&v(n.values().next().value)),x.shapeFlag|=256,o=x,Oce(M.type)?M:x}}},Dce=bqe;function vx(t,e){return Rt(t)?t.some(i=>vx(i,e)):Ei(t)?t.split(",").includes(e):iGe(t)?t.test(e):!1}function bj(t,e){jce(t,"a",e)}function wj(t,e){jce(t,"da",e)}function jce(t,e,i=Hs){const r=t.__wdc||(t.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(a$(e,r,i),i){let s=i.parent;for(;s&&s.parent;)yE(s.parent.vnode)&&wqe(r,e,i,s),s=s.parent}}function wqe(t,e,i,r){const s=a$(e,t,r,!0);g1(()=>{tj(r[e],s)},i)}function ik(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function rk(t){return t.shapeFlag&128?t.ssContent:t}function a$(t,e,i=Hs,r=!1){if(i){const s=i[t]||(i[t]=[]),n=e.__weh||(e.__weh=(...o)=>{if(i.isUnmounted)return;u_(),jm(i);const a=Ra(e,i,t,o);return wm(),c_(),a});return r?s.unshift(n):s.push(n),n}}const $p=t=>(e,i=Hs)=>(!fw||t==="sp")&&a$(t,(...r)=>e(...r),i),l$=$p("bm"),Co=$p("m"),_j=$p("bu"),h_=$p("u"),Qh=$p("bum"),g1=$p("um"),xj=$p("sp"),Sj=$p("rtg"),Ej=$p("rtc");function Tj(t,e=Hs){a$("ec",t,e)}const Ij="components",_qe="directives";function Os(t,e){return Aj(Ij,t,!0,e)||t}const Uce=Symbol.for("v-ndc");function Mj(t){return Ei(t)?Aj(Ij,t,!1)||t:t||Uce}function gr(t){return Aj(_qe,t)}function Aj(t,e,i=!0,r=!1){const s=$n||Hs;if(s){const n=s.type;if(t===Ij){const a=WN(n,!1);if(a&&(a===e||a===Ps(e)||a===ey(Ps(e))))return n}const o=NJ(s[t]||n[t],e)||NJ(s.appContext[t],e);return!o&&r?n:o}}function NJ(t,e){return t&&(t[e]||t[Ps(e)]||t[ey(Ps(e))])}function ny(t,e,i,r){let s;const n=i&&i[r];if(Rt(t)||Ei(t)){s=new Array(t.length);for(let o=0,a=t.length;o<a;o++)s[o]=e(t[o],o,void 0,n&&n[o])}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,n&&n[o])}else if(fr(t))if(t[Symbol.iterator])s=Array.from(t,(o,a)=>e(o,a,void 0,n&&n[a]));else{const o=Object.keys(t);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const u=o[a];s[a]=e(t[u],u,a,n&&n[a])}}else s=[];return i&&(i[r]=s),s}function Vce(t,e){for(let i=0;i<e.length;i++){const r=e[i];if(Rt(r))for(let s=0;s<r.length;s++)t[r[s].name]=r[s].fn;else r&&(t[r.name]=r.key?(...s)=>{const n=r.fn(...s);return n&&(n.key=r.key),n}:r.fn)}return t}function yc(t,e,i={},r,s){if($n.isCE||$n.parent&&S0($n.parent)&&$n.parent.isCE)return e!=="default"&&(i.name=e),wi("slot",i,r&&r());let n=t[e];n&&n._c&&(n._d=!1),ht();const o=n&&Bce(n(i)),a=Br(Cr,{key:i.key||o&&o.key||`_${e}`},o||(r?r():[]),o&&t._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),n&&n._c&&(n._d=!0),a}function Bce(t){return t.some(e=>qh(e)?!(e.type===Jn||e.type===Cr&&!Bce(e.children)):!0)?t:null}function zce(t,e){const i={};for(const r in t)i[e&&/[A-Z]/.test(r)?`on:${r}`:_0(r)]=t[r];return i}const jN=t=>t?_he(t)?h$(t)||t.proxy:jN(t.parent):null,Qx=Bi(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>jN(t.parent),$root:t=>jN(t.root),$emit:t=>t.emit,$options:t=>Cj(t),$forceUpdate:t=>t.f||(t.f=()=>t$(t.update)),$nextTick:t=>t.n||(t.n=Kh.bind(t.proxy)),$watch:t=>gqe.bind(t)}),sk=(t,e)=>t!==dr&&!t.__isScriptSetup&&Zi(t,e),UN={get({_:t},e){const{ctx:i,setupState:r,data:s,props:n,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return s[e];case 4:return i[e];case 3:return n[e]}else{if(sk(r,e))return o[e]=1,r[e];if(s!==dr&&Zi(s,e))return o[e]=2,s[e];if((u=t.propsOptions[0])&&Zi(u,e))return o[e]=3,n[e];if(i!==dr&&Zi(i,e))return o[e]=4,i[e];VN&&(o[e]=0)}}const c=Qx[e];let d,f;if(c)return e==="$attrs"&&Ua(t,"get",e),c(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(i!==dr&&Zi(i,e))return o[e]=4,i[e];if(f=l.config.globalProperties,Zi(f,e))return f[e]},set({_:t},e,i){const{data:r,setupState:s,ctx:n}=t;return sk(s,e)?(s[e]=i,!0):r!==dr&&Zi(r,e)?(r[e]=i,!0):Zi(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(n[e]=i,!0)},has({_:{data:t,setupState:e,accessCache:i,ctx:r,appContext:s,propsOptions:n}},o){let a;return!!i[o]||t!==dr&&Zi(t,o)||sk(e,o)||(a=n[0])&&Zi(a,o)||Zi(r,o)||Zi(Qx,o)||Zi(s.config.globalProperties,o)},defineProperty(t,e,i){return i.get!=null?t._.accessCache[e]=0:Zi(i,"value")&&this.set(t,e,i.value,null),Reflect.defineProperty(t,e,i)}},xqe=Bi({},UN,{get(t,e){if(e!==Symbol.unscopables)return UN.get(t,e,t)},has(t,e){return e[0]!=="_"&&!lGe(e)}});function Gce(){return null}function qce(){return null}function Hce(t){}function Wce(t){}function Jce(){return null}function Zce(){}function Yce(t,e){return null}function Kce(){return ehe().slots}function Qce(){return ehe().attrs}function Xce(t,e,i){const r=Ln();if(i&&i.local){const s=Xe(t[e]);return Js(()=>t[e],n=>s.value=n),Js(s,n=>{n!==t[e]&&r.emit(`update:${e}`,n)}),s}else return{__v_isRef:!0,get value(){return t[e]},set value(s){r.emit(`update:${e}`,s)}}}function ehe(){const t=Ln();return t.setupContext||(t.setupContext=The(t))}function a3(t){return Rt(t)?t.reduce((e,i)=>(e[i]=null,e),{}):t}function the(t,e){const i=a3(t);for(const r in e){if(r.startsWith("__skip"))continue;let s=i[r];s?Rt(s)||ci(s)?s=i[r]={type:s,default:e[r]}:s.default=e[r]:s===null&&(s=i[r]={default:e[r]}),s&&e[`__skip_${r}`]&&(s.skipFactory=!0)}return i}function ihe(t,e){return!t||!e?t||e:Rt(t)&&Rt(e)?t.concat(e):Bi({},a3(t),a3(e))}function rhe(t,e){const i={};for(const r in t)e.includes(r)||Object.defineProperty(i,r,{enumerable:!0,get:()=>t[r]});return i}function she(t){const e=Ln();let i=t();return wm(),ij(i)&&(i=i.catch(r=>{throw jm(e),r})),[i,()=>jm(e)]}let VN=!0;function Sqe(t){const e=Cj(t),i=t.proxy,r=t.ctx;VN=!1,e.beforeCreate&&FJ(e.beforeCreate,t,"bc");const{data:s,computed:n,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:d,mounted:f,beforeUpdate:m,updated:g,activated:v,deactivated:b,beforeDestroy:_,beforeUnmount:S,destroyed:M,unmounted:x,render:T,renderTracked:I,renderTriggered:$,errorCaptured:L,serverPrefetch:B,expose:z,inheritAttrs:H,components:J,directives:K,filters:Q}=e;if(u&&Eqe(u,r,null),o)for(const N in o){const D=o[N];ci(D)&&(r[N]=D.bind(i))}if(s){const N=s.call(i,i);fr(N)&&(t.data=Ys(N))}if(VN=!0,n)for(const N in n){const D=n[N],ne=ci(D)?D.bind(i,i):ci(D.get)?D.get.bind(i,i):Qo,q=!ci(D)&&ci(D.set)?D.set.bind(i):Qo,he=Ri({get:ne,set:q});Object.defineProperty(r,N,{enumerable:!0,configurable:!0,get:()=>he.value,set:te=>he.value=te})}if(a)for(const N in a)nhe(a[N],r,i,N);if(l){const N=ci(l)?l.call(i):l;Reflect.ownKeys(N).forEach(D=>{$j(D,N[D])})}c&&FJ(c,t,"c");function A(N,D){Rt(D)?D.forEach(ne=>N(ne.bind(i))):D&&N(D.bind(i))}if(A(l$,d),A(Co,f),A(_j,m),A(h_,g),A(bj,v),A(wj,b),A(Tj,L),A(Ej,I),A(Sj,$),A(Qh,S),A(g1,x),A(xj,B),Rt(z))if(z.length){const N=t.exposed||(t.exposed={});z.forEach(D=>{Object.defineProperty(N,D,{get:()=>i[D],set:ne=>i[D]=ne})})}else t.exposed||(t.exposed={});T&&t.render===Qo&&(t.render=T),H!=null&&(t.inheritAttrs=H),J&&(t.components=J),K&&(t.directives=K)}function Eqe(t,e,i=Qo){Rt(t)&&(t=BN(t));for(const r in t){const s=t[r];let n;fr(s)?"default"in s?n=mn(s.from||r,s.default,!0):n=mn(s.from||r):n=mn(s),ir(n)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>n.value,set:o=>n.value=o}):e[r]=n}}function FJ(t,e,i){Ra(Rt(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,i)}function nhe(t,e,i,r){const s=r.includes(".")?Nce(i,r):()=>i[r];if(Ei(t)){const n=e[t];ci(n)&&Js(s,n)}else if(ci(t))Js(s,t.bind(i));else if(fr(t))if(Rt(t))t.forEach(n=>nhe(n,e,i,r));else{const n=ci(t.handler)?t.handler.bind(i):e[t.handler];ci(n)&&Js(s,n,t)}}function Cj(t){const e=t.type,{mixins:i,extends:r}=e,{mixins:s,optionsCache:n,config:{optionMergeStrategies:o}}=t.appContext,a=n.get(e);let l;return a?l=a:!s.length&&!i&&!r?l=e:(l={},s.length&&s.forEach(u=>G5(l,u,o,!0)),G5(l,e,o)),fr(e)&&n.set(e,l),l}function G5(t,e,i,r=!1){const{mixins:s,extends:n}=e;n&&G5(t,n,i,!0),s&&s.forEach(o=>G5(t,o,i,!0));for(const o in e)if(!(r&&o==="expose")){const a=Tqe[o]||i&&i[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Tqe={data:DJ,props:jJ,emits:jJ,methods:bx,computed:bx,beforeCreate:Vo,created:Vo,beforeMount:Vo,mounted:Vo,beforeUpdate:Vo,updated:Vo,beforeDestroy:Vo,beforeUnmount:Vo,destroyed:Vo,unmounted:Vo,activated:Vo,deactivated:Vo,errorCaptured:Vo,serverPrefetch:Vo,components:bx,directives:bx,watch:Mqe,provide:DJ,inject:Iqe};function DJ(t,e){return e?t?function(){return Bi(ci(t)?t.call(this,this):t,ci(e)?e.call(this,this):e)}:e:t}function Iqe(t,e){return bx(BN(t),BN(e))}function BN(t){if(Rt(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function Vo(t,e){return t?[...new Set([].concat(t,e))]:e}function bx(t,e){return t?Bi(Object.create(null),t,e):e}function jJ(t,e){return t?Rt(t)&&Rt(e)?[...new Set([...t,...e])]:Bi(Object.create(null),a3(t),a3(e??{})):e}function Mqe(t,e){if(!t)return e;if(!e)return t;const i=Bi(Object.create(null),t);for(const r in e)i[r]=Vo(t[r],e[r]);return i}function ohe(){return{app:null,config:{isNativeTag:nA,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Aqe=0;function Cqe(t,e){return function(r,s=null){ci(r)||(r=Bi({},r)),s!=null&&!fr(s)&&(s=null);const n=ohe(),o=new Set;let a=!1;const l=n.app={_uid:Aqe++,_component:r,_props:s,_container:null,_context:n,_instance:null,version:zj,get config(){return n.config},set config(u){},use(u,...c){return o.has(u)||(u&&ci(u.install)?(o.add(u),u.install(l,...c)):ci(u)&&(o.add(u),u(l,...c))),l},mixin(u){return n.mixins.includes(u)||n.mixins.push(u),l},component(u,c){return c?(n.components[u]=c,l):n.components[u]},directive(u,c){return c?(n.directives[u]=c,l):n.directives[u]},mount(u,c,d){if(!a){const f=wi(r,s);return f.appContext=n,c&&e?e(f,u):t(f,u,d),a=!0,l._container=u,u.__vue_app__=l,h$(f.component)||f.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(u,c){return n.provides[u]=c,l},runWithContext(u){l3=l;try{return u()}finally{l3=null}}};return l}}let l3=null;function $j(t,e){if(Hs){let i=Hs.provides;const r=Hs.parent&&Hs.parent.provides;r===i&&(i=Hs.provides=Object.create(r)),i[t]=e}}function mn(t,e,i=!1){const r=Hs||$n;if(r||l3){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:l3._context.provides;if(s&&t in s)return s[t];if(arguments.length>1)return i&&ci(e)?e.call(r&&r.proxy):e}}function ahe(){return!!(Hs||$n||l3)}function $qe(t,e,i,r=!1){const s={},n={};j5(n,u$,1),t.propsDefaults=Object.create(null),lhe(t,e,s,n);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);i?t.props=r?s:aj(s):t.type.props?t.props=s:t.props=n,t.attrs=n}function Oqe(t,e,i,r){const{props:s,attrs:n,vnode:{patchFlag:o}}=t,a=hi(s),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];if(r$(t.emitsOptions,f))continue;const m=e[f];if(l)if(Zi(n,f))m!==n[f]&&(n[f]=m,u=!0);else{const g=Ps(f);s[g]=zN(l,a,g,m,t,!1)}else m!==n[f]&&(n[f]=m,u=!0)}}}else{lhe(t,e,s,n)&&(u=!0);let c;for(const d in a)(!e||!Zi(e,d)&&((c=xl(d))===d||!Zi(e,c)))&&(l?i&&(i[d]!==void 0||i[c]!==void 0)&&(s[d]=zN(l,a,d,void 0,t,!0)):delete s[d]);if(n!==a)for(const d in n)(!e||!Zi(e,d))&&(delete n[d],u=!0)}u&&gp(t,"set","$attrs")}function lhe(t,e,i,r){const[s,n]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(w0(l))continue;const u=e[l];let c;s&&Zi(s,c=Ps(l))?!n||!n.includes(c)?i[c]=u:(a||(a={}))[c]=u:r$(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(n){const l=hi(i),u=a||dr;for(let c=0;c<n.length;c++){const d=n[c];i[d]=zN(s,l,d,u[d],t,!Zi(u,d))}}return o}function zN(t,e,i,r,s,n){const o=t[i];if(o!=null){const a=Zi(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&ci(l)){const{propsDefaults:u}=s;i in u?r=u[i]:(jm(s),r=u[i]=l.call(null,e),wm())}else r=l}o[0]&&(n&&!a?r=!1:o[1]&&(r===""||r===xl(i))&&(r=!0))}return r}function uhe(t,e,i=!1){const r=e.propsCache,s=r.get(t);if(s)return s;const n=t.props,o={},a=[];let l=!1;if(!ci(t)){const c=d=>{l=!0;const[f,m]=uhe(d,e,!0);Bi(o,f),m&&a.push(...m)};!i&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!n&&!l)return fr(t)&&r.set(t,Lb),Lb;if(Rt(n))for(let c=0;c<n.length;c++){const d=Ps(n[c]);UJ(d)&&(o[d]=dr)}else if(n)for(const c in n){const d=Ps(c);if(UJ(d)){const f=n[c],m=o[d]=Rt(f)||ci(f)?{type:f}:Bi({},f);if(m){const g=zJ(Boolean,m.type),v=zJ(String,m.type);m[0]=g>-1,m[1]=v<0||g<v,(g>-1||Zi(m,"default"))&&a.push(d)}}}const u=[o,a];return fr(t)&&r.set(t,u),u}function UJ(t){return t[0]!=="$"}function VJ(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function BJ(t,e){return VJ(t)===VJ(e)}function zJ(t,e){return Rt(e)?e.findIndex(i=>BJ(i,t)):ci(e)&&BJ(e,t)?0:-1}const che=t=>t[0]==="_"||t==="$stable",Oj=t=>Rt(t)?t.map(bl):[bl(t)],Rqe=(t,e,i)=>{if(e._n)return e;const r=Ns((...s)=>Oj(e(...s)),i);return r._c=!1,r},hhe=(t,e,i)=>{const r=t._ctx;for(const s in t){if(che(s))continue;const n=t[s];if(ci(n))e[s]=Rqe(s,n,r);else if(n!=null){const o=Oj(n);e[s]=()=>o}}},dhe=(t,e)=>{const i=Oj(e);t.slots.default=()=>i},kqe=(t,e)=>{if(t.vnode.shapeFlag&32){const i=e._;i?(t.slots=hi(e),j5(e,"_",i)):hhe(e,t.slots={})}else t.slots={},e&&dhe(t,e);j5(t.slots,u$,1)},Lqe=(t,e,i)=>{const{vnode:r,slots:s}=t;let n=!0,o=dr;if(r.shapeFlag&32){const a=e._;a?i&&a===1?n=!1:(Bi(s,e),!i&&a===1&&delete s._):(n=!e.$stable,hhe(e,s)),o=e}else e&&(dhe(t,e),o={default:1});if(n)for(const a in s)!che(a)&&!(a in o)&&delete s[a]};function q5(t,e,i,r,s=!1){if(Rt(t)){t.forEach((f,m)=>q5(f,e&&(Rt(e)?e[m]:e),i,r,s));return}if(S0(r)&&!s)return;const n=r.shapeFlag&4?h$(r.component)||r.component.proxy:r.el,o=s?null:n,{i:a,r:l}=t,u=e&&e.r,c=a.refs===dr?a.refs={}:a.refs,d=a.setupState;if(u!=null&&u!==l&&(Ei(u)?(c[u]=null,Zi(d,u)&&(d[u]=null)):ir(u)&&(u.value=null)),ci(l))Ph(l,a,12,[o,c]);else{const f=Ei(l),m=ir(l);if(f||m){const g=()=>{if(t.f){const v=f?Zi(d,l)?d[l]:c[l]:l.value;s?Rt(v)&&tj(v,n):Rt(v)?v.includes(n)||v.push(n):f?(c[l]=[n],Zi(d,l)&&(d[l]=c[l])):(l.value=[n],t.k&&(c[t.k]=l.value))}else f?(c[l]=o,Zi(d,l)&&(d[l]=o)):m&&(l.value=o,t.k&&(c[t.k]=o))};o?(g.id=-1,Gn(g,i)):g()}}}let rf=!1;const oI=t=>/svg/.test(t.namespaceURI)&&t.tagName!=="foreignObject",aI=t=>t.nodeType===8;function Pqe(t){const{mt:e,p:i,o:{patchProp:r,createText:s,nextSibling:n,parentNode:o,remove:a,insert:l,createComment:u}}=t,c=(_,S)=>{if(!S.hasChildNodes()){i(null,_,S),z5(),S._vnode=_;return}rf=!1,d(S.firstChild,_,null,null,null),z5(),S._vnode=_,rf&&console.error("Hydration completed but contains mismatches.")},d=(_,S,M,x,T,I=!1)=>{const $=aI(_)&&_.data==="[",L=()=>v(_,S,M,x,T,$),{type:B,ref:z,shapeFlag:H,patchFlag:J}=S;let K=_.nodeType;S.el=_,J===-2&&(I=!1,S.dynamicChildren=null);let Q=null;switch(B){case vp:K!==3?S.children===""?(l(S.el=s(""),o(_),_),Q=_):Q=L():(_.data!==S.children&&(rf=!0,_.data=S.children),Q=n(_));break;case Jn:K!==8||$?Q=L():Q=n(_);break;case bm:if($&&(_=n(_),K=_.nodeType),K===1||K===3){Q=_;const y=!S.children.length;for(let A=0;A<S.staticCount;A++)y&&(S.children+=Q.nodeType===1?Q.outerHTML:Q.data),A===S.staticCount-1&&(S.anchor=Q),Q=n(Q);return $?n(Q):Q}else L();break;case Cr:$?Q=g(_,S,M,x,T,I):Q=L();break;default:if(H&1)K!==1||S.type.toLowerCase()!==_.tagName.toLowerCase()?Q=L():Q=f(_,S,M,x,T,I);else if(H&6){S.slotScopeIds=T;const y=o(_);if(e(S,y,null,M,x,oI(y),I),Q=$?b(_):n(_),Q&&aI(Q)&&Q.data==="teleport end"&&(Q=n(Q)),S0(S)){let A;$?(A=wi(Cr),A.anchor=Q?Q.previousSibling:y.lastChild):A=_.nodeType===3?Nh(""):wi("div"),A.el=_,S.component.subTree=A}}else H&64?K!==8?Q=L():Q=S.type.hydrate(_,S,M,x,T,I,t,m):H&128&&(Q=S.type.hydrate(_,S,M,x,oI(o(_)),T,I,t,d))}return z!=null&&q5(z,null,x,S),Q},f=(_,S,M,x,T,I)=>{I=I||!!S.dynamicChildren;const{type:$,props:L,patchFlag:B,shapeFlag:z,dirs:H}=S,J=$==="input"&&H||$==="option";if(J||B!==-1){if(H&&gh(S,null,M,"created"),L)if(J||!I||B&48)for(const Q in L)(J&&Q.endsWith("value")||m1(Q)&&!w0(Q))&&r(_,Q,null,L[Q],!1,void 0,M);else L.onClick&&r(_,"onClick",null,L.onClick,!1,void 0,M);let K;if((K=L&&L.onVnodeBeforeMount)&&va(K,M,S),H&&gh(S,null,M,"beforeMount"),((K=L&&L.onVnodeMounted)||H)&&kce(()=>{K&&va(K,M,S),H&&gh(S,null,M,"mounted")},x),z&16&&!(L&&(L.innerHTML||L.textContent))){let Q=m(_.firstChild,S,_,M,x,T,I);for(;Q;){rf=!0;const y=Q;Q=Q.nextSibling,a(y)}}else z&8&&_.textContent!==S.children&&(rf=!0,_.textContent=S.children)}return _.nextSibling},m=(_,S,M,x,T,I,$)=>{$=$||!!S.dynamicChildren;const L=S.children,B=L.length;for(let z=0;z<B;z++){const H=$?L[z]:L[z]=bl(L[z]);if(_)_=d(_,H,x,T,I,$);else{if(H.type===vp&&!H.children)continue;rf=!0,i(null,H,M,null,x,T,oI(M),I)}}return _},g=(_,S,M,x,T,I)=>{const{slotScopeIds:$}=S;$&&(T=T?T.concat($):$);const L=o(_),B=m(n(_),S,L,M,x,T,I);return B&&aI(B)&&B.data==="]"?n(S.anchor=B):(rf=!0,l(S.anchor=u("]"),L,B),B)},v=(_,S,M,x,T,I)=>{if(rf=!0,S.el=null,I){const B=b(_);for(;;){const z=n(_);if(z&&z!==B)a(z);else break}}const $=n(_),L=o(_);return a(_),i(null,S,L,$,M,x,oI(L),T),$},b=_=>{let S=0;for(;_;)if(_=n(_),_&&aI(_)&&(_.data==="["&&S++,_.data==="]")){if(S===0)return n(_);S--}return _};return[c,d]}const Gn=kce;function Rj(t){return phe(t)}function kj(t){return phe(t,Pqe)}function phe(t,e){const i=LN();i.__VUE__=!0;const{insert:r,remove:s,patchProp:n,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:f,setScopeId:m=Qo,insertStaticContent:g}=t,v=(W,V,j,se=null,ye=null,ae=null,U=!1,le=null,re=!!V.dynamicChildren)=>{if(W===V)return;W&&!dc(W,V)&&(se=Oe(W),te(W,ye,ae,!0),W=null),V.patchFlag===-2&&(re=!1,V.dynamicChildren=null);const{type:k,ref:O,shapeFlag:C}=V;switch(k){case vp:b(W,V,j,se);break;case Jn:_(W,V,j,se);break;case bm:W==null&&S(V,j,se,U);break;case Cr:J(W,V,j,se,ye,ae,U,le,re);break;default:C&1?T(W,V,j,se,ye,ae,U,le,re):C&6?K(W,V,j,se,ye,ae,U,le,re):(C&64||C&128)&&k.process(W,V,j,se,ye,ae,U,le,re,we)}O!=null&&ye&&q5(O,W&&W.ref,ae,V||W,!V)},b=(W,V,j,se)=>{if(W==null)r(V.el=a(V.children),j,se);else{const ye=V.el=W.el;V.children!==W.children&&u(ye,V.children)}},_=(W,V,j,se)=>{W==null?r(V.el=l(V.children||""),j,se):V.el=W.el},S=(W,V,j,se)=>{[W.el,W.anchor]=g(W.children,V,j,se,W.el,W.anchor)},M=({el:W,anchor:V},j,se)=>{let ye;for(;W&&W!==V;)ye=f(W),r(W,j,se),W=ye;r(V,j,se)},x=({el:W,anchor:V})=>{let j;for(;W&&W!==V;)j=f(W),s(W),W=j;s(V)},T=(W,V,j,se,ye,ae,U,le,re)=>{U=U||V.type==="svg",W==null?I(V,j,se,ye,ae,U,le,re):B(W,V,ye,ae,U,le,re)},I=(W,V,j,se,ye,ae,U,le)=>{let re,k;const{type:O,props:C,shapeFlag:G,transition:Z,dirs:F}=W;if(re=W.el=o(W.type,ae,C&&C.is,C),G&8?c(re,W.children):G&16&&L(W.children,re,null,se,ye,ae&&O!=="foreignObject",U,le),F&&gh(W,null,se,"created"),$(re,W,W.scopeId,U,se),C){for(const ge in C)ge!=="value"&&!w0(ge)&&n(re,ge,null,C[ge],ae,W.children,se,ye,Se);"value"in C&&n(re,"value",null,C.value),(k=C.onVnodeBeforeMount)&&va(k,se,W)}F&&gh(W,null,se,"beforeMount");const ie=(!ye||ye&&!ye.pendingBranch)&&Z&&!Z.persisted;ie&&Z.beforeEnter(re),r(re,V,j),((k=C&&C.onVnodeMounted)||ie||F)&&Gn(()=>{k&&va(k,se,W),ie&&Z.enter(re),F&&gh(W,null,se,"mounted")},ye)},$=(W,V,j,se,ye)=>{if(j&&m(W,j),se)for(let ae=0;ae<se.length;ae++)m(W,se[ae]);if(ye){let ae=ye.subTree;if(V===ae){const U=ye.vnode;$(W,U,U.scopeId,U.slotScopeIds,ye.parent)}}},L=(W,V,j,se,ye,ae,U,le,re=0)=>{for(let k=re;k<W.length;k++){const O=W[k]=le?Gf(W[k]):bl(W[k]);v(null,O,V,j,se,ye,ae,U,le)}},B=(W,V,j,se,ye,ae,U)=>{const le=V.el=W.el;let{patchFlag:re,dynamicChildren:k,dirs:O}=V;re|=W.patchFlag&16;const C=W.props||dr,G=V.props||dr;let Z;j&&My(j,!1),(Z=G.onVnodeBeforeUpdate)&&va(Z,j,V,W),O&&gh(V,W,j,"beforeUpdate"),j&&My(j,!0);const F=ye&&V.type!=="foreignObject";if(k?z(W.dynamicChildren,k,le,j,se,F,ae):U||D(W,V,le,null,j,se,F,ae,!1),re>0){if(re&16)H(le,V,C,G,j,se,ye);else if(re&2&&C.class!==G.class&&n(le,"class",null,G.class,ye),re&4&&n(le,"style",C.style,G.style,ye),re&8){const ie=V.dynamicProps;for(let ge=0;ge<ie.length;ge++){const xe=ie[ge],fe=C[xe],ze=G[xe];(ze!==fe||xe==="value")&&n(le,xe,fe,ze,ye,W.children,j,se,Se)}}re&1&&W.children!==V.children&&c(le,V.children)}else!U&&k==null&&H(le,V,C,G,j,se,ye);((Z=G.onVnodeUpdated)||O)&&Gn(()=>{Z&&va(Z,j,V,W),O&&gh(V,W,j,"updated")},se)},z=(W,V,j,se,ye,ae,U)=>{for(let le=0;le<V.length;le++){const re=W[le],k=V[le],O=re.el&&(re.type===Cr||!dc(re,k)||re.shapeFlag&70)?d(re.el):j;v(re,k,O,null,se,ye,ae,U,!0)}},H=(W,V,j,se,ye,ae,U)=>{if(j!==se){if(j!==dr)for(const le in j)!w0(le)&&!(le in se)&&n(W,le,j[le],null,U,V.children,ye,ae,Se);for(const le in se){if(w0(le))continue;const re=se[le],k=j[le];re!==k&&le!=="value"&&n(W,le,k,re,U,V.children,ye,ae,Se)}"value"in se&&n(W,"value",j.value,se.value)}},J=(W,V,j,se,ye,ae,U,le,re)=>{const k=V.el=W?W.el:a(""),O=V.anchor=W?W.anchor:a("");let{patchFlag:C,dynamicChildren:G,slotScopeIds:Z}=V;Z&&(le=le?le.concat(Z):Z),W==null?(r(k,j,se),r(O,j,se),L(V.children,j,O,ye,ae,U,le,re)):C>0&&C&64&&G&&W.dynamicChildren?(z(W.dynamicChildren,G,j,ye,ae,U,le),(V.key!=null||ye&&V===ye.subTree)&&Lj(W,V,!0)):D(W,V,j,O,ye,ae,U,le,re)},K=(W,V,j,se,ye,ae,U,le,re)=>{V.slotScopeIds=le,W==null?V.shapeFlag&512?ye.ctx.activate(V,j,se,U,re):Q(V,j,se,ye,ae,U,re):y(W,V,re)},Q=(W,V,j,se,ye,ae,U)=>{const le=W.component=whe(W,se,ye);if(yE(W)&&(le.ctx.renderer=we),xhe(le),le.asyncDep){if(ye&&ye.registerDep(le,A),!W.el){const re=le.subTree=wi(Jn);_(null,re,V,j)}return}A(le,W,V,j,ye,ae,U)},y=(W,V,j)=>{const se=V.component=W.component;if(cqe(W,V,j))if(se.asyncDep&&!se.asyncResolved){N(se,V,j);return}else se.next=V,sqe(se.update),se.update();else V.el=W.el,se.vnode=V},A=(W,V,j,se,ye,ae,U)=>{const le=()=>{if(W.isMounted){let{next:O,bu:C,u:G,parent:Z,vnode:F}=W,ie=O,ge;My(W,!1),O?(O.el=F.el,N(W,O,U)):O=F,C&&Nb(C),(ge=O.props&&O.props.onVnodeBeforeUpdate)&&va(ge,Z,O,F),My(W,!0);const xe=oA(W),fe=W.subTree;W.subTree=xe,v(fe,xe,d(fe.el),Oe(fe),W,ye,ae),O.el=xe.el,ie===null&&fj(W,xe.el),G&&Gn(G,ye),(ge=O.props&&O.props.onVnodeUpdated)&&Gn(()=>va(ge,Z,O,F),ye)}else{let O;const{el:C,props:G}=V,{bm:Z,m:F,parent:ie}=W,ge=S0(V);if(My(W,!1),Z&&Nb(Z),!ge&&(O=G&&G.onVnodeBeforeMount)&&va(O,ie,V),My(W,!0),C&&Ae){const xe=()=>{W.subTree=oA(W),Ae(C,W.subTree,W,ye,null)};ge?V.type.__asyncLoader().then(()=>!W.isUnmounted&&xe()):xe()}else{const xe=W.subTree=oA(W);v(null,xe,j,se,W,ye,ae),V.el=xe.el}if(F&&Gn(F,ye),!ge&&(O=G&&G.onVnodeMounted)){const xe=V;Gn(()=>va(O,ie,xe),ye)}(V.shapeFlag&256||ie&&S0(ie.vnode)&&ie.vnode.shapeFlag&256)&&W.a&&Gn(W.a,ye),W.isMounted=!0,V=j=se=null}},re=W.effect=new l_(le,()=>t$(k),W.scope),k=W.update=()=>re.run();k.id=W.uid,My(W,!0),k()},N=(W,V,j)=>{V.component=W;const se=W.vnode.props;W.vnode=V,W.next=null,Oqe(W,V.props,se,j),Lqe(W,V.children,j),u_(),RJ(),c_()},D=(W,V,j,se,ye,ae,U,le,re=!1)=>{const k=W&&W.children,O=W?W.shapeFlag:0,C=V.children,{patchFlag:G,shapeFlag:Z}=V;if(G>0){if(G&128){q(k,C,j,se,ye,ae,U,le,re);return}else if(G&256){ne(k,C,j,se,ye,ae,U,le,re);return}}Z&8?(O&16&&Se(k,ye,ae),C!==k&&c(j,C)):O&16?Z&16?q(k,C,j,se,ye,ae,U,le,re):Se(k,ye,ae,!0):(O&8&&c(j,""),Z&16&&L(C,j,se,ye,ae,U,le,re))},ne=(W,V,j,se,ye,ae,U,le,re)=>{W=W||Lb,V=V||Lb;const k=W.length,O=V.length,C=Math.min(k,O);let G;for(G=0;G<C;G++){const Z=V[G]=re?Gf(V[G]):bl(V[G]);v(W[G],Z,j,null,ye,ae,U,le,re)}k>O?Se(W,ye,ae,!0,!1,C):L(V,j,se,ye,ae,U,le,re,C)},q=(W,V,j,se,ye,ae,U,le,re)=>{let k=0;const O=V.length;let C=W.length-1,G=O-1;for(;k<=C&&k<=G;){const Z=W[k],F=V[k]=re?Gf(V[k]):bl(V[k]);if(dc(Z,F))v(Z,F,j,null,ye,ae,U,le,re);else break;k++}for(;k<=C&&k<=G;){const Z=W[C],F=V[G]=re?Gf(V[G]):bl(V[G]);if(dc(Z,F))v(Z,F,j,null,ye,ae,U,le,re);else break;C--,G--}if(k>C){if(k<=G){const Z=G+1,F=Z<O?V[Z].el:se;for(;k<=G;)v(null,V[k]=re?Gf(V[k]):bl(V[k]),j,F,ye,ae,U,le,re),k++}}else if(k>G)for(;k<=C;)te(W[k],ye,ae,!0),k++;else{const Z=k,F=k,ie=new Map;for(k=F;k<=G;k++){const be=V[k]=re?Gf(V[k]):bl(V[k]);be.key!=null&&ie.set(be.key,k)}let ge,xe=0;const fe=G-F+1;let ze=!1,He=0;const et=new Array(fe);for(k=0;k<fe;k++)et[k]=0;for(k=Z;k<=C;k++){const be=W[k];if(xe>=fe){te(be,ye,ae,!0);continue}let ke;if(be.key!=null)ke=ie.get(be.key);else for(ge=F;ge<=G;ge++)if(et[ge-F]===0&&dc(be,V[ge])){ke=ge;break}ke===void 0?te(be,ye,ae,!0):(et[ke-F]=k+1,ke>=He?He=ke:ze=!0,v(be,V[ke],j,null,ye,ae,U,le,re),xe++)}const Ve=ze?Nqe(et):Lb;for(ge=Ve.length-1,k=fe-1;k>=0;k--){const be=F+k,ke=V[be],Ge=be+1<O?V[be+1].el:se;et[k]===0?v(null,ke,j,Ge,ye,ae,U,le,re):ze&&(ge<0||k!==Ve[ge]?he(ke,j,Ge,2):ge--)}}},he=(W,V,j,se,ye=null)=>{const{el:ae,type:U,transition:le,children:re,shapeFlag:k}=W;if(k&6){he(W.component.subTree,V,j,se);return}if(k&128){W.suspense.move(V,j,se);return}if(k&64){U.move(W,V,j,we);return}if(U===Cr){r(ae,V,j);for(let C=0;C<re.length;C++)he(re[C],V,j,se);r(W.anchor,V,j);return}if(U===bm){M(W,V,j);return}if(se!==2&&k&1&&le)if(se===0)le.beforeEnter(ae),r(ae,V,j),Gn(()=>le.enter(ae),ye);else{const{leave:C,delayLeave:G,afterLeave:Z}=le,F=()=>r(ae,V,j),ie=()=>{C(ae,()=>{F(),Z&&Z()})};G?G(ae,F,ie):ie()}else r(ae,V,j)},te=(W,V,j,se=!1,ye=!1)=>{const{type:ae,props:U,ref:le,children:re,dynamicChildren:k,shapeFlag:O,patchFlag:C,dirs:G}=W;if(le!=null&&q5(le,null,j,W,!0),O&256){V.ctx.deactivate(W);return}const Z=O&1&&G,F=!S0(W);let ie;if(F&&(ie=U&&U.onVnodeBeforeUnmount)&&va(ie,V,W),O&6)_e(W.component,j,se);else{if(O&128){W.suspense.unmount(j,se);return}Z&&gh(W,null,V,"beforeUnmount"),O&64?W.type.remove(W,V,j,ye,we,se):k&&(ae!==Cr||C>0&&C&64)?Se(k,V,j,!1,!0):(ae===Cr&&C&384||!ye&&O&16)&&Se(re,V,j),se&&me(W)}(F&&(ie=U&&U.onVnodeUnmounted)||Z)&&Gn(()=>{ie&&va(ie,V,W),Z&&gh(W,null,V,"unmounted")},j)},me=W=>{const{type:V,el:j,anchor:se,transition:ye}=W;if(V===Cr){ve(j,se);return}if(V===bm){x(W);return}const ae=()=>{s(j),ye&&!ye.persisted&&ye.afterLeave&&ye.afterLeave()};if(W.shapeFlag&1&&ye&&!ye.persisted){const{leave:U,delayLeave:le}=ye,re=()=>U(j,ae);le?le(W.el,ae,re):re()}else ae()},ve=(W,V)=>{let j;for(;W!==V;)j=f(W),s(W),W=j;s(V)},_e=(W,V,j)=>{const{bum:se,scope:ye,update:ae,subTree:U,um:le}=W;se&&Nb(se),ye.stop(),ae&&(ae.active=!1,te(U,W,V,j)),le&&Gn(le,V),Gn(()=>{W.isUnmounted=!0},V),V&&V.pendingBranch&&!V.isUnmounted&&W.asyncDep&&!W.asyncResolved&&W.suspenseId===V.pendingId&&(V.deps--,V.deps===0&&V.resolve())},Se=(W,V,j,se=!1,ye=!1,ae=0)=>{for(let U=ae;U<W.length;U++)te(W[U],V,j,se,ye)},Oe=W=>W.shapeFlag&6?Oe(W.component.subTree):W.shapeFlag&128?W.suspense.next():f(W.anchor||W.el),Te=(W,V,j)=>{W==null?V._vnode&&te(V._vnode,null,null,!0):v(V._vnode||null,W,V,null,null,null,j),RJ(),z5(),V._vnode=W},we={p:v,um:te,m:he,r:me,mt:Q,mc:L,pc:D,pbc:z,n:Oe,o:t};let Ie,Ae;return e&&([Ie,Ae]=e(we)),{render:Te,hydrate:Ie,createApp:Cqe(Te,Ie)}}function My({effect:t,update:e},i){t.allowRecurse=e.allowRecurse=i}function Lj(t,e,i=!1){const r=t.children,s=e.children;if(Rt(r)&&Rt(s))for(let n=0;n<r.length;n++){const o=r[n];let a=s[n];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[n]=Gf(s[n]),a.el=o.el),i||Lj(o,a)),a.type===vp&&(a.el=o.el)}}function Nqe(t){const e=t.slice(),i=[0];let r,s,n,o,a;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(s=i[i.length-1],t[s]<u){e[r]=s,i.push(r);continue}for(n=0,o=i.length-1;n<o;)a=n+o>>1,t[i[a]]<u?n=a+1:o=a;u<t[i[n]]&&(n>0&&(e[r]=i[n-1]),i[n]=r)}}for(n=i.length,o=i[n-1];n-- >0;)i[n]=o,o=e[o];return i}const Fqe=t=>t.__isTeleport,Xx=t=>t&&(t.disabled||t.disabled===""),GJ=t=>typeof SVGElement<"u"&&t instanceof SVGElement,GN=(t,e)=>{const i=t&&t.to;return Ei(i)?e?e(i):null:i},Dqe={__isTeleport:!0,process(t,e,i,r,s,n,o,a,l,u){const{mc:c,pc:d,pbc:f,o:{insert:m,querySelector:g,createText:v,createComment:b}}=u,_=Xx(e.props);let{shapeFlag:S,children:M,dynamicChildren:x}=e;if(t==null){const T=e.el=v(""),I=e.anchor=v("");m(T,i,r),m(I,i,r);const $=e.target=GN(e.props,g),L=e.targetAnchor=v("");$&&(m(L,$),o=o||GJ($));const B=(z,H)=>{S&16&&c(M,z,H,s,n,o,a,l)};_?B(i,I):$&&B($,L)}else{e.el=t.el;const T=e.anchor=t.anchor,I=e.target=t.target,$=e.targetAnchor=t.targetAnchor,L=Xx(t.props),B=L?i:I,z=L?T:$;if(o=o||GJ(I),x?(f(t.dynamicChildren,x,B,s,n,o,a),Lj(t,e,!0)):l||d(t,e,B,z,s,n,o,a,!1),_)L||lI(e,i,T,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const H=e.target=GN(e.props,g);H&&lI(e,H,null,u,0)}else L&&lI(e,I,$,u,1)}fhe(e)},remove(t,e,i,r,{um:s,o:{remove:n}},o){const{shapeFlag:a,children:l,anchor:u,targetAnchor:c,target:d,props:f}=t;if(d&&n(c),(o||!Xx(f))&&(n(u),a&16))for(let m=0;m<l.length;m++){const g=l[m];s(g,e,i,!0,!!g.dynamicChildren)}},move:lI,hydrate:jqe};function lI(t,e,i,{o:{insert:r},m:s},n=2){n===0&&r(t.targetAnchor,e,i);const{el:o,anchor:a,shapeFlag:l,children:u,props:c}=t,d=n===2;if(d&&r(o,e,i),(!d||Xx(c))&&l&16)for(let f=0;f<u.length;f++)s(u[f],e,i,2);d&&r(a,e,i)}function jqe(t,e,i,r,s,n,{o:{nextSibling:o,parentNode:a,querySelector:l}},u){const c=e.target=GN(e.props,l);if(c){const d=c._lpa||c.firstChild;if(e.shapeFlag&16)if(Xx(e.props))e.anchor=u(o(t),e,a(t),i,r,s,n),e.targetAnchor=d;else{e.anchor=o(t);let f=d;for(;f;)if(f=o(f),f&&f.nodeType===8&&f.data==="teleport anchor"){e.targetAnchor=f,c._lpa=e.targetAnchor&&o(e.targetAnchor);break}u(d,e,c,i,r,s,n)}fhe(e)}return e.anchor&&o(e.anchor)}const Pj=Dqe;function fhe(t){const e=t.ctx;if(e&&e.ut){let i=t.children[0].el;for(;i!==t.targetAnchor;)i.nodeType===1&&i.setAttribute("data-v-owner",e.uid),i=i.nextSibling;e.ut()}}const Cr=Symbol.for("v-fgt"),vp=Symbol.for("v-txt"),Jn=Symbol.for("v-cmt"),bm=Symbol.for("v-stc"),eS=[];let Aa=null;function ht(t=!1){eS.push(Aa=t?null:[])}function mhe(){eS.pop(),Aa=eS[eS.length-1]||null}let K0=1;function H5(t){K0+=t}function yhe(t){return t.dynamicChildren=K0>0?Aa||Lb:null,mhe(),K0>0&&Aa&&Aa.push(t),t}function Ot(t,e,i,r,s,n){return yhe(at(t,e,i,r,s,n,!0))}function Br(t,e,i,r,s){return yhe(wi(t,e,i,r,s,!0))}function qh(t){return t?t.__v_isVNode===!0:!1}function dc(t,e){return t.type===e.type&&t.key===e.key}function ghe(t){}const u$="__vInternal",vhe=({key:t})=>t??null,aA=({ref:t,ref_key:e,ref_for:i})=>(typeof t=="number"&&(t=""+t),t!=null?Ei(t)||ir(t)||ci(t)?{i:$n,r:t,k:e,f:!!i}:t:null);function at(t,e=null,i=null,r=0,s=null,n=t===Cr?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&vhe(e),ref:e&&aA(e),scopeId:s$,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:$n};return a?(Fj(l,i),n&128&&t.normalize(l)):i&&(l.shapeFlag|=Ei(i)?8:16),K0>0&&!o&&Aa&&(l.patchFlag>0||n&6)&&l.patchFlag!==32&&Aa.push(l),l}const wi=Uqe;function Uqe(t,e=null,i=null,r=0,s=null,n=!1){if((!t||t===Uce)&&(t=Jn),qh(t)){const a=Ic(t,e,!0);return i&&Fj(a,i),K0>0&&!n&&Aa&&(a.shapeFlag&6?Aa[Aa.indexOf(t)]=a:Aa.push(a)),a.patchFlag|=-2,a}if(qqe(t)&&(t=t.__vccOpts),e){e=Nj(e);let{class:a,style:l}=e;a&&!Ei(a)&&(e.class=ws(a)),fr(l)&&(QC(l)&&!Rt(l)&&(l=Bi({},l)),e.style=ty(l))}const o=Ei(t)?1:Oce(t)?128:Fqe(t)?64:fr(t)?4:ci(t)?2:0;return at(t,e,i,r,s,o,n,!0)}function Nj(t){return t?QC(t)||u$ in t?Bi({},t):t:null}function Ic(t,e,i=!1){const{props:r,ref:s,patchFlag:n,children:o}=t,a=e?c$(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&vhe(a),ref:e&&e.ref?i&&s?Rt(s)?s.concat(aA(e)):[s,aA(e)]:aA(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Cr?n===-1?16:n|16:n,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ic(t.ssContent),ssFallback:t.ssFallback&&Ic(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Nh(t=" ",e=0){return wi(vp,null,t,e)}function bhe(t,e){const i=wi(bm,null,t);return i.staticCount=e,i}function Hr(t="",e=!1){return e?(ht(),Br(Jn,null,t)):wi(Jn,null,t)}function bl(t){return t==null||typeof t=="boolean"?wi(Jn):Rt(t)?wi(Cr,null,t.slice()):typeof t=="object"?Gf(t):wi(vp,null,String(t))}function Gf(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ic(t)}function Fj(t,e){let i=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Rt(e))i=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Fj(t,s()),s._c&&(s._d=!0));return}else{i=32;const s=e._;!s&&!(u$ in e)?e._ctx=$n:s===3&&$n&&($n.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ci(e)?(e={default:e,_ctx:$n},i=32):(e=String(e),r&64?(i=16,e=[Nh(e)]):i=8);t.children=e,t.shapeFlag|=i}function c$(...t){const e={};for(let i=0;i<t.length;i++){const r=t[i];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=ws([e.class,r.class]));else if(s==="style")e.style=ty([e.style,r.style]);else if(m1(s)){const n=e[s],o=r[s];o&&n!==o&&!(Rt(n)&&n.includes(o))&&(e[s]=n?[].concat(n,o):o)}else s!==""&&(e[s]=r[s])}return e}function va(t,e,i,r=null){Ra(t,e,7,[i,r])}const Vqe=ohe();let Bqe=0;function whe(t,e,i){const r=t.type,s=(e?e.appContext:t.appContext)||Vqe,n={uid:Bqe++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new qC(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:uhe(r,s),emitsOptions:Cce(r,s),emit:null,emitted:null,propsDefaults:dr,inheritAttrs:r.inheritAttrs,ctx:dr,data:dr,props:dr,attrs:dr,slots:dr,refs:dr,setupState:dr,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=e?e.root:n,n.emit=oqe.bind(null,n),t.ce&&t.ce(n),n}let Hs=null;const Ln=()=>Hs||$n;let Dj,Y1,qJ="__VUE_INSTANCE_SETTERS__";(Y1=LN()[qJ])||(Y1=LN()[qJ]=[]),Y1.push(t=>Hs=t),Dj=t=>{Y1.length>1?Y1.forEach(e=>e(t)):Y1[0](t)};const jm=t=>{Dj(t),t.scope.on()},wm=()=>{Hs&&Hs.scope.off(),Dj(null)};function _he(t){return t.vnode.shapeFlag&4}let fw=!1;function xhe(t,e=!1){fw=e;const{props:i,children:r}=t.vnode,s=_he(t);$qe(t,i,s,e),kqe(t,r);const n=s?zqe(t,e):void 0;return fw=!1,n}function zqe(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=_s(new Proxy(t.ctx,UN));const{setup:r}=i;if(r){const s=t.setupContext=r.length>1?The(t):null;jm(t),u_();const n=Ph(r,t,0,[t.props,s]);if(c_(),wm(),ij(n)){if(n.then(wm,wm),e)return n.then(o=>{qN(t,o,e)}).catch(o=>{iy(o,t,0)});t.asyncDep=n}else qN(t,n,e)}else Ehe(t,e)}function qN(t,e,i){ci(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:fr(e)&&(t.setupState=e$(e)),Ehe(t,i)}let W5,HN;function jj(t){W5=t,HN=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,xqe))}}const She=()=>!W5;function Ehe(t,e,i){const r=t.type;if(!t.render){if(!e&&W5&&!r.render){const s=r.template||Cj(t).template;if(s){const{isCustomElement:n,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,u=Bi(Bi({isCustomElement:n,delimiters:a},o),l);r.render=W5(s,u)}}t.render=r.render||Qo,HN&&HN(t)}jm(t),u_(),Sqe(t),c_(),wm()}function Gqe(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,i){return Ua(t,"get","$attrs"),e[i]}}))}function The(t){const e=i=>{t.exposed=i||{}};return{get attrs(){return Gqe(t)},slots:t.slots,emit:t.emit,expose:e}}function h$(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(e$(_s(t.exposed)),{get(e,i){if(i in e)return e[i];if(i in Qx)return Qx[i](t)},has(e,i){return i in e||i in Qx}}))}function WN(t,e=!0){return ci(t)?t.displayName||t.name:t.name||e&&t.__name}function qqe(t){return ci(t)&&"__vccOpts"in t}const Ri=(t,e)=>tqe(t,e,fw);function Hh(t,e,i){const r=arguments.length;return r===2?fr(e)&&!Rt(e)?qh(e)?wi(t,null,[e]):wi(t,e):wi(t,null,e):(r>3?i=Array.prototype.slice.call(arguments,2):r===3&&qh(i)&&(i=[i]),wi(t,e,i))}const Uj=Symbol.for("v-scx"),Vj=()=>mn(Uj);function Ihe(){}function Mhe(t,e,i,r){const s=i[r];if(s&&Bj(s,t))return s;const n=e();return n.memo=t.slice(),i[r]=n}function Bj(t,e){const i=t.memo;if(i.length!=e.length)return!1;for(let r=0;r<i.length;r++)if(dw(i[r],e[r]))return!1;return K0>0&&Aa&&Aa.push(t),!0}const zj="3.3.4",Hqe={createComponentInstance:whe,setupComponent:xhe,renderComponentRoot:oA,setCurrentRenderingInstance:n3,isVNode:qh,normalizeVNode:bl},Ahe=Hqe,Che=null,$he=null,Wqe="http://www.w3.org/2000/svg",Dg=typeof document<"u"?document:null,HJ=Dg&&Dg.createElement("template"),Jqe={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,r)=>{const s=e?Dg.createElementNS(Wqe,t):Dg.createElement(t,i?{is:i}:void 0);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Dg.createTextNode(t),createComment:t=>Dg.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Dg.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,i,r,s,n){const o=i?i.previousSibling:e.lastChild;if(s&&(s===n||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),i),!(s===n||!(s=s.nextSibling)););else{HJ.innerHTML=r?`<svg>${t}</svg>`:t;const a=HJ.content;if(r){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,i)}return[o?o.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}};function Zqe(t,e,i){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):i?t.setAttribute("class",e):t.className=e}function Yqe(t,e,i){const r=t.style,s=Ei(i);if(i&&!s){if(e&&!Ei(e))for(const n in e)i[n]==null&&JN(r,n,"");for(const n in i)JN(r,n,i[n])}else{const n=r.display;s?e!==i&&(r.cssText=i):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=n)}}const WJ=/\s*!important$/;function JN(t,e,i){if(Rt(i))i.forEach(r=>JN(t,e,r));else if(i==null&&(i=""),e.startsWith("--"))t.setProperty(e,i);else{const r=Kqe(t,e);WJ.test(i)?t.setProperty(xl(r),i.replace(WJ,""),"important"):t[r]=i}}const JJ=["Webkit","Moz","ms"],nk={};function Kqe(t,e){const i=nk[e];if(i)return i;let r=Ps(e);if(r!=="filter"&&r in t)return nk[e]=r;r=ey(r);for(let s=0;s<JJ.length;s++){const n=JJ[s]+r;if(n in t)return nk[e]=n}return e}const ZJ="http://www.w3.org/1999/xlink";function Qqe(t,e,i,r,s){if(r&&e.startsWith("xlink:"))i==null?t.removeAttributeNS(ZJ,e.slice(6,e.length)):t.setAttributeNS(ZJ,e,i);else{const n=bGe(e);i==null||n&&!ece(i)?t.removeAttribute(e):t.setAttribute(e,n?"":i)}}function Xqe(t,e,i,r,s,n,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,s,n),t[e]=i??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){t._value=i;const u=a==="OPTION"?t.getAttribute("value"):t.value,c=i??"";u!==c&&(t.value=c),i==null&&t.removeAttribute(e);return}let l=!1;if(i===""||i==null){const u=typeof t[e];u==="boolean"?i=ece(i):i==null&&u==="string"?(i="",l=!0):u==="number"&&(i=0,l=!0)}try{t[e]=i}catch{}l&&t.removeAttribute(e)}function Kd(t,e,i,r){t.addEventListener(e,i,r)}function eHe(t,e,i,r){t.removeEventListener(e,i,r)}function tHe(t,e,i,r,s=null){const n=t._vei||(t._vei={}),o=n[e];if(r&&o)o.value=r;else{const[a,l]=iHe(e);if(r){const u=n[e]=nHe(r,s);Kd(t,a,u,l)}else o&&(eHe(t,a,o,l),n[e]=void 0)}}const YJ=/(?:Once|Passive|Capture)$/;function iHe(t){let e;if(YJ.test(t)){e={};let r;for(;r=t.match(YJ);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):xl(t.slice(2)),e]}let ok=0;const rHe=Promise.resolve(),sHe=()=>ok||(rHe.then(()=>ok=0),ok=Date.now());function nHe(t,e){const i=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=i.attached)return;Ra(oHe(r,i.value),e,5,[r])};return i.value=t,i.attached=sHe(),i}function oHe(t,e){if(Rt(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const KJ=/^on[a-z]/,aHe=(t,e,i,r,s=!1,n,o,a,l)=>{e==="class"?Zqe(t,r,s):e==="style"?Yqe(t,i,r):m1(e)?ej(e)||tHe(t,e,i,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):lHe(t,e,r,s))?Xqe(t,e,r,n,o,a,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Qqe(t,e,r,s))};function lHe(t,e,i,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&KJ.test(e)&&ci(i)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||KJ.test(e)&&Ei(i)?!1:e in t}function Gj(t,e){const i=zi(t);class r extends gE{constructor(n){super(i,n,e)}}return r.def=i,r}const Ohe=t=>Gj(t,Jj),uHe=typeof HTMLElement<"u"?HTMLElement:class{};class gE extends uHe{constructor(e,i={},r){super(),this._def=e,this._props=i,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&r?r(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,Kh(()=>{this._connected||(np(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);new MutationObserver(r=>{for(const s of r)this._setAttr(s.attributeName)}).observe(this,{attributes:!0});const e=(r,s=!1)=>{const{props:n,styles:o}=r;let a;if(n&&!Rt(n))for(const l in n){const u=n[l];(u===Number||u&&u.type===Number)&&(l in this._props&&(this._props[l]=V5(this._props[l])),(a||(a=Object.create(null)))[Ps(l)]=!0)}this._numberProps=a,s&&this._resolveProps(r),this._applyStyles(o),this._update()},i=this._def.__asyncLoader;i?i().then(r=>e(r,!0)):e(this._def)}_resolveProps(e){const{props:i}=e,r=Rt(i)?i:Object.keys(i||{});for(const s of Object.keys(this))s[0]!=="_"&&r.includes(s)&&this._setProp(s,this[s],!0,!1);for(const s of r.map(Ps))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(n){this._setProp(s,n)}})}_setAttr(e){let i=this.getAttribute(e);const r=Ps(e);this._numberProps&&this._numberProps[r]&&(i=V5(i)),this._setProp(r,i,!1)}_getProp(e){return this._props[e]}_setProp(e,i,r=!0,s=!0){i!==this._props[e]&&(this._props[e]=i,s&&this._instance&&this._update(),r&&(i===!0?this.setAttribute(xl(e),""):typeof i=="string"||typeof i=="number"?this.setAttribute(xl(e),i+""):i||this.removeAttribute(xl(e))))}_update(){np(this._createVNode(),this.shadowRoot)}_createVNode(){const e=wi(this._def,Bi({},this._props));return this._instance||(e.ce=i=>{this._instance=i,i.isCE=!0;const r=(n,o)=>{this.dispatchEvent(new CustomEvent(n,{detail:o}))};i.emit=(n,...o)=>{r(n,o),xl(n)!==n&&r(xl(n),o)};let s=this;for(;s=s&&(s.parentNode||s.host);)if(s instanceof gE){i.parent=s._instance,i.provides=s._instance.provides;break}}),e}_applyStyles(e){e&&e.forEach(i=>{const r=document.createElement("style");r.textContent=i,this.shadowRoot.appendChild(r)})}}function Rhe(t="$style"){{const e=Ln();if(!e)return dr;const i=e.type.__cssModules;if(!i)return dr;const r=i[t];return r||dr}}function khe(t){const e=Ln();if(!e)return;const i=e.ut=(s=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(n=>YN(n,s))},r=()=>{const s=t(e.proxy);ZN(e.subTree,s),i(s)};yj(r),Co(()=>{const s=new MutationObserver(r);s.observe(e.subTree.el.parentNode,{childList:!0}),g1(()=>s.disconnect())})}function ZN(t,e){if(t.shapeFlag&128){const i=t.suspense;t=i.activeBranch,i.pendingBranch&&!i.isHydrating&&i.effects.push(()=>{ZN(i.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)YN(t.el,e);else if(t.type===Cr)t.children.forEach(i=>ZN(i,e));else if(t.type===bm){let{el:i,anchor:r}=t;for(;i&&(YN(i,e),i!==r);)i=i.nextSibling}}function YN(t,e){if(t.nodeType===1){const i=t.style;for(const r in e)i.setProperty(`--${r}`,e[r])}}const sf="transition",t2="animation",d_=(t,{slots:e})=>Hh(gj,Phe(t),e);d_.displayName="Transition";const Lhe={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},cHe=d_.props=Bi({},o$,Lhe),Ay=(t,e=[])=>{Rt(t)?t.forEach(i=>i(...e)):t&&t(...e)},QJ=t=>t?Rt(t)?t.some(e=>e.length>1):t.length>1:!1;function Phe(t){const e={};for(const J in t)J in Lhe||(e[J]=t[J]);if(t.css===!1)return e;const{name:i="v",type:r,duration:s,enterFromClass:n=`${i}-enter-from`,enterActiveClass:o=`${i}-enter-active`,enterToClass:a=`${i}-enter-to`,appearFromClass:l=n,appearActiveClass:u=o,appearToClass:c=a,leaveFromClass:d=`${i}-leave-from`,leaveActiveClass:f=`${i}-leave-active`,leaveToClass:m=`${i}-leave-to`}=t,g=hHe(s),v=g&&g[0],b=g&&g[1],{onBeforeEnter:_,onEnter:S,onEnterCancelled:M,onLeave:x,onLeaveCancelled:T,onBeforeAppear:I=_,onAppear:$=S,onAppearCancelled:L=M}=e,B=(J,K,Q)=>{Lf(J,K?c:a),Lf(J,K?u:o),Q&&Q()},z=(J,K)=>{J._isLeaving=!1,Lf(J,d),Lf(J,m),Lf(J,f),K&&K()},H=J=>(K,Q)=>{const y=J?$:S,A=()=>B(K,J,Q);Ay(y,[K,A]),XJ(()=>{Lf(K,J?l:n),Fd(K,J?c:a),QJ(y)||eZ(K,r,v,A)})};return Bi(e,{onBeforeEnter(J){Ay(_,[J]),Fd(J,n),Fd(J,o)},onBeforeAppear(J){Ay(I,[J]),Fd(J,l),Fd(J,u)},onEnter:H(!1),onAppear:H(!0),onLeave(J,K){J._isLeaving=!0;const Q=()=>z(J,K);Fd(J,d),Fhe(),Fd(J,f),XJ(()=>{J._isLeaving&&(Lf(J,d),Fd(J,m),QJ(x)||eZ(J,r,b,Q))}),Ay(x,[J,Q])},onEnterCancelled(J){B(J,!1),Ay(M,[J])},onAppearCancelled(J){B(J,!0),Ay(L,[J])},onLeaveCancelled(J){z(J),Ay(T,[J])}})}function hHe(t){if(t==null)return null;if(fr(t))return[ak(t.enter),ak(t.leave)];{const e=ak(t);return[e,e]}}function ak(t){return V5(t)}function Fd(t,e){e.split(/\s+/).forEach(i=>i&&t.classList.add(i)),(t._vtc||(t._vtc=new Set)).add(e)}function Lf(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const{_vtc:i}=t;i&&(i.delete(e),i.size||(t._vtc=void 0))}function XJ(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let dHe=0;function eZ(t,e,i,r){const s=t._endId=++dHe,n=()=>{s===t._endId&&r()};if(i)return setTimeout(n,i);const{type:o,timeout:a,propCount:l}=Nhe(t,e);if(!o)return r();const u=o+"end";let c=0;const d=()=>{t.removeEventListener(u,f),n()},f=m=>{m.target===t&&++c>=l&&d()};setTimeout(()=>{c<l&&d()},a+1),t.addEventListener(u,f)}function Nhe(t,e){const i=window.getComputedStyle(t),r=g=>(i[g]||"").split(", "),s=r(`${sf}Delay`),n=r(`${sf}Duration`),o=tZ(s,n),a=r(`${t2}Delay`),l=r(`${t2}Duration`),u=tZ(a,l);let c=null,d=0,f=0;e===sf?o>0&&(c=sf,d=o,f=n.length):e===t2?u>0&&(c=t2,d=u,f=l.length):(d=Math.max(o,u),c=d>0?o>u?sf:t2:null,f=c?c===sf?n.length:l.length:0);const m=c===sf&&/\b(transform|all)(,|$)/.test(r(`${sf}Property`).toString());return{type:c,timeout:d,propCount:f,hasTransform:m}}function tZ(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((i,r)=>iZ(i)+iZ(t[r])))}function iZ(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function Fhe(){return document.body.offsetHeight}const Dhe=new WeakMap,jhe=new WeakMap,Uhe={name:"TransitionGroup",props:Bi({},cHe,{tag:String,moveClass:String}),setup(t,{slots:e}){const i=Ln(),r=n$();let s,n;return h_(()=>{if(!s.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!gHe(s[0].el,i.vnode.el,o))return;s.forEach(fHe),s.forEach(mHe);const a=s.filter(yHe);Fhe(),a.forEach(l=>{const u=l.el,c=u.style;Fd(u,o),c.transform=c.webkitTransform=c.transitionDuration="";const d=u._moveCb=f=>{f&&f.target!==u||(!f||/transform$/.test(f.propertyName))&&(u.removeEventListener("transitionend",d),u._moveCb=null,Lf(u,o))};u.addEventListener("transitionend",d)})}),()=>{const o=hi(t),a=Phe(o);let l=o.tag||Cr;s=n,n=e.default?mE(e.default()):[];for(let u=0;u<n.length;u++){const c=n[u];c.key!=null&&Dm(c,Y0(c,a,r,i))}if(s)for(let u=0;u<s.length;u++){const c=s[u];Dm(c,Y0(c,a,r,i)),Dhe.set(c,c.el.getBoundingClientRect())}return wi(l,null,n)}}},pHe=t=>delete t.mode;Uhe.props;const d$=Uhe;function fHe(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function mHe(t){jhe.set(t,t.el.getBoundingClientRect())}function yHe(t){const e=Dhe.get(t),i=jhe.get(t),r=e.left-i.left,s=e.top-i.top;if(r||s){const n=t.el.style;return n.transform=n.webkitTransform=`translate(${r}px,${s}px)`,n.transitionDuration="0s",t}}function gHe(t,e,i){const r=t.cloneNode();t._vtc&&t._vtc.forEach(o=>{o.split(/\s+/).forEach(a=>a&&r.classList.remove(a))}),i.split(/\s+/).forEach(o=>o&&r.classList.add(o)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:n}=Nhe(r);return s.removeChild(r),n}const Um=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Rt(e)?i=>Nb(e,i):e};function vHe(t){t.target.composing=!0}function rZ(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const u3={created(t,{modifiers:{lazy:e,trim:i,number:r}},s){t._assign=Um(s);const n=r||s.props&&s.props.type==="number";Kd(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;i&&(a=a.trim()),n&&(a=U5(a)),t._assign(a)}),i&&Kd(t,"change",()=>{t.value=t.value.trim()}),e||(Kd(t,"compositionstart",vHe),Kd(t,"compositionend",rZ),Kd(t,"change",rZ))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:i,trim:r,number:s}},n){if(t._assign=Um(n),t.composing||document.activeElement===t&&t.type!=="range"&&(i||r&&t.value.trim()===e||(s||t.type==="number")&&U5(t.value)===e))return;const o=e??"";t.value!==o&&(t.value=o)}},p$={deep:!0,created(t,e,i){t._assign=Um(i),Kd(t,"change",()=>{const r=t._modelValue,s=mw(t),n=t.checked,o=t._assign;if(Rt(r)){const a=GC(r,s),l=a!==-1;if(n&&!l)o(r.concat(s));else if(!n&&l){const u=[...r];u.splice(a,1),o(u)}}else if(y1(r)){const a=new Set(r);n?a.add(s):a.delete(s),o(a)}else o(Vhe(t,n))})},mounted:sZ,beforeUpdate(t,e,i){t._assign=Um(i),sZ(t,e,i)}};function sZ(t,{value:e,oldValue:i},r){t._modelValue=e,Rt(e)?t.checked=GC(e,r.props.value)>-1:y1(e)?t.checked=e.has(r.props.value):e!==i&&(t.checked=Pm(e,Vhe(t,!0)))}const f$={created(t,{value:e},i){t.checked=Pm(e,i.props.value),t._assign=Um(i),Kd(t,"change",()=>{t._assign(mw(t))})},beforeUpdate(t,{value:e,oldValue:i},r){t._assign=Um(r),e!==i&&(t.checked=Pm(e,r.props.value))}},qj={deep:!0,created(t,{value:e,modifiers:{number:i}},r){const s=y1(e);Kd(t,"change",()=>{const n=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>i?U5(mw(o)):mw(o));t._assign(t.multiple?s?new Set(n):n:n[0])}),t._assign=Um(r)},mounted(t,{value:e}){nZ(t,e)},beforeUpdate(t,e,i){t._assign=Um(i)},updated(t,{value:e}){nZ(t,e)}};function nZ(t,e){const i=t.multiple;if(!(i&&!Rt(e)&&!y1(e))){for(let r=0,s=t.options.length;r<s;r++){const n=t.options[r],o=mw(n);if(i)Rt(e)?n.selected=GC(e,o)>-1:n.selected=e.has(o);else if(Pm(mw(n),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!i&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function mw(t){return"_value"in t?t._value:t.value}function Vhe(t,e){const i=e?"_trueValue":"_falseValue";return i in t?t[i]:e}const Hj={created(t,e,i){uI(t,e,i,null,"created")},mounted(t,e,i){uI(t,e,i,null,"mounted")},beforeUpdate(t,e,i,r){uI(t,e,i,r,"beforeUpdate")},updated(t,e,i,r){uI(t,e,i,r,"updated")}};function Bhe(t,e){switch(t){case"SELECT":return qj;case"TEXTAREA":return u3;default:switch(e){case"checkbox":return p$;case"radio":return f$;default:return u3}}}function uI(t,e,i,r,s){const o=Bhe(t.tagName,i.props&&i.props.type)[s];o&&o(t,e,i,r)}function bHe(){u3.getSSRProps=({value:t})=>({value:t}),f$.getSSRProps=({value:t},e)=>{if(e.props&&Pm(e.props.value,t))return{checked:!0}},p$.getSSRProps=({value:t},e)=>{if(Rt(t)){if(e.props&&GC(t,e.props.value)>-1)return{checked:!0}}else if(y1(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},Hj.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const i=Bhe(e.type.toUpperCase(),e.props&&e.props.type);if(i.getSSRProps)return i.getSSRProps(t,e)}}const wHe=["ctrl","shift","alt","meta"],_He={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>wHe.some(i=>t[`${i}Key`]&&!e.includes(i))},vE=(t,e)=>(i,...r)=>{for(let s=0;s<e.length;s++){const n=_He[e[s]];if(n&&n(i,e))return}return t(i,...r)},xHe={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Wj=(t,e)=>i=>{if(!("key"in i))return;const r=xl(i.key);if(e.some(s=>s===r||xHe[s]===r))return t(i)},m$={beforeMount(t,{value:e},{transition:i}){t._vod=t.style.display==="none"?"":t.style.display,i&&e?i.beforeEnter(t):i2(t,e)},mounted(t,{value:e},{transition:i}){i&&e&&i.enter(t)},updated(t,{value:e,oldValue:i},{transition:r}){!e!=!i&&(r?e?(r.beforeEnter(t),i2(t,!0),r.enter(t)):r.leave(t,()=>{i2(t,!1)}):i2(t,e))},beforeUnmount(t,{value:e}){i2(t,e)}};function i2(t,e){t.style.display=e?t._vod:"none"}function SHe(){m$.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const zhe=Bi({patchProp:aHe},Jqe);let tS,oZ=!1;function Ghe(){return tS||(tS=Rj(zhe))}function qhe(){return tS=oZ?tS:kj(zhe),oZ=!0,tS}const np=(...t)=>{Ghe().render(...t)},Jj=(...t)=>{qhe().hydrate(...t)},y$=(...t)=>{const e=Ghe().createApp(...t),{mount:i}=e;return e.mount=r=>{const s=Whe(r);if(!s)return;const n=e._component;!ci(n)&&!n.render&&!n.template&&(n.template=s.innerHTML),s.innerHTML="";const o=i(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e},Hhe=(...t)=>{const e=qhe().createApp(...t),{mount:i}=e;return e.mount=r=>{const s=Whe(r);if(s)return i(s,!0,s instanceof SVGElement)},e};function Whe(t){return Ei(t)?document.querySelector(t):t}let aZ=!1;const Jhe=()=>{aZ||(aZ=!0,bHe(),SHe())},EHe=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:gj,BaseTransitionPropsValidators:o$,Comment:Jn,EffectScope:qC,Fragment:Cr,KeepAlive:Dce,ReactiveEffect:l_,Static:bm,Suspense:Rce,Teleport:Pj,Text:vp,Transition:d_,TransitionGroup:d$,VueElement:gE,assertNumber:Tce,callWithAsyncErrorHandling:Ra,callWithErrorHandling:Ph,camelize:Ps,capitalize:ey,cloneVNode:Ic,compatUtils:$he,computed:Ri,createApp:y$,createBlock:Br,createCommentVNode:Hr,createElementBlock:Ot,createElementVNode:at,createHydrationRenderer:kj,createPropsRestProxy:rhe,createRenderer:Rj,createSSRApp:Hhe,createSlots:Vce,createStaticVNode:bhe,createTextVNode:Nh,createVNode:wi,customRef:_ce,defineAsyncComponent:vj,defineComponent:zi,defineCustomElement:Gj,defineEmits:qce,defineExpose:Hce,defineModel:Zce,defineOptions:Wce,defineProps:Gce,defineSSRCustomElement:Ohe,defineSlots:Jce,get devtools(){return Fg},effect:nce,effectScope:pE,getCurrentInstance:Ln,getCurrentScope:HC,getTransitionRawChildren:mE,guardReactiveProps:Nj,h:Hh,handleError:iy,hasInjectionContext:ahe,hydrate:Jj,initCustomFormatter:Ihe,initDirectivesForSSR:Jhe,inject:mn,isMemoSame:Bj,isProxy:QC,isReactive:bu,isReadonly:Fm,isRef:ir,isRuntimeOnly:She,isShallow:pw,isVNode:qh,markRaw:_s,mergeDefaults:the,mergeModels:ihe,mergeProps:c$,nextTick:Kh,normalizeClass:ws,normalizeProps:Xue,normalizeStyle:ty,onActivated:bj,onBeforeMount:l$,onBeforeUnmount:Qh,onBeforeUpdate:_j,onDeactivated:wj,onErrorCaptured:Tj,onMounted:Co,onRenderTracked:Ej,onRenderTriggered:Sj,onScopeDispose:sj,onServerPrefetch:xj,onUnmounted:g1,onUpdated:h_,openBlock:ht,popScopeId:sy,provide:$j,proxyRefs:e$,pushScopeId:ry,queuePostFlushCb:i$,reactive:Ys,readonly:YC,ref:Xe,registerRuntimeCompiler:jj,render:np,renderList:ny,renderSlot:yc,resolveComponent:Os,resolveDirective:gr,resolveDynamicComponent:Mj,resolveFilter:Che,resolveTransitionHooks:Y0,setBlockTracking:H5,setDevtoolsHook:pj,setTransitionHooks:Dm,shallowReactive:aj,shallowReadonly:gce,shallowRef:cj,ssrContextKey:Uj,ssrUtils:Ahe,stop:oce,toDisplayString:Zr,toHandlerKey:_0,toHandlers:zce,toRaw:hi,toRef:xce,toRefs:hj,toValue:wce,transformVNodeArgs:ghe,triggerRef:bce,unref:ti,useAttrs:Qce,useCssModule:Rhe,useCssVars:khe,useModel:Xce,useSSRContext:Vj,useSlots:Kce,useTransitionState:n$,vModelCheckbox:p$,vModelDynamic:Hj,vModelRadio:f$,vModelSelect:qj,vModelText:u3,vShow:m$,version:zj,warn:Ece,watch:Js,watchEffect:Lce,watchPostEffect:yj,watchSyncEffect:Pce,withAsyncContext:she,withCtx:Ns,withDefaults:Yce,withDirectives:ar,withKeys:Wj,withMemo:Mhe,withModifiers:vE,withScopeId:$ce},Symbol.toStringTag,{value:"Module"}));function Zj(t){throw t}function Zhe(t){}function Yr(t,e,i,r){const s=t,n=new SyntaxError(String(s));return n.code=t,n.loc=e,n}const c3=Symbol(""),iS=Symbol(""),Yj=Symbol(""),J5=Symbol(""),Yhe=Symbol(""),Q0=Symbol(""),Khe=Symbol(""),Qhe=Symbol(""),Kj=Symbol(""),Qj=Symbol(""),bE=Symbol(""),Xj=Symbol(""),Xhe=Symbol(""),eU=Symbol(""),Z5=Symbol(""),tU=Symbol(""),iU=Symbol(""),rU=Symbol(""),sU=Symbol(""),ede=Symbol(""),tde=Symbol(""),g$=Symbol(""),Y5=Symbol(""),nU=Symbol(""),oU=Symbol(""),h3=Symbol(""),wE=Symbol(""),aU=Symbol(""),KN=Symbol(""),THe=Symbol(""),QN=Symbol(""),K5=Symbol(""),IHe=Symbol(""),MHe=Symbol(""),lU=Symbol(""),AHe=Symbol(""),CHe=Symbol(""),uU=Symbol(""),ide=Symbol(""),yw={[c3]:"Fragment",[iS]:"Teleport",[Yj]:"Suspense",[J5]:"KeepAlive",[Yhe]:"BaseTransition",[Q0]:"openBlock",[Khe]:"createBlock",[Qhe]:"createElementBlock",[Kj]:"createVNode",[Qj]:"createElementVNode",[bE]:"createCommentVNode",[Xj]:"createTextVNode",[Xhe]:"createStaticVNode",[eU]:"resolveComponent",[Z5]:"resolveDynamicComponent",[tU]:"resolveDirective",[iU]:"resolveFilter",[rU]:"withDirectives",[sU]:"renderList",[ede]:"renderSlot",[tde]:"createSlots",[g$]:"toDisplayString",[Y5]:"mergeProps",[nU]:"normalizeClass",[oU]:"normalizeStyle",[h3]:"normalizeProps",[wE]:"guardReactiveProps",[aU]:"toHandlers",[KN]:"camelize",[THe]:"capitalize",[QN]:"toHandlerKey",[K5]:"setBlockTracking",[IHe]:"pushScopeId",[MHe]:"popScopeId",[lU]:"withCtx",[AHe]:"unref",[CHe]:"isRef",[uU]:"withMemo",[ide]:"isMemoSame"};function $He(t){Object.getOwnPropertySymbols(t).forEach(e=>{yw[e]=t[e]})}const Dl={source:"",start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0}};function OHe(t,e=Dl){return{type:0,children:t,helpers:new Set,components:[],directives:[],hoists:[],imports:[],cached:0,temps:0,codegenNode:void 0,loc:e}}function d3(t,e,i,r,s,n,o,a=!1,l=!1,u=!1,c=Dl){return t&&(a?(t.helper(Q0),t.helper(bw(t.inSSR,u))):t.helper(vw(t.inSSR,u)),o&&t.helper(rU)),{type:13,tag:e,props:i,children:r,patchFlag:s,dynamicProps:n,directives:o,isBlock:a,disableTracking:l,isComponent:u,loc:c}}function _E(t,e=Dl){return{type:17,loc:e,elements:t}}function mu(t,e=Dl){return{type:15,loc:e,properties:t}}function ys(t,e){return{type:16,loc:Dl,key:Ei(t)?Oi(t,!0):t,value:e}}function Oi(t,e=!1,i=Dl,r=0){return{type:4,loc:i,content:t,isStatic:e,constType:e?3:r}}function wc(t,e=Dl){return{type:8,loc:e,children:t}}function qs(t,e=[],i=Dl){return{type:14,loc:i,callee:t,arguments:e}}function gw(t,e=void 0,i=!1,r=!1,s=Dl){return{type:18,params:t,returns:e,newline:i,isSlot:r,loc:s}}function XN(t,e,i,r=!0){return{type:19,test:t,consequent:e,alternate:i,newline:r,loc:Dl}}function RHe(t,e,i=!1){return{type:20,index:t,value:e,isVNode:i,loc:Dl}}function kHe(t){return{type:21,body:t,loc:Dl}}function vw(t,e){return t||e?Kj:Qj}function bw(t,e){return t||e?Khe:Qhe}function cU(t,{helper:e,removeHelper:i,inSSR:r}){t.isBlock||(t.isBlock=!0,i(vw(r,t.isComponent)),e(Q0),e(bw(r,t.isComponent)))}const Ca=t=>t.type===4&&t.isStatic,ab=(t,e)=>t===e||t===xl(e);function rde(t){if(ab(t,"Teleport"))return iS;if(ab(t,"Suspense"))return Yj;if(ab(t,"KeepAlive"))return J5;if(ab(t,"BaseTransition"))return Yhe}const LHe=/^\d|[^\$\w]/,hU=t=>!LHe.test(t),PHe=/[A-Za-z_$\xA0-\uFFFF]/,NHe=/[\.\?\w$\xA0-\uFFFF]/,FHe=/\s+[.[]\s*|\s*[.[]\s+/g,DHe=t=>{t=t.trim().replace(FHe,o=>o.trim());let e=0,i=[],r=0,s=0,n=null;for(let o=0;o<t.length;o++){const a=t.charAt(o);switch(e){case 0:if(a==="[")i.push(e),e=1,r++;else if(a==="(")i.push(e),e=2,s++;else if(!(o===0?PHe:NHe).test(a))return!1;break;case 1:a==="'"||a==='"'||a==="`"?(i.push(e),e=3,n=a):a==="["?r++:a==="]"&&(--r||(e=i.pop()));break;case 2:if(a==="'"||a==='"'||a==="`")i.push(e),e=3,n=a;else if(a==="(")s++;else if(a===")"){if(o===t.length-1)return!1;--s||(e=i.pop())}break;case 3:a===n&&(e=i.pop(),n=null);break}}return!r&&!s},sde=DHe;function nde(t,e,i){const s={source:t.source.slice(e,e+i),start:Q5(t.start,t.source,e),end:t.end};return i!=null&&(s.end=Q5(t.start,t.source,e+i)),s}function Q5(t,e,i=e.length){return X5(Bi({},t),e,i)}function X5(t,e,i=e.length){let r=0,s=-1;for(let n=0;n<i;n++)e.charCodeAt(n)===10&&(r++,s=n);return t.offset+=i,t.line+=r,t.column=s===-1?t.column+i:i-s,t}function hu(t,e,i=!1){for(let r=0;r<t.props.length;r++){const s=t.props[r];if(s.type===7&&(i||s.exp)&&(Ei(e)?s.name===e:e.test(s.name)))return s}}function v$(t,e,i=!1,r=!1){for(let s=0;s<t.props.length;s++){const n=t.props[s];if(n.type===6){if(i)continue;if(n.name===e&&(n.value||r))return n}else if(n.name==="bind"&&(n.exp||r)&&r0(n.arg,e))return n}}function r0(t,e){return!!(t&&Ca(t)&&t.content===e)}function jHe(t){return t.props.some(e=>e.type===7&&e.name==="bind"&&(!e.arg||e.arg.type!==4||!e.arg.isStatic))}function lk(t){return t.type===5||t.type===2}function UHe(t){return t.type===7&&t.name==="slot"}function e4(t){return t.type===1&&t.tagType===3}function t4(t){return t.type===1&&t.tagType===2}const VHe=new Set([h3,wE]);function ode(t,e=[]){if(t&&!Ei(t)&&t.type===14){const i=t.callee;if(!Ei(i)&&VHe.has(i))return ode(t.arguments[0],e.concat(t))}return[t,e]}function i4(t,e,i){let r,s=t.type===13?t.props:t.arguments[2],n=[],o;if(s&&!Ei(s)&&s.type===14){const a=ode(s);s=a[0],n=a[1],o=n[n.length-1]}if(s==null||Ei(s))r=mu([e]);else if(s.type===14){const a=s.arguments[0];!Ei(a)&&a.type===15?lZ(e,a)||a.properties.unshift(e):s.callee===aU?r=qs(i.helper(Y5),[mu([e]),s]):s.arguments.unshift(mu([e])),!r&&(r=s)}else s.type===15?(lZ(e,s)||s.properties.unshift(e),r=s):(r=qs(i.helper(Y5),[mu([e]),s]),o&&o.callee===wE&&(o=n[n.length-2]));t.type===13?o?o.arguments[0]=r:t.props=r:o?o.arguments[0]=r:t.arguments[2]=r}function lZ(t,e){let i=!1;if(t.key.type===4){const r=t.key.content;i=e.properties.some(s=>s.key.type===4&&s.key.content===r)}return i}function p3(t,e){return`_${e}_${t.replace(/[^\w]/g,(i,r)=>i==="-"?"_":t.charCodeAt(r).toString())}`}function BHe(t){return t.type===14&&t.callee===uU?t.arguments[1].returns:t}function uZ(t,e){const i=e.options?e.options.compatConfig:e.compatConfig,r=i&&i[t];return t==="MODE"?r||3:r}function E0(t,e){const i=uZ("MODE",e),r=uZ(t,e);return i===3?r===!0:r!==!1}function f3(t,e,i,...r){return E0(t,e)}const zHe=/&(gt|lt|amp|apos|quot);/g,GHe={gt:">",lt:"<",amp:"&",apos:"'",quot:'"'},cZ={delimiters:["{{","}}"],getNamespace:()=>0,getTextMode:()=>0,isVoidTag:nA,isPreTag:nA,isCustomElement:nA,decodeEntities:t=>t.replace(zHe,(e,i)=>GHe[i]),onError:Zj,onWarn:Zhe,comments:!1};function qHe(t,e={}){const i=HHe(t,e),r=Ol(i);return OHe(dU(i,0,[]),Tu(i,r))}function HHe(t,e){const i=Bi({},cZ);let r;for(r in e)i[r]=e[r]===void 0?cZ[r]:e[r];return{options:i,column:1,line:1,offset:0,originalSource:t,source:t,inPre:!1,inVPre:!1,onWarn:i.onWarn}}function dU(t,e,i){const r=b$(i),s=r?r.ns:0,n=[];for(;!tWe(t,e,i);){const a=t.source;let l;if(e===0||e===1){if(!t.inVPre&&Eo(a,t.options.delimiters[0]))l=XHe(t,e);else if(e===0&&a[0]==="<")if(a.length===1)hr(t,5,1);else if(a[1]==="!")Eo(a,"<!--")?l=JHe(t):Eo(a,"<!DOCTYPE")?l=r2(t):Eo(a,"<![CDATA[")?s!==0?l=WHe(t,i):(hr(t,1),l=r2(t)):(hr(t,11),l=r2(t));else if(a[1]==="/")if(a.length===2)hr(t,5,2);else if(a[2]===">"){hr(t,14,2),yn(t,3);continue}else if(/[a-z]/i.test(a[2])){hr(t,23),eF(t,r4.End,r);continue}else hr(t,12,2),l=r2(t);else/[a-z]/i.test(a[1])?(l=ZHe(t,i),E0("COMPILER_NATIVE_TEMPLATE",t)&&l&&l.tag==="template"&&!l.props.some(u=>u.type===7&&ade(u.name))&&(l=l.children)):a[1]==="?"?(hr(t,21,1),l=r2(t)):hr(t,12,1)}if(l||(l=eWe(t,e)),Rt(l))for(let u=0;u<l.length;u++)hZ(n,l[u]);else hZ(n,l)}let o=!1;if(e!==2&&e!==1){const a=t.options.whitespace!=="preserve";for(let l=0;l<n.length;l++){const u=n[l];if(u.type===2)if(t.inPre)u.content=u.content.replace(/\r\n/g,`
`);else if(/[^\t\r\n\f ]/.test(u.content))a&&(u.content=u.content.replace(/[\t\r\n\f ]+/g," "));else{const c=n[l-1],d=n[l+1];!c||!d||a&&(c.type===3&&d.type===3||c.type===3&&d.type===1||c.type===1&&d.type===3||c.type===1&&d.type===1&&/[\r\n]/.test(u.content))?(o=!0,n[l]=null):u.content=" "}else u.type===3&&!t.options.comments&&(o=!0,n[l]=null)}if(t.inPre&&r&&t.options.isPreTag(r.tag)){const l=n[0];l&&l.type===2&&(l.content=l.content.replace(/^\r?\n/,""))}}return o?n.filter(Boolean):n}function hZ(t,e){if(e.type===2){const i=b$(t);if(i&&i.type===2&&i.loc.end.offset===e.loc.start.offset){i.content+=e.content,i.loc.end=e.loc.end,i.loc.source+=e.loc.source;return}}t.push(e)}function WHe(t,e){yn(t,9);const i=dU(t,3,e);return t.source.length===0?hr(t,6):yn(t,3),i}function JHe(t){const e=Ol(t);let i;const r=/--(\!)?>/.exec(t.source);if(!r)i=t.source.slice(4),yn(t,t.source.length),hr(t,7);else{r.index<=3&&hr(t,0),r[1]&&hr(t,10),i=t.source.slice(4,r.index);const s=t.source.slice(0,r.index);let n=1,o=0;for(;(o=s.indexOf("<!--",n))!==-1;)yn(t,o-n+1),o+4<s.length&&hr(t,16),n=o+1;yn(t,r.index+r[0].length-n+1)}return{type:3,content:i,loc:Tu(t,e)}}function r2(t){const e=Ol(t),i=t.source[1]==="?"?1:2;let r;const s=t.source.indexOf(">");return s===-1?(r=t.source.slice(i),yn(t,t.source.length)):(r=t.source.slice(i,s),yn(t,s+1)),{type:3,content:r,loc:Tu(t,e)}}function ZHe(t,e){const i=t.inPre,r=t.inVPre,s=b$(e),n=eF(t,r4.Start,s),o=t.inPre&&!i,a=t.inVPre&&!r;if(n.isSelfClosing||t.options.isVoidTag(n.tag))return o&&(t.inPre=!1),a&&(t.inVPre=!1),n;e.push(n);const l=t.options.getTextMode(n,s),u=dU(t,l,e);e.pop();{const c=n.props.find(d=>d.type===6&&d.name==="inline-template");if(c&&f3("COMPILER_INLINE_TEMPLATE",t,c.loc)){const d=Tu(t,n.loc.end);c.value={type:2,content:d.source,loc:d}}}if(n.children=u,tF(t.source,n.tag))eF(t,r4.End,s);else if(hr(t,24,0,n.loc.start),t.source.length===0&&n.tag.toLowerCase()==="script"){const c=u[0];c&&Eo(c.loc.source,"<!--")&&hr(t,8)}return n.loc=Tu(t,n.loc.start),o&&(t.inPre=!1),a&&(t.inVPre=!1),n}var r4=(t=>(t[t.Start=0]="Start",t[t.End=1]="End",t))(r4||{});const ade=Ha("if,else,else-if,for,slot");function eF(t,e,i){const r=Ol(t),s=/^<\/?([a-z][^\t\r\n\f />]*)/i.exec(t.source),n=s[1],o=t.options.getNamespace(n,i);yn(t,s[0].length),m3(t);const a=Ol(t),l=t.source;t.options.isPreTag(n)&&(t.inPre=!0);let u=dZ(t,e);e===0&&!t.inVPre&&u.some(f=>f.type===7&&f.name==="pre")&&(t.inVPre=!0,Bi(t,a),t.source=l,u=dZ(t,e).filter(f=>f.name!=="v-pre"));let c=!1;if(t.source.length===0?hr(t,9):(c=Eo(t.source,"/>"),e===1&&c&&hr(t,4),yn(t,c?2:1)),e===1)return;let d=0;return t.inVPre||(n==="slot"?d=2:n==="template"?u.some(f=>f.type===7&&ade(f.name))&&(d=3):YHe(n,u,t)&&(d=1)),{type:1,ns:o,tag:n,tagType:d,props:u,isSelfClosing:c,children:[],loc:Tu(t,r),codegenNode:void 0}}function YHe(t,e,i){const r=i.options;if(r.isCustomElement(t))return!1;if(t==="component"||/^[A-Z]/.test(t)||rde(t)||r.isBuiltInComponent&&r.isBuiltInComponent(t)||r.isNativeTag&&!r.isNativeTag(t))return!0;for(let s=0;s<e.length;s++){const n=e[s];if(n.type===6){if(n.name==="is"&&n.value){if(n.value.content.startsWith("vue:"))return!0;if(f3("COMPILER_IS_ON_ELEMENT",i,n.loc))return!0}}else{if(n.name==="is")return!0;if(n.name==="bind"&&r0(n.arg,"is")&&f3("COMPILER_IS_ON_ELEMENT",i,n.loc))return!0}}}function dZ(t,e){const i=[],r=new Set;for(;t.source.length>0&&!Eo(t.source,">")&&!Eo(t.source,"/>");){if(Eo(t.source,"/")){hr(t,22),yn(t,1),m3(t);continue}e===1&&hr(t,3);const s=KHe(t,r);s.type===6&&s.value&&s.name==="class"&&(s.value.content=s.value.content.replace(/\s+/g," ").trim()),e===0&&i.push(s),/^[^\t\r\n\f />]/.test(t.source)&&hr(t,15),m3(t)}return i}function KHe(t,e){var i;const r=Ol(t),n=/^[^\t\r\n\f />][^\t\r\n\f />=]*/.exec(t.source)[0];e.has(n)&&hr(t,2),e.add(n),n[0]==="="&&hr(t,19);{const l=/["'<]/g;let u;for(;u=l.exec(n);)hr(t,17,u.index)}yn(t,n.length);let o;/^[\t\r\n\f ]*=/.test(t.source)&&(m3(t),yn(t,1),m3(t),o=QHe(t),o||hr(t,13));const a=Tu(t,r);if(!t.inVPre&&/^(v-[A-Za-z0-9-]|:|\.|@|#)/.test(n)){const l=/(?:^v-([a-z0-9-]+))?(?:(?::|^\.|^@|^#)(\[[^\]]+\]|[^\.]+))?(.+)?$/i.exec(n);let u=Eo(n,"."),c=l[1]||(u||Eo(n,":")?"bind":Eo(n,"@")?"on":"slot"),d;if(l[2]){const m=c==="slot",g=n.lastIndexOf(l[2],n.length-(((i=l[3])==null?void 0:i.length)||0)),v=Tu(t,pZ(t,r,g),pZ(t,r,g+l[2].length+(m&&l[3]||"").length));let b=l[2],_=!0;b.startsWith("[")?(_=!1,b.endsWith("]")?b=b.slice(1,b.length-1):(hr(t,27),b=b.slice(1))):m&&(b+=l[3]||""),d={type:4,content:b,isStatic:_,constType:_?3:0,loc:v}}if(o&&o.isQuoted){const m=o.loc;m.start.offset++,m.start.column++,m.end=Q5(m.start,o.content),m.source=m.source.slice(1,-1)}const f=l[3]?l[3].slice(1).split("."):[];return u&&f.push("prop"),c==="bind"&&d&&f.includes("sync")&&f3("COMPILER_V_BIND_SYNC",t,a,d.loc.source)&&(c="model",f.splice(f.indexOf("sync"),1)),{type:7,name:c,exp:o&&{type:4,content:o.content,isStatic:!1,constType:0,loc:o.loc},arg:d,modifiers:f,loc:a}}return!t.inVPre&&Eo(n,"v-")&&hr(t,26),{type:6,name:n,value:o&&{type:2,content:o.content,loc:o.loc},loc:a}}function QHe(t){const e=Ol(t);let i;const r=t.source[0],s=r==='"'||r==="'";if(s){yn(t,1);const n=t.source.indexOf(r);n===-1?i=rS(t,t.source.length,4):(i=rS(t,n,4),yn(t,1))}else{const n=/^[^\t\r\n\f >]+/.exec(t.source);if(!n)return;const o=/["'<=`]/g;let a;for(;a=o.exec(n[0]);)hr(t,18,a.index);i=rS(t,n[0].length,4)}return{content:i,isQuoted:s,loc:Tu(t,e)}}function XHe(t,e){const[i,r]=t.options.delimiters,s=t.source.indexOf(r,i.length);if(s===-1){hr(t,25);return}const n=Ol(t);yn(t,i.length);const o=Ol(t),a=Ol(t),l=s-i.length,u=t.source.slice(0,l),c=rS(t,l,e),d=c.trim(),f=c.indexOf(d);f>0&&X5(o,u,f);const m=l-(c.length-d.length-f);return X5(a,u,m),yn(t,r.length),{type:5,content:{type:4,isStatic:!1,constType:0,content:d,loc:Tu(t,o,a)},loc:Tu(t,n)}}function eWe(t,e){const i=e===3?["]]>"]:["<",t.options.delimiters[0]];let r=t.source.length;for(let o=0;o<i.length;o++){const a=t.source.indexOf(i[o],1);a!==-1&&r>a&&(r=a)}const s=Ol(t);return{type:2,content:rS(t,r,e),loc:Tu(t,s)}}function rS(t,e,i){const r=t.source.slice(0,e);return yn(t,e),i===2||i===3||!r.includes("&")?r:t.options.decodeEntities(r,i===4)}function Ol(t){const{column:e,line:i,offset:r}=t;return{column:e,line:i,offset:r}}function Tu(t,e,i){return i=i||Ol(t),{start:e,end:i,source:t.originalSource.slice(e.offset,i.offset)}}function b$(t){return t[t.length-1]}function Eo(t,e){return t.startsWith(e)}function yn(t,e){const{source:i}=t;X5(t,i,e),t.source=i.slice(e)}function m3(t){const e=/^[\t\r\n\f ]+/.exec(t.source);e&&yn(t,e[0].length)}function pZ(t,e,i){return Q5(e,t.originalSource.slice(e.offset,i),i)}function hr(t,e,i,r=Ol(t)){i&&(r.offset+=i,r.column+=i),t.options.onError(Yr(e,{start:r,end:r,source:""}))}function tWe(t,e,i){const r=t.source;switch(e){case 0:if(Eo(r,"</")){for(let s=i.length-1;s>=0;--s)if(tF(r,i[s].tag))return!0}break;case 1:case 2:{const s=b$(i);if(s&&tF(r,s.tag))return!0;break}case 3:if(Eo(r,"]]>"))return!0;break}return!r}function tF(t,e){return Eo(t,"</")&&t.slice(2,2+e.length).toLowerCase()===e.toLowerCase()&&/[\t\r\n\f />]/.test(t[2+e.length]||">")}function iWe(t,e){lA(t,e,lde(t,t.children[0]))}function lde(t,e){const{children:i}=t;return i.length===1&&e.type===1&&!t4(e)}function lA(t,e,i=!1){const{children:r}=t,s=r.length;let n=0;for(let o=0;o<r.length;o++){const a=r[o];if(a.type===1&&a.tagType===0){const l=i?0:yu(a,e);if(l>0){if(l>=2){a.codegenNode.patchFlag="-1",a.codegenNode=e.hoist(a.codegenNode),n++;continue}}else{const u=a.codegenNode;if(u.type===13){const c=dde(u);if((!c||c===512||c===1)&&cde(a,e)>=2){const d=hde(a);d&&(u.props=e.hoist(d))}u.dynamicProps&&(u.dynamicProps=e.hoist(u.dynamicProps))}}}if(a.type===1){const l=a.tagType===1;l&&e.scopes.vSlot++,lA(a,e),l&&e.scopes.vSlot--}else if(a.type===11)lA(a,e,a.children.length===1);else if(a.type===9)for(let l=0;l<a.branches.length;l++)lA(a.branches[l],e,a.branches[l].children.length===1)}n&&e.transformHoist&&e.transformHoist(r,e,t),n&&n===s&&t.type===1&&t.tagType===0&&t.codegenNode&&t.codegenNode.type===13&&Rt(t.codegenNode.children)&&(t.codegenNode.children=e.hoist(_E(t.codegenNode.children)))}function yu(t,e){const{constantCache:i}=e;switch(t.type){case 1:if(t.tagType!==0)return 0;const r=i.get(t);if(r!==void 0)return r;const s=t.codegenNode;if(s.type!==13||s.isBlock&&t.tag!=="svg"&&t.tag!=="foreignObject")return 0;if(dde(s))return i.set(t,0),0;{let a=3;const l=cde(t,e);if(l===0)return i.set(t,0),0;l<a&&(a=l);for(let u=0;u<t.children.length;u++){const c=yu(t.children[u],e);if(c===0)return i.set(t,0),0;c<a&&(a=c)}if(a>1)for(let u=0;u<t.props.length;u++){const c=t.props[u];if(c.type===7&&c.name==="bind"&&c.exp){const d=yu(c.exp,e);if(d===0)return i.set(t,0),0;d<a&&(a=d)}}if(s.isBlock){for(let u=0;u<t.props.length;u++)if(t.props[u].type===7)return i.set(t,0),0;e.removeHelper(Q0),e.removeHelper(bw(e.inSSR,s.isComponent)),s.isBlock=!1,e.helper(vw(e.inSSR,s.isComponent))}return i.set(t,a),a}case 2:case 3:return 3;case 9:case 11:case 10:return 0;case 5:case 12:return yu(t.content,e);case 4:return t.constType;case 8:let o=3;for(let a=0;a<t.children.length;a++){const l=t.children[a];if(Ei(l)||Lm(l))continue;const u=yu(l,e);if(u===0)return 0;u<o&&(o=u)}return o;default:return 0}}const rWe=new Set([nU,oU,h3,wE]);function ude(t,e){if(t.type===14&&!Ei(t.callee)&&rWe.has(t.callee)){const i=t.arguments[0];if(i.type===4)return yu(i,e);if(i.type===14)return ude(i,e)}return 0}function cde(t,e){let i=3;const r=hde(t);if(r&&r.type===15){const{properties:s}=r;for(let n=0;n<s.length;n++){const{key:o,value:a}=s[n],l=yu(o,e);if(l===0)return l;l<i&&(i=l);let u;if(a.type===4?u=yu(a,e):a.type===14?u=ude(a,e):u=0,u===0)return u;u<i&&(i=u)}}return i}function hde(t){const e=t.codegenNode;if(e.type===13)return e.props}function dde(t){const e=t.patchFlag;return e?parseInt(e,10):void 0}function sWe(t,{filename:e="",prefixIdentifiers:i=!1,hoistStatic:r=!1,cacheHandlers:s=!1,nodeTransforms:n=[],directiveTransforms:o={},transformHoist:a=null,isBuiltInComponent:l=Qo,isCustomElement:u=Qo,expressionPlugins:c=[],scopeId:d=null,slotted:f=!0,ssr:m=!1,inSSR:g=!1,ssrCssVars:v="",bindingMetadata:b=dr,inline:_=!1,isTS:S=!1,onError:M=Zj,onWarn:x=Zhe,compatConfig:T}){const I=e.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),$={selfName:I&&ey(Ps(I[1])),prefixIdentifiers:i,hoistStatic:r,cacheHandlers:s,nodeTransforms:n,directiveTransforms:o,transformHoist:a,isBuiltInComponent:l,isCustomElement:u,expressionPlugins:c,scopeId:d,slotted:f,ssr:m,inSSR:g,ssrCssVars:v,bindingMetadata:b,inline:_,isTS:S,onError:M,onWarn:x,compatConfig:T,root:t,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],constantCache:new Map,temps:0,cached:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,currentNode:t,childIndex:0,inVOnce:!1,helper(L){const B=$.helpers.get(L)||0;return $.helpers.set(L,B+1),L},removeHelper(L){const B=$.helpers.get(L);if(B){const z=B-1;z?$.helpers.set(L,z):$.helpers.delete(L)}},helperString(L){return`_${yw[$.helper(L)]}`},replaceNode(L){$.parent.children[$.childIndex]=$.currentNode=L},removeNode(L){const B=$.parent.children,z=L?B.indexOf(L):$.currentNode?$.childIndex:-1;!L||L===$.currentNode?($.currentNode=null,$.onNodeRemoved()):$.childIndex>z&&($.childIndex--,$.onNodeRemoved()),$.parent.children.splice(z,1)},onNodeRemoved:()=>{},addIdentifiers(L){},removeIdentifiers(L){},hoist(L){Ei(L)&&(L=Oi(L)),$.hoists.push(L);const B=Oi(`_hoisted_${$.hoists.length}`,!1,L.loc,2);return B.hoisted=L,B},cache(L,B=!1){return RHe($.cached++,L,B)}};return $.filters=new Set,$}function nWe(t,e){const i=sWe(t,e);w$(t,i),e.hoistStatic&&iWe(t,i),e.ssr||oWe(t,i),t.helpers=new Set([...i.helpers.keys()]),t.components=[...i.components],t.directives=[...i.directives],t.imports=i.imports,t.hoists=i.hoists,t.temps=i.temps,t.cached=i.cached,t.filters=[...i.filters]}function oWe(t,e){const{helper:i}=e,{children:r}=t;if(r.length===1){const s=r[0];if(lde(t,s)&&s.codegenNode){const n=s.codegenNode;n.type===13&&cU(n,e),t.codegenNode=n}else t.codegenNode=s}else if(r.length>1){let s=64;t.codegenNode=d3(e,i(c3),void 0,t.children,s+"",void 0,void 0,!0,void 0,!1)}}function aWe(t,e){let i=0;const r=()=>{i--};for(;i<t.children.length;i++){const s=t.children[i];Ei(s)||(e.parent=t,e.childIndex=i,e.onNodeRemoved=r,w$(s,e))}}function w$(t,e){e.currentNode=t;const{nodeTransforms:i}=e,r=[];for(let n=0;n<i.length;n++){const o=i[n](t,e);if(o&&(Rt(o)?r.push(...o):r.push(o)),e.currentNode)t=e.currentNode;else return}switch(t.type){case 3:e.ssr||e.helper(bE);break;case 5:e.ssr||e.helper(g$);break;case 9:for(let n=0;n<t.branches.length;n++)w$(t.branches[n],e);break;case 10:case 11:case 1:case 0:aWe(t,e);break}e.currentNode=t;let s=r.length;for(;s--;)r[s]()}function pde(t,e){const i=Ei(t)?r=>r===t:r=>t.test(r);return(r,s)=>{if(r.type===1){const{props:n}=r;if(r.tagType===3&&n.some(UHe))return;const o=[];for(let a=0;a<n.length;a++){const l=n[a];if(l.type===7&&i(l.name)){n.splice(a,1),a--;const u=e(r,l,s);u&&o.push(u)}}return o}}}const _$="/*#__PURE__*/",fde=t=>`${yw[t]}: _${yw[t]}`;function fZ(t,{mode:e="function",prefixIdentifiers:i=e==="module",sourceMap:r=!1,filename:s="template.vue.html",scopeId:n=null,optimizeImports:o=!1,runtimeGlobalName:a="Vue",runtimeModuleName:l="vue",ssrRuntimeModuleName:u="vue/server-renderer",ssr:c=!1,isTS:d=!1,inSSR:f=!1}){const m={mode:e,prefixIdentifiers:i,sourceMap:r,filename:s,scopeId:n,optimizeImports:o,runtimeGlobalName:a,runtimeModuleName:l,ssrRuntimeModuleName:u,ssr:c,isTS:d,inSSR:f,source:t.loc.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper(v){return`_${yw[v]}`},push(v,b){m.code+=v},indent(){g(++m.indentLevel)},deindent(v=!1){v?--m.indentLevel:g(--m.indentLevel)},newline(){g(m.indentLevel)}};function g(v){m.push(`
`+"  ".repeat(v))}return m}function lWe(t,e={}){const i=fZ(t,e);e.onContextCreated&&e.onContextCreated(i);const{mode:r,push:s,prefixIdentifiers:n,indent:o,deindent:a,newline:l,scopeId:u,ssr:c}=i,d=Array.from(t.helpers),f=d.length>0,m=!n&&r!=="module",g=!1,v=g?fZ(t,e):i;uWe(t,v);const b=c?"ssrRender":"render",S=(c?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"]).join(", ");if(s(`function ${b}(${S}) {`),o(),m&&(s("with (_ctx) {"),o(),f&&(s(`const { ${d.map(fde).join(", ")} } = _Vue`),s(`
`),l())),t.components.length&&(uk(t.components,"component",i),(t.directives.length||t.temps>0)&&l()),t.directives.length&&(uk(t.directives,"directive",i),t.temps>0&&l()),t.filters&&t.filters.length&&(l(),uk(t.filters,"filter",i),l()),t.temps>0){s("let ");for(let M=0;M<t.temps;M++)s(`${M>0?", ":""}_temp${M}`)}return(t.components.length||t.directives.length||t.temps)&&(s(`
`),l()),c||s("return "),t.codegenNode?To(t.codegenNode,i):s("null"),m&&(a(),s("}")),a(),s("}"),{ast:t,code:i.code,preamble:g?v.code:"",map:i.map?i.map.toJSON():void 0}}function uWe(t,e){const{ssr:i,prefixIdentifiers:r,push:s,newline:n,runtimeModuleName:o,runtimeGlobalName:a,ssrRuntimeModuleName:l}=e,u=a,c=Array.from(t.helpers);if(c.length>0&&(s(`const _Vue = ${u}
`),t.hoists.length)){const d=[Kj,Qj,bE,Xj,Xhe].filter(f=>c.includes(f)).map(fde).join(", ");s(`const { ${d} } = _Vue
`)}cWe(t.hoists,e),n(),s("return ")}function uk(t,e,{helper:i,push:r,newline:s,isTS:n}){const o=i(e==="filter"?iU:e==="component"?eU:tU);for(let a=0;a<t.length;a++){let l=t[a];const u=l.endsWith("__self");u&&(l=l.slice(0,-6)),r(`const ${p3(l,e)} = ${o}(${JSON.stringify(l)}${u?", true":""})${n?"!":""}`),a<t.length-1&&s()}}function cWe(t,e){if(!t.length)return;e.pure=!0;const{push:i,newline:r,helper:s,scopeId:n,mode:o}=e;r();for(let a=0;a<t.length;a++){const l=t[a];l&&(i(`const _hoisted_${a+1} = `),To(l,e),r())}e.pure=!1}function pU(t,e){const i=t.length>3||!1;e.push("["),i&&e.indent(),xE(t,e,i),i&&e.deindent(),e.push("]")}function xE(t,e,i=!1,r=!0){const{push:s,newline:n}=e;for(let o=0;o<t.length;o++){const a=t[o];Ei(a)?s(a):Rt(a)?pU(a,e):To(a,e),o<t.length-1&&(i?(r&&s(","),n()):r&&s(", "))}}function To(t,e){if(Ei(t)){e.push(t);return}if(Lm(t)){e.push(e.helper(t));return}switch(t.type){case 1:case 9:case 11:To(t.codegenNode,e);break;case 2:hWe(t,e);break;case 4:mde(t,e);break;case 5:dWe(t,e);break;case 12:To(t.codegenNode,e);break;case 8:yde(t,e);break;case 3:fWe(t,e);break;case 13:mWe(t,e);break;case 14:gWe(t,e);break;case 15:vWe(t,e);break;case 17:bWe(t,e);break;case 18:wWe(t,e);break;case 19:_We(t,e);break;case 20:xWe(t,e);break;case 21:xE(t.body,e,!0,!1);break}}function hWe(t,e){e.push(JSON.stringify(t.content),t)}function mde(t,e){const{content:i,isStatic:r}=t;e.push(r?JSON.stringify(i):i,t)}function dWe(t,e){const{push:i,helper:r,pure:s}=e;s&&i(_$),i(`${r(g$)}(`),To(t.content,e),i(")")}function yde(t,e){for(let i=0;i<t.children.length;i++){const r=t.children[i];Ei(r)?e.push(r):To(r,e)}}function pWe(t,e){const{push:i}=e;if(t.type===8)i("["),yde(t,e),i("]");else if(t.isStatic){const r=hU(t.content)?t.content:JSON.stringify(t.content);i(r,t)}else i(`[${t.content}]`,t)}function fWe(t,e){const{push:i,helper:r,pure:s}=e;s&&i(_$),i(`${r(bE)}(${JSON.stringify(t.content)})`,t)}function mWe(t,e){const{push:i,helper:r,pure:s}=e,{tag:n,props:o,children:a,patchFlag:l,dynamicProps:u,directives:c,isBlock:d,disableTracking:f,isComponent:m}=t;c&&i(r(rU)+"("),d&&i(`(${r(Q0)}(${f?"true":""}), `),s&&i(_$);const g=d?bw(e.inSSR,m):vw(e.inSSR,m);i(r(g)+"(",t),xE(yWe([n,o,a,l,u]),e),i(")"),d&&i(")"),c&&(i(", "),To(c,e),i(")"))}function yWe(t){let e=t.length;for(;e--&&t[e]==null;);return t.slice(0,e+1).map(i=>i||"null")}function gWe(t,e){const{push:i,helper:r,pure:s}=e,n=Ei(t.callee)?t.callee:r(t.callee);s&&i(_$),i(n+"(",t),xE(t.arguments,e),i(")")}function vWe(t,e){const{push:i,indent:r,deindent:s,newline:n}=e,{properties:o}=t;if(!o.length){i("{}",t);return}const a=o.length>1||!1;i(a?"{":"{ "),a&&r();for(let l=0;l<o.length;l++){const{key:u,value:c}=o[l];pWe(u,e),i(": "),To(c,e),l<o.length-1&&(i(","),n())}a&&s(),i(a?"}":" }")}function bWe(t,e){pU(t.elements,e)}function wWe(t,e){const{push:i,indent:r,deindent:s}=e,{params:n,returns:o,body:a,newline:l,isSlot:u}=t;u&&i(`_${yw[lU]}(`),i("(",t),Rt(n)?xE(n,e):n&&To(n,e),i(") => "),(l||a)&&(i("{"),r()),o?(l&&i("return "),Rt(o)?pU(o,e):To(o,e)):a&&To(a,e),(l||a)&&(s(),i("}")),u&&(t.isNonScopedSlot&&i(", undefined, true"),i(")"))}function _We(t,e){const{test:i,consequent:r,alternate:s,newline:n}=t,{push:o,indent:a,deindent:l,newline:u}=e;if(i.type===4){const d=!hU(i.content);d&&o("("),mde(i,e),d&&o(")")}else o("("),To(i,e),o(")");n&&a(),e.indentLevel++,n||o(" "),o("? "),To(r,e),e.indentLevel--,n&&u(),n||o(" "),o(": ");const c=s.type===19;c||e.indentLevel++,To(s,e),c||e.indentLevel--,n&&l(!0)}function xWe(t,e){const{push:i,helper:r,indent:s,deindent:n,newline:o}=e;i(`_cache[${t.index}] || (`),t.isVNode&&(s(),i(`${r(K5)}(-1),`),o()),i(`_cache[${t.index}] = `),To(t.value,e),t.isVNode&&(i(","),o(),i(`${r(K5)}(1),`),o(),i(`_cache[${t.index}]`),n()),i(")")}new RegExp("\\b"+"arguments,await,break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,let,new,return,super,switch,throw,try,var,void,while,with,yield".split(",").join("\\b|\\b")+"\\b");const SWe=pde(/^(if|else|else-if)$/,(t,e,i)=>EWe(t,e,i,(r,s,n)=>{const o=i.parent.children;let a=o.indexOf(r),l=0;for(;a-->=0;){const u=o[a];u&&u.type===9&&(l+=u.branches.length)}return()=>{if(n)r.codegenNode=yZ(s,l,i);else{const u=TWe(r.codegenNode);u.alternate=yZ(s,l+r.branches.length-1,i)}}}));function EWe(t,e,i,r){if(e.name!=="else"&&(!e.exp||!e.exp.content.trim())){const s=e.exp?e.exp.loc:t.loc;i.onError(Yr(28,e.loc)),e.exp=Oi("true",!1,s)}if(e.name==="if"){const s=mZ(t,e),n={type:9,loc:t.loc,branches:[s]};if(i.replaceNode(n),r)return r(n,s,!0)}else{const s=i.parent.children;let n=s.indexOf(t);for(;n-->=-1;){const o=s[n];if(o&&o.type===3){i.removeNode(o);continue}if(o&&o.type===2&&!o.content.trim().length){i.removeNode(o);continue}if(o&&o.type===9){e.name==="else-if"&&o.branches[o.branches.length-1].condition===void 0&&i.onError(Yr(30,t.loc)),i.removeNode();const a=mZ(t,e);o.branches.push(a);const l=r&&r(o,a,!1);w$(a,i),l&&l(),i.currentNode=null}else i.onError(Yr(30,t.loc));break}}}function mZ(t,e){const i=t.tagType===3;return{type:10,loc:t.loc,condition:e.name==="else"?void 0:e.exp,children:i&&!hu(t,"for")?t.children:[t],userKey:v$(t,"key"),isTemplateIf:i}}function yZ(t,e,i){return t.condition?XN(t.condition,gZ(t,e,i),qs(i.helper(bE),['""',"true"])):gZ(t,e,i)}function gZ(t,e,i){const{helper:r}=i,s=ys("key",Oi(`${e}`,!1,Dl,2)),{children:n}=t,o=n[0];if(n.length!==1||o.type!==1)if(n.length===1&&o.type===11){const l=o.codegenNode;return i4(l,s,i),l}else{let l=64;return d3(i,r(c3),mu([s]),n,l+"",void 0,void 0,!0,!1,!1,t.loc)}else{const l=o.codegenNode,u=BHe(l);return u.type===13&&cU(u,i),i4(u,s,i),l}}function TWe(t){for(;;)if(t.type===19)if(t.alternate.type===19)t=t.alternate;else return t;else t.type===20&&(t=t.value)}const IWe=pde("for",(t,e,i)=>{const{helper:r,removeHelper:s}=i;return MWe(t,e,i,n=>{const o=qs(r(sU),[n.source]),a=e4(t),l=hu(t,"memo"),u=v$(t,"key"),c=u&&(u.type===6?Oi(u.value.content,!0):u.exp),d=u?ys("key",c):null,f=n.source.type===4&&n.source.constType>0,m=f?64:u?128:256;return n.codegenNode=d3(i,r(c3),void 0,o,m+"",void 0,void 0,!0,!f,!1,t.loc),()=>{let g;const{children:v}=n,b=v.length!==1||v[0].type!==1,_=t4(t)?t:a&&t.children.length===1&&t4(t.children[0])?t.children[0]:null;if(_?(g=_.codegenNode,a&&d&&i4(g,d,i)):b?g=d3(i,r(c3),d?mu([d]):void 0,t.children,"64",void 0,void 0,!0,void 0,!1):(g=v[0].codegenNode,a&&d&&i4(g,d,i),g.isBlock!==!f&&(g.isBlock?(s(Q0),s(bw(i.inSSR,g.isComponent))):s(vw(i.inSSR,g.isComponent))),g.isBlock=!f,g.isBlock?(r(Q0),r(bw(i.inSSR,g.isComponent))):r(vw(i.inSSR,g.isComponent))),l){const S=gw(iF(n.parseResult,[Oi("_cached")]));S.body=kHe([wc(["const _memo = (",l.exp,")"]),wc(["if (_cached",...c?[" && _cached.key === ",c]:[],` && ${i.helperString(ide)}(_cached, _memo)) return _cached`]),wc(["const _item = ",g]),Oi("_item.memo = _memo"),Oi("return _item")]),o.arguments.push(S,Oi("_cache"),Oi(String(i.cached++)))}else o.arguments.push(gw(iF(n.parseResult),g,!0))}})});function MWe(t,e,i,r){if(!e.exp){i.onError(Yr(31,e.loc));return}const s=gde(e.exp);if(!s){i.onError(Yr(32,e.loc));return}const{addIdentifiers:n,removeIdentifiers:o,scopes:a}=i,{source:l,value:u,key:c,index:d}=s,f={type:11,loc:e.loc,source:l,valueAlias:u,keyAlias:c,objectIndexAlias:d,parseResult:s,children:e4(t)?t.children:[t]};i.replaceNode(f),a.vFor++;const m=r&&r(f);return()=>{a.vFor--,m&&m()}}const AWe=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,vZ=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,CWe=/^\(|\)$/g;function gde(t,e){const i=t.loc,r=t.content,s=r.match(AWe);if(!s)return;const[,n,o]=s,a={source:cI(i,o.trim(),r.indexOf(o,n.length)),value:void 0,key:void 0,index:void 0};let l=n.trim().replace(CWe,"").trim();const u=n.indexOf(l),c=l.match(vZ);if(c){l=l.replace(vZ,"").trim();const d=c[1].trim();let f;if(d&&(f=r.indexOf(d,u+l.length),a.key=cI(i,d,f)),c[2]){const m=c[2].trim();m&&(a.index=cI(i,m,r.indexOf(m,a.key?f+d.length:u+l.length)))}}return l&&(a.value=cI(i,l,u)),a}function cI(t,e,i){return Oi(e,!1,nde(t,i,e.length))}function iF({value:t,key:e,index:i},r=[]){return $We([t,e,i,...r])}function $We(t){let e=t.length;for(;e--&&!t[e];);return t.slice(0,e+1).map((i,r)=>i||Oi("_".repeat(r+1),!1))}const bZ=Oi("undefined",!1),OWe=(t,e)=>{if(t.type===1&&(t.tagType===1||t.tagType===3)){const i=hu(t,"slot");if(i)return i.exp,e.scopes.vSlot++,()=>{e.scopes.vSlot--}}},RWe=(t,e,i)=>gw(t,e,!1,!0,e.length?e[0].loc:i);function kWe(t,e,i=RWe){e.helper(lU);const{children:r,loc:s}=t,n=[],o=[];let a=e.scopes.vSlot>0||e.scopes.vFor>0;const l=hu(t,"slot",!0);if(l){const{arg:b,exp:_}=l;b&&!Ca(b)&&(a=!0),n.push(ys(b||Oi("default",!0),i(_,r,s)))}let u=!1,c=!1;const d=[],f=new Set;let m=0;for(let b=0;b<r.length;b++){const _=r[b];let S;if(!e4(_)||!(S=hu(_,"slot",!0))){_.type!==3&&d.push(_);continue}if(l){e.onError(Yr(37,S.loc));break}u=!0;const{children:M,loc:x}=_,{arg:T=Oi("default",!0),exp:I,loc:$}=S;let L;Ca(T)?L=T?T.content:"default":a=!0;const B=i(I,M,x);let z,H,J;if(z=hu(_,"if"))a=!0,o.push(XN(z.exp,hI(T,B,m++),bZ));else if(H=hu(_,/^else(-if)?$/,!0)){let K=b,Q;for(;K--&&(Q=r[K],Q.type===3););if(Q&&e4(Q)&&hu(Q,"if")){r.splice(b,1),b--;let y=o[o.length-1];for(;y.alternate.type===19;)y=y.alternate;y.alternate=H.exp?XN(H.exp,hI(T,B,m++),bZ):hI(T,B,m++)}else e.onError(Yr(30,H.loc))}else if(J=hu(_,"for")){a=!0;const K=J.parseResult||gde(J.exp);K?o.push(qs(e.helper(sU),[K.source,gw(iF(K),hI(T,B),!0)])):e.onError(Yr(32,J.loc))}else{if(L){if(f.has(L)){e.onError(Yr(38,$));continue}f.add(L),L==="default"&&(c=!0)}n.push(ys(T,B))}}if(!l){const b=(_,S)=>{const M=i(_,S,s);return e.compatConfig&&(M.isNonScopedSlot=!0),ys("default",M)};u?d.length&&d.some(_=>vde(_))&&(c?e.onError(Yr(39,d[0].loc)):n.push(b(void 0,d))):n.push(b(void 0,r))}const g=a?2:uA(t.children)?3:1;let v=mu(n.concat(ys("_",Oi(g+"",!1))),s);return o.length&&(v=qs(e.helper(tde),[v,_E(o)])),{slots:v,hasDynamicSlots:a}}function hI(t,e,i){const r=[ys("name",t),ys("fn",e)];return i!=null&&r.push(ys("key",Oi(String(i),!0))),mu(r)}function uA(t){for(let e=0;e<t.length;e++){const i=t[e];switch(i.type){case 1:if(i.tagType===2||uA(i.children))return!0;break;case 9:if(uA(i.branches))return!0;break;case 10:case 11:if(uA(i.children))return!0;break}}return!1}function vde(t){return t.type!==2&&t.type!==12?!0:t.type===2?!!t.content.trim():vde(t.content)}const bde=new WeakMap,LWe=(t,e)=>function(){if(t=e.currentNode,!(t.type===1&&(t.tagType===0||t.tagType===1)))return;const{tag:r,props:s}=t,n=t.tagType===1;let o=n?PWe(t,e):`"${r}"`;const a=fr(o)&&o.callee===Z5;let l,u,c,d=0,f,m,g,v=a||o===iS||o===Yj||!n&&(r==="svg"||r==="foreignObject");if(s.length>0){const b=wde(t,e,void 0,n,a);l=b.props,d=b.patchFlag,m=b.dynamicPropNames;const _=b.directives;g=_&&_.length?_E(_.map(S=>FWe(S,e))):void 0,b.shouldUseBlock&&(v=!0)}if(t.children.length>0)if(o===J5&&(v=!0,d|=1024),n&&o!==iS&&o!==J5){const{slots:_,hasDynamicSlots:S}=kWe(t,e);u=_,S&&(d|=1024)}else if(t.children.length===1&&o!==iS){const _=t.children[0],S=_.type,M=S===5||S===8;M&&yu(_,e)===0&&(d|=1),M||S===2?u=_:u=t.children}else u=t.children;d!==0&&(c=String(d),m&&m.length&&(f=DWe(m))),t.codegenNode=d3(e,o,l,u,c,f,g,!!v,!1,n,t.loc)};function PWe(t,e,i=!1){let{tag:r}=t;const s=rF(r),n=v$(t,"is");if(n)if(s||E0("COMPILER_IS_ON_ELEMENT",e)){const l=n.type===6?n.value&&Oi(n.value.content,!0):n.exp;if(l)return qs(e.helper(Z5),[l])}else n.type===6&&n.value.content.startsWith("vue:")&&(r=n.value.content.slice(4));const o=!s&&hu(t,"is");if(o&&o.exp)return qs(e.helper(Z5),[o.exp]);const a=rde(r)||e.isBuiltInComponent(r);return a?(i||e.helper(a),a):(e.helper(eU),e.components.add(r),p3(r,"component"))}function wde(t,e,i=t.props,r,s,n=!1){const{tag:o,loc:a,children:l}=t;let u=[];const c=[],d=[],f=l.length>0;let m=!1,g=0,v=!1,b=!1,_=!1,S=!1,M=!1,x=!1;const T=[],I=B=>{u.length&&(c.push(mu(wZ(u),a)),u=[]),B&&c.push(B)},$=({key:B,value:z})=>{if(Ca(B)){const H=B.content,J=m1(H);if(J&&(!r||s)&&H.toLowerCase()!=="onclick"&&H!=="onUpdate:modelValue"&&!w0(H)&&(S=!0),J&&w0(H)&&(x=!0),z.type===20||(z.type===4||z.type===8)&&yu(z,e)>0)return;H==="ref"?v=!0:H==="class"?b=!0:H==="style"?_=!0:H!=="key"&&!T.includes(H)&&T.push(H),r&&(H==="class"||H==="style")&&!T.includes(H)&&T.push(H)}else M=!0};for(let B=0;B<i.length;B++){const z=i[B];if(z.type===6){const{loc:H,name:J,value:K}=z;let Q=!0;if(J==="ref"&&(v=!0,e.scopes.vFor>0&&u.push(ys(Oi("ref_for",!0),Oi("true")))),J==="is"&&(rF(o)||K&&K.content.startsWith("vue:")||E0("COMPILER_IS_ON_ELEMENT",e)))continue;u.push(ys(Oi(J,!0,nde(H,0,J.length)),Oi(K?K.content:"",Q,K?K.loc:H)))}else{const{name:H,arg:J,exp:K,loc:Q}=z,y=H==="bind",A=H==="on";if(H==="slot"){r||e.onError(Yr(40,Q));continue}if(H==="once"||H==="memo"||H==="is"||y&&r0(J,"is")&&(rF(o)||E0("COMPILER_IS_ON_ELEMENT",e))||A&&n)continue;if((y&&r0(J,"key")||A&&f&&r0(J,"vue:before-update"))&&(m=!0),y&&r0(J,"ref")&&e.scopes.vFor>0&&u.push(ys(Oi("ref_for",!0),Oi("true"))),!J&&(y||A)){if(M=!0,K)if(y){if(I(),E0("COMPILER_V_BIND_OBJECT_ORDER",e)){c.unshift(K);continue}c.push(K)}else I({type:14,loc:Q,callee:e.helper(aU),arguments:r?[K]:[K,"true"]});else e.onError(Yr(y?34:35,Q));continue}const N=e.directiveTransforms[H];if(N){const{props:D,needRuntime:ne}=N(z,t,e);!n&&D.forEach($),A&&J&&!Ca(J)?I(mu(D,a)):u.push(...D),ne&&(d.push(z),Lm(ne)&&bde.set(z,ne))}else sGe(H)||(d.push(z),f&&(m=!0))}}let L;if(c.length?(I(),c.length>1?L=qs(e.helper(Y5),c,a):L=c[0]):u.length&&(L=mu(wZ(u),a)),M?g|=16:(b&&!r&&(g|=2),_&&!r&&(g|=4),T.length&&(g|=8),S&&(g|=32)),!m&&(g===0||g===32)&&(v||x||d.length>0)&&(g|=512),!e.inSSR&&L)switch(L.type){case 15:let B=-1,z=-1,H=!1;for(let Q=0;Q<L.properties.length;Q++){const y=L.properties[Q].key;Ca(y)?y.content==="class"?B=Q:y.content==="style"&&(z=Q):y.isHandlerKey||(H=!0)}const J=L.properties[B],K=L.properties[z];H?L=qs(e.helper(h3),[L]):(J&&!Ca(J.value)&&(J.value=qs(e.helper(nU),[J.value])),K&&(_||K.value.type===4&&K.value.content.trim()[0]==="["||K.value.type===17)&&(K.value=qs(e.helper(oU),[K.value])));break;case 14:break;default:L=qs(e.helper(h3),[qs(e.helper(wE),[L])]);break}return{props:L,directives:d,patchFlag:g,dynamicPropNames:T,shouldUseBlock:m}}function wZ(t){const e=new Map,i=[];for(let r=0;r<t.length;r++){const s=t[r];if(s.key.type===8||!s.key.isStatic){i.push(s);continue}const n=s.key.content,o=e.get(n);o?(n==="style"||n==="class"||m1(n))&&NWe(o,s):(e.set(n,s),i.push(s))}return i}function NWe(t,e){t.value.type===17?t.value.elements.push(e.value):t.value=_E([t.value,e.value],t.loc)}function FWe(t,e){const i=[],r=bde.get(t);r?i.push(e.helperString(r)):(e.helper(tU),e.directives.add(t.name),i.push(p3(t.name,"directive")));const{loc:s}=t;if(t.exp&&i.push(t.exp),t.arg&&(t.exp||i.push("void 0"),i.push(t.arg)),Object.keys(t.modifiers).length){t.arg||(t.exp||i.push("void 0"),i.push("void 0"));const n=Oi("true",!1,s);i.push(mu(t.modifiers.map(o=>ys(o,n)),s))}return _E(i,t.loc)}function DWe(t){let e="[";for(let i=0,r=t.length;i<r;i++)e+=JSON.stringify(t[i]),i<r-1&&(e+=", ");return e+"]"}function rF(t){return t==="component"||t==="Component"}const jWe=(t,e)=>{if(t4(t)){const{children:i,loc:r}=t,{slotName:s,slotProps:n}=UWe(t,e),o=[e.prefixIdentifiers?"_ctx.$slots":"$slots",s,"{}","undefined","true"];let a=2;n&&(o[2]=n,a=3),i.length&&(o[3]=gw([],i,!1,!1,r),a=4),e.scopeId&&!e.slotted&&(a=5),o.splice(a),t.codegenNode=qs(e.helper(ede),o,r)}};function UWe(t,e){let i='"default"',r;const s=[];for(let n=0;n<t.props.length;n++){const o=t.props[n];o.type===6?o.value&&(o.name==="name"?i=JSON.stringify(o.value.content):(o.name=Ps(o.name),s.push(o))):o.name==="bind"&&r0(o.arg,"name")?o.exp&&(i=o.exp):(o.name==="bind"&&o.arg&&Ca(o.arg)&&(o.arg.content=Ps(o.arg.content)),s.push(o))}if(s.length>0){const{props:n,directives:o}=wde(t,e,s,!1,!1);r=n,o.length&&e.onError(Yr(36,o[0].loc))}return{slotName:i,slotProps:r}}const VWe=/^\s*([\w$_]+|(async\s*)?\([^)]*?\))\s*(:[^=]+)?=>|^\s*(async\s+)?function(?:\s+[\w$]+)?\s*\(/,_de=(t,e,i,r)=>{const{loc:s,modifiers:n,arg:o}=t;!t.exp&&!n.length&&i.onError(Yr(35,s));let a;if(o.type===4)if(o.isStatic){let d=o.content;d.startsWith("vue:")&&(d=`vnode-${d.slice(4)}`);const f=e.tagType!==0||d.startsWith("vnode")||!/[A-Z]/.test(d)?_0(Ps(d)):`on:${d}`;a=Oi(f,!0,o.loc)}else a=wc([`${i.helperString(QN)}(`,o,")"]);else a=o,a.children.unshift(`${i.helperString(QN)}(`),a.children.push(")");let l=t.exp;l&&!l.content.trim()&&(l=void 0);let u=i.cacheHandlers&&!l&&!i.inVOnce;if(l){const d=sde(l.content),f=!(d||VWe.test(l.content)),m=l.content.includes(";");(f||u&&d)&&(l=wc([`${f?"$event":"(...args)"} => ${m?"{":"("}`,l,m?"}":")"]))}let c={props:[ys(a,l||Oi("() => {}",!1,s))]};return r&&(c=r(c)),u&&(c.props[0].value=i.cache(c.props[0].value)),c.props.forEach(d=>d.key.isHandlerKey=!0),c},BWe=(t,e,i)=>{const{exp:r,modifiers:s,loc:n}=t,o=t.arg;return o.type!==4?(o.children.unshift("("),o.children.push(') || ""')):o.isStatic||(o.content=`${o.content} || ""`),s.includes("camel")&&(o.type===4?o.isStatic?o.content=Ps(o.content):o.content=`${i.helperString(KN)}(${o.content})`:(o.children.unshift(`${i.helperString(KN)}(`),o.children.push(")"))),i.inSSR||(s.includes("prop")&&_Z(o,"."),s.includes("attr")&&_Z(o,"^")),!r||r.type===4&&!r.content.trim()?(i.onError(Yr(34,n)),{props:[ys(o,Oi("",!0,n))]}):{props:[ys(o,r)]}},_Z=(t,e)=>{t.type===4?t.isStatic?t.content=e+t.content:t.content=`\`${e}\${${t.content}}\``:(t.children.unshift(`'${e}' + (`),t.children.push(")"))},zWe=(t,e)=>{if(t.type===0||t.type===1||t.type===11||t.type===10)return()=>{const i=t.children;let r,s=!1;for(let n=0;n<i.length;n++){const o=i[n];if(lk(o)){s=!0;for(let a=n+1;a<i.length;a++){const l=i[a];if(lk(l))r||(r=i[n]=wc([o],o.loc)),r.children.push(" + ",l),i.splice(a,1),a--;else{r=void 0;break}}}}if(!(!s||i.length===1&&(t.type===0||t.type===1&&t.tagType===0&&!t.props.find(n=>n.type===7&&!e.directiveTransforms[n.name])&&t.tag!=="template")))for(let n=0;n<i.length;n++){const o=i[n];if(lk(o)||o.type===8){const a=[];(o.type!==2||o.content!==" ")&&a.push(o),!e.ssr&&yu(o,e)===0&&a.push("1"),i[n]={type:12,content:o,loc:o.loc,codegenNode:qs(e.helper(Xj),a)}}}}},xZ=new WeakSet,GWe=(t,e)=>{if(t.type===1&&hu(t,"once",!0))return xZ.has(t)||e.inVOnce||e.inSSR?void 0:(xZ.add(t),e.inVOnce=!0,e.helper(K5),()=>{e.inVOnce=!1;const i=e.currentNode;i.codegenNode&&(i.codegenNode=e.cache(i.codegenNode,!0))})},xde=(t,e,i)=>{const{exp:r,arg:s}=t;if(!r)return i.onError(Yr(41,t.loc)),dI();const n=r.loc.source,o=r.type===4?r.content:n,a=i.bindingMetadata[n];if(a==="props"||a==="props-aliased")return i.onError(Yr(44,r.loc)),dI();const l=!1;if(!o.trim()||!sde(o)&&!l)return i.onError(Yr(42,r.loc)),dI();const u=s||Oi("modelValue",!0),c=s?Ca(s)?`onUpdate:${Ps(s.content)}`:wc(['"onUpdate:" + ',s]):"onUpdate:modelValue";let d;const f=i.isTS?"($event: any)":"$event";d=wc([`${f} => ((`,r,") = $event)"]);const m=[ys(u,t.exp),ys(c,d)];if(t.modifiers.length&&e.tagType===1){const g=t.modifiers.map(b=>(hU(b)?b:JSON.stringify(b))+": true").join(", "),v=s?Ca(s)?`${s.content}Modifiers`:wc([s,' + "Modifiers"']):"modelModifiers";m.push(ys(v,Oi(`{ ${g} }`,!1,t.loc,2)))}return dI(m)};function dI(t=[]){return{props:t}}const qWe=/[\w).+\-_$\]]/,HWe=(t,e)=>{E0("COMPILER_FILTER",e)&&(t.type===5&&s4(t.content,e),t.type===1&&t.props.forEach(i=>{i.type===7&&i.name!=="for"&&i.exp&&s4(i.exp,e)}))};function s4(t,e){if(t.type===4)SZ(t,e);else for(let i=0;i<t.children.length;i++){const r=t.children[i];typeof r=="object"&&(r.type===4?SZ(r,e):r.type===8?s4(t,e):r.type===5&&s4(r.content,e))}}function SZ(t,e){const i=t.content;let r=!1,s=!1,n=!1,o=!1,a=0,l=0,u=0,c=0,d,f,m,g,v=[];for(m=0;m<i.length;m++)if(f=d,d=i.charCodeAt(m),r)d===39&&f!==92&&(r=!1);else if(s)d===34&&f!==92&&(s=!1);else if(n)d===96&&f!==92&&(n=!1);else if(o)d===47&&f!==92&&(o=!1);else if(d===124&&i.charCodeAt(m+1)!==124&&i.charCodeAt(m-1)!==124&&!a&&!l&&!u)g===void 0?(c=m+1,g=i.slice(0,m).trim()):b();else{switch(d){case 34:s=!0;break;case 39:r=!0;break;case 96:n=!0;break;case 40:u++;break;case 41:u--;break;case 91:l++;break;case 93:l--;break;case 123:a++;break;case 125:a--;break}if(d===47){let _=m-1,S;for(;_>=0&&(S=i.charAt(_),S===" ");_--);(!S||!qWe.test(S))&&(o=!0)}}g===void 0?g=i.slice(0,m).trim():c!==0&&b();function b(){v.push(i.slice(c,m).trim()),c=m+1}if(v.length){for(m=0;m<v.length;m++)g=WWe(g,v[m],e);t.content=g}}function WWe(t,e,i){i.helper(iU);const r=e.indexOf("(");if(r<0)return i.filters.add(e),`${p3(e,"filter")}(${t})`;{const s=e.slice(0,r),n=e.slice(r+1);return i.filters.add(s),`${p3(s,"filter")}(${t}${n!==")"?","+n:n}`}}const EZ=new WeakSet,JWe=(t,e)=>{if(t.type===1){const i=hu(t,"memo");return!i||EZ.has(t)?void 0:(EZ.add(t),()=>{const r=t.codegenNode||e.currentNode.codegenNode;r&&r.type===13&&(t.tagType!==1&&cU(r,e),t.codegenNode=qs(e.helper(uU),[i.exp,gw(void 0,r),"_cache",String(e.cached++)]))})}};function ZWe(t){return[[GWe,SWe,JWe,IWe,HWe,jWe,LWe,OWe,zWe],{on:_de,bind:BWe,model:xde}]}function YWe(t,e={}){const i=e.onError||Zj,r=e.mode==="module";e.prefixIdentifiers===!0?i(Yr(47)):r&&i(Yr(48));const s=!1;e.cacheHandlers&&i(Yr(49)),e.scopeId&&!r&&i(Yr(50));const n=Ei(t)?qHe(t,e):t,[o,a]=ZWe();return nWe(n,Bi({},e,{prefixIdentifiers:s,nodeTransforms:[...o,...e.nodeTransforms||[]],directiveTransforms:Bi({},a,e.directiveTransforms||{})})),lWe(n,Bi({},e,{prefixIdentifiers:s}))}const KWe=()=>({props:[]}),Sde=Symbol(""),Ede=Symbol(""),Tde=Symbol(""),Ide=Symbol(""),sF=Symbol(""),Mde=Symbol(""),Ade=Symbol(""),Cde=Symbol(""),$de=Symbol(""),Ode=Symbol("");$He({[Sde]:"vModelRadio",[Ede]:"vModelCheckbox",[Tde]:"vModelText",[Ide]:"vModelSelect",[sF]:"vModelDynamic",[Mde]:"withModifiers",[Ade]:"withKeys",[Cde]:"vShow",[$de]:"Transition",[Ode]:"TransitionGroup"});let K1;function QWe(t,e=!1){return K1||(K1=document.createElement("div")),e?(K1.innerHTML=`<div foo="${t.replace(/"/g,"&quot;")}">`,K1.children[0].getAttribute("foo")):(K1.innerHTML=t,K1.textContent)}const XWe=Ha("style,iframe,script,noscript",!0),eJe={isVoidTag:gGe,isNativeTag:t=>mGe(t)||yGe(t),isPreTag:t=>t==="pre",decodeEntities:QWe,isBuiltInComponent:t=>{if(ab(t,"Transition"))return $de;if(ab(t,"TransitionGroup"))return Ode},getNamespace(t,e){let i=e?e.ns:0;if(e&&i===2)if(e.tag==="annotation-xml"){if(t==="svg")return 1;e.props.some(r=>r.type===6&&r.name==="encoding"&&r.value!=null&&(r.value.content==="text/html"||r.value.content==="application/xhtml+xml"))&&(i=0)}else/^m(?:[ions]|text)$/.test(e.tag)&&t!=="mglyph"&&t!=="malignmark"&&(i=0);else e&&i===1&&(e.tag==="foreignObject"||e.tag==="desc"||e.tag==="title")&&(i=0);if(i===0){if(t==="svg")return 1;if(t==="math")return 2}return i},getTextMode({tag:t,ns:e}){if(e===0){if(t==="textarea"||t==="title")return 1;if(XWe(t))return 2}return 0}},tJe=t=>{t.type===1&&t.props.forEach((e,i)=>{e.type===6&&e.name==="style"&&e.value&&(t.props[i]={type:7,name:"bind",arg:Oi("style",!0,e.loc),exp:iJe(e.value.content,e.loc),modifiers:[],loc:e.loc})})},iJe=(t,e)=>{const i=Que(t);return Oi(JSON.stringify(i),!1,e,3)};function _m(t,e){return Yr(t,e)}const rJe=(t,e,i)=>{const{exp:r,loc:s}=t;return r||i.onError(_m(53,s)),e.children.length&&(i.onError(_m(54,s)),e.children.length=0),{props:[ys(Oi("innerHTML",!0,s),r||Oi("",!0))]}},sJe=(t,e,i)=>{const{exp:r,loc:s}=t;return r||i.onError(_m(55,s)),e.children.length&&(i.onError(_m(56,s)),e.children.length=0),{props:[ys(Oi("textContent",!0),r?yu(r,i)>0?r:qs(i.helperString(g$),[r],s):Oi("",!0))]}},nJe=(t,e,i)=>{const r=xde(t,e,i);if(!r.props.length||e.tagType===1)return r;t.arg&&i.onError(_m(58,t.arg.loc));const{tag:s}=e,n=i.isCustomElement(s);if(s==="input"||s==="textarea"||s==="select"||n){let o=Tde,a=!1;if(s==="input"||n){const l=v$(e,"type");if(l){if(l.type===7)o=sF;else if(l.value)switch(l.value.content){case"radio":o=Sde;break;case"checkbox":o=Ede;break;case"file":a=!0,i.onError(_m(59,t.loc));break}}else jHe(e)&&(o=sF)}else s==="select"&&(o=Ide);a||(r.needRuntime=i.helper(o))}else i.onError(_m(57,t.loc));return r.props=r.props.filter(o=>!(o.key.type===4&&o.key.content==="modelValue")),r},oJe=Ha("passive,once,capture"),aJe=Ha("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),lJe=Ha("left,right"),Rde=Ha("onkeyup,onkeydown,onkeypress",!0),uJe=(t,e,i,r)=>{const s=[],n=[],o=[];for(let a=0;a<e.length;a++){const l=e[a];l==="native"&&f3("COMPILER_V_ON_NATIVE",i)||oJe(l)?o.push(l):lJe(l)?Ca(t)?Rde(t.content)?s.push(l):n.push(l):(s.push(l),n.push(l)):aJe(l)?n.push(l):s.push(l)}return{keyModifiers:s,nonKeyModifiers:n,eventOptionModifiers:o}},TZ=(t,e)=>Ca(t)&&t.content.toLowerCase()==="onclick"?Oi(e,!0):t.type!==4?wc(["(",t,`) === "onClick" ? "${e}" : (`,t,")"]):t,cJe=(t,e,i)=>_de(t,e,i,r=>{const{modifiers:s}=t;if(!s.length)return r;let{key:n,value:o}=r.props[0];const{keyModifiers:a,nonKeyModifiers:l,eventOptionModifiers:u}=uJe(n,s,i,t.loc);if(l.includes("right")&&(n=TZ(n,"onContextmenu")),l.includes("middle")&&(n=TZ(n,"onMouseup")),l.length&&(o=qs(i.helper(Mde),[o,JSON.stringify(l)])),a.length&&(!Ca(n)||Rde(n.content))&&(o=qs(i.helper(Ade),[o,JSON.stringify(a)])),u.length){const c=u.map(ey).join("");n=Ca(n)?Oi(`${n.content}${c}`,!0):wc(["(",n,`) + "${c}"`])}return{props:[ys(n,o)]}}),hJe=(t,e,i)=>{const{exp:r,loc:s}=t;return r||i.onError(_m(61,s)),{props:[],needRuntime:i.helper(Cde)}},dJe=(t,e)=>{t.type===1&&t.tagType===0&&(t.tag==="script"||t.tag==="style")&&e.removeNode()},pJe=[tJe],fJe={cloak:KWe,html:rJe,text:sJe,model:nJe,on:cJe,show:hJe};function mJe(t,e={}){return YWe(t,Bi({},eJe,e,{nodeTransforms:[dJe,...pJe,...e.nodeTransforms||[]],directiveTransforms:Bi({},fJe,e.directiveTransforms||{}),transformHoist:null}))}const IZ=Object.create(null);function kde(t,e){if(!Ei(t))if(t.nodeType)t=t.innerHTML;else return Qo;const i=t,r=IZ[i];if(r)return r;if(t[0]==="#"){const a=document.querySelector(t);t=a?a.innerHTML:""}const s=Bi({hoistStatic:!0,onError:void 0,onWarn:Qo},e);!s.isCustomElement&&typeof customElements<"u"&&(s.isCustomElement=a=>!!customElements.get(a));const{code:n}=mJe(t,s),o=new Function("Vue",n)(EHe);return o._rc=!0,IZ[i]=o}jj(kde);const kmt=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:gj,BaseTransitionPropsValidators:o$,Comment:Jn,EffectScope:qC,Fragment:Cr,KeepAlive:Dce,ReactiveEffect:l_,Static:bm,Suspense:Rce,Teleport:Pj,Text:vp,Transition:d_,TransitionGroup:d$,VueElement:gE,assertNumber:Tce,callWithAsyncErrorHandling:Ra,callWithErrorHandling:Ph,camelize:Ps,capitalize:ey,cloneVNode:Ic,compatUtils:$he,compile:kde,computed:Ri,createApp:y$,createBlock:Br,createCommentVNode:Hr,createElementBlock:Ot,createElementVNode:at,createHydrationRenderer:kj,createPropsRestProxy:rhe,createRenderer:Rj,createSSRApp:Hhe,createSlots:Vce,createStaticVNode:bhe,createTextVNode:Nh,createVNode:wi,customRef:_ce,defineAsyncComponent:vj,defineComponent:zi,defineCustomElement:Gj,defineEmits:qce,defineExpose:Hce,defineModel:Zce,defineOptions:Wce,defineProps:Gce,defineSSRCustomElement:Ohe,defineSlots:Jce,get devtools(){return Fg},effect:nce,effectScope:pE,getCurrentInstance:Ln,getCurrentScope:HC,getTransitionRawChildren:mE,guardReactiveProps:Nj,h:Hh,handleError:iy,hasInjectionContext:ahe,hydrate:Jj,initCustomFormatter:Ihe,initDirectivesForSSR:Jhe,inject:mn,isMemoSame:Bj,isProxy:QC,isReactive:bu,isReadonly:Fm,isRef:ir,isRuntimeOnly:She,isShallow:pw,isVNode:qh,markRaw:_s,mergeDefaults:the,mergeModels:ihe,mergeProps:c$,nextTick:Kh,normalizeClass:ws,normalizeProps:Xue,normalizeStyle:ty,onActivated:bj,onBeforeMount:l$,onBeforeUnmount:Qh,onBeforeUpdate:_j,onDeactivated:wj,onErrorCaptured:Tj,onMounted:Co,onRenderTracked:Ej,onRenderTriggered:Sj,onScopeDispose:sj,onServerPrefetch:xj,onUnmounted:g1,onUpdated:h_,openBlock:ht,popScopeId:sy,provide:$j,proxyRefs:e$,pushScopeId:ry,queuePostFlushCb:i$,reactive:Ys,readonly:YC,ref:Xe,registerRuntimeCompiler:jj,render:np,renderList:ny,renderSlot:yc,resolveComponent:Os,resolveDirective:gr,resolveDynamicComponent:Mj,resolveFilter:Che,resolveTransitionHooks:Y0,setBlockTracking:H5,setDevtoolsHook:pj,setTransitionHooks:Dm,shallowReactive:aj,shallowReadonly:gce,shallowRef:cj,ssrContextKey:Uj,ssrUtils:Ahe,stop:oce,toDisplayString:Zr,toHandlerKey:_0,toHandlers:zce,toRaw:hi,toRef:xce,toRefs:hj,toValue:wce,transformVNodeArgs:ghe,triggerRef:bce,unref:ti,useAttrs:Qce,useCssModule:Rhe,useCssVars:khe,useModel:Xce,useSSRContext:Vj,useSlots:Kce,useTransitionState:n$,vModelCheckbox:p$,vModelDynamic:Hj,vModelRadio:f$,vModelSelect:qj,vModelText:u3,vShow:m$,version:zj,warn:Ece,watch:Js,watchEffect:Lce,watchPostEffect:yj,watchSyncEffect:Pce,withAsyncContext:she,withCtx:Ns,withDefaults:Yce,withDirectives:ar,withKeys:Wj,withMemo:Mhe,withModifiers:vE,withScopeId:$ce},Symbol.toStringTag,{value:"Module"}));var yJe=!1;/*!
  * pinia v2.0.32
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */let Lde;const x$=t=>Lde=t,Pde=Symbol();function nF(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var sS;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(sS||(sS={}));function gJe(){const t=pE(!0),e=t.run(()=>Xe({}));let i=[],r=[];const s=_s({install(n){x$(s),s._a=n,n.provide(Pde,s),n.config.globalProperties.$pinia=s,r.forEach(o=>i.push(o)),r=[]},use(n){return!this._a&&!yJe?r.push(n):i.push(n),this},_p:i,_a:null,_e:t,_s:new Map,state:e});return s}const Nde=()=>{};function MZ(t,e,i,r=Nde){t.push(e);const s=()=>{const n=t.indexOf(e);n>-1&&(t.splice(n,1),r())};return!i&&HC()&&sj(s),s}function Q1(t,...e){t.slice().forEach(i=>{i(...e)})}function oF(t,e){t instanceof Map&&e instanceof Map&&e.forEach((i,r)=>t.set(r,i)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const i in e){if(!e.hasOwnProperty(i))continue;const r=e[i],s=t[i];nF(s)&&nF(r)&&t.hasOwnProperty(i)&&!ir(r)&&!bu(r)?t[i]=oF(s,r):t[i]=r}return t}const vJe=Symbol();function bJe(t){return!nF(t)||!t.hasOwnProperty(vJe)}const{assign:qf}=Object;function wJe(t){return!!(ir(t)&&t.effect)}function _Je(t,e,i,r){const{state:s,actions:n,getters:o}=e,a=i.state.value[t];let l;function u(){a||(i.state.value[t]=s?s():{});const c=hj(i.state.value[t]);return qf(c,n,Object.keys(o||{}).reduce((d,f)=>(d[f]=_s(Ri(()=>{x$(i);const m=i._s.get(t);return o[f].call(m,m)})),d),{}))}return l=Fde(t,u,e,i,r,!0),l.$reset=function(){const d=s?s():{};this.$patch(f=>{qf(f,d)})},l}function Fde(t,e,i={},r,s,n){let o;const a=qf({actions:{}},i),l={deep:!0};let u,c,d=_s([]),f=_s([]),m;const g=r.state.value[t];!n&&!g&&(r.state.value[t]={}),Xe({});let v;function b($){let L;u=c=!1,typeof $=="function"?($(r.state.value[t]),L={type:sS.patchFunction,storeId:t,events:m}):(oF(r.state.value[t],$),L={type:sS.patchObject,payload:$,storeId:t,events:m});const B=v=Symbol();Kh().then(()=>{v===B&&(u=!0)}),c=!0,Q1(d,L,r.state.value[t])}const _=Nde;function S(){o.stop(),d=[],f=[],r._s.delete(t)}function M($,L){return function(){x$(r);const B=Array.from(arguments),z=[],H=[];function J(y){z.push(y)}function K(y){H.push(y)}Q1(f,{args:B,name:$,store:T,after:J,onError:K});let Q;try{Q=L.apply(this&&this.$id===t?this:T,B)}catch(y){throw Q1(H,y),y}return Q instanceof Promise?Q.then(y=>(Q1(z,y),y)).catch(y=>(Q1(H,y),Promise.reject(y))):(Q1(z,Q),Q)}}const x={_p:r,$id:t,$onAction:MZ.bind(null,f),$patch:b,$reset:_,$subscribe($,L={}){const B=MZ(d,$,L.detached,()=>z()),z=o.run(()=>Js(()=>r.state.value[t],H=>{(L.flush==="sync"?c:u)&&$({storeId:t,type:sS.direct,events:m},H)},qf({},l,L)));return B},$dispose:S},T=Ys(x);r._s.set(t,T);const I=r._e.run(()=>(o=pE(),o.run(()=>e())));for(const $ in I){const L=I[$];if(ir(L)&&!wJe(L)||bu(L))n||(g&&bJe(L)&&(ir(L)?L.value=g[$]:oF(L,g[$])),r.state.value[t][$]=L);else if(typeof L=="function"){const B=M($,L);I[$]=B,a.actions[$]=L}}return qf(T,I),qf(hi(T),I),Object.defineProperty(T,"$state",{get:()=>r.state.value[t],set:$=>{b(L=>{qf(L,$)})}}),r._p.forEach($=>{qf(T,o.run(()=>$({store:T,app:r._a,pinia:r,options:a})))}),g&&n&&i.hydrate&&i.hydrate(T.$state,g),u=!0,c=!0,T}function Ss(t,e,i){let r,s;const n=typeof e=="function";typeof t=="string"?(r=t,s=n?i:e):(s=t,r=t.id);function o(a,l){const u=Ln();return a=a||u&&mn(Pde,null),a&&x$(a),a=Lde,a._s.has(r)||(n?Fde(r,e,s,a):_Je(r,s,a)),a._s.get(r)}return o.$id=r,o}const n4=Ss("appbar",()=>{const t=Xe({}),e=Xe([]),i=Xe([]),r=Ri(()=>e.value.map(o=>o.map(a=>t.value[a]).filter(a=>{if(typeof a=="string"||a.componentId)return!0})).filter(o=>o.length>0));function s(o){i.value.includes(o)||i.value.push(o)}function n(o){const a=i.value.indexOf(o);a!==-1&&i.value.splice(a,1),o in t.value&&delete t.value[o],e.value.forEach(l=>{const u=l.indexOf(o);u!==-1&&l.splice(u,1)})}return{items:t,order:e,temporary:i,visible:r,addTempButton:s,removeButton:n}}),aF=Ss("grid",()=>{const t=Xe({}),e=Xe(),i=Xe();function r(a){t.value={...t.value,[a.id]:a}}function s(a){t.value[a]!==void 0&&delete t.value[a]}function n(a){return Object.keys(t.value).find(l=>t.value[l].layerIds.includes(a))}function o(a,l){t.value[a].layerIds=t.value[a].layerIds.filter(u=>u!==l)}return{grids:t,panel:e,currentId:i,addGrid:r,removeGrid:s,getGridId:n,removeLayer:o}});function s0(t,e,i,r){var s,n=!1,o=0;function a(){s&&clearTimeout(s)}function l(){a(),n=!0}typeof e!="boolean"&&(r=i,i=e,e=void 0);function u(){for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];var m=this,g=Date.now()-o;if(n)return;function v(){o=Date.now(),i.apply(m,d)}function b(){s=void 0}r&&!s&&v(),a(),r===void 0&&g>t?v():e!==!0&&(s=setTimeout(r?b:v,r===void 0?t-g:t))}return u.cancel=l,u}function o4(t,e,i){return i===void 0?s0(t,e,!1):s0(t,i,e!==!1)}const om=Ss("map-caption",()=>{const t=Xe({text:{},logo:{}}),e=Xe({}),i=Xe({}),r=Xe({});function s(n){n!==void 0?e.value.isImperialScale=n:e.value.isImperialScale=!e.value.isImperialScale}return{attribution:t,scale:e,coords:i,langtoggle:r,toggleScale:s}}),AZ=(t,e)=>{const i=[...t];for(;i.length>0;){const r=i.shift();if(e(r))return r;r&&i.push(...r.sublayers)}},Sl=Ss("layer",()=>{const t=Xe([]),e=Xe([]),i=Xe([]),r=Xe([]),s=Xe([]);function n(_){return AZ(t.value.concat(i.value,r.value,e.value),S=>S?.uid===_)}function o(_){return AZ(t.value.concat(i.value,r.value,e.value),S=>S?.id===_)}function a(_){s.value=[...s.value,_]}function l(_){t.value=[...t.value,_]}function u(_){e.value=[...e.value,_]}function c(_){i.value=[...i.value,_]}function d(_){r.value=[...r.value,_]}function f(_,S=t.value.length){const M=t.value.findIndex(x=>x.uid===_.uid);M!==-1&&M!==S&&(t.value.splice(M,1),t.value.splice(S,0,_),t.value=[...t.value])}function m(_){if(_.mapLayer){const S=t.value.filter(M=>M.id!==_.id||M.uid!==_.uid);t.value=S}else{const S=e.value.filter(M=>M.id!==_.id||M.uid!==_.uid);e.value=S}}function g(_){const S=_ instanceof a0?_.id:_,M=_ instanceof a0?_.uid:_,x=i.value.filter(T=>T.id!==S&&T.uid!==M);i.value=x}function v(_){const S=_ instanceof a0?_.id:_,M=_ instanceof a0?_.uid:_,x=r.value.filter(T=>T.id!==S&&T.uid!==M);r.value=x}function b(_){const S=s.value.filter(M=>M.id!==_);s.value=S}return{layers:t,dataLayers:e,penaltyBox:i,initiatingLayers:r,layerConfigs:s,getLayerByUid:n,getLayerById:o,addLayerConfig:a,addLayer:l,addDataLayer:u,addErrorLayer:c,addInitiatingLayer:d,reorderLayer:f,removeLayer:m,removeErrorLayer:g,removeInitiatingLayer:v,removeLayerConfig:b}}),Sa=Ss("config",()=>{const t=Xe({map:{lodSets:[],extentSets:[],tileSchemas:[],basemaps:[],initialBasemapId:""},fixtures:{},layers:[]}),e=Xe([]),i=Xe(),r=Xe({}),s=Xe({});function n(l){if(r.value[s.value[l]]===void 0)throw new Error("Unsupported language or no registered config exists for requested language");return r.value[s.value[l]]}function o(l){const u={...t.value,...l};if(t.value=u,Array.isArray(t.value.layers)){const c=Sl();c.layerConfigs=[...c.layerConfigs,t.value.layers]}}function a(l){const u=l.configLangs,c=l.config,d=l.allLangs;u!==void 0&&u.length>0&&u.forEach(f=>{r.value[f]=c,s.value[f]=f}),d!==void 0&&d.length>0&&d.forEach(f=>{s.value[f]=Object.keys(r.value)[0]})}return{config:t,startingFixtures:e,activeBasemapConfig:i,registeredConfigs:r,registeredLangs:s,getActiveConfig:n,newConfig:o,registerConfig:a}}),Dde=Ss("details",()=>{const t=Xe([]),e=Xe({}),i=Xe({}),r=Xe(),s=Xe(!1),n=Xe(0),o=Xe(0),a=Xe(!0);function l(c){const d=t.value.findIndex(f=>f.uid===c.uid);d!==-1&&t.value.splice(d,1)}function u(c){e.value={...e.value,[c.id]:c}}return{payload:t,properties:e,defaultTemplates:i,currentFeatureId:r,slowLoadingFlag:s,activeGreedy:n,lastHilight:o,hilightToggle:a,removeLayer:l,addConfigProperty:u}}),Qd=Ss("fixture",()=>{const t=Xe({}),e=Xe({});function i(o){return o.map(a=>e.value[a].getPromise())}function r(o){if(t.value={...t.value,[o.id]:_s(o)},o.id in e.value)e.value[o.id].resolveMe();else{const a=new fn;a.resolveMe(),e.value={...e.value,[o.id]:a}}typeof o.added=="function"&&o.added()}function s(o){delete t.value[o.id],t.value={...t.value},delete e.value[o.id],e.value={...e.value},typeof o.removed=="function"&&o.removed()}function n(o){e.value={...e.value,[o]:new fn}}return{items:t,loadPromises:e,getLoadPromises:i,addFixture:r,removeFixture:s,addLoadPromise:n}});var qt=(t=>(t.APPBAR_BUTTON_CLICK="appbar/click",t.COMPONENT="ramp/component",t.CONFIG_CHANGE="config/configchanged",t.DETAILS_TOGGLE="details/toggle",t.FILTER_CHANGE="filter/change",t.FIXTURE_ADDED="fixture/added",t.FIXTURE_REMOVED="fixture/removed",t.GRID_TOGGLE="grid/toggle",t.HELP_TOGGLE="help/toggle",t.LAYER_DRAWSTATECHANGE="layer/drawstatechange",t.LAYER_INITIATIONSTATECHANGE="layer/initiationStatechange",t.LAYER_LAYERSTATECHANGE="layer/layerstatechange",t.LAYER_OPACITYCHANGE="layer/opacitychange",t.LAYER_REGISTERED="layer/registered",t.LAYER_RELOAD_END="layer/reloadend",t.LAYER_RELOAD_START="layer/reloadstart",t.LAYER_REMOVE="layer/remove",t.LAYER_VISIBILITYCHANGE="layer/visibilitychange",t.MAP_BASEMAPCHANGE="map/basemapchanged",t.MAP_BLUR="map/blur",t.MAP_CLICK="map/click",t.MAP_CREATED="map/created",t.MAP_DESTROYED="map/destroyed",t.MAP_DOUBLECLICK="map/doubleclick",t.MAP_EXTENTCHANGE="map/extentchanged",t.MAP_FOCUS="map/focus",t.MAP_GRAPHICHIT="map/graphichit",t.MAP_IDENTIFY="map/identify",t.MAP_KEYDOWN="map/keydown",t.MAP_KEYUP="map/keyup",t.MAP_MOUSEDOWN="map/mousedown",t.MAP_MOUSELEAVE="map/mouseleave",t.MAP_MOUSEMOVE="map/mousemove",t.MAP_MOUSEMOVE_END="map/mousemoveend",t.MAP_MOUSEMOVE_START="map/mousemovestart",t.MAP_REFRESH_END="map/refreshend",t.MAP_REFRESH_START="map/refreshstart",t.MAP_REORDER="map/reorder",t.MAP_RESIZED="map/resized",t.MAP_SCALECHANGE="map/scalechanged",t.MAP_START="map/start",t.METADATA_TOGGLE="metadata/toggle",t.PANEL_CLOSED="panel/closed",t.PANEL_MINIMIZED="panel/minimized",t.PANEL_OPENED="panel/opened",t.RAMP_MOBILEVIEW_CHANGE="ramp/mobileviewchange",t.REORDER_TOGGLE="reorder/toggle",t.SETTINGS_TOGGLE="settings/toggle",t.USER_LAYER_ADDED="user/layeradded",t.WIZARD_TOGGLE="wizard/toggle",t))(qt||{});class xJe{eventName;handlerName;handlerFunc;constructor(e,i,r){this.eventName=e,this.handlerName=i,this.handlerFunc=r}}class SJe extends Ks{_eventBus;_eventRegister;_nameRegister;_funCounter;constructor(e){super(e),this._eventBus=new Xze,this._eventRegister=[],this._funCounter=1,this._nameRegister=Object.values(qt).filter(i=>typeof i=="string"&&i.indexOf("/")>-1)}findHandler(e){return this._eventRegister.find(i=>i.handlerName===e)}handlerNamer(e){return this._funCounter++,e.replace(/\//g,"_")+this._funCounter.toString()}registerEventName(e){(Array.isArray(e)?e:[e]).forEach(r=>{this._nameRegister.indexOf(r)===-1&&this._nameRegister.push(r)})}eventNames(){return this._nameRegister.slice()}on(e,i,r=""){if(this.findHandler(r))throw new Error("Duplicate handler name registration: "+r);r||(r=this.handlerNamer(e));const s=new xJe(e,r,i);return this._eventRegister.push(s),this._eventBus.on(e,i),r}off(e){const i=this.findHandler(e);i&&(this._eventRegister.splice(this._eventRegister.indexOf(i),1),this._eventBus.off(i.eventName,i.handlerFunc))}offAll(e=""){this.activeHandlers(e).forEach(r=>this.off(r))}emit(e,...i){this._eventBus.emit(e,...i)}once(e,i,r=""){r||(r=this.handlerNamer(e));const s=(...n)=>{i(...n),this.off(r)};return this.on(e,s,r)}activeHandlers(e=""){return e===""?this._eventRegister.map(i=>i.handlerName):this._eventRegister.filter(i=>i.eventName===e).map(i=>i.handlerName)}addDefaultEvents(e){return(!Array.isArray(e)||e.length===0)&&(e=["ramp_config_change_updates_map_attribs","ramp_layer_error_updates_legend","ramp_layer_register_binds_legend","ramp_layer_reload_end_binds_legend","ramp_layer_reload_start_updates_legend","ramp_layer_remove_updates_details","ramp_layer_remove_checks_grid","ramp_layer_remove_updates_legend","ramp_layer_useradd_updates_legend","ramp_map_basemap_checks_tile_proj","ramp_map_basemap_updates_map_attribs","ramp_map_blur_updates_key_handler","ramp_map_click_runs_identify","ramp_map_created_initializes_fixtures","ramp_map_created_updates_map_attribs","ramp_map_extent_updates_maptip","ramp_map_graphichit_creates_maptip","ramp_map_identify_opens_identify_results","ramp_map_keydown_updates_coords","ramp_map_keydown_updates_key_handler","ramp_map_keyup_updates_key_handler","ramp_map_mouse_updates_coords","ramp_map_mouse_updates_maptip","ramp_map_mouseleave_removes_maptip","ramp_map_resize_updates_scalebar","ramp_map_scale_updates_scalebar","ramp_panel_close_updates_appbar","ramp_panel_open_updates_appbar","ramp_toggle_details","ramp_toggle_grid","ramp_toggle_help","ramp_toggle_metadata","ramp_toggle_reorder","ramp_toggle_settings","ramp_toggle_wizard"]),e.map(i=>this.defaultHandlerFactory(i))}defaultHandlerFactory(e){let i;switch(e){case"ramp_config_change_updates_map_attribs":i=r=>{const s=r.map.basemaps.find(n=>n.id===this.$iApi.geo.map.getCurrentBasemapId());this.$iApi.geo.map.caption.updateAttribution(s?.attribution)},this.$iApi.event.on("config/configchanged",i,e);break;case"ramp_layer_error_updates_legend":i=r=>{if(r.layer.layerState===ks.ERROR){const s=this.$iApi.fixture.get("legend");s&&s.updateLegend(r.layer)}},this.$iApi.event.on("layer/layerstatechange",i,e);break;case"ramp_layer_register_binds_legend":i=r=>{const s=this.$iApi.fixture.get("legend");s&&s.updateLegend(r)},this.$iApi.event.on("layer/registered",i,e);break;case"ramp_layer_reload_end_binds_legend":i=r=>{const s=this.$iApi.fixture.get("legend");s&&s.updateLegend(r)},this.$iApi.event.on("layer/reloadend",i,e);break;case"ramp_layer_reload_start_updates_legend":i=r=>{const s=this.$iApi.fixture.get("legend");s&&s.reloadLayerItem(r.uid)},this.$iApi.event.on("layer/reloadstart",i,e);break;case"ramp_layer_remove_checks_grid":i=r=>{if(this.$iApi.fixture.get("grid")){const s=aF(this.$vApp.$pinia),n=s.getGridId(r.id);if(n===void 0)return;if(s.removeLayer(n,r.id),s.grids[n].layerIds.length===0){s.removeGrid(n);const o=s.currentId;if(n===o){const a=this.$iApi.panel.get("grid");this.$iApi.panel.close(a),s.currentId=void 0}}}},this.$iApi.event.on("layer/remove",i,e);break;case"ramp_layer_remove_updates_details":i=r=>{const s=Dde(this.$vApp.$pinia);this.$iApi.fixture.get("details")&&s.removeLayer(r)},this.$iApi.event.on("layer/remove",i,e);break;case"ramp_layer_remove_updates_legend":i=r=>{const s=this.$iApi.fixture.get("legend");s&&(s.removeLayerItem(r),this.$iApi.updateAlert(this.$iApi.$i18n.t("legend.alert.layerRemoved",{name:r.name})))},this.$iApi.event.on("layer/remove",i,e);break;case"ramp_layer_useradd_updates_legend":i=r=>{const s=this.$iApi.fixture.get("legend");s&&s.addLayerItem(r)},this.$iApi.event.on("user/layeradded",i,e);break;case"ramp_map_basemap_checks_tile_proj":i=()=>{this.$iApi.geo.layer.allLayers().filter(r=>r.layerType===li.TILE).forEach(r=>{r.checkProj()})},this.$iApi.event.on("map/basemapchanged",i,e);break;case"ramp_map_basemap_updates_map_attribs":i=()=>{this.$iApi.geo.map.caption.updateAttribution(Sa(this.$vApp.$pinia).activeBasemapConfig?.attribution)},this.$iApi.event.on("map/basemapchanged",i,e);break;case"ramp_map_blur_updates_key_handler":i=()=>{this.$iApi.geo.map.stopKeyPan()},this.$iApi.event.on("map/blur",i,e);break;case"ramp_map_click_runs_identify":i=r=>{r.button===0&&this.$iApi.geo.map.runIdentify(r)},this.on("map/click",i,e);break;case"ramp_map_created_initializes_fixtures":i=()=>{const r=Qd(this.$vApp.$pinia).items;Object.keys(r).forEach(s=>{r[s].initialized?.()})},this.$iApi.geo.map.created&&i(),this.$iApi.event.on("map/created",i,e);break;case"ramp_map_created_updates_map_attribs":i=()=>{this.$iApi.geo.map.caption.updateAttribution(Sa(this.$vApp.$pinia).activeBasemapConfig?.attribution)},this.$iApi.geo.map.created&&i(),this.$iApi.event.on("map/created",i,e);break;case"ramp_map_extent_updates_maptip":i=()=>{if(this.$iApi.geo.map.keysActive){const r=this.$iApi.geo.map.mapPointToScreenPoint(this.$iApi.geo.map.getExtent().center());this.$iApi.geo.map.maptip.checkAtCoord(r)}else this.$iApi.geo.map.maptip.clear()},this.$iApi.event.on("map/extentchanged",s0(50,!0,()=>i()),e);break;case"ramp_map_graphichit_creates_maptip":i=r=>{this.$iApi.geo.map.maptip.generateDefaultMaptip(r)},this.$iApi.event.on("map/graphichit",i,e);break;case"ramp_map_identify_opens_identify_results":i=r=>{const s=this.$iApi.fixture.get("details");s&&s.openDetails(r.results)},this.on("map/identify",i,e);break;case"ramp_map_keydown_updates_coords":this.$iApi.event.on("map/keydown",s0(200,()=>{const r=om(this.$vApp.$pinia);r.coords?.disabled||!this.$iApi.geo.map.keysActive||this.$iApi.geo.map.caption.formatPoint(this.$iApi.geo.map.getExtent().center()).then(n=>{r.coords={formattedString:n}})}),e);break;case"ramp_map_keydown_updates_key_handler":i=r=>{this.$iApi.geo.map.mapKeyDown(r)},this.$iApi.event.on("map/keydown",i,e);break;case"ramp_map_keyup_updates_key_handler":i=r=>{this.$iApi.geo.map.mapKeyUp(r)},this.$iApi.event.on("map/keyup",i,e);break;case"ramp_map_mouse_updates_coords":this.$iApi.event.on("map/mousemove",s0(200,r=>{const s=om(this.$vApp.$pinia);s.coords?.disabled||this.$iApi.geo.map.caption.formatPoint(this.$iApi.geo.map.screenPointToMapPoint(r)).then(o=>{s.coords={formattedString:o}})}),e);break;case"ramp_map_mouse_updates_maptip":i=r=>{this.$iApi.geo.map.maptip.checkAtCoord({screenX:r.screenX,screenY:r.screenY})},this.$iApi.event.on("map/mousemove",s0(200,r=>i(r)),e);break;case"ramp_map_mouseleave_removes_maptip":i=()=>{this.$iApi.geo.map.maptip.clear()},this.$iApi.event.on("map/mouseleave",i);break;case"ramp_map_resize_updates_scalebar":this.$iApi.event.on("map/resized",o4(100,()=>this.$iApi.geo.map.caption.updateScale()),e);break;case"ramp_map_scale_updates_scalebar":this.$iApi.event.on("map/scalechanged",o4(300,()=>this.$iApi.geo.map.caption.updateScale()),e);break;case"ramp_panel_close_updates_appbar":i=r=>{const s=n4(this.$vApp.$pinia);this.$iApi.fixture.get("appbar")&&!s.order.flat().find(n=>n===r.id)&&s.removeButton(r.id)},this.on("panel/closed",i,e);break;case"ramp_panel_open_updates_appbar":i=r=>{const s=n4(this.$vApp.$pinia);this.$iApi.fixture.get("appbar")&&(!r.teleport||r.teleport?.showAppbarButton)&&!s.order.flat().find(n=>n===r.id)&&s.addTempButton(r.id)},this.on("panel/opened",i,e);break;case"ramp_toggle_details":i=(r,s)=>{const n=this.$iApi.fixture.get("details");n&&n.toggleFeature(r,s)},this.$iApi.event.on("details/toggle",i,e);break;case"ramp_toggle_grid":i=(r,s)=>{const n=this.$iApi.fixture.get("grid");n&&n.toggleGrid(r.id,s)},this.$iApi.event.on("grid/toggle",i,e);break;case"ramp_toggle_help":i=r=>{const s=this.$iApi.fixture.get("help");s&&s.toggleHelp(r)},this.$iApi.event.on("help/toggle",i,e);break;case"ramp_toggle_metadata":i=(r,s)=>{const n=this.$iApi.fixture.get("metadata");n&&n.toggleMetadata(r,s)},this.$iApi.event.on("metadata/toggle",i,e);break;case"ramp_toggle_reorder":i=r=>{const s=this.$iApi.fixture.get("layer-reorder");s&&s.toggleLayerReorder(r)},this.$iApi.event.on("reorder/toggle",i,e);break;case"ramp_toggle_settings":i=(r,s)=>{const n=this.$iApi.fixture.get("settings");n&&n.toggleSettings(r,s)},this.$iApi.event.on("settings/toggle",i,e);break;case"ramp_toggle_wizard":i=r=>{const s=this.$iApi.fixture.get("wizard");s&&s.toggleWizard(r)},this.$iApi.event.on("wizard/toggle",i,e);break;default:return console.error(`Unrecognized default event handler name encountered: ${e}`),`ERROR_NOT_REGISTERED__${e}`}return e}}/*!
  * shared v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const lF=typeof window<"u",EJe=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",oy=t=>EJe?Symbol(t):t,TJe=(t,e,i)=>IJe({l:t,k:e,s:i}),IJe=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),dn=t=>typeof t=="number"&&isFinite(t),MJe=t=>mU(t)==="[object Date]",Vm=t=>mU(t)==="[object RegExp]",S$=t=>gi(t)&&Object.keys(t).length===0;function AJe(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const Rn=Object.assign;let CZ;const nS=()=>CZ||(CZ=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function $Z(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const CJe=Object.prototype.hasOwnProperty;function fU(t,e){return CJe.call(t,e)}const $r=Array.isArray,Rs=t=>typeof t=="function",$t=t=>typeof t=="string",Vi=t=>typeof t=="boolean",Or=t=>t!==null&&typeof t=="object",jde=Object.prototype.toString,mU=t=>jde.call(t),gi=t=>mU(t)==="[object Object]",$Je=t=>t==null?"":$r(t)||gi(t)&&t.toString===jde?JSON.stringify(t,null,2):String(t);/*!
  * message-compiler v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const Qi={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,__EXTEND_POINT__:15};function E$(t,e,i={}){const{domain:r,messages:s,args:n}=i,o=t,a=new SyntaxError(String(o));return a.code=t,e&&(a.location=e),a.domain=r,a}function OJe(t){throw t}function RJe(t,e,i){return{line:t,column:e,offset:i}}function uF(t,e,i){const r={start:t,end:e};return i!=null&&(r.source=i),r}const hd=" ",kJe="\r",zo=`
`,LJe=String.fromCharCode(8232),PJe=String.fromCharCode(8233);function NJe(t){const e=t;let i=0,r=1,s=1,n=0;const o=$=>e[$]===kJe&&e[$+1]===zo,a=$=>e[$]===zo,l=$=>e[$]===PJe,u=$=>e[$]===LJe,c=$=>o($)||a($)||l($)||u($),d=()=>i,f=()=>r,m=()=>s,g=()=>n,v=$=>o($)||l($)||u($)?zo:e[$],b=()=>v(i),_=()=>v(i+n);function S(){return n=0,c(i)&&(r++,s=0),o(i)&&i++,i++,s++,e[i]}function M(){return o(i+n)&&n++,n++,e[i+n]}function x(){i=0,r=1,s=1,n=0}function T($=0){n=$}function I(){const $=i+n;for(;$!==i;)S();n=0}return{index:d,line:f,column:m,peekOffset:g,charAt:v,currentChar:b,currentPeek:_,next:S,peek:M,reset:x,resetPeek:T,skipToPeek:I}}const nf=void 0,OZ="'",FJe="tokenizer";function DJe(t,e={}){const i=e.location!==!1,r=NJe(t),s=()=>r.index(),n=()=>RJe(r.line(),r.column(),r.index()),o=n(),a=s(),l={currentType:14,offset:a,startLoc:o,endLoc:o,lastType:14,lastOffset:a,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},u=()=>l,{onError:c}=e;function d(V,j,se,...ye){const ae=u();if(j.column+=se,j.offset+=se,c){const U=uF(ae.startLoc,j),le=E$(V,U,{domain:FJe,args:ye});c(le)}}function f(V,j,se){V.endLoc=n(),V.currentType=j;const ye={type:j};return i&&(ye.loc=uF(V.startLoc,V.endLoc)),se!=null&&(ye.value=se),ye}const m=V=>f(V,14);function g(V,j){return V.currentChar()===j?(V.next(),j):(d(Qi.EXPECTED_TOKEN,n(),0,j),"")}function v(V){let j="";for(;V.currentPeek()===hd||V.currentPeek()===zo;)j+=V.currentPeek(),V.peek();return j}function b(V){const j=v(V);return V.skipToPeek(),j}function _(V){if(V===nf)return!1;const j=V.charCodeAt(0);return j>=97&&j<=122||j>=65&&j<=90||j===95}function S(V){if(V===nf)return!1;const j=V.charCodeAt(0);return j>=48&&j<=57}function M(V,j){const{currentType:se}=j;if(se!==2)return!1;v(V);const ye=_(V.currentPeek());return V.resetPeek(),ye}function x(V,j){const{currentType:se}=j;if(se!==2)return!1;v(V);const ye=V.currentPeek()==="-"?V.peek():V.currentPeek(),ae=S(ye);return V.resetPeek(),ae}function T(V,j){const{currentType:se}=j;if(se!==2)return!1;v(V);const ye=V.currentPeek()===OZ;return V.resetPeek(),ye}function I(V,j){const{currentType:se}=j;if(se!==8)return!1;v(V);const ye=V.currentPeek()===".";return V.resetPeek(),ye}function $(V,j){const{currentType:se}=j;if(se!==9)return!1;v(V);const ye=_(V.currentPeek());return V.resetPeek(),ye}function L(V,j){const{currentType:se}=j;if(!(se===8||se===12))return!1;v(V);const ye=V.currentPeek()===":";return V.resetPeek(),ye}function B(V,j){const{currentType:se}=j;if(se!==10)return!1;const ye=()=>{const U=V.currentPeek();return U==="{"?_(V.peek()):U==="@"||U==="%"||U==="|"||U===":"||U==="."||U===hd||!U?!1:U===zo?(V.peek(),ye()):_(U)},ae=ye();return V.resetPeek(),ae}function z(V){v(V);const j=V.currentPeek()==="|";return V.resetPeek(),j}function H(V){const j=v(V),se=V.currentPeek()==="%"&&V.peek()==="{";return V.resetPeek(),{isModulo:se,hasSpace:j.length>0}}function J(V,j=!0){const se=(ae=!1,U="",le=!1)=>{const re=V.currentPeek();return re==="{"?U==="%"?!1:ae:re==="@"||!re?U==="%"?!0:ae:re==="%"?(V.peek(),se(ae,"%",!0)):re==="|"?U==="%"||le?!0:!(U===hd||U===zo):re===hd?(V.peek(),se(!0,hd,le)):re===zo?(V.peek(),se(!0,zo,le)):!0},ye=se();return j&&V.resetPeek(),ye}function K(V,j){const se=V.currentChar();return se===nf?nf:j(se)?(V.next(),se):null}function Q(V){return K(V,se=>{const ye=se.charCodeAt(0);return ye>=97&&ye<=122||ye>=65&&ye<=90||ye>=48&&ye<=57||ye===95||ye===36})}function y(V){return K(V,se=>{const ye=se.charCodeAt(0);return ye>=48&&ye<=57})}function A(V){return K(V,se=>{const ye=se.charCodeAt(0);return ye>=48&&ye<=57||ye>=65&&ye<=70||ye>=97&&ye<=102})}function N(V){let j="",se="";for(;j=y(V);)se+=j;return se}function D(V){b(V);const j=V.currentChar();return j!=="%"&&d(Qi.EXPECTED_TOKEN,n(),0,j),V.next(),"%"}function ne(V){let j="";for(;;){const se=V.currentChar();if(se==="{"||se==="}"||se==="@"||se==="|"||!se)break;if(se==="%")if(J(V))j+=se,V.next();else break;else if(se===hd||se===zo)if(J(V))j+=se,V.next();else{if(z(V))break;j+=se,V.next()}else j+=se,V.next()}return j}function q(V){b(V);let j="",se="";for(;j=Q(V);)se+=j;return V.currentChar()===nf&&d(Qi.UNTERMINATED_CLOSING_BRACE,n(),0),se}function he(V){b(V);let j="";return V.currentChar()==="-"?(V.next(),j+=`-${N(V)}`):j+=N(V),V.currentChar()===nf&&d(Qi.UNTERMINATED_CLOSING_BRACE,n(),0),j}function te(V){b(V),g(V,"'");let j="",se="";const ye=U=>U!==OZ&&U!==zo;for(;j=K(V,ye);)j==="\\"?se+=me(V):se+=j;const ae=V.currentChar();return ae===zo||ae===nf?(d(Qi.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,n(),0),ae===zo&&(V.next(),g(V,"'")),se):(g(V,"'"),se)}function me(V){const j=V.currentChar();switch(j){case"\\":case"'":return V.next(),`\\${j}`;case"u":return ve(V,j,4);case"U":return ve(V,j,6);default:return d(Qi.UNKNOWN_ESCAPE_SEQUENCE,n(),0,j),""}}function ve(V,j,se){g(V,j);let ye="";for(let ae=0;ae<se;ae++){const U=A(V);if(!U){d(Qi.INVALID_UNICODE_ESCAPE_SEQUENCE,n(),0,`\\${j}${ye}${V.currentChar()}`);break}ye+=U}return`\\${j}${ye}`}function _e(V){b(V);let j="",se="";const ye=ae=>ae!=="{"&&ae!=="}"&&ae!==hd&&ae!==zo;for(;j=K(V,ye);)se+=j;return se}function Se(V){let j="",se="";for(;j=Q(V);)se+=j;return se}function Oe(V){const j=(se=!1,ye)=>{const ae=V.currentChar();return ae==="{"||ae==="%"||ae==="@"||ae==="|"||!ae||ae===hd?ye:ae===zo?(ye+=ae,V.next(),j(se,ye)):(ye+=ae,V.next(),j(!0,ye))};return j(!1,"")}function Te(V){b(V);const j=g(V,"|");return b(V),j}function we(V,j){let se=null;switch(V.currentChar()){case"{":return j.braceNest>=1&&d(Qi.NOT_ALLOW_NEST_PLACEHOLDER,n(),0),V.next(),se=f(j,2,"{"),b(V),j.braceNest++,se;case"}":return j.braceNest>0&&j.currentType===2&&d(Qi.EMPTY_PLACEHOLDER,n(),0),V.next(),se=f(j,3,"}"),j.braceNest--,j.braceNest>0&&b(V),j.inLinked&&j.braceNest===0&&(j.inLinked=!1),se;case"@":return j.braceNest>0&&d(Qi.UNTERMINATED_CLOSING_BRACE,n(),0),se=Ie(V,j)||m(j),j.braceNest=0,se;default:let ae=!0,U=!0,le=!0;if(z(V))return j.braceNest>0&&d(Qi.UNTERMINATED_CLOSING_BRACE,n(),0),se=f(j,1,Te(V)),j.braceNest=0,j.inLinked=!1,se;if(j.braceNest>0&&(j.currentType===5||j.currentType===6||j.currentType===7))return d(Qi.UNTERMINATED_CLOSING_BRACE,n(),0),j.braceNest=0,Ae(V,j);if(ae=M(V,j))return se=f(j,5,q(V)),b(V),se;if(U=x(V,j))return se=f(j,6,he(V)),b(V),se;if(le=T(V,j))return se=f(j,7,te(V)),b(V),se;if(!ae&&!U&&!le)return se=f(j,13,_e(V)),d(Qi.INVALID_TOKEN_IN_PLACEHOLDER,n(),0,se.value),b(V),se;break}return se}function Ie(V,j){const{currentType:se}=j;let ye=null;const ae=V.currentChar();switch((se===8||se===9||se===12||se===10)&&(ae===zo||ae===hd)&&d(Qi.INVALID_LINKED_FORMAT,n(),0),ae){case"@":return V.next(),ye=f(j,8,"@"),j.inLinked=!0,ye;case".":return b(V),V.next(),f(j,9,".");case":":return b(V),V.next(),f(j,10,":");default:return z(V)?(ye=f(j,1,Te(V)),j.braceNest=0,j.inLinked=!1,ye):I(V,j)||L(V,j)?(b(V),Ie(V,j)):$(V,j)?(b(V),f(j,12,Se(V))):B(V,j)?(b(V),ae==="{"?we(V,j)||ye:f(j,11,Oe(V))):(se===8&&d(Qi.INVALID_LINKED_FORMAT,n(),0),j.braceNest=0,j.inLinked=!1,Ae(V,j))}}function Ae(V,j){let se={type:14};if(j.braceNest>0)return we(V,j)||m(j);if(j.inLinked)return Ie(V,j)||m(j);switch(V.currentChar()){case"{":return we(V,j)||m(j);case"}":return d(Qi.UNBALANCED_CLOSING_BRACE,n(),0),V.next(),f(j,3,"}");case"@":return Ie(V,j)||m(j);default:if(z(V))return se=f(j,1,Te(V)),j.braceNest=0,j.inLinked=!1,se;const{isModulo:ae,hasSpace:U}=H(V);if(ae)return U?f(j,0,ne(V)):f(j,4,D(V));if(J(V))return f(j,0,ne(V));break}return se}function W(){const{currentType:V,offset:j,startLoc:se,endLoc:ye}=l;return l.lastType=V,l.lastOffset=j,l.lastStartLoc=se,l.lastEndLoc=ye,l.offset=s(),l.startLoc=n(),r.currentChar()===nf?f(l,14):Ae(r,l)}return{nextToken:W,currentOffset:s,currentPosition:n,context:u}}const jJe="parser",UJe=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function VJe(t,e,i){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const r=parseInt(e||i,16);return r<=55295||r>=57344?String.fromCodePoint(r):"�"}}}function BJe(t={}){const e=t.location!==!1,{onError:i}=t;function r(_,S,M,x,...T){const I=_.currentPosition();if(I.offset+=x,I.column+=x,i){const $=uF(M,I),L=E$(S,$,{domain:jJe,args:T});i(L)}}function s(_,S,M){const x={type:_,start:S,end:S};return e&&(x.loc={start:M,end:M}),x}function n(_,S,M,x){_.end=S,x&&(_.type=x),e&&_.loc&&(_.loc.end=M)}function o(_,S){const M=_.context(),x=s(3,M.offset,M.startLoc);return x.value=S,n(x,_.currentOffset(),_.currentPosition()),x}function a(_,S){const M=_.context(),{lastOffset:x,lastStartLoc:T}=M,I=s(5,x,T);return I.index=parseInt(S,10),_.nextToken(),n(I,_.currentOffset(),_.currentPosition()),I}function l(_,S){const M=_.context(),{lastOffset:x,lastStartLoc:T}=M,I=s(4,x,T);return I.key=S,_.nextToken(),n(I,_.currentOffset(),_.currentPosition()),I}function u(_,S){const M=_.context(),{lastOffset:x,lastStartLoc:T}=M,I=s(9,x,T);return I.value=S.replace(UJe,VJe),_.nextToken(),n(I,_.currentOffset(),_.currentPosition()),I}function c(_){const S=_.nextToken(),M=_.context(),{lastOffset:x,lastStartLoc:T}=M,I=s(8,x,T);return S.type!==12?(r(_,Qi.UNEXPECTED_EMPTY_LINKED_MODIFIER,M.lastStartLoc,0),I.value="",n(I,x,T),{nextConsumeToken:S,node:I}):(S.value==null&&r(_,Qi.UNEXPECTED_LEXICAL_ANALYSIS,M.lastStartLoc,0,Uc(S)),I.value=S.value||"",n(I,_.currentOffset(),_.currentPosition()),{node:I})}function d(_,S){const M=_.context(),x=s(7,M.offset,M.startLoc);return x.value=S,n(x,_.currentOffset(),_.currentPosition()),x}function f(_){const S=_.context(),M=s(6,S.offset,S.startLoc);let x=_.nextToken();if(x.type===9){const T=c(_);M.modifier=T.node,x=T.nextConsumeToken||_.nextToken()}switch(x.type!==10&&r(_,Qi.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Uc(x)),x=_.nextToken(),x.type===2&&(x=_.nextToken()),x.type){case 11:x.value==null&&r(_,Qi.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Uc(x)),M.key=d(_,x.value||"");break;case 5:x.value==null&&r(_,Qi.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Uc(x)),M.key=l(_,x.value||"");break;case 6:x.value==null&&r(_,Qi.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Uc(x)),M.key=a(_,x.value||"");break;case 7:x.value==null&&r(_,Qi.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Uc(x)),M.key=u(_,x.value||"");break;default:r(_,Qi.UNEXPECTED_EMPTY_LINKED_KEY,S.lastStartLoc,0);const T=_.context(),I=s(7,T.offset,T.startLoc);return I.value="",n(I,T.offset,T.startLoc),M.key=I,n(M,T.offset,T.startLoc),{nextConsumeToken:x,node:M}}return n(M,_.currentOffset(),_.currentPosition()),{node:M}}function m(_){const S=_.context(),M=S.currentType===1?_.currentOffset():S.offset,x=S.currentType===1?S.endLoc:S.startLoc,T=s(2,M,x);T.items=[];let I=null;do{const B=I||_.nextToken();switch(I=null,B.type){case 0:B.value==null&&r(_,Qi.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Uc(B)),T.items.push(o(_,B.value||""));break;case 6:B.value==null&&r(_,Qi.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Uc(B)),T.items.push(a(_,B.value||""));break;case 5:B.value==null&&r(_,Qi.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Uc(B)),T.items.push(l(_,B.value||""));break;case 7:B.value==null&&r(_,Qi.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Uc(B)),T.items.push(u(_,B.value||""));break;case 8:const z=f(_);T.items.push(z.node),I=z.nextConsumeToken||null;break}}while(S.currentType!==14&&S.currentType!==1);const $=S.currentType===1?S.lastOffset:_.currentOffset(),L=S.currentType===1?S.lastEndLoc:_.currentPosition();return n(T,$,L),T}function g(_,S,M,x){const T=_.context();let I=x.items.length===0;const $=s(1,S,M);$.cases=[],$.cases.push(x);do{const L=m(_);I||(I=L.items.length===0),$.cases.push(L)}while(T.currentType!==14);return I&&r(_,Qi.MUST_HAVE_MESSAGES_IN_PLURAL,M,0),n($,_.currentOffset(),_.currentPosition()),$}function v(_){const S=_.context(),{offset:M,startLoc:x}=S,T=m(_);return S.currentType===14?T:g(_,M,x,T)}function b(_){const S=DJe(_,Rn({},t)),M=S.context(),x=s(0,M.offset,M.startLoc);return e&&x.loc&&(x.loc.source=_),x.body=v(S),M.currentType!==14&&r(S,Qi.UNEXPECTED_LEXICAL_ANALYSIS,M.lastStartLoc,0,_[M.offset]||""),n(x,S.currentOffset(),S.currentPosition()),x}return{parse:b}}function Uc(t){if(t.type===14)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"…":e}function zJe(t,e={}){const i={ast:t,helpers:new Set};return{context:()=>i,helper:n=>(i.helpers.add(n),n)}}function RZ(t,e){for(let i=0;i<t.length;i++)yU(t[i],e)}function yU(t,e){switch(t.type){case 1:RZ(t.cases,e),e.helper("plural");break;case 2:RZ(t.items,e);break;case 6:yU(t.key,e),e.helper("linked"),e.helper("type");break;case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function GJe(t,e={}){const i=zJe(t);i.helper("normalize"),t.body&&yU(t.body,i);const r=i.context();t.helpers=Array.from(r.helpers)}function qJe(t,e){const{sourceMap:i,filename:r,breakLineCode:s,needIndent:n}=e,o={source:t.loc.source,filename:r,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:s,needIndent:n,indentLevel:0},a=()=>o;function l(v,b){o.code+=v}function u(v,b=!0){const _=b?s:"";l(n?_+"  ".repeat(v):_)}function c(v=!0){const b=++o.indentLevel;v&&u(b)}function d(v=!0){const b=--o.indentLevel;v&&u(b)}function f(){u(o.indentLevel)}return{context:a,push:l,indent:c,deindent:d,newline:f,helper:v=>`_${v}`,needIndent:()=>o.needIndent}}function HJe(t,e){const{helper:i}=t;t.push(`${i("linked")}(`),ww(t,e.key),e.modifier?(t.push(", "),ww(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function WJe(t,e){const{helper:i,needIndent:r}=t;t.push(`${i("normalize")}([`),t.indent(r());const s=e.items.length;for(let n=0;n<s&&(ww(t,e.items[n]),n!==s-1);n++)t.push(", ");t.deindent(r()),t.push("])")}function JJe(t,e){const{helper:i,needIndent:r}=t;if(e.cases.length>1){t.push(`${i("plural")}([`),t.indent(r());const s=e.cases.length;for(let n=0;n<s&&(ww(t,e.cases[n]),n!==s-1);n++)t.push(", ");t.deindent(r()),t.push("])")}}function ZJe(t,e){e.body?ww(t,e.body):t.push("null")}function ww(t,e){const{helper:i}=t;switch(e.type){case 0:ZJe(t,e);break;case 1:JJe(t,e);break;case 2:WJe(t,e);break;case 6:HJe(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${i("interpolate")}(${i("list")}(${e.index}))`,e);break;case 4:t.push(`${i("interpolate")}(${i("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break}}const YJe=(t,e={})=>{const i=$t(e.mode)?e.mode:"normal",r=$t(e.filename)?e.filename:"message.intl",s=!!e.sourceMap,n=e.breakLineCode!=null?e.breakLineCode:i==="arrow"?";":`
`,o=e.needIndent?e.needIndent:i!=="arrow",a=t.helpers||[],l=qJe(t,{mode:i,filename:r,sourceMap:s,breakLineCode:n,needIndent:o});l.push(i==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(o),a.length>0&&(l.push(`const { ${a.map(d=>`${d}: _${d}`).join(", ")} } = ctx`),l.newline()),l.push("return "),ww(l,t),l.deindent(o),l.push("}");const{code:u,map:c}=l.context();return{ast:t,code:u,map:c?c.toJSON():void 0}};function KJe(t,e={}){const i=Rn({},e),s=BJe(i).parse(t);return GJe(s,i),YJe(s,i)}/*!
  * devtools-if v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const Ude={I18nInit:"i18n:init",FunctionTranslate:"function:translate"};/*!
  * core-base v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const ay=[];ay[0]={w:[0],i:[3,0],["["]:[4],o:[7]};ay[1]={w:[1],["."]:[2],["["]:[4],o:[7]};ay[2]={w:[2],i:[3,0],[0]:[3,0]};ay[3]={i:[3,0],[0]:[3,0],w:[1,1],["."]:[2,1],["["]:[4,1],o:[7,1]};ay[4]={["'"]:[5,0],['"']:[6,0],["["]:[4,2],["]"]:[1,3],o:8,l:[4,0]};ay[5]={["'"]:[4,0],o:8,l:[5,0]};ay[6]={['"']:[4,0],o:8,l:[6,0]};const QJe=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function XJe(t){return QJe.test(t)}function eZe(t){const e=t.charCodeAt(0),i=t.charCodeAt(t.length-1);return e===i&&(e===34||e===39)?t.slice(1,-1):t}function tZe(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function iZe(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:XJe(e)?eZe(e):"*"+e}function rZe(t){const e=[];let i=-1,r=0,s=0,n,o,a,l,u,c,d;const f=[];f[0]=()=>{o===void 0?o=a:o+=a},f[1]=()=>{o!==void 0&&(e.push(o),o=void 0)},f[2]=()=>{f[0](),s++},f[3]=()=>{if(s>0)s--,r=4,f[0]();else{if(s=0,o===void 0||(o=iZe(o),o===!1))return!1;f[1]()}};function m(){const g=t[i+1];if(r===5&&g==="'"||r===6&&g==='"')return i++,a="\\"+g,f[0](),!0}for(;r!==null;)if(i++,n=t[i],!(n==="\\"&&m())){if(l=tZe(n),d=ay[r],u=d[l]||d.l||8,u===8||(r=u[0],u[1]!==void 0&&(c=f[u[1]],c&&(a=n,c()===!1))))return;if(r===7)return e}}const kZ=new Map;function sZe(t,e){return Or(t)?t[e]:null}function nZe(t,e){if(!Or(t))return null;let i=kZ.get(e);if(i||(i=rZe(e),i&&kZ.set(e,i)),!i)return null;const r=i.length;let s=t,n=0;for(;n<r;){const o=s[i[n]];if(o===void 0)return null;s=o,n++}return s}const oZe=t=>t,aZe=t=>"",lZe="text",uZe=t=>t.length===0?"":t.join(""),cZe=$Je;function LZ(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function hZe(t){const e=dn(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(dn(t.named.count)||dn(t.named.n))?dn(t.named.count)?t.named.count:dn(t.named.n)?t.named.n:e:e}function dZe(t,e){e.count||(e.count=t),e.n||(e.n=t)}function pZe(t={}){const e=t.locale,i=hZe(t),r=Or(t.pluralRules)&&$t(e)&&Rs(t.pluralRules[e])?t.pluralRules[e]:LZ,s=Or(t.pluralRules)&&$t(e)&&Rs(t.pluralRules[e])?LZ:void 0,n=_=>_[r(i,_.length,s)],o=t.list||[],a=_=>o[_],l=t.named||{};dn(t.pluralIndex)&&dZe(i,l);const u=_=>l[_];function c(_){const S=Rs(t.messages)?t.messages(_):Or(t.messages)?t.messages[_]:!1;return S||(t.parent?t.parent.message(_):aZe)}const d=_=>t.modifiers?t.modifiers[_]:oZe,f=gi(t.processor)&&Rs(t.processor.normalize)?t.processor.normalize:uZe,m=gi(t.processor)&&Rs(t.processor.interpolate)?t.processor.interpolate:cZe,g=gi(t.processor)&&$t(t.processor.type)?t.processor.type:lZe,b={list:a,named:u,plural:n,linked:(_,...S)=>{const[M,x]=S;let T="text",I="";S.length===1?Or(M)?(I=M.modifier||I,T=M.type||T):$t(M)&&(I=M||I):S.length===2&&($t(M)&&(I=M||I),$t(x)&&(T=x||T));let $=c(_)(b);return T==="vnode"&&$r($)&&I&&($=$[0]),I?d(I)($,T):$},message:c,type:g,interpolate:m,normalize:f};return b}let y3=null;function fZe(t){y3=t}function mZe(t,e,i){y3&&y3.emit(Ude.I18nInit,{timestamp:Date.now(),i18n:t,version:e,meta:i})}const yZe=gZe(Ude.FunctionTranslate);function gZe(t){return e=>y3&&y3.emit(t,e)}function vZe(t,e,i){return[...new Set([i,...$r(e)?e:Or(e)?Object.keys(e):$t(e)?[e]:[i]])]}function Vde(t,e,i){const r=$t(i)?i:SE,s=t;s.__localeChainCache||(s.__localeChainCache=new Map);let n=s.__localeChainCache.get(r);if(!n){n=[];let o=[i];for(;$r(o);)o=PZ(n,o,e);const a=$r(e)||!gi(e)?e:e.default?e.default:null;o=$t(a)?[a]:a,$r(o)&&PZ(n,o,!1),s.__localeChainCache.set(r,n)}return n}function PZ(t,e,i){let r=!0;for(let s=0;s<e.length&&Vi(r);s++){const n=e[s];$t(n)&&(r=bZe(t,e[s],i))}return r}function bZe(t,e,i){let r;const s=e.split("-");do{const n=s.join("-");r=wZe(t,n,i),s.splice(-1,1)}while(s.length&&r===!0);return r}function wZe(t,e,i){let r=!1;if(!t.includes(e)&&(r=!0,e)){r=e[e.length-1]!=="!";const s=e.replace(/!/g,"");t.push(s),($r(i)||gi(i))&&i[s]&&(r=i[s])}return r}const _Ze="9.2.2",T$=-1,SE="en-US",NZ="",FZ=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function xZe(){return{upper:(t,e)=>e==="text"&&$t(t)?t.toUpperCase():e==="vnode"&&Or(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&$t(t)?t.toLowerCase():e==="vnode"&&Or(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&$t(t)?FZ(t):e==="vnode"&&Or(t)&&"__v_isVNode"in t?FZ(t.children):t}}let Bde;function SZe(t){Bde=t}let zde;function EZe(t){zde=t}let Gde;function TZe(t){Gde=t}let qde=null;const DZ=t=>{qde=t},IZe=()=>qde;let Hde=null;const jZ=t=>{Hde=t},MZe=()=>Hde;let UZ=0;function AZe(t={}){const e=$t(t.version)?t.version:_Ze,i=$t(t.locale)?t.locale:SE,r=$r(t.fallbackLocale)||gi(t.fallbackLocale)||$t(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:i,s=gi(t.messages)?t.messages:{[i]:{}},n=gi(t.datetimeFormats)?t.datetimeFormats:{[i]:{}},o=gi(t.numberFormats)?t.numberFormats:{[i]:{}},a=Rn({},t.modifiers||{},xZe()),l=t.pluralRules||{},u=Rs(t.missing)?t.missing:null,c=Vi(t.missingWarn)||Vm(t.missingWarn)?t.missingWarn:!0,d=Vi(t.fallbackWarn)||Vm(t.fallbackWarn)?t.fallbackWarn:!0,f=!!t.fallbackFormat,m=!!t.unresolving,g=Rs(t.postTranslation)?t.postTranslation:null,v=gi(t.processor)?t.processor:null,b=Vi(t.warnHtmlMessage)?t.warnHtmlMessage:!0,_=!!t.escapeParameter,S=Rs(t.messageCompiler)?t.messageCompiler:Bde,M=Rs(t.messageResolver)?t.messageResolver:zde||sZe,x=Rs(t.localeFallbacker)?t.localeFallbacker:Gde||vZe,T=Or(t.fallbackContext)?t.fallbackContext:void 0,I=Rs(t.onWarn)?t.onWarn:AJe,$=t,L=Or($.__datetimeFormatters)?$.__datetimeFormatters:new Map,B=Or($.__numberFormatters)?$.__numberFormatters:new Map,z=Or($.__meta)?$.__meta:{};UZ++;const H={version:e,cid:UZ,locale:i,fallbackLocale:r,messages:s,modifiers:a,pluralRules:l,missing:u,missingWarn:c,fallbackWarn:d,fallbackFormat:f,unresolving:m,postTranslation:g,processor:v,warnHtmlMessage:b,escapeParameter:_,messageCompiler:S,messageResolver:M,localeFallbacker:x,fallbackContext:T,onWarn:I,__meta:z};return H.datetimeFormats=n,H.numberFormats=o,H.__datetimeFormatters=L,H.__numberFormatters=B,__INTLIFY_PROD_DEVTOOLS__&&mZe(H,e,z),H}function gU(t,e,i,r,s){const{missing:n,onWarn:o}=t;if(n!==null){const a=n(t,i,e,s);return $t(a)?a:e}else return e}function s2(t,e,i){const r=t;r.__localeChainCache=new Map,t.localeFallbacker(t,i,e)}const CZe=t=>t;let VZ=Object.create(null);function $Ze(t,e={}){{const r=(e.onCacheKey||CZe)(t),s=VZ[r];if(s)return s;let n=!1;const o=e.onError||OJe;e.onError=u=>{n=!0,o(u)};const{code:a}=KJe(t,e),l=new Function(`return ${a}`)();return n?l:VZ[r]=l}}let Wde=Qi.__EXTEND_POINT__;const ck=()=>++Wde,lb={INVALID_ARGUMENT:Wde,INVALID_DATE_ARGUMENT:ck(),INVALID_ISO_DATE_ARGUMENT:ck(),__EXTEND_POINT__:ck()};function ub(t){return E$(t,null,void 0)}const BZ=()=>"",wh=t=>Rs(t);function zZ(t,...e){const{fallbackFormat:i,postTranslation:r,unresolving:s,messageCompiler:n,fallbackLocale:o,messages:a}=t,[l,u]=cF(...e),c=Vi(u.missingWarn)?u.missingWarn:t.missingWarn,d=Vi(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn,f=Vi(u.escapeParameter)?u.escapeParameter:t.escapeParameter,m=!!u.resolvedMessage,g=$t(u.default)||Vi(u.default)?Vi(u.default)?n?l:()=>l:u.default:i?n?l:()=>l:"",v=i||g!=="",b=$t(u.locale)?u.locale:t.locale;f&&OZe(u);let[_,S,M]=m?[l,b,a[b]||{}]:Jde(t,l,b,o,d,c),x=_,T=l;if(!m&&!($t(x)||wh(x))&&v&&(x=g,T=x),!m&&(!($t(x)||wh(x))||!$t(S)))return s?T$:l;let I=!1;const $=()=>{I=!0},L=wh(x)?x:Zde(t,l,S,x,T,$);if(I)return x;const B=LZe(t,S,M,u),z=pZe(B),H=RZe(t,L,z),J=r?r(H,l):H;if(__INTLIFY_PROD_DEVTOOLS__){const K={timestamp:Date.now(),key:$t(l)?l:wh(x)?x.key:"",locale:S||(wh(x)?x.locale:""),format:$t(x)?x:wh(x)?x.source:"",message:J};K.meta=Rn({},t.__meta,IZe()||{}),yZe(K)}return J}function OZe(t){$r(t.list)?t.list=t.list.map(e=>$t(e)?$Z(e):e):Or(t.named)&&Object.keys(t.named).forEach(e=>{$t(t.named[e])&&(t.named[e]=$Z(t.named[e]))})}function Jde(t,e,i,r,s,n){const{messages:o,onWarn:a,messageResolver:l,localeFallbacker:u}=t,c=u(t,r,i);let d={},f,m=null;const g="translate";for(let v=0;v<c.length&&(f=c[v],d=o[f]||{},(m=l(d,e))===null&&(m=d[e]),!($t(m)||Rs(m)));v++){const b=gU(t,e,f,n,g);b!==e&&(m=b)}return[m,f,d]}function Zde(t,e,i,r,s,n){const{messageCompiler:o,warnHtmlMessage:a}=t;if(wh(r)){const u=r;return u.locale=u.locale||i,u.key=u.key||e,u}if(o==null){const u=()=>r;return u.locale=i,u.key=e,u}const l=o(r,kZe(t,i,s,r,a,n));return l.locale=i,l.key=e,l.source=r,l}function RZe(t,e,i){return e(i)}function cF(...t){const[e,i,r]=t,s={};if(!$t(e)&&!dn(e)&&!wh(e))throw ub(lb.INVALID_ARGUMENT);const n=dn(e)?String(e):(wh(e),e);return dn(i)?s.plural=i:$t(i)?s.default=i:gi(i)&&!S$(i)?s.named=i:$r(i)&&(s.list=i),dn(r)?s.plural=r:$t(r)?s.default=r:gi(r)&&Rn(s,r),[n,s]}function kZe(t,e,i,r,s,n){return{warnHtmlMessage:s,onError:o=>{throw n&&n(o),o},onCacheKey:o=>TJe(e,i,o)}}function LZe(t,e,i,r){const{modifiers:s,pluralRules:n,messageResolver:o,fallbackLocale:a,fallbackWarn:l,missingWarn:u,fallbackContext:c}=t,f={locale:e,modifiers:s,pluralRules:n,messages:m=>{let g=o(i,m);if(g==null&&c){const[,,v]=Jde(c,m,e,a,l,u);g=o(v,m)}if($t(g)){let v=!1;const _=Zde(t,m,e,g,m,()=>{v=!0});return v?BZ:_}else return wh(g)?g:BZ}};return t.processor&&(f.processor=t.processor),r.list&&(f.list=r.list),r.named&&(f.named=r.named),dn(r.plural)&&(f.pluralIndex=r.plural),f}function GZ(t,...e){const{datetimeFormats:i,unresolving:r,fallbackLocale:s,onWarn:n,localeFallbacker:o}=t,{__datetimeFormatters:a}=t,[l,u,c,d]=hF(...e),f=Vi(c.missingWarn)?c.missingWarn:t.missingWarn;Vi(c.fallbackWarn)?c.fallbackWarn:t.fallbackWarn;const m=!!c.part,g=$t(c.locale)?c.locale:t.locale,v=o(t,s,g);if(!$t(l)||l==="")return new Intl.DateTimeFormat(g,d).format(u);let b={},_,S=null;const M="datetime format";for(let I=0;I<v.length&&(_=v[I],b=i[_]||{},S=b[l],!gi(S));I++)gU(t,l,_,f,M);if(!gi(S)||!$t(_))return r?T$:l;let x=`${_}__${l}`;S$(d)||(x=`${x}__${JSON.stringify(d)}`);let T=a.get(x);return T||(T=new Intl.DateTimeFormat(_,Rn({},S,d)),a.set(x,T)),m?T.formatToParts(u):T.format(u)}const Yde=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function hF(...t){const[e,i,r,s]=t,n={};let o={},a;if($t(e)){const l=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw ub(lb.INVALID_ISO_DATE_ARGUMENT);const u=l[3]?l[3].trim().startsWith("T")?`${l[1].trim()}${l[3].trim()}`:`${l[1].trim()}T${l[3].trim()}`:l[1].trim();a=new Date(u);try{a.toISOString()}catch{throw ub(lb.INVALID_ISO_DATE_ARGUMENT)}}else if(MJe(e)){if(isNaN(e.getTime()))throw ub(lb.INVALID_DATE_ARGUMENT);a=e}else if(dn(e))a=e;else throw ub(lb.INVALID_ARGUMENT);return $t(i)?n.key=i:gi(i)&&Object.keys(i).forEach(l=>{Yde.includes(l)?o[l]=i[l]:n[l]=i[l]}),$t(r)?n.locale=r:gi(r)&&(o=r),gi(s)&&(o=s),[n.key||"",a,n,o]}function qZ(t,e,i){const r=t;for(const s in i){const n=`${e}__${s}`;r.__datetimeFormatters.has(n)&&r.__datetimeFormatters.delete(n)}}function HZ(t,...e){const{numberFormats:i,unresolving:r,fallbackLocale:s,onWarn:n,localeFallbacker:o}=t,{__numberFormatters:a}=t,[l,u,c,d]=dF(...e),f=Vi(c.missingWarn)?c.missingWarn:t.missingWarn;Vi(c.fallbackWarn)?c.fallbackWarn:t.fallbackWarn;const m=!!c.part,g=$t(c.locale)?c.locale:t.locale,v=o(t,s,g);if(!$t(l)||l==="")return new Intl.NumberFormat(g,d).format(u);let b={},_,S=null;const M="number format";for(let I=0;I<v.length&&(_=v[I],b=i[_]||{},S=b[l],!gi(S));I++)gU(t,l,_,f,M);if(!gi(S)||!$t(_))return r?T$:l;let x=`${_}__${l}`;S$(d)||(x=`${x}__${JSON.stringify(d)}`);let T=a.get(x);return T||(T=new Intl.NumberFormat(_,Rn({},S,d)),a.set(x,T)),m?T.formatToParts(u):T.format(u)}const Kde=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function dF(...t){const[e,i,r,s]=t,n={};let o={};if(!dn(e))throw ub(lb.INVALID_ARGUMENT);const a=e;return $t(i)?n.key=i:gi(i)&&Object.keys(i).forEach(l=>{Kde.includes(l)?o[l]=i[l]:n[l]=i[l]}),$t(r)?n.locale=r:gi(r)&&(o=r),gi(s)&&(o=s),[n.key||"",a,n,o]}function WZ(t,e,i){const r=t;for(const s in i){const n=`${e}__${s}`;r.__numberFormatters.has(n)&&r.__numberFormatters.delete(n)}}typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(nS().__INTLIFY_PROD_DEVTOOLS__=!1);/*!
  * vue-i18n v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const PZe="9.2.2";function NZe(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(nS().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(nS().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(nS().__INTLIFY_PROD_DEVTOOLS__=!1)}let Qde=Qi.__EXTEND_POINT__;const na=()=>++Qde,Zs={UNEXPECTED_RETURN_TYPE:Qde,INVALID_ARGUMENT:na(),MUST_BE_CALL_SETUP_TOP:na(),NOT_INSLALLED:na(),NOT_AVAILABLE_IN_LEGACY_MODE:na(),REQUIRED_VALUE:na(),INVALID_VALUE:na(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:na(),NOT_INSLALLED_WITH_PROVIDE:na(),UNEXPECTED_ERROR:na(),NOT_COMPATIBLE_LEGACY_VUE_I18N:na(),BRIDGE_SUPPORT_VUE_2_ONLY:na(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:na(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:na(),__EXTEND_POINT__:na()};function gn(t,...e){return E$(t,null,void 0)}const pF=oy("__transrateVNode"),fF=oy("__datetimeParts"),mF=oy("__numberParts"),Xde=oy("__setPluralRules");oy("__intlifyMeta");const epe=oy("__injectWithOption");function yF(t){if(!Or(t))return t;for(const e in t)if(fU(t,e))if(!e.includes("."))Or(t[e])&&yF(t[e]);else{const i=e.split("."),r=i.length-1;let s=t;for(let n=0;n<r;n++)i[n]in s||(s[i[n]]={}),s=s[i[n]];s[i[r]]=t[e],delete t[e],Or(s[i[r]])&&yF(s[i[r]])}return t}function I$(t,e){const{messages:i,__i18n:r,messageResolver:s,flatJson:n}=e,o=gi(i)?i:$r(r)?{}:{[t]:{}};if($r(r)&&r.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:l,resource:u}=a;l?(o[l]=o[l]||{},oS(u,o[l])):oS(u,o)}else $t(a)&&oS(JSON.parse(a),o)}),s==null&&n)for(const a in o)fU(o,a)&&yF(o[a]);return o}const pI=t=>!Or(t)||$r(t);function oS(t,e){if(pI(t)||pI(e))throw gn(Zs.INVALID_VALUE);for(const i in t)fU(t,i)&&(pI(t[i])||pI(e[i])?e[i]=t[i]:oS(t[i],e[i]))}function tpe(t){return t.type}function ipe(t,e,i){let r=Or(e.messages)?e.messages:{};"__i18nGlobal"in i&&(r=I$(t.locale.value,{messages:r,__i18n:i.__i18nGlobal}));const s=Object.keys(r);s.length&&s.forEach(n=>{t.mergeLocaleMessage(n,r[n])});{if(Or(e.datetimeFormats)){const n=Object.keys(e.datetimeFormats);n.length&&n.forEach(o=>{t.mergeDateTimeFormat(o,e.datetimeFormats[o])})}if(Or(e.numberFormats)){const n=Object.keys(e.numberFormats);n.length&&n.forEach(o=>{t.mergeNumberFormat(o,e.numberFormats[o])})}}}function JZ(t){return wi(vp,null,t,0)}const ZZ="__INTLIFY_META__";let YZ=0;function KZ(t){return(e,i,r,s)=>t(i,r,Ln()||void 0,s)}const FZe=()=>{const t=Ln();let e=null;return t&&(e=tpe(t)[ZZ])?{[ZZ]:e}:null};function vU(t={},e){const{__root:i}=t,r=i===void 0;let s=Vi(t.inheritLocale)?t.inheritLocale:!0;const n=Xe(i&&s?i.locale.value:$t(t.locale)?t.locale:SE),o=Xe(i&&s?i.fallbackLocale.value:$t(t.fallbackLocale)||$r(t.fallbackLocale)||gi(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:n.value),a=Xe(I$(n.value,t)),l=Xe(gi(t.datetimeFormats)?t.datetimeFormats:{[n.value]:{}}),u=Xe(gi(t.numberFormats)?t.numberFormats:{[n.value]:{}});let c=i?i.missingWarn:Vi(t.missingWarn)||Vm(t.missingWarn)?t.missingWarn:!0,d=i?i.fallbackWarn:Vi(t.fallbackWarn)||Vm(t.fallbackWarn)?t.fallbackWarn:!0,f=i?i.fallbackRoot:Vi(t.fallbackRoot)?t.fallbackRoot:!0,m=!!t.fallbackFormat,g=Rs(t.missing)?t.missing:null,v=Rs(t.missing)?KZ(t.missing):null,b=Rs(t.postTranslation)?t.postTranslation:null,_=i?i.warnHtmlMessage:Vi(t.warnHtmlMessage)?t.warnHtmlMessage:!0,S=!!t.escapeParameter;const M=i?i.modifiers:gi(t.modifiers)?t.modifiers:{};let x=t.pluralRules||i&&i.pluralRules,T;T=(()=>{r&&jZ(null);const O={version:PZe,locale:n.value,fallbackLocale:o.value,messages:a.value,modifiers:M,pluralRules:x,missing:v===null?void 0:v,missingWarn:c,fallbackWarn:d,fallbackFormat:m,unresolving:!0,postTranslation:b===null?void 0:b,warnHtmlMessage:_,escapeParameter:S,messageResolver:t.messageResolver,__meta:{framework:"vue"}};O.datetimeFormats=l.value,O.numberFormats=u.value,O.__datetimeFormatters=gi(T)?T.__datetimeFormatters:void 0,O.__numberFormatters=gi(T)?T.__numberFormatters:void 0;const C=AZe(O);return r&&jZ(C),C})(),s2(T,n.value,o.value);function $(){return[n.value,o.value,a.value,l.value,u.value]}const L=Ri({get:()=>n.value,set:O=>{n.value=O,T.locale=n.value}}),B=Ri({get:()=>o.value,set:O=>{o.value=O,T.fallbackLocale=o.value,s2(T,n.value,O)}}),z=Ri(()=>a.value),H=Ri(()=>l.value),J=Ri(()=>u.value);function K(){return Rs(b)?b:null}function Q(O){b=O,T.postTranslation=O}function y(){return g}function A(O){O!==null&&(v=KZ(O)),g=O,T.missing=v}const N=(O,C,G,Z,F,ie)=>{$();let ge;if(__INTLIFY_PROD_DEVTOOLS__)try{DZ(FZe()),r||(T.fallbackContext=i?MZe():void 0),ge=O(T)}finally{DZ(null),r||(T.fallbackContext=void 0)}else ge=O(T);if(dn(ge)&&ge===T$){const[xe,fe]=C();return i&&f?Z(i):F(xe)}else{if(ie(ge))return ge;throw gn(Zs.UNEXPECTED_RETURN_TYPE)}};function D(...O){return N(C=>Reflect.apply(zZ,null,[C,...O]),()=>cF(...O),"translate",C=>Reflect.apply(C.t,C,[...O]),C=>C,C=>$t(C))}function ne(...O){const[C,G,Z]=O;if(Z&&!Or(Z))throw gn(Zs.INVALID_ARGUMENT);return D(C,G,Rn({resolvedMessage:!0},Z||{}))}function q(...O){return N(C=>Reflect.apply(GZ,null,[C,...O]),()=>hF(...O),"datetime format",C=>Reflect.apply(C.d,C,[...O]),()=>NZ,C=>$t(C))}function he(...O){return N(C=>Reflect.apply(HZ,null,[C,...O]),()=>dF(...O),"number format",C=>Reflect.apply(C.n,C,[...O]),()=>NZ,C=>$t(C))}function te(O){return O.map(C=>$t(C)||dn(C)||Vi(C)?JZ(String(C)):C)}const ve={normalize:te,interpolate:O=>O,type:"vnode"};function _e(...O){return N(C=>{let G;const Z=C;try{Z.processor=ve,G=Reflect.apply(zZ,null,[Z,...O])}finally{Z.processor=null}return G},()=>cF(...O),"translate",C=>C[pF](...O),C=>[JZ(C)],C=>$r(C))}function Se(...O){return N(C=>Reflect.apply(HZ,null,[C,...O]),()=>dF(...O),"number format",C=>C[mF](...O),()=>[],C=>$t(C)||$r(C))}function Oe(...O){return N(C=>Reflect.apply(GZ,null,[C,...O]),()=>hF(...O),"datetime format",C=>C[fF](...O),()=>[],C=>$t(C)||$r(C))}function Te(O){x=O,T.pluralRules=x}function we(O,C){const G=$t(C)?C:n.value,Z=W(G);return T.messageResolver(Z,O)!==null}function Ie(O){let C=null;const G=Vde(T,o.value,n.value);for(let Z=0;Z<G.length;Z++){const F=a.value[G[Z]]||{},ie=T.messageResolver(F,O);if(ie!=null){C=ie;break}}return C}function Ae(O){const C=Ie(O);return C??(i?i.tm(O)||{}:{})}function W(O){return a.value[O]||{}}function V(O,C){a.value[O]=C,T.messages=a.value}function j(O,C){a.value[O]=a.value[O]||{},oS(C,a.value[O]),T.messages=a.value}function se(O){return l.value[O]||{}}function ye(O,C){l.value[O]=C,T.datetimeFormats=l.value,qZ(T,O,C)}function ae(O,C){l.value[O]=Rn(l.value[O]||{},C),T.datetimeFormats=l.value,qZ(T,O,C)}function U(O){return u.value[O]||{}}function le(O,C){u.value[O]=C,T.numberFormats=u.value,WZ(T,O,C)}function re(O,C){u.value[O]=Rn(u.value[O]||{},C),T.numberFormats=u.value,WZ(T,O,C)}YZ++,i&&lF&&(Js(i.locale,O=>{s&&(n.value=O,T.locale=O,s2(T,n.value,o.value))}),Js(i.fallbackLocale,O=>{s&&(o.value=O,T.fallbackLocale=O,s2(T,n.value,o.value))}));const k={id:YZ,locale:L,fallbackLocale:B,get inheritLocale(){return s},set inheritLocale(O){s=O,O&&i&&(n.value=i.locale.value,o.value=i.fallbackLocale.value,s2(T,n.value,o.value))},get availableLocales(){return Object.keys(a.value).sort()},messages:z,get modifiers(){return M},get pluralRules(){return x||{}},get isGlobal(){return r},get missingWarn(){return c},set missingWarn(O){c=O,T.missingWarn=c},get fallbackWarn(){return d},set fallbackWarn(O){d=O,T.fallbackWarn=d},get fallbackRoot(){return f},set fallbackRoot(O){f=O},get fallbackFormat(){return m},set fallbackFormat(O){m=O,T.fallbackFormat=m},get warnHtmlMessage(){return _},set warnHtmlMessage(O){_=O,T.warnHtmlMessage=O},get escapeParameter(){return S},set escapeParameter(O){S=O,T.escapeParameter=O},t:D,getLocaleMessage:W,setLocaleMessage:V,mergeLocaleMessage:j,getPostTranslationHandler:K,setPostTranslationHandler:Q,getMissingHandler:y,setMissingHandler:A,[Xde]:Te};return k.datetimeFormats=H,k.numberFormats=J,k.rt=ne,k.te=we,k.tm=Ae,k.d=q,k.n=he,k.getDateTimeFormat=se,k.setDateTimeFormat=ye,k.mergeDateTimeFormat=ae,k.getNumberFormat=U,k.setNumberFormat=le,k.mergeNumberFormat=re,k[epe]=t.__injectWithOption,k[pF]=_e,k[fF]=Oe,k[mF]=Se,k}function DZe(t){const e=$t(t.locale)?t.locale:SE,i=$t(t.fallbackLocale)||$r(t.fallbackLocale)||gi(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:e,r=Rs(t.missing)?t.missing:void 0,s=Vi(t.silentTranslationWarn)||Vm(t.silentTranslationWarn)?!t.silentTranslationWarn:!0,n=Vi(t.silentFallbackWarn)||Vm(t.silentFallbackWarn)?!t.silentFallbackWarn:!0,o=Vi(t.fallbackRoot)?t.fallbackRoot:!0,a=!!t.formatFallbackMessages,l=gi(t.modifiers)?t.modifiers:{},u=t.pluralizationRules,c=Rs(t.postTranslation)?t.postTranslation:void 0,d=$t(t.warnHtmlInMessage)?t.warnHtmlInMessage!=="off":!0,f=!!t.escapeParameterHtml,m=Vi(t.sync)?t.sync:!0;let g=t.messages;if(gi(t.sharedMessages)){const T=t.sharedMessages;g=Object.keys(T).reduce(($,L)=>{const B=$[L]||($[L]={});return Rn(B,T[L]),$},g||{})}const{__i18n:v,__root:b,__injectWithOption:_}=t,S=t.datetimeFormats,M=t.numberFormats,x=t.flatJson;return{locale:e,fallbackLocale:i,messages:g,flatJson:x,datetimeFormats:S,numberFormats:M,missing:r,missingWarn:s,fallbackWarn:n,fallbackRoot:o,fallbackFormat:a,modifiers:l,pluralRules:u,postTranslation:c,warnHtmlMessage:d,escapeParameter:f,messageResolver:t.messageResolver,inheritLocale:m,__i18n:v,__root:b,__injectWithOption:_}}function gF(t={},e){{const i=vU(DZe(t)),r={id:i.id,get locale(){return i.locale.value},set locale(s){i.locale.value=s},get fallbackLocale(){return i.fallbackLocale.value},set fallbackLocale(s){i.fallbackLocale.value=s},get messages(){return i.messages.value},get datetimeFormats(){return i.datetimeFormats.value},get numberFormats(){return i.numberFormats.value},get availableLocales(){return i.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(s){},get missing(){return i.getMissingHandler()},set missing(s){i.setMissingHandler(s)},get silentTranslationWarn(){return Vi(i.missingWarn)?!i.missingWarn:i.missingWarn},set silentTranslationWarn(s){i.missingWarn=Vi(s)?!s:s},get silentFallbackWarn(){return Vi(i.fallbackWarn)?!i.fallbackWarn:i.fallbackWarn},set silentFallbackWarn(s){i.fallbackWarn=Vi(s)?!s:s},get modifiers(){return i.modifiers},get formatFallbackMessages(){return i.fallbackFormat},set formatFallbackMessages(s){i.fallbackFormat=s},get postTranslation(){return i.getPostTranslationHandler()},set postTranslation(s){i.setPostTranslationHandler(s)},get sync(){return i.inheritLocale},set sync(s){i.inheritLocale=s},get warnHtmlInMessage(){return i.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(s){i.warnHtmlMessage=s!=="off"},get escapeParameterHtml(){return i.escapeParameter},set escapeParameterHtml(s){i.escapeParameter=s},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(s){},get pluralizationRules(){return i.pluralRules||{}},__composer:i,t(...s){const[n,o,a]=s,l={};let u=null,c=null;if(!$t(n))throw gn(Zs.INVALID_ARGUMENT);const d=n;return $t(o)?l.locale=o:$r(o)?u=o:gi(o)&&(c=o),$r(a)?u=a:gi(a)&&(c=a),Reflect.apply(i.t,i,[d,u||c||{},l])},rt(...s){return Reflect.apply(i.rt,i,[...s])},tc(...s){const[n,o,a]=s,l={plural:1};let u=null,c=null;if(!$t(n))throw gn(Zs.INVALID_ARGUMENT);const d=n;return $t(o)?l.locale=o:dn(o)?l.plural=o:$r(o)?u=o:gi(o)&&(c=o),$t(a)?l.locale=a:$r(a)?u=a:gi(a)&&(c=a),Reflect.apply(i.t,i,[d,u||c||{},l])},te(s,n){return i.te(s,n)},tm(s){return i.tm(s)},getLocaleMessage(s){return i.getLocaleMessage(s)},setLocaleMessage(s,n){i.setLocaleMessage(s,n)},mergeLocaleMessage(s,n){i.mergeLocaleMessage(s,n)},d(...s){return Reflect.apply(i.d,i,[...s])},getDateTimeFormat(s){return i.getDateTimeFormat(s)},setDateTimeFormat(s,n){i.setDateTimeFormat(s,n)},mergeDateTimeFormat(s,n){i.mergeDateTimeFormat(s,n)},n(...s){return Reflect.apply(i.n,i,[...s])},getNumberFormat(s){return i.getNumberFormat(s)},setNumberFormat(s,n){i.setNumberFormat(s,n)},mergeNumberFormat(s,n){i.mergeNumberFormat(s,n)},getChoiceIndex(s,n){return-1},__onComponentInstanceCreated(s){const{componentInstanceCreatedListener:n}=t;n&&n(s,r)}};return r}}const bU={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function jZe({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((r,s)=>r=[...r,...$r(s.children)?s.children:[s]],[]):e.reduce((i,r)=>{const s=t[r];return s&&(i[r]=s()),i},{})}function rpe(t){return Cr}const QZ={name:"i18n-t",props:Rn({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>dn(t)||!isNaN(t)}},bU),setup(t,e){const{slots:i,attrs:r}=e,s=t.i18n||Kr({useScope:t.scope,__useComponent:!0});return()=>{const n=Object.keys(i).filter(d=>d!=="_"),o={};t.locale&&(o.locale=t.locale),t.plural!==void 0&&(o.plural=$t(t.plural)?+t.plural:t.plural);const a=jZe(e,n),l=s[pF](t.keypath,a,o),u=Rn({},r),c=$t(t.tag)||Or(t.tag)?t.tag:rpe();return Hh(c,u,l)}}};function UZe(t){return $r(t)&&!$t(t[0])}function spe(t,e,i,r){const{slots:s,attrs:n}=e;return()=>{const o={part:!0};let a={};t.locale&&(o.locale=t.locale),$t(t.format)?o.key=t.format:Or(t.format)&&($t(t.format.key)&&(o.key=t.format.key),a=Object.keys(t.format).reduce((f,m)=>i.includes(m)?Rn({},f,{[m]:t.format[m]}):f,{}));const l=r(t.value,o,a);let u=[o.key];$r(l)?u=l.map((f,m)=>{const g=s[f.type],v=g?g({[f.type]:f.value,index:m,parts:l}):[f.value];return UZe(v)&&(v[0].key=`${f.type}-${m}`),v}):$t(l)&&(u=[l]);const c=Rn({},n),d=$t(t.tag)||Or(t.tag)?t.tag:rpe();return Hh(d,c,u)}}const XZ={name:"i18n-n",props:Rn({value:{type:Number,required:!0},format:{type:[String,Object]}},bU),setup(t,e){const i=t.i18n||Kr({useScope:"parent",__useComponent:!0});return spe(t,e,Kde,(...r)=>i[mF](...r))}},eY={name:"i18n-d",props:Rn({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},bU),setup(t,e){const i=t.i18n||Kr({useScope:"parent",__useComponent:!0});return spe(t,e,Yde,(...r)=>i[fF](...r))}};function VZe(t,e){const i=t;if(t.mode==="composition")return i.__getInstance(e)||t.global;{const r=i.__getInstance(e);return r!=null?r.__composer:t.global.__composer}}function BZe(t){const e=o=>{const{instance:a,modifiers:l,value:u}=o;if(!a||!a.$)throw gn(Zs.UNEXPECTED_ERROR);const c=VZe(t,a.$),d=tY(u);return[Reflect.apply(c.t,c,[...iY(d)]),c]};return{created:(o,a)=>{const[l,u]=e(a);lF&&t.global===u&&(o.__i18nWatcher=Js(u.locale,()=>{a.instance&&a.instance.$forceUpdate()})),o.__composer=u,o.textContent=l},unmounted:o=>{lF&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:a})=>{if(o.__composer){const l=o.__composer,u=tY(a);o.textContent=Reflect.apply(l.t,l,[...iY(u)])}},getSSRProps:o=>{const[a]=e(o);return{textContent:a}}}}function tY(t){if($t(t))return{path:t};if(gi(t)){if(!("path"in t))throw gn(Zs.REQUIRED_VALUE,"path");return t}else throw gn(Zs.INVALID_VALUE)}function iY(t){const{path:e,locale:i,args:r,choice:s,plural:n}=t,o={},a=r||{};return $t(i)&&(o.locale=i),dn(s)&&(o.plural=s),dn(n)&&(o.plural=n),[e,a,o]}function zZe(t,e,...i){const r=gi(i[0])?i[0]:{},s=!!r.useI18nComponentName;(Vi(r.globalInstall)?r.globalInstall:!0)&&(t.component(s?"i18n":QZ.name,QZ),t.component(XZ.name,XZ),t.component(eY.name,eY)),t.directive("t",BZe(e))}function GZe(t,e,i){return{beforeCreate(){const r=Ln();if(!r)throw gn(Zs.UNEXPECTED_ERROR);const s=this.$options;if(s.i18n){const n=s.i18n;s.__i18n&&(n.__i18n=s.__i18n),n.__root=e,this===this.$root?this.$i18n=rY(t,n):(n.__injectWithOption=!0,this.$i18n=gF(n))}else s.__i18n?this===this.$root?this.$i18n=rY(t,s):this.$i18n=gF({__i18n:s.__i18n,__injectWithOption:!0,__root:e}):this.$i18n=t;s.__i18nGlobal&&ipe(e,s,s),t.__onComponentInstanceCreated(this.$i18n),i.__setInstance(r,this.$i18n),this.$t=(...n)=>this.$i18n.t(...n),this.$rt=(...n)=>this.$i18n.rt(...n),this.$tc=(...n)=>this.$i18n.tc(...n),this.$te=(n,o)=>this.$i18n.te(n,o),this.$d=(...n)=>this.$i18n.d(...n),this.$n=(...n)=>this.$i18n.n(...n),this.$tm=n=>this.$i18n.tm(n)},mounted(){},unmounted(){const r=Ln();if(!r)throw gn(Zs.UNEXPECTED_ERROR);delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,i.__deleteInstance(r),delete this.$i18n}}}function rY(t,e){t.locale=e.locale||t.locale,t.fallbackLocale=e.fallbackLocale||t.fallbackLocale,t.missing=e.missing||t.missing,t.silentTranslationWarn=e.silentTranslationWarn||t.silentFallbackWarn,t.silentFallbackWarn=e.silentFallbackWarn||t.silentFallbackWarn,t.formatFallbackMessages=e.formatFallbackMessages||t.formatFallbackMessages,t.postTranslation=e.postTranslation||t.postTranslation,t.warnHtmlInMessage=e.warnHtmlInMessage||t.warnHtmlInMessage,t.escapeParameterHtml=e.escapeParameterHtml||t.escapeParameterHtml,t.sync=e.sync||t.sync,t.__composer[Xde](e.pluralizationRules||t.pluralizationRules);const i=I$(t.locale,{messages:e.messages,__i18n:e.__i18n});return Object.keys(i).forEach(r=>t.mergeLocaleMessage(r,i[r])),e.datetimeFormats&&Object.keys(e.datetimeFormats).forEach(r=>t.mergeDateTimeFormat(r,e.datetimeFormats[r])),e.numberFormats&&Object.keys(e.numberFormats).forEach(r=>t.mergeNumberFormat(r,e.numberFormats[r])),t}const qZe=oy("global-vue-i18n");function HZe(t={},e){const i=__VUE_I18N_LEGACY_API__&&Vi(t.legacy)?t.legacy:__VUE_I18N_LEGACY_API__,r=Vi(t.globalInjection)?t.globalInjection:!0,s=__VUE_I18N_LEGACY_API__&&i?!!t.allowComposition:!0,n=new Map,[o,a]=WZe(t,i),l=oy("");function u(f){return n.get(f)||null}function c(f,m){n.set(f,m)}function d(f){n.delete(f)}{const f={get mode(){return __VUE_I18N_LEGACY_API__&&i?"legacy":"composition"},get allowComposition(){return s},async install(m,...g){m.__VUE_I18N_SYMBOL__=l,m.provide(m.__VUE_I18N_SYMBOL__,f),!i&&r&&iYe(m,f.global),__VUE_I18N_FULL_INSTALL__&&zZe(m,f,...g),__VUE_I18N_LEGACY_API__&&i&&m.mixin(GZe(a,a.__composer,f));const v=m.unmount;m.unmount=()=>{f.dispose(),v()}},get global(){return a},dispose(){o.stop()},__instances:n,__getInstance:u,__setInstance:c,__deleteInstance:d};return f}}function Kr(t={}){const e=Ln();if(e==null)throw gn(Zs.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw gn(Zs.NOT_INSLALLED);const i=JZe(e),r=YZe(i),s=tpe(e),n=ZZe(t,s);if(__VUE_I18N_LEGACY_API__&&i.mode==="legacy"&&!t.__useComponent){if(!i.allowComposition)throw gn(Zs.NOT_AVAILABLE_IN_LEGACY_MODE);return XZe(e,n,r,t)}if(n==="global")return ipe(r,t,s),r;if(n==="parent"){let l=KZe(i,e,t.__useComponent);return l==null&&(l=r),l}const o=i;let a=o.__getInstance(e);if(a==null){const l=Rn({},t);"__i18n"in s&&(l.__i18n=s.__i18n),r&&(l.__root=r),a=vU(l),QZe(o,e),o.__setInstance(e,a)}return a}function WZe(t,e,i){const r=pE();{const s=__VUE_I18N_LEGACY_API__&&e?r.run(()=>gF(t)):r.run(()=>vU(t));if(s==null)throw gn(Zs.UNEXPECTED_ERROR);return[r,s]}}function JZe(t){{const e=mn(t.isCE?qZe:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw gn(t.isCE?Zs.NOT_INSLALLED_WITH_PROVIDE:Zs.UNEXPECTED_ERROR);return e}}function ZZe(t,e){return S$(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function YZe(t){return t.mode==="composition"?t.global:t.global.__composer}function KZe(t,e,i=!1){let r=null;const s=e.root;let n=e.parent;for(;n!=null;){const o=t;if(t.mode==="composition")r=o.__getInstance(n);else if(__VUE_I18N_LEGACY_API__){const a=o.__getInstance(n);a!=null&&(r=a.__composer,i&&r&&!r[epe]&&(r=null))}if(r!=null||s===n)break;n=n.parent}return r}function QZe(t,e,i){Co(()=>{},e),g1(()=>{t.__deleteInstance(e)},e)}function XZe(t,e,i,r={}){const s=e==="local",n=cj(null);if(s&&t.proxy&&!(t.proxy.$options.i18n||t.proxy.$options.__i18n))throw gn(Zs.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const o=Vi(r.inheritLocale)?r.inheritLocale:!0,a=Xe(s&&o?i.locale.value:$t(r.locale)?r.locale:SE),l=Xe(s&&o?i.fallbackLocale.value:$t(r.fallbackLocale)||$r(r.fallbackLocale)||gi(r.fallbackLocale)||r.fallbackLocale===!1?r.fallbackLocale:a.value),u=Xe(I$(a.value,r)),c=Xe(gi(r.datetimeFormats)?r.datetimeFormats:{[a.value]:{}}),d=Xe(gi(r.numberFormats)?r.numberFormats:{[a.value]:{}}),f=s?i.missingWarn:Vi(r.missingWarn)||Vm(r.missingWarn)?r.missingWarn:!0,m=s?i.fallbackWarn:Vi(r.fallbackWarn)||Vm(r.fallbackWarn)?r.fallbackWarn:!0,g=s?i.fallbackRoot:Vi(r.fallbackRoot)?r.fallbackRoot:!0,v=!!r.fallbackFormat,b=Rs(r.missing)?r.missing:null,_=Rs(r.postTranslation)?r.postTranslation:null,S=s?i.warnHtmlMessage:Vi(r.warnHtmlMessage)?r.warnHtmlMessage:!0,M=!!r.escapeParameter,x=s?i.modifiers:gi(r.modifiers)?r.modifiers:{},T=r.pluralRules||s&&i.pluralRules;function I(){return[a.value,l.value,u.value,c.value,d.value]}const $=Ri({get:()=>n.value?n.value.locale.value:a.value,set:j=>{n.value&&(n.value.locale.value=j),a.value=j}}),L=Ri({get:()=>n.value?n.value.fallbackLocale.value:l.value,set:j=>{n.value&&(n.value.fallbackLocale.value=j),l.value=j}}),B=Ri(()=>n.value?n.value.messages.value:u.value),z=Ri(()=>c.value),H=Ri(()=>d.value);function J(){return n.value?n.value.getPostTranslationHandler():_}function K(j){n.value&&n.value.setPostTranslationHandler(j)}function Q(){return n.value?n.value.getMissingHandler():b}function y(j){n.value&&n.value.setMissingHandler(j)}function A(j){return I(),j()}function N(...j){return n.value?A(()=>Reflect.apply(n.value.t,null,[...j])):A(()=>"")}function D(...j){return n.value?Reflect.apply(n.value.rt,null,[...j]):""}function ne(...j){return n.value?A(()=>Reflect.apply(n.value.d,null,[...j])):A(()=>"")}function q(...j){return n.value?A(()=>Reflect.apply(n.value.n,null,[...j])):A(()=>"")}function he(j){return n.value?n.value.tm(j):{}}function te(j,se){return n.value?n.value.te(j,se):!1}function me(j){return n.value?n.value.getLocaleMessage(j):{}}function ve(j,se){n.value&&(n.value.setLocaleMessage(j,se),u.value[j]=se)}function _e(j,se){n.value&&n.value.mergeLocaleMessage(j,se)}function Se(j){return n.value?n.value.getDateTimeFormat(j):{}}function Oe(j,se){n.value&&(n.value.setDateTimeFormat(j,se),c.value[j]=se)}function Te(j,se){n.value&&n.value.mergeDateTimeFormat(j,se)}function we(j){return n.value?n.value.getNumberFormat(j):{}}function Ie(j,se){n.value&&(n.value.setNumberFormat(j,se),d.value[j]=se)}function Ae(j,se){n.value&&n.value.mergeNumberFormat(j,se)}const W={get id(){return n.value?n.value.id:-1},locale:$,fallbackLocale:L,messages:B,datetimeFormats:z,numberFormats:H,get inheritLocale(){return n.value?n.value.inheritLocale:o},set inheritLocale(j){n.value&&(n.value.inheritLocale=j)},get availableLocales(){return n.value?n.value.availableLocales:Object.keys(u.value)},get modifiers(){return n.value?n.value.modifiers:x},get pluralRules(){return n.value?n.value.pluralRules:T},get isGlobal(){return n.value?n.value.isGlobal:!1},get missingWarn(){return n.value?n.value.missingWarn:f},set missingWarn(j){n.value&&(n.value.missingWarn=j)},get fallbackWarn(){return n.value?n.value.fallbackWarn:m},set fallbackWarn(j){n.value&&(n.value.missingWarn=j)},get fallbackRoot(){return n.value?n.value.fallbackRoot:g},set fallbackRoot(j){n.value&&(n.value.fallbackRoot=j)},get fallbackFormat(){return n.value?n.value.fallbackFormat:v},set fallbackFormat(j){n.value&&(n.value.fallbackFormat=j)},get warnHtmlMessage(){return n.value?n.value.warnHtmlMessage:S},set warnHtmlMessage(j){n.value&&(n.value.warnHtmlMessage=j)},get escapeParameter(){return n.value?n.value.escapeParameter:M},set escapeParameter(j){n.value&&(n.value.escapeParameter=j)},t:N,getPostTranslationHandler:J,setPostTranslationHandler:K,getMissingHandler:Q,setMissingHandler:y,rt:D,d:ne,n:q,tm:he,te,getLocaleMessage:me,setLocaleMessage:ve,mergeLocaleMessage:_e,getDateTimeFormat:Se,setDateTimeFormat:Oe,mergeDateTimeFormat:Te,getNumberFormat:we,setNumberFormat:Ie,mergeNumberFormat:Ae};function V(j){j.locale.value=a.value,j.fallbackLocale.value=l.value,Object.keys(u.value).forEach(se=>{j.mergeLocaleMessage(se,u.value[se])}),Object.keys(c.value).forEach(se=>{j.mergeDateTimeFormat(se,c.value[se])}),Object.keys(d.value).forEach(se=>{j.mergeNumberFormat(se,d.value[se])}),j.escapeParameter=M,j.fallbackFormat=v,j.fallbackRoot=g,j.fallbackWarn=m,j.missingWarn=f,j.warnHtmlMessage=S}return l$(()=>{if(t.proxy==null||t.proxy.$i18n==null)throw gn(Zs.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const j=n.value=t.proxy.$i18n.__composer;e==="global"?(a.value=j.locale.value,l.value=j.fallbackLocale.value,u.value=j.messages.value,c.value=j.datetimeFormats.value,d.value=j.numberFormats.value):s&&V(j)}),W}const eYe=["locale","fallbackLocale","availableLocales"],tYe=["t","rt","d","n","tm"];function iYe(t,e){const i=Object.create(null);eYe.forEach(r=>{const s=Object.getOwnPropertyDescriptor(e,r);if(!s)throw gn(Zs.UNEXPECTED_ERROR);const n=ir(s.value)?{get(){return s.value.value},set(o){s.value.value=o}}:{get(){return s.get&&s.get()}};Object.defineProperty(i,r,n)}),t.config.globalProperties.$i18n=i,tYe.forEach(r=>{const s=Object.getOwnPropertyDescriptor(e,r);if(!s||!s.value)throw gn(Zs.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${r}`,s)})}SZe($Ze);EZe(nZe);TZe(Vde);NZe();if(__INTLIFY_PROD_DEVTOOLS__){const t=nS();t.__INTLIFY__=!0,fZe(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const rYe={en:{"lang-code":"en","lang-dir":"ltr","lang-en":"English","lang-fr":"anglais","lang-native":"English","ramp.about.open":"Open About RAMP","ramp.about":"About RAMP","keyboardInstructions.title":"Keyboard Instructions","keyboardInstructions.open":"Open keyboard instructions","keyboardInstructions.app":"Use 'Tab' to navigate between sections of the application.","keyboardInstructions.lists":"Use the arrow keys to move between items in lists. With a list item selected you can press 'Space' or 'Enter' to click the item. You can also navigate within the list item using 'Tab'.","keyboardInstructions.map":"When the map is selected, use the arrow keys to move around and 'Enter' to select a point.","keyboardInstructions.OK":"OK","map.toggleScaleToMetric":"Switch to metric map scale","map.toggleScaleToImperial":"Switch to imperial map scale","map.coordinates.east":"E","map.coordinates.west":"W","map.coordinates.north":"N","map.coordinates.south":"S","map.changeLanguage":"Change Language","map.language.short":"EN-CA","map.language.en":"English","map.language.fr":"Français","map.language.curr":"current","map.export":"export map","notifications.open":"Open Notifications Panel","notifications.title":"Notifications","notifications.empty":"No new notifications.","notifications.controls.dismiss":"Dismiss","notifications.controls.expand":"Expand","notifications.controls.collapse":"Collapse","notifications.controls.clearAll":"Clear All","panels.access":"Press enter or space to access the panel","panels.controls.close":"Close","panels.controls.pin":"Pin","panels.controls.unpin":"Unpin","panels.controls.back":"Back","panels.controls.optionsMenu":"More","panels.controls.minimize":"Minimize","panels.controls.expand":"Expand","panels.controls.collapse":"Collapse","panels.controls.moveRight":"Move Right","panels.controls.moveLeft":"Move Left","panels.alert.open":"{name} panel opened","panels.alert.close":"{name} panel closed","panels.alert.minimize":"{name} panel minimized","layer.error":"{id} failed to load","layer.longload":"{id} is taking longer than expected to load","layer.longdraw":"{id} is taking longer than expected to draw","layer.mismatch":"{name} cannot be displayed in the current projection","layer.filtersdisabled":"Filters have been disabled for {name}","layer.filterwarning":"You are attempting to use a grid that contains unmodifiable layers. Filtering will be partially disabled"},fr:{"lang-code":"fr","lang-dir":"ltr","lang-en":"French","lang-fr":"français","lang-native":"Français","ramp.about.open":"Ouvrir À propos de PCAR","ramp.about":"À propos de PCAR","keyboardInstructions.title":"Instructions clavier","keyboardInstructions.open":"Instructions clavier ouvert","keyboardInstructions.app":"Utilisez la touche Tab pour vous déplacer entre les sections de l'application.","keyboardInstructions.lists":"Lorsqu'un élément de la liste est sélectionné, vous pouvez appuyer sur « Espace » ou « Entrée » pour cliquer sur l'élément. Vous pouvez également vous déplacer au sein de l'élément de la liste au moyen de la touche « Tab ».","keyboardInstructions.map":"Lorsque la carte est sélectionnée, utilisez le pavé curseur pour vous déplacer et appuyez sur « Entrée »  pour sélectionner un point.","keyboardInstructions.OK":"OK","map.toggleScaleToMetric":"Passer à l'échelle métrique de la carte","map.toggleScaleToImperial":"Passer à l'échelle impériale de la carte","map.coordinates.east":"E","map.coordinates.west":"O","map.coordinates.north":"N","map.coordinates.south":"S","map.changeLanguage":"Changer de langue","map.language.short":"FR-CA","map.language.en":"English","map.language.fr":"Français","map.language.curr":"actuel","map.export":"exporter la carte","notifications.open":"Ouvrir la fenêtre des notifications","notifications.title":"Notifications","notifications.empty":"Aucune nouvelle notification.","notifications.controls.dismiss":"Rejeter","notifications.controls.expand":"Développer","notifications.controls.collapse":"Réduire","notifications.controls.clearAll":"Effacer tout","panels.access":"Appuyez sur Entrée ou Espace pour accéder au panneau","panels.controls.close":"Fermer","panels.controls.pin":"Épingler","panels.controls.unpin":"Désépingler","panels.controls.back":"Retour","panels.controls.optionsMenu":"Plus","panels.controls.minimize":"Réduire","panels.controls.expand":"Développer","panels.controls.collapse":"Réduire","panels.controls.moveRight":"Aller à droite","panels.controls.moveLeft":"Aller à gauche","panels.alert.open":"Fenêtre {name} ouverte","panels.alert.close":"Fenêtre {name} fermée","panels.alert.minimize":"Fenêtre {name} réduite","layer.error":"Échec du chargement de {id}","layer.longload":"Le chargement de {id} met plus de temps que prévu","layer.longdraw":"{id} prend plus de temps que prévu à extraire","layer.mismatch":"{name} ne peut pas être affiché dans la projection actuelle","layer.filtersdisabled":"Les filtres ont été désactivés par {name}","layer.filterwarning":"Vous tentez d'utiliser une grille contenant des calques non modifiables. Le filtrage sera partiellement désactivé"}},sY="en",sYe={en:{number:{style:"decimal",useGrouping:!1,maximumFractionDigits:20}},fr:{number:{style:"decimal",useGrouping:!1,maximumFractionDigits:20}}};function nYe(){return HZe({legacy:!1,locale:document.documentElement.getAttribute("lang")||sY,fallbackLocale:sY,globalInjection:!0,messages:rYe,numberFormats:sYe})}var npe={exports:{}};/*!
* screenfull
* v5.0.2 - 2020-02-13
* (c) Sindre Sorhus; MIT License
*/(function(t){(function(){var e=typeof window<"u"&&typeof window.document<"u"?window.document:{},i=t.exports,r=function(){for(var o,a=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],l=0,u=a.length,c={};l<u;l++)if(o=a[l],o&&o[1]in e){for(l=0;l<o.length;l++)c[a[0][l]]=o[l];return c}return!1}(),s={change:r.fullscreenchange,error:r.fullscreenerror},n={request:function(o){return new Promise(function(a,l){var u=function(){this.off("change",u),a()}.bind(this);this.on("change",u),o=o||e.documentElement;var c=o[r.requestFullscreen]();c instanceof Promise&&c.then(u).catch(l)}.bind(this))},exit:function(){return new Promise(function(o,a){if(!this.isFullscreen){o();return}var l=function(){this.off("change",l),o()}.bind(this);this.on("change",l);var u=e[r.exitFullscreen]();u instanceof Promise&&u.then(l).catch(a)}.bind(this))},toggle:function(o){return this.isFullscreen?this.exit():this.request(o)},onchange:function(o){this.on("change",o)},onerror:function(o){this.on("error",o)},on:function(o,a){var l=s[o];l&&e.addEventListener(l,a,!1)},off:function(o,a){var l=s[o];l&&e.removeEventListener(l,a,!1)},raw:r};if(!r){i?t.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};return}Object.defineProperties(n,{isFullscreen:{get:function(){return!!e[r.fullscreenElement]}},element:{enumerable:!0,get:function(){return e[r.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!e[r.fullscreenEnabled]}}}),i?t.exports=n:window.screenfull=n})()})(npe);var oYe=npe.exports;const Vc=n_(oYe);var a4={exports:{}};a4.exports;(function(t,e){var i=200,r="__lodash_hash_undefined__",s=9007199254740991,n="[object Arguments]",o="[object Array]",a="[object Boolean]",l="[object Date]",u="[object Error]",c="[object Function]",d="[object GeneratorFunction]",f="[object Map]",m="[object Number]",g="[object Object]",v="[object Promise]",b="[object RegExp]",_="[object Set]",S="[object String]",M="[object Symbol]",x="[object WeakMap]",T="[object ArrayBuffer]",I="[object DataView]",$="[object Float32Array]",L="[object Float64Array]",B="[object Int8Array]",z="[object Int16Array]",H="[object Int32Array]",J="[object Uint8Array]",K="[object Uint8ClampedArray]",Q="[object Uint16Array]",y="[object Uint32Array]",A=/[\\^$.*+?()[\]{}|]/g,N=/\w*$/,D=/^\[object .+?Constructor\]$/,ne=/^(?:0|[1-9]\d*)$/,q={};q[n]=q[o]=q[T]=q[I]=q[a]=q[l]=q[$]=q[L]=q[B]=q[z]=q[H]=q[f]=q[m]=q[g]=q[b]=q[_]=q[S]=q[M]=q[J]=q[K]=q[Q]=q[y]=!0,q[u]=q[c]=q[x]=!1;var he=typeof Hn=="object"&&Hn&&Hn.Object===Object&&Hn,te=typeof self=="object"&&self&&self.Object===Object&&self,me=he||te||Function("return this")(),ve=e&&!e.nodeType&&e,_e=ve&&!0&&t&&!t.nodeType&&t,Se=_e&&_e.exports===ve;function Oe(Me,qe){return Me.set(qe[0],qe[1]),Me}function Te(Me,qe){return Me.add(qe),Me}function we(Me,qe){for(var rt=-1,Vt=Me?Me.length:0;++rt<Vt&&qe(Me[rt],rt,Me)!==!1;);return Me}function Ie(Me,qe){for(var rt=-1,Vt=qe.length,ls=Me.length;++rt<Vt;)Me[ls+rt]=qe[rt];return Me}function Ae(Me,qe,rt,Vt){var ls=-1,Qs=Me?Me.length:0;for(Vt&&Qs&&(rt=Me[++ls]);++ls<Qs;)rt=qe(rt,Me[ls],ls,Me);return rt}function W(Me,qe){for(var rt=-1,Vt=Array(Me);++rt<Me;)Vt[rt]=qe(rt);return Vt}function V(Me,qe){return Me?.[qe]}function j(Me){var qe=!1;if(Me!=null&&typeof Me.toString!="function")try{qe=!!(Me+"")}catch{}return qe}function se(Me){var qe=-1,rt=Array(Me.size);return Me.forEach(function(Vt,ls){rt[++qe]=[ls,Vt]}),rt}function ye(Me,qe){return function(rt){return Me(qe(rt))}}function ae(Me){var qe=-1,rt=Array(Me.size);return Me.forEach(function(Vt){rt[++qe]=Vt}),rt}var U=Array.prototype,le=Function.prototype,re=Object.prototype,k=me["__core-js_shared__"],O=function(){var Me=/[^.]+$/.exec(k&&k.keys&&k.keys.IE_PROTO||"");return Me?"Symbol(src)_1."+Me:""}(),C=le.toString,G=re.hasOwnProperty,Z=re.toString,F=RegExp("^"+C.call(G).replace(A,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ie=Se?me.Buffer:void 0,ge=me.Symbol,xe=me.Uint8Array,fe=ye(Object.getPrototypeOf,Object),ze=Object.create,He=re.propertyIsEnumerable,et=U.splice,Ve=Object.getOwnPropertySymbols,be=ie?ie.isBuffer:void 0,ke=ye(Object.keys,Object),Ge=ku(me,"DataView"),ut=ku(me,"Map"),pt=ku(me,"Promise"),vt=ku(me,"Set"),kt=ku(me,"WeakMap"),dt=ku(Object,"create"),Wt=Lc(Ge),Gt=Lc(ut),Ti=Lc(pt),kr=Lc(vt),_n=Lc(kt),Wa=ge?ge.prototype:void 0,Ja=Wa?Wa.valueOf:void 0;function Za(Me){var qe=-1,rt=Me?Me.length:0;for(this.clear();++qe<rt;){var Vt=Me[qe];this.set(Vt[0],Vt[1])}}function jl(){this.__data__=dt?dt(null):{}}function Rp(Me){return this.has(Me)&&delete this.__data__[Me]}function Be(Me){var qe=this.__data__;if(dt){var rt=qe[Me];return rt===r?void 0:rt}return G.call(qe,Me)?qe[Me]:void 0}function Hi(Me){var qe=this.__data__;return dt?qe[Me]!==void 0:G.call(qe,Me)}function ta(Me,qe){var rt=this.__data__;return rt[Me]=dt&&qe===void 0?r:qe,this}Za.prototype.clear=jl,Za.prototype.delete=Rp,Za.prototype.get=Be,Za.prototype.has=Hi,Za.prototype.set=ta;function Pi(Me){var qe=-1,rt=Me?Me.length:0;for(this.clear();++qe<rt;){var Vt=Me[qe];this.set(Vt[0],Vt[1])}}function xn(){this.__data__=[]}function yt(Me){var qe=this.__data__,rt=Rc(qe,Me);if(rt<0)return!1;var Vt=qe.length-1;return rt==Vt?qe.pop():et.call(qe,rt,1),!0}function $o(Me){var qe=this.__data__,rt=Rc(qe,Me);return rt<0?void 0:qe[rt][1]}function vr(Me){return Rc(this.__data__,Me)>-1}function Oc(Me,qe){var rt=this.__data__,Vt=Rc(rt,Me);return Vt<0?rt.push([Me,qe]):rt[Vt][1]=qe,this}Pi.prototype.clear=xn,Pi.prototype.delete=yt,Pi.prototype.get=$o,Pi.prototype.has=vr,Pi.prototype.set=Oc;function Ru(Me){var qe=-1,rt=Me?Me.length:0;for(this.clear();++qe<rt;){var Vt=Me[qe];this.set(Vt[0],Vt[1])}}function Fn(){this.__data__={hash:new Za,map:new(ut||Pi),string:new Za}}function lt(Me){return E1(this,Me).delete(Me)}function b1(Me){return E1(this,Me).get(Me)}function ni(Me){return E1(this,Me).has(Me)}function f_(Me,qe){return E1(this,Me).set(Me,qe),this}Ru.prototype.clear=Fn,Ru.prototype.delete=lt,Ru.prototype.get=b1,Ru.prototype.has=ni,Ru.prototype.set=f_;function wt(Me){this.__data__=new Pi(Me)}function Es(){this.__data__=new Pi}function ia(Me){return this.__data__.delete(Me)}function Ni(Me){return this.__data__.get(Me)}function Xh(Me){return this.__data__.has(Me)}function br(Me,qe){var rt=this.__data__;if(rt instanceof Pi){var Vt=rt.__data__;if(!ut||Vt.length<i-1)return Vt.push([Me,qe]),this;rt=this.__data__=new Ru(Vt)}return rt.set(Me,qe),this}wt.prototype.clear=Es,wt.prototype.delete=ia,wt.prototype.get=Ni,wt.prototype.has=Xh,wt.prototype.set=br;function Di(Me,qe){var rt=T1(Me)||kE(Me)?W(Me.length,String):[],Vt=rt.length,ls=!!Vt;for(var Qs in Me)(qe||G.call(Me,Qs))&&!(ls&&(Qs=="length"||z$(Qs,Vt)))&&rt.push(Qs);return rt}function w1(Me,qe,rt){var Vt=Me[qe];(!(G.call(Me,qe)&&m_(Vt,rt))||rt===void 0&&!(qe in Me))&&(Me[qe]=rt)}function Rc(Me,qe){for(var rt=Me.length;rt--;)if(m_(Me[rt][0],qe))return rt;return-1}function hy(Me,qe){return Me&&Lt(qe,my(qe),Me)}function kc(Me,qe,rt,Vt,ls,Qs,ra){var Qn;if(Vt&&(Qn=Qs?Vt(Me,ls,Qs,ra):Vt(Me)),Qn!==void 0)return Qn;if(!A1(Me))return Me;var PE=T1(Me);if(PE){if(Qn=V$(Me),!qe)return Ul(Me,Qn)}else{var Ka=ei(Me),NE=Ka==c||Ka==d;if(I1(Me))return Lp(Me,qe);if(Ka==g||Ka==n||NE&&!Qs){if(j(Me))return Qs?Me:{};if(Qn=B$(NE?{}:Me),!qe)return Ya(Me,hy(Qn,Me))}else{if(!q[Ka])return Qs?Me:{};Qn=AE(Me,Ka,kc,qe)}}ra||(ra=new wt);var FE=ra.get(Me);if(FE)return FE;if(ra.set(Me,Qn),!PE)var DE=rt?dy(Me):my(Me);return we(DE||Me,function(Xs,Pc){DE&&(Pc=Xs,Xs=Me[Pc]),w1(Qn,Pc,kc(Xs,qe,rt,Vt,Pc,Me,ra))}),Qn}function _1(Me){return A1(Me)?ze(Me):{}}function x1(Me,qe,rt){var Vt=qe(Me);return T1(Me)?Vt:Ie(Vt,rt(Me))}function kp(Me){return Z.call(Me)}function Dn(Me){if(!A1(Me)||$E(Me))return!1;var qe=y_(Me)||j(Me)?F:D;return qe.test(Lc(Me))}function S1(Me){if(!OE(Me))return ke(Me);var qe=[];for(var rt in Object(Me))G.call(Me,rt)&&rt!="constructor"&&qe.push(rt);return qe}function Lp(Me,qe){if(qe)return Me.slice();var rt=new Me.constructor(Me.length);return Me.copy(rt),rt}function $e(Me){var qe=new Me.constructor(Me.byteLength);return new xe(qe).set(new xe(Me)),qe}function Qe(Me,qe){var rt=qe?$e(Me.buffer):Me.buffer;return new Me.constructor(rt,Me.byteOffset,Me.byteLength)}function ot(Me,qe,rt){var Vt=qe?rt(se(Me),!0):se(Me);return Ae(Vt,Oe,new Me.constructor)}function fi(Me){var qe=new Me.constructor(Me.source,N.exec(Me));return qe.lastIndex=Me.lastIndex,qe}function Ts(Me,qe,rt){var Vt=qe?rt(ae(Me),!0):ae(Me);return Ae(Vt,Te,new Me.constructor)}function mr(Me){return Ja?Object(Ja.call(Me)):{}}function Lr(Me,qe){var rt=qe?$e(Me.buffer):Me.buffer;return new Me.constructor(rt,Me.byteOffset,Me.length)}function Ul(Me,qe){var rt=-1,Vt=Me.length;for(qe||(qe=Array(Vt));++rt<Vt;)qe[rt]=Me[rt];return qe}function Lt(Me,qe,rt,Vt){rt||(rt={});for(var ls=-1,Qs=qe.length;++ls<Qs;){var ra=qe[ls],Qn=Vt?Vt(rt[ra],Me[ra],ra,rt,Me):void 0;w1(rt,ra,Qn===void 0?Me[ra]:Qn)}return rt}function Ya(Me,qe){return Lt(Me,py(Me),qe)}function dy(Me){return x1(Me,my,py)}function E1(Me,qe){var rt=Me.__data__;return CE(qe)?rt[typeof qe=="string"?"string":"hash"]:rt.map}function ku(Me,qe){var rt=V(Me,qe);return Dn(rt)?rt:void 0}var py=Ve?ye(Ve,Object):q$,ei=kp;(Ge&&ei(new Ge(new ArrayBuffer(1)))!=I||ut&&ei(new ut)!=f||pt&&ei(pt.resolve())!=v||vt&&ei(new vt)!=_||kt&&ei(new kt)!=x)&&(ei=function(Me){var qe=Z.call(Me),rt=qe==g?Me.constructor:void 0,Vt=rt?Lc(rt):void 0;if(Vt)switch(Vt){case Wt:return I;case Gt:return f;case Ti:return v;case kr:return _;case _n:return x}return qe});function V$(Me){var qe=Me.length,rt=Me.constructor(qe);return qe&&typeof Me[0]=="string"&&G.call(Me,"index")&&(rt.index=Me.index,rt.input=Me.input),rt}function B$(Me){return typeof Me.constructor=="function"&&!OE(Me)?_1(fe(Me)):{}}function AE(Me,qe,rt,Vt){var ls=Me.constructor;switch(qe){case T:return $e(Me);case a:case l:return new ls(+Me);case I:return Qe(Me,Vt);case $:case L:case B:case z:case H:case J:case K:case Q:case y:return Lr(Me,Vt);case f:return ot(Me,Vt,rt);case m:case S:return new ls(Me);case b:return fi(Me);case _:return Ts(Me,Vt,rt);case M:return mr(Me)}}function z$(Me,qe){return qe=qe??s,!!qe&&(typeof Me=="number"||ne.test(Me))&&Me>-1&&Me%1==0&&Me<qe}function CE(Me){var qe=typeof Me;return qe=="string"||qe=="number"||qe=="symbol"||qe=="boolean"?Me!=="__proto__":Me===null}function $E(Me){return!!O&&O in Me}function OE(Me){var qe=Me&&Me.constructor,rt=typeof qe=="function"&&qe.prototype||re;return Me===rt}function Lc(Me){if(Me!=null){try{return C.call(Me)}catch{}try{return Me+""}catch{}}return""}function RE(Me){return kc(Me,!0,!0)}function m_(Me,qe){return Me===qe||Me!==Me&&qe!==qe}function kE(Me){return LE(Me)&&G.call(Me,"callee")&&(!He.call(Me,"callee")||Z.call(Me)==n)}var T1=Array.isArray;function fy(Me){return Me!=null&&M1(Me.length)&&!y_(Me)}function LE(Me){return G$(Me)&&fy(Me)}var I1=be||H$;function y_(Me){var qe=A1(Me)?Z.call(Me):"";return qe==c||qe==d}function M1(Me){return typeof Me=="number"&&Me>-1&&Me%1==0&&Me<=s}function A1(Me){var qe=typeof Me;return!!Me&&(qe=="object"||qe=="function")}function G$(Me){return!!Me&&typeof Me=="object"}function my(Me){return fy(Me)?Di(Me):S1(Me)}function q$(){return[]}function H$(){return!1}t.exports=RE})(a4,a4.exports);var aYe=a4.exports;const nY=n_(aYe);const l4=Ss("maptip",()=>{const t=Xe(void 0),e=Xe(void 0),i=Xe("");function r(o){t.value=o}function s(o){e.value=o}function n(o){i.value=o}return{maptipInstance:t,maptipPoint:e,content:i,setMaptipInstance:r,setMaptipPoint:s,setMaptipContent:n}}),lYe=zi({__name:"esri-map",setup(t){const e=l4(),i=mn("iApi"),r=Ri(()=>e.maptipPoint),s=Ri(()=>e.maptipInstance),n=Ri(()=>e.content),o=Ys([]);o.push(Js(r,()=>{if(r.value){let l,u;const c=i.geo.map.getPixelWidth()/2,d=0,f=i.geo.map.mapPointToScreenPoint(r.value);l=f.screenX-c,u=d-f.screenY,s.value.setProps({offset:[l,u]}),n.value&&n.value!==""&&s.value.show()}else s.value.hide()})),o.push(Js(n,l=>{l&&l!==""&&r?(s.value.setContent(l),s.value.show()):s.value.hide()})),Qh(()=>{o.forEach(l=>l())});const a=()=>{i.geo.map.setMouseFocus()};return(l,u)=>{const c=gr("tippy");return ar((ht(),Ot("div",{name:"esriMap",id:"esriMap",class:"h-full overflow-hidden",onMousedown:a,onKeydown:u[0]||(u[0]=Wj(vE(()=>{},["prevent"]),["up","down","left","right"]))},null,544)),[[c,{allowHTML:!0,zIndex:150,theme:"ramp4",trigger:"manual",appendTo:"parent",arrow:!1,delay:200,duration:[200,200]}]])}}});var ope={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},wU={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},uYe=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],u4={CSS:{},springs:{}};function Ah(t,e,i){return Math.min(Math.max(t,e),i)}function aS(t,e){return t.indexOf(e)>-1}function hk(t,e){return t.apply(null,e)}var Qt={arr:function(t){return Array.isArray(t)},obj:function(t){return aS(Object.prototype.toString.call(t),"Object")},pth:function(t){return Qt.obj(t)&&t.hasOwnProperty("totalLength")},svg:function(t){return t instanceof SVGElement},inp:function(t){return t instanceof HTMLInputElement},dom:function(t){return t.nodeType||Qt.svg(t)},str:function(t){return typeof t=="string"},fnc:function(t){return typeof t=="function"},und:function(t){return typeof t>"u"},nil:function(t){return Qt.und(t)||t===null},hex:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},rgb:function(t){return/^rgb/.test(t)},hsl:function(t){return/^hsl/.test(t)},col:function(t){return Qt.hex(t)||Qt.rgb(t)||Qt.hsl(t)},key:function(t){return!ope.hasOwnProperty(t)&&!wU.hasOwnProperty(t)&&t!=="targets"&&t!=="keyframes"}};function ape(t){var e=/\(([^)]+)\)/.exec(t);return e?e[1].split(",").map(function(i){return parseFloat(i)}):[]}function lpe(t,e){var i=ape(t),r=Ah(Qt.und(i[0])?1:i[0],.1,100),s=Ah(Qt.und(i[1])?100:i[1],.1,100),n=Ah(Qt.und(i[2])?10:i[2],.1,100),o=Ah(Qt.und(i[3])?0:i[3],.1,100),a=Math.sqrt(s/r),l=n/(2*Math.sqrt(s*r)),u=l<1?a*Math.sqrt(1-l*l):0,c=1,d=l<1?(l*a+-o)/u:-o+a;function f(g){var v=e?e*g/1e3:g;return l<1?v=Math.exp(-v*l*a)*(c*Math.cos(u*v)+d*Math.sin(u*v)):v=(c+d*v)*Math.exp(-v*a),g===0||g===1?g:1-v}function m(){var g=u4.springs[t];if(g)return g;for(var v=1/6,b=0,_=0;;)if(b+=v,f(b)===1){if(_++,_>=16)break}else _=0;var S=b*v*1e3;return u4.springs[t]=S,S}return e?f:m}function cYe(t){return t===void 0&&(t=10),function(e){return Math.ceil(Ah(e,1e-6,1)*t)*(1/t)}}var hYe=function(){var t=11,e=1/(t-1);function i(c,d){return 1-3*d+3*c}function r(c,d){return 3*d-6*c}function s(c){return 3*c}function n(c,d,f){return((i(d,f)*c+r(d,f))*c+s(d))*c}function o(c,d,f){return 3*i(d,f)*c*c+2*r(d,f)*c+s(d)}function a(c,d,f,m,g){var v,b,_=0;do b=d+(f-d)/2,v=n(b,m,g)-c,v>0?f=b:d=b;while(Math.abs(v)>1e-7&&++_<10);return b}function l(c,d,f,m){for(var g=0;g<4;++g){var v=o(d,f,m);if(v===0)return d;var b=n(d,f,m)-c;d-=b/v}return d}function u(c,d,f,m){if(!(0<=c&&c<=1&&0<=f&&f<=1))return;var g=new Float32Array(t);if(c!==d||f!==m)for(var v=0;v<t;++v)g[v]=n(v*e,c,f);function b(_){for(var S=0,M=1,x=t-1;M!==x&&g[M]<=_;++M)S+=e;--M;var T=(_-g[M])/(g[M+1]-g[M]),I=S+T*e,$=o(I,c,f);return $>=.001?l(_,I,c,f):$===0?I:a(_,S,S+e,c,f)}return function(_){return c===d&&f===m||_===0||_===1?_:n(b(_),d,m)}}return u}(),upe=function(){var t={linear:function(){return function(r){return r}}},e={Sine:function(){return function(r){return 1-Math.cos(r*Math.PI/2)}},Circ:function(){return function(r){return 1-Math.sqrt(1-r*r)}},Back:function(){return function(r){return r*r*(3*r-2)}},Bounce:function(){return function(r){for(var s,n=4;r<((s=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((s*3-2)/22-r,2)}},Elastic:function(r,s){r===void 0&&(r=1),s===void 0&&(s=.5);var n=Ah(r,1,10),o=Ah(s,.1,2);return function(a){return a===0||a===1?a:-n*Math.pow(2,10*(a-1))*Math.sin((a-1-o/(Math.PI*2)*Math.asin(1/n))*(Math.PI*2)/o)}}},i=["Quad","Cubic","Quart","Quint","Expo"];return i.forEach(function(r,s){e[r]=function(){return function(n){return Math.pow(n,s+2)}}}),Object.keys(e).forEach(function(r){var s=e[r];t["easeIn"+r]=s,t["easeOut"+r]=function(n,o){return function(a){return 1-s(n,o)(1-a)}},t["easeInOut"+r]=function(n,o){return function(a){return a<.5?s(n,o)(a*2)/2:1-s(n,o)(a*-2+2)/2}},t["easeOutIn"+r]=function(n,o){return function(a){return a<.5?(1-s(n,o)(1-a*2))/2:(s(n,o)(a*2-1)+1)/2}}}),t}();function _U(t,e){if(Qt.fnc(t))return t;var i=t.split("(")[0],r=upe[i],s=ape(t);switch(i){case"spring":return lpe(t,e);case"cubicBezier":return hk(hYe,s);case"steps":return hk(cYe,s);default:return hk(r,s)}}function cpe(t){try{var e=document.querySelectorAll(t);return e}catch{return}}function M$(t,e){for(var i=t.length,r=arguments.length>=2?arguments[1]:void 0,s=[],n=0;n<i;n++)if(n in t){var o=t[n];e.call(r,o,n,t)&&s.push(o)}return s}function A$(t){return t.reduce(function(e,i){return e.concat(Qt.arr(i)?A$(i):i)},[])}function oY(t){return Qt.arr(t)?t:(Qt.str(t)&&(t=cpe(t)||t),t instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t])}function xU(t,e){return t.some(function(i){return i===e})}function SU(t){var e={};for(var i in t)e[i]=t[i];return e}function vF(t,e){var i=SU(t);for(var r in t)i[r]=e.hasOwnProperty(r)?e[r]:t[r];return i}function C$(t,e){var i=SU(t);for(var r in e)i[r]=Qt.und(t[r])?e[r]:t[r];return i}function dYe(t){var e=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(t);return e?"rgba("+e[1]+",1)":t}function pYe(t){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,i=t.replace(e,function(a,l,u,c){return l+l+u+u+c+c}),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i),s=parseInt(r[1],16),n=parseInt(r[2],16),o=parseInt(r[3],16);return"rgba("+s+","+n+","+o+",1)"}function fYe(t){var e=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(t),i=parseInt(e[1],10)/360,r=parseInt(e[2],10)/100,s=parseInt(e[3],10)/100,n=e[4]||1;function o(f,m,g){return g<0&&(g+=1),g>1&&(g-=1),g<1/6?f+(m-f)*6*g:g<1/2?m:g<2/3?f+(m-f)*(2/3-g)*6:f}var a,l,u;if(r==0)a=l=u=s;else{var c=s<.5?s*(1+r):s+r-s*r,d=2*s-c;a=o(d,c,i+1/3),l=o(d,c,i),u=o(d,c,i-1/3)}return"rgba("+a*255+","+l*255+","+u*255+","+n+")"}function mYe(t){if(Qt.rgb(t))return dYe(t);if(Qt.hex(t))return pYe(t);if(Qt.hsl(t))return fYe(t)}function op(t){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(t);if(e)return e[1]}function yYe(t){if(aS(t,"translate")||t==="perspective")return"px";if(aS(t,"rotate")||aS(t,"skew"))return"deg"}function bF(t,e){return Qt.fnc(t)?t(e.target,e.id,e.total):t}function Ch(t,e){return t.getAttribute(e)}function EU(t,e,i){var r=op(e);if(xU([i,"deg","rad","turn"],r))return e;var s=u4.CSS[e+i];if(!Qt.und(s))return s;var n=100,o=document.createElement(t.tagName),a=t.parentNode&&t.parentNode!==document?t.parentNode:document.body;a.appendChild(o),o.style.position="absolute",o.style.width=n+i;var l=n/o.offsetWidth;a.removeChild(o);var u=l*parseFloat(e);return u4.CSS[e+i]=u,u}function hpe(t,e,i){if(e in t.style){var r=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),s=t.style[e]||getComputedStyle(t).getPropertyValue(r)||"0";return i?EU(t,s,i):s}}function TU(t,e){if(Qt.dom(t)&&!Qt.inp(t)&&(!Qt.nil(Ch(t,e))||Qt.svg(t)&&t[e]))return"attribute";if(Qt.dom(t)&&xU(uYe,e))return"transform";if(Qt.dom(t)&&e!=="transform"&&hpe(t,e))return"css";if(t[e]!=null)return"object"}function dpe(t){if(Qt.dom(t)){for(var e=t.style.transform||"",i=/(\w+)\(([^)]*)\)/g,r=new Map,s;s=i.exec(e);)r.set(s[1],s[2]);return r}}function gYe(t,e,i,r){var s=aS(e,"scale")?1:0+yYe(e),n=dpe(t).get(e)||s;return i&&(i.transforms.list.set(e,n),i.transforms.last=e),r?EU(t,n,r):n}function IU(t,e,i,r){switch(TU(t,e)){case"transform":return gYe(t,e,r,i);case"css":return hpe(t,e,i);case"attribute":return Ch(t,e);default:return t[e]||0}}function MU(t,e){var i=/^(\*=|\+=|-=)/.exec(t);if(!i)return t;var r=op(t)||0,s=parseFloat(e),n=parseFloat(t.replace(i[0],""));switch(i[0][0]){case"+":return s+n+r;case"-":return s-n+r;case"*":return s*n+r}}function ppe(t,e){if(Qt.col(t))return mYe(t);if(/\s/g.test(t))return t;var i=op(t),r=i?t.substr(0,t.length-i.length):t;return e?r+e:r}function AU(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function vYe(t){return Math.PI*2*Ch(t,"r")}function bYe(t){return Ch(t,"width")*2+Ch(t,"height")*2}function wYe(t){return AU({x:Ch(t,"x1"),y:Ch(t,"y1")},{x:Ch(t,"x2"),y:Ch(t,"y2")})}function fpe(t){for(var e=t.points,i=0,r,s=0;s<e.numberOfItems;s++){var n=e.getItem(s);s>0&&(i+=AU(r,n)),r=n}return i}function _Ye(t){var e=t.points;return fpe(t)+AU(e.getItem(e.numberOfItems-1),e.getItem(0))}function mpe(t){if(t.getTotalLength)return t.getTotalLength();switch(t.tagName.toLowerCase()){case"circle":return vYe(t);case"rect":return bYe(t);case"line":return wYe(t);case"polyline":return fpe(t);case"polygon":return _Ye(t)}}function xYe(t){var e=mpe(t);return t.setAttribute("stroke-dasharray",e),e}function SYe(t){for(var e=t.parentNode;Qt.svg(e)&&Qt.svg(e.parentNode);)e=e.parentNode;return e}function ype(t,e){var i=e||{},r=i.el||SYe(t),s=r.getBoundingClientRect(),n=Ch(r,"viewBox"),o=s.width,a=s.height,l=i.viewBox||(n?n.split(" "):[0,0,o,a]);return{el:r,viewBox:l,x:l[0]/1,y:l[1]/1,w:o,h:a,vW:l[2],vH:l[3]}}function EYe(t,e){var i=Qt.str(t)?cpe(t)[0]:t,r=e||100;return function(s){return{property:s,el:i,svg:ype(i),totalLength:mpe(i)*(r/100)}}}function TYe(t,e,i){function r(c){c===void 0&&(c=0);var d=e+c>=1?e+c:0;return t.el.getPointAtLength(d)}var s=ype(t.el,t.svg),n=r(),o=r(-1),a=r(1),l=i?1:s.w/s.vW,u=i?1:s.h/s.vH;switch(t.property){case"x":return(n.x-s.x)*l;case"y":return(n.y-s.y)*u;case"angle":return Math.atan2(a.y-o.y,a.x-o.x)*180/Math.PI}}function aY(t,e){var i=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=ppe(Qt.pth(t)?t.totalLength:t,e)+"";return{original:r,numbers:r.match(i)?r.match(i).map(Number):[0],strings:Qt.str(t)||e?r.split(i):[]}}function CU(t){var e=t?A$(Qt.arr(t)?t.map(oY):oY(t)):[];return M$(e,function(i,r,s){return s.indexOf(i)===r})}function gpe(t){var e=CU(t);return e.map(function(i,r){return{target:i,id:r,total:e.length,transforms:{list:dpe(i)}}})}function IYe(t,e){var i=SU(e);if(/^spring/.test(i.easing)&&(i.duration=lpe(i.easing)),Qt.arr(t)){var r=t.length,s=r===2&&!Qt.obj(t[0]);s?t={value:t}:Qt.fnc(e.duration)||(i.duration=e.duration/r)}var n=Qt.arr(t)?t:[t];return n.map(function(o,a){var l=Qt.obj(o)&&!Qt.pth(o)?o:{value:o};return Qt.und(l.delay)&&(l.delay=a?0:e.delay),Qt.und(l.endDelay)&&(l.endDelay=a===n.length-1?e.endDelay:0),l}).map(function(o){return C$(o,i)})}function MYe(t){for(var e=M$(A$(t.map(function(n){return Object.keys(n)})),function(n){return Qt.key(n)}).reduce(function(n,o){return n.indexOf(o)<0&&n.push(o),n},[]),i={},r=function(n){var o=e[n];i[o]=t.map(function(a){var l={};for(var u in a)Qt.key(u)?u==o&&(l.value=a[u]):l[u]=a[u];return l})},s=0;s<e.length;s++)r(s);return i}function AYe(t,e){var i=[],r=e.keyframes;r&&(e=C$(MYe(r),e));for(var s in e)Qt.key(s)&&i.push({name:s,tweens:IYe(e[s],t)});return i}function CYe(t,e){var i={};for(var r in t){var s=bF(t[r],e);Qt.arr(s)&&(s=s.map(function(n){return bF(n,e)}),s.length===1&&(s=s[0])),i[r]=s}return i.duration=parseFloat(i.duration),i.delay=parseFloat(i.delay),i}function $Ye(t,e){var i;return t.tweens.map(function(r){var s=CYe(r,e),n=s.value,o=Qt.arr(n)?n[1]:n,a=op(o),l=IU(e.target,t.name,a,e),u=i?i.to.original:l,c=Qt.arr(n)?n[0]:u,d=op(c)||op(l),f=a||d;return Qt.und(o)&&(o=u),s.from=aY(c,f),s.to=aY(MU(o,c),f),s.start=i?i.end:0,s.end=s.start+s.delay+s.duration+s.endDelay,s.easing=_U(s.easing,s.duration),s.isPath=Qt.pth(n),s.isPathTargetInsideSVG=s.isPath&&Qt.svg(e.target),s.isColor=Qt.col(s.from.original),s.isColor&&(s.round=1),i=s,s})}var vpe={css:function(t,e,i){return t.style[e]=i},attribute:function(t,e,i){return t.setAttribute(e,i)},object:function(t,e,i){return t[e]=i},transform:function(t,e,i,r,s){if(r.list.set(e,i),e===r.last||s){var n="";r.list.forEach(function(o,a){n+=a+"("+o+") "}),t.style.transform=n}}};function bpe(t,e){var i=gpe(t);i.forEach(function(r){for(var s in e){var n=bF(e[s],r),o=r.target,a=op(n),l=IU(o,s,a,r),u=a||op(l),c=MU(ppe(n,u),l),d=TU(o,s);vpe[d](o,s,c,r.transforms,!0)}})}function OYe(t,e){var i=TU(t.target,e.name);if(i){var r=$Ye(e,t),s=r[r.length-1];return{type:i,property:e.name,animatable:t,tweens:r,duration:s.end,delay:r[0].delay,endDelay:s.endDelay}}}function RYe(t,e){return M$(A$(t.map(function(i){return e.map(function(r){return OYe(i,r)})})),function(i){return!Qt.und(i)})}function wpe(t,e){var i=t.length,r=function(n){return n.timelineOffset?n.timelineOffset:0},s={};return s.duration=i?Math.max.apply(Math,t.map(function(n){return r(n)+n.duration})):e.duration,s.delay=i?Math.min.apply(Math,t.map(function(n){return r(n)+n.delay})):e.delay,s.endDelay=i?s.duration-Math.max.apply(Math,t.map(function(n){return r(n)+n.duration-n.endDelay})):e.endDelay,s}var lY=0;function kYe(t){var e=vF(ope,t),i=vF(wU,t),r=AYe(i,t),s=gpe(t.targets),n=RYe(s,r),o=wpe(n,i),a=lY;return lY++,C$(e,{id:a,children:[],animatables:s,animations:n,duration:o.duration,delay:o.delay,endDelay:o.endDelay})}var pc=[],_pe=function(){var t;function e(){!t&&(!uY()||!os.suspendWhenDocumentHidden)&&pc.length>0&&(t=requestAnimationFrame(i))}function i(s){for(var n=pc.length,o=0;o<n;){var a=pc[o];a.paused?(pc.splice(o,1),n--):(a.tick(s),o++)}t=o>0?requestAnimationFrame(i):void 0}function r(){os.suspendWhenDocumentHidden&&(uY()?t=cancelAnimationFrame(t):(pc.forEach(function(s){return s._onDocumentVisibility()}),_pe()))}return typeof document<"u"&&document.addEventListener("visibilitychange",r),e}();function uY(){return!!document&&document.hidden}function os(t){t===void 0&&(t={});var e=0,i=0,r=0,s,n=0,o=null;function a(S){var M=window.Promise&&new Promise(function(x){return o=x});return S.finished=M,M}var l=kYe(t);a(l);function u(){var S=l.direction;S!=="alternate"&&(l.direction=S!=="normal"?"normal":"reverse"),l.reversed=!l.reversed,s.forEach(function(M){return M.reversed=l.reversed})}function c(S){return l.reversed?l.duration-S:S}function d(){e=0,i=c(l.currentTime)*(1/os.speed)}function f(S,M){M&&M.seek(S-M.timelineOffset)}function m(S){if(l.reversePlayback)for(var x=n;x--;)f(S,s[x]);else for(var M=0;M<n;M++)f(S,s[M])}function g(S){for(var M=0,x=l.animations,T=x.length;M<T;){var I=x[M],$=I.animatable,L=I.tweens,B=L.length-1,z=L[B];B&&(z=M$(L,function(Se){return S<Se.end})[0]||z);for(var H=Ah(S-z.start-z.delay,0,z.duration)/z.duration,J=isNaN(H)?1:z.easing(H),K=z.to.strings,Q=z.round,y=[],A=z.to.numbers.length,N=void 0,D=0;D<A;D++){var ne=void 0,q=z.to.numbers[D],he=z.from.numbers[D]||0;z.isPath?ne=TYe(z.value,J*q,z.isPathTargetInsideSVG):ne=he+J*(q-he),Q&&(z.isColor&&D>2||(ne=Math.round(ne*Q)/Q)),y.push(ne)}var te=K.length;if(!te)N=y[0];else{N=K[0];for(var me=0;me<te;me++){K[me];var ve=K[me+1],_e=y[me];isNaN(_e)||(ve?N+=_e+ve:N+=_e+" ")}}vpe[I.type]($.target,I.property,N,$.transforms),I.currentValue=N,M++}}function v(S){l[S]&&!l.passThrough&&l[S](l)}function b(){l.remaining&&l.remaining!==!0&&l.remaining--}function _(S){var M=l.duration,x=l.delay,T=M-l.endDelay,I=c(S);l.progress=Ah(I/M*100,0,100),l.reversePlayback=I<l.currentTime,s&&m(I),!l.began&&l.currentTime>0&&(l.began=!0,v("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,v("loopBegin")),I<=x&&l.currentTime!==0&&g(0),(I>=T&&l.currentTime!==M||!M)&&g(M),I>x&&I<T?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,v("changeBegin")),v("change"),g(I)):l.changeBegan&&(l.changeCompleted=!0,l.changeBegan=!1,v("changeComplete")),l.currentTime=Ah(I,0,M),l.began&&v("update"),S>=M&&(i=0,b(),l.remaining?(e=r,v("loopComplete"),l.loopBegan=!1,l.direction==="alternate"&&u()):(l.paused=!0,l.completed||(l.completed=!0,v("loopComplete"),v("complete"),!l.passThrough&&"Promise"in window&&(o(),a(l)))))}return l.reset=function(){var S=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed=S==="reverse",l.remaining=l.loop,s=l.children,n=s.length;for(var M=n;M--;)l.children[M].reset();(l.reversed&&l.loop!==!0||S==="alternate"&&l.loop===1)&&l.remaining++,g(l.reversed?l.duration:0)},l._onDocumentVisibility=d,l.set=function(S,M){return bpe(S,M),l},l.tick=function(S){r=S,e||(e=r),_((r+(i-e))*os.speed)},l.seek=function(S){_(c(S))},l.pause=function(){l.paused=!0,d()},l.play=function(){l.paused&&(l.completed&&l.reset(),l.paused=!1,pc.push(l),d(),_pe())},l.reverse=function(){u(),l.completed=!l.reversed,d()},l.restart=function(){l.reset(),l.play()},l.remove=function(S){var M=CU(S);xpe(M,l)},l.reset(),l.autoplay&&l.play(),l}function cY(t,e){for(var i=e.length;i--;)xU(t,e[i].animatable.target)&&e.splice(i,1)}function xpe(t,e){var i=e.animations,r=e.children;cY(t,i);for(var s=r.length;s--;){var n=r[s],o=n.animations;cY(t,o),!o.length&&!n.children.length&&r.splice(s,1)}!i.length&&!r.length&&e.pause()}function LYe(t){for(var e=CU(t),i=pc.length;i--;){var r=pc[i];xpe(e,r)}}function PYe(t,e){e===void 0&&(e={});var i=e.direction||"normal",r=e.easing?_U(e.easing):null,s=e.grid,n=e.axis,o=e.from||0,a=o==="first",l=o==="center",u=o==="last",c=Qt.arr(t),d=parseFloat(c?t[0]:t),f=c?parseFloat(t[1]):0,m=op(c?t[1]:t)||0,g=e.start||0+(c?d:0),v=[],b=0;return function(_,S,M){if(a&&(o=0),l&&(o=(M-1)/2),u&&(o=M-1),!v.length){for(var x=0;x<M;x++){if(!s)v.push(Math.abs(o-x));else{var T=l?(s[0]-1)/2:o%s[0],I=l?(s[1]-1)/2:Math.floor(o/s[0]),$=x%s[0],L=Math.floor(x/s[0]),B=T-$,z=I-L,H=Math.sqrt(B*B+z*z);n==="x"&&(H=-B),n==="y"&&(H=-z),v.push(H)}b=Math.max.apply(Math,v)}r&&(v=v.map(function(K){return r(K/b)*b})),i==="reverse"&&(v=v.map(function(K){return n?K<0?K*-1:-K:Math.abs(b-K)}))}var J=c?(f-d)/b:d;return g+J*(Math.round(v[S]*100)/100)+m}}function NYe(t){t===void 0&&(t={});var e=os(t);return e.duration=0,e.add=function(i,r){var s=pc.indexOf(e),n=e.children;s>-1&&pc.splice(s,1);function o(f){f.passThrough=!0}for(var a=0;a<n.length;a++)o(n[a]);var l=C$(i,vF(wU,t));l.targets=l.targets||t.targets;var u=e.duration;l.autoplay=!1,l.direction=e.direction,l.timelineOffset=Qt.und(r)?u:MU(r,u),o(e),e.seek(l.timelineOffset);var c=os(l);o(c),n.push(c);var d=wpe(n,t);return e.delay=d.delay,e.endDelay=d.endDelay,e.duration=d.duration,e.seek(0),e.reset(),e.autoplay&&e.play(),e},e}os.version="3.2.1";os.speed=1;os.suspendWhenDocumentHidden=!0;os.running=pc;os.remove=LYe;os.get=IU;os.set=bpe;os.convertPx=EU;os.path=EYe;os.setDashoffset=xYe;os.stagger=PYe;os.timeline=NYe;os.easing=_U;os.penner=upe;os.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t};class Spe{resizeObserver;constructor(e){this.resizeObserver="ResizeObserver"in self?new ResizeObserver(function(i){const r={xs:200,sm:576,md:768,lg:960};i.forEach(function(s){const n=s.target.dataset.breakpoints?JSON.parse(s.target.dataset.breakpoints):e??r;Object.keys(n).forEach(function(o){const a=n[o];s.contentRect.width>=a?s.target.classList.add(o):s.target.classList.remove(o)})})}):void 0}observe(e){this.resizeObserver?.observe(e)}}const FYe=["data-cy"],Epe=zi({__name:"panel-container",props:{panel:{type:Object,required:!0}},setup(t){const e=t,i=Xe(null),r=Xe(!1);Co(()=>{e.panel.teleport&&new Spe({xs:0,sm:461,...e.panel.teleport.breakpoints}).observe(i.value)});const s=(l,u,c)=>{if(r.value)return u();os({targets:l,opacity:{value:c,duration:400,easing:"cubicBezier(.5, .05, .1, .3)"},complete:u})},n=(l,u)=>{s(l,u,[0,1])},o=l=>{l.classList.contains("screen-spinner")||(r.value=e.panel.isScreenLoaded(e.panel.route.screen),i.value.querySelectorAll("[focus-item").forEach(u=>u.classList.remove("default-focus-style")))},a=(l,u)=>{s(l,u,[0,1])};return(l,u)=>{const c=gr("focus-container");return ht(),Ot("div",{class:ws(["shadow-tm bg-white h-full xs:mr-0 sm:mr-12 last:mr-0 pointer-events-auto min-w-0 shrink-0",t.panel.expanded?"flex-grow max-w-full":""]),style:ty(t.panel.style),"data-cy":t.panel.id,ref_key:"componentEl",ref:i},[wi(d_,{onBeforeLeave:o,onLeave:a,onEnter:n},{default:Ns(()=>[ar((ht(),Br(Mj(t.panel.route.screen),c$(t.panel.route.props,{panel:t.panel}),null,16,["panel"])),[[c]])]),_:1})],14,FYe)}}}),X0=Ss("panel",()=>{const t=Xe(void 0),e=Xe(void 0),i=Xe(0),r=Xe(0),s=Xe(!1),n=Xe(!0),o=Xe({}),a=Xe({}),l=Xe([]),u=Xe([]),c=Xe([]),d=Ri(()=>r.value);function f(H){return H==="xs"&&c.value.length>0?[c.value.slice().pop()]:c.value}function m(H){const J=[];return H.forEach(K=>{K in a.value&&J.push(a.value[K].getPromise())}),J}function g(H){I(H),x(),e.value=void 0}function v(H){$(H),x()}function b(H,J){L(H,J),x()}function _(H){B(H),x()}function S(H){i.value=H,x()}function M(H){s.value=H}function x(){let H=i.value;const J=[];for(let K=l.value.length-1;K>=0;K--){let Q=l.value[K].width||350;s.value?Q=H:Q+=12,(H>=Q&&!s.value||J.length===0)&&(H-=Q,J.unshift(l.value[K]))}if(t.value&&!J.includes(t.value)&&!s.value){let K;for(let N=0;N<J.length-1&&H<(t.value.width||350);N++)K=J.shift(),H+=K.width||350;H>=(t.value.width||350)?J.unshift(t.value):e.value||(K=J.shift(),J.unshift(t.value));const Q=l.value.indexOf(t.value),y=l.value.indexOf(K),A=l.value.slice();y>-1&&(A.splice(Q,1),A.splice(y,0,t.value)),l.value=A}r.value=H,c.value=J}function T(H){if(o.value={...o.value,[H.id]:H},H.id in a.value)a.value[H.id].resolveMe();else{const J=new fn;J.resolveMe(),a.value={...a.value,[H.id]:J}}}function I(H){H.teleport?u.value=[...u.value,H]:(l.value=[...l.value,H],e.value=H)}function $(H){if(H.teleport){const J=u.value.indexOf(H);J!==-1&&(u.value=[...u.value.slice(0,J),...u.value.slice(J+1)])}else{const J=l.value.indexOf(H);J!==-1&&(l.value=[...l.value.slice(0,J),...l.value.slice(J+1)])}}function L(H,J){const K=l.value.indexOf(H),Q=J==="right"?1:-1;c.value.includes(l.value[K+Q])&&([l.value[K],l.value[K+Q]]=[l.value[K+Q],l.value[K]])}function B(H){o.value[H.id]!==void 0&&delete o.value[H.id],a.value[H.id]!==void 0&&delete a.value[H.id];const J=c.value.indexOf(H);J!==-1&&(c.value=[...c.value.slice(0,J),...c.value.slice(J+1)]),t.value&&t.value.id==H.id&&(t.value=void 0)}function z(H){a.value={...a.value,[H]:new fn}}return{items:o,regPromises:a,orderedItems:l,pinned:t,priority:e,visible:c,stackWidth:i,remWidth:r,mobileView:s,reorderable:n,teleported:u,getRemainingWidth:d,getVisible:f,getRegPromises:m,openPanel:g,closePanel:v,movePanel:b,removePanel:_,setStackWidth:S,setMobileView:M,updateVisible:x,registerPanel:T,addRegPromise:z}}),DYe=zi({__name:"panel-stack",setup(t){const e=X0(),i=mn("iApi"),r=Xe(),s=Ri(()=>e.mobileView);Co(()=>{new ResizeObserver(c=>{const d=!(i?.$vApp.$root?.$refs["app-size"]).classList.contains("sm");s.value!==d&&(e.mobileView=d,i?.event.emit(qt.RAMP_MOBILEVIEW_CHANGE,d)),e.setStackWidth(c[0].contentRect.width)}).observe(r.value?.$el)});const n=u=>e.getVisible(u),o=(u,c)=>{l(u,c,[[6,0],[0,1]])},a=(u,c)=>{const[d,f]=[u.children[0].getBoundingClientRect(),u.parentElement.getBoundingClientRect()];u.style.width=`${d.width}px`,u.style.height=`${d.height}px`,u.style.left=`${d.left-f.left}px`,u.style.position="absolute",l(u,c,[[0,-6],[1,0]])},l=(u,c,d)=>{os({targets:u,duration:300,translateY:{value:d[0],easing:"cubicBezier(.5, .05, .1, .3)"},opacity:{value:d[1],duration:250,easing:"cubicBezier(.5, .05, .1, .3)"},complete:c})};return(u,c)=>(ht(),Br(d$,{onEnter:o,onLeave:a,name:"panel-container",tag:"div",ref_key:"el",ref:r},{default:Ns(()=>[(ht(!0),Ot(Cr,null,ny(n(ti(i).screenSize),d=>(ht(),Br(Epe,{key:`${d.id}`,panel:d},null,8,["panel"]))),128))]),_:1},512))}});const Op=(t,e)=>{const i=t.__vccOpts||t;for(const[r,s]of e)i[r]=s;return i},jYe=Op(DYe,[["__scopeId","data-v-c70e1757"]]);var ka="top",Iu="bottom",Mu="right",La="left",$U="auto",EE=[ka,Iu,Mu,La],_w="start",g3="end",UYe="clippingParents",Tpe="viewport",n2="popper",VYe="reference",hY=EE.reduce(function(t,e){return t.concat([e+"-"+_w,e+"-"+g3])},[]),Ipe=[].concat(EE,[$U]).reduce(function(t,e){return t.concat([e,e+"-"+_w,e+"-"+g3])},[]),BYe="beforeRead",zYe="read",GYe="afterRead",qYe="beforeMain",HYe="main",WYe="afterMain",JYe="beforeWrite",ZYe="write",YYe="afterWrite",KYe=[BYe,zYe,GYe,qYe,HYe,WYe,JYe,ZYe,YYe];function Wh(t){return t?(t.nodeName||"").toLowerCase():null}function Ou(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function e1(t){var e=Ou(t).Element;return t instanceof e||t instanceof Element}function wu(t){var e=Ou(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function OU(t){if(typeof ShadowRoot>"u")return!1;var e=Ou(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function QYe(t){var e=t.state;Object.keys(e.elements).forEach(function(i){var r=e.styles[i]||{},s=e.attributes[i]||{},n=e.elements[i];!wu(n)||!Wh(n)||(Object.assign(n.style,r),Object.keys(s).forEach(function(o){var a=s[o];a===!1?n.removeAttribute(o):n.setAttribute(o,a===!0?"":a)}))})}function XYe(t){var e=t.state,i={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,i.popper),e.styles=i,e.elements.arrow&&Object.assign(e.elements.arrow.style,i.arrow),function(){Object.keys(e.elements).forEach(function(r){var s=e.elements[r],n=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:i[r]),a=o.reduce(function(l,u){return l[u]="",l},{});!wu(s)||!Wh(s)||(Object.assign(s.style,a),Object.keys(n).forEach(function(l){s.removeAttribute(l)}))})}}const eKe={name:"applyStyles",enabled:!0,phase:"write",fn:QYe,effect:XYe,requires:["computeStyles"]};function Fh(t){return t.split("-")[0]}var T0=Math.max,c4=Math.min,xw=Math.round;function wF(){var t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Mpe(){return!/^((?!chrome|android).)*safari/i.test(wF())}function Sw(t,e,i){e===void 0&&(e=!1),i===void 0&&(i=!1);var r=t.getBoundingClientRect(),s=1,n=1;e&&wu(t)&&(s=t.offsetWidth>0&&xw(r.width)/t.offsetWidth||1,n=t.offsetHeight>0&&xw(r.height)/t.offsetHeight||1);var o=e1(t)?Ou(t):window,a=o.visualViewport,l=!Mpe()&&i,u=(r.left+(l&&a?a.offsetLeft:0))/s,c=(r.top+(l&&a?a.offsetTop:0))/n,d=r.width/s,f=r.height/n;return{width:d,height:f,top:c,right:u+d,bottom:c+f,left:u,x:u,y:c}}function RU(t){var e=Sw(t),i=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-i)<=1&&(i=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:i,height:r}}function Ape(t,e){var i=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(i&&OU(i)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function bp(t){return Ou(t).getComputedStyle(t)}function tKe(t){return["table","td","th"].indexOf(Wh(t))>=0}function ly(t){return((e1(t)?t.ownerDocument:t.document)||window.document).documentElement}function $$(t){return Wh(t)==="html"?t:t.assignedSlot||t.parentNode||(OU(t)?t.host:null)||ly(t)}function dY(t){return!wu(t)||bp(t).position==="fixed"?null:t.offsetParent}function iKe(t){var e=/firefox/i.test(wF()),i=/Trident/i.test(wF());if(i&&wu(t)){var r=bp(t);if(r.position==="fixed")return null}var s=$$(t);for(OU(s)&&(s=s.host);wu(s)&&["html","body"].indexOf(Wh(s))<0;){var n=bp(s);if(n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].indexOf(n.willChange)!==-1||e&&n.willChange==="filter"||e&&n.filter&&n.filter!=="none")return s;s=s.parentNode}return null}function TE(t){for(var e=Ou(t),i=dY(t);i&&tKe(i)&&bp(i).position==="static";)i=dY(i);return i&&(Wh(i)==="html"||Wh(i)==="body"&&bp(i).position==="static")?e:i||iKe(t)||e}function kU(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function lS(t,e,i){return T0(t,c4(e,i))}function rKe(t,e,i){var r=lS(t,e,i);return r>i?i:r}function Cpe(){return{top:0,right:0,bottom:0,left:0}}function $pe(t){return Object.assign({},Cpe(),t)}function Ope(t,e){return e.reduce(function(i,r){return i[r]=t,i},{})}var sKe=function(e,i){return e=typeof e=="function"?e(Object.assign({},i.rects,{placement:i.placement})):e,$pe(typeof e!="number"?e:Ope(e,EE))};function nKe(t){var e,i=t.state,r=t.name,s=t.options,n=i.elements.arrow,o=i.modifiersData.popperOffsets,a=Fh(i.placement),l=kU(a),u=[La,Mu].indexOf(a)>=0,c=u?"height":"width";if(!(!n||!o)){var d=sKe(s.padding,i),f=RU(n),m=l==="y"?ka:La,g=l==="y"?Iu:Mu,v=i.rects.reference[c]+i.rects.reference[l]-o[l]-i.rects.popper[c],b=o[l]-i.rects.reference[l],_=TE(n),S=_?l==="y"?_.clientHeight||0:_.clientWidth||0:0,M=v/2-b/2,x=d[m],T=S-f[c]-d[g],I=S/2-f[c]/2+M,$=lS(x,I,T),L=l;i.modifiersData[r]=(e={},e[L]=$,e.centerOffset=$-I,e)}}function oKe(t){var e=t.state,i=t.options,r=i.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||Ape(e.elements.popper,s)&&(e.elements.arrow=s))}const aKe={name:"arrow",enabled:!0,phase:"main",fn:nKe,effect:oKe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ew(t){return t.split("-")[1]}var lKe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function uKe(t){var e=t.x,i=t.y,r=window,s=r.devicePixelRatio||1;return{x:xw(e*s)/s||0,y:xw(i*s)/s||0}}function pY(t){var e,i=t.popper,r=t.popperRect,s=t.placement,n=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,u=t.adaptive,c=t.roundOffsets,d=t.isFixed,f=o.x,m=f===void 0?0:f,g=o.y,v=g===void 0?0:g,b=typeof c=="function"?c({x:m,y:v}):{x:m,y:v};m=b.x,v=b.y;var _=o.hasOwnProperty("x"),S=o.hasOwnProperty("y"),M=La,x=ka,T=window;if(u){var I=TE(i),$="clientHeight",L="clientWidth";if(I===Ou(i)&&(I=ly(i),bp(I).position!=="static"&&a==="absolute"&&($="scrollHeight",L="scrollWidth")),I=I,s===ka||(s===La||s===Mu)&&n===g3){x=Iu;var B=d&&I===T&&T.visualViewport?T.visualViewport.height:I[$];v-=B-r.height,v*=l?1:-1}if(s===La||(s===ka||s===Iu)&&n===g3){M=Mu;var z=d&&I===T&&T.visualViewport?T.visualViewport.width:I[L];m-=z-r.width,m*=l?1:-1}}var H=Object.assign({position:a},u&&lKe),J=c===!0?uKe({x:m,y:v}):{x:m,y:v};if(m=J.x,v=J.y,l){var K;return Object.assign({},H,(K={},K[x]=S?"0":"",K[M]=_?"0":"",K.transform=(T.devicePixelRatio||1)<=1?"translate("+m+"px, "+v+"px)":"translate3d("+m+"px, "+v+"px, 0)",K))}return Object.assign({},H,(e={},e[x]=S?v+"px":"",e[M]=_?m+"px":"",e.transform="",e))}function cKe(t){var e=t.state,i=t.options,r=i.gpuAcceleration,s=r===void 0?!0:r,n=i.adaptive,o=n===void 0?!0:n,a=i.roundOffsets,l=a===void 0?!0:a,u={placement:Fh(e.placement),variation:Ew(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,pY(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,pY(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const hKe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:cKe,data:{}};var fI={passive:!0};function dKe(t){var e=t.state,i=t.instance,r=t.options,s=r.scroll,n=s===void 0?!0:s,o=r.resize,a=o===void 0?!0:o,l=Ou(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return n&&u.forEach(function(c){c.addEventListener("scroll",i.update,fI)}),a&&l.addEventListener("resize",i.update,fI),function(){n&&u.forEach(function(c){c.removeEventListener("scroll",i.update,fI)}),a&&l.removeEventListener("resize",i.update,fI)}}const pKe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:dKe,data:{}};var fKe={left:"right",right:"left",bottom:"top",top:"bottom"};function cA(t){return t.replace(/left|right|bottom|top/g,function(e){return fKe[e]})}var mKe={start:"end",end:"start"};function fY(t){return t.replace(/start|end/g,function(e){return mKe[e]})}function LU(t){var e=Ou(t),i=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:i,scrollTop:r}}function PU(t){return Sw(ly(t)).left+LU(t).scrollLeft}function yKe(t,e){var i=Ou(t),r=ly(t),s=i.visualViewport,n=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){n=s.width,o=s.height;var u=Mpe();(u||!u&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:n,height:o,x:a+PU(t),y:l}}function gKe(t){var e,i=ly(t),r=LU(t),s=(e=t.ownerDocument)==null?void 0:e.body,n=T0(i.scrollWidth,i.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=T0(i.scrollHeight,i.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-r.scrollLeft+PU(t),l=-r.scrollTop;return bp(s||i).direction==="rtl"&&(a+=T0(i.clientWidth,s?s.clientWidth:0)-n),{width:n,height:o,x:a,y:l}}function NU(t){var e=bp(t),i=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(i+s+r)}function Rpe(t){return["html","body","#document"].indexOf(Wh(t))>=0?t.ownerDocument.body:wu(t)&&NU(t)?t:Rpe($$(t))}function uS(t,e){var i;e===void 0&&(e=[]);var r=Rpe(t),s=r===((i=t.ownerDocument)==null?void 0:i.body),n=Ou(r),o=s?[n].concat(n.visualViewport||[],NU(r)?r:[]):r,a=e.concat(o);return s?a:a.concat(uS($$(o)))}function _F(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function vKe(t,e){var i=Sw(t,!1,e==="fixed");return i.top=i.top+t.clientTop,i.left=i.left+t.clientLeft,i.bottom=i.top+t.clientHeight,i.right=i.left+t.clientWidth,i.width=t.clientWidth,i.height=t.clientHeight,i.x=i.left,i.y=i.top,i}function mY(t,e,i){return e===Tpe?_F(yKe(t,i)):e1(e)?vKe(e,i):_F(gKe(ly(t)))}function bKe(t){var e=uS($$(t)),i=["absolute","fixed"].indexOf(bp(t).position)>=0,r=i&&wu(t)?TE(t):t;return e1(r)?e.filter(function(s){return e1(s)&&Ape(s,r)&&Wh(s)!=="body"}):[]}function wKe(t,e,i,r){var s=e==="clippingParents"?bKe(t):[].concat(e),n=[].concat(s,[i]),o=n[0],a=n.reduce(function(l,u){var c=mY(t,u,r);return l.top=T0(c.top,l.top),l.right=c4(c.right,l.right),l.bottom=c4(c.bottom,l.bottom),l.left=T0(c.left,l.left),l},mY(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function kpe(t){var e=t.reference,i=t.element,r=t.placement,s=r?Fh(r):null,n=r?Ew(r):null,o=e.x+e.width/2-i.width/2,a=e.y+e.height/2-i.height/2,l;switch(s){case ka:l={x:o,y:e.y-i.height};break;case Iu:l={x:o,y:e.y+e.height};break;case Mu:l={x:e.x+e.width,y:a};break;case La:l={x:e.x-i.width,y:a};break;default:l={x:e.x,y:e.y}}var u=s?kU(s):null;if(u!=null){var c=u==="y"?"height":"width";switch(n){case _w:l[u]=l[u]-(e[c]/2-i[c]/2);break;case g3:l[u]=l[u]+(e[c]/2-i[c]/2);break}}return l}function Tw(t,e){e===void 0&&(e={});var i=e,r=i.placement,s=r===void 0?t.placement:r,n=i.strategy,o=n===void 0?t.strategy:n,a=i.boundary,l=a===void 0?UYe:a,u=i.rootBoundary,c=u===void 0?Tpe:u,d=i.elementContext,f=d===void 0?n2:d,m=i.altBoundary,g=m===void 0?!1:m,v=i.padding,b=v===void 0?0:v,_=$pe(typeof b!="number"?b:Ope(b,EE)),S=f===n2?VYe:n2,M=t.rects.popper,x=t.elements[g?S:f],T=wKe(e1(x)?x:x.contextElement||ly(t.elements.popper),l,c,o),I=Sw(t.elements.reference),$=kpe({reference:I,element:M,strategy:"absolute",placement:s}),L=_F(Object.assign({},M,$)),B=f===n2?L:I,z={top:T.top-B.top+_.top,bottom:B.bottom-T.bottom+_.bottom,left:T.left-B.left+_.left,right:B.right-T.right+_.right},H=t.modifiersData.offset;if(f===n2&&H){var J=H[s];Object.keys(z).forEach(function(K){var Q=[Mu,Iu].indexOf(K)>=0?1:-1,y=[ka,Iu].indexOf(K)>=0?"y":"x";z[K]+=J[y]*Q})}return z}function _Ke(t,e){e===void 0&&(e={});var i=e,r=i.placement,s=i.boundary,n=i.rootBoundary,o=i.padding,a=i.flipVariations,l=i.allowedAutoPlacements,u=l===void 0?Ipe:l,c=Ew(r),d=c?a?hY:hY.filter(function(g){return Ew(g)===c}):EE,f=d.filter(function(g){return u.indexOf(g)>=0});f.length===0&&(f=d);var m=f.reduce(function(g,v){return g[v]=Tw(t,{placement:v,boundary:s,rootBoundary:n,padding:o})[Fh(v)],g},{});return Object.keys(m).sort(function(g,v){return m[g]-m[v]})}function xKe(t){if(Fh(t)===$U)return[];var e=cA(t);return[fY(t),e,fY(e)]}function SKe(t){var e=t.state,i=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var s=i.mainAxis,n=s===void 0?!0:s,o=i.altAxis,a=o===void 0?!0:o,l=i.fallbackPlacements,u=i.padding,c=i.boundary,d=i.rootBoundary,f=i.altBoundary,m=i.flipVariations,g=m===void 0?!0:m,v=i.allowedAutoPlacements,b=e.options.placement,_=Fh(b),S=_===b,M=l||(S||!g?[cA(b)]:xKe(b)),x=[b].concat(M).reduce(function(ve,_e){return ve.concat(Fh(_e)===$U?_Ke(e,{placement:_e,boundary:c,rootBoundary:d,padding:u,flipVariations:g,allowedAutoPlacements:v}):_e)},[]),T=e.rects.reference,I=e.rects.popper,$=new Map,L=!0,B=x[0],z=0;z<x.length;z++){var H=x[z],J=Fh(H),K=Ew(H)===_w,Q=[ka,Iu].indexOf(J)>=0,y=Q?"width":"height",A=Tw(e,{placement:H,boundary:c,rootBoundary:d,altBoundary:f,padding:u}),N=Q?K?Mu:La:K?Iu:ka;T[y]>I[y]&&(N=cA(N));var D=cA(N),ne=[];if(n&&ne.push(A[J]<=0),a&&ne.push(A[N]<=0,A[D]<=0),ne.every(function(ve){return ve})){B=H,L=!1;break}$.set(H,ne)}if(L)for(var q=g?3:1,he=function(_e){var Se=x.find(function(Oe){var Te=$.get(Oe);if(Te)return Te.slice(0,_e).every(function(we){return we})});if(Se)return B=Se,"break"},te=q;te>0;te--){var me=he(te);if(me==="break")break}e.placement!==B&&(e.modifiersData[r]._skip=!0,e.placement=B,e.reset=!0)}}const EKe={name:"flip",enabled:!0,phase:"main",fn:SKe,requiresIfExists:["offset"],data:{_skip:!1}};function yY(t,e,i){return i===void 0&&(i={x:0,y:0}),{top:t.top-e.height-i.y,right:t.right-e.width+i.x,bottom:t.bottom-e.height+i.y,left:t.left-e.width-i.x}}function gY(t){return[ka,Mu,Iu,La].some(function(e){return t[e]>=0})}function TKe(t){var e=t.state,i=t.name,r=e.rects.reference,s=e.rects.popper,n=e.modifiersData.preventOverflow,o=Tw(e,{elementContext:"reference"}),a=Tw(e,{altBoundary:!0}),l=yY(o,r),u=yY(a,s,n),c=gY(l),d=gY(u);e.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}const IKe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:TKe};function MKe(t,e,i){var r=Fh(t),s=[La,ka].indexOf(r)>=0?-1:1,n=typeof i=="function"?i(Object.assign({},e,{placement:t})):i,o=n[0],a=n[1];return o=o||0,a=(a||0)*s,[La,Mu].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function AKe(t){var e=t.state,i=t.options,r=t.name,s=i.offset,n=s===void 0?[0,0]:s,o=Ipe.reduce(function(c,d){return c[d]=MKe(d,e.rects,n),c},{}),a=o[e.placement],l=a.x,u=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=o}const CKe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:AKe};function $Ke(t){var e=t.state,i=t.name;e.modifiersData[i]=kpe({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const OKe={name:"popperOffsets",enabled:!0,phase:"read",fn:$Ke,data:{}};function RKe(t){return t==="x"?"y":"x"}function kKe(t){var e=t.state,i=t.options,r=t.name,s=i.mainAxis,n=s===void 0?!0:s,o=i.altAxis,a=o===void 0?!1:o,l=i.boundary,u=i.rootBoundary,c=i.altBoundary,d=i.padding,f=i.tether,m=f===void 0?!0:f,g=i.tetherOffset,v=g===void 0?0:g,b=Tw(e,{boundary:l,rootBoundary:u,padding:d,altBoundary:c}),_=Fh(e.placement),S=Ew(e.placement),M=!S,x=kU(_),T=RKe(x),I=e.modifiersData.popperOffsets,$=e.rects.reference,L=e.rects.popper,B=typeof v=="function"?v(Object.assign({},e.rects,{placement:e.placement})):v,z=typeof B=="number"?{mainAxis:B,altAxis:B}:Object.assign({mainAxis:0,altAxis:0},B),H=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,J={x:0,y:0};if(I){if(n){var K,Q=x==="y"?ka:La,y=x==="y"?Iu:Mu,A=x==="y"?"height":"width",N=I[x],D=N+b[Q],ne=N-b[y],q=m?-L[A]/2:0,he=S===_w?$[A]:L[A],te=S===_w?-L[A]:-$[A],me=e.elements.arrow,ve=m&&me?RU(me):{width:0,height:0},_e=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Cpe(),Se=_e[Q],Oe=_e[y],Te=lS(0,$[A],ve[A]),we=M?$[A]/2-q-Te-Se-z.mainAxis:he-Te-Se-z.mainAxis,Ie=M?-$[A]/2+q+Te+Oe+z.mainAxis:te+Te+Oe+z.mainAxis,Ae=e.elements.arrow&&TE(e.elements.arrow),W=Ae?x==="y"?Ae.clientTop||0:Ae.clientLeft||0:0,V=(K=H?.[x])!=null?K:0,j=N+we-V-W,se=N+Ie-V,ye=lS(m?c4(D,j):D,N,m?T0(ne,se):ne);I[x]=ye,J[x]=ye-N}if(a){var ae,U=x==="x"?ka:La,le=x==="x"?Iu:Mu,re=I[T],k=T==="y"?"height":"width",O=re+b[U],C=re-b[le],G=[ka,La].indexOf(_)!==-1,Z=(ae=H?.[T])!=null?ae:0,F=G?O:re-$[k]-L[k]-Z+z.altAxis,ie=G?re+$[k]+L[k]-Z-z.altAxis:C,ge=m&&G?rKe(F,re,ie):lS(m?F:O,re,m?ie:C);I[T]=ge,J[T]=ge-re}e.modifiersData[r]=J}}const LKe={name:"preventOverflow",enabled:!0,phase:"main",fn:kKe,requiresIfExists:["offset"]};function PKe(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function NKe(t){return t===Ou(t)||!wu(t)?LU(t):PKe(t)}function FKe(t){var e=t.getBoundingClientRect(),i=xw(e.width)/t.offsetWidth||1,r=xw(e.height)/t.offsetHeight||1;return i!==1||r!==1}function DKe(t,e,i){i===void 0&&(i=!1);var r=wu(e),s=wu(e)&&FKe(e),n=ly(e),o=Sw(t,s,i),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!i)&&((Wh(e)!=="body"||NU(n))&&(a=NKe(e)),wu(e)?(l=Sw(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):n&&(l.x=PU(n))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function jKe(t){var e=new Map,i=new Set,r=[];t.forEach(function(n){e.set(n.name,n)});function s(n){i.add(n.name);var o=[].concat(n.requires||[],n.requiresIfExists||[]);o.forEach(function(a){if(!i.has(a)){var l=e.get(a);l&&s(l)}}),r.push(n)}return t.forEach(function(n){i.has(n.name)||s(n)}),r}function UKe(t){var e=jKe(t);return KYe.reduce(function(i,r){return i.concat(e.filter(function(s){return s.phase===r}))},[])}function VKe(t){var e;return function(){return e||(e=new Promise(function(i){Promise.resolve().then(function(){e=void 0,i(t())})})),e}}function BKe(t){var e=t.reduce(function(i,r){var s=i[r.name];return i[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,i},{});return Object.keys(e).map(function(i){return e[i]})}var vY={placement:"bottom",modifiers:[],strategy:"absolute"};function bY(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function zKe(t){t===void 0&&(t={});var e=t,i=e.defaultModifiers,r=i===void 0?[]:i,s=e.defaultOptions,n=s===void 0?vY:s;return function(a,l,u){u===void 0&&(u=n);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},vY,n),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,m={state:c,setOptions:function(_){var S=typeof _=="function"?_(c.options):_;v(),c.options=Object.assign({},n,c.options,S),c.scrollParents={reference:e1(a)?uS(a):a.contextElement?uS(a.contextElement):[],popper:uS(l)};var M=UKe(BKe([].concat(r,c.options.modifiers)));return c.orderedModifiers=M.filter(function(x){return x.enabled}),g(),m.update()},forceUpdate:function(){if(!f){var _=c.elements,S=_.reference,M=_.popper;if(bY(S,M)){c.rects={reference:DKe(S,TE(M),c.options.strategy==="fixed"),popper:RU(M)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(z){return c.modifiersData[z.name]=Object.assign({},z.data)});for(var x=0;x<c.orderedModifiers.length;x++){if(c.reset===!0){c.reset=!1,x=-1;continue}var T=c.orderedModifiers[x],I=T.fn,$=T.options,L=$===void 0?{}:$,B=T.name;typeof I=="function"&&(c=I({state:c,options:L,name:B,instance:m})||c)}}}},update:VKe(function(){return new Promise(function(b){m.forceUpdate(),b(c)})}),destroy:function(){v(),f=!0}};if(!bY(a,l))return m;m.setOptions(u).then(function(b){!f&&u.onFirstUpdate&&u.onFirstUpdate(b)});function g(){c.orderedModifiers.forEach(function(b){var _=b.name,S=b.options,M=S===void 0?{}:S,x=b.effect;if(typeof x=="function"){var T=x({state:c,name:_,instance:m,options:M}),I=function(){};d.push(T||I)}})}function v(){d.forEach(function(b){return b()}),d=[]}return m}}var GKe=[pKe,OKe,hKe,eKe,CKe,EKe,LKe,aKe,IKe],qKe=zKe({defaultModifiers:GKe});const HKe=["content","aria-label"],FU=zi({__name:"dropdown-menu",props:{position:{type:String,default:"bottom"},popperOptions:{type:Object,default(){return{}}},tooltip:{type:String},tooltipPlacement:{type:String,default:"bottom"},tooltipTheme:{type:String,default:"ramp4"},tooltipAnimation:{type:String,default:"scale"},centered:{type:Boolean,default:!0},ariaLabel:{type:String}},setup(t){const e=t,i=Xe(!1),r=Xe(null),s=Ys([]),n=Xe(),o=Xe(),a=Xe();return s.push(Js(i,()=>{r.value.update()})),Co(()=>{window.addEventListener("click",l=>{(!n.value||!n.value.contains(l.target))&&(i.value=!1)},{capture:!0}),window.addEventListener("blur",()=>{i.value=!1}),window.addEventListener("focusin",l=>{(!n.value||!n.value.contains(l.target))&&(i.value=!1)}),Kh(()=>{const l={name:"overflowScroll",enabled:!0,phase:"main",fn({state:u}){const{bottom:c}=Tw(u);c>0?(u.styles.popper.overflowY=c>100?"auto":void 0,u.styles.popper.overflowX="hidden",u.styles.popper.height=`${u.rects.popper.height-c-8}px`):u.styles.popper.height="auto"}};a.value&&o.value&&(r.value=qKe(a.value,o.value,{placement:e.position||"bottom",modifiers:[l,{name:"offset",options:{offset:[0,5]}}],...e.popperOptions}))})}),Qh(()=>{s.forEach(l=>l()),window.removeEventListener("click",l=>{(!n.value||!n.value.contains(l.target))&&(i.value=!1)},{capture:!0}),window.removeEventListener("blur",()=>{i.value=!1}),window.removeEventListener("focusin",l=>{(!n.value||!n.value.contains(l.target))&&(i.value=!1)}),i.value=!1}),(l,u)=>{const c=gr("tippy");return ht(),Ot("div",{ref_key:"el",ref:n},[ar((ht(),Ot("button",{type:"button",class:"text-gray-500 hover:text-black dropdown-button",onClick:u[0]||(u[0]=d=>i.value=!i.value),content:t.tooltip,"aria-label":t.ariaLabel?String(t.ariaLabel):String(t.tooltip),ref_key:"dropdownTrigger",ref:a},[yc(l.$slots,"header")],8,HKe)),[[c,{placement:t.tooltipPlacement,theme:t.tooltipTheme,animation:t.tooltipAnimation,appendTo:"parent"}]]),ar(at("div",{onClick:u[1]||(u[1]=d=>r.value.update()),class:ws(["rv-dropdown shadow-md border border-gray:200 py-8 bg-white rounded z-10",{"text-center":t.centered}]),ref_key:"dropdown",ref:o},[yc(l.$slots,"default",{close:()=>i.value=!i.value})],2),[[m$,i.value]])],512)}}});const wp=Ss("notification",()=>{const t=Xe([]),e=Xe({}),i=Ri(()=>t.value.length>=99?99:t.value.length);function r(u){t.value=[u,...t.value]}function s(u){if(t.value.includes(u)){const c=t.value.indexOf(u);u instanceof Lpe&&l(u),c>-1&&t.value.splice(c,1)}}function n(u){e.value[u.id]=u}function o(u,c){e.value[u]&&(e.value[u].messageList.push(c),t.value.includes(e.value[u])||(t.value=[e.value[u],...t.value]))}function a(){Object.values(e.value).forEach(u=>l(u)),t.value=[]}function l(u){const c=t.value.indexOf(u);c>-1&&t.value.splice(c,1),u.messageList=[]}return{notificationStack:t,groups:e,notificationNumber:i,showNotification:r,removeNotification:s,registerGroup:n,addToGroup:o,clearAll:a}}),WKe={class:"h-full flex flex-col"},JKe={class:"w-full flex mb-6"},ZKe=["content","aria-label"],YKe=at("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current h-24 w-24"},[at("path",{d:"M0 0h24v24H0z",fill:"none"}),at("path",{d:"M5 13h14v-2H5v2zm-2 4h14v-2H3v2zM7 7v2h14V7H7z"})],-1),KKe=[YKe],QKe=zi({__name:"screen",props:{panel:{type:Object,required:!0}},setup(t){const e=wp(),{t:i}=Kr(),r=Ri(()=>e.notificationNumber),s=()=>e.clearAll();return(n,o)=>{const a=Os("panel-screen"),l=gr("tippy");return ht(),Br(a,{panel:t.panel},{header:Ns(()=>[Nh(Zr(ti(i)("notifications.title")),1)]),content:Ns(()=>[at("div",WKe,[at("div",JKe,[ar((ht(),Ot("button",{type:"button",onClick:s,class:ws(["p-4 ml-auto",[r.value?"text-gray-500 hover:text-black":"text-gray-300 cursor-default pointer-events-none"]]),content:ti(i)("notifications.controls.clearAll"),"aria-label":ti(i)("notifications.controls.clearAll")},KKe,10,ZKe)),[[l,{placement:"bottom",theme:"ramp4",animation:"scale"}]])]),wi(Ppe,{class:"overflow-y-auto"})])]),_:1},8,["panel"])}}});var _u=(t=>(t.ERROR="error",t.INFO="info",t.WARNING="warning",t))(_u||{});class XKe extends Ks{notificationStore;constructor(e){super(e),this.$iApi.panel.register({id:"notifications",config:{screens:{"notifications-screen":_s(QKe)},alertName:"notifications.title"}}),this.notificationStore=wp(this.$vApp.$pinia)}show(e,i){this.notificationStore.showNotification({type:e,message:i})}addGroup(e,i,r){if(this.getGroup(e))throw new Error("Duplicate notification group id registration: "+e);const s=new Lpe(this.$iApi,e,i,r);return this.notificationStore.registerGroup(s),s}getGroup(e){return this.notificationStore.groups[e]}}class Lpe extends Ks{notificationStore=wp(this.$vApp.$pinia);id;message;type;messageList=[];constructor(e,i,r,s){super(e),this.id=i,this.type=r,this.message=s}show(e){this.notificationStore.addToGroup(this.id,e)}}const eQe=["content"],tQe={class:"flex items-center text-left"},iQe={class:"select-text cursor-text"},rQe=at("span",{class:"flex-grow"},null,-1),sQe=at("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},[at("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1),nQe=[sQe],oQe=["content"],aQe=at("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 352 512"},[at("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"})],-1),lQe=[aQe],uQe={key:0,class:"text-left"},cQe=zi({__name:"notification-item",props:{notification:{type:Object,required:!0}},setup(t){const e=t,i=wp(),{t:r}=Kr(),s=Xe(!1),n=Ys({[_u.WARNING]:"⚠",[_u.INFO]:"☑",[_u.ERROR]:"❌"}),o=l=>{i.removeNotification(l)},a=()=>{if(!e.notification.messageList)return!1};return(l,u)=>{const c=gr("tippy");return ar((ht(),Ot("li",{class:ws(["flex-col default-focus-style p-4",t.notification.messageList?"cursor-pointer":""]),content:ti(r)(s.value?"notifications.controls.collapse":"notifications.controls.expand"),onClick:u[1]||(u[1]=d=>s.value=!s.value)},[at("div",tQe,[at("span",null,[Nh(Zr(n[t.notification.type])+" ",1),at("span",iQe,Zr(t.notification.message),1)]),rQe,t.notification.messageList?(ht(),Ot("div",{key:0,class:ws(["dropdown-icon p-4 pointer-events-none",{"transform -rotate-180":s.value}])},nQe,2)):Hr("",!0),ar((ht(),Ot("button",{type:"button",onClick:u[0]||(u[0]=vE(d=>o(t.notification),["stop"])),class:"mx-4 p-4",content:ti(r)("notifications.controls.dismiss")},lQe,8,oQe)),[[c,{theme:"ramp4",animation:"scale"}]])]),t.notification.messageList&&s.value?(ht(),Ot("div",uQe,[(ht(!0),Ot(Cr,null,ny(t.notification.messageList,(d,f)=>(ht(),Ot("p",{key:t.notification.id+d+f},Zr(d),1))),128))])):Hr("",!0)],10,eQe)),[[c,{onShow:a,theme:"ramp4",animation:"scale"}]])}}});const hQe={key:0},dQe={key:0,class:"w-full border-b border-black"},pQe={key:1,class:"flex flex-col items-center h-full"},fQe=at("span",{class:"flex-grow"},null,-1),mQe=at("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"h-48 w-48 fill-current"},[at("path",{d:"M0 0h24v24H0z",fill:"none"}),at("path",{d:"M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"})],-1),yQe=at("span",{style:{"flex-grow":"6"}},null,-1),Ppe=zi({__name:"notification-list",setup(t){const e=wp(),{t:i}=Kr(),r=Ri(()=>e.notificationStack);return(s,n)=>{const o=gr("focus-item"),a=gr("focus-list");return ht(),Ot("div",null,[r.value.length>0?ar((ht(),Ot("ul",hQe,[(ht(!0),Ot(Cr,null,ny(r.value,(l,u)=>(ht(),Ot(Cr,{key:l.message+u},[u>0?(ht(),Ot("div",dQe)):Hr("",!0),ar(wi(cQe,{class:ws([l.type]),notification:l},null,8,["class","notification"]),[[o]])],64))),128))])),[[a]]):(ht(),Ot("div",pQe,[fQe,mQe,at("span",null,Zr(ti(i)("notifications.empty")),1),yQe]))])}}}),Npe=t=>(ry("data-v-58839e68"),t=t(),sy(),t),gQe={class:"flex items-center hover:text-white"},vQe=["aria-label"],bQe=Npe(()=>at("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"},null,-1)),wQe=[bQe],_Qe={key:0,class:"number rounded-full w-18 text-white"},xQe={class:"notification-dropdown pointer-events-auto bg-white rounded text-center text-black w-500 h-256 flex flex-col p-0"},SQe={class:"pb-8 border-b border-gray-600"},EQe={class:"absolute flex right-3 top-3"},TQe=["content","aria-label"],IQe=Npe(()=>at("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current h-24 w-24"},[at("path",{d:"M0 0h24v24H0z",fill:"none"}),at("path",{d:"M5 13h14v-2H5v2zm-2 4h14v-2H3v2zM7 7v2h14V7H7z"})],-1)),MQe=[IQe],AQe=zi({__name:"caption-button",setup(t){const e=wp(),{t:i}=Kr(),r=Ri(()=>e.notificationNumber),s=()=>e.clearAll();return(n,o)=>{const a=Os("close"),l=gr("tippy");return ht(),Br(FU,{position:"top-start",tooltip:ti(i)("notifications.title"),tooltipPlacement:"top",class:"pointer-events-auto sm:flex ml-4 mr-8"},{header:Ns(()=>[at("div",gQe,[(ht(),Ot("svg",{class:"fill-current w-24 h-24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-label":ti(i)("notifications.open")},wQe,8,vQe)),r.value&&r.value>0?(ht(),Ot("span",_Qe,Zr(r.value),1)):Hr("",!0)])]),default:Ns(u=>[at("div",xQe,[at("div",null,[at("h4",SQe,Zr(ti(i)("notifications.title")),1),at("div",EQe,[ar((ht(),Ot("button",{type:"button",onClick:s,class:ws(["p-4 mr-6",[r.value?"text-gray-500 hover:text-black":"text-gray-300 cursor-default pointer-events-none"]]),content:ti(i)("notifications.controls.clearAll"),"aria-label":ti(i)("notifications.controls.clearAll")},MQe,10,TQe)),[[l,{placement:"bottom",theme:"ramp4",animation:"scale",appendTo:"parent"}]]),wi(a,{onClick:u.close},null,8,["onClick"])])]),wi(Ppe,{class:"overflow-y-auto h-230"})])]),_:1},8,["tooltip"])}}});const CQe=Op(AQe,[["__scopeId","data-v-58839e68"]]),Fpe=t=>(ry("data-v-b443a06b"),t=t(),sy(),t),$Qe={class:"flex hover:text-white"},OQe=["aria-label"],RQe=Fpe(()=>at("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"},null,-1)),kQe=[RQe],LQe={class:"about-ramp-dropdown pointer-events-auto bg-white rounded w-256 h-50"},PQe={class:"pb-8 border-b border-gray-600 mb-10"},NQe={class:"absolute right-5 top-5"},FQe={class:"select-text"},DQe={class:"font-bold cursor-text"},jQe={class:"text-sm cursor-text"},UQe={class:"text-sm cursor-text"},VQe=Fpe(()=>at("div",{class:"mt-5"},[at("a",{class:"text-sm underline text-blue-600",href:"https://github.com/ramp4-pcar4/ramp4-pcar4",target:"_blank"},[at("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"inline-block fill-black w-16 h-16"},[at("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})]),Nh(" ramp4-pcar4 ")])],-1)),BQe=zi({__name:"about-ramp-dropdown",props:{position:{type:String,default:"top-start"}},setup(t){const{t:e}=Kr(),i=Ri(()=>`${u2.major}.${u2.minor}.${u2.patch}`),r=Ri(()=>u2.hash.slice(0,9)),s=Ri(()=>{let n=new Date(u2.timestamp);if(isNaN(n))return"dev mode, no date";{const o=a=>a<10?"0"+a.toString():a.toString();return`${n.getFullYear()}-${n.getMonth()+1}-${n.getDate()} ${n.getHours()}:${o(n.getMinutes())}:${o(n.getSeconds())}`}});return(n,o)=>{const a=Os("close"),l=Os("dropdown-menu"),u=gr("focus-item");return ar((ht(),Br(l,{class:"pointer-events-auto sm:flex",position:t.position,tooltip:ti(e)("ramp.about"),tooltipPlacement:t.position},{header:Ns(()=>[at("div",$Qe,[(ht(),Ot("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-20 h-20","aria-label":ti(e)("ramp.about.open")},kQe,8,OQe))])]),default:Ns(c=>[at("div",LQe,[at("div",null,[at("h4",PQe,Zr(ti(e)("ramp.about")),1),at("div",NQe,[wi(a,{onClick:c.close},null,8,["onClick"])]),at("div",FQe,[at("div",null,[at("span",DQe,Zr(i.value),1),at("span",jQe," ["+Zr(r.value)+"] ",1)]),at("div",null,[at("span",UQe,Zr(s.value),1)]),VQe])])])]),_:1},8,["position","tooltip","tooltipPlacement"])),[[u]])}}});const zQe=Op(BQe,[["__scopeId","data-v-b443a06b"]]),GQe={class:"map-caption absolute bottom-0 flex justify-end pointer-events-auto cursor-default select-none text-gray-400 bg-black-75 left-0 right-0 py-2 sm:py-6"},qQe={key:0,class:"relative top-2 sm:top-1 ml-4 sm:ml-0 shrink-0"},HQe=["href","aria-label"],WQe=["src","alt"],JQe={key:1,class:"relative ml-10 top-2 text-sm sm:text-base"},ZQe=at("span",{class:"flex-grow w-15"},null,-1),YQe={class:"flex min-w-fit justify-end"},KQe={key:0,class:"pl-8 px-14 sm:block display-none relative top-2"},QQe=["aria-pressed","aria-label","content"],XQe={class:"relative top-1 text-sm sm:text-base"},eXe={class:"text-gray-400 hover:text-white text-sm sm:text-base pb-5"},tXe=["onClick"],iXe={key:0,class:"sr-only"},rXe=zi({__name:"map-caption",setup(t){const e=om(),i=Sa(),{t:r}=Kr(),s=mn("iApi"),n=Ri(()=>e.scale),o=Ri(()=>e.attribution),a=Ri(()=>e.coords),l=Ri(()=>e.langtoggle),u=Ri(()=>i.config.map),c=Xe([]),d=Ys([]);d.push(Js(u,v=>{v&&s.geo.map.caption.createCaption(u.value?.caption)})),Qh(()=>{d.forEach(v=>v())}),h_(()=>{Kh(()=>{s.$i18n.locale.value&&c.value.length==0&&(c.value=s.$i18n.availableLocales)})});const f=v=>{s.$i18n.locale.value!=v&&s.setLanguage(v)},m=()=>{e.toggleScale(),s.geo.map.caption.updateScale()},g=(v=!1)=>r(v?"map.toggleScaleToMetric":"map.toggleScaleToImperial");return(v,b)=>{const _=Os("dropdown-menu"),S=gr("truncate"),M=gr("tippy");return ht(),Ot("div",GQe,[wi(zQe,{class:"sm:block display-none ml-8 mr-4",position:"top-end"}),wi(CQe,{class:"sm:block display-none"}),o.value?.logo.disabled?Hr("",!0):(ht(),Ot("span",qQe,[at("a",{class:"pointer-events-auto cursor-pointer",href:o.value?.logo.link,target:"_blank","aria-label":o.value?.logo.altText},[at("img",{class:"object-contain h-18 sm:h-26",src:o.value?.logo.value,alt:o.value?.logo.altText},null,8,WQe)],8,HQe)])),o.value?.text.disabled?Hr("",!0):ar((ht(),Ot("span",JQe,[Nh(Zr(o.value?.text.value),1)])),[[S,{options:{placement:"top",hideOnClick:!1,theme:"ramp4",animation:"scale"}}]]),ZQe,at("div",YQe,[a.value?.disabled?Hr("",!0):ar((ht(),Ot("div",KQe,[Nh(Zr(a.value?.formattedString),1)])),[[S,{options:{hideOnClick:!1,theme:"ramp4",animation:"scale"}}]]),n.value?.disabled?Hr("",!0):ar((ht(),Ot("button",{key:1,type:"button",class:"flex-shrink-0 mx-2 sm:mx-10 px-4 pointer-events-auto cursor-pointer border-none",onClick:m,"aria-pressed":n.value?.isImperialScale,"aria-label":`
                    ${n.value?.label} - ${g(n.value?.isImperialScale)}
                `,content:g(n.value?.isImperialScale)},[at("span",{class:"border-solid border-2 border-white border-t-0 h-5 mr-4 inline-block",style:ty({width:n.value?.width})},null,4),at("span",XQe,Zr(n.value?.label),1)],8,QQe)),[[M,{delay:[300,0],placement:"top",hideOnClick:!1,theme:"ramp4",animation:"scale",touch:["hold",200]}]]),l.value?.disabled?Hr("",!0):ar((ht(),Br(_,{key:2,class:"flex-shrink-0 pointer-events-auto focus:outline-none px-4 mr-4 relative top-2",position:"top-end",content:ti(r)("map.changeLanguage"),ariaLabel:`${ti(r)("map.language.short")} - ${ti(r)("map.changeLanguage")}`},{header:Ns(()=>[at("span",eXe,Zr(ti(r)("map.language.short")),1)]),default:Ns(()=>[(ht(!0),Ot(Cr,null,ny(c.value,(x,T)=>(ht(),Ot("a",{key:`${x}-${T}`,class:ws(["flex-auto items-center text-sm sm:text-base cursor-pointer",{"font-bold":x===ti(s).$i18n.locale.value}]),href:"javascript:;",onClick:I=>f(x)},[Nh(Zr(ti(r)("map.language."+x))+" ",1),x===ti(s).$i18n.locale.value?(ht(),Ot("span",iXe,Zr(ti(r)("map.language.curr")),1)):Hr("",!0)],10,tXe))),128))]),_:1},8,["content","ariaLabel"])),[[M,{delay:[300,0],placement:"top-end",theme:"ramp4",animation:"scale",touch:["hold",200]}]])])])}}});const sXe=t=>(ry("data-v-61852e43"),t=t(),sy(),t),nXe=["content"],oXe=sXe(()=>at("svg",{class:"fill-current w-24 h-24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[at("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"})],-1)),aXe={key:0,class:"number absolute -top-2 -right-2 text-white w-18 rounded-full"},lXe=zi({__name:"floating-button",setup(t){const e=wp(),i=mn("iApi"),{t:r}=Kr(),s=Ri(()=>e.notificationNumber);return(n,o)=>{const a=gr("tippy");return ar((ht(),Ot("button",{type:"button",onClick:o[0]||(o[0]=l=>ti(i).panel.get("notifications").open()),class:"pointer-events-auto items-center absolute left-8 bottom-36 p-6 block sm:display-none bg-black-75 rounded-full text-gray-400 hover:text-white",content:ti(r)("notifications.title")},[oXe,s.value&&s.value>0?(ht(),Ot("span",aXe,Zr(s.value),1)):Hr("",!0)],8,nXe)),[[a]])}}});const uXe=Op(lXe,[["__scopeId","data-v-61852e43"]]),cXe={class:"flex items-center mb-20"},hXe={class:"text-xl"},dXe=zi({__name:"keyboard-instructions",setup(t){const e=mn("iApi"),{t:i}=Kr(),r=Xe(!1),s=Xe(["app","lists","map"]),n=Xe([]),o=Xe(null),a=Xe(null);Co(()=>{n.value.push(e.event.on("openKeyboardInstructions",()=>{r.value=!0,Kh(()=>{o.value.focus()})}))}),Qh(()=>{n.value.forEach(u=>e?.event.off(u))});const l=u=>{u.key==="Tab"?u.shiftKey&&u.target===o.value?(u.preventDefault(),a.value.focus()):!u.shiftKey&&u.target===a.value&&(u.preventDefault(),o.value.focus()):u.key==="Escape"&&(u.preventDefault(),r.value=!1)};return(u,c)=>{const d=Os("close");return r.value?(ht(),Ot("div",{key:0,class:"absolute inset-0 flex justify-center items-center bg-opacity-30 bg-black z-50 pointer-events-auto",onClick:c[3]||(c[3]=f=>r.value=!1),onKeydown:l},[at("div",{class:"bg-white w-500 pointer-events-auto shadow-2xl p-20 flex flex-col",onClick:c[2]||(c[2]=vE(()=>{},["stop","prevent"])),tabindex:"0",ref_key:"firstEl",ref:o},[at("div",cXe,[at("h2",hXe,Zr(ti(i)("keyboardInstructions.title")),1),wi(d,{class:"ml-auto",onClick:c[0]||(c[0]=f=>r.value=!1)})]),(ht(!0),Ot(Cr,null,ny(s.value,f=>(ht(),Ot("p",{class:"whitespace-pre-line pb-10",key:f},Zr(ti(i)(`keyboardInstructions.${f}`)),1))),128)),at("button",{type:"button",class:"mt-auto self-end mr-10 mb-10 px-20 py-10",onClick:c[1]||(c[1]=f=>r.value=!1),ref_key:"lastEl",ref:a},Zr(ti(i)("keyboardInstructions.OK")),513)],512)],32)):Hr("",!0)}}}),Gv=Ss("instance",()=>({started:Xe(!1)})),Dpe=t=>(ry("data-v-123961ea"),t=t(),sy(),t),pXe={class:"h-full relative"},fXe={class:"inner-shell absolute top-0 left-0 h-full w-full pointer-events-none"},mXe=Dpe(()=>at("div",{class:"sr-only screen-reader-alert"},null,-1)),yXe={class:"absolute top-8 w-full flex justify-center"},gXe={key:1,class:"w-full h-full"},vXe=Dpe(()=>at("div",{class:"spinner relative inset-x-1/2 inset-y-9/20"},null,-1)),bXe=[vXe],wXe=zi({__name:"shell",setup(t){const e=mn("iApi"),i=Gv(),r=Qd(),s=X0(),{t:n}=Kr(),o=Ri(()=>r.items.appbar),a=()=>{e?.event.emit("openKeyboardInstructions")},l=()=>s.teleported;return(u,c)=>(ht(),Ot("div",pXe,[at("div",fXe,[mXe,at("div",yXe,[at("button",{type:"button",class:"bg-white opacity-0 focus:opacity-100 z-50 shadow-md px-10",onClick:a},Zr(ti(n)("keyboardInstructions.open")),1)]),wi(dXe),wi(jYe,{class:"panel-stack sm:flex absolute inset-0 overflow-hidden sm:p-12 z-10 sm:pl-80 xs:pl-40 sm:pb-48 xs:pb-28 xs:pr-0 sm:pr-40"}),o.value?Hr("",!0):(ht(),Br(uXe,{key:0})),wi(rXe,{class:"z-30"})]),ti(i).started?(ht(),Br(lYe,{key:0})):(ht(),Ot("div",gXe,bXe)),(ht(!0),Ot(Cr,null,ny(l(),d=>(ht(),Br(Pj,{to:d.teleport?.target,key:d.id},[(ht(),Br(Epe,{key:`${d.id}`,panel:d},null,8,["panel"]))],8,["to"]))),128))]))}});const _Xe=Op(wXe,[["__scopeId","data-v-123961ea"]]);/*!
  * vue-tippy v6.0.0
  * (c) 2022 
  * @license MIT
  */var Pa="top",Au="bottom",Cu="right",Na="left",DU="auto",IE=[Pa,Au,Cu,Na],Iw="start",v3="end",xXe="clippingParents",jpe="viewport",o2="popper",SXe="reference",wY=IE.reduce(function(t,e){return t.concat([e+"-"+Iw,e+"-"+v3])},[]),Upe=[].concat(IE,[DU]).reduce(function(t,e){return t.concat([e,e+"-"+Iw,e+"-"+v3])},[]),EXe="beforeRead",TXe="read",IXe="afterRead",MXe="beforeMain",AXe="main",CXe="afterMain",$Xe="beforeWrite",OXe="write",RXe="afterWrite",kXe=[EXe,TXe,IXe,MXe,AXe,CXe,$Xe,OXe,RXe];function Jh(t){return t?(t.nodeName||"").toLowerCase():null}function $c(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Mw(t){var e=$c(t).Element;return t instanceof e||t instanceof Element}function xu(t){var e=$c(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Vpe(t){if(typeof ShadowRoot>"u")return!1;var e=$c(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function LXe(t){var e=t.state;Object.keys(e.elements).forEach(function(i){var r=e.styles[i]||{},s=e.attributes[i]||{},n=e.elements[i];!xu(n)||!Jh(n)||(Object.assign(n.style,r),Object.keys(s).forEach(function(o){var a=s[o];a===!1?n.removeAttribute(o):n.setAttribute(o,a===!0?"":a)}))})}function PXe(t){var e=t.state,i={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,i.popper),e.styles=i,e.elements.arrow&&Object.assign(e.elements.arrow.style,i.arrow),function(){Object.keys(e.elements).forEach(function(r){var s=e.elements[r],n=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:i[r]),a=o.reduce(function(l,u){return l[u]="",l},{});!xu(s)||!Jh(s)||(Object.assign(s.style,a),Object.keys(n).forEach(function(l){s.removeAttribute(l)}))})}}var Bpe={name:"applyStyles",enabled:!0,phase:"write",fn:LXe,effect:PXe,requires:["computeStyles"]};function Dh(t){return t.split("-")[0]}var I0=Math.max,h4=Math.min,Aw=Math.round;function Cw(t,e){e===void 0&&(e=!1);var i=t.getBoundingClientRect(),r=1,s=1;if(xu(t)&&e){var n=t.offsetHeight,o=t.offsetWidth;o>0&&(r=Aw(i.width)/o||1),n>0&&(s=Aw(i.height)/n||1)}return{width:i.width/r,height:i.height/s,top:i.top/s,right:i.right/r,bottom:i.bottom/s,left:i.left/r,x:i.left/r,y:i.top/s}}function jU(t){var e=Cw(t),i=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-i)<=1&&(i=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:i,height:r}}function zpe(t,e){var i=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(i&&Vpe(i)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Zh(t){return $c(t).getComputedStyle(t)}function NXe(t){return["table","td","th"].indexOf(Jh(t))>=0}function uy(t){return((Mw(t)?t.ownerDocument:t.document)||window.document).documentElement}function O$(t){return Jh(t)==="html"?t:t.assignedSlot||t.parentNode||(Vpe(t)?t.host:null)||uy(t)}function _Y(t){return!xu(t)||Zh(t).position==="fixed"?null:t.offsetParent}function FXe(t){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,i=navigator.userAgent.indexOf("Trident")!==-1;if(i&&xu(t)){var r=Zh(t);if(r.position==="fixed")return null}for(var s=O$(t);xu(s)&&["html","body"].indexOf(Jh(s))<0;){var n=Zh(s);if(n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].indexOf(n.willChange)!==-1||e&&n.willChange==="filter"||e&&n.filter&&n.filter!=="none")return s;s=s.parentNode}return null}function ME(t){for(var e=$c(t),i=_Y(t);i&&NXe(i)&&Zh(i).position==="static";)i=_Y(i);return i&&(Jh(i)==="html"||Jh(i)==="body"&&Zh(i).position==="static")?e:i||FXe(t)||e}function UU(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function cS(t,e,i){return I0(t,h4(e,i))}function DXe(t,e,i){var r=cS(t,e,i);return r>i?i:r}function Gpe(){return{top:0,right:0,bottom:0,left:0}}function qpe(t){return Object.assign({},Gpe(),t)}function Hpe(t,e){return e.reduce(function(i,r){return i[r]=t,i},{})}var jXe=function(e,i){return e=typeof e=="function"?e(Object.assign({},i.rects,{placement:i.placement})):e,qpe(typeof e!="number"?e:Hpe(e,IE))};function UXe(t){var e,i=t.state,r=t.name,s=t.options,n=i.elements.arrow,o=i.modifiersData.popperOffsets,a=Dh(i.placement),l=UU(a),u=[Na,Cu].indexOf(a)>=0,c=u?"height":"width";if(!(!n||!o)){var d=jXe(s.padding,i),f=jU(n),m=l==="y"?Pa:Na,g=l==="y"?Au:Cu,v=i.rects.reference[c]+i.rects.reference[l]-o[l]-i.rects.popper[c],b=o[l]-i.rects.reference[l],_=ME(n),S=_?l==="y"?_.clientHeight||0:_.clientWidth||0:0,M=v/2-b/2,x=d[m],T=S-f[c]-d[g],I=S/2-f[c]/2+M,$=cS(x,I,T),L=l;i.modifiersData[r]=(e={},e[L]=$,e.centerOffset=$-I,e)}}function VXe(t){var e=t.state,i=t.options,r=i.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||zpe(e.elements.popper,s)&&(e.elements.arrow=s))}var BXe={name:"arrow",enabled:!0,phase:"main",fn:UXe,effect:VXe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function $w(t){return t.split("-")[1]}var zXe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function GXe(t){var e=t.x,i=t.y,r=window,s=r.devicePixelRatio||1;return{x:Aw(e*s)/s||0,y:Aw(i*s)/s||0}}function xY(t){var e,i=t.popper,r=t.popperRect,s=t.placement,n=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,u=t.adaptive,c=t.roundOffsets,d=t.isFixed,f=c===!0?GXe(o):typeof c=="function"?c(o):o,m=f.x,g=m===void 0?0:m,v=f.y,b=v===void 0?0:v,_=o.hasOwnProperty("x"),S=o.hasOwnProperty("y"),M=Na,x=Pa,T=window;if(u){var I=ME(i),$="clientHeight",L="clientWidth";if(I===$c(i)&&(I=uy(i),Zh(I).position!=="static"&&a==="absolute"&&($="scrollHeight",L="scrollWidth")),I=I,s===Pa||(s===Na||s===Cu)&&n===v3){x=Au;var B=d&&T.visualViewport?T.visualViewport.height:I[$];b-=B-r.height,b*=l?1:-1}if(s===Na||(s===Pa||s===Au)&&n===v3){M=Cu;var z=d&&T.visualViewport?T.visualViewport.width:I[L];g-=z-r.width,g*=l?1:-1}}var H=Object.assign({position:a},u&&zXe);if(l){var J;return Object.assign({},H,(J={},J[x]=S?"0":"",J[M]=_?"0":"",J.transform=(T.devicePixelRatio||1)<=1?"translate("+g+"px, "+b+"px)":"translate3d("+g+"px, "+b+"px, 0)",J))}return Object.assign({},H,(e={},e[x]=S?b+"px":"",e[M]=_?g+"px":"",e.transform="",e))}function qXe(t){var e=t.state,i=t.options,r=i.gpuAcceleration,s=r===void 0?!0:r,n=i.adaptive,o=n===void 0?!0:n,a=i.roundOffsets,l=a===void 0?!0:a,u={placement:Dh(e.placement),variation:$w(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,xY(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,xY(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var HXe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:qXe,data:{}},mI={passive:!0};function WXe(t){var e=t.state,i=t.instance,r=t.options,s=r.scroll,n=s===void 0?!0:s,o=r.resize,a=o===void 0?!0:o,l=$c(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return n&&u.forEach(function(c){c.addEventListener("scroll",i.update,mI)}),a&&l.addEventListener("resize",i.update,mI),function(){n&&u.forEach(function(c){c.removeEventListener("scroll",i.update,mI)}),a&&l.removeEventListener("resize",i.update,mI)}}var JXe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:WXe,data:{}},ZXe={left:"right",right:"left",bottom:"top",top:"bottom"};function hA(t){return t.replace(/left|right|bottom|top/g,function(e){return ZXe[e]})}var YXe={start:"end",end:"start"};function SY(t){return t.replace(/start|end/g,function(e){return YXe[e]})}function VU(t){var e=$c(t),i=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:i,scrollTop:r}}function BU(t){return Cw(uy(t)).left+VU(t).scrollLeft}function KXe(t){var e=$c(t),i=uy(t),r=e.visualViewport,s=i.clientWidth,n=i.clientHeight,o=0,a=0;return r&&(s=r.width,n=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=r.offsetLeft,a=r.offsetTop)),{width:s,height:n,x:o+BU(t),y:a}}function QXe(t){var e,i=uy(t),r=VU(t),s=(e=t.ownerDocument)==null?void 0:e.body,n=I0(i.scrollWidth,i.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=I0(i.scrollHeight,i.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-r.scrollLeft+BU(t),l=-r.scrollTop;return Zh(s||i).direction==="rtl"&&(a+=I0(i.clientWidth,s?s.clientWidth:0)-n),{width:n,height:o,x:a,y:l}}function zU(t){var e=Zh(t),i=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(i+s+r)}function Wpe(t){return["html","body","#document"].indexOf(Jh(t))>=0?t.ownerDocument.body:xu(t)&&zU(t)?t:Wpe(O$(t))}function hS(t,e){var i;e===void 0&&(e=[]);var r=Wpe(t),s=r===((i=t.ownerDocument)==null?void 0:i.body),n=$c(r),o=s?[n].concat(n.visualViewport||[],zU(r)?r:[]):r,a=e.concat(o);return s?a:a.concat(hS(O$(o)))}function xF(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function XXe(t){var e=Cw(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}function EY(t,e){return e===jpe?xF(KXe(t)):Mw(e)?XXe(e):xF(QXe(uy(t)))}function eet(t){var e=hS(O$(t)),i=["absolute","fixed"].indexOf(Zh(t).position)>=0,r=i&&xu(t)?ME(t):t;return Mw(r)?e.filter(function(s){return Mw(s)&&zpe(s,r)&&Jh(s)!=="body"&&(i?Zh(s).position!=="static":!0)}):[]}function tet(t,e,i){var r=e==="clippingParents"?eet(t):[].concat(e),s=[].concat(r,[i]),n=s[0],o=s.reduce(function(a,l){var u=EY(t,l);return a.top=I0(u.top,a.top),a.right=h4(u.right,a.right),a.bottom=h4(u.bottom,a.bottom),a.left=I0(u.left,a.left),a},EY(t,n));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Jpe(t){var e=t.reference,i=t.element,r=t.placement,s=r?Dh(r):null,n=r?$w(r):null,o=e.x+e.width/2-i.width/2,a=e.y+e.height/2-i.height/2,l;switch(s){case Pa:l={x:o,y:e.y-i.height};break;case Au:l={x:o,y:e.y+e.height};break;case Cu:l={x:e.x+e.width,y:a};break;case Na:l={x:e.x-i.width,y:a};break;default:l={x:e.x,y:e.y}}var u=s?UU(s):null;if(u!=null){var c=u==="y"?"height":"width";switch(n){case Iw:l[u]=l[u]-(e[c]/2-i[c]/2);break;case v3:l[u]=l[u]+(e[c]/2-i[c]/2);break}}return l}function b3(t,e){e===void 0&&(e={});var i=e,r=i.placement,s=r===void 0?t.placement:r,n=i.boundary,o=n===void 0?xXe:n,a=i.rootBoundary,l=a===void 0?jpe:a,u=i.elementContext,c=u===void 0?o2:u,d=i.altBoundary,f=d===void 0?!1:d,m=i.padding,g=m===void 0?0:m,v=qpe(typeof g!="number"?g:Hpe(g,IE)),b=c===o2?SXe:o2,_=t.rects.popper,S=t.elements[f?b:c],M=tet(Mw(S)?S:S.contextElement||uy(t.elements.popper),o,l),x=Cw(t.elements.reference),T=Jpe({reference:x,element:_,strategy:"absolute",placement:s}),I=xF(Object.assign({},_,T)),$=c===o2?I:x,L={top:M.top-$.top+v.top,bottom:$.bottom-M.bottom+v.bottom,left:M.left-$.left+v.left,right:$.right-M.right+v.right},B=t.modifiersData.offset;if(c===o2&&B){var z=B[s];Object.keys(L).forEach(function(H){var J=[Cu,Au].indexOf(H)>=0?1:-1,K=[Pa,Au].indexOf(H)>=0?"y":"x";L[H]+=z[K]*J})}return L}function iet(t,e){e===void 0&&(e={});var i=e,r=i.placement,s=i.boundary,n=i.rootBoundary,o=i.padding,a=i.flipVariations,l=i.allowedAutoPlacements,u=l===void 0?Upe:l,c=$w(r),d=c?a?wY:wY.filter(function(g){return $w(g)===c}):IE,f=d.filter(function(g){return u.indexOf(g)>=0});f.length===0&&(f=d);var m=f.reduce(function(g,v){return g[v]=b3(t,{placement:v,boundary:s,rootBoundary:n,padding:o})[Dh(v)],g},{});return Object.keys(m).sort(function(g,v){return m[g]-m[v]})}function ret(t){if(Dh(t)===DU)return[];var e=hA(t);return[SY(t),e,SY(e)]}function set(t){var e=t.state,i=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var s=i.mainAxis,n=s===void 0?!0:s,o=i.altAxis,a=o===void 0?!0:o,l=i.fallbackPlacements,u=i.padding,c=i.boundary,d=i.rootBoundary,f=i.altBoundary,m=i.flipVariations,g=m===void 0?!0:m,v=i.allowedAutoPlacements,b=e.options.placement,_=Dh(b),S=_===b,M=l||(S||!g?[hA(b)]:ret(b)),x=[b].concat(M).reduce(function(ve,_e){return ve.concat(Dh(_e)===DU?iet(e,{placement:_e,boundary:c,rootBoundary:d,padding:u,flipVariations:g,allowedAutoPlacements:v}):_e)},[]),T=e.rects.reference,I=e.rects.popper,$=new Map,L=!0,B=x[0],z=0;z<x.length;z++){var H=x[z],J=Dh(H),K=$w(H)===Iw,Q=[Pa,Au].indexOf(J)>=0,y=Q?"width":"height",A=b3(e,{placement:H,boundary:c,rootBoundary:d,altBoundary:f,padding:u}),N=Q?K?Cu:Na:K?Au:Pa;T[y]>I[y]&&(N=hA(N));var D=hA(N),ne=[];if(n&&ne.push(A[J]<=0),a&&ne.push(A[N]<=0,A[D]<=0),ne.every(function(ve){return ve})){B=H,L=!1;break}$.set(H,ne)}if(L)for(var q=g?3:1,he=function(_e){var Se=x.find(function(Oe){var Te=$.get(Oe);if(Te)return Te.slice(0,_e).every(function(we){return we})});if(Se)return B=Se,"break"},te=q;te>0;te--){var me=he(te);if(me==="break")break}e.placement!==B&&(e.modifiersData[r]._skip=!0,e.placement=B,e.reset=!0)}}var net={name:"flip",enabled:!0,phase:"main",fn:set,requiresIfExists:["offset"],data:{_skip:!1}};function TY(t,e,i){return i===void 0&&(i={x:0,y:0}),{top:t.top-e.height-i.y,right:t.right-e.width+i.x,bottom:t.bottom-e.height+i.y,left:t.left-e.width-i.x}}function IY(t){return[Pa,Cu,Au,Na].some(function(e){return t[e]>=0})}function oet(t){var e=t.state,i=t.name,r=e.rects.reference,s=e.rects.popper,n=e.modifiersData.preventOverflow,o=b3(e,{elementContext:"reference"}),a=b3(e,{altBoundary:!0}),l=TY(o,r),u=TY(a,s,n),c=IY(l),d=IY(u);e.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}var aet={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:oet};function uet(t,e,i){var r=Dh(t),s=[Na,Pa].indexOf(r)>=0?-1:1,n=typeof i=="function"?i(Object.assign({},e,{placement:t})):i,o=n[0],a=n[1];return o=o||0,a=(a||0)*s,[Na,Cu].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function cet(t){var e=t.state,i=t.options,r=t.name,s=i.offset,n=s===void 0?[0,0]:s,o=Upe.reduce(function(c,d){return c[d]=uet(d,e.rects,n),c},{}),a=o[e.placement],l=a.x,u=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=o}var het={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:cet};function det(t){var e=t.state,i=t.name;e.modifiersData[i]=Jpe({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var pet={name:"popperOffsets",enabled:!0,phase:"read",fn:det,data:{}};function fet(t){return t==="x"?"y":"x"}function met(t){var e=t.state,i=t.options,r=t.name,s=i.mainAxis,n=s===void 0?!0:s,o=i.altAxis,a=o===void 0?!1:o,l=i.boundary,u=i.rootBoundary,c=i.altBoundary,d=i.padding,f=i.tether,m=f===void 0?!0:f,g=i.tetherOffset,v=g===void 0?0:g,b=b3(e,{boundary:l,rootBoundary:u,padding:d,altBoundary:c}),_=Dh(e.placement),S=$w(e.placement),M=!S,x=UU(_),T=fet(x),I=e.modifiersData.popperOffsets,$=e.rects.reference,L=e.rects.popper,B=typeof v=="function"?v(Object.assign({},e.rects,{placement:e.placement})):v,z=typeof B=="number"?{mainAxis:B,altAxis:B}:Object.assign({mainAxis:0,altAxis:0},B),H=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,J={x:0,y:0};if(I){if(n){var K,Q=x==="y"?Pa:Na,y=x==="y"?Au:Cu,A=x==="y"?"height":"width",N=I[x],D=N+b[Q],ne=N-b[y],q=m?-L[A]/2:0,he=S===Iw?$[A]:L[A],te=S===Iw?-L[A]:-$[A],me=e.elements.arrow,ve=m&&me?jU(me):{width:0,height:0},_e=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Gpe(),Se=_e[Q],Oe=_e[y],Te=cS(0,$[A],ve[A]),we=M?$[A]/2-q-Te-Se-z.mainAxis:he-Te-Se-z.mainAxis,Ie=M?-$[A]/2+q+Te+Oe+z.mainAxis:te+Te+Oe+z.mainAxis,Ae=e.elements.arrow&&ME(e.elements.arrow),W=Ae?x==="y"?Ae.clientTop||0:Ae.clientLeft||0:0,V=(K=H?.[x])!=null?K:0,j=N+we-V-W,se=N+Ie-V,ye=cS(m?h4(D,j):D,N,m?I0(ne,se):ne);I[x]=ye,J[x]=ye-N}if(a){var ae,U=x==="x"?Pa:Na,le=x==="x"?Au:Cu,re=I[T],k=T==="y"?"height":"width",O=re+b[U],C=re-b[le],G=[Pa,Na].indexOf(_)!==-1,Z=(ae=H?.[T])!=null?ae:0,F=G?O:re-$[k]-L[k]-Z+z.altAxis,ie=G?re+$[k]+L[k]-Z-z.altAxis:C,ge=m&&G?DXe(F,re,ie):cS(m?F:O,re,m?ie:C);I[T]=ge,J[T]=ge-re}e.modifiersData[r]=J}}var yet={name:"preventOverflow",enabled:!0,phase:"main",fn:met,requiresIfExists:["offset"]};function get(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function vet(t){return t===$c(t)||!xu(t)?VU(t):get(t)}function bet(t){var e=t.getBoundingClientRect(),i=Aw(e.width)/t.offsetWidth||1,r=Aw(e.height)/t.offsetHeight||1;return i!==1||r!==1}function wet(t,e,i){i===void 0&&(i=!1);var r=xu(e),s=xu(e)&&bet(e),n=uy(e),o=Cw(t,s),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!i)&&((Jh(e)!=="body"||zU(n))&&(a=vet(e)),xu(e)?(l=Cw(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):n&&(l.x=BU(n))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function _et(t){var e=new Map,i=new Set,r=[];t.forEach(function(n){e.set(n.name,n)});function s(n){i.add(n.name);var o=[].concat(n.requires||[],n.requiresIfExists||[]);o.forEach(function(a){if(!i.has(a)){var l=e.get(a);l&&s(l)}}),r.push(n)}return t.forEach(function(n){i.has(n.name)||s(n)}),r}function xet(t){var e=_et(t);return kXe.reduce(function(i,r){return i.concat(e.filter(function(s){return s.phase===r}))},[])}function Eet(t){var e;return function(){return e||(e=new Promise(function(i){Promise.resolve().then(function(){e=void 0,i(t())})})),e}}function Tet(t){var e=t.reduce(function(i,r){var s=i[r.name];return i[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,i},{});return Object.keys(e).map(function(i){return e[i]})}var MY={placement:"bottom",modifiers:[],strategy:"absolute"};function AY(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Iet(t){t===void 0&&(t={});var e=t,i=e.defaultModifiers,r=i===void 0?[]:i,s=e.defaultOptions,n=s===void 0?MY:s;return function(a,l,u){u===void 0&&(u=n);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},MY,n),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,m={state:c,setOptions:function(_){var S=typeof _=="function"?_(c.options):_;v(),c.options=Object.assign({},n,c.options,S),c.scrollParents={reference:Mw(a)?hS(a):a.contextElement?hS(a.contextElement):[],popper:hS(l)};var M=xet(Tet([].concat(r,c.options.modifiers)));return c.orderedModifiers=M.filter(function(x){return x.enabled}),g(),m.update()},forceUpdate:function(){if(!f){var _=c.elements,S=_.reference,M=_.popper;if(AY(S,M)){c.rects={reference:wet(S,ME(M),c.options.strategy==="fixed"),popper:jU(M)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(z){return c.modifiersData[z.name]=Object.assign({},z.data)});for(var x=0;x<c.orderedModifiers.length;x++){if(c.reset===!0){c.reset=!1,x=-1;continue}var T=c.orderedModifiers[x],I=T.fn,$=T.options,L=$===void 0?{}:$,B=T.name;typeof I=="function"&&(c=I({state:c,options:L,name:B,instance:m})||c)}}}},update:Eet(function(){return new Promise(function(b){m.forceUpdate(),b(c)})}),destroy:function(){v(),f=!0}};if(!AY(a,l))return m;m.setOptions(u).then(function(b){!f&&u.onFirstUpdate&&u.onFirstUpdate(b)});function g(){c.orderedModifiers.forEach(function(b){var _=b.name,S=b.options,M=S===void 0?{}:S,x=b.effect;if(typeof x=="function"){var T=x({state:c,name:_,instance:m,options:M}),I=function(){};d.push(T||I)}})}function v(){d.forEach(function(b){return b()}),d=[]}return m}}var Met=[JXe,pet,HXe,Bpe,het,net,yet,BXe,aet],Aet=Iet({defaultModifiers:Met}),Cet="tippy-box",Zpe="tippy-content",Ype="tippy-backdrop",Kpe="tippy-arrow",Qpe="tippy-svg-arrow",Eg={passive:!0,capture:!0},Xpe=function(){return document.body};function dk(t,e,i){if(Array.isArray(t)){var r=t[e];return r??(Array.isArray(i)?i[e]:i)}return t}function GU(t,e){var i={}.toString.call(t);return i.indexOf("[object")===0&&i.indexOf(e+"]")>-1}function efe(t,e){return typeof t=="function"?t.apply(void 0,e):t}function CY(t,e){if(e===0)return t;var i;return function(r){clearTimeout(i),i=setTimeout(function(){t(r)},e)}}function $et(t,e){var i=Object.assign({},t);return e.forEach(function(r){delete i[r]}),i}function Oet(t){return t.split(/\s+/).filter(Boolean)}function jg(t){return[].concat(t)}function $Y(t,e){t.indexOf(e)===-1&&t.push(e)}function Ret(t){return t.filter(function(e,i){return t.indexOf(e)===i})}function tfe(t){return t.split("-")[0]}function Ow(t){return[].slice.call(t)}function OY(t){return Object.keys(t).reduce(function(e,i){return t[i]!==void 0&&(e[i]=t[i]),e},{})}function M0(){return document.createElement("div")}function R$(t){return["Element","Fragment"].some(function(e){return GU(t,e)})}function ket(t){return GU(t,"NodeList")}function qU(t){return GU(t,"MouseEvent")}function Let(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function Pet(t){return R$(t)?[t]:ket(t)?Ow(t):Array.isArray(t)?t:Ow(document.querySelectorAll(t))}function pk(t,e){t.forEach(function(i){i&&(i.style.transitionDuration=e+"ms")})}function w3(t,e){t.forEach(function(i){i&&i.setAttribute("data-state",e)})}function ife(t){var e,i=jg(t),r=i[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function Net(t,e){var i=e.clientX,r=e.clientY;return t.every(function(s){var n=s.popperRect,o=s.popperState,a=s.props,l=a.interactiveBorder,u=tfe(o.placement),c=o.modifiersData.offset;if(!c)return!0;var d=u==="bottom"?c.top.y:0,f=u==="top"?c.bottom.y:0,m=u==="right"?c.left.x:0,g=u==="left"?c.right.x:0,v=n.top-r+d>l,b=r-n.bottom-f>l,_=n.left-i+m>l,S=i-n.right-g>l;return v||b||_||S})}function fk(t,e,i){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(s){t[r](s,i)})}function RY(t,e){for(var i=e;i;){var r;if(t.contains(i))return!0;i=i.getRootNode==null||(r=i.getRootNode())==null?void 0:r.host}return!1}var _h={isTouch:!1},kY=0;function Fet(){_h.isTouch||(_h.isTouch=!0,window.performance&&document.addEventListener("mousemove",rfe))}function rfe(){var t=performance.now();t-kY<20&&(_h.isTouch=!1,document.removeEventListener("mousemove",rfe)),kY=t}function Det(){var t=document.activeElement;if(Let(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function jet(){document.addEventListener("touchstart",Fet,Eg),window.addEventListener("blur",Det)}var Uet=typeof window<"u"&&typeof document<"u",Vet=Uet?!!window.msCrypto:!1,Bet={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},zet={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},gc=Object.assign({appendTo:Xpe,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Bet,zet),Get=Object.keys(gc),qet=function(e){var i=Object.keys(e);i.forEach(function(r){gc[r]=e[r]})};function sfe(t){var e=t.plugins||[],i=e.reduce(function(r,s){var n=s.name,o=s.defaultValue;if(n){var a;r[n]=t[n]!==void 0?t[n]:(a=gc[n])!=null?a:o}return r},{});return Object.assign({},t,i)}function Het(t,e){var i=e?Object.keys(sfe(Object.assign({},gc,{plugins:e}))):Get,r=i.reduce(function(s,n){var o=(t.getAttribute("data-tippy-"+n)||"").trim();if(!o)return s;if(n==="content")s[n]=o;else try{s[n]=JSON.parse(o)}catch{s[n]=o}return s},{});return r}function LY(t,e){var i=Object.assign({},e,{content:efe(e.content,[t])},e.ignoreAttributes?{}:Het(t,e.plugins));return i.aria=Object.assign({},gc.aria,i.aria),i.aria={expanded:i.aria.expanded==="auto"?e.interactive:i.aria.expanded,content:i.aria.content==="auto"?e.interactive?null:"describedby":i.aria.content},i}var Wet=function(){return"innerHTML"};function SF(t,e){t[Wet()]=e}function PY(t){var e=M0();return t===!0?e.className=Kpe:(e.className=Qpe,R$(t)?e.appendChild(t):SF(e,t)),e}function NY(t,e){R$(e.content)?(SF(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?SF(t,e.content):t.textContent=e.content)}function d4(t){var e=t.firstElementChild,i=Ow(e.children);return{box:e,content:i.find(function(r){return r.classList.contains(Zpe)}),arrow:i.find(function(r){return r.classList.contains(Kpe)||r.classList.contains(Qpe)}),backdrop:i.find(function(r){return r.classList.contains(Ype)})}}function nfe(t){var e=M0(),i=M0();i.className=Cet,i.setAttribute("data-state","hidden"),i.setAttribute("tabindex","-1");var r=M0();r.className=Zpe,r.setAttribute("data-state","hidden"),NY(r,t.props),e.appendChild(i),i.appendChild(r),s(t.props,t.props);function s(n,o){var a=d4(e),l=a.box,u=a.content,c=a.arrow;o.theme?l.setAttribute("data-theme",o.theme):l.removeAttribute("data-theme"),typeof o.animation=="string"?l.setAttribute("data-animation",o.animation):l.removeAttribute("data-animation"),o.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?l.setAttribute("role",o.role):l.removeAttribute("role"),(n.content!==o.content||n.allowHTML!==o.allowHTML)&&NY(u,t.props),o.arrow?c?n.arrow!==o.arrow&&(l.removeChild(c),l.appendChild(PY(o.arrow))):l.appendChild(PY(o.arrow)):c&&l.removeChild(c)}return{popper:e,onUpdate:s}}nfe.$$tippy=!0;var Jet=1,yI=[],mk=[];function Zet(t,e){var i=LY(t,Object.assign({},gc,sfe(OY(e)))),r,s,n,o=!1,a=!1,l=!1,u=!1,c,d,f,m=[],g=CY(j,i.interactiveDebounce),v,b=Jet++,_=null,S=Ret(i.plugins),M={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},x={id:b,reference:t,popper:M0(),popperInstance:_,props:i,state:M,plugins:S,clearDelayTimeouts:F,setProps:ie,setContent:ge,show:xe,hide:fe,hideWithInteractivity:ze,enable:G,disable:Z,unmount:He,destroy:et};if(!i.render)return x;var T=i.render(x),I=T.popper,$=T.onUpdate;I.setAttribute("data-tippy-root",""),I.id="tippy-"+x.id,x.popper=I,t._tippy=x,I._tippy=x;var L=S.map(function(Ve){return Ve.fn(x)}),B=t.hasAttribute("aria-expanded");return Ae(),q(),N(),D("onCreate",[x]),i.showOnCreate&&O(),I.addEventListener("mouseenter",function(){x.props.interactive&&x.state.isVisible&&x.clearDelayTimeouts()}),I.addEventListener("mouseleave",function(){x.props.interactive&&x.props.trigger.indexOf("mouseenter")>=0&&Q().addEventListener("mousemove",g)}),x;function z(){var Ve=x.props.touch;return Array.isArray(Ve)?Ve:[Ve,0]}function H(){return z()[0]==="hold"}function J(){var Ve;return!!((Ve=x.props.render)!=null&&Ve.$$tippy)}function K(){return v||t}function Q(){var Ve=K().parentNode;return Ve?ife(Ve):document}function y(){return d4(I)}function A(Ve){return x.state.isMounted&&!x.state.isVisible||_h.isTouch||c&&c.type==="focus"?0:dk(x.props.delay,Ve?0:1,gc.delay)}function N(Ve){Ve===void 0&&(Ve=!1),I.style.pointerEvents=x.props.interactive&&!Ve?"":"none",I.style.zIndex=""+x.props.zIndex}function D(Ve,be,ke){if(ke===void 0&&(ke=!0),L.forEach(function(ut){ut[Ve]&&ut[Ve].apply(ut,be)}),ke){var Ge;(Ge=x.props)[Ve].apply(Ge,be)}}function ne(){var Ve=x.props.aria;if(Ve.content){var be="aria-"+Ve.content,ke=I.id,Ge=jg(x.props.triggerTarget||t);Ge.forEach(function(ut){var pt=ut.getAttribute(be);if(x.state.isVisible)ut.setAttribute(be,pt?pt+" "+ke:ke);else{var vt=pt&&pt.replace(ke,"").trim();vt?ut.setAttribute(be,vt):ut.removeAttribute(be)}})}}function q(){if(!(B||!x.props.aria.expanded)){var Ve=jg(x.props.triggerTarget||t);Ve.forEach(function(be){x.props.interactive?be.setAttribute("aria-expanded",x.state.isVisible&&be===K()?"true":"false"):be.removeAttribute("aria-expanded")})}}function he(){Q().removeEventListener("mousemove",g),yI=yI.filter(function(Ve){return Ve!==g})}function te(Ve){if(!(_h.isTouch&&(l||Ve.type==="mousedown"))){var be=Ve.composedPath&&Ve.composedPath()[0]||Ve.target;if(!(x.props.interactive&&RY(I,be))){if(jg(x.props.triggerTarget||t).some(function(ke){return RY(ke,be)})){if(_h.isTouch||x.state.isVisible&&x.props.trigger.indexOf("click")>=0)return}else D("onClickOutside",[x,Ve]);x.props.hideOnClick===!0&&(x.clearDelayTimeouts(),x.hide(),a=!0,setTimeout(function(){a=!1}),x.state.isMounted||Se())}}}function me(){l=!0}function ve(){l=!1}function _e(){var Ve=Q();Ve.addEventListener("mousedown",te,!0),Ve.addEventListener("touchend",te,Eg),Ve.addEventListener("touchstart",ve,Eg),Ve.addEventListener("touchmove",me,Eg)}function Se(){var Ve=Q();Ve.removeEventListener("mousedown",te,!0),Ve.removeEventListener("touchend",te,Eg),Ve.removeEventListener("touchstart",ve,Eg),Ve.removeEventListener("touchmove",me,Eg)}function Oe(Ve,be){we(Ve,function(){!x.state.isVisible&&I.parentNode&&I.parentNode.contains(I)&&be()})}function Te(Ve,be){we(Ve,be)}function we(Ve,be){var ke=y().box;function Ge(ut){ut.target===ke&&(fk(ke,"remove",Ge),be())}if(Ve===0)return be();fk(ke,"remove",d),fk(ke,"add",Ge),d=Ge}function Ie(Ve,be,ke){ke===void 0&&(ke=!1);var Ge=jg(x.props.triggerTarget||t);Ge.forEach(function(ut){ut.addEventListener(Ve,be,ke),m.push({node:ut,eventType:Ve,handler:be,options:ke})})}function Ae(){H()&&(Ie("touchstart",V,{passive:!0}),Ie("touchend",se,{passive:!0})),Oet(x.props.trigger).forEach(function(Ve){if(Ve!=="manual")switch(Ie(Ve,V),Ve){case"mouseenter":Ie("mouseleave",se);break;case"focus":Ie(Vet?"focusout":"blur",ye);break;case"focusin":Ie("focusout",ye);break}})}function W(){m.forEach(function(Ve){var be=Ve.node,ke=Ve.eventType,Ge=Ve.handler,ut=Ve.options;be.removeEventListener(ke,Ge,ut)}),m=[]}function V(Ve){var be,ke=!1;if(!(!x.state.isEnabled||ae(Ve)||a)){var Ge=((be=c)==null?void 0:be.type)==="focus";c=Ve,v=Ve.currentTarget,q(),!x.state.isVisible&&qU(Ve)&&yI.forEach(function(ut){return ut(Ve)}),Ve.type==="click"&&(x.props.trigger.indexOf("mouseenter")<0||o)&&x.props.hideOnClick!==!1&&x.state.isVisible?ke=!0:O(Ve),Ve.type==="click"&&(o=!ke),ke&&!Ge&&C(Ve)}}function j(Ve){var be=Ve.target,ke=K().contains(be)||I.contains(be);if(!(Ve.type==="mousemove"&&ke)){var Ge=k().concat(I).map(function(ut){var pt,vt=ut._tippy,kt=(pt=vt.popperInstance)==null?void 0:pt.state;return kt?{popperRect:ut.getBoundingClientRect(),popperState:kt,props:i}:null}).filter(Boolean);Net(Ge,Ve)&&(he(),C(Ve))}}function se(Ve){var be=ae(Ve)||x.props.trigger.indexOf("click")>=0&&o;if(!be){if(x.props.interactive){x.hideWithInteractivity(Ve);return}C(Ve)}}function ye(Ve){x.props.trigger.indexOf("focusin")<0&&Ve.target!==K()||x.props.interactive&&Ve.relatedTarget&&I.contains(Ve.relatedTarget)||C(Ve)}function ae(Ve){return _h.isTouch?H()!==Ve.type.indexOf("touch")>=0:!1}function U(){le();var Ve=x.props,be=Ve.popperOptions,ke=Ve.placement,Ge=Ve.offset,ut=Ve.getReferenceClientRect,pt=Ve.moveTransition,vt=J()?d4(I).arrow:null,kt=ut?{getBoundingClientRect:ut,contextElement:ut.contextElement||K()}:t,dt={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Ti){var kr=Ti.state;if(J()){var _n=y(),Wa=_n.box;["placement","reference-hidden","escaped"].forEach(function(Ja){Ja==="placement"?Wa.setAttribute("data-placement",kr.placement):kr.attributes.popper["data-popper-"+Ja]?Wa.setAttribute("data-"+Ja,""):Wa.removeAttribute("data-"+Ja)}),kr.attributes.popper={}}}},Wt=[{name:"offset",options:{offset:Ge}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!pt}},dt];J()&&vt&&Wt.push({name:"arrow",options:{element:vt,padding:3}}),Wt.push.apply(Wt,be?.modifiers||[]),x.popperInstance=Aet(kt,I,Object.assign({},be,{placement:ke,onFirstUpdate:f,modifiers:Wt}))}function le(){x.popperInstance&&(x.popperInstance.destroy(),x.popperInstance=null)}function re(){var Ve=x.props.appendTo,be,ke=K();x.props.interactive&&Ve===Xpe||Ve==="parent"?be=ke.parentNode:be=efe(Ve,[ke]),be.contains(I)||be.appendChild(I),x.state.isMounted=!0,U()}function k(){return Ow(I.querySelectorAll("[data-tippy-root]"))}function O(Ve){x.clearDelayTimeouts(),Ve&&D("onTrigger",[x,Ve]),_e();var be=A(!0),ke=z(),Ge=ke[0],ut=ke[1];_h.isTouch&&Ge==="hold"&&ut&&(be=ut),be?r=setTimeout(function(){x.show()},be):x.show()}function C(Ve){if(x.clearDelayTimeouts(),D("onUntrigger",[x,Ve]),!x.state.isVisible){Se();return}if(!(x.props.trigger.indexOf("mouseenter")>=0&&x.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(Ve.type)>=0&&o)){var be=A(!1);be?s=setTimeout(function(){x.state.isVisible&&x.hide()},be):n=requestAnimationFrame(function(){x.hide()})}}function G(){x.state.isEnabled=!0}function Z(){x.hide(),x.state.isEnabled=!1}function F(){clearTimeout(r),clearTimeout(s),cancelAnimationFrame(n)}function ie(Ve){if(!x.state.isDestroyed){D("onBeforeUpdate",[x,Ve]),W();var be=x.props,ke=LY(t,Object.assign({},be,OY(Ve),{ignoreAttributes:!0}));x.props=ke,Ae(),be.interactiveDebounce!==ke.interactiveDebounce&&(he(),g=CY(j,ke.interactiveDebounce)),be.triggerTarget&&!ke.triggerTarget?jg(be.triggerTarget).forEach(function(Ge){Ge.removeAttribute("aria-expanded")}):ke.triggerTarget&&t.removeAttribute("aria-expanded"),q(),N(),$&&$(be,ke),x.popperInstance&&(U(),k().forEach(function(Ge){requestAnimationFrame(Ge._tippy.popperInstance.forceUpdate)})),D("onAfterUpdate",[x,Ve])}}function ge(Ve){x.setProps({content:Ve})}function xe(){var Ve=x.state.isVisible,be=x.state.isDestroyed,ke=!x.state.isEnabled,Ge=_h.isTouch&&!x.props.touch,ut=dk(x.props.duration,0,gc.duration);if(!(Ve||be||ke||Ge)&&!K().hasAttribute("disabled")&&(D("onShow",[x],!1),x.props.onShow(x)!==!1)){if(x.state.isVisible=!0,J()&&(I.style.visibility="visible"),N(),_e(),x.state.isMounted||(I.style.transition="none"),J()){var pt=y(),vt=pt.box,kt=pt.content;pk([vt,kt],0)}f=function(){var Wt;if(!(!x.state.isVisible||u)){if(u=!0,I.offsetHeight,I.style.transition=x.props.moveTransition,J()&&x.props.animation){var Gt=y(),Ti=Gt.box,kr=Gt.content;pk([Ti,kr],ut),w3([Ti,kr],"visible")}ne(),q(),$Y(mk,x),(Wt=x.popperInstance)==null||Wt.forceUpdate(),D("onMount",[x]),x.props.animation&&J()&&Te(ut,function(){x.state.isShown=!0,D("onShown",[x])})}},re()}}function fe(){var Ve=!x.state.isVisible,be=x.state.isDestroyed,ke=!x.state.isEnabled,Ge=dk(x.props.duration,1,gc.duration);if(!(Ve||be||ke)&&(D("onHide",[x],!1),x.props.onHide(x)!==!1)){if(x.state.isVisible=!1,x.state.isShown=!1,u=!1,o=!1,J()&&(I.style.visibility="hidden"),he(),Se(),N(!0),J()){var ut=y(),pt=ut.box,vt=ut.content;x.props.animation&&(pk([pt,vt],Ge),w3([pt,vt],"hidden"))}ne(),q(),x.props.animation?J()&&Oe(Ge,x.unmount):x.unmount()}}function ze(Ve){Q().addEventListener("mousemove",g),$Y(yI,g),g(Ve)}function He(){x.state.isVisible&&x.hide(),x.state.isMounted&&(le(),k().forEach(function(Ve){Ve._tippy.unmount()}),I.parentNode&&I.parentNode.removeChild(I),mk=mk.filter(function(Ve){return Ve!==x}),x.state.isMounted=!1,D("onHidden",[x]))}function et(){x.state.isDestroyed||(x.clearDelayTimeouts(),x.unmount(),W(),delete t._tippy,x.state.isDestroyed=!0,D("onDestroy",[x]))}}function Ht(t,e){e===void 0&&(e={});var i=gc.plugins.concat(e.plugins||[]);jet();var r=Object.assign({},e,{plugins:i}),s=Pet(t),n=s.reduce(function(o,a){var l=a&&Zet(a,r);return l&&o.push(l),o},[]);return R$(t)?n[0]:n}Ht.defaultProps=gc;Ht.setDefaultProps=qet;Ht.currentInput=_h;var Yet=Object.assign({},Bpe,{effect:function(e){var i=e.state,r={popper:{position:i.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(i.elements.popper.style,r.popper),i.styles=r,i.elements.arrow&&Object.assign(i.elements.arrow.style,r.arrow)}}),Ket=function(e,i){var r;i===void 0&&(i={});var s=e,n=[],o=[],a,l=i.overrides,u=[],c=!1;function d(){o=s.map(function(x){return jg(x.props.triggerTarget||x.reference)}).reduce(function(x,T){return x.concat(T)},[])}function f(){n=s.map(function(x){return x.reference})}function m(x){s.forEach(function(T){x?T.enable():T.disable()})}function g(x){return s.map(function(T){var I=T.setProps;return T.setProps=function($){I($),T.reference===a&&x.setProps($)},function(){T.setProps=I}})}function v(x,T){var I=o.indexOf(T);if(T!==a){a=T;var $=(l||[]).concat("content").reduce(function(L,B){return L[B]=s[I].props[B],L},{});x.setProps(Object.assign({},$,{getReferenceClientRect:typeof $.getReferenceClientRect=="function"?$.getReferenceClientRect:function(){var L;return(L=n[I])==null?void 0:L.getBoundingClientRect()}}))}}m(!1),f(),d();var b={fn:function(){return{onDestroy:function(){m(!0)},onHidden:function(){a=null},onClickOutside:function(I){I.props.showOnCreate&&!c&&(c=!0,a=null)},onShow:function(I){I.props.showOnCreate&&!c&&(c=!0,v(I,n[0]))},onTrigger:function(I,$){v(I,$.currentTarget)}}}},_=Ht(M0(),Object.assign({},$et(i,["overrides"]),{plugins:[b].concat(i.plugins||[]),triggerTarget:o,popperOptions:Object.assign({},i.popperOptions,{modifiers:[].concat(((r=i.popperOptions)==null?void 0:r.modifiers)||[],[Yet])})})),S=_.show;_.show=function(x){if(S(),!a&&x==null)return v(_,n[0]);if(!(a&&x==null)){if(typeof x=="number")return n[x]&&v(_,n[x]);if(s.indexOf(x)>=0){var T=x.reference;return v(_,T)}if(n.indexOf(x)>=0)return v(_,x)}},_.showNext=function(){var x=n[0];if(!a)return _.show(0);var T=n.indexOf(a);_.show(n[T+1]||x)},_.showPrevious=function(){var x=n[n.length-1];if(!a)return _.show(x);var T=n.indexOf(a),I=n[T-1]||x;_.show(I)};var M=_.setProps;return _.setProps=function(x){l=x.overrides||l,M(x)},_.setInstances=function(x){m(!0),u.forEach(function(T){return T()}),s=x,m(!1),f(),d(),u=g(_),_.setProps({triggerTarget:o})},u=g(_),_},Qet={name:"animateFill",defaultValue:!1,fn:function(e){var i;if(!((i=e.props.render)!=null&&i.$$tippy))return{};var r=d4(e.popper),s=r.box,n=r.content,o=e.props.animateFill?Xet():null;return{onCreate:function(){o&&(s.insertBefore(o,s.firstElementChild),s.setAttribute("data-animatefill",""),s.style.overflow="hidden",e.setProps({arrow:!1,animation:"shift-away"}))},onMount:function(){if(o){var l=s.style.transitionDuration,u=Number(l.replace("ms",""));n.style.transitionDelay=Math.round(u/10)+"ms",o.style.transitionDuration=l,w3([o],"visible")}},onShow:function(){o&&(o.style.transitionDuration="0ms")},onHide:function(){o&&w3([o],"hidden")}}}};function Xet(){var t=M0();return t.className=Ype,w3([t],"hidden"),t}var EF={clientX:0,clientY:0},gI=[];function ofe(t){var e=t.clientX,i=t.clientY;EF={clientX:e,clientY:i}}function ett(t){t.addEventListener("mousemove",ofe)}function ttt(t){t.removeEventListener("mousemove",ofe)}var itt={name:"followCursor",defaultValue:!1,fn:function(e){var i=e.reference,r=ife(e.props.triggerTarget||i),s=!1,n=!1,o=!0,a=e.props;function l(){return e.props.followCursor==="initial"&&e.state.isVisible}function u(){r.addEventListener("mousemove",f)}function c(){r.removeEventListener("mousemove",f)}function d(){s=!0,e.setProps({getReferenceClientRect:null}),s=!1}function f(v){var b=v.target?i.contains(v.target):!0,_=e.props.followCursor,S=v.clientX,M=v.clientY,x=i.getBoundingClientRect(),T=S-x.left,I=M-x.top;(b||!e.props.interactive)&&e.setProps({getReferenceClientRect:function(){var L=i.getBoundingClientRect(),B=S,z=M;_==="initial"&&(B=L.left+T,z=L.top+I);var H=_==="horizontal"?L.top:z,J=_==="vertical"?L.right:B,K=_==="horizontal"?L.bottom:z,Q=_==="vertical"?L.left:B;return{width:J-Q,height:K-H,top:H,right:J,bottom:K,left:Q}}})}function m(){e.props.followCursor&&(gI.push({instance:e,doc:r}),ett(r))}function g(){gI=gI.filter(function(v){return v.instance!==e}),gI.filter(function(v){return v.doc===r}).length===0&&ttt(r)}return{onCreate:m,onDestroy:g,onBeforeUpdate:function(){a=e.props},onAfterUpdate:function(b,_){var S=_.followCursor;s||S!==void 0&&a.followCursor!==S&&(g(),S?(m(),e.state.isMounted&&!n&&!l()&&u()):(c(),d()))},onMount:function(){e.props.followCursor&&!n&&(o&&(f(EF),o=!1),l()||u())},onTrigger:function(b,_){qU(_)&&(EF={clientX:_.clientX,clientY:_.clientY}),n=_.type==="focus"},onHidden:function(){e.props.followCursor&&(d(),c(),o=!0)}}}};function rtt(t,e){var i;return{popperOptions:Object.assign({},t.popperOptions,{modifiers:[].concat((((i=t.popperOptions)==null?void 0:i.modifiers)||[]).filter(function(r){var s=r.name;return s!==e.name}),[e])})}}var stt={name:"inlinePositioning",defaultValue:!1,fn:function(e){var i=e.reference;function r(){return!!e.props.inlinePositioning}var s,n=-1,o=!1,a=[],l={name:"tippyInlinePositioning",enabled:!0,phase:"afterWrite",fn:function(m){var g=m.state;r()&&(a.indexOf(g.placement)!==-1&&(a=[]),s!==g.placement&&a.indexOf(g.placement)===-1&&(a.push(g.placement),e.setProps({getReferenceClientRect:function(){return u(g.placement)}})),s=g.placement)}};function u(f){return ntt(tfe(f),i.getBoundingClientRect(),Ow(i.getClientRects()),n)}function c(f){o=!0,e.setProps(f),o=!1}function d(){o||c(rtt(e.props,l))}return{onCreate:d,onAfterUpdate:d,onTrigger:function(m,g){if(qU(g)){var v=Ow(e.reference.getClientRects()),b=v.find(function(S){return S.left-2<=g.clientX&&S.right+2>=g.clientX&&S.top-2<=g.clientY&&S.bottom+2>=g.clientY}),_=v.indexOf(b);n=_>-1?_:n}},onHidden:function(){n=-1}}}};function ntt(t,e,i,r){if(i.length<2||t===null)return e;if(i.length===2&&r>=0&&i[0].left>i[1].right)return i[r]||e;switch(t){case"top":case"bottom":{var s=i[0],n=i[i.length-1],o=t==="top",a=s.top,l=n.bottom,u=o?s.left:n.left,c=o?s.right:n.right,d=c-u,f=l-a;return{top:a,bottom:l,left:u,right:c,width:d,height:f}}case"left":case"right":{var m=Math.min.apply(Math,i.map(function(I){return I.left})),g=Math.max.apply(Math,i.map(function(I){return I.right})),v=i.filter(function(I){return t==="left"?I.left===m:I.right===g}),b=v[0].top,_=v[v.length-1].bottom,S=m,M=g,x=M-S,T=_-b;return{top:b,bottom:_,left:S,right:M,width:x,height:T}}default:return e}}var ott={name:"sticky",defaultValue:!1,fn:function(e){var i=e.reference,r=e.popper;function s(){return e.popperInstance?e.popperInstance.state.elements.reference:i}function n(u){return e.props.sticky===!0||e.props.sticky===u}var o=null,a=null;function l(){var u=n("reference")?s().getBoundingClientRect():null,c=n("popper")?r.getBoundingClientRect():null;(u&&FY(o,u)||c&&FY(a,c))&&e.popperInstance&&e.popperInstance.update(),o=u,a=c,e.state.isMounted&&requestAnimationFrame(l)}return{onMount:function(){e.props.sticky&&l()}}}};function FY(t,e){return t&&e?t.top!==e.top||t.right!==e.right||t.bottom!==e.bottom||t.left!==e.left:!0}Ht.setDefaultProps({render:nfe});Ht.setDefaultProps({onShow:t=>{if(!t.props.content)return!1}});function HU(t,e={},i={mount:!0}){const r=Ln(),s=Xe(),n=Xe({isEnabled:!1,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1});let o=null;const a=()=>o||(o=document.createDocumentFragment(),o),l=I=>{let $,L=ir(I)?I.value:I;if(qh(L))r&&(L.appContext=r.appContext),np(L,a()),$=()=>a();else if(typeof L=="object"){let B=Hh(L);r&&(B.appContext=r.appContext),np(B,a()),$=()=>a()}else $=L;return $},u=I=>{let $={};return ir(I)?$=I.value||{}:bu(I)?$={...I}:$={...I},$.content&&($.content=l($.content)),$.triggerTarget&&($.triggerTarget=ir($.triggerTarget)?$.triggerTarget.value:$.triggerTarget),(!$.plugins||!Array.isArray($.plugins))&&($.plugins=[]),$.plugins=$.plugins.filter(L=>L.name!=="vueTippyReactiveState"),$.plugins.push({name:"vueTippyReactiveState",fn:()=>({onCreate(){n.value.isEnabled=!0},onMount(){n.value.isMounted=!0},onShow(){n.value.isMounted=!0,n.value.isVisible=!0},onShown(){n.value.isShown=!0},onHide(){n.value.isMounted=!1,n.value.isVisible=!1},onHidden(){n.value.isShown=!1},onUnmounted(){n.value.isMounted=!1},onDestroy(){n.value.isDestroyed=!0}})}),$},c=()=>{s.value&&s.value.setProps(u(e))},d=()=>{!s.value||!e.content||s.value.setContent(l(e.content))},f=I=>{var $;($=s.value)===null||$===void 0||$.setContent(l(I))},m=I=>{var $;($=s.value)===null||$===void 0||$.setProps(u(I))},g=()=>{s.value&&(s.value.destroy(),s.value=void 0),o=null},v=()=>{var I;(I=s.value)===null||I===void 0||I.show()},b=()=>{var I;(I=s.value)===null||I===void 0||I.hide()},_=()=>{var I;(I=s.value)===null||I===void 0||I.disable(),n.value.isEnabled=!1},S=()=>{var I;(I=s.value)===null||I===void 0||I.enable(),n.value.isEnabled=!0},M=()=>{var I;(I=s.value)===null||I===void 0||I.unmount()},x=()=>{if(!t)return;let I=ir(t)?t.value:t;typeof I=="function"&&(I=I()),I&&(s.value=Ht(I,u(e)),I.$tippy=T)},T={tippy:s,refresh:c,refreshContent:d,setContent:f,setProps:m,destroy:g,hide:b,show:v,disable:_,enable:S,unmount:M,mount:x,state:n};return i.mount&&(r?(r.isMounted?x():Co(x),g1(()=>{g()})):x()),ir(e)||bu(e)?Js(e,c,{immediate:!1}):ir(e.content)&&Js(e.content,d,{immediate:!1}),T}function att(t,e){const i=Xe();return Co(()=>{const s=(Array.isArray(t)?t.map(n=>n.value):typeof t=="function"?t():t.value).map(n=>n instanceof Element?n._tippy:n).filter(Boolean);i.value=Ket(s,e?{allowHTML:!0,...e}:{allowHTML:!0})}),{singleton:i}}const ltt=zi({props:{to:{type:[String,Function]},tag:{type:String,default:"span"},contentTag:{type:String,default:"span"},contentClass:{type:String,default:null},appendTo:{default:()=>Ht.defaultProps.appendTo},aria:{default:()=>Ht.defaultProps.aria},delay:{default:()=>Ht.defaultProps.delay},duration:{default:()=>Ht.defaultProps.duration},getReferenceClientRect:{default:()=>Ht.defaultProps.getReferenceClientRect},hideOnClick:{type:[Boolean,String],default:()=>Ht.defaultProps.hideOnClick},ignoreAttributes:{type:Boolean,default:()=>Ht.defaultProps.ignoreAttributes},interactive:{type:Boolean,default:()=>Ht.defaultProps.interactive},interactiveBorder:{default:()=>Ht.defaultProps.interactiveBorder},interactiveDebounce:{default:()=>Ht.defaultProps.interactiveDebounce},moveTransition:{default:()=>Ht.defaultProps.moveTransition},offset:{default:()=>Ht.defaultProps.offset},onAfterUpdate:{default:()=>Ht.defaultProps.onAfterUpdate},onBeforeUpdate:{default:()=>Ht.defaultProps.onBeforeUpdate},onCreate:{default:()=>Ht.defaultProps.onCreate},onDestroy:{default:()=>Ht.defaultProps.onDestroy},onHidden:{default:()=>Ht.defaultProps.onHidden},onHide:{default:()=>Ht.defaultProps.onHide},onMount:{default:()=>Ht.defaultProps.onMount},onShow:{default:()=>Ht.defaultProps.onShow},onShown:{default:()=>Ht.defaultProps.onShown},onTrigger:{default:()=>Ht.defaultProps.onTrigger},onUntrigger:{default:()=>Ht.defaultProps.onUntrigger},onClickOutside:{default:()=>Ht.defaultProps.onClickOutside},placement:{default:()=>Ht.defaultProps.placement},plugins:{default:()=>Ht.defaultProps.plugins},popperOptions:{default:()=>Ht.defaultProps.popperOptions},render:{default:()=>Ht.defaultProps.render},showOnCreate:{type:Boolean,default:()=>Ht.defaultProps.showOnCreate},touch:{type:[Boolean,String,Array],default:()=>Ht.defaultProps.touch},trigger:{default:()=>Ht.defaultProps.trigger},triggerTarget:{default:()=>Ht.defaultProps.triggerTarget},animateFill:{type:Boolean,default:()=>Ht.defaultProps.animateFill},followCursor:{type:[Boolean,String],default:()=>Ht.defaultProps.followCursor},inlinePositioning:{type:Boolean,default:()=>Ht.defaultProps.inlinePositioning},sticky:{type:[Boolean,String],default:()=>Ht.defaultProps.sticky},allowHTML:{type:Boolean,default:()=>Ht.defaultProps.allowHTML},animation:{default:()=>Ht.defaultProps.animation},arrow:{default:()=>Ht.defaultProps.arrow},content:{default:()=>Ht.defaultProps.content},inertia:{default:()=>Ht.defaultProps.inertia},maxWidth:{default:()=>Ht.defaultProps.maxWidth},role:{default:()=>Ht.defaultProps.role},theme:{default:()=>Ht.defaultProps.theme},zIndex:{default:()=>Ht.defaultProps.zIndex}},emits:["state"],setup(t,{slots:e,emit:i,expose:r}){const s=Xe(),n=Xe(),o=Xe(!1),a=()=>{let d={...t};for(const f of["to","tag","contentTag","contentClass"])d.hasOwnProperty(f)&&delete d[f];return d};let l=s;t.to&&(typeof Element<"u"&&t.to instanceof Element?l=()=>t.to:(typeof t.to=="string"||t.to instanceof String)&&(l=()=>document.querySelector(t.to)));const u=HU(l,a());Co(()=>{o.value=!0,Kh(()=>{e.content&&u.setContent(()=>n.value)})}),Js(u.state,()=>{i("state",ti(u.state))},{immediate:!0,deep:!0}),Js(()=>t,()=>{u.setProps(a()),e.content&&u.setContent(()=>n.value)},{deep:!0});let c=Ys({elem:s,contentElem:n,mounted:o,...u});return r(c),()=>{const d=e.default?e.default(c):[];return Hh(t.tag,{ref:s,"data-v-tippy":""},e.content?[d,Hh(t.contentTag,{ref:n,style:{display:o.value?"inherit":"none"},class:t.contentClass},e.content(c))]:d)}}}),utt=["a11y","allowHTML","arrow","flip","flipOnUpdate","hideOnClick","ignoreAttributes","inertia","interactive","lazy","multiple","showOnInit","touch","touchHold"];let TF={};Object.keys(Ht.defaultProps).forEach(t=>{utt.includes(t)?TF[t]={type:Boolean,default:function(){return Ht.defaultProps[t]}}:TF[t]={default:function(){return Ht.defaultProps[t]}}});const ctt=zi({props:TF,setup(t){const e=Xe([]),{singleton:i}=att(e,t);return{instances:e,singleton:i}},mounted(){var t;const i=this.$el.parentElement.querySelectorAll("[data-v-tippy]");this.instances=Array.from(i).map(r=>r._tippy).filter(Boolean),(t=this.singleton)===null||t===void 0||t.setInstances(this.instances)},render(){let t=this.$slots.default?this.$slots.default():[];return Hh(()=>t)}}),htt={mounted(t,e,i){const r=typeof e.value=="string"?{content:e.value}:e.value||{},s=Object.keys(e.modifiers||{}),n=s.find(a=>a!=="arrow"),o=s.findIndex(a=>a==="arrow")!==-1;n&&(r.placement=r.placement||n),o&&(r.arrow=r.arrow!==void 0?r.arrow:!0),i.props&&i.props.onTippyShow&&(r.onShow=function(...a){var l;return(l=i.props)===null||l===void 0?void 0:l.onTippyShow(...a)}),i.props&&i.props.onTippyShown&&(r.onShown=function(...a){var l;return(l=i.props)===null||l===void 0?void 0:l.onTippyShown(...a)}),i.props&&i.props.onTippyHidden&&(r.onHidden=function(...a){var l;return(l=i.props)===null||l===void 0?void 0:l.onTippyHidden(...a)}),i.props&&i.props.onTippyHide&&(r.onHide=function(...a){var l;return(l=i.props)===null||l===void 0?void 0:l.onTippyHide(...a)}),i.props&&i.props.onTippyMount&&(r.onMount=function(...a){var l;return(l=i.props)===null||l===void 0?void 0:l.onTippyMount(...a)}),t.getAttribute("title")&&!r.content&&(r.content=t.getAttribute("title"),t.removeAttribute("title")),t.getAttribute("content")&&!r.content&&(r.content=t.getAttribute("content")),HU(t,r)},unmounted(t){t.$tippy?t.$tippy.destroy():t._tippy&&t._tippy.destroy()},updated(t,e){const i=typeof e.value=="string"?{content:e.value}:e.value||{};t.getAttribute("title")&&!i.content&&(i.content=t.getAttribute("title"),t.removeAttribute("title")),t.getAttribute("content")&&!i.content&&(i.content=t.getAttribute("content")),t.$tippy?t.$tippy.setProps(i||{}):t._tippy&&t._tippy.setProps(i||{})}},dtt={install(t,e={}){Ht.setDefaultProps(e.defaultProps||{}),t.directive(e.directive||"tippy",htt),t.component(e.component||"tippy",ltt),t.component(e.componentSingleton||"tippy-singleton",ctt)}},afe=Ht.setDefaultProps;afe({ignoreAttributes:!0,plugins:[ott,stt,itt,Qet]});const ptt=dtt,ftt=zi({name:"App",components:{Shell:_Xe},setup(){const t=Ln();Co(()=>{new Spe().observe(t?.proxy?.$refs["app-size"]),afe({aria:{content:"labelledby"},theme:"ramp4",animation:"scale",inertia:!0,trigger:"mouseenter manual focus",touch:["hold",200],delay:[300,0],appendTo:t?.proxy?.$el})})}});const mtt=["lang"],ytt={class:"h-full",ref:"app-size"};function gtt(t,e,i,r,s,n){const o=Os("shell");return ht(),Ot("div",{class:"ramp-app ramp-styles animation-enabled",lang:t.$i18n.locale},[at("div",ytt,[wi(o)],512)],8,mtt)}const vtt=Op(ftt,[["render",gtt]]),xh="focus-list",Cy="focus-item",btt="focus-icon",wtt="focus-container",jb=`[${xh}],[${wtt}]`,vI="truncate-text",bI="show-truncate",cb="focused",lfe=`button,input,select,a,textarea,[contenteditable],[${xh}],[${btt}]`,_tt={mounted(t,e){+t.getAttribute("tabindex")<=0&&t.setAttribute("tabindex","0"),t.toggleAttribute(xh,!0),new xtt(t,e.value)},updated(t){ufe(t)}};function ufe(t){t.querySelectorAll(lfe).forEach(i=>{if(i.closest(jb)===t||i.closest(jb)===i&&i.parentElement.closest(jb)===t)if(i.closest(`[${xh}],.${cb}`).classList.contains(cb))i.setAttribute("tabindex","0");else{i.setAttribute("tabindex","-1");return}})}class xtt{element;highlightedItem;isHorizontal;isClicked;isTapped;constructor(e,i){this.element=e,this.highlightedItem=this.element,this.isHorizontal=i==="horizontal",this.isClicked=!1,this.isTapped=!1,this.setTabIndex(-1),this.element.setAttribute("role","group");const r=this;e.addEventListener("keydown",function(s){r.onKeydown(s)}),e.addEventListener("click",function(s){r.onClick(s)}),e.addEventListener("focus",function(){r.onFocus()}),e.addEventListener("blur",function(){r.onBlur()}),e.addEventListener("mousedown",function(){r.onMousedown()}),e.addEventListener("touchstart",function(){r.onTouchstart()})}setTabIndex(e,i=this.element){i.querySelectorAll(lfe).forEach(s=>{(e===-1||s.closest(jb)===this.element||s.closest(jb)===s&&s.parentElement.closest(jb)===this.element||s.closest(`[${xh}],.${cb}`).classList.contains(cb))&&s.setAttribute("tabindex",e.toString())})}defocusItem(e){e.classList.remove(cb),this.setTabIndex(-1,e),e._tippy&&e._tippy.hide(),e.getAttribute(Cy)===bI&&e.querySelector(`[${vI}]`)?._tippy?.hide()}focusItem(e){e.classList.add(cb),this.setAriaActiveDescendant(e),this.setTabIndex(0,e),e.scrollIntoView({block:"nearest"}),e._tippy&&!this.isTapped&&e._tippy.show(),e.getAttribute(Cy)===bI&&e.querySelector(`[${vI}]`)?._tippy?.show(),this.isTapped=!1}setAriaActiveDescendant(e){this.element.setAttribute("aria-activedescendant",e.getAttribute("id"))}shiftHighlight(e,i=!1){if(this.defocusItem(this.highlightedItem),i)if(this.highlightedItem===this.element)this.highlightedItem=e[e.length-1];else{const r=Array.prototype.indexOf.call(e,this.highlightedItem);this.highlightedItem=e[r-1]||e[e.length-1]}else if(this.highlightedItem===this.element)this.highlightedItem=e[0];else{const r=Array.prototype.indexOf.call(e,this.highlightedItem);this.highlightedItem=e[r+1]||e[0]}this.element.focus(),this.focusItem(this.highlightedItem)}onKeydown(e){const i=this,r=Array.prototype.filter.call(this.element.querySelectorAll(`[${Cy}]`),s=>s.closest(`[${xh}]`)===i.element&&!!s.offsetParent);if(r.length!==0)switch(e.key){case"Up":case"ArrowUp":if(this.isHorizontal)break;e.preventDefault(),e.stopPropagation(),this.shiftHighlight(r,!0);break;case"Down":case"ArrowDown":if(this.isHorizontal)break;e.preventDefault(),e.stopPropagation(),this.shiftHighlight(r);break;case"Left":case"ArrowLeft":if(!this.isHorizontal)break;e.preventDefault(),e.stopPropagation(),this.shiftHighlight(r,!0);break;case"Right":case"ArrowRight":if(!this.isHorizontal)break;e.preventDefault(),e.stopPropagation(),this.shiftHighlight(r);break;case"Esc":case"Escape":this.highlightedItem!==this.element&&(e.preventDefault(),e.stopPropagation(),this.defocusItem(this.highlightedItem),this.highlightedItem=this.element,this.element.removeAttribute("aria-activedescendant"),this.element.focus());break;case"Enter":case" ":e.target===this.element&&this.highlightedItem!==this.element&&(e.preventDefault(),e.stopPropagation(),this.highlightedItem.click());break}}onClick(e){this.defocusItem(this.highlightedItem);let i=e.target;if(!i.hasAttribute(xh))for(;i.parentElement.closest(`[${xh}]`)!==this.element;)i=i.parentElement.closest(`[${xh}]`);this.highlightedItem=i.closest(`[${Cy}]`)||i.closest(`[${xh}]`)||this.highlightedItem,i.hasAttribute(`${Cy}`)&&this.element.focus(),this.highlightedItem!==this.element?this.focusItem(this.highlightedItem):this.element.removeAttribute("aria-activedescendant")}onFocus(){this.highlightedItem&&!this.isClicked&&(this.highlightedItem._tippy&&this.highlightedItem._tippy.show(),this.highlightedItem.getAttribute(Cy)===bI&&this.highlightedItem.querySelector(`[${vI}]`)?._tippy?.show()),this.isClicked=!1,this.element.hasAttribute("aria-activedescendant")||this.highlightedItem===this.element||this.setAriaActiveDescendant(this.highlightedItem),ufe(this.element)}onBlur(){this.highlightedItem&&(this.highlightedItem._tippy&&this.highlightedItem._tippy.hide(),this.highlightedItem.getAttribute(Cy)===bI&&this.highlightedItem.querySelector(`[${vI}]`)?._tippy?.hide())}onMousedown(){this.isClicked=!0}onTouchstart(){this.isTapped=!0}}const DY="focus-item",Stt={beforeMount(t,e){t.hasAttribute("id")||t.setAttribute("id",Ett()),e.value?t.setAttribute(DY,e.value):t.toggleAttribute(DY,!0)}};function Ett(){let t;do t="focus-item-"+Math.random().toString(36).substring(2,9);while(document.getElementById(t)!==null);return t}const WU="focus-container",cfe="focus-list",Ttt="focus-icon",yk=`[${cfe}],[${WU}]`,jY=`button,input,select,a,textarea,[contenteditable],.ag-tab-guard,[${cfe}],[${WU}],[${Ttt}]`;let gk=[];const Itt={mounted(t){[...document.querySelectorAll(".inner-shell")].some(i=>i.contains(t))&&gk.push(new Mtt(t))},beforeUnmount(t){gk=gk.filter(e=>e.element===t?(e.removeEventListeners(),!1):!0)}};class Mtt{element;constructor(e){this.element=e,this.element.toggleAttribute(WU,!0),this.element.tabIndex=0,this.disableTabbing();const i=this;this.element.addEventListener("keypress",function(r){i.onKeypress(r)}),this.element.addEventListener("click",function(){i.onClick()}),this.element.addEventListener("focusout",function(r){i.onFocusOut(r)}),this.element.addEventListener("focus",function(){i.onFocus()})}removeEventListeners(){const e=this;this.element.removeEventListener("keypress",function(i){e.onKeypress(i)}),this.element.removeEventListener("click",function(){e.onClick()}),this.element.removeEventListener("focusout",function(i){e.onFocusOut(i)}),this.element.removeEventListener("focus",function(){e.onFocus()})}onKeypress(e){e.target===this.element&&(e.key==="Enter"||e.key===" ")&&this.enableTabbing().focus()}onClick(){this.enableTabbing()}onFocusOut(e){this.element.contains(e.relatedTarget)||this.disableTabbing()}onFocus(){this.disableTabbing()}disableTabbing(){Array.prototype.filter.call(this.element.querySelectorAll(jY),()=>!0).forEach(i=>{i.tabIndex=-1})}enableTabbing(){let e;return Array.prototype.map.call(this.element.querySelectorAll(jY),i=>{(i.closest(yk)===this.element||i.closest(yk)===i&&i.parentElement.closest(yk)===this.element)&&i.offsetParent&&(i.tabIndex=0,e===void 0&&(e=i))}),e}}const Att="aaa1rp3barth4b_ott3vie4c1le2ogado5udhabi7c_ademy5centure6ountant_s9o1tor4d_s1ult4e_g1ro2tna4f_l1rica5g_akhan5ency5i_g1rbus3force5tel5kdn3l_faromeo7ibaba4pay4lfinanz6state5y2sace3tom5m_azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o_l2partments8p_le4q_uarelle8r_ab1mco4chi3my2pa2t_e3s_da2ia2sociates9t_hleta5torney7u_ction5di_ble3o3spost5thor3o_s4vianca6w_s2x_a2z_ure5ba_by2idu3namex3narepublic11d1k2r_celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b_c1t1va3cg1n2d1e_ats2uty4er2ntley5rlin4st_buy5t2f1g1h_arti5i_ble3d1ke2ng_o3o1z2j1lack_friday9ockbuster8g1omberg7ue3m_s1w2n_pparibas9o_ats3ehringer8fa2m1nd2o_k_ing5sch2tik2on4t1utique6x2r_adesco6idgestone9oadway5ker3ther5ussels7s1t1uild_ers6siness6y1zz3v1w1y1z_h3ca_b1fe2l_l1vinklein9m_era3p2non3petown5ital_one8r_avan4ds2e_er_s4s2sa1e1h1ino4t_ering5holic7ba1n1re2s2c1d1enter4o1rn3f_a1d2g1h_anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i_priani6rcle4sco3tadel4i_c2y_eats7k1l_aims4eaning6ick2nic1que6othing5ud3ub_med6m1n1o_ach3des3ffee4llege4ogne5m_cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking_channel11l1p2rsica5untry4pon_s4rses6pa2r_edit_card4union9icket5own3s1uise_s6u_isinella9v1w1x1y_mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e_al_er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si_gn4v2hl2iamonds6et2gital5rect_ory7scount3ver5h2y2j1k1m1np2o_cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c_o2deka3u_cation8e1g1mail3erck5nergy4gineer_ing9terprises10pson4quipment8r_icsson6ni3s_q1tate5t_isalat7u_rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n_s2rm_ers5shion4t3edex3edback6rrari3ero6i_at2delity5o2lm2nal1nce1ial7re_stone6mdale6sh_ing5t_ness6j1k1lickr3ghts4r2orist4wers5y2m1o_o_d_network8tball6rd1ex2sale4um3undation8x2r_ee1senius7l1ogans4ntdoor4ier7tr2ujitsu5n_d2rniture7tbol5yi3ga_l_lery3o1up4me_s3p1rden4y2b_iz3d_n2e_a1nt_ing5orge5f1g_ee3h1i_ft_s3ves2ing5l_ass3e1obal2o4m_ail3bh2o1x2n1odaddy5ld_point6f2o_dyear5g_le4p1t1v2p1q1r_ainger5phics5tis4een3ipe3ocery4up4s1t1u_ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc_bank7ealth_care8lp1sinki6re1mes5gtv3iphop4samitsu7tachi5v2k_t2m1n1ockey4ldings5iday5medepot5goods5s_ense7nda3rse3spital5t_ing5t_eles2s3mail5use3w2r1sbc3t1u_ghes5yatt3undai7ibm2cbc2e1u2d1e_ee3fm2kano4l1m_amat4db2mo_bilien9n_c1dustries8finiti5o2g1k1stitute6urance4e4t_ernational10uit4vestments10o1piranga7q1r_ish4s_maili5t_anbul7t_au2v3jaguar4va3cb2e_ep2tzt3welry6io2ll2m_p2nj2o_bs1urg4t1y2p_morgan6rs3uegos4niper7kaufen5ddi3e_rryhotels6logistics9properties14fh2g1h1i_a1ds2m1nder2le4tchen5wi3m1n1oeln3matsu5sher5p_mg2n2r_d1ed3uokgroup8w1y_oto4z2la_caixa5mborghini8er3ncaster5ia3d_rover6xess5salle5t_ino3robe5w_yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i_dl2fe_insurance9style7ghting6ke2lly3mited4o2ncoln4de2k2psy3ve1ing5k1lc1p2oan_s3cker3us3l1ndon4tte1o3ve3pl_financial11r1s1t_d_a3u_ndbeck6xe1ury5v1y2ma_cys3drid4if1son4keup4n_agement7go3p1rket_ing3s4riott5shalls7serati6ttel5ba2c_kinsey7d1e_d_ia3et2lbourne7me1orial6n_u2rckmsd7g1h1iami3crosoft7l1ni1t2t_subishi9k1l_b1s2m_a2n1o_bi_le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to_rcycles9v_ie4p1q1r1s_d2t_n1r2u_seum3ic3tual5v1w1x1y1z2na_b1goya4me2tura4vy3ba2c1e_c1t_bank4flix4work5ustar5w_s2xt_direct7us4f_l2g_o2hk2i_co2ke1on3nja3ssan1y5l1o_kia3rthwesternmutual14on4w_ruz3tv4p1r_a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan_group9dnavy5lo3m_ega4ne1g1l_ine5oo2pen3racle3nge4g_anic5igins6saka4tsuka4t2vh3pa_ge2nasonic7ris2s1tners4s1y3ssagens7y2ccw3e_t2f_izer5g1h_armacy6d1ilips5one2to_graphy6s4ysio5ics1tet2ures6d1n_g1k2oneer5zza4k1l_ace2y_station9umbing5s3m1n_c2ohl2ker3litie5rn2st3r_america6xi3ess3ime3o_d_uctions8f1gressive8mo2perties3y5tection8u_dential9s1t1ub2w_c2y2qa1pon3uebec3st5racing4dio4e_ad1lestate6tor2y4cipes5d_stone5umbrella9hab3ise_n3t2liance6n_t_als5pair3ort3ublican8st_aurant8view_s5xroth6ich_ardli6oh3l1o1p2o_cher3ks3deo3gers4om3s_vp3u_gby3hr2n2w_e2yukyu6sa_arland6fe_ty4kura4le1on3msclub4ung5ndvik_coromant12ofi4p1rl2s1ve2xo3b_i1s2c_a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e_arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x_y3fr2g1h_angrila6rp2w2ell3ia1ksha5oes2p_ping5uji3w_time7i_lk2na1gles5te3j1k_i_n2y_pe4l_ing4m_art3ile4n_cf3o_ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa_ce3ort2t3r_l2s1t_ada2ples4r1tebank4farm7c_group6ockholm6rage3e3ream4udio2y3yle4u_cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y_dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x_i3c_i2d_k2eam2ch_nology8l1masek5nnis4va3f1g1h_d1eater2re6iaa2ckets5enda4ffany5ps2res2ol4j_maxx4x2k_maxx5l1m_all4n1o_day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r_ade1ing4ining5vel_channel7ers_insurance16ust3v2t1ube2i1nes3shu4v_s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va_cations7na1guard7c1e_gas3ntures6risign5mögensberater2ung14sicherung10t2g1i_ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lkswagen7vo3te1ing3o2yage5u_elos6wales2mart4ter4ng_gou5tch_es6eather_channel12bcam3er2site5d_ding5ibo2r3f1hoswho6ien2ki2lliamhill9n_dows4e1ners6me2olterskluwer11odside6rk_s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u_tube6t1un3za_ppos4ra3ero3ip2m1one3uerich6w2",Ctt="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5تصالات6رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत_म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里_大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",Rw=(t,e)=>{for(const i in e)t[i]=e[i];return t},IF="numeric",MF="ascii",AF="alpha",dA="asciinumeric",wI="alphanumeric",CF="domain",hfe="emoji",$tt="scheme",Ott="slashscheme",UY="whitespace";function Rtt(t,e){return t in e||(e[t]=[]),e[t]}function n0(t,e,i){e[IF]&&(e[dA]=!0,e[wI]=!0),e[MF]&&(e[dA]=!0,e[AF]=!0),e[dA]&&(e[wI]=!0),e[AF]&&(e[wI]=!0),e[wI]&&(e[CF]=!0),e[hfe]&&(e[CF]=!0);for(const r in e){const s=Rtt(r,i);s.indexOf(t)<0&&s.push(t)}}function ktt(t,e){const i={};for(const r in e)e[r].indexOf(t)>=0&&(i[r]=!0);return i}function wl(t){t===void 0&&(t=null),this.j={},this.jr=[],this.jd=null,this.t=t}wl.groups={};wl.prototype={accepts(){return!!this.t},go(t){const e=this,i=e.j[t];if(i)return i;for(let r=0;r<e.jr.length;r++){const s=e.jr[r][0],n=e.jr[r][1];if(n&&s.test(t))return n}return e.jd},has(t,e){return e===void 0&&(e=!1),e?t in this.j:!!this.go(t)},ta(t,e,i,r){for(let s=0;s<t.length;s++)this.tt(t[s],e,i,r)},tr(t,e,i,r){r=r||wl.groups;let s;return e&&e.j?s=e:(s=new wl(e),i&&r&&n0(e,i,r)),this.jr.push([t,s]),s},ts(t,e,i,r){let s=this;const n=t.length;if(!n)return s;for(let o=0;o<n-1;o++)s=s.tt(t[o]);return s.tt(t[n-1],e,i,r)},tt(t,e,i,r){r=r||wl.groups;const s=this;if(e&&e.j)return s.j[t]=e,e;const n=e;let o,a=s.go(t);if(a?(o=new wl,Rw(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new wl,n){if(r)if(o.t&&typeof o.t=="string"){const l=Rw(ktt(o.t,r),i);n0(n,l,r)}else i&&n0(n,i,r);o.t=n}return s.j[t]=o,o}};const Jt=(t,e,i,r,s)=>t.ta(e,i,r,s),Jl=(t,e,i,r,s)=>t.tr(e,i,r,s),VY=(t,e,i,r,s)=>t.ts(e,i,r,s),gt=(t,e,i,r,s)=>t.tt(e,i,r,s),Dd="WORD",$F="UWORD",_3="LOCALHOST",OF="TLD",RF="UTLD",pA="SCHEME",qv="SLASH_SCHEME",p4="NUM",dfe="WS",JU="NL",hb="OPENBRACE",dS="OPENBRACKET",pS="OPENANGLEBRACKET",fS="OPENPAREN",Ug="CLOSEBRACE",db="CLOSEBRACKET",pb="CLOSEANGLEBRACKET",Vg="CLOSEPAREN",f4="AMPERSAND",m4="APOSTROPHE",y4="ASTERISK",Hf="AT",g4="BACKSLASH",v4="BACKTICK",b4="CARET",Yf="COLON",ZU="COMMA",w4="DOLLAR",fh="DOT",_4="EQUALS",YU="EXCLAMATION",mh="HYPHEN",x4="PERCENT",S4="PIPE",E4="PLUS",T4="POUND",I4="QUERY",KU="QUOTE",QU="SEMI",Bd="SLASH",mS="TILDE",M4="UNDERSCORE",pfe="EMOJI",A4="SYM";var ffe=Object.freeze({__proto__:null,WORD:Dd,UWORD:$F,LOCALHOST:_3,TLD:OF,UTLD:RF,SCHEME:pA,SLASH_SCHEME:qv,NUM:p4,WS:dfe,NL:JU,OPENBRACE:hb,OPENBRACKET:dS,OPENANGLEBRACKET:pS,OPENPAREN:fS,CLOSEBRACE:Ug,CLOSEBRACKET:db,CLOSEANGLEBRACKET:pb,CLOSEPAREN:Vg,AMPERSAND:f4,APOSTROPHE:m4,ASTERISK:y4,AT:Hf,BACKSLASH:g4,BACKTICK:v4,CARET:b4,COLON:Yf,COMMA:ZU,DOLLAR:w4,DOT:fh,EQUALS:_4,EXCLAMATION:YU,HYPHEN:mh,PERCENT:x4,PIPE:S4,PLUS:E4,POUND:T4,QUERY:I4,QUOTE:KU,SEMI:QU,SLASH:Bd,TILDE:mS,UNDERSCORE:M4,EMOJI:pfe,SYM:A4});const X1=/[a-z]/,vk=/\p{L}/u,bk=/\p{Emoji}/u,wk=/\d/,BY=/\s/,zY=`
`,Ltt="️",Ptt="‍";let _I=null,xI=null;function Ntt(t){t===void 0&&(t=[]);const e={};wl.groups=e;const i=new wl;_I==null&&(_I=GY(Att)),xI==null&&(xI=GY(Ctt)),gt(i,"'",m4),gt(i,"{",hb),gt(i,"[",dS),gt(i,"<",pS),gt(i,"(",fS),gt(i,"}",Ug),gt(i,"]",db),gt(i,">",pb),gt(i,")",Vg),gt(i,"&",f4),gt(i,"*",y4),gt(i,"@",Hf),gt(i,"`",v4),gt(i,"^",b4),gt(i,":",Yf),gt(i,",",ZU),gt(i,"$",w4),gt(i,".",fh),gt(i,"=",_4),gt(i,"!",YU),gt(i,"-",mh),gt(i,"%",x4),gt(i,"|",S4),gt(i,"+",E4),gt(i,"#",T4),gt(i,"?",I4),gt(i,'"',KU),gt(i,"/",Bd),gt(i,";",QU),gt(i,"~",mS),gt(i,"_",M4),gt(i,"\\",g4);const r=Jl(i,wk,p4,{[IF]:!0});Jl(r,wk,r);const s=Jl(i,X1,Dd,{[MF]:!0});Jl(s,X1,s);const n=Jl(i,vk,$F,{[AF]:!0});Jl(n,X1),Jl(n,vk,n);const o=Jl(i,BY,dfe,{[UY]:!0});gt(i,zY,JU,{[UY]:!0}),gt(o,zY),Jl(o,BY,o);const a=Jl(i,bk,pfe,{[hfe]:!0});Jl(a,bk,a),gt(a,Ltt,a);const l=gt(a,Ptt);Jl(l,bk,a);const u=[[X1,s]],c=[[X1,null],[vk,n]];for(let d=0;d<_I.length;d++)of(i,_I[d],OF,Dd,u);for(let d=0;d<xI.length;d++)of(i,xI[d],RF,$F,c);n0(OF,{tld:!0,ascii:!0},e),n0(RF,{utld:!0,alpha:!0},e),of(i,"file",pA,Dd,u),of(i,"mailto",pA,Dd,u),of(i,"http",qv,Dd,u),of(i,"https",qv,Dd,u),of(i,"ftp",qv,Dd,u),of(i,"ftps",qv,Dd,u),n0(pA,{scheme:!0,ascii:!0},e),n0(qv,{slashscheme:!0,ascii:!0},e),t=t.sort((d,f)=>d[0]>f[0]?1:-1);for(let d=0;d<t.length;d++){const f=t[d][0],g=t[d][1]?{[$tt]:!0}:{[Ott]:!0};f.indexOf("-")>=0?g[CF]=!0:X1.test(f)?wk.test(f)?g[dA]=!0:g[MF]=!0:g[IF]=!0,VY(i,f,f,g)}return VY(i,"localhost",_3,{ascii:!0}),i.jd=new wl(A4),{start:i,tokens:Rw({groups:e},ffe)}}function Ftt(t,e){const i=Dtt(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=i.length,s=[];let n=0,o=0;for(;o<r;){let a=t,l=null,u=0,c=null,d=-1,f=-1;for(;o<r&&(l=a.go(i[o]));)a=l,a.accepts()?(d=0,f=0,c=a):d>=0&&(d+=i[o].length,f++),u+=i[o].length,n+=i[o].length,o++;n-=d,o-=f,u-=d,s.push({t:c.t,v:e.slice(n-u,n),s:n-u,e:n})}return s}function Dtt(t){const e=[],i=t.length;let r=0;for(;r<i;){let s=t.charCodeAt(r),n,o=s<55296||s>56319||r+1===i||(n=t.charCodeAt(r+1))<56320||n>57343?t[r]:t.slice(r,r+2);e.push(o),r+=o.length}return e}function of(t,e,i,r,s){let n;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];t.j[l]?n=t.j[l]:(n=new wl(r),n.jr=s.slice(),t.j[l]=n),t=n}return n=new wl(i),n.jr=s.slice(),t.j[e[o-1]]=n,n}function GY(t){const e=[],i=[];let r=0,s="0123456789";for(;r<t.length;){let n=0;for(;s.indexOf(t[r+n])>=0;)n++;if(n>0){e.push(i.join(""));let o=parseInt(t.substring(r,r+n),10);for(;o>0;o--)i.pop();r+=n}else t[r]==="_"?(e.push(i.join("")),r++):(i.push(t[r]),r++)}return e}const x3={defaultProtocol:"http",events:null,format:qY,formatHref:qY,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function XU(t,e){e===void 0&&(e=null);let i=Rw({},x3);t&&(i=Rw(i,t instanceof XU?t.o:t));const r=i.ignoreTags,s=[];for(let n=0;n<r.length;n++)s.push(r[n].toUpperCase());this.o=i,e&&(this.defaultRender=e),this.ignoreTags=s}XU.prototype={o:x3,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,i){const r=e!=null;let s=this.o[t];return s&&(typeof s=="object"?(s=i.t in s?s[i.t]:x3[t],typeof s=="function"&&r&&(s=s(e,i))):typeof s=="function"&&r&&(s=s(e,i.t,i)),s)},getObj(t,e,i){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,i.t,i)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function qY(t){return t}function mfe(t,e){this.t="token",this.v=t,this.tk=e}mfe.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),i=t.get("truncate",e,this),r=t.get("format",e,this);return i&&r.length>i?r.substring(0,i)+"…":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t){return t===void 0&&(t=x3.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,i=this.toFormattedHref(t),r=t.get("tagName",i,e),s=this.toFormattedString(t),n={},o=t.get("className",i,e),a=t.get("target",i,e),l=t.get("rel",i,e),u=t.getObj("attributes",i,e),c=t.getObj("events",i,e);return n.href=i,o&&(n.class=o),a&&(n.target=a),l&&(n.rel=l),u&&Rw(n,u),{tagName:r,attributes:n,content:s,eventListeners:c}}};function k$(t,e){class i extends mfe{constructor(s,n){super(s,n),this.t=t}}for(const r in e)i.prototype[r]=e[r];return i.t=t,i}const HY=k$("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),WY=k$("text"),jtt=k$("nl"),$y=k$("url",{isLink:!0,toHref(t){return t===void 0&&(t=x3.defaultProtocol),this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==_3&&t[1].t===Yf}}),En=t=>new wl(t);function Utt(t){let{groups:e}=t;const i=e.domain.concat([f4,y4,Hf,g4,v4,b4,w4,_4,mh,p4,x4,S4,E4,T4,Bd,A4,mS,M4]),r=[m4,pb,Ug,db,Vg,Yf,ZU,fh,YU,pS,hb,dS,fS,I4,KU,QU],s=[f4,m4,y4,g4,v4,b4,Ug,w4,_4,mh,p4,hb,x4,S4,E4,T4,I4,Bd,A4,mS,M4],n=En(),o=gt(n,mS);Jt(o,s,o),Jt(o,e.domain,o);const a=En(),l=En(),u=En();Jt(n,e.domain,a),Jt(n,e.scheme,l),Jt(n,e.slashscheme,u),Jt(a,s,o),Jt(a,e.domain,a);const c=gt(a,Hf);gt(o,Hf,c),gt(l,Hf,c),gt(u,Hf,c);const d=gt(o,fh);Jt(d,s,o),Jt(d,e.domain,o);const f=En();Jt(c,e.domain,f),Jt(f,e.domain,f);const m=gt(f,fh);Jt(m,e.domain,f);const g=En(HY);Jt(m,e.tld,g),Jt(m,e.utld,g),gt(c,_3,g);const v=gt(f,mh);Jt(v,e.domain,f),Jt(g,e.domain,f),gt(g,fh,m),gt(g,mh,v);const b=gt(g,Yf);Jt(b,e.numeric,HY);const _=gt(a,mh),S=gt(a,fh);Jt(_,e.domain,a),Jt(S,s,o),Jt(S,e.domain,a);const M=En($y);Jt(S,e.tld,M),Jt(S,e.utld,M),Jt(M,e.domain,a),Jt(M,s,o),gt(M,fh,S),gt(M,mh,_),gt(M,Hf,c);const x=gt(M,Yf),T=En($y);Jt(x,e.numeric,T);const I=En($y),$=En();Jt(I,i,I),Jt(I,r,$),Jt($,i,I),Jt($,r,$),gt(M,Bd,I),gt(T,Bd,I);const L=gt(l,Yf),B=gt(u,Yf),z=gt(B,Bd);gt(z,Bd,L),Jt(l,e.domain,a),gt(l,fh,S),gt(l,mh,_),Jt(u,e.domain,a),gt(u,fh,S),gt(u,mh,_),Jt(L,e.domain,I),gt(L,Bd,I);const H=gt(I,hb),J=gt(I,dS),K=gt(I,pS),Q=gt(I,fS);gt($,hb,H),gt($,dS,J),gt($,pS,K),gt($,fS,Q),gt(H,Ug,I),gt(J,db,I),gt(K,pb,I),gt(Q,Vg,I),gt(H,Ug,I);const y=En($y),A=En($y),N=En($y),D=En($y);Jt(H,i,y),Jt(J,i,A),Jt(K,i,N),Jt(Q,i,D);const ne=En(),q=En(),he=En(),te=En();return Jt(H,r),Jt(J,r),Jt(K,r),Jt(Q,r),Jt(y,i,y),Jt(A,i,A),Jt(N,i,N),Jt(D,i,D),Jt(y,r,y),Jt(A,r,A),Jt(N,r,N),Jt(D,r,D),Jt(ne,i,ne),Jt(q,i,A),Jt(he,i,N),Jt(te,i,D),Jt(ne,r,ne),Jt(q,r,q),Jt(he,r,he),Jt(te,r,te),gt(A,db,I),gt(N,pb,I),gt(D,Vg,I),gt(y,Ug,I),gt(q,db,I),gt(he,pb,I),gt(te,Vg,I),gt(ne,Vg,I),gt(n,_3,M),gt(n,JU,jtt),{start:n,tokens:ffe}}function Vtt(t,e,i){let r=i.length,s=0,n=[],o=[];for(;s<r;){let a=t,l=null,u=null,c=0,d=null,f=-1;for(;s<r&&!(l=a.go(i[s].t));)o.push(i[s++]);for(;s<r&&(u=l||a.go(i[s].t));)l=null,a=u,a.accepts()?(f=0,d=a):f>=0&&f++,s++,c++;if(f<0)s-=c,s<r&&(o.push(i[s]),s++);else{o.length>0&&(n.push(_k(WY,e,o)),o=[]),s-=f,c-=f;const m=d.t,g=i.slice(s-c,s);n.push(_k(m,e,g))}}return o.length>0&&n.push(_k(WY,e,o)),n}function _k(t,e,i){const r=i[0].s,s=i[i.length-1].e,n=e.slice(r,s);return new t(n,i)}const Go={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Btt(){Go.scanner=Ntt(Go.customSchemes);for(let t=0;t<Go.tokenQueue.length;t++)Go.tokenQueue[t][1]({scanner:Go.scanner});Go.parser=Utt(Go.scanner.tokens);for(let t=0;t<Go.pluginQueue.length;t++)Go.pluginQueue[t][1]({scanner:Go.scanner,parser:Go.parser});Go.initialized=!0}function ztt(t){return Go.initialized||Btt(),Vtt(Go.parser.start,t,Ftt(Go.scanner.start,t))}var Gtt={amp:"&",gt:">",lt:"<",nbsp:" ",quot:'"'},qtt=/^#[xX]([A-Fa-f0-9]+)$/,Htt=/^#([0-9]+)$/,Wtt=/^([A-Za-z0-9]+)$/,Jtt=function(){function t(e){this.named=e}return t.prototype.parse=function(e){if(e){var i=e.match(qtt);if(i)return String.fromCharCode(parseInt(i[1],16));if(i=e.match(Htt),i)return String.fromCharCode(parseInt(i[1],10));if(i=e.match(Wtt),i)return this.named[i[1]]||"&"+i[1]+";"}},t}(),Ztt=/[\t\n\f ]/,Ytt=/[A-Za-z]/,Ktt=/\r\n?/g;function no(t){return Ztt.test(t)}function JY(t){return Ytt.test(t)}function Qtt(t){return t.replace(Ktt,`
`)}var Xtt=function(){function t(e,i,r){r===void 0&&(r="precompile"),this.delegate=e,this.entityParser=i,this.mode=r,this.state="beforeData",this.line=-1,this.column=-1,this.input="",this.index=-1,this.tagNameBuffer="",this.states={beforeData:function(){var s=this.peek();if(s==="<"&&!this.isIgnoredEndTag())this.transitionTo("tagOpen"),this.markTagStart(),this.consume();else{if(this.mode==="precompile"&&s===`
`){var n=this.tagNameBuffer.toLowerCase();(n==="pre"||n==="textarea")&&this.consume()}this.transitionTo("data"),this.delegate.beginData()}},data:function(){var s=this.peek(),n=this.tagNameBuffer;s==="<"&&!this.isIgnoredEndTag()?(this.delegate.finishData(),this.transitionTo("tagOpen"),this.markTagStart(),this.consume()):s==="&"&&n!=="script"&&n!=="style"?(this.consume(),this.delegate.appendToData(this.consumeCharRef()||"&")):(this.consume(),this.delegate.appendToData(s))},tagOpen:function(){var s=this.consume();s==="!"?this.transitionTo("markupDeclarationOpen"):s==="/"?this.transitionTo("endTagOpen"):(s==="@"||s===":"||JY(s))&&(this.transitionTo("tagName"),this.tagNameBuffer="",this.delegate.beginStartTag(),this.appendToTagName(s))},markupDeclarationOpen:function(){var s=this.consume();if(s==="-"&&this.peek()==="-")this.consume(),this.transitionTo("commentStart"),this.delegate.beginComment();else{var n=s.toUpperCase()+this.input.substring(this.index,this.index+6).toUpperCase();n==="DOCTYPE"&&(this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.transitionTo("doctype"),this.delegate.beginDoctype&&this.delegate.beginDoctype())}},doctype:function(){var s=this.consume();no(s)&&this.transitionTo("beforeDoctypeName")},beforeDoctypeName:function(){var s=this.consume();no(s)||(this.transitionTo("doctypeName"),this.delegate.appendToDoctypeName&&this.delegate.appendToDoctypeName(s.toLowerCase()))},doctypeName:function(){var s=this.consume();no(s)?this.transitionTo("afterDoctypeName"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeName&&this.delegate.appendToDoctypeName(s.toLowerCase())},afterDoctypeName:function(){var s=this.consume();if(!no(s))if(s===">")this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData");else{var n=s.toUpperCase()+this.input.substring(this.index,this.index+5).toUpperCase(),o=n.toUpperCase()==="PUBLIC",a=n.toUpperCase()==="SYSTEM";(o||a)&&(this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.consume()),o?this.transitionTo("afterDoctypePublicKeyword"):a&&this.transitionTo("afterDoctypeSystemKeyword")}},afterDoctypePublicKeyword:function(){var s=this.peek();no(s)?(this.transitionTo("beforeDoctypePublicIdentifier"),this.consume()):s==='"'?(this.transitionTo("doctypePublicIdentifierDoubleQuoted"),this.consume()):s==="'"?(this.transitionTo("doctypePublicIdentifierSingleQuoted"),this.consume()):s===">"&&(this.consume(),this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData"))},doctypePublicIdentifierDoubleQuoted:function(){var s=this.consume();s==='"'?this.transitionTo("afterDoctypePublicIdentifier"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypePublicIdentifier&&this.delegate.appendToDoctypePublicIdentifier(s)},doctypePublicIdentifierSingleQuoted:function(){var s=this.consume();s==="'"?this.transitionTo("afterDoctypePublicIdentifier"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypePublicIdentifier&&this.delegate.appendToDoctypePublicIdentifier(s)},afterDoctypePublicIdentifier:function(){var s=this.consume();no(s)?this.transitionTo("betweenDoctypePublicAndSystemIdentifiers"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):s==='"'?this.transitionTo("doctypeSystemIdentifierDoubleQuoted"):s==="'"&&this.transitionTo("doctypeSystemIdentifierSingleQuoted")},betweenDoctypePublicAndSystemIdentifiers:function(){var s=this.consume();no(s)||(s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):s==='"'?this.transitionTo("doctypeSystemIdentifierDoubleQuoted"):s==="'"&&this.transitionTo("doctypeSystemIdentifierSingleQuoted"))},doctypeSystemIdentifierDoubleQuoted:function(){var s=this.consume();s==='"'?this.transitionTo("afterDoctypeSystemIdentifier"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeSystemIdentifier&&this.delegate.appendToDoctypeSystemIdentifier(s)},doctypeSystemIdentifierSingleQuoted:function(){var s=this.consume();s==="'"?this.transitionTo("afterDoctypeSystemIdentifier"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeSystemIdentifier&&this.delegate.appendToDoctypeSystemIdentifier(s)},afterDoctypeSystemIdentifier:function(){var s=this.consume();no(s)||s===">"&&(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData"))},commentStart:function(){var s=this.consume();s==="-"?this.transitionTo("commentStartDash"):s===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData(s),this.transitionTo("comment"))},commentStartDash:function(){var s=this.consume();s==="-"?this.transitionTo("commentEnd"):s===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData("-"),this.transitionTo("comment"))},comment:function(){var s=this.consume();s==="-"?this.transitionTo("commentEndDash"):this.delegate.appendToCommentData(s)},commentEndDash:function(){var s=this.consume();s==="-"?this.transitionTo("commentEnd"):(this.delegate.appendToCommentData("-"+s),this.transitionTo("comment"))},commentEnd:function(){var s=this.consume();s===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData("--"+s),this.transitionTo("comment"))},tagName:function(){var s=this.consume();no(s)?this.transitionTo("beforeAttributeName"):s==="/"?this.transitionTo("selfClosingStartTag"):s===">"?(this.delegate.finishTag(),this.transitionTo("beforeData")):this.appendToTagName(s)},endTagName:function(){var s=this.consume();no(s)?(this.transitionTo("beforeAttributeName"),this.tagNameBuffer=""):s==="/"?(this.transitionTo("selfClosingStartTag"),this.tagNameBuffer=""):s===">"?(this.delegate.finishTag(),this.transitionTo("beforeData"),this.tagNameBuffer=""):this.appendToTagName(s)},beforeAttributeName:function(){var s=this.peek();if(no(s)){this.consume();return}else s==="/"?(this.transitionTo("selfClosingStartTag"),this.consume()):s===">"?(this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):s==="="?(this.delegate.reportSyntaxError("attribute name cannot start with equals sign"),this.transitionTo("attributeName"),this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(s)):(this.transitionTo("attributeName"),this.delegate.beginAttribute())},attributeName:function(){var s=this.peek();no(s)?(this.transitionTo("afterAttributeName"),this.consume()):s==="/"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):s==="="?(this.transitionTo("beforeAttributeValue"),this.consume()):s===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):s==='"'||s==="'"||s==="<"?(this.delegate.reportSyntaxError(s+" is not a valid character within attribute names"),this.consume(),this.delegate.appendToAttributeName(s)):(this.consume(),this.delegate.appendToAttributeName(s))},afterAttributeName:function(){var s=this.peek();if(no(s)){this.consume();return}else s==="/"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):s==="="?(this.consume(),this.transitionTo("beforeAttributeValue")):s===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.transitionTo("attributeName"),this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(s))},beforeAttributeValue:function(){var s=this.peek();no(s)?this.consume():s==='"'?(this.transitionTo("attributeValueDoubleQuoted"),this.delegate.beginAttributeValue(!0),this.consume()):s==="'"?(this.transitionTo("attributeValueSingleQuoted"),this.delegate.beginAttributeValue(!0),this.consume()):s===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.transitionTo("attributeValueUnquoted"),this.delegate.beginAttributeValue(!1),this.consume(),this.delegate.appendToAttributeValue(s))},attributeValueDoubleQuoted:function(){var s=this.consume();s==='"'?(this.delegate.finishAttributeValue(),this.transitionTo("afterAttributeValueQuoted")):s==="&"?this.delegate.appendToAttributeValue(this.consumeCharRef()||"&"):this.delegate.appendToAttributeValue(s)},attributeValueSingleQuoted:function(){var s=this.consume();s==="'"?(this.delegate.finishAttributeValue(),this.transitionTo("afterAttributeValueQuoted")):s==="&"?this.delegate.appendToAttributeValue(this.consumeCharRef()||"&"):this.delegate.appendToAttributeValue(s)},attributeValueUnquoted:function(){var s=this.peek();no(s)?(this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("beforeAttributeName")):s==="/"?(this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):s==="&"?(this.consume(),this.delegate.appendToAttributeValue(this.consumeCharRef()||"&")):s===">"?(this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.consume(),this.delegate.appendToAttributeValue(s))},afterAttributeValueQuoted:function(){var s=this.peek();no(s)?(this.consume(),this.transitionTo("beforeAttributeName")):s==="/"?(this.consume(),this.transitionTo("selfClosingStartTag")):s===">"?(this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):this.transitionTo("beforeAttributeName")},selfClosingStartTag:function(){var s=this.peek();s===">"?(this.consume(),this.delegate.markTagAsSelfClosing(),this.delegate.finishTag(),this.transitionTo("beforeData")):this.transitionTo("beforeAttributeName")},endTagOpen:function(){var s=this.consume();(s==="@"||s===":"||JY(s))&&(this.transitionTo("endTagName"),this.tagNameBuffer="",this.delegate.beginEndTag(),this.appendToTagName(s))}},this.reset()}return t.prototype.reset=function(){this.transitionTo("beforeData"),this.input="",this.tagNameBuffer="",this.index=0,this.line=1,this.column=0,this.delegate.reset()},t.prototype.transitionTo=function(e){this.state=e},t.prototype.tokenize=function(e){this.reset(),this.tokenizePart(e),this.tokenizeEOF()},t.prototype.tokenizePart=function(e){for(this.input+=Qtt(e);this.index<this.input.length;){var i=this.states[this.state];if(i!==void 0)i.call(this);else throw new Error("unhandled state "+this.state)}},t.prototype.tokenizeEOF=function(){this.flushData()},t.prototype.flushData=function(){this.state==="data"&&(this.delegate.finishData(),this.transitionTo("beforeData"))},t.prototype.peek=function(){return this.input.charAt(this.index)},t.prototype.consume=function(){var e=this.peek();return this.index++,e===`
`?(this.line++,this.column=0):this.column++,e},t.prototype.consumeCharRef=function(){var e=this.input.indexOf(";",this.index);if(e!==-1){var i=this.input.slice(this.index,e),r=this.entityParser.parse(i);if(r){for(var s=i.length;s;)this.consume(),s--;return this.consume(),r}}},t.prototype.markTagStart=function(){this.delegate.tagOpen()},t.prototype.appendToTagName=function(e){this.tagNameBuffer+=e,this.delegate.appendToTagName(e)},t.prototype.isIgnoredEndTag=function(){var e=this.tagNameBuffer;return e==="title"&&this.input.substring(this.index,this.index+8)!=="</title>"||e==="style"&&this.input.substring(this.index,this.index+8)!=="</style>"||e==="script"&&this.input.substring(this.index,this.index+9)!=="<\/script>"},t}(),eit=function(){function t(e,i){i===void 0&&(i={}),this.options=i,this.token=null,this.startLine=1,this.startColumn=0,this.tokens=[],this.tokenizer=new Xtt(this,e,i.mode),this._currentAttribute=void 0}return t.prototype.tokenize=function(e){return this.tokens=[],this.tokenizer.tokenize(e),this.tokens},t.prototype.tokenizePart=function(e){return this.tokens=[],this.tokenizer.tokenizePart(e),this.tokens},t.prototype.tokenizeEOF=function(){return this.tokens=[],this.tokenizer.tokenizeEOF(),this.tokens[0]},t.prototype.reset=function(){this.token=null,this.startLine=1,this.startColumn=0},t.prototype.current=function(){var e=this.token;if(e===null)throw new Error("token was unexpectedly null");if(arguments.length===0)return e;for(var i=0;i<arguments.length;i++)if(e.type===arguments[i])return e;throw new Error("token type was unexpectedly "+e.type)},t.prototype.push=function(e){this.token=e,this.tokens.push(e)},t.prototype.currentAttribute=function(){return this._currentAttribute},t.prototype.addLocInfo=function(){this.options.loc&&(this.current().loc={start:{line:this.startLine,column:this.startColumn},end:{line:this.tokenizer.line,column:this.tokenizer.column}}),this.startLine=this.tokenizer.line,this.startColumn=this.tokenizer.column},t.prototype.beginDoctype=function(){this.push({type:"Doctype",name:""})},t.prototype.appendToDoctypeName=function(e){this.current("Doctype").name+=e},t.prototype.appendToDoctypePublicIdentifier=function(e){var i=this.current("Doctype");i.publicIdentifier===void 0?i.publicIdentifier=e:i.publicIdentifier+=e},t.prototype.appendToDoctypeSystemIdentifier=function(e){var i=this.current("Doctype");i.systemIdentifier===void 0?i.systemIdentifier=e:i.systemIdentifier+=e},t.prototype.endDoctype=function(){this.addLocInfo()},t.prototype.beginData=function(){this.push({type:"Chars",chars:""})},t.prototype.appendToData=function(e){this.current("Chars").chars+=e},t.prototype.finishData=function(){this.addLocInfo()},t.prototype.beginComment=function(){this.push({type:"Comment",chars:""})},t.prototype.appendToCommentData=function(e){this.current("Comment").chars+=e},t.prototype.finishComment=function(){this.addLocInfo()},t.prototype.tagOpen=function(){},t.prototype.beginStartTag=function(){this.push({type:"StartTag",tagName:"",attributes:[],selfClosing:!1})},t.prototype.beginEndTag=function(){this.push({type:"EndTag",tagName:""})},t.prototype.finishTag=function(){this.addLocInfo()},t.prototype.markTagAsSelfClosing=function(){this.current("StartTag").selfClosing=!0},t.prototype.appendToTagName=function(e){this.current("StartTag","EndTag").tagName+=e},t.prototype.beginAttribute=function(){this._currentAttribute=["","",!1]},t.prototype.appendToAttributeName=function(e){this.currentAttribute()[0]+=e},t.prototype.beginAttributeValue=function(e){this.currentAttribute()[2]=e},t.prototype.appendToAttributeValue=function(e){this.currentAttribute()[1]+=e},t.prototype.finishAttributeValue=function(){this.current("StartTag").attributes.push(this._currentAttribute)},t.prototype.reportSyntaxError=function(e){this.current().syntaxError=e},t}();function tit(t,e){var i=new eit(new Jtt(Gtt),e);return i.tokenize(t)}const yfe="LinkifyResult",C4="StartTag",gfe="EndTag",kF="Chars",iit="Comment",rit="Doctype";function sit(t,e){e===void 0&&(e={});const i=tit(t),r=[],s=[],n=new XU(e,ait);for(let o=0;o<i.length;o++){const a=i[o];if(a.type===C4){r.push(a);const l=a.tagName.toUpperCase();if(!(l==="A"||n.ignoreTags.indexOf(l)>=0))continue;let c=r.length;oit(l,i,++o,r),o+=r.length-c-1}else if(a.type!==kF)r.push(a);else{const l=nit(a.chars,n);r.push.apply(r,l)}}for(let o=0;o<r.length;o++){const a=r[o];switch(a.type){case yfe:s.push(a.rendered);break;case C4:{let l="<"+a.tagName;a.attributes.length>0&&(l+=" "+uit(a.attributes).join(" ")),a.selfClosing&&(l+=" /"),l+=">",s.push(l);break}case gfe:s.push(`</${a.tagName}>`);break;case kF:s.push(LF(a.chars));break;case iit:s.push(`<!--${LF(a.chars)}-->`);break;case rit:{let l=`<!DOCTYPE ${a.name}`;a.publicIdentifier&&(l+=` PUBLIC "${a.publicIdentifier}"`),a.systemIdentifier&&(l+=` "${a.systemIdentifier}"`),l+=">",s.push(l);break}}}return s.join("")}function nit(t,e){const i=ztt(t),r=[];for(let s=0;s<i.length;s++){const n=i[s];n.t==="nl"&&e.get("nl2br")?r.push({type:C4,tagName:"br",attributes:[],selfClosing:!0}):!n.isLink||!e.check(n)?r.push({type:kF,chars:n.toString()}):r.push({type:yfe,rendered:e.render(n)})}return r}function oit(t,e,i,r){let s=1;for(;i<e.length&&s>0;){let n=e[i];n.type===C4&&n.tagName.toUpperCase()===t?s++:n.type===gfe&&n.tagName.toUpperCase()===t&&s--,r.push(n),i++}return r}function ait(t){let{tagName:e,attributes:i,content:r}=t;return`<${e} ${lit(i)}>${LF(r)}</${e}>`}function LF(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function vfe(t){return t.replace(/"/g,"&quot;")}function lit(t){const e=[];for(const i in t){const r=t[i]+"";e.push(`${i}="${vfe(r)}"`)}return e.join(" ")}function uit(t){const e=[];for(let i=0;i<t.length;i++){const r=t[i][0],s=t[i][1]+"";e.push(`${r}="${vfe(s)}"`)}return e}const cit="truncate-text",hit="truncate-trigger",dit={beforeMount(t){t.classList.contains("truncate")||t.classList.add("truncate"),t.toggleAttribute(cit,!0)},mounted(t,e){let i;e.value&&e.value.externalTrigger&&(i=t.closest(`[${hit}]`)),HU(t,{content:ZY(t.textContent),onShow:pit,allowHTML:!0,placement:"bottom-start",triggerTarget:i,...e.value?.options||{}})},updated(t,e){t._tippy&&(t._tippy.setContent(ZY(t.textContent)),e.value&&e.value.options&&t._tippy.setProps(e.value.options))},unmounted(t){t._tippy&&t._tippy.destroy()}};function pit(t){if(t.reference.clientWidth>=t.reference.scrollWidth)return!1}function ZY(t){return t===null?"":sit(t,{target:"_blank",validate:{url:e=>/^https?:\/\//.test(e)}})}const fit=["content"],mit={key:0,class:"flex flex-shrink-0 items-center border-b border-solid border-gray-600 px-8 h-48 overflow-hidden",tabindex:"-1"},yit={class:"flex-grow text-lg py-16 pl-8 min-w-0"},git={key:0,class:"flex"},vit={key:1,class:"p-8 flex-grow overflow-y-auto"},bit={key:2,class:"px-16 py-16 border-t border-gray-400 default-focus-style"},wit=zi({__name:"panel-screen",props:{header:{type:Boolean,default:!0},content:{type:Boolean,default:!0},footer:{type:Boolean,default:!1},panel:{type:Object,required:!0}},setup(t){const e=t,{t:i}=Kr(),r=X0(),s=n4(),n=mn("iApi"),o=Xe(),a=Ri(()=>n?.fixture.get("appbar")?s.temporary:[]),l=Ri(()=>r.mobileView),u=Ri(()=>r.reorderable),c=()=>!l.value&&!e.panel.teleport,d=f=>{e.panel.move(f),f==="left"&&Kh(()=>{(o.value?.querySelector(".move-left")).focus()})};return Co(()=>{o.value?.addEventListener("blur",()=>{o.value._tippy.hide()}),o.value?.addEventListener("keyup",f=>{f.key==="Tab"&&o.value?.matches(":focus")&&o.value._tippy.show()})}),Qh(()=>{o.value?.removeEventListener("blur",()=>{o.value._tippy.hide()}),o.value?.removeEventListener("keyup",f=>{f.key==="Tab"&&o.value?.matches(":focus")&&o.value._tippy.show()})}),(f,m)=>{const g=Os("back"),v=Os("panel-options-menu"),b=Os("left"),_=Os("right"),S=Os("pin"),M=Os("expand"),x=Os("minimize"),T=Os("close"),I=gr("truncate"),$=gr("focus-item"),L=gr("tippy");return ar((ht(),Ot("div",{class:"h-full flex flex-col items-stretch",content:ti(i)("panels.access"),ref_key:"el",ref:o},[t.header?(ht(),Ot("header",mit,[wi(g,{class:ws(t.panel.teleport?"display-none":"block sm:display-none"),onClick:m[0]||(m[0]=B=>t.panel.close())},null,8,["class"]),ar((ht(),Ot("h2",yit,[yc(f.$slots,"header")])),[[I]]),f.$slots.controls?(ht(),Br(v,{key:0},{default:Ns(()=>[yc(f.$slots,"controls")]),_:3})):Hr("",!0),at("div",{class:ws(t.panel.teleport?"flex":"display-none sm:flex")},[t.panel.teleport?Hr("",!0):(ht(),Ot("div",git,[u.value?(ht(),Br(b,{key:0,onClick:m[1]||(m[1]=B=>d("left")),active:!t.panel.isLeftMostPanel},null,8,["active"])):Hr("",!0),u.value?(ht(),Br(_,{key:1,onClick:m[2]||(m[2]=B=>d("right")),active:!t.panel.isRightMostPanel},null,8,["active"])):Hr("",!0),wi(S,{onClick:m[3]||(m[3]=B=>t.panel.pin()),active:t.panel.isPinned},null,8,["active"]),t.panel.controls&&t.panel.controls.expand?(ht(),Br(M,{key:2,onClick:m[4]||(m[4]=B=>t.panel.expand()),active:t.panel.expanded},null,8,["active"])):Hr("",!0)])),t.panel.button&&a.value?.includes(t.panel.id)?(ht(),Br(x,{key:1,onClick:m[5]||(m[5]=B=>t.panel.minimize())})):Hr("",!0),wi(T,{onClick:m[6]||(m[6]=B=>t.panel.close())})],2)])):Hr("",!0),t.content?(ht(),Ot("div",vit,[yc(f.$slots,"content")])):Hr("",!0),t.footer?ar((ht(),Ot("div",bit,[yc(f.$slots,"footer")])),[[$]]):Hr("",!0)],8,fit)),[[L,{trigger:"manual",onShow:c,popperOptions:{placement:"top",modifiers:[{name:"preventOverflow",options:{altAxis:!0}},{name:"flip",options:{fallbackPlacements:["top"]}}]}}]])}}}),_it={class:"relative",tabindex:"-1"},xit=["content"],Sit=["transform"],Eit=at("path",{d:"M298.028 214.267L285.793 96H328c13.255 0 24-10.745 24-24V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v48c0 13.255 10.745 24 24 24h42.207L85.972 214.267C37.465 236.82 0 277.261 0 328c0 13.255 10.745 24 24 24h136v104.007c0 1.242.289 2.467.845 3.578l24 48c2.941 5.882 11.364 5.893 14.311 0l24-48a8.008 8.008 0 0 0 .845-3.578V352h136c13.255 0 24-10.745 24-24-.001-51.183-37.983-91.42-85.973-113.733z"},null,-1),Tit=[Eit],Iit=zi({__name:"pin",props:{active:Boolean},setup(t){const{t:e}=Kr();return(i,r)=>{const s=gr("tippy");return ht(),Ot("div",_it,[ar((ht(),Ot("button",{type:"button",class:ws(["text-gray-500 hover:text-black focus:text-black p-8",{"text-gray-700":t.active}]),content:ti(e)(t.active?"panels.controls.unpin":"panels.controls.pin")},[(ht(),Ot("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",transform:`rotate(${t.active?30:0})`},Tit,8,Sit))],10,xit)),[[s,{placement:"bottom",hideOnClick:!1}]])])}}}),Mit={class:"relative",tabindex:"-1"},Ait=["content","aria-label"],Cit=at("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 352 512"},[at("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"})],-1),$it=[Cit],Oit=zi({__name:"close",props:{active:Boolean},setup(t){const{t:e}=Kr();return(i,r)=>{const s=gr("tippy");return ht(),Ot("div",Mit,[ar((ht(),Ot("button",{type:"button",class:ws(["text-gray-500 hover:text-black focus:text-black p-8",{"text-gray-700":t.active}]),content:ti(e)("panels.controls.close"),"aria-label":ti(e)("panels.controls.close")},$it,10,Ait)),[[s,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}}}),Rit={class:"relative",tabindex:"-1"},kit=["content","aria-label"],Lit=at("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-16 h-16",viewBox:"0 0 16 16"},[at("path",{d:"M20.485784919653916,7.578491965389372h-14.170000000000005l3.5800000000000054,-3.589999999999997l-1.409999999999993,-1.4099999999999984l-6.000000000000008,6.0000000000000275l6.000000000000008,6l1.409999999999993,-1.4100000000000001l-3.58,-3.59h14.170000000000007Z",transform:"matrix(0.865803 0 0 0.865803 -1.99071 0.638058)"})],-1),Pit=[Lit],Nit=zi({__name:"back",props:{active:Boolean},setup(t){const{t:e}=Kr();return(i,r)=>{const s=gr("tippy");return ht(),Ot("div",Rit,[ar((ht(),Ot("button",{type:"button",class:ws(["text-gray-500 hover:text-black focus:text-black p-8",{"text-gray-700":t.active}]),content:ti(e)("panels.controls.back"),"aria-label":ti(e)("panels.controls.back")},Pit,10,kit)),[[s,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}}}),Fit={class:"w-32 h-32"},Dit=["content"],jit={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"h-24 w-24 fill-current transform rotate-90"},Uit=at("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),Vit=at("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),Bit=at("path",{d:"M4 20h16v2H4zM4 2h16v2H4zm9 7h3l-4-4-4 4h3v6H8l4 4 4-4h-3z"},null,-1),zit=[Uit,Vit,Bit],Git={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"h-24 w-24 fill-current transform rotate-90"},qit=at("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),Hit=at("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),Wit=at("path",{d:"M8 19h3v3h2v-3h3l-4-4-4 4zm8-15h-3V1h-2v3H8l4 4 4-4zM4 9v2h16V9H4z"},null,-1),Jit=at("path",{d:"M4 12h16v2H4z"},null,-1),Zit=[qit,Hit,Wit,Jit],Yit=zi({__name:"expand",props:{active:Boolean},setup(t){const{t:e}=Kr();return(i,r)=>{const s=gr("tippy");return ht(),Ot("div",Fit,[ar((ht(),Ot("button",{type:"button",class:"text-gray-500 hover:text-black focus:text-black w-full h-full flex justify-center items-center",content:ti(e)(`panels.controls.${t.active?"collapse":"expand"}`)},[t.active?(ht(),Ot("svg",Git,Zit)):(ht(),Ot("svg",jit,zit))],8,Dit)),[[s,{placement:"bottom",theme:"ramp4",animation:"scale",hideOnClick:!1}]])])}}}),Kit={class:"relative",tabindex:"-1"},Qit=["content"],Xit=at("svg",{class:"fill-current w-20 h-20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[at("path",{d:"M0 0h24v24H0V0z",fill:"none"}),at("path",{d:"M6 19h12v2H6z"})],-1),ert=[Xit],trt=zi({__name:"minimize",props:{active:Boolean},setup(t){const{t:e}=Kr();return(i,r)=>{const s=gr("tippy");return ht(),Ot("div",Kit,[ar((ht(),Ot("button",{type:"button",class:ws(["text-gray-500 hover:text-black focus:text-black p-6",{"text-gray-700":t.active}]),content:ti(e)("panels.controls.minimize")},ert,10,Qit)),[[s,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}}}),irt={class:"relative",tabindex:"-1"},rrt=["content"],srt=["aria-label"],nrt=at("path",{d:"M 8.59 16.34 L 13.17 11.75 L 8.59 7.16 L 10 5.75 L 16 11.75 L 10 17.75 Z"},null,-1),ort=[nrt],art=zi({__name:"right",props:{active:Boolean},setup(t){const{t:e}=Kr();return(i,r)=>{const s=gr("tippy");return ht(),Ot("div",irt,[ar((ht(),Ot("button",{type:"button",class:ws(["p-8",{"text-gray-500 hover:text-black focus:text-black":t.active,"text-gray-300":!t.active}]),content:ti(e)("panels.controls.moveRight")},[(ht(),Ot("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"4 4 16 16","aria-label":ti(e)("panels.controls.moveRight")},ort,8,srt))],10,rrt)),[[s,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}}}),lrt={class:"relative",tabindex:"-1"},urt=["content"],crt=["aria-label"],hrt=at("path",{d:"M 15.41 16.09 L 10.83 11.5 L 15.41 6.91 L 14 5.5 L 8 11.5 L 14 17.5 Z"},null,-1),drt=[hrt],prt=zi({__name:"left",props:{active:Boolean},setup(t){const{t:e}=Kr();return(i,r)=>{const s=gr("tippy");return ht(),Ot("div",lrt,[ar((ht(),Ot("button",{type:"button",class:ws(["p-8 move-left",{"text-gray-500 hover:text-black focus:text-black":t.active,"text-gray-300":!t.active}]),content:ti(e)("panels.controls.moveLeft")},[(ht(),Ot("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"4 4 16 16","aria-label":ti(e)("panels.controls.moveLeft")},drt,8,crt))],10,urt)),[[s,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}}}),frt=t=>(ry("data-v-a89be5c5"),t=t(),sy(),t),mrt=frt(()=>at("div",{class:"p-6"},[at("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-20 h-20"},[at("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})])],-1)),yrt=zi({__name:"panel-options-menu",setup(t){const{t:e}=Kr();return(i,r)=>(ht(),Br(FU,{class:"flex",tooltip:ti(e)("panels.controls.optionsMenu"),popperOptions:{strategy:"fixed"},position:"bottom-end"},{header:Ns(()=>[mrt]),default:Ns(()=>[yc(i.$slots,"default",{},void 0,!0)]),_:3},8,["tooltip"]))}});const grt=Op(yrt,[["__scopeId","data-v-a89be5c5"]]),vrt={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},brt=at("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),wrt=at("path",{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},null,-1),_rt=[brt,wrt],xrt={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},Srt=at("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),Ert=at("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},null,-1),Trt=[Srt,Ert],Irt=zi({__name:"fullscreen-nav",setup(t){const{t:e}=Kr(),i=mn("iApi"),r=()=>{i.toggleFullscreen()};return(s,n)=>{const o=Os("mapnav-button");return ht(),Br(o,{onClickFunction:r,tooltip:ti(e)("mapnav.fullscreen")},{default:Ns(()=>[ti(i).isFullscreen?(ht(),Ot("svg",vrt,_rt)):(ht(),Ot("svg",xrt,Trt))]),_:1},8,["tooltip"])}}}),Mrt=at("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},[at("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"})],-1),Art=zi({__name:"geolocator-nav",setup(t){const{t:e}=Kr(),i=mn("iApi");let r=Ys([]);const s=async()=>{if(r.length)n(r);else{const a=await o({maximumAge:1/0,timeout:5e3}).catch(l=>{l.code===GeolocationPositionError.PERMISSION_DENIED?i.notify.show(_u.ERROR,e("mapnav.geolocator.error.permission")):i.notify.show(_u.ERROR,e("mapnav.geolocator.error.internal"))});a&&(r=[a.coords.longitude,a.coords.latitude],n(r))}},n=a=>{let l=new Yo("geolocation",a,Ii.latLongSR(),!0);i.geo.map.zoomMapTo(l)},o=a=>new Promise((l,u)=>navigator.geolocation.getCurrentPosition(l,u,a));return(a,l)=>{const u=Os("mapnav-button");return ht(),Br(u,{onClickFunction:s,tooltip:ti(e)("mapnav.geolocator")},{default:Ns(()=>[Mrt]),_:1},8,["tooltip"])}}}),Crt=at("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},[at("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),at("path",{d:"M0 0h24v24H0z",fill:"none"})],-1),$rt=zi({__name:"home-nav",setup(t){const{t:e}=Kr(),i=mn("iApi"),r=()=>{const s=i.geo.map.getExtentSet();i.geo.map.zoomMapTo(s.fullExtent)};return(s,n)=>{const o=Os("mapnav-button");return ht(),Br(o,{onClickFunction:r,tooltip:ti(e)("mapnav.home")},{default:Ns(()=>[Crt]),_:1},8,["tooltip"])}}}),Ort={class:"relative w-32 h-32 text-gray-600 hover:text-black",tabindex:"-1"},Rrt=["content"],krt=zi({__name:"button",props:{onClickFunction:{type:Function,required:!0},tooltip:{type:[String,Boolean],default:!1}},setup(t){return(e,i)=>{const r=gr("focus-item"),s=gr("tippy");return ht(),Ot("div",Ort,[ar((ht(),Ot("button",{type:"button",class:"w-full h-full default-focus-style focus:outline-none",onClick:i[0]||(i[0]=n=>t.onClickFunction()),content:t.tooltip},[yc(e.$slots,"default")],8,Rrt)),[[r],[s,{placement:"left"}]])])}}}),Lrt={class:"relative",tabindex:"-1"},Prt=["content","aria-label"],Nrt=zi({__name:"button",props:{onClickFunction:{type:Function,required:!0},id:{type:String,required:!0},tooltip:{type:[String,Boolean],default:!1}},setup(t){const e=t,i=mn("iApi"),r=()=>i?.event.emit(qt.APPBAR_BUTTON_CLICK,e.id);return(s,n)=>{const o=gr("focus-item"),a=gr("tippy");return ht(),Ot("div",Lrt,[ar((ht(),Ot("button",{type:"button",class:"py-6 w-full h-full",onClick:n[0]||(n[0]=()=>{t.onClickFunction(),r()}),content:t.tooltip,"aria-label":String(t.tooltip)},[yc(s.$slots,"default",{},void 0,!0)],8,Prt)),[[o],[a,{placement:"right"}]])])}}});const Frt=Op(Nrt,[["__scopeId","data-v-f67298a9"]]),Drt=Ss("areas-of-interest",()=>({areas:Xe([])})),jrt=Ss("export",()=>{const t=Xe({title:!0,map:!0,mapElements:!0,legend:!0,footnote:!0,timestamp:!0}),e=Xe("");function i(r){if(t.value[r.name]!==void 0){const s=t.value[r.name];t.value[r.name]=r.selected!==void 0?r.selected:!s}}return{componentSelectedState:t,fileName:e,toggleSelected:i}}),L$=function t(e){function i(s,n,o){var a,l={};if(Array.isArray(s))return s.concat(n);for(a in s)l[o?a.toLowerCase():a]=s[a];for(a in n){var u=o?a.toLowerCase():a,c=n[a];l[u]=u in l&&typeof c=="object"?i(l[u],c,u=="headers"):c}return l}function r(s,n,o,a,l){var u=typeof s!="string"?(n=s).url:s,c={config:n},d=i(e,n),f={};a=a||d.data,(d.transformRequest||[]).map(function(m){a=m(a,d.headers)||a}),d.auth&&(f.authorization=d.auth),a&&typeof a=="object"&&typeof a.append!="function"&&typeof a.text!="function"&&(a=JSON.stringify(a),f["content-type"]="application/json");try{f[d.xsrfHeaderName]=decodeURIComponent(document.cookie.match(RegExp("(^|; )"+d.xsrfCookieName+"=([^;]*)"))[2])}catch{}return d.baseURL&&(u=u.replace(/^(?!.*\/\/)\/?/,d.baseURL+"/")),d.params&&(u+=(~u.indexOf("?")?"&":"?")+(d.paramsSerializer?d.paramsSerializer(d.params):new URLSearchParams(d.params))),(d.fetch||fetch)(u,{method:(o||d.method||"get").toUpperCase(),body:a,headers:i(d.headers,f,!0),credentials:d.withCredentials?"include":l}).then(function(m){for(var g in m)typeof m[g]!="function"&&(c[g]=m[g]);return d.responseType=="stream"?(c.data=m.body,c):m[d.responseType||"text"]().then(function(v){c.data=v,c.data=JSON.parse(v)}).catch(Object).then(function(){return(d.validateStatus?d.validateStatus(m.status):m.ok)?c:Promise.reject(c)})})}return e=e||{},r.request=r,r.get=function(s,n){return r(s,n,"get")},r.delete=function(s,n){return r(s,n,"delete")},r.head=function(s,n){return r(s,n,"head")},r.options=function(s,n){return r(s,n,"options")},r.post=function(s,n,o){return r(s,o,"post",n)},r.put=function(s,n,o){return r(s,o,"put",n)},r.patch=function(s,n,o){return r(s,o,"patch",n)},r.all=Promise.all.bind(Promise),r.spread=function(s){return s.apply.bind(s,s)},r.CancelToken=typeof AbortController=="function"?AbortController:Object,r.defaults=e,r.create=t,r}(),Urt={A:10,B:12,C:11,E:13,G:24,H:24,J:24,K:35,L:35,M:35,N:35,P:35,R:46,S:47,T:48,V:59,X:[62,61],Y:60},xk={en:{},fr:{}};class Vrt{list={};listFetched=!1;constructor(e,i){L$.get(i).then(r=>{r.data.definitions.forEach(s=>xk[e][s.code]=s.description),Object.keys(xk[e]).forEach(s=>{this.list[s]=xk[e][s]}),this.listFetched=!0})}fsaToProvinces(e){const i={};let r=Urt[e.substring(0,1).toUpperCase()];return typeof r=="number"&&(r=[r]),r.forEach(s=>{i[s]=this.list[s]}),i}}function Brt(t,e){return new Vrt(t,e)}const SI={en:{ADDRESS:"Street Address",FSA:"Forward Sortation Area",NTS:"National Topographic System",COORD:"Latitude/Longitude",SCALE:"Scale"},fr:{ADDRESS:"Adresse Municipale",FSA:"Région De Tri D'Acheminement",NTS:"Système National De Référence Cartographique",COORD:"Latitude/Longitude",SCALE:"Échelle"}};class zrt{allTypes={};validTypes={};filterComplete=!1;typesFetched=!1;constructor(e,i){L$.get(i).then(r=>{r.data.definitions.forEach(s=>{SI[e][s.code]=s.term.split(`${s.code}-`)[1]}),Object.keys(SI[e]).forEach(s=>{this.allTypes[s]=SI[e][s],this.validTypes[s]=SI[e][s]}),this.typesFetched=!0})}filterValidTypes(e){if(this.filterComplete)return this.validTypes;if(e=typeof e=="string"?[e]:e,e&&e.length>0)for(const i of e)delete this.validTypes[i];return this.filterComplete=!0,this.validTypes}}function Grt(t,e){return new zrt(t,e)}function qrt(t,e){const i=/^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?)(\s*[,|;\s]\s*)[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)[*]$/,r=/^\d{2,3}[A-P]/,s=/^[ABCEGHJKLMNPRSTVXY]\d[A-Z]/;if(i.test(e)&&!t.disabledSearchTypes.includes("LAT/LNG")){const n=e.slice(0,-1);return new Hrt(t,n)}else return s.test(e)&&!t.disabledSearchTypes.includes("FSA")?new Wrt(t,e):r.test(e)&&!t.disabledSearchTypes.includes("NTS")?new Jrt(t,e.substring(0,6).toUpperCase()):new Zrt(t,e)}class P${config;query;failedServs=[];results=[];onComplete;latLongResult;featureResults=[];resultType="geoname";constructor(e,i){this.query=i,this.config=e}search(){return this.jsonRequest(this.getUrl()).then(e=>this.normalizeNameItems(e.items)).catch(()=>(console.error("Geoname service failed"),this.failedServs.push("geoname"),this.normalizeNameItems([])))}getUrl(e,i,r,s){let n="";return e?n=this.config.geoLocateUrl+"?q="+this.query:(r&&s?n=`${this.config.geoNameUrl}?lat=${r}&lon=${s}&num=${this.config.maxResults}`:n=`${this.config.geoNameUrl}?q=${this.query}&num=${this.config.maxResults}`,this.config.categories.length>0&&(n+=`&concise=${this.config.categories.join(",")}`),this.config.officialOnly&&(n+="&category=O")),n}normalizeNameItems(e){return e.filter(i=>this.config.types.validTypes[i.concise.code]).map(i=>({name:i.name,location:i.location,province:this.config.provinces.list[i.province.code],type:this.config.types.allTypes[i.concise.code],LatLon:{lat:i.latitude,lon:i.longitude},bbox:i.bbox,order:this.config.sortOrder.indexOf(i.concise.code)>=0?this.config.sortOrder.indexOf(i.concise.code):this.config.sortOrder.length}))}jsonRequest(e){return new Promise((i,r)=>{const s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="json",s.onload=()=>{if(s.status===200){const n=typeof s.response=="string"?JSON.parse(s.response):s.response;i(n)}else r("Could not load results from remote service.")},s.send()})}locateByQuery(){return this.jsonRequest(this.getUrl(!0,void 0))}nameByLatLon(e,i,r){return this.jsonRequest(this.getUrl(!1,r,e,i)).then(s=>this.normalizeNameItems(s.items)).catch(()=>(console.error("LatLon service failed"),this.failedServs.push("geoname"),this.normalizeNameItems([])))}}class Hrt extends P${constructor(e,i){super(e,i),this.resultType="latlong";const s=i.split(/[\s|,|;|]/).filter(a=>!isNaN(a)&&a!=="").map(a=>parseFloat(a)),n=.015,o=[s[1]-n,s[0]-n,s[1]+n,s[0]+n];this.latLongResult={name:`${s[0]},${s[1]}`,location:{latitude:s[0],longitude:s[1]},type:"Latitude/Longitude",position:[s[1],s[0]],bbox:o},this.onComplete=new Promise((a,l)=>{this.nameByLatLon(s[0],s[1]).then(u=>{u?(this.results=u,a(this)):l("Given lat lon coordinates cannot be found")})})}}class Wrt extends P${constructor(e,i){i=i.substring(0,3).toUpperCase(),super(e,i),this.resultType="fsa",this.onComplete=new Promise(r=>{this.formatLocationResult().then(s=>{s?(this.featureResults.push(s),this.nameByLatLon(s.LatLon.lat,s.LatLon.lon,Object.keys(s._provinces).map(n=>parseInt(n))).then(n=>{this.results=n,r(this)})):(console.log("FSA code given cannot be found."),r(this))})})}formatLocationResult(){return this.locateByQuery().then(e=>{if(e.length===1&&this.query){const i=this.config.provinces.fsaToProvinces(this.query);return{fsa:this.query,code:"FSA",desc:this.config.types.allTypes.FSA,province:Object.keys(i).map(r=>i[r]).join(","),_provinces:i,LatLon:{lat:e[0].geometry.coordinates[1],lon:e[0].geometry.coordinates[0]}}}}).catch(()=>{console.error("FSA service failed"),this.failedServs.push("geolocation")})}}class Jrt extends P${unitName;unit;mapSheets=[];constructor(e,i){super(e,i),this.resultType="nts",i=isNaN(parseInt(i[2]))?"0"+i:i,this.unitName=i,this.onComplete=new Promise(r=>{this.locateByQuery().then(s=>{if(s.length>0&&this.query){const n=this.locateToResult(s);this.unit=n[0],this.mapSheets=n,this.featureResults.push(this.unit),this.nameByLatLon(this.unit.LatLon.lat,this.unit.LatLon.lon).then(o=>{this.results=o,r(this)})}else console.log("Given NTS code not found"),r(this)}).catch(()=>{console.error("NTS service failed"),this.failedServs.push("geolocation"),r(this)})})}locateToResult(e){return e.map(r=>{const s=r.title.split(" ");return{nts:s.shift()||"",location:s.join(" "),code:"NTS",desc:this.config.types.allTypes.NTS,LatLon:{lat:r.geometry.coordinates[1],lon:r.geometry.coordinates[0]},bbox:r.bbox}})}equals(e){return this.unitName===e.unitName}}class Zrt extends P${constructor(e,i){i=encodeURIComponent(i.trim()),super(e,i),this.resultType="address",this.onComplete=new Promise(r=>{this.locateByQuery().then(s=>{this.featureResults=this.locateToResult(s),this.search().then(n=>{this.results=n,r(this)})}).catch(()=>{this.failedServs.push("geolocation"),console.error("Address service failed"),this.search().then(s=>{this.results=s,r(this)})})})}locateToResult(e){return this.config.categories.length>0&&!this.config.categories.includes("ADDR")?[]:e.filter(r=>r.type?.includes("Street")).map(r=>{const[s,n,o]=r.title.split(", ");return{name:s,city:n.split(" Of ").pop(),province:o,desc:this.config.types.allTypes.ADDRESS,LatLon:{lat:r.geometry.coordinates[1],lon:r.geometry.coordinates[0]}}})}}const YY="https://geogratis.gc.ca/services/geolocation/@{language}/locate",KY="https://geogratis.gc.ca/services/geoname/@{language}/geonames.json",QY="https://geogratis.gc.ca/services/geoname/@{language}/codes/province.json",XY="https://geogratis.gc.ca/services/geoname/@{language}/codes/concise.json",Yrt={10:"NL",11:"PE",12:"NS",13:"NB",24:"QC",35:"ON",46:"MB",47:"SK",48:"AB",59:"BC",60:"YU",61:"NT",62:"NU",72:"UF",73:"IW"};class eK{config;constructor(e,i){let r,s,n,o;const a=i?.serviceUrls;a?(r=a.geoLocation?a.geoLocation:YY,s=a.geoNames?a.geoNames:KY,n=a.geoProvince?a.geoProvince:QY,o=a.geoTypes?a.geoTypes:XY):(r=YY,s=KY,n=QY,o=XY),r=r.replace("@{language}",e),s=s.replace("@{language}",e),n=n.replace("@{language}",e),o=o.replace("@{language}",e);const l=i?.settings;let u,c,d,f,m;l?(u=l.categories?l.categories:[],c=l.sortOrder?l.sortOrder:[],d=l.disabledSearchTypes?l.disabledSearchTypes:[],f=l.maxResults>0?l.maxResults:100,m=!!l.officialOnly):(u=[],c=[],d=[],f=100,m=!1),this.config={language:e,geoNameUrl:s,geoLocateUrl:r,types:Grt(e,o),provinces:Brt(e,n),categories:u,sortOrder:c,disabledSearchTypes:d,maxResults:f,officialOnly:m},this.config.types.filterValidTypes(i?.excludeTypes),this._provinceList=[],this._typeList=[],this._excludedTypes=i?.excludeTypes||[]}get provinceList(){return this._provinceList}get typeList(){return this._typeList}set provinceList(e){this._provinceList=e}set typeList(e){this._typeList=e}levenshteinDistance(e,i){i=i.toLowerCase().trim();const r=decodeURI(e.query.toLowerCase().replace("*","")),s=[];for(let n=0;n<=i.length;n++){s[n]=[n];for(let o=1;o<=r.length;o++)s[n][o]=n===0?o:Math.min(s[n][o-1]+1,s[n-1][o]+.2,s[n-1][o-1]+(r[o-1]===i[n-1]?0:1))}return s[i.length][r.length]}findProvinceObj(e){return this.provinceList.find(i=>i.name===e)}query(e){return qrt(this.config,e.toUpperCase()).onComplete.then(i=>{let r=[];i.featureResults.length>0?i.resultType==="fsa"?r=i.featureResults.map(n=>({name:n.fsa,bbox:[n.LatLon.lon+.02,n.LatLon.lat-.02,n.LatLon.lon-.02,n.LatLon.lat+.02],type:n.desc,position:[n.LatLon.lon,n.LatLon.lat],location:{latitude:n.LatLon.lat,longitude:n.LatLon.lon,province:this.findProvinceObj(n.province)},order:-1})):i.resultType==="nts"?r=i.featureResults.map(n=>({name:n.nts,bbox:n.bbox??[n.LatLon.lon+.02,n.LatLon.lat-.02,n.LatLon.lon-.02,n.LatLon.lat+.02],type:n.desc,position:[n.LatLon.lon,n.LatLon.lat],location:{city:n.location,latitude:n.LatLon.lat,longitude:n.LatLon.lon},order:-1})):i.resultType==="address"&&(r=i.featureResults.map(n=>({name:n.name,bbox:[n.LatLon.lon+.002,n.LatLon.lat-.002,n.LatLon.lon-.002,n.LatLon.lat+.002],type:n.desc,position:[n.LatLon.lon,n.LatLon.lat],location:{city:n.city,latitude:n.LatLon.lat,longitude:n.LatLon.lon,province:this.findProvinceObj(n.province)},order:this.config.sortOrder.indexOf("ADDR")>=0?this.config.sortOrder.indexOf("ADDR"):this.config.sortOrder.length})),this.config.sortOrder.length>0&&(r=r.sort((n,o)=>this.levenshteinDistance(i,n.name)>this.levenshteinDistance(i,o.name)?1:-1))):i.resultType==="latlong"&&(r=[i.latLongResult],r[0].order=-1);const s=i.results.map(n=>({name:n.name,bbox:n.bbox,type:n.type,position:[n.LatLon.lon,n.LatLon.lat],location:{city:n.location,latitude:n.LatLon.lat,longitude:n.LatLon.lon,province:this.findProvinceObj(n.province)},order:n.order}));return{results:r.concat(s).slice(0,this.config.maxResults).sort((n,o)=>this.config.sortOrder.length>0?n.order>o.order?1:-1:this.levenshteinDistance(i,n.name)>this.levenshteinDistance(i,o.name)?1:-1),failedServs:i.failedServs}})}fetchProvinces(){return new Promise(e=>{const i=setInterval(()=>{if(this.config.provinces.listFetched){clearInterval(i);const r=[],s={code:-1,abbr:"...",name:"..."};r.push(s);const n=this.config.provinces.list;for(const o in n)r.push({code:o,abbr:Yrt[o],name:n[o]});this.provinceList=r,e(this.provinceList)}})})}fetchTypes(){return new Promise(e=>{const i=setInterval(()=>{if(this.config.types.typesFetched){clearInterval(i);const r=[],s={code:-1,name:"..."};r.push(s);const n=this.config.types.allTypes;for(const o in n)this._excludedTypes.includes(o)||r.push({code:o,name:n[o]});this.typeList=r,e(this.typeList)}},250)})}}function tK(t,e,i){return t&&e.extent&&(i=i.filter(r=>r.bbox[0]<=e.extent.xmax&&r.bbox[1]<=e.extent.ymax&&r.bbox[2]>=e.extent.xmin&&r.bbox[3]>=e.extent.ymin)),e.province&&e.province!=="..."&&(i=i.filter(r=>r.location.province?.name&&r.location.province.name===e.province)),e.type&&e.type!=="..."&&(i=i.filter(r=>r.type===e.type)),i}const Krt=Ss("geosearch",()=>{const t=Xe(new eK("en",void 0)),e=Xe({type:"",province:"",extent:void 0}),i=Xe(!1),r=Xe(""),s=Xe(""),n=Xe([]),o=Xe([]),a=Xe(!1),l=Xe([]),u=Ri(()=>new Promise(_=>{t.value.fetchProvinces().then(S=>{S.sort((M,x)=>M.name>x.name?1:-1),_(S)})})),c=Ri(()=>new Promise(_=>{t.value.fetchTypes().then(S=>{S.sort((M,x)=>M.name>x.name?1:-1),_(S)})}));function d(_,S){t.value=new eK(_,S)}function f(_){if(a.value=!0,!r.value)n.value=[],o.value=[],a.value=!1;else if(r.value&&r.value!==s.value||_){const S=setInterval(()=>{t.value.config.provinces.listFetched&&t.value.config.types.typesFetched&&(clearInterval(S),t.value.query(`${r.value}*`).then(M=>{l.value=M.failedServs,s.value=r.value,o.value=M.results;const x=tK(i.value,e.value,o.value);n.value=x||[],a.value=!1}))},250)}else{const S=tK(i.value,e.value,o.value);n.value=S||[],a.value=!1}}function m(_){e.value.province=typeof _.province>"u"?"":_.province,f(_.forceReRun)}function g(_){e.value.type=typeof _.type>"u"?"":_.type,f(_.forceReRun)}function v(_){s.value=r.value,r.value=_,f()}function b(_){if(_.visible!==void 0&&(i.value=_.visible),_.extent.sr.wkid!==4326)throw new Error("an extent that was not projected to wkid 4326 was passed to the geosearch store");e.value.extent=_.extent,f()}return{GSservice:t,queryParams:e,resultsVisible:i,searchVal:r,lastSearchVal:s,searchResults:n,savedResults:o,loadingResults:a,failedServices:l,getProvinces:u,getTypes:c,initService:d,runQuery:f,setProvince:m,setType:g,setSearchTerm:v,setMapExtent:b}}),Qrt=Ss("help",()=>({location:Xe("./help/")}));var bfe=(t=>(t.Visibility="visibilityButton",t.Expand="expandButton",t))(bfe||{}),PF=(t=>(t.Item="item",t.Placeholder="placeholder",t.Error="error",t))(PF||{});class wfe extends Ks{_uid;_name;_type;_children=[];_parent=void 0;_loadPromise;_hidden;_expanded;_visibility;_exclusive;_controls;_disabledControls;_lastVisible;_visibleChildren;constructor(e,i,r){super(e),this._uid=Vb.sharedUtils.generateUUID(),this._name=i.name,this._type=i.type??"placeholder",this._parent=r,this._children=[],this._loadPromise=new fn,this._hidden=i.hidden??!1,this._expanded=i.expanded??!0,this._visibility=!0,this._exclusive=i.exclusive??!1,this._controls=i.controls?.slice()??["visibilityButton","expandButton"],this._disabledControls=i.disabledControls?.slice(),this._lastVisible,this._visibleChildren=[]}get uid(){return this._uid}get name(){return this._name}set name(e){this._name=e}get type(){return this._type}get children(){return this._children}set children(e){this._children=e}get parent(){return this._parent}set parent(e){this._parent=e}get loadPromise(){return this._loadPromise.getPromise()}get hidden(){return this._hidden}get expanded(){return this._expanded}get visibility(){return this._visibility}get exclusive(){return this._exclusive}controlAvailable(e){return this._disabledControls?.includes(e)?!1:this._controls?.includes(e)}setControl(e,i){i&&this._disabledControls?.includes(e)?(this._disabledControls=this._disabledControls.filter(r=>r!==e),this._controls?.push(e)):!i&&this._controls?.includes(e)&&(this._controls=this._controls.filter(r=>r!==e),this._disabledControls?.push(e))}toggleHidden(e){this._hidden=e??!this.hidden}toggleExpanded(e){this._expanded=e??!this.expanded}toggleVisibility(e,i=!0){if(this.visibility!==e){if(this._visibility=e??!this.visibility,!this.exclusive)this.visibility?this._visibleChildren.length>0?this._visibleChildren.forEach(r=>r.toggleVisibility(!0,!1)):this.children.forEach(r=>r.toggleVisibility(!0,!1)):this.children.forEach(r=>r.toggleVisibility(!1,!1));else if(this.visibility)if(this._lastVisible&&(!(this._lastVisible instanceof Pf)||this._lastVisible.layerControlAvailable(As.Visibility)))this._lastVisible.toggleVisibility(!0);else{const r=this.children.find(s=>!(s instanceof Pf)||s.layerControlAvailable(As.Visibility));r&&r.toggleVisibility(!0)}else this._lastVisible=this.children.find(r=>r.visibility),this._lastVisible?.toggleVisibility(!1);this.parent&&i&&this.parent.checkVisibility(this)}}checkVisibilityRules(){this.parent&&!this.parent.visibility?this.toggleVisibility(!1,!1):this.parent?.exclusive&&this.parent.children.some(i=>i.visibility&&i!==this&&i.type==="item")&&this.toggleVisibility(!1,!1)}checkVisibility(e){this instanceof Pf&&!this.layerControlAvailable(As.Visibility)||(this.exclusive?e.visibility?(this.children.forEach(i=>{i.uid!==e.uid&&i.toggleVisibility(!1,!1)}),this._lastVisible=e,this._visibility=!0,this instanceof Pf&&this.layer&&this.layer.layerExists&&(this.layer.visibility=!0)):(this._visibility=!1,this instanceof Pf&&this.layer&&this.layer.layerExists&&(this.layer.visibility=!1),this._lastVisible=e):this.children.some(i=>i.visibility)?(this._visibility=!0,this._visibleChildren=this.children.filter(i=>i.visibility),this instanceof Pf&&this.layer&&this.layer.layerExists&&(this.layer.visibility=!0)):(this._visibility=!1,this._visibleChildren=[],this instanceof Pf&&this.layer&&this.layer.layerExists&&(this.layer.visibility=!1)),this.parent&&this.parent.checkVisibility(this))}getConfig(){const e={name:this._name,hidden:this._hidden,expanded:this._expanded,exclusive:this._exclusive,controls:this._controls,disabledControls:this._disabledControls},i=[];return this.children.forEach(r=>{i.push(r.getConfig())}),this.exclusive?e.exclusiveVisibility=i:e.children=i,e}onAdded(){}onRemoved(){this.toggleVisibility(!1)}load(){this._type="item",this._loadPromise.resolveMe(),this.checkVisibilityRules()}reload(){this._type="placeholder",this._loadPromise=new fn}error(){this._type="error",this._loadPromise.rejectMe(),this.checkVisibilityRules()}}class Pf extends wfe{_layerId;_layerIdx;_layerUid="";_layer;_layerInitVis;_layerRedrawing=!1;_layerOffscale=!1;_loadCancelled=!1;_treeGrown=!1;_customSymbology=!1;_coverIcon;_description;_symbologyExpanded;_origLayerControls;_origLayerDisabledControls;_layerControls;_layerDisabledControls;_symbologyRenderStyle;_symbologyStack;handlers=[];constructor(e,i,r){super(e,i,r),this._type=PF.Placeholder,this._layerId=i.layerId,this._layerIdx=i.sublayerIndex,this._layerControls=i.layerControls??[],this._origLayerControls=i.layerControls,this._layerDisabledControls=i.disabledLayerControls??[],this._origLayerDisabledControls=i.disabledLayerControls,this._layerRedrawing=!1,this._symbologyExpanded=i.symbologyExpanded||!1,i.coverIcon&&(this._coverIcon=i.coverIcon),i.description&&(this._description=i.description),this._symbologyRenderStyle=i.symbologyRenderStyle??"icons",this._customSymbology=!!i.symbologyStack,this._symbologyStack=i.symbologyStack?.map(s=>({uid:this.$iApi.geo.shared.generateUUID(),label:s.text,definitionClause:s.sqlQuery,imgUrl:s.image??"",drawPromise:Promise.resolve(),visibility:!0,lastVisibility:!0}))}get parentLayerId(){return this._layerIdx?this._layerId.slice(0,this._layerId.length-`-${this._layerIdx}`.length):void 0}get layerId(){return this._layerId}get layerIdx(){return this._layerIdx}get layerUid(){return this._layerUid}get layer(){return this._layer}set layer(e){this._layer=e,this._layerId=e.id,this._layerIdx=e.layerIdx,this._layerUid=e.uid,this._name=this._name||e.name,this._symbologyStack=this._customSymbology?this._symbologyStack:e.legend,this.updateLayerControls()}get layerOffscale(){return this._layerOffscale}set layerOffscale(e){this._layerOffscale=e}get layerRedrawing(){return this._layerRedrawing}set layerRedrawing(e){this._layerRedrawing=e}get coverIcon(){return this._coverIcon}set coverIcon(e){this._coverIcon=e}get description(){return this._description}set description(e){this._description=e}get symbologyExpanded(){return this._symbologyExpanded}get treeGrown(){return this._treeGrown}set treeGrown(e){this._treeGrown=e}get loadCancelled(){return this._loadCancelled}set loadCancelled(e){this._loadCancelled=e}get origLayerControls(){return this._origLayerControls}get origDisabledLayerControls(){return this._origLayerDisabledControls}set symbologyRenderStyle(e){this._symbologyRenderStyle=e}get symbologyRenderStyle(){return this._symbologyRenderStyle}set symbologyStack(e){this._symbologyStack=e}get symbologyStack(){return this._symbologyStack}getConfig(){const e={layerId:this._layerId,sublayerIndex:this._layerIdx,layerControls:this._layerControls,disabledLayerControls:this._layerDisabledControls,symbologyExpanded:this._symbologyExpanded,coverIcon:this._coverIcon,description:this._description};return{...super.getConfig(),...e}}toggleVisibility(e,i=!0,r=!1){if(!((!this.layerControlAvailable(As.Visibility)||this._loadCancelled)&&!r)&&(super.toggleVisibility(e,i),this.layer&&this.layer.layerExists)){this.layer.visibility=this.visibility;const s=this._symbologyStack.some(n=>n.lastVisbility);this._symbologyStack.forEach(n=>{s||(n.lastVisbility=!0),n.visibility=this.visibility?n.lastVisbility:!1})}}toggleSymbology(e){return this._symbologyExpanded=e??!this._symbologyExpanded,this._symbologyExpanded}setSymbologyVisibility(e,i){this._symbologyStack.some(r=>((e===void 0||r.uid===e)&&(r.visibility=i,r.lastVisbility=i),e!==void 0&&r.uid===e))}load(e){if(e){if(this._layer=e instanceof a0?e:this.$iApi.geo.layer.getLayer(this._layerId??this._layerUid),this.layer=e,this._layerRedrawing=e.mapLayer&&e.drawState!==xa.UP_TO_DATE,this._loadCancelled){this.toggleVisibility(!1,!0,!0);return}this._layer?.loadPromise().then(()=>{this._layer?.layerType===li.MAPIMAGE&&!this._layerIdx?(this.error(),console.error(`MapImageLayer has no sublayerIndex defined for layer: ${this._layerId}.`)):(this._layerInitVis=typeof this._layerInitVis<"u"?this._visibility:e.visibility,super.load(),this.toggleVisibility(this._layerInitVis,!0,!0),e.visibility||this.setSymbologyVisibility(void 0,!1)),this.handlers.push(this.$iApi.event.on(qt.LAYER_VISIBILITYCHANGE,i=>{i.layer.uid===this.layer.uid&&this._type===PF.Item&&this.toggleVisibility(i.visibility,!0,!0)})),this.handlers.push(this.$iApi.event.on(qt.LAYER_DRAWSTATECHANGE,i=>{this.layer.uid===i.layer.uid&&(i.layer.drawState===xa.REFRESH?this.layerRedrawing=!0:setTimeout(()=>{this.layerRedrawing=i.layer.drawState===xa.REFRESH},500))})),this._layerOffscale=this.$iApi.geo.map.created?this.layer?.isOffscale():!1,this.handlers.push(this.$iApi.event.on(qt.MAP_SCALECHANGE,()=>{this.$iApi.geo.map.created&&(this._layerOffscale=this.layer?.isOffscale())}))}).catch(()=>{this.error()})}}error(){this.updateLayerControls(),super.error(),this.toggleVisibility(!1,!0,!0)}layerControlAvailable(e){return this._layerDisabledControls?.includes(e)?!1:!!this._layerControls?.includes(e)}updateLayerControls(){const e=this.$iApi.geo.layer.getLayerControls(this.layerId)??this.$iApi.geo.layer.getLayerControls(this.parentLayerId??"");this._origLayerControls||(this._layerControls=e?.controls??[]),this._origLayerDisabledControls||(this._layerDisabledControls=e?.disabledControls??[])}}var Xrt=(t=>(t.Title="title",t.Text="text",t.Image="image",t.Markdown="markdown",t.Template="template",t))(Xrt||{});class iK extends wfe{_infoType;_content;constructor(e,i,r){super(e,i,r),this._infoType=i.infoType??"title",this._content=i.content??"",i.infoType==="template"&&this.$element.component(`${this._uid}-info-section`,{template:this._content}),(i.infoType||i.content)&&(this._controls=i.controls?.slice()??[bfe.Expand]),super.load()}get infoType(){return this._infoType}get content(){return this._content}set content(e){this._content=e}getConfig(){const e={infoType:this._infoType,content:this._content};return{...super.getConfig(),...e}}}const est=Ss("legend",()=>{const t=Xe(),e=Xe([]),i=Xe([]);function r(o){if(o.parent===void 0)e.value.push(o.item);else{if(!(o.item instanceof iK)&&!(o.item instanceof Pf)){console.error("attempted to add an unsupported legend item type");return}o.parent.children.push(o.item)}}function s(o){const a=l=>(l=l.filter(u=>(u===o&&!u.children.length&&u.onRemoved(),u!==o)),l.forEach(u=>{u.children=a(u.children)}),l=l.filter(u=>!(u instanceof iK&&!u.children.length&&u.content==="")),l);e.value=a(e.value)}function n(o){if(o.oldItem.parent===void 0){const a=e.value,l=a.indexOf(o.oldItem);l>-1&&(e.value[l]=o.newItem),e.value=a}else{const a=o.oldItem.parent.children,l=a.indexOf(o.oldItem);l>-1&&(a[l]=o.newItem),o.oldItem.parent.children=a}}return{legendConfig:t,children:e,headerControls:i,addItem:r,removeItem:s,replaceItem:n}}),tst=Ss("mapnav",()=>{const t=Xe({}),e=Xe([]);function i(r){r in t.value&&delete t.value[r];const s=e.value.indexOf(r);s!==-1&&e.value.splice(s,1)}return{items:t,order:e,removeItem:i}}),ist=Ss("metadata",()=>{const t=Xe(""),e=Xe({type:"LineString",coordinates:[]});return{status:t,response:e}}),rst=Ss("northarrow",()=>{const t=Xe(""),e=Xe("");return{arrowIcon:t,poleIcon:e}}),sst=Ss("overviewmap",()=>{const t=Xe({lodSets:[],extentSets:[],basemaps:[],tileSchemas:[],initialBasemapId:""}),e=Xe({}),i=Xe(!0),r=Xe(1.5),s=Xe("#FF0000"),n=Xe(1),o=Xe("#000000"),a=Xe(.25);function l(u){t.value.initialBasemapId=u}return{mapConfig:t,basemaps:e,startMinimized:i,expandFactor:r,borderColour:s,borderWidth:n,areaColour:o,areaOpacity:a,updateInitialBasemap:l}}),nst=Ss("scrollguard",()=>{const t=Xe(!1);function e(i){t.value=i}return{enabled:t,setEnabled:e}});var yo=(t=>(t[t.UPLOAD=0]="UPLOAD",t[t.FORMAT=1]="FORMAT",t[t.CONFIGURE=2]="CONFIGURE",t))(yo||{});const ost=Ss("wizard",()=>{const t={id:"Placeholder",layerType:li.UNKNOWN,url:""},e=Xe(),i=Xe(""),r=Xe(""),s=Xe(!0),n=Xe(null),o=Xe({config:t,configOptions:[]}),a=Xe(yo.UPLOAD);function l(u){switch(a.value){case yo.UPLOAD:u===yo.UPLOAD?i.value="":u===yo.FORMAT&&(a.value=yo.FORMAT);break;case yo.FORMAT:u===yo.UPLOAD?(n.value&&(i.value="",n.value=null),r.value="",a.value=yo.UPLOAD):u===yo.CONFIGURE&&(a.value=yo.CONFIGURE);break;case yo.CONFIGURE:u===yo.UPLOAD?(i.value="",r.value="",n.value=null,s.value=!0,o.value={config:t,configOptions:[]},a.value=yo.UPLOAD):u===yo.FORMAT&&(o.value={config:t,configOptions:[]},s.value=!0,a.value=yo.FORMAT);break}}return{layerSource:e,url:i,typeSelection:r,nested:s,fileData:n,layerInfo:o,currStep:a,goToStep:l}});class ast{fixture;panel;event;geo;notify;ui;startRequired=!1;$vApp;$element;$i18n;_isFullscreen;constructor(e,i,r){this.event=new SJe(this);const s=lst(e,this);this.$vApp=s.app,this.$element=s.element,this.$i18n=s.i18n,this.fixture=new Bot(this),this.panel=new zot(this),this.geo=new Uot(this),this.ui={maptip:this.geo.map.maptip,exposeOids:!1,getZoomIcon:()=>"",scrollToInstance:!1},this.notify=new XKe(this),this._isFullscreen=Vc.isEnabled&&!!this.$vApp.$root&&Vc.isFullscreen&&Vc.element===this.$vApp.$root.$el,Vc.isEnabled&&Vc.onchange(()=>{this._isFullscreen=Vc.isEnabled&&!!this.$vApp.$root&&Vc.isFullscreen&&Vc.element===this.$vApp.$root.$el}),this.initialize(i,r)}initialize(e,i){const r=Sa(this.$vApp.$pinia),s=X0(this.$vApp.$pinia),n=l4(this.$vApp.$pinia);if(e?.configs!==void 0){const a=e.configs,l=a[this.$i18n.locale.value]??a[Object.keys(a)[0]];r.newConfig(l),r.registerConfig({config:l,configLangs:Object.keys(a),allLangs:Object.keys(this.$i18n.messages.value)});for(const m in a)r.registerConfig({config:a[m],configLangs:[m]});r.activeBasemapConfig=l.map.basemaps.find(m=>m.id===l.map.initialBasemapId);const u=setInterval(()=>{const m=this.$vApp.$el.querySelector("#esriMap");if(m&&(clearInterval(u),this.geo.map.createMap(l.map,m),m._tippy.hide(0),n.setMaptipInstance(m._tippy),l.layers&&l.layers.length>0)){const g=l.layers.map(v=>{const b=this.geo.layer.createLayer(v);return this.geo.map.addLayer(b),b}).filter(Boolean);g.filter(v=>v.mapLayer).forEach((v,b)=>{v.loadPromise().then(()=>{v.isLoaded&&this.geo.map.reorder(v,b)}).catch(()=>console.error(`Failed to add/reorder layer: ${v.id}.`))}),g.filter(v=>!v.mapLayer).forEach(v=>{v.loadPromise().catch(()=>console.error(`Failed to add/reorder layer: ${v.id}.`))})}},100);if(l.panels){if(l.panels.open&&l.panels.open.length>0){const m=l.panels.open.map(g=>g.id);this.panel.isRegistered(m).then(()=>{l.panels?.open?.forEach(g=>{this.panel.open({id:g.id,screen:g.screen}),g.pin&&this.panel.pin(g.id)})})}s.reorderable=l.panels.reorderable??!0}!l.system?.animate&&this.$element._container&&this.$element._container.children[0]&&this.$element._container.children[0].classList.remove("animation-enabled"),l.system?.proxyUrl&&(this.geo.proxy=l.system.proxyUrl),l.system?.exposeOid&&(this.ui.exposeOids=l.system.exposeOid),l.system?.scrollToInstance&&(this.ui.scrollToInstance=l.system?.scrollToInstance);const c={magnify:'<svg class="m-auto" xmlns="http://www.w3.org/2000/svg" height="16" viewBox="0 0 24 24" width="16"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" /><path d="M0 0h24v24H0V0z" fill="none" /><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z" /></svg>',globe:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="16" height="16" viewBox="0 0 16 16" xml:space="preserve"><g transform="matrix(0.67 0 0 0.67 8 8)"><path style=" stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: #979797; fill-rule: nonzero; opacity: 1;" transform=" translate(-12, -12)" d="M 12 2 C 6.48 2 2 6.48 2 12 C 2 17.52 6.48 22 12 22 C 17.52 22 22 17.52 22 12 C 22 6.48 17.52 2 12 2 z M 11 19.93 C 7.05 19.44 4 16.08 4 12 C 4 11.38 4.08 10.79 4.21 10.21 L 9 15 L 9 16 C 9 17.1 9.9 18 11 18 L 11 19.93 z M 17.9 17.39 C 17.639999999999997 16.580000000000002 16.9 16 15.999999999999998 16 L 14.999999999999998 16 L 14.999999999999998 13 C 14.999999999999998 12.45 14.549999999999999 12 13.999999999999998 12 L 8 12 L 8 10 L 10 10 C 10.55 10 11 9.55 11 9 L 11 7 L 13 7 C 14.1 7 15 6.1 15 5 L 15 4.59 C 17.93 5.779999999999999 20 8.649999999999999 20 12 C 20 14.08 19.2 15.97 17.9 17.39 z" stroke-linecap="round" /></g></svg>'},d=l.system?.zoomIcon||"globe",f=c[d]||d;this.ui.getZoomIcon=()=>f}i||(i={});const o=Gv(this.$vApp.$pinia);i?.startRequired?(this.startRequired=!0,o.started=!1):(this.startRequired=!1,o.started=!0,this.event.emit(qt.MAP_START)),(i.loadDefaultFixtures!==!1||e?.startingFixtures!==void 0)&&this.fixture.addDefaultFixtures(e?.startingFixtures),i.loadDefaultEvents!==!1&&this.event.addDefaultEvents()}reload(e,i){const r=Gv(this.$vApp.$pinia),s=wp(this.$vApp.$pinia),n=Sa(this.$vApp.$pinia),o=Qd(this.$vApp.$pinia),a=Sl(this.$vApp.$pinia),l=aF(this.$vApp.$pinia);Object.keys(o.items).forEach(d=>{this.fixture.get(d)!==void 0&&this.fixture.remove(d)}),Object.keys(l.grids).forEach(d=>{l.removeGrid(d)}),r.started=!1,this.geo.map.destroyMap(),a.$reset(),this.event.offAll(),e===void 0&&(e=JSON.parse(JSON.stringify({startingFixtures:n.startingFixtures,configs:n.registeredConfigs}))),s.clearAll(),this.geo.map.maptip.clear(),this.initialize(e,i)}component(e,i){if(i){const r=this.$element.component(e,i);return this.event.emit(qt.COMPONENT,e),r}return this.$element.component(e)}get screenSize(){if(!this.$vApp?.$root||!this.$vApp.$root.$refs["app-size"])return null;const e=this.$vApp.$root.$refs["app-size"].classList;return e.contains("lg")?"lg":e.contains("md")?"md":e.contains("sm")?"sm":"xs"}getConfig(){const e=Sa(this.$vApp.$pinia);return JSON.parse(JSON.stringify(e.getActiveConfig(this.language)))}useStore(e){if(!(["appbar","areas-of-interest","details","export","geosearch","grid","help","legend","mapnav","metadata","northarrow","overviewmap","scrollguard","wizard"].includes(e)&&!this.fixture.get(e)))switch(e){case"appbar":return n4(this.$vApp.$pinia);case"areas-of-interest":return Drt(this.$vApp.$pinia);case"details":return Dde(this.$vApp.$pinia);case"export":return jrt(this.$vApp.$pinia);case"geosearch":return Krt(this.$vApp.$pinia);case"grid":return aF(this.$vApp.$pinia);case"help":return Qrt(this.$vApp.$pinia);case"legend":return est(this.$vApp.$pinia);case"mapnav":return tst(this.$vApp.$pinia);case"metadata":return ist(this.$vApp.$pinia);case"northarrow":return rst(this.$vApp.$pinia);case"overviewmap":return sst(this.$vApp.$pinia);case"scrollguard":return nst(this.$vApp.$pinia);case"wizard":return ost(this.$vApp.$pinia);case"config":return Sa(this.$vApp.$pinia);case"fixture":return Qd(this.$vApp.$pinia);case"instance":return Gv(this.$vApp.$pinia);case"layer":return Sl(this.$vApp.$pinia);case"map-caption":return om(this.$vApp.$pinia);case"maptip":return l4(this.$vApp.$pinia);case"notification":return wp(this.$vApp.$pinia);case"panel":return X0(this.$vApp.$pinia);default:console.error(`The store ${e} does not exist.`);return}}setLanguage(e){if(this.$i18n.locale.value===e)return;const r=Sa(this.$vApp.$pinia).registeredLangs;if(r[e]===r[this.$i18n.locale.value]){this.$i18n.locale.value=e;return}this.$i18n.locale.value=e;const s=this.getConfig();this.event.emit(qt.CONFIG_CHANGE,s),this.reload()}get language(){return this.$vApp.$i18n.locale}get animate(){return!!(this.$element._container&&this.$element._container.children[0]&&this.$element._container.children[0].classList.contains("animation-enabled"))}toggleFullscreen(){Vc.isEnabled&&Vc.toggle(this.$element._container||void 0)}get isFullscreen(){return this._isFullscreen}get started(){return Gv(this.$vApp.$pinia).started}updateAlert(e){const i=this.$vApp.$el.querySelector(".screen-reader-alert");i.childNodes.length>0&&(i.innerHTML="");const r=document.createElement("span");r.setAttribute("role","alert");const s=document.createTextNode(e);r.appendChild(s),i.insertBefore(r,null)}scrollToInstance(){this.ui.scrollToInstance&&this.$element._container?.scrollIntoView({behavior:"smooth"})}start(){const e=Gv(this.$vApp.$pinia);!e.started&&this.startRequired?(this.event.emit(qt.MAP_START),e.started=!0):e.started&&console.warn("start has already been called")}}function lst(t,e){const i=gJe();i.use(({store:o})=>{const a=nY(o.$state);o.$reset=()=>o.$patch(nY(a))});const r=nYe(),s=y$(vtt).use(r).use(ptt,{directive:"tippy",component:"tippy"}).use(i);s.directive("focus-container",Itt),s.directive("focus-list",_tt),s.directive("focus-item",Stt),s.directive("truncate",dit),s.component("panel-screen",wit),s.component("pin",Iit),s.component("close",Oit),s.component("back",Nit),s.component("expand",Yit),s.component("panel-options-menu",grt),s.component("dropdown-menu",FU),s.component("minimize",trt),s.component("right",art),s.component("left",prt),s.component("fullscreen-nav-button",Irt),s.component("geolocator-nav-button",Art),s.component("home-nav-button",$rt),s.component("mapnav-button",krt),s.component("appbar-button",Frt),s.component("transition",d_),s.component("transition-group",d$),s.config.globalProperties.$iApi=e,s.config.globalProperties.$pinia=i,s.provide("iApi",e);const n=s.mount(t);return{element:s,app:n,i18n:r.global}}class ust{esriBasemap;config;constructor(e){this.config=e,this.esriBasemap=new Em({baseLayers:e.layers.map(i=>{if(i.layerType===li.TILE)return new p7({url:i.url,opacity:i.opacity});if(i.layerType===li.MAPIMAGE)return new h7({url:i.url,opacity:i.opacity});if(i.layerType===li.OSM)return new d7({opacity:i.opacity});throw new Error(`Unsupported layer type provided to basemap config: ${i.layerType}`)}),title:e.name||"",id:e.id})}get tileSchemaId(){return this.config.tileSchemaId}get id(){return this.config.id}get name(){return this.config.name}set name(e){this.config.name=e||""}get description(){return this.config.description}set description(e){this.config.description=e||""}get altText(){return this.config.altText}set altText(e){this.config.altText=e||""}get attribution(){return this.config.attribution}set attribution(e){this.config.attribution=e}get backgroundColour(){return this.config.backgroundColour??"#FFFFFF"}}class cst extends Ks{esriMap;_basemapStore;created=!1;trackFirstBasemap=!1;esriView;_viewPromise;get viewPromise(){return this._viewPromise.getPromise()}_rampSR;_rampExtentSet;_targetDiv;handlers;pointZoomScale;constructor(e){super(e),this.esriMap=void 0,this._basemapStore=[],this._viewPromise=new fn,this.handlers=[],this.pointZoomScale=5e4}noMapErr(){console.error("Attempted to manipulate the map before calling createMap()")}abstractError(){throw new Error("Attempted to call an abstract method in the parent CommonMapAPI")}createMap(e,i){this._basemapStore=e.basemaps.map(s=>{const n=new ust(s);return n.esriBasemap.baseLayers.forEach(o=>{o.watch("loadStatus",()=>{o.loadStatus==="loaded"?this.trackFirstBasemap=!1:o.loadStatus==="failed"&&(this.$iApi.notify.show(_u.ERROR,this.$iApi.$i18n.t("layer.error",{id:n.name})),this.trackFirstBasemap&&this.recoverBasemap(n.tileSchemaId))})}),n});const r={};this.esriMap=_s(new foe(r)),this.pointZoomScale=e.pointZoomScale&&e.pointZoomScale>0?e.pointZoomScale:5e4,this._targetDiv=i,this.createMapView(e.initialBasemapId)}destroyMap(){if(!this.esriMap||!this.esriView){this.noMapErr();return}this.destroyMapView(),this.esriMap.destroy(),delete this.esriMap,this._basemapStore.forEach(e=>e.esriBasemap.destroy()),this._basemapStore=[]}reloadMap(e,i){if(!this.esriMap||!this.esriView){this.noMapErr();return}this.destroyMap(),this.createMap(e,i)}createMapView(e){this.abstractError()}destroyMapView(){if(!this.esriView){this.noMapErr();return}this._viewPromise=new fn,this.created=!1,this.handlers.forEach(e=>e.handler.remove()),this.handlers=[],this.esriView.map=null,this.esriView.container=null,this.esriView.spatialReference=null,this.esriView.extent=null,this.esriView.navigation=null,this.esriView.destroy(),delete this.esriView}findBasemap(e){const i=this._basemapStore.find(r=>r.id===e);if(i)return i;throw new Error(`Invalid basemap id requested: ${e}`)}applyBasemap(e){if(!this.esriMap){this.noMapErr();return}const i=typeof e=="string"?this.findBasemap(e):e;this.esriMap.basemap=hi(i.esriBasemap)}setBasemap(e){return this.abstractError(),!1}recoverBasemap(e){}getCurrentBasemapId(){if(this.esriMap)return this.esriMap.basemap.id;this.noMapErr()}geomToMapSR(e){if(!this._rampSR)throw new Error("call to map.geomToMapSR before the map spatial ref was created");return this._rampSR.isEqual(e.sr)?Promise.resolve(e):this.$iApi.geo.proj.projectGeometry(this._rampSR,e)}async zoomMapTo(e,i,r=!0){if(this.esriView){if(e.invalid())throw new Error("attempt to zoom to invalid geometry");const s=await this.geomToMapSR(e),n={target:this.$iApi.geo.geom.geomRampToEsri(s)};s.type===Mi.POINT&&(n.scale=i||this.pointZoomScale);const o={animate:r};return this.viewPromise.then(()=>this.esriView.goTo(n,o))}else this.noMapErr()}getZoomLevel(){return this.esriView?this.esriView.zoom:(this.noMapErr(),1)}getScale(){return this.esriView?this.esriView.scale:(this.noMapErr(),1)}getResolution(){return this.esriView?this.esriView.resolution:(this.noMapErr(),1)}getExtent(){return this.esriView?Wr.fromESRI(this.esriView.extent):(this.noMapErr(),Wr.fromParams("i_am_error",0,1,0,1))}getExtentSet(){return this._rampExtentSet?this._rampExtentSet:(this.noMapErr(),KS.fromConfig({id:"i_am_error_extent_set",default:{xmin:0,xmax:1,ymin:0,ymax:1,spatialReference:{wkid:4326}}}))}getSR(){return this._rampSR?this._rampSR.clone():(this.noMapErr(),Ii.latLongSR())}getPixelHeight(){return this.esriView?this.esriView.height:(this.noMapErr(),1)}getPixelWidth(){return this.esriView?this.esriView.width:(this.noMapErr(),1)}setPointZoomScale(e){return e>0?(this.pointZoomScale=e,!0):(console.error(`Cannot set pointZoomScale to non-positive number: ${e}.`),!1)}}class hst extends Ks{maptipStore;constructor(e){super(e),this.maptipStore=l4(this.$vApp.$pinia)}#e=void 0;#t=void 0;async checkAtCoord(e){this.#t=e;const i=await this.$iApi.geo.map.getGraphicAtCoord(e);if(this.#t!==e)return;if(!i){this.clear();return}if(this.#e&&this.#e.layerId===i.layerId&&this.#e.oid===i.oid&&this.#e.layerIdx===i.layerIdx)return;this.clear(),this.#e=i;const r=this.$iApi.geo.layer.getLayer(i.layerId);if(!r){console.error(`graphic hit test returned non-existent layer id: ${i.layerId}`);return}if(!r.hovertips)return;const s=await r.getIcon(i.oid),n=await r.getGraphic(i.oid,{getAttribs:!0});this.setPoint(this.$iApi.geo.map.screenPointToMapPoint(e)),this.$iApi.event.emit(qt.MAP_GRAPHICHIT,{layer:r,graphicHit:i,attributes:n.attributes,icon:s,screenPoint:e})}generateDefaultMaptip(e){this.setContent(`<div class="flex items-center space-x-5"><span>${e.icon}</span><span class="line-clamp-3">${e.attributes[e.layer.config.tooltipField||e.layer.nameField]}</span></div>`)}clear(){this.#e=void 0,this.maptipStore.setMaptipPoint(void 0),this.maptipStore.setMaptipContent("")}getInstance(){return this.maptipStore.maptipInstance}getPoint(){return this.maptipStore.maptipPoint}setPoint(e){this.maptipStore.setMaptipPoint(e)}setContent(e){this.maptipStore.setMaptipContent(e)}}class dst extends Ks{DEFAULT_POINT_FORMATTERS={LAT_LONG_DMS:this.formatLatLongDMS,LAT_LONG_DD:this.formatLatLongDD,LAT_LONG_DDM:this.formatLatLongDDM,WEB_MERCATOR:this.formatMercator,CANADA_ATLAS_LAMBERT:this.formatLambert,UTM:this.formatUTM,BASEMAP:this.formatBasemap};pointFormatter;constructor(e){super(e),this.pointFormatter=this.DEFAULT_POINT_FORMATTERS.LAT_LONG_DMS}createCaption(e){if(!e)return;const i=om(this.$vApp.$pinia);if(e.mapCoords.disabled)i.coords={disabled:!0};else{const r=e.mapCoords.formatter;r!==void 0&&this.setPointFormatter(r)}if(e.scaleBar.disabled)i.scale={disabled:!0};else{const r=e.scaleBar.imperialScale;r!==void 0&&(i.toggleScale(r),this.$iApi.geo.map.viewPromise.then(()=>{this.updateScale()}))}i.langtoggle={disabled:e?.langToggle?.disabled??!1}}updateAttribution(e){const i={text:{value:"Powered by ESRI"},logo:{altText:"ESRI logo",link:"https://www.esri.com/",value:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAAAkCAYAAADWzlesAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAADO9JREFUeNq0Wgl0jlca/pfvzyo6qNBSmhLLKE1kKEUtB9NTat+OYnBacwwJY19DZRC7sR41th60lWaizFSqRTOEw0lsrQSJGFIESSxJ/uRfv3nef+7Vt9f3p2E695z3fMt97/3ufe+7PO+9n9n0UzELsjKyiHdUdMZnVHTl2VyFe9nO7Kc/Io+4epUxmpWxeVkbr3hvUebgFf15GL9XUwZHndtAAYI09jGvIghOuoEwLOLeYiBoXrwGfZjYYOWAvWyMGlsk2YebXeV3NUEW1qcT5BBX4jUbCYEmHwwKEfdW1gEXgoWtiIlNRFeezcrkrQaTNSuraRYDdImrR1ylAALZBPnkXIJ0wRskeG2Cj3jsoFI2HhcfDDFWA9UBNdZZyc/PP4Z3HZYsWTLGbrffond0Xb9+/Qy6P3jw4F+HDx8+mu7XrVs3c+7cuX+i+3nz5o3n/Rw4cGAdf/7hhx9SZ8yYEcffHT9+/G/8uaSkJGvDhg3D8P3moNdXrlw5UtYVFxfnXL9+/V8PHz68grr2N2/eTC4tLb2E+9+Cotq1a/dOenr6njt37nxPdOrUqd0dO3bsjromoHBQKBPkEyFUB71MH6SPbNy4cRqfkMvlenzixImtqO/x3XffbXc6nSW5ubnpOTk5J1NTU/cQH91//fXXu3/88ccLy5cvj6d34B8gaBA9JyQk/OWjjz5aIu8Fz2DiWbZs2QLx/A4m0Qf9f/n48eNsPEeDfrdly5Y/U31UVNT7dJ04ceIsGseNGzfS6DkuLq4v8YE6Y/G+93g8XKZ6QUHBRVHfAPQC0xJfCRAv65EkeUP6gFx11JEkfw/qTc8ff/zxKofDUXrv3r08rOIBeU9CWbx48SLej5y4LGlpaf9YuHDhUv5OtqH+6Vty0riPAbWjheH8n3322VYpuG+//Xa5mGB7CGM8hKN7vV5dLfHx8WNI20E1aN4WP97YZyc7d+6MM5vNHRs2bDg3NjY23e12l5w8eZJWzIUJ9IdmlI4bNy4tICAgtHbt2hGdOnXaSe3oftu2bWmBgYFOn3MwmwcQLViwIJOeYVYJGGAZVuW2zWZzCZ6hoIGapnmknUMTQnr16vUeTOKydHqyHrx9t27dunro0KEfzJw5M4Pe3bp166Z0pHXr1g0Fj2EYCw8PD+N+SjNwUuSAKnxexOkswOWxZN63b9/MAQMGzIUwx5WXl99eunTpFLx+hJU/K9o/yM7OPhgZGdk5KSkpp0WLFv+Vrq7/na5nz57dR1dM6t7hw4e3DRkyJG7WrFlxgudzukIw58TzV3SF3Z+ByUzFbTk5O9j8fVH/JV3PnTv3uRijSdSR5/empKRkT5kypQxCC+UTxMKVQXuyWBT5WbiS4VFjIZLHWQsLN1ZFgFbm0U1KSNWUUMlDp9kAh0iNdCkRwiva2FjUsjJeJ5sYRYQwCGIYNGk8tC1UCuDQoUOb+vbtuxuPRUJ4FVwIFhZ7pUD45OXEbUpo9DIz8hgAFk0BORblWypm8BiQzkKnpoRnM+PxsEWhiYfFxMTUHTx4cDOYhg7tzM7IyLhNCiYEUEbCMxsAGYuCGjl4ClKE4GY+xCnIw95zBKqxvmyCOJqT7dws5ntZzLcoaJEjQiPUahMaESzudWEqhBEeiSuZvUvzA1+lxIMEhbD7QGYKUl0rBAgxC9vlq6IzNZZ9BYt+rMw8pBDLmSZZFBPQmBC8imaofo1roa5oKH82aQaaIH0CDTZM0sCBAxvBKbZ+7bXXGr3yyisN4ZjMDx48uAeAkofQdHbt2rUXhIpJKevMJwSLfqq3bt365enTp3eFh365SZMmBGpMFRUVZcAV1wFmzs2ZMyddtCkXk9ESExOjq1Wr9iLCbwAilA9xwrnlwimS4G2ffvppj1atWrWoWbNmbWCKAtj9V5MnT84cMWJEvTfeeKM+wqSFzCEoKMgJ3HEVgO6SkTlKMwgUgImwArn2DpMmTYrDALP0XyjEA9sbjTZtQZGij7qghqBWoK4AWPswkbLK+qHIsWPHjoXgfwvUhsZAAEflg+dfg0kuBlosUuvoO2jXl65qXWZm5g7UNRPIOIQLQqpcmECMJIAuRp1UVmiCACmTxAReFx+LhnPqV1hY+O9n6evIkSObSXCEHI0WASDtMMJ0uVHb7du3E6p9HxpxQK0DjN4r0Gc9kSZYeZiSNkuaUOv06dPTO3fuPNj0DAWgKWTFihVL+vfvT0J8kfohAsobV6tWrYbP0hf460pnLE2AF2jB21DvIKO2gO6FNB+ERJtaB+xjY37NN3+LogmkHi9s2rTp3bZt277LG8NuK5AopXbv3n0O7Gtsjx49ZmNye6GOD1RBwD9MFUKoSQSc30UdzJUrV26uWrVqP7D/lt27d+9/9OhRMas7gjYbhROzkv9R2wcHBwdWshjkYL1G7SBQTXGwTwQQLLIqWsGeGFAhVyFSO6C7Naj7ADRUJENDQGMjIiLmQl0LVLUbNWrUItSPhBNcodYhFyFklwAiYf0RNKZZs2YfFhUVXYcAvhFm0FFc++fl5eX4Mxto7JnRo0cvID4yHWSz70dHRw+khAxZ6yGVH8ndftS9DWokciWNx15fTN2zZ0+f6tWr1+LS279/fwYgcz4LPzJvdyGVLUFidFiVOIRAqx8KlQysZCdKboJUXL58uRAmMLFp06aLRbh1cGhrVEiD3nzzzTXIcU5R6gC6vXfv3kuIGgSIyq1Wq6cqpmdhiNAXFtu0adNeZVq9enUWA0xywyVECC4AicwttQ2SrvpkYnfv3i1X6xo0aPAiJv2H+fPnt27UqFEN4YsCDBCk33Lt2rW8kSNHJuP2LqUc4kq+4KFAgg6LxeKtSl+a4hMC6tSp85QD27VrVy9I1U2SJaKYS/ZG8Rf5uhVXq91ud4aEhATINo0bN46glUQMv4aQV46MMpj3iRVvsGjRohFEENQtygCRmZ5B6DsqNNPFANJT5cyZM5RoPRBE/qREaJYEYm4aZ1WFwDG9ppoClebNm9czPV/xYXOo6J4xY8Z84I8Jgq9HBCDVfsKECR+mpqZ+gSQnRVQHGTm4CxcuXBP9l4qrneUNPtheVSFYKtkF/jUKqWbx2LFjUxBJViA82asSZvv06TPq+PHjE/D4GzI70jiVT+xDyBzDo8DhZyoWNXsD4Cn/FYVQLKgIofCfMIkhgKyr4bhO8pBoVGgvsEuXLq+SEIw0Qayyl5H+vIPUmJf2ZYOwz5twXE05U/369TfBZu+wvMBpkH7L3dwyYZ+l4uoRPL50FzCcQuAJstvIyMjacG5Rw4YN64b7V9XBxcbGdgJq/cZIE4TT0/2ceTyzJsiMj0JSxfnz50+rTECBUUq2aGd2WC7Izib+WFwdLJs0sczT1w+Q3d34+PhTSKQ2w4GeVL9LTtefY1Q2YEz/qxC8LIe3f/LJJ2kqU79+/WIGDRpUj+0L8N0lG7B6N+QGiS1btgxR9ha8gi949uzZ0UiENgBSR4iQyFNiL0zkrh+V/78XfjJDq1aWnJx85dixY8kqRE1KSopNSUkZ0K1btwjhsGpMmzatbVZW1nTy/JQbQHUXA26HMRul/gOQHkcBUK1BBGiJFHgtcMV7YqeXeEM7dOhQB4lXh6dCS1kZaZbDSBjinV6ZhsBkdAMz0o00SO4hhIrUl7K/7vfv37+hP0eBw8tBftFRpNNNExMThyMqlKp8SEXsADy5t1GM+qF6CHwe+hifm5t7Ta1PSEiYj7rWIhsMZaCPEkDyL+2PHj36hdqO3lGd4KkuYbN0jC5h22TPRT179pwCZ5j9rKqF0FWtd+/eL0kBA9Y2kRudvBB4og2al1CM+iFsgQFfJTCkaZrboL2DhUfd4NjAadROvHPyvUsLayxNghxaMWw0D1EhFiguqSrxXWZ/EN7IyZMnX5QHn127dk0Gxo+nnd6q9EHf2rx58zJgC1oxSrQKgR1cKl9YWJhdOFg329TlC1oBM3YYZJ8OubcozVZTJPjkzEEwOBGr1yIr+xz23xX23i48PPxVjiqRQV6GRuetXLkSbiPpCsPuTulzEAYPAh+cnzp1ao+YmJi31D5gevkwo3sZGRmn0M+RzMzMAhFtaGG0ixcvfpmfn39WbpNBC1zILK8KHqdykCsXszQ7O/sE8WMBNKGlbrxLF1HsSeQyV5JQBSrJUghLdDQmKB46ywTJFTKzfqqxftScwM1OjGXY/Vl0UU7IHcq3XMrutkz0QsX3bOwEWo5TfsNj9hMxjP5VCFR2fPl/AS4xMH7u71X6CWR92JQjer5t72AHLrpyKGRRhKbCZrNybhJg8HvBU+385Qv8DMKi/BjBEaKuHJK42YDU/x789cFhu1s5cFH/hTAp3/UqhzMm5cTM6G8br/qnyi8lTWYDoZiUP1TUEyc1Ble1D5OSA+gG7U0GR3b+fhUy+kVIN0Kb/xFgANrk0XIqRaL0AAAAAElFTkSuQmCC"}};if(e){e.logo.disabled||(i.logo.altText=e.logo.altText||i.logo.altText,i.logo.link=e.logo.link||i.logo.link,i.logo.value=e.logo.value||i.logo.value),e.text.disabled||(i.text.value=e.text.value||i.text.value);const r=om(this.$vApp.$pinia);r.attribution=i}if(!e||e.text.disabled){if(!this.$iApi.geo.map.esriMap){console.warn("Attempted to fetch map attribution with undefined map");return}let r="";const s=5e3,n=20,o=this.$iApi.geo.map.esriMap.basemap.baseLayers.map(a=>new Promise(l=>{let u=0;const c=s/n,d=setInterval(function(){a.loaded&&!a.loadError?(clearInterval(d),l(a)):u>c&&(clearInterval(d),l(null)),u++},n)})).toArray();Promise.all(o).then(a=>{r=a.filter(u=>u?.copyright).map(u=>u.copyright).join(" | "),i.text.value=r||i.text.value;const l=om(this.$vApp.$pinia);l.attribution=i})}}updateScale(){const e=om(this.$vApp.$pinia),i=e.scale;if(i?.disabled)return;const r=i?.isImperialScale||!1,s=this.scaleHelper().find(n=>n.isImperialScale===r)??{isImperialScale:!1,units:"error",pixels:1,distance:1};e.scale={width:`${s.pixels}px`,label:`${this.$iApi.$i18n.n(s.distance,"number")}${s.units}`,isImperialScale:r}}async formatPoint(e){return e?await this.pointFormatter(e):""}setPointFormatter(e){if(typeof e=="string"){if(!(e in this.DEFAULT_POINT_FORMATTERS)){console.warn(`Could not find point formatter with id: ${e}`);return}this.pointFormatter=this.DEFAULT_POINT_FORMATTERS[e]}else this.pointFormatter=e}scaleHelper(){const e=window.innerWidth>600?70:35,i=this.$iApi.geo.map.getResolution(),r=[],s=i*e,n=1609.34,o=3.28084,a=s>1e3?["km","mi"]:["m","ft"];for(let l=0;l<2;l++){const u=l===1;if(r.push({isImperialScale:u,units:a[l],pixels:0,distance:0}),s>1e3){const c=i*e/(u?n:1e3),d=Math.round(c).toString().length,f=Math.pow(10,d-1);r[l].distance=Math.ceil(c/f)*f,r[l].pixels=r[l].distance*(u?n:1e3)/i}else r[l].distance=Math.ceil(u?s*o:s),r[l].pixels=s/i}return r}wrapValue(e,i,r){return((e-i)%(r-i)+(r-i))%(r-i)+i}async formatLatLongDMS(e){const i=await this.$iApi.geo.proj.projectGeometry(4326,e),r=this.wrapValue(i.y,-90,90),s=this.wrapValue(i.x,-180,180),n=String.fromCharCode(176),o=Math.floor(Math.abs(r))*(r<0?-1:1),a=Math.floor(Math.abs((r-o)*60)),l=Math.floor((Math.abs(r)-Math.abs(o)-a/60)*3600),u=Math.floor(Math.abs(s))*(s<0?-1:1),c=Math.floor(Math.abs((s-u)*60)),d=Math.floor((Math.abs(s)-Math.abs(u)-c/60)*3600);return`${this.$iApi.$i18n.n(Math.abs(o),"number")}${n} ${this.$iApi.$i18n.n(a,"number",{minimumIntegerDigits:2})}' ${this.$iApi.$i18n.n(l,"number",{minimumIntegerDigits:2})}" ${this.$iApi.$i18n.t("map.coordinates."+(r>0?"north":"south"))} | ${this.$iApi.$i18n.n(Math.abs(u),"number")}${n} ${this.$iApi.$i18n.n(c,"number",{minimumIntegerDigits:2})}' ${this.$iApi.$i18n.n(d,"number",{minimumIntegerDigits:2})}" ${this.$iApi.$i18n.t("map.coordinates."+(0>s?"west":"east"))}`}async formatLatLongDDM(e){const i=await this.$iApi.geo.proj.projectGeometry(4326,e),r=this.wrapValue(i.y,-90,90),s=this.wrapValue(i.x,-180,180),n=String.fromCharCode(176),o=Math.floor(Math.abs(r))*(r<0?-1:1),a=Math.abs((r-o)*60),l=Math.floor(Math.abs(s))*(s<0?-1:1),u=Math.abs((s-l)*60);return`${this.$iApi.$i18n.n(Math.abs(o),"number")}${n} ${this.$iApi.$i18n.n(a,"number",{minimumIntegerDigits:2,minimumFractionDigits:5,maximumFractionDigits:5})} ${this.$iApi.$i18n.t("map.coordinates."+(r>0?"north":"south"))} | ${this.$iApi.$i18n.n(Math.abs(l),"number")}${n} ${this.$iApi.$i18n.n(u,"number",{minimumIntegerDigits:2,minimumFractionDigits:5,maximumFractionDigits:5})} ${this.$iApi.$i18n.t("map.coordinates."+(0>s?"west":"east"))}`}async formatLatLongDD(e){const i=await this.$iApi.geo.proj.projectGeometry(4326,e),r=this.wrapValue(i.y,-90,90),s=this.wrapValue(i.x,-180,180),n=String.fromCharCode(176),o=Math.abs(r),a=Math.abs(s);return`${this.$iApi.$i18n.n(o,"number",{minimumIntegerDigits:2,minimumFractionDigits:5,maximumFractionDigits:5})}${n} ${this.$iApi.$i18n.t("map.coordinates."+(r>0?"north":"south"))} | ${this.$iApi.$i18n.n(a,"number",{minimumIntegerDigits:2,minimumFractionDigits:5,maximumFractionDigits:5})}${n} ${this.$iApi.$i18n.t("map.coordinates."+(0>s?"west":"east"))}`}async formatMercator(e){const i=await this.$iApi.geo.proj.projectGeometry(102100,e);return`${this.$iApi.$i18n.n(Math.floor(i.x),"number")} m | ${this.$iApi.$i18n.n(Math.floor(i.y),"number")} m`}async formatLambert(e){const i=await this.$iApi.geo.proj.projectGeometry(3978,e);return`${this.$iApi.$i18n.n(Math.abs(Math.floor(i.x)),"number")} m ${this.$iApi.$i18n.t("map.coordinates."+(0>i.x?"west":"east"))} | ${this.$iApi.$i18n.n(Math.abs(Math.floor(i.y)),"number")} m ${this.$iApi.$i18n.t("map.coordinates."+(i.y>0?"north":"south"))}`}async formatUTM(e){const i=await this.$iApi.geo.proj.projectGeometry(4326,e),r=this.wrapValue(i.y,-90,90),s=this.wrapValue(i.x,-180,180),n=Math.ceil((s+180)/6),o=await this.$iApi.geo.proj.projectGeometry(parseInt("326"+n),e);return`${this.$iApi.$i18n.n(n,"number",{minimumIntegerDigits:2})} ${this.$iApi.$i18n.t("map.coordinates."+(r>0?"north":"south"))} ${this.$iApi.$i18n.n(Math.floor(o.x),"number")} m${this.$iApi.$i18n.t("map.coordinates.east")} | ${this.$iApi.$i18n.n(Math.abs(Math.floor(o.y)),"number")} m${this.$iApi.$i18n.t("map.coordinates.north")}`}async formatBasemap(e){const i=await this.$iApi.geo.proj.projectGeometry(this.$iApi.geo.map.getSR(),e);return`${this.$iApi.$i18n.n(i.x,"number")} | ${this.$iApi.$i18n.n(i.y,"number")}`}}class pst extends cst{maptip;caption;mapMouseThrottle;constructor(e){super(e),this.maptip=new hst(e),this.caption=new dst(e),this.mapMouseThrottle=0}createMap(e,i){this.setMapMouseThrottle(e.mapMouseThrottle??0),this.trackFirstBasemap=!0,super.createMap(e,i),this.viewPromise.then(()=>{this.$iApi.event.emit(qt.MAP_CREATED)})}destroyMap(){if(!this.esriMap||!this.esriView){this.noMapErr();return}this.$iApi.geo.layer.allLayersOnMap().map(e=>e.uid).forEach(e=>this.removeLayer(e)),super.destroyMap(),this.$iApi.event.emit(qt.MAP_DESTROYED)}createMapView(e){const r=Sa(this.$vApp.$pinia).config.map;if(!r)throw new Error("Attempted to create map view without a map config");const s=(typeof e=="string"?this.findBasemap(e):e)||this.findBasemap(r.initialBasemapId),n=r.tileSchemas.find(l=>l.id===s.tileSchemaId);if(!n)throw new Error(`Could not find tile schema for the given basemap id: ${s.id}`);const o=r.extentSets.find(l=>l.id===n.extentSetId);if(!o)throw new Error(`Could not find extent set with the given id: ${n.extentSetId}`);this._rampExtentSet=KS.fromConfig(o),this._rampSR=this._rampExtentSet.sr.clone();const a=r.lodSets.find(l=>l.id===n.lodSetId);if(!a)throw new Error(`Could not find lod set with the given id: ${n.lodSetId}`);this.esriView=_s(new u7e({map:this.esriMap,container:this._targetDiv,constraints:{lods:a.lods,rotationEnabled:!1},spatialReference:this._rampSR.toESRI(),extent:this._rampExtentSet.defaultExtent.toESRI(),navigation:{browserTouchPanEnabled:!1},background:{color:s.backgroundColour}})),this.esriView.ui.components=[],this.handlers.push({type:"extent",handler:this.esriView.watch("extent",l=>{if(l){const u=this.$iApi.geo.geom.geomEsriToRamp(l,"map_extent_event");this.$iApi.event.emit(qt.MAP_EXTENTCHANGE,u),this.$iApi.event.emit(qt.FILTER_CHANGE,{extent:u,filterKey:Ho.EXTENT})}})}),this.handlers.push({type:"scale",handler:this.esriView.watch("scale",l=>{this.$iApi.event.emit(qt.MAP_SCALECHANGE,l)})}),this.handlers.push({type:"resize",handler:this.esriView.on("resize",l=>{this.$iApi.event.emit(qt.MAP_RESIZED,{height:l.height,width:l.width})})}),this.handlers.push({type:"click",handler:this.esriView.on("click",l=>{this.$iApi.event.emit(qt.MAP_CLICK,this.$iApi.geo.geom.esriMapClickToRamp(l,"map_click_point"))})}),this.handlers.push({type:"double-click",handler:this.esriView.on("double-click",l=>{this.$iApi.event.emit(qt.MAP_DOUBLECLICK,this.$iApi.geo.geom.esriMapClickToRamp(l,"map_doubleclick_point"))})}),this.handlers.push({type:"pointer-move",handler:this.esriView.on("pointer-move",this.createMouseMoveHandler())}),this.handlers.push({type:"pointer-move-start",handler:this.esriView.on("pointer-move",o4(100,!0,l=>{this.$iApi.event.emit(qt.MAP_MOUSEMOVE_START,this.$iApi.geo.geom.esriMapMouseToRamp(l))}))}),this.handlers.push({type:"pointer-move-end",handler:this.esriView.on("pointer-move",o4(100,l=>{this.$iApi.event.emit(qt.MAP_MOUSEMOVE_END,this.$iApi.geo.geom.esriMapMouseToRamp(l))}))}),this.handlers.push({type:"pointer-leave",handler:this.esriView.on("pointer-leave",l=>{setTimeout(()=>{this.$iApi.event.emit(qt.MAP_MOUSELEAVE,l.native)},Math.max(this.mapMouseThrottle,100)+1)})}),this.handlers.push({type:"pointer-down",handler:this.esriView.on("pointer-down",l=>{this.$iApi.event.emit(qt.MAP_MOUSEDOWN,l.native)})}),this.handlers.push({type:"key-down",handler:this.esriView.on("key-down",l=>{this.$iApi.event.emit(qt.MAP_KEYDOWN,l.native),l.stopPropagation()})}),this.handlers.push({type:"key-up",handler:this.esriView.on("key-up",l=>{this.$iApi.event.emit(qt.MAP_KEYUP,l.native),l.stopPropagation()})}),this.handlers.push({type:"focus",handler:this.esriView.on("focus",l=>{this.$iApi.event.emit(qt.MAP_FOCUS,l.native)})}),this.handlers.push({type:"blur",handler:this.esriView.on("blur",l=>{this.$iApi.event.emit(qt.MAP_BLUR,l.native)})}),this.esriView.container.addEventListener("touchmove",l=>{l.preventDefault()}),this.esriView.watch("fatalError",()=>{const l=new IntersectionObserver(u=>{u.forEach(c=>{c.isIntersecting&&(this.esriView?.tryFatalErrorRecovery(),l.disconnect())})});l.observe(this.esriView.container)}),this.esriView.when(()=>{if(this._viewPromise.resolveMe(),this.created=!0,this.applyBasemap(s),n.recoveryBasemap?.basemapId){const l=n.recoveryBasemap.timeout??8e3;l>0&&setTimeout(()=>{this.trackFirstBasemap&&this.recoverBasemap(n.id)},l)}})}destroyMapView(){this.esriView?.container.removeEventListener("touchmove",e=>{e.preventDefault()}),super.destroyMapView()}applyBasemap(e){if(!this.esriMap){this.noMapErr();return}const i=typeof e=="string"?this.findBasemap(e):e;this.esriMap.basemap=hi(i.esriBasemap);const r=Sa(this.$vApp.$pinia);r.activeBasemapConfig=i.config}setBasemap(e){if(!this.esriView||!this.esriMap)return this.noMapErr(),!1;const i=Sa(this.$vApp.$pinia),r=this.findBasemap(e),n=i.activeBasemapConfig.tileSchemaId!==r.tileSchemaId;if(n){const o=this.getExtent().center(),a=this.getScale();this._viewPromise=new fn,this.created=!1,this.$iApi.event.emit(qt.MAP_REFRESH_START),this.destroyMapView(),this.createMapView(r),this.viewPromise.then(()=>{this.$iApi.event.emit(qt.MAP_REFRESH_END);const l=this.findClosestScale(a);this.$iApi.geo.proj.projectGeometry(this._rampSR,o).then(u=>this.zoomMapTo(u,l,!1))})}else this.applyBasemap(r),this.esriView.set("background.color",new yp(r.backgroundColour).toESRI());return this.$iApi.event.emit(qt.MAP_BASEMAPCHANGE,{basemapId:e,schemaChanged:n}),n}recoverBasemap(e){this.esriMap||this.noMapErr(),this.trackFirstBasemap=!1;const r=Sa(this.$vApp.$pinia).config.map;if(r){const s=r.tileSchemas.find(n=>n.id===e);if(s?.recoveryBasemap?.basemapId){const n=this.findBasemap(s.recoveryBasemap.basemapId);this.applyBasemap(n)}}}addLayer(e,i=void 0){return new Promise((r,s)=>{this.esriMap||(this.noMapErr(),s()),e.initiationState!==wa.INITIATING&&e.initiationState!==wa.INITIATED&&e.layerState!==ks.ERROR&&e.initiate();const n=Sl(this.$vApp.$pinia);n.addInitiatingLayer(e);let o=0;const a=setInterval(()=>{o+=250,o>=2e4||e.layerState===ks.ERROR?(clearInterval(a),n.removeInitiatingLayer(e),n.addErrorLayer(e),e.onError(),s()):e.initiationState===wa.INITIATED&&(e.esriLayer||!e.mapLayer)&&(clearInterval(a),e.mapLayer?(this.esriMap?.add(e.esriLayer),n.removeInitiatingLayer(e),n.addLayer(e),i!==void 0&&this.reorder(e,i)):(n.removeInitiatingLayer(e),n.addDataLayer(e),e.onLoad()),this.$iApi.event.emit(qt.LAYER_REGISTERED,e),r())},250)})}reorder(e,i,r=!1){if(!this.esriMap){this.noMapErr();return}if(e.esriLayer){if(r&&e.isCosmetic)return;const s=Sl(this.$vApp.$pinia),n=s.layers,o=n.slice(0,i+1).filter(l=>!this.esriMap.layers.find(u=>u.id===l.id)).length,a=this.esriMap.layers.indexOf(this.esriMap.layers.filter(l=>{const u=n.find(c=>c.id===l.id);return!!u&&!(r&&u.isCosmetic)}).slice(0,i+1-o).pop());this.esriMap.reorder(e.esriLayer,a),s.reorderLayer(e,i),this.$iApi.event.emit(qt.MAP_REORDER,{layer:e,newIndex:i})}else console.error("Attempted reorder without an esri layer. Likely layer.initiate() was not called or had not finished.")}removeSublayer(e){let i,r;if(typeof e=="string")i=e,r=this.$iApi.geo.layer.getLayer(i);else{if(!e.isSublayer)throw new Error(`Attempted to call removeSublayer on a non-sublayer object: ${e}`);i=e.uid,r=e}if(!r)throw new Error("Sublayer could not be found for removal.");this.$iApi.event.emit(qt.LAYER_REMOVE,e),r.visibility=!1,r.isRemoved=!0,r.parentLayer?.sublayers.every(s=>s.isRemoved)&&this.removeLayer(r.parentLayer)}removeLayer(e){if(!this.esriMap){this.noMapErr();return}let i;if(e instanceof a0?i=e:i=this.$iApi.geo.layer.getLayer(e),!i)throw new Error("Layer could not be found for removal.");if(i.isSublayer){this.removeSublayer(i);return}if(i.mapLayer&&!i.esriLayer)throw new Error("Attempted to remove layer from the map without an esri layer. Likely layer.initiate() was not called or had not finished.");i.supportsSublayers&&i.sublayers.some(s=>!s.isRemoved)&&i.sublayers.forEach(s=>this.removeSublayer(s)),i.terminate();const r=Sl(this.$vApp.$pinia);r.removeLayer(i),r.removeLayerConfig(i.id),i.mapLayer&&this.esriMap.remove(i.esriLayer),i.isRemoved=!0,this.$iApi.event.emit(qt.LAYER_REMOVE,i)}setMapMouseThrottle(e){if(e<0)return console.error("Cannot set map mouse throttle to value that is less than 0."),!1;this.mapMouseThrottle=e;const i=this.handlers.findIndex(r=>r.type==="pointer-move");if(i!==-1){const r=this.handlers[i];this.handlers.splice(i,1),r.handler.remove()}return i!==-1&&this.esriView&&this.handlers.push({type:"pointer-move",handler:this.esriView.on("pointer-move",this.createMouseMoveHandler())}),!0}createMouseMoveHandler(){if(!this.esriView){this.noMapErr();return}return s0(this.mapMouseThrottle,e=>{this.$iApi.event.emit(qt.MAP_MOUSEMOVE,this.$iApi.geo.geom.esriMapMouseToRamp(e))})}async zoomToLevel(e){if(this.esriView)return this.esriView.goTo({zoom:e});this.noMapErr()}async zoomIn(){if(this.esriView)return this.zoomToLevel(this.esriView.zoom+1);this.noMapErr()}async zoomOut(){if(this.esriView)return this.zoomToLevel(this.esriView.zoom-1);this.noMapErr()}async zoomToVisibleScale(e){if(!this.esriView){this.noMapErr();return}const i=e.isOffScale(this.getScale());if(!i.offScale)return;const r=this.esriView.constraints.lods;if(!r)return this.zoomMapTo(this.getExtent().center(),(i.zoomIn,e.minScale));const s=i.zoomIn?r:[...r].reverse(),n=s.find(o=>i.zoomIn?o.scale<e.minScale:o.scale>e.maxScale)||s[s.length-1];return this.zoomToLevel(n.level)}findClosestScale(e){const i=this.esriView?.constraints.lods;if(!i)return e;const r=i.map(n=>Math.abs(n.scale-e)),s=r.indexOf(Math.min(...r));return i[s].scale}async takeScreenshot(e){if(this.esriView)return e.quality||(e.quality=1),e.format||(e.format="png"),this.esriView.takeScreenshot(e);throw new Error("Export attempted without a map view available")}screenPointToMapPoint(e){return this.esriView?Yo.fromESRI(this.esriView.toMap({x:e.screenX,y:e.screenY}),"mappoint"):(this.noMapErr(),new Yo("i_am_error",[0,0],void 0,!0))}mapPointToScreenPoint(e){if(this.esriView){const i=this.esriView.toScreen(e.toESRI());return{screenX:i.x,screenY:i.y}}else return this.noMapErr(),{screenX:1,screenY:1}}runIdentify(e){const i=Sl(this.$vApp.$pinia).layers;let r;if(e instanceof Yo){const u=this.mapPointToScreenPoint(e);r={mapPoint:e,screenX:u.screenX,screenY:u.screenY,button:0,input:"mouse",clickTime:Date.now()}}else r=e;if(i===void 0)return{click:r,results:[]};let s=Promise.resolve([]);i.some(u=>u.canIdentify()&&(u.identifyMode===hn.HYBRID||u.identifyMode===hn.SYMBOLIC))&&(s=this.esriView.hitTest({x:r.screenX,y:r.screenY}).then(u=>u.results.map(c=>({layerId:c.layer.id,layerIdx:0,oid:c.graphic.getObjectId()}))));const n={geometry:r.mapPoint,hitTest:s},o=i.filter(u=>u.supportsIdentify).map(u=>(n.tolerance=r.input=="touch"?u.touchTolerance:u.mouseTolerance,u.runIdentify(n))).flat(),a=Date.now();o.forEach(u=>{u.requestTime=a});const l={results:o,click:r};return this.$iApi.event.emit(qt.MAP_IDENTIFY,l),l}async getGraphicAtCoord(e){if(!this.esriView){this.noMapErr();return}const i=Sl(this.$vApp.$pinia).layers?.slice(0);if(i===void 0)return;i.reverse();const r=await this.esriView.hitTest({x:e.screenX,y:e.screenY}),s=r.results;if(r.results.length===0)return;let n;if(i.some(o=>{const a=s.find(l=>l.graphic.layer.id===o.id);if(a){if(o.isCosmetic||!o.supportsFeatures)return!0;n=o}return a!==void 0}),n){n.sublayers.length>1&&console.warn("Found layer with sublayers during hitTest"),n.drawOrder.length===0&&console.warn("Found layer with no draw order during hitTest");let o=s.filter(d=>d.graphic.layer.id===n.id);const a=(d,f)=>d===f?0:d>f?1:-1;let l=[],u;if(n.drawOrder.some((d,f)=>(l=[o.pop()],u=l[0].graphic.attributes[d.field],o.forEach(m=>{const g=m.graphic.attributes[d.field],v=a(u,g);v===0?l.push(m):(d.ascending&&v>0||!d.ascending&&v<0)&&(l=[m],u=g)}),l.length===1||f===n.drawOrder.length-1?!0:(o=l,!1))),l.length===0){console.error("Hit test failed to find topmost item using draw order");return}return{oid:l[0].graphic.getObjectId(),layerId:n.id,layerIdx:n.getLayerTree().layerIdx}}}_activeKeys=[];_panInterval;_mouseFocus=!1;mapKeyDown(e){const i=["=","-"];["Shift","Control","ArrowDown","ArrowLeft","ArrowRight","ArrowUp"].includes(e.key)&&!this._activeKeys.includes(e.key)?(this._activeKeys.push(e.key),this._activeKeys.some(s=>i.includes(s))||this.keyPan()):i.includes(e.key)&&!this._activeKeys.includes(e.key)?(this._activeKeys.push(e.key),this.keyZoom(e)):e.key==="Enter"?this.runIdentify(this.getExtent().center()):e.key==="Tab"&&this._activeKeys.push(e.key)}mapKeyUp(e){const i=["=","-"];this._activeKeys.includes(e.key)&&!i.includes(e.key)&&(this._activeKeys.splice(this._activeKeys.indexOf(e.key),1),this._activeKeys.some(r=>i.includes(r))||this.keyPan())}setMouseFocus(){this._mouseFocus=!0}stopKeyPan(){this._activeKeys.includes("Tab")&&(this._mouseFocus=!1),this._activeKeys=[],clearInterval(this._panInterval)}get keysActive(){return this._activeKeys.filter(e=>!["Control","Shift"].includes(e)).length!==0}get mouseFocus(){return this._mouseFocus}async keyZoom(e){clearInterval(this._panInterval),e.key==="="?await this.zoomIn():e.key==="-"&&await this.zoomOut(),this._activeKeys.splice(this._activeKeys.indexOf(e.key),1),this.keyPan()}keyPan(){if(clearInterval(this._panInterval),!this.keysActive)return;const e=this.getExtent().center(),i=this.mapPointToScreenPoint(e),r=this.screenPointToMapPoint({screenX:i.screenX+5,screenY:i.screenY+5}),s=Math.abs(r.x-e.x),n=Math.abs(r.y-e.y);let o=0,a=0,l=1;for(let c=0;c<this._activeKeys.length;++c)switch(this._activeKeys[c]){case"ArrowLeft":o-=s;break;case"ArrowRight":o+=s;break;case"ArrowUp":a+=n;break;case"ArrowDown":a-=n;break;case"Shift":l=2;break;case"Control":l=.25;break}const u=this.getScale();this._panInterval=setInterval(()=>{e.x+=l*o,e.y+=l*a,this.zoomMapTo(e,u,!1)},25)}}const fst={geometryType:"point",renderer:{type:"simple",symbol:{type:"esriSMS",style:"esriSMSCircle",color:[67,100,255,200],size:7,outline:{color:[0,0,0,255],width:1}}}},mst={geometryType:"polyline",renderer:{type:"simple",symbol:{type:"esriSLS",style:"esriSLSSolid",color:[90,90,90,200],width:2}}},yst={geometryType:"polygon",renderer:{type:"simple",symbol:{type:"esriSFS",style:"esriSFSSolid",color:[76,76,125,200],outline:{type:"esriSLS",style:"esriSLSSolid",color:[110,110,110,255],width:1}}}},gst={geometryType:"polygon",renderer:{type:"simple",symbol:{type:"esriSFS",style:"esriSFSSolid",color:[255,0,0,64],outline:{type:"esriSLS",style:"esriSLSSolid",color:[240,128,128,255],width:1}}}},vst={circlePoint:fst,solidLine:mst,outlinedPoly:yst,boundingBoxPoly:gst};var _fe={exports:{}};(function(t,e){(function(i,r){if(t.exports=r(Tue()),typeof i.navigator=="object"){if(!i.Terraformer)throw new Error("Terraformer.ArcGIS requires the core Terraformer library. https://github.com/esri/Terraformer");i.Terraformer.ArcGIS=r(i.Terraformer)}})(Hn,function(i){var r={};function s(b){var _=0,S=0,M=[],x,T,I,$;I=b.match(/((\+|\-)[^\+\-]+)/g),$=parseInt(I[0],32);for(var L=1;L<I.length;L+=2)x=parseInt(I[L],32)+_,_=x,T=parseInt(I[L+1],32)+S,S=T,M.push([x/$,T/$]);return M}function n(b){return o(b[0],b[b.length-1])||b.push(b[0]),b}function o(b,_){for(var S=0;S<b.length;S++)if(b[S]!==_[S])return!1;return!0}function a(b){var _={};for(var S in b)b.hasOwnProperty(S)&&(_[S]=b[S]);return _}function l(b){var _=0,S=0,M=b.length,x=b[S],T;for(S;S<M-1;S++)T=b[S+1],_+=(T[0]-x[0])*(T[1]+x[1]),x=T;return _>=0}function u(b){var _=[],S=b.slice(0),M=n(S.shift().slice(0));if(M.length>=4){l(M)||M.reverse(),_.push(M);for(var x=0;x<S.length;x++){var T=n(S[x].slice(0));T.length>=4&&(l(T)&&T.reverse(),_.push(T))}}return _}function c(b){for(var _=[],S=0;S<b.length;S++)for(var M=u(b[S]),x=M.length-1;x>=0;x--){var T=M[x].slice(0);_.push(T)}return _}function d(b,_){var S=i.Tools.arraysIntersectArrays(b,_),M=i.Tools.coordinatesContainPoint(b,_[0]);return!!(!S&&M)}function f(b){for(var _=[],S=[],M,x,T,I=0;I<b.length;I++){var $=n(b[I].slice(0));if(!($.length<4))if(l($)){var L=[$.slice().reverse()];_.push(L)}else S.push($.slice().reverse())}for(var B=[];S.length;){T=S.pop();var z=!1;for(M=_.length-1;M>=0;M--)if(x=_[M][0],d(x,T)){_[M].push(T),z=!0;break}z||B.push(T)}for(;B.length;){T=B.pop();var H=!1;for(M=_.length-1;M>=0;M--)if(x=_[M][0],i.Tools.arraysIntersectArrays(x,T)){_[M].push(T),H=!0;break}H||_.push([T.reverse()])}return _.length===1?{type:"Polygon",coordinates:_[0]}:{type:"MultiPolygon",coordinates:_}}function m(b,_){var S={};return _=_||{},_.idAttribute=_.idAttribute||void 0,b.spatialReference&&(b.spatialReference.wkid===3857||b.spatialReference.wkid===102100)&&(S.crs=i.MercatorCRS),typeof b.x=="number"&&typeof b.y=="number"&&(S.type="Point",S.coordinates=[b.x,b.y],(b.z||b.m)&&S.coordinates.push(b.z),b.m&&S.coordinates.push(b.m)),b.points&&(S.type="MultiPoint",S.coordinates=b.points.slice(0)),b.paths&&(b.paths.length===1?(S.type="LineString",S.coordinates=b.paths[0].slice(0)):(S.type="MultiLineString",S.coordinates=b.paths.slice(0))),b.rings&&(S=f(b.rings.slice(0))),typeof b.xmin=="number"&&typeof b.ymin=="number"&&typeof b.xmax=="number"&&typeof b.ymax=="number"&&(S.type="Polygon",S.coordinates=[[[b.xmax,b.ymax],[b.xmin,b.ymax],[b.xmin,b.ymin],[b.xmax,b.ymin],[b.xmax,b.ymax]]]),(b.compressedGeometry||b.geometry||b.attributes)&&(S.type="Feature",b.compressedGeometry&&(b.geometry={paths:[s(b.compressedGeometry)]}),S.geometry=b.geometry?m(b.geometry):null,S.properties=b.attributes?a(b.attributes):null,b.attributes&&(S.id=b.attributes[_.idAttribute]||b.attributes.OBJECTID||b.attributes.FID)),new i.Primitive(S)}function g(b,_){var S;_=_||{};var M=_.idAttribute||"OBJECTID";_.sr?S={wkid:_.sr}:b&&b.crs&&b.crs.properties.name!="urn:ogc:def:crs:OGC:1.3:CRS84"?S=null:S={wkid:4326};var x={},T;switch(b.type){case"Point":x.x=b.coordinates[0],x.y=b.coordinates[1],b.coordinates[2]&&(x.z=b.coordinates[2]),b.coordinates[3]&&(x.m=b.coordinates[3]),x.spatialReference=S;break;case"MultiPoint":x.points=b.coordinates.slice(0),x.spatialReference=S;break;case"LineString":x.paths=[b.coordinates.slice(0)],x.spatialReference=S;break;case"MultiLineString":x.paths=b.coordinates.slice(0),x.spatialReference=S;break;case"Polygon":x.rings=u(b.coordinates.slice(0)),x.spatialReference=S;break;case"MultiPolygon":x.rings=c(b.coordinates.slice(0)),x.spatialReference=S;break;case"Feature":b.geometry&&(x.geometry=g(b.geometry,_)),x.attributes=b.properties?a(b.properties):{},b.id&&(x.attributes[M]=b.id);break;case"FeatureCollection":for(x=[],T=0;T<b.features.length;T++)x.push(g(b.features[T],_));break;case"GeometryCollection":for(x=[],T=0;T<b.geometries.length;T++)x.push(g(b.geometries[T],_));break}return x}function v(b){return new i.LineString(s(b))}return r.parse=m,r.convert=g,r.toGeoJSON=m,r.fromGeoJSON=g,r.parseCompressedGeometry=v,r})})(_fe);var bst=_fe.exports;const wst=n_(bst);function xfe(t){return new Function("d","return {"+t.map(function(e,i){return JSON.stringify(e)+": d["+i+"]"}).join(",")+"}")}function _st(t,e){var i=xfe(t);return function(r,s){return e(i(r),s,t)}}function xst(t){var e=Object.create(null),i=[];return t.forEach(function(r){for(var s in r)s in e||i.push(e[s]=s)}),i}function eV(t){var e=new RegExp('["'+t+`
]`),i=t.charCodeAt(0);function r(u,c){var d,f,m=s(u,function(g,v){if(d)return d(g,v-1);f=g,d=c?_st(g,c):xfe(g)});return m.columns=f,m}function s(u,c){var d={},f={},m=[],g=u.length,v=0,b=0,_,S;function M(){if(v>=g)return f;if(S)return S=!1,d;var T=v,I;if(u.charCodeAt(T)===34){for(var $=T;$++<g;)if(u.charCodeAt($)===34){if(u.charCodeAt($+1)!==34)break;++$}return v=$+2,I=u.charCodeAt($+1),I===13?(S=!0,u.charCodeAt($+2)===10&&++v):I===10&&(S=!0),u.slice(T+1,$).replace(/""/g,'"')}for(;v<g;){var L=1;if(I=u.charCodeAt(v++),I===10)S=!0;else if(I===13)S=!0,u.charCodeAt(v)===10&&(++v,++L);else if(I!==i)continue;return u.slice(T,v-L)}return u.slice(T)}for(;(_=M())!==f;){for(var x=[];_!==d&&_!==f;)x.push(_),_=M();c&&(x=c(x,b++))==null||m.push(x)}return m}function n(u,c){return c==null&&(c=xst(u)),[c.map(l).join(t)].concat(u.map(function(d){return c.map(function(f){return l(d[f])}).join(t)})).join(`
`)}function o(u){return u.map(a).join(`
`)}function a(u){return u.map(l).join(t)}function l(u){return u==null?"":e.test(u+="")?'"'+u.replace(/\"/g,'""')+'"':u}return{parse:r,parseRows:s,format:n,formatRows:o}}var N$=eV(","),Sst=N$.parse,Est=N$.parseRows,Tst=N$.format,Ist=N$.formatRows,F$=eV("	"),Mst=F$.parse,Ast=F$.parseRows,Cst=F$.format,$st=F$.formatRows;const Ost=Object.freeze(Object.defineProperty({__proto__:null,csvFormat:Tst,csvFormatRows:Ist,csvParse:Sst,csvParseRows:Est,dsvFormat:eV,tsvFormat:Cst,tsvFormatRows:$st,tsvParse:Mst,tsvParseRows:Ast},Symbol.toStringTag,{value:"Module"})),Rst=X7e(Ost);var p_={exports:{}};p_.exports=kst;p_.exports.pair=Pst;p_.exports.format=NF;p_.exports.formatPair=Lst;p_.exports.coordToDMS=Sfe;function kst(t,e){var i=FF(t,e);return i===null?null:i.val}function Lst(t){return NF(t.lat,"lat")+" "+NF(t.lon,"lon")}function NF(t,e){var i=Sfe(t,e);return i.whole+"° "+(i.minutes?i.minutes+"' ":"")+(i.seconds?i.seconds+'" ':"")+i.dir}function Sfe(t,e){var i={lat:["N","S"],lon:["E","W"]}[e]||"",r=i[t>=0?0:1],s=Math.abs(t),n=Math.floor(s),o=s-n,a=o*60,l=Math.floor(a),u=Math.floor((a-l)*60);return{whole:n,minutes:l,seconds:u,dir:r}}function FF(t,e){if(e||(e="NSEW"),typeof t!="string")return null;t=t.toUpperCase();var i=/^[\s\,]*([NSEW])?\s*([\-|\—|\―]?[0-9.]+)[°º˚]?\s*(?:([0-9.]+)['’′‘]\s*)?(?:([0-9.]+)(?:''|"|”|″)\s*)?([NSEW])?/,r=t.match(i);if(!r)return null;var s=r[0],n;if(r[1]&&r[5]?(n=r[1],s=s.slice(0,-1)):n=r[1]||r[5],n&&e.indexOf(n)===-1)return null;var o=r[2]?parseFloat(r[2]):0,a=r[3]?parseFloat(r[3])/60:0,l=r[4]?parseFloat(r[4])/3600:0,u=o<0?-1:1;return(n==="S"||n==="W")&&(u*=-1),{val:(Math.abs(o)+a+l)*u,dim:n,matched:s,remain:t.slice(s.length)}}function Pst(t,e){t=t.trim();var i=FF(t,e);if(!i)return null;t=i.remain.trim();var r=FF(t,e);return!r||r.remain?null:i.dim?Nst(i.val,r.val,i.dim):[i.val,r.val]}function Nst(t,e,i){if(i==="N"||i==="S")return[t,e];if(i==="W"||i==="E")return[e,t]}var Fst=p_.exports,Ub=Rst,rK=Fst,Efe=/(Lat)(itude)?/gi,Tfe=/(L)(on|ng)(gitude)?/i;function Ife(t,e){var i,r,s;for(var n in t)r=n.match(e),r&&(!i||r[0].length/n.length>s)&&(s=r[0].length/n.length,i=n);return i}function Mfe(t){return Ife(t,Efe)}function Afe(t){return Ife(t,Tfe)}function Dst(t){return!!t.match(Efe)}function jst(t){return!!t.match(Tfe)}function sK(t){return typeof t=="object"?Object.keys(t).length:0}function Cfe(t){var e=[",",";","	","|"],i=[];return e.forEach(function(r){var s=Ub.dsvFormat(r).parse(t);if(s.length>=1){for(var n=sK(s[0]),o=0;o<s.length;o++)if(sK(s[o])!==n)return;i.push({delimiter:r,arity:Object.keys(s[0]).length})}}),i.length?i.sort(function(r,s){return s.arity-r.arity})[0].delimiter:null}function Ust(t){return delete t.columns,t}function Vst(t){var e=Cfe(t);return e?Ust(Ub.dsvFormat(e).parse(t)):null}function Bst(t,e,i){i||(i=e,e={}),e.delimiter=e.delimiter||",";var r=e.latfield||"",s=e.lonfield||"",n=e.crs||"",o=[],a={type:"FeatureCollection",features:o};if(n!==""&&(a.crs={type:"name",properties:{name:n}}),e.delimiter==="auto"&&typeof t=="string"&&(e.delimiter=Cfe(t),!e.delimiter)){i({type:"Error",message:"Could not autodetect delimiter"});return}var l=e.numericFields?e.numericFields.split(","):null,u=typeof t=="string"?Ub.dsvFormat(e.delimiter).parse(t,function(S){if(l)for(var M in S)l.includes(M)&&(S[M]=+S[M]);return S}):t;if(!u.length){i(null,a);return}var c=[],d;r||(r=Mfe(u[0])),s||(s=Afe(u[0]));var f=!r||!s;if(f){for(d=0;d<u.length;d++)o.push({type:"Feature",properties:u[d],geometry:null});i(c.length?c:null,a);return}for(d=0;d<u.length;d++)if(u[d][s]!==void 0&&u[d][r]!==void 0){var m=u[d][s],g=u[d][r],v,b,_;_=rK(m,"EW"),_&&(m=_),_=rK(g,"NS"),_&&(g=_),v=parseFloat(m),b=parseFloat(g),isNaN(v)||isNaN(b)?c.push({message:"A row contained an invalid value for latitude or longitude",row:u[d],index:d}):(e.includeLatLon||(delete u[d][s],delete u[d][r]),o.push({type:"Feature",properties:u[d],geometry:{type:"Point",coordinates:[parseFloat(v),parseFloat(b)]}}))}i(c.length?c:null,a)}function zst(t){for(var e=t.features,i={type:"Feature",geometry:{type:"LineString",coordinates:[]}},r=0;r<e.length;r++)i.geometry.coordinates.push(e[r].geometry.coordinates);return i.properties=e.reduce(function(s,n){for(var o in n.properties)s[o]||(s[o]=[]),s[o].push(n.properties[o]);return s},{}),{type:"FeatureCollection",features:[i]}}function Gst(t){for(var e=t.features,i={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},r=0;r<e.length;r++)i.geometry.coordinates[0].push(e[r].geometry.coordinates);return i.properties=e.reduce(function(s,n){for(var o in n.properties)s[o]||(s[o]=[]),s[o].push(n.properties[o]);return s},{}),{type:"FeatureCollection",features:[i]}}var Sk={isLon:jst,isLat:Dst,guessLatHeader:Mfe,guessLonHeader:Afe,csv:Ub.csvParse,tsv:Ub.tsvParse,dsv:Ub,auto:Vst,csv2geojson:Bst,toLine:zst,toPolygon:Gst};function EI(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var $fe={exports:{}};(function(t,e){(function(i){t.exports=i()})(function(){var i=Math.floor,r=Math.log,s=Math.abs,n=Math.pow,o=String.fromCharCode,a=Math.min;return function(){function l(u,c,d){function f(v,b){if(!c[v]){if(!u[v]){var _=typeof EI=="function"&&EI;if(!b&&_)return _(v,!0);if(m)return m(v,!0);var S=new Error("Cannot find module '"+v+"'");throw S.code="MODULE_NOT_FOUND",S}var M=c[v]={exports:{}};u[v][0].call(M.exports,function(x){var T=u[v][1][x];return f(T||x)},M,M.exports,l,u,c,d)}return c[v].exports}for(var m=typeof EI=="function"&&EI,g=0;g<d.length;g++)f(d[g]);return f}return l}()({1:[function(l,u){const c=l("lie"),d=l("./combine"),f=l("buffer").Buffer;u.exports=function(m,g){return new c(function(v,b){const _=d(m,g),S=new XMLHttpRequest;S.open("GET",_,!0),g!=="prj"&&g!=="cpg"&&(S.responseType="arraybuffer"),S.addEventListener("load",function(){return 399<S.status?g==="prj"||g==="cpg"?v(!1):b(new Error(S.status)):v(g!=="prj"&&g!=="cpg"?f.from(S.response):S.response)},!1),S.send()})}},{"./combine":3,buffer:8,lie:12}],2:[function(l,u){(function(c){(function(){const d=l("./binaryajax-browser"),f=l("./combine"),m=l("buffer").Buffer;u.exports=async function(g,v){if(!c.fetch)return d(g,v);const b=f(g,v),_=v==="prj"||v==="cpg";try{const S=await fetch(b);if(399<S.status)throw new Error(S.statusText);if(_)return S.text();const M=await S.arrayBuffer();return m.from(M)}catch(S){if(console.log("ERROR",S,v),_||v==="dbf")return!1;throw S}}}).call(this)}).call(this,typeof Hn>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Hn)},{"./binaryajax-browser":1,"./combine":3,buffer:8}],3:[function(l,u){(function(c){(function(){const d=c.URL;u.exports=(f,m)=>{if(!m)return f;const g=new d(f);return g.pathname=`${g.pathname}.${m}`,g.href}}).call(this)}).call(this,typeof Hn>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Hn)},{}],4:[function(l,u){function c(v){let b=0,_=1;const S=v.length;for(let M,x;_<S;)M=x||v[0],x=v[_],b+=(x[0]-M[0])*(x[1]+M[1]),_++;return 0<b}function d(v,b){return c(b)||!v.length?v.push([b]):v[v.length-1].push(b),v}function f(v){return v?function(b,_){const S=[b.readDoubleLE(_),b.readDoubleLE(_+8)];return v.inverse(S)}:function(b,_){return[b.readDoubleLE(_),b.readDoubleLE(_+8)]}}function m(v,b){return this instanceof m?(this.buffer=v,this.headers=this.parseHeader(),this.headers.length<this.buffer.byteLength&&(this.buffer=this.buffer.slice(0,this.headers.length)),this.shpFuncs(b),void(this.rows=this.getRows())):new m(v,b)}m.prototype.parsePoint=function(v){return{type:"Point",coordinates:this.parseCoord(v,0)}},m.prototype.parseZPoint=function(v){const b=this.parsePoint(v);return b.coordinates.push(v.readDoubleLE(16)),b},m.prototype.parsePointArray=function(v,b,_){const S=[];for(let M=0;M<_;)S.push(this.parseCoord(v,b)),b+=16,M++;return S},m.prototype.parseZPointArray=function(v,b,_,S){for(let M=0;M<_;)S[M].push(v.readDoubleLE(b)),M++,b+=8;return S},m.prototype.parseArrayGroup=function(v,b,_,S,M){const x=[];let T=0,I=0,$,L;for(;T<S;)T++,_+=4,$=I,I=T===S?M:v.readInt32LE(_),L=I-$,L&&(x.push(this.parsePointArray(v,b,L)),b+=L<<4);return x},m.prototype.parseZArrayGroup=function(v,b,_,S){for(let M=0;M<_;)S[M]=this.parseZPointArray(v,b,S[M].length,S[M]),b+=S[M].length<<3,M++;return S},m.prototype.parseMultiPoint=function(v){const b={},_=v.readInt32LE(32,!0);if(!_)return null;const S=this.parseCoord(v,0),M=this.parseCoord(v,16);return b.bbox=[S[0],S[1],M[0],M[1]],_===1?(b.type="Point",b.coordinates=this.parseCoord(v,36)):(b.type="MultiPoint",b.coordinates=this.parsePointArray(v,36,_)),b},m.prototype.parseZMultiPoint=function(v){const b=this.parseMultiPoint(v);if(!b)return null;let _;if(b.type==="Point")return b.coordinates.push(v.readDoubleLE(72)),b;_=b.coordinates.length;const S=52+(_<<4);return b.coordinates=this.parseZPointArray(v,S,_,b.coordinates),b},m.prototype.parsePolyline=function(v){const b={},_=v.readInt32LE(32);if(!_)return null;const S=this.parseCoord(v,0),M=this.parseCoord(v,16);b.bbox=[S[0],S[1],M[0],M[1]];const x=v.readInt32LE(36);let T,I;return _===1?(b.type="LineString",T=44,b.coordinates=this.parsePointArray(v,T,x)):(b.type="MultiLineString",T=40+(_<<2),I=40,b.coordinates=this.parseArrayGroup(v,T,I,_,x)),b},m.prototype.parseZPolyline=function(v){const b=this.parsePolyline(v);if(!b)return null;const _=b.coordinates.length;let S;return b.type==="LineString"?(S=60+(_<<4),b.coordinates=this.parseZPointArray(v,S,_,b.coordinates),b):(S=56+(b.coordinates.reduce(function(x,T){return x+T.length},0)<<4)+(_<<2),b.coordinates=this.parseZArrayGroup(v,S,_,b.coordinates),b)},m.prototype.polyFuncs=function(v){return v&&(v.type==="LineString"?(v.type="Polygon",v.coordinates=[v.coordinates],v):(v.coordinates=v.coordinates.reduce(d,[]),v.coordinates.length===1?(v.type="Polygon",v.coordinates=v.coordinates[0],v):(v.type="MultiPolygon",v)))},m.prototype.parsePolygon=function(v){return this.polyFuncs(this.parsePolyline(v))},m.prototype.parseZPolygon=function(v){return this.polyFuncs(this.parseZPolyline(v))};const g={1:"parsePoint",3:"parsePolyline",5:"parsePolygon",8:"parseMultiPoint",11:"parseZPoint",13:"parseZPolyline",15:"parseZPolygon",18:"parseZMultiPoint"};m.prototype.shpFuncs=function(v){let b=this.headers.shpCode;if(20<b&&(b-=20),!(b in g))throw new Error("I don't know that shp type");this.parseFunc=this[g[b]],this.parseCoord=f(v)},m.prototype.getShpCode=function(){return this.parseHeader().shpCode},m.prototype.parseHeader=function(){const v=this.buffer.slice(0,100);return{length:v.readInt32BE(24)<<1,version:v.readInt32LE(28),shpCode:v.readInt32LE(32),bbox:[v.readDoubleLE(36),v.readDoubleLE(44),v.readDoubleLE(52),v.readDoubleLE(52)]}},m.prototype.getRows=function(){let v=100;const b=this.buffer.byteLength,_=[];for(let S;v<b&&(S=this.getRow(v),!!S);)v+=8,v+=S.len,S.type?_.push(this.parseFunc(S.data)):_.push(null);return _},m.prototype.getRow=function(v){const b=this.buffer.slice(v,v+12),_=b.readInt32BE(4)<<1,S=b.readInt32BE(0);return _===0?{id:S,len:_,type:0}:{id:S,len:_,data:this.buffer.slice(v+12,v+_+8),type:b.readInt32LE(8)}},u.exports=function(v,b){return new m(v,b).rows}},{}],5:[function(l,u){const c=l("jszip");u.exports=async d=>{const f=new c;await f.loadAsync(d);const m=f.file(/.+/),g={};return await Promise.all(m.map(async v=>{let b;b=v.name.slice(-3).toLowerCase()==="shp"||v.name.slice(-3).toLowerCase()==="dbf"?await v.async("nodebuffer"):await v.async("text"),g[v.name]=b})),g}},{jszip:11}],6:[function(l,u,c){function d($){var L=$.length;if(0<L%4)throw new Error("Invalid string. Length must be a multiple of 4");var B=$.indexOf("=");B===-1&&(B=L);var z=B===L?0:4-B%4;return[B,z]}function f($,L,B){return 3*(L+B)/4-B}function m($){var L=d($),B=L[0],z=L[1],H=new M(f($,B,z)),J=0,K=0<z?B-4:B,Q,y;for(y=0;y<K;y+=4)Q=S[$.charCodeAt(y)]<<18|S[$.charCodeAt(y+1)]<<12|S[$.charCodeAt(y+2)]<<6|S[$.charCodeAt(y+3)],H[J++]=255&Q>>16,H[J++]=255&Q>>8,H[J++]=255&Q;return z===2&&(Q=S[$.charCodeAt(y)]<<2|S[$.charCodeAt(y+1)]>>4,H[J++]=255&Q),z===1&&(Q=S[$.charCodeAt(y)]<<10|S[$.charCodeAt(y+1)]<<4|S[$.charCodeAt(y+2)]>>2,H[J++]=255&Q>>8,H[J++]=255&Q),H}function g($){return _[63&$>>18]+_[63&$>>12]+_[63&$>>6]+_[63&$]}function v($,L,B){for(var z=[],H=L,J;H<B;H+=3)J=(16711680&$[H]<<16)+(65280&$[H+1]<<8)+(255&$[H+2]),z.push(g(J));return z.join("")}function b($){for(var L=$.length,B=L%3,z=[],H=16383,J=0,K=L-B,Q;J<K;J+=H)z.push(v($,J,J+H>K?K:J+H));return B===1?(Q=$[L-1],z.push(_[Q>>2]+_[63&Q<<4]+"==")):B===2&&(Q=($[L-2]<<8)+$[L-1],z.push(_[Q>>10]+_[63&Q>>4]+_[63&Q<<2]+"=")),z.join("")}c.byteLength=function($){var L=d($),B=L[0],z=L[1];return 3*(B+z)/4-z},c.toByteArray=m,c.fromByteArray=b;for(var _=[],S=[],M=typeof Uint8Array>"u"?Array:Uint8Array,x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=0,I=x.length;T<I;++T)_[T]=x[T],S[x.charCodeAt(T)]=T;S[45]=62,S[95]=63},{}],7:[function(){},{}],8:[function(l,u,c){(function(){(function(){function d(k){if(2147483647<k)throw new RangeError('The value "'+k+'" is invalid for option "size"');var O=new Uint8Array(k);return O.__proto__=f.prototype,O}function f(k,O,C){if(typeof k=="number"){if(typeof O=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(k)}return m(k,O,C)}function m(k,O,C){if(typeof k=="string")return _(k,O);if(ArrayBuffer.isView(k))return S(k);if(k==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k);if(ye(k,ArrayBuffer)||k&&ye(k.buffer,ArrayBuffer))return M(k,O,C);if(typeof k=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var G=k.valueOf&&k.valueOf();if(G!=null&&G!==k)return f.from(G,O,C);var Z=x(k);if(Z)return Z;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof k[Symbol.toPrimitive]=="function")return f.from(k[Symbol.toPrimitive]("string"),O,C);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k)}function g(k){if(typeof k!="number")throw new TypeError('"size" argument must be of type number');if(0>k)throw new RangeError('The value "'+k+'" is invalid for option "size"')}function v(k,O,C){return g(k),0>=k||O===void 0?d(k):typeof C=="string"?d(k).fill(O,C):d(k).fill(O)}function b(k){return g(k),d(0>k?0:0|T(k))}function _(k,O){if((typeof O!="string"||O==="")&&(O="utf8"),!f.isEncoding(O))throw new TypeError("Unknown encoding: "+O);var C=0|I(k,O),G=d(C),Z=G.write(k,O);return Z!==C&&(G=G.slice(0,Z)),G}function S(k){for(var O=0>k.length?0:0|T(k.length),C=d(O),G=0;G<O;G+=1)C[G]=255&k[G];return C}function M(k,O,C){if(0>O||k.byteLength<O)throw new RangeError('"offset" is outside of buffer bounds');if(k.byteLength<O+(C||0))throw new RangeError('"length" is outside of buffer bounds');var G;return G=O===void 0&&C===void 0?new Uint8Array(k):C===void 0?new Uint8Array(k,O):new Uint8Array(k,O,C),G.__proto__=f.prototype,G}function x(k){if(f.isBuffer(k)){var O=0|T(k.length),C=d(O);return C.length===0||k.copy(C,0,0,O),C}return k.length===void 0?k.type==="Buffer"&&Array.isArray(k.data)?S(k.data):void 0:typeof k.length!="number"||ae(k.length)?d(0):S(k)}function T(k){if(k>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647 .toString(16)+" bytes");return 0|k}function I(k,O){if(f.isBuffer(k))return k.length;if(ArrayBuffer.isView(k)||ye(k,ArrayBuffer))return k.byteLength;if(typeof k!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof k);var C=k.length,G=2<arguments.length&&arguments[2]===!0;if(!G&&C===0)return 0;for(var Z=!1;;)switch(O){case"ascii":case"latin1":case"binary":return C;case"utf8":case"utf-8":return Ae(k).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*C;case"hex":return C>>>1;case"base64":return j(k).length;default:if(Z)return G?-1:Ae(k).length;O=(""+O).toLowerCase(),Z=!0}}function $(k,O,C){var G=!1;if((O===void 0||0>O)&&(O=0),O>this.length||((C===void 0||C>this.length)&&(C=this.length),0>=C)||(C>>>=0,O>>>=0,C<=O))return"";for(k||(k="utf8");;)switch(k){case"hex":return te(this,O,C);case"utf8":case"utf-8":return D(this,O,C);case"ascii":return q(this,O,C);case"latin1":case"binary":return he(this,O,C);case"base64":return N(this,O,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me(this,O,C);default:if(G)throw new TypeError("Unknown encoding: "+k);k=(k+"").toLowerCase(),G=!0}}function L(k,O,C){var G=k[O];k[O]=k[C],k[C]=G}function B(k,O,C,G,Z){if(k.length===0)return-1;if(typeof C=="string"?(G=C,C=0):2147483647<C?C=2147483647:-2147483648>C&&(C=-2147483648),C=+C,ae(C)&&(C=Z?0:k.length-1),0>C&&(C=k.length+C),C>=k.length){if(Z)return-1;C=k.length-1}else if(0>C)if(Z)C=0;else return-1;if(typeof O=="string"&&(O=f.from(O,G)),f.isBuffer(O))return O.length===0?-1:z(k,O,C,G,Z);if(typeof O=="number")return O&=255,typeof Uint8Array.prototype.indexOf=="function"?Z?Uint8Array.prototype.indexOf.call(k,O,C):Uint8Array.prototype.lastIndexOf.call(k,O,C):z(k,[O],C,G,Z);throw new TypeError("val must be string, number or Buffer")}function z(k,O,C,G,Z){function F(Ve,be){return ie===1?Ve[be]:Ve.readUInt16BE(be*ie)}var ie=1,ge=k.length,xe=O.length;if(G!==void 0&&(G=(G+"").toLowerCase(),G==="ucs2"||G==="ucs-2"||G==="utf16le"||G==="utf-16le")){if(2>k.length||2>O.length)return-1;ie=2,ge/=2,xe/=2,C/=2}var fe;if(Z){var ze=-1;for(fe=C;fe<ge;fe++)if(F(k,fe)!==F(O,ze===-1?0:fe-ze))ze!==-1&&(fe-=fe-ze),ze=-1;else if(ze===-1&&(ze=fe),fe-ze+1===xe)return ze*ie}else for(C+xe>ge&&(C=ge-xe),fe=C;0<=fe;fe--){for(var He=!0,et=0;et<xe;et++)if(F(k,fe+et)!==F(O,et)){He=!1;break}if(He)return fe}return-1}function H(k,O,C,G){C=+C||0;var Z=k.length-C;G?(G=+G,G>Z&&(G=Z)):G=Z;var F=O.length;G>F/2&&(G=F/2);for(var ie=0,ge;ie<G;++ie){if(ge=parseInt(O.substr(2*ie,2),16),ae(ge))return ie;k[C+ie]=ge}return ie}function J(k,O,C,G){return se(Ae(O,k.length-C),k,C,G)}function K(k,O,C,G){return se(W(O),k,C,G)}function Q(k,O,C,G){return K(k,O,C,G)}function y(k,O,C,G){return se(j(O),k,C,G)}function A(k,O,C,G){return se(V(O,k.length-C),k,C,G)}function N(k,O,C){return O===0&&C===k.length?U.fromByteArray(k):U.fromByteArray(k.slice(O,C))}function D(k,O,C){C=a(k.length,C);for(var G=[],Z=O;Z<C;){var F=k[Z],ie=null,ge=239<F?4:223<F?3:191<F?2:1;if(Z+ge<=C){var xe,fe,ze,He;ge===1?128>F&&(ie=F):ge===2?(xe=k[Z+1],(192&xe)==128&&(He=(31&F)<<6|63&xe,127<He&&(ie=He))):ge===3?(xe=k[Z+1],fe=k[Z+2],(192&xe)==128&&(192&fe)==128&&(He=(15&F)<<12|(63&xe)<<6|63&fe,2047<He&&(55296>He||57343<He)&&(ie=He))):ge===4&&(xe=k[Z+1],fe=k[Z+2],ze=k[Z+3],(192&xe)==128&&(192&fe)==128&&(192&ze)==128&&(He=(15&F)<<18|(63&xe)<<12|(63&fe)<<6|63&ze,65535<He&&1114112>He&&(ie=He)))}ie===null?(ie=65533,ge=1):65535<ie&&(ie-=65536,G.push(55296|1023&ie>>>10),ie=56320|1023&ie),G.push(ie),Z+=ge}return ne(G)}function ne(k){var O=k.length;if(O<=4096)return o.apply(String,k);for(var C="",G=0;G<O;)C+=o.apply(String,k.slice(G,G+=4096));return C}function q(k,O,C){var G="";C=a(k.length,C);for(var Z=O;Z<C;++Z)G+=o(127&k[Z]);return G}function he(k,O,C){var G="";C=a(k.length,C);for(var Z=O;Z<C;++Z)G+=o(k[Z]);return G}function te(k,O,C){var G=k.length;(!O||0>O)&&(O=0),(!C||0>C||C>G)&&(C=G);for(var Z="",F=O;F<C;++F)Z+=Ie(k[F]);return Z}function me(k,O,C){for(var G=k.slice(O,C),Z="",F=0;F<G.length;F+=2)Z+=o(G[F]+256*G[F+1]);return Z}function ve(k,O,C){if(k%1!=0||0>k)throw new RangeError("offset is not uint");if(k+O>C)throw new RangeError("Trying to access beyond buffer length")}function _e(k,O,C,G,Z,F){if(!f.isBuffer(k))throw new TypeError('"buffer" argument must be a Buffer instance');if(O>Z||O<F)throw new RangeError('"value" argument is out of bounds');if(C+G>k.length)throw new RangeError("Index out of range")}function Se(k,O,C,G){if(C+G>k.length)throw new RangeError("Index out of range");if(0>C)throw new RangeError("Index out of range")}function Oe(k,O,C,G,Z){return O=+O,C>>>=0,Z||Se(k,O,C,4),le.write(k,O,C,G,23,4),C+4}function Te(k,O,C,G,Z){return O=+O,C>>>=0,Z||Se(k,O,C,8),le.write(k,O,C,G,52,8),C+8}function we(k){if(k=k.split("=")[0],k=k.trim().replace(re,""),2>k.length)return"";for(;k.length%4!=0;)k+="=";return k}function Ie(k){return 16>k?"0"+k.toString(16):k.toString(16)}function Ae(k,O){O=O||1/0;for(var C=k.length,G=null,Z=[],F=0,ie;F<C;++F){if(ie=k.charCodeAt(F),55295<ie&&57344>ie){if(!G){if(56319<ie){-1<(O-=3)&&Z.push(239,191,189);continue}else if(F+1===C){-1<(O-=3)&&Z.push(239,191,189);continue}G=ie;continue}if(56320>ie){-1<(O-=3)&&Z.push(239,191,189),G=ie;continue}ie=(G-55296<<10|ie-56320)+65536}else G&&-1<(O-=3)&&Z.push(239,191,189);if(G=null,128>ie){if(0>(O-=1))break;Z.push(ie)}else if(2048>ie){if(0>(O-=2))break;Z.push(192|ie>>6,128|63&ie)}else if(65536>ie){if(0>(O-=3))break;Z.push(224|ie>>12,128|63&ie>>6,128|63&ie)}else if(1114112>ie){if(0>(O-=4))break;Z.push(240|ie>>18,128|63&ie>>12,128|63&ie>>6,128|63&ie)}else throw new Error("Invalid code point")}return Z}function W(k){for(var O=[],C=0;C<k.length;++C)O.push(255&k.charCodeAt(C));return O}function V(k,O){for(var C=[],G=0,Z,F,ie;G<k.length&&!(0>(O-=2));++G)Z=k.charCodeAt(G),F=Z>>8,ie=Z%256,C.push(ie),C.push(F);return C}function j(k){return U.toByteArray(we(k))}function se(k,O,C,G){for(var Z=0;Z<G&&!(Z+C>=O.length||Z>=k.length);++Z)O[Z+C]=k[Z];return Z}function ye(k,O){return k instanceof O||k!=null&&k.constructor!=null&&k.constructor.name!=null&&k.constructor.name===O.name}function ae(k){return k!==k}var U=l("base64-js"),le=l("ieee754");c.Buffer=f,c.SlowBuffer=function(k){return+k!=k&&(k=0),f.alloc(+k)},c.INSPECT_MAX_BYTES=50,c.kMaxLength=2147483647,f.TYPED_ARRAY_SUPPORT=function(){try{var k=new Uint8Array(1);return k.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},k.foo()===42}catch{return!1}}(),f.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){return f.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){return f.isBuffer(this)?this.byteOffset:void 0}}),typeof Symbol<"u"&&Symbol.species!=null&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),f.poolSize=8192,f.from=function(k,O,C){return m(k,O,C)},f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,f.alloc=function(k,O,C){return v(k,O,C)},f.allocUnsafe=function(k){return b(k)},f.allocUnsafeSlow=function(k){return b(k)},f.isBuffer=function(k){return k!=null&&k._isBuffer===!0&&k!==f.prototype},f.compare=function(k,O){if(ye(k,Uint8Array)&&(k=f.from(k,k.offset,k.byteLength)),ye(O,Uint8Array)&&(O=f.from(O,O.offset,O.byteLength)),!f.isBuffer(k)||!f.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(k===O)return 0;for(var C=k.length,G=O.length,Z=0,F=a(C,G);Z<F;++Z)if(k[Z]!==O[Z]){C=k[Z],G=O[Z];break}return C<G?-1:G<C?1:0},f.isEncoding=function(k){switch((k+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(k,O){if(!Array.isArray(k))throw new TypeError('"list" argument must be an Array of Buffers');if(k.length===0)return f.alloc(0);var C;if(O===void 0)for(O=0,C=0;C<k.length;++C)O+=k[C].length;var G=f.allocUnsafe(O),Z=0;for(C=0;C<k.length;++C){var F=k[C];if(ye(F,Uint8Array)&&(F=f.from(F)),!f.isBuffer(F))throw new TypeError('"list" argument must be an Array of Buffers');F.copy(G,Z),Z+=F.length}return G},f.byteLength=I,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var k=this.length;if(k%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var O=0;O<k;O+=2)L(this,O,O+1);return this},f.prototype.swap32=function(){var k=this.length;if(k%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var O=0;O<k;O+=4)L(this,O,O+3),L(this,O+1,O+2);return this},f.prototype.swap64=function(){var k=this.length;if(k%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var O=0;O<k;O+=8)L(this,O,O+7),L(this,O+1,O+6),L(this,O+2,O+5),L(this,O+3,O+4);return this},f.prototype.toString=function(){var k=this.length;return k===0?"":arguments.length===0?D(this,0,k):$.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(k){if(!f.isBuffer(k))throw new TypeError("Argument must be a Buffer");return this===k||f.compare(this,k)===0},f.prototype.inspect=function(){var k="",O=c.INSPECT_MAX_BYTES;return k=this.toString("hex",0,O).replace(/(.{2})/g,"$1 ").trim(),this.length>O&&(k+=" ... "),"<Buffer "+k+">"},f.prototype.compare=function(k,O,C,G,Z){if(ye(k,Uint8Array)&&(k=f.from(k,k.offset,k.byteLength)),!f.isBuffer(k))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof k);if(O===void 0&&(O=0),C===void 0&&(C=k?k.length:0),G===void 0&&(G=0),Z===void 0&&(Z=this.length),0>O||C>k.length||0>G||Z>this.length)throw new RangeError("out of range index");if(G>=Z&&O>=C)return 0;if(G>=Z)return-1;if(O>=C)return 1;if(O>>>=0,C>>>=0,G>>>=0,Z>>>=0,this===k)return 0;for(var F=Z-G,ie=C-O,ge=a(F,ie),xe=this.slice(G,Z),fe=k.slice(O,C),ze=0;ze<ge;++ze)if(xe[ze]!==fe[ze]){F=xe[ze],ie=fe[ze];break}return F<ie?-1:ie<F?1:0},f.prototype.includes=function(k,O,C){return this.indexOf(k,O,C)!==-1},f.prototype.indexOf=function(k,O,C){return B(this,k,O,C,!0)},f.prototype.lastIndexOf=function(k,O,C){return B(this,k,O,C,!1)},f.prototype.write=function(k,O,C,G){if(O===void 0)G="utf8",C=this.length,O=0;else if(C===void 0&&typeof O=="string")G=O,C=this.length,O=0;else if(isFinite(O))O>>>=0,isFinite(C)?(C>>>=0,G===void 0&&(G="utf8")):(G=C,C=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Z=this.length-O;if((C===void 0||C>Z)&&(C=Z),0<k.length&&(0>C||0>O)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");G||(G="utf8");for(var F=!1;;)switch(G){case"hex":return H(this,k,O,C);case"utf8":case"utf-8":return J(this,k,O,C);case"ascii":return K(this,k,O,C);case"latin1":case"binary":return Q(this,k,O,C);case"base64":return y(this,k,O,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,k,O,C);default:if(F)throw new TypeError("Unknown encoding: "+G);G=(""+G).toLowerCase(),F=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},f.prototype.slice=function(k,O){var C=this.length;k=~~k,O=O===void 0?C:~~O,0>k?(k+=C,0>k&&(k=0)):k>C&&(k=C),0>O?(O+=C,0>O&&(O=0)):O>C&&(O=C),O<k&&(O=k);var G=this.subarray(k,O);return G.__proto__=f.prototype,G},f.prototype.readUIntLE=function(k,O,C){k>>>=0,O>>>=0,C||ve(k,O,this.length);for(var G=this[k],Z=1,F=0;++F<O&&(Z*=256);)G+=this[k+F]*Z;return G},f.prototype.readUIntBE=function(k,O,C){k>>>=0,O>>>=0,C||ve(k,O,this.length);for(var G=this[k+--O],Z=1;0<O&&(Z*=256);)G+=this[k+--O]*Z;return G},f.prototype.readUInt8=function(k,O){return k>>>=0,O||ve(k,1,this.length),this[k]},f.prototype.readUInt16LE=function(k,O){return k>>>=0,O||ve(k,2,this.length),this[k]|this[k+1]<<8},f.prototype.readUInt16BE=function(k,O){return k>>>=0,O||ve(k,2,this.length),this[k]<<8|this[k+1]},f.prototype.readUInt32LE=function(k,O){return k>>>=0,O||ve(k,4,this.length),(this[k]|this[k+1]<<8|this[k+2]<<16)+16777216*this[k+3]},f.prototype.readUInt32BE=function(k,O){return k>>>=0,O||ve(k,4,this.length),16777216*this[k]+(this[k+1]<<16|this[k+2]<<8|this[k+3])},f.prototype.readIntLE=function(k,O,C){k>>>=0,O>>>=0,C||ve(k,O,this.length);for(var G=this[k],Z=1,F=0;++F<O&&(Z*=256);)G+=this[k+F]*Z;return Z*=128,G>=Z&&(G-=n(2,8*O)),G},f.prototype.readIntBE=function(k,O,C){k>>>=0,O>>>=0,C||ve(k,O,this.length);for(var G=O,Z=1,F=this[k+--G];0<G&&(Z*=256);)F+=this[k+--G]*Z;return Z*=128,F>=Z&&(F-=n(2,8*O)),F},f.prototype.readInt8=function(k,O){return k>>>=0,O||ve(k,1,this.length),128&this[k]?-1*(255-this[k]+1):this[k]},f.prototype.readInt16LE=function(k,O){k>>>=0,O||ve(k,2,this.length);var C=this[k]|this[k+1]<<8;return 32768&C?4294901760|C:C},f.prototype.readInt16BE=function(k,O){k>>>=0,O||ve(k,2,this.length);var C=this[k+1]|this[k]<<8;return 32768&C?4294901760|C:C},f.prototype.readInt32LE=function(k,O){return k>>>=0,O||ve(k,4,this.length),this[k]|this[k+1]<<8|this[k+2]<<16|this[k+3]<<24},f.prototype.readInt32BE=function(k,O){return k>>>=0,O||ve(k,4,this.length),this[k]<<24|this[k+1]<<16|this[k+2]<<8|this[k+3]},f.prototype.readFloatLE=function(k,O){return k>>>=0,O||ve(k,4,this.length),le.read(this,k,!0,23,4)},f.prototype.readFloatBE=function(k,O){return k>>>=0,O||ve(k,4,this.length),le.read(this,k,!1,23,4)},f.prototype.readDoubleLE=function(k,O){return k>>>=0,O||ve(k,8,this.length),le.read(this,k,!0,52,8)},f.prototype.readDoubleBE=function(k,O){return k>>>=0,O||ve(k,8,this.length),le.read(this,k,!1,52,8)},f.prototype.writeUIntLE=function(k,O,C,G){if(k=+k,O>>>=0,C>>>=0,!G){var Z=n(2,8*C)-1;_e(this,k,O,C,Z,0)}var F=1,ie=0;for(this[O]=255&k;++ie<C&&(F*=256);)this[O+ie]=255&k/F;return O+C},f.prototype.writeUIntBE=function(k,O,C,G){if(k=+k,O>>>=0,C>>>=0,!G){var Z=n(2,8*C)-1;_e(this,k,O,C,Z,0)}var F=C-1,ie=1;for(this[O+F]=255&k;0<=--F&&(ie*=256);)this[O+F]=255&k/ie;return O+C},f.prototype.writeUInt8=function(k,O,C){return k=+k,O>>>=0,C||_e(this,k,O,1,255,0),this[O]=255&k,O+1},f.prototype.writeUInt16LE=function(k,O,C){return k=+k,O>>>=0,C||_e(this,k,O,2,65535,0),this[O]=255&k,this[O+1]=k>>>8,O+2},f.prototype.writeUInt16BE=function(k,O,C){return k=+k,O>>>=0,C||_e(this,k,O,2,65535,0),this[O]=k>>>8,this[O+1]=255&k,O+2},f.prototype.writeUInt32LE=function(k,O,C){return k=+k,O>>>=0,C||_e(this,k,O,4,4294967295,0),this[O+3]=k>>>24,this[O+2]=k>>>16,this[O+1]=k>>>8,this[O]=255&k,O+4},f.prototype.writeUInt32BE=function(k,O,C){return k=+k,O>>>=0,C||_e(this,k,O,4,4294967295,0),this[O]=k>>>24,this[O+1]=k>>>16,this[O+2]=k>>>8,this[O+3]=255&k,O+4},f.prototype.writeIntLE=function(k,O,C,G){if(k=+k,O>>>=0,!G){var Z=n(2,8*C-1);_e(this,k,O,C,Z-1,-Z)}var F=0,ie=1,ge=0;for(this[O]=255&k;++F<C&&(ie*=256);)0>k&&ge===0&&this[O+F-1]!==0&&(ge=1),this[O+F]=255&(k/ie>>0)-ge;return O+C},f.prototype.writeIntBE=function(k,O,C,G){if(k=+k,O>>>=0,!G){var Z=n(2,8*C-1);_e(this,k,O,C,Z-1,-Z)}var F=C-1,ie=1,ge=0;for(this[O+F]=255&k;0<=--F&&(ie*=256);)0>k&&ge===0&&this[O+F+1]!==0&&(ge=1),this[O+F]=255&(k/ie>>0)-ge;return O+C},f.prototype.writeInt8=function(k,O,C){return k=+k,O>>>=0,C||_e(this,k,O,1,127,-128),0>k&&(k=255+k+1),this[O]=255&k,O+1},f.prototype.writeInt16LE=function(k,O,C){return k=+k,O>>>=0,C||_e(this,k,O,2,32767,-32768),this[O]=255&k,this[O+1]=k>>>8,O+2},f.prototype.writeInt16BE=function(k,O,C){return k=+k,O>>>=0,C||_e(this,k,O,2,32767,-32768),this[O]=k>>>8,this[O+1]=255&k,O+2},f.prototype.writeInt32LE=function(k,O,C){return k=+k,O>>>=0,C||_e(this,k,O,4,2147483647,-2147483648),this[O]=255&k,this[O+1]=k>>>8,this[O+2]=k>>>16,this[O+3]=k>>>24,O+4},f.prototype.writeInt32BE=function(k,O,C){return k=+k,O>>>=0,C||_e(this,k,O,4,2147483647,-2147483648),0>k&&(k=4294967295+k+1),this[O]=k>>>24,this[O+1]=k>>>16,this[O+2]=k>>>8,this[O+3]=255&k,O+4},f.prototype.writeFloatLE=function(k,O,C){return Oe(this,k,O,!0,C)},f.prototype.writeFloatBE=function(k,O,C){return Oe(this,k,O,!1,C)},f.prototype.writeDoubleLE=function(k,O,C){return Te(this,k,O,!0,C)},f.prototype.writeDoubleBE=function(k,O,C){return Te(this,k,O,!1,C)},f.prototype.copy=function(k,O,C,G){if(!f.isBuffer(k))throw new TypeError("argument should be a Buffer");if(C||(C=0),G||G===0||(G=this.length),O>=k.length&&(O=k.length),O||(O=0),0<G&&G<C&&(G=C),G===C||k.length===0||this.length===0)return 0;if(0>O)throw new RangeError("targetStart out of bounds");if(0>C||C>=this.length)throw new RangeError("Index out of range");if(0>G)throw new RangeError("sourceEnd out of bounds");G>this.length&&(G=this.length),k.length-O<G-C&&(G=k.length-O+C);var Z=G-C;if(this===k&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(O,C,G);else if(this===k&&C<O&&O<G)for(var F=Z-1;0<=F;--F)k[F+O]=this[F+C];else Uint8Array.prototype.set.call(k,this.subarray(C,G),O);return Z},f.prototype.fill=function(k,O,C,G){if(typeof k=="string"){if(typeof O=="string"?(G=O,O=0,C=this.length):typeof C=="string"&&(G=C,C=this.length),G!==void 0&&typeof G!="string")throw new TypeError("encoding must be a string");if(typeof G=="string"&&!f.isEncoding(G))throw new TypeError("Unknown encoding: "+G);if(k.length===1){var Z=k.charCodeAt(0);(G==="utf8"&&128>Z||G==="latin1")&&(k=Z)}}else typeof k=="number"&&(k&=255);if(0>O||this.length<O||this.length<C)throw new RangeError("Out of range index");if(C<=O)return this;O>>>=0,C=C===void 0?this.length:C>>>0,k||(k=0);var F;if(typeof k=="number")for(F=O;F<C;++F)this[F]=k;else{var ie=f.isBuffer(k)?k:f.from(k,G),ge=ie.length;if(ge===0)throw new TypeError('The value "'+k+'" is invalid for argument "value"');for(F=0;F<C-O;++F)this[F+O]=ie[F%ge]}return this};var re=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,l("buffer").Buffer)},{"base64-js":6,buffer:8,ieee754:9}],9:[function(l,u,c){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */c.read=function(d,f,m,g,v){var b=8*v-g-1,_=(1<<b)-1,S=_>>1,M=-7,x=m?v-1:0,T=m?-1:1,I=d[f+x],$,L;for(x+=T,$=I&(1<<-M)-1,I>>=-M,M+=b;0<M;$=256*$+d[f+x],x+=T,M-=8);for(L=$&(1<<-M)-1,$>>=-M,M+=g;0<M;L=256*L+d[f+x],x+=T,M-=8);if($===0)$=1-S;else{if($===_)return L?NaN:(I?-1:1)*(1/0);L+=n(2,g),$-=S}return(I?-1:1)*L*n(2,$-g)},c.write=function(d,f,m,g,v,b){var _=Math.LN2,S=8*b-v-1,M=(1<<S)-1,x=M>>1,T=v===23?n(2,-24)-n(2,-77):0,I=g?0:b-1,$=g?1:-1,L=0>f||f===0&&0>1/f?1:0,B,z,H;for(f=s(f),isNaN(f)||f===1/0?(z=isNaN(f)?1:0,B=M):(B=i(r(f)/_),1>f*(H=n(2,-B))&&(B--,H*=2),f+=1<=B+x?T/H:T*n(2,1-x),2<=f*H&&(B++,H/=2),B+x>=M?(z=0,B=M):1<=B+x?(z=(f*H-1)*n(2,v),B+=x):(z=f*n(2,x-1)*n(2,v),B=0));8<=v;d[m+I]=255&z,I+=$,z/=256,v-=8);for(B=B<<v|z,S+=v;0<S;d[m+I]=255&B,I+=$,B/=256,S-=8);d[m+I-$]|=128*L}},{}],10:[function(l,u){(function(c){(function(){function d(){x=!0;for(var T=M.length,I,$;T;){for($=M,M=[],I=-1;++I<T;)$[I]();T=M.length}x=!1}function f(T){M.push(T)!==1||x||g()}var m=c.MutationObserver||c.WebKitMutationObserver,g;if(m){var v=0,b=new m(d),_=c.document.createTextNode("");b.observe(_,{characterData:!0}),g=function(){_.data=v=++v%2}}else if(!c.setImmediate&&typeof c.MessageChannel<"u"){var S=new c.MessageChannel;S.port1.onmessage=d,g=function(){S.port2.postMessage(0)}}else g="document"in c&&"onreadystatechange"in c.document.createElement("script")?function(){var T=c.document.createElement("script");T.onreadystatechange=function(){d(),T.onreadystatechange=null,T.parentNode.removeChild(T),T=null},c.document.documentElement.appendChild(T)}:function(){setTimeout(d,0)};var M=[],x;u.exports=f}).call(this)}).call(this,typeof Hn>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Hn)},{}],11:[function(l,u,c){(function(d,f,m){(function(){/*!

	JSZip v3.6.0 - A JavaScript class for generating and reading zip files
	<http://stuartk.com/jszip>

	(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
	Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.

	JSZip uses the library pako released under the MIT license :
	https://github.com/nodeca/pako/blob/master/LICENSE
	*/(function(g){typeof c=="object"&&typeof u<"u"?u.exports=g():(typeof window>"u"?typeof d>"u"?typeof self>"u"?this:self:d:window).JSZip=g()})(function(){return function g(v,b,_){function S(T,I){if(!b[T]){if(!v[T]){var $=typeof l=="function"&&l;if(!I&&$)return $(T,!0);if(M)return M(T,!0);var L=new Error("Cannot find module '"+T+"'");throw L.code="MODULE_NOT_FOUND",L}var B=b[T]={exports:{}};v[T][0].call(B.exports,function(z){var H=v[T][1][z];return S(H||z)},B,B.exports,g,v,b,_)}return b[T].exports}for(var M=typeof l=="function"&&l,x=0;x<_.length;x++)S(_[x]);return S}({1:[function(g,v,b){(function(_){(function(S){typeof b=="object"&&v!==void 0?v.exports=S():(typeof window>"u"?_===void 0?typeof self>"u"?this:self:_:window).JSZip=S()})(function(){return function S(M,x,T){function I(B,z){if(!x[B]){if(!M[B]){var H=typeof g=="function"&&g;if(!z&&H)return H(B,!0);if($)return $(B,!0);var J=new Error("Cannot find module '"+B+"'");throw J.code="MODULE_NOT_FOUND",J}var K=x[B]={exports:{}};M[B][0].call(K.exports,function(Q){return I(M[B][1][Q]||Q)},K,K.exports,S,M,x,T)}return x[B].exports}for(var $=typeof g=="function"&&g,L=0;L<T.length;L++)I(T[L]);return I}({1:[function(S,M,x){(function(T){(function(I){typeof x=="object"&&M!==void 0?M.exports=I():(typeof window>"u"?T===void 0?typeof self>"u"?this:self:T:window).JSZip=I()})(function(){return function I($,L,B){function z(K,Q){if(!L[K]){if(!$[K]){var y=typeof S=="function"&&S;if(!Q&&y)return y(K,!0);if(H)return H(K,!0);var A=new Error("Cannot find module '"+K+"'");throw A.code="MODULE_NOT_FOUND",A}var N=L[K]={exports:{}};$[K][0].call(N.exports,function(D){return z($[K][1][D]||D)},N,N.exports,I,$,L,B)}return L[K].exports}for(var H=typeof S=="function"&&S,J=0;J<B.length;J++)z(B[J]);return z}({1:[function(I,$,L){(function(B){(function(z){typeof L=="object"&&$!==void 0?$.exports=z():(typeof window>"u"?B===void 0?typeof self>"u"?this:self:B:window).JSZip=z()})(function(){return function z(H,J,K){function Q(N,D){if(!J[N]){if(!H[N]){var ne=typeof I=="function"&&I;if(!D&&ne)return ne(N,!0);if(y)return y(N,!0);var q=new Error("Cannot find module '"+N+"'");throw q.code="MODULE_NOT_FOUND",q}var he=J[N]={exports:{}};H[N][0].call(he.exports,function(te){return Q(H[N][1][te]||te)},he,he.exports,z,H,J,K)}return J[N].exports}for(var y=typeof I=="function"&&I,A=0;A<K.length;A++)Q(K[A]);return Q}({1:[function(z,H,J){(function(K){(function(Q){typeof J=="object"&&H!==void 0?H.exports=Q():(typeof window>"u"?K===void 0?typeof self>"u"?this:self:K:window).JSZip=Q()})(function(){return function Q(y,A,N){function D(he,te){if(!A[he]){if(!y[he]){var me=typeof z=="function"&&z;if(!te&&me)return me(he,!0);if(ne)return ne(he,!0);var ve=new Error("Cannot find module '"+he+"'");throw ve.code="MODULE_NOT_FOUND",ve}var _e=A[he]={exports:{}};y[he][0].call(_e.exports,function(Se){return D(y[he][1][Se]||Se)},_e,_e.exports,Q,y,A,N)}return A[he].exports}for(var ne=typeof z=="function"&&z,q=0;q<N.length;q++)D(N[q]);return D}({1:[function(Q,y,A){(function(N){(function(D){typeof A=="object"&&y!==void 0?y.exports=D():(typeof window>"u"?N===void 0?typeof self>"u"?this:self:N:window).JSZip=D()})(function(){return function D(ne,q,he){function te(_e,Se){if(!q[_e]){if(!ne[_e]){var Oe=typeof Q=="function"&&Q;if(!Se&&Oe)return Oe(_e,!0);if(me)return me(_e,!0);var Te=new Error("Cannot find module '"+_e+"'");throw Te.code="MODULE_NOT_FOUND",Te}var we=q[_e]={exports:{}};ne[_e][0].call(we.exports,function(Ie){return te(ne[_e][1][Ie]||Ie)},we,we.exports,D,ne,q,he)}return q[_e].exports}for(var me=typeof Q=="function"&&Q,ve=0;ve<he.length;ve++)te(he[ve]);return te}({1:[function(D,ne,q){var he=D("./utils"),te=D("./support");q.encode=function(me){for(var ve=[],_e=0,Se=me.length,Oe=Se,Te=he.getTypeOf(me)!=="string",we,Ie,Ae,W,V,j,se;_e<me.length;)Oe=Se-_e,Ae=Te?(we=me[_e++],Ie=_e<Se?me[_e++]:0,_e<Se?me[_e++]:0):(we=me.charCodeAt(_e++),Ie=_e<Se?me.charCodeAt(_e++):0,_e<Se?me.charCodeAt(_e++):0),W=we>>2,V=(3&we)<<4|Ie>>4,j=1<Oe?(15&Ie)<<2|Ae>>6:64,se=2<Oe?63&Ae:64,ve.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(W)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(V)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(j)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(se));return ve.join("")},q.decode=function(me){var ve=0,_e=0,Se,Oe,Te,we,Ie,Ae;if(me.substr(0,5)==="data:")throw new Error("Invalid base64 input, it looks like a data url.");var W=3*(me=me.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4,V;if(me.charAt(me.length-1)==="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(64)&&W--,me.charAt(me.length-2)==="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(64)&&W--,W%1!=0)throw new Error("Invalid base64 input, bad content length.");for(V=te.uint8array?new Uint8Array(0|W):Array(0|W);ve<me.length;)Se="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(me.charAt(ve++))<<2|(we="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(me.charAt(ve++)))>>4,Oe=(15&we)<<4|(Ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(me.charAt(ve++)))>>2,Te=(3&Ie)<<6|(Ae="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(me.charAt(ve++))),V[_e++]=Se,Ie!==64&&(V[_e++]=Oe),Ae!==64&&(V[_e++]=Te);return V}},{"./support":30,"./utils":32}],2:[function(D,ne){function q(_e,Se,Oe,Te,we){this.compressedSize=_e,this.uncompressedSize=Se,this.crc32=Oe,this.compression=Te,this.compressedContent=we}var he=D("./external"),te=D("./stream/DataWorker"),me=D("./stream/Crc32Probe"),ve=D("./stream/DataLengthProbe");q.prototype={getContentWorker:function(){var _e=new te(he.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new ve("data_length")),Se=this;return _e.on("end",function(){if(this.streamInfo.data_length!==Se.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),_e},getCompressedWorker:function(){return new te(he.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},q.createWorkerFrom=function(_e,Se,Oe){return _e.pipe(new me).pipe(new ve("uncompressedSize")).pipe(Se.compressWorker(Oe)).pipe(new ve("compressedSize")).withStreamInfo("compression",Se)},ne.exports=q},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(D,ne,q){var he=D("./stream/GenericWorker");q.STORE={magic:"\0\0",compressWorker:function(){return new he("STORE compression")},uncompressWorker:function(){return new he("STORE decompression")}},q.DEFLATE=D("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(D,ne){var q=D("./utils"),he=function(){for(var te=[],me=0,ve;256>me;me++){ve=me;for(var _e=0;8>_e;_e++)ve=1&ve?3988292384^ve>>>1:ve>>>1;te[me]=ve}return te}();ne.exports=function(te,me){return te!==void 0&&te.length?q.getTypeOf(te)==="string"?function(ve,_e,Se){ve^=-1;for(var Oe=0;Oe<0+Se;Oe++)ve=ve>>>8^he[255&(ve^_e.charCodeAt(Oe))];return-1^ve}(0|me,te,te.length):function(ve,_e,Se){ve^=-1;for(var Oe=0;Oe<0+Se;Oe++)ve=ve>>>8^he[255&(ve^_e[Oe])];return-1^ve}(0|me,te,te.length):0}},{"./utils":32}],5:[function(D,ne,q){q.base64=!1,q.binary=!1,q.dir=!1,q.createFolders=!0,q.date=null,q.compression=null,q.compressionOptions=null,q.comment=null,q.unixPermissions=null,q.dosPermissions=null},{}],6:[function(D,ne){var q;q=typeof Promise>"u"?D("lie"):Promise,ne.exports={Promise:q}},{lie:37}],7:[function(D,ne,q){function he(Oe,Te){_e.call(this,"FlateWorker/"+Oe),this._pako=null,this._pakoAction=Oe,this._pakoOptions=Te,this.meta={}}var te=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",me=D("pako"),ve=D("./utils"),_e=D("./stream/GenericWorker"),Se=te?"uint8array":"array";q.magic="\b\0",ve.inherits(he,_e),he.prototype.processChunk=function(Oe){this.meta=Oe.meta,this._pako===null&&this._createPako(),this._pako.push(ve.transformTo(Se,Oe.data),!1)},he.prototype.flush=function(){_e.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},he.prototype.cleanUp=function(){_e.prototype.cleanUp.call(this),this._pako=null},he.prototype._createPako=function(){this._pako=new me[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var Oe=this;this._pako.onData=function(Te){Oe.push({data:Te,meta:Oe.meta})}},q.compressWorker=function(Oe){return new he("Deflate",Oe)},q.uncompressWorker=function(){return new he("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(D,ne){function q(Te,we){var Ie="",Ae;for(Ae=0;Ae<we;Ae++)Ie+=o(255&Te),Te>>>=8;return Ie}function he(Te,we,Ie,Ae,W,V){var j=Te.file,se=Te.compression,ye=V!==_e.utf8encode,ae=me.transformTo("string",V(j.name)),U=me.transformTo("string",_e.utf8encode(j.name)),le=j.comment,re=me.transformTo("string",V(le)),k=me.transformTo("string",_e.utf8encode(le)),O=U.length!==j.name.length,C=k.length!==le.length,G="",Z="",F="",ie=j.dir,ge=j.date,xe={crc32:0,compressedSize:0,uncompressedSize:0},fe,ze;we&&!Ie||(xe.crc32=Te.crc32,xe.compressedSize=Te.compressedSize,xe.uncompressedSize=Te.uncompressedSize);var He=0;we&&(He|=8),!ye&&(O||C)&&(He|=2048);var et=0,Ve=0,be;ie&&(et|=16),W==="UNIX"?(Ve=798,et|=((be=j.unixPermissions)||(be=ie?16893:33204),(65535&be)<<16)):(Ve=20,et|=63&(j.dosPermissions||0)),fe=ge.getUTCHours(),fe<<=6,fe|=ge.getUTCMinutes(),fe<<=5,fe|=ge.getUTCSeconds()/2,ze=ge.getUTCFullYear()-1980,ze<<=4,ze|=ge.getUTCMonth()+1,ze<<=5,ze|=ge.getUTCDate(),O&&(G+="up"+q((Z=q(1,1)+q(Se(ae),4)+U).length,2)+Z),C&&(G+="uc"+q((F=q(1,1)+q(Se(re),4)+k).length,2)+F);var ke="";return ke+=`
\0`,ke+=q(He,2),ke+=se.magic,ke+=q(fe,2),ke+=q(ze,2),ke+=q(xe.crc32,4),ke+=q(xe.compressedSize,4),ke+=q(xe.uncompressedSize,4),ke+=q(ae.length,2),ke+=q(G.length,2),{fileRecord:Oe.LOCAL_FILE_HEADER+ke+ae+G,dirRecord:Oe.CENTRAL_FILE_HEADER+q(Ve,2)+ke+q(re.length,2)+"\0\0\0\0"+q(et,4)+q(Ae,4)+ae+G+re}}function te(Te,we,Ie,Ae){ve.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=we,this.zipPlatform=Ie,this.encodeFileName=Ae,this.streamFiles=Te,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}var me=D("../utils"),ve=D("../stream/GenericWorker"),_e=D("../utf8"),Se=D("../crc32"),Oe=D("../signature");me.inherits(te,ve),te.prototype.push=function(Te){var we=Te.meta.percent||0,Ie=this.entriesCount,Ae=this._sources.length;this.accumulate?this.contentBuffer.push(Te):(this.bytesWritten+=Te.data.length,ve.prototype.push.call(this,{data:Te.data,meta:{currentFile:this.currentFile,percent:Ie?(we+100*(Ie-Ae-1))/Ie:100}}))},te.prototype.openedSource=function(Te){this.currentSourceOffset=this.bytesWritten,this.currentFile=Te.file.name;var we=this.streamFiles&&!Te.file.dir;if(we){var Ie=he(Te,we,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:Ie.fileRecord,meta:{percent:0}})}else this.accumulate=!0},te.prototype.closedSource=function(Te){this.accumulate=!1;var we=this.streamFiles&&!Te.file.dir,Ie=he(Te,we,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName),Ae;if(this.dirRecords.push(Ie.dirRecord),we)this.push({data:(Ae=Te,Oe.DATA_DESCRIPTOR+q(Ae.crc32,4)+q(Ae.compressedSize,4)+q(Ae.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:Ie.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},te.prototype.flush=function(){for(var Te=this.bytesWritten,we=0;we<this.dirRecords.length;we++)this.push({data:this.dirRecords[we],meta:{percent:100}});var Ie=this.bytesWritten-Te,Ae=(W=this.dirRecords.length,V=Ie,j=Te,se=this.zipComment,ye=this.encodeFileName,ae=me.transformTo("string",ye(se)),Oe.CENTRAL_DIRECTORY_END+"\0\0\0\0"+q(W,2)+q(W,2)+q(V,4)+q(j,4)+q(ae.length,2)+ae),W,V,j,se,ye,ae;this.push({data:Ae,meta:{percent:100}})},te.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},te.prototype.registerPrevious=function(Te){this._sources.push(Te);var we=this;return Te.on("data",function(Ie){we.processChunk(Ie)}),Te.on("end",function(){we.closedSource(we.previous.streamInfo),we._sources.length?we.prepareNextSource():we.end()}),Te.on("error",function(Ie){we.error(Ie)}),this},te.prototype.resume=function(){return!!ve.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},te.prototype.error=function(Te){var we=this._sources;if(!ve.prototype.error.call(this,Te))return!1;for(var Ie=0;Ie<we.length;Ie++)try{we[Ie].error(Te)}catch{}return!0},te.prototype.lock=function(){ve.prototype.lock.call(this);for(var Te=this._sources,we=0;we<Te.length;we++)Te[we].lock()},ne.exports=te},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(D,ne,q){var he=D("../compressions"),te=D("./ZipFileWorker");q.generateWorker=function(me,ve,_e){var Se=new te(ve.streamFiles,_e,ve.platform,ve.encodeFileName),Oe=0;try{me.forEach(function(Te,we){Oe++;var Ie=function(j,se){var ye=j||se,ae=he[ye];if(!ae)throw new Error(ye+" is not a valid compression method !");return ae}(we.options.compression,ve.compression),Ae=we.options.compressionOptions||ve.compressionOptions||{},W=we.dir,V=we.date;we._compressWorker(Ie,Ae).withStreamInfo("file",{name:Te,dir:W,date:V,comment:we.comment||"",unixPermissions:we.unixPermissions,dosPermissions:we.dosPermissions}).pipe(Se)}),Se.entriesCount=Oe}catch(Te){Se.error(Te)}return Se}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(D,ne){function q(){if(!(this instanceof q))return new q;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var he=new q;for(var te in this)typeof this[te]!="function"&&(he[te]=this[te]);return he}}(q.prototype=D("./object")).loadAsync=D("./load"),q.support=D("./support"),q.defaults=D("./defaults"),q.version="3.5.0",q.loadAsync=function(he,te){return new q().loadAsync(he,te)},q.external=D("./external"),ne.exports=q},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(D,ne){function q(Oe){return new te.Promise(function(Te,we){var Ie=Oe.decompressed.getContentWorker().pipe(new _e);Ie.on("error",function(Ae){we(Ae)}).on("end",function(){Ie.streamInfo.crc32===Oe.decompressed.crc32?Te():we(new Error("Corrupted zip : CRC32 mismatch"))}).resume()})}var he=D("./utils"),te=D("./external"),me=D("./utf8"),ve=D("./zipEntries"),_e=D("./stream/Crc32Probe"),Se=D("./nodejsUtils");ne.exports=function(Oe,Te){var we=this;return Te=he.extend(Te||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:me.utf8decode}),Se.isNode&&Se.isStream(Oe)?te.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):he.prepareContent("the loaded zip file",Oe,!0,Te.optimizedBinaryString,Te.base64).then(function(Ie){var Ae=new ve(Te);return Ae.load(Ie),Ae}).then(function(Ie){var Ae=[te.Promise.resolve(Ie)],W=Ie.files;if(Te.checkCRC32)for(var V=0;V<W.length;V++)Ae.push(q(W[V]));return te.Promise.all(Ae)}).then(function(Ie){for(var Ae=Ie.shift(),W=Ae.files,V=0,j;V<W.length;V++)j=W[V],we.file(j.fileNameStr,j.decompressed,{binary:!0,optimizedBinaryString:!0,date:j.date,dir:j.dir,comment:j.fileCommentStr.length?j.fileCommentStr:null,unixPermissions:j.unixPermissions,dosPermissions:j.dosPermissions,createFolders:Te.createFolders});return Ae.zipComment.length&&(we.comment=Ae.zipComment),we})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(D,ne){function q(me,ve){te.call(this,"Nodejs stream input adapter for "+me),this._upstreamEnded=!1,this._bindStream(ve)}var he=D("../utils"),te=D("../stream/GenericWorker");he.inherits(q,te),q.prototype._bindStream=function(me){var ve=this;(this._stream=me).pause(),me.on("data",function(_e){ve.push({data:_e,meta:{percent:0}})}).on("error",function(_e){ve.isPaused?this.generatedError=_e:ve.error(_e)}).on("end",function(){ve.isPaused?ve._upstreamEnded=!0:ve.end()})},q.prototype.pause=function(){return!!te.prototype.pause.call(this)&&(this._stream.pause(),!0)},q.prototype.resume=function(){return!!te.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},ne.exports=q},{"../stream/GenericWorker":28,"../utils":32}],13:[function(D,ne){function q(te,me,ve){he.call(this,me),this._helper=te;var _e=this;te.on("data",function(Se,Oe){_e.push(Se)||_e._helper.pause(),ve&&ve(Oe)}).on("error",function(Se){_e.emit("error",Se)}).on("end",function(){_e.push(null)})}var he=D("readable-stream").Readable;D("../utils").inherits(q,he),q.prototype._read=function(){this._helper.resume()},ne.exports=q},{"../utils":32,"readable-stream":16}],14:[function(D,ne){ne.exports={isNode:typeof f<"u",newBufferFrom:function(q,he){if(f.from&&f.from!==Uint8Array.from)return f.from(q,he);if(typeof q=="number")throw new Error('The "data" argument must not be a number');return new f(q,he)},allocBuffer:function(q){if(f.alloc)return f.alloc(q);var he=new f(q);return he.fill(0),he},isBuffer:function(q){return f.isBuffer(q)},isStream:function(q){return q&&typeof q.on=="function"&&typeof q.pause=="function"&&typeof q.resume=="function"}}},{}],15:[function(D,ne){function q(j,se,ye){var ae=ve.getTypeOf(se),U=ve.extend(ye||{},Oe),le;U.date=U.date||new Date,U.compression!==null&&(U.compression=U.compression.toUpperCase()),typeof U.unixPermissions=="string"&&(U.unixPermissions=parseInt(U.unixPermissions,8)),U.unixPermissions&&16384&U.unixPermissions&&(U.dir=!0),U.dosPermissions&&16&U.dosPermissions&&(U.dir=!0),U.dir&&(j=he(j)),U.createFolders&&(le=function(C){C.slice(-1)==="/"&&(C=C.substring(0,C.length-1));var G=C.lastIndexOf("/");return 0<G?C.substring(0,G):""}(j))&&V.call(this,le,!0);var re=ae==="string"&&U.binary===!1&&U.base64===!1,k;ye&&ye.binary!==void 0||(U.binary=!re),(se instanceof Te&&se.uncompressedSize===0||U.dir||!se||se.length===0)&&(U.base64=!1,U.binary=!0,se="",U.compression="STORE",ae="string"),k=se instanceof Te||se instanceof _e?se:Ae.isNode&&Ae.isStream(se)?new W(j,se):ve.prepareContent(j,se,U.binary,U.optimizedBinaryString,U.base64);var O=new we(j,k,U);this.files[j]=O}function he(j){return j.slice(-1)!=="/"&&(j+="/"),j}function te(j){return Object.prototype.toString.call(j)==="[object RegExp]"}var me=D("./utf8"),ve=D("./utils"),_e=D("./stream/GenericWorker"),Se=D("./stream/StreamHelper"),Oe=D("./defaults"),Te=D("./compressedObject"),we=D("./zipObject"),Ie=D("./generate"),Ae=D("./nodejsUtils"),W=D("./nodejs/NodejsStreamInputAdapter"),V=function(j,se){return se=se===void 0?Oe.createFolders:se,j=he(j),this.files[j]||q.call(this,j,null,{dir:!0,createFolders:se}),this.files[j]};ne.exports={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(j){var se,ye,ae;for(se in this.files)this.files.hasOwnProperty(se)&&(ae=this.files[se],(ye=se.slice(this.root.length,se.length))&&se.slice(0,this.root.length)===this.root&&j(ye,ae))},filter:function(j){var se=[];return this.forEach(function(ye,ae){j(ye,ae)&&se.push(ae)}),se},file:function(j,se,ye){if(arguments.length!==1)return j=this.root+j,q.call(this,j,se,ye),this;if(te(j)){var ae=j;return this.filter(function(le,re){return!re.dir&&ae.test(le)})}var U=this.files[this.root+j];return U&&!U.dir?U:null},folder:function(j){if(!j)return this;if(te(j))return this.filter(function(U,le){return le.dir&&j.test(U)});var se=this.root+j,ye=V.call(this,se),ae=this.clone();return ae.root=ye.name,ae},remove:function(j){j=this.root+j;var se=this.files[j];if(se||(j.slice(-1)!=="/"&&(j+="/"),se=this.files[j]),se&&!se.dir)delete this.files[j];else for(var ye=this.filter(function(U,le){return le.name.slice(0,j.length)===j}),ae=0;ae<ye.length;ae++)delete this.files[ye[ae].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(j){var se={},ye;try{if((se=ve.extend(j||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:me.utf8encode})).type=se.type.toLowerCase(),se.compression=se.compression.toUpperCase(),se.type==="binarystring"&&(se.type="string"),!se.type)throw new Error("No output type specified.");ve.checkSupport(se.type),se.platform!=="darwin"&&se.platform!=="freebsd"&&se.platform!=="linux"&&se.platform!=="sunos"||(se.platform="UNIX"),se.platform==="win32"&&(se.platform="DOS");var ae=se.comment||this.comment||"";ye=Ie.generateWorker(this,se,ae)}catch(U){(ye=new _e("error")).error(U)}return new Se(ye,se.type||"string",se.mimeType)},generateAsync:function(j,se){return this.generateInternalStream(j).accumulate(se)},generateNodeStream:function(j,se){return(j=j||{}).type||(j.type="nodebuffer"),this.generateInternalStream(j).toNodejsStream(se)}}},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(D,ne){ne.exports=D("stream")},{stream:void 0}],17:[function(D,ne){function q(te){he.call(this,te);for(var me=0;me<this.data.length;me++)te[me]=255&te[me]}var he=D("./DataReader");D("../utils").inherits(q,he),q.prototype.byteAt=function(te){return this.data[this.zero+te]},q.prototype.lastIndexOfSignature=function(te){for(var me=te.charCodeAt(0),ve=te.charCodeAt(1),_e=te.charCodeAt(2),Se=te.charCodeAt(3),Oe=this.length-4;0<=Oe;--Oe)if(this.data[Oe]===me&&this.data[Oe+1]===ve&&this.data[Oe+2]===_e&&this.data[Oe+3]===Se)return Oe-this.zero;return-1},q.prototype.readAndCheckSignature=function(te){var me=te.charCodeAt(0),ve=te.charCodeAt(1),_e=te.charCodeAt(2),Se=te.charCodeAt(3),Oe=this.readData(4);return me===Oe[0]&&ve===Oe[1]&&_e===Oe[2]&&Se===Oe[3]},q.prototype.readData=function(te){if(this.checkOffset(te),te===0)return[];var me=this.data.slice(this.zero+this.index,this.zero+this.index+te);return this.index+=te,me},ne.exports=q},{"../utils":32,"./DataReader":18}],18:[function(D,ne){function q(te){this.data=te,this.length=te.length,this.index=0,this.zero=0}var he=D("../utils");q.prototype={checkOffset:function(te){this.checkIndex(this.index+te)},checkIndex:function(te){if(this.length<this.zero+te||0>te)throw new Error("End of data reached (data length = "+this.length+", asked index = "+te+"). Corrupted zip ?")},setIndex:function(te){this.checkIndex(te),this.index=te},skip:function(te){this.setIndex(this.index+te)},byteAt:function(){},readInt:function(te){var me=0,ve;for(this.checkOffset(te),ve=this.index+te-1;ve>=this.index;ve--)me=(me<<8)+this.byteAt(ve);return this.index+=te,me},readString:function(te){return he.transformTo("string",this.readData(te))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var te=this.readInt(4);return new Date(Date.UTC(1980+(127&te>>25),(15&te>>21)-1,31&te>>16,31&te>>11,63&te>>5,(31&te)<<1))}},ne.exports=q},{"../utils":32}],19:[function(D,ne){function q(te){he.call(this,te)}var he=D("./Uint8ArrayReader");D("../utils").inherits(q,he),q.prototype.readData=function(te){this.checkOffset(te);var me=this.data.slice(this.zero+this.index,this.zero+this.index+te);return this.index+=te,me},ne.exports=q},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(D,ne){function q(te){he.call(this,te)}var he=D("./DataReader");D("../utils").inherits(q,he),q.prototype.byteAt=function(te){return this.data.charCodeAt(this.zero+te)},q.prototype.lastIndexOfSignature=function(te){return this.data.lastIndexOf(te)-this.zero},q.prototype.readAndCheckSignature=function(te){return te===this.readData(4)},q.prototype.readData=function(te){this.checkOffset(te);var me=this.data.slice(this.zero+this.index,this.zero+this.index+te);return this.index+=te,me},ne.exports=q},{"../utils":32,"./DataReader":18}],21:[function(D,ne){function q(te){he.call(this,te)}var he=D("./ArrayReader");D("../utils").inherits(q,he),q.prototype.readData=function(te){if(this.checkOffset(te),te===0)return new Uint8Array(0);var me=this.data.subarray(this.zero+this.index,this.zero+this.index+te);return this.index+=te,me},ne.exports=q},{"../utils":32,"./ArrayReader":17}],22:[function(D,ne){var q=D("../utils"),he=D("../support"),te=D("./ArrayReader"),me=D("./StringReader"),ve=D("./NodeBufferReader"),_e=D("./Uint8ArrayReader");ne.exports=function(Se){var Oe=q.getTypeOf(Se);return q.checkSupport(Oe),Oe!=="string"||he.uint8array?Oe==="nodebuffer"?new ve(Se):he.uint8array?new _e(q.transformTo("uint8array",Se)):new te(q.transformTo("array",Se)):new me(Se)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(D,ne,q){q.LOCAL_FILE_HEADER="PK",q.CENTRAL_FILE_HEADER="PK",q.CENTRAL_DIRECTORY_END="PK",q.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",q.ZIP64_CENTRAL_DIRECTORY_END="PK",q.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(D,ne){function q(me){he.call(this,"ConvertWorker to "+me),this.destType=me}var he=D("./GenericWorker"),te=D("../utils");te.inherits(q,he),q.prototype.processChunk=function(me){this.push({data:te.transformTo(this.destType,me.data),meta:me.meta})},ne.exports=q},{"../utils":32,"./GenericWorker":28}],25:[function(D,ne){function q(){he.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}var he=D("./GenericWorker"),te=D("../crc32");D("../utils").inherits(q,he),q.prototype.processChunk=function(me){this.streamInfo.crc32=te(me.data,this.streamInfo.crc32||0),this.push(me)},ne.exports=q},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(D,ne){function q(me){te.call(this,"DataLengthProbe for "+me),this.propName=me,this.withStreamInfo(me,0)}var he=D("../utils"),te=D("./GenericWorker");he.inherits(q,te),q.prototype.processChunk=function(me){if(me){var ve=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=ve+me.data.length}te.prototype.processChunk.call(this,me)},ne.exports=q},{"../utils":32,"./GenericWorker":28}],27:[function(D,ne){function q(me){te.call(this,"DataWorker");var ve=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,me.then(function(_e){ve.dataIsReady=!0,ve.data=_e,ve.max=_e&&_e.length||0,ve.type=he.getTypeOf(_e),ve.isPaused||ve._tickAndRepeat()},function(_e){ve.error(_e)})}var he=D("../utils"),te=D("./GenericWorker");he.inherits(q,te),q.prototype.cleanUp=function(){te.prototype.cleanUp.call(this),this.data=null},q.prototype.resume=function(){return!!te.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,he.delay(this._tickAndRepeat,[],this)),!0)},q.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(he.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},q.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var me=null,ve=a(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":me=this.data.substring(this.index,ve);break;case"uint8array":me=this.data.subarray(this.index,ve);break;case"array":case"nodebuffer":me=this.data.slice(this.index,ve)}return this.index=ve,this.push({data:me,meta:{percent:this.max?100*(this.index/this.max):0}})},ne.exports=q},{"../utils":32,"./GenericWorker":28}],28:[function(D,ne){function q(he){this.name=he||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}q.prototype={push:function(he){this.emit("data",he)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(he){this.emit("error",he)}return!0},error:function(he){return!this.isFinished&&(this.isPaused?this.generatedError=he:(this.isFinished=!0,this.emit("error",he),this.previous&&this.previous.error(he),this.cleanUp()),!0)},on:function(he,te){return this._listeners[he].push(te),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(he,te){if(this._listeners[he])for(var me=0;me<this._listeners[he].length;me++)this._listeners[he][me].call(this,te)},pipe:function(he){return he.registerPrevious(this)},registerPrevious:function(he){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=he.streamInfo,this.mergeStreamInfo(),this.previous=he;var te=this;return he.on("data",function(me){te.processChunk(me)}),he.on("end",function(){te.end()}),he.on("error",function(me){te.error(me)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var he=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),he=!0),this.previous&&this.previous.resume(),!he},flush:function(){},processChunk:function(he){this.push(he)},withStreamInfo:function(he,te){return this.extraStreamInfo[he]=te,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var he in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(he)&&(this.streamInfo[he]=this.extraStreamInfo[he])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var he="Worker "+this.name;return this.previous?this.previous+" -> "+he:he}},ne.exports=q},{}],29:[function(D,ne){function q(Te,we,Ie){var Ae=we;we==="blob"||we==="arraybuffer"?Ae="uint8array":we==="base64"&&(Ae="string");try{this._internalType=Ae,this._outputType=we,this._mimeType=Ie,he.checkSupport(Ae),this._worker=Te.pipe(new te(Ae)),Te.lock()}catch(W){this._worker=new me("error"),this._worker.error(W)}}var he=D("../utils"),te=D("./ConvertWorker"),me=D("./GenericWorker"),ve=D("../base64"),_e=D("../support"),Se=D("../external"),Oe=null;if(_e.nodestream)try{Oe=D("../nodejs/NodejsStreamOutputAdapter")}catch{}q.prototype={accumulate:function(Te){return we=this,Ie=Te,new Se.Promise(function(Ae,W){var V=[],j=we._internalType,se=we._outputType,ye=we._mimeType;we.on("data",function(ae,U){V.push(ae),Ie&&Ie(U)}).on("error",function(ae){V=[],W(ae)}).on("end",function(){try{var ae=function(U,le,re){return U==="blob"?he.newBlob(he.transformTo("arraybuffer",le),re):U==="base64"?ve.encode(le):he.transformTo(U,le)}(se,function(U,le){var re=0,k=null,O=0,C;for(C=0;C<le.length;C++)O+=le[C].length;switch(U){case"string":return le.join("");case"array":return Array.prototype.concat.apply([],le);case"uint8array":for(k=new Uint8Array(O),C=0;C<le.length;C++)k.set(le[C],re),re+=le[C].length;return k;case"nodebuffer":return f.concat(le);default:throw new Error("concat : unsupported type '"+U+"'")}}(j,V),ye);Ae(ae)}catch(U){W(U)}V=[]}).resume()});var we,Ie},on:function(Te,we){var Ie=this;return Te==="data"?this._worker.on(Te,function(Ae){we.call(Ie,Ae.data,Ae.meta)}):this._worker.on(Te,function(){he.delay(we,arguments,Ie)}),this},resume:function(){return he.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(Te){if(he.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new Oe(this,{objectMode:this._outputType!=="nodebuffer"},Te)}},ne.exports=q},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(D,ne,q){if(q.base64=!0,q.array=!0,q.string=!0,q.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",q.nodebuffer=typeof f<"u",q.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")q.blob=!1;else{var he=new ArrayBuffer(0);try{q.blob=new Blob([he],{type:"application/zip"}).size===0}catch{try{var te=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);te.append(he),q.blob=te.getBlob("application/zip").size===0}catch{q.blob=!1}}}try{q.nodestream=!!D("readable-stream").Readable}catch{q.nodestream=!1}},{"readable-stream":16}],31:[function(D,ne,q){function he(){Se.call(this,"utf-8 decode"),this.leftOver=null}function te(){Se.call(this,"utf-8 encode")}for(var me=D("./utils"),ve=D("./support"),_e=D("./nodejsUtils"),Se=D("./stream/GenericWorker"),Oe=Array(256),Te=0;256>Te;Te++)Oe[Te]=252<=Te?6:248<=Te?5:240<=Te?4:224<=Te?3:192<=Te?2:1;Oe[254]=Oe[254]=1,q.utf8encode=function(we){return ve.nodebuffer?_e.newBufferFrom(we,"utf-8"):function(Ie){var Ae=Ie.length,W=0,V,j,se,ye,ae;for(ye=0;ye<Ae;ye++)(64512&(j=Ie.charCodeAt(ye)))==55296&&ye+1<Ae&&(64512&(se=Ie.charCodeAt(ye+1)))==56320&&(j=65536+(j-55296<<10)+(se-56320),ye++),W+=128>j?1:2048>j?2:65536>j?3:4;for(V=ve.uint8array?new Uint8Array(W):Array(W),ye=ae=0;ae<W;ye++)(64512&(j=Ie.charCodeAt(ye)))==55296&&ye+1<Ae&&(64512&(se=Ie.charCodeAt(ye+1)))==56320&&(j=65536+(j-55296<<10)+(se-56320),ye++),128>j?V[ae++]=j:(2048>j?V[ae++]=192|j>>>6:(65536>j?V[ae++]=224|j>>>12:(V[ae++]=240|j>>>18,V[ae++]=128|63&j>>>12),V[ae++]=128|63&j>>>6),V[ae++]=128|63&j);return V}(we)},q.utf8decode=function(we){return ve.nodebuffer?me.transformTo("nodebuffer",we).toString("utf-8"):function(Ie){var Ae=Ie.length,W=Array(2*Ae),V,j,se,ye;for(V=j=0;V<Ae;)if(128>(se=Ie[V++]))W[j++]=se;else if(4<(ye=Oe[se]))W[j++]=65533,V+=ye-1;else{for(se&=ye===2?31:ye===3?15:7;1<ye&&V<Ae;)se=se<<6|63&Ie[V++],ye--;1<ye?W[j++]=65533:65536>se?W[j++]=se:(se-=65536,W[j++]=55296|1023&se>>10,W[j++]=56320|1023&se)}return W.length!==j&&(W.subarray?W=W.subarray(0,j):W.length=j),me.applyFromCharCode(W)}(we=me.transformTo(ve.uint8array?"uint8array":"array",we))},me.inherits(he,Se),he.prototype.processChunk=function(we){var Ie=me.transformTo(ve.uint8array?"uint8array":"array",we.data);if(this.leftOver&&this.leftOver.length){if(ve.uint8array){var Ae=Ie;(Ie=new Uint8Array(Ae.length+this.leftOver.length)).set(this.leftOver,0),Ie.set(Ae,this.leftOver.length)}else Ie=this.leftOver.concat(Ie);this.leftOver=null}var W=function(j,se){var ye;for((se=se||j.length)>j.length&&(se=j.length),ye=se-1;0<=ye&&(192&j[ye])==128;)ye--;return 0>ye||ye===0?se:ye+Oe[j[ye]]>se?ye:se}(Ie),V=Ie;W!==Ie.length&&(ve.uint8array?(V=Ie.subarray(0,W),this.leftOver=Ie.subarray(W,Ie.length)):(V=Ie.slice(0,W),this.leftOver=Ie.slice(W,Ie.length))),this.push({data:q.utf8decode(V),meta:we.meta})},he.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:q.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},q.Utf8DecodeWorker=he,me.inherits(te,Se),te.prototype.processChunk=function(we){this.push({data:q.utf8encode(we.data),meta:we.meta})},q.Utf8EncodeWorker=te},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(D,ne,q){function he(W){return W}function te(W,V){for(var j=0;j<W.length;++j)V[j]=255&W.charCodeAt(j);return V}function me(W){var V=65536,j=q.getTypeOf(W),se=!0;if(j==="uint8array"?se=Ie.applyCanBeUsed.uint8array:j==="nodebuffer"&&(se=Ie.applyCanBeUsed.nodebuffer),se)for(;1<V;)try{return Ie.stringifyByChunk(W,j,V)}catch{V=i(V/2)}return Ie.stringifyByChar(W)}function ve(W,V){for(var j=0;j<W.length;j++)V[j]=W[j];return V}var _e=D("./support"),Se=D("./base64"),Oe=D("./nodejsUtils"),Te=D("set-immediate-shim"),we=D("./external");q.newBlob=function(W,V){q.checkSupport("blob");try{return new Blob([W],{type:V})}catch{try{var j=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return j.append(W),j.getBlob(V)}catch{throw new Error("Bug : can't construct the Blob.")}}};var Ie={stringifyByChunk:function(W,V,j){var se=[],ye=0,ae=W.length;if(ae<=j)return o.apply(null,W);for(;ye<ae;)V==="array"||V==="nodebuffer"?se.push(o.apply(null,W.slice(ye,a(ye+j,ae)))):se.push(o.apply(null,W.subarray(ye,a(ye+j,ae)))),ye+=j;return se.join("")},stringifyByChar:function(W){for(var V="",j=0;j<W.length;j++)V+=o(W[j]);return V},applyCanBeUsed:{uint8array:function(){try{return _e.uint8array&&o.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return _e.nodebuffer&&o.apply(null,Oe.allocBuffer(1)).length===1}catch{return!1}}()}};q.applyFromCharCode=me;var Ae={};Ae.string={string:he,array:function(W){return te(W,Array(W.length))},arraybuffer:function(W){return Ae.string.uint8array(W).buffer},uint8array:function(W){return te(W,new Uint8Array(W.length))},nodebuffer:function(W){return te(W,Oe.allocBuffer(W.length))}},Ae.array={string:me,array:he,arraybuffer:function(W){return new Uint8Array(W).buffer},uint8array:function(W){return new Uint8Array(W)},nodebuffer:function(W){return Oe.newBufferFrom(W)}},Ae.arraybuffer={string:function(W){return me(new Uint8Array(W))},array:function(W){return ve(new Uint8Array(W),Array(W.byteLength))},arraybuffer:he,uint8array:function(W){return new Uint8Array(W)},nodebuffer:function(W){return Oe.newBufferFrom(new Uint8Array(W))}},Ae.uint8array={string:me,array:function(W){return ve(W,Array(W.length))},arraybuffer:function(W){return W.buffer},uint8array:he,nodebuffer:function(W){return Oe.newBufferFrom(W)}},Ae.nodebuffer={string:me,array:function(W){return ve(W,Array(W.length))},arraybuffer:function(W){return Ae.nodebuffer.uint8array(W).buffer},uint8array:function(W){return ve(W,new Uint8Array(W.length))},nodebuffer:he},q.transformTo=function(W,V){if(V=V||"",!W)return V;q.checkSupport(W);var j=q.getTypeOf(V);return Ae[j][W](V)},q.getTypeOf=function(W){return typeof W=="string"?"string":Object.prototype.toString.call(W)==="[object Array]"?"array":_e.nodebuffer&&Oe.isBuffer(W)?"nodebuffer":_e.uint8array&&W instanceof Uint8Array?"uint8array":_e.arraybuffer&&W instanceof ArrayBuffer?"arraybuffer":void 0},q.checkSupport=function(W){if(!_e[W.toLowerCase()])throw new Error(W+" is not supported by this platform")},q.MAX_VALUE_16BITS=65535,q.MAX_VALUE_32BITS=-1,q.pretty=function(W){var V="",j,se;for(se=0;se<(W||"").length;se++)V+="\\x"+(16>(j=W.charCodeAt(se))?"0":"")+j.toString(16).toUpperCase();return V},q.delay=function(W,V,j){Te(function(){W.apply(j||null,V||[])})},q.inherits=function(W,V){function j(){}j.prototype=V.prototype,W.prototype=new j},q.extend=function(){var W={},V,j;for(V=0;V<arguments.length;V++)for(j in arguments[V])arguments[V].hasOwnProperty(j)&&W[j]===void 0&&(W[j]=arguments[V][j]);return W},q.prepareContent=function(W,V,j,se,ye){return we.Promise.resolve(V).then(function(ae){return _e.blob&&(ae instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(ae))!==-1)&&typeof FileReader<"u"?new we.Promise(function(U,le){var re=new FileReader;re.onload=function(k){U(k.target.result)},re.onerror=function(k){le(k.target.error)},re.readAsArrayBuffer(ae)}):ae}).then(function(ae){var U=q.getTypeOf(ae),le;return U?(U==="arraybuffer"?ae=q.transformTo("uint8array",ae):U==="string"&&(ye?ae=Se.decode(ae):j&&se!==!0&&(ae=te(le=ae,_e.uint8array?new Uint8Array(le.length):Array(le.length)))),ae):we.Promise.reject(new Error("Can't read the data of '"+W+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(D,ne){function q(Se){this.files=[],this.loadOptions=Se}var he=D("./reader/readerFor"),te=D("./utils"),me=D("./signature"),ve=D("./zipEntry"),_e=(D("./utf8"),D("./support"));q.prototype={checkSignature:function(Se){if(!this.reader.readAndCheckSignature(Se)){this.reader.index-=4;var Oe=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+te.pretty(Oe)+", expected "+te.pretty(Se)+")")}},isSignature:function(Se,Oe){var Te=this.reader.index;this.reader.setIndex(Se);var we=this.reader.readString(4)===Oe;return this.reader.setIndex(Te),we},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var Se=this.reader.readData(this.zipCommentLength),Oe=_e.uint8array?"uint8array":"array",Te=te.transformTo(Oe,Se);this.zipComment=this.loadOptions.decodeFileName(Te)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var Se=this.zip64EndOfCentralSize-44,Oe,Te,we;0<Se;)Oe=this.reader.readInt(2),Te=this.reader.readInt(4),we=this.reader.readData(Te),this.zip64ExtensibleData[Oe]={id:Oe,length:Te,value:we}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var Se,Oe;for(Se=0;Se<this.files.length;Se++)Oe=this.files[Se],this.reader.setIndex(Oe.localHeaderOffset),this.checkSignature(me.LOCAL_FILE_HEADER),Oe.readLocalPart(this.reader),Oe.handleUTF8(),Oe.processAttributes()},readCentralDir:function(){var Se;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(me.CENTRAL_FILE_HEADER);)(Se=new ve({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(Se);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var Se=this.reader.lastIndexOfSignature(me.CENTRAL_DIRECTORY_END);if(0>Se)throw this.isSignature(0,me.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(Se);var Oe=Se;if(this.checkSignature(me.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===te.MAX_VALUE_16BITS||this.diskWithCentralDirStart===te.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===te.MAX_VALUE_16BITS||this.centralDirRecords===te.MAX_VALUE_16BITS||this.centralDirSize===te.MAX_VALUE_32BITS||this.centralDirOffset===te.MAX_VALUE_32BITS){if(this.zip64=!0,0>(Se=this.reader.lastIndexOfSignature(me.ZIP64_CENTRAL_DIRECTORY_LOCATOR)))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(Se),this.checkSignature(me.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,me.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(me.ZIP64_CENTRAL_DIRECTORY_END),0>this.relativeOffsetEndOfZip64CentralDir))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(me.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var Te=this.centralDirOffset+this.centralDirSize;this.zip64&&(Te+=20,Te+=12+this.zip64EndOfCentralSize);var we=Oe-Te;if(0<we)this.isSignature(Oe,me.CENTRAL_FILE_HEADER)||(this.reader.zero=we);else if(0>we)throw new Error("Corrupted zip: missing "+s(we)+" bytes.")},prepareReader:function(Se){this.reader=he(Se)},load:function(Se){this.prepareReader(Se),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},ne.exports=q},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(D,ne){function q(Te,we){this.options=Te,this.loadOptions=we}var he=D("./reader/readerFor"),te=D("./utils"),me=D("./compressedObject"),ve=D("./crc32"),_e=D("./utf8"),Se=D("./compressions"),Oe=D("./support");q.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(Te){var we,Ie;if(Te.skip(22),this.fileNameLength=Te.readInt(2),Ie=Te.readInt(2),this.fileName=Te.readData(this.fileNameLength),Te.skip(Ie),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((we=function(Ae){for(var W in Se)if(Se.hasOwnProperty(W)&&Se[W].magic===Ae)return Se[W];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+te.pretty(this.compressionMethod)+" unknown (inner file : "+te.transformTo("string",this.fileName)+")");this.decompressed=new me(this.compressedSize,this.uncompressedSize,this.crc32,we,Te.readData(this.compressedSize))},readCentralPart:function(Te){this.versionMadeBy=Te.readInt(2),Te.skip(2),this.bitFlag=Te.readInt(2),this.compressionMethod=Te.readString(2),this.date=Te.readDate(),this.crc32=Te.readInt(4),this.compressedSize=Te.readInt(4),this.uncompressedSize=Te.readInt(4);var we=Te.readInt(2);if(this.extraFieldsLength=Te.readInt(2),this.fileCommentLength=Te.readInt(2),this.diskNumberStart=Te.readInt(2),this.internalFileAttributes=Te.readInt(2),this.externalFileAttributes=Te.readInt(4),this.localHeaderOffset=Te.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");Te.skip(we),this.readExtraFields(Te),this.parseZIP64ExtraField(Te),this.fileComment=Te.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var Te=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),Te==0&&(this.dosPermissions=63&this.externalFileAttributes),Te==3&&(this.unixPermissions=65535&this.externalFileAttributes>>16),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var Te=he(this.extraFields[1].value);this.uncompressedSize===te.MAX_VALUE_32BITS&&(this.uncompressedSize=Te.readInt(8)),this.compressedSize===te.MAX_VALUE_32BITS&&(this.compressedSize=Te.readInt(8)),this.localHeaderOffset===te.MAX_VALUE_32BITS&&(this.localHeaderOffset=Te.readInt(8)),this.diskNumberStart===te.MAX_VALUE_32BITS&&(this.diskNumberStart=Te.readInt(4))}},readExtraFields:function(Te){var we=Te.index+this.extraFieldsLength,Ie,Ae,W;for(this.extraFields||(this.extraFields={});Te.index+4<we;)Ie=Te.readInt(2),Ae=Te.readInt(2),W=Te.readData(Ae),this.extraFields[Ie]={id:Ie,length:Ae,value:W};Te.setIndex(we)},handleUTF8:function(){var Te=Oe.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=_e.utf8decode(this.fileName),this.fileCommentStr=_e.utf8decode(this.fileComment);else{var we=this.findExtraFieldUnicodePath();if(we!==null)this.fileNameStr=we;else{var Ie=te.transformTo(Te,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(Ie)}var Ae=this.findExtraFieldUnicodeComment();if(Ae!==null)this.fileCommentStr=Ae;else{var W=te.transformTo(Te,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(W)}}},findExtraFieldUnicodePath:function(){var Te=this.extraFields[28789];if(Te){var we=he(Te.value);return we.readInt(1)===1&&ve(this.fileName)===we.readInt(4)?_e.utf8decode(we.readData(Te.length-5)):null}return null},findExtraFieldUnicodeComment:function(){var Te=this.extraFields[25461];if(Te){var we=he(Te.value);return we.readInt(1)===1&&ve(this.fileComment)===we.readInt(4)?_e.utf8decode(we.readData(Te.length-5)):null}return null}},ne.exports=q},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(D,ne){function q(we,Ie,Ae){this.name=we,this.dir=Ae.dir,this.date=Ae.date,this.comment=Ae.comment,this.unixPermissions=Ae.unixPermissions,this.dosPermissions=Ae.dosPermissions,this._data=Ie,this._dataBinary=Ae.binary,this.options={compression:Ae.compression,compressionOptions:Ae.compressionOptions}}var he=D("./stream/StreamHelper"),te=D("./stream/DataWorker"),me=D("./utf8"),ve=D("./compressedObject"),_e=D("./stream/GenericWorker");q.prototype={internalStream:function(we){var Ie=null,Ae="string";try{if(!we)throw new Error("No output type specified.");var W=(Ae=we.toLowerCase())==="string"||Ae==="text";Ae!=="binarystring"&&Ae!=="text"||(Ae="string"),Ie=this._decompressWorker();var V=!this._dataBinary;V&&!W&&(Ie=Ie.pipe(new me.Utf8EncodeWorker)),!V&&W&&(Ie=Ie.pipe(new me.Utf8DecodeWorker))}catch(j){(Ie=new _e("error")).error(j)}return new he(Ie,Ae,"")},async:function(we,Ie){return this.internalStream(we).accumulate(Ie)},nodeStream:function(we,Ie){return this.internalStream(we||"nodebuffer").toNodejsStream(Ie)},_compressWorker:function(we,Ie){if(this._data instanceof ve&&this._data.compression.magic===we.magic)return this._data.getCompressedWorker();var Ae=this._decompressWorker();return this._dataBinary||(Ae=Ae.pipe(new me.Utf8EncodeWorker)),ve.createWorkerFrom(Ae,we,Ie)},_decompressWorker:function(){return this._data instanceof ve?this._data.getContentWorker():this._data instanceof _e?this._data:new te(this._data)}};for(var Se=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],Oe=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},Te=0;Te<Se.length;Te++)q.prototype[Se[Te]]=Oe;ne.exports=q},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(D,ne){(function(q){function he(){var Ie,Ae;ve=!0;for(var W=we.length;W;){for(Ae=we,we=[],Ie=-1;++Ie<W;)Ae[Ie]();W=we.length}ve=!1}var te=q.MutationObserver||q.WebKitMutationObserver,me,ve;if(te){var _e=0,Se=new te(he),Oe=q.document.createTextNode("");Se.observe(Oe,{characterData:!0}),me=function(){Oe.data=_e=++_e%2}}else if(q.setImmediate||q.MessageChannel===void 0)me="document"in q&&"onreadystatechange"in q.document.createElement("script")?function(){var Ie=q.document.createElement("script");Ie.onreadystatechange=function(){he(),Ie.onreadystatechange=null,Ie.parentNode.removeChild(Ie),Ie=null},q.document.documentElement.appendChild(Ie)}:function(){setTimeout(he,0)};else{var Te=new q.MessageChannel;Te.port1.onmessage=he,me=function(){Te.port2.postMessage(0)}}var we=[];ne.exports=function(Ie){we.push(Ie)!==1||ve||me()}}).call(this,N===void 0?typeof self>"u"?typeof window>"u"?{}:window:self:N)},{}],37:[function(D,ne){function q(){}function he(W){if(typeof W!="function")throw new TypeError("resolver must be a function");this.state=Ae,this.queue=[],this.outcome=void 0,W!==q&&_e(this,W)}function te(W,V,j){this.promise=W,typeof V=="function"&&(this.onFulfilled=V,this.callFulfilled=this.otherCallFulfilled),typeof j=="function"&&(this.onRejected=j,this.callRejected=this.otherCallRejected)}function me(W,V,j){Oe(function(){var se;try{se=V(j)}catch(ye){return Te.reject(W,ye)}se===W?Te.reject(W,new TypeError("Cannot resolve promise with itself")):Te.resolve(W,se)})}function ve(W){var V=W&&W.then;if(W&&(typeof W=="object"||typeof W=="function")&&typeof V=="function")return function(){V.apply(W,arguments)}}function _e(W,V){function j(U){ye||(ye=!0,Te.reject(W,U))}function se(U){ye||(ye=!0,Te.resolve(W,U))}var ye=!1,ae=Se(function(){V(se,j)});ae.status==="error"&&j(ae.value)}function Se(W,V){var j={};try{j.value=W(V),j.status="success"}catch(se){j.status="error",j.value=se}return j}var Oe=D("immediate"),Te={},we=["REJECTED"],Ie=["FULFILLED"],Ae=["PENDING"];(ne.exports=he).prototype.finally=function(W){if(typeof W!="function")return this;var V=this.constructor;return this.then(function(j){return V.resolve(W()).then(function(){return j})},function(j){return V.resolve(W()).then(function(){throw j})})},he.prototype.catch=function(W){return this.then(null,W)},he.prototype.then=function(W,V){if(typeof W!="function"&&this.state===Ie||typeof V!="function"&&this.state===we)return this;var j=new this.constructor(q);return this.state===Ae?this.queue.push(new te(j,W,V)):me(j,this.state===Ie?W:V,this.outcome),j},te.prototype.callFulfilled=function(W){Te.resolve(this.promise,W)},te.prototype.otherCallFulfilled=function(W){me(this.promise,this.onFulfilled,W)},te.prototype.callRejected=function(W){Te.reject(this.promise,W)},te.prototype.otherCallRejected=function(W){me(this.promise,this.onRejected,W)},Te.resolve=function(W,V){var j=Se(ve,V);if(j.status==="error")return Te.reject(W,j.value);var se=j.value;if(se)_e(W,se);else{W.state=Ie,W.outcome=V;for(var ye=-1,ae=W.queue.length;++ye<ae;)W.queue[ye].callFulfilled(V)}return W},Te.reject=function(W,V){W.state=we,W.outcome=V;for(var j=-1,se=W.queue.length;++j<se;)W.queue[j].callRejected(V);return W},he.resolve=function(W){return W instanceof this?W:Te.resolve(new this(q),W)},he.reject=function(W){var V=new this(q);return Te.reject(V,W)},he.all=function(W){function V(k,O){j.resolve(k).then(function(C){ae[O]=C,++U!==se||ye||(ye=!0,Te.resolve(re,ae))},function(C){ye||(ye=!0,Te.reject(re,C))})}var j=this;if(Object.prototype.toString.call(W)!=="[object Array]")return this.reject(new TypeError("must be an array"));var se=W.length,ye=!1;if(!se)return this.resolve([]);for(var ae=Array(se),U=0,le=-1,re=new this(q);++le<se;)V(W[le],le);return re},he.race=function(W){if(Object.prototype.toString.call(W)!=="[object Array]")return this.reject(new TypeError("must be an array"));var V=W.length,j=!1;if(!V)return this.resolve([]);for(var se=-1,ye=new this(q),ae;++se<V;)ae=W[se],this.resolve(ae).then(function(U){j||(j=!0,Te.resolve(ye,U))},function(U){j||(j=!0,Te.reject(ye,U))});return ye}},{immediate:36}],38:[function(D,ne){var q={};(0,D("./lib/utils/common").assign)(q,D("./lib/deflate"),D("./lib/inflate"),D("./lib/zlib/constants")),ne.exports=q},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(D,ne,q){function he(we){if(!(this instanceof he))return new he(we);this.options=ve.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},we||{});var Ie=this.options;Ie.raw&&0<Ie.windowBits?Ie.windowBits=-Ie.windowBits:Ie.gzip&&0<Ie.windowBits&&16>Ie.windowBits&&(Ie.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Oe,this.strm.avail_out=0;var Ae=me.deflateInit2(this.strm,Ie.level,Ie.method,Ie.windowBits,Ie.memLevel,Ie.strategy);if(Ae!==0)throw new Error(Se[Ae]);if(Ie.header&&me.deflateSetHeader(this.strm,Ie.header),Ie.dictionary){var W;if(W=typeof Ie.dictionary=="string"?_e.string2buf(Ie.dictionary):Te.call(Ie.dictionary)==="[object ArrayBuffer]"?new Uint8Array(Ie.dictionary):Ie.dictionary,(Ae=me.deflateSetDictionary(this.strm,W))!==0)throw new Error(Se[Ae]);this._dict_set=!0}}function te(we,Ie){var Ae=new he(Ie);if(Ae.push(we,!0),Ae.err)throw Ae.msg||Se[Ae.err];return Ae.result}var me=D("./zlib/deflate"),ve=D("./utils/common"),_e=D("./utils/strings"),Se=D("./zlib/messages"),Oe=D("./zlib/zstream"),Te=Object.prototype.toString;he.prototype.push=function(we,Ie){var Ae=this.strm,W=this.options.chunkSize,V,j;if(this.ended)return!1;j=Ie===~~Ie?Ie:Ie===!0?4:0,Ae.input=typeof we=="string"?_e.string2buf(we):Te.call(we)==="[object ArrayBuffer]"?new Uint8Array(we):we,Ae.next_in=0,Ae.avail_in=Ae.input.length;do{if(Ae.avail_out===0&&(Ae.output=new ve.Buf8(W),Ae.next_out=0,Ae.avail_out=W),(V=me.deflate(Ae,j))!==1&&V!==0)return this.onEnd(V),!(this.ended=!0);Ae.avail_out!==0&&(Ae.avail_in!==0||j!==4&&j!==2)||(this.options.to==="string"?this.onData(_e.buf2binstring(ve.shrinkBuf(Ae.output,Ae.next_out))):this.onData(ve.shrinkBuf(Ae.output,Ae.next_out)))}while((0<Ae.avail_in||Ae.avail_out===0)&&V!==1);return j===4?(V=me.deflateEnd(this.strm),this.onEnd(V),this.ended=!0,V===0):j!=2||(this.onEnd(0),!(Ae.avail_out=0))},he.prototype.onData=function(we){this.chunks.push(we)},he.prototype.onEnd=function(we){we===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=ve.flattenChunks(this.chunks)),this.chunks=[],this.err=we,this.msg=this.strm.msg},q.Deflate=he,q.deflate=te,q.deflateRaw=function(we,Ie){return(Ie=Ie||{}).raw=!0,te(we,Ie)},q.gzip=function(we,Ie){return(Ie=Ie||{}).gzip=!0,te(we,Ie)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(D,ne,q){function he(Ae){if(!(this instanceof he))return new he(Ae);this.options=ve.assign({chunkSize:16384,windowBits:0,to:""},Ae||{});var W=this.options;W.raw&&0<=W.windowBits&&16>W.windowBits&&(W.windowBits=-W.windowBits,W.windowBits===0&&(W.windowBits=-15)),!(0<=W.windowBits&&16>W.windowBits)||Ae&&Ae.windowBits||(W.windowBits+=32),15<W.windowBits&&48>W.windowBits&&!(15&W.windowBits)&&(W.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Te,this.strm.avail_out=0;var V=me.inflateInit2(this.strm,W.windowBits);if(V!==Se.Z_OK)throw new Error(Oe[V]);this.header=new we,me.inflateGetHeader(this.strm,this.header)}function te(Ae,W){var V=new he(W);if(V.push(Ae,!0),V.err)throw V.msg||Oe[V.err];return V.result}var me=D("./zlib/inflate"),ve=D("./utils/common"),_e=D("./utils/strings"),Se=D("./zlib/constants"),Oe=D("./zlib/messages"),Te=D("./zlib/zstream"),we=D("./zlib/gzheader"),Ie=Object.prototype.toString;he.prototype.push=function(Ae,W){var V=this.strm,j=this.options.chunkSize,se=this.options.dictionary,ye=!1,ae,U,le,re,k,O;if(this.ended)return!1;U=W===~~W?W:W===!0?Se.Z_FINISH:Se.Z_NO_FLUSH,V.input=typeof Ae=="string"?_e.binstring2buf(Ae):Ie.call(Ae)==="[object ArrayBuffer]"?new Uint8Array(Ae):Ae,V.next_in=0,V.avail_in=V.input.length;do{if(V.avail_out===0&&(V.output=new ve.Buf8(j),V.next_out=0,V.avail_out=j),(ae=me.inflate(V,Se.Z_NO_FLUSH))===Se.Z_NEED_DICT&&se&&(O=typeof se=="string"?_e.string2buf(se):Ie.call(se)==="[object ArrayBuffer]"?new Uint8Array(se):se,ae=me.inflateSetDictionary(this.strm,O)),ae===Se.Z_BUF_ERROR&&ye===!0&&(ae=Se.Z_OK,ye=!1),ae!==Se.Z_STREAM_END&&ae!==Se.Z_OK)return this.onEnd(ae),!(this.ended=!0);V.next_out&&(V.avail_out!==0&&ae!==Se.Z_STREAM_END&&(V.avail_in!==0||U!==Se.Z_FINISH&&U!==Se.Z_SYNC_FLUSH)||(this.options.to==="string"?(le=_e.utf8border(V.output,V.next_out),re=V.next_out-le,k=_e.buf2string(V.output,le),V.next_out=re,V.avail_out=j-re,re&&ve.arraySet(V.output,V.output,le,re,0),this.onData(k)):this.onData(ve.shrinkBuf(V.output,V.next_out)))),V.avail_in===0&&V.avail_out===0&&(ye=!0)}while((0<V.avail_in||V.avail_out===0)&&ae!==Se.Z_STREAM_END);return ae===Se.Z_STREAM_END&&(U=Se.Z_FINISH),U===Se.Z_FINISH?(ae=me.inflateEnd(this.strm),this.onEnd(ae),this.ended=!0,ae===Se.Z_OK):U!==Se.Z_SYNC_FLUSH||(this.onEnd(Se.Z_OK),!(V.avail_out=0))},he.prototype.onData=function(Ae){this.chunks.push(Ae)},he.prototype.onEnd=function(Ae){Ae===Se.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=ve.flattenChunks(this.chunks)),this.chunks=[],this.err=Ae,this.msg=this.strm.msg},q.Inflate=he,q.inflate=te,q.inflateRaw=function(Ae,W){return(W=W||{}).raw=!0,te(Ae,W)},q.ungzip=te},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(D,ne,q){var he=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";q.assign=function(ve){for(var _e=Array.prototype.slice.call(arguments,1),Se;_e.length;)if(Se=_e.shift(),Se){if(typeof Se!="object")throw new TypeError(Se+"must be non-object");for(var Oe in Se)Se.hasOwnProperty(Oe)&&(ve[Oe]=Se[Oe])}return ve},q.shrinkBuf=function(ve,_e){return ve.length===_e?ve:ve.subarray?ve.subarray(0,_e):(ve.length=_e,ve)};var te={arraySet:function(ve,_e,Se,Oe,Te){if(_e.subarray&&ve.subarray)ve.set(_e.subarray(Se,Se+Oe),Te);else for(var we=0;we<Oe;we++)ve[Te+we]=_e[Se+we]},flattenChunks:function(ve){var _e,Se,Oe,Te,we,Ie;for(_e=Oe=0,Se=ve.length;_e<Se;_e++)Oe+=ve[_e].length;for(Ie=new Uint8Array(Oe),_e=Te=0,Se=ve.length;_e<Se;_e++)we=ve[_e],Ie.set(we,Te),Te+=we.length;return Ie}},me={arraySet:function(ve,_e,Se,Oe,Te){for(var we=0;we<Oe;we++)ve[Te+we]=_e[Se+we]},flattenChunks:function(ve){return[].concat.apply([],ve)}};q.setTyped=function(ve){ve?(q.Buf8=Uint8Array,q.Buf16=Uint16Array,q.Buf32=Int32Array,q.assign(q,te)):(q.Buf8=Array,q.Buf16=Array,q.Buf32=Array,q.assign(q,me))},q.setTyped(he)},{}],42:[function(D,ne,q){function he(Oe,Te){if(65537>Te&&(Oe.subarray&&ve||!Oe.subarray&&me))return o.apply(null,te.shrinkBuf(Oe,Te));for(var we="",Ie=0;Ie<Te;Ie++)we+=o(Oe[Ie]);return we}var te=D("./common"),me=!0,ve=!0;try{o.apply(null,[0])}catch{me=!1}try{o.apply(null,new Uint8Array(1))}catch{ve=!1}for(var _e=new te.Buf8(256),Se=0;256>Se;Se++)_e[Se]=252<=Se?6:248<=Se?5:240<=Se?4:224<=Se?3:192<=Se?2:1;_e[254]=_e[254]=1,q.string2buf=function(Oe){var Te=Oe.length,we=0,Ie,Ae,W,V,j;for(V=0;V<Te;V++)(64512&(Ae=Oe.charCodeAt(V)))==55296&&V+1<Te&&(64512&(W=Oe.charCodeAt(V+1)))==56320&&(Ae=65536+(Ae-55296<<10)+(W-56320),V++),we+=128>Ae?1:2048>Ae?2:65536>Ae?3:4;for(Ie=new te.Buf8(we),V=j=0;j<we;V++)(64512&(Ae=Oe.charCodeAt(V)))==55296&&V+1<Te&&(64512&(W=Oe.charCodeAt(V+1)))==56320&&(Ae=65536+(Ae-55296<<10)+(W-56320),V++),128>Ae?Ie[j++]=Ae:(2048>Ae?Ie[j++]=192|Ae>>>6:(65536>Ae?Ie[j++]=224|Ae>>>12:(Ie[j++]=240|Ae>>>18,Ie[j++]=128|63&Ae>>>12),Ie[j++]=128|63&Ae>>>6),Ie[j++]=128|63&Ae);return Ie},q.buf2binstring=function(Oe){return he(Oe,Oe.length)},q.binstring2buf=function(Oe){for(var Te=new te.Buf8(Oe.length),we=0,Ie=Te.length;we<Ie;we++)Te[we]=Oe.charCodeAt(we);return Te},q.buf2string=function(Oe,Te){var we=Te||Oe.length,Ie=Array(2*we),Ae,W,V,j;for(Ae=W=0;Ae<we;)if(128>(V=Oe[Ae++]))Ie[W++]=V;else if(4<(j=_e[V]))Ie[W++]=65533,Ae+=j-1;else{for(V&=j===2?31:j===3?15:7;1<j&&Ae<we;)V=V<<6|63&Oe[Ae++],j--;1<j?Ie[W++]=65533:65536>V?Ie[W++]=V:(V-=65536,Ie[W++]=55296|1023&V>>10,Ie[W++]=56320|1023&V)}return he(Ie,W)},q.utf8border=function(Oe,Te){var we;for((Te=Te||Oe.length)>Oe.length&&(Te=Oe.length),we=Te-1;0<=we&&(192&Oe[we])==128;)we--;return 0>we||we===0?Te:we+_e[Oe[we]]>Te?we:Te}},{"./common":41}],43:[function(D,ne){ne.exports=function(q,he,te,me){for(var ve=0|65535&q,_e=0|65535&q>>>16,Se=0;te!==0;){for(te-=Se=2e3<te?2e3:te;_e=0|_e+(ve=0|ve+he[me++]),--Se;);ve%=65521,_e%=65521}return 0|(ve|_e<<16)}},{}],44:[function(D,ne){ne.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(D,ne){var q=function(){for(var he=[],te=0,me;256>te;te++){me=te;for(var ve=0;8>ve;ve++)me=1&me?3988292384^me>>>1:me>>>1;he[te]=me}return he}();ne.exports=function(he,te,me,ve){he^=-1;for(var _e=ve;_e<ve+me;_e++)he=he>>>8^q[255&(he^te[_e])];return-1^he}},{}],46:[function(D,ne,q){function he(C,G){return C.msg=k[G],G}function te(C){return(C<<1)-(4<C?9:0)}function me(C){for(var G=C.length;0<=--G;)C[G]=0}function ve(C){var G=C.state,Z=G.pending;Z>C.avail_out&&(Z=C.avail_out),Z!==0&&(ae.arraySet(C.output,G.pending_buf,G.pending_out,Z,C.next_out),C.next_out+=Z,G.pending_out+=Z,C.total_out+=Z,C.avail_out-=Z,G.pending-=Z,G.pending===0&&(G.pending_out=0))}function _e(C,G){U._tr_flush_block(C,0<=C.block_start?C.block_start:-1,C.strstart-C.block_start,G),C.block_start=C.strstart,ve(C.strm)}function Se(C,G){C.pending_buf[C.pending++]=G}function Oe(C,G){C.pending_buf[C.pending++]=255&G>>>8,C.pending_buf[C.pending++]=255&G}function Te(C,G){var Z=C.max_chain_length,F=C.strstart,ie=C.prev_length,ge=C.nice_match,xe=C.strstart>C.w_size-262?C.strstart-(C.w_size-262):0,fe=C.window,ze=C.w_mask,He=C.prev,et=C.strstart+258,Ve=fe[F+ie-1],be=fe[F+ie],ke,Ge;C.prev_length>=C.good_match&&(Z>>=2),ge>C.lookahead&&(ge=C.lookahead);do if(fe[(ke=G)+ie]===be&&fe[ke+ie-1]===Ve&&fe[ke]===fe[F]&&fe[++ke]===fe[F+1]){F+=2,ke++;do;while(fe[++F]===fe[++ke]&&fe[++F]===fe[++ke]&&fe[++F]===fe[++ke]&&fe[++F]===fe[++ke]&&fe[++F]===fe[++ke]&&fe[++F]===fe[++ke]&&fe[++F]===fe[++ke]&&fe[++F]===fe[++ke]&&F<et);if(Ge=258-(et-F),F=et-258,ie<Ge){if(C.match_start=G,ge<=(ie=Ge))break;Ve=fe[F+ie-1],be=fe[F+ie]}}while((G=He[G&ze])>xe&&--Z!=0);return ie<=C.lookahead?ie:C.lookahead}function we(C){var G=C.w_size,Z,F,ie,ge,xe,fe,ze,He,et,Ve;do{if(ge=C.window_size-C.lookahead-C.strstart,C.strstart>=G+(G-262)){for(ae.arraySet(C.window,C.window,G,G,0),C.match_start-=G,C.strstart-=G,C.block_start-=G,Z=F=C.hash_size;ie=C.head[--Z],C.head[Z]=G<=ie?ie-G:0,--F;);for(Z=F=G;ie=C.prev[--Z],C.prev[Z]=G<=ie?ie-G:0,--F;);ge+=G}if(C.strm.avail_in===0)break;if(fe=C.strm,ze=C.window,He=C.strstart+C.lookahead,Ve=void 0,(et=ge)<(Ve=fe.avail_in)&&(Ve=et),F=Ve===0?0:(fe.avail_in-=Ve,ae.arraySet(ze,fe.input,fe.next_in,Ve,He),fe.state.wrap===1?fe.adler=le(fe.adler,ze,Ve,He):fe.state.wrap===2&&(fe.adler=re(fe.adler,ze,Ve,He)),fe.next_in+=Ve,fe.total_in+=Ve,Ve),C.lookahead+=F,3<=C.lookahead+C.insert)for(xe=C.strstart-C.insert,C.ins_h=C.window[xe],C.ins_h=(C.ins_h<<C.hash_shift^C.window[xe+1])&C.hash_mask;C.insert&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[xe+3-1])&C.hash_mask,C.prev[xe&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=xe,xe++,C.insert--,!(3>C.lookahead+C.insert)););}while(C.lookahead<262&&C.strm.avail_in!==0)}function Ie(C,G){for(var Z,F;;){if(C.lookahead<262){if(we(C),C.lookahead<262&&G===0)return 1;if(C.lookahead===0)break}if(Z=0,3<=C.lookahead&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+3-1])&C.hash_mask,Z=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),Z!==0&&C.strstart-Z<=C.w_size-262&&(C.match_length=Te(C,Z)),!(3<=C.match_length))F=U._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++;else if(F=U._tr_tally(C,C.strstart-C.match_start,C.match_length-3),C.lookahead-=C.match_length,C.match_length<=C.max_lazy_match&&3<=C.lookahead){for(C.match_length--;C.strstart++,C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+3-1])&C.hash_mask,Z=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart,--C.match_length!=0;);C.strstart++}else C.strstart+=C.match_length,C.match_length=0,C.ins_h=C.window[C.strstart],C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+1])&C.hash_mask;if(F&&(_e(C,!1),C.strm.avail_out===0))return 1}return C.insert=C.strstart<2?C.strstart:2,G===4?(_e(C,!0),C.strm.avail_out===0?3:4):C.last_lit&&(_e(C,!1),C.strm.avail_out===0)?1:2}function Ae(C,G){for(var Z,F,ie;;){if(C.lookahead<262){if(we(C),C.lookahead<262&&G===0)return 1;if(C.lookahead===0)break}if(Z=0,3<=C.lookahead&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+3-1])&C.hash_mask,Z=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),C.prev_length=C.match_length,C.prev_match=C.match_start,C.match_length=2,Z!==0&&C.prev_length<C.max_lazy_match&&C.strstart-Z<=C.w_size-262&&(C.match_length=Te(C,Z),5>=C.match_length&&(C.strategy===1||C.match_length===3&&4096<C.strstart-C.match_start)&&(C.match_length=2)),3<=C.prev_length&&C.match_length<=C.prev_length){for(ie=C.strstart+C.lookahead-3,F=U._tr_tally(C,C.strstart-1-C.prev_match,C.prev_length-3),C.lookahead-=C.prev_length-1,C.prev_length-=2;++C.strstart<=ie&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+3-1])&C.hash_mask,Z=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),--C.prev_length!=0;);if(C.match_available=0,C.match_length=2,C.strstart++,F&&(_e(C,!1),C.strm.avail_out===0))return 1}else if(!C.match_available)C.match_available=1,C.strstart++,C.lookahead--;else if((F=U._tr_tally(C,0,C.window[C.strstart-1]))&&_e(C,!1),C.strstart++,C.lookahead--,C.strm.avail_out===0)return 1}return C.match_available&&(F=U._tr_tally(C,0,C.window[C.strstart-1]),C.match_available=0),C.insert=C.strstart<2?C.strstart:2,G===4?(_e(C,!0),C.strm.avail_out===0?3:4):C.last_lit&&(_e(C,!1),C.strm.avail_out===0)?1:2}function W(C,G,Z,F,ie){this.good_length=C,this.max_lazy=G,this.nice_length=Z,this.max_chain=F,this.func=ie}function V(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new ae.Buf16(1146),this.dyn_dtree=new ae.Buf16(122),this.bl_tree=new ae.Buf16(78),me(this.dyn_ltree),me(this.dyn_dtree),me(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new ae.Buf16(16),this.heap=new ae.Buf16(573),me(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new ae.Buf16(573),me(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function j(C){var G;return C&&C.state?(C.total_in=C.total_out=0,C.data_type=2,(G=C.state).pending=0,G.pending_out=0,0>G.wrap&&(G.wrap=-G.wrap),G.status=G.wrap?42:113,C.adler=G.wrap===2?0:1,G.last_flush=0,U._tr_init(G),0):he(C,-2)}function se(C){var G=j(C),Z;return G===0&&((Z=C.state).window_size=2*Z.w_size,me(Z.head),Z.max_lazy_match=O[Z.level].max_lazy,Z.good_match=O[Z.level].good_length,Z.nice_match=O[Z.level].nice_length,Z.max_chain_length=O[Z.level].max_chain,Z.strstart=0,Z.block_start=0,Z.lookahead=0,Z.insert=0,Z.match_length=Z.prev_length=2,Z.match_available=0,Z.ins_h=0),G}function ye(C,G,Z,F,ie,ge){if(!C)return-2;var xe=1;if(G===-1&&(G=6),0>F?(xe=0,F=-F):15<F&&(xe=2,F-=16),1>ie||9<ie||Z!==8||8>F||15<F||0>G||9<G||0>ge||4<ge)return he(C,-2);F===8&&(F=9);var fe=new V;return(C.state=fe).strm=C,fe.wrap=xe,fe.gzhead=null,fe.w_bits=F,fe.w_size=1<<fe.w_bits,fe.w_mask=fe.w_size-1,fe.hash_bits=ie+7,fe.hash_size=1<<fe.hash_bits,fe.hash_mask=fe.hash_size-1,fe.hash_shift=~~((fe.hash_bits+3-1)/3),fe.window=new ae.Buf8(2*fe.w_size),fe.head=new ae.Buf16(fe.hash_size),fe.prev=new ae.Buf16(fe.w_size),fe.lit_bufsize=1<<ie+6,fe.pending_buf_size=4*fe.lit_bufsize,fe.pending_buf=new ae.Buf8(fe.pending_buf_size),fe.d_buf=1*fe.lit_bufsize,fe.l_buf=3*fe.lit_bufsize,fe.level=G,fe.strategy=ge,fe.method=Z,se(C)}var ae=D("../utils/common"),U=D("./trees"),le=D("./adler32"),re=D("./crc32"),k=D("./messages"),O;O=[new W(0,0,0,0,function(C,G){var Z=65535;for(Z>C.pending_buf_size-5&&(Z=C.pending_buf_size-5);;){if(1>=C.lookahead){if(we(C),C.lookahead===0&&G===0)return 1;if(C.lookahead===0)break}C.strstart+=C.lookahead,C.lookahead=0;var F=C.block_start+Z;if((C.strstart===0||C.strstart>=F)&&(C.lookahead=C.strstart-F,C.strstart=F,_e(C,!1),C.strm.avail_out===0)||C.strstart-C.block_start>=C.w_size-262&&(_e(C,!1),C.strm.avail_out===0))return 1}return C.insert=0,G===4?(_e(C,!0),C.strm.avail_out===0?3:4):(C.strstart>C.block_start&&(_e(C,!1),C.strm.avail_out),1)}),new W(4,4,8,4,Ie),new W(4,5,16,8,Ie),new W(4,6,32,32,Ie),new W(4,4,16,16,Ae),new W(8,16,32,32,Ae),new W(8,16,128,128,Ae),new W(8,32,128,256,Ae),new W(32,128,258,1024,Ae),new W(32,258,258,4096,Ae)],q.deflateInit=function(C,G){return ye(C,G,8,15,8,0)},q.deflateInit2=ye,q.deflateReset=se,q.deflateResetKeep=j,q.deflateSetHeader=function(C,G){return C&&C.state&&C.state.wrap===2?(C.state.gzhead=G,0):-2},q.deflate=function(C,G){var Z,F,ie,ge;if(!C||!C.state||5<G||0>G)return C?he(C,-2):-2;if(F=C.state,!C.output||!C.input&&C.avail_in!==0||F.status===666&&G!==4)return he(C,C.avail_out===0?-5:-2);if(F.strm=C,Z=F.last_flush,F.last_flush=G,F.status===42)if(F.wrap===2)C.adler=0,Se(F,31),Se(F,139),Se(F,8),F.gzhead?(Se(F,(F.gzhead.text?1:0)+(F.gzhead.hcrc?2:0)+(F.gzhead.extra?4:0)+(F.gzhead.name?8:0)+(F.gzhead.comment?16:0)),Se(F,255&F.gzhead.time),Se(F,255&F.gzhead.time>>8),Se(F,255&F.gzhead.time>>16),Se(F,255&F.gzhead.time>>24),Se(F,F.level===9?2:2<=F.strategy||2>F.level?4:0),Se(F,255&F.gzhead.os),F.gzhead.extra&&F.gzhead.extra.length&&(Se(F,255&F.gzhead.extra.length),Se(F,255&F.gzhead.extra.length>>8)),F.gzhead.hcrc&&(C.adler=re(C.adler,F.pending_buf,F.pending,0)),F.gzindex=0,F.status=69):(Se(F,0),Se(F,0),Se(F,0),Se(F,0),Se(F,0),Se(F,F.level===9?2:2<=F.strategy||2>F.level?4:0),Se(F,3),F.status=113);else{var xe=8+(F.w_bits-8<<4)<<8;xe|=(2<=F.strategy||2>F.level?0:6>F.level?1:F.level===6?2:3)<<6,F.strstart!==0&&(xe|=32),xe+=31-xe%31,F.status=113,Oe(F,xe),F.strstart!==0&&(Oe(F,C.adler>>>16),Oe(F,65535&C.adler)),C.adler=1}if(F.status===69)if(F.gzhead.extra){for(ie=F.pending;F.gzindex<(65535&F.gzhead.extra.length)&&(F.pending!==F.pending_buf_size||(F.gzhead.hcrc&&F.pending>ie&&(C.adler=re(C.adler,F.pending_buf,F.pending-ie,ie)),ve(C),ie=F.pending,F.pending!==F.pending_buf_size));)Se(F,255&F.gzhead.extra[F.gzindex]),F.gzindex++;F.gzhead.hcrc&&F.pending>ie&&(C.adler=re(C.adler,F.pending_buf,F.pending-ie,ie)),F.gzindex===F.gzhead.extra.length&&(F.gzindex=0,F.status=73)}else F.status=73;if(F.status===73)if(F.gzhead.name){ie=F.pending;do{if(F.pending===F.pending_buf_size&&(F.gzhead.hcrc&&F.pending>ie&&(C.adler=re(C.adler,F.pending_buf,F.pending-ie,ie)),ve(C),ie=F.pending,F.pending===F.pending_buf_size)){ge=1;break}ge=F.gzindex<F.gzhead.name.length?255&F.gzhead.name.charCodeAt(F.gzindex++):0,Se(F,ge)}while(ge!==0);F.gzhead.hcrc&&F.pending>ie&&(C.adler=re(C.adler,F.pending_buf,F.pending-ie,ie)),ge===0&&(F.gzindex=0,F.status=91)}else F.status=91;if(F.status===91)if(F.gzhead.comment){ie=F.pending;do{if(F.pending===F.pending_buf_size&&(F.gzhead.hcrc&&F.pending>ie&&(C.adler=re(C.adler,F.pending_buf,F.pending-ie,ie)),ve(C),ie=F.pending,F.pending===F.pending_buf_size)){ge=1;break}ge=F.gzindex<F.gzhead.comment.length?255&F.gzhead.comment.charCodeAt(F.gzindex++):0,Se(F,ge)}while(ge!==0);F.gzhead.hcrc&&F.pending>ie&&(C.adler=re(C.adler,F.pending_buf,F.pending-ie,ie)),ge===0&&(F.status=103)}else F.status=103;if(F.status===103&&(F.gzhead.hcrc?(F.pending+2>F.pending_buf_size&&ve(C),F.pending+2<=F.pending_buf_size&&(Se(F,255&C.adler),Se(F,255&C.adler>>8),C.adler=0,F.status=113)):F.status=113),F.pending!==0){if(ve(C),C.avail_out===0)return F.last_flush=-1,0}else if(C.avail_in===0&&te(G)<=te(Z)&&G!==4)return he(C,-5);if(F.status===666&&C.avail_in!==0)return he(C,-5);if(C.avail_in!==0||F.lookahead!==0||G!==0&&F.status!==666){var fe=F.strategy===2?function(ze,He){for(var et;;){if(ze.lookahead===0&&(we(ze),ze.lookahead===0)){if(He===0)return 1;break}if(ze.match_length=0,et=U._tr_tally(ze,0,ze.window[ze.strstart]),ze.lookahead--,ze.strstart++,et&&(_e(ze,!1),ze.strm.avail_out===0))return 1}return ze.insert=0,He===4?(_e(ze,!0),ze.strm.avail_out===0?3:4):ze.last_lit&&(_e(ze,!1),ze.strm.avail_out===0)?1:2}(F,G):F.strategy===3?function(ze,He){for(var et=ze.window,Ve,be,ke,Ge;;){if(258>=ze.lookahead){if(we(ze),258>=ze.lookahead&&He===0)return 1;if(ze.lookahead===0)break}if(ze.match_length=0,3<=ze.lookahead&&0<ze.strstart&&(be=et[ke=ze.strstart-1])===et[++ke]&&be===et[++ke]&&be===et[++ke]){Ge=ze.strstart+258;do;while(be===et[++ke]&&be===et[++ke]&&be===et[++ke]&&be===et[++ke]&&be===et[++ke]&&be===et[++ke]&&be===et[++ke]&&be===et[++ke]&&ke<Ge);ze.match_length=258-(Ge-ke),ze.match_length>ze.lookahead&&(ze.match_length=ze.lookahead)}if(3<=ze.match_length?(Ve=U._tr_tally(ze,1,ze.match_length-3),ze.lookahead-=ze.match_length,ze.strstart+=ze.match_length,ze.match_length=0):(Ve=U._tr_tally(ze,0,ze.window[ze.strstart]),ze.lookahead--,ze.strstart++),Ve&&(_e(ze,!1),ze.strm.avail_out===0))return 1}return ze.insert=0,He===4?(_e(ze,!0),ze.strm.avail_out===0?3:4):ze.last_lit&&(_e(ze,!1),ze.strm.avail_out===0)?1:2}(F,G):O[F.level].func(F,G);if(fe!==3&&fe!==4||(F.status=666),fe===1||fe===3)return C.avail_out===0&&(F.last_flush=-1),0;if(fe===2&&(G===1?U._tr_align(F):G!=5&&(U._tr_stored_block(F,0,0,!1),G==3&&(me(F.head),F.lookahead===0&&(F.strstart=0,F.block_start=0,F.insert=0))),ve(C),C.avail_out===0))return F.last_flush=-1,0}return G===4?0>=F.wrap?1:(F.wrap===2?(Se(F,255&C.adler),Se(F,255&C.adler>>8),Se(F,255&C.adler>>16),Se(F,255&C.adler>>24),Se(F,255&C.total_in),Se(F,255&C.total_in>>8),Se(F,255&C.total_in>>16),Se(F,255&C.total_in>>24)):(Oe(F,C.adler>>>16),Oe(F,65535&C.adler)),ve(C),0<F.wrap&&(F.wrap=-F.wrap),F.pending===0?1:0):0},q.deflateEnd=function(C){var G;return C&&C.state?(G=C.state.status)!==42&&G!==69&&G!==73&&G!==91&&G!==103&&G!==113&&G!==666?he(C,-2):(C.state=null,G===113?he(C,-3):0):-2},q.deflateSetDictionary=function(C,G){var Z=G.length,F,ie,ge,xe,fe,ze,He,et;if(!C||!C.state||(xe=(F=C.state).wrap)===2||xe===1&&F.status!==42||F.lookahead)return-2;for(xe===1&&(C.adler=le(C.adler,G,Z,0)),F.wrap=0,Z>=F.w_size&&(xe===0&&(me(F.head),F.strstart=0,F.block_start=0,F.insert=0),et=new ae.Buf8(F.w_size),ae.arraySet(et,G,Z-F.w_size,F.w_size,0),G=et,Z=F.w_size),fe=C.avail_in,ze=C.next_in,He=C.input,C.avail_in=Z,C.next_in=0,C.input=G,we(F);F.lookahead>=3;){for(ie=F.strstart,ge=F.lookahead-2;F.ins_h=(F.ins_h<<F.hash_shift^F.window[ie+3-1])&F.hash_mask,F.prev[ie&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=ie,ie++,--ge;);F.strstart=ie,F.lookahead=2,we(F)}return F.strstart+=F.lookahead,F.block_start=F.strstart,F.insert=F.lookahead,F.lookahead=0,F.match_length=F.prev_length=2,F.match_available=0,C.next_in=ze,C.input=He,C.avail_in=fe,F.wrap=xe,0},q.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(D,ne){ne.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(D,ne){ne.exports=function(q,he){var te,me,ve,_e,Se,Oe,Te,we,Ie,Ae,W,V,j,se,ye,ae,U,le,re,k,O,C,G,Z,F;te=q.state,me=q.next_in,Z=q.input,ve=me+(q.avail_in-5),_e=q.next_out,F=q.output,Se=_e-(he-q.avail_out),Oe=_e+(q.avail_out-257),Te=te.dmax,we=te.wsize,Ie=te.whave,Ae=te.wnext,W=te.window,V=te.hold,j=te.bits,se=te.lencode,ye=te.distcode,ae=(1<<te.lenbits)-1,U=(1<<te.distbits)-1;e:do{15>j&&(V+=Z[me++]<<j,j+=8,V+=Z[me++]<<j,j+=8),le=se[V&ae];t:for(;;){if(V>>>=re=le>>>24,j-=re,(re=255&le>>>16)==0)F[_e++]=65535&le;else{if(!(16&re)){if(!(64&re)){le=se[(65535&le)+(V&(1<<re)-1)];continue t}if(32&re){te.mode=12;break e}q.msg="invalid literal/length code",te.mode=30;break e}k=65535&le,(re&=15)&&(j<re&&(V+=Z[me++]<<j,j+=8),k+=V&(1<<re)-1,V>>>=re,j-=re),15>j&&(V+=Z[me++]<<j,j+=8,V+=Z[me++]<<j,j+=8),le=ye[V&U];i:for(;;){if(V>>>=re=le>>>24,j-=re,!(16&(re=255&le>>>16))){if(!(64&re)){le=ye[(65535&le)+(V&(1<<re)-1)];continue i}q.msg="invalid distance code",te.mode=30;break e}if(O=65535&le,j<(re&=15)&&(V+=Z[me++]<<j,(j+=8)<re&&(V+=Z[me++]<<j,j+=8)),Te<(O+=V&(1<<re)-1)){q.msg="invalid distance too far back",te.mode=30;break e}if(V>>>=re,j-=re,(re=_e-Se)<O){if(Ie<(re=O-re)&&te.sane){q.msg="invalid distance too far back",te.mode=30;break e}if(G=W,(C=0)===Ae){if(C+=we-re,re<k){for(k-=re;F[_e++]=W[C++],--re;);C=_e-O,G=F}}else if(Ae<re){if(C+=we+Ae-re,(re-=Ae)<k){for(k-=re;F[_e++]=W[C++],--re;);if(C=0,Ae<k){for(k-=re=Ae;F[_e++]=W[C++],--re;);C=_e-O,G=F}}}else if(C+=Ae-re,re<k){for(k-=re;F[_e++]=W[C++],--re;);C=_e-O,G=F}for(;2<k;)F[_e++]=G[C++],F[_e++]=G[C++],F[_e++]=G[C++],k-=3;k&&(F[_e++]=G[C++],1<k&&(F[_e++]=G[C++]))}else{for(C=_e-O;F[_e++]=F[C++],F[_e++]=F[C++],F[_e++]=F[C++],2<(k-=3););k&&(F[_e++]=F[C++],1<k&&(F[_e++]=F[C++]))}break}}break}}while(me<ve&&_e<Oe);me-=k=j>>3,V&=(1<<(j-=k<<3))-1,q.next_in=me,q.next_out=_e,q.avail_in=me<ve?ve-me+5:5-(me-ve),q.avail_out=_e<Oe?Oe-_e+257:257-(_e-Oe),te.hold=V,te.bits=j}},{}],49:[function(D,ne,q){function he(ae){return(255&ae>>>24)+(65280&ae>>>8)+((65280&ae)<<8)+((255&ae)<<24)}function te(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new we.Buf16(320),this.work=new we.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function me(ae){var U;return ae&&ae.state?(U=ae.state,ae.total_in=ae.total_out=U.total=0,ae.msg="",U.wrap&&(ae.adler=1&U.wrap),U.mode=1,U.last=0,U.havedict=0,U.dmax=32768,U.head=null,U.hold=0,U.bits=0,U.lencode=U.lendyn=new we.Buf32(852),U.distcode=U.distdyn=new we.Buf32(592),U.sane=1,U.back=-1,0):-2}function ve(ae){var U;return ae&&ae.state?((U=ae.state).wsize=0,U.whave=0,U.wnext=0,me(ae)):-2}function _e(ae,U){var le,re;return ae&&ae.state?(re=ae.state,0>U?(le=0,U=-U):(le=1+(U>>4),48>U&&(U&=15)),U&&(8>U||15<U)?-2:(re.window!==null&&re.wbits!==U&&(re.window=null),re.wrap=le,re.wbits=U,ve(ae))):-2}function Se(ae,U){var le,re;return ae?(re=new te,(ae.state=re).window=null,(le=_e(ae,U))!==0&&(ae.state=null),le):-2}function Oe(ae){if(j){var U;for(se=new we.Buf32(512),ye=new we.Buf32(32),U=0;144>U;)ae.lens[U++]=8;for(;256>U;)ae.lens[U++]=9;for(;280>U;)ae.lens[U++]=7;for(;288>U;)ae.lens[U++]=8;for(V(1,ae.lens,0,288,se,0,ae.work,{bits:9}),U=0;32>U;)ae.lens[U++]=5;V(2,ae.lens,0,32,ye,0,ae.work,{bits:5}),j=!1}ae.lencode=se,ae.lenbits=9,ae.distcode=ye,ae.distbits=5}function Te(ae,U,le,re){var k=ae.state,O;return k.window===null&&(k.wsize=1<<k.wbits,k.wnext=0,k.whave=0,k.window=new we.Buf8(k.wsize)),re>=k.wsize?(we.arraySet(k.window,U,le-k.wsize,k.wsize,0),k.wnext=0,k.whave=k.wsize):(re<(O=k.wsize-k.wnext)&&(O=re),we.arraySet(k.window,U,le-re,O,k.wnext),(re-=O)?(we.arraySet(k.window,U,le-re,re,0),k.wnext=re,k.whave=k.wsize):(k.wnext+=O,k.wnext===k.wsize&&(k.wnext=0),k.whave<k.wsize&&(k.whave+=O))),0}var we=D("../utils/common"),Ie=D("./adler32"),Ae=D("./crc32"),W=D("./inffast"),V=D("./inftrees"),j=!0,se,ye;q.inflateReset=ve,q.inflateReset2=_e,q.inflateResetKeep=me,q.inflateInit=function(ae){return Se(ae,15)},q.inflateInit2=Se,q.inflate=function(ae,U){var le=0,re=new we.Buf8(4),k=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],O,C,G,Z,F,ie,ge,xe,fe,ze,He,et,Ve,be,ke,Ge,ut,pt,vt,kt,dt,Wt,Gt,Ti;if(!ae||!ae.state||!ae.output||!ae.input&&ae.avail_in!==0)return-2;(O=ae.state).mode===12&&(O.mode=13),F=ae.next_out,G=ae.output,ge=ae.avail_out,Z=ae.next_in,C=ae.input,ie=ae.avail_in,xe=O.hold,fe=O.bits,ze=ie,He=ge,Wt=0;e:for(;;)switch(O.mode){case 1:if(O.wrap===0){O.mode=13;break}for(;16>fe;){if(ie===0)break e;ie--,xe+=C[Z++]<<fe,fe+=8}if(2&O.wrap&&xe===35615){re[O.check=0]=255&xe,re[1]=255&xe>>>8,O.check=Ae(O.check,re,2,0),fe=xe=0,O.mode=2;break}if(O.flags=0,O.head&&(O.head.done=!1),!(1&O.wrap)||(((255&xe)<<8)+(xe>>8))%31){ae.msg="incorrect header check",O.mode=30;break}if((15&xe)!=8){ae.msg="unknown compression method",O.mode=30;break}if(fe-=4,dt=8+(15&(xe>>>=4)),O.wbits===0)O.wbits=dt;else if(dt>O.wbits){ae.msg="invalid window size",O.mode=30;break}O.dmax=1<<dt,ae.adler=O.check=1,O.mode=512&xe?10:12,fe=xe=0;break;case 2:for(;16>fe;){if(ie===0)break e;ie--,xe+=C[Z++]<<fe,fe+=8}if(O.flags=xe,(255&O.flags)!=8){ae.msg="unknown compression method",O.mode=30;break}if(57344&O.flags){ae.msg="unknown header flags set",O.mode=30;break}O.head&&(O.head.text=1&xe>>8),512&O.flags&&(re[0]=255&xe,re[1]=255&xe>>>8,O.check=Ae(O.check,re,2,0)),fe=xe=0,O.mode=3;case 3:for(;32>fe;){if(ie===0)break e;ie--,xe+=C[Z++]<<fe,fe+=8}O.head&&(O.head.time=xe),512&O.flags&&(re[0]=255&xe,re[1]=255&xe>>>8,re[2]=255&xe>>>16,re[3]=255&xe>>>24,O.check=Ae(O.check,re,4,0)),fe=xe=0,O.mode=4;case 4:for(;16>fe;){if(ie===0)break e;ie--,xe+=C[Z++]<<fe,fe+=8}O.head&&(O.head.xflags=255&xe,O.head.os=xe>>8),512&O.flags&&(re[0]=255&xe,re[1]=255&xe>>>8,O.check=Ae(O.check,re,2,0)),fe=xe=0,O.mode=5;case 5:if(1024&O.flags){for(;16>fe;){if(ie===0)break e;ie--,xe+=C[Z++]<<fe,fe+=8}O.length=xe,O.head&&(O.head.extra_len=xe),512&O.flags&&(re[0]=255&xe,re[1]=255&xe>>>8,O.check=Ae(O.check,re,2,0)),fe=xe=0}else O.head&&(O.head.extra=null);O.mode=6;case 6:if(1024&O.flags&&(ie<(et=O.length)&&(et=ie),et&&(O.head&&(dt=O.head.extra_len-O.length,O.head.extra||(O.head.extra=Array(O.head.extra_len)),we.arraySet(O.head.extra,C,Z,et,dt)),512&O.flags&&(O.check=Ae(O.check,C,et,Z)),ie-=et,Z+=et,O.length-=et),O.length))break e;O.length=0,O.mode=7;case 7:if(2048&O.flags){if(ie===0)break e;for(et=0;dt=C[Z+et++],O.head&&dt&&65536>O.length&&(O.head.name+=o(dt)),dt&&et<ie;);if(512&O.flags&&(O.check=Ae(O.check,C,et,Z)),ie-=et,Z+=et,dt)break e}else O.head&&(O.head.name=null);O.length=0,O.mode=8;case 8:if(4096&O.flags){if(ie===0)break e;for(et=0;dt=C[Z+et++],O.head&&dt&&65536>O.length&&(O.head.comment+=o(dt)),dt&&et<ie;);if(512&O.flags&&(O.check=Ae(O.check,C,et,Z)),ie-=et,Z+=et,dt)break e}else O.head&&(O.head.comment=null);O.mode=9;case 9:if(512&O.flags){for(;16>fe;){if(ie===0)break e;ie--,xe+=C[Z++]<<fe,fe+=8}if(xe!==(65535&O.check)){ae.msg="header crc mismatch",O.mode=30;break}fe=xe=0}O.head&&(O.head.hcrc=1&O.flags>>9,O.head.done=!0),ae.adler=O.check=0,O.mode=12;break;case 10:for(;32>fe;){if(ie===0)break e;ie--,xe+=C[Z++]<<fe,fe+=8}ae.adler=O.check=he(xe),fe=xe=0,O.mode=11;case 11:if(O.havedict===0)return ae.next_out=F,ae.avail_out=ge,ae.next_in=Z,ae.avail_in=ie,O.hold=xe,O.bits=fe,2;ae.adler=O.check=1,O.mode=12;case 12:if(U===5||U===6)break e;case 13:if(O.last){xe>>>=7&fe,fe-=7&fe,O.mode=27;break}for(;3>fe;){if(ie===0)break e;ie--,xe+=C[Z++]<<fe,fe+=8}switch(O.last=1&xe,fe-=1,3&(xe>>>=1)){case 0:O.mode=14;break;case 1:if(Oe(O),O.mode=20,U!==6)break;xe>>>=2,fe-=2;break e;case 2:O.mode=17;break;case 3:ae.msg="invalid block type",O.mode=30}xe>>>=2,fe-=2;break;case 14:for(xe>>>=7&fe,fe-=7&fe;32>fe;){if(ie===0)break e;ie--,xe+=C[Z++]<<fe,fe+=8}if((65535&xe)!=(65535^xe>>>16)){ae.msg="invalid stored block lengths",O.mode=30;break}if(O.length=65535&xe,fe=xe=0,O.mode=15,U===6)break e;case 15:O.mode=16;case 16:if(et=O.length){if(ie<et&&(et=ie),ge<et&&(et=ge),et===0)break e;we.arraySet(G,C,Z,et,F),ie-=et,Z+=et,ge-=et,F+=et,O.length-=et;break}O.mode=12;break;case 17:for(;14>fe;){if(ie===0)break e;ie--,xe+=C[Z++]<<fe,fe+=8}if(O.nlen=257+(31&xe),xe>>>=5,fe-=5,O.ndist=1+(31&xe),xe>>>=5,fe-=5,O.ncode=4+(15&xe),xe>>>=4,fe-=4,286<O.nlen||30<O.ndist){ae.msg="too many length or distance symbols",O.mode=30;break}O.have=0,O.mode=18;case 18:for(;O.have<O.ncode;){for(;3>fe;){if(ie===0)break e;ie--,xe+=C[Z++]<<fe,fe+=8}O.lens[k[O.have++]]=7&xe,xe>>>=3,fe-=3}for(;19>O.have;)O.lens[k[O.have++]]=0;if(O.lencode=O.lendyn,O.lenbits=7,Gt={bits:O.lenbits},Wt=V(0,O.lens,0,19,O.lencode,0,O.work,Gt),O.lenbits=Gt.bits,Wt){ae.msg="invalid code lengths set",O.mode=30;break}O.have=0,O.mode=19;case 19:for(;O.have<O.nlen+O.ndist;){for(;Ge=255&(le=O.lencode[xe&(1<<O.lenbits)-1])>>>16,ut=65535&le,!((ke=le>>>24)<=fe);){if(ie===0)break e;ie--,xe+=C[Z++]<<fe,fe+=8}if(16>ut)xe>>>=ke,fe-=ke,O.lens[O.have++]=ut;else{if(ut===16){for(Ti=ke+2;fe<Ti;){if(ie===0)break e;ie--,xe+=C[Z++]<<fe,fe+=8}if(xe>>>=ke,fe-=ke,O.have===0){ae.msg="invalid bit length repeat",O.mode=30;break}dt=O.lens[O.have-1],et=3+(3&xe),xe>>>=2,fe-=2}else if(ut===17){for(Ti=ke+3;fe<Ti;){if(ie===0)break e;ie--,xe+=C[Z++]<<fe,fe+=8}fe-=ke,dt=0,et=3+(7&(xe>>>=ke)),xe>>>=3,fe-=3}else{for(Ti=ke+7;fe<Ti;){if(ie===0)break e;ie--,xe+=C[Z++]<<fe,fe+=8}fe-=ke,dt=0,et=11+(127&(xe>>>=ke)),xe>>>=7,fe-=7}if(O.have+et>O.nlen+O.ndist){ae.msg="invalid bit length repeat",O.mode=30;break}for(;et--;)O.lens[O.have++]=dt}}if(O.mode===30)break;if(O.lens[256]===0){ae.msg="invalid code -- missing end-of-block",O.mode=30;break}if(O.lenbits=9,Gt={bits:O.lenbits},Wt=V(1,O.lens,0,O.nlen,O.lencode,0,O.work,Gt),O.lenbits=Gt.bits,Wt){ae.msg="invalid literal/lengths set",O.mode=30;break}if(O.distbits=6,O.distcode=O.distdyn,Gt={bits:O.distbits},Wt=V(2,O.lens,O.nlen,O.ndist,O.distcode,0,O.work,Gt),O.distbits=Gt.bits,Wt){ae.msg="invalid distances set",O.mode=30;break}if(O.mode=20,U===6)break e;case 20:O.mode=21;case 21:if(6<=ie&&258<=ge){ae.next_out=F,ae.avail_out=ge,ae.next_in=Z,ae.avail_in=ie,O.hold=xe,O.bits=fe,W(ae,He),F=ae.next_out,G=ae.output,ge=ae.avail_out,Z=ae.next_in,C=ae.input,ie=ae.avail_in,xe=O.hold,fe=O.bits,O.mode===12&&(O.back=-1);break}for(O.back=0;Ge=255&(le=O.lencode[xe&(1<<O.lenbits)-1])>>>16,ut=65535&le,!((ke=le>>>24)<=fe);){if(ie===0)break e;ie--,xe+=C[Z++]<<fe,fe+=8}if(Ge&&!(240&Ge)){for(pt=ke,vt=Ge,kt=ut;Ge=255&(le=O.lencode[kt+((xe&(1<<pt+vt)-1)>>pt)])>>>16,ut=65535&le,!(pt+(ke=le>>>24)<=fe);){if(ie===0)break e;ie--,xe+=C[Z++]<<fe,fe+=8}xe>>>=pt,fe-=pt,O.back+=pt}if(xe>>>=ke,fe-=ke,O.back+=ke,O.length=ut,Ge===0){O.mode=26;break}if(32&Ge){O.back=-1,O.mode=12;break}if(64&Ge){ae.msg="invalid literal/length code",O.mode=30;break}O.extra=15&Ge,O.mode=22;case 22:if(O.extra){for(Ti=O.extra;fe<Ti;){if(ie===0)break e;ie--,xe+=C[Z++]<<fe,fe+=8}O.length+=xe&(1<<O.extra)-1,xe>>>=O.extra,fe-=O.extra,O.back+=O.extra}O.was=O.length,O.mode=23;case 23:for(;Ge=255&(le=O.distcode[xe&(1<<O.distbits)-1])>>>16,ut=65535&le,!((ke=le>>>24)<=fe);){if(ie===0)break e;ie--,xe+=C[Z++]<<fe,fe+=8}if(!(240&Ge)){for(pt=ke,vt=Ge,kt=ut;Ge=255&(le=O.distcode[kt+((xe&(1<<pt+vt)-1)>>pt)])>>>16,ut=65535&le,!(pt+(ke=le>>>24)<=fe);){if(ie===0)break e;ie--,xe+=C[Z++]<<fe,fe+=8}xe>>>=pt,fe-=pt,O.back+=pt}if(xe>>>=ke,fe-=ke,O.back+=ke,64&Ge){ae.msg="invalid distance code",O.mode=30;break}O.offset=ut,O.extra=15&Ge,O.mode=24;case 24:if(O.extra){for(Ti=O.extra;fe<Ti;){if(ie===0)break e;ie--,xe+=C[Z++]<<fe,fe+=8}O.offset+=xe&(1<<O.extra)-1,xe>>>=O.extra,fe-=O.extra,O.back+=O.extra}if(O.offset>O.dmax){ae.msg="invalid distance too far back",O.mode=30;break}O.mode=25;case 25:if(ge===0)break e;if(et=He-ge,O.offset>et){if((et=O.offset-et)>O.whave&&O.sane){ae.msg="invalid distance too far back",O.mode=30;break}Ve=et>O.wnext?(et-=O.wnext,O.wsize-et):O.wnext-et,et>O.length&&(et=O.length),be=O.window}else be=G,Ve=F-O.offset,et=O.length;for(ge<et&&(et=ge),ge-=et,O.length-=et;G[F++]=be[Ve++],--et;);O.length===0&&(O.mode=21);break;case 26:if(ge===0)break e;G[F++]=O.length,ge--,O.mode=21;break;case 27:if(O.wrap){for(;32>fe;){if(ie===0)break e;ie--,xe|=C[Z++]<<fe,fe+=8}if(He-=ge,ae.total_out+=He,O.total+=He,He&&(ae.adler=O.check=O.flags?Ae(O.check,G,He,F-He):Ie(O.check,G,He,F-He)),He=ge,(O.flags?xe:he(xe))!==O.check){ae.msg="incorrect data check",O.mode=30;break}fe=xe=0}O.mode=28;case 28:if(O.wrap&&O.flags){for(;32>fe;){if(ie===0)break e;ie--,xe+=C[Z++]<<fe,fe+=8}if(xe!==(4294967295&O.total)){ae.msg="incorrect length check",O.mode=30;break}fe=xe=0}O.mode=29;case 29:Wt=1;break e;case 30:Wt=-3;break e;case 31:return-4;case 32:default:return-2}return ae.next_out=F,ae.avail_out=ge,ae.next_in=Z,ae.avail_in=ie,O.hold=xe,O.bits=fe,(O.wsize||He!==ae.avail_out&&30>O.mode&&(27>O.mode||U!==4))&&Te(ae,ae.output,ae.next_out,He-ae.avail_out)?(O.mode=31,-4):(ze-=ae.avail_in,He-=ae.avail_out,ae.total_in+=ze,ae.total_out+=He,O.total+=He,O.wrap&&He&&(ae.adler=O.check=O.flags?Ae(O.check,G,He,ae.next_out-He):Ie(O.check,G,He,ae.next_out-He)),ae.data_type=O.bits+(O.last?64:0)+(O.mode===12?128:0)+(O.mode===20||O.mode===15?256:0),(ze==0&&He===0||U===4)&&Wt===0&&(Wt=-5),Wt)},q.inflateEnd=function(ae){if(!ae||!ae.state)return-2;var U=ae.state;return U.window&&(U.window=null),ae.state=null,0},q.inflateGetHeader=function(ae,U){var le;return ae&&ae.state&&2&(le=ae.state).wrap?((le.head=U).done=!1,0):-2},q.inflateSetDictionary=function(ae,U){var le=U.length,re;return ae&&ae.state?(re=ae.state).wrap!==0&&re.mode!==11?-2:re.mode===11&&Ie(1,U,le,0)!==re.check?-3:Te(ae,U,le,le)?(re.mode=31,-4):(re.havedict=1,0):-2},q.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(D,ne){var q=D("../utils/common"),he=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],te=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],me=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],ve=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];ne.exports=function(_e,Se,Oe,Te,we,Ie,Ae,W){var V=W.bits,j=0,se=0,ye=0,ae=0,U=0,le=0,re=0,k=0,O=0,C=0,G=null,Z=0,F=new q.Buf16(16),ie=new q.Buf16(16),ge=null,xe=0,fe,ze,He,et,Ve,be,ke,Ge,ut;for(j=0;15>=j;j++)F[j]=0;for(se=0;se<Te;se++)F[Se[Oe+se]]++;for(U=V,ae=15;1<=ae&&F[ae]===0;ae--);if(ae<U&&(U=ae),ae==0)return we[Ie++]=20971520,we[Ie++]=20971520,W.bits=1,0;for(ye=1;ye<ae&&F[ye]===0;ye++);for(U<ye&&(U=ye),j=k=1;15>=j;j++)if(k<<=1,0>(k-=F[j]))return-1;if(0<k&&(_e===0||ae!==1))return-1;for(ie[1]=0,j=1;15>j;j++)ie[j+1]=ie[j]+F[j];for(se=0;se<Te;se++)Se[Oe+se]!==0&&(Ae[ie[Se[Oe+se]]++]=se);if(be=_e===0?(G=ge=Ae,19):_e===1?(G=he,Z-=257,ge=te,xe-=257,256):(G=me,ge=ve,-1),j=ye,Ve=Ie,re=se=C=0,He=-1,et=(O=1<<(le=U))-1,_e===1&&852<O||_e===2&&592<O)return 1;for(;;){for(ke=j-re,ut=Ae[se]<be?(Ge=0,Ae[se]):Ae[se]>be?(Ge=ge[xe+Ae[se]],G[Z+Ae[se]]):(Ge=96,0),fe=1<<j-re,ye=ze=1<<le;we[Ve+(C>>re)+(ze-=fe)]=0|(ke<<24|Ge<<16|ut),ze!==0;);for(fe=1<<j-1;C&fe;)fe>>=1;if(fe===0?C=0:(C&=fe-1,C+=fe),se++,--F[j]==0){if(j===ae)break;j=Se[Oe+Ae[se]]}if(U<j&&(C&et)!==He){for(re===0&&(re=U),Ve+=ye,k=1<<(le=j-re);le+re<ae&&!(0>=(k-=F[le+re]));)le++,k<<=1;if(O+=1<<le,_e===1&&852<O||_e===2&&592<O)return 1;we[He=C&et]=0|(U<<24|le<<16|Ve-Ie)}}return C!=0&&(we[Ve+C]=0|(j-re<<24|4194304)),W.bits=U,0}},{"../utils/common":41}],51:[function(D,ne){ne.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(D,ne,q){function he(be){for(var ke=be.length;0<=--ke;)be[ke]=0}function te(be,ke,Ge,ut,pt){this.static_tree=be,this.extra_bits=ke,this.extra_base=Ge,this.elems=ut,this.max_length=pt,this.has_stree=be&&be.length}function me(be,ke){this.dyn_tree=be,this.max_code=0,this.stat_desc=ke}function ve(be){return 256>be?ie[be]:ie[256+(be>>>7)]}function _e(be,ke){be.pending_buf[be.pending++]=255&ke,be.pending_buf[be.pending++]=255&ke>>>8}function Se(be,ke,Ge){be.bi_valid>16-Ge?(be.bi_buf|=65535&ke<<be.bi_valid,_e(be,be.bi_buf),be.bi_buf=ke>>16-be.bi_valid,be.bi_valid+=Ge-16):(be.bi_buf|=65535&ke<<be.bi_valid,be.bi_valid+=Ge)}function Oe(be,ke,Ge){Se(be,Ge[2*ke],Ge[2*ke+1])}function Te(be,ke){for(var Ge=0;Ge|=1&be,be>>>=1,Ge<<=1,0<--ke;);return Ge>>>1}function we(be,ke,Ge){var ut=Array(16),pt=0,vt,kt;for(vt=1;vt<=15;vt++)ut[vt]=pt=pt+Ge[vt-1]<<1;for(kt=0;kt<=ke;kt++){var dt=be[2*kt+1];dt!==0&&(be[2*kt]=Te(ut[dt]++,dt))}}function Ie(be){var ke;for(ke=0;286>ke;ke++)be.dyn_ltree[2*ke]=0;for(ke=0;30>ke;ke++)be.dyn_dtree[2*ke]=0;for(ke=0;19>ke;ke++)be.bl_tree[2*ke]=0;be.dyn_ltree[512]=1,be.opt_len=be.static_len=0,be.last_lit=be.matches=0}function Ae(be){8<be.bi_valid?_e(be,be.bi_buf):0<be.bi_valid&&(be.pending_buf[be.pending++]=be.bi_buf),be.bi_buf=0,be.bi_valid=0}function W(be,ke,Ge,ut){var pt=2*ke,vt=2*Ge;return be[pt]<be[vt]||be[pt]===be[vt]&&ut[ke]<=ut[Ge]}function V(be,ke,Ge){for(var ut=be.heap[Ge],pt=Ge<<1;pt<=be.heap_len&&(pt<be.heap_len&&W(ke,be.heap[pt+1],be.heap[pt],be.depth)&&pt++,!W(ke,ut,be.heap[pt],be.depth));)be.heap[Ge]=be.heap[pt],Ge=pt,pt<<=1;be.heap[Ge]=ut}function j(be,ke,Ge){var ut=0,pt,vt,kt,dt;if(be.last_lit!==0)for(;pt=be.pending_buf[be.d_buf+2*ut]<<8|be.pending_buf[be.d_buf+2*ut+1],vt=be.pending_buf[be.l_buf+ut],ut++,pt===0?Oe(be,vt,ke):(Oe(be,(kt=ge[vt])+256+1,ke),(dt=k[kt])!==0&&Se(be,vt-=xe[kt],dt),Oe(be,kt=ve(--pt),Ge),(dt=O[kt])!==0&&Se(be,pt-=fe[kt],dt)),ut<be.last_lit;);Oe(be,256,ke)}function se(be,ke){var Ge=ke.dyn_tree,ut=ke.stat_desc.static_tree,pt=ke.stat_desc.has_stree,vt=ke.stat_desc.elems,kt=-1,dt,Wt,Gt;for(be.heap_len=0,be.heap_max=573,dt=0;dt<vt;dt++)Ge[2*dt]===0?Ge[2*dt+1]=0:(be.heap[++be.heap_len]=kt=dt,be.depth[dt]=0);for(;2>be.heap_len;)Ge[2*(Gt=be.heap[++be.heap_len]=2>kt?++kt:0)]=1,be.depth[Gt]=0,be.opt_len--,pt&&(be.static_len-=ut[2*Gt+1]);for(ke.max_code=kt,dt=be.heap_len>>1;1<=dt;dt--)V(be,Ge,dt);for(Gt=vt;dt=be.heap[1],be.heap[1]=be.heap[be.heap_len--],V(be,Ge,1),Wt=be.heap[1],be.heap[--be.heap_max]=dt,be.heap[--be.heap_max]=Wt,Ge[2*Gt]=Ge[2*dt]+Ge[2*Wt],be.depth[Gt]=(be.depth[dt]>=be.depth[Wt]?be.depth[dt]:be.depth[Wt])+1,Ge[2*dt+1]=Ge[2*Wt+1]=Gt,be.heap[1]=Gt++,V(be,Ge,1),2<=be.heap_len;);be.heap[--be.heap_max]=be.heap[1],function(Ti,kr){var _n=kr.dyn_tree,Wa=kr.max_code,Ja=kr.stat_desc.static_tree,Za=kr.stat_desc.has_stree,jl=kr.stat_desc.extra_bits,Rp=kr.stat_desc.extra_base,Be=kr.stat_desc.max_length,Hi=0,ta,Pi,xn,yt,$o,vr;for(yt=0;yt<=15;yt++)Ti.bl_count[yt]=0;for(_n[2*Ti.heap[Ti.heap_max]+1]=0,ta=Ti.heap_max+1;573>ta;ta++)Be<(yt=_n[2*_n[2*(Pi=Ti.heap[ta])+1]+1]+1)&&(yt=Be,Hi++),_n[2*Pi+1]=yt,Wa<Pi||(Ti.bl_count[yt]++,$o=0,Rp<=Pi&&($o=jl[Pi-Rp]),vr=_n[2*Pi],Ti.opt_len+=vr*(yt+$o),Za&&(Ti.static_len+=vr*(Ja[2*Pi+1]+$o)));if(Hi!=0){do{for(yt=Be-1;Ti.bl_count[yt]===0;)yt--;Ti.bl_count[yt]--,Ti.bl_count[yt+1]+=2,Ti.bl_count[Be]--,Hi-=2}while(0<Hi);for(yt=Be;yt!==0;yt--)for(Pi=Ti.bl_count[yt];Pi!==0;)Wa<(xn=Ti.heap[--ta])||(_n[2*xn+1]!==yt&&(Ti.opt_len+=(yt-_n[2*xn+1])*_n[2*xn],_n[2*xn+1]=yt),Pi--)}}(be,ke),we(Ge,kt,be.bl_count)}function ye(be,ke,Ge){var ut=-1,pt=ke[1],vt=0,kt=7,dt=4,Wt,Gt;for(pt===0&&(kt=138,dt=3),ke[2*(Ge+1)+1]=65535,Wt=0;Wt<=Ge;Wt++)Gt=pt,pt=ke[2*(Wt+1)+1],++vt<kt&&Gt===pt||(vt<dt?be.bl_tree[2*Gt]+=vt:Gt===0?10>=vt?be.bl_tree[34]++:be.bl_tree[36]++:(Gt!==ut&&be.bl_tree[2*Gt]++,be.bl_tree[32]++),ut=Gt,dt=(vt=0)===pt?(kt=138,3):Gt===pt?(kt=6,3):(kt=7,4))}function ae(be,ke,Ge){var ut=-1,pt=ke[1],vt=0,kt=7,dt=4,Wt,Gt;for(pt===0&&(kt=138,dt=3),Wt=0;Wt<=Ge;Wt++)if(Gt=pt,pt=ke[2*(Wt+1)+1],!(++vt<kt&&Gt===pt)){if(vt<dt)for(;Oe(be,Gt,be.bl_tree),--vt!=0;);else Gt===0?10>=vt?(Oe(be,17,be.bl_tree),Se(be,vt-3,3)):(Oe(be,18,be.bl_tree),Se(be,vt-11,7)):(Gt!==ut&&(Oe(be,Gt,be.bl_tree),vt--),Oe(be,16,be.bl_tree),Se(be,vt-3,2));ut=Gt,dt=(vt=0)===pt?(kt=138,3):Gt===pt?(kt=6,3):(kt=7,4)}}function U(be,ke,Ge,ut){var pt,vt,kt;Se(be,0+(ut?1:0),3),vt=ke,kt=Ge,Ae(pt=be),_e(pt,kt),_e(pt,~kt),le.arraySet(pt.pending_buf,pt.window,vt,kt,pt.pending),pt.pending+=kt}var le=D("../utils/common"),re=15,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],O=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Z=Array(576);he(Z);var F=Array(60);he(F);var ie=Array(512);he(ie);var ge=Array(256);he(ge);var xe=Array(29);he(xe);var fe=Array(30),ze,He,et;he(fe);var Ve=!1;q._tr_init=function(be){Ve||(function(){var ke=Array(re+1),Ge,ut,pt,vt,kt;for(vt=pt=0;28>vt;vt++)for(xe[vt]=pt,Ge=0;Ge<1<<k[vt];Ge++)ge[pt++]=vt;for(ge[pt-1]=vt,vt=kt=0;16>vt;vt++)for(fe[vt]=kt,Ge=0;Ge<1<<O[vt];Ge++)ie[kt++]=vt;for(kt>>=7;30>vt;vt++)for(fe[vt]=kt<<7,Ge=0;Ge<1<<O[vt]-7;Ge++)ie[256+kt++]=vt;for(ut=0;ut<=re;ut++)ke[ut]=0;for(Ge=0;143>=Ge;)Z[2*Ge+1]=8,Ge++,ke[8]++;for(;255>=Ge;)Z[2*Ge+1]=9,Ge++,ke[9]++;for(;279>=Ge;)Z[2*Ge+1]=7,Ge++,ke[7]++;for(;287>=Ge;)Z[2*Ge+1]=8,Ge++,ke[8]++;for(we(Z,287,ke),Ge=0;30>Ge;Ge++)F[2*Ge+1]=5,F[2*Ge]=Te(Ge,5);ze=new te(Z,k,257,286,re),He=new te(F,O,0,30,re),et=new te([],C,0,19,7)}(),Ve=!0),be.l_desc=new me(be.dyn_ltree,ze),be.d_desc=new me(be.dyn_dtree,He),be.bl_desc=new me(be.bl_tree,et),be.bi_buf=0,be.bi_valid=0,Ie(be)},q._tr_stored_block=U,q._tr_flush_block=function(be,ke,Ge,ut){var pt=0,vt,kt;0<be.level?(be.strm.data_type===2&&(be.strm.data_type=function(dt){var Wt=4093624447,Gt;for(Gt=0;31>=Gt;Gt++,Wt>>>=1)if(1&Wt&&dt.dyn_ltree[2*Gt]!==0)return 0;if(dt.dyn_ltree[18]!==0||dt.dyn_ltree[20]!==0||dt.dyn_ltree[26]!==0)return 1;for(Gt=32;256>Gt;Gt++)if(dt.dyn_ltree[2*Gt]!==0)return 1;return 0}(be)),se(be,be.l_desc),se(be,be.d_desc),pt=function(dt){var Wt;for(ye(dt,dt.dyn_ltree,dt.l_desc.max_code),ye(dt,dt.dyn_dtree,dt.d_desc.max_code),se(dt,dt.bl_desc),Wt=18;3<=Wt&&dt.bl_tree[2*G[Wt]+1]===0;Wt--);return dt.opt_len+=3*(Wt+1)+5+5+4,Wt}(be),vt=be.opt_len+3+7>>>3,(kt=be.static_len+3+7>>>3)<=vt&&(vt=kt)):vt=kt=Ge+5,Ge+4<=vt&&ke!==-1?U(be,ke,Ge,ut):be.strategy===4||kt===vt?(Se(be,2+(ut?1:0),3),j(be,Z,F)):(Se(be,4+(ut?1:0),3),function(dt,Wt,Gt,Ti){var kr;for(Se(dt,Wt-257,5),Se(dt,Gt-1,5),Se(dt,Ti-4,4),kr=0;kr<Ti;kr++)Se(dt,dt.bl_tree[2*G[kr]+1],3);ae(dt,dt.dyn_ltree,Wt-1),ae(dt,dt.dyn_dtree,Gt-1)}(be,be.l_desc.max_code+1,be.d_desc.max_code+1,pt+1),j(be,be.dyn_ltree,be.dyn_dtree)),Ie(be),ut&&Ae(be)},q._tr_tally=function(be,ke,Ge){return be.pending_buf[be.d_buf+2*be.last_lit]=255&ke>>>8,be.pending_buf[be.d_buf+2*be.last_lit+1]=255&ke,be.pending_buf[be.l_buf+be.last_lit]=255&Ge,be.last_lit++,ke===0?be.dyn_ltree[2*Ge]++:(be.matches++,ke--,be.dyn_ltree[2*(ge[Ge]+256+1)]++,be.dyn_dtree[2*ve(ke)]++),be.last_lit===be.lit_bufsize-1},q._tr_align=function(be){var ke;Se(be,2,3),Oe(be,256,Z),(ke=be).bi_valid===16?(_e(ke,ke.bi_buf),ke.bi_buf=0,ke.bi_valid=0):8<=ke.bi_valid&&(ke.pending_buf[ke.pending++]=255&ke.bi_buf,ke.bi_buf>>=8,ke.bi_valid-=8)}},{"../utils/common":41}],53:[function(D,ne){ne.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(D,ne){ne.exports=typeof m=="function"?m:function(){var q=[].slice.apply(arguments);q.splice(1,0,0),setTimeout.apply(null,q)}},{}]},{},[10])(10)})}).call(this,K===void 0?typeof self>"u"?typeof window>"u"?{}:window:self:K)},{}]},{},[1])(1)})}).call(this,B===void 0?typeof self>"u"?typeof window>"u"?{}:window:self:B)},{}]},{},[1])(1)})}).call(this,T===void 0?typeof self>"u"?typeof window>"u"?{}:window:self:T)},{}]},{},[1])(1)})}).call(this,_===void 0?typeof self>"u"?typeof window>"u"?{}:window:self:_)},{}]},{},[1])(1)})}).call(this,typeof d>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:d)},{}]},{},[1])(1)})}).call(this)}).call(this,typeof Hn>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Hn,l("buffer").Buffer,l("timers").setImmediate)},{buffer:8,timers:22}],12:[function(l,u){function c(){}function d(I){if(typeof I!="function")throw new TypeError("resolver must be a function");this.state=T,this.queue=[],this.outcome=void 0,I!==c&&v(this,I)}function f(I,$,L){this.promise=I,typeof $=="function"&&(this.onFulfilled=$,this.callFulfilled=this.otherCallFulfilled),typeof L=="function"&&(this.onRejected=L,this.callRejected=this.otherCallRejected)}function m(I,$,L){_(function(){var B;try{B=$(L)}catch(z){return S.reject(I,z)}B===I?S.reject(I,new TypeError("Cannot resolve promise with itself")):S.resolve(I,B)})}function g(I){var $=I&&I.then;if(I&&(typeof I=="object"||typeof I=="function")&&typeof $=="function")return function(){$.apply(I,arguments)}}function v(I,$){function L(J){z||(z=!0,S.reject(I,J))}function B(J){z||(z=!0,S.resolve(I,J))}var z=!1,H=b(function(){$(B,L)});H.status==="error"&&L(H.value)}function b(I,$){var L={};try{L.value=I($),L.status="success"}catch(B){L.status="error",L.value=B}return L}var _=l("immediate"),S={},M=["REJECTED"],x=["FULFILLED"],T=["PENDING"];u.exports=d,d.prototype.finally=function(I){if(typeof I!="function")return this;var $=this.constructor;return this.then(function(L){return $.resolve(I()).then(function(){return L})},function(L){return $.resolve(I()).then(function(){throw L})})},d.prototype.catch=function(I){return this.then(null,I)},d.prototype.then=function(I,$){if(typeof I!="function"&&this.state===x||typeof $!="function"&&this.state===M)return this;var L=new this.constructor(c);if(this.state!==T){var B=this.state===x?I:$;m(L,B,this.outcome)}else this.queue.push(new f(L,I,$));return L},f.prototype.callFulfilled=function(I){S.resolve(this.promise,I)},f.prototype.otherCallFulfilled=function(I){m(this.promise,this.onFulfilled,I)},f.prototype.callRejected=function(I){S.reject(this.promise,I)},f.prototype.otherCallRejected=function(I){m(this.promise,this.onRejected,I)},S.resolve=function(I,$){var L=b(g,$);if(L.status==="error")return S.reject(I,L.value);var B=L.value;if(B)v(I,B);else{I.state=x,I.outcome=$;for(var z=-1,H=I.queue.length;++z<H;)I.queue[z].callFulfilled($)}return I},S.reject=function(I,$){I.state=M,I.outcome=$;for(var L=-1,B=I.queue.length;++L<B;)I.queue[L].callRejected($);return I},d.resolve=function(I){return I instanceof this?I:S.resolve(new this(c),I)},d.reject=function(I){var $=new this(c);return S.reject($,I)},d.all=function(I){function $(y,A){function N(D){H[A]=D,++J!==B||z||(z=!0,S.resolve(Q,H))}L.resolve(y).then(N,function(D){z||(z=!0,S.reject(Q,D))})}var L=this;if(Object.prototype.toString.call(I)!=="[object Array]")return this.reject(new TypeError("must be an array"));var B=I.length,z=!1;if(!B)return this.resolve([]);for(var H=Array(B),J=0,K=-1,Q=new this(c);++K<B;)$(I[K],K);return Q},d.race=function(I){function $(K){L.resolve(K).then(function(Q){z||(z=!0,S.resolve(J,Q))},function(Q){z||(z=!0,S.reject(J,Q))})}var L=this;if(Object.prototype.toString.call(I)!=="[object Array]")return this.reject(new TypeError("must be an array"));var B=I.length,z=!1;if(!B)return this.resolve([]);for(var H=-1,J=new this(c);++H<B;)$(I[H]);return J}},{immediate:10}],13:[function(l,u){(function(){function c(I,$){return Object.prototype.hasOwnProperty.call(I,$)}function d(){return 1}function f(I){T||typeof I=="string"||typeof I=="number"||(T=!0,console.error(new TypeError("LRU: key must be a string or number. Almost certainly a bug! "+typeof I).stack))}function m(I){return this instanceof m?(typeof I=="number"&&(I={max:I}),!I&&(I={}),this._max=I.max,(!this._max||typeof this._max!="number"||0>=this._max)&&(this._max=1/0),this._lengthCalculator=I.length||d,typeof this._lengthCalculator!="function"&&(this._lengthCalculator=d),this._allowStale=I.stale||!1,this._maxAge=I.maxAge||null,this._dispose=I.dispose,void this.reset()):new m(I)}function g(I,$,L){f($);var B=I._cache[$];return B&&(v(I,B)?(M(I,B),!I._allowStale&&(B=void 0)):L&&b(I,B),B&&(B=B.value)),B}function v(I,$){if(!$||!$.maxAge&&!I._maxAge)return!1;var L=!1,B=Date.now()-$.now;return L=$.maxAge?B>$.maxAge:I._maxAge&&B>I._maxAge,L}function b(I,$){S(I,$),$.lu=I._mru++,I._lruList[$.lu]=$}function _(I){for(;I._lru<I._mru&&I._length>I._max;)M(I,I._lruList[I._lru])}function S(I,$){for(delete I._lruList[$.lu];I._lru<I._mru&&!I._lruList[I._lru];)I._lru++}function M(I,$){$&&(I._dispose&&I._dispose($.key,$.value),I._length-=$.length,I._itemCount--,delete I._cache[$.key],S(I,$))}function x(I,$,L,B,z,H){this.key=I,this.value=$,this.lu=L,this.length=B,this.now=z,H&&(this.maxAge=H)}typeof u=="object"&&u.exports?u.exports=m:this.LRUCache=m;var T=!1;Object.defineProperty(m.prototype,"max",{set:function(I){I&&typeof I=="number"&&!(0>=I)||(I=1/0),this._max=I,this._length>this._max&&_(this)},get:function(){return this._max},enumerable:!0}),Object.defineProperty(m.prototype,"lengthCalculator",{set:function(I){if(typeof I!="function")for(var $ in this._lengthCalculator=d,this._length=this._itemCount,this._cache)this._cache[$].length=1;else for(var $ in this._lengthCalculator=I,this._length=0,this._cache)this._cache[$].length=this._lengthCalculator(this._cache[$].value),this._length+=this._cache[$].length;this._length>this._max&&_(this)},get:function(){return this._lengthCalculator},enumerable:!0}),Object.defineProperty(m.prototype,"length",{get:function(){return this._length},enumerable:!0}),Object.defineProperty(m.prototype,"itemCount",{get:function(){return this._itemCount},enumerable:!0}),m.prototype.forEach=function(I,$){$=$||this;for(var L=0,B=this._itemCount,z=this._mru-1;0<=z&&L<B;z--)if(this._lruList[z]){L++;var H=this._lruList[z];v(this,H)&&(M(this,H),!this._allowStale&&(H=void 0)),H&&I.call($,H.value,H.key,this)}},m.prototype.keys=function(){for(var I=Array(this._itemCount),$=0,L=this._mru-1;0<=L&&$<this._itemCount;L--)if(this._lruList[L]){var B=this._lruList[L];I[$++]=B.key}return I},m.prototype.values=function(){for(var I=Array(this._itemCount),$=0,L=this._mru-1;0<=L&&$<this._itemCount;L--)if(this._lruList[L]){var B=this._lruList[L];I[$++]=B.value}return I},m.prototype.reset=function(){if(this._dispose&&this._cache)for(var I in this._cache)this._dispose(I,this._cache[I].value);this._cache=Object.create(null),this._lruList=Object.create(null),this._mru=0,this._lru=0,this._length=0,this._itemCount=0},m.prototype.dump=function(){for(var I=[],$=0,L=this._mru-1;0<=L&&$<this._itemCount;L--)if(this._lruList[L]){var B=this._lruList[L];v(this,B)||(++$,I.push({k:B.key,v:B.value,e:B.now+(B.maxAge||0)}))}return I},m.prototype.dumpLru=function(){return this._lruList},m.prototype.set=function(I,$,L){L=L||this._maxAge,f(I);var B=L?Date.now():0,z=this._lengthCalculator($);if(c(this._cache,I))return z>this._max?(M(this,this._cache[I]),!1):(this._dispose&&this._dispose(I,this._cache[I].value),this._cache[I].now=B,this._cache[I].maxAge=L,this._cache[I].value=$,this._length+=z-this._cache[I].length,this._cache[I].length=z,this.get(I),this._length>this._max&&_(this),!0);var H=new x(I,$,this._mru++,z,B,L);return H.length>this._max?(this._dispose&&this._dispose(I,$),!1):(this._length+=H.length,this._lruList[H.lu]=this._cache[I]=H,this._itemCount++,this._length>this._max&&_(this),!0)},m.prototype.has=function(I){if(f(I),!c(this._cache,I))return!1;var $=this._cache[I];return!v(this,$)},m.prototype.get=function(I){return f(I),g(this,I,!0)},m.prototype.peek=function(I){return f(I),g(this,I,!1)},m.prototype.pop=function(){var I=this._lruList[this._lru];return M(this,I),I||null},m.prototype.del=function(I){f(I),M(this,this._cache[I])},m.prototype.load=function(I){this.reset();for(var $=Date.now(),L=I.length-1,B;0<=L;L--){B=I[L],f(B.k);var z=B.e||0;if(z===0)this.set(B.k,B.v);else{var H=z-$;0<H&&this.set(B.k,B.v,H)}}}})()},{}],14:[function(l,u){function c(g){var v=new f,b=v.write(g)+v.end();return b.replace(/\0/g,"").trim()}function d(g,v){if(!g)return c;try{new TextDecoder(g.trim())}catch{var b=m.exec(g);return b&&!v?d("windows-"+b[1],!0):c}return function(_){var S=new TextDecoder(g),M=S.decode(_,{stream:!0})+S.decode();return M.replace(/\0/g,"").trim()}}l("text-encoding-polyfill");var f=l("string_decoder").StringDecoder;u.exports=d;var m=/^(?:ANSI\s)?(\d+)$/m},{string_decoder:19,"text-encoding-polyfill":20}],15:[function(l,u){function c(v){var b={lastUpdated:new Date(v.readUInt8(1)+1900,v.readUInt8(2),v.readUInt8(3)),records:v.readUInt32LE(4),headerLen:v.readUInt16LE(8),recLen:v.readUInt16LE(10)};return b}function d(v,b,_){for(var S=[],M=32;M<b&&(S.push({name:_(v.slice(M,M+11)),dataType:o(v.readUInt8(M+11)),len:v.readUInt8(M+16),decimal:v.readUInt8(M+17)}),v.readUInt8(M+32)!==13);)M+=32;return S}function f(v,b,_,S,M){var x=v.slice(b,b+_),T=M(x);return S==="N"||S==="F"||S==="O"?parseFloat(T,10):S==="D"?new Date(T.slice(0,4),parseInt(T.slice(4,6),10)-1,T.slice(6,8)):S==="L"?T.toLowerCase()==="y"||T.toLowerCase()==="t":T}function m(v,b,_,S){for(var M={},x=0,T=_.length,I,$;x<T;)$=_[x],I=f(v,b,$.len,$.dataType,S),b+=$.len,typeof I<"u"&&(M[$.name]=I),x++;return M}var g=l("./decoder");u.exports=function(v,b){for(var _=g(b),S=c(v),M=d(v,S.headerLen-1,_),x=(M.length+1<<5)+2,T=S.recLen,I=S.records,$=[];I;)$.push(m(v,x,M,_)),x+=T,I--;return $}},{"./decoder":14}],16:[function(l,u){function c(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function f(B){if(M===setTimeout)return setTimeout(B,0);if((M===c||!M)&&setTimeout)return M=setTimeout,setTimeout(B,0);try{return M(B,0)}catch{try{return M.call(null,B,0)}catch{return M.call(this,B,0)}}}function m(B){if(x===clearTimeout)return clearTimeout(B);if((x===d||!x)&&clearTimeout)return x=clearTimeout,clearTimeout(B);try{return x(B)}catch{try{return x.call(null,B)}catch{return x.call(this,B)}}}function g(){I&&L&&(I=!1,L.length?T=L.concat(T):$=-1,T.length&&v())}function v(){if(!I){var B=f(g);I=!0;for(var z=T.length;z;){for(L=T,T=[];++$<z;)L&&L[$].run();$=-1,z=T.length}L=null,I=!1,m(B)}}function b(B,z){this.fun=B,this.array=z}function _(){}var S=u.exports={},M,x;(function(){try{M=typeof setTimeout=="function"?setTimeout:c}catch{M=c}try{x=typeof clearTimeout=="function"?clearTimeout:d}catch{x=d}})();var T=[],I=!1,$=-1,L;S.nextTick=function(B){var z=Array(arguments.length-1);if(1<arguments.length)for(var H=1;H<arguments.length;H++)z[H-1]=arguments[H];T.push(new b(B,z)),T.length!==1||I||f(v)},b.prototype.run=function(){this.fun.apply(null,this.array)},S.title="browser",S.browser=!0,S.env={},S.argv=[],S.version="",S.versions={},S.on=_,S.addListener=_,S.once=_,S.off=_,S.removeListener=_,S.removeAllListeners=_,S.emit=_,S.prependListener=_,S.prependOnceListener=_,S.listeners=function(){return[]},S.binding=function(){throw new Error("process.binding is not supported")},S.cwd=function(){return"/"},S.chdir=function(){throw new Error("process.chdir is not supported")},S.umask=function(){return 0}},{}],17:[function(l,u,c){(function(d,f){typeof c=="object"&&typeof u<"u"?u.exports=f():d.proj4=f()})(this,function(){var d=Math.asin,f=Math.acos,m=Number.NaN,g=Math.atan2,v=Math.round,b=Math.PI,_=Math.atan,S=Math.exp,M=Math.tan,x=Math.sin,T=Math.cos,I=Math.sqrt;function $(E,R){if(E[R])return E[R];for(var P=Object.keys(E),X=R.toLowerCase().replace(Rc,""),Y=-1,oe,pe;++Y<P.length;)if(oe=P[Y],pe=oe.toLowerCase().replace(Rc,""),pe===X)return E[oe]}function L(E){if(typeof E!="string")throw new Error("not a string");this.text=E.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function B(E){var R=new L(E);return R.output()}function z(E,R,P){Array.isArray(R)&&(P.unshift(R),R=null);var X=R?{}:E,Y=P.reduce(function(oe,pe){return H(pe,oe),oe},X);R&&(E[R]=Y)}function H(E,R){if(!Array.isArray(E))return void(R[E]=!0);var P=E.shift();if(P==="PARAMETER"&&(P=E.shift()),E.length===1)return Array.isArray(E[0])?(R[P]={},void H(E[0],R[P])):void(R[P]=E[0]);if(!E.length)return void(R[P]=!0);if(P==="TOWGS84")return void(R[P]=E);if(P==="AXIS")return P in R||(R[P]=[]),void R[P].push(E);Array.isArray(P)||(R[P]={});var X;switch(P){case"UNIT":case"PRIMEM":case"VERT_DATUM":return R[P]={name:E[0].toLowerCase(),convert:E[1]},void(E.length===3&&H(E[2],R[P]));case"SPHEROID":case"ELLIPSOID":return R[P]={name:E[0],a:E[1],rf:E[2]},void(E.length===4&&H(E[3],R[P]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return E[0]=["name",E[0]],void z(R,P,E);default:for(X=-1;++X<E.length;)if(!Array.isArray(E[X]))return H(E,R[P]);return z(R,P,E)}}function J(E,R){var P=R[0],X=R[1];!(P in E)&&X in E&&(E[P]=E[X],R.length===3&&(E[P]=R[2](E[P])))}function K(E){return E*Qe}function Q(E){function R(de){var Ee=E.to_meter||1;return de*Ee}if(E.type==="GEOGCS"?E.projName="longlat":E.type==="LOCAL_CS"?(E.projName="identity",E.local=!0):typeof E.PROJECTION=="object"?E.projName=Object.keys(E.PROJECTION)[0]:E.projName=E.PROJECTION,E.AXIS){for(var P="",X=0,Y=E.AXIS.length,oe;X<Y;++X)oe=[E.AXIS[X][0].toLowerCase(),E.AXIS[X][1].toLowerCase()],oe[0].indexOf("north")!==-1||(oe[0]==="y"||oe[0]==="lat")&&oe[1]==="north"?P+="n":oe[0].indexOf("south")!==-1||(oe[0]==="y"||oe[0]==="lat")&&oe[1]==="south"?P+="s":oe[0].indexOf("east")!==-1||(oe[0]==="x"||oe[0]==="lon")&&oe[1]==="east"?P+="e":(oe[0].indexOf("west")!==-1||(oe[0]==="x"||oe[0]==="lon")&&oe[1]==="west")&&(P+="w");P.length===2&&(P+="u"),P.length===3&&(E.axis=P)}E.UNIT&&(E.units=E.UNIT.name.toLowerCase(),E.units==="metre"&&(E.units="meter"),E.UNIT.convert&&(E.type==="GEOGCS"?E.DATUM&&E.DATUM.SPHEROID&&(E.to_meter=E.UNIT.convert*E.DATUM.SPHEROID.a):E.to_meter=E.UNIT.convert));var pe=E.GEOGCS;E.type==="GEOGCS"&&(pe=E),pe&&(E.datumCode=pe.DATUM?pe.DATUM.name.toLowerCase():pe.name.toLowerCase(),E.datumCode.slice(0,2)==="d_"&&(E.datumCode=E.datumCode.slice(2)),(E.datumCode==="new_zealand_geodetic_datum_1949"||E.datumCode==="new_zealand_1949")&&(E.datumCode="nzgd49"),(E.datumCode==="wgs_1984"||E.datumCode==="world_geodetic_system_1984")&&(E.PROJECTION==="Mercator_Auxiliary_Sphere"&&(E.sphere=!0),E.datumCode="wgs84"),E.datumCode.slice(-6)==="_ferro"&&(E.datumCode=E.datumCode.slice(0,-6)),E.datumCode.slice(-8)==="_jakarta"&&(E.datumCode=E.datumCode.slice(0,-8)),~E.datumCode.indexOf("belge")&&(E.datumCode="rnb72"),pe.DATUM&&pe.DATUM.SPHEROID&&(E.ellps=pe.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),E.ellps.toLowerCase().slice(0,13)==="international"&&(E.ellps="intl"),E.a=pe.DATUM.SPHEROID.a,E.rf=parseFloat(pe.DATUM.SPHEROID.rf,10)),pe.DATUM&&pe.DATUM.TOWGS84&&(E.datum_params=pe.DATUM.TOWGS84),~E.datumCode.indexOf("osgb_1936")&&(E.datumCode="osgb36"),~E.datumCode.indexOf("osni_1952")&&(E.datumCode="osni52"),(~E.datumCode.indexOf("tm65")||~E.datumCode.indexOf("geodetic_datum_of_1965"))&&(E.datumCode="ire65"),E.datumCode==="ch1903+"&&(E.datumCode="ch1903"),~E.datumCode.indexOf("israel")&&(E.datumCode="isr93")),E.b&&!isFinite(E.b)&&(E.b=E.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",K],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",K],["x0","false_easting",R],["y0","false_northing",R],["long0","central_meridian",K],["lat0","latitude_of_origin",K],["lat0","standard_parallel_1",K],["lat1","standard_parallel_1",K],["lat2","standard_parallel_2",K],["azimuth","Azimuth"],["alpha","azimuth",K],["srsCode","name"]].forEach(function(de){return J(E,de)}),!E.long0&&E.longc&&(E.projName==="Albers_Conic_Equal_Area"||E.projName==="Lambert_Azimuthal_Equal_Area")&&(E.long0=E.longc),!E.lat_ts&&E.lat1&&(E.projName==="Stereographic_South_Pole"||E.projName==="Polar Stereographic (variant B)")&&(E.lat0=K(0<E.lat1?90:-90),E.lat_ts=E.lat1)}function y(E){var R=this;if(arguments.length===2){var P=arguments[1];y[E]=typeof P=="string"?P.charAt(0)==="+"?hy(arguments[1]):ot(arguments[1]):P}else if(arguments.length===1){if(Array.isArray(E))return E.map(function(X){Array.isArray(X)?y.apply(R,X):y(X)});if(typeof E!="string")"EPSG"in E?y["EPSG:"+E.EPSG]=E:"ESRI"in E?y["ESRI:"+E.ESRI]=E:"IAU2000"in E?y["IAU2000:"+E.IAU2000]=E:console.log(E);else if(E in y)return y[E]}}function A(E){return typeof E=="string"}function N(E){return E in y}function D(E){return fi.some(function(R){return-1<E.indexOf(R)})}function ne(E){var R=$(E,"authority");if(R){var P=$(R,"epsg");return P&&-1<Ts.indexOf(P)}}function q(E){var R=$(E,"extension");return R?$(R,"proj4"):void 0}function he(E){return E[0]==="+"}function te(E){if(A(E)){if(N(E))return y[E];if(D(E)){var R=ot(E);if(ne(R))return y["EPSG:3857"];var P=q(R);return P?hy(P):R}if(he(E))return hy(E)}else return E}function me(){var E=this.b/this.a;this.es=1-E*E,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=I(this.es),this.lat_ts?this.sphere?this.k0=T(this.lat_ts):this.k0=Lr(this.e,x(this.lat_ts),T(this.lat_ts)):!this.k0&&(this.k?this.k0=this.k:this.k0=1)}function ve(E){return E}function _e(E,R){var P=py.length;return E.names?(py[P]=E,E.names.forEach(function(X){ku[X.toLowerCase()]=P}),this):(console.log(R),!0)}function Se(E,R,P,X){var Y=E*E,oe=R*R,pe=(Y-oe)/Y,de=0;X?(E*=1-pe*(b1+pe*(ni+pe*f_)),Y=E*E,pe=0):de=I(pe);var Ee=(Y-oe)/oe;return{es:pe,e:de,ep2:Ee}}function Oe(E,R,P,X,Y){if(!E){var oe=$(ei,X);oe||(oe=V$),E=oe.a,R=oe.b,P=oe.rf}return P&&!R&&(R=(1-1/P)*E),(P===0||s(E-R)<wt)&&(Y=!0,R=E),{a:E,b:R,rf:P,sphere:Y}}function Te(E,R,P,X,Y,oe,pe){var de={};return de.datum_type=E===void 0||E==="none"?5:4,R&&(de.datum_params=R.map(parseFloat),(de.datum_params[0]!==0||de.datum_params[1]!==0||de.datum_params[2]!==0)&&(de.datum_type=1),3<de.datum_params.length&&(de.datum_params[3]!==0||de.datum_params[4]!==0||de.datum_params[5]!==0||de.datum_params[6]!==0)&&(de.datum_type=2,de.datum_params[3]*=Fn,de.datum_params[4]*=Fn,de.datum_params[5]*=Fn,de.datum_params[6]=de.datum_params[6]/1e6+1)),pe&&(de.datum_type=3,de.grids=pe),de.a=P,de.b=X,de.es=Y,de.ep2=oe,de}function we(E,R){var P=new DataView(R),X=V(P),Y=j(P,X);1<Y.nSubgrids&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var oe=ye(P,Y,X),pe={header:Y,subgrids:oe};return AE[E]=pe,pe}function Ie(E){if(E===void 0)return null;var R=E.split(",");return R.map(Ae)}function Ae(E){if(E.length===0)return null;var R=E[0]==="@";return R&&(E=E.slice(1)),E==="null"?{name:"null",mandatory:!R,grid:null,isNull:!0}:{name:E,mandatory:!R,grid:AE[E]||null,isNull:!1}}function W(E){return E/3600*b/180}function V(E){var R=E.getInt32(8,!1);return R!==11&&(R=E.getInt32(8,!0),R!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function j(E,R){return{nFields:E.getInt32(8,R),nSubgridFields:E.getInt32(24,R),nSubgrids:E.getInt32(40,R),shiftType:se(E,56,64).trim(),fromSemiMajorAxis:E.getFloat64(120,R),fromSemiMinorAxis:E.getFloat64(136,R),toSemiMajorAxis:E.getFloat64(152,R),toSemiMinorAxis:E.getFloat64(168,R)}}function se(E,R,P){return o.apply(null,new Uint8Array(E.buffer.slice(R,P)))}function ye(E,R,P){for(var X=176,Y=[],oe=0;oe<R.nSubgrids;oe++){var pe=U(E,X,P),de=le(E,X,pe,P),Ee=v(1+(pe.upperLongitude-pe.lowerLongitude)/pe.longitudeInterval),Fe=v(1+(pe.upperLatitude-pe.lowerLatitude)/pe.latitudeInterval);Y.push({ll:[W(pe.lowerLongitude),W(pe.lowerLatitude)],del:[W(pe.longitudeInterval),W(pe.latitudeInterval)],lim:[Ee,Fe],count:pe.gridNodeCount,cvs:ae(de)})}return Y}function ae(E){return E.map(function(R){return[W(R.longitudeShift),W(R.latitudeShift)]})}function U(E,R,P){return{name:se(E,R+8,R+16).trim(),parent:se(E,R+24,R+24+8).trim(),lowerLatitude:E.getFloat64(R+72,P),upperLatitude:E.getFloat64(R+88,P),lowerLongitude:E.getFloat64(R+104,P),upperLongitude:E.getFloat64(R+120,P),latitudeInterval:E.getFloat64(R+136,P),longitudeInterval:E.getFloat64(R+152,P),gridNodeCount:E.getInt32(R+168,P)}}function le(E,R,P,X){for(var Y=R+176,oe=16,pe=[],de=0,Ee;de<P.gridNodeCount;de++)Ee={latitudeShift:E.getFloat32(Y+de*oe,X),longitudeShift:E.getFloat32(Y+de*oe+4,X),latitudeAccuracy:E.getFloat32(Y+de*oe+8,X),longitudeAccuracy:E.getFloat32(Y+de*oe+12,X)},pe.push(Ee);return pe}function re(E,R){if(!(this instanceof re))return new re(E);R=R||function(Fe){if(Fe)throw Fe};var P=te(E);if(typeof P!="object")return void R(E);var X=re.projections.get(P.projName);if(!X)return void R(E);if(P.datumCode&&P.datumCode!=="none"){var Y=$(B$,P.datumCode);Y&&(P.datum_params=P.datum_params||(Y.towgs84?Y.towgs84.split(","):null),P.ellps=Y.ellipse,P.datumName=Y.datumName?Y.datumName:P.datumCode)}P.k0=P.k0||1,P.axis=P.axis||"enu",P.ellps=P.ellps||"wgs84",P.lat1=P.lat1||P.lat0;var oe=Oe(P.a,P.b,P.rf,P.ellps,P.sphere),pe=Se(oe.a,oe.b,oe.rf,P.R_A),de=Ie(P.nadgrids),Ee=P.datum||Te(P.datumCode,P.datum_params,oe.a,oe.b,pe.es,pe.ep2,de);mr(this,P),mr(this,X),this.a=oe.a,this.b=oe.b,this.rf=oe.rf,this.sphere=oe.sphere,this.es=pe.es,this.e=pe.e,this.ep2=pe.ep2,this.datum=Ee,this.init(),R(null,this)}function k(E,R){return E.datum_type===R.datum_type&&!(E.a!==R.a||5e-11<s(E.es-R.es))&&(E.datum_type===1?E.datum_params[0]===R.datum_params[0]&&E.datum_params[1]===R.datum_params[1]&&E.datum_params[2]===R.datum_params[2]:E.datum_type!==2||E.datum_params[0]===R.datum_params[0]&&E.datum_params[1]===R.datum_params[1]&&E.datum_params[2]===R.datum_params[2]&&E.datum_params[3]===R.datum_params[3]&&E.datum_params[4]===R.datum_params[4]&&E.datum_params[5]===R.datum_params[5]&&E.datum_params[6]===R.datum_params[6])}function O(E,R,P){var X=E.x,Y=E.y,oe=E.z?E.z:0,pe,de,Ee,Fe;if(Y<-lt&&Y>-1.001*lt)Y=-lt;else if(Y>lt&&Y<1.001*lt)Y=lt;else{if(Y<-lt)return{x:-1/0,y:-1/0,z:E.z};if(Y>lt)return{x:1/0,y:1/0,z:E.z}}return X>b&&(X-=2*b),de=x(Y),Fe=T(Y),Ee=de*de,pe=P/I(1-R*Ee),{x:(pe+oe)*Fe*T(X),y:(pe+oe)*Fe*x(X),z:(pe*(1-R)+oe)*de}}function C(E,R,P,X){var Y=1e-12,oe=E.x,pe=E.y,de=E.z?E.z:0,Ee,Fe,We,je,Ke,ft,xt,ct,jt,yi,Ai,oi,sr,Xi,wr,eo;if(Ee=I(oe*oe+pe*pe),Fe=I(oe*oe+pe*pe+de*de),!(Ee/P<Y))Xi=g(pe,oe);else if(Xi=0,Fe/P<Y)return wr=lt,eo=-X,{x:E.x,y:E.y,z:E.z};We=de/Fe,je=Ee/Fe,Ke=1/I(1-R*(2-R)*je*je),ct=je*(1-R)*Ke,jt=We*Ke,sr=0;do sr++,xt=P/I(1-R*jt*jt),eo=Ee*ct+de*jt-xt*(1-R*jt*jt),ft=R*xt/(xt+eo),Ke=1/I(1-ft*(2-ft)*je*je),yi=je*(1-ft)*Ke,Ai=We*Ke,oi=Ai*ct-yi*jt,ct=yi,jt=Ai;while(oi*oi>Y*Y&&sr<30);return wr=_(Ai/s(yi)),{x:Xi,y:wr,z:eo}}function G(E,R,P){if(R===1)return{x:E.x+P[0],y:E.y+P[1],z:E.z+P[2]};if(R===2){var X=P[0],Y=P[1],oe=P[2],pe=P[3],de=P[4],Ee=P[5],Fe=P[6];return{x:Fe*(E.x-Ee*E.y+de*E.z)+X,y:Fe*(Ee*E.x+E.y-pe*E.z)+Y,z:Fe*(-de*E.x+pe*E.y+E.z)+oe}}}function Z(E,R,P){if(R===1)return{x:E.x-P[0],y:E.y-P[1],z:E.z-P[2]};if(R===2){var X=P[0],Y=P[1],oe=P[2],pe=P[3],de=P[4],Ee=P[5],Fe=P[6],We=(E.x-X)/Fe,je=(E.y-Y)/Fe,Ke=(E.z-oe)/Fe;return{x:We+Ee*je-de*Ke,y:-Ee*We+je+pe*Ke,z:de*We-pe*je+Ke}}}function F(E){return E===1||E===2}function ie(E,R,P){if(E.grids===null||E.grids.length===0)return console.log("Grid shift grids not found"),-1;for(var X={x:-P.x,y:P.y},Y={x:m,y:m},oe=[],pe=0,de;pe<E.grids.length;pe++){if(de=E.grids[pe],oe.push(de.name),de.isNull){Y=X;break}if(de.grid===null){if(de.mandatory)return console.log("Unable to find mandatory grid '"+de.name+"'"),-1;continue}var Ee=de.grid.subgrids[0],Fe=(s(Ee.del[1])+s(Ee.del[0]))/1e4,We=Ee.ll[0]-Fe,je=Ee.ll[1]-Fe,Ke=Ee.ll[0]+(Ee.lim[0]-1)*Ee.del[0]+Fe,ft=Ee.ll[1]+(Ee.lim[1]-1)*Ee.del[1]+Fe;if(!(je>X.y||We>X.x||ft<X.y||Ke<X.x)&&(Y=ge(X,R,Ee),!isNaN(Y.x)))break}return isNaN(Y.x)?(console.log("Failed to find a grid shift table for location '"+-X.x*ia+" "+X.y*ia+" tried: '"+oe+"'"),-1):(P.x=-Y.x,P.y=Y.y,0)}function ge(E,R,P){var X={x:m,y:m};if(isNaN(E.x))return X;var Y={x:E.x,y:E.y};Y.x-=P.ll[0],Y.y-=P.ll[1],Y.x=Lt(Y.x-b)+b;var oe=xe(Y,P);if(R){if(isNaN(oe.x))return X;oe.x=Y.x-oe.x,oe.y=Y.y-oe.y;var pe=9,de=1e-12,Ee,Fe;do{if(Fe=xe(oe,P),isNaN(Fe.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}Ee={x:Y.x-(Fe.x+oe.x),y:Y.y-(Fe.y+oe.y)},oe.x+=Ee.x,oe.y+=Ee.y}while(pe--&&s(Ee.x)>de&&s(Ee.y)>de);if(0>pe)return console.log("Inverse grid shift iterator failed to converge."),X;X.x=Lt(oe.x+P.ll[0]),X.y=oe.y+P.ll[1]}else isNaN(oe.x)||(X.x=E.x+oe.x,X.y=E.y+oe.y);return X}function xe(E,R){var P={x:E.x/R.del[0],y:E.y/R.del[1]},X={x:i(P.x),y:i(P.y)},Y={x:P.x-1*X.x,y:P.y-1*X.y},oe={x:m,y:m},pe;if(0>X.x||X.x>=R.lim[0]||0>X.y||X.y>=R.lim[1])return oe;pe=X.y*R.lim[0]+X.x;var de={x:R.cvs[pe][0],y:R.cvs[pe][1]};pe++;var Ee={x:R.cvs[pe][0],y:R.cvs[pe][1]};pe+=R.lim[0];var Fe={x:R.cvs[pe][0],y:R.cvs[pe][1]};pe--;var We={x:R.cvs[pe][0],y:R.cvs[pe][1]},je=Y.x*Y.y,Ke=Y.x*(1-Y.y),ft=(1-Y.x)*(1-Y.y),xt=(1-Y.x)*Y.y;return oe.x=ft*de.x+Ke*Ee.x+xt*We.x+je*Fe.x,oe.y=ft*de.y+Ke*Ee.y+xt*We.y+je*Fe.y,oe}function fe(E){var R=Number.isFinite;if(typeof R=="function"){if(R(E))return;throw new TypeError("coordinates must be finite numbers")}if(typeof E!="number"||E!==E||!isFinite(E))throw new TypeError("coordinates must be finite numbers")}function ze(E,R){return(E.datum.datum_type===1||E.datum.datum_type===2)&&R.datumCode!=="WGS84"||(R.datum.datum_type===1||R.datum.datum_type===2)&&E.datumCode!=="WGS84"}function He(E,R,P){var X;if(Array.isArray(P)&&(P=$E(P)),OE(P),E.datum&&R.datum&&ze(E,R)&&(X=new re("WGS84"),P=He(E,X,P),E=X),E.axis!=="enu"&&(P=CE(E,!1,P)),E.projName==="longlat")P={x:P.x*Es,y:P.y*Es,z:P.z||0};else if(E.to_meter&&(P={x:P.x*E.to_meter,y:P.y*E.to_meter,z:P.z||0}),P=E.inverse(P),!P)return;return E.from_greenwich&&(P.x+=E.from_greenwich),P=z$(E.datum,R.datum,P),!P?void 0:(R.from_greenwich&&(P={x:P.x-R.from_greenwich,y:P.y,z:P.z||0}),R.projName==="longlat"?P={x:P.x*ia,y:P.y*ia,z:P.z||0}:(P=R.forward(P),R.to_meter&&(P={x:P.x/R.to_meter,y:P.y/R.to_meter,z:P.z||0})),R.axis==="enu"?P:CE(R,!0,P))}function et(E,R,P){var X,Y,oe;return Array.isArray(P)?(X=He(E,R,P)||{x:NaN,y:NaN},2<P.length?typeof E.name<"u"&&E.name==="geocent"||typeof R.name<"u"&&R.name==="geocent"?typeof X.z=="number"?[X.x,X.y,X.z].concat(P.splice(3)):[X.x,X.y,P[2]].concat(P.splice(3)):[X.x,X.y].concat(P.splice(2)):[X.x,X.y]):(Y=He(E,R,P),oe=Object.keys(P),oe.length===2||oe.forEach(function(pe){if(typeof E.name<"u"&&E.name==="geocent"||typeof R.name<"u"&&R.name==="geocent"){if(pe==="x"||pe==="y"||pe==="z")return}else if(pe==="x"||pe==="y")return;Y[pe]=P[pe]}),Y)}function Ve(E){return E instanceof re?E:E.oProj?E.oProj:re(E)}function be(E,R,P){E=Ve(E);var X=!1,Y;return typeof R>"u"?(R=E,E=Lc,X=!0):(typeof R.x<"u"||Array.isArray(R))&&(P=R,R=E,E=Lc,X=!0),R=Ve(R),P?et(E,R,P):(Y={forward:function(oe){return et(E,R,oe)},inverse:function(oe){return et(R,E,oe)}},X&&(Y.oProj=R),Y)}function ke(E,R){return R=R||5,Wt(vt({lat:E[1],lon:E[0]}),R)}function Ge(E){var R=kt(_n(E.toUpperCase()));return R.lat&&R.lon?[R.lon,R.lat]:[(R.left+R.right)/2,(R.top+R.bottom)/2]}function ut(E){return E*(b/180)}function pt(E){return 180*(E/b)}function vt(E){var R=E.lat,P=E.lon,X=6378137,Y=.00669438,oe=.9996,pe=ut(R),de,Ee,Fe,We,je,Ke;Ke=i((P+180)/6)+1,P===180&&(Ke=60),56<=R&&64>R&&3<=P&&12>P&&(Ke=32),72<=R&&84>R&&(0<=P&&9>P?Ke=31:9<=P&&21>P?Ke=33:21<=P&&33>P?Ke=35:33<=P&&42>P&&(Ke=37)),de=Y/(1-Y),Ee=X/I(1-Y*x(pe)*x(pe)),Fe=M(pe)*M(pe),We=de*T(pe)*T(pe),je=X*((1-Y/4-3*Y*Y/64-5*Y*Y*Y/256)*pe-(3*Y/8+3*Y*Y/32+45*Y*Y*Y/1024)*x(2*pe)+(15*Y*Y/256+45*Y*Y*Y/1024)*x(4*pe)-35*Y*Y*Y/3072*x(6*pe));var ft=oe*Ee*(65+65*(65*(65*(1-Fe+We)))/6+65*(65*(65*(65*(65*(5-18*Fe+Fe*Fe+72*We-58*de)))))/120)+5e5,xt=oe*(je+Ee*M(pe)*(4225/2+65*(65*(65*(65*(5-Fe+9*We+4*We*We))))/24+65*(65*(65*(65*(65*(65*(61-58*Fe+Fe*Fe+600*We-330*de))))))/720));return 0>R&&(xt+=1e7),{northing:v(xt),easting:v(ft),zoneNumber:Ke,zoneLetter:dt(R)}}function kt(E){var R=E.northing,P=E.easting,X=E.zoneLetter,Y=E.zoneNumber;if(0>Y||60<Y)return null;var oe=.9996,pe=6378137,de=.00669438,Ee=(1-I(1-de))/(1+I(1-de)),Fe=R,We,je,Ke,ft,xt,ct,jt,yi,Ai,oi;"N">X&&(Fe-=1e7),yi=6*(Y-1)-180+3,We=de/(1-de),jt=Fe/oe,Ai=jt/(pe*(1-de/4-3*de*de/64-5*de*de*de/256)),oi=Ai+(3*Ee/2-27*Ee*Ee*Ee/32)*x(2*Ai)+(21*Ee*Ee/16-55*Ee*Ee*Ee*Ee/32)*x(4*Ai)+151*Ee*Ee*Ee/96*x(6*Ai),je=pe/I(1-de*x(oi)*x(oi)),Ke=M(oi)*M(oi),ft=We*T(oi)*T(oi),xt=pe*(1-de)/n(1-de*x(oi)*x(oi),1.5),ct=(P-5e5)/(je*oe);var sr=oi-je*M(oi)/xt*(ct*ct/2-(5+3*Ke+10*ft-4*ft*ft-9*We)*ct*ct*ct*ct/24+(61+90*Ke+298*ft+45*Ke*Ke-252*We-3*ft*ft)*ct*ct*ct*ct*ct*ct/720);sr=pt(sr);var Xi=(ct-(1+2*Ke+ft)*ct*ct*ct/6+(5-2*ft+28*Ke-3*ft*ft+8*We+24*Ke*Ke)*ct*ct*ct*ct*ct/120)/T(oi);Xi=yi+pt(Xi);var wr;if(E.accuracy){var eo=kt({northing:E.northing+E.accuracy,easting:E.easting+E.accuracy,zoneLetter:E.zoneLetter,zoneNumber:E.zoneNumber});wr={top:eo.lat,right:eo.lon,bottom:sr,left:Xi}}else wr={lat:sr,lon:Xi};return wr}function dt(E){var R="Z";return 84>=E&&72<=E?R="X":72>E&&64<=E?R="W":64>E&&56<=E?R="V":56>E&&48<=E?R="U":48>E&&40<=E?R="T":40>E&&32<=E?R="S":32>E&&24<=E?R="R":24>E&&16<=E?R="Q":16>E&&8<=E?R="P":8>E&&0<=E?R="N":0>E&&-8<=E?R="M":-8>E&&-16<=E?R="L":-16>E&&-24<=E?R="K":-24>E&&-32<=E?R="J":-32>E&&-40<=E?R="H":-40>E&&-48<=E?R="G":-48>E&&-56<=E?R="F":-56>E&&-64<=E?R="E":-64>E&&-72<=E?R="D":-72>E&&-80<=E&&(R="C"),R}function Wt(E,R){var P="00000"+E.easting,X="00000"+E.northing;return E.zoneNumber+E.zoneLetter+Gt(E.easting,E.northing,E.zoneNumber)+P.substr(P.length-5,R)+X.substr(X.length-5,R)}function Gt(E,R,P){var X=Ti(P),Y=i(E/1e5),oe=i(R/1e5)%20;return kr(Y,oe,X)}function Ti(E){var R=E%6;return R===0&&(R=6),R}function kr(E,R,P){var X=P-1,Y="AJSAJS".charCodeAt(X),oe="AFAFAF".charCodeAt(X),pe=Y+E-1,de=oe+R,Ee=!1;90<pe&&(pe=pe-90+65-1,Ee=!0),(pe===73||73>Y&&73<pe||(73<pe||73>Y)&&Ee)&&pe++,(pe===79||79>Y&&79<pe||(79<pe||79>Y)&&Ee)&&(pe++,pe===73&&pe++),90<pe&&(pe=pe-90+65-1),86<de?(de=de-86+65-1,Ee=!0):Ee=!1,(de===73||73>oe&&73<de||(73<de||73>oe)&&Ee)&&de++,(de===79||79>oe&&79<de||(79<de||79>oe)&&Ee)&&(de++,de===73&&de++),86<de&&(de=de-86+65-1);var Fe=o(pe)+o(de);return Fe}function _n(E){if(E&&E.length===0)throw"MGRSPoint coverting from nothing";for(var R=E.length,P=null,X="",Y=0,oe;!/[A-Z]/.test(oe=E.charAt(Y));){if(2<=Y)throw"MGRSPoint bad conversion from: "+E;X+=oe,Y++}var pe=parseInt(X,10);if(Y===0||Y+3>R)throw"MGRSPoint bad conversion from: "+E;var de=E.charAt(Y++);if("A">=de||de==="B"||de==="Y"||"Z"<=de||de==="I"||de==="O")throw"MGRSPoint zone letter "+de+" not handled: "+E;P=E.substring(Y,Y+=2);for(var Ee=Ti(pe),Fe=Wa(P.charAt(0),Ee),We=Ja(P.charAt(1),Ee);We<Za(de);)We+=2e6;var je=R-Y;if(je%2!=0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+E;var Ke=je/2,ft=0,xt=0,ct,jt,yi,Ai,oi;return 0<Ke&&(ct=1e5/n(10,Ke),jt=E.substring(Y,Y+Ke),ft=parseFloat(jt)*ct,yi=E.substring(Y+Ke),xt=parseFloat(yi)*ct),Ai=ft+Fe,oi=xt+We,{easting:Ai,northing:oi,zoneLetter:de,zoneNumber:pe,accuracy:ct}}function Wa(E,R){for(var P="AJSAJS".charCodeAt(R-1),X=1e5,Y=!1;P!==E.charCodeAt(0);){if(P++,P===73&&P++,P===79&&P++,90<P){if(Y)throw"Bad character: "+E;P=65,Y=!0}X+=1e5}return X}function Ja(E,R){if("V"<E)throw"MGRSPoint given invalid Northing "+E;for(var P="AFAFAF".charCodeAt(R-1),X=0,Y=!1;P!==E.charCodeAt(0);){if(P++,P===73&&P++,P===79&&P++,86<P){if(Y)throw"Bad character: "+E;P=65,Y=!0}X+=1e5}return X}function Za(E){var R;if(R=E==="C"?11e5:E==="D"?2e6:E==="E"?28e5:E==="F"?37e5:E==="G"?46e5:E==="H"?55e5:E==="J"?64e5:E==="K"?73e5:E==="L"?82e5:E==="M"?91e5:E==="N"?0:E==="P"?8e5:E==="Q"?17e5:E==="R"?26e5:E==="S"?35e5:E==="T"?44e5:E==="U"?53e5:E==="V"?62e5:E==="W"?7e6:E==="X"?79e5:-1,0<=R)return R;throw"Invalid zone letter: "+E}function jl(E,R,P){if(!(this instanceof jl))return new jl(E,R,P);if(Array.isArray(E))this.x=E[0],this.y=E[1],this.z=E[2]||0;else if(typeof E=="object")this.x=E.x,this.y=E.y,this.z=E.z||0;else if(typeof E=="string"&&typeof R>"u"){var X=E.split(",");this.x=parseFloat(X[0],10),this.y=parseFloat(X[1],10),this.z=parseFloat(X[2],10)||0}else this.x=E,this.y=R,this.z=P||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}function Rp(E){var R=typeof E.PROJECTION=="object"?Object.keys(E.PROJECTION)[0]:E.PROJECTION;return"no_uoff"in E||"no_off"in E||["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(R)!==-1}function Be(){var E=Math.pi,R=0,P=0,X=0,Y=0,oe=0,pe=0,de=0,Ee,Fe,We,je,Ke,ft,xt,ct,jt,yi,Ai;this.no_off=Rp(this),this.no_rot="no_rot"in this;var oi=!1;"alpha"in this&&(oi=!0);var sr=!1;if("rectified_grid_angle"in this&&(sr=!0),oi&&(de=this.alpha),sr&&(R=this.rectified_grid_angle*Es),oi||sr)P=this.longc;else if(X=this.long1,oe=this.lat1,Y=this.long2,pe=this.lat2,s(oe-pe)<=Ka||(Ee=s(oe))<=Ka||s(Ee-lt)<=Ka||s(s(this.lat0)-lt)<=Ka||s(s(pe)-lt)<=Ka)throw new Error;var Xi=1-this.es;Fe=I(Xi),s(this.lat0)>wt?(ct=x(this.lat0),We=T(this.lat0),Ee=1-this.es*ct*ct,this.B=We*We,this.B=I(1+this.es*this.B*this.B/Xi),this.A=this.B*this.k0*Fe/Ee,je=this.B*Fe/(We*I(Ee)),Ke=je*je-1,0>=Ke?Ke=0:(Ke=I(Ke),0>this.lat0&&(Ke=-Ke)),this.E=Ke+=je,this.E*=n(Ya(this.e,this.lat0,ct),this.B)):(this.B=1/Fe,this.A=this.k0,this.E=je=Ke=1),oi||sr?(oi?(Ai=d(x(de)/je),!sr&&(R=de)):(Ai=R,de=d(je*x(Ai))),this.lam0=P-d(.5*(Ke-1/Ke)*M(Ai))/this.B):(ft=n(Ya(this.e,oe,x(oe)),this.B),xt=n(Ya(this.e,pe,x(pe)),this.B),Ke=this.E/ft,jt=(xt-ft)/(xt+ft),yi=this.E*this.E,yi=(yi-xt*ft)/(yi+xt*ft),Ee=X-Y,Ee<-E?Y-=Xh:Ee>E&&(Y+=Xh),this.lam0=Lt(.5*(X+Y)-_(yi*M(.5*this.B*(X-Y))/jt)/this.B),Ai=_(2*x(this.B*Lt(X-this.lam0))/(Ke-1/Ke)),R=de=d(je*x(Ai))),this.singam=x(Ai),this.cosgam=T(Ai),this.sinrot=x(R),this.cosrot=T(R),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=s(this.ArB*_(I(je*je-1)/T(de))),0>this.lat0&&(this.u_0=-this.u_0)),Ke=.5*Ai,this.v_pole_n=this.ArB*r(M(Ni-Ke)),this.v_pole_s=this.ArB*r(M(Ni+Ke))}function Hi(E){var R=[],P;return R[0]=E*zfe,P=E*E,R[0]+=P*Gfe,R[1]=P*Hfe,P*=E,R[0]+=P*qfe,R[1]+=P*Wfe,R[2]=P*Jfe,R}function ta(E,R){var P=E+E;return E+R[0]*x(P)+R[1]*x(P+P)+R[2]*x(P+P+P)}function Pi(E,R,P,X){var Y;return E<wt?(X.value=rr.AREA_0,Y=0):(Y=g(R,P),s(Y)<=Ni?X.value=rr.AREA_0:Y>Ni&&Y<=lt+Ni?(X.value=rr.AREA_1,Y-=lt):Y>lt+Ni||Y<=-(lt+Ni)?(X.value=rr.AREA_2,Y=0<=Y?Y-br:Y+br):(X.value=rr.AREA_3,Y+=lt)),Y}function xn(E,R){var P=E+R;return P<-br?P+=Xh:P>+br&&(P-=Xh),P}function yt(E,R,P,X){for(var Y=R,oe;X&&(oe=E(Y),Y-=oe,!(s(oe)<P));--X);return Y}var $o=3,vr=5,Oc=6378137,Ru=.0066943799901413165,Fn=484813681109536e-20,lt=b/2,b1=.16666666666666666,ni=.04722222222222222,f_=.022156084656084655,wt=1e-10,Es=.017453292519943295,ia=57.29577951308232,Ni=b/4,Xh=2*b,br=3.14159265359,Di={};Di.greenwich=0,Di.lisbon=-9.131906111111,Di.paris=2.337229166667,Di.bogota=-74.080916666667,Di.madrid=-3.687938888889,Di.rome=12.452333333333,Di.bern=7.439583333333,Di.jakarta=106.807719444444,Di.ferro=-17.666666666667,Di.brussels=4.367975,Di.stockholm=18.058277777778,Di.athens=23.7163375,Di.oslo=10.722916666667;var w1={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},Rc=/[\s_\-\/\(\)]/g,hy=function(E){var R={},P=E.split("+").map(function(de){return de.trim()}).filter(function(de){return de}).reduce(function(de,Ee){var Fe=Ee.split("=");return Fe.push(!0),de[Fe[0].toLowerCase()]=Fe[1],de},{}),X={proj:"projName",datum:"datumCode",rf:function(de){R.rf=parseFloat(de)},lat_0:function(de){R.lat0=de*Es},lat_1:function(de){R.lat1=de*Es},lat_2:function(de){R.lat2=de*Es},lat_ts:function(de){R.lat_ts=de*Es},lon_0:function(de){R.long0=de*Es},lon_1:function(de){R.long1=de*Es},lon_2:function(de){R.long2=de*Es},alpha:function(de){R.alpha=parseFloat(de)*Es},gamma:function(de){R.rectified_grid_angle=parseFloat(de)},lonc:function(de){R.longc=de*Es},x_0:function(de){R.x0=parseFloat(de)},y_0:function(de){R.y0=parseFloat(de)},k_0:function(de){R.k0=parseFloat(de)},k:function(de){R.k0=parseFloat(de)},a:function(de){R.a=parseFloat(de)},b:function(de){R.b=parseFloat(de)},r_a:function(){R.R_A=!0},zone:function(de){R.zone=parseInt(de,10)},south:function(){R.utmSouth=!0},towgs84:function(de){R.datum_params=de.split(",").map(function(Ee){return parseFloat(Ee)})},to_meter:function(de){R.to_meter=parseFloat(de)},units:function(de){R.units=de;var Ee=$(w1,de);Ee&&(R.to_meter=Ee.to_meter)},from_greenwich:function(de){R.from_greenwich=de*Es},pm:function(de){var Ee=$(Di,de);R.from_greenwich=(Ee||parseFloat(de))*Es},nadgrids:function(de){de==="@null"?R.datumCode="none":R.nadgrids=de},axis:function(de){de.length===3&&"ewnsud".indexOf(de.substr(0,1))!==-1&&"ewnsud".indexOf(de.substr(1,1))!==-1&&"ewnsud".indexOf(de.substr(2,1))!==-1&&(R.axis=de)},approx:function(){R.approx=!0}},Y,oe,pe;for(Y in P)oe=P[Y],Y in X?(pe=X[Y],typeof pe=="function"?pe(oe):R[pe]=oe):R[Y]=oe;return typeof R.datumCode=="string"&&R.datumCode!=="WGS84"&&(R.datumCode=R.datumCode.toLowerCase()),R},kc=1,_1=2,x1=3,kp=4,Dn=5,S1=-1,Lp=/[,\]]/,$e=/[\d\.E\-\+]/;L.prototype.readCharicter=function(){var E=this.text[this.place++];if(this.state!==kp)for(;/\s/.test(E);){if(this.place>=this.text.length)return;E=this.text[this.place++]}switch(this.state){case kc:return this.neutral(E);case _1:return this.keyword(E);case kp:return this.quoted(E);case Dn:return this.afterquote(E);case x1:return this.number(E)}},L.prototype.afterquote=function(E){if(E==='"')return this.word+='"',void(this.state=kp);if(Lp.test(E))return this.word=this.word.trim(),void this.afterItem(E);throw new Error(`havn't handled "`+E+'" in afterquote yet, index '+this.place)},L.prototype.afterItem=function(E){return E===","?(this.word!==null&&this.currentObject.push(this.word),this.word=null,void(this.state=kc)):E==="]"?(this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=kc,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=S1))):void 0},L.prototype.number=function(E){if($e.test(E))return void(this.word+=E);if(Lp.test(E))return this.word=parseFloat(this.word),void this.afterItem(E);throw new Error(`havn't handled "`+E+'" in number yet, index '+this.place)},L.prototype.quoted=function(E){return E==='"'?void(this.state=Dn):void(this.word+=E)},L.prototype.keyword=function(E){if(/[A-Za-z84]/.test(E))return void(this.word+=E);if(E==="["){var R=[];return R.push(this.word),this.level++,this.root===null?this.root=R:this.currentObject.push(R),this.stack.push(this.currentObject),this.currentObject=R,void(this.state=kc)}if(Lp.test(E))return void this.afterItem(E);throw new Error(`havn't handled "`+E+'" in keyword yet, index '+this.place)},L.prototype.neutral=function(E){if(/[A-Za-z]/.test(E))return this.word=E,void(this.state=_1);if(E==='"')return this.word="",void(this.state=kp);if($e.test(E))return this.word=E,void(this.state=x1);if(Lp.test(E))return void this.afterItem(E);throw new Error(`havn't handled "`+E+'" in neutral yet, index '+this.place)},L.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===S1)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var Qe=.017453292519943295,ot=function(E){var R=B(E),P=R.shift(),X=R.shift();R.unshift(["name",X]),R.unshift(["type",P]);var Y={};return H(R,Y),Q(Y),Y};(function(E){E("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),E("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),E("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),E.WGS84=E["EPSG:4326"],E["EPSG:3785"]=E["EPSG:3857"],E.GOOGLE=E["EPSG:3857"],E["EPSG:900913"]=E["EPSG:3857"],E["EPSG:102113"]=E["EPSG:3857"]})(y);var fi=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],Ts=["3857","900913","3785","102113"],mr=function(E,R){E=E||{};var P,X;if(!R)return E;for(X in R)P=R[X],P!==void 0&&(E[X]=P);return E},Lr=function(E,R,P){var X=E*R;return P/I(1-X*X)},Ul=function(E){return 0>E?-1:1},Lt=function(E){return s(E)<=br?E:E-Ul(E)*Xh},Ya=function(E,R,P){var X=E*P;return X=n((1-X)/(1+X),.5*E),M(.5*(lt-R))/X},dy=function(E,R){for(var P=lt-2*_(R),X=0,Y,oe;15>=X;X++)if(Y=E*x(P),oe=lt-2*_(R*n((1-Y)/(1+Y),.5*E))-P,P+=oe,1e-10>=s(oe))return P;return-9999},E1=[{init:me,forward:function(E){var R=E.x,P=E.y;if(90<P*ia&&-90>P*ia&&180<R*ia&&-180>R*ia)return null;var X,Y;if(s(s(P)-lt)<=wt)return null;if(this.sphere)X=this.x0+this.a*this.k0*Lt(R-this.long0),Y=this.y0+this.a*this.k0*r(M(Ni+.5*P));else{var oe=x(P),pe=Ya(this.e,P,oe);X=this.x0+this.a*this.k0*Lt(R-this.long0),Y=this.y0-this.a*this.k0*r(pe)}return E.x=X,E.y=Y,E},inverse:function(E){var R=E.x-this.x0,P=E.y-this.y0,X,Y;if(this.sphere)Y=lt-2*_(S(-P/(this.a*this.k0)));else{var oe=S(-P/(this.a*this.k0));if(Y=dy(this.e,oe),Y===-9999)return null}return X=Lt(this.long0+R/(this.a*this.k0)),E.x=X,E.y=Y,E},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:ve,inverse:ve,names:["longlat","identity"]}],ku={},py=[],ei={};ei.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},ei.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},ei.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},ei.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},ei.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},ei.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},ei.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},ei.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},ei.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},ei.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},ei.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},ei.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},ei.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},ei.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},ei.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},ei.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},ei.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},ei.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},ei.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},ei.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},ei.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},ei.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},ei.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},ei.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},ei.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},ei.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},ei.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},ei.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},ei.hough={a:6378270,rf:297,ellipseName:"Hough"},ei.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},ei.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},ei.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},ei.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},ei.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},ei.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},ei.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},ei.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},ei.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},ei.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},ei.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},ei.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var V$=ei.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};ei.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var B$={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},AE={};re.projections={start:function(){E1.forEach(_e)},add:_e,get:function(E){if(!E)return!1;var R=E.toLowerCase();if(typeof ku[R]<"u"&&py[ku[R]])return py[ku[R]]}},re.projections.start();var z$=function(E,R,P){if(k(E,R)||E.datum_type===vr||R.datum_type===vr)return P;var X=E.a,Y=E.es;if(E.datum_type===$o){var oe=ie(E,!1,P);if(oe!==0)return;X=Oc,Y=Ru}var pe=R.a,de=R.b,Ee=R.es;if(R.datum_type===$o&&(pe=Oc,de=6356752314e-3,Ee=Ru),Y===Ee&&X===pe&&!F(E.datum_type)&&!F(R.datum_type))return P;if(P=O(P,Y,X),F(E.datum_type)&&(P=G(P,E.datum_type,E.datum_params)),F(R.datum_type)&&(P=Z(P,R.datum_type,R.datum_params)),P=C(P,Ee,pe,de),R.datum_type===$o){var Fe=ie(R,!0,P);if(Fe!==0)return}return P},CE=function(E,R,P){var X=P.x,Y=P.y,oe=P.z||0,pe={},de,Ee,Fe;for(Fe=0;3>Fe;Fe++)if(!(R&&Fe===2&&P.z===void 0))switch(Fe===0?(de=X,Ee="ew".indexOf(E.axis[Fe])===-1?"y":"x"):Fe===1?(de=Y,Ee="ns".indexOf(E.axis[Fe])===-1?"x":"y"):(de=oe,Ee="z"),E.axis[Fe]){case"e":pe[Ee]=de;break;case"w":pe[Ee]=-de;break;case"n":pe[Ee]=de;break;case"s":pe[Ee]=-de;break;case"u":P[Ee]!==void 0&&(pe.z=de);break;case"d":P[Ee]!==void 0&&(pe.z=-de);break;default:return null}return pe},$E=function(E){var R={x:E[0],y:E[1]};return 2<E.length&&(R.z=E[2]),3<E.length&&(R.m=E[3]),R},OE=function(E){fe(E.x),fe(E.y)},Lc=re("WGS84");jl.fromMGRS=function(E){return new jl(Ge(E))},jl.prototype.toMGRS=function(E){return ke([this.x,this.y],E)};var RE=.046875,m_=.01953125,kE=.01068115234375,T1=function(E){var R=[];R[0]=1-E*(.25+E*(RE+E*(m_+E*kE))),R[1]=E*(.75-E*(RE+E*(m_+E*kE)));var P=E*E;return R[2]=P*(.46875-E*(.013020833333333334+E*.007120768229166667)),P*=E,R[3]=P*(.3645833333333333-E*.005696614583333333),R[4]=P*E*.3076171875,R},fy=function(E,R,P,X){return P*=R,R*=R,X[0]*E-P*(X[1]+R*(X[2]+R*(X[3]+R*X[4])))},LE=function(E,R,P){for(var X=E,Y=20;Y;--Y){var oe=x(X),pe=1-R*oe*oe;if(pe=(fy(X,oe,T(X),P)-E)*(pe*I(pe))*(1/(1-R)),X-=pe,s(pe)<wt)return X}return X},I1={init:function(){this.x0=this.x0===void 0?0:this.x0,this.y0=this.y0===void 0?0:this.y0,this.long0=this.long0===void 0?0:this.long0,this.lat0=this.lat0===void 0?0:this.lat0,this.es&&(this.en=T1(this.es),this.ml0=fy(this.lat0,x(this.lat0),T(this.lat0),this.en))},forward:function(E){var R=E.x,P=E.y,X=Lt(R-this.long0),Y=x(P),oe=T(P),pe,de,Ee;if(this.es){var We=oe*X,je=n(We,2),Ke=this.ep2*n(oe,2),ft=n(Ke,2),xt=s(oe)>wt?M(P):0,ct=n(xt,2),jt=n(ct,2);pe=1-this.es*n(Y,2),We/=I(pe);var yi=fy(P,Y,oe,this.en);de=this.a*(this.k0*We*(1+je/6*(1-ct+Ke+je/20*(5-18*ct+jt+14*Ke-58*ct*Ke+je/42*(61+179*jt-jt*ct-479*ct)))))+this.x0,Ee=this.a*(this.k0*(yi-this.ml0+Y*X*We/2*(1+je/12*(5-ct+9*Ke+4*ft+je/30*(61+jt-58*ct+270*Ke-330*ct*Ke+je/56*(1385+543*jt-jt*ct-3111*ct))))))+this.y0}else{var Fe=oe*x(X);if(s(s(Fe)-1)<wt)return 93;if(de=.5*this.a*this.k0*r((1+Fe)/(1-Fe))+this.x0,Ee=oe*T(X)/I(1-n(Fe,2)),Fe=s(Ee),1<=Fe){if(Fe-1>wt)return 93;Ee=0}else Ee=f(Ee);0>P&&(Ee=-Ee),Ee=this.a*this.k0*(Ee-this.lat0)+this.y0}return E.x=de,E.y=Ee,E},inverse:function(E){var R=(E.x-this.x0)*(1/this.a),P=(E.y-this.y0)*(1/this.a),X,Y,oe,pe;if(this.es)if(X=this.ml0+P/this.k0,Y=LE(X,this.es,this.en),s(Y)<lt){var je=x(Y),Ke=T(Y),ft=s(Ke)>wt?M(Y):0,xt=this.ep2*n(Ke,2),ct=n(xt,2),jt=n(ft,2),yi=n(jt,2);X=1-this.es*n(je,2);var Ai=R*I(X)/this.k0,oi=n(Ai,2);X*=ft,oe=Y-.5*(X*oi/(1-this.es))*(1-oi/12*(5+3*jt-9*xt*jt+xt-4*ct-oi/30*(61+90*jt-252*xt*jt+45*yi+46*xt-oi/56*(1385+3633*jt+4095*yi+1574*yi*jt)))),pe=Lt(this.long0+Ai*(1-oi/6*(1+2*jt+xt-oi/20*(5+28*jt+24*yi+8*xt*jt+6*xt-oi/42*(61+662*jt+1320*yi+720*yi*jt))))/Ke)}else oe=lt*Ul(P),pe=0;else{var de=S(R/this.k0),Ee=.5*(de-1/de),Fe=this.lat0+P/this.k0,We=T(Fe);X=I((1-n(We,2))/(1+n(Ee,2))),oe=d(X),0>P&&(oe=-oe),pe=Ee===0&&We===0?0:Lt(g(Ee,We)+this.long0)}return E.x=pe,E.y=oe,E},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]},y_=function(E){var R=S(E);return R=(R-1/R)/2,R},M1=function(E,R){var P=Math.max;E=s(E),R=s(R);var X=P(E,R),Y=a(E,R)/(X||1);return X*I(1+n(Y,2))},A1=function(E){var R=1+E,P=R-1;return P===0?E:E*r(R)/P},G$=function(E){var R=s(E);return R=A1(R*(1+R/(M1(1,R)+1))),0>E?-R:R},my=function(E,R){for(var P=2*T(2*R),X=E.length-1,Y=E[X],oe=0,pe;0<=--X;)pe=-oe+P*Y+E[X],oe=Y,Y=pe;return R+pe*x(2*R)},q$=function(E,R){for(var P=2*T(R),X=E.length-1,Y=E[X],oe=0,pe;0<=--X;)pe=-oe+P*Y+E[X],oe=Y,Y=pe;return x(R)*pe},H$=function(E){var R=S(E);return R=(R+1/R)/2,R},Me=function(E,R,P){for(var X=x(R),Y=T(R),oe=y_(P),pe=H$(P),de=2*Y*pe,Ee=-2*X*oe,Fe=E.length-1,We=E[Fe],je=0,Ke=0,ft=0,xt,ct;0<=--Fe;)xt=Ke,ct=je,Ke=We,je=ft,We=-xt+de*Ke-Ee*je+E[Fe],ft=-ct+Ee*Ke+de*je;return de=X*pe,Ee=Y*oe,[de*We-Ee*ft,de*ft+Ee*We]},qe={init:function(){if(!this.approx&&(isNaN(this.es)||0>=this.es))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(I1.init.apply(this),this.forward=I1.forward,this.inverse=I1.inverse),this.x0=this.x0===void 0?0:this.x0,this.y0=this.y0===void 0?0:this.y0,this.long0=this.long0===void 0?0:this.long0,this.lat0=this.lat0===void 0?0:this.lat0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var E=this.es/(1+I(1-this.es)),R=E/(2-E),P=R;this.cgb[0]=R*(2+R*(-2/3+R*(-2+R*(116/45+R*(26/45+R*(-2854/675)))))),this.cbg[0]=R*(-2+R*(2/3+R*(4/3+R*(-82/45+R*(32/45+R*(4642/4725)))))),P*=R,this.cgb[1]=P*(7/3+R*(-8/5+R*(-227/45+R*(2704/315+R*(2323/945))))),this.cbg[1]=P*(5/3+R*(-16/15+R*(-13/9+R*(904/315+R*(-1522/945))))),P*=R,this.cgb[2]=P*(56/15+R*(-136/35+R*(-1262/105+R*(73814/2835)))),this.cbg[2]=P*(-26/15+R*(34/21+R*(8/5+R*(-12686/2835)))),P*=R,this.cgb[3]=P*(4279/630+R*(-332/35+R*(-399572/14175))),this.cbg[3]=P*(1237/630+R*(-12/5+R*(-24832/14175))),P*=R,this.cgb[4]=P*(4174/315+R*(-144838/6237)),this.cbg[4]=P*(-734/315+R*(109598/31185)),P*=R,this.cgb[5]=P*(601676/22275),this.cbg[5]=P*(444337/155925),P=n(R,2),this.Qn=this.k0/(1+R)*(1+P*(1/4+P*(1/64+P/256))),this.utg[0]=R*(-.5+R*(2/3+R*(-37/96+R*(1/360+R*(81/512+R*(-96199/604800)))))),this.gtu[0]=R*(.5+R*(-2/3+R*(5/16+R*(41/180+R*(-127/288+R*(7891/37800)))))),this.utg[1]=P*(-1/48+R*(-1/15+R*(437/1440+R*(-46/105+R*(1118711/3870720))))),this.gtu[1]=P*(13/48+R*(-3/5+R*(557/1440+R*(281/630+R*(-1983433/1935360))))),P*=R,this.utg[2]=P*(-17/480+R*(37/840+R*(209/4480+R*(-5569/90720)))),this.gtu[2]=P*(61/240+R*(-103/140+R*(15061/26880+R*(167603/181440)))),P*=R,this.utg[3]=P*(-4397/161280+R*(11/504+R*(830251/7257600))),this.gtu[3]=P*(49561/161280+R*(-179/168+R*(6601661/7257600))),P*=R,this.utg[4]=P*(-4583/161280+R*(108847/3991680)),this.gtu[4]=P*(34729/80640+R*(-3418889/1995840)),P*=R,this.utg[5]=P*(-20648693/638668800),this.gtu[5]=P*(212378941/319334400);var X=my(this.cbg,this.lat0);this.Zb=-this.Qn*(X+q$(this.gtu,2*X))},forward:function(E){var R=Lt(E.x-this.long0),P=E.y;P=my(this.cbg,P);var X=x(P),Y=T(P),oe=x(R),pe=T(R);P=g(X,pe*Y),R=g(oe*Y,M1(X,Y*pe)),R=G$(M(R));var de=Me(this.gtu,2*P,2*R);P+=de[0],R+=de[1];var Ee,Fe;return 2.623395162778>=s(R)?(Ee=this.a*(this.Qn*R)+this.x0,Fe=this.a*(this.Qn*P+this.Zb)+this.y0):(Ee=1/0,Fe=1/0),E.x=Ee,E.y=Fe,E},inverse:function(E){var R=(E.x-this.x0)*(1/this.a),P=(E.y-this.y0)*(1/this.a);P=(P-this.Zb)/this.Qn,R/=this.Qn;var X,Y;if(2.623395162778>=s(R)){var oe=Me(this.utg,2*P,2*R);P+=oe[0],R+=oe[1],R=_(y_(R));var pe=x(P),de=T(P),Ee=x(R),Fe=T(R);P=g(pe*Fe,M1(Ee,Fe*de)),R=g(Ee,Fe*de),X=Lt(R+this.long0),Y=my(this.cgb,P)}else X=1/0,Y=1/0;return E.x=X,E.y=Y,E},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},rt=function(E,R){if(E===void 0){if(E=i(30*(Lt(R)+b)/b)+1,0>E)return 0;if(60<E)return 60}return E},Vt={init:function(){var E=rt(this.zone,this.long0);if(E===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*s(E)-183)*Es,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,qe.init.apply(this),this.forward=qe.forward,this.inverse=qe.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},ls=function(E,R){return n((1-E)/(1+E),R)},Qs={init:function(){var E=x(this.lat0),R=T(this.lat0);R*=R,this.rc=I(1-this.es)/(1-this.es*E*E),this.C=I(1+this.es*R*R/(1-this.es)),this.phic0=d(E/this.C),this.ratexp=.5*this.C*this.e,this.K=M(.5*this.phic0+Ni)/(n(M(.5*this.lat0+Ni),this.C)*ls(this.e*E,this.ratexp))},forward:function(E){var R=E.x,P=E.y;return E.y=2*_(this.K*n(M(.5*P+Ni),this.C)*ls(this.e*x(P),this.ratexp))-lt,E.x=this.C*R,E},inverse:function(E){for(var R=E.x/this.C,P=E.y,X=n(M(.5*P+Ni)/this.K,1/this.C),Y=20;0<Y&&(P=2*_(X*ls(this.e*x(E.y),-.5*this.e))-lt,!(s(P-E.y)<1e-14));--Y)E.y=P;return Y?(E.x=R,E.y=P,E):null},names:["gauss"]},ra={init:function(){Qs.init.apply(this),this.rc&&(this.sinc0=x(this.phic0),this.cosc0=T(this.phic0),this.R2=2*this.rc,!this.title&&(this.title="Oblique Stereographic Alternative"))},forward:function(E){var R,P,X,Y;return E.x=Lt(E.x-this.long0),Qs.forward.apply(this,[E]),R=x(E.y),P=T(E.y),X=T(E.x),Y=this.k0*this.R2/(1+this.sinc0*R+this.cosc0*P*X),E.x=Y*P*x(E.x),E.y=Y*(this.cosc0*R-this.sinc0*P*X),E.x=this.a*E.x+this.x0,E.y=this.a*E.y+this.y0,E},inverse:function(E){var R,P,X,Y,oe;if(E.x=(E.x-this.x0)/this.a,E.y=(E.y-this.y0)/this.a,E.x/=this.k0,E.y/=this.k0,oe=I(E.x*E.x+E.y*E.y)){var pe=2*g(oe,this.R2);R=x(pe),P=T(pe),Y=d(P*this.sinc0+E.y*R*this.cosc0/oe),X=g(E.x*R,oe*this.cosc0*P-E.y*this.sinc0*R)}else Y=this.phic0,X=0;return E.x=X,E.y=Y,Qs.inverse.apply(this,[E]),E.x=Lt(E.x+this.long0),E},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},Qn={init:function(){this.coslat0=T(this.lat0),this.sinlat0=x(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&s(this.coslat0)<=wt&&(this.k0=.5*(1+Ul(this.lat0)*x(this.lat_ts))):(s(this.coslat0)<=wt&&(0<this.lat0?this.con=1:this.con=-1),this.cons=I(n(1+this.e,1+this.e)*n(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&s(this.coslat0)<=wt&&(this.k0=.5*this.cons*Lr(this.e,x(this.lat_ts),T(this.lat_ts))/Ya(this.e,this.con*this.lat_ts,this.con*x(this.lat_ts))),this.ms1=Lr(this.e,this.sinlat0,this.coslat0),this.X0=2*_(this.ssfn_(this.lat0,this.sinlat0,this.e))-lt,this.cosX0=T(this.X0),this.sinX0=x(this.X0))},forward:function(E){var R=E.x,P=E.y,X=x(P),Y=T(P),oe=Lt(R-this.long0),pe,de,Ee,Fe,We;return s(s(R-this.long0)-b)<=wt&&s(P+this.lat0)<=wt?(E.x=NaN,E.y=NaN,E):this.sphere?(2*this.k0/(1+this.sinlat0*X+this.coslat0*Y*T(oe)),E.x=65*this.a*Y*x(oe)+this.x0,E.y=65*this.a*(this.coslat0*X-this.sinlat0*Y*T(oe))+this.y0,E):(pe=2*_(this.ssfn_(P,X,this.e))-lt,Ee=T(pe),de=x(pe),s(this.coslat0)<=wt?(Fe=Ya(this.e,P*this.con,this.con*X),We=2*this.a*this.k0*Fe/this.cons,E.x=this.x0+We*x(R-this.long0),E.y=this.y0-this.con*We*T(R-this.long0),E):(s(this.sinlat0)<wt?(2*this.a*this.k0/(1+Ee*T(oe)),E.y=65*de):(2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*de+this.cosX0*Ee*T(oe))),E.y=65*(this.cosX0*de-this.sinX0*Ee*T(oe))+this.y0),E.x=65*Ee*x(oe)+this.x0,E))},inverse:function(E){E.x-=this.x0,E.y-=this.y0;var R=I(E.x*E.x+E.y*E.y),P,X,Y,oe,pe;if(this.sphere){var de=2*_(R/(2*this.a*this.k0));return P=this.long0,X=this.lat0,R<=wt?(E.x=P,E.y=X,E):(X=d(T(de)*this.sinlat0+E.y*x(de)*this.coslat0/R),P=s(this.coslat0)<wt?0<this.lat0?Lt(this.long0+g(E.x,-1*E.y)):Lt(this.long0+g(E.x,E.y)):Lt(this.long0+g(E.x*x(de),R*this.coslat0*T(de)-E.y*this.sinlat0*x(de))),E.x=P,E.y=X,E)}if(s(this.coslat0)<=wt){if(R<=wt)return X=this.lat0,P=this.long0,E.x=P,E.y=X,E;E.x*=this.con,E.y*=this.con,Y=R*this.cons/(2*this.a*this.k0),X=this.con*dy(this.e,Y),P=this.con*Lt(this.con*this.long0+g(E.x,-1*E.y))}else oe=2*_(R*this.cosX0/(2*this.a*this.k0*this.ms1)),P=this.long0,R<=wt?pe=this.X0:(pe=d(T(oe)*this.sinX0+E.y*x(oe)*this.cosX0/R),P=Lt(this.long0+g(E.x*x(oe),R*this.cosX0*T(oe)-E.y*this.sinX0*x(oe)))),X=-1*dy(this.e,M(.5*(lt+pe)));return E.x=P,E.y=X,E},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(E,R,P){return R*=P,M(.5*(lt+E))*n((1-R)/(1+R),.5*P)}},PE={init:function(){var E=this.lat0;this.lambda0=this.long0;var R=x(E),P=this.a,X=this.rf,Y=1/X,oe=2*Y-n(Y,2),pe=this.e=I(oe);this.R=this.k0*P*I(1-oe)/(1-oe*n(R,2)),this.alpha=I(1+oe/(1-oe)*n(T(E),4)),this.b0=d(R/this.alpha);var de=r(M(b/4+this.b0/2)),Ee=r(M(b/4+E/2)),Fe=r((1+pe*R)/(1-pe*R));this.K=de-this.alpha*Ee+this.alpha*pe/2*Fe},forward:function(E){var R=r(M(b/4-E.y/2)),P=this.e/2*r((1+this.e*x(E.y))/(1-this.e*x(E.y))),X=-this.alpha*(R+P)+this.K,Y=2*(_(S(X))-b/4);this.alpha*(E.x-this.lambda0);var oe=_(x(73)/(x(this.b0)*M(Y)+T(this.b0)*T(73))),pe=d(T(this.b0)*x(Y)-x(this.b0)*T(Y)*T(73));return E.y=this.R/2*r((1+x(pe))/(1-x(pe)))+this.y0,E.x=this.R*oe+this.x0,E},inverse:function(E){for(var R=E.x-this.x0,P=E.y-this.y0,X=R/this.R,Y=2*(_(S(P/this.R))-b/4),oe=d(T(this.b0)*x(Y)+x(this.b0)*T(Y)*T(X)),pe=_(x(X)/(T(this.b0)*T(X)-x(this.b0)*M(Y))),de=this.lambda0+73/this.alpha,Ee=0,Fe=oe,We=-1e3,je=0;1e-7<s(Fe-We);){if(20<++je)return;Ee=1/this.alpha*(r(M(b/4+oe/2))-this.K)+this.e*r(M(b/4+d(this.e*x(Fe))/2)),We=Fe,Fe=2*_(S(Ee))-b/2}return E.x=de,E.y=Fe,E},names:["somerc"]},Ka=1e-7,NE={init:Be,forward:function(E){var R={},P,X,Y,oe,pe,de,Ee;if(E.x-=this.lam0,s(s(E.y)-lt)>wt){if(oe=this.E/n(Ya(this.e,E.y,x(E.y)),this.B),pe=1/oe,P=.5*(oe-pe),X=.5*(oe+pe),x(this.B*E.x),Y=(P*this.singam-86*this.cosgam)/X,s(s(Y)-1)<wt)throw new Error;Ee=.5*this.ArB*r((1-Y)/(1+Y)),pe=T(this.B*E.x),de=s(pe)<Ka?this.A*E.x:this.ArB*g(P*this.cosgam+86*this.singam,pe)}else Ee=0<E.y?this.v_pole_n:this.v_pole_s,de=this.ArB*E.y;return this.no_rot?(R.x=de,R.y=Ee):(de-=this.u_0,R.x=Ee*this.cosrot+de*this.sinrot,R.y=de*this.cosrot-Ee*this.sinrot),R.x=this.a*R.x+this.x0,R.y=this.a*R.y+this.y0,R},inverse:function(E){var R={},P,X,Y,oe,pe,de,Ee;if(E.x=(E.x-this.x0)*(1/this.a),E.y=(E.y-this.y0)*(1/this.a),this.no_rot?(X=E.y,P=E.x):(X=E.x*this.cosrot-E.y*this.sinrot,P=E.y*this.cosrot+E.x*this.sinrot+this.u_0),Y=S(-this.BrA*X),oe=.5*(Y-1/Y),pe=.5*(Y+1/Y),de=x(this.BrA*P),Ee=(de*this.cosgam+oe*this.singam)/pe,s(s(Ee)-1)<wt)R.x=0,R.y=0>Ee?-lt:lt;else{if(R.y=this.E/I((1+Ee)/(1-Ee)),R.y=dy(this.e,n(R.y,1/this.B)),R.y===1/0)throw new Error;R.x=-this.rB*g(oe*this.cosgam-de*this.singam,T(this.BrA*P))}return R.x+=this.lam0,R},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},FE={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(s(this.lat1+this.lat2)<wt)){var E=this.b/this.a;this.e=I(1-E*E);var R=x(this.lat1),P=T(this.lat1),X=Lr(this.e,R,P),Y=Ya(this.e,this.lat1,R),oe=x(this.lat2),pe=T(this.lat2),de=Lr(this.e,oe,pe),Ee=Ya(this.e,this.lat2,oe),Fe=Ya(this.e,this.lat0,x(this.lat0));this.ns=s(this.lat1-this.lat2)>wt?r(X/de)/r(Y/Ee):R,isNaN(this.ns)&&(this.ns=R),this.f0=X/(this.ns*n(Y,this.ns)),this.rh=this.a*this.f0*n(Fe,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(E){var R=E.x,P=E.y;s(2*s(P)-b)<=wt&&(P=Ul(P)*(lt-2*wt));var X=s(s(P)-lt),Y,oe;if(X>wt)Y=Ya(this.e,P,x(P)),oe=this.a*this.f0*n(Y,this.ns);else{if(X=P*this.ns,0>=X)return null;oe=0}var pe=this.ns*Lt(R-this.long0);return E.x=this.k0*(oe*x(pe))+this.x0,E.y=this.k0*(this.rh-oe*T(pe))+this.y0,E},inverse:function(E){var R=(E.x-this.x0)/this.k0,P=this.rh-(E.y-this.y0)/this.k0,X,Y,oe,pe,de;0<this.ns?(X=I(R*R+P*P),Y=1):(X=-I(R*R+P*P),Y=-1);var Ee=0;if(X!==0&&(Ee=g(Y*R,Y*P)),!(X!==0||0<this.ns))pe=-lt;else if(Y=1/this.ns,oe=n(X/(this.a*this.f0),Y),pe=dy(this.e,oe),pe===-9999)return null;return de=Lt(Ee/this.ns+this.long0),E.x=de,E.y=pe,E},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc"]},DE={init:function(){this.a=6377397155e-3,this.es=.006674372230614,this.e=I(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=I(this.e2),this.alfa=I(1+this.e2*n(T(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=d(x(this.fi0)/this.alfa),this.g=n((1+this.e*x(this.fi0))/(1-this.e*x(this.fi0)),this.alfa*this.e/2),this.k=M(this.u0/2+this.s45)/n(M(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*I(1-this.e2)/(1-this.e2*n(x(this.fi0),2)),this.s0=1.37008346281555,this.n=x(this.s0),this.ro0=this.k1*this.n0/M(this.s0),this.ad=this.s90-this.uq},forward:function(E){var R=E.x,P=E.y,X=Lt(R-this.long0),Y,oe,pe,de,Ee,Fe,We;return Y=n((1+this.e*x(P))/(1-this.e*x(P)),this.alfa*this.e/2),oe=2*(_(this.k*n(M(P/2+this.s45),this.alfa)/Y)-this.s45),pe=-X*this.alfa,de=d(T(this.ad)*x(oe)+x(this.ad)*T(oe)*T(pe)),Ee=d(T(oe)*x(pe)/T(de)),Fe=this.n*Ee,We=this.ro0*n(M(this.s0/2+this.s45),this.n)/n(M(de/2+this.s45),this.n),E.y=We*T(Fe)/1,E.x=We*x(Fe)/1,this.czech||(E.y*=-1,E.x*=-1),E},inverse:function(E){var R=E.x,P,X,Y,oe,pe,de,Ee,Fe;E.x=E.y,E.y=R,this.czech||(E.y*=-1,E.x*=-1),de=I(E.x*E.x+E.y*E.y),pe=g(E.y,E.x),oe=pe/x(this.s0),Y=2*(_(n(this.ro0/de,1/this.n)*M(this.s0/2+this.s45))-this.s45),P=d(T(this.ad)*x(Y)-x(this.ad)*T(Y)*T(oe)),X=d(T(Y)*x(oe)/T(P)),E.x=this.long0-X/this.alfa,Ee=P,Fe=0;var We=0;do E.y=2*(_(n(this.k,-1/this.alfa)*n(M(P/2+this.s45),1/this.alfa)*n((1+this.e*x(Ee))/(1-this.e*x(Ee)),this.e/2))-this.s45),1e-10>s(Ee-E.y)&&(Fe=1),Ee=E.y,We+=1;while(Fe===0&&15>We);return 15<=We?null:E},names:["Krovak","krovak"]},Xs=function(E,R,P,X,Y){return E*Y-R*x(2*Y)+P*x(4*Y)-X*x(6*Y)},Pc=function(E){return 1-.25*E*(1+E/16*(3+1.25*E))},g_=function(E){return .375*E*(1+.25*E*(1+.46875*E))},v_=function(E){return .05859375*E*E*(1+.75*E)},b_=function(E){return E*E*E*(35/3072)},C1=function(E,R,P){var X=R*P;return E/I(1-X*X)},$1=function(E){return s(E)<lt?E:E-Ul(E)*b},jE=function(E,R,P,X,Y){var oe,pe;oe=E/R;for(var de=0;15>de;de++)if(pe=(E-(R*oe-P*x(2*oe)+X*x(4*oe)-Y*x(6*oe)))/(R-2*P*T(2*oe)+4*X*T(4*oe)-6*Y*T(6*oe)),oe+=pe,1e-10>=s(pe))return oe;return NaN},Bfe={init:function(){this.sphere||(this.e0=Pc(this.es),this.e1=g_(this.es),this.e2=v_(this.es),this.e3=b_(this.es),this.ml0=this.a*Xs(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(E){var R=E.x,P=E.y,X,Y;if(R=Lt(R-this.long0),this.sphere)X=this.a*d(T(P)*x(R)),Y=this.a*(g(M(P),T(R))-this.lat0);else{var oe=x(P),pe=T(P),de=C1(this.a,this.e,oe),Ee=M(P)*M(P),Fe=R*T(P),We=Fe*Fe,je=this.es*pe*pe/(1-this.es),Ke=this.a*Xs(this.e0,this.e1,this.e2,this.e3,P);X=de*Fe*(1-We*Ee*(1/6-(8-Ee+8*je)*We/120)),Y=Ke-this.ml0+de*oe/pe*We*(.5+(5-Ee+6*je)*We/24)}return E.x=X+this.x0,E.y=Y+this.y0,E},inverse:function(E){E.x-=this.x0,E.y-=this.y0;var R=E.x/this.a,P=E.y/this.a,X,Y;if(this.sphere){var oe=P+this.lat0;X=d(x(oe)*T(R)),Y=g(M(R),T(oe))}else{var pe=this.ml0/this.a+P,de=jE(pe,this.e0,this.e1,this.e2,this.e3);if(s(s(de)-lt)<=wt)return E.x=this.long0,E.y=lt,0>P&&(E.y*=-1),E;var Ee=C1(this.a,this.e,x(de)),Fe=Ee*Ee*Ee/this.a/this.a*(1-this.es),We=n(M(de),2),je=R*this.a/Ee,Ke=je*je;X=de-Ee*M(de)/Fe*je*je*(.5-(1+3*We)*je*je/24),Y=je*(1-Ke*(We/3+(1+3*We)*We*Ke/15))/T(de)}return E.x=Lt(Y+this.long0),E.y=$1(X),E},names:["Cassini","Cassini_Soldner","cass"]},Pp=function(E,R){var P;return 1e-7<E?(P=E*R,(1-E*E)*(R/(1-P*P)-.5/E*r((1-P)/(1+P)))):2*R},zfe=.3333333333333333,Gfe=.17222222222222222,qfe=.10257936507936508,Hfe=.06388888888888888,Wfe=.0664021164021164,Jfe=.016415012942191543,Zfe={init:function(){var E=s(this.lat0);if(this.mode=s(E-lt)<wt?0>this.lat0?this.S_POLE:this.N_POLE:s(E)<wt?this.EQUIT:this.OBLIQ,0<this.es){var R;switch(this.qp=Pp(this.e,1),this.mmf=.5/(1-this.es),this.apa=Hi(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=I(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=I(.5*this.qp),R=x(this.lat0),this.sinb1=Pp(this.e,R)/this.qp,this.cosb1=I(1-this.sinb1*this.sinb1),this.dd=T(this.lat0)/(I(1-this.es*R*R)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=x(this.lat0),this.cosph0=T(this.lat0))},forward:function(E){var R=E.x,P=E.y,X,Y,oe,pe,de,Ee,Fe,We,je,Ke;if(R=Lt(R-this.long0),!this.sphere){switch(Fe=0,We=0,je=0,oe=T(R),pe=x(R),de=x(P),Ee=Pp(this.e,de),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(Fe=Ee/this.qp,We=I(1-Fe*Fe)),this.mode){case this.OBLIQ:je=1+this.sinb1*Fe+this.cosb1*We*oe;break;case this.EQUIT:je=1+We*oe;break;case this.N_POLE:je=lt+P,Ee=this.qp-Ee;break;case this.S_POLE:je=P-lt,Ee=this.qp+Ee}if(s(je)<wt)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:je=I(2/je),Y=this.mode===this.OBLIQ?this.ymf*je*(this.cosb1*Fe-this.sinb1*We*oe):(je=I(2/(1+We*oe)))*Fe*this.ymf,X=this.xmf*je*We*pe;break;case this.N_POLE:case this.S_POLE:0<=Ee?(X=(je=I(Ee))*pe,Y=oe*(this.mode===this.S_POLE?je:-je)):X=Y=0}}else if(de=x(P),Ke=T(P),oe=T(R),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(Y=this.mode===this.EQUIT?1+Ke*oe:1+this.sinph0*de+this.cosph0*Ke*oe,Y<=wt)return null;Y=I(2/Y),X=Y*Ke*x(R),Y*=this.mode===this.EQUIT?de:this.cosph0*de-this.sinph0*Ke*oe}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(oe=-oe),s(P+this.lat0)<wt)return null;Y=Ni-.5*P,Y=2*(this.mode===this.S_POLE?T(Y):x(Y)),X=Y*x(R),Y*=oe}return E.x=this.a*X+this.x0,E.y=this.a*Y+this.y0,E},inverse:function(E){E.x-=this.x0,E.y-=this.y0;var R=E.x/this.a,P=E.y/this.a,X,Y,oe,pe,de,Ee,Fe;if(this.sphere){var We=0,je=0,Ke;if(Ke=I(R*R+P*P),Y=.5*Ke,1<Y)return null;switch(Y=2*d(Y),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(je=x(Y),We=T(Y)),this.mode){case this.EQUIT:Y=s(Ke)<=wt?0:d(P*je/Ke),R*=je,P=We*Ke;break;case this.OBLIQ:Y=s(Ke)<=wt?this.lat0:d(We*this.sinph0+P*je*this.cosph0/Ke),R*=je*this.cosph0,P=(We-x(Y)*this.sinph0)*Ke;break;case this.N_POLE:P=-P,Y=lt-Y;break;case this.S_POLE:Y-=lt}X=P===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:g(R,P)}else{if(Fe=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(R/=this.dd,P*=this.dd,Ee=I(R*R+P*P),Ee<wt)return E.x=this.long0,E.y=this.lat0,E;pe=2*d(.5*Ee/this.rq),oe=T(pe),R*=pe=x(pe),this.mode===this.OBLIQ?(Fe=oe*this.sinb1+P*pe*this.cosb1/Ee,de=this.qp*Fe,P=Ee*this.cosb1*oe-P*this.sinb1*pe):(Fe=P*pe/Ee,de=this.qp*Fe,P=Ee*oe)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(P=-P),de=R*R+P*P,!de)return E.x=this.long0,E.y=this.lat0,E;Fe=1-de/this.qp,this.mode===this.S_POLE&&(Fe=-Fe)}X=g(R,P),Y=ta(d(Fe),this.apa)}return E.x=Lt(this.long0+X),E.y=Y,E},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},Np=function(E){return 1<s(E)&&(E=1<E?1:-1),d(E)},Yfe={init:function(){s(this.lat1+this.lat2)<wt||(this.temp=this.b/this.a,this.es=1-n(this.temp,2),this.e3=I(this.es),this.sin_po=x(this.lat1),this.cos_po=T(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Lr(this.e3,this.sin_po,this.cos_po),this.qs1=Pp(this.e3,this.sin_po,this.cos_po),this.sin_po=x(this.lat2),this.cos_po=T(this.lat2),this.t2=this.sin_po,this.ms2=Lr(this.e3,this.sin_po,this.cos_po),this.qs2=Pp(this.e3,this.sin_po,this.cos_po),this.sin_po=x(this.lat0),this.cos_po=T(this.lat0),this.t3=this.sin_po,this.qs0=Pp(this.e3,this.sin_po,this.cos_po),this.ns0=s(this.lat1-this.lat2)>wt?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*I(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(E){var R=E.x,P=E.y;this.sin_phi=x(P),this.cos_phi=T(P);var X=Pp(this.e3,this.sin_phi,this.cos_phi),Y=this.a*I(this.c-this.ns0*X)/this.ns0,oe=this.ns0*Lt(R-this.long0),pe=Y*x(oe)+this.x0,de=this.rh-Y*T(oe)+this.y0;return E.x=pe,E.y=de,E},inverse:function(E){var R,P,X,Y,oe,pe;return E.x-=this.x0,E.y=this.rh-E.y+this.y0,0<=this.ns0?(R=I(E.x*E.x+E.y*E.y),X=1):(R=-I(E.x*E.x+E.y*E.y),X=-1),Y=0,R!==0&&(Y=g(X*E.x,X*E.y)),X=R*this.ns0/this.a,this.sphere?pe=d((this.c-X*X)/(2*this.ns0)):(P=(this.c-X*X)/this.ns0,pe=this.phi1z(this.e3,P)),oe=Lt(Y/this.ns0+this.long0),E.x=oe,E.y=pe,E},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(E,R){var P=Np(.5*R),X,Y,oe,pe,de;if(E<wt)return P;for(var Ee=1;25>=Ee;Ee++)if(X=x(P),Y=T(P),oe=E*X,pe=1-oe*oe,de=.5*pe*pe/Y*(R/(1-E*E)-X/pe+.5/E*r((1-oe)/(1+oe))),P+=de,1e-7>=s(de))return P;return null}},Kfe={init:function(){this.sin_p14=x(this.lat0),this.cos_p14=T(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(E){var R=E.x,P=E.y,X,Y,oe,pe,de,Ee,Fe,We;return oe=Lt(R-this.long0),X=x(P),Y=T(P),pe=T(oe),Ee=this.sin_p14*X+this.cos_p14*Y*pe,de=1,0<Ee||s(Ee)<=wt?(Fe=this.x0+this.a*de*Y*x(oe)/Ee,We=this.y0+this.a*de*(this.cos_p14*X-this.sin_p14*Y*pe)/Ee):(Fe=this.x0+this.infinity_dist*Y*x(oe),We=this.y0+this.infinity_dist*(this.cos_p14*X-this.sin_p14*Y*pe)),E.x=Fe,E.y=We,E},inverse:function(E){var R,P,X,Y,oe,pe;return E.x=(E.x-this.x0)/this.a,E.y=(E.y-this.y0)/this.a,E.x/=this.k0,E.y/=this.k0,(R=I(E.x*E.x+E.y*E.y))?(Y=g(R,this.rc),P=x(Y),X=T(Y),pe=Np(X*this.sin_p14+E.y*P*this.cos_p14/R),oe=g(E.x*P,R*this.cos_p14*X-E.y*this.sin_p14*P),oe=Lt(this.long0+oe)):(pe=this.phic0,oe=0),E.x=oe,E.y=pe,E},names:["gnom"]},Qfe=function(E,R){var P=1-(1-E*E)/(2*E)*r((1-E)/(1+E));if(1e-6>s(s(R)-P))return 0>R?-1*lt:lt;for(var X=d(.5*R),Y=0,oe,pe,de,Ee;30>Y;Y++)if(pe=x(X),de=T(X),Ee=E*pe,oe=n(1-Ee*Ee,2)/(2*de)*(R/(1-E*E)-pe/(1-Ee*Ee)+.5/E*r((1-Ee)/(1+Ee))),X+=oe,1e-10>=s(oe))return X;return NaN},Xfe={init:function(){this.sphere||(this.k0=Lr(this.e,x(this.lat_ts),T(this.lat_ts)))},forward:function(E){var R=E.x,P=E.y,X=Lt(R-this.long0),Y,oe;if(this.sphere)Y=this.x0+this.a*X*T(this.lat_ts),oe=this.y0+this.a*x(P)/T(this.lat_ts);else{var pe=Pp(this.e,x(P));Y=this.x0+this.a*this.k0*X,oe=this.y0+.5*(this.a*pe)/this.k0}return E.x=Y,E.y=oe,E},inverse:function(E){E.x-=this.x0,E.y-=this.y0;var R,P;return this.sphere?(R=Lt(this.long0+E.x/this.a/T(this.lat_ts)),P=d(E.y/this.a*T(this.lat_ts))):(P=Qfe(this.e,2*E.y*this.k0/this.a),R=Lt(this.long0+E.x/(this.a*this.k0))),E.x=R,E.y=P,E},names:["cea"]},eme={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=T(this.lat_ts)},forward:function(E){var R=E.x,P=E.y,X=Lt(R-this.long0),Y=$1(P-this.lat0);return E.x=this.x0+this.a*X*this.rc,E.y=this.y0+this.a*Y,E},inverse:function(E){var R=E.x,P=E.y;return E.x=Lt(this.long0+(R-this.x0)/(this.a*this.rc)),E.y=$1(this.lat0+(P-this.y0)/this.a),E},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},tme={init:function(){this.temp=this.b/this.a,this.es=1-n(this.temp,2),this.e=I(this.es),this.e0=Pc(this.es),this.e1=g_(this.es),this.e2=v_(this.es),this.e3=b_(this.es),this.ml0=this.a*Xs(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(E){var R=E.x,P=E.y,X=Lt(R-this.long0),Y,oe,pe;if(pe=X*x(P),this.sphere)s(P)<=wt?(Y=this.a*X,oe=-1*this.a*this.lat0):(Y=this.a*x(pe)/M(P),oe=this.a*($1(P-this.lat0)+(1-T(pe))/M(P)));else if(s(P)<=wt)Y=this.a*X,oe=-1*this.ml0;else{var de=C1(this.a,this.e,x(P))/M(P);Y=de*x(pe),oe=this.a*Xs(this.e0,this.e1,this.e2,this.e3,P)-this.ml0+de*(1-T(pe))}return E.x=Y+this.x0,E.y=oe+this.y0,E},inverse:function(E){var R,P,X,Y,oe,pe,de,Ee,Fe;if(X=E.x-this.x0,Y=E.y-this.y0,this.sphere)if(s(Y+this.a*this.lat0)<=wt)R=Lt(X/this.a+this.long0),P=0;else{pe=this.lat0+Y/this.a,de=X*X/this.a/this.a+pe*pe,Ee=pe;var We;for(oe=20;oe;--oe)if(We=M(Ee),Fe=-1*(pe*(Ee*We+1)-Ee-.5*(Ee*Ee+de)*We)/((Ee-pe)/We-1),Ee+=Fe,s(Fe)<=wt){P=Ee;break}R=Lt(this.long0+d(X*M(Ee)/this.a)/x(P))}else if(s(Y+this.ml0)<=wt)P=0,R=Lt(this.long0+X/this.a);else{pe=(this.ml0+Y)/this.a,de=X*X/this.a/this.a+pe*pe,Ee=pe;var je,Ke,ft,xt,ct;for(oe=20;oe;--oe)if(ct=this.e*x(Ee),je=I(1-ct*ct)*M(Ee),Ke=this.a*Xs(this.e0,this.e1,this.e2,this.e3,Ee),ft=this.e0-2*this.e1*T(2*Ee)+4*this.e2*T(4*Ee)-6*this.e3*T(6*Ee),xt=Ke/this.a,Fe=(pe*(je*xt+1)-xt-.5*je*(xt*xt+de))/(this.es*x(2*Ee)*(xt*xt+de-2*pe*xt)/(4*je)+(pe-xt)*(je*ft-2/x(2*Ee))-ft),Ee-=Fe,s(Fe)<=wt){P=Ee;break}je=I(1-this.es*n(x(P),2))*M(P),R=Lt(this.long0+d(X*je/this.a)/x(P))}return E.x=R,E.y=P,E},names:["Polyconic","poly"]},ime={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(E){var R=E.x,P=E.y,X=P-this.lat0,Y=R-this.long0,oe=1,pe=0,de;for(de=1;10>=de;de++)oe*=1e-5*(X/Fn),pe+=this.A[de]*oe;var Ee=pe,Fe=Y,We=1,je=0,Ke=0,ft=0,xt,ct;for(de=1;6>=de;de++)xt=We*Ee-je*Fe,ct=je*Ee+We*Fe,We=xt,je=ct,Ke=Ke+this.B_re[de]*We-this.B_im[de]*je,ft=ft+this.B_im[de]*We+this.B_re[de]*je;return E.x=ft*this.a+this.x0,E.y=Ke*this.a+this.y0,E},inverse:function(E){var R=E.x,P=E.y,X=R-this.x0,Y=P-this.y0,oe=Y/this.a,pe=X/this.a,de=1,Ee=0,Fe=0,We=0,je,Ke,ft;for(je=1;6>=je;je++)Ke=de*oe-Ee*pe,ft=Ee*oe+de*pe,de=Ke,Ee=ft,Fe=Fe+this.C_re[je]*de-this.C_im[je]*Ee,We=We+this.C_im[je]*de+this.C_re[je]*Ee;for(var xt=0;xt<this.iterations;xt++){var ct=Fe,jt=We,yi=oe,Ai=pe,oi,sr;for(je=2;6>=je;je++)oi=ct*Fe-jt*We,sr=jt*Fe+ct*We,ct=oi,jt=sr,yi+=(je-1)*(this.B_re[je]*ct-this.B_im[je]*jt),Ai+=(je-1)*(this.B_im[je]*ct+this.B_re[je]*jt);ct=1,jt=0;var Xi=this.B_re[1],wr=this.B_im[1];for(je=2;6>=je;je++)oi=ct*Fe-jt*We,sr=jt*Fe+ct*We,ct=oi,jt=sr,Xi+=je*(this.B_re[je]*ct-this.B_im[je]*jt),wr+=je*(this.B_im[je]*ct+this.B_re[je]*jt);var eo=Xi*Xi+wr*wr;Fe=(yi*Xi+Ai*wr)/eo,We=(Ai*Xi-yi*wr)/eo}var Qa=Fe,x_=We,O1=1,R1=0;for(je=1;9>=je;je++)O1*=Qa,R1+=this.D[je]*O1;var VE=this.lat0+1e5*(R1*Fn),mme=this.long0+x_;return E.x=mme,E.y=VE,E},names:["New_Zealand_Map_Grid","nzmg"]},rme={init:function(){},forward:function(E){var R=E.x,P=E.y,X=Lt(R-this.long0),Y=this.x0+this.a*X,oe=this.y0+1.25*(this.a*r(M(b/4+P/2.5)));return E.x=Y,E.y=oe,E},inverse:function(E){E.x-=this.x0,E.y-=this.y0;var R=Lt(this.long0+E.x/this.a),P=2.5*(_(S(.8*E.y/this.a))-b/4);return E.x=R,E.y=P,E},names:["Miller_Cylindrical","mill"]},sme={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=I((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=T1(this.es)},forward:function(E){var R=E.x,P=E.y,X,Y;if(R=Lt(R-this.long0),this.sphere){if(!this.m)P=this.n===1?P:d(this.n*x(P));else for(var oe=this.n*x(P),pe=20,de;pe&&(de=(this.m*P+x(P)-oe)/(this.m+T(P)),P-=de,!(s(de)<wt));--pe);X=this.a*this.C_x*R*(this.m+T(P)),Y=this.a*this.C_y*P}else{var Ee=x(P),Fe=T(P);Y=this.a*fy(P,Ee,Fe,this.en),X=this.a*R*Fe/I(1-this.es*Ee*Ee)}return E.x=X,E.y=Y,E},inverse:function(E){var R,P,X,Y;return E.x-=this.x0,X=E.x/this.a,E.y-=this.y0,R=E.y/this.a,this.sphere?(R/=this.C_y,X/=this.C_x*(this.m+T(R)),this.m?R=Np((this.m*R+x(R))/this.n):this.n!==1&&(R=Np(x(R)/this.n)),X=Lt(X+this.long0),R=$1(R)):(R=LE(E.y/this.a,this.es,this.en),Y=s(R),Y<lt?(Y=x(R),P=this.long0+E.x*I(1-this.es*Y*Y)/(this.a*T(R)),X=Lt(P)):Y-wt<lt&&(X=this.long0)),E.x=X,E.y=R,E},names:["Sinusoidal","sinu"]},nme={init:function(){},forward:function(E){for(var R=E.x,P=E.y,X=Lt(R-this.long0),Y=P,oe=b*x(P),pe;pe=-(Y+x(Y)-oe)/(1+T(Y)),Y+=pe,!(s(pe)<wt););Y/=2,b/2-s(P)<wt&&(X=0);var de=.900316316158*this.a*X*T(Y)+this.x0,Ee=1.4142135623731*this.a*x(Y)+this.y0;return E.x=de,E.y=Ee,E},inverse:function(E){var R,P;E.x-=this.x0,E.y-=this.y0,P=E.y/(1.4142135623731*this.a),.999999999999<s(P)&&(P=.999999999999),R=d(P);var X=Lt(this.long0+E.x/(.900316316158*this.a*T(R)));X<-b&&(X=-b),X>b&&(X=b),P=(2*R+x(2*R))/b,1<s(P)&&(P=1);var Y=d(P);return E.x=X,E.y=Y,E},names:["Mollweide","moll"]},ome={init:function(){s(this.lat1+this.lat2)<wt||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-n(this.temp,2),this.e=I(this.es),this.e0=Pc(this.es),this.e1=g_(this.es),this.e2=v_(this.es),this.e3=b_(this.es),this.sinphi=x(this.lat1),this.cosphi=T(this.lat1),this.ms1=Lr(this.e,this.sinphi,this.cosphi),this.ml1=Xs(this.e0,this.e1,this.e2,this.e3,this.lat1),s(this.lat1-this.lat2)<wt?this.ns=this.sinphi:(this.sinphi=x(this.lat2),this.cosphi=T(this.lat2),this.ms2=Lr(this.e,this.sinphi,this.cosphi),this.ml2=Xs(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Xs(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(E){var R=E.x,P=E.y,X;if(this.sphere)X=this.a*(this.g-P);else{var Y=Xs(this.e0,this.e1,this.e2,this.e3,P);X=this.a*(this.g-Y)}var oe=this.ns*Lt(R-this.long0),pe=this.x0+X*x(oe),de=this.y0+this.rh-X*T(oe);return E.x=pe,E.y=de,E},inverse:function(E){E.x-=this.x0,E.y=this.rh-E.y+this.y0;var R,P,X,Y;0<=this.ns?(P=I(E.x*E.x+E.y*E.y),R=1):(P=-I(E.x*E.x+E.y*E.y),R=-1);var oe=0;if(P!==0&&(oe=g(R*E.x,R*E.y)),this.sphere)return Y=Lt(this.long0+oe/this.ns),X=$1(this.g-P/this.a),E.x=Y,E.y=X,E;var pe=this.g-P/this.a;return X=jE(pe,this.e0,this.e1,this.e2,this.e3),Y=Lt(this.long0+oe/this.ns),E.x=Y,E.y=X,E},names:["Equidistant_Conic","eqdc"]},ame={init:function(){this.R=this.a},forward:function(E){var R=E.x,P=E.y,X=Lt(R-this.long0),Y,oe;s(P)<=wt&&(Y=this.x0+this.R*X,oe=this.y0);var pe=Np(2*s(P/b));(s(X)<=wt||s(s(P)-lt)<=wt)&&(Y=this.x0,oe=0<=P?this.y0+b*this.R*M(.5*pe):this.y0+b*this.R*-M(.5*pe));var de=.5*s(b/X-X/b),Ee=de*de,Fe=x(pe),We=T(pe),je=We/(Fe+We-1),Ke=je*(2/Fe-1),ft=Ke*Ke,xt=b*this.R*(de*(je-ft)+I(Ee*(je-ft)*(je-ft)-(ft+Ee)*(je*je-ft)))/(ft+Ee);0>X&&(xt=-xt),Y=this.x0+xt;var ct=Ee+je;return xt=b*this.R*(Ke*ct-de*I((ft+Ee)*(Ee+1)-ct*ct))/(ft+Ee),oe=0<=P?this.y0+xt:this.y0-xt,E.x=Y,E.y=oe,E},inverse:function(E){var R,P,X,Y,oe,pe,de,Ee,Fe,We,je,Ke,ft;return E.x-=this.x0,E.y-=this.y0,je=b*this.R,X=E.x/je,Y=E.y/je,oe=X*X+Y*Y,pe=-s(Y)*(1+oe),de=pe-2*Y*Y+X*X,Ee=-2*pe+1+2*Y*Y+oe*oe,ft=Y*Y/Ee+(2*de*de*de/Ee/Ee/Ee-9*pe*de/Ee/Ee)/27,Fe=(pe-de*de/3/Ee)/Ee,We=2*I(-Fe/3),je=3*ft/Fe/We,1<s(je)&&(0<=je?je=1:je=-1),Ke=f(je)/3,P=0<=E.y?(-We*T(Ke+b/3)-de/3/Ee)*b:-(-We*T(Ke+b/3)-de/3/Ee)*b,R=s(X)<wt?this.long0:Lt(this.long0+b*(oe-1+I(1+2*(X*X-Y*Y)+oe*oe))/2/X),E.x=R,E.y=P,E},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},lme={init:function(){this.sin_p12=x(this.lat0),this.cos_p12=T(this.lat0)},forward:function(E){var R=E.x,P=E.y,X=x(E.y),Y=T(E.y),oe=Lt(R-this.long0),pe,de,Ee,Fe,We,je,Ke,ft,xt,ct,jt,yi,Ai,oi,sr,Xi,wr,eo,Qa,x_,O1,R1,VE;return this.sphere?s(this.sin_p12-1)<=wt?(E.x=this.x0+this.a*(lt-P)*x(oe),E.y=this.y0-this.a*(lt-P)*T(oe),E):s(this.sin_p12+1)<=wt?(E.x=this.x0+this.a*(lt+P)*x(oe),E.y=this.y0+this.a*(lt+P)*T(oe),E):(eo=this.sin_p12*X+this.cos_p12*Y*T(oe),Xi=f(eo),wr=Xi?Xi/x(Xi):1,E.x=this.x0+this.a*wr*Y*x(oe),E.y=this.y0+this.a*wr*(this.cos_p12*X-this.sin_p12*Y*T(oe)),E):(pe=Pc(this.es),de=g_(this.es),Ee=v_(this.es),Fe=b_(this.es),s(this.sin_p12-1)<=wt?(We=this.a*Xs(pe,de,Ee,Fe,lt),je=this.a*Xs(pe,de,Ee,Fe,P),E.x=this.x0+(We-je)*x(oe),E.y=this.y0-(We-je)*T(oe),E):s(this.sin_p12+1)<=wt?(We=this.a*Xs(pe,de,Ee,Fe,lt),je=this.a*Xs(pe,de,Ee,Fe,P),E.x=this.x0+(We+je)*x(oe),E.y=this.y0+(We+je)*T(oe),E):(Ke=X/Y,ft=C1(this.a,this.e,this.sin_p12),xt=C1(this.a,this.e,X),ct=_((1-this.es)*Ke+this.es*ft*this.sin_p12/(xt*Y)),jt=g(x(oe),this.cos_p12*M(ct)-this.sin_p12*T(oe)),Qa=jt===0?d(this.cos_p12*x(ct)-this.sin_p12*T(ct)):s(s(jt)-b)<=wt?-d(this.cos_p12*x(ct)-this.sin_p12*T(ct)):d(x(oe)*T(ct)/x(jt)),yi=this.e*this.sin_p12/I(1-this.es),Ai=this.e*this.cos_p12*T(jt)/I(1-this.es),oi=yi*Ai,sr=Ai*Ai,x_=Qa*Qa,O1=x_*Qa,R1=O1*Qa,VE=R1*Qa,Xi=ft*Qa*(1-x_*sr*(1-sr)/6+O1/8*oi*(1-2*sr)+R1/120*(sr*(4-7*sr)-3*yi*yi*(1-7*sr))-VE/48*oi),E.x=this.x0+Xi*x(jt),E.y=this.y0+Xi*T(jt),E))},inverse:function(E){E.x-=this.x0,E.y-=this.y0;var R,P,X,Y,oe,pe,de,Ee,Fe,We,je,Ke,ft,xt,ct,jt,yi,Ai,oi,sr,Xi,wr,eo,Qa;return this.sphere?(R=I(E.x*E.x+E.y*E.y),R>2*lt*this.a?void 0:(P=R/this.a,X=x(P),Y=T(P),oe=this.long0,s(R)<=wt?pe=this.lat0:(pe=Np(Y*this.sin_p12+E.y*X*this.cos_p12/R),de=s(this.lat0)-lt,oe=s(de)<=wt?0<=this.lat0?Lt(this.long0+g(E.x,-E.y)):Lt(this.long0-g(-E.x,E.y)):Lt(this.long0+g(E.x*X,R*this.cos_p12*Y-E.y*this.sin_p12*X))),E.x=oe,E.y=pe,E)):(Ee=Pc(this.es),Fe=g_(this.es),We=v_(this.es),je=b_(this.es),s(this.sin_p12-1)<=wt?(Ke=this.a*Xs(Ee,Fe,We,je,lt),R=I(E.x*E.x+E.y*E.y),ft=Ke-R,pe=jE(ft/this.a,Ee,Fe,We,je),oe=Lt(this.long0+g(E.x,-1*E.y)),E.x=oe,E.y=pe,E):s(this.sin_p12+1)<=wt?(Ke=this.a*Xs(Ee,Fe,We,je,lt),R=I(E.x*E.x+E.y*E.y),ft=R-Ke,pe=jE(ft/this.a,Ee,Fe,We,je),oe=Lt(this.long0+g(E.x,E.y)),E.x=oe,E.y=pe,E):(R=I(E.x*E.x+E.y*E.y),jt=g(E.x,E.y),xt=C1(this.a,this.e,this.sin_p12),yi=T(jt),Ai=this.e*this.cos_p12*yi,oi=-Ai*Ai/(1-this.es),sr=3*this.es*(1-oi)*this.sin_p12*this.cos_p12*yi/(1-this.es),Xi=R/xt,wr=Xi-oi*(1+oi)*n(Xi,3)/6-sr*(1+3*oi)*n(Xi,4)/24,eo=1-oi*wr*wr/2-Xi*wr*wr*wr/6,ct=d(this.sin_p12*T(wr)+this.cos_p12*x(wr)*yi),oe=Lt(this.long0+d(x(jt)*x(wr)/T(ct))),Qa=x(ct),pe=g((Qa-this.es*eo*this.sin_p12)*M(ct),Qa*(1-this.es)),E.x=oe,E.y=pe,E))},names:["Azimuthal_Equidistant","aeqd"]},ume={init:function(){this.sin_p14=x(this.lat0),this.cos_p14=T(this.lat0)},forward:function(E){var R=E.x,P=E.y,X,Y,oe,pe,de,Ee,Fe,We;return oe=Lt(R-this.long0),X=x(P),Y=T(P),pe=T(oe),Ee=this.sin_p14*X+this.cos_p14*Y*pe,de=1,(0<Ee||s(Ee)<=wt)&&(Fe=this.a*de*Y*x(oe),We=this.y0+this.a*de*(this.cos_p14*X-this.sin_p14*Y*pe)),E.x=Fe,E.y=We,E},inverse:function(E){var R,P,X,Y,oe,pe,de;return E.x-=this.x0,E.y-=this.y0,R=I(E.x*E.x+E.y*E.y),P=Np(R/this.a),X=x(P),Y=T(P),pe=this.long0,s(R)<=wt?(de=this.lat0,E.x=pe,E.y=de,E):(de=Np(Y*this.sin_p14+E.y*X*this.cos_p14/R),oe=s(this.lat0)-lt,s(oe)<=wt?(pe=0<=this.lat0?Lt(this.long0+g(E.x,-E.y)):Lt(this.long0-g(-E.x,E.y)),E.x=pe,E.y=de,E):(pe=Lt(this.long0+g(E.x*X,R*this.cos_p14*Y-E.y*this.sin_p14*X)),E.x=pe,E.y=de,E))},names:["ortho"]},Qr={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},rr={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4},cme={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.face=this.lat0>=lt-Ni/2?Qr.TOP:this.lat0<=-(lt-Ni/2)?Qr.BOTTOM:s(this.long0)<=Ni?Qr.FRONT:s(this.long0)<=lt+Ni?0<this.long0?Qr.RIGHT:Qr.LEFT:Qr.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(E){var R={x:0,y:0},P={value:0},X,Y,oe,pe,de,Ee;if(E.x-=this.long0,X=this.es===0?E.y:_(this.one_minus_f_squared*M(E.y)),Y=E.x,this.face===Qr.TOP)pe=lt-X,Y>=Ni&&Y<=lt+Ni?(P.value=rr.AREA_0,oe=Y-lt):Y>lt+Ni||Y<=-(lt+Ni)?(P.value=rr.AREA_1,oe=0<Y?Y-br:Y+br):Y>-(lt+Ni)&&Y<=-Ni?(P.value=rr.AREA_2,oe=Y+lt):(P.value=rr.AREA_3,oe=Y);else if(this.face===Qr.BOTTOM)pe=lt+X,Y>=Ni&&Y<=lt+Ni?(P.value=rr.AREA_0,oe=-Y+lt):Y<Ni&&Y>=-Ni?(P.value=rr.AREA_1,oe=-Y):Y<-Ni&&Y>=-(lt+Ni)?(P.value=rr.AREA_2,oe=-Y-lt):(P.value=rr.AREA_3,oe=0<Y?-Y+br:-Y-br);else{var Fe,We,je,Ke,ft,xt,ct;this.face===Qr.RIGHT?Y=xn(Y,+lt):this.face===Qr.BACK?Y=xn(Y,+br):this.face===Qr.LEFT&&(Y=xn(Y,-lt)),Ke=x(X),ft=T(X),xt=x(Y),ct=T(Y),Fe=ft*ct,We=ft*xt,je=Ke,this.face===Qr.FRONT?(pe=f(Fe),oe=Pi(pe,je,We,P)):this.face===Qr.RIGHT?(pe=f(We),oe=Pi(pe,je,-Fe,P)):this.face===Qr.BACK?(pe=f(-Fe),oe=Pi(pe,je,-We,P)):this.face===Qr.LEFT?(pe=f(-We),oe=Pi(pe,je,Fe,P)):(pe=oe=0,P.value=rr.AREA_0)}return Ee=_(12/br*(oe+f(x(oe)*T(Ni))-lt)),de=I((1-T(pe))/(T(Ee)*T(Ee))/(1-T(_(1/T(oe))))),P.value===rr.AREA_1?Ee+=lt:P.value===rr.AREA_2?Ee+=br:P.value===rr.AREA_3&&(Ee+=1.5*br),R.x=de*T(Ee),R.y=de*x(Ee),R.x=R.x*this.a+this.x0,R.y=R.y*this.a+this.y0,E.x=R.x,E.y=R.y,E},inverse:function(E){var R={lam:0,phi:0},P={value:0},X,Y,oe,pe,de,Ee,Fe,We,je;if(E.x=(E.x-this.x0)/this.a,E.y=(E.y-this.y0)/this.a,Y=_(I(E.x*E.x+E.y*E.y)),X=g(E.y,E.x),0<=E.x&&E.x>=s(E.y)?P.value=rr.AREA_0:0<=E.y&&E.y>=s(E.x)?(P.value=rr.AREA_1,X-=lt):0>E.x&&-E.x>=s(E.y)?(P.value=rr.AREA_2,X=0>X?X+br:X-br):(P.value=rr.AREA_3,X+=lt),je=br/12*M(X),de=x(je)/(T(je)-1/I(2)),Ee=_(de),oe=T(X),pe=M(Y),Fe=1-oe*oe*pe*pe*(1-T(_(1/T(Ee)))),-1>Fe?Fe=-1:1<Fe&&(Fe=1),this.face===Qr.TOP)We=f(Fe),R.phi=lt-We,R.lam=P.value===rr.AREA_0?Ee+lt:P.value===rr.AREA_1?0>Ee?Ee+br:Ee-br:P.value===rr.AREA_2?Ee-lt:Ee;else if(this.face===Qr.BOTTOM)We=f(Fe),R.phi=We-lt,R.lam=P.value===rr.AREA_0?-Ee+lt:P.value===rr.AREA_1?-Ee:P.value===rr.AREA_2?-Ee-lt:0>Ee?-Ee-br:-Ee+br;else{var Ke,ft,xt;Ke=Fe,je=Ke*Ke,xt=1<=je?0:I(1-je)*x(Ee),je+=xt*xt,ft=1<=je?0:I(1-je),P.value===rr.AREA_1?(je=ft,ft=-xt,xt=je):P.value===rr.AREA_2?(ft=-ft,xt=-xt):P.value===rr.AREA_3&&(je=ft,ft=xt,xt=-je),this.face===Qr.RIGHT?(je=Ke,Ke=-ft,ft=je):this.face===Qr.BACK?(Ke=-Ke,ft=-ft):this.face===Qr.LEFT&&(je=Ke,Ke=ft,ft=-je),R.phi=f(-xt)-lt,R.lam=g(ft,Ke),this.face===Qr.RIGHT?R.lam=xn(R.lam,-lt):this.face===Qr.BACK?R.lam=xn(R.lam,-br):this.face===Qr.LEFT&&(R.lam=xn(R.lam,+lt))}if(this.es!==0){var ct,jt,yi;ct=0>R.phi?1:0,jt=M(R.phi),yi=this.b/I(jt*jt+this.one_minus_f_squared),R.phi=_(I(this.a*this.a-yi*yi)/(this.one_minus_f*yi)),ct&&(R.phi=-R.phi)}return R.lam+=this.long0,E.x=R.lam,E.y=R.phi,E},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},W$=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],w_=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],uV=.8487,cV=1.3523,hV=ia/5,UE=function(E,R){return E[0]+R*(E[1]+R*(E[2]+R*E[3]))},hme=function(E,R){return E[1]+R*(2*E[2]+3*R*E[3])},dme={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(E){var R=Lt(E.x-this.long0),P=s(E.y),X=i(P*hV);0>X?X=0:18<=X&&(X=17),P=ia*(P-1/hV*X);var Y={x:UE(W$[X],P)*R,y:UE(w_[X],P)};return 0>E.y&&(Y.y=-Y.y),Y.x=Y.x*this.a*uV+this.x0,Y.y=Y.y*this.a*cV+this.y0,Y},inverse:function(E){var R={x:(E.x-this.x0)/(this.a*uV),y:s(E.y-this.y0)/(this.a*cV)};if(1<=R.y)R.x/=W$[18][0],R.y=0>E.y?-lt:lt;else{var P=i(18*R.y);for(0>P?P=0:18<=P&&(P=17);;)if(w_[P][0]>R.y)--P;else if(w_[P+1][0]<=R.y)++P;else break;var X=w_[P],Y=5*(R.y-X[0])/(w_[P+1][0]-X[0]);Y=yt(function(oe){return(UE(X,oe)-R.y)/hme(X,oe)},Y,wt,100),R.x/=UE(W$[P],Y),R.y=(5*P+Y)*Es,0>E.y&&(R.y=-R.y)}return R.x=Lt(R.x+this.long0),R},names:["Robinson","robin"]},pme={init:function(){this.name="geocent"},forward:function(E){var R=O(E,this.es,this.a);return R},inverse:function(E){var R=C(E,this.es,this.a,this.b);return R},names:["Geocentric","geocentric","geocent","Geocent"]},Xn={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},__={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}},fme={init:function(){if(Object.keys(__).forEach(function(P){if(typeof this[P]>"u")this[P]=__[P].def;else{if(__[P].num&&isNaN(this[P]))throw new Error("Invalid parameter value, must be numeric "+P+" = "+this[P]);__[P].num&&(this[P]=parseFloat(this[P]))}__[P].degrees&&(this[P]*=Es)}.bind(this)),s(s(this.lat0)-lt)<wt?this.mode=0>this.lat0?Xn.S_POLE:Xn.N_POLE:s(this.lat0)<wt?this.mode=Xn.EQUIT:(this.mode=Xn.OBLIQ,this.sinph0=x(this.lat0),this.cosph0=T(this.lat0)),this.pn1=this.h/this.a,0>=this.pn1||1e10<this.pn1)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var E=this.tilt,R=this.azi;this.cg=T(R),this.sg=x(R),this.cw=T(E),this.sw=x(E)},forward:function(E){E.x-=this.long0;var R=x(E.y),P=T(E.y),X=T(E.x),Y,oe;switch(this.mode){case Xn.OBLIQ:oe=this.sinph0*R+this.cosph0*P*X;break;case Xn.EQUIT:oe=P*X;break;case Xn.S_POLE:oe=-R;break;case Xn.N_POLE:oe=R}switch(oe=this.pn1/(this.p-oe),Y=oe*P*x(E.x),this.mode){case Xn.OBLIQ:oe*=this.cosph0*R-this.sinph0*P*X;break;case Xn.EQUIT:oe*=R;break;case Xn.N_POLE:oe*=-(P*X);break;case Xn.S_POLE:oe*=P*X}var pe,de;return pe=oe*this.cg+Y*this.sg,de=1/(pe*this.sw*this.h1+this.cw),Y=(Y*this.cg-oe*this.sg)*this.cw*de,oe=pe*de,E.x=Y*this.a,E.y=oe*this.a,E},inverse:function(E){E.x/=this.a,E.y/=this.a;var R={x:E.x,y:E.y},P,X,Y;Y=1/(this.pn1-E.y*this.sw),P=this.pn1*E.x*Y,X=this.pn1*E.y*this.cw*Y,E.x=P*this.cg+X*this.sg,E.y=X*this.cg-P*this.sg;var oe=M1(E.x,E.y);if(s(oe)<wt)R.x=0,R.y=E.y;else{var pe,de;switch(de=1-oe*oe*this.pfact,de=(this.p-I(de))/(this.pn1/oe+oe/this.pn1),pe=I(1-de*de),this.mode){case Xn.OBLIQ:R.y=d(pe*this.sinph0+E.y*de*this.cosph0/oe),E.y=(pe-this.sinph0*x(R.y))*oe,E.x*=de*this.cosph0;break;case Xn.EQUIT:R.y=d(E.y*de/oe),E.y=pe*oe,E.x*=de;break;case Xn.N_POLE:R.y=d(pe),E.y=-E.y;break;case Xn.S_POLE:R.y=-d(pe)}R.x=g(E.x,E.y)}return E.x=R.x+this.long0,E.y=R.y,E},names:["Tilted_Perspective","tpers"]};return be.defaultDatum="WGS84",be.Proj=re,be.WGS84=new be.Proj("WGS84"),be.Point=jl,be.toPoint=$E,be.defs=y,be.nadgrid=we,be.transform=He,be.mgrs={forward:ke,inverse:function(E){var R=kt(_n(E.toUpperCase()));return R.lat&&R.lon?[R.lon,R.lat,R.lon,R.lat]:[R.left,R.bottom,R.right,R.top]},toPoint:Ge},be.version="2.7.4",function(E){E.Proj.projections.add(I1),E.Proj.projections.add(qe),E.Proj.projections.add(Vt),E.Proj.projections.add(ra),E.Proj.projections.add(Qn),E.Proj.projections.add(PE),E.Proj.projections.add(NE),E.Proj.projections.add(FE),E.Proj.projections.add(DE),E.Proj.projections.add(Bfe),E.Proj.projections.add(Zfe),E.Proj.projections.add(Yfe),E.Proj.projections.add(Kfe),E.Proj.projections.add(Xfe),E.Proj.projections.add(eme),E.Proj.projections.add(tme),E.Proj.projections.add(ime),E.Proj.projections.add(rme),E.Proj.projections.add(sme),E.Proj.projections.add(nme),E.Proj.projections.add(ome),E.Proj.projections.add(ame),E.Proj.projections.add(lme),E.Proj.projections.add(ume),E.Proj.projections.add(cme),E.Proj.projections.add(dme),E.Proj.projections.add(pme),E.Proj.projections.add(fme)}(be),be})},{}],18:[function(l,u,c){function d(v,b){for(var _ in v)b[_]=v[_]}function f(v,b,_){return g(v,b,_)}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var m=l("buffer"),g=m.Buffer;g.from&&g.alloc&&g.allocUnsafe&&g.allocUnsafeSlow?u.exports=m:(d(m,c),c.Buffer=f),f.prototype=Object.create(g.prototype),d(g,f),f.from=function(v,b,_){if(typeof v=="number")throw new TypeError("Argument must not be a number");return g(v,b,_)},f.alloc=function(v,b,_){if(typeof v!="number")throw new TypeError("Argument must be a number");var S=g(v);return b===void 0?S.fill(0):typeof _=="string"?S.fill(b,_):S.fill(b),S},f.allocUnsafe=function(v){if(typeof v!="number")throw new TypeError("Argument must be a number");return g(v)},f.allocUnsafeSlow=function(v){if(typeof v!="number")throw new TypeError("Argument must be a number");return m.SlowBuffer(v)}},{buffer:8}],19:[function(l,u,c){function d(z){if(!z)return"utf8";for(var H;;)switch(z){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return z;default:if(H)return;z=(""+z).toLowerCase(),H=!0}}function f(z){var H=d(z);if(typeof H!="string"&&(L.isEncoding===B||!B(z)))throw new Error("Unknown encoding: "+z);return H||z}function m(z){this.encoding=f(z);var H;switch(this.encoding){case"utf16le":this.text=S,this.end=M,H=4;break;case"utf8":this.fillLast=_,H=4;break;case"base64":this.text=x,this.end=T,H=3;break;default:return this.write=I,void(this.end=$)}this.lastNeed=0,this.lastTotal=0,this.lastChar=L.allocUnsafe(H)}function g(z){return 127>=z?0:z>>5==6?2:z>>4==14?3:z>>3==30?4:z>>6==2?-1:-2}function v(z,H,J){var K=H.length-1;if(K<J)return 0;var Q=g(H[K]);return 0<=Q?(0<Q&&(z.lastNeed=Q-1),Q):--K<J||Q===-2?0:(Q=g(H[K]),0<=Q?(0<Q&&(z.lastNeed=Q-2),Q):--K<J||Q===-2?0:(Q=g(H[K]),0<=Q?(0<Q&&(Q===2?Q=0:z.lastNeed=Q-3),Q):0))}function b(z,H){if((192&H[0])!=128)return z.lastNeed=0,"�";if(1<z.lastNeed&&1<H.length){if((192&H[1])!=128)return z.lastNeed=1,"�";if(2<z.lastNeed&&2<H.length&&(192&H[2])!=128)return z.lastNeed=2,"�"}}function _(z){var H=this.lastTotal-this.lastNeed,J=b(this,z);return J===void 0?this.lastNeed<=z.length?(z.copy(this.lastChar,H,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(z.copy(this.lastChar,H,0,z.length),void(this.lastNeed-=z.length)):J}function S(z,H){if((z.length-H)%2==0){var J=z.toString("utf16le",H);if(J){var K=J.charCodeAt(J.length-1);if(55296<=K&&56319>=K)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=z[z.length-2],this.lastChar[1]=z[z.length-1],J.slice(0,-1)}return J}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=z[z.length-1],z.toString("utf16le",H,z.length-1)}function M(z){var H=z&&z.length?this.write(z):"";if(this.lastNeed){var J=this.lastTotal-this.lastNeed;return H+this.lastChar.toString("utf16le",0,J)}return H}function x(z,H){var J=(z.length-H)%3;return J==0?z.toString("base64",H):(this.lastNeed=3-J,this.lastTotal=3,J==1?this.lastChar[0]=z[z.length-1]:(this.lastChar[0]=z[z.length-2],this.lastChar[1]=z[z.length-1]),z.toString("base64",H,z.length-J))}function T(z){var H=z&&z.length?this.write(z):"";return this.lastNeed?H+this.lastChar.toString("base64",0,3-this.lastNeed):H}function I(z){return z.toString(this.encoding)}function $(z){return z&&z.length?this.write(z):""}var L=l("safe-buffer").Buffer,B=L.isEncoding||function(z){switch(z=""+z,z&&z.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};c.StringDecoder=m,m.prototype.write=function(z){if(z.length===0)return"";var H,J;if(this.lastNeed){if(H=this.fillLast(z),H===void 0)return"";J=this.lastNeed,this.lastNeed=0}else J=0;return J<z.length?H?H+this.text(z,J):this.text(z,J):H||""},m.prototype.end=function(z){var H=z&&z.length?this.write(z):"";return this.lastNeed?H+"�":H},m.prototype.text=function(z,H){var J=v(this,z,H);if(!this.lastNeed)return z.toString("utf8",H);this.lastTotal=J;var K=z.length-(J-this.lastNeed);return z.copy(this.lastChar,0,K),z.toString("utf8",H,K)},m.prototype.fillLast=function(z){return this.lastNeed<=z.length?(z.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(z.copy(this.lastChar,this.lastTotal-this.lastNeed,0,z.length),void(this.lastNeed-=z.length))}},{"safe-buffer":18}],20:[function(l,u){u.exports=l("./lib/encoding.js")},{"./lib/encoding.js":21}],21:[function(l,u){(function(c){function d(G,Z,F){return Z<=G&&G<=F}function f(G,Z){return G.indexOf(Z)!==-1}function m(G){if(G===void 0)return{};if(G===Object(G))return G;throw TypeError("Could not convert argument to dictionary")}function g(G){for(var Z=G+"",F=Z.length,ie=0,ge=[];ie<F;){var xe=Z.charCodeAt(ie);if(55296>xe||57343<xe)ge.push(xe);else if(56320<=xe&&57343>=xe)ge.push(65533);else if(55296<=xe&&56319>=xe)if(ie===F-1)ge.push(65533);else{var fe=Z.charCodeAt(ie+1);56320<=fe&&57343>=fe?(ge.push(65536+((1023&xe)<<10)+(1023&fe)),ie+=1):ge.push(65533)}ie+=1}return ge}function v(G){for(var Z="",F=0,ie;F<G.length;++F)ie=G[F],65535>=ie?Z+=o(ie):(ie-=65536,Z+=o((ie>>10)+55296,(1023&ie)+56320));return Z}function b(G){return 0<=G&&127>=G}function _(G){this.tokens=[].slice.call(G),this.tokens.reverse()}function S(G,Z){if(G)throw TypeError("Decoder error");return Z||65533}function M(G){throw TypeError("The code point "+G+" could not be encoded.")}function x(G){return G=(G+"").trim().toLowerCase(),Object.prototype.hasOwnProperty.call(le,G)?le[G]:null}function T(G,Z){return Z&&Z[G]||null}function I(G,Z){var F=Z.indexOf(G);return F===-1?null:F}function $(G){if(!("encoding-indexes"in c))throw Error("Indexes missing. Did you forget to include encoding-indexes.js first?");return c["encoding-indexes"][G]}function L(G){if(39419<G&&189e3>G||1237575<G)return null;if(G===7457)return 59335;var Z=0,F=0,ie=$("gb18030-ranges"),ge;for(ge=0;ge<ie.length;++ge){var xe=ie[ge];if(xe[0]<=G)Z=xe[0],F=xe[1];else break}return F+G-Z}function B(G){if(G===59335)return 7457;var Z=0,F=0,ie=$("gb18030-ranges"),ge;for(ge=0;ge<ie.length;++ge){var xe=ie[ge];if(xe[1]<=G)Z=xe[1],F=xe[0];else break}return F+G-Z}function z(G){O=O||$("jis0208").map(function(F,ie){return d(ie,8272,8835)?null:F});var Z=O;return Z.indexOf(G)}function H(G){C=C||$("big5").map(function(F,ie){return ie<5024?null:F});var Z=C;return G===9552||G===9566||G===9569||G===9578||G===21313||G===21317?Z.lastIndexOf(G):I(G,Z)}function J(G,Z){if(!(this instanceof J))throw TypeError("Called as a function. Did you forget 'new'?");G=G===void 0?"utf-8":G+"",Z=m(Z),this._encoding=null,this._decoder=null,this._ignoreBOM=!1,this._BOMseen=!1,this._error_mode="replacement",this._do_not_flush=!1;var F=x(G);if(F===null||F.name==="replacement")throw RangeError("Unknown encoding: "+G);if(!k[F.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js first?");var ie=this;return ie._encoding=F,Z.fatal&&(ie._error_mode="fatal"),Z.ignoreBOM&&(ie._ignoreBOM=!0),Object.defineProperty||(this.encoding=ie._encoding.name.toLowerCase(),this.fatal=ie._error_mode==="fatal",this.ignoreBOM=ie._ignoreBOM),ie}function K(G,Z){if(!(this instanceof K))throw TypeError("Called as a function. Did you forget 'new'?");Z=m(Z),this._encoding=null,this._encoder=null,this._do_not_flush=!1,this._fatal=Z.fatal?"fatal":"replacement";var F=this;if(Z.NONSTANDARD_allowLegacyEncoding){G=G===void 0?"utf-8":G+"";var ie=x(G);if(ie===null||ie.name==="replacement")throw RangeError("Unknown encoding: "+G);if(!re[ie.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js first?");F._encoding=ie}else F._encoding=x("utf-8"),G!==void 0&&"console"in c&&console.warn("TextEncoder constructor called with encoding label, which is ignored.");return Object.defineProperty||(this.encoding=F._encoding.name.toLowerCase()),F}function Q(G){var Z=G.fatal,F=0,ie=0,ge=0,xe=128,fe=191;this.handler=function(ze,He){if(He===-1&&ge!==0)return ge=0,S(Z);if(He===-1)return-1;if(ge===0){if(d(He,0,127))return He;if(d(He,194,223))ge=1,F=31&He;else if(d(He,224,239))He===224&&(xe=160),He===237&&(fe=159),ge=2,F=15&He;else if(d(He,240,244))He===240&&(xe=144),He===244&&(fe=143),ge=3,F=7&He;else return S(Z);return null}if(!d(He,xe,fe))return F=ge=ie=0,xe=128,fe=191,ze.prepend(He),S(Z);if(xe=128,fe=191,F=F<<6|63&He,ie+=1,ie!==ge)return null;var et=F;return F=ge=ie=0,et}}function y(G){G.fatal,this.handler=function(Z,F){if(F===-1)return-1;if(ye(F))return F;var ie,ge;d(F,128,2047)?(ie=1,ge=192):d(F,2048,65535)?(ie=2,ge=224):d(F,65536,1114111)&&(ie=3,ge=240);for(var xe=[(F>>6*ie)+ge];0<ie;){var fe=F>>6*(ie-1);xe.push(128|63&fe),ie-=1}return xe}}function A(G,Z){var F=Z.fatal;this.handler=function(ie,ge){if(ge===-1)return-1;if(b(ge))return ge;var xe=G[ge-128];return xe===null?S(F):xe}}function N(G,Z){Z.fatal,this.handler=function(F,ie){if(ie===-1)return-1;if(ye(ie))return ie;var ge=I(ie,G);return ge===null&&M(ie),ge+128}}function D(G){var Z=G.fatal,F=0,ie=0,ge=0;this.handler=function(xe,fe){if(fe===-1&&F===0&&ie===0&&ge===0)return-1;fe===-1&&(F!==0||ie!==0||ge!==0)&&(F=0,ie=0,ge=0,S(Z));var ze;if(ge!==0){ze=null,d(fe,48,57)&&(ze=L(10*(126*(10*(F-129)+ie-48)+ge-129)+fe-48));var He=[ie,ge,fe];return F=0,ie=0,ge=0,ze===null?(xe.prepend(He),S(Z)):ze}if(ie!==0)return d(fe,129,254)?(ge=fe,null):(xe.prepend([ie,fe]),F=0,ie=0,S(Z));if(F!==0){if(d(fe,48,57))return ie=fe,null;var et=F,Ve=null;F=0;var be=127>fe?64:65;return(d(fe,64,126)||d(fe,128,254))&&(Ve=190*(et-129)+(fe-be)),ze=Ve===null?null:T(Ve,$("gb18030")),ze===null&&b(fe)&&xe.prepend(fe),ze===null?S(Z):ze}return b(fe)?fe:fe===128?8364:d(fe,129,254)?(F=fe,null):S(Z)}}function ne(G,Z){G.fatal,this.handler=function(F,ie){if(ie===-1)return-1;if(ye(ie))return ie;if(ie===58853)return M(ie);if(Z&&ie===8364)return 128;var ge=I(ie,$("gb18030"));if(ge!==null){var xe=se(ge/190)+129,fe=ge%190,ze=63>fe?64:65;return[xe,fe+ze]}if(Z)return M(ie);ge=B(ie);var He=se(ge/10/126/10);ge-=10*(126*(10*He));var et=se(ge/10/126);ge-=126*(10*et);var Ve=se(ge/10),be=ge-10*Ve;return[He+129,et+48,Ve+129,be+48]}}function q(G){var Z=G.fatal,F=0;this.handler=function(ie,ge){if(ge===-1&&F!==0)return F=0,S(Z);if(ge===-1&&F===0)return-1;if(F!==0){var xe=F,fe=null;F=0;var ze=127>ge?64:98;switch((d(ge,64,126)||d(ge,161,254))&&(fe=157*(xe-129)+(ge-ze)),fe){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}var He=fe===null?null:T(fe,$("big5"));return He===null&&b(ge)&&ie.prepend(ge),He===null?S(Z):He}return b(ge)?ge:d(ge,129,254)?(F=ge,null):S(Z)}}function he(G){G.fatal,this.handler=function(Z,F){if(F===-1)return-1;if(ye(F))return F;var ie=H(F);if(ie===null)return M(F);var ge=se(ie/157)+129;if(161>ge)return M(F);var xe=ie%157,fe=63>xe?64:98;return[ge,xe+fe]}}function te(G){var Z=G.fatal,F=!1,ie=0;this.handler=function(ge,xe){if(xe===-1&&ie!==0)return ie=0,S(Z);if(xe===-1&&ie===0)return-1;if(ie===142&&d(xe,161,223))return ie=0,65216+xe;if(ie===143&&d(xe,161,254))return F=!0,ie=xe,null;if(ie!==0){var fe=ie;ie=0;var ze=null;return d(fe,161,254)&&d(xe,161,254)&&(ze=T(94*(fe-161)+(xe-161),$(F?"jis0212":"jis0208"))),F=!1,d(xe,161,254)||ge.prepend(xe),ze===null?S(Z):ze}return b(xe)?xe:xe===142||xe===143||d(xe,161,254)?(ie=xe,null):S(Z)}}function me(G){G.fatal,this.handler=function(Z,F){if(F===-1)return-1;if(ye(F))return F;if(F===165)return 92;if(F===8254)return 126;if(d(F,65377,65439))return[142,F-65377+161];F===8722&&(F=65293);var ie=I(F,$("jis0208"));if(ie===null)return M(F);var ge=se(ie/94)+161;return[ge,ie%94+161]}}function ve(G){var Z=G.fatal,F={ASCII:0,Roman:1,Katakana:2,LeadByte:3,TrailByte:4,EscapeStart:5,Escape:6},ie=F.ASCII,ge=F.ASCII,xe=0,fe=!1;this.handler=function(ze,He){switch(ie){default:case F.ASCII:return He===27?(ie=F.EscapeStart,null):d(He,0,127)&&He!==14&&He!==15&&He!==27?(fe=!1,He):He===-1?-1:(fe=!1,S(Z));case F.Roman:return He===27?(ie=F.EscapeStart,null):He===92?(fe=!1,165):He===126?(fe=!1,8254):d(He,0,127)&&He!==14&&He!==15&&He!==27&&He!==92&&He!==126?(fe=!1,He):He===-1?-1:(fe=!1,S(Z));case F.Katakana:return He===27?(ie=F.EscapeStart,null):d(He,33,95)?(fe=!1,65344+He):He===-1?-1:(fe=!1,S(Z));case F.LeadByte:return He===27?(ie=F.EscapeStart,null):d(He,33,126)?(fe=!1,xe=He,ie=F.TrailByte,null):He===-1?-1:(fe=!1,S(Z));case F.TrailByte:if(He===27)return ie=F.EscapeStart,S(Z);if(d(He,33,126)){ie=F.LeadByte;var et=94*(xe-33)+He-33,Ve=T(et,$("jis0208"));return Ve===null?S(Z):Ve}return He===-1?(ie=F.LeadByte,ze.prepend(He),S(Z)):(ie=F.LeadByte,S(Z));case F.EscapeStart:return He===36||He===40?(xe=He,ie=F.Escape,null):(ze.prepend(He),fe=!1,ie=ge,S(Z));case F.Escape:var be=xe;xe=0;var ke=null;if(be===40&&He===66&&(ke=F.ASCII),be===40&&He===74&&(ke=F.Roman),be===40&&He===73&&(ke=F.Katakana),be===36&&(He===64||He===66)&&(ke=F.LeadByte),ke!==null){ie=ie=ke;var Ge=fe;return fe=!0,Ge?S(Z):null}return ze.prepend([be,He]),fe=!1,ie=ge,S(Z)}}}function _e(G){G.fatal;var Z={ASCII:0,Roman:1,jis0208:2},F=Z.ASCII;this.handler=function(ie,ge){if(ge===-1&&F!==Z.ASCII)return ie.prepend(ge),F=Z.ASCII,[27,40,66];if(ge===-1&&F===Z.ASCII)return-1;if((F===Z.ASCII||F===Z.Roman)&&(ge===14||ge===15||ge===27))return M(65533);if(F===Z.ASCII&&ye(ge))return ge;if(F===Z.Roman&&(ye(ge)&&ge!==92&&ge!==126||ge==165||ge==8254)){if(ye(ge))return ge;if(ge===165)return 92;if(ge===8254)return 126}if(ye(ge)&&F!==Z.ASCII)return ie.prepend(ge),F=Z.ASCII,[27,40,66];if((ge===165||ge===8254)&&F!==Z.Roman)return ie.prepend(ge),F=Z.Roman,[27,40,74];ge===8722&&(ge=65293);var xe=I(ge,$("jis0208"));if(xe===null)return M(ge);if(F!==Z.jis0208)return ie.prepend(ge),F=Z.jis0208,[27,36,66];var fe=se(xe/94)+33;return[fe,xe%94+33]}}function Se(G){var Z=G.fatal,F=0;this.handler=function(ie,ge){if(ge===-1&&F!==0)return F=0,S(Z);if(ge===-1&&F===0)return-1;if(F!==0){var xe=F,fe=null;F=0;var ze=127>ge?64:65,He=160>xe?129:193;if((d(ge,64,126)||d(ge,128,252))&&(fe=188*(xe-He)+ge-ze),d(fe,8836,10715))return 48508+fe;var et=fe===null?null:T(fe,$("jis0208"));return et===null&&b(ge)&&ie.prepend(ge),et===null?S(Z):et}return b(ge)||ge===128?ge:d(ge,161,223)?65216+ge:d(ge,129,159)||d(ge,224,252)?(F=ge,null):S(Z)}}function Oe(G){G.fatal,this.handler=function(Z,F){if(F===-1)return-1;if(ye(F)||F===128)return F;if(F===165)return 92;if(F===8254)return 126;if(d(F,65377,65439))return F-65377+161;F===8722&&(F=65293);var ie=z(F);if(ie===null)return M(F);var ge=se(ie/188),xe=31>ge?129:193,fe=ie%188,ze=63>fe?64:65;return[ge+xe,fe+ze]}}function Te(G){var Z=G.fatal,F=0;this.handler=function(ie,ge){if(ge===-1&&F!==0)return F=0,S(Z);if(ge===-1&&F===0)return-1;if(F!==0){var xe=F,fe=null;F=0,d(ge,65,254)&&(fe=190*(xe-129)+(ge-65));var ze=fe===null?null:T(fe,$("euc-kr"));return fe===null&&b(ge)&&ie.prepend(ge),ze===null?S(Z):ze}return b(ge)?ge:d(ge,129,254)?(F=ge,null):S(Z)}}function we(G){G.fatal,this.handler=function(Z,F){if(F===-1)return-1;if(ye(F))return F;var ie=I(F,$("euc-kr"));if(ie===null)return M(F);var ge=se(ie/190)+129;return[ge,ie%190+65]}}function Ie(G,Z){var F=G>>8,ie=255&G;return Z?[F,ie]:[ie,F]}function Ae(G,Z){var F=Z.fatal,ie=null,ge=null;this.handler=function(xe,fe){if(fe===-1&&(ie!==null||ge!==null))return S(F);if(fe===-1&&ie===null&&ge===null)return-1;if(ie===null)return ie=fe,null;var ze;if(ze=G?(ie<<8)+fe:(fe<<8)+ie,ie=null,ge!==null){var He=ge;return ge=null,d(ze,56320,57343)?65536+1024*(He-55296)+(ze-56320):(xe.prepend(Ie(ze,G)),S(F))}return d(ze,55296,56319)?(ge=ze,null):d(ze,56320,57343)?S(F):ze}}function W(G,Z){Z.fatal,this.handler=function(F,ie){if(ie===-1)return-1;if(d(ie,0,65535))return Ie(ie,G);var ge=Ie((ie-65536>>10)+55296,G),xe=Ie((1023&ie-65536)+56320,G);return ge.concat(xe)}}function V(G){G.fatal,this.handler=function(Z,F){return F===-1?-1:b(F)?F:63360+F-128}}function j(G){G.fatal,this.handler=function(Z,F){return F===-1?-1:ye(F)?F:d(F,63360,63487)?F-63360+128:M(F)}}typeof u<"u"&&u.exports&&!c["encoding-indexes"]&&l("./encoding-indexes.js");var se=i,ye=b,ae=-1;_.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():ae},prepend:function(G){if(Array.isArray(G))for(var Z=G;Z.length;)this.tokens.push(Z.pop());else this.tokens.push(G)},push:function(G){if(Array.isArray(G))for(var Z=G;Z.length;)this.tokens.unshift(Z.shift());else this.tokens.unshift(G)}};var U=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"IBM866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"ISO-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"ISO-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"ISO-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"ISO-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"ISO-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"ISO-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:["csshiftjis","ms932","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],le={};U.forEach(function(G){G.encodings.forEach(function(Z){Z.labels.forEach(function(F){le[F]=Z})})});var re={},k={},O,C;Object.defineProperty&&(Object.defineProperty(J.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(J.prototype,"fatal",{get:function(){return this._error_mode==="fatal"}}),Object.defineProperty(J.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}})),J.prototype.decode=function(G,Z){var F;F=typeof G=="object"&&G instanceof ArrayBuffer?new Uint8Array(G):typeof G=="object"&&"buffer"in G&&G.buffer instanceof ArrayBuffer?new Uint8Array(G.buffer,G.byteOffset,G.byteLength):new Uint8Array(0),Z=m(Z),this._do_not_flush||(this._decoder=k[this._encoding.name]({fatal:this._error_mode==="fatal"}),this._BOMseen=!1),this._do_not_flush=!!Z.stream;for(var ie=new _(F),ge=[],xe,fe;fe=ie.read(),fe!==ae&&(xe=this._decoder.handler(ie,fe),xe!==-1);)xe!==null&&(Array.isArray(xe)?ge.push.apply(ge,xe):ge.push(xe));if(!this._do_not_flush){do{if(xe=this._decoder.handler(ie,ie.read()),xe===-1)break;xe!==null&&(Array.isArray(xe)?ge.push.apply(ge,xe):ge.push(xe))}while(!ie.endOfStream());this._decoder=null}return function(ze){return!f(["UTF-8","UTF-16LE","UTF-16BE"],this._encoding.name)||this._ignoreBOM||this._BOMseen||(0<ze.length&&ze[0]===65279?(this._BOMseen=!0,ze.shift()):0<ze.length&&(this._BOMseen=!0)),v(ze)}.call(this,ge)},Object.defineProperty&&Object.defineProperty(K.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),K.prototype.encode=function(G,Z){G=G===void 0?"":G+"",Z=m(Z),this._do_not_flush||(this._encoder=re[this._encoding.name]({fatal:this._fatal==="fatal"})),this._do_not_flush=!!Z.stream;for(var F=new _(g(G)),ie=[],ge,xe;xe=F.read(),xe!==ae&&(ge=this._encoder.handler(F,xe),ge!==-1);)Array.isArray(ge)?ie.push.apply(ie,ge):ie.push(ge);if(!this._do_not_flush){for(;ge=this._encoder.handler(F,F.read()),ge!==-1;)Array.isArray(ge)?ie.push.apply(ie,ge):ie.push(ge);this._encoder=null}return new Uint8Array(ie)},re["UTF-8"]=function(G){return new y(G)},k["UTF-8"]=function(G){return new Q(G)},function(){"encoding-indexes"in c&&U.forEach(function(G){G.heading!=="Legacy single-byte encodings"||G.encodings.forEach(function(Z){var F=Z.name,ie=$(F.toLowerCase());k[F]=function(ge){return new A(ie,ge)},re[F]=function(ge){return new N(ie,ge)}})})}(),k.GBK=function(G){return new D(G)},re.GBK=function(G){return new ne(G,!0)},re.gb18030=function(G){return new ne(G)},k.gb18030=function(G){return new D(G)},re.Big5=function(G){return new he(G)},k.Big5=function(G){return new q(G)},re["EUC-JP"]=function(G){return new me(G)},k["EUC-JP"]=function(G){return new te(G)},re["ISO-2022-JP"]=function(G){return new _e(G)},k["ISO-2022-JP"]=function(G){return new ve(G)},re.Shift_JIS=function(G){return new Oe(G)},k.Shift_JIS=function(G){return new Se(G)},re["EUC-KR"]=function(G){return new we(G)},k["EUC-KR"]=function(G){return new Te(G)},re["UTF-16BE"]=function(G){return new W(!0,G)},k["UTF-16BE"]=function(G){return new Ae(!0,G)},re["UTF-16LE"]=function(G){return new W(!1,G)},k["UTF-16LE"]=function(G){return new Ae(!1,G)},re["x-user-defined"]=function(G){return new j(G)},k["x-user-defined"]=function(G){return new V(G)},c.TextEncoder||(c.TextEncoder=K),c.TextDecoder||(c.TextDecoder=J),typeof u<"u"&&u.exports&&(u.exports={TextEncoder:c.TextEncoder,TextDecoder:c.TextDecoder,EncodingIndexes:c["encoding-indexes"]})})(this||{})},{"./encoding-indexes.js":7}],22:[function(l,u,c){(function(d,f){(function(){function m(M,x){this._id=M,this._clearFn=x}var g=l("process/browser.js").nextTick,v=Function.prototype.apply,b=Array.prototype.slice,_={},S=0;c.setTimeout=function(){return new m(v.call(setTimeout,window,arguments),clearTimeout)},c.setInterval=function(){return new m(v.call(setInterval,window,arguments),clearInterval)},c.clearTimeout=c.clearInterval=function(M){M.close()},m.prototype.unref=m.prototype.ref=function(){},m.prototype.close=function(){this._clearFn.call(window,this._id)},c.enroll=function(M,x){clearTimeout(M._idleTimeoutId),M._idleTimeout=x},c.unenroll=function(M){clearTimeout(M._idleTimeoutId),M._idleTimeout=-1},c._unrefActive=c.active=function(M){clearTimeout(M._idleTimeoutId);var x=M._idleTimeout;0<=x&&(M._idleTimeoutId=setTimeout(function(){M._onTimeout&&M._onTimeout()},x))},c.setImmediate=typeof d=="function"?d:function(M){var x=S++,T=!(2>arguments.length)&&b.call(arguments,1);return _[x]=!0,g(function(){_[x]&&(T?M.apply(null,T):M.call(null),c.clearImmediate(x))}),x},c.clearImmediate=typeof f=="function"?f:function(M){delete _[M]}}).call(this)}).call(this,l("timers").setImmediate,l("timers").clearImmediate)},{"process/browser.js":16,timers:22}],23:[function(l,u){(function(c){(function(){function d(J){if(!J)throw new Error("forgot to pass buffer");return I.isBuffer(J)?J:f(J)?I.from(J):f(J.buffer)?J.BYTES_PER_ELEMENT===1?I.from(J):I.from(J.buffer):void 0}function f(J){return J instanceof c.ArrayBuffer||Object.prototype.toString.call(J)==="[object ArrayBuffer]"}function m(J,K){return typeof J=="string"&&L.has(J)?x.resolve(L.get(J)):m.getShapefile(J,K).then(function(Q){return typeof J=="string"&&L.set(J,Q),Q})}async function g(J,K){const Q=await _(J);return m.parseZip(Q,K)}let v=l("proj4");v.default&&(v=v.default);const b=l("./unzip"),_=l("./binaryajax"),S=l("./parseShp"),M=l("parsedbf"),x=l("lie"),T=l("lru-cache"),I=l("buffer").Buffer,$=c.URL,L=new T({max:20});m.combine=function([J,K]){const Q={type:"FeatureCollection",features:[]};let y=0;const A=J.length;for(K||(K=[]);y<A;)Q.features.push({type:"Feature",geometry:J[y],properties:K[y]||{}}),y++;return Q},m.parseZip=async function(J,K){J=d(J);const Q=await b(J),y=[];for(var A in K=K||[],Q)A.indexOf("__MACOSX")===-1&&(A.slice(-3).toLowerCase()==="shp"?(y.push(A.slice(0,-4)),Q[A.slice(0,-3)+A.slice(-3).toLowerCase()]=Q[A]):A.slice(-3).toLowerCase()==="prj"?Q[A.slice(0,-3)+A.slice(-3).toLowerCase()]=v(Q[A]):A.slice(-4).toLowerCase()==="json"||-1<K.indexOf(A.split(".").pop())?y.push(A.slice(0,-3)+A.slice(-3).toLowerCase()):(A.slice(-3).toLowerCase()==="dbf"||A.slice(-3).toLowerCase()==="cpg")&&(Q[A.slice(0,-3)+A.slice(-3).toLowerCase()]=Q[A]));if(!y.length)throw new Error("no layers founds");const N=y.map(function(D){let ne,q;const he=D.lastIndexOf(".");return-1<he&&-1<D.slice(he).indexOf("json")?(ne=JSON.parse(Q[D]),ne.fileName=D.slice(0,he)):-1<K.indexOf(D.slice(he+1))?(ne=Q[D],ne.fileName=D):(Q[D+".dbf"]&&(q=M(Q[D+".dbf"],Q[D+".cpg"])),ne=m.combine([S(Q[D+".shp"],Q[D+".prj"]),q]),ne.fileName=D),ne});return N.length===1?N[0]:N};const B=async J=>{const K=await x.all([_(J,"shp"),_(J,"prj")]);let Q=!1;try{K[1]&&(Q=v(K[1]))}catch{Q=!1}return S(K[0],Q)},z=async J=>{const[K,Q]=await x.all([_(J,"dbf"),_(J,"cpg")]);return K?M(K,Q):void 0},H=(J,K)=>new $(J).pathname.slice(-4).toLowerCase()===K;m.getShapefile=async function(J,K){if(typeof J!="string")return m.parseZip(J);if(H(J,".zip"))return g(J,K);const Q=await x.all([B(J),z(J)]);return m.combine(Q)},m.parseShp=function(J,K){if(J=d(J),I.isBuffer(K)&&(K=K.toString()),typeof K=="string")try{K=v(K)}catch{K=!1}return S(J,K)},m.parseDbf=function(J,K){return J=d(J),M(J,K)},u.exports=m}).call(this)}).call(this,typeof Hn>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Hn)},{"./binaryajax":2,"./parseShp":4,"./unzip":5,buffer:8,lie:12,"lru-cache":13,parsedbf:15,proj4:17}]},{},[23])(23)})})($fe);var qst=$fe.exports;const Hst=n_(qst),Wst={Point:"circlePoint",MultiPoint:"circlePoint",LineString:"solidLine",MultiLineString:"solidLine",Polygon:"outlinedPoly",MultiPolygon:"outlinedPoly"};function Jst(t){if(t.type!=="FeatureCollection")throw new Error("GeoJSON is not in FeatureCollection format");let e=!0,i=!0;t.features.forEach((r,s)=>{Object.assign(r.properties,{ID_FILE:"",OBJECTID_FILE:""}),"id"in r&&typeof r.id<"u"&&(r.properties.ID_FILE=r.id,e=!1),"OBJECTID"in r.properties&&(r.properties.OBJECTID_FILE=r.properties.OBJECTID,delete r.properties.OBJECTID,i=!1),r.id=s+1}),e&&t.features.forEach(function(r){delete r.properties.ID_FILE}),i&&t.features.forEach(function(r){delete r.properties.OBJECTID_FILE})}function Zst(t,e){const i=r=>r.indexOf(" ")>-1;e.fields?.forEach(r=>{if(r.name&&i(r.name)){const s=r.name;let n,o="_",a;do n=s.replace(/ /g,o),a=e.fields?.find(l=>l.name===n),a&&(o+="_");while(a);r.alias=s,r.name=n,t.features.forEach(l=>{l.properties[n]=l.properties[s],delete l.properties[s]})}})}function Yst(t,e){const i=t.features[e].geometry.geometries;if(i.length===1)t.features[e].geometry={type:i[0].type,coordinates:i[0].coordinates};else{const r=i.map(s=>s.coordinates);t.features[e].geometry={type:`Multi${i[0].type}`,coordinates:r}}}class Kst extends Ks{async fetchFileData(e,i){const r=await L$.get(e,{responseType:"arrayBuffer"});switch(i){case li.GEOJSON:case li.DATAJSON:return JSON.parse(new TextDecoder("utf-8").decode(new Uint8Array(r.data)));case li.SHAPEFILE:return r.data;case li.CSV:case li.DATACSV:return new TextDecoder("utf-8").decode(new Uint8Array(r.data));default:console.error(`Unsupported file type passed to fetchFileData- '${i}'`)}}extractGeoJsonFields(e){if(e.features.length<1)throw new Error("GeoJSON field extraction requires at least one feature");let i=e.features[0].geometry.type;if(e.features.forEach((o,a)=>{if(o.geometry.type==="GeometryCollection"){const u=o.geometry.geometries;if(u===void 0||u.length===0)return Promise.reject(new Error("GeoJSON file has geometry collection with missing/incomplete geometries"));i=u[0].type,u.forEach(c=>{if(c.type!==i)return Promise.reject(new Error("GeoJSON file has geometry collection containing multiple geometry types"))}),Yst(e,a)}}),[...new Set(e.features.map(o=>o.geometry.type==="MultiLineString"?"LineString":o.geometry.type==="MultiPolygon"?"Polygon":o.geometry.type))].length!==1)throw new Error("GeoJSON file contains multiple geometry types");const r=Object.keys(e.features[0].properties).map(o=>({name:o,type:"string"}));let s=0;const n=Object.keys(e.features[0].properties);for(;s<e.features.length;){const o=e.features[s];if(o.properties&&Object.keys(o.properties).filter(a=>n.includes(a)).forEach(a=>{const l=o.properties[a];if(l!=null){const u=r.findIndex(c=>c.name===a);r[u]={name:a,type:this.inferType(l)},n.splice(n.indexOf(a),1)}}),n.length===0)break;s++}return r}extractCsvFields(e,i=","){return Sk.dsv.dsvFormat(i).parseRows(e)[0].map(s=>({name:s,type:zd.STRING}))}filterCsvLatLonFields(e,i=","){const r=Sk.dsv.dsvFormat(i).parseRows(e),s=r[0],n={lat:JSON.parse(JSON.stringify(s)),lon:JSON.parse(JSON.stringify(s))};for(let o=0;o<s.length;o++)for(let a=1;a<r.length;a++){const l=Number(r[a][o]),u=n.lat.indexOf(s[o]),c=n.lon.indexOf(s[o]);if((isNaN(l)||l<-90||l>90)&&u!==-1&&n.lat.splice(u,1),(isNaN(l)||l<-180||l>180)&&c!==-1&&n.lon.splice(c,1),u===-1&&c===-1)break}return n}async geoJsonToEsriJson(e,i){let r,s="EPSG:4326",n;const o={objectIdField:"OBJECTID",fields:[{name:"OBJECTID",type:zd.OID}]};Jst(e);const a=e.features[0].geometry.type,l=Wst[a],u=JSON.parse(JSON.stringify(vst[l]));if(e.crs&&e.crs.type==="name"&&(s=e.crs.properties.name),i){if(i.sourceProjection&&(s=i.sourceProjection),i.targetSR)r=i.targetSR;else throw new Error("geoJsonToEsriJson - missing opts.targetSR arguement");i.layerId?n=i.layerId:n=this.$iApi.geo.shared.generateUUID(),i.colour&&(u.renderer.symbol.color=new yp(i.colour).toArcServer())}else throw new Error("geoJsonToEsriJson - missing opts arguement");o.renderer=D0.fromJSON(u.renderer),o.fields=(o.fields||[]).concat(i.fieldMetadata?.exclusiveFields?this.extractGeoJsonFields(e).filter(m=>i.fieldMetadata?.fieldInfo?.find(g=>g.name===m.name)):this.extractGeoJsonFields(e)),i.fieldMetadata?.enforceOrder&&i.fieldMetadata?.fieldInfo&&i.fieldMetadata?.fieldInfo.length>0&&(o.fields=this.$iApi.geo.attributes.orderFields(o.fields,i.fieldMetadata?.fieldInfo)),Zst(e,o);const c=this.$iApi.geo.proj.normalizeProj(r);if(i){if(i.latField){const m=o.fields.find(g=>g.name===i.latField||g.alias===i.latField);m&&(m.type=zd.DOUBLE)}if(i.lonField){const m=o.fields.find(g=>g.name===i.lonField||g.alias===i.lonField);m&&(m.type=zd.DOUBLE)}}await this.$iApi.geo.proj.checkProjBomber([s,r]);const d=new Tt(r);await this.$iApi.geo.proj.projectGeoJson(e,s,c);const f=wst.convert(e,{sr:8888});return o.geometryType=this.$iApi.geo.geom.geoJsonGeomTypeToEsriGeomType(a),f.forEach(m=>{m.geometry.spatialReference=d,m.geometry.type=o.geometryType,Object.keys(m.attributes).forEach(g=>{(Array.isArray(m.attributes[g])||typeof m.attributes[g]=="object")&&m.attributes[g]!=null&&(m.attributes[g]=JSON.stringify(m.attributes[g]))})}),o.source=f,o.spatialReference=d,o.id=n,o}async csvToGeoJson(e,i){const r={latfield:"Lat",lonfield:"Long",delimiter:","};return i&&(i.latfield&&(r.latfield=i.latfield),i.lonfield&&(r.lonfield=i.lonfield),i.delimiter&&(r.delimiter=i.delimiter)),new Promise((s,n)=>{Sk.csv2geojson(e,r,(o,a)=>{o?(console.error("csv conversion error"),console.error(o),n(o)):(a.features.map(l=>{l.properties[r.lonfield]=l.geometry.coordinates[0],l.properties[r.latfield]=l.geometry.coordinates[1]}),s(a))})})}async shapefileToGeoJson(e){return Hst(e)}inferType(e){return typeof e=="number"?zd.DOUBLE:zd.STRING}}const Qst=[4326,4269,4258,31467,31468,31469,2166,2167,2168,2036,2044,2045,2065,2081,2082,2083,2085,2086,2091,2092,2093,2096,2097,2098,2105,2106,2107,2108,2109,2110,2111,2112,2113,2114,2115,2116,2117,2118,2119,2120,2121,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,2169,2170,2171,2172,2173,2174,2175,2176,2177,2178,2179,2180,2193,2199,2200,2206,2207,2208,2209,2210,2211,2212,2319,2320,2321,2322,2323,2324,2325,2326,2327,2328,2329,2330,2331,2332,2333,2334,2335,2336,2337,2338,2339,2340,2341,2342,2343,2344,2345,2346,2347,2348,2349,2350,2351,2352,2353,2354,2355,2356,2357,2358,2359,2360,2361,2362,2363,2364,2365,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2384,2385,2386,2387,2388,2389,2390,2391,2392,2393,2394,2395,2396,2397,2398,2399,2400,2401,2402,2403,2404,2405,2406,2407,2408,2409,2410,2411,2412,2413,2414,2415,2416,2417,2418,2419,2420,2421,2422,2423,2424,2425,2426,2427,2428,2429,2430,2431,2432,2433,2434,2435,2436,2437,2438,2439,2440,2441,2442,2443,2444,2445,2446,2447,2448,2449,2450,2451,2452,2453,2454,2455,2456,2457,2458,2459,2460,2461,2462,2463,2464,2465,2466,2467,2468,2469,2470,2471,2472,2473,2474,2475,2476,2477,2478,2479,2480,2481,2482,2483,2484,2485,2486,2487,2488,2489,2490,2491,2492,2493,2494,2495,2496,2497,2498,2499,2500,2501,2502,2503,2504,2505,2506,2507,2508,2509,2510,2511,2512,2513,2514,2515,2516,2517,2518,2519,2520,2521,2522,2523,2524,2525,2526,2527,2528,2529,2530,2531,2532,2533,2534,2535,2536,2537,2538,2539,2540,2541,2542,2543,2544,2545,2546,2547,2548,2549,2551,2552,2553,2554,2555,2556,2557,2558,2559,2560,2561,2562,2563,2564,2565,2566,2567,2568,2569,2570,2571,2572,2573,2574,2575,2576,2577,2578,2579,2580,2581,2582,2583,2584,2585,2586,2587,2588,2589,2590,2591,2592,2593,2594,2595,2596,2597,2598,2599,2600,2601,2602,2603,2604,2605,2606,2607,2608,2609,2610,2611,2612,2613,2614,2615,2616,2617,2618,2619,2620,2621,2622,2623,2624,2625,2626,2627,2628,2629,2630,2631,2632,2633,2634,2635,2636,2637,2638,2639,2640,2641,2642,2643,2644,2645,2646,2647,2648,2649,2650,2651,2652,2653,2654,2655,2656,2657,2658,2659,2660,2661,2662,2663,2664,2665,2666,2667,2668,2669,2670,2671,2672,2673,2674,2675,2676,2677,2678,2679,2680,2681,2682,2683,2684,2685,2686,2687,2688,2689,2690,2691,2692,2693,2694,2695,2696,2697,2698,2699,2700,2701,2702,2703,2704,2705,2706,2707,2708,2709,2710,2711,2712,2713,2714,2715,2716,2717,2718,2719,2720,2721,2722,2723,2724,2725,2726,2727,2728,2729,2730,2731,2732,2733,2734,2735,2738,2739,2740,2741,2742,2743,2744,2745,2746,2747,2748,2749,2750,2751,2752,2753,2754,2755,2756,2757,2758,2935,2936,2937,2938,2939,2940,2941,2953,2963,3006,3007,3008,3009,3010,3011,3012,3013,3014,3015,3016,3017,3018,3019,3020,3021,3022,3023,3024,3025,3026,3027,3028,3029,3030,3034,3035,3038,3039,3040,3041,3042,3043,3044,3045,3046,3047,3048,3049,3050,3051,3058,3059,3068,3114,3115,3116,3117,3118,3120,3126,3127,3128,3129,3130,3131,3132,3133,3134,3135,3136,3137,3138,3139,3140,3146,3147,3150,3151,3152,3300,3301,3328,3329,3330,3331,3332,3333,3334,3335,3346,3350,3351,3352,3366,3386,3387,3388,3389,3390,3396,3397,3398,3399,3407,3414,3416,3764,3788,3789,3790,3791,3793,3795,3796,3819,3821,3823,3824,3833,3834,3835,3836,3837,3838,3839,3840,3841,3842,3843,3844,3845,3846,3847,3848,3849,3850,3851,3852,3854,3873,3874,3875,3876,3877,3878,3879,3880,3881,3882,3883,3884,3885,3888,3889,3906,3907,3908,3909,3910,3911,4001,4002,4003,4004,4005,4006,4007,4008,4009,4010,4011,4012,4013,4014,4015,4016,4017,4018,4019,4020,4021,4022,4023,4024,4025,4026,4027,4028,4029,4030,4031,4032,4033,4034,4035,4036,4037,4038,4040,4041,4042,4043,4044,4045,4046,4047,4052,4053,4054,4055,4074,4075,4080,4081,4120,4121,4122,4123,4124,4125,4126,4127,4128,4129,4130,4131,4132,4133,4134,4135,4136,4137,4138,4139,4140,4141,4142,4143,4144,4145,4146,4147,4148,4149,4150,4151,4152,4153,4154,4155,4156,4157,4158,4159,4160,4161,4162,4163,4164,4165,4166,4167,4168,4169,4170,4171,4172,4173,4174,4175,4176,4178,4179,4180,4181,4182,4183,4184,4185,4188,4189,4190,4191,4192,4193,4194,4195,4196,4197,4198,4199,4200,4201,4202,4203,4204,4205,4206,4207,4208,4209,4210,4211,4212,4213,4214,4215,4216,4218,4219,4220,4221,4222,4223,4224,4225,4226,4227,4228,4229,4230,4231,4232,4233,4234,4235,4236,4237,4238,4239,4240,4241,4242,4243,4244,4245,4246,4247,4248,4249,4250,4251,4252,4253,4254,4255,4256,4257,4259,4260,4261,4262,4263,4264,4265,4266,4267,4268,4270,4271,4272,4273,4274,4275,4276,4277,4278,4279,4280,4281,4282,4283,4284,4285,4286,4287,4288,4289,4291,4292,4293,4294,4295,4296,4297,4298,4299,4300,4301,4302,4303,4304,4306,4307,4308,4309,4310,4311,4312,4313,4314,4315,4316,4317,4318,4319,4322,4324,4327,4329,4339,4341,4343,4345,4347,4349,4351,4353,4355,4357,4359,4361,4363,4365,4367,4369,4371,4373,4375,4377,4379,4381,4383,4386,4388,4417,4434,4463,4466,4469,4470,4472,4475,4480,4482,4483,4490,4491,4492,4493,4494,4495,4496,4497,4498,4499,4500,4501,4502,4503,4504,4505,4506,4507,4508,4509,4510,4511,4512,4513,4514,4515,4516,4517,4518,4519,4520,4521,4522,4523,4524,4525,4526,4527,4528,4529,4530,4531,4532,4533,4534,4535,4536,4537,4538,4539,4540,4541,4542,4543,4544,4545,4546,4547,4548,4549,4550,4551,4552,4553,4554,4555,4557,4558,4568,4569,4570,4571,4572,4573,4574,4575,4576,4577,4578,4579,4580,4581,4582,4583,4584,4585,4586,4587,4588,4589,4600,4601,4602,4603,4604,4605,4606,4607,4608,4609,4610,4611,4612,4613,4614,4615,4616,4617,4618,4619,4620,4621,4622,4623,4624,4625,4626,4627,4628,4629,4630,4631,4632,4633,4634,4635,4636,4637,4638,4639,4640,4641,4642,4643,4644,4645,4646,4652,4653,4654,4655,4656,4657,4658,4659,4660,4661,4662,4663,4664,4665,4666,4667,4668,4669,4670,4671,4672,4673,4674,4675,4676,4677,4678,4679,4680,4681,4682,4683,4684,4685,4686,4687,4688,4689,4690,4691,4692,4693,4694,4695,4696,4697,4698,4699,4700,4701,4702,4703,4704,4705,4706,4707,4708,4709,4710,4711,4712,4713,4714,4715,4716,4717,4718,4719,4720,4721,4722,4723,4724,4725,4726,4727,4728,4729,4730,4731,4732,4733,4734,4735,4736,4737,4738,4739,4740,4741,4742,4743,4744,4745,4746,4747,4748,4749,4750,4751,4752,4753,4754,4755,4756,4757,4758,4759,4760,4761,4762,4763,4764,4765,4766,4767,4768,4769,4770,4771,4772,4773,4774,4775,4776,4777,4778,4779,4780,4781,4782,4783,4784,4785,4786,4787,4788,4789,4790,4791,4792,4793,4794,4795,4796,4797,4798,4799,4800,4801,4802,4803,4804,4805,4806,4807,4808,4809,4810,4811,4812,4813,4814,4815,4816,4817,4818,4819,4820,4821,4822,4823,4824,4839,4855,4856,4857,4858,4859,4860,4861,4862,4863,4864,4865,4866,4867,4868,4869,4870,4871,4872,4873,4874,4875,4876,4877,4878,4879,4880,4883,4885,4887,4889,4891,4893,4895,4898,4900,4901,4902,4903,4904,4907,4909,4921,4923,4925,4927,4929,4931,4933,4935,4937,4939,4941,4943,4945,4947,4949,4951,4953,4955,4957,4959,4961,4963,4965,4967,4969,4971,4973,4975,4977,4979,4981,4983,4985,4987,4989,4991,4993,4995,4997,4999,5012,5013,5017,5048,5105,5106,5107,5108,5109,5110,5111,5112,5113,5114,5115,5116,5117,5118,5119,5120,5121,5122,5123,5124,5125,5126,5127,5128,5129,5130,5132,5167,5168,5169,5170,5171,5172,5173,5174,5175,5176,5177,5178,5179,5180,5181,5182,5183,5184,5185,5186,5187,5188,5224,5228,5229,5233,5245,5246,5251,5252,5253,5254,5255,5256,5257,5258,5259,5263,5264,5269,5270,5271,5272,5273,5274,5275,5801,5802,5803,5804,5808,5809,5810,5811,5812,5813,5814,5815,5816,20004,20005,20006,20007,20008,20009,20010,20011,20012,20013,20014,20015,20016,20017,20018,20019,20020,20021,20022,20023,20024,20025,20026,20027,20028,20029,20030,20031,20032,20064,20065,20066,20067,20068,20069,20070,20071,20072,20073,20074,20075,20076,20077,20078,20079,20080,20081,20082,20083,20084,20085,20086,20087,20088,20089,20090,20091,20092,21413,21414,21415,21416,21417,21418,21419,21420,21421,21422,21423,21453,21454,21455,21456,21457,21458,21459,21460,21461,21462,21463,21473,21474,21475,21476,21477,21478,21479,21480,21481,21482,21483,21896,21897,21898,21899,22171,22172,22173,22174,22175,22176,22177,22181,22182,22183,22184,22185,22186,22187,22191,22192,22193,22194,22195,22196,22197,25884,27205,27206,27207,27208,27209,27210,27211,27212,27213,27214,27215,27216,27217,27218,27219,27220,27221,27222,27223,27224,27225,27226,27227,27228,27229,27230,27231,27232,27391,27392,27393,27394,27395,27396,27397,27398,27492,28402,28403,28404,28405,28406,28407,28408,28409,28410,28411,28412,28413,28414,28415,28416,28417,28418,28419,28420,28421,28422,28423,28424,28425,28426,28427,28428,28429,28430,28431,28432,28462,28463,28464,28465,28466,28467,28468,28469,28470,28471,28472,28473,28474,28475,28476,28477,28478,28479,28480,28481,28482,28483,28484,28485,28486,28487,28488,28489,28490,28491,28492,29701,29702,30161,30162,30163,30164,30165,30166,30167,30168,30169,30170,30171,30172,30173,30174,30175,30176,30177,30178,30179,30800,31251,31252,31253,31254,31255,31256,31257,31258,31259,31275,31276,31277,31278,31279,31281,31282,31283,31284,31285,31286,31287,31288,31289,31290,31466,31700];function t1(t,e){return t.then(function(i){return[null,i]}).catch(function(i){return e&&Object.assign(i,e),[i,void 0]})}var tV={},D$={};(function(t){const e=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",i=e+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",r="["+e+"]["+i+"]*",s=new RegExp("^"+r+"$"),n=function(a,l){const u=[];let c=l.exec(a);for(;c;){const d=[];d.startIndex=l.lastIndex-c[0].length;const f=c.length;for(let m=0;m<f;m++)d.push(c[m]);u.push(d),c=l.exec(a)}return u},o=function(a){const l=s.exec(a);return!(l===null||typeof l>"u")};t.isExist=function(a){return typeof a<"u"},t.isEmptyObject=function(a){return Object.keys(a).length===0},t.merge=function(a,l,u){if(l){const c=Object.keys(l),d=c.length;for(let f=0;f<d;f++)u==="strict"?a[c[f]]=[l[c[f]]]:a[c[f]]=l[c[f]]}},t.getValue=function(a){return t.isExist(a)?a:""},t.isName=o,t.getAllMatches=n,t.nameRegexp=r})(D$);const iV=D$,Xst={allowBooleanAttributes:!1,unpairedTags:[]};tV.validate=function(t,e){e=Object.assign({},Xst,e);const i=[];let r=!1,s=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let n=0;n<t.length;n++)if(t[n]==="<"&&t[n+1]==="?"){if(n+=2,n=oK(t,n),n.err)return n}else if(t[n]==="<"){let o=n;if(n++,t[n]==="!"){n=aK(t,n);continue}else{let a=!1;t[n]==="/"&&(a=!0,n++);let l="";for(;n<t.length&&t[n]!==">"&&t[n]!==" "&&t[n]!=="	"&&t[n]!==`
`&&t[n]!=="\r";n++)l+=t[n];if(l=l.trim(),l[l.length-1]==="/"&&(l=l.substring(0,l.length-1),n--),!ant(l)){let d;return l.trim().length===0?d="Invalid space after '<'.":d="Tag '"+l+"' is an invalid name.",Vs("InvalidTag",d,fa(t,n))}const u=int(t,n);if(u===!1)return Vs("InvalidAttr","Attributes for '"+l+"' have open quote.",fa(t,n));let c=u.value;if(n=u.index,c[c.length-1]==="/"){const d=n-c.length;c=c.substring(0,c.length-1);const f=lK(c,e);if(f===!0)r=!0;else return Vs(f.err.code,f.err.msg,fa(t,d+f.err.line))}else if(a)if(u.tagClosed){if(c.trim().length>0)return Vs("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",fa(t,o));{const d=i.pop();if(l!==d.tagName){let f=fa(t,d.tagStartPos);return Vs("InvalidTag","Expected closing tag '"+d.tagName+"' (opened in line "+f.line+", col "+f.col+") instead of closing tag '"+l+"'.",fa(t,o))}i.length==0&&(s=!0)}}else return Vs("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",fa(t,n));else{const d=lK(c,e);if(d!==!0)return Vs(d.err.code,d.err.msg,fa(t,n-c.length+d.err.line));if(s===!0)return Vs("InvalidXml","Multiple possible root nodes found.",fa(t,n));e.unpairedTags.indexOf(l)!==-1||i.push({tagName:l,tagStartPos:o}),r=!0}for(n++;n<t.length;n++)if(t[n]==="<")if(t[n+1]==="!"){n++,n=aK(t,n);continue}else if(t[n+1]==="?"){if(n=oK(t,++n),n.err)return n}else break;else if(t[n]==="&"){const d=nnt(t,n);if(d==-1)return Vs("InvalidChar","char '&' is not expected.",fa(t,n));n=d}else if(s===!0&&!nK(t[n]))return Vs("InvalidXml","Extra text at the end",fa(t,n));t[n]==="<"&&n--}}else{if(nK(t[n]))continue;return Vs("InvalidChar","char '"+t[n]+"' is not expected.",fa(t,n))}if(r){if(i.length==1)return Vs("InvalidTag","Unclosed tag '"+i[0].tagName+"'.",fa(t,i[0].tagStartPos));if(i.length>0)return Vs("InvalidXml","Invalid '"+JSON.stringify(i.map(n=>n.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Vs("InvalidXml","Start tag expected.",1);return!0};function nK(t){return t===" "||t==="	"||t===`
`||t==="\r"}function oK(t,e){const i=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){const r=t.substr(i,e-i);if(e>5&&r==="xml")return Vs("InvalidXml","XML declaration allowed only at the start of the document.",fa(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}function aK(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let i=1;for(e+=8;e<t.length;e++)if(t[e]==="<")i++;else if(t[e]===">"&&(i--,i===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}const ent='"',tnt="'";function int(t,e){let i="",r="",s=!1;for(;e<t.length;e++){if(t[e]===ent||t[e]===tnt)r===""?r=t[e]:r!==t[e]||(r="");else if(t[e]===">"&&r===""){s=!0;break}i+=t[e]}return r!==""?!1:{value:i,index:e,tagClosed:s}}const rnt=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function lK(t,e){const i=iV.getAllMatches(t,rnt),r={};for(let s=0;s<i.length;s++){if(i[s][1].length===0)return Vs("InvalidAttr","Attribute '"+i[s][2]+"' has no space in starting.",a2(i[s]));if(i[s][3]!==void 0&&i[s][4]===void 0)return Vs("InvalidAttr","Attribute '"+i[s][2]+"' is without value.",a2(i[s]));if(i[s][3]===void 0&&!e.allowBooleanAttributes)return Vs("InvalidAttr","boolean attribute '"+i[s][2]+"' is not allowed.",a2(i[s]));const n=i[s][2];if(!ont(n))return Vs("InvalidAttr","Attribute '"+n+"' is an invalid name.",a2(i[s]));if(!r.hasOwnProperty(n))r[n]=1;else return Vs("InvalidAttr","Attribute '"+n+"' is repeated.",a2(i[s]))}return!0}function snt(t,e){let i=/\d/;for(t[e]==="x"&&(e++,i=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(i))break}return-1}function nnt(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,snt(t,e);let i=0;for(;e<t.length;e++,i++)if(!(t[e].match(/\w/)&&i<20)){if(t[e]===";")break;return-1}return e}function Vs(t,e,i){return{err:{code:t,msg:e,line:i.line||i,col:i.col}}}function ont(t){return iV.isName(t)}function ant(t){return iV.isName(t)}function fa(t,e){const i=t.substring(0,e).split(/\r?\n/);return{line:i.length,col:i[i.length-1].length+1}}function a2(t){return t.startIndex+t[1].length}var rV={};const Ofe={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,e,i){return t}},lnt=function(t){return Object.assign({},Ofe,t)};rV.buildOptions=lnt;rV.defaultOptions=Ofe;class unt{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,i){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:i})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,[":@"]:e[":@"]}):this.child.push({[e.tagname]:e.child})}}var cnt=unt;const hnt=D$;function dnt(t,e){const i={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let r=1,s=!1,n=!1,o="";for(;e<t.length;e++)if(t[e]==="<"&&!n){if(s&&mnt(t,e))e+=7,[entityName,val,e]=pnt(t,e+1),val.indexOf("&")===-1&&(i[bnt(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(s&&ynt(t,e))e+=8;else if(s&&gnt(t,e))e+=8;else if(s&&vnt(t,e))e+=9;else if(fnt)n=!0;else throw new Error("Invalid DOCTYPE");r++,o=""}else if(t[e]===">"){if(n?t[e-1]==="-"&&t[e-2]==="-"&&(n=!1,r--):r--,r===0)break}else t[e]==="["?s=!0:o+=t[e];if(r!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:i,i:e}}function pnt(t,e){let i="";for(;e<t.length&&t[e]!=="'"&&t[e]!=='"';e++)i+=t[e];if(i=i.trim(),i.indexOf(" ")!==-1)throw new Error("External entites are not supported");const r=t[e++];let s="";for(;e<t.length&&t[e]!==r;e++)s+=t[e];return[i,s,e]}function fnt(t,e){return t[e+1]==="!"&&t[e+2]==="-"&&t[e+3]==="-"}function mnt(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="N"&&t[e+4]==="T"&&t[e+5]==="I"&&t[e+6]==="T"&&t[e+7]==="Y"}function ynt(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="L"&&t[e+4]==="E"&&t[e+5]==="M"&&t[e+6]==="E"&&t[e+7]==="N"&&t[e+8]==="T"}function gnt(t,e){return t[e+1]==="!"&&t[e+2]==="A"&&t[e+3]==="T"&&t[e+4]==="T"&&t[e+5]==="L"&&t[e+6]==="I"&&t[e+7]==="S"&&t[e+8]==="T"}function vnt(t,e){return t[e+1]==="!"&&t[e+2]==="N"&&t[e+3]==="O"&&t[e+4]==="T"&&t[e+5]==="A"&&t[e+6]==="T"&&t[e+7]==="I"&&t[e+8]==="O"&&t[e+9]==="N"}function bnt(t){if(hnt.isName(t))return t;throw new Error(`Invalid entity name ${t}`)}var wnt=dnt;const _nt=/^[-+]?0x[a-fA-F0-9]+$/,xnt=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const Snt={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Ent(t,e={}){if(e=Object.assign({},Snt,e),!t||typeof t!="string")return t;let i=t.trim();if(e.skipLike!==void 0&&e.skipLike.test(i))return t;if(e.hex&&_nt.test(i))return Number.parseInt(i,16);{const r=xnt.exec(i);if(r){const s=r[1],n=r[2];let o=Tnt(r[3]);const a=r[4]||r[6];if(!e.leadingZeros&&n.length>0&&s&&i[2]!==".")return t;if(!e.leadingZeros&&n.length>0&&!s&&i[1]!==".")return t;{const l=Number(i),u=""+l;return u.search(/[eE]/)!==-1||a?e.eNotation?l:t:i.indexOf(".")!==-1?u==="0"&&o===""||u===o||s&&u==="-"+o?l:t:n?o===u||s+o===u?l:t:i===u||i===s+u?l:t}}else return t}}function Tnt(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substr(0,t.length-1))),t}var Int=Ent;const sV=D$,l2=cnt,Mnt=wnt,Ant=Int;"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,sV.nameRegexp);let Cnt=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=$nt,this.parseXml=Pnt,this.parseTextData=Ont,this.resolveNameSpace=Rnt,this.buildAttributesMap=Lnt,this.isItStopNode=jnt,this.replaceEntitiesValue=Fnt,this.readStopNodeData=Vnt,this.saveTextToParentTag=Dnt,this.addChild=Nnt}};function $nt(t){const e=Object.keys(t);for(let i=0;i<e.length;i++){const r=e[i];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:t[r]}}}function Ont(t,e,i,r,s,n,o){if(t!==void 0&&(this.options.trimValues&&!r&&(t=t.trim()),t.length>0)){o||(t=this.replaceEntitiesValue(t));const a=this.options.tagValueProcessor(e,t,i,s,n);return a==null?t:typeof a!=typeof t||a!==t?a:this.options.trimValues?jF(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?jF(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function Rnt(t){if(this.options.removeNSPrefix){const e=t.split(":"),i=t.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(t=i+e[1])}return t}const knt=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Lnt(t,e,i){if(!this.options.ignoreAttributes&&typeof t=="string"){const r=sV.getAllMatches(t,knt),s=r.length,n={};for(let o=0;o<s;o++){const a=this.resolveNameSpace(r[o][1]);let l=r[o][4],u=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(u=this.options.transformAttributeName(u)),u==="__proto__"&&(u="#__proto__"),l!==void 0){this.options.trimValues&&(l=l.trim()),l=this.replaceEntitiesValue(l);const c=this.options.attributeValueProcessor(a,l,e);c==null?n[u]=l:typeof c!=typeof l||c!==l?n[u]=c:n[u]=jF(l,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(n[u]=!0)}if(!Object.keys(n).length)return;if(this.options.attributesGroupName){const o={};return o[this.options.attributesGroupName]=n,o}return n}}const Pnt=function(t){t=t.replace(/\r\n?/g,`
`);const e=new l2("!xml");let i=e,r="",s="";for(let n=0;n<t.length;n++)if(t[n]==="<")if(t[n+1]==="/"){const a=o0(t,">",n,"Closing Tag is not closed.");let l=t.substring(n+2,a).trim();if(this.options.removeNSPrefix){const d=l.indexOf(":");d!==-1&&(l=l.substr(d+1))}this.options.transformTagName&&(l=this.options.transformTagName(l)),i&&(r=this.saveTextToParentTag(r,i,s));const u=s.substring(s.lastIndexOf(".")+1);if(l&&this.options.unpairedTags.indexOf(l)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${l}>`);let c=0;u&&this.options.unpairedTags.indexOf(u)!==-1?(c=s.lastIndexOf(".",s.lastIndexOf(".")-1),this.tagsNodeStack.pop()):c=s.lastIndexOf("."),s=s.substring(0,c),i=this.tagsNodeStack.pop(),r="",n=a}else if(t[n+1]==="?"){let a=DF(t,n,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,i,s),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){const l=new l2(a.tagName);l.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(l[":@"]=this.buildAttributesMap(a.tagExp,s,a.tagName)),this.addChild(i,l,s)}n=a.closeIndex+1}else if(t.substr(n+1,3)==="!--"){const a=o0(t,"-->",n+4,"Comment is not closed.");if(this.options.commentPropName){const l=t.substring(n+4,a-2);r=this.saveTextToParentTag(r,i,s),i.add(this.options.commentPropName,[{[this.options.textNodeName]:l}])}n=a}else if(t.substr(n+1,2)==="!D"){const a=Mnt(t,n);this.docTypeEntities=a.entities,n=a.i}else if(t.substr(n+1,2)==="!["){const a=o0(t,"]]>",n,"CDATA is not closed.")-2,l=t.substring(n+9,a);if(r=this.saveTextToParentTag(r,i,s),this.options.cdataPropName)i.add(this.options.cdataPropName,[{[this.options.textNodeName]:l}]);else{let u=this.parseTextData(l,i.tagname,s,!0,!1,!0);u==null&&(u=""),i.add(this.options.textNodeName,u)}n=a+2}else{let a=DF(t,n,this.options.removeNSPrefix),l=a.tagName;const u=a.rawTagName;let c=a.tagExp,d=a.attrExpPresent,f=a.closeIndex;this.options.transformTagName&&(l=this.options.transformTagName(l)),i&&r&&i.tagname!=="!xml"&&(r=this.saveTextToParentTag(r,i,s,!1));const m=i;if(m&&this.options.unpairedTags.indexOf(m.tagname)!==-1&&(i=this.tagsNodeStack.pop(),s=s.substring(0,s.lastIndexOf("."))),l!==e.tagname&&(s+=s?"."+l:l),this.isItStopNode(this.options.stopNodes,s,l)){let g="";if(c.length>0&&c.lastIndexOf("/")===c.length-1)n=a.closeIndex;else if(this.options.unpairedTags.indexOf(l)!==-1)n=a.closeIndex;else{const b=this.readStopNodeData(t,u,f+1);if(!b)throw new Error(`Unexpected end of ${u}`);n=b.i,g=b.tagContent}const v=new l2(l);l!==c&&d&&(v[":@"]=this.buildAttributesMap(c,s,l)),g&&(g=this.parseTextData(g,l,s,!0,d,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),v.add(this.options.textNodeName,g),this.addChild(i,v,s)}else{if(c.length>0&&c.lastIndexOf("/")===c.length-1){l[l.length-1]==="/"?(l=l.substr(0,l.length-1),s=s.substr(0,s.length-1),c=l):c=c.substr(0,c.length-1),this.options.transformTagName&&(l=this.options.transformTagName(l));const g=new l2(l);l!==c&&d&&(g[":@"]=this.buildAttributesMap(c,s,l)),this.addChild(i,g,s),s=s.substr(0,s.lastIndexOf("."))}else{const g=new l2(l);this.tagsNodeStack.push(i),l!==c&&d&&(g[":@"]=this.buildAttributesMap(c,s,l)),this.addChild(i,g,s),i=g}r="",n=f}}else r+=t[n];return e.child};function Nnt(t,e,i){const r=this.options.updateTag(e.tagname,i,e[":@"]);r===!1||(typeof r=="string"&&(e.tagname=r),t.addChild(e))}const Fnt=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){const i=this.docTypeEntities[e];t=t.replace(i.regx,i.val)}for(let e in this.lastEntities){const i=this.lastEntities[e];t=t.replace(i.regex,i.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const i=this.htmlEntities[e];t=t.replace(i.regex,i.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function Dnt(t,e,i,r){return t&&(r===void 0&&(r=Object.keys(e.child).length===0),t=this.parseTextData(t,e.tagname,i,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,r),t!==void 0&&t!==""&&e.add(this.options.textNodeName,t),t=""),t}function jnt(t,e,i){const r="*."+i;for(const s in t){const n=t[s];if(r===n||e===n)return!0}return!1}function Unt(t,e,i=">"){let r,s="";for(let n=e;n<t.length;n++){let o=t[n];if(r)o===r&&(r="");else if(o==='"'||o==="'")r=o;else if(o===i[0])if(i[1]){if(t[n+1]===i[1])return{data:s,index:n}}else return{data:s,index:n};else o==="	"&&(o=" ");s+=o}}function o0(t,e,i,r){const s=t.indexOf(e,i);if(s===-1)throw new Error(r);return s+e.length-1}function DF(t,e,i,r=">"){const s=Unt(t,e+1,r);if(!s)return;let n=s.data;const o=s.index,a=n.search(/\s/);let l=n,u=!0;a!==-1&&(l=n.substr(0,a).replace(/\s\s*$/,""),n=n.substr(a+1));const c=l;if(i){const d=l.indexOf(":");d!==-1&&(l=l.substr(d+1),u=l!==s.data.substr(d+1))}return{tagName:l,tagExp:n,closeIndex:o,attrExpPresent:u,rawTagName:c}}function Vnt(t,e,i){const r=i;let s=1;for(;i<t.length;i++)if(t[i]==="<")if(t[i+1]==="/"){const n=o0(t,">",i,`${e} is not closed`);if(t.substring(i+2,n).trim()===e&&(s--,s===0))return{tagContent:t.substring(r,i),i:n};i=n}else if(t[i+1]==="?")i=o0(t,"?>",i+1,"StopNode is not closed.");else if(t.substr(i+1,3)==="!--")i=o0(t,"-->",i+3,"StopNode is not closed.");else if(t.substr(i+1,2)==="![")i=o0(t,"]]>",i,"StopNode is not closed.")-2;else{const n=DF(t,i,">");n&&((n&&n.tagName)===e&&n.tagExp[n.tagExp.length-1]!=="/"&&s++,i=n.closeIndex)}}function jF(t,e,i){if(e&&typeof t=="string"){const r=t.trim();return r==="true"?!0:r==="false"?!1:Ant(t,i)}else return sV.isExist(t)?t:""}var Bnt=Cnt,Rfe={};function znt(t,e){return kfe(t,e)}function kfe(t,e,i){let r;const s={};for(let n=0;n<t.length;n++){const o=t[n],a=Gnt(o);let l="";if(i===void 0?l=a:l=i+"."+a,a===e.textNodeName)r===void 0?r=o[a]:r+=""+o[a];else{if(a===void 0)continue;if(o[a]){let u=kfe(o[a],e,l);const c=Hnt(u,e);o[":@"]?qnt(u,o[":@"],l,e):Object.keys(u).length===1&&u[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?u=u[e.textNodeName]:Object.keys(u).length===0&&(e.alwaysCreateTextNode?u[e.textNodeName]="":u=""),s[a]!==void 0&&s.hasOwnProperty(a)?(Array.isArray(s[a])||(s[a]=[s[a]]),s[a].push(u)):e.isArray(a,l,c)?s[a]=[u]:s[a]=u}}}return typeof r=="string"?r.length>0&&(s[e.textNodeName]=r):r!==void 0&&(s[e.textNodeName]=r),s}function Gnt(t){const e=Object.keys(t);for(let i=0;i<e.length;i++){const r=e[i];if(r!==":@")return r}}function qnt(t,e,i,r){if(e){const s=Object.keys(e),n=s.length;for(let o=0;o<n;o++){const a=s[o];r.isArray(a,i+"."+a,!0,!0)?t[a]=[e[a]]:t[a]=e[a]}}}function Hnt(t,e){const{textNodeName:i}=e,r=Object.keys(t).length;return!!(r===0||r===1&&(t[i]||typeof t[i]=="boolean"||t[i]===0))}Rfe.prettify=znt;const{buildOptions:Wnt}=rV,Jnt=Bnt,{prettify:Znt}=Rfe,Ynt=tV;let Knt=class{constructor(e){this.externalEntities={},this.options=Wnt(e)}parse(e,i){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(i){i===!0&&(i={});const n=Ynt.validate(e,i);if(n!==!0)throw Error(`${n.err.msg}:${n.err.line}:${n.err.col}`)}const r=new Jnt(this.options);r.addExternalEntities(this.externalEntities);const s=r.parseXml(e);return this.options.preserveOrder||s===void 0?s:Znt(s,this.options)}addEntity(e,i){if(i.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(i==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=i}};var Qnt=Knt;const Xnt=`
`;function eot(t,e){let i="";return e.format&&e.indentBy.length>0&&(i=Xnt),Lfe(t,e,"",i)}function Lfe(t,e,i,r){let s="",n=!1;for(let o=0;o<t.length;o++){const a=t[o],l=tot(a);if(l===void 0)continue;let u="";if(i.length===0?u=l:u=`${i}.${l}`,l===e.textNodeName){let g=a[l];iot(u,e)||(g=e.tagValueProcessor(l,g),g=Pfe(g,e)),n&&(s+=r),s+=g,n=!1;continue}else if(l===e.cdataPropName){n&&(s+=r),s+=`<![CDATA[${a[l][0][e.textNodeName]}]]>`,n=!1;continue}else if(l===e.commentPropName){s+=r+`<!--${a[l][0][e.textNodeName]}-->`,n=!0;continue}else if(l[0]==="?"){const g=uK(a[":@"],e),v=l==="?xml"?"":r;let b=a[l][0][e.textNodeName];b=b.length!==0?" "+b:"",s+=v+`<${l}${b}${g}?>`,n=!0;continue}let c=r;c!==""&&(c+=e.indentBy);const d=uK(a[":@"],e),f=r+`<${l}${d}`,m=Lfe(a[l],e,u,c);e.unpairedTags.indexOf(l)!==-1?e.suppressUnpairedNode?s+=f+">":s+=f+"/>":(!m||m.length===0)&&e.suppressEmptyNode?s+=f+"/>":m&&m.endsWith(">")?s+=f+`>${m}${r}</${l}>`:(s+=f+">",m&&r!==""&&(m.includes("/>")||m.includes("</"))?s+=r+e.indentBy+m+r:s+=m,s+=`</${l}>`),n=!0}return s}function tot(t){const e=Object.keys(t);for(let i=0;i<e.length;i++){const r=e[i];if(t.hasOwnProperty(r)&&r!==":@")return r}}function uK(t,e){let i="";if(t&&!e.ignoreAttributes)for(let r in t){if(!t.hasOwnProperty(r))continue;let s=e.attributeValueProcessor(r,t[r]);s=Pfe(s,e),s===!0&&e.suppressBooleanAttributes?i+=` ${r.substr(e.attributeNamePrefix.length)}`:i+=` ${r.substr(e.attributeNamePrefix.length)}="${s}"`}return i}function iot(t,e){t=t.substr(0,t.length-e.textNodeName.length-1);let i=t.substr(t.lastIndexOf(".")+1);for(let r in e.stopNodes)if(e.stopNodes[r]===t||e.stopNodes[r]==="*."+i)return!0;return!1}function Pfe(t,e){if(t&&t.length>0&&e.processEntities)for(let i=0;i<e.entities.length;i++){const r=e.entities[i];t=t.replace(r.regex,r.val)}return t}var rot=eot;const sot=rot,not={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function cy(t){this.options=Object.assign({},not,t),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=lot),this.processTextOrObjNode=oot,this.options.format?(this.indentate=aot,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}cy.prototype.build=function(t){return this.options.preserveOrder?sot(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0).val)};cy.prototype.j2x=function(t,e){let i="",r="";for(let s in t)if(Object.prototype.hasOwnProperty.call(t,s))if(typeof t[s]>"u")this.isAttribute(s)&&(r+="");else if(t[s]===null)this.isAttribute(s)?r+="":s[0]==="?"?r+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:r+=this.indentate(e)+"<"+s+"/"+this.tagEndChar;else if(t[s]instanceof Date)r+=this.buildTextValNode(t[s],s,"",e);else if(typeof t[s]!="object"){const n=this.isAttribute(s);if(n)i+=this.buildAttrPairStr(n,""+t[s]);else if(s===this.options.textNodeName){let o=this.options.tagValueProcessor(s,""+t[s]);r+=this.replaceEntitiesValue(o)}else r+=this.buildTextValNode(t[s],s,"",e)}else if(Array.isArray(t[s])){const n=t[s].length;let o="";for(let a=0;a<n;a++){const l=t[s][a];typeof l>"u"||(l===null?s[0]==="?"?r+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:r+=this.indentate(e)+"<"+s+"/"+this.tagEndChar:typeof l=="object"?this.options.oneListGroup?o+=this.j2x(l,e+1).val:o+=this.processTextOrObjNode(l,s,e):o+=this.buildTextValNode(l,s,"",e))}this.options.oneListGroup&&(o=this.buildObjectNode(o,s,"",e)),r+=o}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName){const n=Object.keys(t[s]),o=n.length;for(let a=0;a<o;a++)i+=this.buildAttrPairStr(n[a],""+t[s][n[a]])}else r+=this.processTextOrObjNode(t[s],s,e);return{attrStr:i,val:r}};cy.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+t:" "+t+'="'+e+'"'};function oot(t,e,i){const r=this.j2x(t,i+1);return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextValNode(t[this.options.textNodeName],e,r.attrStr,i):this.buildObjectNode(r.val,e,r.attrStr,i)}cy.prototype.buildObjectNode=function(t,e,i,r){if(t==="")return e[0]==="?"?this.indentate(r)+"<"+e+i+"?"+this.tagEndChar:this.indentate(r)+"<"+e+i+this.closeTag(e)+this.tagEndChar;{let s="</"+e+this.tagEndChar,n="";return e[0]==="?"&&(n="?",s=""),(i||i==="")&&t.indexOf("<")===-1?this.indentate(r)+"<"+e+i+n+">"+t+s:this.options.commentPropName!==!1&&e===this.options.commentPropName&&n.length===0?this.indentate(r)+`<!--${t}-->`+this.newLine:this.indentate(r)+"<"+e+i+n+this.tagEndChar+t+this.indentate(r)+s}};cy.prototype.closeTag=function(t){let e="";return this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${t}`,e};cy.prototype.buildTextValNode=function(t,e,i,r){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(r)+`<![CDATA[${t}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(r)+`<!--${t}-->`+this.newLine;if(e[0]==="?")return this.indentate(r)+"<"+e+i+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(e,t);return s=this.replaceEntitiesValue(s),s===""?this.indentate(r)+"<"+e+i+this.closeTag(e)+this.tagEndChar:this.indentate(r)+"<"+e+i+">"+s+"</"+e+this.tagEndChar}};cy.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const i=this.options.entities[e];t=t.replace(i.regex,i.val)}return t};function aot(t){return this.options.indentBy.repeat(t)}function lot(t){return t.startsWith(this.options.attributeNamePrefix)&&t!==this.options.textNodeName?t.substr(this.attrPrefixLen):!1}var uot=cy;const cot=tV,hot=Qnt,dot=uot;var pot={XMLParser:hot,XMLValidator:cot,XMLBuilder:dot};class fot extends Ks{async loadWfsData(e,i=-1,r=0,s=1e3,n={type:"FeatureCollection",features:[]},o=!1){let a={offset:r.toString(),limit:s.toString()};i===-1&&(a={resulttype:"hits"});const u=new k5(e).updateQuery(a),[c,d]=await t1(L$.get(u));if(!d)return console.error(`WFS data failed to load for ${e}`,c),Promise.reject(c);const f=d.data;if(i===-1)return i=d.data.numberMatched,this.loadWfsData(e,i,r,s,n,o);if(n.features=n.features.concat(f.features),f.features.length<i-r){const m=Math.min(s,i-r-f.features.length);return this.loadWfsData(u,i,f.features.length+r,m,n,o)}else return o&&n.features.length>0&&n.features[0].geometry.type===ms.POINT&&n.features.forEach(m=>{const g=m.geometry.coordinates;m.properties.rvInternalCoordX=g[0],m.properties.rvInternalCoordY=g[1]}),n}reversedAxisWKIDs(){return Qst}parseCapabilities(e){const i=()=>{let o=e;if(e.indexOf("?")===-1)o+="?service=WMS&request=GetCapabilities";else{const a=new k5(e.toUpperCase());"SERVICE"in a.queryMap||(o+="&service=WMS"),"REQUEST"in a.queryMap||(o+="&request=GetCapabilities")}return Et(o,{responseType:"xml"}).then(a=>a.data)},r=new Promise(o=>{i().then(a=>o(a)).catch(()=>{console.error("Get capabilities failed; trying the second time;"),o(i())})}),s=o=>{let a=o.Layer;return a?(Array.isArray(a)||(a=[a]),a.map(l=>{const u=l.Name,c=l.Title;let d=l.Style;const f=[],m={};return d&&(Array.isArray(d)||(d=[d]),d.forEach(g=>{const v=g.Name;if(f.push(v),g.LegendURL){const _=g.LegendURL.OnlineResource["@_xlink:href"];m[v]=_.replaceAll("&amp;","&")}})),{name:u?.toString()??null,title:c,queryable:l["@_queryable"]==="1",layers:s(l),allStyles:f,styleToURL:m,currentStyle:f[0]}})):[]},n=o=>{let a=o.Format;return Array.isArray(a)||(a=[a]),a};return r.then(o=>{if(!o)return[];const a=new XMLSerializer().serializeToString(o),l={ignoreAttributes:!1},u=new pot.XMLParser(l).parse(a);if("ServiceExceptionReport"in u)return console.error(u.ServiceExceptionReport.ServiceException),[];const c=u.WMS_Capabilities.Capability;return{layers:s(c),queryTypes:n(c.Request.GetFeatureInfo)}})}}class mot extends Ks{files;ogc;constructor(e){super(e),this.files=new Kst(e),this.ogc=new fot(e)}createLayer(e){let i;switch(e.layerType){case li.FEATURE:i=_ot;break;case li.MAPIMAGE:i=xot;break;case li.GRAPHIC:i=got;break;case li.TILE:i=Iot;break;case li.WFS:i=Aot;break;case li.DATATABLE:i=$ot;break;case li.WMS:i=Mot;break;case li.GEOJSON:i=vot;break;case li.CSV:i=wot;break;case li.DATAJSON:i=Cot;break;case li.IMAGERY:i=Tot;break;case li.SHAPEFILE:i=bot;break;case li.OSM:i=Eot;break;default:throw new Error("Unsupported Layer Type "+e.layerType)}return new i(e,this.$iApi)}getLayer(e){let i;const r=Sl(this.$vApp.$pinia);return i=r.getLayerById(e),i||(i=r.getLayerByUid(e)),i}allLayers(){return this.allActiveLayers().concat(this.allErrorLayers(),this.allInitiatingLayers())}allActiveLayers(){return this.allLayersOnMap().concat(this.allDataLayers()).filter(e=>e.layerState!==ks.ERROR)}allLayersOnMap(){return Sl(this.$vApp.$pinia).layers||[]}allDataLayers(){return Sl(this.$vApp.$pinia).dataLayers||[]}allErrorLayers(){return Sl(this.$vApp.$pinia).penaltyBox.concat(this.allLayersOnMap().filter(e=>e.layerState===ks.ERROR),this.allDataLayers().filter(e=>e.layerState===ks.ERROR))||[]}allInitiatingLayers(){return Sl(this.$vApp.$pinia).initiatingLayers||[]}getLayerControls(e){const i=this.getLayer(e);if(!i)return;const r=i.config.controls?.slice()??[As.BoundaryZoom,As.Datatable,As.Identify,As.Metadata,As.Opacity,As.Refresh,As.Reload,As.Remove,As.Settings,As.Symbology,As.Visibility],s=[];return i.supportsFeatures||s.push(As.Datatable),i.extent===void 0&&s.push(As.BoundaryZoom),(i.config?.metadata||(i.isSublayer?i.parentLayer?.config?.metadata:{})||{}).url||s.push(As.Metadata),!i.mapLayer&&!i.config.controls?.includes(As.Settings)&&s.push(As.Settings),s.forEach(o=>{const a=r?.indexOf(o)??-1;a!==-1&&r?.splice(a,1)}),{controls:r,disabledControls:i.config.disabledControls??[]}}async loadLayerMetadata(e){if(!e.trim())throw new Error("url missing on layer server metadata request.");const[i,r]=await t1(Et(e,{query:{f:"json"}}));if(!r)throw console.error(`Service metadata load error: ${e}`,i),new Error(`Service metadata load error: ${e}`);if(!r.data)throw console.error(`Service metadata load error: ${e}`),new Error(`Service metadata load error: ${e}`);const s=r.data,n={geometryType:Mi.NONE,minScale:0,maxScale:0,canModifyLayer:!0,extent:void 0,defaultVisibility:!0,fields:[],displayField:"",objectIdField:"",renderer:void 0,currentVersion:0,name:"",dataFormat:Wn.UNKNOWN,mapLayer:!0};if(n.name=s.name||"",n.currentVersion=s.currentVersion||-1,n.minScale=s.effectiveMinScale||s.minScale||0,n.maxScale=s.effectiveMaxScale||s.maxScale||0,n.extent=s.extent?Wr.fromArcServer(s.extent,"layer_extent"):void 0,n.defaultVisibility=s.defaultVisibility??!0,n.canModifyLayer=s.canModifyLayer??!0,s.type==="Feature Layer"||s.type==="Table"){if(n.dataFormat=Wn.ESRI_FEATURE,n.displayField=s.displayField||"",Array.isArray(s.fields)){const o=s.fields.map(l=>ml.fromJSON(l));n.fields=o.map(l=>({name:l.name,alias:l.alias,type:l.type,length:l.length})),o.every(l=>l.type==="oid"?(n.objectIdField=l.name,!1):!0)&&(n.objectIdField=s.objectIdField||(()=>(console.error(`Encountered service with no OID defined: ${e}`),""))()),s.type==="Feature Layer"?(n.geometryType=this.$iApi.geo.geom.serverGeomTypeToRampGeomType(s.geometryType),s?.drawingInfo?.renderer&&(n.renderer=Qb(s.drawingInfo.renderer))):n.mapLayer=!1}}else n.dataFormat=Wn.ESRI_RASTER;return n}async loadFeatureCount(e,i=""){if(!e)return console.error("A layer without a url attempted to run the server based feature count routine."),0;const r={query:{f:"json",where:i||"1=1",returnCountOnly:!0,returnGeometry:!1}},[s,n]=await t1(Et(`${e}/query`,r));return n?n.data?Number.isInteger(n.data.count)?n.data.count:(console.error(`Funny result (${n.data.count}) during feature count: ${e}`),0):(console.error(`Unable to load feature count: ${e}`),0):(console.error(`Feature count request unsuccessful: ${e}`,s),0)}}class a0 extends Ks{config={};id;uid;name;layerState;initiationState;drawState;layerIdx;layerType;layerFormat;dataFormat;supportsIdentify;supportsFeatures;mapLayer;featureCount;fields;fieldList;nameField;oidField;expectedTime;supportsSublayers;isSublayer;isRemoved;isFile;isCosmetic;userAdded;identify;identifyMode;hovertips;geomType;legend;maxLoadTime;esriLayer;esriSubLayer;esriView;extent;canModifyLayer;_parentLayer;_sublayers;constructor(e,i){super(i),this.config=e,this.id="",this.uid="",this.name="error",this.layerState=ks.NEW,this.drawState=xa.NOT_LOADED,this.initiationState=wa.NEW,this.layerIdx=-1,this.layerFormat=Fl.UNKNOWN,this.layerType=li.UNKNOWN,this.dataFormat=Wn.UNKNOWN,this.supportsIdentify=!1,this.identifyMode=hn.NONE,this.supportsFeatures=!1,this.mapLayer=!0,this.featureCount=0,this.fields=[],this.fieldList="",this.nameField="",this.oidField="",this.supportsSublayers=!1,this.isSublayer=!1,this.isRemoved=!1,this.isFile=!1,this.isCosmetic=!1,this.userAdded=!1,this.identify=!1,this.hovertips=!1,this.geomType=Mi.UNKNOWN,this.legend=[],this._sublayers=[],this.expectedTime={draw:0,load:0},this.maxLoadTime=0,this.canModifyLayer=!0}async initiate(){return Promise.resolve()}async terminate(){return Promise.resolve()}async reload(){return Promise.resolve()}loadPromise(){return Promise.resolve()}get isLoaded(){return!1}get layerExists(){return!1}getLayerTree(){return new R5(0,"Fake tree","getLayerTree() was not implemented in layer")}getSR(){return Ii.latLongSR()}get visibility(){return!1}set visibility(e){}get opacity(){return 0}set opacity(e){}get scaleSet(){return new _ue}set scaleSet(e){}isOffscale(e=void 0){return!1}zoomToVisibleScale(){return Promise.resolve()}zoomToLayerBoundary(){return Promise.resolve()}get mouseTolerance(){return 0}set mouseTolerance(e){}get touchTolerance(){return 0}set touchTolerance(e){}get drawOrder(){return[]}canIdentify(){return!1}runIdentify(e){return[]}getAttributes(){return Promise.resolve({features:[],oidIndex:{}})}abortAttributeLoad(){}clearFeatureCache(){}downloadedAttributes(){return 0}attribLoadAborted(){return!1}getTabularAttributes(){return Promise.resolve({columns:[],rows:[],fields:[],oidField:"error"})}getGraphic(e,i){return Promise.resolve(new jh(new f1))}getIcon(e){return Promise.resolve("")}getSqlFilter(e){return""}setSqlFilter(e,i){}applySqlFilter(e=[]){}getFilterOIDs(e=[],i=void 0){return Promise.resolve(void 0)}getGraphicExtent(e){return Promise.resolve(Wr.fromParams("fake",0,0,0,0))}get parentLayer(){if(this.isSublayer)return this._parentLayer;throw new Error("Attempted to get parent layer of a non-sublayer object")}set parentLayer(e){if(!this.isSublayer&&e)throw new Error("Attempted to set parent layer for a non-sublayer object");this._parentLayer=e}get sublayers(){return this._sublayers}onLoad(){}onError(){}updateLayerState(e){}updateDrawState(e){}updateInitiationState(e){}uidToIdx(e){if(e===this.uid)return-1;{const i=this._sublayers.findIndex(r=>r?.uid===e);if(i===-1)throw new Error(`Attempt to access non-existing unique id [layerid ${this.id}, uid ${e}]`);return i}}getSublayer(e){if(!this.supportsSublayers){console.warn(`Attempted to call getSublayer on a layer (layer id: ${this.id}) that does not support FCs`);return}let i;if(typeof e=="string"?i=this.uidToIdx(e):i=e,this._sublayers[i]===void 0)throw new Error(`Attempt to access non-existing layer index [layerid ${this.id}, lookup value ${e}]`);return this._sublayers[i]}controlAvailable(e){const i=this.$iApi.geo.layer.getLayerControls(this.id);return i?.disabledControls?.includes(e)?!1:i?.controls.includes(e)??!1}}class Nfe extends a0{timers;origRampConfig;loadDefProm;loadPromFulfilled;layerTree;constructor(e,i){super(e,i),this.name=e.name||"",this.geomType=Mi.NONE,this.dataFormat=Wn.UNKNOWN,this.layerType=li.UNKNOWN,this.layerFormat=Fl.UNKNOWN,this.expectedTime.draw=e.expectedDrawTime??1e4,this.expectedTime.load=e.expectedLoadTime??4e3,this.timers={draw:void 0,load:void 0},this.origRampConfig=e,this.id=e.id||"",this.uid=this.$iApi.geo.shared.generateUUID(),this.isCosmetic=!1,this.isRemoved=!1,this.isSublayer=!1,this.supportsIdentify=!1,this.mapLayer=!0,this.identifyMode=hn.NONE,this.supportsFeatures=!1,this.hovertips=!1,this.supportsSublayers=!1,this.isFile=!1,this.layerState=ks.NEW,this.initiationState=wa.NEW,this.drawState=xa.NOT_LOADED,this.loadDefProm=new fn,this.loadPromFulfilled=!1,this.layerTree=new R5(0,this.uid,this.name,!0),this.maxLoadTime=e.maxLoadTime??2e4}updateInitiationState(e){this.initiationState=e,this.$iApi.event.emit(qt.LAYER_INITIATIONSTATECHANGE,{state:e,layer:this})}updateLayerState(e){this.layerState=e,this.$iApi.event.emit(qt.LAYER_LAYERSTATECHANGE,{state:e,layer:this})}updateDrawState(e){this.drawState=e,e===xa.REFRESH?this.startTimer("draw"):e===xa.UP_TO_DATE&&this.stopTimer("draw"),this.$iApi.event.emit(qt.LAYER_DRAWSTATECHANGE,{state:e,layer:this})}async initiate(){this.updateInitiationState(wa.INITIATING),this.startTimer("load");const[e]=await t1(this.onInitiate());this.drawState!==xa.UP_TO_DATE&&this.startTimer("draw"),e&&(console.error(e.message),this.onError()),this.updateInitiationState(wa.INITIATED)}async onInitiate(){if(this.isSublayer)return console.warn("Attempted to initiate a sublayer as a CommonLayer"),Promise.resolve();this.initiationState===wa.INITIATED&&console.error(`Encountered layer initialize while already initiated, layer id ${this.id}`)}async terminate(){this.updateInitiationState(wa.TERMINATING),await Promise.all(this.sublayers.map(e=>e.terminate())),this.loadDefProm=new fn,this.loadPromFulfilled=!1,this.updateLayerState(ks.NEW),this.updateDrawState(xa.NOT_LOADED),this.updateInitiationState(wa.TERMINATED)}onLoad(){let e=!1;const i=setTimeout(()=>{this.maxLoadTime&&(e=!0,this.onError())},this.maxLoadTime),r=this.onLoadActions();Promise.all(r).then(()=>{clearTimeout(i),e?this.visibility=!1:(this.loadPromFulfilled&&(this.loadDefProm=new fn),this.loadDefProm.resolveMe(),this.loadPromFulfilled=!0,this.stopTimer("load"),this.sublayers.forEach(s=>s.onLoad()),this.updateLayerState(ks.LOADED))}).catch(()=>{clearTimeout(i),this.onError()})}onError(){this.loadPromFulfilled&&(this.loadDefProm=new fn),this.loadDefProm.rejectMe(),this.loadPromFulfilled=!0,this.sublayers.forEach(e=>e.onError()),this.$iApi.notify.show(_u.ERROR,this.$iApi.$i18n.t("layer.error",{id:this.id})),this.stopTimer("draw"),this.stopTimer("load"),this.updateLayerState(ks.ERROR)}onLoadActions(){return[]}loadPromise(){return this.loadDefProm.getPromise()}get isLoaded(){return this.layerState===ks.LOADED}canIdentify(){return this.supportsIdentify&&this.isLoaded&&this.visibility&&this.identify&&!this.scaleSet.isOffScale(this.$iApi.geo.map.getScale()).offScale}getLayerTree(){return this.layerTree}stubError(){throw new Error(`Attempted to use a method not valid for ${this.layerType}`)}getAttributes(){return this.stubError(),Promise.resolve({features:[],oidIndex:{}})}abortAttributeLoad(){this.stubError()}clearFeatureCache(){this.stubError()}getTabularAttributes(){return this.stubError(),Promise.resolve({columns:[],rows:[],fields:[],oidField:"error"})}getGraphic(e,i){return this.stubError(),Promise.resolve(new jh(new f1))}getIcon(e){return this.stubError(),Promise.resolve("")}getSqlFilter(e){return this.stubError(),""}setSqlFilter(e,i){this.stubError()}getFilterOIDs(e=[],i=void 0){return this.stubError(),Promise.resolve(void 0)}getGraphicExtent(e){return this.stubError(),Promise.resolve(Wr.fromParams("fake",0,0,0,0))}applySqlFilter(e=[]){this.stubError()}setCustomParameter(e,i,r=!0){this.stubError()}startTimer(e){this.stopTimer(e),this.expectedTime[e]>0&&(this.timers[e]=setTimeout(()=>this.$iApi.notify.show(_u.WARNING,this.$iApi.$i18n.t(`layer.long${e}`,{id:this.name||this.id})),this.expectedTime[e]))}stopTimer(e){this.timers[e]&&clearTimeout(this.timers[e])}}class v1 extends Nfe{_serverVisibility;_scaleSet;_mouseTolerance;_touchTolerance;_drawOrder;_lastFilterUpdate="";viewDefProm;esriWatches;constructor(e,i){super(e,i),this._scaleSet=new _ue,this._mouseTolerance=e.mouseTolerance!=null?e.mouseTolerance:5,this._touchTolerance=e.touchTolerance!=null?e.touchTolerance:15,this._drawOrder=[],this._serverVisibility=void 0,this.isCosmetic=e.cosmetic||!1,this.extent=e.extent?Wr.fromConfig(`${this.id}_extent`,e.extent):void 0,this.viewDefProm=new fn,this.esriWatches=[]}noLayerErr(){console.error("Attempted to manipulate the layer but no layer found. Likely .initiate() was not finished or failed."),console.trace()}async onInitiate(){if(await super.onInitiate(),!this.esriLayer){this.noLayerErr();return}this.esriWatches.push(this.esriLayer.watch("visible",e=>{this.$iApi.event.emit(qt.LAYER_VISIBILITYCHANGE,{visibility:e,layer:this})})),this.esriWatches.push(this.esriLayer.watch("opacity",e=>{this.$iApi.event.emit(qt.LAYER_OPACITYCHANGE,{opacity:e,layer:this})})),this.esriWatches.push(this.esriLayer.watch("loadStatus",e=>{const i={"not-loaded":ks.LOADING,loading:ks.LOADING,loaded:ks.LOADED,failed:ks.ERROR};e==="loaded"?this.onLoad():e==="failed"?this.onError():this.updateLayerState(i[e])})),this.esriLayer.on("layerview-create",e=>{this.esriView=e.layerView,this.esriWatches.push(e.layerView.watch("updating",i=>{this.updateDrawState(i?xa.REFRESH:xa.UP_TO_DATE)})),this.viewDefProm.resolveMe()}),this.sublayers.forEach(e=>e.initiate())}async terminate(){await super.terminate(),this.viewDefProm=new fn,this.esriWatches.forEach(e=>e.remove()),this.esriWatches=[]}async reload(){if(!this.$iApi.geo.map.esriMap){console.error("Attempted layer reload when no map exists");return}let e=0;if(this.initiationState===wa.INITIATED){if(this.esriLayer){const i=this.$iApi.geo.map.esriMap.layers.findIndex(r=>r.id===this.id);i>-1&&(e=i,this.$iApi.geo.map.esriMap.layers.remove(this.esriLayer))}this.$iApi.event.emit(qt.LAYER_RELOAD_START,this),this.sublayers.forEach(i=>this.$iApi.event.emit(qt.LAYER_RELOAD_START,i)),await this.terminate()}if(await this.initiate(),!this.esriLayer){console.error("ESRI layer failed to re-create during reload.");return}this.$iApi.geo.map.esriMap.layers.add(this.esriLayer,e),this.$iApi.event.emit(qt.LAYER_RELOAD_END,this),this.sublayers.forEach(i=>this.$iApi.event.emit(qt.LAYER_RELOAD_END,i))}makeEsriLayerConfig(e){return{id:e.id,url:e.url,opacity:e?.state?.opacity??1,visible:e?.state?.visibility??!0}}onLoadActions(){const e=super.onLoadActions();this.name||(this.name=this.esriLayer?.title||this.id),this.isCosmetic||(this.identify=this.config.state?.identify??this.supportsIdentify);const i=this.$iApi.geo.proj.checkProj(this.getSR()).then(r=>r?Promise.resolve():Promise.reject());return e.push(i),e}mapCheck(){return this.$iApi.geo.map.created?!0:(console.error("Attempting to use map-dependent logic before the layer has been added to the map"),console.trace(),!1)}get scaleSet(){return this._scaleSet}set scaleSet(e){this._scaleSet=e}isOffscale(e=void 0){let i;if(typeof e>"u")if(this.mapCheck())i=this.$iApi.geo.map.getScale();else return!1;else i=e;return this.scaleSet.isOffScale(i).offScale}zoomToVisibleScale(){return this.mapCheck()?this.$iApi.geo.map.zoomToVisibleScale(this.scaleSet):Promise.resolve()}zoomToLayerBoundary(){return this.extent?this.mapCheck()?this.$iApi.geo.map.zoomMapTo(this.extent):Promise.resolve():(console.error(`Attempted to zoom to boundary of a layer with no extent (Layer Id: ${this.id})`),Promise.resolve())}get mouseTolerance(){return this._mouseTolerance}set mouseTolerance(e){if(!this.supportsIdentify){console.warn("Attempted to set click tolerance on a layer that doesn't support identify");return}if(e<0){console.error("Attempted to set a negative click tolerance");return}this._mouseTolerance=e}get touchTolerance(){return this._touchTolerance}set touchTolerance(e){if(!this.supportsIdentify){console.warn("Attempted to set touch tolerance on a layer that doesn't support identify");return}if(e<0){console.error("Attempted to set a negative touch tolerance");return}this._touchTolerance=e}get layerExists(){return!!this.esriLayer}get drawOrder(){return this._drawOrder}get visibility(){return this.esriLayer?this.esriLayer.visible:(this.noLayerErr(),!1)}set visibility(e){this.esriLayer?this.esriLayer.visible=e:this.noLayerErr()}checkVisibility(){this.supportsSublayers&&(this.visibility=this.sublayers.some(e=>e.visibility))}get opacity(){return this.esriLayer?this.esriLayer.opacity:(this.noLayerErr(),0)}set opacity(e){this.esriLayer?this.esriLayer.opacity=e:this.noLayerErr()}getSR(){return this.esriLayer?Ii.fromESRI(this.esriLayer.spatialReference):(this.noLayerErr(),Ii.latLongSR())}}class nV extends v1{attribs;renderer;serviceUrl;canModifyLayer;filter;constructor(e,i){super(e,i),this.supportsIdentify=!0,this.geomType=Mi.UNKNOWN,this.serviceUrl="",this.fieldList="",this.canModifyLayer=!0,this.filter=new xue(e.permanentFilteredQuery||"",e.initialFilteredQuery||""),this.hovertips=e.state?.hovertips??!0,this.attribs=new Dfe}notLoadedErr(){console.error("Attempted to manipulate the layer before it was loaded"),console.trace()}makeEsriLayerConfig(e){return super.makeEsriLayerConfig(e)}async loadLayerMetadata(e={}){if(!this.serviceUrl)return;const i=await this.$iApi.geo.layer.loadLayerMetadata(this.serviceUrl);if(this.geomType=i.geometryType,this.attribs.quickCache=new Ufe(this.geomType),this.scaleSet.minScale=i.minScale,this.scaleSet.maxScale=i.maxScale,this.dataFormat=i.dataFormat,this.extent=this.extent??i.extent,this._serverVisibility=i.defaultVisibility,this.dataFormat===Wn.ESRI_FEATURE){this.supportsFeatures=!0,this.canModifyLayer=this.layerType===li.SUBLAYER?i.canModifyLayer:!0,this.fields=i.fields,this.nameField=i.displayField,this.oidField=i.objectIdField,this.drawOrder.forEach(n=>{this.fields.findIndex(o=>o.name===n.field)===-1&&console.error(`Draw order for layer ${this.id} references invalid field ${n.field}`)});const r=e&&e.customRenderer&&e.customRenderer.type?e.customRenderer:i.renderer;this.renderer=this.$iApi.geo.symbology.makeRenderer(r,this.fields),this.legend=this.$iApi.geo.symbology.rendererToLegend(this.renderer);const s={supportsLimit:(i.currentVersion||1)>=10.1,serviceUrl:this.serviceUrl,oidField:this.oidField,batchSize:-1,attribs:"*",permanentFilter:this.getSqlFilter(Ho.PERMANENT)};this.attribs.attLoader=new jfe(this.$iApi,s),this.origRampConfig.name||(this.name=i.name??this.id)}else this.supportsFeatures=!1}getAttributes(){return this.attribs.attLoader.getAttribs()}abortAttributeLoad(){this.attribs.attLoader.abortAttribLoad()}clearFeatureCache(){this.attribs.clearAll()}downloadedAttributes(){return this.isLoaded?this.attribs.attLoader.loadCount():0}attribLoadAborted(){return this.isLoaded?this.attribs.attLoader.isLoadAborted():!1}getTabularAttributes(){return this.$iApi.geo.attributes.generateTabularAttributes(this,this.attribs)}async getGraphic(e,i){let r={},s=new f1;const n=this.$iApi.geo.map;let o=!1,a=!1,l=0;if(i.getAttribs||i.getStyle){const c=this.attribs.quickCache.getAttribs(e);if(c)r=c;else if(this.attribs.attLoader.isLoaded()||this.isFile){const d=await this.attribs.attLoader.getAttribs();r=d.features[d.oidIndex[e]]}else o=!0}if(i.getGeom){l=n.getScale();const c=this.attribs.quickCache.getGeom(e,l);c?s=c:a=!0}if(o||a){const c={oid:e,serviceUrl:this.serviceUrl,includeGeometry:a,attribs:this.fieldList};a&&(c.mapSR=n.getSR().wkid?.toString(),this.attribs.quickCache.isPoint||(c.maxOffset=n.esriView?.resolution));const d=await this.$iApi.geo.attributes.loadSingleFeature(c);a&&(this.attribs.quickCache.setGeom(e,d.geometry,l),s=d.geometry),(o||typeof this.attribs.quickCache.getAttribs(e)>"u")&&(this.attribs.quickCache.setAttribs(e,d.attributes),o&&(r=d.attributes))}const u=new jh(s,"",i.getAttribs?r:void 0);if(i.getStyle){const c=hi(this.renderer.getGraphicSymbol(r));u.style=this.$iApi.geo.geom.styleEsriToRamp(c)}return u}async getIcon(e){if(!this.renderer)throw new Error("getIcon called before renderer is defined");const i=await this.getGraphic(e,{getAttribs:!0});return this.$iApi.geo.symbology.getGraphicIcon(i.attributes||{},this.renderer)}setSqlFilter(e,i){const r=this.filter.getSql(e);if(i===r)return;this.filter.setSql(e,i),this.$iApi.event.emit(qt.FILTER_CHANGE,{uid:this.uid,filterKey:e});const s=`${this.uid}-${e}-${i}`;this._lastFilterUpdate=s,setTimeout(()=>{this._lastFilterUpdate===s&&this.applySqlFilter()},100)}applySqlFilter(e=[]){throw new Error(`attempted to apply sql filter ${e} to a layer not equipped for it. likely a new subclass of AttribLayer did not override applySqlFilter`)}getSqlFilter(e){return this.filter.getSql(e)}getCombinedSqlFilter(e){return this.filter.getCombinedSql(e)}async getFilterOIDs(e=[],i=void 0){const r=this.filter.getCombinedSql(e),s=!!i;if(!(r||s))return;i&&this.filter.setExtent(i);const n=this.filter.sqlActiveFilters(e);let o=this.filter.getCache(n,s);if(!o){const a={filterGeometry:i,filterSql:r,includeGeometry:!1};o=this.queryOIDs(a),this.filter.setCache(o,n,s)}return o}queryOIDs(e){this.isFile&&(console.error("a file layer called a server based query function"),console.trace());const i={url:this.serviceUrl,...e};return this.$iApi.geo.query.arcGisServerQueryIds(i)}async queryFeaturesDiscrete(e){const i=await this.queryOIDs(e),r={getGeom:!!e.includeGeometry,getAttribs:!0};return i.map(s=>({oid:s,graphic:this.getGraphic(s,r)}))}async queryFeatures(e){const i=await this.queryFeaturesDiscrete(e);return Promise.all(i.map(r=>r.graphic))}}class yot extends v1{constructor(e,i){super(e,i),this.dataFormat=Wn.ESRI_FEATURE,this.layerFormat=Fl.GRAPHIC,this.hovertips=!1}_graphics=[];makeEsriLayerConfig(e){return super.makeEsriLayerConfig(e)}getGraphicCount(){return this._graphics.length}getLocalGraphic(e){return this._graphics.find(i=>i.id===e)}getEsriGraphic(e){return this.esriLayer?.graphics.find(i=>i.id===e)}notLoadedErr(){console.error("Attempted to manipulate the layer before it was loaded"),console.trace()}get graphics(){return this._graphics.slice()}async addGraphic(e){if(!this.esriLayer){this.noLayerErr();return}let i;e instanceof Array?i=e:i=[e];const r=i.filter(l=>this._graphics.findIndex(c=>c.id===l.id)===-1?(this._graphics.push(l),!0):(console.error(`Attempting to add graphic with id '${l.id}' that has already been added.`),!1)),s=this.$iApi.geo.map.getSR(),n=r.map(l=>this.$iApi.geo.proj.projectGeometry(s,l.geometry)),o=await Promise.all(n),a=r.map((l,u)=>{const c=new jh(o[u],l.id,l.attributes);return c.style=l.style,this.$iApi.geo.geom.graphicRampToEsri(c)});this.esriLayer.addMany(a)}removeGraphic(e){if(!this.esriLayer){this.noLayerErr();return}if(typeof e>"u"){this.esriLayer.removeAll(),this._graphics=[];return}let i;Array.isArray(e)?i=e:i=[e];const r=i.map(n=>typeof n=="string"?n:n.id),s=[];r.forEach(n=>{const o=this.esriLayer?.graphics.find(a=>a.id===n);if(o){s.push(o);const a=this._graphics.findIndex(l=>l.id===n);a!=-1&&this._graphics.splice(a,1)}}),this.esriLayer.removeMany(s),this._graphics=this._graphics.filter(n=>r.includes(n.id))}}class got extends yot{constructor(e,i){super(e,i),this.layerType=li.GRAPHIC}async onInitiate(){this.esriLayer=_s(new VAe(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(e){return super.makeEsriLayerConfig(e)}onLoadActions(){const e=super.onLoadActions();return this.layerTree.name=this.name,this.updateDrawState(xa.UP_TO_DATE),e}}class j$ extends nV{esriJson;sourceGeoJson;tooltipField;constructor(e,i){super(e,i),this.supportsIdentify=!0,this.isFile=!0,this.dataFormat=Wn.ESRI_FEATURE,this.layerFormat=Fl.FEATURE,this.tooltipField="",e.identifyMode&&e.identifyMode!==hn.NONE?this.identifyMode=e.identifyMode:this.identifyMode=hn.HYBRID}async reload(){if(this.origRampConfig.caching!==!0&&!this.origRampConfig.url){console.error("Attempted to reload file layer from non server source without caching enabled.");return}await super.reload()}async onInitiate(){if(!this.sourceGeoJson)throw new Error("File Layer is missing raw data.");const e=typeof this.sourceGeoJson=="string"?JSON.parse(this.sourceGeoJson):JSON.parse(JSON.stringify(this.sourceGeoJson)),i={layerId:this.origRampConfig.id||"",targetSR:this.$iApi.geo.map.getSR(),...this.origRampConfig.latField&&{latField:this.origRampConfig.latField},...this.origRampConfig.longField&&{lonField:this.origRampConfig.longField},colour:this.origRampConfig.colour,fieldMetadata:this.origRampConfig.fieldMetadata};this.esriJson=await this.$iApi.geo.layer.files.geoJsonToEsriJson(e,i),this.esriLayer=_s(new xC(this.makeEsriLayerConfig(this.origRampConfig))),this.esriJson=void 0,this.origRampConfig.caching!==!0&&delete this.origRampConfig.rawData,delete this.sourceGeoJson,await super.onInitiate()}makeEsriLayerConfig(e){const i=super.makeEsriLayerConfig(e),r="OBJECTID";return["source","objectIdField","id","fields","renderer","spatialReference","geometryType"].forEach(n=>{i[n]=this.esriJson[n]}),this.origRampConfig.nameField?i.displayField=this.$iApi.geo.attributes.fieldValidator(i.fields,this.origRampConfig.nameField)||r:i.displayField=r,i.outFields=["*"],delete i.url,Array.isArray(e.drawOrder)&&e.drawOrder.length>0?(i.orderBy=e.drawOrder.map(n=>({field:n.field,order:n.ascending?"ascending":"descending"})),this._drawOrder=e.drawOrder.slice()):(i.orderBy=[{field:r,order:"descending"}],this._drawOrder=[{field:r,ascending:!1}]),i}onLoadActions(){const e=super.onLoadActions();return this.esriLayer&&this.origRampConfig.customRenderer?.type&&(this.esriLayer.renderer=Qb(this.config.customRenderer)),this.layerTree.name=this.name,this.extractLayerMetadata(),this.origRampConfig.tooltipField?this.tooltipField=this.$iApi.geo.attributes.fieldValidator(this.fields,this.origRampConfig.tooltipField)||this.nameField:this.tooltipField=this.nameField,this.$iApi.geo.attributes.applyFieldMetadata(this,this.origRampConfig.fieldMetadata),this.attribs.attLoader.updateFieldList(this.fieldList),this.featureCount=this.esriLayer?.source.length||0,e.push(this.viewDefProm.getPromise()),this.filter.getCombinedSql()&&Promise.all(e).then(()=>{this.applySqlFilter()}),e}runIdentify(e){if(!this.canIdentify())return[];const i=new fn,r=Ys({items:[],loading:i.getPromise(),loaded:!1,errored:!1,uid:this.uid,requestTime:Date.now()});let s=Promise.resolve(),n=Promise.resolve(),o=[];if(this.identifyMode===hn.HYBRID||this.identifyMode===hn.GEOMETRIC){const a={includeGeometry:!1};this.geomType!==Mi.POLYGON&&e.geometry.type===Mi.POINT?a.filterGeometry=this.$iApi.geo.query.makeClickBuffer(e.geometry,e.tolerance):a.filterGeometry=e.geometry,a.filterSql=this.getCombinedSqlFilter(),n=this.queryFeatures(a).then(l=>{o=l})}return e.hitTest&&(this.identifyMode===hn.HYBRID||this.identifyMode===hn.SYMBOLIC)&&(s=n.then(async()=>{const a=await e.hitTest,l=await Promise.all(a.filter(u=>u.layerId===this.id&&o.findIndex(c=>u.oid===c.attributes[this.oidField])===-1).map(u=>this.getGraphic(u.oid,{getAttribs:!0})));o=o.concat(l)})),Promise.all([s,n]).then(()=>{o.forEach(a=>{const l=Ys({data:a.attributes,format:l0.ESRI,loaded:!0,loading:Promise.resolve()});r.items.push(l)}),r.loaded=!0,i.resolveMe()}).catch(()=>{r.errored=!0,i.resolveMe()}),[r]}extractLayerMetadata(){const e=this.esriLayer;if(!e)throw new Error("file layer attempted to extract data from esri layer, esri layer did not exist");this.supportsFeatures=!0,this.geomType=this.$iApi.geo.geom.clientGeomTypeToRampGeomType(e.geometryType),this.scaleSet.minScale=e.minScale||0,this.scaleSet.maxScale=e.maxScale||0,this.extent=this.extent??Wr.fromESRI(e.fullExtent,this.id+"_extent");const i=_s(e.fields.slice());this.fields=i.map(s=>({name:s.name,alias:s.alias,type:s.type,length:s.length})),this.nameField=e.displayField,this.oidField=e.objectIdField,this.renderer=this.$iApi.geo.symbology.makeRenderer(e.renderer,this.fields),this.legend=this.$iApi.geo.symbology.rendererToLegend(this.renderer);const r={sourceGraphics:e.source,oidField:this.oidField,attribs:"*",batchSize:-1};this.attribs.attLoader=new Rot(this.$iApi,r)}async getGraphic(e,i){const r={filterSql:`${this.oidField}=${e}`,includeGeometry:!!i.getGeom},s=await this.queryFeatures(r);if(s.length===0)throw new Error(`Could not find object id ${e}`);s.length!==1&&console.warn("did not get a single result on a query for a specific object id");const n=s[0];if(i.getStyle){const o=hi(this.renderer.getGraphicSymbol(n.attributes));n.style=this.$iApi.geo.geom.styleEsriToRamp(o)}return n}async queryFeatures(e){const i={layer:this,...e};return this.$iApi.geo.query.geoJsonQuery(i)}async queryOIDs(e){const i={layer:this,...e};return(await this.$iApi.geo.query.geoJsonQuery(i)).map(s=>s.attributes?s.attributes[this.oidField]:-1)}applySqlFilter(e=[]){if(!this.esriView){this.noLayerErr();return}const i=this.filter.getCombinedSql(e);hi(this.esriView).filter=new kie({where:i})}}class vot extends j${constructor(e,i){super(e,i),this.layerType=li.GEOJSON}async onInitiate(){if(this.origRampConfig.rawData&&(typeof this.origRampConfig.rawData=="string"||this.origRampConfig.rawData instanceof Object))this.sourceGeoJson=this.origRampConfig.rawData;else if(this.origRampConfig.url)this.sourceGeoJson=await this.$iApi.geo.layer.files.fetchFileData(this.origRampConfig.url,this.layerType);else throw new Error("GeoJson layer config contains no raw data or url");await super.onInitiate()}}class bot extends j${constructor(e,i){super(e,i),this.layerType=li.SHAPEFILE}async onInitiate(){let e;if(this.origRampConfig.rawData&&typeof this.origRampConfig.rawData=="string")e=this.origRampConfig.rawData;else if(this.origRampConfig.url)e=await this.$iApi.geo.layer.files.fetchFileData(this.origRampConfig.url,this.layerType);else throw new Error("shapefile file config contains no raw data or url");this.sourceGeoJson=await this.$iApi.geo.layer.files.shapefileToGeoJson(e),await super.onInitiate()}}class wot extends j${constructor(e,i){super(e,i),this.layerType=li.CSV}async onInitiate(){if(!this.origRampConfig.latField||!this.origRampConfig.longField)throw new Error("csv file config missing lat or long field names");let e;if(this.origRampConfig.rawData&&typeof this.origRampConfig.rawData=="string")e=this.origRampConfig.rawData;else if(this.origRampConfig.url)e=await this.$iApi.geo.layer.files.fetchFileData(this.origRampConfig.url,this.layerType);else throw new Error("Csv file config contains no raw data or url");this.sourceGeoJson=await this.$iApi.geo.layer.files.csvToGeoJson(e,{latfield:this.origRampConfig.latField,lonfield:this.origRampConfig.longField}),await super.onInitiate()}}class _ot extends nV{tooltipField;constructor(e,i){super(e,i),this.dataFormat=Wn.ESRI_FEATURE,this.tooltipField="",this.supportsIdentify=!0,this.layerType=li.FEATURE,this.layerFormat=Fl.FEATURE,e.identifyMode&&e.identifyMode!==hn.NONE?this.identifyMode=e.identifyMode:this.identifyMode=hn.HYBRID}async onInitiate(){_s(this.esriLayer=new xC(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(e){const i=super.makeEsriLayerConfig(e);return(e.initialFilteredQuery||e.permanentFilteredQuery)&&(i.definitionExpression=this.filter.getCombinedSql()),Array.isArray(e.drawOrder)&&e.drawOrder.length>0&&(i.orderBy=e.drawOrder.map(r=>({field:r.field,order:r.ascending?"ascending":"descending"})),this._drawOrder=e.drawOrder.slice()),i}onLoadActions(){const e=super.onLoadActions(),i=this.esriLayer&&this.origRampConfig.customRenderer?.type;i&&(this.esriLayer.renderer=Qb(this.origRampConfig.customRenderer));const r=this.esriLayer.parsedUrl.path,n=this.$iApi.geo.shared.parseUrlIndex(r).index||0;this.serviceUrl=r;const o=this.loadLayerMetadata(i?{customRenderer:this.esriLayer?.renderer}:{}).then(()=>{this.visibility=this.origRampConfig?.state?.visibility??this._serverVisibility??!0,this.nameField=this.origRampConfig.nameField||this.nameField||"",this.tooltipField=this.origRampConfig.tooltipField||this.nameField,this.$iApi.geo.attributes.applyFieldMetadata(this,this.origRampConfig.fieldMetadata),this.attribs.attLoader.updateFieldList(this.fieldList),this.esriLayer?.orderBy||(this.esriLayer.orderBy=[{field:this.oidField,order:"descending"}],this._drawOrder=[{field:this.oidField,ascending:!1}])}),a=this.$iApi.geo.layer.loadFeatureCount(this.serviceUrl,this.getSqlFilter(Ho.PERMANENT)).then(l=>{this.featureCount=l});return this.layerTree.name=this.name,this.layerTree.layerIdx=n,e.push(o,a),e}runIdentify(e){if(!this.canIdentify())return[];const i=new fn,r=Ys({items:[],loading:i.getPromise(),loaded:!1,errored:!1,uid:this.uid,requestTime:Date.now()});let s=Promise.resolve(),n=Promise.resolve(),o=[];if(this.identifyMode===hn.HYBRID||this.identifyMode===hn.GEOMETRIC){const a={includeGeometry:!1};this.geomType!==Mi.POLYGON&&e.geometry.type===Mi.POINT?a.filterGeometry=this.$iApi.geo.query.makeClickBuffer(e.geometry,e.tolerance):a.filterGeometry=e.geometry,a.filterSql=this.getCombinedSqlFilter(),n=this.queryFeaturesDiscrete(a).then(l=>{o=l})}return e.hitTest&&(this.identifyMode===hn.HYBRID||this.identifyMode===hn.SYMBOLIC)&&(s=n.then(async()=>{(await e.hitTest).filter(l=>l.layerId===this.id&&o.findIndex(u=>l.oid===u.oid)===-1).forEach(l=>{o.push({oid:l.oid,graphic:this.getGraphic(l.oid,{getAttribs:!0})})})})),Promise.all([s,n]).then(()=>{o.forEach(a=>{const l=Ys({data:void 0,format:l0.ESRI,loaded:!1,loading:new Promise(u=>{a.graphic.then(c=>{l.data=c.attributes,l.loaded=!0,u()})})});r.items.push(l)}),r.loaded=!0,i.resolveMe()}).catch(()=>{r.errored=!0,i.resolveMe()}),[r]}applySqlFilter(e=[]){if(!this.esriLayer){this.noLayerErr();return}const i=this.filter.getCombinedSql(e);this.esriLayer.definitionExpression=i}getGraphicExtent(e){return new Promise((i,r)=>{if(!this.esriLayer)this.noLayerErr(),r();else if(!["multipoint","polyline","polygon"].includes(this.esriLayer.geometryType))console.error(`Attempted to query extent for invalid geometry type ${this.esriLayer.geometryType}.`),r();else{const s=this.attribs.quickCache.getExtent(e);s?i(s):this.esriLayer.queryExtent({objectIds:[e],outSpatialReference:this.$iApi.geo.map.getSR().toESRI()}).then(n=>{const o=Wr.fromESRI(n.extent);this.attribs.quickCache.setExtent(e,o),i(o)}).catch(()=>{console.error(`Extent querying failed for ${e}.`),r()})}})}}class xot extends v1{isDynamic;origState;constructor(e,i){super(e,i),this.supportsIdentify=!0,this.supportsSublayers=!0,this.layerType=li.MAPIMAGE,this.layerFormat=Fl.MAPIMAGE,this.isDynamic=!1,this.hovertips=!1,this.layerTree.layerIdx=-1,this.identifyMode=hn.GEOMETRIC}async onInitiate(){this.esriLayer=_s(new h7(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(e){const i=super.makeEsriLayerConfig(e);return this.origState={visibility:i.visible,opacity:i.opacity},i.visible=!1,e.imageFormat&&(i.imageFormat=e.imageFormat),i}onLoadActions(){const e=super.onLoadActions();if(!this.esriLayer)return this.noLayerErr(),e;this.layerTree.name=this.name,this.isDynamic=this.esriLayer.capabilities.exportMap.supportsDynamicLayers,this.extent=this.extent??Wr.fromESRI(this.esriLayer.fullExtent,this.id+"_extent");const i=o=>{const a=this.esriLayer?.allSublayers.find(l=>l.id===o);if(!a)throw new Error("attempt to find map image sublayer failed");return a},r={};this.origRampConfig.sublayers.forEach(o=>{r[o.index||0]=o});const s=[],n=(o,a)=>{const l=o.id,u=r[l];if(o.sublayers&&o.sublayers.length>0){const c=(u?u.name:"")||o.title||"",d=new R5(l,"",c,!1);a.findChildByIdx(l)||a.children.push(d),o.sublayers.reverse().forEach(f=>{n(f,d)})}else{this._sublayers[l]||(this._sublayers[l]=new Sot({id:`${this.id}-${l}`,layerType:li.SUBLAYER,name:r[l]?.name,state:r[l]?.state??{opacity:this.opacity,visibility:this.visibility,hovertips:this.hovertips,identify:this.identify},extent:r[l]?.extent,controls:r[l]?.controls,disabledControls:r[l]?.disabledControls,initialFilteredQuery:r[l]?.initialFilteredQuery,permanentFilteredQuery:r[l]?.permanentFilteredQuery},this.$iApi,this,l));const c=this._sublayers[l];if(c.isRemoved)return;const d=(u?u.name:"")||o.title||"";if(c.name=d,s.push(c),!a.children.map(f=>f.layerIdx).includes(l)){const f=new R5(l,c.uid,c.name,!1);a.children.push(f)}c.esriWatches.push(o.watch("visible",()=>{this.$iApi.event.emit(qt.LAYER_VISIBILITYCHANGE,{visibility:c.visibility,layer:c}),c.parentLayer?.checkVisibility()}),o.watch("opacity",f=>{this.$iApi.event.emit(qt.LAYER_OPACITYCHANGE,{opacity:f,layer:c})}))}};return this.origRampConfig.sublayers.forEach(o=>{if(!o.cosmetic){const a=i(o.index||0);n(a,this.layerTree)}}),s.forEach(o=>{const a=i(o.layerIdx),l=r[o.layerIdx];o.serviceUrl=a.url,o.fetchEsriSublayer(this),o.initiate();const u=o.esriSubLayer&&l?.customRenderer?.type;u&&(o.esriSubLayer.renderer=Qb(l.customRenderer));const c=o.loadLayerMetadata(u?{customRenderer:o.esriSubLayer?.renderer}:{}).then(()=>{const d=r[o.layerIdx];return d?(o.visibility=o.isRemoved?!1:d.state?.visibility??(this.origState.visibility?o._serverVisibility??this.origState.visibility:this.origState.visibility??o._serverVisibility)??!0,o.opacity=d.state?.opacity??this.origState.opacity??1,o.nameField=d.nameField||o.nameField||"",this.$iApi.geo.attributes.applyFieldMetadata(o,d.fieldMetadata),o.canModifyLayer||this.$iApi.notify.show(_u.WARNING,this.$iApi.$i18n.t("layer.filtersdisabled",{name:o.name||o.id}))):this.$iApi.geo.attributes.applyFieldMetadata(o),o.supportsFeatures?(o.updateFieldList(),this.$iApi.geo.layer.loadFeatureCount(o.serviceUrl,o.getSqlFilter(Ho.PERMANENT)).then(f=>{o.featureCount=f})):Promise.resolve()});e.push(c)}),this.esriLayer.allSublayers.forEach(o=>{!o.sublayers&&!s.find(a=>a.layerIdx===o.id)&&(o.visible=!1,o.opacity=0)}),this.visibility=this.origState.visibility??!0,e}updateLayerState(e){super.updateLayerState(e),this.sublayers.forEach(i=>i.updateLayerState(e))}updateDrawState(e){super.updateDrawState(e),this.sublayers.forEach(i=>i.updateDrawState(e))}runIdentify(e){if(!this.canIdentify())return[];e.sublayerIds&&(e.sublayerIds=e.sublayerIds.map(s=>typeof s=="number"?this.layerTree?.findChildByIdx(s)?.uid:s));const i=e.sublayerIds?this._sublayers.filter(s=>e.sublayerIds?.includes(s.uid)):this._sublayers.filter(s=>s.canIdentify());if(i.length===0)return[];let r;return e.geometry.type===Mi.POINT&&(r=this.$iApi.geo.query.makeClickBuffer(e.geometry,e.tolerance)),i.map(s=>{const n=new fn,o={},a=Ys({items:[],loading:n.getPromise(),loaded:!1,errored:!1,uid:s.uid,requestTime:Date.now()});return s.geomType!==Mi.POLYGON&&r?o.filterGeometry=r:o.filterGeometry=e.geometry,o.filterSql=s.getCombinedSqlFilter(),s.queryFeaturesDiscrete(o).then(l=>{l.forEach(u=>{const c=Ys({data:void 0,format:l0.ESRI,loaded:!1,loading:new Promise(d=>{u.graphic.then(f=>{c.data=f.attributes,c.loaded=!0,d()})})});a.items.push(c)}),a.loaded=!0,n.resolveMe()}).catch(()=>{a.errored=!0,n.resolveMe()}),a})}}class Sot extends nV{tooltipField;constructor(e,i,r,s=0){if(super(e,i),this.layerType=li.SUBLAYER,this.layerFormat=Fl.MAPIMAGE,this.isSublayer=!0,this.layerIdx=s,this.parentLayer=r,this.dataFormat=Wn.ESRI_FEATURE,this.tooltipField="",this.hovertips=!1,!r.esriLayer)throw new Error("Map Image Layer with no internal esri layer encountered in sublayer creation");this.fetchEsriSublayer(r),(e.initialFilteredQuery||e.permanentFilteredQuery)&&this.applySqlFilter()}fetchEsriSublayer(e){if(!e.esriLayer){console.error("Attempted to fetch the ESRI sublayer when parent has no ESRI layer");return}this.esriSubLayer=_s(e.esriLayer.allSublayers.find(i=>i.id===this.layerIdx))}onLoadActions(){return this.layerTree=this.parentLayer.getLayerTree().findChildByUid(this.uid),this.layerTree.name=this.name,this.layerTree.layerIdx=this.layerIdx,this.identify=this.config.state.identify!=null?this.config.state.identify:this.supportsIdentify,[]}async onInitiate(){this.initiationState=wa.INITIATED}async reload(){if(!this.$iApi.geo.map.esriMap){console.error("Attempted layer reload when no map exists");return}this.parentLayer?.reload()}get layerExists(){return!!(this.parentLayer?.esriLayer&&this.esriSubLayer)}get visibility(){return!this.parentLayer?.esriLayer||!this.esriSubLayer?(this.noLayerErr(),!1):this.esriSubLayer.visible}set visibility(e){if(!this.parentLayer?.esriLayer||!this.esriSubLayer){this.noLayerErr();return}this.esriSubLayer.visible=e}get opacity(){return!this.parentLayer?.esriLayer||!this.esriSubLayer?(this.noLayerErr(),0):this.esriSubLayer.opacity}set opacity(e){if(!this.parentLayer?.esriLayer||!this.esriSubLayer){this.noLayerErr();return}this.parentLayer.isDynamic||console.warn(`Opacity of a Map Image Sublayer was set. The service does not support sublayer opacity. LayerId ${this.id}`),this.esriSubLayer.opacity=e}get mouseTolerance(){return!this.parentLayer?.esriLayer||!this.esriSubLayer?(this.noLayerErr(),0):this.parentLayer.mouseTolerance}set mouseTolerance(e){if(!this.parentLayer?.esriLayer||!this.esriSubLayer){this.noLayerErr();return}this.parentLayer.mouseTolerance=e}get touchTolerance(){return!this.parentLayer?.esriLayer||!this.esriSubLayer?(this.noLayerErr(),0):this.parentLayer.touchTolerance}set touchTolerance(e){if(!this.parentLayer?.esriLayer||!this.esriSubLayer){this.noLayerErr();return}this.parentLayer.touchTolerance=e}applySqlFilter(e=[]){if(!this.parentLayer?.esriLayer||!this.esriSubLayer){this.noLayerErr();return}const i=this.filter.getCombinedSql(e);this.esriSubLayer.definitionExpression=i}getSR(){return this.parentLayer?.esriLayer?Ii.fromESRI(this._parentLayer?.esriLayer?.spatialReference):(this.noLayerErr(),Ii.latLongSR())}updateFieldList(){this.attribs.attLoader.updateFieldList(this.fieldList)}}class Eot extends v1{constructor(e,i){super(e,i),this.supportsIdentify=!1,this.layerType=li.OSM,this.layerFormat=Fl.OSM,this.dataFormat=Wn.OSM_TILE,this.supportsFeatures=!1}async onInitiate(){this.esriLayer=_s(new d7(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(e){return super.makeEsriLayerConfig(e)}onLoadActions(){const e=super.onLoadActions();this.layerTree.name=this.name;const i=this.$iApi.geo.symbology.generatePlaceholderSymbology("O","#03fc4e"),r={uid:this.$iApi.geo.shared.generateUUID(),label:"OpenStreetMap",svgcode:i.svgcode,esriStandard:!0,drawPromise:Promise.resolve()};return this.legend.push(r),e}}class Tot extends v1{constructor(e,i){super(e,i),this.supportsIdentify=!1,this.layerType=li.IMAGERY,this.layerFormat=Fl.IMAGERY,this.dataFormat=Wn.ESRI_RASTER}async onInitiate(){this.esriLayer=_s(new Wne(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(e){return super.makeEsriLayerConfig(e)}onLoadActions(){const e=super.onLoadActions();this.layerTree.name=this.name;const i=this.$iApi.geo.symbology.mapServerToLocalLegend(this.origRampConfig.url).then(r=>{this.legend=r});return e.push(i),e}}class Iot extends v1{constructor(e,i){super(e,i),this.supportsIdentify=!1,this.layerType=li.TILE,this.layerFormat=Fl.TILE,this.dataFormat=Wn.ESRI_TILE}async onInitiate(){this.esriLayer=_s(new p7(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(e){return super.makeEsriLayerConfig(e)}onLoadActions(){const e=super.onLoadActions();this.layerTree.name=this.name;const i=this.$iApi.geo.symbology.mapServerToLocalLegend(this.origRampConfig.url).then(r=>{this.legend=r});return e.push(i),e.push(this.checkProj()),e}checkProj(){const e=this.getSR(),r=this.$iApi.geo.map.getSR().isEqual(e);if(this.layerState===ks.LOADED&&!r)this.$iApi.notify.show(_u.WARNING,this.$iApi.$i18n.t("layer.mismatch",{name:this.name||this.id})),this.onError();else if(this.layerState===ks.ERROR&&r)this.reload();else if(this.layerState!==ks.ERROR&&!r)return this.$iApi.notify.show(_u.WARNING,this.$iApi.$i18n.t("layer.mismatch",{name:this.name||this.id})),Promise.reject();return Promise.resolve()}}class Mot extends v1{sublayerNames;mimeType;constructor(e,i){super(e,i),this.supportsIdentify=!0,this.layerType=li.WMS,this.layerFormat=Fl.WMS,this.mimeType=e.featureInfoMimeType||"",this.sublayerNames=[],this.dataFormat=Wn.OGC_RASTER,this.identifyMode=hn.GEOMETRIC}async onInitiate(){this.esriLayer=_s(new doe(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(e){const i=super.makeEsriLayerConfig(e),r=e.sublayers;this.sublayerNames=r.map(n=>n.id||"error_no_wms_id");const s=r.map(n=>n.currentStyle).join();return i.customParameters={styles:s},e.url.indexOf("/geomet")!==-1&&(i.customParameters.layers=r[0].id),i}onLoadActions(){const e=super.onLoadActions();this.layerTree.name=this.name;const i=r=>{let s=!1;return r.forEach(n=>{this.sublayerNames.indexOf(n.name)>-1||n.sublayers&&n.sublayers.length>0&&i(n.sublayers)?s=!0:n.visible=!1}),s};return this.esriLayer?i(this.esriLayer.sublayers):this.noLayerErr(),this.loadSymbology(),e}canIdentify(){return super.canIdentify()}runIdentify(e){if(e.geometry.type!==Mi.POINT)throw new Error("a point must be used for WMS Identify");if(!this.canIdentify())return[];const i=new fn,r=Ys({items:[],loading:i.getPromise(),loaded:!1,errored:!1,uid:this.uid,requestTime:Date.now()});return this.getFeatureInfo(this.sublayerNames,e.geometry,this.mimeType).then(s=>{if(s){const n=Ys({data:s,format:l0.UNKNOWN,loaded:!0,loading:Promise.resolve()});typeof s!="string"?(n.format=l0.JSON,r.items.push(n)):s.indexOf("Search returned no results")===-1&&s!==""&&(n.format=l0.TEXT,r.items.push(n))}r.loaded=!0,i.resolveMe()}).catch(()=>{r.errored=!0,i.resolveMe()}),[r]}setCustomParameter(e,i,r=!0){this.esriLayer?(this.esriLayer.customLayerParameters[e]=i,r&&this.esriLayer.refresh()):this.noLayerErr()}getFeatureInfo(e,i,r){const s=this.$iApi.geo.map,n=this.esriLayer;if(!s.esriView)throw new Error("WMS get feature, no map view exists. Cannot derive click coords");if(!n)throw this.noLayerErr(),new Error("wms get feature failed, no layer");let o,a;const l=s.getExtent(),u=n.spatialReferences,c=e.join(","),d=s.esriView.toScreen(i.toESRI()),f=Math.floor(d.x),m=Math.floor(d.y),v={"application/json":"json","text/html":"text","text/plain":"text"}[r]||"text",b=s.getSR();b.wkid?o=b.wkid:(o=4326,console.error("Map is likely in a WKT projection. WMS Identify request will likely fail.")),u&&u.length>1?u.indexOf(o)===-1&&(b.latestWkid&&u.indexOf(b.latestWkid)>-1?o=b.latestWkid:console.error("WMS service does not support the maps projection. Identify request will likely fail.")):console.error("No supported wkid/epsg code found for WMS service. Identify request will likely fail."),n.version==="1.3"||n.version==="1.3.0"?(a={CRS:"EPSG:"+o,I:f,J:m,STYLES:"",FORMAT:n.imageFormat},this.$iApi.geo.layer.ogc.reversedAxisWKIDs().indexOf(o)>-1&&(a.BBOX=`${l.ymin},${l.xmin},${l.ymax},${l.xmax}`)):a={SRS:"EPSG:"+o,X:f,Y:m},Object.prototype.hasOwnProperty.call(a,"BBOX")||(a.BBOX=`${l.xmin},${l.ymin},${l.xmax},${l.ymax}`);const _={SERVICE:"WMS",REQUEST:"GetFeatureInfo",VERSION:n.version,WIDTH:s.getPixelWidth(),HEIGHT:s.getPixelHeight(),QUERY_LAYERS:c,LAYERS:c,INFO_FORMAT:r},S=n.customLayerParameters;return S&&Object.keys(S).forEach(M=>{M.toLowerCase()!=="styles"&&(_[M]=S[M])}),Object.keys(_).forEach(M=>a[M]=_[M]),Et(n.url.split("?")[0],{query:a,responseType:v})}getLegendUrls(e){if(!this.esriLayer)return this.noLayerErr(),[];const i=new Map;this.esriLayer.allSublayers.forEach(s=>{s.visible&&(s.legendUrl&&this.origRampConfig.sublayers?.forEach(n=>{if(n.id&&n.currentStyle&&n.id===s.name){const o=new k5(s.legendUrl);"STYLE"in o.queryMap&&o.queryMap.STYLE!==n.currentStyle&&(s.legendUrl=o.updateQuery({STYLE:n.currentStyle}))}}),i.set(s.name,s.legendUrl))});const r=e.map(s=>s.styleLegends&&s.currentStyle?s.styleLegends.find(n=>n.name===s.currentStyle).url:void 0);return r.forEach((s,n)=>{s||(r[n]=i.get(e[n].id))}),r}getWMSLayerTitle(e){if(!this.esriLayer)return"";let i;return this.esriLayer.allSublayers.some(r=>{if(r.name===e)return i=r.title,!0}),i||""}loadSymbology(){const e=this.config.sublayers,i=this.getLegendUrls(e.map(r=>({id:r.id,styleLegends:r.styleLegends,currentStyle:r.currentStyle}))).map((r,s)=>{const n=e[s].name||this.getWMSLayerTitle(e[s].id)||e[s].id,o={uid:this.$iApi.geo.shared.generateUUID(),label:n,svgcode:"",esriStandard:!1,drawPromise:this.$iApi.geo.symbology.generateWMSSymbology(r).then(a=>{o.svgcode=a.svgcode,o.imgHeight=a.imgHeight,o.imgWidth=a.imgWidth})};return o});this.legend=i}}class Aot extends j${constructor(e,i){super(e,i),this.layerType=li.WFS}async onInitiate(){const e=new k5(this.config.url),{offset:i,limit:r}=e.queryMap;this.sourceGeoJson||(this.sourceGeoJson=await this.$iApi.geo.layer.ogc.loadWfsData(this.config.url,-1,parseInt(i)||0,parseInt(r)||1e3,void 0,this.config.xyInAttribs)),await super.onInitiate()}}class Ffe extends Nfe{sourceJson;attribs;_visibility;constructor(e,i){super(e,i),this.dataFormat=Wn.ESRI_FEATURE,this.layerFormat=Fl.NOLAYER,this.drawState=xa.NOT_VISUAL,this.attribs=new Dfe,this.supportsFeatures=!0,this.mapLayer=!1,this.isFile=!1,this._visibility=e.state?.visibility??!0,this.expectedTime.draw=0}async onInitiate(){if(this.sourceJson){const e=typeof this.sourceJson=="string"?JSON.parse(this.sourceJson):this.sourceJson;if(e.data.length===0||e.fields.length===0)throw new Error("Data layer with no columns or now rows.");const i=e.fields.slice(),r=e.data[0].slice(),s=/ /gi;this.fields=i.map((o,a)=>{let l="",u=o;o.indexOf(" ")>-1&&(l=o,u=o.trim().replace(s,"-"),e.fields[a]=u);const c=this.$iApi.geo.layer.files.inferType(r[a]);return{name:u,alias:l,type:c,length:c===zd.STRING?256:void 0}}),this.oidField="rampOID",this.fields.push({name:this.oidField,type:zd.OID}),e.fields.push(this.oidField),e.data.forEach((o,a)=>o.push(a+1)),this.$iApi.geo.attributes.applyFieldMetadata(this,this.origRampConfig.fieldMetadata),this.fieldList="*";const n={batchSize:-1,sourceDataJson:e,oidField:this.oidField,attribs:"*"};this.attribs.attLoader=new kot(this.$iApi,n),await this.attribs.attLoader.getAttribs(),this.featureCount=e.data.length,this.origRampConfig.nameField?this.nameField=this.$iApi.geo.attributes.fieldValidator(this.fields,this.origRampConfig.nameField)||this.oidField:this.nameField=this.oidField,this.sourceJson=void 0}else throw new Error("Attempted to initiate file based data layer, sourceJson is missing")}async terminate(){await super.terminate()}async reload(){this.initiationState===wa.INITIATED&&(this.$iApi.event.emit(qt.LAYER_RELOAD_START,this),await this.terminate()),await this.initiate(),this.layerState!==ks.ERROR&&this.onLoad(),setTimeout(()=>{this.$iApi.event.emit(qt.LAYER_RELOAD_END,this)},300)}onLoadActions(){const e=super.onLoadActions();return this.legend=[{uid:this.$iApi.geo.shared.generateUUID(),label:"",svgcode:"",esriStandard:!0,visibility:!0,lastVisbility:!0,drawPromise:this.getIcon(0).then(i=>{this.legend[0].svgcode=i})}],e}getAttributes(){return this.attribs.attLoader.getAttribs()}getTabularAttributes(){return this.$iApi.geo.attributes.generateTabularAttributes(this,this.attribs)}async getGraphic(e,i){let r={};if(this.attribs.attLoader.isLoaded()){const s=await this.attribs.attLoader.getAttribs();r=s.features[s.oidIndex[e]]}else throw new Error("Non ESRI data layer did not have attributes populated.");return new jh(new f1,"",r)}async getIcon(e){return'<svg id="SvgjsSvg1012" width="32" height="32" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" viewBox="0 0 32 32"><defs id="SvgjsDefs1013"></defs><rect id="SvgjsRect1014" width="28" height="28" x="2" y="2" fill="#2e8b57"></rect><text id="SvgjsText1015" font-family="Roboto" font-size="23" fill="#ffffff" font-weight="bold" x="7.6875" y="-6.40000057220459" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1016" dy="29.900000000000002" x="7.6875" svgjs:data="{&quot;newLined&quot;:true}">D</tspan></text></svg>'}async getFilterOIDs(e=[],i=void 0){}abortAttributeLoad(){}attribLoadAborted(){return!1}clearFeatureCache(){}downloadedAttributes(){return this.featureCount}get layerExists(){return this.isLoaded}get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this.$iApi.event.emit(qt.LAYER_VISIBILITYCHANGE,{visibility:e,layer:this}))}}class Cot extends Ffe{constructor(e,i){super(e,i),this.layerType=li.DATAJSON}async onInitiate(){if(this.origRampConfig.rawData&&(typeof this.origRampConfig.rawData=="string"||this.origRampConfig.rawData instanceof Object))this.sourceJson=this.origRampConfig.rawData;else if(this.origRampConfig.url)this.sourceJson=await this.$iApi.geo.layer.files.fetchFileData(this.origRampConfig.url,this.layerType);else throw new Error("Json Data layer config contains no raw data or url");await super.onInitiate()}}class $ot extends Ffe{filter;serviceUrl;constructor(e,i){super(e,i),this.layerType=li.DATATABLE,this.serviceUrl=e.url,this.filter=new xue(e.permanentFilteredQuery||"",e.initialFilteredQuery||"")}async onInitiate(){}onLoadActions(){const e=super.onLoadActions(),r=this.$iApi.geo.shared.parseUrlIndex(this.serviceUrl).index||0,s=this.$iApi.geo.layer.loadLayerMetadata(this.serviceUrl).then(o=>{this.name||(this.name=o.name),this.layerTree.name=this.name,this.oidField=o.objectIdField,this.nameField=this.origRampConfig.nameField||o.displayField||"",this.fields=o.fields,this.$iApi.geo.attributes.applyFieldMetadata(this,this.origRampConfig.fieldMetadata);const a={supportsLimit:(o.currentVersion||1)>=10.1,serviceUrl:this.serviceUrl,oidField:this.oidField,batchSize:-1,attribs:this.fieldList,permanentFilter:this.getSqlFilter(Ho.PERMANENT)};this.attribs.attLoader=new jfe(this.$iApi,a),this.attribs.quickCache=new Ufe(this.geomType)}),n=this.$iApi.geo.layer.loadFeatureCount(this.serviceUrl,this.getSqlFilter(Ho.PERMANENT)).then(o=>{this.featureCount=o});return this.layerTree.layerIdx=r,e.push(s,n),e}async getGraphic(e,i){let r={};const s=this.attribs.quickCache.getAttribs(e);if(s)r=s;else if(this.attribs.attLoader.isLoaded()){const o=await this.attribs.attLoader.getAttribs();r=o.features[o.oidIndex[e]]}else{const o={oid:e,serviceUrl:this.serviceUrl,includeGeometry:!1,attribs:this.fieldList},a=await this.$iApi.geo.attributes.loadSingleFeature(o);this.attribs.quickCache.setAttribs(e,a.attributes),r=a.attributes}return new jh(new f1,"",r)}abortAttributeLoad(){this.attribs.attLoader.abortAttribLoad()}clearFeatureCache(){this.attribs.clearAll()}downloadedAttributes(){return this.isLoaded?this.attribs.attLoader.loadCount():0}attribLoadAborted(){return this.isLoaded?this.attribs.attLoader.isLoadAborted():!1}setSqlFilter(e,i){const r=this.filter.getSql(e);i!==r&&(this.filter.setSql(e,i),this.$iApi.event.emit(qt.FILTER_CHANGE,{uid:this.uid,filterKey:e}))}getSqlFilter(e){return this.filter.getSql(e)}getCombinedSqlFilter(e){return this.filter.getCombinedSql(e)}async getFilterOIDs(e=[],i=void 0){const r=this.filter.getCombinedSql(e);if(!r)return;const s=this.filter.sqlActiveFilters(e);let n=this.filter.getCache(s,!1);if(!n){const o={filterSql:r,includeGeometry:!1};n=this.queryOIDs(o),this.filter.setCache(n,s,!1)}return n}queryOIDs(e){const i={url:this.serviceUrl,...e};return this.$iApi.geo.query.arcGisServerQueryIds(i)}async queryFeaturesDiscrete(e){const i=await this.queryOIDs(e),r={getAttribs:!0};return i.map(s=>({oid:s,graphic:this.getGraphic(s,r)}))}async queryFeatures(e){const i=await this.queryFeaturesDiscrete(e);return Promise.all(i.map(r=>r.graphic))}}class Oot extends Ks{oidIndexer(e,i){e.features.forEach((r,s)=>{e.oidIndex[r[i]]=s})}async arcGisBatchLoad(e,i){if(i.loadAbortFlag)return[];const r=e.permanentFilter?` AND ${e.permanentFilter}`:"",s={query:{where:`${e.oidField}>${e.maxId}${r}`,outFields:e.attribs,orderByFields:e.oidField,returnGeometry:"false",f:"json"}},[n,o]=await t1(Et(e.serviceUrl+"/query",s));if(!o)return console.error(`ArcGIS batch load error: ${e.serviceUrl}`,n),Promise.reject(new Error(`ArcGIS batch load error: ${e.serviceUrl}`));if(!o.data||!o.data.features)return console.error(`ArcGIS batch load gave no data/features: ${e.serviceUrl}`),Promise.reject(new Error(`ArcGIS batch load gave no data/features: ${e.serviceUrl}`));const a=o.data.features,l=a.length;if(l>0){i.loadedCount+=l;let u;if(e.supportsLimit?u=o.data.exceededTransferLimit:(e.batchSize===-1&&(e.batchSize=l),u=l>=e.batchSize),u){e.maxId=a[l-1].attributes[e.oidField];const c=await this.arcGisBatchLoad(e,i);return i.loadAbortFlag?[]:a.concat(c)}else return i.loadAbortFlag?[]:a}else return[]}async loadArcGisServerAttributes(e,i){e.maxId=-1,e.batchSize=-1;const s={features:(await this.arcGisBatchLoad(e,i)).map(n=>n.attributes),oidIndex:{}};return this.oidIndexer(s,e.oidField),i.loadIsDone=!0,s}async loadGraphicsAttributes(e,i){if(!e.sourceGraphics)throw new Error("No .sourceGraphics provided to file layer attribute loader");const s={features:e.sourceGraphics.map(n=>hi(n).attributes).toArray(),oidIndex:{}};return this.oidIndexer(s,e.oidField),i.loadIsDone=!0,i.loadedCount=s.features.length,s}async loadCompactJsonAttributes(e,i){if(!e.sourceDataJson)throw new Error("No .sourceDataJson provided to file data-layer attribute loader");const r=e.sourceDataJson.fields,n={features:e.sourceDataJson.data.map(o=>{const a={};return o.forEach((l,u)=>{a[r[u]]=l}),a}),oidIndex:{}};return this.oidIndexer(n,e.oidField),i.loadIsDone=!0,i.loadedCount=n.features.length,e.sourceDataJson=void 0,n}async loadSingleFeature(e){const i={query:{f:"json",objectIds:e.oid,returnGeometry:e.includeGeometry,outFields:e.attribs}};typeof e.maxOffset<"u"&&(i.query.maxAllowableOffset=e.maxOffset),typeof e.mapSR<"u"&&(i.query.outSR=e.mapSR),typeof e.geometryPrecision<"u"&&e.geometryPrecision>=0&&(i.query.geometryPrecision=e.geometryPrecision);const[r,s]=await t1(Et(e.serviceUrl+"/query",i));if(!s)return console.error(`ArcGIS single feature load error: ${e.serviceUrl}`,r),Promise.reject(new Error(`ArcGIS single feature load error: ${e.serviceUrl}`));if(!s.data||!s.data.features)return console.error(`Could not locate feature ${e.oid} for layer ${e.serviceUrl}`),Promise.reject(new Error(`Could not locate feature ${e.oid} for layer ${e.serviceUrl}`));const n=s.data.features;if(n.length>0){const o=n[0];let a;if(e.includeGeometry){o.geometry.spatialReference=s.data.spatialReference;const l=Pl(o.geometry);a=this.$iApi.geo.geom.geomEsriToRamp(l)}else a=new f1;return new jh(a,"",o.attributes)}return Promise.reject(new Error(`Could not locate feature ${e.oid} for layer ${e.serviceUrl}`))}orderFields(e,i){const r=(n,o)=>n.findIndex(a=>a.name===o),s=(n,o)=>{const a=r(i,n.name),l=r(i,o.name);return a===-1&&l===-1?r(e,n.name)-r(e,o.name):a===-1?1:l===-1?-1:a-l};return e.slice().sort(s)}applyFieldMetadata(e,i=void 0){if(!i||!i.fieldInfo){e.fieldList="*";return}if(i?.enforceOrder&&i?.fieldInfo&&i?.fieldInfo.length>0&&(e.fields=this.orderFields(e.fields,i.fieldInfo),e.fieldList=i.fieldInfo.map(r=>r.name).join(",")),i.exclusiveFields){i.fieldInfo.find(s=>s.name===e.oidField)||i.fieldInfo.push({name:e.oidField}),e.fieldList=i.fieldInfo.map(s=>s.name).join(",");const r=i.fieldInfo;e.fields=e.fields.filter(s=>r.find(n=>n.name===s.name))}else e.fieldList="*";i.fieldInfo.forEach(r=>{if(r.alias){const s=e.fields.find(n=>n.name===r.name);s&&(s.alias=r.alias)}})}fieldValidator(e,i){if(e.findIndex(r=>r.name===i)===-1){const r=e.find(s=>s.alias===i);return r?r.name:(console.warn(`Cannot find name field in layer field list: ${i}`),"")}else return i}async generateTabularAttributes(e,i){return i.attLoader.tabularAttributesCache||(i.attLoader.tabularAttributesCache=this.$iApi.geo.attributes.generateTabularAttributesWorker(e,i)),i.attLoader.tabularAttributesCache}async generateTabularAttributesWorker(e,i){if(e.dataFormat===Wn.ESRI_RASTER)throw new Error("Attempting to get attributes on a raster layer.");const r=await i.attLoader.getAttribs();if(!r.features||r.features.length===0)return{columns:[],rows:[],fields:[],oidField:""};const s=e.fields.filter(o=>Object.prototype.hasOwnProperty.call(r.features[0],hi(o).name)).map(o=>({data:hi(o).name,title:hi(o).alias||hi(o).name})),n=r.features.map(o=>{const a=Eue({},o);return a.rvInteractive="",a.rvSymbol=e.getIcon(o[e.oidField]),a.rvUid=e.uid,a});return s.forEach(o=>{if(o.data.slice(-2)==="()"){const a=function(){return this[o.data]},l=o.data.slice(0,-2);n.forEach(u=>{u[l]=a})}}),{columns:s,rows:n,fields:e.fields,oidField:e.oidField}}}class Dfe{_attribLoader;_quickCache;get attLoader(){if(this._attribLoader)return this._attribLoader;throw console.trace(),new Error("Attempted to load attributes prior to layer being loaded.")}set attLoader(e){this._attribLoader=e}get quickCache(){if(this._quickCache)return this._quickCache;throw console.trace(),new Error("Attempted to access attribute cache prior to layer being loaded.")}set quickCache(e){this._quickCache=e}clearAll(){this._attribLoader&&this._attribLoader.destroyAttribs(),this._quickCache&&this._quickCache.clearAll()}}class cK{loadedCount;loadAbortFlag;loadIsDone;constructor(){this.loadedCount=0,this.loadAbortFlag=!1,this.loadIsDone=!1}}class oV extends Ks{aac;loadPromise;details;tabularAttributesCache;constructor(e,i){super(e),this.aac=new cK,this.details=i}updateFieldList(e){this.details.attribs=e}getAttribs(){return this.loadPromise||(this.aac=new cK,this.loadPromise=this.loadPromiseGenerator()),this.loadPromise}abortAttribLoad(){this.aac.loadAbortFlag=!0}destroyAttribs(){this.loadPromise=void 0,this.tabularAttributesCache=void 0,this.aac.loadIsDone=!1,this.aac.loadedCount=0}loadCount(){return this.aac.loadedCount}isLoaded(){return this.aac.loadIsDone}isLoadAborted(){return this.aac.loadAbortFlag}loadPromiseGenerator(){return Promise.reject(new Error("Subclass of AttributeLoaderBase did not implement loadPromiseGenerator"))}}class jfe extends oV{constructor(e,i){super(e,i)}loadPromiseGenerator(){return this.$iApi.geo.attributes.loadArcGisServerAttributes(this.details,this.aac)}}class Rot extends oV{constructor(e,i){super(e,i)}loadPromiseGenerator(){return this.$iApi.geo.attributes.loadGraphicsAttributes(this.details,this.aac)}}class kot extends oV{constructor(e,i){super(e,i)}loadPromiseGenerator(){return this.$iApi.geo.attributes.loadCompactJsonAttributes(this.details,this.aac)}}class Ufe{attribs;geoms;extents;isPoint;constructor(e){this.attribs={},this.geoms={},this.extents={},this.isPoint=e==="point"}getScaleStore(e){return this.geoms[e]||(this.geoms[e]={}),this.geoms[e]}getGeomStore(e=void 0){if(this.isPoint)return this.geoms;if(typeof e>"u")throw new Error("Attempted to access geometry store for non-point layer without providing a map scale");return this.getScaleStore(e)}getAttribs(e){return this.attribs[e]}setAttribs(e,i){this.attribs[e]=i}getGeom(e,i=void 0){return this.getGeomStore(i)[e]}setGeom(e,i,r=void 0){const s=this.getGeomStore(r);s[e]=i}getExtent(e){return this.extents[e]}setExtent(e,i){this.extents[e]=i}clearAll(){this.attribs={},this.geoms={},this.extents={}}}class aV{innerRenderer;symbolUnits;defaultUnit;type;falseRenderer;constructor(e,i,r=!1){this.innerRenderer=e,this.symbolUnits=[],this.falseRenderer=r,this.type=$4.Unknown}makeSearchParams(e){return e}searchRenderer(e){const i=this.makeSearchParams(e),r=this.symbolUnits.find(n=>n.match(i));if(r)return r;if(this.defaultUnit)return this.defaultUnit;console.error(`renderer search could not find match for ${i}`);const s=new U$(this);return s.svgCode="",s}getGraphicIcon(e){return this.searchRenderer(e).svgCode}getGraphicSymbol(e){return this.searchRenderer(e).symbol}rendererToLegend(){throw new Error("rendererToLegend not implemented in subclass")}getFieldDelimiter(e,i){let r="'";if(!i||i.length===0)return r;const s=i.find(n=>n.name===e);return s&&s.type&&s.type!=="string"&&(r=""),r}cleanFieldName(e,i){if(!e)return e;let r=i.find(s=>s.name===e);if(r)return e;{const s=e.toLowerCase();return r=i.find(n=>n.name.toLowerCase()===s),r?r.name:e}}makeElseClause(){return this.falseRenderer?"":`(NOT (${this.symbolUnits.map(i=>i.definitionClause).join(" OR ")}))`}}class U${isDefault=!1;svgCode="";symbol;definitionClause="";label="";parent;constructor(e){this.parent=e,this.symbol=new Eu}match(e){return!!e}}class Lot extends aV{constructor(e,i){super(e,i),this.type=$4.Simple;const r=new U$(this);r.label=e.label||"",r.symbol=e.symbol,r.definitionClause="1=1",this.symbolUnits.push(r)}}class Pot extends aV{delim;keyFields;constructor(e,i,r=!1){super(e,i,r),this.type=$4.Unique,this.delim=e.fieldDelimiter||", ";const s=o=>o.replace(/'/g,"''");this.keyFields=[e.field,e.field2,e.field3].filter(o=>o).map(o=>this.cleanFieldName(o,i));const n=this.keyFields.map(o=>this.getFieldDelimiter(o,i));if(e.uniqueValueInfos.forEach(o=>{const a=new hK(this,o.value);if(a.label=o.label||"",a.symbol=o.symbol,!this.falseRenderer){const l=a.matchValue.split(this.delim),u=this.keyFields.map((c,d)=>l[d]==="<Null>"?`${c} IS NULL`:`${c} = ${n[d]}${s(l[d])}${n[d]}`).join(" AND ");a.definitionClause=`(${u})`,a.matchValue=a.matchValue.replace(/<Null>/g,"")}this.symbolUnits.push(a)}),e.defaultSymbol){const o=new hK(this,"");o.isDefault=!0,o.label=e.defaultLabel||"",o.symbol=e.defaultSymbol,o.definitionClause=this.makeElseClause(),this.defaultUnit=o}}makeSearchParams(e){return this.keyFields.map(i=>{let r=e[i]===null?"":e[i];return typeof r!="string"&&(r=r.toString()),r}).join(this.delim)}}class hK extends U${matchValue;constructor(e,i){super(e),typeof i=="number"?this.matchValue=i.toString():this.matchValue=i}match(e){return this.matchValue===e}}class Not extends aV{valField;constructor(e,i,r=!1){if(super(e,i,r),this.valField=this.cleanFieldName(e.field,i),e.classBreakInfos.forEach(s=>{const n=new dK(this,s.minValue,s.maxValue);n.label=s.label||"",n.symbol=s.symbol,this.falseRenderer||(n.definitionClause=`(${this.valField} > ${s.minValue} AND ${this.valField} <= ${s.maxValue})`),this.symbolUnits.push(n)}),e.defaultSymbol){const s=new dK(this,0,0);s.isDefault=!0,s.label=e.defaultLabel||"",s.symbol=e.defaultSymbol,s.definitionClause=this.makeElseClause(),this.defaultUnit=s}}makeSearchParams(e){return parseFloat(e[this.valField])}}class dK extends U${minValue;maxValue;constructor(e,i,r){super(e),this.minValue=i,this.maxValue=r}match(e){return this.minValue===this.maxValue?this.maxValue===e:this.minValue<e&&this.maxValue>=e}}var Vfe={exports:{}};/*!
* svg.js - A lightweight library for manipulating and animating SVG.
* @version 2.7.1
* https://svgdotjs.github.io/
*
* @copyright Wout Fierens <wout@mick-wout.com>
* @license MIT
*
* BUILT: Fri Nov 30 2018 10:01:55 GMT+0100 (GMT+01:00)
*/(function(t,e){(function(i,r){t.exports=i.document?r(i,i.document):function(s){return r(s,s.document)}})(typeof window<"u"?window:Hn,function(i,r){var s=typeof this<"u"?this:i,n=s.SVG=function(y){if(n.supported)return y=new n.Doc(y),n.parser.draw||n.prepare(),y};if(n.ns="http://www.w3.org/2000/svg",n.xmlns="http://www.w3.org/2000/xmlns/",n.xlink="http://www.w3.org/1999/xlink",n.svgjs="http://svgjs.com/svgjs",n.supported=function(){return!!r.createElementNS&&!!r.createElementNS(n.ns,"svg").createSVGRect}(),!n.supported)return!1;n.did=1e3,n.eid=function(y){return"Svgjs"+b(y)+n.did++},n.create=function(y){var A=r.createElementNS(this.ns,y);return A.setAttribute("id",this.eid(y)),A},n.extend=function(){var y,A,N,D;for(y=[].slice.call(arguments),A=y.pop(),D=y.length-1;D>=0;D--)if(y[D])for(N in A)y[D].prototype[N]=A[N];n.Set&&n.Set.inherit&&n.Set.inherit()},n.invent=function(y){var A=typeof y.create=="function"?y.create:function(){this.constructor.call(this,n.create(y.create))};return y.inherit&&(A.prototype=new y.inherit),y.extend&&n.extend(A,y.extend),y.construct&&n.extend(y.parent||n.Container,y.construct),A},n.adopt=function(y){if(!y)return null;if(y.instance)return y.instance;var A;return y.nodeName=="svg"?A=y.parentNode instanceof i.SVGElement?new n.Nested:new n.Doc:y.nodeName=="linearGradient"?A=new n.Gradient("linear"):y.nodeName=="radialGradient"?A=new n.Gradient("radial"):n[b(y.nodeName)]?A=new n[b(y.nodeName)]:A=new n.Element(y),A.type=y.nodeName,A.node=y,y.instance=A,A instanceof n.Doc&&A.namespace().defs(),A.setData(JSON.parse(y.getAttribute("svgjs:data"))||{}),A},n.prepare=function(){var y=r.getElementsByTagName("body")[0],A=(y?new n.Doc(y):n.adopt(r.documentElement).nested()).size(2,0);n.parser={body:y||r.documentElement,draw:A.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").attr("focusable","false").node,poly:A.polyline().node,path:A.path().node,native:n.create("svg")}},n.parser={native:n.create("svg")},r.addEventListener("DOMContentLoaded",function(){n.parser.draw||n.prepare()},!1),n.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},n.utils={map:function(y,A){var N,D=y.length,ne=[];for(N=0;N<D;N++)ne.push(A(y[N]));return ne},filter:function(y,A){var N,D=y.length,ne=[];for(N=0;N<D;N++)A(y[N])&&ne.push(y[N]);return ne},radians:function(y){return y%360*Math.PI/180},degrees:function(y){return y*180/Math.PI%360},filterSVGElements:function(y){return this.filter(y,function(A){return A instanceof i.SVGElement})}},n.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},n.Color=function(y){var A;this.r=0,this.g=0,this.b=0,y&&(typeof y=="string"?n.regex.isRgb.test(y)?(A=n.regex.rgb.exec(y.replace(n.regex.whitespace,"")),this.r=parseInt(A[1]),this.g=parseInt(A[2]),this.b=parseInt(A[3])):n.regex.isHex.test(y)&&(A=n.regex.hex.exec(_(y)),this.r=parseInt(A[1],16),this.g=parseInt(A[2],16),this.b=parseInt(A[3],16)):typeof y=="object"&&(this.r=y.r,this.g=y.g,this.b=y.b))},n.extend(n.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+S(this.r)+S(this.g)+S(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(y){return this.destination=new n.Color(y),this},at:function(y){return this.destination?(y=y<0?0:y>1?1:y,new n.Color({r:~~(this.r+(this.destination.r-this.r)*y),g:~~(this.g+(this.destination.g-this.g)*y),b:~~(this.b+(this.destination.b-this.b)*y)})):this}}),n.Color.test=function(y){return y+="",n.regex.isHex.test(y)||n.regex.isRgb.test(y)},n.Color.isRgb=function(y){return y&&typeof y.r=="number"&&typeof y.g=="number"&&typeof y.b=="number"},n.Color.isColor=function(y){return n.Color.isRgb(y)||n.Color.test(y)},n.Array=function(y,A){y=(y||[]).valueOf(),y.length==0&&A&&(y=A.valueOf()),this.value=this.parse(y)},n.extend(n.Array,{morph:function(y){if(this.destination=this.parse(y),this.value.length!=this.destination.length){for(var A=this.value[this.value.length-1],N=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(N);for(;this.value.length<this.destination.length;)this.value.push(A)}return this},settle:function(){for(var y=0,A=this.value.length,N=[];y<A;y++)N.indexOf(this.value[y])==-1&&N.push(this.value[y]);return this.value=N},at:function(y){if(!this.destination)return this;for(var A=0,N=this.value.length,D=[];A<N;A++)D.push(this.value[A]+(this.destination[A]-this.value[A])*y);return new n.Array(D)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(y){return y=y.valueOf(),Array.isArray(y)?y:this.split(y)},split:function(y){return y.trim().split(n.regex.delimiter).map(parseFloat)},reverse:function(){return this.value.reverse(),this},clone:function(){var y=new this.constructor;return y.value=f(this.value),y}}),n.PointArray=function(y,A){n.Array.call(this,y,A||[[0,0]])},n.PointArray.prototype=new n.Array,n.PointArray.prototype.constructor=n.PointArray,n.extend(n.PointArray,{toString:function(){for(var y=0,A=this.value.length,N=[];y<A;y++)N.push(this.value[y].join(","));return N.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(y){if(!this.destination)return this;for(var A=0,N=this.value.length,D=[];A<N;A++)D.push([this.value[A][0]+(this.destination[A][0]-this.value[A][0])*y,this.value[A][1]+(this.destination[A][1]-this.value[A][1])*y]);return new n.PointArray(D)},parse:function(y){var A=[];if(y=y.valueOf(),Array.isArray(y)){if(Array.isArray(y[0]))return y.map(function(ne){return ne.slice()});if(y[0].x!=null)return y.map(function(ne){return[ne.x,ne.y]})}else y=y.trim().split(n.regex.delimiter).map(parseFloat);y.length%2!==0&&y.pop();for(var N=0,D=y.length;N<D;N=N+2)A.push([y[N],y[N+1]]);return A},move:function(y,A){var N=this.bbox();if(y-=N.x,A-=N.y,!isNaN(y)&&!isNaN(A))for(var D=this.value.length-1;D>=0;D--)this.value[D]=[this.value[D][0]+y,this.value[D][1]+A];return this},size:function(y,A){var N,D=this.bbox();for(N=this.value.length-1;N>=0;N--)D.width&&(this.value[N][0]=(this.value[N][0]-D.x)*y/D.width+D.x),D.height&&(this.value[N][1]=(this.value[N][1]-D.y)*A/D.height+D.y);return this},bbox:function(){return n.parser.poly.setAttribute("points",this.toString()),n.parser.poly.getBBox()}});for(var o={M:function(y,A,N){return A.x=N.x=y[0],A.y=N.y=y[1],["M",A.x,A.y]},L:function(y,A){return A.x=y[0],A.y=y[1],["L",y[0],y[1]]},H:function(y,A){return A.x=y[0],["H",y[0]]},V:function(y,A){return A.y=y[0],["V",y[0]]},C:function(y,A){return A.x=y[4],A.y=y[5],["C",y[0],y[1],y[2],y[3],y[4],y[5]]},S:function(y,A){return A.x=y[2],A.y=y[3],["S",y[0],y[1],y[2],y[3]]},Q:function(y,A){return A.x=y[2],A.y=y[3],["Q",y[0],y[1],y[2],y[3]]},T:function(y,A){return A.x=y[0],A.y=y[1],["T",y[0],y[1]]},Z:function(y,A,N){return A.x=N.x,A.y=N.y,["Z"]},A:function(y,A){return A.x=y[5],A.y=y[6],["A",y[0],y[1],y[2],y[3],y[4],y[5],y[6]]}},a="mlhvqtcsaz".split(""),l=0,u=a.length;l<u;++l)o[a[l]]=function(y){return function(A,N,D){if(y=="H")A[0]=A[0]+N.x;else if(y=="V")A[0]=A[0]+N.y;else if(y=="A")A[5]=A[5]+N.x,A[6]=A[6]+N.y;else for(var ne=0,q=A.length;ne<q;++ne)A[ne]=A[ne]+(ne%2?N.y:N.x);return o[y](A,N,D)}}(a[l].toUpperCase());n.PathArray=function(y,A){n.Array.call(this,y,A||[["M",0,0]])},n.PathArray.prototype=new n.Array,n.PathArray.prototype.constructor=n.PathArray,n.extend(n.PathArray,{toString:function(){return L(this.value)},move:function(y,A){var N=this.bbox();if(y-=N.x,A-=N.y,!isNaN(y)&&!isNaN(A))for(var D,ne=this.value.length-1;ne>=0;ne--)D=this.value[ne][0],D=="M"||D=="L"||D=="T"?(this.value[ne][1]+=y,this.value[ne][2]+=A):D=="H"?this.value[ne][1]+=y:D=="V"?this.value[ne][1]+=A:D=="C"||D=="S"||D=="Q"?(this.value[ne][1]+=y,this.value[ne][2]+=A,this.value[ne][3]+=y,this.value[ne][4]+=A,D=="C"&&(this.value[ne][5]+=y,this.value[ne][6]+=A)):D=="A"&&(this.value[ne][6]+=y,this.value[ne][7]+=A);return this},size:function(y,A){var N,D,ne=this.bbox();for(N=this.value.length-1;N>=0;N--)D=this.value[N][0],D=="M"||D=="L"||D=="T"?(this.value[N][1]=(this.value[N][1]-ne.x)*y/ne.width+ne.x,this.value[N][2]=(this.value[N][2]-ne.y)*A/ne.height+ne.y):D=="H"?this.value[N][1]=(this.value[N][1]-ne.x)*y/ne.width+ne.x:D=="V"?this.value[N][1]=(this.value[N][1]-ne.y)*A/ne.height+ne.y:D=="C"||D=="S"||D=="Q"?(this.value[N][1]=(this.value[N][1]-ne.x)*y/ne.width+ne.x,this.value[N][2]=(this.value[N][2]-ne.y)*A/ne.height+ne.y,this.value[N][3]=(this.value[N][3]-ne.x)*y/ne.width+ne.x,this.value[N][4]=(this.value[N][4]-ne.y)*A/ne.height+ne.y,D=="C"&&(this.value[N][5]=(this.value[N][5]-ne.x)*y/ne.width+ne.x,this.value[N][6]=(this.value[N][6]-ne.y)*A/ne.height+ne.y)):D=="A"&&(this.value[N][1]=this.value[N][1]*y/ne.width,this.value[N][2]=this.value[N][2]*A/ne.height,this.value[N][6]=(this.value[N][6]-ne.x)*y/ne.width+ne.x,this.value[N][7]=(this.value[N][7]-ne.y)*A/ne.height+ne.y);return this},equalCommands:function(y){var A,N,D;for(y=new n.PathArray(y),D=this.value.length===y.value.length,A=0,N=this.value.length;D&&A<N;A++)D=this.value[A][0]===y.value[A][0];return D},morph:function(y){return y=new n.PathArray(y),this.equalCommands(y)?this.destination=y:this.destination=null,this},at:function(y){if(!this.destination)return this;var A=this.value,N=this.destination.value,D=[],ne=new n.PathArray,q,he,te,me;for(q=0,he=A.length;q<he;q++){for(D[q]=[A[q][0]],te=1,me=A[q].length;te<me;te++)D[q][te]=A[q][te]+(N[q][te]-A[q][te])*y;D[q][0]==="A"&&(D[q][4]=+(D[q][4]!=0),D[q][5]=+(D[q][5]!=0))}return ne.value=D,ne},parse:function(y){if(y instanceof n.PathArray)return y.valueOf();var A,D,N={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};typeof y=="string"?y=y.replace(n.regex.numbersWithDots,d).replace(n.regex.pathLetters," $& ").replace(n.regex.hyphen,"$1 -").trim().split(n.regex.delimiter):y=y.reduce(function(me,ve){return[].concat.call(me,ve)},[]);var D=[],ne=new n.Point,q=new n.Point,he=0,te=y.length;do n.regex.isPathLetter.test(y[he])?(A=y[he],++he):A=="M"?A="L":A=="m"&&(A="l"),D.push(o[A].call(null,y.slice(he,he=he+N[A.toUpperCase()]).map(parseFloat),ne,q));while(te>he);return D},bbox:function(){return n.parser.path.setAttribute("d",this.toString()),n.parser.path.getBBox()}}),n.Number=n.invent({create:function(y,A){this.value=0,this.unit=A||"",typeof y=="number"?this.value=isNaN(y)?0:isFinite(y)?y:y<0?-34e37:34e37:typeof y=="string"?(A=y.match(n.regex.numberAndUnit),A&&(this.value=parseFloat(A[1]),A[5]=="%"?this.value/=100:A[5]=="s"&&(this.value*=1e3),this.unit=A[5])):y instanceof n.Number&&(this.value=y.valueOf(),this.unit=y.unit)},extend:{toString:function(){return(this.unit=="%"?~~(this.value*1e8)/1e6:this.unit=="s"?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(y){return y=new n.Number(y),new n.Number(this+y,this.unit||y.unit)},minus:function(y){return y=new n.Number(y),new n.Number(this-y,this.unit||y.unit)},times:function(y){return y=new n.Number(y),new n.Number(this*y,this.unit||y.unit)},divide:function(y){return y=new n.Number(y),new n.Number(this/y,this.unit||y.unit)},to:function(y){var A=new n.Number(this);return typeof y=="string"&&(A.unit=y),A},morph:function(y){return this.destination=new n.Number(y),y.relative&&(this.destination.value+=this.value),this},at:function(y){return this.destination?new n.Number(this.destination).minus(this).times(y).plus(this):this}}}),n.Element=n.invent({create:function(y){this._stroke=n.defaults.attrs.stroke,this._event=null,this._events={},this.dom={},(this.node=y)&&(this.type=y.nodeName,this.node.instance=this,this._events=y._events||{},this._stroke=y.getAttribute("stroke")||this._stroke)},extend:{x:function(y){return this.attr("x",y)},y:function(y){return this.attr("y",y)},cx:function(y){return y==null?this.x()+this.width()/2:this.x(y-this.width()/2)},cy:function(y){return y==null?this.y()+this.height()/2:this.y(y-this.height()/2)},move:function(y,A){return this.x(y).y(A)},center:function(y,A){return this.cx(y).cy(A)},width:function(y){return this.attr("width",y)},height:function(y){return this.attr("height",y)},size:function(y,A){var N=M(this,y,A);return this.width(new n.Number(N.width)).height(new n.Number(N.height))},clone:function(y){this.writeDataToDom();var A=B(this.node.cloneNode(!0));return y?y.add(A):this.after(A),A},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(y){return this.after(y).remove(),y},addTo:function(y){return y.put(this)},putIn:function(y){return y.add(this)},id:function(y){return this.attr("id",y)},inside:function(y,A){var N=this.bbox();return y>N.x&&A>N.y&&y<N.x+N.width&&A<N.y+N.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return this.style("display")!="none"},toString:function(){return this.attr("id")},classes:function(){var y=this.attr("class");return y==null?[]:y.trim().split(n.regex.delimiter)},hasClass:function(y){return this.classes().indexOf(y)!=-1},addClass:function(y){if(!this.hasClass(y)){var A=this.classes();A.push(y),this.attr("class",A.join(" "))}return this},removeClass:function(y){return this.hasClass(y)&&this.attr("class",this.classes().filter(function(A){return A!=y}).join(" ")),this},toggleClass:function(y){return this.hasClass(y)?this.removeClass(y):this.addClass(y)},reference:function(y){return n.get(this.attr(y))},parent:function(y){var A=this;if(!A.node.parentNode)return null;if(A=n.adopt(A.node.parentNode),!y)return A;for(;A&&A.node instanceof i.SVGElement;){if(typeof y=="string"?A.matches(y):A instanceof y)return A;if(!A.node.parentNode||A.node.parentNode.nodeName=="#document"||A.node.parentNode.nodeName=="#document-fragment")return null;A=n.adopt(A.node.parentNode)}},doc:function(){return this instanceof n.Doc?this:this.parent(n.Doc)},parents:function(y){var A=[],N=this;do{if(N=N.parent(y),!N||!N.node)break;A.push(N)}while(N.parent);return A},matches:function(y){return g(this.node,y)},native:function(){return this.node},svg:function(y){var A=r.createElement("svg");if(y&&this instanceof n.Parent){A.innerHTML="<svg>"+y.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var N=0,D=A.firstChild.childNodes.length;N<D;N++)this.node.appendChild(A.firstChild.firstChild)}else return A.appendChild(y=r.createElement("svg")),this.writeDataToDom(),y.appendChild(this.node.cloneNode(!0)),A.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");return this},writeDataToDom:function(){if(this.each||this.lines){var y=this.each?this:this.lines();y.each(function(){this.writeDataToDom()})}return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(y){return this.dom=y,this},is:function(y){return m(this,y)}}}),n.easing={"-":function(y){return y},"<>":function(y){return-Math.cos(y*Math.PI)/2+.5},">":function(y){return Math.sin(y*Math.PI/2)},"<":function(y){return-Math.cos(y*Math.PI/2)+1}},n.morph=function(y){return function(A,N){return new n.MorphObj(A,N).at(y)}},n.Situation=n.invent({create:function(y){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new n.Number(y.duration).valueOf(),this.delay=new n.Number(y.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=y.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),n.FX=n.invent({create:function(y){this._target=y,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(y,A,N){typeof y=="object"&&(A=y.ease,N=y.delay,y=y.duration);var D=new n.Situation({duration:y||1e3,delay:N||0,ease:n.easing[A||"-"]||A});return this.queue(D),this},delay:function(y){var A=new n.Situation({duration:y,delay:0,ease:n.easing["-"]});return this.queue(A)},target:function(y){return y&&y instanceof n.Element?(this._target=y,this):this._target},timeToAbsPos:function(y){return(y-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(y){return this.situation.duration/this._speed*y+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=i.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){i.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(y){return(typeof y=="function"||y instanceof n.Situation)&&this.situations.push(y),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof n.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var y,A,N,D=this.situation;if(D.init)return this;for(y in D.animations)for(N=this.target()[y](),Array.isArray(N)||(N=[N]),Array.isArray(D.animations[y])||(D.animations[y]=[D.animations[y]]),A=N.length;A--;)D.animations[y][A]instanceof n.Number&&(N[A]=new n.Number(N[A])),D.animations[y][A]=N[A].morph(D.animations[y][A]);for(y in D.attrs)D.attrs[y]=new n.MorphObj(this.target().attr(y),D.attrs[y]);for(y in D.styles)D.styles[y]=new n.MorphObj(this.target().style(y),D.styles[y]);return D.initialTransformation=this.target().matrixify(),D.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(y,A){var N=this.active;return this.active=!1,A&&this.clearQueue(),y&&this.situation&&(!N&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var y=this.situation;this.stop(),this.situation=y,this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return this.situation.loops===!0&&(this.situation.loops=this.situation.loop+1),typeof this.situation.loops=="number"?this.at(this.situation.loops,!0):this.at(1,!0)},at:function(y,A){var N=this.situation.duration/this._speed;return this.absPos=y,A||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+new Date-this.absPos*N,this.situation.finish=this.situation.start+N,this.step(!0)},speed:function(y){return y===0?this.pause():y?(this._speed=y,this.at(this.absPos,!0)):this._speed},loop:function(y,A){var N=this.last();return N.loops=y??!0,N.loop=0,A&&(N.reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(y){var A=this.last();return typeof y>"u"?A.reversed=!A.reversed:A.reversed=y,this},progress:function(y){return y?this.situation.ease(this.pos):this.pos},after:function(y){var A=this.last(),N=function D(ne){ne.detail.situation==A&&(y.call(this,A),this.off("finished.fx",D))};return this.target().on("finished.fx",N),this._callStart()},during:function(y){var A=this.last(),N=function(D){D.detail.situation==A&&y.call(this,D.detail.pos,n.morph(D.detail.pos),D.detail.eased,A)};return this.target().off("during.fx",N).on("during.fx",N),this.after(function(){this.off("during.fx",N)}),this._callStart()},afterAll:function(y){var A=function N(D){y.call(this),this.off("allfinished.fx",N)};return this.target().off("allfinished.fx",A).on("allfinished.fx",A),this._callStart()},duringAll:function(y){var A=function(N){y.call(this,N.detail.pos,n.morph(N.detail.pos),N.detail.eased,N.detail.situation)};return this.target().off("during.fx",A).on("during.fx",A),this.afterAll(function(){this.off("during.fx",A)}),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(y,A,N){return this.last()[N||"animations"][y]=A,this._callStart()},step:function(y){if(y||(this.absPos=this.timeToAbsPos(+new Date)),this.situation.loops!==!1){var A,N,D;A=Math.max(this.absPos,0),N=Math.floor(A),this.situation.loops===!0||N<this.situation.loops?(this.pos=A-N,D=this.situation.loop,this.situation.loop=N):(this.absPos=this.situation.loops,this.pos=1,D=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=!!((this.situation.loop-D)%2))}else this.absPos=Math.min(this.absPos,1),this.pos=this.absPos;this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var ne=this.situation.ease(this.pos);for(var q in this.situation.once)q>this.lastPos&&q<=ne&&(this.situation.once[q].call(this.target(),this.pos,ne),delete this.situation.once[q]);return this.active&&this.target().fire("during",{pos:this.pos,eased:ne,fx:this,situation:this.situation}),this.situation?(this.eachAt(),this.pos==1&&!this.situation.reversed||this.situation.reversed&&this.pos==0?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=ne,this):this},eachAt:function(){var y,A,N,D=this,ne=this.target(),q=this.situation;for(y in q.animations)N=[].concat(q.animations[y]).map(function(te){return typeof te!="string"&&te.at?te.at(q.ease(D.pos),D.pos):te}),ne[y].apply(ne,N);for(y in q.attrs)N=[y].concat(q.attrs[y]).map(function(te){return typeof te!="string"&&te.at?te.at(q.ease(D.pos),D.pos):te}),ne.attr.apply(ne,N);for(y in q.styles)N=[y].concat(q.styles[y]).map(function(te){return typeof te!="string"&&te.at?te.at(q.ease(D.pos),D.pos):te}),ne.style.apply(ne,N);if(q.transforms.length){for(N=q.initialTransformation,y=0,A=q.transforms.length;y<A;y++){var he=q.transforms[y];if(he instanceof n.Matrix){he.relative?N=N.multiply(new n.Matrix().morph(he).at(q.ease(this.pos))):N=N.morph(he).at(q.ease(this.pos));continue}he.relative||he.undo(N.extract()),N=N.multiply(he.at(q.ease(this.pos)))}ne.matrix(N)}return this},once:function(y,A,N){var D=this.last();return N||(y=D.ease(y)),D.once[y]=A,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:n.Element,construct:{animate:function(y,A,N){return(this.fx||(this.fx=new n.FX(this))).animate(y,A,N)},delay:function(y){return(this.fx||(this.fx=new n.FX(this))).delay(y)},stop:function(y,A){return this.fx&&this.fx.stop(y,A),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this},speed:function(y){if(this.fx){if(y==null)return this.fx.speed();this.fx.speed(y)}return this}}}),n.MorphObj=n.invent({create:function(y,A){if(n.Color.isColor(A))return new n.Color(y).morph(A);if(n.regex.delimiter.test(y))return n.regex.pathLetters.test(y)?new n.PathArray(y).morph(A):new n.Array(y).morph(A);if(n.regex.numberAndUnit.test(A))return new n.Number(y).morph(A);this.value=y,this.destination=A},extend:{at:function(y,A){return A<1?this.value:this.destination},valueOf:function(){return this.value}}}),n.extend(n.FX,{attr:function(y,A,N){if(typeof y=="object")for(var D in y)this.attr(D,y[D]);else this.add(y,A,"attrs");return this},style:function(y,A){if(typeof y=="object")for(var N in y)this.style(N,y[N]);else this.add(y,A,"styles");return this},x:function(y,A){if(this.target()instanceof n.G)return this.transform({x:y},A),this;var N=new n.Number(y);return N.relative=A,this.add("x",N)},y:function(y,A){if(this.target()instanceof n.G)return this.transform({y},A),this;var N=new n.Number(y);return N.relative=A,this.add("y",N)},cx:function(y){return this.add("cx",new n.Number(y))},cy:function(y){return this.add("cy",new n.Number(y))},move:function(y,A){return this.x(y).y(A)},center:function(y,A){return this.cx(y).cy(A)},size:function(y,A){if(this.target()instanceof n.Text)this.attr("font-size",y);else{var N;(!y||!A)&&(N=this.target().bbox()),y||(y=N.width/N.height*A),A||(A=N.height/N.width*y),this.add("width",new n.Number(y)).add("height",new n.Number(A))}return this},width:function(y){return this.add("width",new n.Number(y))},height:function(y){return this.add("height",new n.Number(y))},plot:function(y,A,N,D){return arguments.length==4?this.plot([y,A,N,D]):this.add("plot",new(this.target()).morphArray(y))},leading:function(y){return this.target().leading?this.add("leading",new n.Number(y)):this},viewbox:function(y,A,N,D){return this.target()instanceof n.Container&&this.add("viewbox",new n.ViewBox(y,A,N,D)),this},update:function(y){if(this.target()instanceof n.Stop){if(typeof y=="number"||y instanceof n.Number)return this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]});y.opacity!=null&&this.attr("stop-opacity",y.opacity),y.color!=null&&this.attr("stop-color",y.color),y.offset!=null&&this.attr("offset",y.offset)}return this}}),n.Box=n.invent({create:function(y,A,N,D){if(typeof y=="object"&&!(y instanceof n.Element))return n.Box.call(this,y.left!=null?y.left:y.x,y.top!=null?y.top:y.y,y.width,y.height);arguments.length==4&&(this.x=y,this.y=A,this.width=N,this.height=D),z(this)},extend:{merge:function(y){var A=new this.constructor;return A.x=Math.min(this.x,y.x),A.y=Math.min(this.y,y.y),A.width=Math.max(this.x+this.width,y.x+y.width)-A.x,A.height=Math.max(this.y+this.height,y.y+y.height)-A.y,z(A)},transform:function(y){var A=1/0,N=-1/0,D=1/0,ne=-1/0,q,he=[new n.Point(this.x,this.y),new n.Point(this.x2,this.y),new n.Point(this.x,this.y2),new n.Point(this.x2,this.y2)];return he.forEach(function(te){te=te.transform(y),A=Math.min(A,te.x),N=Math.max(N,te.x),D=Math.min(D,te.y),ne=Math.max(ne,te.y)}),q=new this.constructor,q.x=A,q.width=N-A,q.y=D,q.height=ne-D,z(q),q}}}),n.BBox=n.invent({create:function(y){if(n.Box.apply(this,[].slice.call(arguments)),y instanceof n.Element){var A;try{if(r.documentElement.contains){if(!r.documentElement.contains(y.node))throw new Exception("Element not in the dom")}else{for(var N=y.node;N.parentNode;)N=N.parentNode;if(N!=r)throw new Exception("Element not in the dom")}A=y.node.getBBox()}catch{if(y instanceof n.Shape){var D=y.clone(n.parser.draw.instance).show();A=D.node.getBBox(),D.remove()}else A={x:y.node.clientLeft,y:y.node.clientTop,width:y.node.clientWidth,height:y.node.clientHeight}}n.Box.call(this,A)}},inherit:n.Box,parent:n.Element,construct:{bbox:function(){return new n.BBox(this)}}}),n.BBox.prototype.constructor=n.BBox,n.extend(n.Element,{tbox:function(){return console.warn("Use of TBox is deprecated and mapped to RBox. Use .rbox() instead."),this.rbox(this.doc())}}),n.RBox=n.invent({create:function(y){n.Box.apply(this,[].slice.call(arguments)),y instanceof n.Element&&n.Box.call(this,y.node.getBoundingClientRect())},inherit:n.Box,parent:n.Element,extend:{addOffset:function(){return this.x+=i.pageXOffset,this.y+=i.pageYOffset,this}},construct:{rbox:function(y){return y?new n.RBox(this).transform(y.screenCTM().inverse()):new n.RBox(this).addOffset()}}}),n.RBox.prototype.constructor=n.RBox,n.Matrix=n.invent({create:function(y){var A,N=T([1,0,0,1,0,0]);for(y=y instanceof n.Element?y.matrixify():typeof y=="string"?T(y.split(n.regex.delimiter).map(parseFloat)):arguments.length==6?T([].slice.call(arguments)):Array.isArray(y)?T(y):typeof y=="object"?y:N,A=K.length-1;A>=0;--A)this[K[A]]=y[K[A]]!=null?y[K[A]]:N[K[A]]},extend:{extract:function(){var y=x(this,0,1),A=x(this,1,0),N=180/Math.PI*Math.atan2(y.y,y.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(N*Math.PI/180)+this.f*Math.sin(N*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(N*Math.PI/180)+this.e*Math.sin(-N*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-N,skewY:180/Math.PI*Math.atan2(A.y,A.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:N,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new n.Matrix(this)}},clone:function(){return new n.Matrix(this)},morph:function(y){return this.destination=new n.Matrix(y),this},at:function(y){if(!this.destination)return this;var A=new n.Matrix({a:this.a+(this.destination.a-this.a)*y,b:this.b+(this.destination.b-this.b)*y,c:this.c+(this.destination.c-this.c)*y,d:this.d+(this.destination.d-this.d)*y,e:this.e+(this.destination.e-this.e)*y,f:this.f+(this.destination.f-this.f)*y});return A},multiply:function(y){return new n.Matrix(this.native().multiply(I(y).native()))},inverse:function(){return new n.Matrix(this.native().inverse())},translate:function(y,A){return new n.Matrix(this.native().translate(y||0,A||0))},scale:function(y,A,N,D){return arguments.length==1?A=y:arguments.length==3&&(D=N,N=A,A=y),this.around(N,D,new n.Matrix(y,0,0,A,0,0))},rotate:function(y,A,N){return y=n.utils.radians(y),this.around(A,N,new n.Matrix(Math.cos(y),Math.sin(y),-Math.sin(y),Math.cos(y),0,0))},flip:function(y,A){return y=="x"?this.scale(-1,1,A,0):y=="y"?this.scale(1,-1,0,A):this.scale(-1,-1,y,A??y)},skew:function(y,A,N,D){return arguments.length==1?A=y:arguments.length==3&&(D=N,N=A,A=y),y=n.utils.radians(y),A=n.utils.radians(A),this.around(N,D,new n.Matrix(1,Math.tan(A),Math.tan(y),1,0,0))},skewX:function(y,A,N){return this.skew(y,0,A,N)},skewY:function(y,A,N){return this.skew(0,y,A,N)},around:function(y,A,N){return this.multiply(new n.Matrix(1,0,0,1,y||0,A||0)).multiply(N).multiply(new n.Matrix(1,0,0,1,-y||0,-A||0))},native:function(){for(var y=n.parser.native.createSVGMatrix(),A=K.length-1;A>=0;A--)y[K[A]]=this[K[A]];return y},toString:function(){return"matrix("+J(this.a)+","+J(this.b)+","+J(this.c)+","+J(this.d)+","+J(this.e)+","+J(this.f)+")"}},parent:n.Element,construct:{ctm:function(){return new n.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof n.Nested){var y=this.rect(1,1),A=y.node.getScreenCTM();return y.remove(),new n.Matrix(A)}return new n.Matrix(this.node.getScreenCTM())}}}),n.Point=n.invent({create:function(y,A){var N,D={x:0,y:0};N=Array.isArray(y)?{x:y[0],y:y[1]}:typeof y=="object"?{x:y.x,y:y.y}:y!=null?{x:y,y:A??y}:D,this.x=N.x,this.y=N.y},extend:{clone:function(){return new n.Point(this)},morph:function(y,A){return this.destination=new n.Point(y,A),this},at:function(y){if(!this.destination)return this;var A=new n.Point({x:this.x+(this.destination.x-this.x)*y,y:this.y+(this.destination.y-this.y)*y});return A},native:function(){var y=n.parser.native.createSVGPoint();return y.x=this.x,y.y=this.y,y},transform:function(y){return new n.Point(this.native().matrixTransform(y.native()))}}}),n.extend(n.Element,{point:function(y,A){return new n.Point(y,A).transform(this.screenCTM().inverse())}}),n.extend(n.Element,{attr:function(y,A,N){if(y==null){for(y={},A=this.node.attributes,N=A.length-1;N>=0;N--)y[A[N].nodeName]=n.regex.isNumber.test(A[N].nodeValue)?parseFloat(A[N].nodeValue):A[N].nodeValue;return y}else if(typeof y=="object")for(A in y)this.attr(A,y[A]);else if(A===null)this.node.removeAttribute(y);else{if(A==null)return A=this.node.getAttribute(y),A==null?n.defaults.attrs[y]:n.regex.isNumber.test(A)?parseFloat(A):A;y=="stroke-width"?this.attr("stroke",parseFloat(A)>0?this._stroke:null):y=="stroke"&&(this._stroke=A),(y=="fill"||y=="stroke")&&(n.regex.isImage.test(A)&&(A=this.doc().defs().image(A,0,0)),A instanceof n.Image&&(A=this.doc().defs().pattern(0,0,function(){this.add(A)}))),typeof A=="number"?A=new n.Number(A):n.Color.isColor(A)?A=new n.Color(A):Array.isArray(A)&&(A=new n.Array(A)),y=="leading"?this.leading&&this.leading(A):typeof N=="string"?this.node.setAttributeNS(N,y,A.toString()):this.node.setAttribute(y,A.toString()),this.rebuild&&(y=="font-size"||y=="x")&&this.rebuild(y,A)}return this}}),n.extend(n.Element,{transform:function(y,A){var N=this,D,ne;if(typeof y!="object")return D=new n.Matrix(N).extract(),typeof y=="string"?D[y]:D;if(D=new n.Matrix(N),A=!!A||!!y.relative,y.a!=null)D=A?D.multiply(new n.Matrix(y)):new n.Matrix(y);else if(y.rotation!=null)$(y,N),D=A?D.rotate(y.rotation,y.cx,y.cy):D.rotate(y.rotation-D.extract().rotation,y.cx,y.cy);else if(y.scale!=null||y.scaleX!=null||y.scaleY!=null){if($(y,N),y.scaleX=y.scale!=null?y.scale:y.scaleX!=null?y.scaleX:1,y.scaleY=y.scale!=null?y.scale:y.scaleY!=null?y.scaleY:1,!A){var q=D.extract();y.scaleX=y.scaleX*1/q.scaleX,y.scaleY=y.scaleY*1/q.scaleY}D=D.scale(y.scaleX,y.scaleY,y.cx,y.cy)}else if(y.skew!=null||y.skewX!=null||y.skewY!=null){if($(y,N),y.skewX=y.skew!=null?y.skew:y.skewX!=null?y.skewX:0,y.skewY=y.skew!=null?y.skew:y.skewY!=null?y.skewY:0,!A){var q=D.extract();D=D.multiply(new n.Matrix().skew(q.skewX,q.skewY,y.cx,y.cy).inverse())}D=D.skew(y.skewX,y.skewY,y.cx,y.cy)}else y.flip?(y.flip=="x"||y.flip=="y"?y.offset=y.offset==null?N.bbox()["c"+y.flip]:y.offset:y.offset==null?(ne=N.bbox(),y.flip=ne.cx,y.offset=ne.cy):y.flip=y.offset,D=new n.Matrix().flip(y.flip,y.offset)):(y.x!=null||y.y!=null)&&(A?D=D.translate(y.x,y.y):(y.x!=null&&(D.e=y.x),y.y!=null&&(D.f=y.y)));return this.attr("transform",D)}}),n.extend(n.FX,{transform:function(y,A){var N=this.target(),D,ne;return typeof y!="object"?(D=new n.Matrix(N).extract(),typeof y=="string"?D[y]:D):(A=!!A||!!y.relative,y.a!=null?D=new n.Matrix(y):y.rotation!=null?($(y,N),D=new n.Rotate(y.rotation,y.cx,y.cy)):y.scale!=null||y.scaleX!=null||y.scaleY!=null?($(y,N),y.scaleX=y.scale!=null?y.scale:y.scaleX!=null?y.scaleX:1,y.scaleY=y.scale!=null?y.scale:y.scaleY!=null?y.scaleY:1,D=new n.Scale(y.scaleX,y.scaleY,y.cx,y.cy)):y.skewX!=null||y.skewY!=null?($(y,N),y.skewX=y.skewX!=null?y.skewX:0,y.skewY=y.skewY!=null?y.skewY:0,D=new n.Skew(y.skewX,y.skewY,y.cx,y.cy)):y.flip?(y.flip=="x"||y.flip=="y"?y.offset=y.offset==null?N.bbox()["c"+y.flip]:y.offset:y.offset==null?(ne=N.bbox(),y.flip=ne.cx,y.offset=ne.cy):y.flip=y.offset,D=new n.Matrix().flip(y.flip,y.offset)):(y.x!=null||y.y!=null)&&(D=new n.Translate(y.x,y.y)),D?(D.relative=A,this.last().transforms.push(D),this._callStart()):this)}}),n.extend(n.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){var y=(this.attr("transform")||"").split(n.regex.transforms).slice(0,-1).map(function(A){var N=A.trim().split("(");return[N[0],N[1].split(n.regex.delimiter).map(function(D){return parseFloat(D)})]}).reduce(function(A,N){return N[0]=="matrix"?A.multiply(T(N[1])):A[N[0]].apply(A,N[1])},new n.Matrix);return y},toParent:function(y){if(this==y)return this;var A=this.screenCTM(),N=y.screenCTM().inverse();return this.addTo(y).untransform().transform(N.multiply(A)),this},toDoc:function(){return this.toParent(this.doc())}}),n.Transformation=n.invent({create:function(y,A){if(arguments.length>1&&typeof A!="boolean")return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(y))for(var N=0,D=this.arguments.length;N<D;++N)this[this.arguments[N]]=y[N];else if(typeof y=="object")for(var N=0,D=this.arguments.length;N<D;++N)this[this.arguments[N]]=y[this.arguments[N]];this.inversed=!1,A===!0&&(this.inversed=!0)},extend:{arguments:[],method:"",at:function(y){for(var A=[],N=0,D=this.arguments.length;N<D;++N)A.push(this[this.arguments[N]]);var ne=this._undo||new n.Matrix;return ne=new n.Matrix().morph(n.Matrix.prototype[this.method].apply(ne,A)).at(y),this.inversed?ne.inverse():ne},undo:function(y){for(var A=0,N=this.arguments.length;A<N;++A)y[this.arguments[A]]=typeof this[this.arguments[A]]>"u"?0:y[this.arguments[A]];return y.cx=this.cx,y.cy=this.cy,this._undo=new n[b(this.method)](y,!0).at(1),this}}}),n.Translate=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(y,A){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),n.Rotate=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(y,A){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(y){var A=new n.Matrix().rotate(new n.Number().morph(this.rotation-(this._undo?this._undo.rotation:0)).at(y),this.cx,this.cy);return this.inversed?A.inverse():A},undo:function(y){return this._undo=y,this}}}),n.Scale=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(y,A){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}}),n.Skew=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(y,A){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}}),n.extend(n.Element,{style:function(y,A){if(arguments.length==0)return this.node.style.cssText||"";if(arguments.length<2)if(typeof y=="object")for(A in y)this.style(A,y[A]);else if(n.regex.isCss.test(y))for(y=y.split(/\s*;\s*/).filter(function(N){return!!N}).map(function(N){return N.split(/\s*:\s*/)});A=y.pop();)this.style(A[0],A[1]);else return this.node.style[v(y)];else this.node.style[v(y)]=A===null||n.regex.isBlank.test(A)?"":A;return this}}),n.Parent=n.invent({create:function(y){this.constructor.call(this,y)},inherit:n.Element,extend:{children:function(){return n.utils.map(n.utils.filterSVGElements(this.node.childNodes),function(y){return n.adopt(y)})},add:function(y,A){return A==null?this.node.appendChild(y.node):y.node!=this.node.childNodes[A]&&this.node.insertBefore(y.node,this.node.childNodes[A]),this},put:function(y,A){return this.add(y,A),y},has:function(y){return this.index(y)>=0},index:function(y){return[].slice.call(this.node.childNodes).indexOf(y.node)},get:function(y){return n.adopt(this.node.childNodes[y])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(y,A){var N,D,ne=this.children();for(N=0,D=ne.length;N<D;N++)ne[N]instanceof n.Element&&y.apply(ne[N],[N,ne]),A&&ne[N]instanceof n.Container&&ne[N].each(y,A);return this},removeElement:function(y){return this.node.removeChild(y.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),n.extend(n.Parent,{ungroup:function(y,A){return A===0||this instanceof n.Defs||this.node==n.parser.draw?this:(y=y||(this instanceof n.Doc?this:this.parent(n.Parent)),A=A||1/0,this.each(function(){return this instanceof n.Defs?this:this instanceof n.Parent?this.ungroup(y,A-1):this.toParent(y)}),this.node.firstChild||this.remove(),this)},flatten:function(y,A){return this.ungroup(y,A)}}),n.Container=n.invent({create:function(y){this.constructor.call(this,y)},inherit:n.Parent}),n.ViewBox=n.invent({create:function(y){var A=[0,0,0,0],N,D,ne,q,he,te,me,ve=1,_e=1,Se=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(y instanceof n.Element){for(te=y,me=y,he=(y.attr("viewBox")||"").match(Se),y.bbox,ne=new n.Number(y.width()),q=new n.Number(y.height());ne.unit=="%";)ve*=ne.value,ne=new n.Number(te instanceof n.Doc?te.parent().offsetWidth:te.parent().width()),te=te.parent();for(;q.unit=="%";)_e*=q.value,q=new n.Number(me instanceof n.Doc?me.parent().offsetHeight:me.parent().height()),me=me.parent();this.x=0,this.y=0,this.width=ne*ve,this.height=q*_e,this.zoom=1,he&&(N=parseFloat(he[0]),D=parseFloat(he[1]),ne=parseFloat(he[2]),q=parseFloat(he[3]),this.zoom=this.width/this.height>ne/q?this.height/q:this.width/ne,this.x=N,this.y=D,this.width=ne,this.height=q)}else y=typeof y=="string"?y.match(Se).map(function(Oe){return parseFloat(Oe)}):Array.isArray(y)?y:typeof y=="object"?[y.x,y.y,y.width,y.height]:arguments.length==4?[].slice.call(arguments):A,this.x=y[0],this.y=y[1],this.width=y[2],this.height=y[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(y,A,N,D){return this.destination=new n.ViewBox(y,A,N,D),this},at:function(y){return this.destination?new n.ViewBox([this.x+(this.destination.x-this.x)*y,this.y+(this.destination.y-this.y)*y,this.width+(this.destination.width-this.width)*y,this.height+(this.destination.height-this.height)*y]):this}},parent:n.Container,construct:{viewbox:function(y,A,N,D){return arguments.length==0?new n.ViewBox(this):this.attr("viewBox",new n.ViewBox(y,A,N,D))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(y){n.Element.prototype[y]=function(A){return A==null?n.off(this,y):n.on(this,y,A),this}}),n.listenerId=0,n.on=function(y,A,N,D,ne){var q=N.bind(D||y),he=y instanceof n.Element?y.node:y;he.instance=he.instance||{_events:{}};var te=he.instance._events;N._svgjsListenerId||(N._svgjsListenerId=++n.listenerId),A.split(n.regex.delimiter).forEach(function(me){var ve=me.split(".")[0],_e=me.split(".")[1]||"*";te[ve]=te[ve]||{},te[ve][_e]=te[ve][_e]||{},te[ve][_e][N._svgjsListenerId]=q,he.addEventListener(ve,q,ne||!1)})},n.off=function(y,A,N,D){var ne=y instanceof n.Element?y.node:y;if(ne.instance&&!(typeof N=="function"&&(N=N._svgjsListenerId,!N))){var q=ne.instance._events;(A||"").split(n.regex.delimiter).forEach(function(he){var te=he&&he.split(".")[0],me=he&&he.split(".")[1],ve,_e;if(N)q[te]&&q[te][me||"*"]&&(ne.removeEventListener(te,q[te][me||"*"][N],D||!1),delete q[te][me||"*"][N]);else if(te&&me){if(q[te]&&q[te][me]){for(_e in q[te][me])n.off(ne,[te,me].join("."),_e);delete q[te][me]}}else if(me)for(he in q)for(ve in q[he])me===ve&&n.off(ne,[he,me].join("."));else if(te){if(q[te]){for(ve in q[te])n.off(ne,[te,ve].join("."));delete q[te]}}else{for(he in q)n.off(ne,he);ne.instance._events={}}})}},n.extend(n.Element,{on:function(y,A,N,D){return n.on(this,y,A,N,D),this},off:function(y,A){return n.off(this.node,y,A),this},fire:function(y,A){return y instanceof i.Event?this.node.dispatchEvent(y):this.node.dispatchEvent(y=new n.CustomEvent(y,{detail:A,cancelable:!0})),this._event=y,this},event:function(){return this._event}}),n.Defs=n.invent({create:"defs",inherit:n.Container}),n.G=n.invent({create:"g",inherit:n.Container,extend:{x:function(y){return y==null?this.transform("x"):this.transform({x:y-this.x()},!0)},y:function(y){return y==null?this.transform("y"):this.transform({y:y-this.y()},!0)},cx:function(y){return y==null?this.gbox().cx:this.x(y-this.gbox().width/2)},cy:function(y){return y==null?this.gbox().cy:this.y(y-this.gbox().height/2)},gbox:function(){var y=this.bbox(),A=this.transform();return y.x+=A.x,y.x2+=A.x,y.cx+=A.x,y.y+=A.y,y.y2+=A.y,y.cy+=A.y,y}},construct:{group:function(){return this.put(new n.G)}}}),n.Doc=n.invent({create:function(y){y&&(y=typeof y=="string"?r.getElementById(y):y,y.nodeName=="svg"?this.constructor.call(this,y):(this.constructor.call(this,n.create("svg")),y.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:n.Container,extend:{namespace:function(){return this.attr({xmlns:n.ns,version:"1.1"}).attr("xmlns:xlink",n.xlink,n.xmlns).attr("xmlns:svgjs",n.svgjs,n.xmlns)},defs:function(){if(!this._defs){var y;(y=this.node.getElementsByTagName("defs")[0])?this._defs=n.adopt(y):this._defs=new n.Defs,this.node.appendChild(this._defs.node)}return this._defs},parent:function(){return!this.node.parentNode||this.node.parentNode.nodeName=="#document"||this.node.parentNode.nodeName=="#document-fragment"?null:this.node.parentNode},spof:function(){var y=this.node.getScreenCTM();return y&&this.style("left",-y.e%1+"px").style("top",-y.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,n.parser.draw.parentNode||this.node.appendChild(n.parser.draw),this},clone:function(y){this.writeDataToDom();var A=this.node,N=B(A.cloneNode(!0));return y?(y.node||y).appendChild(N.node):A.parentNode.insertBefore(N.node,A.nextSibling),N}}}),n.extend(n.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var y=this.position()+1,A=this.parent();return A.removeElement(this).add(this,y),A instanceof n.Doc&&A.node.appendChild(A.defs().node),this},backward:function(){var y=this.position();return y>0&&this.parent().removeElement(this).add(this,y-1),this},front:function(){var y=this.parent();return y.node.appendChild(this.node),y instanceof n.Doc&&y.node.appendChild(y.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(y){y.remove();var A=this.position();return this.parent().add(y,A),this},after:function(y){y.remove();var A=this.position();return this.parent().add(y,A+1),this}}),n.Mask=n.invent({create:function(){this.constructor.call(this,n.create("mask")),this.targets=[]},inherit:n.Container,extend:{remove:function(){for(var y=this.targets.length-1;y>=0;y--)this.targets[y]&&this.targets[y].unmask();return this.targets=[],n.Element.prototype.remove.call(this),this}},construct:{mask:function(){return this.defs().put(new n.Mask)}}}),n.extend(n.Element,{maskWith:function(y){return this.masker=y instanceof n.Mask?y:this.parent().mask().add(y),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),n.ClipPath=n.invent({create:function(){this.constructor.call(this,n.create("clipPath")),this.targets=[]},inherit:n.Container,extend:{remove:function(){for(var y=this.targets.length-1;y>=0;y--)this.targets[y]&&this.targets[y].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new n.ClipPath)}}}),n.extend(n.Element,{clipWith:function(y){return this.clipper=y instanceof n.ClipPath?y:this.parent().clip().add(y),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),n.Gradient=n.invent({create:function(y){this.constructor.call(this,n.create(y+"Gradient")),this.type=y},inherit:n.Container,extend:{at:function(y,A,N){return this.put(new n.Stop).update(y,A,N)},update:function(y){return this.clear(),typeof y=="function"&&y.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(y,A,N){return y=="transform"&&(y="gradientTransform"),n.Container.prototype.attr.call(this,y,A,N)}},construct:{gradient:function(y,A){return this.defs().gradient(y,A)}}}),n.extend(n.Gradient,n.FX,{from:function(y,A){return(this._target||this).type=="radial"?this.attr({fx:new n.Number(y),fy:new n.Number(A)}):this.attr({x1:new n.Number(y),y1:new n.Number(A)})},to:function(y,A){return(this._target||this).type=="radial"?this.attr({cx:new n.Number(y),cy:new n.Number(A)}):this.attr({x2:new n.Number(y),y2:new n.Number(A)})}}),n.extend(n.Defs,{gradient:function(y,A){return this.put(new n.Gradient(y)).update(A)}}),n.Stop=n.invent({create:"stop",inherit:n.Element,extend:{update:function(y){return(typeof y=="number"||y instanceof n.Number)&&(y={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),y.opacity!=null&&this.attr("stop-opacity",y.opacity),y.color!=null&&this.attr("stop-color",y.color),y.offset!=null&&this.attr("offset",new n.Number(y.offset)),this}}}),n.Pattern=n.invent({create:"pattern",inherit:n.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(y){return this.clear(),typeof y=="function"&&y.call(this,this),this},toString:function(){return this.fill()},attr:function(y,A,N){return y=="transform"&&(y="patternTransform"),n.Container.prototype.attr.call(this,y,A,N)}},construct:{pattern:function(y,A,N){return this.defs().pattern(y,A,N)}}}),n.extend(n.Defs,{pattern:function(y,A,N){return this.put(new n.Pattern).update(N).attr({x:0,y:0,width:y,height:A,patternUnits:"userSpaceOnUse"})}}),n.Shape=n.invent({create:function(y){this.constructor.call(this,y)},inherit:n.Element}),n.Bare=n.invent({create:function(y,A){if(this.constructor.call(this,n.create(y)),A)for(var N in A.prototype)typeof A.prototype[N]=="function"&&(this[N]=A.prototype[N])},inherit:n.Element,extend:{words:function(y){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(r.createTextNode(y)),this}}}),n.extend(n.Parent,{element:function(y,A){return this.put(new n.Bare(y,A))}}),n.Symbol=n.invent({create:"symbol",inherit:n.Container,construct:{symbol:function(){return this.put(new n.Symbol)}}}),n.Use=n.invent({create:"use",inherit:n.Shape,extend:{element:function(y,A){return this.attr("href",(A||"")+"#"+y,n.xlink)}},construct:{use:function(y,A){return this.put(new n.Use).element(y,A)}}}),n.Rect=n.invent({create:"rect",inherit:n.Shape,construct:{rect:function(y,A){return this.put(new n.Rect).size(y,A)}}}),n.Circle=n.invent({create:"circle",inherit:n.Shape,construct:{circle:function(y){return this.put(new n.Circle).rx(new n.Number(y).divide(2)).move(0,0)}}}),n.extend(n.Circle,n.FX,{rx:function(y){return this.attr("r",y)},ry:function(y){return this.rx(y)}}),n.Ellipse=n.invent({create:"ellipse",inherit:n.Shape,construct:{ellipse:function(y,A){return this.put(new n.Ellipse).size(y,A).move(0,0)}}}),n.extend(n.Ellipse,n.Rect,n.FX,{rx:function(y){return this.attr("rx",y)},ry:function(y){return this.attr("ry",y)}}),n.extend(n.Circle,n.Ellipse,{x:function(y){return y==null?this.cx()-this.rx():this.cx(y+this.rx())},y:function(y){return y==null?this.cy()-this.ry():this.cy(y+this.ry())},cx:function(y){return y==null?this.attr("cx"):this.attr("cx",y)},cy:function(y){return y==null?this.attr("cy"):this.attr("cy",y)},width:function(y){return y==null?this.rx()*2:this.rx(new n.Number(y).divide(2))},height:function(y){return y==null?this.ry()*2:this.ry(new n.Number(y).divide(2))},size:function(y,A){var N=M(this,y,A);return this.rx(new n.Number(N.width).divide(2)).ry(new n.Number(N.height).divide(2))}}),n.Line=n.invent({create:"line",inherit:n.Shape,extend:{array:function(){return new n.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(y,A,N,D){return y==null?this.array():(typeof A<"u"?y={x1:y,y1:A,x2:N,y2:D}:y=new n.PointArray(y).toLine(),this.attr(y))},move:function(y,A){return this.attr(this.array().move(y,A).toLine())},size:function(y,A){var N=M(this,y,A);return this.attr(this.array().size(N.width,N.height).toLine())}},construct:{line:function(y,A,N,D){return n.Line.prototype.plot.apply(this.put(new n.Line),y!=null?[y,A,N,D]:[0,0,0,0])}}}),n.Polyline=n.invent({create:"polyline",inherit:n.Shape,construct:{polyline:function(y){return this.put(new n.Polyline).plot(y||new n.PointArray)}}}),n.Polygon=n.invent({create:"polygon",inherit:n.Shape,construct:{polygon:function(y){return this.put(new n.Polygon).plot(y||new n.PointArray)}}}),n.extend(n.Polyline,n.Polygon,{array:function(){return this._array||(this._array=new n.PointArray(this.attr("points")))},plot:function(y){return y==null?this.array():this.clear().attr("points",typeof y=="string"?y:this._array=new n.PointArray(y))},clear:function(){return delete this._array,this},move:function(y,A){return this.attr("points",this.array().move(y,A))},size:function(y,A){var N=M(this,y,A);return this.attr("points",this.array().size(N.width,N.height))}}),n.extend(n.Line,n.Polyline,n.Polygon,{morphArray:n.PointArray,x:function(y){return y==null?this.bbox().x:this.move(y,this.bbox().y)},y:function(y){return y==null?this.bbox().y:this.move(this.bbox().x,y)},width:function(y){var A=this.bbox();return y==null?A.width:this.size(y,A.height)},height:function(y){var A=this.bbox();return y==null?A.height:this.size(A.width,y)}}),n.Path=n.invent({create:"path",inherit:n.Shape,extend:{morphArray:n.PathArray,array:function(){return this._array||(this._array=new n.PathArray(this.attr("d")))},plot:function(y){return y==null?this.array():this.clear().attr("d",typeof y=="string"?y:this._array=new n.PathArray(y))},clear:function(){return delete this._array,this},move:function(y,A){return this.attr("d",this.array().move(y,A))},x:function(y){return y==null?this.bbox().x:this.move(y,this.bbox().y)},y:function(y){return y==null?this.bbox().y:this.move(this.bbox().x,y)},size:function(y,A){var N=M(this,y,A);return this.attr("d",this.array().size(N.width,N.height))},width:function(y){return y==null?this.bbox().width:this.size(y,this.bbox().height)},height:function(y){return y==null?this.bbox().height:this.size(this.bbox().width,y)}},construct:{path:function(y){return this.put(new n.Path).plot(y||new n.PathArray)}}}),n.Image=n.invent({create:"image",inherit:n.Shape,extend:{load:function(y){if(!y)return this;var A=this,N=new i.Image;return n.on(N,"load",function(){n.off(N);var D=A.parent(n.Pattern);D!==null&&(A.width()==0&&A.height()==0&&A.size(N.width,N.height),D&&D.width()==0&&D.height()==0&&D.size(A.width(),A.height()),typeof A._loaded=="function"&&A._loaded.call(A,{width:N.width,height:N.height,ratio:N.width/N.height,url:y}))}),n.on(N,"error",function(D){n.off(N),typeof A._error=="function"&&A._error.call(A,D)}),this.attr("href",N.src=this.src=y,n.xlink)},loaded:function(y){return this._loaded=y,this},error:function(y){return this._error=y,this}},construct:{image:function(y,A,N){return this.put(new n.Image).load(y).size(A||0,N||A||0)}}}),n.Text=n.invent({create:function(){this.constructor.call(this,n.create("text")),this.dom.leading=new n.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",n.defaults.attrs["font-family"])},inherit:n.Shape,extend:{x:function(y){return y==null?this.attr("x"):this.attr("x",y)},y:function(y){var A=this.attr("y"),N=typeof A=="number"?A-this.bbox().y:0;return y==null?typeof A=="number"?A-N:A:this.attr("y",typeof y.valueOf()=="number"?y+N:y)},cx:function(y){return y==null?this.bbox().cx:this.x(y-this.bbox().width/2)},cy:function(y){return y==null?this.bbox().cy:this.y(y-this.bbox().height/2)},text:function(y){if(typeof y>"u"){for(var y="",A=this.node.childNodes,N=0,D=A.length;N<D;++N)N!=0&&A[N].nodeType!=3&&n.adopt(A[N]).dom.newLined==!0&&(y+=`
`),y+=A[N].textContent;return y}if(this.clear().build(!0),typeof y=="function")y.call(this,this);else{y=y.split(`
`);for(var N=0,ne=y.length;N<ne;N++)this.tspan(y[N]).newLine()}return this.build(!1).rebuild()},size:function(y){return this.attr("font-size",y).rebuild()},leading:function(y){return y==null?this.dom.leading:(this.dom.leading=new n.Number(y),this.rebuild())},lines:function(){var y=(this.textPath&&this.textPath()||this).node,A=n.utils.map(n.utils.filterSVGElements(y.childNodes),function(N){return n.adopt(N)});return new n.Set(A)},rebuild:function(y){if(typeof y=="boolean"&&(this._rebuild=y),this._rebuild){var A=this,N=0,D=this.dom.leading*new n.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(A.textPath()||this.attr("x",A.attr("x")),this.text()==`
`?N+=D:(this.attr("dy",D+N),N=0))}),this.fire("rebuild")}return this},build:function(y){return this._build=!!y,this},setData:function(y){return this.dom=y,this.dom.leading=new n.Number(y.leading||1.3),this}},construct:{text:function(y){return this.put(new n.Text).text(y)},plain:function(y){return this.put(new n.Text).plain(y)}}}),n.Tspan=n.invent({create:"tspan",inherit:n.Shape,extend:{text:function(y){return y==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof y=="function"?y.call(this,this):this.plain(y),this)},dx:function(y){return this.attr("dx",y)},dy:function(y){return this.attr("dy",y)},newLine:function(){var y=this.parent(n.Text);return this.dom.newLined=!0,this.dy(y.dom.leading*y.attr("font-size")).attr("x",y.x())}}}),n.extend(n.Text,n.Tspan,{plain:function(y){return this._build===!1&&this.clear(),this.node.appendChild(r.createTextNode(y)),this},tspan:function(y){var A=(this.textPath&&this.textPath()||this).node,N=new n.Tspan;return this._build===!1&&this.clear(),A.appendChild(N.node),N.text(y)},clear:function(){for(var y=(this.textPath&&this.textPath()||this).node;y.hasChildNodes();)y.removeChild(y.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),n.TextPath=n.invent({create:"textPath",inherit:n.Parent,parent:n.Text,construct:{morphArray:n.PathArray,path:function(y){for(var A=new n.TextPath,N=this.doc().defs().path(y);this.node.hasChildNodes();)A.node.appendChild(this.node.firstChild);return this.node.appendChild(A.node),A.attr("href","#"+N,n.xlink),this},array:function(){var y=this.track();return y?y.array():null},plot:function(y){var A=this.track(),N=null;return A&&(N=A.plot(y)),y==null?N:this},track:function(){var y=this.textPath();if(y)return y.reference("href")},textPath:function(){if(this.node.firstChild&&this.node.firstChild.nodeName=="textPath")return n.adopt(this.node.firstChild)}}}),n.Nested=n.invent({create:function(){this.constructor.call(this,n.create("svg")),this.style("overflow","visible")},inherit:n.Container,construct:{nested:function(){return this.put(new n.Nested)}}}),n.A=n.invent({create:"a",inherit:n.Container,extend:{to:function(y){return this.attr("href",y,n.xlink)},show:function(y){return this.attr("show",y,n.xlink)},target:function(y){return this.attr("target",y)}},construct:{link:function(y){return this.put(new n.A).to(y)}}}),n.extend(n.Element,{linkTo:function(y){var A=new n.A;return typeof y=="function"?y.call(A,A):A.to(y),this.parent().put(A).put(this)}}),n.Marker=n.invent({create:"marker",inherit:n.Container,extend:{width:function(y){return this.attr("markerWidth",y)},height:function(y){return this.attr("markerHeight",y)},ref:function(y,A){return this.attr("refX",y).attr("refY",A)},update:function(y){return this.clear(),typeof y=="function"&&y.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(y,A,N){return this.defs().marker(y,A,N)}}}),n.extend(n.Defs,{marker:function(y,A,N){return this.put(new n.Marker).size(y,A).ref(y/2,A/2).viewbox(0,0,y,A).attr("orient","auto").update(N)}}),n.extend(n.Line,n.Polyline,n.Polygon,n.Path,{marker:function(y,A,N,D){var ne=["marker"];return y!="all"&&ne.push(y),ne=ne.join("-"),y=arguments[1]instanceof n.Marker?arguments[1]:this.doc().marker(A,N,D),this.attr(ne,y)}});var c={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(y,A){return A=="color"?y:y+"-"+A}};["fill","stroke"].forEach(function(y){var A,N={};N[y]=function(D){if(typeof D>"u")return this;if(typeof D=="string"||n.Color.isRgb(D)||D&&typeof D.fill=="function")this.attr(y,D);else for(A=c[y].length-1;A>=0;A--)D[c[y][A]]!=null&&this.attr(c.prefix(y,c[y][A]),D[c[y][A]]);return this},n.extend(n.Element,n.FX,N)}),n.extend(n.Element,n.FX,{rotate:function(y,A,N){return this.transform({rotation:y,cx:A,cy:N})},skew:function(y,A,N,D){return arguments.length==1||arguments.length==3?this.transform({skew:y,cx:A,cy:N}):this.transform({skewX:y,skewY:A,cx:N,cy:D})},scale:function(y,A,N,D){return arguments.length==1||arguments.length==3?this.transform({scale:y,cx:A,cy:N}):this.transform({scaleX:y,scaleY:A,cx:N,cy:D})},translate:function(y,A){return this.transform({x:y,y:A})},flip:function(y,A){return A=typeof y=="number"?y:A,this.transform({flip:y||"both",offset:A})},matrix:function(y){return this.attr("transform",new n.Matrix(arguments.length==6?[].slice.call(arguments):y))},opacity:function(y){return this.attr("opacity",y)},dx:function(y){return this.x(new n.Number(y).plus(this instanceof n.FX?0:this.x()),!0)},dy:function(y){return this.y(new n.Number(y).plus(this instanceof n.FX?0:this.y()),!0)},dmove:function(y,A){return this.dx(y).dy(A)}}),n.extend(n.Rect,n.Ellipse,n.Circle,n.Gradient,n.FX,{radius:function(y,A){var N=(this._target||this).type;return N=="radial"||N=="circle"?this.attr("r",new n.Number(y)):this.rx(y).ry(A??y)}}),n.extend(n.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(y){return this.node.getPointAtLength(y)}}),n.extend(n.Parent,n.Text,n.Tspan,n.FX,{font:function(y,A){if(typeof y=="object")for(A in y)this.font(A,y[A]);return y=="leading"?this.leading(A):y=="anchor"?this.attr("text-anchor",A):y=="size"||y=="family"||y=="weight"||y=="stretch"||y=="variant"||y=="style"?this.attr("font-"+y,A):this.attr(y,A)}}),n.Set=n.invent({create:function(y){y instanceof n.Set?this.members=y.members.slice():Array.isArray(y)?this.members=y:this.clear()},extend:{add:function(){var y,A,N=[].slice.call(arguments);for(y=0,A=N.length;y<A;y++)this.members.push(N[y]);return this},remove:function(y){var A=this.index(y);return A>-1&&this.members.splice(A,1),this},each:function(y){for(var A=0,N=this.members.length;A<N;A++)y.apply(this.members[A],[A,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(y){return this.index(y)>=0},index:function(y){return this.members.indexOf(y)},get:function(y){return this.members[y]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){if(this.members.length==0)return new n.RBox;var y=this.members[0].rbox(this.members[0].doc());return this.each(function(){y=y.merge(this.rbox(this.doc()))}),y}},construct:{set:function(y){return new n.Set(y)}}}),n.FX.Set=n.invent({create:function(y){this.set=y}}),n.Set.inherit=function(){var y,A=[];for(var y in n.Shape.prototype)typeof n.Shape.prototype[y]=="function"&&typeof n.Set.prototype[y]!="function"&&A.push(y);A.forEach(function(N){n.Set.prototype[N]=function(){for(var D=0,ne=this.members.length;D<ne;D++)this.members[D]&&typeof this.members[D][N]=="function"&&this.members[D][N].apply(this.members[D],arguments);return N=="animate"?this.fx||(this.fx=new n.FX.Set(this)):this}}),A=[];for(var y in n.FX.prototype)typeof n.FX.prototype[y]=="function"&&typeof n.FX.Set.prototype[y]!="function"&&A.push(y);A.forEach(function(N){n.FX.Set.prototype[N]=function(){for(var D=0,ne=this.set.members.length;D<ne;D++)this.set.members[D].fx[N].apply(this.set.members[D].fx,arguments);return this}})},n.extend(n.Element,{data:function(y,A,N){if(typeof y=="object")for(A in y)this.data(A,y[A]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+y))}catch{return this.attr("data-"+y)}else this.attr("data-"+y,A===null?null:N===!0||typeof A=="string"||typeof A=="number"?A:JSON.stringify(A));return this}}),n.extend(n.Element,{remember:function(y,A){if(typeof arguments[0]=="object")for(var A in y)this.remember(A,y[A]);else{if(arguments.length==1)return this.memory()[y];this.memory()[y]=A}return this},forget:function(){if(arguments.length==0)this._memory={};else for(var y=arguments.length-1;y>=0;y--)delete this.memory()[arguments[y]];return this},memory:function(){return this._memory||(this._memory={})}}),n.get=function(y){var A=r.getElementById(H(y)||y);return n.adopt(A)},n.select=function(y,A){return new n.Set(n.utils.map((A||r).querySelectorAll(y),function(N){return n.adopt(N)}))},n.extend(n.Parent,{select:function(y){return n.select(y,this.node)}});function d(y,A,N,D){return N+D.replace(n.regex.dots," .")}function f(y){for(var A=y.slice(0),N=A.length;N--;)Array.isArray(A[N])&&(A[N]=f(A[N]));return A}function m(y,A){return y instanceof A}function g(y,A){return(y.matches||y.matchesSelector||y.msMatchesSelector||y.mozMatchesSelector||y.webkitMatchesSelector||y.oMatchesSelector).call(y,A)}function v(y){return y.toLowerCase().replace(/-(.)/g,function(A,N){return N.toUpperCase()})}function b(y){return y.charAt(0).toUpperCase()+y.slice(1)}function _(y){return y.length==4?["#",y.substring(1,2),y.substring(1,2),y.substring(2,3),y.substring(2,3),y.substring(3,4),y.substring(3,4)].join(""):y}function S(y){var A=y.toString(16);return A.length==1?"0"+A:A}function M(y,A,N){if(A==null||N==null){var D=y.bbox();A==null?A=D.width/D.height*N:N==null&&(N=D.height/D.width*A)}return{width:A,height:N}}function x(y,A,N){return{x:A*y.a+N*y.c+0,y:A*y.b+N*y.d+0}}function T(y){return{a:y[0],b:y[1],c:y[2],d:y[3],e:y[4],f:y[5]}}function I(y){return y instanceof n.Matrix||(y=new n.Matrix(y)),y}function $(y,A){y.cx=y.cx==null?A.bbox().cx:y.cx,y.cy=y.cy==null?A.bbox().cy:y.cy}function L(y){for(var A=0,N=y.length,D="";A<N;A++)D+=y[A][0],y[A][1]!=null&&(D+=y[A][1],y[A][2]!=null&&(D+=" ",D+=y[A][2],y[A][3]!=null&&(D+=" ",D+=y[A][3],D+=" ",D+=y[A][4],y[A][5]!=null&&(D+=" ",D+=y[A][5],D+=" ",D+=y[A][6],y[A][7]!=null&&(D+=" ",D+=y[A][7])))));return D+" "}function B(y){for(var A=y.childNodes.length-1;A>=0;A--)y.childNodes[A]instanceof i.SVGElement&&B(y.childNodes[A]);return n.adopt(y).id(n.eid(y.nodeName))}function z(y){return y.x==null&&(y.x=0,y.y=0,y.width=0,y.height=0),y.w=y.width,y.h=y.height,y.x2=y.x+y.width,y.y2=y.y+y.height,y.cx=y.x+y.width/2,y.cy=y.y+y.height/2,y}function H(y){var A=(y||"").toString().match(n.regex.reference);if(A)return A[1]}function J(y){return Math.abs(y)>1e-37?y:0}var K="abcdef".split("");if(typeof i.CustomEvent!="function"){var Q=function(y,A){A=A||{bubbles:!1,cancelable:!1,detail:void 0};var N=r.createEvent("CustomEvent");return N.initCustomEvent(y,A.bubbles,A.cancelable,A.detail),N};Q.prototype=i.Event.prototype,n.CustomEvent=Q}else n.CustomEvent=i.CustomEvent;return function(y){for(var A=0,N=["moz","webkit"],D=0;D<N.length&&!i.requestAnimationFrame;++D)y.requestAnimationFrame=y[N[D]+"RequestAnimationFrame"],y.cancelAnimationFrame=y[N[D]+"CancelAnimationFrame"]||y[N[D]+"CancelRequestAnimationFrame"];y.requestAnimationFrame=y.requestAnimationFrame||function(ne){var q=new Date().getTime(),he=Math.max(0,16-(q-A)),te=y.setTimeout(function(){ne(q+he)},he);return A=q+he,te},y.cancelAnimationFrame=y.cancelAnimationFrame||y.clearTimeout}(i),n})})(Vfe);var Fot=Vfe.exports;const ev=n_(Fot);class Dot extends Ks{constructor(e){super(e)}SIMPLE="simple";UNIQUE_VALUE="unique-value";CLASS_BREAKS="class-breaks";NONE="none";CONTAINER_SIZE=32;CONTENT_SIZE=24;CONTENT_IMAGE_SIZE=28;CONTAINER_CENTER=this.CONTAINER_SIZE/2;CONTENT_PADDING=(this.CONTAINER_SIZE-this.CONTENT_SIZE)/2;getGraphicIcon(e,i){return i.getGraphicIcon(e)}getGraphicSymbol(e,i){return i.getGraphicSymbol(e)}makeRenderer(e,i,r=!1){switch(e.type){case this.SIMPLE:return new Lot(e,i);case this.CLASS_BREAKS:return new Not(e,i,r);case this.UNIQUE_VALUE:return new Pot(e,i,r);default:throw new Error(`Unknown renderer type encountered - ${e.type}`)}}async generateWMSSymbology(e){const i=ev(window.document.createElement("div")).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,0,0),r={svgcode:"",imgHeight:"",imgWidth:""};if(e){const s=await this.renderSymbologyImage(e);if(s){r.svgcode=s;const n=document.createElement("span");n.innerHTML=s;const o=n.firstElementChild?.lastElementChild;r.imgHeight=o?.getAttribute("height")||"",r.imgWidth=o?.getAttribute("width")||""}else r.svgcode=i.svg()}else r.svgcode=i.svg();return r}listToSymbology(e,i){return i.map(({text:s,image:n})=>{const o={name:s,image:n,svgcode:""};return e(n).then(a=>{o.svgcode=a}),o})}listToIconSymbology(e){return this.listToSymbology(this.renderSymbologyIcon,e)}listToImageSymbology(e){return this.listToSymbology(this.renderSymbologyImage,e)}async renderSymbologyImage(e,i=null){i===null&&(i=ev(window.document.createElement("div")).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,0,0));const r=await this.$iApi.geo.shared.convertImagetoDataURL(e);if(r===e)return"";const{loader:s}=await this.svgDrawImage(i,r);return i.viewbox(0,0,s.width,s.height),i.svg()}async renderSymbologyIcon(e,i=null){if(i===null){const n=window.document.createElement("div");n.setAttribute("style","opacity:0;position:fixed;left:100%;top:100%;overflow:hidden"),window.document.body.appendChild(n),i=ev(n).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,this.CONTAINER_SIZE,this.CONTAINER_SIZE)}const r=await this.$iApi.geo.shared.convertImagetoDataURL(e),{image:s}=await this.svgDrawImage(i,r);return s.center(this.CONTAINER_CENTER,this.CONTAINER_CENTER),this.fitInto(s,this.CONTENT_IMAGE_SIZE),i.svg()}generatePlaceholderSymbology(e,i="#000"){const r=ev(window.document.createElement("div")).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,this.CONTAINER_SIZE,this.CONTAINER_SIZE);return r.rect(this.CONTENT_IMAGE_SIZE,this.CONTENT_IMAGE_SIZE).center(this.CONTAINER_CENTER,this.CONTAINER_CENTER).fill(i),r.text(e[0].toUpperCase()).size(23).fill("#fff").attr({"font-weight":"bold","font-family":"Roboto"}).center(this.CONTAINER_CENTER,this.CONTAINER_CENTER),{name:e,svgcode:r.svg()}}async generateBlankSymbology(){return ev(window.document.createElement("div")).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).svg()}async symbolToSvg(e){const i=this,r=1.33333,s=window.document.createElement("div");s.setAttribute("style","opacity:0;position:fixed;left:100%;top:100%;overflow:hidden"),window.document.body.appendChild(s);const n=ev(s).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,this.CONTAINER_SIZE,this.CONTAINER_SIZE),o={path({size:g,path:v}){return n.path(v).size(g*r)},circle({size:g}){return n.circle(g*r)},cross({size:g}){return n.path("M 0,10 L 20,10 M 10,0 L 10,20").size(g*r)},x({size:g}){return n.path("M 0,0 L 20,20 M 20,0 L 0,20").size(g*r)},triangle({size:g}){return n.path("M 20,20 L 10,0 0,20 Z").size(g*r)},diamond({size:g}){return n.path("M 20,10 L 10,0 0,10 10,20 Z").size(g*r)},square({size:g}){return n.path("M 0,0 20,0 20,20 0,20 Z").size(g*r)}},a={[ma.SOLID]:"none",[ma.NONE]:"none",[ma.DASH]:"5.333,4",[ma.DOT]:"1.333,4",[ma.DASHDOT]:"5.333,4,1.333,4",[ma.LONGDASH]:"10.666,4",[ma.LONGDASHDOT]:"10.666,4,1.333,4",[ma.LONGDASHDOTDOT]:"10.666,4,1.333,4,1.333,4",[ma.SHORTDOT]:"1.333,1.333",[ma.SHORTDASH]:"5.333,1.333",[ma.SHORTDASHDOT]:"5.333,1.333,1.333,1.333",[ma.SHORTDASHDOTDOT]:"5.333,1.333,1.333,1.333,1.333,1.333"},l={color:"#000",opacity:1,width:1,linecap:"square",linejoin:"miter",miterlimit:4},u={color:[0,0,0,0],width:0,style:a.none},c={solid:g=>({color:g.colour,opacity:g.opacity}),none:()=>"transparent",horizontal:(g,v)=>n.pattern(5,5,_=>_.line(0,5/2,5,5/2)).stroke(v),vertical:(g,v)=>n.pattern(5,5,_=>_.line(5/2,0,5/2,5)).stroke(v),"forward-diagonal":(g,v)=>n.pattern(5,5,_=>{_.line(0,0,5,5).stroke(v),_.line(0,0,5,5).move(0,5).stroke(v),_.line(0,0,5,5).move(5,0).stroke(v)}),"backward-diagonal":(g,v)=>n.pattern(5,5,_=>{_.line(5,0,0,5).stroke(v),_.line(5,0,0,5).move(5/2,5/2).stroke(v),_.line(5,0,0,5).move(-5/2,-5/2).stroke(v)}),cross:(g,v)=>n.pattern(5,5,_=>{_.line(5/2,0,5/2,5).stroke(v),_.line(0,5/2,5,5/2).stroke(v)}),"diagonal-cross":(g,v)=>n.pattern(7,7,_=>{_.line(0,0,7,7).stroke(v),_.line(7,0,0,7).stroke(v)})},d={"simple-marker"(){const g=m(e.color);e.outline=e.outline||u;const v=m(e.outline.color),b=f({color:v.colour,opacity:v.opacity,width:e.outline.width,dasharray:a[e.outline.style]}),_=o[e.style](e).fill({color:g.colour,opacity:g.opacity}).stroke(b).center(i.CONTAINER_CENTER,i.CONTAINER_CENTER).rotate(e.angle||0);i.fitInto(_,i.CONTENT_SIZE)},"simple-line"(){const g=m(e.color),v=f({color:g.colour,opacity:g.opacity,width:e.width,linecap:"butt",dasharray:a[e.style]}),b=i.CONTENT_PADDING,_=i.CONTAINER_SIZE-i.CONTENT_PADDING;n.line(b,b,_,_).stroke(v)},esriCLS(){this["simple-line"]()},"simple-fill"(){const g=m(e.color),v=f({color:g.colour,opacity:g.opacity}),b=c[e.style](g,v);e.outline=e.outline||u;const _=m(e.outline.color),S=f({color:_.colour,opacity:_.opacity,width:e.outline.width,linecap:"butt",dasharray:a[e.outline.style]});n.rect(i.CONTENT_SIZE,i.CONTENT_SIZE).center(i.CONTAINER_CENTER,i.CONTAINER_CENTER).fill(b).stroke(S)},text(){console.error("no support for feature service legend of text symbols")},"picture-fill"(){const g=e.imageData?`data:${e.contentType};base64,${e.imageData}`:e.url,v=e.width*e.xscale,b=e.height*e.yscale;e.outline=e.outline||u;const _=m(e.outline.color),S=f({color:_.colour,opacity:_.opacity,width:e.outline.width,dasharray:a[e.outline.style]});return i.$iApi.geo.shared.convertImagetoDataURL(g).then(x=>{const T=n.pattern(v,b,I=>I.image(x,v,b));n.rect(i.CONTENT_SIZE,i.CONTENT_SIZE).center(i.CONTAINER_CENTER,i.CONTAINER_CENTER).fill(T).stroke(S)})},"picture-marker"(){const g=e.source,v=g&&g.imageData?`data:${g.contentType};base64,${g.imageData}`:e.url;return i.$iApi.geo.shared.convertImagetoDataURL(v).then(_=>i.svgDrawImage(n,_)).then(({image:_})=>{_.center(i.CONTAINER_CENTER,i.CONTAINER_CENTER).rotate(e.angle||0),i.fitInto(_,i.CONTENT_IMAGE_SIZE)})}};try{return await Promise.resolve(d[e.type]()),window.document.body.removeChild(s),n.svg()}catch(g){return console.error(g),this.generateBlankSymbology()}function f(g){return Object.assign({},l,g)}function m(g){return g?{colour:`rgb(${g.r},${g.g},${g.b})`,opacity:g.a}:{colour:"rgb(0, 0, 0)",opacity:0}}}async svgDrawImage(e,i,r=0,s=0,n=!0){return new Promise((o,a)=>{const l=e.image(i,r,s,n).loaded(u=>o({image:l,loader:u})).error(u=>{a(u),console.error(u)})})}fitInto(e,i){const r=e.node.getBoundingClientRect(),s=i/Math.max(r.width,r.height);s<1&&e.scale(s)}rendererToLegend(e){let i;const r=e.symbolUnits.slice(0);if(e.defaultUnit&&r.push(e.defaultUnit),e.falseRenderer)i=r.map(s=>[s]);else{const s=new Map;r.forEach(n=>{const o=s.get(n.label);o?o.push(n):s.set(n.label,[n])}),i=[],s.forEach(n=>i.push(n))}return i.map(s=>{const n=s[0],o={uid:this.$iApi.geo.shared.generateUUID(),label:n.label||"",definitionClause:s.length===1?n.definitionClause:`(${s.map(a=>a.definitionClause).join(" OR ")})`,svgcode:"",esriStandard:!0,visibility:!0,lastVisbility:!0,drawPromise:this.symbolToSvg(n.symbol).then(a=>{o.svgcode=a,s.forEach(l=>{l.svgCode=a})})};return o})}async getMapServerLegend(e){if(!e)throw new Error("Legend server request is missing the required url.");const i={query:{f:"json"}},r={layers:[]},[s,n]=await t1(Et(`${e}/legend`,i));return n?n.data?n.data:(console.error(`Error loading legend data for ${e}`),r):(console.error(`Error loading legend for ${e}`,s),r)}mapServerLegendToRenderer(e,i){const r=e.layers.find(n=>n.layerId===i);let s;if(typeof r<"u")return s={type:"uniqueValue",field:"fakefield",uniqueValueInfos:r.legend.map(n=>({label:n.label,value:n.label,symbol:{type:"esriPMS",imageData:n.imageData,contentType:n.contentType}}))},this.makeRenderer(Qb(s),[],!0);throw new Error("attempted to make renderer from non-existing legend data")}mapServerLegendToRendererAll(e){const i=e.layers.map(s=>s.legend.map(n=>({label:n.label,value:n.label,symbol:{type:"esriPMS",imageData:n.imageData,contentType:n.contentType}}))),r={type:"uniqueValue",field1:"fakefield",uniqueValueInfos:[].concat(...i)};return this.makeRenderer(Qb(r),[],!0)}async mapServerToLocalLegend(e,i=void 0){const r=await this.getMapServerLegend(e);let s,n;return typeof i>"u"?(n=0,s=this.mapServerLegendToRendererAll(r)):(n=parseInt(i),s=this.mapServerLegendToRenderer(r,n)),this.rendererToLegend(s)}}class jot extends Ks{constructor(e){super(e)}async arcGisServerQueryIds(e){const i=new Ls;i.returnGeometry=!1,e.filterSql&&(i.where=e.filterSql),e.filterGeometry&&(i.geometry=this.queryGeometryHelper(e.filterGeometry,!1,this.$iApi.geo.map.getScale(),e.sourceSR),i.spatialRelationship="intersects");const r=await u7(e.url,i);return Array.isArray(r)?r:[]}async geoJsonQuery(e){const i=new Ls;if(i.returnGeometry=!!e.includeGeometry,i.outFields=["*"],e.filterGeometry&&(i.geometry=this.queryGeometryHelper(e.filterGeometry,!0),i.spatialRelationship="intersects"),e.filterSql&&(i.where=e.filterSql),await e.layer.loadPromise(),!e.layer.esriLayer)throw new Error("file layer being queried contains no ESRI layer");return(await e.layer.esriLayer.queryFeatures(i)).features.map((s,n)=>{let o;return i.returnGeometry?o=this.$iApi.geo.geom.geomEsriToRamp(s.geometry,`queryResult${n}`):o=new f1,new jh(o,"",s.attributes)})}queryGeometryHelper(e,i,r,s){let n;return!i&&e.type===Mi.EXTENT?r&&s&&r>2e7&&e.sr.wkid===3978&&s.wkid===4326?n=e.toESRI():n=e.toPolygon().toESRI():n=e.toESRI(),n}makeClickBuffer(e,i=5){const r=this.$iApi.geo.map,s=r.getExtent(),n=i*(s.xmax-s.xmin)/r.getPixelWidth();return new Wr("ze_buffer",[e.x-n,e.y-n],[e.x+n,e.y+n],e.sr)}}class Uot extends Ks{attributes;geom;layer;map;proj;query;shared;symbology;constructor(e){super(e),this.geom=Vb.geom,this.proj=Vb.proj,this.shared=Vb.sharedUtils,this.map=new pst(e),this.layer=new mot(e),this.attributes=new Oot(e),this.query=new jot(e),this.symbology=new Dot(e)}set proxy(e){Li.request.proxyUrl=e}get proxy(){return Li.request.proxyUrl||""}}const Vot=Object.assign({"../fixtures/appbar/index.ts":()=>De(()=>import("./index-c8eb692e.js"),["./index-c8eb692e.js","./preload-helper-388ac9d5.js","./index-dfd099cf.css"],import.meta.url),"../fixtures/areas-of-interest/index.ts":()=>De(()=>import("./index-42835bb0.js"),["./index-42835bb0.js","./screen.vue_vue_type_script_setup_true_lang-fa3b8893.js","./screen-44f42014.css","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/basemap/index.ts":()=>De(()=>import("./index-02092b2a.js"),["./index-02092b2a.js","./screen.vue_vue_type_script_setup_true_lang-dab71f66.js","./screen-37ee2dd7.css","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/crosshairs/index.ts":()=>De(()=>import("./index-925b9d1b.js"),["./index-925b9d1b.js","./preload-helper-388ac9d5.js","./index-b1dca86a.css"],import.meta.url),"../fixtures/details/index.ts":()=>De(()=>import("./index-fe9b05c5.js"),["./index-fe9b05c5.js","./hilight-defs-1101779f.js","./toggle-switch-control-a31c49c3.js","./toggle-switch-control-930168f6.css","./preload-helper-388ac9d5.js","./index-e972fcd3.css"],import.meta.url),"../fixtures/export-footnote/index.ts":()=>De(()=>import("./index-ddc95201.js"),["./index-ddc95201.js","./fabric-0b3762e6.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/export-legend/index.ts":()=>De(()=>import("./index-dd2d5c2b.js"),["./index-dd2d5c2b.js","./fabric-0b3762e6.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/export-map/index.ts":()=>De(()=>import("./index-6311ddec.js"),["./index-6311ddec.js","./fabric-0b3762e6.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/export-northarrow/index.ts":()=>De(()=>import("./index-87e793a5.js"),["./index-87e793a5.js","./fabric-0b3762e6.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/export-scalebar/index.ts":()=>De(()=>import("./index-d4f5e1a0.js"),["./index-d4f5e1a0.js","./fabric-0b3762e6.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/export-timestamp/index.ts":()=>De(()=>import("./index-a4404ade.js"),["./index-a4404ade.js","./fabric-0b3762e6.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/export-title/index.ts":()=>De(()=>import("./index-752ce85d.js"),["./index-752ce85d.js","./fabric-0b3762e6.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/export/index.ts":()=>De(()=>import("./index-5b3ff59a.js"),["./index-5b3ff59a.js","./fabric-0b3762e6.js","./screen.vue_vue_type_script_setup_true_lang-84faced3.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/gazebo/index.ts":()=>De(()=>import("./index-643c844e.js"),["./index-643c844e.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/geosearch/index.ts":()=>De(()=>import("./index-4cfdde8f.js"),["./index-4cfdde8f.js","./screen.vue_vue_type_script_setup_true_lang-2bd8599d.js","./screen-98a95490.css","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/grid/index.ts":()=>De(()=>import("./index-9530e1ae.js"),["./index-9530e1ae.js","./screen-68e0309a.js","./screen-28356bb4.css","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/help/index.ts":()=>De(()=>import("./index-f83d49e9.js"),["./index-f83d49e9.js","./screen.vue_vue_type_script_setup_true_lang-ffae2da6.js","./marked.esm-cdc2cd67.js","./screen-5b224f45.css","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/hilight/index.ts":()=>De(()=>import("./index-1055eb4b.js"),["./index-1055eb4b.js","./hilight-defs-1101779f.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/layer-reorder/index.ts":()=>De(()=>import("./index-be864956.js"),["./index-be864956.js","./screen.vue_vue_type_script_setup_true_lang-dfabf343.js","./vue.esm-bundler-b8c30a0e.js","./screen-2715acef.css","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/legend/index.ts":()=>De(()=>import("./index-874ab1b5.js"),["./index-874ab1b5.js","./screen.vue_vue_type_script_setup_true_lang-040bf904.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/mapnav/index.ts":()=>De(()=>import("./index-7d72a44b.js"),["./index-7d72a44b.js","./preload-helper-388ac9d5.js","./index-fb35802e.css"],import.meta.url),"../fixtures/metadata/index.ts":()=>De(()=>import("./index-d5adb05f.js"),["./index-d5adb05f.js","./screen.vue_vue_type_style_index_0_lang-8fdbfc93.js","./marked.esm-cdc2cd67.js","./screen-75fded40.css","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/northarrow/index.ts":()=>De(()=>import("./index-3a650970.js"),["./index-3a650970.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/overviewmap/index.ts":()=>De(()=>import("./index-63a59098.js"),["./index-63a59098.js","./preload-helper-388ac9d5.js","./index-1654c05f.css"],import.meta.url),"../fixtures/panguard/index.ts":()=>De(()=>import("./index-b9390b93.js"),["./index-b9390b93.js","./preload-helper-388ac9d5.js","./index-81bb715d.css"],import.meta.url),"../fixtures/scrollguard/index.ts":()=>De(()=>import("./index-a516fb07.js"),["./index-a516fb07.js","./preload-helper-388ac9d5.js","./index-dd460faf.css"],import.meta.url),"../fixtures/settings/index.ts":()=>De(()=>import("./index-06f7eeda.js"),["./index-06f7eeda.js","./screen-8234aa8b.js","./vue.esm-bundler-b8c30a0e.js","./toggle-switch-control-a31c49c3.js","./toggle-switch-control-930168f6.css","./preload-helper-388ac9d5.js","./screen-31f25e10.css"],import.meta.url),"../fixtures/snowman/index.ts":()=>De(()=>import("./index-c890673c.js"),["./index-c890673c.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/wizard/index.ts":()=>De(()=>import("./index-88c477b1.js"),["./index-88c477b1.js","./screen-905e5594.js","./vue.esm-bundler-b8c30a0e.js","./preload-helper-388ac9d5.js","./screen-dd6dc8a0.css"],import.meta.url)});class Bot extends Ks{constructor(e){super(e)}async add(e,i){let r;if(e in Qd(this.$vApp.$pinia).items)return this.get(e);if(i){if(typeof i!="function")throw new Error("malformed fixture constructor");r=lV.updateBaseToInstance(new i,e,this.$iApi)}else{const s=(await Vot[`../fixtures/${e}/index.ts`]()).default;r=new s(e,this.$iApi)}return Qd(this.$vApp.$pinia).addFixture(r),this.$iApi.event.emit(qt.FIXTURE_ADDED,r),this.$iApi.geo.map.created&&r.initialized?.(),r}remove(e){const i=this.get(e);if(!i)throw new Error(`Could not find fixture ${e} for removal`);return Qd(this.$vApp.$pinia).removeFixture(i),this.$iApi.event.emit(qt.FIXTURE_REMOVED,i),i}get(e){const i=[];typeof e=="string"?i.push(e):Array.isArray(e)?i.push(...e):i.push(e.id);const r=i.map(s=>{const n=Qd(this.$vApp.$pinia).items[s];if(n)return n});return r.length===1?r[0]:r}isLoaded(e){const i=Qd(this.$vApp.$pinia),r=Array.isArray(e)?e:[e];return r.forEach(s=>{i.loadPromises[s]===void 0&&i.addLoadPromise(s)}),Promise.all(i.getLoadPromises(r))}addDefaultFixtures(e){(!Array.isArray(e)||e.length===0)&&(e=["appbar","basemap","crosshairs","details","geosearch","grid","help","hilight","layer-reorder","legend","mapnav","northarrow","overviewmap","scrollguard","panguard","settings","wizard"]);const i=Sa(this.$vApp.$pinia);return i.startingFixtures=e,Promise.all(e.map(r=>this.add(r)))}}class lV extends Ks{static updateBaseToInstance(e,i,r){const s=new lV(i,r);return Object.defineProperties(e,{id:{value:i},$iApi:{value:r},$vApp:{get(){return s.$vApp}},remove:{value:s.remove},extend:{value:s.extend},config:{get(){return s.config}},mount:{value:s.mount}}),e}id;constructor(e,i){super(i),this.id=e}remove(){return this.$iApi.fixture.remove(this),this}extend(e,i={}){const r=zi({extends:e,iApi:this.$iApi,data(){return{...i}}}),s=y$(r),{el:n}=this.mount(r,{props:{...i.propsData},app:s});return n}mount(e,{props:i,children:r,element:s,app:n}={}){let o=s,a=Hh(e,i,r);return n&&n._context&&(a.appContext=n._context),o?np(a,o):np(a,o=document.createElement("div")),{vNode:a,destroy:()=>{o&&np(null,o),o=null,a=null},el:o}}get config(){return Sa(this.$vApp.$pinia).config.fixtures[this.id]}getLayerFixtureConfig(e){return this.getLayerFixtureConfigs()[e]}getLayerFixtureConfigs(){const e={},i=this.$iApi.useStore("layer"),r=(s,n=void 0)=>{if(s.fixtures&&s.fixtures[this.id]!==void 0){let o=s.id;n!==void 0&&(o=`${n.id}-${s.index}`),e[o]=s.fixtures[this.id]}s.sublayers&&s.sublayers.forEach(o=>r(o,s))};return i.layers?.forEach(s=>r(s.config)),e}handlePanelWidths(e){if(this.config?.panelWidth){const i={};typeof this.config?.panelWidth=="number"&&(this.config.panelWidth={default:this.config?.panelWidth}),this.config.panelWidth.default&&e.forEach(r=>{i[r]=this.config.panelWidth.default});for(const r in this.config.panelWidth)r!="default"&&(i[r]=this.config.panelWidth[r]);for(const r in i){const s=this.$iApi.panel.get(r);this.$iApi.panel.setStyle(s,{"flex-basis":`${i[r]}px`})}}}handlePanelTeleports(e){if(this.config?.panelTeleport){const i=X0(this.$vApp.$pinia),r=!!this.config.panelTeleport.target;e.forEach(s=>{i.items[s].teleport=r?this.config.panelTeleport:this.config.panelTeleport[s],i.items[s].style.width="100%"})}}}class zot extends Ks{panelStore=X0(this.$vApp.$pinia);register(e,i){const r=Got(e)?{[e.id]:e.config}:e;if(i){const n=i.i18n||{},o=this.$iApi.$i18n;Object.entries(n.messages||{}).forEach(a=>o.mergeLocaleMessage(...a)),Object.entries(n.dateTimeFormats||{}).forEach(a=>o.mergeDateTimeFormat(...a)),Object.entries(n.numberFormats||{}).forEach(a=>o.mergeNumberFormat(...a))}const s=Object.entries(r).reduce((n,[o,a])=>(n.push(new TI(this.$iApi,o,a)),n),[]);return s.forEach(n=>this.panelStore.registerPanel(n)),s.length===1?s[0]:s.reduce((n,o)=>(n[o.id]=o,n),{})}isRegistered(e){const i=Array.isArray(e)?e:[e];return i.forEach(r=>{this.panelStore.regPromises[r]===void 0&&this.panelStore.addRegPromise(r)}),Promise.all(this.panelStore.getRegPromises(i))}remove(e){const i=this.get(e);i&&(i.isOpen&&this.close(i),this.panelStore.removePanel(i))}get(e){const i=typeof e=="string"?e:e.id;return this.panelStore.items[i]}open(e){let i,r,s;if(typeof e=="string"||e instanceof TI?i=this.get(e):(i=this.get(e.id),{screen:r,props:s}=e),!i)return i;if(i.isOpen&&!i.isVisible)i.minimize();else if(i.isOpen)return i;return r||(i.route&&!s?{screen:r,props:s}=i.route:r=Object.keys(i.screens).pop()),this.show(i,{screen:r,props:s})?(this.panelStore.openPanel(i),this.$iApi.updateAlert(this.$iApi.$i18n.t("panels.alert.open",{name:i.alertName?this.$iApi.$i18n.t(i.alertName):i.id})),this.$iApi.event.emit(qt.PANEL_OPENED,i)):console.error(`Failed to open ${i.id} panel.`),i}get opened(){return this.panelStore.orderedItems.concat(this.panelStore.teleported)}get visible(){return this.panelStore.visible.concat(this.panelStore.teleported)}close(e){const i=this.get(e);return i&&(i.isPinned&&i.pin(!1),this.panelStore.closePanel(i),this.$iApi.updateAlert(this.$iApi.$i18n.t("panels.alert.close",{name:i.alertName?this.$iApi.$i18n.t(i.alertName):i.id})),this.$iApi.event.emit(qt.PANEL_CLOSED,i),i)}minimize(e){const i=this.get(e);return i&&(i.isPinned&&i.pin(!1),this.panelStore.closePanel(i),this.$iApi.updateAlert(this.$iApi.$i18n.t("panels.alert.minimize",{name:i.alertName?this.$iApi.$i18n.t(i.alertName):i.id})),this.$iApi.event.emit(qt.PANEL_MINIMIZED,i),i)}move(e,i){const r=this.get(e);return r&&(this.panelStore.movePanel(r,i),r)}toggle(e,i){let r;return typeof e=="string"||e instanceof TI?r=this.get(e):r=this.get(e.id),r&&(i=typeof i<"u"?i:!r.isVisible,i!==r.isVisible&&(i?this.open(e):this.close(r)),r)}toggleMinimize(e,i){let r;return typeof e=="string"||e instanceof TI?r=this.get(e):r=this.get(e.id),r&&(i=typeof i<"u"?i:!r.isVisible,i!==r.isVisible&&(i?this.open(r):this.minimize(r)),r)}pin(e,i){const r=this.get(e);return!r||(i=typeof i<"u"?i:!r.isPinned,!r.isPinned&&!i)||(this.panelStore.pinned=i?r:void 0),r}get pinned(){return this.panelStore.pinned||void 0}show(e,i){const r=this.get(e);if(!r)return r;if(r.screens[i.screen]){if(r.screens[i.screen]?.props){const s=Object.keys(r.screens[i.screen]?.props).filter(o=>o!=="panel"),n=i.props?Object.keys(i.props):[];for(let o=0;o<s.length;o++)if(!n.includes(s[o])&&r.screens[i.screen].props[s[o]].required)return}return i.screen in this.$element._context.components||r.registerScreen(i.screen),r.teleport&&(i.props={header:!!r.teleport?.showHeader,...i.props}),this.panelStore.items[r.id].route=i,r}}setStyle(e,i,r=!1){const s=this.get(e);return s&&(this.panelStore.items[s.id].style=r?i:{...s.style,...i},s)}expand(e,i){const r=this.get(e);return r&&(this.panelStore.items[r.id].expanded=i!==void 0?i:!r.expanded,r)}}function Got(t){return t.id!==void 0&&typeof t.id=="string"&&t.config!==void 0}const qot={},Hot=t=>(ry("data-v-d6b3771a"),t=t(),sy(),t),Wot=Hot(()=>at("div",{class:"loader"},null,-1));function Jot(t,e){const i=Os("panel-screen");return ht(),Br(i,{header:!1,class:"screen-spinner"},{content:Ns(()=>[Wot]),_:1})}const Zot=Op(qot,[["render",Jot],["__scopeId","data-v-d6b3771a"]]),Yot=Object.assign({"../fixtures/areas-of-interest/screen.vue":()=>De(()=>import("./screen-4ae752f3.js"),["./screen-4ae752f3.js","./screen.vue_vue_type_script_setup_true_lang-fa3b8893.js","./screen-44f42014.css","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/basemap/screen.vue":()=>De(()=>import("./screen-67f61b28.js"),["./screen-67f61b28.js","./screen.vue_vue_type_script_setup_true_lang-dab71f66.js","./screen-37ee2dd7.css","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/export/screen.vue":()=>De(()=>import("./screen-a5be21d7.js"),["./screen-a5be21d7.js","./screen.vue_vue_type_script_setup_true_lang-84faced3.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/geosearch/screen.vue":()=>De(()=>import("./screen-de84ab85.js"),["./screen-de84ab85.js","./screen.vue_vue_type_script_setup_true_lang-2bd8599d.js","./screen-98a95490.css","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/grid/screen.vue":()=>De(()=>import("./screen-68e0309a.js").then(t=>t.s),["./screen-68e0309a.js","./screen-28356bb4.css"],import.meta.url),"../fixtures/help/screen.vue":()=>De(()=>import("./screen-81fea334.js"),["./screen-81fea334.js","./screen.vue_vue_type_script_setup_true_lang-ffae2da6.js","./marked.esm-cdc2cd67.js","./screen-5b224f45.css","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/layer-reorder/screen.vue":()=>De(()=>import("./screen-9bec5b10.js"),["./screen-9bec5b10.js","./screen.vue_vue_type_script_setup_true_lang-dfabf343.js","./vue.esm-bundler-b8c30a0e.js","./screen-2715acef.css","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/legend/screen.vue":()=>De(()=>import("./screen-23526127.js"),["./screen-23526127.js","./screen.vue_vue_type_script_setup_true_lang-040bf904.js","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/metadata/screen.vue":()=>De(()=>import("./screen-df29c1df.js"),["./screen-df29c1df.js","./screen.vue_vue_type_style_index_0_lang-8fdbfc93.js","./marked.esm-cdc2cd67.js","./screen-75fded40.css","./preload-helper-388ac9d5.js"],import.meta.url),"../fixtures/settings/screen.vue":()=>De(()=>import("./screen-8234aa8b.js"),["./screen-8234aa8b.js","./vue.esm-bundler-b8c30a0e.js","./toggle-switch-control-a31c49c3.js","./toggle-switch-control-930168f6.css","./preload-helper-388ac9d5.js","./screen-31f25e10.css"],import.meta.url),"../fixtures/wizard/screen.vue":()=>De(()=>import("./screen-905e5594.js"),["./screen-905e5594.js","./vue.esm-bundler-b8c30a0e.js","./preload-helper-388ac9d5.js","./screen-dd6dc8a0.css"],import.meta.url)});class TI extends Ks{id;screens;loadedScreens=[];alertName;teleport;controls;button;isScreenLoaded(e){return this.loadedScreens.indexOf(e)!==-1}registerScreen(e){const i=this.screens[e];let r;if(Kze(i)||Yze(i))r=i,this.loadedScreens.push(e);else{let s;typeof i=="string"?s=Yot[`../fixtures/${i}`]():s=i();const n=new Promise((o,a)=>{s.then(l=>{this.loadedScreens.push(e),o(Qze(l)?l.default:l)}),s.catch(l=>a(l))});r=vj({loader:()=>n,loadingComponent:Zot,delay:200})}this.$iApi.$element.component(e,r)}style;expanded;get width(){if(!(!this.style.width||this.style.width.slice(-2)!=="px"))return parseInt(this.style.width)}route;constructor(e,i,r){if(super(e),{id:this.id,screens:this.screens,style:this.style,expanded:this.expanded,alertName:this.alertName,button:this.button,controls:this.controls}={id:i,style:{},expanded:!1,controls:{expand:!1,...r.controls},...r},Object.keys(this.screens).length===0)throw new Error("panel must have at least a single screen");this.route={screen:Object.keys(this.screens).pop()},this.style["flex-basis"]||(this.style["flex-basis"]=this.style.width||"350px"),this.style.width="80%"}open(e){return typeof e>"u"?this.$iApi.panel.open(this):this.$iApi.panel.open({id:this.id,...typeof e=="string"?{screen:e}:e}),this}get isOpen(){return this.$iApi.panel.opened.indexOf(this)!==-1}get isVisible(){return this.$iApi.panel.visible.indexOf(this)!==-1}close(){return this.$iApi.panel.close(this),this}minimize(){return this.$iApi.panel.minimize(this),this}move(e){return this.$iApi.panel.move(this,e),this}get isLeftMostPanel(){if(this.$iApi.panel.visible.length>0){for(const e of this.$iApi.panel.visible)if(!e.teleport)return this.id===e.id}return!1}get isRightMostPanel(){if(this.$iApi.panel.visible.length>0){for(let e=this.$iApi.panel.visible.length-1;e>=0;e--)if(!this.$iApi.panel.visible[e].teleport)return this.id===this.$iApi.panel.visible[e].id}return!1}remove(){return this.$iApi.panel.remove(this),this}toggle(e){return typeof e>"u"?this.$iApi.panel.toggle(this,!this.isOpen):typeof e=="boolean"?e!==this.isOpen&&this.$iApi.panel.toggle(this,e):this.$iApi.panel.toggle({id:this.id,screen:e.screen,props:e.props},typeof e.toggle<"u"?e.toggle:!this.isOpen),this}toggleMinimize(e){return typeof e>"u"||typeof e=="boolean"?this.$iApi.panel.toggleMinimize(this,e):this.$iApi.panel.toggleMinimize({id:this.id,screen:e.screen,props:e.props},typeof e.toggle<"u"?e.toggle:!this.isOpen),this}pin(e){return e=typeof e<"u"?e:!this.isPinned,this.$iApi.panel.pin(this,e),this}get isPinned(){return!!this.$iApi.panel.pinned&&this.$iApi.panel.pinned.id===this.id}show(e){const i=typeof e=="string"?{screen:e}:e;return this.route=i,this.$iApi.panel.show(this,i),this}setStyles(e,i=!1){return this.$iApi.panel.setStyle(this,e,i),this}expand(e){return this.$iApi.panel.expand(this,e),this}}function Kot(t){const e={};(Array.isArray(t)?t:[t]).forEach(o=>{o.language||(console.warn("RAMP2 config with no language supplied. Defaulting to English"),o.language="en");const a=Qot(o);e[o.language]=a});const r=Object.entries(e).map(o=>{const a=o[1].fixturesEnabled;return delete o[1].fixturesEnabled,a});let s=!1;const n=r.reduce((o,a)=>o.filter(l=>{const u=a.includes(l);return s=s||!u,u}));return s&&console.warn("Configs attempted to load different sets of fixtures. Only common fixtures will be loaded (all configs must load the same fixtures)."),n.push("grid","crosshairs","scrollguard","panguard","wizard","layer-reorder","details"),{startingFixtures:n,configs:e}}function Qot(t){const e={version:"4.0",fixtures:{},layers:[],map:{},panels:{open:[]},system:{animate:!0,exposeOid:!1},fixturesEnabled:[]};return tat(t.services,e),Xot(t.map,e),iat(t.ui,e),t.plugins&&rat(t.plugins,e),e}function Xot(t,e){if(t.layers&&t.layers.forEach(i=>{e.layers.unshift(eat(i))}),t.initialBasemapId&&(e.map.initialBasemapId=t.initialBasemapId),t.components){if(t.components.geoSearch&&(t.components.geoSearch.enabled&&e.fixturesEnabled.push("geosearch"),typeof t.components.geoSearch.showGraphic<"u"&&console.warn("showGraphic property provided in geoSearch map component cannot be mapped and will be skipped."),typeof t.components.geoSearch.showInfo<"u"&&console.warn("showInfo property provided in geoSearch map component cannot be mapped and will be skipped.")),t.components.overviewMap&&t.components.overviewMap.enabled&&(e.fixtures.overviewmap||(e.fixtures.overviewmap={basemaps:{}},e.fixturesEnabled.push("overviewmap")),e.fixtures.overviewmap.startMinimized=!t.components.overviewMap.initiallyExpanded,e.fixtures.overviewmap.expandFactor=t.components.overviewMap.expandFactor??1.5),t.components.northArrow&&t.components.northArrow.enabled){const i={};t.components.northArrow.arrowIcon&&(i.arrowIcon=t.components.northArrow.arrowIcon),t.components.northArrow.poleIcon&&(i.poleIcon=t.components.northArrow.poleIcon),i&&(e.fixtures.northarrow=i,e.fixturesEnabled.push("northarrow"))}if(t.components.scaleBar&&t.components.scaleBar.enabled){switch(e.map.caption={mapCoords:{disabled:!1},scaleBar:{disabled:!1,imperialScale:t?.components?.scaleBar?.scalebarUnit==="english"||t?.components?.scaleBar?.scalebarUnit==="dual"&&Math.floor(Math.random()*2)===0}},t.components?.mouseInfo?.spatialReference?.wkid){case 4326:e.map.caption.mapCoords.formatter="LAT_LONG_DMS";break;case 3978:e.map.caption.mapCoords.formatter="CANADA_ATLAS_LAMBERT";break;case 102100:e.map.caption.mapCoords.formatter="WEB_MERCATOR";break;default:e.map.caption.mapCoords.formatter="LAT_LONG_DMS";break}t.components.scaleBar.attachTo&&console.warn("attachTo property provided in scaleBar map component cannot be mapped and will be skipped.")}t.components.basemap&&t.components.basemap.enabled&&e.fixturesEnabled.push("basemap")}t.extentSets&&(e.map.extentSets=[],t.extentSets.forEach(i=>{const r={id:i.id,default:{xmin:i.default.xmin,xmax:i.default.xmax,ymin:i.default.ymin,ymax:i.default.ymax,spatialReference:i.spatialReference}};i.full&&(r.full={xmin:i.full.xmin,xmax:i.full.xmax,ymin:i.full.ymin,ymax:i.full.ymax,spatialReference:i.spatialReference}),i.maximum&&(r.maximum={xmin:i.maximum.xmin,xmax:i.maximum.xmax,ymin:i.maximum.ymin,ymax:i.maximum.ymax,spatialReference:i.spatialReference}),e.map.extentSets.push(r)})),t.lodSets&&(e.map.lodSets=t.lodSets),t.tileSchemas&&(e.map.tileSchemas=[],t.tileSchemas.forEach(i=>{const r={id:i.id,name:i.name,extentSetId:i.extentSetId,lodSetId:i.lodSetId,thumbnailTileUrls:[],hasNorthPole:i.hasNorthPole||!1};i.overviewUrl&&(e.fixtures.overviewmap||(e.fixtures.overviewmap={basemaps:{}},e.fixturesEnabled.push("overviewmap")),e.fixtures.overviewmap.basemaps[i.id]={id:i.overviewUrl.id||`overviewmap-basemap-${i.id}`,tileSchemaId:i.id,layers:[{id:i.overviewUrl.id||`overviewmap-basemap-${i.id}-0`,layerType:i.overviewUrl.layerType==="esriDynamic"?li.MAPIMAGE:li.TILE,url:i.overviewUrl.url,opacity:i.overviewUrl.opacity??1}]}),e.map.tileSchemas.push(r)})),t.baseMaps&&(e.map.basemaps=[],t.baseMaps.forEach(i=>{const r={id:i.id,tileSchemaId:i.tileSchemaId,name:i.name,description:i.description,altText:i.altText,thumbnailUrl:i.thumbnailUrl,layers:[]};i.attribution&&(r.attribution={text:{},logo:{}},i.attribution.text&&(r.attribution.text.disabled=!i.attribution.text.enabled,r.attribution.text.value=i.attribution.text.value),i.attribution.logo&&(r.attribution.logo.disabled=!i.attribution.logo.enabled,r.attribution.logo.altText=i.attribution.logo.altText,r.attribution.logo.value=i.attribution.logo.value,r.attribution.logo.link=i.attribution.logo.link)),i.layers.forEach((s,n)=>{const o={id:s.id||`${i.id}-${n}`,layerType:s.layerType==="esriDynamic"?li.MAPIMAGE:li.TILE,url:s.url,opacity:s.opacity??1};r.layers.push(o)}),e.map.basemaps.push(r)})),t.legend&&(e.fixturesEnabled.push("legend"),t.legend.type==="autopopulate"?(e.fixtures.legend={root:{name:"I'm root",children:[]}},e.layers&&e.layers.toReversed().forEach(i=>{if(i.type==="esri-map-image"||i.type==="ogc-wms"){const r={name:i.name??`${i.id} Group`,children:[]};i.sublayers.forEach(s=>{const n={layerId:i.id};s.name&&(n.name=s.name),s.controls&&(n.controls=s.controls),s.disabledControls&&(n.disabledControls=s.disabledControls),i.type==="esri-map-image"?n.sublayerIndex=s.index:(n.sublayerId=s.id,console.warn(`sublayerId property defined in legend entry ${n.layerId} is currently not supported.`)),r.children.push(n)}),e.fixtures.legend.root.children.push(r)}else{const r={layerId:i.id};i.controls&&(r.controls=i.controls),i.disabledControls&&(r.disabledControls=i.disabledControls),e.fixtures.legend.root.children.push(r)}})):e.fixtures.legend={root:UF(t.legend.root)})}function UF(t){const e={name:t.name,children:[]};typeof t.hidden<"u"&&(e.hidden=t.hidden),typeof t.expanded<"u"&&(e.expanded=t.expanded);const i=["identify","opacity","reload","remove","settings","symbology","visibility"];return t.controls&&t.controls.length>0&&(e.controls=kw(t.controls,i),t.controls.includes("visibility")&&e.controls.push("visibilityButton"),(t.controls.length!==1||t.controls[0]!=="visibility")&&console.warn("Legend entry groups currently support only the visibility control. All other controls are currently not supported."),e.controls.push("expandButton")),t.disabledControls&&t.disabledControls.length>0&&(e.disabledControls=kw(t.disabledControls,i),t.disabledControls.includes("visibility")&&e.disabledControls.push("visibilityButton"),(t.disabledControls.length!==1||t.disabledControls[0]!=="visibility")&&console.warn("Legend entry groups currently support only the visibility control. All other controls are currently not supported.")),t.children.forEach(r=>{if(r.layerId)e.children.push(pK(r));else if(r.infoType)r.infoType==="unboundLayer"?console.warn(`unboundLayer infoType in infoSection in children list of legend entry group ${e.name} cannot be mapped and will be skipped.`):(e.children.push({infoType:r.infoType,content:r.content}),typeof r.export<"u"&&console.warn(`export property in infoSection in children list of legend entry group ${e.name} cannot be mapped and will be skipped.`));else if(r.exclusiveVisibility){const s={name:"Visibility Set",children:[],exclusive:!0};typeof r.collapse<"u"&&console.warn(`collapse property in visibilitySet in children list of legend entry group ${e.name} cannot be mapped and will be skipped.`),r.exclusiveVisibility.forEach(n=>{n.layerId?s.children.push(pK(n)):s.children.push(UF(n))}),e.children.push(s)}else e.children.push(UF(r))}),e}function pK(t){const e=t,i=["boundaryZoom","datatable","identify","metadata","opacity","refresh","reload","remove","settings","symbology","visibility"];return t.controls&&t.controls.length>0&&(e.layerControls=kw(t.controls,i),e.layerControls.push("symbology")),t.disabledControls&&t.disabledControls.length>0&&(e.disabledLayerControls=kw(t.disabledControls,i)),t.controlledIds&&(console.warn(`controlledIds property defined in legend entry ${t.layerId} cannot be mapped and will be skipped.`),delete e.controlledIds),t.entryIndex&&(e.sublayerIndex=t.entryIndex,delete t.entryIndex),t.entryId&&console.warn(`entryId property defined in legend entry ${t.layerId} cannot be mapped and will be skipped.`),e}function eat(t){const e=Ek(t);switch(e.id=t.id,e.url=t.url,t.refreshInterval&&(e.refreshInterval=t.refreshInterval,console.warn("Property refreshInterval in layer is currently not supported.")),t.expectedResponseTime&&(e.expectedLoadTime=t.expectedResponseTime),t.metadataUrl&&(e.metadata={url:t.metadataUrl}),t.catalogueUrl&&(e.catalogueUrl=t.catalogueUrl),typeof t.enableStructuredDelete<"u"&&console.warn(`enableStructuredDelete property provided in layer ${t.id} cannot be mapped and will be skipped.`),t.tooltipField&&(e.tooltipField=t.tooltipField),t.tolerance&&(e.mouseTolerance=t.tolerance,t.layerType==="esriDynamic"&&(e.touchTolerance=t.tolerance+10)),t.customRenderer&&(e.customRenderer=t.customRenderer),t.layerType){case"esriDynamic":e.layerType="esri-map-image",typeof t.singleEntryCollapse<"u"&&(e.singleEntryCollapse=t.singleEntryCollapse),t.imageFormat&&(e.imageFormat=t.imageFormat),t.layerEntries&&(e.sublayers=[],t.layerEntries.forEach(i=>{const r=Ek(i);r.index=i.index,e.sublayers.push(r)}));break;case"esriFeature":e.layerType="esri-feature",t.fileType&&(e.layerType=t.fileType==="shapefile"?"file-shape":`file-${t.fileType}`,t.colour&&(e.colour=t.colour),t.latField&&(e.latField=t.latField),t.longField&&(e.longField=t.longField));break;case"ogcWfs":e.layerType="ogc-wfs",t.colour&&(e.colour=t.colour),typeof t.xyInAttribs<"u"&&(e.xyInAttribs=t.xyInAttribs);break;case"ogcWms":e.layerType="ogc-wms",t.suppressGetCapabilities&&console.warn(`suppressGetCapabilities property provided in layer ${t.id} cannot be mapped and will be skipped.`),t.featureInfoMimeType&&(t.featureInfoMimeType==="text/html;fgpv=summary"?e.featureInfoMimeType="text/html":e.featureInfoMimeType=t.featureInfoMimeType),t.legendMimeType&&console.warn(`legendMimeType property provided in layer ${t.id} cannot be mapped and will be skipped.`),t.layerEntries&&(e.sublayers=[],t.layerEntries.forEach(i=>{const r=Ek(i);r.id=i.id,i.currentStyle&&(r.currentStyle=i.currentStyle,console.warn(`currentStyle property provided in layer entry ${i.id} of layer ${t.id} is currently not supported.`)),i.allStyles&&console.warn(`allStyles property provided in layer entry ${i.id} of layer ${t.id} cannot be mapped and will be skipped.`),e.sublayers.push(r)}));break;case"esriImage":e.layerType="esri-imagery";break;case"esriTile":e.layerType="esri-tile";break;default:console.warn(`Unhandled layer type in ramp 2 config ${t.layerType}`)}return t.details&&console.warn(`Details config provided in layer ${t.id} cannot be mapped and will be skipped.`),e}function Ek(t){const e={};t.name&&(e.name=t.name),t.nameField&&(e.nameField=t.nameField),t.extent&&(e.extent=t.extent);const i=["boundaryZoom","datatable","identify","metadata","opacity","refresh","reload","remove","settings","symbology","visibility"];return t.controls&&t.controls.length>0&&(e.controls=kw(t.controls,i),e.controls.push("symbology")),t.disabledControls&&t.disabledControls.length>0&&(e.disabledControls=kw(t.disabledControls,i)),t.state&&(e.state={opacity:t.state.opacity??1,visibility:t.state.visibility??!0,identify:t.state.query??!0,hovertips:t.state.hovertips??!0},typeof t.state.snapshot<"u"&&console.warn(`snapshot property provided in initialLayer settings in layer ${t.id} cannot be mapped and will be skipped.`),typeof t.state.boundingBox<"u"&&console.warn(`boundingBox property provided in initialLayer settings in layer ${t.id} cannot be mapped and will be skipped.`)),typeof t.stateOnly<"u"&&(e.cosmetic=t.stateOnly),t.initialFilteredQuery&&(e.initialFilteredQuery=t.initialFilteredQuery),sat(t,e),(typeof t.toggleSymbology<"u"||t.table)&&(e.fixtures={},typeof t.toggleSymbology<"u"&&(e.fixtures.legend={toggleSymbology:t.toggleSymbology}),t.table&&(e.fixtures.grid={},t.table.title&&(e.fixtures.grid.title=t.table.title),t.table.description&&console.warn(`description property provided in table property in layer ${t.id} cannot be mapped and will be skipped.`),typeof t.table.maximize<"u"&&console.warn(`maximize property provided in table property in layer ${t.id} cannot be mapped and will be skipped.`),t.table.search&&(t.table.search.enabled&&(e.fixtures.grid.search=t.table.search.enabled),t.table.search.value&&(e.fixtures.grid.searchFilter=t.table.search.value)),typeof t.table.lazyFilter<"u"&&console.warn(`lazyFilter property provided in table property in layer ${t.id} cannot be mapped and will be skipped.`),typeof t.table.applyMap<"u"&&(e.fixtures.grid.applyMap=t.table.applyMap),typeof t.table.showFilter<"u"&&(e.fixtures.grid.showFilter=t.table.showFilter),typeof t.table.filterByExtent<"u"&&(e.fixtures.grid.filterByExtent=t.table.filterByExtent),typeof t.table.searchStrictMatch<"u"&&console.warn(`searchStrictMatch property provided in table property in layer ${t.id} cannot be mapped and will be skipped.`),typeof t.table.printEnabled<"u"&&console.warn(`printEnabled property provided in table property in layer ${t.id} cannot be mapped and will be skipped.`),t.table.columns&&(e.fixtures.grid.columns=[],t.table.columns.forEach(r=>{const s={name:r.data};r.title&&(s.title=r.title),r.description&&console.warn(`description property provided in column property in table property in layer ${t.id} cannot be mapped and will be skipped.`),typeof r.visible<"u"&&(s.visible=r.visible),r.width&&(s.width=r.width),r.sort&&(s.sort=r.sort),typeof r.searchable<"u"&&(s.searchable=r.searchable),r.filter&&(s.filter=r.filter),e.fixtures.grid.columns.push(s)})))),e}function kw(t,e){const i=[];return t.forEach(r=>{e.includes("identify")&&r==="query"?i.push("identify"):e.includes("datatable")&&r==="data"?i.push("datatable"):e.includes(r)?i.push(r):console.warn(`Ignored invalid control: ${r}`)}),i}function tat(t,e){if(!t)return;t.search&&(e.fixtures.geosearch={},e.fixtures.geosearch.serviceUrls={geoNames:t.search.serviceUrls.geoNames,geoLocation:t.search.serviceUrls.geoLocation,geoProvince:t.search.serviceUrls.provinces,geoTypes:t.search.serviceUrls.types},t.search.serviceUrls.geoSuggest&&console.warn("geoSuggest property provided in serviceUrls of search service cannot be mapped and will be skipped."),t.search.settings&&(e.fixtures.geosearch.settings=t.search.settings),t.search.disabledSearches&&(e.fixtures.geosearch.settings.disabledSearchTypes=t.search.disabledSearches.filter(r=>r!=="SCALE"))),t.export&&(e.fixtures.export||(e.fixtures.export={},e.fixturesEnabled.push("export")),t.export.title&&(e.fixtures.export.title={selected:t.export.title.isSelected??!0,selectable:t.export.title.isSelectable??!0,value:t.export.title.value??"RAMP-Map / PCAR-Carte"}),t.export.map&&(e.fixtures.export.map={selected:t.export.map.isSelected??!0,selectable:t.export.map.isSelectable??!0},t.export.map.value&&console.warn("value property provided in map export component cannot be mapped and will be skipped.")),t.export.mapElements&&(e.fixtures.export.mapElements={selected:t.export.mapElements.isSelected??!0,selectable:t.export.mapElements.isSelectable??!0},t.export.mapElements.value&&console.warn("value property provided in mapElements export component cannot be mapped and will be skipped.")),t.export.legend&&(e.fixtures.export.legend={selected:t.export.legend.isSelected??!0,selectable:t.export.legend.isSelectable??!0},t.export.legend.columnWidth&&(e.fixtures.export.legend.columnWidth=t.export.legend.columnWidth),t.export.legend.value&&console.warn("value property provided in legend export component cannot be mapped and will be skipped."),typeof t.export.legend.showInfoSymbology<"u"&&console.warn("showInfoSymbology property provided in legend export component cannot be mapped and will be skipped."),typeof t.export.legend.showControlledSymbology<"u"&&console.warn("showControlledSymbology property provided in legend export component cannot be mapped and will be skipped.")),t.export.footnote&&(e.fixtures.export.footnote={selected:t.export.footnote.isSelected??!0,selectable:t.export.footnote.isSelectable??!0,value:t.export.footnote.value??""}),t.export.timestamp&&(e.fixtures.export.timestamp={selected:t.export.timestamp.isSelected??!0,selectable:t.export.timestamp.isSelectable??!0},t.export.timestamp.value&&console.warn("value property provided in timestamp export component cannot be mapped and will be skipped.")),t.export.timeout&&console.warn("timeout property provided in export property of services config cannot be mapped and will be skipped."),typeof t.cleanCanvas<"u"&&console.warn("cleanCanvas property provided in export property of services config cannot be mapped and will be skipped.")),t.proxyUrl&&(e.system.proxyUrl=t.proxyUrl),["corsEverywhere","exportMapUrl","geometryUrl","googleAPIKey","esriLibUrl","geolocation","coordInfo","print"].forEach(r=>{typeof t[r]<"u"&&console.warn(`${r} property provided in services config cannot be mapped and will be skipped.`)})}function iat(t,e){if(t.navBar){e.fixtures.mapnav={zoomOption:t.navBar.zoom||"buttons",items:[]};const s=["geolocator","zoom","home","basemap","help","fullscreen","geosearch","legend"];t.navBar.extra.forEach(n=>{const o=n.toLowerCase();s.includes(o)?e.fixtures.mapnav.items.push(o):console.warn(`Ignored invalid mapnav item: ${n}`)}),e.fixturesEnabled.push("mapnav")}if(t.help&&(e.fixtures.help={location:t.help.folderName&&t.help.folderName!=="default"?`./${t.help.folderName}`:"./help",panelWidth:350},e.fixturesEnabled.push("help")),t.legend){const s=["groupToggle","visibilityToggle"];t.legend.reorderable&&s.push("layerReorder"),t.legend.allowImport&&s.push("wizard"),e.fixtures.legend?e.fixtures.legend.headerControls=s:(e.fixturesEnabled.push("legend"),e.fixtures.legend={headerControls:s,root:{}}),t.legend.isOpen&&t.legend.isOpen.large&&e.panels.open.push({id:"legend"})}e.fixtures.appbar={items:[]},e.fixturesEnabled.push("appbar");const i=["layers","basemap","export","help","geoSearch"];t.appBar?(t.appBar.layers!==!1&&(e.fixtures.appbar.items.push("legend"),e.fixturesEnabled.includes("legend")||e.fixturesEnabled.push("legend")),t.appBar.geoSearch!==!1&&e.fixturesEnabled.includes("geosearch")&&e.fixtures.appbar.items.push("geosearch"),t.appBar.basemap!==!1&&e.fixtures.appbar.items.push("basemap")):(e.fixtures.appbar.items.push("legend"),e.fixturesEnabled.includes("legend")||e.fixturesEnabled.push("legend"),e.fixtures.appbar.items.push("geosearch"),e.fixtures.appbar.items.push("basemap")),t.sideMenu&&t.sideMenu.items&&t.sideMenu.items.length>0&&t.sideMenu.items.forEach(s=>{s.forEach(n=>{n==="layers"&&!e.fixtures.appbar.items.includes("legend")?(e.fixtures.appbar.items.push("legend"),e.fixturesEnabled.includes("legend")||e.fixturesEnabled.push("legend")):n!=="layers"&&i.includes(n)&&!e.fixtures.appbar.items.includes(n.toLowerCase())&&(e.fixtures.appbar.items.push(n.toLowerCase()),(n.toLowerCase()==="help"||n.toLowerCase()==="export"&&!e.fixturesEnabled.includes(n.toLowerCase()))&&e.fixturesEnabled.push(n.toLowerCase()))})}),t.tableIsOpen&&t.tableIsOpen.large,["fullscreen","theme","logoUrl","failureFeedback","title","restrictNavigation","about"].forEach(s=>{typeof t[s]<"u"&&console.warn(`${s} property provided in services config cannot be mapped and will be skipped.`)})}function rat(t,e){t.areasOfInterest.enable&&(e.fixturesEnabled.includes("areas-of-interest")||e.fixturesEnabled.push("areas-of-interest"),t.areasOfInterest.areas&&(e.fixtures["areas-of-interest"]={areas:t.areasOfInterest.areas.map(i=>({title:`${i["title-en-CA"]} / ${i["title-fr-CA"]}`,thumbnail:i.thumbnailUrl,altText:i.altText??"",description:i.description??"",extent:{xmin:i.xmin,xmax:i.xmax,ymin:i.ymin,ymax:i.ymax,spatialReference:{wkid:i.wkid}}}))}))}function sat(t,e){const i=t.outfields&&t.outfields!=="*";if(!i&&!t.fieldMetadata)return;const r={fieldInfo:[],exclusiveFields:!1,enforceOrder:!1};t.fieldMetadata?(r.fieldInfo=t.fieldMetadata.map(s=>{const n={name:s.data};return s.alias&&(n.alias=s.alias),n}),i&&(t.outfields.split(",").map(n=>n.trim()).forEach(n=>{r.fieldInfo.findIndex(o=>o.name===n)===-1&&r.fieldInfo.push({name:n})}),r.exclusiveFields=!0)):i&&(r.fieldInfo=t.outfields.split(",").map(s=>({name:s.trim()})),r.exclusiveFields=!0),e.fieldMetadata=r}console.info(`RAMP v4.4.0 [${"4c1ef1acfdba4fc936ed00e1d128b1e9cbcccdf8".slice(0,9)}] (Built on ${new Date("Tue Jan 30 13:33:15 2024 -0500".toString()).toLocaleString()})`);const u2={major:"4",minor:"4",patch:"0",timestamp:"Tue Jan 30 13:33:15 2024 -0500",hash:"4c1ef1acfdba4fc936ed00e1d128b1e9cbcccdf8"};function Nmt(t){return Kot(t)}const Fmt=(t,e,i)=>new ast(t,e,i),Vb=new Zze;export{vlt as $,gb as A,Mo as B,o1 as C,Jct as D,Fa as E,Wct as F,Zct as G,xC as H,blt as I,exe as J,Wo as K,Fs as L,Uw as M,nct as N,l0e as O,txe as P,sct as Q,X9 as R,F0 as S,Ga as T,Et as U,$0 as V,Rx as W,oP as X,oct as Y,hSe as Z,ilt as _,DOe as a,HQ as a$,Vb as a0,Fmt as a1,cAe as a2,TAe as a3,Bh as a4,cSe as a5,iMe as a6,rMe as a7,sMe as a8,Le as a9,Xdt as aA,tpt as aB,zoe as aC,iLe as aD,gK as aE,slt as aF,$u as aG,Wve as aH,Jve as aI,Zve as aJ,tbe as aK,obe as aL,BX as aM,UX as aN,VX as aO,nbe as aP,hbe as aQ,dbe as aR,DA as aS,Eve as aT,qve as aU,sL as aV,Va as aW,Fw as aX,J4 as aY,x0e as aZ,qQ as a_,Su as aa,Il as ab,O0 as ac,MT as ad,T9 as ae,E9 as af,lee as ag,c0 as ah,I9 as ai,Olt as aj,kse as ak,Rbe as al,Qg as am,Hv as an,Tx as ao,UMe as ap,Cn as aq,bs as ar,kI as as,iG as at,i1 as au,W0 as av,Rle as aw,G7 as ax,xlt as ay,Da as az,lat as b,Sl as b$,S0e as b0,$3 as b1,O3 as b2,wlt as b3,xat as b4,Zge as b5,clt as b6,aOe as b7,Ene as b8,Kn as b9,Cm as bA,$m as bB,u1 as bC,Sp as bD,fp as bE,K8 as bF,Ur as bG,Y8 as bH,X8 as bI,s5 as bJ,DMe as bK,Cs as bL,hFe as bM,RI as bN,Li as bO,D9 as bP,yB as bQ,Rlt as bR,gut as bS,Eut as bT,C0 as bU,SQ as bV,B0 as bW,O4 as bX,kie as bY,lV as bZ,Eue as b_,ST as ba,n1 as bb,d8 as bc,h1 as bd,Mc as be,gu as bf,Sat as bg,Ct as bh,ja as bi,Ta as bj,Dw as bk,y0 as bl,$9e as bm,$ft as bn,Rft as bo,st as bp,vn as bq,bn as br,Blt as bs,hee as bt,Fi as bu,Nt as bv,Hm as bw,Qb as bx,D0 as by,Jr as bz,Ce as c,Glt as c$,Yo as c0,X7e as c1,kmt as c2,zi as c3,Kr as c4,mn as c5,Ri as c6,Os as c7,gr as c8,ht as c9,klt as cA,QQ as cB,l9 as cC,b0e as cD,ydt as cE,yq as cF,vdt as cG,Ec as cH,odt as cI,Nne as cJ,jne as cK,kne as cL,lm as cM,fat as cN,pDe as cO,sSe as cP,dwe as cQ,RQ as cR,zne as cS,Bne as cT,cdt as cU,ldt as cV,rwe as cW,C9 as cX,Om as cY,Hlt as cZ,Wlt as c_,Br as ca,Ns as cb,Nh as cc,Zr as cd,ti as ce,wi as cf,ar as cg,Ot as ch,Cr as ci,ny as cj,vj as ck,Nht as cl,Pht as cm,Mte as cn,jut as co,jD as cp,gs as cq,pr as cr,m_e as cs,Xae as ct,Ik as cu,hdt as cv,r_e as cw,cp as cx,bK as cy,fut as cz,Io as d,z4 as d$,qlt as d0,Ebe as d1,ddt as d2,VF as d3,H4 as d4,Ine as d5,ui as d6,d6 as d7,KG as d8,YCe as d9,Dt as dA,Je as dB,A3 as dC,Er as dD,qm as dE,Pt as dF,a1 as dG,t_ as dH,Xw as dI,e_ as dJ,c1 as dK,Ym as dL,_a as dM,_S as dN,Ye as dO,Fie as dP,vD as dQ,G3 as dR,Ba as dS,za as dT,cm as dU,Eu as dV,Tp as dW,IRe as dX,TRe as dY,SRe as dZ,sB as d_,zCe as da,vht as db,_5e as dc,wht as dd,bht as de,_ht as df,bOe as dg,s6 as dh,ive as di,FA as dj,Ax as dk,LX as dl,w9 as dm,CX as dn,Qdt as dp,fpt as dq,opt as dr,Ydt as ds,P5e as dt,but as du,Tut as dv,Iut as dw,Kdt as dx,mpt as dy,Nmt as dz,h as e,pp as e$,Ws as e0,it as e1,Cl as e2,lQ as e3,k4 as e4,V9 as e5,P3 as e6,$S as e7,Ea as e8,Tl as e9,Z2e as eA,Wut as eB,OD as eC,Plt as eD,hp as eE,Tm as eF,Vre as eG,R9 as eH,Sct as eI,j3e as eJ,q1e as eK,vX as eL,_lt as eM,ZM as eN,uat as eO,lht as eP,kle as eQ,xN as eR,aw as eS,HFe as eT,Lle as eU,Ui as eV,NDe as eW,kee as eX,Z9 as eY,HA as eZ,WK as e_,A_e as ea,q4 as eb,C_e as ec,qke as ed,Mut as ee,ml as ef,zw as eg,hut as eh,Bct as ei,mut as ej,uut as ek,kl as el,VAe as em,mB as en,Pw as eo,iQ as ep,It as eq,Kf as er,e9e as es,Ilt as et,Hw as eu,Ep as ev,rX as ew,nie as ex,_p as ey,qA as ez,Tt as f,z3 as f$,xi as f0,q3 as f1,xo as f2,lIe as f3,tw as f4,qF as f5,WFe as f6,Ok as f7,Ia as f8,yS as f9,_at as fA,K3 as fB,Ove as fC,aat as fD,r0e as fE,zb as fF,o9 as fG,bme as fH,UA as fI,sw as fJ,toe as fK,Yt as fL,N0 as fM,Ls as fN,OMe as fO,fC as fP,MMe as fQ,K3e as fR,_C as fS,cB as fT,cee as fU,VD as fV,sEe as fW,gD as fX,Y3 as fY,vG as fZ,JA as f_,PQ as fa,xm as fb,oEe as fc,ol as fd,s_e as fe,AX as ff,$ve as fg,BFe as fh,Mn as fi,GFe as fj,Ud as fk,X0 as fl,jrt as fm,ws as fn,at as fo,Xe as fp,o4 as fq,Co as fr,Qh as fs,Ln as ft,v0e as fu,Zut as fv,V2e as fw,xp as fx,Sut as fy,gdt as fz,hD as g,St as g$,U3 as g0,Gte as g1,rEe as g2,FD as g3,DD as g4,bAe as g5,uC as g6,ns as g7,Eat as g8,lB as g9,P4 as gA,pn as gB,MFe as gC,lX as gD,v1e as gE,Drt as gF,_s as gG,n4 as gH,tst as gI,aF as gJ,ist as gK,lD as gL,O6 as gM,Fut as gN,Sx as gO,L$e as gP,lpt as gQ,ypt as gR,ppt as gS,dpt as gT,Xm as gU,c5e as gV,zct as gW,Ao as gX,nD as gY,EIe as gZ,rD as g_,uD as ga,hC as gb,RS as gc,Zm as gd,Pie as ge,Si as gf,lEe as gg,aEe as gh,zm as gi,sC as gj,ea as gk,nEe as gl,Jut as gm,Hut as gn,J2e as go,zae as gp,C6e as gq,qae as gr,hat as gs,dat as gt,c2 as gu,ki as gv,upt as gw,iPe as gx,vs as gy,Nl as gz,Ze as h,a0 as h$,_xe as h0,Ip as h1,qw as h2,Fct as h3,Nct as h4,Pct as h5,BIe as h6,U3e as h7,MIe as h8,AIe as h9,mC as hA,l_e as hB,am as hC,B4 as hD,c_e as hE,Hr as hF,vE as hG,Wj as hH,Wr as hI,Sa as hJ,hj as hK,yc as hL,c$ as hM,Ys as hN,Js as hO,xce as hP,Krt as hQ,Qrt as hR,d_ as hS,l$ as hT,u3 as hU,ir as hV,L$ as hW,iK as hX,Pf as hY,wfe as hZ,li as h_,dSe as ha,dIe as hb,pIe as hc,fIe as hd,ch as he,mIe as hf,yIe as hg,gIe as hh,vIe as hi,bIe as hj,wIe as hk,_Ie as hl,xIe as hm,UD as hn,SIe as ho,fse as hp,est as hq,m$ as hr,qt as hs,ry as ht,sy as hu,Op as hv,Lw as hw,Mme as hx,YOe as hy,cat as hz,Kxe as i,xmt as i$,rst as i0,dd as i1,jh as i2,nm as i3,ty as i4,Ks as i5,k5 as i6,ost as i7,m1e as i8,x1e as i9,SMe as iA,zX as iB,Wv as iC,VSe as iD,hie as iE,Cve as iF,qct as iG,die as iH,i3e as iI,Fve as iJ,t3e as iK,UFe as iL,YV as iM,alt as iN,u9e as iO,ISe as iP,Gb as iQ,ul as iR,Hn as iS,n_ as iT,oee as iU,kbe as iV,Clt as iW,F4 as iX,F$e as iY,Bm as iZ,kX as i_,Vne as ia,W4 as ib,dlt as ic,Nlt as id,$5 as ie,y_e as ig,cD as ih,fSe as ii,mSe as ij,rct as ik,Flt as il,hm as im,eG as io,Ure as ip,CS as iq,xme as ir,Rme as is,Lme as it,vat as iu,Mie as iv,m3e as iw,y3e as ix,SAe as iy,Vct as iz,kn as j,cpt as j$,Tve as j0,_ve as j1,RX as j2,dp as j3,uB as j4,mi as j5,MRe as j6,vl as j7,jf as j8,FMe as j9,W6 as jA,ue as jB,llt as jC,T3 as jD,Ef as jE,ioe as jF,B6 as jG,UOe as jH,Sq as jI,Ac as jJ,Bn as jK,Ap as jL,Tdt as jM,cst as jN,sst as jO,u7e as jP,YS as jQ,ust as jR,bA as jS,VS as jT,cFe as jU,sve as jV,$2e as jW,b9 as jX,lC as jY,RSe as jZ,Tlt as j_,yat as ja,pdt as jb,g$e as jc,bdt as jd,Jle as je,C3 as jf,yht as jg,xht as jh,vo as ji,Ii as jj,yot as jk,Iot as jl,got as jm,nst as jn,bat as jo,Elt as jp,jve as jq,wx as jr,Ss as js,Ome as jt,kme as ju,_me as jv,j9 as jw,vut as jx,yut as jy,TV as jz,ce as k,_b as k$,tPe as k0,XLe as k1,rpt as k2,spt as k3,npt as k4,hpt as k5,ept as k6,Hh as k7,s0 as k8,Mj as k9,Dlt as kA,Ult as kB,jlt as kC,Vlt as kD,ES as kE,Ml as kF,Ewe as kG,Yre as kH,Kre as kI,TMe as kJ,hi as kK,ks as kL,Ate as kM,Tct as kN,zF as kO,Zat as kP,put as kQ,R4 as kR,B$e as kS,D$e as kT,sdt as kU,fdt as kV,V$e as kW,Ddt as kX,jdt as kY,dut as kZ,lp as k_,apt as ka,ipt as kb,Cee as kc,On as kd,Pn as ke,Ne as kf,dh as kg,d5 as kh,Rae as ki,xK as kj,$a as kk,Rl as kl,$h as km,Xat as kn,Fge as ko,El as kp,G4 as kq,_l as kr,ult as ks,Vle as kt,CA as ku,fb as kv,lw as kw,Y3e as kx,$dt as ky,zlt as kz,s9 as l,tne as l$,zFe as l0,YNe as l1,qNe as l2,aE as l3,v9 as l4,P9 as l5,elt as l6,$me as l7,HOe as l8,ic as l9,Zre as lA,P1 as lB,Rie as lC,kM as lD,qne as lE,u7 as lF,JFe as lG,xdt as lH,Sht as lI,L5e as lJ,EG as lK,SC as lL,SG as lM,Lg as lN,pSe as lO,$ht as lP,Oht as lQ,Yse as lR,JD as lS,Aht as lT,Cht as lU,HD as lV,rw as lW,f4e as lX,qi as lY,f6 as lZ,b4e as l_,vc as la,xc as lb,UQ as lc,Qat as ld,NV as le,Jee as lf,Dde as lg,TI as lh,Bj as li,sit as lj,_j as lk,Mi as ll,Ho as lm,As as ln,PF as lo,bfe as lp,Xrt as lq,t1 as lr,bhe as ls,xs as lt,h0 as lu,d0 as lv,e2e as lw,nve as lx,MX as ly,tlt as lz,Ll as m,idt as m$,v4e as m0,FCe as m1,TCe as m2,w4e as m3,Fht as m4,fne as m5,xCe as m6,m4e as m7,R4e as m8,Q3 as m9,HP as mA,kge as mB,Lee as mC,Mct as mD,Zo as mE,C6 as mF,$j as mG,Tj as mH,yo as mI,Xge as mJ,kSe as mK,TSe as mL,MSe as mM,z6 as mN,Cme as mO,Lat as mP,d9e as mQ,A$e as mR,hq as mS,j$e as mT,mdt as mU,Oxe as mV,Xut as mW,nR as mX,oR as mY,adt as mZ,Sr as m_,Dht as ma,hCe as mb,yr as mc,ght as md,lOe as me,QD as mf,W4e as mg,lne as mh,une as mi,e7 as mj,Ib as mk,J4e as ml,G4e as mm,t7 as mn,K5e as mo,pm as mp,m6 as mq,HX as mr,Gct as ms,r9 as mt,dye as mu,wp as mv,h_ as mw,Kh as mx,zQe as my,Ict as mz,xr as n,o5e as n$,pat as n0,vDe as n1,dV as n2,dve as n3,Slt as n4,OX as n5,rve as n6,$X as n7,udt as n8,u_e as n9,fm as nA,Oh as nB,jC as nC,iut as nD,Tle as nE,cle as nF,Ile as nG,vFe as nH,gft as nI,CFe as nJ,JS as nK,vft as nL,np as nM,qj as nN,l0 as nO,zd as nP,_u as nQ,fn as nR,Qk as nS,FQ as nT,tm as nU,Uht as nV,Rr as nW,W9 as nX,e5e as nY,oht as nZ,J9 as n_,Dne as na,lut as nb,n_e as nc,o_e as nd,Alt as ne,jct as nf,Uct as ng,Dct as nh,Zle as ni,Bb as nj,imt as nk,rlt as nl,RG as nm,Eht as nn,wdt as no,Hae as np,F7 as nq,FC as nr,bh as ns,Nle as nt,oMe as nu,aMe as nv,lMe as nw,X$e as nx,cn as ny,Cb as nz,rmt as o,U0 as o0,aht as o1,hht as o2,i_ as o3,OG as o4,$G as o5,mht as o6,cht as o7,pht as o8,nL as o9,wut as oA,_ut as oB,s3e as oC,r3e as oD,dC as oE,mp as oF,WOe as oG,xut as oH,i1e as oI,Q9 as oJ,Gut as oK,UAe as oL,Edt as oM,kdt as oN,Pdt as oO,Fdt as oP,Vdt as oQ,Gdt as oR,fht as oa,kG as ob,Nse as oc,dht as od,jht as oe,V_ as of,rq as og,sR as oh,bne as oi,WX as oj,_9 as ok,Lbe as ol,Abe as om,JX as on,Mlt as oo,$lt as op,I6e as oq,HS as or,cut as os,M9 as ot,g9e as ou,v9e as ov,p9e as ow,pue as ox,zve as oy,V0e as oz,tt as p,m9 as q,ee as r,si as s,Re as t,Hct as u,Pl as v,Xt as w,HK as x,p as y,gat as z};
