import{_ as p}from"./preload-helper-388ac9d5.js";import{dt as d,c as n,r as a,U as h,du as b,dv as w,K as v,bP as z,dw as _}from"./main-8eb577c9.js";let i=c();function c(){return new d(50)}function x(){i=c()}function I(e,r){if(e.type==="icon")return y(e,r);if(e.type==="object")return l(e,r);throw new n("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function O(e,r){if(e.type==="icon")return g(e,r);if(e.type==="object")return L(e,r);throw new n("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function y(e,r){if(e.resource?.href)return j(e.resource.href).then(t=>[t.width,t.height]);if(e.resource?.primitive)return a(r)?[r,r]:[256,256];throw new n("symbol3d:invalid-symbol-layer","symbol layers of type Icon must have either an href or a primitive resource")}function g(e,r){return y(e,r).then(t=>{if(e.size==null)return t;const o=t[0]/t[1];return o>1?[e.size,e.size/o]:[e.size*o,e.size]})}function j(e){return h(e,{responseType:"image"}).then(r=>r.data)}function l(e,r){return B(e,r).then(t=>b(t))}async function L(e,r){const t=await l(e,r);return w(t,e)}async function B(e,r){if(!e.isPrimitive){const o=v(e.resource?.href),s=i.get(o);if(s!==void 0)return s;const f=await p(()=>import("./objectResourceUtils-ddb480cd.js").then(m=>m.o),["./objectResourceUtils-ddb480cd.js","./devEnvironmentUtils-f2a1f21e.js","./main-8eb577c9.js","./preload-helper-388ac9d5.js","./main-7e4e971a.css","./mat3f64-221ce671.js","./mat4f64-1413b4a7.js","./BufferView-067dc1c7.js","./vec33-76e2f0a2.js","./DefaultMaterial_COLOR_GAMMA-70078e62.js","./types-e1c0a5bf.js","./enums-64ab819c.js","./quat-2013e5e2.js","./quatf64-3363c48e.js","./resourceUtils-a8ed8f9e.js","./basicInterfaces-b7051eb1.js","./Indices-56098ffd.js","./NestedMap-7c434b47.js","./requestImageUtils-00d96779.js","./sphere-5fa18887.js","./lineSegment-3871b7e1.js","./VertexAttribute-15d1866a.js","./OrderIndependentTransparency-e1b3a745.js","./Texture-1b8ff28d.js","./VertexArrayObject-08d42ae7.js","./VertexElementDescriptor-2925c6af.js","./InterleavedLayout-01464a7a.js","./vec3f32-ad1dc57f.js","./doublePrecisionUtils-e3c3d0d8.js","./symbolColorUtils-b81cd9e0.js"],import.meta.url),u=await f.fetch(o,{disableTextures:!0});return i.put(o,u.referenceBoundingBox),u.referenceBoundingBox}let t=null;if(e.resource&&e.resource.primitive&&(t=z(_(e.resource.primitive)),a(r)))for(let o=0;o<t.length;o++)t[o]*=r;return t?Promise.resolve(t):Promise.reject(new n("symbol:invalid-resource","The symbol does not have a valid resource"))}export{x as clearBoundingBoxCache,y as computeIconLayerResourceSize,I as computeLayerResourceSize,O as computeLayerSize,l as computeObjectLayerResourceSize};
